{"version":3,"file":null,"sources":["/mnt/c/Users/npt/projects/jsGraph/src/graph.position.js","/mnt/c/Users/npt/projects/jsGraph/src/graph.util.js","/mnt/c/Users/npt/projects/jsGraph/src/renderer/style.js","/mnt/c/Users/npt/projects/jsGraph/src/renderer/axes.js","/mnt/c/Users/npt/projects/jsGraph/src/renderer/annotations.js","/mnt/c/Users/npt/projects/jsGraph/src/renderer/main.js","/mnt/c/Users/npt/projects/jsGraph/src/renderer/mixin.js","/mnt/c/Users/npt/projects/jsGraph/src/mixins/graph.mixin.event.js","/mnt/c/Users/npt/projects/jsGraph/src/util/data_aggregator.js","/mnt/c/Users/npt/projects/jsGraph/src/util/fit_lm.js","/mnt/c/Users/npt/projects/jsGraph/src/util/waveform.js","/mnt/c/Users/npt/projects/jsGraph/src/graph.core.js","/mnt/c/Users/npt/projects/jsGraph/src/graph.legend.js","/mnt/c/Users/npt/projects/jsGraph/src/mixins/graph.mixin.event_graph.js","/mnt/c/Users/npt/projects/jsGraph/src/graph.axis.js","/mnt/c/Users/npt/projects/jsGraph/src/graph.axis.x.js","/mnt/c/Users/npt/projects/jsGraph/src/graph.axis.y.js","/mnt/c/Users/npt/projects/jsGraph/src/graph.axis.x.bar.js","/mnt/c/Users/npt/projects/jsGraph/src/graph.axis.x.time.js","/mnt/c/Users/npt/projects/jsGraph/src/mixins/graph.mixin.errorbars.js","/mnt/c/Users/npt/projects/jsGraph/src/series/graph.serie.js","/mnt/c/Users/npt/projects/jsGraph/src/series/graph.serie.scatter.js","/mnt/c/Users/npt/projects/jsGraph/src/series/graph.serie.line.js","/mnt/c/Users/npt/projects/jsGraph/src/mixins/graph.mixin.serie3d.js","/mnt/c/Users/npt/projects/jsGraph/src/series/graph.serie.line.3d.js","/mnt/c/Users/npt/projects/jsGraph/src/series/graph.serie.bar.js","/mnt/c/Users/npt/projects/jsGraph/src/series/graph.serie.box.js","/mnt/c/Users/npt/projects/jsGraph/src/series/graph.serie.line.colored.js","/mnt/c/Users/npt/projects/jsGraph/src/series/graph.serie.zone.js","/mnt/c/Users/npt/projects/jsGraph/src/series/graph.serie.zone.3d.js","/mnt/c/Users/npt/projects/jsGraph/src/series/graph.serie.densitymap.js","/mnt/c/Users/npt/projects/jsGraph/src/series/graph.serie.contour.js","/mnt/c/Users/npt/projects/jsGraph/src/shapes/graph.shape.js","/mnt/c/Users/npt/projects/jsGraph/src/shapes/graph.shape.areaundercurve.js","/mnt/c/Users/npt/projects/jsGraph/src/shapes/graph.shape.line.js","/mnt/c/Users/npt/projects/jsGraph/src/shapes/graph.shape.arrow.js","/mnt/c/Users/npt/projects/jsGraph/src/shapes/graph.shape.ellipse.js","/mnt/c/Users/npt/projects/jsGraph/src/shapes/graph.shape.label.js","/mnt/c/Users/npt/projects/jsGraph/src/shapes/graph.shape.polyline.js","/mnt/c/Users/npt/projects/jsGraph/src/shapes/graph.shape.polygon.js","/mnt/c/Users/npt/projects/jsGraph/src/shapes/graph.shape.nmrintegral.js","/mnt/c/Users/npt/projects/jsGraph/src/shapes/graph.shape.rect.js","/mnt/c/Users/npt/projects/jsGraph/src/shapes/graph.shape.peakintegration2d.js","/mnt/c/Users/npt/projects/jsGraph/src/shapes/graph.shape.cross.js","/mnt/c/Users/npt/projects/jsGraph/src/shapes/graph.shape.peakboundariescenter.js","/mnt/c/Users/npt/projects/jsGraph/src/shapes/graph.shape.html.js","/mnt/c/Users/npt/projects/jsGraph/src/plugins/graph.plugin.js","/mnt/c/Users/npt/projects/jsGraph/src/plugins/graph.plugin.drag.js","/mnt/c/Users/npt/projects/jsGraph/src/plugins/graph.plugin.shape.js","/mnt/c/Users/npt/projects/jsGraph/src/plugins/graph.plugin.selectScatter.js","/mnt/c/Users/npt/projects/jsGraph/src/plugins/graph.plugin.zoom.js","/mnt/c/Users/npt/projects/jsGraph/src/graph.lru.js","/mnt/c/Users/npt/projects/jsGraph/src/plugins/graph.plugin.timeseriemanager.js","/mnt/c/Users/npt/projects/jsGraph/src/plugins/graph.plugin.serielinedifference.js","/mnt/c/Users/npt/projects/jsGraph/src/plugins/graph.plugin.axissplitting.js","/mnt/c/Users/npt/projects/jsGraph/src/plugins/graph.plugin.makeTracesDifferent.js","/mnt/c/Users/npt/projects/jsGraph/src/plugins/graph.plugin.peakpicking.js","/mnt/c/Users/npt/projects/jsGraph/src/graph.js"],"sourcesContent":["function _parsePx( px ) {\r\n  if ( px && px.indexOf && px.indexOf( 'px' ) > -1 ) {\r\n    return parseInt( px.replace( 'px', '' ) );\r\n  }\r\n  return false;\r\n}\r\n\r\nfunction isNumeric( n ) {\r\n  return !isNaN( parseFloat( n ) ) && isFinite( n );\r\n}\r\n\r\n/**\r\n * Utility class to compute positioning\r\n * @class\r\n */\r\nclass Position {\r\n  constructor( x, y, dx, dy ) {\r\n    if ( typeof x == 'object' ) {\r\n      this.x = x.x;\r\n      this.y = x.y;\r\n      this.dx = x.dx;\r\n      this.dy = x.dy;\r\n    } else {\r\n      this.x = x;\r\n      this.y = y;\r\n      this.dx = dx;\r\n      this.dy = dy;\r\n    }\r\n  }\r\n\r\n  duplicate() {\r\n    return new Position( this.x, this.y, this.dx, this.dy );\r\n  }\r\n\r\n  /**\r\n   *  Computes the position of the position\r\n   *  @param {Graph} graph - The graph for which the position has to be computed\r\n   *  @param {AxisX} xAxis - The x axis to consider (has to belong to the graph)\r\n   *  @param {AxisY} yAxis - The y axis to consider (has to belong to the graph)\r\n   *  @param {Serie} [serie] - For non-existing y value, use a serie to compute it automatically from the serie data\r\n   *  @return {Object} An object in the format ```{x: xPx, y: yPx}``` containing the position in pixels of the position\r\n   */\r\n  compute( graph, xAxis, yAxis, serie ) {\r\n    if ( !graph || !xAxis || !yAxis || !graph.hasXAxis || !graph.hasYAxis ) {\r\n      graph.throw();\r\n    }\r\n\r\n    if ( !graph.hasXAxis( xAxis ) ) {\r\n      throw 'Graph does not contain the x axis that was used as a parameter';\r\n    }\r\n\r\n    if ( !graph.hasYAxis( yAxis ) ) {\r\n      throw 'Graph does not contain the x axis that was used as a parameter';\r\n    }\r\n\r\n    return this._compute( graph, xAxis, yAxis, serie );\r\n  }\r\n\r\n  _compute( graph, xAxis, yAxis, serie ) {\r\n    var relativeTo = this._relativeTo;\r\n    if ( relativeTo ) {\r\n      var relativeToComputed = relativeTo._compute( graph, xAxis, yAxis, serie );\r\n    }\r\n\r\n    var parsed,\r\n      pos = {\r\n        x: false,\r\n        y: false\r\n      };\r\n\r\n    if ( !xAxis ) {\r\n      xAxis = graph.getXAxis();\r\n    }\r\n\r\n    if ( !yAxis ) {\r\n      yAxis = graph.getYAxis();\r\n    }\r\n\r\n    for ( var i in pos ) {\r\n      var axis = i == 'x' ? xAxis : yAxis;\r\n      var val = this[ i ];\r\n      var dval = this[ `d${i}` ];\r\n\r\n      if (\r\n        val === undefined &&\r\n        ( ( dval !== undefined && relativeTo === undefined ) ||\r\n          relativeTo === undefined )\r\n      ) {\r\n        if ( i == 'x' ) {\r\n          if ( dval === undefined ) {\r\n            continue;\r\n          }\r\n\r\n          pos[ i ] = relativeTo ? relativeTo[ i ] : 0;\r\n        } else if ( this.x !== undefined && serie ) {\r\n          if ( _parsePx( this.x ) !== false ) {\r\n            console.warn(\r\n              'You have defined x in px and not y. Makes no sense. Returning 0 for y'\r\n            );\r\n            pos[ i ] = 0;\r\n          } else {\r\n            try {\r\n              var closest = serie.getClosestPointToXY( this.x );\r\n\r\n              if ( !closest ) {\r\n                throw new Error(\r\n                  `Could not find y position for x = ${this.x\r\n                  } on serie \"${serie.getName()}\". Returning 0 for y.`\r\n                );\r\n              }\r\n\r\n              pos[ i ] = serie.getY( closest.yClosest );\r\n            } catch ( error ) {\r\n              console.error( error );\r\n              pos[ i ] = 0;\r\n            }\r\n          }\r\n        }\r\n      } else if ( val !== undefined ) {\r\n        pos[ i ] = this.getPx( val, axis );\r\n      }\r\n\r\n      if ( dval !== undefined ) {\r\n        var def =\r\n          val !== undefined ||\r\n          relativeToComputed == undefined ||\r\n          relativeToComputed[ i ] == undefined ?\r\n          pos[ i ] :\r\n          relativeToComputed[ i ];\r\n\r\n        if (\r\n          i == 'y' &&\r\n          relativeToComputed &&\r\n          relativeToComputed.x !== undefined &&\r\n          relativeToComputed.y == undefined\r\n        ) {\r\n          if ( !serie ) {\r\n            throw new Error( 'Error. No serie exists. Cannot find y value' );\r\n            return;\r\n          }\r\n\r\n          var closest = serie.getClosestPointToXY( relativeTo.x );\r\n          if ( closest ) {\r\n            def = serie.getY( closest.yMin );\r\n          }\r\n\r\n          //console.log( relativeTo.x, closest, serie.getY( closest.yMin ), def );\r\n        }\r\n\r\n        if ( !def ) {\r\n          def = 0;\r\n        }\r\n\r\n        if ( ( parsed = _parsePx( dval ) ) !== false ) {\r\n          // dx in px => val + 10px\r\n\r\n          pos[ i ] = def + parsed; // return integer (will be interpreted as px)\r\n        } else if ( ( parsed = this._parsePercent( dval ) ) !== false ) {\r\n          pos[ i ] = def + this._getPositionPx( parsed, true, axis, graph ); // returns xx%\r\n        } else if ( axis ) {\r\n          pos[ i ] = def + axis.getRelPx( dval ); // px + unittopx\r\n        }\r\n      }\r\n    }\r\n\r\n    return pos;\r\n  }\r\n\r\n  _getPositionPx( value, x, axis, graph ) {\r\n    var parsed;\r\n\r\n    if ( ( parsed = _parsePx( value ) ) !== false ) {\r\n      return parsed; // return integer (will be interpreted as px)\r\n    }\r\n\r\n    if ( ( parsed = this._parsePercent( value ) ) !== false ) {\r\n      return (\r\n        ( parsed / 100 ) *\r\n        ( x ? graph.getDrawingWidth() : graph.getDrawingHeight() )\r\n      );\r\n    } else if ( axis ) {\r\n      return axis.getPos( value );\r\n    }\r\n  }\r\n\r\n  _parsePercent( percent ) {\r\n    if ( percent && percent.indexOf && percent.indexOf( '%' ) > -1 ) {\r\n      return percent;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   *  Computes the value in pixels of an amplitude (or a distance) for a certain axis\r\n   *  @param {Number} value - The value in axis unit\r\n   *  @param {Axis} Axis - The x axis to consider (has to belong to the graph)\r\n   *  @return {String} The value in pixels, e.g. \"20px\"\r\n   */\r\n  getDeltaPx( value, axis ) {\r\n    var v;\r\n    if ( ( v = _parsePx( value ) ) !== false ) {\r\n      return `${v}px`;\r\n    } else {\r\n      return `${axis.getRelPx(value)}px`;\r\n    }\r\n  }\r\n\r\n  deltaPosition( mode, delta, axis ) {\r\n    mode = mode == 'y' ? 'y' : 'x';\r\n    var ref = this[ mode ],\r\n      refd = this[ `d${mode}` ],\r\n      refPx,\r\n      deltaPx;\r\n\r\n    if ( ref !== undefined ) {\r\n      if ( ( refPx = _parsePx( ref ) ) !== false ) {\r\n        if ( ( deltaPx = _parsePx( delta ) ) !== false ) {\r\n          this[ mode ] = `${refPx + deltaPx}px`;\r\n        } else {\r\n          this[ mode ] = `${refPx + axis.getRelPx(delta)}px`;\r\n        }\r\n      } else {\r\n        ref = this.getValPosition( ref, axis );\r\n\r\n        if ( ( deltaPx = _parsePx( delta ) ) !== false ) {\r\n          this[ mode ] = ref + axis.getRelVal( deltaPx );\r\n        } else {\r\n          this[ mode ] = ref + delta;\r\n        }\r\n      }\r\n    } else if ( refd !== undefined ) {\r\n      if ( mode == 'y' && ref === undefined && !this._relativeTo ) {\r\n        // This means that the shape is placed by the x value. Therefore, the dy is only a stand-off.\r\n        // Therefore, we do nothing\r\n        return;\r\n      }\r\n\r\n      if ( ( refPx = _parsePx( refd ) ) !== false ) {\r\n        if ( ( deltaPx = _parsePx( delta ) ) !== false ) {\r\n          this[ `d${mode}` ] = `${refPx + deltaPx}px`;\r\n        } else {\r\n          this[ `d${mode}` ] = `${refPx + axis.getRelPx(delta)}px`;\r\n        }\r\n      } else {\r\n        refd = this.getValPosition( refd, axis );\r\n\r\n        if ( ( deltaPx = _parsePx( delta ) ) !== false ) {\r\n          this[ `d${mode}` ] = refd + axis.getRelVal( deltaPx );\r\n        } else {\r\n          this[ `d${mode}` ] = refd + delta;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  getValPosition( rel, axis ) {\r\n    if ( rel == 'max' ) {\r\n      return axis.getMaxValue();\r\n    }\r\n\r\n    if ( rel == 'min' ) {\r\n      return axis.getMinValue();\r\n    }\r\n\r\n    if ( rel == 'max' ) {\r\n      return axis.getMaxValue();\r\n    }\r\n\r\n    if ( rel == 'min' ) {\r\n      return axis.getMinValue();\r\n    }\r\n\r\n    return rel;\r\n  }\r\n\r\n  /**\r\n   *  Computes a value in pixels\r\n   *  @param {Number} value - The value in axis unit\r\n   *  @param {Axis} axis - The x or y axis to consider (has to belong to the graph)\r\n   *  @param {Boolean} rel - Whether or not the value is a distance\r\n   *  @return {(Number|String)} The computed value\r\n   */\r\n  getPx( value, axis, rel ) {\r\n    var parsed;\r\n\r\n    if ( typeof value == 'function' ) {\r\n      return value( axis, rel );\r\n    } else if ( ( parsed = _parsePx( value ) ) !== false ) {\r\n      return parsed; // return integer (will be interpreted as px)\r\n    } else if ( ( parsed = this._parsePercent( value ) ) !== false ) {\r\n      return parsed; // returns xx%\r\n    } else if ( axis ) {\r\n      if ( value == 'min' ) {\r\n        return axis.getMinPx();\r\n      } else if ( value == 'max' ) {\r\n        return axis.getMaxPx();\r\n      } else if ( rel ) {\r\n        return axis.getRelPx( value );\r\n      } else if ( isNumeric( value ) ) {\r\n        return axis.getPos( value );\r\n      }\r\n    }\r\n  }\r\n\r\n  getPxRel( value, axis ) {\r\n    return this.getPx( value, axis, true );\r\n  }\r\n\r\n  /**\r\n   *  Assigns the current position as relative to another. This is used when a position is used with \"dx\" or \"dy\" and not \"x\" or \"y\"\r\n   *  @param {Position} pos - The reference position\r\n   *  @return {Position} The current position\r\n   */\r\n  relativeTo( pos ) {\r\n    this._relativeTo = Position.check( pos );\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   *  Checks if an object is a position. If not, creates a new Position instance with the ```pos``` object. If a new position is created, ```callback``` is fired with the position as a unique parameter. The return of the function, if not false, should be a ```Position``` instance which serves as the reference position.\r\n   *  @example Position.check( { x: 1, y: 2 }, function() { return someOtherPosition; } );\r\n   *  @param {(Object|Position)} pos - The position object or the object fed into the constructor\r\n   *  @param {Function} callback - The callback fired if a new position is created\r\n   *  @return {Position} The resulting position object\r\n   */\r\n  static check( pos, callback ) {\r\n    if ( pos instanceof Position ) {\r\n      return pos;\r\n    }\r\n\r\n    var posObject = new Position( pos );\r\n\r\n    if ( pos && pos.relativeTo ) {\r\n      const position = callback( pos.relativeTo );\r\n      if ( position ) {\r\n        posObject.relativeTo( position );\r\n      }\r\n    }\r\n\r\n    return posObject;\r\n  }\r\n}\r\n\r\nexport default Position;","/**\r\n * Easy set attribute method to apply to a SVG Element the attributes listed. Optional namespacing\r\n * @param {SVGElement} to - The SVG element to apply the attributes to\r\n * @param {Object<String,Any>} attr - A key/value hashmap of attributes\r\n * @param {String} [ ns = undefined ] - The namespace to use (with <code>setAttributeNS</code>). Default if without namespacing\r\n */\r\nexport function setAttributeTo( to, params, ns ) {\r\n  var i;\r\n\r\n  if ( ns ) {\r\n    for ( i in params ) {\r\n      to.setAttributeNS( ns, i, params[ i ] );\r\n    }\r\n  } else {\r\n    for ( i in params ) {\r\n      to.setAttribute( i, params[ i ] );\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Maps old-style events defined within the creation (i.e. <code>{ onMouseOver: function() }</code>) to modern event listening <code>.on(\"mouseover\")</code>\r\n * The function will read any object and select the ones starting with \"on\"\r\n * @params {Object} options - An option object to read the events from\r\n * @param {Object} source - The source object to which the options belong\r\n * @example util.mapEventEmission( this.options, this );\r\n */\r\nexport function mapEventEmission( options, source ) {\r\n\r\n  if ( !source ) {\r\n    source = this;\r\n  }\r\n\r\n  var eventName;\r\n\r\n  for ( var i in options ) {\r\n\r\n    // Starts with onXXX\r\n    if ( i.indexOf( 'on' ) == 0 && typeof options[ i ] == 'function' ) {\r\n      eventName = i.substring( 2 );\r\n      eventName = eventName.substring( 0, 1 ).toLowerCase() + eventName.substring( 1 );\r\n\r\n      if ( source.on ) {\r\n\r\n        ( function( j ) {\r\n\r\n          source.on( eventName, function() {\r\n            options[ j ].apply( source, arguments );\r\n          } );\r\n\r\n        } )( i );\r\n\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * @link http://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript\r\n * @return {String} a random id\r\n */\r\nexport function guid() {\r\n  //\r\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace( /[xy]/g, function( c ) {\r\n    var r = Math.random() * 16 | 0,\r\n      v = c == 'x' ? r : ( r & 0x3 | 0x8 );\r\n    return v.toString( 16 );\r\n  } );\r\n\r\n}\r\n\r\nexport function throwError( message ) {\r\n  console.error( message );\r\n}\r\n\r\nexport function warn( message ) {\r\n  console.warn( message );\r\n}\r\n\r\n/**\r\n * Checks if a variable is a numeric or not\r\n * @return {Boolean} <code>true</code> for a numeric value, false otherwise\r\n */\r\nexport function isNumeric( obj ) {\r\n  return !Array.isArray( obj ) && ( obj - parseFloat( obj ) + 1 ) >= 0;\r\n}\r\n\r\n/**\r\n * @see http://stackoverflow.com/questions/2353211/hsl-to-rgb-color-conversion\r\n * Converts an HSL color value to RGB. Conversion formula\r\n * adapted from http://en.wikipedia.org/wiki/HSL_color_space.\r\n * Assumes h, s, and l are contained in the set [0, 1] and\r\n * returns r, g, and b in the set [0, 255].\r\n *\r\n * @param   Number  h       The hue\r\n * @param   Number  s       The saturation\r\n * @param   Number  l       The lightness\r\n * @return  Array           The RGB representation\r\n */\r\nexport function hue2rgb( p, q, t ) {\r\n  if ( t < 0 ) t += 1;\r\n  if ( t > 1 ) t -= 1;\r\n  if ( t < 1 / 6 ) return p + ( q - p ) * 6 * t;\r\n  if ( t < 1 / 2 ) return q;\r\n  if ( t < 2 / 3 ) return p + ( q - p ) * ( 2 / 3 - t ) * 6;\r\n  return p;\r\n}\r\n\r\nexport function hslToRgb( h, s, l ) {\r\n  var r, g, b;\r\n\r\n  if ( s == 0 ) {\r\n    r = g = b = l; // achromatic\r\n  } else {\r\n\r\n    var q = l < 0.5 ? l * ( 1 + s ) : l + s - l * s;\r\n    var p = 2 * l - q;\r\n    r = hue2rgb( p, q, h + 1 / 3 );\r\n    g = hue2rgb( p, q, h );\r\n    b = hue2rgb( p, q, h - 1 / 3 );\r\n  }\r\n\r\n  return [ Math.round( r * 255 ), Math.round( g * 255 ), Math.round( b * 255 ) ];\r\n}\r\n\r\nexport function saveDomAttributes( to, attributes, identification ) {\r\n\r\n  if ( !to ) return;\r\n\r\n  to._savedAttributesIds = to._savedAttributesIds || [];\r\n\r\n  if ( to._savedAttributesIds.indexOf( identification ) > -1 ) {\r\n    restoreDomAttributes( to, identification );\r\n  }\r\n\r\n  to._savedAttributes = to._savedAttributes || {};\r\n  to._attributes = to._attributes || {};\r\n  to._attributes[ identification ] = attributes;\r\n\r\n  to._savedAttributesIds.push( identification );\r\n\r\n  for ( var i in attributes ) {\r\n\r\n    if ( !to._savedAttributes[ i ] ) {\r\n      to._savedAttributes[ i ] = to.getAttribute( i );\r\n    }\r\n\r\n    to.setAttribute( i, attributes[ i ] );\r\n  }\r\n\r\n}\r\n\r\nexport function hasSavedAttribute( dom, attr ) {\r\n  return dom._savedAttributes && dom._savedAttributes[ attr ] !== undefined;\r\n}\r\n\r\nexport function overwriteDomAttribute( dom, attribute, newValue ) {\r\n  if ( hasSavedAttribute( dom, attribute ) ) {\r\n    dom._savedAttributes[ attribute ] = newValue;\r\n  }\r\n}\r\n\r\nexport function restoreDomAttributes( to, identification ) {\r\n\r\n  if ( !to || !to._savedAttributesIds ) {\r\n    return;\r\n  }\r\n\r\n  to._savedAttributesIds.splice( to._savedAttributesIds.indexOf( identification ), 1 );\r\n  delete to._attributes[ identification ];\r\n\r\n  var attrs = {};\r\n\r\n  for ( var i in to._savedAttributes ) {\r\n    attrs[ i ] = to._savedAttributes[ i ];\r\n  }\r\n\r\n  for ( var i = 0, l = to._savedAttributesIds.length; i < l; i++ ) {\r\n\r\n    for ( var j in to._attributes[ to._savedAttributesIds[ i ] ] ) {\r\n      attrs[ j ] = to._attributes[ to._savedAttributesIds[ i ] ][ j ];\r\n    }\r\n  }\r\n\r\n  for ( var j in attrs ) {\r\n    to.setAttribute( j, attrs[ j ] );\r\n  }\r\n\r\n}\r\n\r\n// https://davidwalsh.name/function-debounce\r\nexport function debounce( func, wait, immediate ) {\r\n  var timeout;\r\n  return function() {\r\n    var context = this,\r\n      args = arguments;\r\n    var later = function() {\r\n      timeout = null;\r\n      if ( !immediate ) func.apply( context, args );\r\n    };\r\n    var callNow = immediate && !timeout;\r\n    clearTimeout( timeout );\r\n    timeout = setTimeout( later, wait );\r\n    if ( callNow ) func.apply( context, args );\r\n  };\r\n}\r\n\r\nexport function SVGParser( svgString ) {\r\n\r\n  var parser = new DOMParser();\r\n  var doc = parser.parseFromString( svgString, 'image/svg+xml' );\r\n  // returns a SVGDocument, which also is a Document.\r\n\r\n  return doc;\r\n\r\n}\r\n\r\n// http://stackoverflow.com/questions/5276953/what-is-the-most-efficient-way-to-reverse-an-array-in-javascript\r\nexport function reverseArray( array ) {\r\n  var left = null;\r\n  var right = null;\r\n  var length = array.length;\r\n  for ( left = 0, right = length - 1; left < right; left += 1, right -= 1 ) {\r\n    var temporary = array[ left ];\r\n    array[ left ] = array[ right ];\r\n    array[ right ] = temporary;\r\n  }\r\n  return array;\r\n}\r\n\r\n// jQuery.fn.offset\r\nexport function getOffset( el ) {\r\n  var rect = el.getBoundingClientRect();\r\n  return {\r\n    top: rect.top,\r\n    left: rect.left\r\n  };\r\n}\r\n\r\n// jQuery.fn.css\r\nexport function setCSS( element, values ) {\r\n  var style = element.style;\r\n  for ( var i in values ) {\r\n    style[ i ] = values[ i ];\r\n  }\r\n}\r\n\r\nexport function ajaxGet( options ) {\r\n  return new Promise( function( resolve, reject ) {\r\n    var request = new XMLHttpRequest();\r\n    request.open( options.type || 'GET', options.url, true );\r\n    if ( options.json ) request.setRequestHeader( 'Accept', 'application/json' );\r\n    request.onload = function() {\r\n      if ( request.status === 200 ) {\r\n        var response = request.responseText;\r\n        if ( options.json ) response = JSON.parse( response );\r\n        resolve( response );\r\n      } else {\r\n        reject( new Error( `Request error: ${ request.status}` ) );\r\n      }\r\n    };\r\n    request.onerror = function() {\r\n      reject( new Error( `Network error: ${ request.status}` ) );\r\n    };\r\n    request.send();\r\n  } );\r\n}\r\n\r\n// https://raw.githubusercontent.com/justmoon/node-extend/888f153645115d1c6aa9a7e346e8e9cd9a83de9b/index.js\r\n// Copyright (c) 2014 Stefan Thomas\r\nvar hasOwn = Object.prototype.hasOwnProperty;\r\nvar toStr = Object.prototype.toString;\r\n\r\nvar isArray = function isArray( arr ) {\r\n  if ( typeof Array.isArray === 'function' ) {\r\n    return Array.isArray( arr );\r\n  }\r\n\r\n  return toStr.call( arr ) === '[object Array]';\r\n};\r\n\r\nvar isPlainObject = function isPlainObject( obj ) {\r\n  if ( !obj || toStr.call( obj ) !== '[object Object]' ) {\r\n    return false;\r\n  }\r\n\r\n  var hasOwnConstructor = hasOwn.call( obj, 'constructor' );\r\n  var hasIsPrototypeOf = obj.constructor && obj.constructor.prototype && hasOwn.call( obj.constructor.prototype, 'isPrototypeOf' );\r\n  // Not own constructor property must be Object\r\n  if ( obj.constructor && !hasOwnConstructor && !hasIsPrototypeOf ) {\r\n    return false;\r\n  }\r\n\r\n  // Own properties are enumerated firstly, so to speed up,\r\n  // if last one is own, then all properties are own.\r\n  var key;\r\n  for ( key in obj ) {\r\n    /**/\r\n  }\r\n\r\n  return typeof key === 'undefined' || hasOwn.call( obj, key );\r\n};\r\n\r\nexport function extend() {\r\n  var options, name, src, copy, copyIsArray, clone;\r\n  var target = arguments[ 0 ];\r\n  var i = 1;\r\n  var length = arguments.length;\r\n  var deep = false;\r\n\r\n  // Handle a deep copy situation\r\n  if ( typeof target === 'boolean' ) {\r\n    deep = target;\r\n    target = arguments[ 1 ] || {};\r\n    // skip the boolean and the target\r\n    i = 2;\r\n  } else if ( ( typeof target !== 'object' && typeof target !== 'function' ) || target == null ) {\r\n    target = {};\r\n  }\r\n\r\n  for ( ; i < length; ++i ) {\r\n    options = arguments[ i ];\r\n    // Only deal with non-null/undefined values\r\n    if ( options != null ) {\r\n      // Extend the base object\r\n      for ( name in options ) {\r\n        src = target[ name ];\r\n        copy = options[ name ];\r\n\r\n        // Prevent never-ending loop\r\n        if ( target !== copy ) {\r\n          // Recurse if we're merging plain objects or arrays\r\n          if ( deep && copy && ( isPlainObject( copy ) || ( copyIsArray = isArray( copy ) ) ) ) {\r\n            if ( copyIsArray ) {\r\n              copyIsArray = false;\r\n              clone = src && isArray( src ) ? src : [];\r\n            } else {\r\n              clone = src && isPlainObject( src ) ? src : {};\r\n            }\r\n\r\n            // Never move original objects, clone them\r\n            target[ name ] = extend( deep, clone, copy );\r\n\r\n            // Don't bring in undefined values\r\n          } else if ( typeof copy !== 'undefined' ) {\r\n            target[ name ] = copy;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // Return the modified object\r\n  return target;\r\n}\r\n\r\nexport default {};\r\n\r\nexport {\r\n  isArray\r\n};\r\nexport {\r\n  isPlainObject\r\n};\r\n\r\nexport function mix( baseClass, mixin ) {\r\n\r\n  for ( let prop in mixin ) {\r\n\r\n    if ( mixin.hasOwnProperty( prop ) ) {\r\n      baseClass.prototype[ prop ] = mixin[ prop ];\r\n    }\r\n  }\r\n}\r\n\r\nexport function emptyDom( dom ) {\r\n  while ( dom.firstChild ) {\r\n    dom.removeChild( dom.firstChild );\r\n  }\r\n}","const setMarkerStyle = ( serie, style, styleName ) => {\r\n  serie.showMarkers();\r\n  let _default = {};\r\n  let modifiers = [];\r\n\r\n  if ( style.default ) {\r\n    _default = style.default;\r\n    if ( style.modifiers ) {\r\n      modifiers = style.modifiers;\r\n    }\r\n  } else {\r\n    _default = style;\r\n    modifiers = [];\r\n  }\r\n\r\n  serie.setMarkerStyle( _default, modifiers, styleName );\r\n};\r\n\r\nconst setSerieStyle = ( Graph, serie, jsonSerie, type ) => {\r\n  let styles = jsonSerie.style;\r\n\r\n  if ( !Array.isArray( styles ) ) {\r\n    styles = [ {\r\n      name: 'unselected',\r\n      style: styles\r\n    } ];\r\n  }\r\n  styles.map( ( {\r\n    name,\r\n    style\r\n  }, index ) => {\r\n    if ( style.line && ( type == Graph.SERIE_LINE || type == Graph.SERIE_BAR || type == Graph.SERIE_LINE_COLORED ) ) {\r\n      if ( style.line.color && type != Graph.SERIE_LINE_COLORED ) {\r\n        serie.setLineColor( style.line.color, name );\r\n      }\r\n\r\n      if ( style.line.width ) {\r\n        serie.setLineWidth( style.line.width, name );\r\n      }\r\n\r\n      if ( style.line.dash || style.line.style ) {\r\n        serie.setLineStyle( style.line.dash || style.line.style, name );\r\n      }\r\n\r\n      if ( style.line.fill ) {\r\n        serie.setFillColor( style.line.fill, name );\r\n      }\r\n\r\n      if ( style.line.fillOpacity && serie.setFillOpacity ) {\r\n        serie.setFillOpacity( style.line.fillOpacity, name );\r\n      }\r\n    }\r\n    if ( style.errorBar ) {\r\n      serie.setErrorBarStyle( style.errorBar );\r\n    }\r\n\r\n    if ( style.errorBox ) {\r\n      serie.setErrorBoxStyle( style.errorBox );\r\n    }\r\n\r\n    if (\r\n      style.marker &&\r\n      ( type == Graph.SERIE_LINE || type == Graph.SERIE_SCATTER )\r\n    ) {\r\n\r\n      setMarkerStyle( serie, style.marker, name );\r\n    }\r\n  } );\r\n};\r\n\r\nexport default setSerieStyle;","const processAxes = ( Graph, graph, type, axisOptions, allAxes ) => {\r\n\r\n  if ( !Array.isArray( axisOptions ) ) {\r\n    axisOptions = [ axisOptions ];\r\n  }\r\n\r\n  axisOptions.forEach( ( options ) => {\r\n    let constructorName;\r\n\r\n    if ( type == 'x' ) {\r\n      type = 'bottom';\r\n    } else if ( type == 'y' ) {\r\n      type = 'left';\r\n    }\r\n\r\n    if ( type == 'bottom' || type == 'top' ) {\r\n      constructorName = 'graph.axis.x';\r\n\r\n      if ( options.type == 'category' ) {\r\n        constructorName += '.bar';\r\n      }\r\n    } else {\r\n      constructorName = 'graph.axis.y';\r\n    }\r\n\r\n    var axis = new( Graph.getConstructor( constructorName ) )( graph, type );\r\n    axis.init( graph, options );\r\n\r\n    if ( type == 'bottom' ) {\r\n      graph.setBottomAxis( axis, graph.getNumAxes( 'bottom' ) );\r\n    } else if ( type == 'top' ) {\r\n      graph.setTopAxis( axis, graph.getNumAxes( 'top' ) );\r\n    } else if ( type == 'left' ) {\r\n      graph.setLeftAxis( axis, graph.getNumAxes( 'left' ) );\r\n    } else if ( type == 'right' ) {\r\n      graph.setRightAxis( axis, graph.getNumAxes( 'right' ) );\r\n    }\r\n\r\n    if ( options.type == 'category' ) {\r\n      axis.categories = options.categories;\r\n    }\r\n\r\n    if ( options.name ) {\r\n      allAxes[ name ] = axis;\r\n    }\r\n  } );\r\n};\r\n\r\nconst makeAxes = ( Graph, graph, jsonAxes ) => {\r\n  const allAxes = [];\r\n  if ( jsonAxes.x ) {\r\n    processAxes( Graph, graph, 'x', jsonAxes.x, allAxes );\r\n  }\r\n\r\n  if ( jsonAxes.y ) {\r\n    processAxes( Graph, graph, 'y', jsonAxes.y, allAxes );\r\n  }\r\n\r\n  if ( jsonAxes.top ) {\r\n    processAxes( Graph, graph, 'top', jsonAxes.top, allAxes );\r\n  }\r\n\r\n  if ( jsonAxes.left ) {\r\n    processAxes( Graph, graph, 'left', jsonAxes.left, allAxes );\r\n  }\r\n\r\n  if ( jsonAxes.bottom ) {\r\n    processAxes( Graph, graph, 'bottom', jsonAxes.bottom, allAxes );\r\n  }\r\n\r\n  if ( jsonAxes.right ) {\r\n    processAxes( Graph, graph, 'right', jsonAxes.right, allAxes );\r\n  }\r\n};\r\n\r\nexport default makeAxes;","const makeAnnotation = ( graph, json, serie, axes ) => {\r\n  if ( json.type ) {\r\n\r\n    if ( json.properties.label ) {\r\n\r\n      if ( !Array.isArray( json.properties.label ) ) {\r\n        json.properties.label = [ json.properties.label ];\r\n      }\r\n\r\n      json.properties.label.forEach( ( label, index ) => {\r\n\r\n        for ( let propertyName in label ) {\r\n          let newPropertyName = `label${ propertyName.charAt( 0 ).toUpperCase() }${propertyName.slice( 1 )}`;\r\n\r\n          if ( !json.properties[ newPropertyName ] ) {\r\n            json.properties[ newPropertyName ] = [];\r\n          }\r\n          json.properties[ newPropertyName ][ index ] = label[ propertyName ];\r\n\r\n        }\r\n      } );\r\n    }\r\n\r\n    const shape = graph.newShape( json.type, {}, false, json.properties );\r\n\r\n    if ( json.serie ) {\r\n      shape.setSerie( json.serie );\r\n    }\r\n\r\n    if ( serie ) {\r\n      shape.setSerie( serie );\r\n    }\r\n\r\n    if ( json.layer ) {\r\n      shape.setLayer( json.layer );\r\n    }\r\n\r\n    if ( json.xAxis ) {\r\n      shape.setXAxis( axes[ json.xAxis ] );\r\n    }\r\n\r\n    if ( json.yAxis ) {\r\n      shape.setYAxis( axes[ json.yAxis ] );\r\n    }\r\n\r\n    shape.draw();\r\n    shape.redraw();\r\n  }\r\n};\r\n\r\nexport default makeAnnotation;","import serieStyle from './style.js';\r\nimport makeAxes from './axes.js';\r\nimport makeAnnotation from './annotations.js';\r\n\r\nconst makeGraph = ( Graph, graph, json ) => {\r\n  let axes = [];\r\n\r\n  graph.resize( json.width || 400, json.height || 300 );\r\n\r\n  if ( json.axes ) {\r\n    makeAxes( Graph, graph, json.axes );\r\n  }\r\n\r\n  if ( json.legend ) {\r\n    const opts = {};\r\n\r\n    if ( json.legend.seriesHideable ) {\r\n      opts.isSerieHideable = true;\r\n    }\r\n\r\n    if ( json.legend.seriesSelectable ) {\r\n      opts.isSerieSelectable = true;\r\n    }\r\n\r\n    const legend = graph.makeLegend( opts );\r\n\r\n    if ( json.legend.position ) {\r\n      switch ( json.legend.position ) {\r\n        case 'bottom':\r\n          legend.setAutoPosition( 'bottom' );\r\n          break;\r\n\r\n        case 'top':\r\n          legend.setAutoPosition( 'top' );\r\n          break;\r\n\r\n        case 'left':\r\n          legend.setAutoPosition( 'left' );\r\n          break;\r\n\r\n        case 'right':\r\n          legend.setAutoPosition( 'right' );\r\n          break;\r\n\r\n        default:\r\n          legend.setPosition( json.legend.position );\r\n          break;\r\n      }\r\n    }\r\n  }\r\n\r\n  if ( json.series ) {\r\n    if ( !Array.isArray( json.series ) ) {\r\n      json.series = [ json.series ];\r\n    }\r\n\r\n    json.series.forEach( ( jsonSerie, index ) => {\r\n      let type, data;\r\n\r\n      switch ( jsonSerie.type ) {\r\n        case 'scatter':\r\n          type = Graph.SERIE_SCATTER;\r\n          break;\r\n\r\n        case 'bar':\r\n          type = Graph.SERIE_BAR;\r\n          break;\r\n\r\n        case 'box':\r\n          type = Graph.SERIE_BOX;\r\n          break;\r\n\r\n        case 'color':\r\n          type = Graph.SERIE_LINE_COLORED;\r\n          break;\r\n\r\n        case 'line':\r\n        default:\r\n          type = Graph.SERIE_LINE;\r\n          break;\r\n      }\r\n\r\n      switch ( jsonSerie.type ) {\r\n        case 'bar':\r\n          data = Graph.newWaveformHash();\r\n          if ( jsonSerie.data.errors ) {\r\n            data.setData( jsonSerie.data.values );\r\n          } else {\r\n            data.setData( jsonSerie.data );\r\n          }\r\n\r\n          break;\r\n\r\n        default:\r\n        case 'line':\r\n        case 'scatter':\r\n          data = Graph.newWaveform();\r\n          data.setData( jsonSerie.data.y, jsonSerie.data.x );\r\n          break;\r\n      }\r\n\r\n      if ( jsonSerie.data.errors ) {\r\n        if ( jsonSerie.data.errors.xBar ) {\r\n          data.setErrorBarX( jsonSerie.data.errors.xBar );\r\n        }\r\n        if ( jsonSerie.data.errors.xBarAbove ) {\r\n          data.setErrorBarXAbove( jsonSerie.data.errors.xBarAbove );\r\n        }\r\n        if ( jsonSerie.data.errors.xBarBelow ) {\r\n          data.setErrorBarXBelow( jsonSerie.data.errors.xBarBelow );\r\n        }\r\n\r\n        if ( jsonSerie.data.errors.yBar ) {\r\n          data.setErrorBar( jsonSerie.data.errors.yBar );\r\n        }\r\n        if ( jsonSerie.data.errors.yBarAbove ) {\r\n          data.setErrorBarAbove( jsonSerie.data.errors.yBarAbove );\r\n        }\r\n        if ( jsonSerie.data.errors.yBarBelow ) {\r\n          data.setErrorBarBelow( jsonSerie.data.errors.yBarBelow );\r\n        }\r\n\r\n        if ( jsonSerie.data.errors.xBox ) {\r\n          data.setErrorBoxX( jsonSerie.data.errors.xBox );\r\n        }\r\n        if ( jsonSerie.data.errors.xBoxAbove ) {\r\n          data.setErrorBoxXAbove( jsonSerie.data.errors.xBoxAbove );\r\n        }\r\n        if ( jsonSerie.data.errors.xBoxBelow ) {\r\n          data.setErrorBoxXBelow( jsonSerie.data.errors.xBoxBelow );\r\n        }\r\n\r\n        if ( jsonSerie.data.errors.yBox ) {\r\n          data.setErrorBox( jsonSerie.data.errors.yBox );\r\n        }\r\n        if ( jsonSerie.data.errors.yBoxAbove ) {\r\n          data.setErrorBoxAbove( jsonSerie.data.errors.yBoxAbove );\r\n        }\r\n        if ( jsonSerie.data.errors.yBoxBelow ) {\r\n          data.setErrorBoxBelow( jsonSerie.data.errors.yBoxBelow );\r\n        }\r\n      }\r\n\r\n      const serie = graph.newSerie(\r\n        jsonSerie.name || `_serie_${index}`,\r\n        jsonSerie.options || {},\r\n        type,\r\n      );\r\n\r\n      switch ( jsonSerie.type ) {\r\n        case 'color':\r\n          if ( jsonSerie.data.color ) {\r\n            serie.setColors( jsonSerie.data.color );\r\n          }\r\n          break;\r\n        default:\r\n      }\r\n\r\n      serie.autoAxis();\r\n\r\n      if ( jsonSerie.excludeFromLegend ) {\r\n        serie.excludeFromLegend( true );\r\n      }\r\n\r\n      if ( data.xAxis && axes[ data.xAxis ] ) {\r\n        serie.setXAxis( axes[ data.xAxis ] );\r\n      }\r\n\r\n      if ( data.yAxis && axes[ data.yAxis ] ) {\r\n        serie.setYAxis( axes[ data.yAxis ] );\r\n      }\r\n\r\n      if ( data ) {\r\n        serie.setWaveform( data );\r\n      }\r\n\r\n      if ( jsonSerie.style ) {\r\n        serieStyle( Graph, serie, jsonSerie, type );\r\n      }\r\n\r\n      if ( jsonSerie.annotations ) {\r\n        jsonSerie.annotations.forEach( ( annotation ) => {\r\n          makeAnnotation( graph, annotation, serie, axes );\r\n        } );\r\n      }\r\n    } );\r\n  }\r\n\r\n  if ( json.annotations ) {\r\n    json.annotations.forEach( ( annotation ) => {\r\n      makeAnnotation( graph, annotation, undefined, axes );\r\n    } );\r\n  }\r\n};\r\n\r\nexport default makeGraph;","import graphFromJson from './main.js';\n\nexport default ( Graph ) => {\n  /**\n   * Returns a graph created from a schema\n   * @param {Object} json\n   * @param {HTMLElement} wrapper - The wrapping element\n   * @param {Function} callback - A callback function called when something has changed, in the form of ( event, params... ) {}\n   * @returns {Graph} Newly created graph\n   */\n  Graph.fromJSON = ( json, wrapper, callback ) => {\n    const options = json.options || {};\n    const graph = new Graph( undefined, options );\n\n    graphFromJson( Graph, graph, json, wrapper );\n    graph.setWrapper( wrapper );\n\n    graph.onAll( function( eventName, ...args ) {\n      callback( eventName, ...args );\n    } );\n\n    return graph;\n  }\n\n  Graph.prototype.setJSON = ( json, options = {} ) => {\n\n    // Destroy the current elements\n    this.killSeries();\n\n    const state = {};\n    if ( options.keepState ) {\n\n      this._applyToAxes( ( axis ) => {\n\n        if ( axis.options.name ) {\n\n          state[ axis.options.name ] = {\n            min: axis.getCurrentMin(),\n            max: axis.getCurrentMax()\n          };\n        }\n      }, undefined, true, true );\n    }\n\n    this._applyToAxes( ( axis ) => {\n      this.killAxis( axis, true, true );\n    }, undefined, true, true );\n\n    this.killLegend();\n    this.killShapes();\n\n    graphFromJson( Graph, this, json );\n\n    if ( options.keepState ) {\n\n      this._applyToAxes( ( axis ) => {\n\n        if ( axis.options.name && state[ axis.options.name ] ) {\n\n          axis.setCurrentMin( state[ axis.options.name ].min );\n          axis.setCurrentMax( state[ axis.options.name ].max );\n        }\n      }, undefined, true, true );\n    }\n\n    this.draw();\n  }\n};","const EventMixin = {\n\n  on(eventName, handler) {\n\n    if (!this.__eventHandlers) {\n      this.__eventHandlers = {};\n    }\n\n    if (!this.__eventHandlers[eventName]) {\n      this.__eventHandlers[eventName] = [];\n    }\n\n    this.__eventHandlers[eventName].push(handler);\n  },\n\n  off(eventName, handler) {\n    let handlers = this.__eventHandlers?.[eventName];\n    if (!handlers) {\n      return;\n    }\n\n    if (!handler) {\n      handlers = []; // Reset the array and let the GC recycle all the handlers\n    } else {\n\n      for (let i = 0, l = handlers.length; i < l; i++) {\n        if (handlers[i] == handler) {\n          handlers.splice(i--, 1);\n        }\n      }\n    }\n  },\n\n  onAll(handler) {\n    this.on('__all', handler);\n  },\n\n  ofAll(handler) {\n    this.off('__all', handler);\n  },\n\n  trigger(eventName, ...params) {\n    if (this.__eventHandlers?.[eventName]) {\n      this.__eventHandlers[eventName].forEach(handler => handler.apply(this, params));\n    }\n\n    const allHandlers = this.__eventHandlers?.__all;\n    if (allHandlers) {\n      allHandlers.forEach(handler => handler.apply(this, [eventName, ...params]));\n    }\n  },\n\n  emit(eventName, ...params) {\n    return this.trigger(eventName, ...params);\n  }\n}\n\nexport {\n  EventMixin\n};\n\nexport default (Obj) => {\n  Object.assign(Obj.prototype, EventMixin);\n};","var dataAggregator;\r\n\r\nif (\r\n  typeof URL === 'undefined' ||\r\n  typeof URL.createObjectURL === 'undefined' ||\r\n  typeof Blob === 'undefined' ||\r\n  typeof Worker === 'undefined'\r\n) {\r\n  dataAggregator = () => {};\r\n} else {\r\n  var aggregatorWorker;\r\n  var queue = {};\r\n\r\n  let string = function() {\r\n    onmessage = function( e ) {\r\n      const data = e.data.data, // The initial data\r\n        maxX = e.data.maxX,\r\n        minX = e.data.minX,\r\n        maxY = e.data.maxY,\r\n        minY = e.data.minY,\r\n        direction = e.data.direction;\r\n\r\n      let numPoints = e.data.numPoints; // Total number of points in the slot\r\n      let l = data.length; // Number of data in the original buffer\r\n      let i = 0;\r\n      let k = -4;\r\n      let slots = [];\r\n      let dataAggregatedX = [];\r\n      let dataAggregatedY = [];\r\n      let aggregationSum = [];\r\n      let getX;\r\n      let slotNumber;\r\n      let lastAggregationX;\r\n      let lastAggregation;\r\n      let lastAggregationSum;\r\n      let newAggregation;\r\n      let newAggregationX;\r\n\r\n      if ( e.data.xdata ) {\r\n        getX = function getX( index ) {\r\n          return e.data.xdata[ index ];\r\n        };\r\n      } else {\r\n        getX = function getX( index ) {\r\n          return index * e.data.xScale + e.data.xOffset;\r\n        };\r\n      }\r\n\r\n      let aggregations = {};\r\n\r\n      // Direction x\r\n      if ( direction == 'x' ) {\r\n        const dataPerSlot = numPoints / ( maxX - minX ); // Computed number of aggregation per slot\r\n\r\n        for ( ; i < l; i++ ) {\r\n          // dataPerSlot: 1 / 1000 ( compression by 1'000 )\r\n          //console.log( dataPerSlot, getX( i ) );\r\n          slotNumber = Math.floor( ( getX( i ) - minX ) * dataPerSlot );\r\n\r\n          if ( slots[ k ] !== slotNumber ) {\r\n            k += 4;\r\n            slots[ k ] = slotNumber;\r\n\r\n            let slotX = ( slotNumber + 0.5 ) / dataPerSlot + minX;\r\n\r\n            dataAggregatedX[ k ] = slotX;\r\n            dataAggregatedX[ k + 1 ] = slotX;\r\n            dataAggregatedX[ k + 2 ] = slotX;\r\n            dataAggregatedX[ k + 3 ] = slotX;\r\n\r\n            dataAggregatedY[ k ] = data[ i ];\r\n            dataAggregatedY[ k + 1 ] = data[ i ];\r\n            dataAggregatedY[ k + 2 ] = data[ i ];\r\n            dataAggregatedY[ k + 3 ] = data[ i ];\r\n            aggregationSum[ k ] = 0;\r\n          }\r\n\r\n          dataAggregatedY[ k + 1 ] = Math.min( data[ i ], dataAggregatedY[ k + 1 ] );\r\n          dataAggregatedY[ k + 2 ] = Math.max( data[ i ], dataAggregatedY[ k + 2 ] );\r\n          dataAggregatedY[ k + 3 ] = data[ i ];\r\n          aggregationSum[ k ] += data[ i ];\r\n        }\r\n      } else {\r\n        // y\r\n\r\n        const dataPerSlot = numPoints / ( maxY - minY ); // Computed number of aggregation per slot\r\n\r\n        for ( ; i < l; i++ ) {\r\n          // dataPerSlot: 1 / 1000 ( compression by 1'000 )\r\n          //console.log( dataPerSlot, getX( i ) );\r\n          slotNumber = Math.floor( ( data[ i ] - minY ) * dataPerSlot );\r\n\r\n          if ( slots[ k ] !== slotNumber ) {\r\n            k += 4;\r\n            slots[ k ] = slotNumber;\r\n\r\n            let slotY = ( slotNumber + 0.5 ) / dataPerSlot + minY;\r\n\r\n            dataAggregatedY[ k ] = slotY;\r\n            dataAggregatedY[ k + 1 ] = slotY;\r\n            dataAggregatedY[ k + 2 ] = slotY;\r\n            dataAggregatedY[ k + 3 ] = slotY;\r\n\r\n            dataAggregatedX[ k ] = data[ i ];\r\n            dataAggregatedX[ k + 1 ] = data[ i ];\r\n            dataAggregatedX[ k + 2 ] = data[ i ];\r\n            dataAggregatedX[ k + 3 ] = data[ i ];\r\n            aggregationSum[ k ] = 0;\r\n          }\r\n          dataAggregatedX[ k + 1 ] = Math.min( getX( i ), dataAggregatedX[ k + 1 ] );\r\n          dataAggregatedX[ k + 2 ] = Math.max( getX( i ), dataAggregatedX[ k + 2 ] );\r\n          dataAggregatedX[ k + 3 ] = getX( i );\r\n          aggregationSum[ k ] += getX( i );\r\n        }\r\n      }\r\n\r\n      aggregations[ numPoints ] = {\r\n        x: dataAggregatedX,\r\n        y: dataAggregatedY,\r\n        sums: aggregationSum\r\n      };\r\n\r\n      lastAggregation = dataAggregatedY;\r\n      lastAggregationX = dataAggregatedX;\r\n      lastAggregationSum = aggregationSum;\r\n\r\n      while ( numPoints > 256 ) {\r\n        numPoints /= 2;\r\n\r\n        newAggregation = [];\r\n        newAggregationX = [];\r\n\r\n        k = 0;\r\n\r\n        if ( direction == 'x' ) {\r\n          for ( i = 0, l = lastAggregation.length - 8; i < l; i += 8 ) {\r\n            newAggregationX[ k ] =\r\n              ( lastAggregationX[ i ] + lastAggregationX[ i + 4 ] ) / 2;\r\n            newAggregationX[ k + 1 ] = newAggregationX[ k ];\r\n            newAggregationX[ k + 2 ] = newAggregationX[ k ];\r\n            newAggregationX[ k + 3 ] = newAggregationX[ k ];\r\n\r\n            newAggregation[ k ] = lastAggregation[ i ];\r\n            newAggregation[ k + 1 ] = Math.min(\r\n              lastAggregation[ i + 1 ],\r\n              lastAggregation[ i + 5 ]\r\n            );\r\n            newAggregation[ k + 2 ] = Math.max(\r\n              lastAggregation[ i + 2 ],\r\n              lastAggregation[ i + 6 ]\r\n            );\r\n            newAggregation[ k + 3 ] = lastAggregation[ i + 7 ];\r\n\r\n            aggregationSum[ k ] =\r\n              ( lastAggregationSum[ i ] + lastAggregationSum[ i + 4 ] ) / 2;\r\n\r\n            k += 4;\r\n          }\r\n        } else {\r\n          for ( i = 0, l = lastAggregation.length - 8; i < l; i += 8 ) {\r\n            newAggregation[ k ] =\r\n              ( lastAggregation[ i ] + lastAggregation[ i + 4 ] ) / 2;\r\n            newAggregation[ k + 1 ] = newAggregation[ k ];\r\n            newAggregation[ k + 2 ] = newAggregation[ k ];\r\n            newAggregation[ k + 3 ] = newAggregation[ k ];\r\n\r\n            newAggregationX[ k ] = lastAggregationX[ i ];\r\n            newAggregationX[ k + 1 ] = Math.min(\r\n              lastAggregationX[ i + 1 ],\r\n              lastAggregationX[ i + 5 ]\r\n            );\r\n            newAggregationX[ k + 2 ] = Math.max(\r\n              lastAggregationX[ i + 2 ],\r\n              lastAggregationX[ i + 6 ]\r\n            );\r\n            newAggregationX[ k + 3 ] = lastAggregationX[ i + 7 ];\r\n\r\n            aggregationSum[ k ] =\r\n              ( lastAggregationSum[ i ] + lastAggregationSum[ i + 4 ] ) / 2;\r\n\r\n            k += 4;\r\n          }\r\n        }\r\n\r\n        aggregations[ numPoints ] = {\r\n          x: newAggregationX,\r\n          y: newAggregation,\r\n          sums: aggregationSum\r\n        };\r\n\r\n        lastAggregation = newAggregation;\r\n        lastAggregationX = newAggregationX;\r\n        lastAggregationSum = aggregationSum;\r\n\r\n        aggregationSum = [];\r\n      }\r\n\r\n      postMessage( {\r\n        aggregates: aggregations,\r\n        _queueId: e.data._queueId\r\n      } );\r\n    };\r\n  }.toString();\r\n\r\n  string = string.replace( /^\\s*function\\s*\\(\\s*\\)\\s*\\{/, '' );\r\n  string = string.replace( /}\\s*$/, '' );\r\n  /*\r\n  if ( typeof URL == \"undefined\" ) {\r\n    module.exports = function() {};\r\n\r\n  } else {\r\n  */\r\n\r\n  var workerUrl = URL.createObjectURL(\r\n    new Blob( [ string ], {\r\n      type: 'application/javascript'\r\n    } )\r\n  );\r\n\r\n  aggregatorWorker = new Worker( workerUrl );\r\n\r\n  aggregatorWorker.onmessage = function( e ) {\r\n    var id = e.data._queueId;\r\n    delete e.data._queueId;\r\n    queue[ id ]( e.data );\r\n    delete queue[ id ];\r\n  };\r\n\r\n  dataAggregator = function( toOptimize ) {\r\n    var requestId = Date.now();\r\n    toOptimize._queueId = requestId;\r\n\r\n    var prom = new Promise( ( resolver ) => {\r\n      queue[ requestId ] = resolver;\r\n    } );\r\n\r\n    aggregatorWorker.postMessage( toOptimize );\r\n    return prom;\r\n  };\r\n}\r\n\r\nexport default dataAggregator;","class FitHost {\r\n  constructor( options ) {\r\n    this.DELTAP = 1e-6;\r\n    this.BIGVAL = 9e99;\r\n    this.WEIGHT = 1.0;\r\n\r\n    this.setYData( options.dataY );\r\n    this.setXData( options.dataX );\r\n    this.setWeight( options.weight );\r\n    this.setInitialParams( options.params );\r\n\r\n    if ( options.subsetIndex ) {\r\n      this.setSubset( ...options.subsetIndex );\r\n    }\r\n\r\n    this.setFunction( options.function );\r\n\r\n    if ( options.progress ) {\r\n      this.hookIteration( options.progress );\r\n    }\r\n\r\n    this.options = options;\r\n  }\r\n\r\n  //[ [ x1, y1 ], [ x2, y2 ] ]\r\n  setYData( data ) {\r\n    // Waveform instance\r\n    this.data = data;\r\n  }\r\n\r\n  setXData( data ) {\r\n    // Waveform instance\r\n    this.dataX = data;\r\n  }\r\n\r\n  setWeight( weight ) {\r\n    // Waveform instance\r\n    this.weight = weight;\r\n  }\r\n\r\n  setInitialParams( params ) {\r\n    this.parms = params;\r\n\r\n    this.parms = this.parms.map( ( el ) => {\r\n      if ( typeof el == 'function' ) {\r\n        return el( this.data, this.dataX );\r\n      } else {\r\n        return el;\r\n      }\r\n    } );\r\n    this.NPARMS = params.length;\r\n  }\r\n\r\n  setSubset( fromIndex, toIndex ) {\r\n    if ( fromIndex !== undefined && toIndex !== undefined ) {\r\n      this._from = fromIndex;\r\n      this._to = toIndex;\r\n    }\r\n  }\r\n\r\n  hookIteration( f ) {\r\n    this._hookIteration = ( params ) => {\r\n      let data = this.buildFit( params, 200 );\r\n      f( data );\r\n    };\r\n  }\r\n\r\n  setFunction( func ) {\r\n    this._func = func;\r\n  }\r\n\r\n  init() {\r\n    // Get data length\r\n    if ( this._from !== undefined && this._to !== undefined ) {\r\n      if ( this._from >= this._to ) {\r\n        throw 'Impossible to fit negative subranges. The starting index must be lower than the ending index';\r\n      }\r\n\r\n      this.NPTS = this._to - this._from + 1;\r\n\r\n      if ( this.data && this.data.getLength() <= this._to ) {\r\n        throw `Wave Y has not enough point to be fitted to subrange [${this._from\r\n        }, ${this._to}]`;\r\n      }\r\n\r\n      if ( this._from < 0 ) {\r\n        throw 'Impossible to fit a subrange with negative indices';\r\n      }\r\n    } else {\r\n      this.NPTS = this.data.getLength();\r\n      this._from = 0;\r\n      this._to = this.data.getLength() - 1;\r\n    }\r\n\r\n    if ( this.dataX && this.dataX.getLength() <= this._to ) {\r\n      throw `Wave X has not enough point to be fitted to subrange [${this._from\r\n      }, ${this._to}]`;\r\n    }\r\n\r\n    this.arrY = this.data.getDataY();\r\n\r\n    if ( this.dataX ) {\r\n      this.arrX = this.dataX.getDataY();\r\n    } else {\r\n      this.arrX = this.data.getDataX();\r\n    }\r\n\r\n    this.resid = new Array( this.NPTS ).fill( 0 );\r\n    this.jac = new Array( this.NPTS ).fill( 0 );\r\n    this.jac = this.jac.map( ( el ) => new Array( this.NPARMS ) );\r\n  }\r\n\r\n  fit() {\r\n    this.log(\r\n      `Starting the fit with initial parameter list {${this.parms.join()}};`\r\n    );\r\n    new LM( this, this.NPARMS, this.NPTS, this._hookIteration );\r\n    this.log( `Fit successful. Output parameters {${this.parms.join()}};` );\r\n\r\n    this._result = this.buildFit( this.parms, 200 );\r\n\r\n    if ( this.options.done ) {\r\n      this.options.done( this.parms, this._result );\r\n    }\r\n\r\n    return this._result;\r\n  }\r\n\r\n  func( x, param ) {\r\n    return this._func( x, param );\r\n  }\r\n\r\n  computeResiduals() {\r\n    var sumsq = 0;\r\n    for ( var i = 0; i < this.NPTS; i++ ) {\r\n      this.resid[ i ] =\r\n        ( this.func( this.arrX[ i + this._from ], this.parms ) -\r\n          this.arrY[ i + this._from ] ) *\r\n        this.WEIGHT;\r\n      sumsq += this.resid[ i ] * this.resid[ i ];\r\n    }\r\n\r\n    return sumsq;\r\n  }\r\n\r\n  log( message ) {\r\n    if ( this.options.log ) {\r\n      console.log( message );\r\n    }\r\n  }\r\n\r\n  //------the four mandated interface methods------------\r\n  nudge( dp ) {\r\n    for ( var j = 0; j < this.NPARMS; j++ ) {\r\n      this.parms[ j ] += dp[ j ];\r\n    }\r\n    return this.computeResiduals();\r\n  }\r\n\r\n  buildJacobian() {\r\n    // Allows LM to compute a new Jacobian.\r\n    // Uses current parms[] and two-sided finite difference.\r\n    // If current parms[] is bad, returns false.\r\n    var delta = new Array( this.NPARMS );\r\n    var FACTOR = 0.5 / this.DELTAP;\r\n    var d = 0;\r\n\r\n    for ( var j = 0; j < this.NPARMS; j++ ) {\r\n      for ( var k = 0; k < this.NPARMS; k++ )\r\n        delta[ k ] = k == j ? this.DELTAP : 0.0;\r\n\r\n      d = this.nudge( delta ); // resid at pplus\r\n      if ( d == this.BIGVAL ) {\r\n        throw 'Bad dBuildJacobian() exit 2';\r\n      }\r\n\r\n      for ( var i = 0; i < this.NPTS; i++ ) {\r\n        this.jac[ i ][ j ] = this.getResidualElement( i );\r\n      }\r\n\r\n      for ( var k = 0; k < this.NPARMS; k++ ) {\r\n        delta[ k ] = k == j ? -2 * this.DELTAP : 0.0;\r\n      }\r\n\r\n      d = this.nudge( delta ); // resid at pminus\r\n      if ( d == this.BIGVAL ) {\r\n        throw 'Bad dBuildJacobian(). exit 3';\r\n      }\r\n\r\n      for ( var i = 0; i < this.NPTS; i++ )\r\n        this.jac[ i ][ j ] -= this.getResidualElement( i ); // fetches resid[]\r\n\r\n      for ( var i = 0; i < this.NPTS; i++ ) this.jac[ i ][ j ] *= FACTOR;\r\n\r\n      for ( var k = 0; k < this.NPARMS; k++ )\r\n        delta[ k ] = k == j ? this.DELTAP : 0.0;\r\n\r\n      d = this.nudge( delta );\r\n      if ( d == this.BIGVAL ) {\r\n        throw 'Bad dBuildJacobian(). exit 4';\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  getResidualElement( i ) {\r\n    // Allows LM to see one element of the resid[] vector.\r\n    return this.resid[ i ];\r\n  }\r\n\r\n  getJacobianElement( i, j ) {\r\n    // Allows LM to see one element of the Jacobian matrix.\r\n    return this.jac[ i ][ j ];\r\n  }\r\n\r\n  buildFit( parms, length ) {\r\n    let x;\r\n\r\n    if ( !length ) {\r\n      x = this.arrX;\r\n    } else {\r\n      const xmin = this.dataX.getMin( this._from, this._to );\r\n      const xmax = this.dataX.getMax( this._from, this._to );\r\n\r\n      x = new Array( length )\r\n        .fill( 0 )\r\n        .map( ( el, index ) => ( index * ( xmax - xmin ) ) / ( length - 1 ) + xmin );\r\n    }\r\n\r\n    var fit = new Array( x.length );\r\n    for ( var i = 0, l = x.length; i < l; i++ ) {\r\n      fit[ i ] = this.func( x[ i ], this.parms );\r\n    }\r\n\r\n    let waveformResult = this.options.waveform;\r\n    waveformResult.setData( fit, x );\r\n    //waveformResult.setXWaveform( x );\r\n\r\n    return waveformResult;\r\n  }\r\n}\r\n\r\nclass LM {\r\n  constructor( gH, gnadj, gnpnts, hook ) {\r\n    this.LMITER = 100; // max number of L-M iterations\r\n    this.LMBOOST = 2.0; // damping increase per failed step\r\n    this.LMSHRINK = 0.1; // damping decrease per successful step\r\n    this.LAMBDAZERO = 0.001; // initial damping\r\n    this.LAMBDAMAX = 1e9; // max damping\r\n    this.LMTOL = 1e-12; // exit tolerance\r\n    this.BIGVAL = 9e99; // trouble flag\r\n\r\n    this.sos;\r\n    this.sosprev;\r\n    this.lambda;\r\n\r\n    this.myH = null; // overwritten by constructor\r\n    this.nadj = 0; // overwritten by constructor\r\n    this.npts = 0; // overwritten by constructor\r\n\r\n    this.delta; // local parm change\r\n    this.beta;\r\n    this.alpha;\r\n    this.amatrix;\r\n\r\n    // Constructor sets up fields and drives iterations.\r\n    this.myH = gH;\r\n    this.nadj = gnadj;\r\n    this.npts = gnpnts;\r\n\r\n    this.delta = new Array( this.nadj ).fill( 0 );\r\n    this.beta = new Array( this.nadj ).fill( 0 );\r\n\r\n    this.alpha = new Array( this.nadj ).fill( 0 );\r\n    this.amatrix = new Array( this.nadj ).fill( 0 );\r\n\r\n    this.alpha = this.alpha.map( () => new Array( this.nadj ) );\r\n    this.amatrix = this.amatrix.map( () => new Array( this.nadj ) );\r\n\r\n    this.lambda = this.LAMBDAZERO;\r\n\r\n    var niter = 0;\r\n    var done = false;\r\n    do {\r\n      done = this.bLMiter();\r\n\r\n      if ( hook ) {\r\n        hook( this.myH.params );\r\n      }\r\n\r\n      niter++;\r\n    } while ( !done && niter < this.LMITER );\r\n  }\r\n\r\n  bLMiter() {\r\n    // Each call performs one LM iteration.\r\n    // Returns true if done with iterations; false=wants more.\r\n    // Global nadj, npts; needs nadj, myH to be preset.\r\n    // Ref: M.Lampton, Computers in Physics v.11 pp.110-115 1997.\r\n    for ( var k = 0; k < this.nadj; k++ ) this.delta[ k ] = 0.0;\r\n    this.sos = this.myH.nudge( this.delta );\r\n    if ( this.sos == this.BIGVAL ) {\r\n      console.error( '  bLMiter finds faulty initial nudge()' );\r\n      return false;\r\n    }\r\n    this.sosprev = this.sos;\r\n\r\n    this.myH.log( `  bLMiter..SumOfSquares= ${this.sos}` );\r\n    if ( !this.myH.buildJacobian() ) {\r\n      console.error( '  bLMiter finds buildJacobian()=false' );\r\n      return false;\r\n    }\r\n\r\n    for (\r\n      var k = 0; k < this.nadj; k++ // get downhill gradient beta\r\n    ) {\r\n      this.beta[ k ] = 0.0;\r\n      for ( var i = 0; i < this.npts; i++ ) {\r\n        this.beta[ k ] -=\r\n          this.myH.getResidualElement( i ) * this.myH.getJacobianElement( i, k );\r\n      }\r\n    }\r\n\r\n    for (\r\n      var k = 0; k < this.nadj; k++ // get curvature matrix alpha\r\n    )\r\n      for ( var j = 0; j < this.nadj; j++ ) {\r\n        this.alpha[ j ][ k ] = 0.0;\r\n        for ( var i = 0; i < this.npts; i++ ) {\r\n          this.alpha[ j ][ k ] +=\r\n            this.myH.getJacobianElement( i, j ) *\r\n            this.myH.getJacobianElement( i, k );\r\n        }\r\n      }\r\n    var rrise = 0;\r\n    do // inner damping loop searches for one downhill step\r\n    {\r\n      for ( var k = 0; k < this.nadj; k++ ) {\r\n        // copy and damp it\r\n        for ( var j = 0; j < this.nadj; j++ ) {\r\n          this.amatrix[ j ][ k ] = this.alpha[ j ][ k ] + ( j == k ? this.lambda : 0.0 );\r\n        }\r\n      }\r\n\r\n      this.gaussj( this.amatrix, this.nadj ); // invert\r\n\r\n      for (\r\n        var k = 0; k < this.nadj; k++ // compute delta[]\r\n      ) {\r\n        this.delta[ k ] = 0.0;\r\n        for ( var j = 0; j < this.nadj; j++ )\r\n          this.delta[ k ] += this.amatrix[ j ][ k ] * this.beta[ j ];\r\n      }\r\n      this.sos = this.myH.nudge( this.delta ); // try it out.\r\n      if ( this.sos == this.BIGVAL ) {\r\n        console.error( '  LMinner failed SOS step' );\r\n        return false;\r\n      }\r\n      rrise = ( this.sos - this.sosprev ) / ( 1 + this.sos );\r\n      if ( rrise <= 0.0 ) {\r\n        // good step!\r\n        this.lambda *= this.LMSHRINK; // shrink lambda\r\n        break; // leave lmInner.\r\n      }\r\n      for ( var q = 0; q < this.nadj; q++ ) {\r\n        // reverse course!\r\n        this.delta[ q ] *= -1.0;\r\n      }\r\n      this.myH.nudge( this.delta ); // sosprev should still be OK\r\n      if ( rrise < this.LMTOL ) {\r\n        // finished but keep prev parms\r\n        break; // leave inner loop\r\n      }\r\n      this.lambda *= this.LMBOOST; // else try more damping.\r\n    } while ( this.lambda < this.LAMBDAMAX );\r\n    return rrise > -this.LMTOL || this.lambda > this.LAMBDAMAX;\r\n  }\r\n\r\n  gaussj( a, N ) {\r\n    // Inverts the double array a[N][N] by Gauss-Jordan method\r\n    // M.Lampton UCB SSL (c)2003, 2005\r\n\r\n    var det = 1.0,\r\n      big,\r\n      save;\r\n    var i, j, k, L;\r\n    var ik = new Array( 100 );\r\n    var jk = new Array( 100 );\r\n\r\n    for ( k = 0; k < N; k++ ) {\r\n      big = 0.0;\r\n      for ( i = k; i < N; i++ )\r\n        for (\r\n          j = k; j < N; j++ // find biggest element\r\n        )\r\n          if ( Math.abs( big ) <= Math.abs( a[ i ][ j ] ) ) {\r\n            big = a[ i ][ j ];\r\n            ik[ k ] = i;\r\n            jk[ k ] = j;\r\n          }\r\n      if ( big == 0.0 ) return 0.0;\r\n      i = ik[ k ];\r\n      if ( i > k )\r\n        for (\r\n          j = 0; j < N; j++ // exchange rows\r\n        ) {\r\n          save = a[ k ][ j ];\r\n          a[ k ][ j ] = a[ i ][ j ];\r\n          a[ i ][ j ] = -save;\r\n        }\r\n      j = jk[ k ];\r\n      if ( j > k )\r\n        for ( i = 0; i < N; i++ ) {\r\n          save = a[ i ][ k ];\r\n          a[ i ][ k ] = a[ i ][ j ];\r\n          a[ i ][ j ] = -save;\r\n        }\r\n      for (\r\n        i = 0; i < N; i++ // build the inverse\r\n      )\r\n        if ( i != k ) a[ i ][ k ] = -a[ i ][ k ] / big;\r\n      for ( i = 0; i < N; i++ )\r\n        for ( j = 0; j < N; j++ )\r\n          if ( i != k && j != k ) a[ i ][ j ] += a[ i ][ k ] * a[ k ][ j ];\r\n      for ( j = 0; j < N; j++ )\r\n        if ( j != k ) a[ k ][ j ] /= big;\r\n      a[ k ][ k ] = 1.0 / big;\r\n      det *= big; // bomb point\r\n    } // end k loop\r\n    for ( L = 0; L < N; L++ ) {\r\n      k = N - L - 1;\r\n      j = ik[ k ];\r\n      if ( j > k )\r\n        for ( i = 0; i < N; i++ ) {\r\n          save = a[ i ][ k ];\r\n          a[ i ][ k ] = -a[ i ][ j ];\r\n          a[ i ][ j ] = save;\r\n        }\r\n      i = jk[ k ];\r\n      if ( i > k )\r\n        for ( j = 0; j < N; j++ ) {\r\n          save = a[ k ][ j ];\r\n          a[ k ][ j ] = -a[ i ][ j ];\r\n          a[ i ][ j ] = save;\r\n        }\r\n    }\r\n    return det;\r\n  }\r\n}\r\n\r\nexport default FitHost;\r\n//module.export = FitHost","import * as util from '../graph.util.js';\r\n\r\nimport aggregator from './data_aggregator.js';\r\nimport FitLM from './fit_lm.js';\r\n\r\nclass Waveform {\r\n  constructor(data = [], xOffset = 0, xScale = 1) {\r\n    this.xOffset = xOffset;\r\n    this.xScale = xScale;\r\n\r\n    // Error bar handling\r\n    this.errors = {\r\n      nb: 0,\r\n\r\n      bars: {\r\n        above: null,\r\n        below: null\r\n      },\r\n\r\n      boxes: {\r\n        above: null,\r\n        below: null\r\n      }\r\n    };\r\n\r\n    this.BELOW = Waveform.BELOW;\r\n    this.ABOVE = Waveform.ABOVE;\r\n    this.BOX = Waveform.BOX;\r\n    this.BAR = Waveform.BAR;\r\n\r\n    this.setData(data);\r\n  }\r\n\r\n  /** [ [ x1, y1 ], [ x2, y2 ] ] */\r\n\r\n  /*\r\n  setDataXY( data ) {\r\n\r\n    let newData = [ this._makeArray( data.length ), this._makeArray( data.length ) ],\r\n      warnNaN = false;\r\n    const nanable = this.isNaNAllowed();\r\n\r\n    data.map( ( el, index ) => {\r\n\r\n      if ( !nanable && ( el[ 0 ] !== el[ 0 ] || el[ 1 ] !== el[ 1 ] ) ) {\r\n        warnNaN = true;\r\n      }\r\n\r\n      newData[ 0 ][ index ] = el[ 0 ];\r\n      newData[ 1 ][ index ] = el[ 1 ];\r\n    } );\r\n\r\n    if ( warnNaN ) {\r\n      this.warn( \"Trying to assign NaN values to a typed array that does not support NaNs. 0's will be used instead\" );\r\n    }\r\n\r\n    this._setData( ...newData );\r\n    return this;\r\n  }\r\n*/\r\n  setData(data, dataX = null) {\r\n    this._originalData = data;\r\n    this._originalDataX = dataX;\r\n\r\n    this.xdata = null;\r\n\r\n    this.mutated();\r\n    return this;\r\n  }\r\n\r\n  mutated() {\r\n\r\n    /* First, we must treat the case of the array of array for backward compatibility */\r\n    let data;\r\n    if (Array.isArray(this._originalData[0])) {\r\n      let x = [];\r\n      let y = [];\r\n      this._originalData.forEach((el) => {\r\n        x.push(el[0]);\r\n        y.push(el[1]);\r\n      });\r\n      // This case has no mutation for the x variable, it's a brand new object\r\n      this.setXWaveform(x);\r\n      data = y;\r\n    } else {\r\n      data = this._originalData;\r\n    }\r\n    // Using typed array, we need to make a copy of the data\r\n    const nanable = this.isNaNAllowed();\r\n    let warnNaN = false;\r\n    let newData;\r\n\r\n    // Using typed arrays ?\r\n    if (this.getTypedArrayClass()) {\r\n      // Create the typed array\r\n      newData = this._makeArray(data.length);\r\n\r\n      data.forEach((el, index) => {\r\n        if (!nanable && (el[0] !== el[0] || el[1] !== el[1])) {\r\n          warnNaN = true;\r\n        }\r\n        // Copy all the data in it\r\n        newData[index] = el;\r\n      });\r\n\r\n      if (warnNaN) {\r\n        this.warn(\r\n          \"Trying to assign NaN values to a typed array that does not support NaNs. 0's will be used instead\"\r\n        );\r\n      }\r\n    } else {\r\n\r\n      if (!nanable) {\r\n        data.forEach((el, index) => {\r\n          if (!nanable && (el[0] !== el[0] || el[1] !== el[1])) {\r\n            warnNaN = true;\r\n          }\r\n        });\r\n      }\r\n\r\n      newData = data;\r\n    }\r\n\r\n    if (this._originalDataX) {\r\n      if (this.xdata) {\r\n        this.xdata.mutated();\r\n      } else {\r\n        this.setXWaveform(this._originalDataX);\r\n      }\r\n    }\r\n\r\n    this._setData(newData);\r\n    return this;\r\n  }\r\n\r\n  getY(index, optimized) {\r\n    if (optimized && this.dataInUse) {\r\n      return this.dataInUse.y[index] * this.getScale() + this.getShift();\r\n    }\r\n\r\n    return this.data[index] * this.getScale() + this.getShift();\r\n  }\r\n\r\n  /*\r\n    flipXY() {\r\n      let temp;\r\n      temp = this.data.x;\r\n      this.data.x = this.data.y;\r\n      this.data.y = temp;\r\n\r\n      this._setData( this.data.x, this.data.y );\r\n    }*/\r\n\r\n  setXWaveform(waveform) {\r\n    if (!(waveform instanceof Waveform)) {\r\n      if (Array.isArray(waveform)) {\r\n        waveform = new Waveform(waveform);\r\n      } else {\r\n        throw 'Cannot set X waveform. Data is not a valid array.';\r\n      }\r\n    }\r\n\r\n    this.xdata = waveform;\r\n\r\n    this.computeXMinMax();\r\n    return this;\r\n  }\r\n\r\n  hasXWaveform() {\r\n    return !!this.xdata;\r\n  }\r\n\r\n  getXWaveform() {\r\n    if (this.xdata) {\r\n      return this.xdata;\r\n    }\r\n\r\n    var wave = new Waveform();\r\n    for (var i = 0; i < this.getLength(); i += 1) {\r\n      wave.append(this.getX(i));\r\n    }\r\n    return wave;\r\n  }\r\n\r\n  rescaleX(offset, scale) {\r\n    this.xScale = scale;\r\n    this.xOffset = offset;\r\n    this.computeXMinMax();\r\n    return this;\r\n  }\r\n\r\n  getTypedArrayClass() {\r\n    return this._typedArrayClass || false;\r\n  }\r\n\r\n  setTypedArrayClass(constructor) {\r\n    if (\r\n      this.getTypedArrayClass() &&\r\n      this.isNaNAllowed() &&\r\n      !this.isNaNAllowed(constructor)\r\n    ) {\r\n      this.warn(\r\n        `NaN values are not allowed by the new constructor (${constructor.name\r\n        }) while it was allowed by the previous one (${this._typedArrayClass.name\r\n        })`\r\n      );\r\n    }\r\n\r\n    if (\r\n      this.getTypedArrayClass() &&\r\n      this.isUnsigned() &&\r\n      !this.isUnsigned(constructor)\r\n    ) {\r\n      this.warn(\r\n        'You are switching from signed values to unsigned values. You may experience data corruption if there were some negative values.'\r\n      );\r\n    }\r\n\r\n    this._typedArrayClass = constructor;\r\n\r\n    if (this.data) {\r\n      this._setData(constructor.from(this.data));\r\n    }\r\n\r\n    if (this.hasXWaveform()) {\r\n      this.getXWaveform().setTypedArrayClass(constructor);\r\n    }\r\n  }\r\n\r\n  isNaNAllowed(constructor = this._typedArrayClass) {\r\n    // The following types accept NaNs\r\n    return (\r\n      constructor == Array ||\r\n      constructor == Float32Array ||\r\n      constructor == Float64Array\r\n    );\r\n  }\r\n\r\n  isUnsigned(constructor = this._typedArrayClass) {\r\n    // The following types accept NaNs\r\n    return (\r\n      constructor == Uint8Array ||\r\n      constructor == Uint8ClampedArray ||\r\n      constructor == Uint16Array ||\r\n      constructor == Uint32Array\r\n    );\r\n  }\r\n\r\n  recalculateMinMaxNewPoint(x, y) {\r\n    if (x < this.minX || this.minX === undefined) {\r\n      this.minX = x;\r\n    }\r\n\r\n    if (x > this.maxX || this.maxX === undefined) {\r\n      this.maxX = x;\r\n    }\r\n\r\n    if (y < this.minY || this.minY === undefined) {\r\n      this.minY = y;\r\n    }\r\n\r\n    if (y > this.maxY || this.maxY === undefined) {\r\n      this.maxY = y;\r\n    }\r\n  }\r\n\r\n  prepend(x, y) {\r\n    if (typeof x == 'function') {\r\n      x = x(this);\r\n    }\r\n\r\n    if (typeof y == 'function') {\r\n      y = y(this);\r\n    }\r\n\r\n    if (this.xdata) {\r\n      this.xdata.prepend(null, x);\r\n    } else if (x !== null) {\r\n      this.xdata = this.getXWaveform();\r\n      this.xdata.prepend(null, x);\r\n    } else {\r\n      this.xOffset -= this.xScale;\r\n    }\r\n\r\n    this.data.unshift(y);\r\n    this.recalculateMinMaxNewPoint(x, y);\r\n    return this;\r\n  }\r\n\r\n  append(x, y) {\r\n    if (typeof x == 'function') {\r\n      x = x(this);\r\n    }\r\n\r\n    if (typeof y == 'function') {\r\n      y = y(this);\r\n    }\r\n\r\n    if (this.xdata) {\r\n      this.xdata.append(null, x);\r\n    } else if (x !== null) {\r\n      this.xdata = this.getXWaveform();\r\n      this.xdata.append(null, x);\r\n    }\r\n\r\n    if (this.monotoneous) {\r\n      if (\r\n        y > this.data[this.data.y] &&\r\n        this.getMonotoneousAscending() === false\r\n      ) {\r\n        this.monotoneous = false;\r\n      } else if (\r\n        y < this.data[this.data.y] &&\r\n        this.getMonotoneousAscending() === true\r\n      ) {\r\n        this.monotoneous = false;\r\n      }\r\n    }\r\n\r\n    if (this.data.length == 1 || this._monotoneousAscending === undefined) {\r\n      this.monotoneous = true;\r\n\r\n      if (y == this.data[0]) {\r\n        this._monotoneousAscending = undefined;\r\n      } else {\r\n        this._monotoneousAscending = y > this.data[0];\r\n      }\r\n    }\r\n\r\n    this.data.push(y);\r\n    this.recalculateMinMaxNewPoint(x, y);\r\n\r\n    return this;\r\n  }\r\n\r\n  concat(wave2) {\r\n    if (!this.xdata) {\r\n      this.xdata = this.getXWaveform();\r\n    }\r\n\r\n    if (!wave2.xdata) {\r\n      wave2.xdata = wave2.getXWaveform();\r\n    }\r\n\r\n    this.data = this.data.concat(wave2.data);\r\n    this.xdata.data = this.xdata.data.concat(wave2.xdata.data);\r\n\r\n    this.checkMonotonicity();\r\n    this.xdata.checkMonotonicity();\r\n\r\n    this.computeXMinMax();\r\n\r\n    return this;\r\n  }\r\n\r\n  _makeArray(length) {\r\n    const constructor = this.getTypedArrayClass();\r\n    if (constructor) {\r\n      return new constructor(length);\r\n    }\r\n    return new Array(length);\r\n  }\r\n\r\n  _setData(dataY) {\r\n    const l = dataY.length;\r\n    let i = 1,\r\n      monoDir = dataY[1] > dataY[0],\r\n      minY = dataY[0],\r\n      maxY = dataY[0];\r\n\r\n    if (isNaN(minY)) {\r\n      minY = Number.MAX_VALUE;\r\n    }\r\n\r\n    if (isNaN(maxY)) {\r\n      maxY = -Number.MAX_VALUE;\r\n    }\r\n\r\n    this._monotoneous = true;\r\n\r\n    for (; i < l; i++) {\r\n      if (dataY[i] !== dataY[i - 1] && monoDir !== dataY[i] > dataY[i - 1]) {\r\n        this._monotoneous = false;\r\n      }\r\n\r\n      if (dataY[i] === dataY[i]) {\r\n        // NaN support\r\n        minY = Math.min(dataY[i], minY);\r\n        maxY = Math.max(dataY[i], maxY);\r\n      }\r\n    }\r\n    if (this._monotoneous) {\r\n      this._monotoneousAscending = dataY[1] > dataY[0];\r\n    }\r\n\r\n    this.data = dataY;\r\n\r\n    this.minY = minY;\r\n    this.maxY = maxY;\r\n    this.checkMinMaxErrorBars();\r\n    this.computeXMinMax();\r\n    console.log(this.minY, this.maxY, this.minX, this.maxX);\r\n  }\r\n\r\n  checkMinMaxErrorBars() {\r\n    let minY = this.minY,\r\n      maxY = this.maxY,\r\n      i = 0,\r\n      l = this.getLength();\r\n\r\n    if (this.hasErrorBars()) {\r\n      // If prefer to loop again here\r\n\r\n      for (i = 0; i < l; i++) {\r\n        if (this.data[i] === this.data[i]) {\r\n          // NaN support\r\n\r\n          minY = Math.min(minY, this.data[i] - this.getMaxError(i, 'below'));\r\n          maxY = Math.max(maxY, this.data[i] + this.getMaxError(i, 'above'));\r\n        }\r\n      }\r\n\r\n      this.minY = minY;\r\n      this.maxY = maxY;\r\n    } else {\r\n      this.minY = minY;\r\n      this.maxY = maxY;\r\n    }\r\n  }\r\n\r\n  computeXMinMax() {\r\n    if (!this.data) {\r\n      return;\r\n    }\r\n\r\n    if (this.xdata) {\r\n      this.minX = this.xdata.getMin();\r\n      this.maxX = this.xdata.getMax();\r\n    } else {\r\n      const b1 = this.xOffset + this.xScale * this.getLength(),\r\n        b2 = this.xOffset;\r\n\r\n      this.minX = Math.min(b1, b2);\r\n      this.maxX = Math.max(b1, b2);\r\n    }\r\n  }\r\n\r\n  getDataInUse() {\r\n    return this.dataInUse || this.data;\r\n  }\r\n\r\n  getIndexFromVal(val, useDataToUse = false, roundingMethod = Math.round) {\r\n    let data;\r\n\r\n    if (useDataToUse && this.dataInUse) {\r\n      data = this.dataInUse.y;\r\n    } else {\r\n      data = this.data;\r\n    }\r\n\r\n    let position;\r\n\r\n    position = this.getIndexFromMonotoneousData(\r\n      val,\r\n      data,\r\n      this.data.getMonotoneousAscending(),\r\n      roundingMethod\r\n    );\r\n\r\n    if (useDataToUse && this.dataInUse && this.dataInUseType == 'aggregateY') {\r\n      // In case of aggregation, round to the closest element of 4.\r\n      return position - (position % 4);\r\n    }\r\n\r\n    return position;\r\n  }\r\n\r\n  getIndexFromX(xval, useDataToUse = false, roundingMethod = Math.round) {\r\n    let xdata;\r\n\r\n    let data, position;\r\n\r\n    xval -= this.getXShift();\r\n    xval /= this.getXScale();\r\n\r\n    if (xval < this.getDataMinX()) {\r\n      return false;\r\n    }\r\n\r\n    if (xval > this.getDataMaxX()) {\r\n      return false;\r\n    }\r\n\r\n    if (useDataToUse && this.dataInUse) {\r\n      xdata = this.dataInUse.x;\r\n    } else if (this.xdata) {\r\n      xdata = this.xdata.getData();\r\n    }\r\n\r\n    if (this.hasXWaveform()) {\r\n\r\n      if (this.isXMonotoneous()) {\r\n        position = this.xdata.getIndexFromMonotoneousData(\r\n          xval,\r\n          xdata,\r\n          this.xdata.getMonotoneousAscending(),\r\n          roundingMethod\r\n        );\r\n      } else {\r\n        position = euclidianSearch(xval, undefined, xdata, undefined, 1, undefined);\r\n\r\n      }\r\n    } else {\r\n      position = Math.max(\r\n        0,\r\n        Math.min(\r\n          this.getLength() - 1,\r\n          roundingMethod((xval - this.xOffset) / this.xScale)\r\n        )\r\n      );\r\n    }\r\n\r\n    if (useDataToUse && this.dataInUse && this.dataInUseType == 'aggregateX') {\r\n      // In case of aggregation, round to the closest element of 4.\r\n      return position - (position % 4);\r\n    }\r\n\r\n    return position;\r\n  }\r\n\r\n  getIndexFromY(yval, useDataToUse = false, roundingMethod = Math.round) {\r\n    let ydata;\r\n\r\n    let data, position;\r\n\r\n    yval -= this.getShift();\r\n    yval /= this.getScale();\r\n\r\n    if (yval < this.getDataMinY()) {\r\n      return false;\r\n    }\r\n\r\n    if (yval > this.getDataMaxY()) {\r\n      return false;\r\n    }\r\n\r\n    if (useDataToUse && this.dataInUse) {\r\n      ydata = this.dataInUse.y;\r\n    } else {\r\n      ydata = this.getData();\r\n    }\r\n\r\n    position = euclidianSearch(undefined, yval, undefined, ydata, 1, undefined);\r\n\r\n    if (useDataToUse && this.dataInUse && this.dataInUseType == 'aggregateX') {\r\n      // In case of aggregation, round to the closest element of 4.\r\n      return position - (position % 4);\r\n    }\r\n\r\n    return position;\r\n  }\r\n\r\n  /*\r\n    getIndexFromX( xval, useDataToUse = false, roundingMethod = Math.round ) {\r\n      if ( this.getXMin() > xval || this.getXMax() < xval ) {\r\n        return false;\r\n      }\r\n\r\n      if ( this.hasXWaveform() ) {\r\n        // The x value HAS to be rescaled\r\n\r\n        position = this.xdata.getIndexFromMonotoneousData(\r\n          xval,\r\n          xdata,\r\n          this.xdata.getMonotoneousAscending(),\r\n          roundingMethod\r\n        );\r\n      } else {\r\n        position = Math.max(\r\n          0,\r\n          Math.min(\r\n            this.getLength() - 1,\r\n            roundingMethod( ( xval - this.xOffset ) / this.xScale )\r\n          )\r\n        );\r\n      }\r\n\r\n      return position;\r\n    }\r\n  */\r\n\r\n  setAtIndex(index, value) {\r\n    this.data[index] = value;\r\n  }\r\n  /**\r\n   * Finds the point in the data stack with the smalled distance based on an x and y value.\r\n   * @param {number} xval\r\n   * @param {number} yval\r\n   * @param {boolean} useDataToUse\r\n   * @param {function} roundingMethod\r\n   * @param {number} scaleX\r\n   * @param {number} scaleY\r\n   * @returns {number} The index of the closest position\r\n   */\r\n  getIndexFromXY(\r\n    xval,\r\n    yval,\r\n    useDataToUse = false,\r\n    roundingMethod = Math.round,\r\n    scaleX = 1,\r\n    scaleY = 1\r\n  ) {\r\n    let xdata, ydata;\r\n\r\n    if (useDataToUse && this.dataInUse) {\r\n      xdata = this.dataInUse.x;\r\n      ydata = this.dataInUse.y;\r\n    } else if (this.xdata) {\r\n      xdata = this.xdata.data;\r\n      ydata = this.data;\r\n    }\r\n\r\n    let position;\r\n\r\n    //  if ( this.isXMonotoneous() ) {\r\n    // X lookup only\r\n    //     position = this.getIndexFromX( xval, useDataToUse, roundingMethod );\r\n\r\n    //   } else if ( !isNaN( yval ) ) {\r\n    position = this.getIndexFromDataXY(\r\n      xval,\r\n      xdata,\r\n      yval,\r\n      ydata,\r\n      scaleX,\r\n      scaleY\r\n    );\r\n    //   } else {\r\n    //     return;\r\n    //   }\r\n\r\n    if (useDataToUse && this.dataInUse && this.dataInUseType == 'aggregateX') {\r\n      // In case of aggregation, round to the closest element of 4.\r\n      return position - (position % 4);\r\n    }\r\n\r\n    return position;\r\n  }\r\n\r\n  /**\r\n   * Finds the closest point in x and y direction.\r\n   * @see euclidianSearch\r\n   * @private\r\n   * @param {number} valX\r\n   * @param {array<number>} dataX\r\n   * @param {number} valY\r\n   * @param {array<number>} dataY\r\n   * @param {number} [ scaleX = 1 ]\r\n   * @param {number} [ scaleY = 1 ]\r\n   *\r\n   * @returns {number} The index of the closest point\r\n   */\r\n  getIndexFromDataXY(valX, dataX, valY, dataY, scaleX = 1, scaleY = 1) {\r\n    let data, position;\r\n\r\n    valX -= this.getXShift();\r\n    valX /= this.getXScale();\r\n\r\n    valY -= this.getShift();\r\n    valY /= this.getScale();\r\n\r\n    return euclidianSearch(valX, valY, dataX, dataY, scaleX, scaleY);\r\n  }\r\n\r\n  /**\r\n   * Uses binary search to find the index the closest to ```val``` in ```valCollection```.\r\n   * @param {number} val\r\n   * @param {array<number>} valCollection\r\n   * @param {boolean} isAscending\r\n   */\r\n  getIndexFromMonotoneousData(val, valCollection, isAscending) {\r\n    if (!this.isMonotoneous()) {\r\n      console.trace();\r\n      throw 'Impossible to get the index from a non-monotoneous wave !';\r\n    }\r\n\r\n    val -= this.getShift();\r\n    val /= this.getScale();\r\n\r\n    return binarySearch(val, valCollection, !isAscending);\r\n  }\r\n\r\n  findWithShortestDistance(options) {\r\n\r\n    if (!options.axisRef) {\r\n      const index = this.getIndexFromXY(\r\n        options.x,\r\n        options.y,\r\n        true,\r\n        undefined,\r\n        options.scaleX,\r\n        options.scaleY\r\n      );\r\n\r\n      if (options.xMaxDistance && Math.abs(options.x - this.getX(index)) > Math.abs(options.xMaxDistance)) {\r\n        return -1;\r\n      }\r\n\r\n      if (options.yMaxDistance && Math.abs(options.y - this.getY(index)) > Math.abs(options.yMaxDistance)) {\r\n        return -1;\r\n      }\r\n\r\n      return index;\r\n    } else {\r\n\r\n      if (options.axisRef == 'x') {\r\n        const index = this.getIndexFromX(options.x, true, undefined);\r\n\r\n        if (options.xMaxDistance && Math.abs(options.x - this.getX(index)) > Math.abs(options.xMaxDistance)) {\r\n          return -1;\r\n        }\r\n\r\n        return index;\r\n      }\r\n\r\n      if (options.axisRef == 'y') {\r\n        const index = this.getIndexFromY(options.y, true, undefined);\r\n\r\n        if (options.yMaxDistance && Math.abs(options.y - this.getY(index)) > Math.abs(options.yMaxDistance)) {\r\n          return -1;\r\n        }\r\n\r\n        return index;\r\n      }\r\n    }\r\n  }\r\n\r\n  getShortestDistanceToPoint(valX, valY, maxDistanceX, maxDistanceY) {\r\n    valX -= this.getXShift();\r\n    valX /= this.getXScale();\r\n\r\n    valY -= this.getShift();\r\n    valY /= this.getScale();\r\n\r\n    let x, y, y2, x2, i, distance, shortestDistance, shortestDistanceIndex;\r\n\r\n    const point = {\r\n      x: valX,\r\n      y: valY\r\n    };\r\n\r\n    for (i = 0; i < this.length() - 1; i++) {\r\n      shortestDistance = Math.POSITIVE_INFINITY;\r\n      shortestDistanceIndex = 0;\r\n\r\n      x = this.getX(i);\r\n      y = this.getY(i);\r\n\r\n      x2 = this.getX(i + 1);\r\n      y2 = this.getY(i + 1);\r\n\r\n      if (\r\n        (maxDistanceX &&\r\n          ((x - valX > maxDistanceX && x2 - valX > maxDistanceX) ||\r\n            (valX - x > maxDistanceX && valX - x2 > maxDistanceX))) ||\r\n        (maxDistanceY &&\r\n          ((y - valY > maxDistanceY && y2 - valY > maxDistanceY) ||\r\n            (valY - y > maxDistanceY && valY - y2 > maxDistanceY)))\r\n      ) {\r\n        continue;\r\n      }\r\n\r\n      distance = distToSegment(point, {\r\n        x: x,\r\n        y: y\r\n      }, {\r\n        x: x2,\r\n        y: y2\r\n      });\r\n      if (distance < shortestDistance) {\r\n        shortestDistance = distance;\r\n        shortestDistanceIndex = i;\r\n      }\r\n    }\r\n\r\n    return {\r\n      shortestDistance: distance,\r\n      index: shortestDistanceIndex\r\n    };\r\n  }\r\n  getReductionType() {\r\n    return this.dataInUseType;\r\n  }\r\n\r\n  getXMin() {\r\n    return this.minX * this.getXScale() + this.getXShift();\r\n  }\r\n\r\n  getXMax() {\r\n    return this.maxX * this.getXScale() + this.getXShift();\r\n  }\r\n\r\n  getYMin() {\r\n    return this.minY * this.getScale() + this.getShift();\r\n  }\r\n\r\n  getYMax() {\r\n    return this.maxY * this.getScale() + this.getShift();\r\n  }\r\n\r\n  getMin() {\r\n    return this.minY * this.getScale() + this.getShift();\r\n  }\r\n\r\n  getMax() {\r\n    return this.maxY * this.getScale() + this.getShift();\r\n  }\r\n\r\n  getMinX() {\r\n    return this.minX * this.getXScale() + this.getXShift();\r\n  }\r\n\r\n  getMaxX() {\r\n    return this.maxX * this.getXScale() + this.getXShift();\r\n  }\r\n\r\n  getMinY() {\r\n    return this.minY * this.getScale() + this.getShift();\r\n  }\r\n\r\n  getMaxY() {\r\n    return this.maxY * this.getScale() + this.getShift();\r\n  }\r\n\r\n  getDataMaxX() {\r\n    return this.maxX;\r\n  }\r\n\r\n  getDataMinX() {\r\n    return this.minX;\r\n  }\r\n\r\n  getDataMaxY() {\r\n    return this.maxY;\r\n  }\r\n\r\n  getDataMinY() {\r\n    return this.minY;\r\n  }\r\n\r\n  getDataY() {\r\n    return this.data;\r\n  }\r\n\r\n  getData(optimized) {\r\n    if (!optimized || !this.dataInUse) {\r\n      return this.data;\r\n    }\r\n    return this.dataInUse.y;\r\n  }\r\n\r\n  setShift(shift = 0) {\r\n    // We must update the min and the max of the y data\r\n    //this.minY += ( shift - this.getShift() );\r\n    //this.maxY += ( shift - this.getShift() );\r\n    this.shift = shift;\r\n    return this;\r\n  }\r\n\r\n  getShift() {\r\n    return this.shift || 0;\r\n  }\r\n\r\n  getScale() {\r\n    return this.scale || 1;\r\n  }\r\n\r\n  setScale(scale = 1) {\r\n    // this.minY = ( this.minY - this.getShift() ) * scale;\r\n    // this.maxY = ( this.maxY - this.getShift() ) * scale;\r\n    this.scale = scale;\r\n    return this;\r\n  }\r\n\r\n  setXShift(shift = 0) {\r\n    if (!this.hasXWaveform) {\r\n      return this;\r\n    }\r\n\r\n    // We must update the min and the max of the x data\r\n    // That's important for when the data has already been set\r\n    //  this.minX += ( shift - this.getXShift() );\r\n    //    this.maxX += ( shift - this.getXShift() );\r\n    this.getXWaveform().setShift(shift);\r\n    return this;\r\n  }\r\n\r\n  getXShift(shift = 0) {\r\n    if (!this.hasXWaveform) {\r\n      return 0;\r\n    }\r\n\r\n    return this.getXWaveform().getShift();\r\n  }\r\n\r\n  setXScale(scale = 1) {\r\n    if (!this.hasXWaveform) {\r\n      return this;\r\n    }\r\n\r\n    this.getXWaveform().setScale(scale);\r\n    return this;\r\n  }\r\n\r\n  getXScale() {\r\n    if (!this.hasXWaveform) {\r\n      return 1;\r\n    }\r\n\r\n    return this.getXWaveform().getScale();\r\n  }\r\n\r\n  getLength() {\r\n    return this.data.length;\r\n  }\r\n\r\n  getDataToUseFlat() {\r\n    let l;\r\n    let j = 0;\r\n    let arr;\r\n\r\n    if (this.dataInUse) {\r\n      l = this.dataInUse.x.length;\r\n      arr = new Array(l * 2).fill(0);\r\n\r\n      for (var i = 0; i < l; i += 1) {\r\n        arr[j] = this.dataInUse.x[i];\r\n        arr[j + 1] = this.dataInUse.y[i];\r\n        j += 2;\r\n      }\r\n    } else {\r\n      l = this.getLength();\r\n      arr = new Array(l * 2).fill(0);\r\n      for (var i = 0; i < l; i += 1) {\r\n        arr[j + 1] = this.data[i];\r\n        arr[j] = this.getX(i);\r\n        j += 2;\r\n      }\r\n    }\r\n\r\n    return arr;\r\n  }\r\n\r\n  fit(options) {\r\n    var self = this;\r\n\r\n    return new Promise(function (resolver, rejector) {\r\n      var fit = new FitLM(\r\n        util.extend({}, {\r\n          dataY: self,\r\n          dataX: self.getXWaveform(),\r\n          done: function (results) {\r\n            resolver(results);\r\n          },\r\n          waveform: new Waveform()\r\n        },\r\n          options\r\n        )\r\n      );\r\n\r\n      fit.init();\r\n      fit.fit();\r\n    });\r\n  }\r\n\r\n  getX(index, optimized) {\r\n    if (optimized && this.dataInUse) {\r\n      return this.dataInUse.x[index] * this.getXScale() + this.getXShift();\r\n    }\r\n\r\n    if (this.xdata) {\r\n      return this.xdata.data[index] * this.getXScale() + this.getXShift();\r\n    } else {\r\n      return this.xOffset + index * this.xScale;\r\n    }\r\n  }\r\n\r\n  getXRaw(index, optimized) {\r\n    if (optimized && this.dataInUse) {\r\n      return this.dataInUse.x[index];\r\n    }\r\n\r\n    if (this.xdata) {\r\n      return this.xdata.data[index];\r\n    } else {\r\n      return index;\r\n    }\r\n  }\r\n\r\n  _integrateP(from = 0, to = this.getLength() - 1) {\r\n    from = Math.round(from);\r\n    to = Math.round(to);\r\n\r\n    if (from > to) {\r\n      let temp = from;\r\n      from = to;\r\n      to = temp;\r\n    }\r\n\r\n    var l = to - from + 1;\r\n    var sum = 0,\r\n      delta;\r\n\r\n    let deltaTot = 0;\r\n    let diff;\r\n    var arrY = this.getData();\r\n\r\n    for (; from <= to; from++) {\r\n      if (arrY.length - 1 > from) {\r\n        diff = this.getX(from + 1) - this.getX(from);\r\n        deltaTot += diff;\r\n        sum += arrY[from] * diff;\r\n      }\r\n    }\r\n\r\n    return [sum, l, deltaTot];\r\n  }\r\n\r\n  integrateP(from, to) {\r\n    var val = this._integrateP(from, to);\r\n    return val[0];\r\n  }\r\n\r\n  integrate(fromX, toX) {\r\n    return this.integrateP(this.getIndexFromX(fromX), this.getIndexFromX(toX));\r\n  }\r\n\r\n  average(p0 = 0, p1 = this.getLength() - 1) {\r\n    return this.getAverageP(p0, p1);\r\n  }\r\n\r\n  mean() {\r\n    return this.average();\r\n  }\r\n\r\n  stddev() {\r\n    let num = 0,\r\n      denom = 0;\r\n    const mean = this.mean();\r\n    for (var i = 0; i < this.getLength(); i++) {\r\n      num += (this.getY(i) - mean) ** 2;\r\n      denom++;\r\n    }\r\n\r\n    return (num / denom) ** 0.5;\r\n  }\r\n\r\n  getAverageP(from, to) {\r\n    var sum = this._integrateP(from, to);\r\n    return sum[0] / sum[2];\r\n  }\r\n\r\n  getAverageX(from, to) {\r\n    var sum = this._integrateX(from, to);\r\n    return sum[0] / sum[2];\r\n  }\r\n\r\n  checkMonotonicity() {\r\n    let i = 1,\r\n      data = this.getData();\r\n    const l = this.data.length;\r\n    let dir = data[1] > data[0];\r\n\r\n    for (; i < l; i++) {\r\n      if (data[i] !== data[i - 1] && dir !== data[i] > data[i - 1]) {\r\n        return (this._monotoneous = false);\r\n      }\r\n    }\r\n\r\n    this._monotoneousAscending = data[1] > data[0];\r\n    return (this._monotoneous = true);\r\n  }\r\n\r\n  requireXMonotonicity() {\r\n    if (this.xdata) {\r\n      this.xdata.requireMonotonicity();\r\n    }\r\n  }\r\n\r\n  requireMonotonicity() {\r\n    if (!this.isMonotoneous()) {\r\n      throw 'The wave must be monotonic';\r\n    }\r\n  }\r\n\r\n  isMonotoneous() {\r\n    return !!this._monotoneous;\r\n  }\r\n\r\n  isXMonotoneous() {\r\n    if (this.xdata) {\r\n      return this.xdata.isMonotoneous();\r\n    }\r\n    // Offset and scale is always monotoneous\r\n    return true;\r\n  }\r\n\r\n  invert(data) {\r\n    let d = data || this.data;\r\n    d.reverse();\r\n\r\n    if (this.xdata) {\r\n      this.xdata.invert();\r\n    }\r\n\r\n    if (this.isMonotoneous()) {\r\n      this._monotoneousAscending = !this._monotoneousAscending;\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  resampleForDisplay(options) {\r\n    // Serie redrawing\r\n\r\n    let i = 0;\r\n\r\n    this.requireXMonotonicity();\r\n\r\n    let inverting = false,\r\n      dataY = this.getDataY(),\r\n      data = {\r\n        x: [],\r\n        y: []\r\n      },\r\n      dataMinMax = [],\r\n      resampleSum,\r\n      resampleMin,\r\n      resampleMax,\r\n      resampleNum,\r\n      resample_x_start,\r\n      resample_x_px_start,\r\n      x_px,\r\n      doing_mean = false,\r\n      firstPointIndex = 0,\r\n      xval;\r\n\r\n    const l = this.getLength();\r\n\r\n    if (!options.xPosition) {\r\n      throw 'No position calculation method provided';\r\n    }\r\n\r\n    if (!options.resampleToPx) {\r\n      throw 'No \"resampleToPx\" method was provided. Unit: px per point';\r\n    }\r\n\r\n    if (options.minX > options.maxX) {\r\n      let temp = options.minX;\r\n      options.minX = options.maxX;\r\n      options.maxX = temp;\r\n    }\r\n\r\n    if (\r\n      (this.xdata && !this.xdata.getMonotoneousAscending()) ||\r\n      (!this.xdata && this.xScale < -0)\r\n    ) {\r\n      inverting = true;\r\n      i = l;\r\n    }\r\n\r\n    for (; inverting ? i > 0 : i < l; inverting ? i-- : i++) {\r\n      xval = this.getX(i);\r\n\r\n      if (options.minX > xval) {\r\n        firstPointIndex = i;\r\n        continue;\r\n      }\r\n\r\n      x_px = options.xPosition(xval);\r\n\r\n      if (!doing_mean) {\r\n        if (!firstPointIndex) {\r\n          firstPointIndex = i;\r\n        } else {\r\n          data.x.push(xval);\r\n          data.y.push(dataY[firstPointIndex]);\r\n        }\r\n\r\n        while (isNaN(dataY[i])) {\r\n          if (inverting) {\r\n            i--;\r\n          } else {\r\n            i++;\r\n          }\r\n        }\r\n\r\n        resampleSum = resampleMin = resampleMax = dataY[firstPointIndex];\r\n        resampleNum = 1;\r\n        resample_x_px_start = x_px;\r\n        resample_x_start = xval;\r\n        firstPointIndex = 0;\r\n\r\n        doing_mean = true;\r\n\r\n        continue;\r\n      }\r\n\r\n      if (\r\n        Math.abs(x_px - resample_x_px_start) > options.resampleToPx ||\r\n        i == l ||\r\n        i == 0 ||\r\n        isNaN(dataY[i])\r\n      ) {\r\n        let xpos = (resample_x_start + xval) / 2;\r\n\r\n        data.x.push(xpos);\r\n        data.y.push(resampleSum / resampleNum);\r\n\r\n        dataMinMax.push(xpos, resampleMin, resampleMax);\r\n\r\n        if (options.maxX !== undefined && xval > options.maxX) {\r\n          break;\r\n        }\r\n\r\n        doing_mean = false;\r\n\r\n        continue;\r\n      }\r\n\r\n      resampleSum += dataY[i];\r\n      resampleNum++;\r\n\r\n      resampleMin = Math.min(resampleMin, dataY[i]);\r\n      resampleMax = Math.max(resampleMax, dataY[i]);\r\n    }\r\n\r\n    this.dataInUseType = 'resampled';\r\n    this.dataInUse = data;\r\n    return dataMinMax;\r\n  }\r\n\r\n  interpolate(x) {\r\n    let yData = this.getDataY();\r\n    let xIndex;\r\n\r\n    if (this.xdata) {\r\n      let xData = this.xdata.getData();\r\n\r\n      try {\r\n        xIndex = binarySearch(x, xData, !this.xdata.getMonotoneousAscending());\r\n      } catch (e) {\r\n        return NaN;\r\n      }\r\n\r\n      if (xData[xIndex] == x) {\r\n        return yData[xIndex];\r\n      }\r\n      return (\r\n        ((x - xData[xIndex]) / (xData[xIndex + 1] - xData[xIndex])) *\r\n        (yData[xIndex + 1] - yData[xIndex]) +\r\n        yData[xIndex]\r\n      );\r\n    } else {\r\n      xIndex = (x - this.xOffset) / this.xScale;\r\n      let xIndexF = Math.floor(xIndex);\r\n      return (\r\n        (xIndex - xIndexF) * (yData[xIndexF + 1] - yData[xIndexF]) +\r\n        yData[xIndexF]\r\n      );\r\n    }\r\n  }\r\n\r\n  interpolateIndex_X(index) {\r\n    let yData = this.getDataY();\r\n    if (this.xdata) {\r\n      let xData = this.xdata.getData();\r\n      let indexStart = Math.floor(index);\r\n\r\n      return (\r\n        (index - indexStart) * (xData[indexStart + 1] - xData[indexStart]) +\r\n        xData[indexStart]\r\n      );\r\n    }\r\n  }\r\n\r\n  getMonotoneousAscending() {\r\n    if (!this.isMonotoneous()) {\r\n      return 'The waveform is not monotoneous';\r\n    }\r\n\r\n    return this._monotoneousAscending;\r\n  }\r\n\r\n  getXMonotoneousAscending() {\r\n    if (this.xdata) {\r\n      return this.xdata.getMonotoneousAscending();\r\n    }\r\n\r\n    return this.xScale > 0;\r\n  }\r\n\r\n  isXMonotoneousAscending() {\r\n    return this.getXMonotoneousAscending(...arguments);\r\n  }\r\n\r\n  divide(numberOrWave) {\r\n    return this._arithmetic(numberOrWave, DIVIDE);\r\n  }\r\n\r\n  divideBy() {\r\n    return this.divide(...arguments);\r\n  }\r\n\r\n  multiply(numberOrWave) {\r\n    return this._arithmetic(numberOrWave, MULTIPLY);\r\n  }\r\n\r\n  multiplyBy() {\r\n    return this.multiply(...arguments);\r\n  }\r\n\r\n  log() {\r\n    return this.logBase(10);\r\n  }\r\n\r\n  ln() {\r\n    return this.logBase(Math.E);\r\n  }\r\n\r\n  logBase(base) {\r\n    let logBase = Math.log(base);\r\n    this.data.map((valY) => {\r\n      return Math.log(valY) / logBase;\r\n    });\r\n  }\r\n\r\n  add(numberOrWave) {\r\n    return this._arithmetic(numberOrWave, ADD);\r\n  }\r\n\r\n  addBy() {\r\n    return this.add(...arguments);\r\n  }\r\n\r\n  subtract(numberOrWave) {\r\n    return this._arithmetic(numberOrWave, SUBTRACT);\r\n  }\r\n\r\n  subtractBy() {\r\n    return this.subtract(...arguments);\r\n  }\r\n\r\n  math(method) {\r\n    for (var i = 0; i < this.getLength(); i++) {\r\n      this.data[i] = method(this.getY(i), this.getX(i));\r\n    }\r\n\r\n    this._setData(this.data);\r\n    return this;\r\n  }\r\n\r\n  _arithmetic(numberOrWave, operator) {\r\n    if (numberOrWave instanceof Waveform) {\r\n      return this._waveArithmetic(numberOrWave, operator);\r\n    } else if (typeof numberOrWave == 'number') {\r\n      return this._numberArithmetic(numberOrWave, operator);\r\n    }\r\n  }\r\n\r\n  _numberArithmetic(num, operation) {\r\n    let i = 0,\r\n      l = this.getLength();\r\n\r\n    if (operation == MULTIPLY) {\r\n      for (; i < l; i++) {\r\n        this.data[i] *= num;\r\n      }\r\n\r\n      this.minY *= num;\r\n      this.maxY *= num;\r\n    } else if (operation == DIVIDE) {\r\n      for (; i < l; i++) {\r\n        this.data[i] /= num;\r\n      }\r\n\r\n      this.minY /= num;\r\n      this.maxY /= num;\r\n    } else if (operation == ADD) {\r\n      for (; i < l; i++) {\r\n        this.data[i] += num;\r\n      }\r\n\r\n      this.minY += num;\r\n      this.maxY += num;\r\n    } else if (operation == SUBTRACT) {\r\n      for (; i < l; i++) {\r\n        this.data[i] -= num;\r\n      }\r\n\r\n      this.minY -= num;\r\n      this.maxY -= num;\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  _waveArithmetic(wave, operation) {\r\n    let yDataThis = this.getDataY(),\r\n      i = 0;\r\n    const l = this.getLength();\r\n    this.requireXMonotonicity();\r\n    wave.requireXMonotonicity();\r\n\r\n    if (this.xdata && wave.xdata) {\r\n      const xSet = new Set();\r\n      const xData = this.xdata.data;\r\n      const xData2 = wave.xdata.data;\r\n\r\n      for (i = 0; i < xData.length; i++) {\r\n        xSet.add(xData[i]);\r\n      }\r\n\r\n      for (i = 0; i < xData2.length; i++) {\r\n        xSet.add(xData2[i]);\r\n      }\r\n\r\n      const xs = Array.from(xSet.values());\r\n      xs.sort((a, b) => a - b);\r\n\r\n      const ys = xs.map((x) => {\r\n        if (operation == MULTIPLY) {\r\n          return this.interpolate(x) * wave.interpolate(x);\r\n        } else if (operation == DIVIDE) {\r\n          return this.interpolate(x) / wave.interpolate(x);\r\n        } else if (operation == ADD) {\r\n          return this.interpolate(x) + wave.interpolate(x);\r\n        } else if (operation == SUBTRACT) {\r\n          return this.interpolate(x) - wave.interpolate(x);\r\n        }\r\n      });\r\n\r\n      this._setData(ys);\r\n\r\n      this.xdata._setData(xs);\r\n    } else {\r\n      if (operation == MULTIPLY) {\r\n        for (; i < l; i++) {\r\n          yDataThis[i] *= wave.interpolate(this.getX(i));\r\n        }\r\n      } else if (operation == DIVIDE) {\r\n        for (; i < l; i++) {\r\n          yDataThis[i] /= wave.interpolate(this.getX(i));\r\n        }\r\n      } else if (operation == ADD) {\r\n        for (; i < l; i++) {\r\n          yDataThis[i] += wave.interpolate(this.getX(i));\r\n        }\r\n      } else if (operation == SUBTRACT) {\r\n        for (; i < l; i++) {\r\n          yDataThis[i] -= wave.interpolate(this.getX(i));\r\n        }\r\n      }\r\n\r\n      this._setData(yDataThis);\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  aggregate(direction = 'x') {\r\n    this._dataAggregating = {};\r\n    this._dataAggregated = {};\r\n    this._dataAggregationDirection = direction.toUpperCase();\r\n\r\n    var pow2 = pow2floor(this.getLength());\r\n\r\n    this._dataAggregating = aggregator({\r\n      minX: this.minX,\r\n      maxX: this.maxX,\r\n      minY: this.minY,\r\n      maxY: this.maxY,\r\n      data: this.data,\r\n      xdata: this.xdata ? this.xdata.getData() : undefined,\r\n      xScale: this.xScale,\r\n      xOffset: this.xOffset,\r\n      numPoints: pow2,\r\n      direction: direction\r\n    }).then((event) => {\r\n      this._dataAggregated = event.aggregates;\r\n      this._dataAggregating = false;\r\n    });\r\n  }\r\n\r\n  hasAggregation() {\r\n    return !!this._dataAggregated;\r\n  }\r\n\r\n  selectAggregatedData(pxWidth) {\r\n    if (pxWidth < 2) {\r\n      return false;\r\n    }\r\n    /*\r\n        if( direction !== this._dataAggregationDirection ) {\r\n          throw \"The data is not aggregated in that direction\";\r\n        }\r\n    */\r\n\r\n    var level = pow2ceil(pxWidth);\r\n\r\n    if (this._dataAggregated[level]) {\r\n      this.dataInUseType = `aggregate${this._dataAggregationDirection}`;\r\n      this.dataInUse = this._dataAggregated[level];\r\n      return;\r\n    } else if (this._dataAggregating) {\r\n      return this._dataAggregating;\r\n    }\r\n\r\n    this.dataInUseType = 'none';\r\n    this.dataInUse = {\r\n      y: this.data,\r\n      x: this.getXWaveform().data\r\n    };\r\n  }\r\n\r\n  duplicate(alsoDuplicateXWave = true) {\r\n    var newWaveform = new Waveform();\r\n    newWaveform._setData(this.getDataY().slice());\r\n    newWaveform.rescaleX(this.xOffset, this.xShift);\r\n    newWaveform.setShift(this.getShift());\r\n    newWaveform.setScale(this.getScale());\r\n\r\n    if (this.xdata) {\r\n      if (alsoDuplicateXWave) {\r\n        newWaveform.setXWaveform(this.xdata.duplicate());\r\n      } else {\r\n        newWaveform.setXWaveform(this.xdata);\r\n      }\r\n\r\n      newWaveform.setXShift(this.getXShift());\r\n      newWaveform.setXScale(this.getXScale());\r\n    } else {\r\n      newWaveform.xOffset = this.xOffset;\r\n      newWaveform.xScale = this.xScale;\r\n    }\r\n\r\n    return newWaveform;\r\n  }\r\n\r\n  subrangeX(fromX, toX) {\r\n    if (!this.xdata) {\r\n      // We can select the new range from there\r\n\r\n      let fromP = this.getIndexFromX(fromX),\r\n        toP = this.getIndexFromX(toP);\r\n\r\n      return new Waveform()\r\n        .setData(this.data.slice(fromP, toP))\r\n        .rescaleX(this.xOffset, this.xScale);\r\n    } else {\r\n      var waveform = new Waveform();\r\n\r\n      for (var i = 0, l = this.data.length; i < l; i++) {\r\n        if (this.data[i] >= fromX && this.data[i] < toX) {\r\n          waveform.append(this.dataX[i], this.data[i]);\r\n        }\r\n      }\r\n\r\n      return waveform;\r\n    }\r\n  }\r\n\r\n  findLocalMinMax(xRef, xWithin, type) {\r\n    let index = this.getIndexFromX(xRef),\r\n      indexPlus = this.getIndexFromX(xRef + xWithin),\r\n      indexMinus = this.getIndexFromX(xRef - xWithin);\r\n\r\n    return this.findLocalMinMaxIndex(indexMinus, indexPlus, type);\r\n  }\r\n\r\n  findLocalMinMaxIndex(indexMinus, indexPlus, type) {\r\n    let tmp;\r\n\r\n    if (indexPlus < indexMinus) {\r\n      tmp = indexPlus;\r\n      indexPlus = indexMinus;\r\n      indexMinus = tmp;\r\n    }\r\n\r\n    let curr, currI;\r\n\r\n    if (type == 'max') {\r\n      curr = Number.NEGATIVE_INFINITY;\r\n\r\n      for (var i = indexMinus; i <= indexPlus; i++) {\r\n        if (this.getY(i) > curr) {\r\n          curr = this.getY(i);\r\n          currI = i;\r\n        }\r\n      }\r\n    } else {\r\n      curr = Number.POSITIVE_INFINITY;\r\n\r\n      for (var i = indexMinus; i <= indexPlus; i++) {\r\n        if (this.getY(i) < curr) {\r\n          curr = this.getY(i);\r\n          currI = i;\r\n        }\r\n      }\r\n    }\r\n\r\n    if (currI == indexMinus || currI == indexPlus) {\r\n      return false;\r\n    }\r\n\r\n    return this.getX(currI);\r\n  }\r\n\r\n  warn(text) {\r\n    if (console) {\r\n      console.warn(text);\r\n    }\r\n  }\r\n\r\n  setUnit(unit) {\r\n    this.unit = unit;\r\n    return this;\r\n  }\r\n\r\n  setXUnit(unit) {\r\n    if (this.hasXWaveform()) {\r\n      this.xdata.setUnit(unit);\r\n    }\r\n\r\n    this.xunit = unit;\r\n    return this;\r\n  }\r\n\r\n  getUnit() {\r\n    return this.unit || '';\r\n  }\r\n\r\n  getXUnit() {\r\n    if (this.hasXWaveform()) {\r\n      return this.xdata.getUnit();\r\n    }\r\n\r\n    return this.xunit | '';\r\n  }\r\n\r\n  hasXUnit() {\r\n    return this.getXUnit().length > 0;\r\n  }\r\n\r\n  hasUnit() {\r\n    return this.getUnit().length > 0;\r\n  }\r\n\r\n  findLevels(level, options) {\r\n    options = util.extend({\r\n      box: 1,\r\n      edge: 'both',\r\n      rounding: 'before',\r\n      rangeP: [0, this.getLength()]\r\n    },\r\n      options\r\n    );\r\n\r\n    var lastLvlIndex = options.rangeP[0];\r\n    var lvlIndex;\r\n    var indices = [];\r\n    var i = 0;\r\n\r\n    while (\r\n      (lvlIndex = this.findLevel(\r\n        level,\r\n        util.extend(true, {}, options, {\r\n          rangeP: [lastLvlIndex, options.rangeP[1]]\r\n        })\r\n      ))\r\n    ) {\r\n      indices.push(lvlIndex);\r\n      lastLvlIndex = Math.ceil(lvlIndex);\r\n\r\n      i++;\r\n      if (i > 1000) {\r\n        return;\r\n      }\r\n    }\r\n\r\n    return indices;\r\n  }\r\n\r\n  // Find the first level in the specified range\r\n  findLevel(level, options) {\r\n    options = util.extend({\r\n      box: 1,\r\n      edge: 'both',\r\n      direction: 'ascending',\r\n      rounding: 'before',\r\n      rangeP: [0, this.getLength()]\r\n    },\r\n      options\r\n    );\r\n\r\n    if (options.rangeX) {\r\n      options.rangeP = options.rangeX.map(this.getIndexFromX);\r\n    }\r\n\r\n    var value, below, i, j, l, increment;\r\n\r\n    var box = options.box;\r\n\r\n    if (box % 2 == 0) {\r\n      box++;\r\n    }\r\n\r\n    if (options.direction == 'descending') {\r\n      (i = options.rangeP[1]), (l = options.rangeP[0]), (increment = -1);\r\n    } else {\r\n      (i = options.rangeP[0]), (l = options.rangeP[1]), (increment = +1);\r\n    }\r\n\r\n    for (; ; i += increment) {\r\n      if (options.direction == 'descending') {\r\n        if (i < l) {\r\n          break;\r\n        }\r\n      } else {\r\n        if (i > l) {\r\n          break;\r\n        }\r\n      }\r\n\r\n      if (i < options.rangeP[0] + (box - 1) / 2) {\r\n        continue;\r\n      }\r\n\r\n      if (i > options.rangeP[1] - (box - 1) / 2) {\r\n        break;\r\n      }\r\n\r\n      value = this.getAverageP(i - (box - 1) / 2, i + (box - 1) / 2);\r\n\r\n      if (below === undefined) {\r\n        below = value < level;\r\n        continue;\r\n      }\r\n      // Crossing up\r\n      if (value >= level && below) {\r\n        below = false;\r\n\r\n        if (options.edge == 'ascending' || options.edge == 'both') {\r\n          // Found something\r\n\r\n          for (let j = i + (box - 1) / 2; j >= i - (box - 1) / 2; j--) {\r\n            if (this.data[j] >= level && this.data[j - 1] <= level) {\r\n              // Find a crossing\r\n\r\n              switch (options.rounding) {\r\n                case 'before':\r\n                  return j - 1;\r\n                  break;\r\n\r\n                case 'after':\r\n                  return j;\r\n                  break;\r\n\r\n                case 'interpolate':\r\n                  return getIndexInterpolate(\r\n                    level,\r\n                    this.data[j],\r\n                    this.data[j - 1],\r\n                    j,\r\n                    j - 1\r\n                  );\r\n                  break;\r\n              }\r\n            }\r\n          }\r\n        }\r\n      } else if (value <= level && !below) {\r\n        below = true;\r\n\r\n        if (options.edge == 'descending' || options.edge == 'both') {\r\n          for (j = i + (box - 1) / 2; j >= i - (box - 1) / 2; j--) {\r\n            if (this.data[j] <= level && this.data[j - 1] >= level) {\r\n              // Find a crossing\r\n\r\n              switch (options.rounding) {\r\n                case 'before':\r\n                  return j - 1;\r\n                  break;\r\n\r\n                case 'after':\r\n                  return j;\r\n                  break;\r\n\r\n                case 'interpolate':\r\n                  return getIndexInterpolate(\r\n                    level,\r\n                    this.data[j],\r\n                    this.data[j - 1],\r\n                    j,\r\n                    j - 1\r\n                  );\r\n                  break;\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  normalize(mode) {\r\n    let factor, total, minValue, maxValue, ratio, i;\r\n\r\n    if (mode == 'max1' || mode == 'max100') {\r\n      factor = 1;\r\n\r\n      if (mode == 'max100') {\r\n        factor = 100;\r\n      }\r\n\r\n      maxValue = this.data[0];\r\n\r\n      for (i = 1; i < this.getLength(); i++) {\r\n        if (this.data[i] > maxValue) {\r\n          maxValue = this.data[i];\r\n        }\r\n      }\r\n\r\n      for (i = 0; i < this.getLength(); i++) {\r\n        this.data[i] /= maxValue / factor;\r\n      }\r\n    } else if (mode == 'sum1') {\r\n      total = 0;\r\n\r\n      for (i = 0; i < this.getLength(); i++) {\r\n        total += this.data[i];\r\n      }\r\n\r\n      for (i = 0; i < this.getLength(); i++) {\r\n        this.data[i] /= total;\r\n      }\r\n    } else if (mode == 'max1min0') {\r\n      (maxValue = this.data[0]), (minValue = this.data[0]);\r\n\r\n      for (i = 1; i < this.getLength(); i++) {\r\n        if (this.data[i] > maxValue) {\r\n          maxValue = this.data[i];\r\n        } else if (this.data[i] < minValue) {\r\n          minValue = this.data[i];\r\n        }\r\n      }\r\n\r\n      ratio = 1 / (maxValue - minValue);\r\n\r\n      for (i = 0; i < this.getLength(); i++) {\r\n        this.data[i] = (this.data[i] - minValue) * ratio;\r\n      }\r\n    }\r\n\r\n    this.setData(this.data);\r\n  }\r\n\r\n  filterNaN() {\r\n    const l = this.data.length - 1;\r\n    for (var i = l; i >= 0; i--) {\r\n      if (isNaN(this.data[i])) {\r\n        this.data = this.data.splice(i, 1);\r\n\r\n        if (this.xdata) {\r\n          this.xdata.data.splice(i, 1);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  filterInfinity() {\r\n    const l = this.data.length - 1;\r\n    for (var i = l; i >= 0; i--) {\r\n      if (!isFinite(this.data[i])) {\r\n        this.data = this.data.splice(i, 1);\r\n\r\n        if (this.xdata) {\r\n          this.xdata.data.splice(i, 1);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  ////////////////////////////////////////////////////////////\r\n  ///// HANDLING ERRORS   ////////////////////////////////////\r\n  ////////////////////////////////////////////////////////////\r\n\r\n  setErrorBarX(waveform) {\r\n    if (!(waveform instanceof Waveform)) {\r\n      waveform = new this.constructor(waveform);\r\n    }\r\n\r\n    var xWave = this.getXWaveform();\r\n    xWave.setErrorBar(waveform);\r\n    return this;\r\n  }\r\n\r\n  setErrorBarXBelow(waveform) {\r\n    if (!(waveform instanceof Waveform)) {\r\n      waveform = new this.constructor(waveform);\r\n    }\r\n\r\n    var xWave = this.getXWaveform();\r\n    xWave.setErrorBarBelow(waveform);\r\n    return this;\r\n  }\r\n\r\n  setErrorBarXAbove(waveform) {\r\n    if (!(waveform instanceof Waveform)) {\r\n      waveform = new this.constructor(waveform);\r\n    }\r\n\r\n    var xWave = this.getXWaveform();\r\n    xWave.setErrorBarAbove(waveform);\r\n    return this;\r\n  }\r\n\r\n  setErrorBoxX(waveform) {\r\n    if (!(waveform instanceof Waveform)) {\r\n      waveform = new this.constructor(waveform);\r\n    }\r\n\r\n    var xWave = this.getXWaveform();\r\n    xWave.setErrorBoxAbove(waveform);\r\n    xWave.setErrorBoxBelow(waveform);\r\n    return this;\r\n  }\r\n\r\n  setErrorBoxXBelow(waveform) {\r\n    if (!(waveform instanceof Waveform)) {\r\n      waveform = new this.constructor(waveform);\r\n    }\r\n\r\n    var xWave = this.getXWaveform();\r\n\r\n    xWave.setErrorBoxBelow(waveform);\r\n    return this;\r\n  }\r\n\r\n  setErrorBoxXAbove(waveform) {\r\n    if (!(waveform instanceof Waveform)) {\r\n      waveform = new this.constructor(waveform);\r\n    }\r\n\r\n    var xWave = this.getXWaveform();\r\n    xWave.setErrorBoxAbove(waveform);\r\n    return this;\r\n  }\r\n\r\n  setErrorBar(waveform, checkMinMax = true) {\r\n    if (!(waveform instanceof Waveform)) {\r\n      waveform = new this.constructor(waveform);\r\n    }\r\n    this.errors.nb++;\r\n    this.errors.nb++;\r\n    this.errors.bars.below = waveform;\r\n    this.errors.bars.above = waveform;\r\n\r\n    if (checkMinMax) {\r\n      this._setData(this.data);\r\n    }\r\n  }\r\n\r\n  setErrorBarBelow(waveform, checkMinMax = true) {\r\n    if (!(waveform instanceof Waveform)) {\r\n      waveform = new this.constructor(waveform);\r\n    }\r\n    this.errors.nb++;\r\n    this.errors.bars.below = waveform;\r\n\r\n    if (checkMinMax) {\r\n      this._setData(this.data);\r\n    }\r\n  }\r\n\r\n  setErrorBarAbove(waveform, checkMinMax = true) {\r\n    if (!(waveform instanceof Waveform)) {\r\n      waveform = new this.constructor(waveform);\r\n    }\r\n\r\n    this.errors.nb++;\r\n    this.errors.bars.above = waveform;\r\n\r\n    if (checkMinMax) {\r\n      this._setData(this.data);\r\n    }\r\n  }\r\n\r\n  setErrorBox(waveform, checkMinMax = true) {\r\n    if (!(waveform instanceof Waveform)) {\r\n      waveform = new this.constructor(waveform);\r\n    }\r\n    this.errors.nb++;\r\n    this.errors.nb++;\r\n    this.errors.boxes.above = waveform;\r\n    this.errors.boxes.below = waveform;\r\n\r\n    if (checkMinMax) {\r\n      this._setData(this.data);\r\n    }\r\n  }\r\n\r\n  setErrorBoxBelow(waveform, checkMinMax = true) {\r\n    if (!(waveform instanceof Waveform)) {\r\n      waveform = new this.constructor(waveform);\r\n    }\r\n    this.errors.nb++;\r\n    this.errors.boxes.below = waveform;\r\n\r\n    if (checkMinMax) {\r\n      this._setData(this.data);\r\n    }\r\n  }\r\n\r\n  setErrorBoxAbove(waveform, checkMinMax = true) {\r\n    if (!(waveform instanceof Waveform)) {\r\n      waveform = new Waveform(waveform);\r\n    }\r\n\r\n    this.errors.boxes.above = waveform;\r\n    if (checkMinMax) {\r\n      this._setData(this.data);\r\n    }\r\n  }\r\n\r\n  getMaxError(i, side = Waveform.ABOVE) {\r\n    return Math.max(\r\n      this.getMaxErrorType(i, side, Waveform.BOX),\r\n      this.getMaxErrorType(i, side, Waveform.BAR)\r\n    );\r\n  }\r\n\r\n  getMaxErrorType(i, side = Waveform.ABOVE, type = Waveform.BOX) {\r\n    let stack;\r\n    if (type == Waveform.BOX) {\r\n      stack = this.errors.boxes;\r\n    } else if (type == Waveform.BAR) {\r\n      stack = this.errors.bars;\r\n    } else {\r\n      throw 'Unknown type of error';\r\n    }\r\n\r\n    let waveform;\r\n    if (!(waveform = stack[side])) {\r\n      if (side == Waveform.ABOVE) {\r\n        if (stack[side] == Waveform.BELOW) {\r\n          waveform = stack.below;\r\n        }\r\n      } else {\r\n        if (stack[side] == Waveform.ABOVE) {\r\n          waveform = stack.above;\r\n        }\r\n      }\r\n    }\r\n\r\n    if (!waveform) {\r\n      return 0;\r\n    }\r\n\r\n    return waveform.getY(i);\r\n  }\r\n\r\n  getErrorBarXBelow(index) {\r\n    return this.getErrorX(index, Waveform.BELOW, Waveform.BAR);\r\n  }\r\n  getErrorBarXAbove(index) {\r\n    return this.getErrorX(index, Waveform.ABOVE, Waveform.BAR);\r\n  }\r\n  getErrorBoxXBelow(index) {\r\n    return this.getErrorX(index, Waveform.BELOW, Waveform.BOX);\r\n  }\r\n  getErrorBoxXAbove(index) {\r\n    return this.getErrorX(index, Waveform.ABOVE, Waveform.BOX);\r\n  }\r\n\r\n  getErrorBarYBelow(index) {\r\n    return this.getError(index, Waveform.BELOW, Waveform.BAR);\r\n  }\r\n  getErrorBarYAbove(index) {\r\n    return this.getError(index, Waveform.ABOVE, Waveform.BAR);\r\n  }\r\n  getErrorBoxYBelow(index) {\r\n    return this.getError(index, Waveform.BELOW, Waveform.BOX);\r\n  }\r\n  getErrorBoxYAbove(index) {\r\n    return this.getError(index, Waveform.ABOVE, Waveform.BOX);\r\n  }\r\n\r\n  getErrorX(index, side = Waveform.ABOVE, type = Waveform.BAR) {\r\n    if (!this.hasXWaveform()) {\r\n      return false;\r\n    }\r\n\r\n    return this.xdata.getError(index, side, type);\r\n  }\r\n\r\n  getError(index, side = Waveform.ABOVE, type = Waveform.BAR) {\r\n    let errors = type == Waveform.BAR ? this.errors.bars : this.errors.boxes;\r\n\r\n    if (!errors) {\r\n      return false;\r\n    }\r\n\r\n    let wave;\r\n    if ((wave = side == Waveform.ABOVE ? errors.above : errors.below)) {\r\n      /*console.log( wave );\r\n            if ( wave == Waveform.ABOVE && side == Waveform.BELOW ) {\r\n              wave = errors.above;\r\n            } else if ( wave == Waveform.BELOW && side == Waveform.ABOVE ) {\r\n              wave = errors.below;\r\n            }\r\n      */\r\n      /*\r\n            if ( !wave ) {\r\n              return false;\r\n            }\r\n      */\r\n      return wave.getY(index);\r\n    }\r\n  }\r\n\r\n  hasErrorBars() {\r\n    return (\r\n      this.errors.nb > 0 || (this.hasXWaveform() && this.xdata.errors.nb > 0)\r\n    );\r\n  }\r\n}\r\n\r\nWaveform.BELOW = Symbol();\r\nWaveform.ABOVE = Symbol();\r\n\r\nWaveform.BOX = Symbol();\r\nWaveform.BAR = Symbol();\r\n\r\nconst MULTIPLY = Symbol();\r\nconst ADD = Symbol();\r\nconst SUBTRACT = Symbol();\r\nconst DIVIDE = Symbol();\r\n\r\n// http://stackoverflow.com/questions/26965171/fast-nearest-power-of-2-in-javascript\r\nfunction pow2ceil(v) {\r\n  v--;\r\n  var p = 2;\r\n  while ((v >>= 1)) {\r\n    p <<= 1;\r\n  }\r\n  return p;\r\n}\r\n\r\nfunction pow2floor(v) {\r\n  var p = 1;\r\n  while ((v >>= 1)) {\r\n    p <<= 1;\r\n  }\r\n  return p;\r\n}\r\n\r\nfunction getIndexInterpolate(\r\n  value,\r\n  valueBefore,\r\n  valueAfter,\r\n  indexBefore,\r\n  indexAfter\r\n) {\r\n  return (\r\n    ((value - valueBefore) / (valueAfter - valueBefore)) *\r\n    (indexAfter - indexBefore) +\r\n    indexBefore\r\n  );\r\n}\r\n\r\n/**\r\n * @private\r\n * Performs a euclidian search (as opposed to a binary search where the data must be monotoneously increasing and where the search is only in x). This is useful to find the closest point to a position (for example the one of the mouse) for any kind of data.\r\n * The scaleX and scaleY parameters could be used to skew the search. For example, let's say that you want to search the closest point in pixel, and not in value, you would need to reflect the different axes scaling into the scaleX and scaleY parameter\r\n *\r\n * @param {number} targetX The x position we want to get close to\r\n * @param {number} targetY The y position we want to get close to\r\n * @param {array<number>} haystackX The source data (array of x's)\r\n * @param {array<number>} haystackY The source data (array of y's) (paired by index to the x array)\r\n * @param {number} [ scaleX = 1 ] X-scaler (the higher, the more importance given to the x distance)\r\n * @param {number} [ scaleY = 1 ] Y-scaler (the higher, the more importance given to the y distance)\r\n * @returns The index of the closest point\r\n */\r\nfunction euclidianSearch(\r\n  targetX,\r\n  targetY,\r\n  haystackX,\r\n  haystackY,\r\n  scaleX = 1,\r\n  scaleY = 1\r\n) {\r\n  let distance = Number.MAX_VALUE,\r\n    distance_i;\r\n\r\n  let index = -1;\r\n\r\n  if (targetX !== undefined && targetY == undefined) {\r\n\r\n    for (var i = 0, l = haystackX.length; i < l; i++) {\r\n      distance_i = Math.abs((targetX - haystackX[i]) * scaleX);\r\n      if (distance_i < distance) {\r\n        index = i;\r\n        distance = distance_i;\r\n      }\r\n    }\r\n\r\n  } else if (targetX == undefined && targetY !== undefined) {\r\n\r\n    for (var i = 0, l = haystackY.length; i < l; i++) {\r\n      distance_i = Math.abs((targetY - haystackY[i]) * scaleY);\r\n      if (distance_i < distance) {\r\n        index = i;\r\n        distance = distance_i;\r\n      }\r\n    }\r\n\r\n  } else {\r\n\r\n    for (var i = 0, l = haystackX.length; i < l; i++) {\r\n      distance_i =\r\n        ((targetX - haystackX[i]) * scaleX) ** 2 +\r\n        ((targetY - haystackY[i]) * scaleY) ** 2;\r\n\r\n      if (distance_i < distance) {\r\n        index = i;\r\n        distance = distance_i;\r\n      }\r\n    }\r\n  }\r\n\r\n  return index;\r\n}\r\n\r\nfunction binarySearch(\r\n  target,\r\n  haystack,\r\n  reverse = haystack[haystack.length - 1] < haystack[0],\r\n  fineCheck = true\r\n) {\r\n  let seedA = 0,\r\n    length = haystack.length,\r\n    seedB = length - 1,\r\n    seedInt,\r\n    i = 0,\r\n    nanDirection = 1;\r\n\r\n  if (\r\n    (!reverse && (haystack[0] > target || haystack[seedB] < target)) ||\r\n    (reverse && (haystack[0] < target || haystack[seedB] > target))\r\n  ) {\r\n    throw new Error(`Target ${target} is not in the stack`);\r\n  }\r\n\r\n  if (haystack[seedA] == target) {\r\n    return seedA;\r\n  }\r\n\r\n  if (haystack[seedB] == target) {\r\n    return seedB;\r\n  }\r\n\r\n  while (true) {\r\n    i++;\r\n    if (i > 1000) {\r\n      throw new Error('Error loop');\r\n    }\r\n\r\n    seedInt = Math.floor((seedA + seedB) / 2);\r\n\r\n    //  seedInt -= seedInt % 2; // Always looks for an x.\r\n\r\n    while (isNaN(haystack[seedInt])) {\r\n      if (seedInt >= haystack.length - 1) {\r\n        return haystack.length - 1;\r\n      } else if (seedInt <= 0) {\r\n        return 0;\r\n      }\r\n\r\n      seedInt += nanDirection;\r\n    }\r\n\r\n    if (haystack[seedInt] == target) {\r\n      return seedInt;\r\n    }\r\n\r\n    if (seedInt == seedA || seedInt == seedB) {\r\n      if (!fineCheck) {\r\n        return seedInt;\r\n      }\r\n\r\n      if (\r\n        Math.abs(target - haystack[seedA]) < Math.abs(target - haystack[seedB])\r\n      ) {\r\n        return seedA;\r\n      }\r\n\r\n      return seedB;\r\n    }\r\n\r\n    //    console.log(seedA, seedB, seedInt, haystack[seedInt]);\r\n    if (haystack[seedInt] < target) {\r\n      if (reverse) {\r\n        seedB = seedInt;\r\n      } else {\r\n        seedA = seedInt;\r\n      }\r\n    } else if (haystack[seedInt] > target) {\r\n      if (reverse) {\r\n        seedA = seedInt;\r\n      } else {\r\n        seedB = seedInt;\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n\r\n    nanDirection *= -1;\r\n  }\r\n}\r\n\r\n// Stores key: value\r\nclass WaveformHash extends Waveform {\r\n  hasXWaveform() {\r\n    return false;\r\n  }\r\n\r\n  setXWaveform(data) {\r\n    this.xdata = data;\r\n  }\r\n\r\n  getYFromX(xValue) {\r\n    const index = this.xdata.indexOf(xValue);\r\n    if (index == -1) {\r\n      throw `Cannot find key ${xValue}`;\r\n    }\r\n\r\n    return this.data[index];\r\n  }\r\n\r\n  getY(index) {\r\n    return this.data[index];\r\n  }\r\n\r\n  getX(index) {\r\n    return this.xdata[index];\r\n  }\r\n\r\n  hasXUnit() {\r\n    return false;\r\n  }\r\n\r\n  errorNotImplemented() {\r\n    console.trace();\r\n    throw 'Not available in hash waveform';\r\n  }\r\n\r\n  subrangeX() {\r\n    this.errorNotImplemented();\r\n  }\r\n\r\n  duplicate() {\r\n    this.errorNotImplemented();\r\n  }\r\n\r\n  aggregate() {\r\n    this.errorNotImplemented();\r\n  }\r\n\r\n  _waveArithmetic() {\r\n    this.errorNotImplemented();\r\n  }\r\n\r\n  interpolateIndex_X(index) {\r\n    this.errorNotImplemented();\r\n  }\r\n\r\n  getXMonotoneousAscending() {\r\n    this.errorNotImplemented();\r\n  }\r\n\r\n  isXMonotoneousAscending() {\r\n    this.errorNotImplemented();\r\n  }\r\n\r\n  interpolate() {\r\n    this.errorNotImplemented();\r\n  }\r\n\r\n  resampleForDisplay() {\r\n    this.errorNotImplemented();\r\n  }\r\n\r\n  isXMonotoneous() {\r\n    this.errorNotImplemented();\r\n  }\r\n\r\n  rescaleX() {\r\n    this.errorNotImplemented();\r\n  }\r\n\r\n  getXMin() {\r\n    return undefined;\r\n  }\r\n\r\n  getXMax() {\r\n    return undefined;\r\n  }\r\n\r\n  computeXMinMax() { }\r\n\r\n  setData(data) {\r\n    this.data = Object.values(data);\r\n    this.xdata = Object.keys(data);\r\n\r\n    this._setData();\r\n  }\r\n\r\n  _setData() {\r\n    this.minY = Math.min(...this.data);\r\n    this.maxY = Math.max(...this.data);\r\n\r\n    this.checkMinMaxErrorBars();\r\n  }\r\n}\r\n\r\nfunction dist2(v, w) {\r\n  return (v.x - w.x) ** 2 + (v.y - w.y) ** 2;\r\n}\r\n\r\nfunction distToSegmentSquared(p, v, w) {\r\n  var l2 = dist2(v, w);\r\n  if (l2 == 0) return dist2(p, v);\r\n  var t = ((p.x - v.x) * (w.x - v.x) + (p.y - v.y) * (w.y - v.y)) / l2;\r\n  t = Math.max(0, Math.min(1, t));\r\n  return dist2(p, {\r\n    x: v.x + t * (w.x - v.x),\r\n    y: v.y + t * (w.y - v.y)\r\n  });\r\n}\r\n\r\nfunction distToSegment(p, v, w) {\r\n  return distToSegmentSquared(p, v, w) ** 0.5;\r\n}\r\n\r\nexport {\r\n  Waveform,\r\n  WaveformHash\r\n};","import GraphPosition from './graph.position.js';\r\nimport * as util from './graph.util.js';\r\nimport GraphJSON from './renderer/mixin.js';\r\nimport EventMixin from './mixins/graph.mixin.event.js';\r\nimport {\r\n  Waveform,\r\n  WaveformHash\r\n} from './util/waveform.js';\r\n\r\n/**\r\n * Default graph parameters\r\n * @name Graph~GraphOptionsDefault\r\n * @name GraphOptions\r\n * @object\r\n * @static\r\n * @memberof Graph\r\n * @prop {String} title - Title of the graph\r\n * @prop {Number} paddingTop - The top padding\r\n * @prop {Number} paddingLeft - The left padding\r\n * @prop {Number} paddingRight - The right padding\r\n * @prop {Number} paddingBottom - The bottom padding\r\n * @prop {(Number|Boolean)} padding - A common padding value for top, bottom, left and right\r\n * @prop {Number} fontSize - The basic text size of the graphs\r\n * @prop {Number} fontFamily - The basic font family. Should be installed on the computer of the user\r\n * @prop {Object.<String,Object>} plugins - A list of plugins to import with their options\r\n * @prop {Object.<String,Object>} pluginAction - The default key combination to access those actions\r\n * @prop {Object.<String,Object>} mouseActions - Alias of pluginActions\r\n * @prop {Object.<String,Object>} keyActions - Defines what happens when keys are pressed\r\n * @prop {Object} wheel - Define the mouse wheel action\r\n * @prop {Object} dblclick - Define the double click action\r\n * @prop {Boolean} shapesUniqueSelection - true to allow only one shape to be selected at the time\r\n * @prop {Boolean} shapesUnselectOnClick - true to unselect all shapes on click\r\n */\r\nconst GraphOptionsDefault = {\r\n  title: '',\r\n\r\n  paddingTop: 30,\r\n  paddingBottom: 5,\r\n  paddingLeft: 20,\r\n  paddingRight: 20,\r\n\r\n  close: {\r\n    left: true,\r\n    right: true,\r\n    top: true,\r\n    bottom: true\r\n  },\r\n\r\n  closeColor: 'black',\r\n\r\n  fontSize: 12,\r\n  fontFamily: 'Myriad Pro, Helvetica, Arial',\r\n\r\n  plugins: {},\r\n  pluginAction: {},\r\n  mouseActions: [],\r\n  keyActions: [],\r\n  wheel: {},\r\n  dblclick: {},\r\n\r\n  shapesUnselectOnClick: true,\r\n  shapesUniqueSelection: true\r\n};\r\n\r\nvar _constructors = new Map();\r\n\r\n/**\r\n * Entry class of jsGraph that creates a new graph.\r\n * @tutorial basic\r\n */\r\nclass Graph {\r\n  /**\r\n   * Graph constructor\r\n   * @param {(HTMLElement|String)} [wrapper ] - The DOM Wrapper element its ```id``` property. If you do not use the wrapper during the graph creation, use it with the @link{Graph.setWrapper} method\r\n   * @param {GraphOptions} [ options ] - The options of the graph\r\n   * @param {Object} [ axis ] - The list of axes\r\n   * @param {Array} axis.left - The list of left axes\r\n   * @param {Array} axis.bottom - The list of bottom axes\r\n   * @param {Array} axis.top - The list of top axes\r\n   * @param {Array} axis.right - The list of right axes\r\n   * @example var graph = new Graph(\"someDomID\");\r\n   * @example var graph = new Graph(\"someOtherDomID\", { title: 'Graph title', paddingRight: 100 } );\r\n   */\r\n  constructor(wrapper, options, axes = undefined) {\r\n\r\n    if (wrapper === Object(wrapper) && !(wrapper instanceof HTMLElement)) {\r\n      // Wrapper is options\r\n      options = wrapper;\r\n      wrapper = undefined;\r\n    }\r\n\r\n    if (!options) {\r\n      options = {};\r\n    }\r\n\r\n    if (!options.axes) {\r\n      options.axes = axes;\r\n    }\r\n\r\n    /*\r\n      The unique ID of the graph\r\n      @name Graph#uniqueid\r\n      @type String\r\n    */\r\n    this._creation = util.guid();\r\n    this._drawn = false;\r\n\r\n    /**\r\n     * @object\r\n     * @memberof Graph\r\n     * @name Graph#options\r\n     * @type GraphOptions\r\n     * @default {@link GraphOptionsDefault}\r\n     * Access directly the options of the graph using this public object.\r\n     * @example graph.options.mouseActions.push( {  } );\r\n     */\r\n    this.options = util.extend({}, GraphOptionsDefault, options);\r\n    // Options declaration must be placed before the doDom operation\r\n\r\n    // doDom is a private method. We bind it to this thanks to ES6 features\r\n    __createDOM.bind(this)();\r\n\r\n    if (wrapper) {\r\n      this.setWrapper(wrapper);\r\n    }\r\n\r\n    this.prevented = false;\r\n\r\n    this.axis = {\r\n      left: [],\r\n      top: [],\r\n      bottom: [],\r\n      right: []\r\n    };\r\n\r\n    this.shapes = [];\r\n    this.shapesLocked = false;\r\n    this.plugins = {};\r\n\r\n    for (var i in this.options.pluginAction) {\r\n      this.options.pluginAction.plugin = i;\r\n      this.options.mouseActions.push(this.options.pluginAction);\r\n    }\r\n\r\n    this.selectedShapes = [];\r\n\r\n    this.series = [];\r\n    //this._dom = wrapper;\r\n    this._axesHaveChanged = true;\r\n\r\n    if (\r\n      this.options.hasOwnProperty('padding') &&\r\n      util.isNumeric(this.options.padding)\r\n    ) {\r\n      this.options.paddingTop = this.options.paddingBottom = this.options.paddingLeft = this.options.paddingRight = this.options.padding;\r\n    }\r\n\r\n    this.currentAction = false;\r\n\r\n    this.ns = Graph.ns;\r\n    this.nsxlink = Graph.nsxlink;\r\n\r\n    // Load all axes\r\n    if (options.axes) {\r\n      for (var i in options.axes) {\r\n        for (var j = 0, l = options.axes[i].length; j < l; j++) {\r\n          switch (i) {\r\n            case 'top':\r\n              this.getTopAxis(j, options.axes[i][j]);\r\n              break;\r\n            case 'left':\r\n              this.getLeftAxis(j, options.axes[i][j]);\r\n              break;\r\n            case 'right':\r\n              this.getRightAxis(j, options.axes[i][j]);\r\n              break;\r\n            case 'bottom':\r\n              this.getBottomAxis(j, options.axes[i][j]);\r\n              break;\r\n\r\n            default:\r\n              // Do not do anything\r\n              break;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    this._pluginsInit();\r\n  }\r\n\r\n  setWrapper(wrapper) {\r\n\r\n    if (typeof wrapper == 'string') {\r\n      wrapper = document.getElementById(wrapper);\r\n    } else if (typeof wrapper.length == 'number') {\r\n      wrapper = wrapper[0];\r\n    }\r\n\r\n    if (!wrapper) {\r\n      throw new Error('The wrapper DOM element was not found.');\r\n    }\r\n\r\n    if (!wrapper.appendChild) {\r\n      throw new Error('The wrapper appears to be an invalid HTMLElement');\r\n    }\r\n\r\n    wrapper.style['-webkit-user-select'] = 'none';\r\n    wrapper.style['-moz-user-select'] = 'none';\r\n    wrapper.style['-o-user-select'] = 'none';\r\n    wrapper.style['-ms-user-select'] = 'none';\r\n    wrapper.style['user-select'] = 'none';\r\n\r\n    wrapper.style.position = 'relative';\r\n    wrapper.style.outline = 'none';\r\n\r\n    // Why would that be necessary ?\r\n    // wrapper.setAttribute( 'tabindex', 1 );\r\n\r\n    this.wrapper = wrapper;\r\n\r\n    // DOM\r\n\r\n    if (!this.height || !this.width) {\r\n      var wrapperStyle = getComputedStyle(wrapper);\r\n      var w = parseInt(wrapperStyle.width, 10);\r\n      var h = parseInt(wrapperStyle.height, 10);\r\n      this.setSize(w, h);\r\n      this._resize();\r\n    }\r\n\r\n    wrapper.appendChild(this.dom);\r\n\r\n    _registerEvents(this);\r\n  }\r\n  /**\r\n   * Returns the graph SVG wrapper element\r\n   * @public\r\n   * @return {SVGElement} The DOM element wrapping the graph\r\n   */\r\n  getDom() {\r\n    return this.dom;\r\n  }\r\n\r\n  /**\r\n   * Returns the unique id representing the graph\r\n   * @public\r\n   * @return {String} The unique ID of the graph\r\n   */\r\n  getId() {\r\n    return this._creation;\r\n  }\r\n\r\n  /**\r\n   * Returns the graph wrapper element passed during the graph creation\r\n   * @public\r\n   * @return {HTMLElement} The DOM element wrapping the graph\r\n   */\r\n  getWrapper() {\r\n    return this.wrapper;\r\n  }\r\n\r\n  /**\r\n   * Sets an option of the graph\r\n   * @param {String} name - Option name\r\n   * @param value - New option value\r\n   * @returns {Graph} - Graph instance\r\n   */\r\n  setOption(name, val) {\r\n    this.options[name] = val;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   *  Sets the title of the graph\r\n   */\r\n  setTitle(title) {\r\n    this.options.title = title;\r\n    this.domTitle.textContent = title;\r\n  }\r\n\r\n  setTitleFontSize(fontSize) {\r\n    this.domTitle.setAttribute('font-size', fontSize);\r\n  }\r\n\r\n  setTitleFontColor(fontColor) {\r\n    this.domTitle.setAttribute('fill', fontColor);\r\n  }\r\n\r\n  setTitleFontFamily(fontColor) {\r\n    this.domTitle.setAttribute('font-family', fontColor);\r\n  }\r\n\r\n  /**\r\n   *  Shows the title of the graph\r\n   */\r\n  displayTitle() {\r\n    this.domTitle.setAttribute('display', 'inline');\r\n  }\r\n\r\n  /**\r\n   *  Hides the title of the graph\r\n   */\r\n  hideTitle() {\r\n    this.domTitle.setAttribute('display', 'none');\r\n  }\r\n\r\n  hide() {\r\n    if (this.dom.style.display !== 'none') {\r\n      this.dom.style.display = 'none';\r\n    }\r\n  }\r\n\r\n  show() {\r\n    if (this.dom.style.display == 'none') {\r\n      this.dom.style.display = 'initial';\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Calls a repaint of the container. Used internally when zooming on the graph, or when <code>.autoscaleAxes()</code> is called (see {@link Graph#autoscaleAxes}).<br />\r\n   * To be called after axes min/max are expected to have changed (e.g. after an <code>axis.zoom( from, to )</code>) has been called\r\n   * @param {Boolean} onlyIfAxesHaveChanged - Triggers a redraw only if min/max values of the axes have changed.\r\n   * @return {Boolean} if the redraw has been successful\r\n   */\r\n  redraw(onlyIfAxesHaveChanged, force) {\r\n    if (!this.width || !this.height) {\r\n      return;\r\n    }\r\n\r\n\r\n    if (!this.sizeSet) {\r\n      this._resize();\r\n      this.executeRedrawSlaves();\r\n      return true;\r\n    } else {\r\n      if (\r\n        !onlyIfAxesHaveChanged ||\r\n        force ||\r\n        haveAxesChanged(this) ||\r\n        hasSizeChanged(this)\r\n      ) {\r\n        this.executeRedrawSlaves();\r\n        refreshDrawingZone(this);\r\n        return true;\r\n      }\r\n    }\r\n\r\n    this.executeRedrawSlaves(true);\r\n    return false;\r\n  }\r\n\r\n  executeRedrawSlaves() {\r\n    this._pluginsExecute('preDraw');\r\n  }\r\n\r\n  /**\r\n   * Draw the graph and the series. This method will only redraw what is necessary. You may trust its use when you have set new data to series, changed serie styles or called for a zoom on an axis.\r\n   */\r\n  draw(force) {\r\n    this.drawn = true;\r\n    this.updateLegend(true);\r\n    this.drawSeries(this.redraw(true, force));\r\n\r\n    this._pluginsExecute('postDraw');\r\n  }\r\n\r\n  /**\r\n   *  Prevents the graph, the series and the legend from redrawing automatically. Valid until {@link Graph#resumeUpdate} is called\r\n   *  @memberof Graph\r\n   *  @return {Graph} The current graph instance\r\n   *  @see {@link Graph#resumeUpdate}\r\n   *  @see {@link Graph#doUpdate}\r\n   *  @since 1.16.19\r\n   */\r\n  delayUpdate() {\r\n    this._lockUpdate = true;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   *  Forces legend and graph update, even is {@link Graph#delayUpdate} has been called before.\r\n   *  @memberof Graph\r\n   *  @return {Graph} The current graph instance\r\n   *  @see {@link Graph#delayUpdate}\r\n   *  @see {@link Graph#resumeUpdate}\r\n   *  @since 1.16.19\r\n   */\r\n  doUpdate() {\r\n    if (this.legend) {\r\n      this.legend.update();\r\n    }\r\n    this.draw();\r\n    if (this.legend) {\r\n      this.legend.update();\r\n    }\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   *  Cancels the effect of {@link Graph#delayUpdate}, but does not redraw the graph automatically\r\n   *  @memberof Graph\r\n   *  @return {Graph} The current graph instance\r\n   *  @see {@link Graph#delayUpdate}\r\n   *  @see {@link Graph#doUpdate}\r\n   *  @since 1.16.19\r\n   */\r\n  resumeUpdate() {\r\n    this._lockUpdate = false;\r\n    return this;\r\n  }\r\n\r\n  isDelayedUpdate() {\r\n    return this._lockUpdate;\r\n  }\r\n\r\n  /**\r\n   * Sets the total width of the graph\r\n   * @param {Number} width - The new width of the graph\r\n   * @param {Boolean} skipResize - <code>true</code> to defer graph repaint. Use {@link Graph#resize} to force repain later on. (Useful if many graph sizing operations are done successively)\r\n   * @see Graph#setHeight\r\n   * @see Graph#resize\r\n   */\r\n  setWidth(width, skipResize) {\r\n    this.width = width;\r\n    if (!skipResize) {\r\n      this._resize();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Sets the total height of the graph\r\n   * @param {Number} height - The new height of the graph\r\n   * @param {Boolean} skipResize - <code>true</code> to defer graph repaint. Use {@link Graph#resize} to force repain later on. (Useful if many graph sizing operations are done successively)\r\n   * @see Graph#setWidth\r\n   * @see Graph#resize\r\n   */\r\n  setHeight(height, skipResize) {\r\n    this.height = height;\r\n    if (!skipResize) {\r\n      this._resize();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Sets the new dimension of the graph and repaints it. If width and height are omitted, a simple refresh is done.\r\n   * @param {Number} [ width ] - The new width of the graph\r\n   * @param {Number} [ height ] - The new height of the graph\r\n   * @see Graph#setWidth\r\n   * @see Graph#setHeight\r\n   * @return {Graph} The current graph\r\n   */\r\n  resize(w, h) {\r\n    if (w && h) {\r\n      this.setSize(w, h);\r\n    }\r\n\r\n    this._resize();\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Sets the new dimension of the graph without repainting it. Use {@link Graph#resize} to perform the actual resizing of the graph.\r\n   * @param {Number} [ width ] - The new width of the graph\r\n   * @param {Number} [ height ] - The new height of the graph\r\n   * @see Graph#setWidth\r\n   * @see Graph#setHeight\r\n   * @see Graph#resize\r\n   */\r\n  setSize(w, h) {\r\n    this.setWidth(w, true);\r\n    this.setHeight(h, true);\r\n    this.getDrawingHeight();\r\n    this.getDrawingWidth();\r\n  }\r\n\r\n  /**\r\n   * Returns the width of the graph (set by setSize, setWidth or resize methods)\r\n   * @return {Number} Width of the graph\r\n   */\r\n  getWidth() {\r\n    return this.width;\r\n  }\r\n\r\n  /**\r\n   * Returns the height of the graph (set by setSize, setHeight or resize methods)\r\n   * @return {Number} Height of the graph\r\n   */\r\n  getHeight() {\r\n    return this.height;\r\n  }\r\n\r\n  /**\r\n   * Returns the top padding of the graph (space between the top of the svg container and the topmost axis)\r\n   * @return {Number} paddingTop\r\n   */\r\n  getPaddingTop() {\r\n    return this.options.paddingTop;\r\n  }\r\n\r\n  /**\r\n   * Returns the left padding of the graph (space between the left of the svg container and the leftmost axis)\r\n   * @return {Number} paddingTop\r\n   */\r\n  getPaddingLeft() {\r\n    return this.options.paddingLeft;\r\n  }\r\n\r\n  /**\r\n   * Returns the bottom padding of the graph (space between the bottom of the svg container and the bottommost axis)\r\n   * @return {Number} paddingTop\r\n   */\r\n  getPaddingBottom() {\r\n    return this.options.paddingBottom;\r\n  }\r\n\r\n  /**\r\n   * Returns the right padding of the graph (space between the right of the svg container and the rightmost axis)\r\n   * @return {Number} paddingRight\r\n   */\r\n  getPaddingRight() {\r\n    return this.options.paddingRight;\r\n  }\r\n\r\n  /**\r\n   * Returns the height of the drawable zone, including the space used by the axes\r\n   * @param {Boolean} useCache - Use cached value. Useful if one is sure the graph hasn't changed dimension. Automatically called after a Graph.resize();\r\n   * @returns {Number} Height of the graph\r\n   */\r\n  getDrawingHeight(useCache) {\r\n    if (useCache && this.innerHeight) {\r\n      return this.innerHeight;\r\n    }\r\n    return (this.innerHeight =\r\n      this.height - this.options.paddingTop - this.options.paddingBottom);\r\n  }\r\n\r\n  /**\r\n   * Returns the width of the drawable zone, including the space used by the axes\r\n   * @param {Boolean} useCache - Use cached value. Useful if one is sure the graph hasn't changed dimension. Automatically called after a Graph.resize();\r\n   * @returns {Number} Width of the graph\r\n   */\r\n  getDrawingWidth(useCache) {\r\n    if (useCache && this.innerWidth) {\r\n      return this.innerWidth;\r\n    }\r\n    return (this.innerWidth =\r\n      this.width - this.options.paddingLeft - this.options.paddingRight);\r\n  }\r\n\r\n  /**\r\n   * Caches the wrapper offset in the page.<br />\r\n   * The position of the wrapper is used when processing most of mouse events and it is fetched via the jQuery function .offset().\r\n   * If performance becomes a critical issue in your application, <code>cacheOffset()</code> should be used to store the offset position. It should be ensured that the graph doesn't move in the page. If one can know when the graph has moved, <code>cacheOffset()</code> should be called again to update the offset position.\r\n   * @see Graph#uncacheOffset\r\n   */\r\n  cacheOffset() {\r\n    this.offsetCached = util.getOffset(this.wrapper);\r\n  }\r\n\r\n  /**\r\n   * Un-caches the wrapper offset value\r\n   * @see Graph#cacheOffset\r\n   */\r\n  uncacheOffset() {\r\n    this.offsetCached = false;\r\n  }\r\n\r\n  getNumAxes(position) {\r\n    return this.axis[position].length;\r\n  }\r\n\r\n  /**\r\n   * Returns the x axis at a certain index. If any top axis exists and no bottom axis exists, returns or creates a top axis. Otherwise, creates or returns a bottom axis\r\n   * Caution ! The <code>options</code> parameter will only be effective if an axis is created\r\n   * @param {Number} [ index=0 ] - The index of the axis\r\n   * @param {Object} [ options={} ] - The options to pass to the axis constructor\r\n   */\r\n  getXAxis(index, options) {\r\n    if (this.axis.top.length > 0 && this.axis.bottom.length == 0) {\r\n      return this.getTopAxis(index, options);\r\n    }\r\n\r\n    return this.getBottomAxis(index, options);\r\n  }\r\n\r\n  /**\r\n   * Returns the y axis at a certain index. If any right axis exists and no left axis exists, returns or creates a right axis. Otherwise, creates or returns a left axis\r\n   * Caution ! The <code>options</code> parameter will only be effective if an axis is created\r\n   * @param {Number} [ index=0 ] - The index of the axis\r\n   * @param {Object} [ options={} ] - The options to pass to the axis constructor\r\n   */\r\n  getYAxis(index, options) {\r\n    if (this.axis.right.length > 0 && this.axis.left.length == 0) {\r\n      return this.getRightAxis(index, options);\r\n    }\r\n\r\n    return this.getLeftAxis(index, options);\r\n  }\r\n\r\n  /**\r\n   * Returns the top axis at a certain index. Creates it if non-existant\r\n   * @param {Number} [ index=0 ] - The index of the axis\r\n   * @param {Object} [ options={} ] - The options to pass to the axis constructor\r\n   */\r\n  getTopAxis(index, options) {\r\n    return _getAxis(this, index, options, 'top');\r\n  }\r\n\r\n  /**\r\n   * Returns the bottom axis at a certain index. Creates it if non-existant\r\n   * @param {Number} [ index=0 ] - The index of the axis\r\n   * @param {Object} [ options={} ] - The options to pass to the axis constructor\r\n   */\r\n  getBottomAxis(index, options) {\r\n    return _getAxis(this, index, options, 'bottom');\r\n  }\r\n\r\n  /**\r\n   * Returns the left axis at a certain index. Creates it if non-existant\r\n   * @param {Number} [ index=0 ] - The index of the axis\r\n   * @param {Object} [ options={} ] - The options to pass to the axis constructor\r\n   */\r\n  getLeftAxis(index, options) {\r\n    return _getAxis(this, index, options, 'left');\r\n  }\r\n\r\n  /**\r\n   * Returns the right axis at a certain index. Creates it if non-existant\r\n   * @param {Number} [ index=0 ] - The index of the axis\r\n   * @param {Object} [ options={} ] - The options to pass to the axis constructor\r\n   */\r\n  getRightAxis(index, options) {\r\n    return _getAxis(this, index, options, 'right');\r\n  }\r\n\r\n  /**\r\n   * Sets a bottom axis\r\n   * @param {Axis} axis - The axis instance to set\r\n   * @param {Number} [ index=0 ] - The index of the axis\r\n   */\r\n  setXAxis(axis, index) {\r\n    this.setBottomAxis(axis, index);\r\n  }\r\n\r\n  /**\r\n   * Sets a left axis\r\n   * @param {Axis} axis - The axis instance to set\r\n   * @param {Number} [ index=0 ] - The index of the axis\r\n   */\r\n  setYAxis(axis, index) {\r\n    this.setLeftAxis(axis, index);\r\n  }\r\n\r\n  /**\r\n   * Sets a left axis\r\n   * @param {Axis} axis - The axis instance to set\r\n   * @param {Number} [ index=0 ] - The index of the axis\r\n   * @see Graph#setBottomAxis\r\n   * @see Graph#setTopAxis\r\n   * @see Graph#setRightAxis\r\n   * @see Graph#getLeftAxis\r\n   * @see Graph#getYAxis\r\n   */\r\n  setLeftAxis(axis, index) {\r\n    index = index || 0;\r\n\r\n    if (this.axis.left[index]) {\r\n      this.axis.left[index].kill();\r\n    }\r\n    this.axis.left[index] = axis;\r\n  }\r\n\r\n  /**\r\n   * Sets a right axis\r\n   * @param {Axis} axis - The axis instance to set\r\n   * @param {Number} [ index=0 ] - The index of the axis\r\n   * @see Graph#setBottomAxis\r\n   * @see Graph#setLeftAxis\r\n   * @see Graph#setTopAxis\r\n   * @see Graph#getRightAxis\r\n   * @see Graph#getYAxis\r\n   */\r\n  setRightAxis(axis, index) {\r\n    index = index || 0;\r\n\r\n    if (this.axis.right[index]) {\r\n      this.axis.right[index].kill();\r\n    }\r\n    this.axis.right[index] = axis;\r\n  }\r\n\r\n  /**\r\n   * Sets a top axis\r\n   * @param {Axis} axis - The axis instance to set\r\n   * @param {Number} [ index=0 ] - The index of the axis\r\n   * @see Graph#setBottomAxis\r\n   * @see Graph#setLeftAxis\r\n   * @see Graph#setRightAxis\r\n   * @see Graph#getBottomAxis\r\n   * @see Graph#getXAxis\r\n   */\r\n  setTopAxis(axis, index) {\r\n    index = index || 0;\r\n\r\n    if (this.axis.top[index]) {\r\n      this.axis.top[index].kill();\r\n    }\r\n    this.axis.top[index] = axis;\r\n  }\r\n\r\n  /**\r\n   * Sets a bottom axis\r\n   * @param {Axis} axis - The axis instance to set\r\n   * @param {Number} [ index=0 ] - The index of the axis\r\n   * @see Graph#setTopAxis\r\n   * @see Graph#setLeftAxis\r\n   * @see Graph#setRightAxis\r\n   * @see Graph#getTopAxis\r\n   * @see Graph#getXAxis\r\n   */\r\n  setBottomAxis(axis, index) {\r\n    index = index || 0;\r\n\r\n    if (this.axis.bottom[index]) {\r\n      this.axis.bottom[index].kill();\r\n    }\r\n    this.axis.bottom[index] = axis;\r\n  }\r\n\r\n  killAxis(axis, noRedraw = false, noSerieKill = false) {\r\n    var index;\r\n\r\n    if (axis.isX()) {\r\n      if ((index = this.axis.bottom.indexOf(axis)) > -1) {\r\n        this.axis.bottom.splice(index, 1);\r\n      }\r\n\r\n      if ((index = this.axis.top.indexOf(axis)) > -1) {\r\n        this.axis.top.splice(index, 1);\r\n      }\r\n\r\n      if (!noSerieKill) {\r\n        this.series.forEach((serie) => {\r\n          if (serie.getXAxis() == axis) {\r\n            serie.kill();\r\n          }\r\n        });\r\n      }\r\n    }\r\n\r\n    if (axis.isY()) {\r\n      if ((index = this.axis.left.indexOf(axis)) > -1) {\r\n        this.axis.left.splice(index, 1);\r\n      }\r\n\r\n      if ((index = this.axis.right.indexOf(axis)) > -1) {\r\n        this.axis.right.splice(index, 1);\r\n      }\r\n\r\n      if (!noSerieKill) {\r\n        this.series.forEach((serie) => {\r\n          if (serie.getYAxis() == axis) {\r\n            serie.kill();\r\n          }\r\n        });\r\n      }\r\n    }\r\n\r\n    this.axisGroup.removeChild(axis.group); // Removes all DOM\r\n    this.groupPrimaryGrids.removeChild(axis.gridPrimary);\r\n    this.groupSecondaryGrids.removeChild(axis.gridSecondary);\r\n\r\n    if (!noRedraw) {\r\n      this.draw(true);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Determines if an x axis belongs to the graph\r\n   * @param {Axis} axis - The axis instance to check\r\n   */\r\n  hasXAxis(axis) {\r\n    return this.hasTopAxis(axis) || this.hasBottomAxis(axis);\r\n  }\r\n\r\n  /**\r\n   * Determines if an x axis belongs to the graph\r\n   * @param {Axis} axis - The axis instance to check\r\n   */\r\n  hasYAxis(axis) {\r\n    return this.hasLeftAxis(axis) || this.hasRightAxis(axis);\r\n  }\r\n\r\n  /**\r\n   * Determines if an x axis belongs to top axes list of the graph\r\n   * @param {Axis} axis - The axis instance to check\r\n   */\r\n  hasTopAxis(axis) {\r\n    return this.hasAxis(axis, this.axis.top);\r\n  }\r\n\r\n  /**\r\n   * Determines if an x axis belongs to bottom axes list of the graph\r\n   * @param {Axis} axis - The axis instance to check\r\n   */\r\n  hasBottomAxis(axis) {\r\n    return this.hasAxis(axis, this.axis.bottom);\r\n  }\r\n\r\n  /**\r\n   * Determines if a y axis belongs to left axes list of the graph\r\n   * @param {Axis} axis - The axis instance to check\r\n   */\r\n  hasLeftAxis(axis) {\r\n    return this.hasAxis(axis, this.axis.left);\r\n  }\r\n\r\n  /**\r\n   * Determines if a y axis belongs to right axes list of the graph\r\n   * @param {Axis} axis - The axis instance to check\r\n   */\r\n  hasRightAxis(axis) {\r\n    return this.hasAxis(axis, this.axis.right);\r\n  }\r\n\r\n  /**\r\n   * Determines if an axis belongs to a list of axes\r\n   * @param {Axis} axis - The axis instance to check\r\n   * @param {Array} axisList - The list of axes to check\r\n   * @private\r\n   */\r\n  hasAxis(axis, axisList) {\r\n    for (var i = 0, l = axisList.length; i < l; i++) {\r\n      if (axisList[i] == axis) {\r\n        return true;\r\n      }\r\n\r\n      if (axisList[i].hasAxis(axis)) {\r\n        return true;\r\n      }\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Autoscales the x and y axes of the graph.\r\n   * Does not repaint the canvas\r\n   * @return {Graph} The current graph instance\r\n   */\r\n  autoscaleAxes() {\r\n    this._applyToAxes('setMinMaxToFitSeries', null, true, true);\r\n\r\n    //this._applyToAxes( \"scaleToFitAxis\", [ this.getYAxis() ], false, true )\r\n    // X is not always ascending...\r\n    return this;\r\n  }\r\n\r\n  // See #138\r\n  /**\r\n   *  @alias Graph#autoscaleAxes\r\n   */\r\n  autoscale() {\r\n    return this.autoscaleAxes(...arguments);\r\n  }\r\n\r\n  // See #138\r\n  /**\r\n   *  @alias Graph#autoscaleAxes\r\n   */\r\n  autoScale() {\r\n    return this.autoscaleAxes(...arguments);\r\n  }\r\n\r\n  // See #138\r\n  /**\r\n   *  @alias Graph#autoscaleAxes\r\n   */\r\n  autoScaleAxes() {\r\n    return this.autoscaleAxes(...arguments);\r\n  }\r\n\r\n  // See #138\r\n  /**\r\n   *  Autoscales a particular axis\r\n   *  @param {Axis} The axis to rescale\r\n   *  @return {Graph} The current graph instance\r\n   */\r\n  autoScaleAxis(axis) {\r\n    if (!axis) {\r\n      return this;\r\n    }\r\n\r\n    axis.setMinMaxToFitSeries();\r\n    return this;\r\n  }\r\n\r\n  gridsOff() {\r\n    this._applyToAxes(\r\n      (axis) => {\r\n        axis.gridsOff();\r\n      },\r\n      undefined,\r\n      true,\r\n      true\r\n    );\r\n  }\r\n  gridsOn() {\r\n    this._applyToAxes(\r\n      (axis) => {\r\n        axis.gridsOn();\r\n      },\r\n      undefined,\r\n      true,\r\n      true\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Sets the background color\r\n   * @param {String} color - An SVG accepted color for the background\r\n   * @return {Graph} The current graph instance\r\n   */\r\n  setBackgroundColor(color) {\r\n    this.rectEvent.setAttribute('fill', color);\r\n    return this;\r\n  }\r\n\r\n  getAxisState() {\r\n    var state = {};\r\n    for (var i in this.axis) {\r\n      state[i] = this.axis[i].map(function (axis) {\r\n        return [axis.getCurrentMin(), axis.getCurrentMax()];\r\n      });\r\n    }\r\n    return state;\r\n  }\r\n\r\n  setAxisState(state) {\r\n    var j, l;\r\n    for (var i in state) {\r\n      if (!this.axis[i]) {\r\n        continue;\r\n      }\r\n\r\n      for (j = 0, l = state[i].length; j < l; j++) {\r\n        if (!this.axis[i][j]) {\r\n          continue;\r\n        }\r\n\r\n        this.axis[i][j].setCurrentMin(state[i][j][0]);\r\n        this.axis[i][j].setCurrentMax(state[i][j][1]);\r\n      }\r\n    }\r\n\r\n    this.draw();\r\n  }\r\n\r\n  saveAxisState(savedName) {\r\n    this.savedAxisState = this.savedAxisState || {};\r\n    this.savedAxisState[savedName] = this.getAxisState();\r\n    return this;\r\n  }\r\n\r\n  recallAxisState(savedName) {\r\n    if (this.savedAxisState[savedName]) {\r\n      this.recallAxisState(this.savedAxisState[savedName]);\r\n    }\r\n    return this;\r\n  }\r\n\r\n  _applyToAxis(type) {\r\n    switch (type) {\r\n      case 'string':\r\n        return function (type, func, params) {\r\n          //    params.splice(1, 0, type);\r\n\r\n          for (var i = 0; i < this.axis[type].length; i++) {\r\n            this.axis[type][i][func].apply(this.axis[type][i], params);\r\n          }\r\n        };\r\n\r\n      case 'function':\r\n        return function (type, func, params) {\r\n          for (var i = 0; i < this.axis[type].length; i++) {\r\n            func.call(this, this.axis[type][i], type, params);\r\n          }\r\n        };\r\n\r\n      default:\r\n        throw new Error(\r\n          'You must either execute a function or provide a string that registers a function'\r\n        );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Calculates the minimal or maximal value of the axis. Currently, alias of getBoudaryAxisFromSeries\r\n   */\r\n  getBoundaryAxis(axis, minmax, usingZValues) {\r\n    var valSeries = this.getBoundaryAxisFromSeries(axis, minmax, usingZValues);\r\n    //  var valShapes = this.getBoundaryAxisFromShapes( axis, xy, minmax );\r\n\r\n    return valSeries;\r\n    //return Math[ minmax ]( valSeries, valShapes );\r\n  }\r\n\r\n  /**\r\n   * Calculates the minimal or maximal value of the axis, based on the series that belong to it. The value is computed so that all series just fit in the value.\r\n   * @memberof Graph.prototype\r\n   * @param {Axis} axis - The axis for which the value should be computed\r\n   * @param {minmax} minmax - The minimum or maximum to look for. \"min\" for the minimum, anything else for the maximum\r\n   * @returns {Number} The minimimum or maximum of the axis based on its series\r\n   */\r\n  getBoundaryAxisFromSeries(axis, minmax, usingZValues) {\r\n    var min = minmax == 'min',\r\n      val,\r\n      func = axis.isX() ? ['getMinX', 'getMaxX'] : ['getMinY', 'getMaxY'],\r\n      func2use = func[min ? 0 : 1],\r\n      infinity2use = min ? +Infinity : -Infinity,\r\n      serie,\r\n      series,\r\n      serieValue,\r\n      i,\r\n      l;\r\n\r\n    val = infinity2use;\r\n    series = this.getSeriesFromAxis(axis);\r\n\r\n    for (i = 0, l = series.length; i < l; i++) {\r\n      serie = series[i];\r\n\r\n      if (!serie.isShown()) {\r\n        continue;\r\n      }\r\n\r\n      serieValue = serie[func2use](usingZValues);\r\n      val = Math[minmax](\r\n        isNaN(val) ? infinity2use : val,\r\n        isNaN(serieValue) ? infinity2use : serieValue\r\n      );\r\n    }\r\n\r\n    return val;\r\n  }\r\n\r\n  /**\r\n   *  Returns all the series associated to an axis\r\n   *  @param {Axis} axis - The axis to which the series belong\r\n   *  @returns {Serie[]} An array containing the list of series that belong to the axis\r\n   */\r\n  getSeriesFromAxis(axis) {\r\n    var series = [],\r\n      i = this.series.length - 1;\r\n\r\n    for (; i >= 0; i--) {\r\n      if (\r\n        this.series[i].getXAxis() == axis ||\r\n        this.series[i].getYAxis() == axis\r\n      ) {\r\n        series.push(this.series[i]);\r\n      }\r\n    }\r\n\r\n    return series;\r\n  }\r\n\r\n  /**\r\n   * Determines the maximum and minimum of each axes, based on {@link Graph#getBoundaryAxis}. It is usually called internally, but if the data of series has changed, called this function to make sure that minimum / maximum of the axes are properly updated.\r\n   * @see Graph#getBoundaryAxis\r\n   */\r\n  updateDataMinMaxAxes(usingZValues) {\r\n    var axisvars = ['bottom', 'top', 'left', 'right'],\r\n      axis,\r\n      j,\r\n      l,\r\n      i;\r\n\r\n    for (j = 0, l = axisvars.length; j < l; j++) {\r\n      for (i = this.axis[axisvars[j]].length - 1; i >= 0; i--) {\r\n        axis = this.axis[axisvars[j]][i];\r\n\r\n        // 25.10.2017. Wait a second, this cannot be real. Even hidden axes must have min max values.\r\n        // The data can be displayed while the axis is hidden\r\n        // I assume this was added to cover another bug, but another approach must be chosen\r\n        if (!axis.isShown()) {\r\n          //          continue;\r\n        }\r\n\r\n        let min = this.getBoundaryAxis(\r\n          this.axis[axisvars[j]][i],\r\n          'min',\r\n          usingZValues\r\n        );\r\n        let max = this.getBoundaryAxis(\r\n          this.axis[axisvars[j]][i],\r\n          'max',\r\n          usingZValues\r\n        );\r\n\r\n        if (isFinite(max)) {\r\n          axis.setMaxValueData(max);\r\n        }\r\n        if (isFinite(min)) {\r\n          axis.setMinValueData(min);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Function that is called from {@link Graph#_applyToAxes}\r\n   * @function\r\n   * @name AxisCallbackFunction\r\n   * @param {Axis} axis - The axis of the function\r\n   * @param {String} type - The type of the axis (left,right,top,bottom)\r\n   * @param params - The params passed in the _applyToAxis function.\r\n   * @see Graph#_applyToAxes\r\n   */\r\n\r\n  /**\r\n   * Applies a function to axes. The function will be executed once for every axis.\r\n   * If func is a string, the internal function belonging to <strong>the axis</strong> will be called, with the params array flattened out (in this case, params must be an array).\r\n   * If func is a function, the function will be called with the axis, its type and params as parameters. See {@link AxisCallbackFunction} for more details.\r\n   * @param {(AxisCallbackFunction|String)} func - The function or function name to execute\r\n   * @param params - Extra parameters to pass to the function\r\n   * @param {Boolean} topbottom=false - True to apply to function to top and bottom axes\r\n   * @param {Boolean} leftright=false - True to apply to function to left and right axes\r\n   */\r\n  _applyToAxes(func, params, tb = false, lr = false) {\r\n    var ax = [],\r\n      i = 0,\r\n      l;\r\n\r\n    if (tb || tb == undefined) {\r\n      ax.push('top');\r\n      ax.push('bottom');\r\n    }\r\n    if (lr || lr == undefined) {\r\n      ax.push('left');\r\n      ax.push('right');\r\n    }\r\n\r\n    for (l = ax.length; i < l; i++) {\r\n      this._applyToAxis(typeof func).call(this, ax[i], func, params);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Axes can be dependant of one another (for instance for unit conversions)\r\n   * Finds and returns all the axes that are linked to a specific axis. Mostly used internally.\r\n   * @param {Axis} axis - The axis that links one or multiple other dependant axes\r\n   * @returns {Axis[]} The list of axes linked to the axis passed as parameter\r\n   */\r\n  findAxesLinkedTo(axis) {\r\n    var axes = [];\r\n    this._applyToAxes(\r\n      function (a) {\r\n        if (a.linkedToAxis && a.linkedToAxis.axis == axis) {\r\n          axes.push(a);\r\n        }\r\n      }, {},\r\n      axis instanceof this.getConstructor('graph.axis.x'),\r\n      axis instanceof this.getConstructor('graph.axis.y')\r\n    );\r\n\r\n    return axes;\r\n  }\r\n\r\n  _axisHasChanged() {\r\n    this._axesHaveChanged = true;\r\n  }\r\n\r\n  /**\r\n   * Creates a new serie.\r\n   * If the a serie with the same name exists, returns this serie with update options.\r\n   * The type of the serie is used to fetch the corresponding registered constructor registered with the name \"graph.serie.<type>\", e.g \"line\" will fetch the \"graph.serie.line\" prototype (built-in)<br />\r\n   * Built-in series types are \"line\", \"contour\", \"zone\" and \"scatter\".\r\n   * @param {String} name - The name of the serie (unique)\r\n   * @param {Object} options - The serie options\r\n   * @param {Type} type - The type of the serie.\r\n   * @returns {Serie} The newly created serie\r\n   */\r\n  newSerie(name, options, type) {\r\n    let serie;\r\n\r\n    if (typeof options !== 'object' && !type) {\r\n      type = options;\r\n      options = {};\r\n    }\r\n\r\n    if (!type) {\r\n      type = Graph.SERIE_LINE;\r\n    }\r\n\r\n    if ((serie = this.getSerie(name))) {\r\n      return serie;\r\n    }\r\n\r\n    if (!(serie = makeSerie(this, name, options, type))) {\r\n      return;\r\n    }\r\n\r\n    this.series.push(serie);\r\n\r\n    serie.postInit();\r\n    this.emit('newSerie', serie);\r\n    return serie;\r\n  }\r\n\r\n  /**\r\n   * Looks for an existing serie by name or by index and returns it.\r\n   * The index of the serie follows the creation sequence (0 for the first one, 1 for the second one, ...)\r\n   * @param {(String|Number)} name - The name or the index of the serie\r\n   * @returns {Serie}\r\n   */\r\n  getSerie(name) {\r\n    if (typeof name == 'number') {\r\n      return this.series[name] || false;\r\n    }\r\n\r\n    if (typeof name == 'function') {\r\n      name = name();\r\n    }\r\n\r\n    var i = 0,\r\n      l = this.series.length;\r\n\r\n    for (; i < l; i++) {\r\n      if (this.series[i].getName() == name || this.series[i] == name) {\r\n        return this.series[i];\r\n      }\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Returns all the series\r\n   * @returns {Serie[]} An array of all the series\r\n   */\r\n  getSeries() {\r\n    return this.series;\r\n  }\r\n\r\n  /**\r\n   * Returns all the series that correspond to one or multiple types\r\n   * @param {...Symbol} type - The serie types to select\r\n   * @returns {Serie[]} An array of all the series\r\n   * @example graph.allSeries( Graph.SERIE_LINE, Graph.SERIE_ZONE );\r\n   */\r\n  allSeries(...types) {\r\n    return this.series.filter((serie) => {\r\n      return types.include(serie.getType());\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Sorts the series\r\n   * @param {function} method - Sorting method (arguments: serieA, serieB)\r\n   * @example graph.sortSeries( ( sA, sB ) => sA.label > sB.label ? 1 : -1 );\r\n   */\r\n  sortSeries(method) {\r\n    if (typeof method !== 'function') {\r\n      return this;\r\n    }\r\n\r\n    this.series.sort(method);\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Draws a specific serie\r\n   * @param {Serie} serie - The serie to redraw\r\n   * @param {Boolean} force - Forces redraw even if no data has changed\r\n   */\r\n  drawSerie(serie, force) {\r\n    if (!serie.draw) {\r\n      throw new Error('Serie has no method draw');\r\n    }\r\n\r\n    serie.draw(force);\r\n  }\r\n\r\n  /**\r\n   * Redraws all visible series\r\n   * @param {Boolean} force - Forces redraw even if no data has changed\r\n   */\r\n  drawSeries(force) {\r\n    if (!this.width || !this.height) {\r\n      return;\r\n    }\r\n\r\n    var i = this.series.length - 1;\r\n    for (; i >= 0; i--) {\r\n      if (this.series[i].isShown()) {\r\n        this.drawSerie(this.series[i], force);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @alias Graph#removeSeries\r\n   */\r\n  resetSeries() {\r\n    this.removeSeries();\r\n  }\r\n\r\n  /**\r\n   * @alias Graph#removeSeries\r\n   */\r\n\r\n  killSeries() {\r\n    this.resetSeries();\r\n  }\r\n\r\n  killLegend() {\r\n    if (this.legend) {\r\n      this.legend.kill();\r\n    }\r\n    this.legend = undefined;\r\n  }\r\n\r\n  killShapes() {\r\n    this.shapes.forEach((shape) => {\r\n      shape.kill(false);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Removes all series from the graph\r\n   */\r\n  removeSeries() {\r\n    while (this.series[0]) {\r\n      this.series[0].kill(true);\r\n    }\r\n    this.series = [];\r\n\r\n    if (this.legend) {\r\n      this.legend.update();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Selects a serie. Only one serie per graph can be selected.\r\n   * @param {Serie} serie - The serie to select\r\n   * @param {String} selectName=\"selected\" - The name of the selection\r\n   */\r\n  selectSerie(serie, selectName) {\r\n    if (!(typeof serie == 'object')) {\r\n      serie = this.getSerie(serie);\r\n    }\r\n\r\n    if (\r\n      this.selectedSerie == serie &&\r\n      this.selectedSerie.selectionType == selectName\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    if (this.selectedSerie !== serie && this.selectedSerie) {\r\n      this.unselectSerie(this.selectedSerie);\r\n    }\r\n\r\n    this.selectedSerie = serie;\r\n    this.triggerEvent('onSelectSerie', serie);\r\n\r\n    serie.select(selectName || 'selected');\r\n  }\r\n\r\n  /**\r\n   * Returns the selected serie\r\n   * @returns {(Serie|undefined)} The selected serie\r\n   */\r\n  getSelectedSerie() {\r\n    return this.selectedSerie;\r\n  }\r\n\r\n  /**\r\n   * Unselects a serie\r\n   * @param {Serie} serie - The serie to unselect\r\n   */\r\n  unselectSerie(serie) {\r\n    if (!serie.unselect) {\r\n      return;\r\n    }\r\n\r\n    serie.unselect();\r\n    this.selectedSerie = false;\r\n    this.triggerEvent('onUnselectSerie', serie);\r\n  }\r\n\r\n  /**\r\n   * Returns all the shapes associated to a serie. Shapes can (but don't have to) be associated to a serie. The position of the shape can then be relative to the same axes as the serie.\r\n   * @param {Serie} serie - The serie containing the shapes\r\n   * @returns {Shape[]} An array containing a list of shapes associated to the serie\r\n   */\r\n  getShapesOfSerie(serie) {\r\n    var shapes = [];\r\n    var i = this.shapes.length - 1;\r\n\r\n    for (; i >= 0; i--) {\r\n      if (this.shapes[i].getSerie() == serie) {\r\n        shapes.push(this.shapes[i]);\r\n      }\r\n    }\r\n\r\n    return shapes;\r\n  }\r\n  makeToolbar(toolbarData) {\r\n    var constructor = this.getConstructor('graph.toolbar');\r\n    if (constructor) {\r\n      return (this.toolbar = new constructor(this, toolbarData));\r\n    } else {\r\n      return util.throwError('No constructor exists for toolbar');\r\n    }\r\n  }\r\n\r\n  /**\r\n   *  Returns all shapes from the graph\r\n   */\r\n  getShapes() {\r\n    return this.shapes || [];\r\n  }\r\n\r\n  /**\r\n   * Creates a new shape. jsGraph will look for the registered constructor \"graph.shape.<shapeType>\".\r\n   * @param {String} shapeType - The type of the shape\r\n   * @param {Object} [shapeData] - The options passed to the shape creator\r\n   * @param {Boolean} [mute=false] - <code>true</code> to create the shape quietly\r\n   * @param {Object} [shapeProperties] - The native object containing the shape properties in the jsGraph format (caution when using it)\r\n   * @returns {Shape} The created shape\r\n   * @see Graph#getConstructor\r\n   */\r\n  newShape(shapeType, shapeData, mute = false, shapeProperties) {\r\n    this.prevent(false);\r\n\r\n    if (!mute) {\r\n      this.emit('beforeNewShape', shapeData);\r\n\r\n      if (this.prevent(false)) {\r\n        return false;\r\n      }\r\n    }\r\n    // Backward compatibility\r\n    if (typeof shapeType == 'object') {\r\n      mute = shapeData;\r\n      shapeData = shapeType;\r\n      shapeType = shapeData.type;\r\n    }\r\n\r\n    shapeData = shapeData || {};\r\n    shapeData._id = util.guid();\r\n\r\n    var constructor;\r\n    if (typeof shapeType == 'function') {\r\n      constructor = shapeType;\r\n    } else {\r\n      constructor = this.getConstructor(`graph.shape.${shapeType}`);\r\n    }\r\n\r\n    if (!constructor) {\r\n      return util.throwError('No constructor for this shape');\r\n    }\r\n\r\n    var shape = new constructor(this, shapeData);\r\n\r\n    if (!shape) {\r\n      return util.throwError('Failed to construct shape.');\r\n    }\r\n\r\n    shape.type = shapeType;\r\n    shape.graph = this;\r\n    shape._data = shapeData;\r\n    if (shapeData.properties !== undefined) {\r\n      shape.setProperties(shapeData.properties);\r\n    }\r\n\r\n    shape.init(\r\n      this,\r\n      shapeProperties,\r\n      shapeProperties ? shapeProperties.simplified : false\r\n    );\r\n\r\n    if (shapeData.props !== undefined) {\r\n      for (var i in shapeData.props) {\r\n        shape.setProp(i, shapeData.props[i]);\r\n      }\r\n    }\r\n    if (shapeData.position) {\r\n      for (var i = 0, l = shapeData.position.length; i < l; i++) {\r\n        shape.setPosition(new GraphPosition(shapeData.position[i]), i);\r\n      }\r\n    }\r\n    /* Setting shape properties */\r\n    if (shapeData.fillColor !== undefined) {\r\n      shape.setFillColor(shapeData.fillColor);\r\n    }\r\n\r\n    if (shapeData.fillOpacity !== undefined) {\r\n      shape.setFillOpacity(shapeData.fillOpacity);\r\n    }\r\n\r\n    if (shapeData.strokeColor !== undefined) {\r\n      shape.setStrokeColor(shapeData.strokeColor);\r\n    }\r\n\r\n    if (shapeData.strokeWidth !== undefined) {\r\n      shape.setStrokeWidth(shapeData.strokeWidth);\r\n    }\r\n\r\n    if (shapeData.layer !== undefined) {\r\n      shape.setLayer(shapeData.layer);\r\n    }\r\n\r\n    if (shapeData.locked == true) {\r\n      shape.lock();\r\n    }\r\n\r\n    if (shapeData.movable == true) {\r\n      shape.movable();\r\n    }\r\n\r\n    if (shapeData.selectable == true) {\r\n      shape.selectable();\r\n    }\r\n\r\n    if (shapeData.resizable == true) {\r\n      shape.resizable();\r\n    }\r\n\r\n    if (shapeData.attributes !== undefined) {\r\n      shape.setProp('attributes', shapeData.attributes);\r\n    }\r\n\r\n    if (shapeData.handles !== undefined) {\r\n      shape.setProp('handles', shapeData.handles);\r\n    }\r\n\r\n    if (shapeData.selectOnMouseDown !== undefined) {\r\n      shape.setProp('selectOnMouseDown', true);\r\n    }\r\n\r\n    if (shapeData.selectOnClick !== undefined) {\r\n      shape.setProp('selectOnClick', true);\r\n    }\r\n\r\n    if (\r\n      shapeData.transforms !== undefined &&\r\n      Array.isArray(shapeData.transforms)\r\n    ) {\r\n      shapeData.transforms.forEach(({\r\n        type,\r\n        value\r\n      }) => {\r\n        shape.addTransform(type, value);\r\n      });\r\n    }\r\n\r\n    if (shapeData.highlightOnMouseOver !== undefined) {\r\n      shape.setProp('highlightOnMouseOver', true);\r\n    }\r\n\r\n    if (shapeData.labelEditable) {\r\n      shape.setProp('labelEditable', shapeData.labelEditable);\r\n    }\r\n\r\n    if (shapeData.labels && !shapeData.label) {\r\n      shapeData.label = shapeData.labels;\r\n    }\r\n\r\n    if (shapeData.label !== undefined) {\r\n      if (!Array.isArray(shapeData.label)) {\r\n        shapeData.label = [shapeData.label];\r\n      }\r\n\r\n      for (var i = 0, l = shapeData.label.length; i < l; i++) {\r\n        shape.showLabel(i);\r\n        shape.setLabelText(shapeData.label[i].text, i);\r\n        shape.setLabelPosition(shapeData.label[i].position, i);\r\n        shape.setLabelColor(shapeData.label[i].color || 'black', i);\r\n        shape.setLabelSize(shapeData.label[i].size, i);\r\n        shape.setLabelAngle(shapeData.label[i].angle || 0, i);\r\n        shape.setLabelBaseline(shapeData.label[i].baseline || 'no-change', i);\r\n        shape.setLabelAnchor(shapeData.label[i].anchor || 'start', i);\r\n        shape.setLabelBackgroundColor(\r\n          shapeData.label[i].backgroundColor || 'transparent',\r\n          i\r\n        );\r\n        shape.setLabelBackgroundOpacity(\r\n          shapeData.label[i].backgroundOpacity || 1,\r\n          i\r\n        );\r\n      }\r\n    }\r\n\r\n    if (shapeData.serie) {\r\n      shape.setSerie(this.getSerie(shapeData.serie));\r\n    }\r\n    shape.createHandles();\r\n    shape.applyStyle();\r\n\r\n    this.shapes.push(shape);\r\n\r\n    if (!mute) {\r\n      this.emit('newShape', shape, shapeData);\r\n    }\r\n\r\n    return shape;\r\n  }\r\n\r\n  /**\r\n   * Creates a new position. Arguments are passed to the position constructor\r\n   * @param {...*} varArgs\r\n   * @see Position\r\n   */\r\n  newPosition(varArgs) {\r\n    return new GraphPosition(...arguments);\r\n\r\n    // 18 September 2016 Norman: What is that ?\r\n    //Array.prototype.unshift.call( arguments, null );\r\n    //return new( Function.prototype.bind.apply( GraphPosition, arguments ) )();\r\n  }\r\n\r\n  /**\r\n   *  Redraws all shapes. To be called if their definitions have changed\r\n   */\r\n  redrawShapes() {\r\n    //this.graphingZone.removeChild(this.shapeZone);\r\n    for (var i = 0, l = this.shapes.length; i < l; i++) {\r\n      this.shapes[i].redraw();\r\n    }\r\n    //this.graphingZone.insertBefore(this.shapeZone, this.axisGroup);\r\n  }\r\n\r\n  /**\r\n   *  Removes all shapes from the graph\r\n   */\r\n  removeShapes() {\r\n    for (var i = 0, l = this.shapes.length; i < l; i++) {\r\n      if (this.shapes[i] && this.shapes[i].kill) {\r\n        this.shapes[i].kill(true);\r\n      }\r\n    }\r\n    this.shapes = [];\r\n  }\r\n\r\n  /**\r\n   * Selects a shape\r\n   * @param {Shape} shape - The shape to select\r\n   * @param {Boolean} mute - Select the shape quietly\r\n   */\r\n  selectShape(shape, mute) {\r\n    // Already selected. Returns false\r\n\r\n    if (!shape) {\r\n      return;\r\n    }\r\n\r\n    if (this.selectedShapes.indexOf(shape) > -1) {\r\n      return false;\r\n    }\r\n\r\n    if (!shape.isSelectable()) {\r\n      return false;\r\n    }\r\n\r\n    if (!mute) {\r\n      this.emit('beforeShapeSelect', shape);\r\n    }\r\n\r\n    if (this.prevent(false)) {\r\n      return;\r\n    }\r\n\r\n    if (this.selectedShapes.length > 0 && this.options.shapesUniqueSelection) {\r\n      // Only one selected shape at the time\r\n\r\n      this.unselectShapes(mute);\r\n    }\r\n\r\n    shape._select(mute);\r\n    this.selectedShapes.push(shape);\r\n\r\n    if (!mute) {\r\n      this.emit('shapeSelect', shape);\r\n    }\r\n  }\r\n\r\n  getSelectedShapes() {\r\n    return this.selectedShapes;\r\n  }\r\n\r\n  /**\r\n   * Unselects a shape\r\n   * @param {Shape} shape - The shape to unselect\r\n   * @param {Boolean} mute - Unselect the shape quietly\r\n   */\r\n  unselectShape(shape, mute) {\r\n    if (this.selectedShapes.indexOf(shape) == -1) {\r\n      return;\r\n    }\r\n\r\n    if (!mute) {\r\n      this.emit('beforeShapeUnselect', shape);\r\n    }\r\n\r\n    if (this.cancelUnselectShape) {\r\n      this.cancelUnselectShape = false;\r\n      return;\r\n    }\r\n\r\n    shape._unselect();\r\n\r\n    this.selectedShapes.splice(this.selectedShapes.indexOf(shape), 1);\r\n\r\n    if (!mute) {\r\n      this.emit('shapeUnselect', shape);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Unselects all shapes\r\n   * @param {Boolean} [ mute = false ] - Mutes all unselection events\r\n   * @return {Graph} The current graph instance\r\n   */\r\n  unselectShapes(mute) {\r\n    while (this.selectedShapes[0]) {\r\n      this.unselectShape(this.selectedShapes[0], mute);\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  _removeShape(shape) {\r\n    this.shapes.splice(this.shapes.indexOf(shape), 1);\r\n  }\r\n\r\n  appendShapeToDom(shape) {\r\n    if (shape.isHTML()) {\r\n      this.wrapper.insertBefore(shape._dom, this.dom);\r\n    }\r\n\r\n    this.getLayer(shape.getLayer(), 'shape').appendChild(\r\n      shape.simplified ? shape._dom : shape.group\r\n    );\r\n  }\r\n\r\n  removeShapeFromDom(shape) {\r\n    if (shape.isHTML()) {\r\n      this.wrapper.removeChild(shape._dom);\r\n    }\r\n\r\n    this.getLayer(shape.getLayer(), 'shape').removeChild(shape.group);\r\n  }\r\n\r\n  appendSerieToDom(serie) {\r\n    this.getLayer(serie.getLayer(), 'serie').appendChild(serie.groupMain);\r\n  }\r\n\r\n  removeSerieFromDom(serie) {\r\n    this.getLayer(serie.getLayer(), 'serie').removeChild(serie.groupMain);\r\n  }\r\n\r\n  getLayer(layer, mode) {\r\n    if (!this.layers[layer]) {\r\n      this.layers[layer] = [];\r\n\r\n      this.layers[layer][0] = document.createElementNS(Graph.ns, 'g');\r\n      this.layers[layer][0].setAttribute('data-layer', layer);\r\n      this.layers[layer][1] = document.createElementNS(Graph.ns, 'g');\r\n      this.layers[layer][2] = document.createElementNS(Graph.ns, 'g');\r\n\r\n      this.layers[layer][0].appendChild(this.layers[layer][1]);\r\n      this.layers[layer][0].appendChild(this.layers[layer][2]);\r\n\r\n      var i = 1,\r\n        prevLayer;\r\n\r\n      while (!(prevLayer = this.layers[layer - i]) && layer - i >= 0) {\r\n        i++;\r\n      }\r\n\r\n      if (!prevLayer) {\r\n        this.plotGroup.insertBefore(\r\n          this.layers[layer][0],\r\n          this.plotGroup.firstChild\r\n        );\r\n      } else if (prevLayer.nextSibling) {\r\n        this.plotGroup.insertBefore(\r\n          this.layers[layer][0],\r\n          prevLayer.nextSibling\r\n        );\r\n      } else {\r\n        this.plotGroup.appendChild(this.layers[layer][0]);\r\n      }\r\n    }\r\n\r\n    return this.layers[layer][mode == 'shape' ? 2 : 1];\r\n  }\r\n\r\n  focus() {\r\n    this.wrapper.focus();\r\n  }\r\n\r\n  elementMoving(movingElement) {\r\n    this.bypassHandleMouse = movingElement;\r\n  }\r\n\r\n  stopElementMoving(element) {\r\n    if (element && element == this.bypassHandleMouse) {\r\n      this.bypassHandleMouse = false;\r\n    } else if (!element) {\r\n      this.bypassHandleMouse = false;\r\n    }\r\n  }\r\n\r\n  _makeClosingLines() {\r\n    this.closingLines = {};\r\n    var els = ['top', 'bottom', 'left', 'right'],\r\n      i = 0,\r\n      l = 4;\r\n    for (; i < l; i++) {\r\n      var line = document.createElementNS(Graph.ns, 'line');\r\n      line.setAttribute('stroke', this.options.closeColor);\r\n      line.setAttribute('shape-rendering', 'crispEdges');\r\n      line.setAttribute('stroke-linecap', 'square');\r\n      line.setAttribute('display', 'none');\r\n      this.closingLines[els[i]] = line;\r\n      this.graphingZone.appendChild(line);\r\n    }\r\n  }\r\n\r\n  isActionAllowed(e, action) {\r\n    if (\r\n      action.type !== e.type &&\r\n      (action.type !== undefined || e.type !== 'mousedown') &&\r\n      !(\r\n        (e.type === 'wheel' || e.type === 'mousewheel') &&\r\n        action.type == 'mousewheel'\r\n      )\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    if (\r\n      action.enabled &&\r\n      (typeof action.enabled == 'function' ?\r\n        !action.enabled(this) :\r\n        !action.enabled)\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    if (action.key) {\r\n      if (action.key !== e.keyCode) {\r\n        let keyCheck = {\r\n          backspace: 8,\r\n          enter: 13,\r\n          tab: 9,\r\n          shift: 16,\r\n          ctrl: 17,\r\n          alt: 18,\r\n          pause: 19,\r\n          escape: 27,\r\n          up: 33,\r\n          down: 34,\r\n          left: 37,\r\n          right: 39\r\n        };\r\n\r\n        if (keyCheck[action.key] !== e.keyCode) {\r\n          return;\r\n        }\r\n      }\r\n    }\r\n\r\n    if (action.shift === undefined) {\r\n      action.shift = false;\r\n    }\r\n\r\n    if (action.ctrl === undefined) {\r\n      action.ctrl = false;\r\n    }\r\n\r\n    if (action.meta === undefined) {\r\n      action.meta = false;\r\n    }\r\n\r\n    if (action.alt === undefined) {\r\n      action.alt = false;\r\n    }\r\n\r\n    return (\r\n      e.shiftKey == action.shift &&\r\n      e.ctrlKey == action.ctrl &&\r\n      e.metaKey == action.meta &&\r\n      e.altKey == action.alt\r\n    );\r\n  }\r\n\r\n  forcePlugin(plugin) {\r\n    this.forcedPlugin = plugin;\r\n  }\r\n\r\n  unforcePlugin() {\r\n    this.forcedPlugin = false;\r\n  }\r\n\r\n  _pluginsExecute(funcName, ...args) {\r\n    //\t\t\tArray.prototype.splice.apply(args, [0, 0, this]);\r\n\r\n    for (var i in this.plugins) {\r\n      if (this.plugins[i] && this.plugins[i][funcName]) {\r\n        this.plugins[i][funcName].apply(this.plugins[i], args);\r\n      }\r\n    }\r\n  }\r\n\r\n  _pluginExecute(which, func, args) {\r\n    //Array.prototype.splice.apply( args, [ 0, 0, this ] );\r\n    if (!which) {\r\n      return;\r\n    }\r\n\r\n    if (this.plugins[which] && this.plugins[which][func]) {\r\n      this.plugins[which][func].apply(this.plugins[which], args);\r\n      return true;\r\n    }\r\n  }\r\n\r\n  pluginYieldActiveState() {\r\n    this.activePlugin = false;\r\n  }\r\n\r\n  _serieExecute(serie, func, args) {\r\n    if (typeof serie !== 'object') {\r\n      serie = this.getSerie(serie);\r\n    }\r\n\r\n    if (typeof serie[func] == 'function') {\r\n      serie.apply(serie, args);\r\n    }\r\n  }\r\n  _pluginsInit() {\r\n    var constructor, pluginName, pluginOptions;\r\n\r\n    for (var i in this.options.plugins) {\r\n      pluginName = i;\r\n      pluginOptions = this.options.plugins[i];\r\n\r\n      constructor = this.getConstructor(`graph.plugin.${pluginName}`);\r\n\r\n      if (constructor) {\r\n        //var options = util.extend( true, {}, constructor.defaults(), pluginOptions );\r\n        this.plugins[pluginName] = new constructor(pluginOptions);\r\n\r\n        util.mapEventEmission(\r\n          this.plugins[pluginName].options,\r\n          this.plugins[pluginName]\r\n        );\r\n        this.plugins[pluginName].init(this, pluginOptions);\r\n      } else {\r\n        util.throwError(`Plugin \"${pluginName}\" has not been registered`);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Returns an initialized plugin\r\n   * @param {String} pluginName\r\n   * @returns {Plugin} The plugin which name is <pluginName>\r\n   */\r\n  getPlugin(pluginName) {\r\n    var plugin = this.plugins[pluginName];\r\n\r\n    if (!plugin) {\r\n      return util.throwError(\r\n        `Plugin \"${pluginName}\" has not been loaded or properly registered`\r\n      );\r\n    }\r\n\r\n    return plugin;\r\n  }\r\n\r\n  hasPlugin(pluginName) {\r\n    return !!this.plugins[pluginName];\r\n  }\r\n\r\n  triggerEvent() {\r\n    var func = arguments[0];\r\n    /*,\r\n          args = Array.prototype.splice.apply( arguments, [ 0, 1 ] );\r\n    */\r\n    if (typeof this.options[func] == 'function') {\r\n      return this.options[func].apply(this, arguments);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Creates a legend. Only one legend is allowed per graph\r\n   * @param {Object} options - The legend options\r\n   */\r\n  makeLegend(options) {\r\n    if (this.legend) {\r\n      return this.legend;\r\n    }\r\n\r\n    var constructor = this.getConstructor('graph.legend');\r\n    if (constructor) {\r\n      this.legend = new constructor(this, options);\r\n    } else {\r\n      return util.throwError(\r\n        'Graph legend is not available as it has not been registered'\r\n      );\r\n    }\r\n\r\n    return this.legend;\r\n  }\r\n\r\n  /**\r\n   * Redraws the legend if it exists\r\n   * @param {Boolean} [ onlyIfRequired = false ] ```true``` to redraw the legend only when it actually needs to be updated\r\n   * @return {Graph} The graph instance\r\n   */\r\n  updateLegend(onlyIfRequired = false) {\r\n    if (!this.legend) {\r\n      return;\r\n    }\r\n\r\n    this.legend.update(onlyIfRequired);\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * @returns {Legend} The legend item\r\n   */\r\n  getLegend() {\r\n    if (!this.legend) {\r\n      return;\r\n    }\r\n\r\n    return this.legend;\r\n  }\r\n\r\n  requireLegendUpdate() {\r\n    if (!this.legend) {\r\n      return;\r\n    }\r\n\r\n    this.legend.requireDelayedUpdate();\r\n  }\r\n\r\n  orthogonalProjectionSetup() {\r\n    this.options.zAxis = util.extend(true, {\r\n      maxZ: 10,\r\n      minZ: 0,\r\n      shiftX: -25,\r\n      shiftY: -15,\r\n      xAxis: this.getXAxis(),\r\n      yAxis: this.getYAxis()\r\n    });\r\n  }\r\n\r\n  orthogonalProjectionUpdate() {\r\n    if (!this.zAxis) {\r\n      this.zAxis = {\r\n        g: document.createElementNS(Graph.ns, 'g'),\r\n        l: document.createElementNS(Graph.ns, 'line')\r\n      };\r\n\r\n      this.zAxis.g.appendChild(this.zAxis.l);\r\n      this.groupGrids.appendChild(this.zAxis.g);\r\n    }\r\n\r\n    let refAxisX = this.options.zAxis.xAxis;\r\n    let refAxisY = this.options.zAxis.yAxis;\r\n\r\n    var x0 = refAxisX.getMinPx();\r\n    var y0 = refAxisY.getMinPx();\r\n\r\n    var dx = refAxisX.getZProj(this.options.zAxis.maxZ);\r\n    var dy = refAxisY.getZProj(this.options.zAxis.maxZ);\r\n\r\n    this.zAxis.l.setAttribute('stroke', 'black');\r\n    this.zAxis.l.setAttribute('x1', x0);\r\n    this.zAxis.l.setAttribute('x2', x0 + dx);\r\n    this.zAxis.l.setAttribute('y1', y0);\r\n    this.zAxis.l.setAttribute('y2', y0 + dy);\r\n\r\n    this.updateDataMinMaxAxes(true);\r\n\r\n    var sort = this.series.map((serie) => {\r\n      return [serie.getZPos(), serie];\r\n    });\r\n\r\n    sort.sort((sa, sb) => {\r\n      return sb[0] - sa[0];\r\n    });\r\n\r\n    let i = 0;\r\n    sort.forEach((s) => {\r\n      s[1].setLayer(i);\r\n      this.appendSerieToDom(s[1]);\r\n      i++;\r\n    });\r\n\r\n    this.drawSeries(true);\r\n  }\r\n\r\n  /**\r\n   * Kills the graph\r\n   **/\r\n  kill() {\r\n    this.wrapper.removeChild(this.dom);\r\n  }\r\n  _removeSerie(serie) {\r\n    this.series.splice(this.series.indexOf(serie), 1);\r\n    this._pluginsExecute('serieRemoved', serie);\r\n  }\r\n  contextListen(target, menuElements, callback) {\r\n    if (this.options.onContextMenuListen) {\r\n      return this.options.onContextMenuListen(target, menuElements, callback);\r\n    }\r\n  }\r\n  lockShapes() {\r\n    this.shapesLocked = true;\r\n\r\n    // Removes the current actions of the shapes\r\n    for (var i = 0, l = this.shapes.length; i < l; i++) {\r\n      this.shapes[i].moving = false;\r\n      this.shapes[i].resizing = false;\r\n    }\r\n  }\r\n  unlockShapes() {\r\n    this.shapesLocked = false;\r\n  }\r\n  prevent(arg) {\r\n    var curr = this.prevented;\r\n    if (arg != -1) {\r\n      this.prevented = arg == undefined || arg;\r\n    }\r\n    return curr;\r\n  }\r\n  _getXY(e) {\r\n    var x = e.clientX,\r\n      y = e.clientY;\r\n\r\n    var pos = this.offsetCached || util.getOffset(this.wrapper);\r\n\r\n    x -= pos.left;\r\n    y -= pos.top;\r\n\r\n    return {\r\n      x: x,\r\n      y: y\r\n    };\r\n  }\r\n  _resize() {\r\n    if (!this.width || !this.height) {\r\n      return;\r\n    }\r\n\r\n    this.getDrawingWidth();\r\n    this.getDrawingHeight();\r\n\r\n    this.sizeSet = true;\r\n    this.dom.setAttribute('width', this.width);\r\n    this.dom.setAttribute('height', this.height);\r\n    this.domTitle.setAttribute('x', this.width / 2);\r\n\r\n    this._sizeChanged = true;\r\n\r\n    if (this.drawn) {\r\n      this.requireLegendUpdate();\r\n      this.draw(true);\r\n    }\r\n  }\r\n\r\n  updateGraphingZone() {\r\n    util.setAttributeTo(this.graphingZone, {\r\n      transform: `translate(${this.options.paddingLeft}, ${this.options.paddingTop\r\n        })`\r\n    });\r\n\r\n    this._sizeChanged = true;\r\n  }\r\n\r\n  // We have to proxy the methods in case they are called anonymously\r\n  getDrawingSpaceWidth() {\r\n    return () => this.drawingSpaceWidth;\r\n  }\r\n\r\n  getDrawingSpaceHeight() {\r\n    return () => this.drawingSpaceHeight;\r\n  }\r\n\r\n  getDrawingSpaceMinX() {\r\n    return () => this.drawingSpaceMinX;\r\n  }\r\n\r\n  getDrawingSpaceMinY() {\r\n    return () => this.drawingSpaceMinY;\r\n  }\r\n\r\n  getDrawingSpaceMaxX() {\r\n    return () => this.drawingSpaceMaxX;\r\n  }\r\n\r\n  getDrawingSpaceMaxY() {\r\n    return () => this.drawingSpaceMaxY;\r\n  }\r\n\r\n  tracking(options) {\r\n    // This is the new alias\r\n    return this.trackingLine(options);\r\n  }\r\n\r\n  /**\r\n   *  Enables the line tracking\r\n   *  @param {Object|Boolean} options - Defines the tracking behavior. If a boolean, simply enables or disables the existing tracking.\r\n   */\r\n  trackingLine(options) {\r\n    var self = this;\r\n\r\n    if (typeof options === 'boolean') {\r\n      if (this.options.trackingLine) {\r\n        this.options.trackingLine.enable = options;\r\n      }\r\n      return;\r\n    }\r\n\r\n    if (options) {\r\n      this.options.trackingLine = options;\r\n    }\r\n\r\n    // One can enable / disable the tracking\r\n    options.enable = options.enable === undefined ? true : !!options.enable;\r\n\r\n    // Treat the series\r\n    const seriesSet = new Set();\r\n    let backupSeries = [];\r\n    // If we defined an array, let's save it\r\n    if (Array.isArray(options.series)) {\r\n      options.series.forEach((serie) => {\r\n        seriesSet.add(this.getSerie(serie));\r\n      });\r\n    } else if (options.series == 'all') {\r\n      this.allSeries().forEach((serie) => seriesSet.add(serie));\r\n    }\r\n\r\n    options.series = seriesSet;\r\n\r\n    // Individual tracking\r\n    if (options.mode == 'individual') {\r\n      seriesSet.forEach((serie) => {\r\n        self.addSerieToTrackingLine(serie, options.serieOptions);\r\n      });\r\n    } else {\r\n      /*\r\n      options.series.forEach( ( serie ) => {\r\n        serie.serie.disableTracking();\r\n      } );\r\n*/\r\n      if (options.noLine) {\r\n        return;\r\n      }\r\n\r\n      if (!this.trackingLineShape) {\r\n        // Avoid multiple creation of tracking lines\r\n\r\n        // Creates a new shape called trackingLine, in the first layer (below everything)\r\n        this.trackingLineShape = this.newShape(\r\n          'line',\r\n          util.extend(\r\n            true, {\r\n            position: [{\r\n              y: 'min'\r\n            },\r\n            {\r\n              y: 'max'\r\n            }\r\n            ],\r\n            stroke: 'black',\r\n            layer: -1\r\n          },\r\n            options.trackingLineShapeOptions\r\n          )\r\n        );\r\n      }\r\n\r\n      this.trackingLineShape.draw();\r\n\r\n      // return this.trackingLineShape;\r\n    }\r\n    //return this.trackingObject;\r\n  }\r\n\r\n  addSerieToTrackingLine(serie, options = {}) {\r\n    // Safeguard when claled externally\r\n    if (!this.options.trackingLine) {\r\n      this.trackingLine({\r\n        mode: 'individual'\r\n      });\r\n    }\r\n\r\n    this.options.trackingLine.series.add(serie);\r\n\r\n    let serieShape;\r\n    if (this.options.trackingLine.serieShape) {\r\n      serieShape = this.options.trackingLine.serieShape;\r\n    } else {\r\n      serieShape = {\r\n        shape: 'ellipse',\r\n        properties: {\r\n          rx: [`${serie.getLineWidth() * 3}px`],\r\n          ry: [`${serie.getLineWidth() * 3}px`]\r\n        }\r\n      };\r\n    }\r\n\r\n    serie.options.tracking = Object.assign({}, options);\r\n\r\n    if (!serie.trackingShape) {\r\n      serie.trackingShape = this.newShape(\r\n        serieShape.shape, {\r\n        fillColor: serie.getLineColor(),\r\n        strokeColor: 'White',\r\n        strokeWidth: serie.getLineWidth()\r\n      },\r\n        true,\r\n        serieShape.properties\r\n      )\r\n        .setSerie(serie)\r\n        .forceParentDom(serie.groupMain)\r\n        .draw();\r\n    }\r\n    /*\r\n      serie.serie.trackingShape.show();\r\n      serie.serie.trackingShape.getPosition( 0 ).x = index.xClosest;\r\n\r\n      if ( serieShape.magnet ) {\r\n\r\n        let magnetOptions = serieShape.magnet,\r\n          val = magnetOptions.within,\r\n          minmaxpos;\r\n\r\n        if ( magnetOptions.withinPx ) {\r\n          val = serie.serie.getXAxis().getRelVal( magnetOptions.withinPx );\r\n        }\r\n\r\n        if ( ( minmaxpos = serie.serie.findLocalMinMax( index.xClosest, val, magnetOptions.mode ) ) ) {\r\n\r\n          serie.serie.trackingShape.getPosition( 0 ).x = minmaxpos;\r\n        }\r\n      }\r\n\r\n      serie.serie.trackingShape.redraw();\r\n\r\n*/\r\n\r\n    /*  serie.enableTracking( ( serie, index, x, y ) => {\r\n\r\n      if ( this.options.trackingLine.enable ) {\r\n\r\n        if ( index ) {\r\n\r\n          if ( this.trackingObject ) {\r\n\r\n            this.trackingObject.show();\r\n            this.trackingObject.getPosition( 0 ).x = index.trueX; //serie.getData()[ 0 ][ index.closestIndex * 2 ];\r\n            this.trackingObject.getPosition( 1 ).x = index.trueX; //serie.getData()[ 0 ][ index.closestIndex * 2 ];\r\n            this.trackingObject.redraw();\r\n          }\r\n\r\n          serie._trackingLegend = _trackingLegendSerie( this, {\r\n            serie: serie\r\n          }, x, y, serie._trackingLegend, options.textMethod ? options.textMethod : trackingLineDefaultTextMethod, index.trueX );\r\n\r\n          if ( serie._trackingLegend ) {\r\n            serie._trackingLegend.style.display = 'block';\r\n          }\r\n        }\r\n      }\r\n    }, ( serie ) => {\r\n\r\n      if ( this.trackingObject ) {\r\n        this.trackingObject.hide();\r\n      }\r\n\r\n      if ( serie.trackingShape ) {\r\n        serie.trackingShape.hide();\r\n      }\r\n\r\n      if ( serie._trackingLegend ) {\r\n        serie._trackingLegend.style.display = 'none';\r\n      }\r\n\r\n      serie._trackingLegend = _trackingLegendSerie( this, {\r\n        serie: serie\r\n      }, false, false, serie._trackingLegend, false, false );\r\n\r\n    } );\r\n*/\r\n  }\r\n\r\n  /**\r\n   *  Pass here the katex.render method to be used later\r\n   *   @param {Function} renderer -  katexRendered - renderer\r\n   *   @return {Graph} The current graph instance\r\n   */\r\n  setKatexRenderer(renderer) {\r\n    this._katexRenderer = renderer;\r\n  }\r\n\r\n  hasKatexRenderer() {\r\n    return !!this._katexRenderer;\r\n  }\r\n\r\n  renderWithKatex(katexValue, katexElement) {\r\n    if (this._katexRenderer) {\r\n      if (katexElement) {\r\n        katexElement.removeChild(katexElement.firstChild);\r\n      } else {\r\n        katexElement = document.createElementNS(Graph.ns, 'foreignObject');\r\n      }\r\n\r\n      let div = document.createElement('div');\r\n\r\n      katexElement.appendChild(div);\r\n      this._katexRenderer(katexValue, div);\r\n\r\n      return katexElement;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  exportToSchema() {\r\n    let schema = {};\r\n\r\n    schema.title = this.options.title;\r\n\r\n    schema.width = this.getWidth();\r\n    schema.height = this.getHeight();\r\n\r\n    let axesPositions = ['top', 'bottom', 'left', 'right'];\r\n    let axesExport = [];\r\n    let allaxes = {\r\n      x: [],\r\n      y: []\r\n    };\r\n\r\n    axesPositions.map((axisPosition) => {\r\n      if (!this.axis[axisPosition]) {\r\n        return {};\r\n      }\r\n\r\n      axesExport = axesExport.concat(\r\n        this.axis[axisPosition].map((axis) => {\r\n          return {\r\n            type: axisPosition,\r\n            label: axis.options.label,\r\n            unit: axis.options.unit,\r\n            min: axis.options.forcedMin,\r\n            max: axis.options.forcedMax,\r\n            flip: axis.options.flipped\r\n          };\r\n        })\r\n      );\r\n\r\n      if (axisPosition == 'top' || axisPosition == 'bottom') {\r\n        allaxes.x = allaxes.x.concat(this.axis[axisPosition]);\r\n      } else {\r\n        allaxes.y = allaxes.y.concat(this.axis[axisPosition]);\r\n      }\r\n    });\r\n\r\n    schema.axis = axesExport;\r\n\r\n    let seriesExport = [];\r\n\r\n    let toType = (type) => {\r\n      switch (type) {\r\n        case Graph.SERIE_BAR:\r\n          return 'bar';\r\n\r\n        case Graph.SERIE_LINE_COLORED:\r\n          return 'color';\r\n\r\n        case Graph.SERIE_SCATTER:\r\n          return 'scatter';\r\n\r\n        default:\r\n        case Graph.SERIE_LINE:\r\n          return 'line';\r\n      }\r\n    };\r\n\r\n    let exportData = (serie, x) => {\r\n      let data = [];\r\n\r\n      switch (serie.getType()) {\r\n        case Graph.SERIE_LINE:\r\n          for (var i = 0; i < serie.data.length; i++) {\r\n            for (var j = 0; j < serie.data[i].length - 1; j += 2) {\r\n              data.push(\r\n                serie.data[i][\r\n                j +\r\n                ((x && serie.isFlipped()) || (!x && !serie.isFlipped()) ?\r\n                  1 :\r\n                  0)\r\n                ]\r\n              );\r\n            }\r\n          }\r\n          break;\r\n\r\n        case Graph.SERIE_SCATTER:\r\n          for (var j = 0; j < serie.data.length - 1; j += 2) {\r\n            data.push(\r\n              serie.data[\r\n              i +\r\n              ((x && serie.isFlipped()) || (!x && !serie.isFlipped()) ?\r\n                1 :\r\n                0)\r\n              ]\r\n            );\r\n          }\r\n\r\n          break;\r\n      }\r\n\r\n      return data;\r\n    };\r\n\r\n    schema.data = seriesExport.concat(\r\n      this.series.map((serie) => {\r\n        let style = [];\r\n        let linestyle = [];\r\n\r\n        if (serie.getType() == Graph.SERIE_LINE) {\r\n          for (var stylename in serie.styles) {\r\n            linestyle.push({\r\n              styleName: stylename,\r\n              color: serie.styles[stylename].lineColor,\r\n              lineWidth: serie.styles[stylename].lineWidth,\r\n              lineStyle: serie.styles[stylename].lineStyle\r\n            });\r\n\r\n            let styleObj = {\r\n              styleName: stylename,\r\n              styles: []\r\n            };\r\n            style.push(styleObj);\r\n\r\n            styleObj.styles = styleObj.styles.concat(\r\n              (serie.styles[stylename].markers || []).map((markers) => {\r\n                return {\r\n                  shape: markers.type,\r\n                  zoom: markers.zoom,\r\n                  lineWidth: markers.strokeWidth,\r\n                  lineColor: markers.strokeColor,\r\n                  color: markers.fillColor,\r\n                  points: markers.points\r\n                };\r\n              })\r\n            );\r\n          }\r\n        }\r\n\r\n        return {\r\n          label: serie.getLabel(),\r\n          id: serie.getName(),\r\n          type: toType(serie.getType()),\r\n          x: exportData(serie, true),\r\n          y: exportData(serie, false),\r\n          xAxis: allaxes.x.indexOf(serie.getXAxis()),\r\n          yAxis: allaxes.y.indexOf(serie.getYAxis()),\r\n          style: style,\r\n          lineStyle: linestyle\r\n        };\r\n      })\r\n    );\r\n\r\n    return schema;\r\n  }\r\n\r\n  /**\r\n   * Registers a constructor to jsGraph. Constructors are used on a later basis by jsGraph to create series, shapes or plugins\r\n   * @param {String} constructorName - The name of the constructor\r\n   * @param {Function} constructor - The constructor method\r\n   * @see Graph.getConstructor\r\n   * @static\r\n   */\r\n  static registerConstructor(constructorName, constructor) {\r\n    if (_constructors.has(constructorName)) {\r\n      return util.throwError(`Constructor ${constructor} already exists.`);\r\n    }\r\n\r\n    _constructors.set(constructorName, constructor);\r\n  }\r\n\r\n  /**\r\n   * Returns a registered constructor\r\n   * @param {String} constructorName - The constructor name to look for\r\n   * @param {Boolean} [softFail = false ] - Fails silently if the constructor doesn't exist, and returns false\r\n   * @returns {Function} The registered constructor\r\n   * @throws Error\r\n   * @see Graph.registerConstructor\r\n   * @static\r\n   */\r\n  static getConstructor(constructorName, softFail = false) {\r\n    if (!_constructors.has(constructorName)) {\r\n      if (softFail) {\r\n        return false;\r\n      }\r\n\r\n      return util.throwError(`Constructor \"${constructorName}\" doesn't exist`);\r\n    }\r\n\r\n    return _constructors.get(constructorName);\r\n  }\r\n\r\n  static newWaveform() {\r\n    return new Waveform(...arguments);\r\n  }\r\n\r\n  static waveform() {\r\n    return new Waveform(...arguments);\r\n  }\r\n\r\n  static newWaveformHash() {\r\n    return new WaveformHash(...arguments);\r\n  }\r\n\r\n  static waveformHash() {\r\n    return new WaveformHash(...arguments);\r\n  }\r\n}\r\n\r\n// Adds getConstructor to the prototype. Cannot do that in ES6 classes\r\nGraph.prototype.getConstructor = Graph.getConstructor;\r\n\r\nfunction makeSerie(graph, name, options, type) {\r\n  var constructor = graph.getConstructor(type, true);\r\n  if (!constructor && typeof type == 'string') {\r\n    constructor = graph.getConstructor(`graph.serie.${type}`, true);\r\n  }\r\n\r\n  if (constructor) {\r\n    var serie = new constructor(graph, name, options);\r\n    //serie.init( graph, name, options );\r\n    graph.appendSerieToDom(serie);\r\n  } else {\r\n    return util.throwError(\r\n      'No constructor exists for the serie type provided. Use Graph.registerConstructor( name, constructor ) first is you use your own series'\r\n    );\r\n  }\r\n\r\n  return serie;\r\n}\r\n\r\nfunction getAxisLevelFromSpan(span, level) {\r\n  for (var i = 0, l = level.length; i < l; i++) {\r\n    var possible = true;\r\n    for (var k = 0, m = level[i].length; k < m; k++) {\r\n      if (\r\n        !(\r\n          (span[0] < level[i][k][0] && span[1] < level[i][k][0]) ||\r\n          (span[0] > level[i][k][1] && span[1] > level[i][k][1])\r\n        )\r\n      ) {\r\n        possible = false;\r\n      }\r\n    }\r\n\r\n    if (possible) {\r\n      level[i].push(span);\r\n      return i;\r\n    }\r\n  }\r\n\r\n  level.push([span]);\r\n  return level.length - 1;\r\n}\r\n\r\nfunction refreshDrawingZone(graph) {\r\n  var shift = {\r\n    top: [],\r\n    bottom: [],\r\n    left: [],\r\n    right: []\r\n  };\r\n\r\n  var levels = {\r\n    top: [],\r\n    bottom: [],\r\n    left: [],\r\n    right: []\r\n  };\r\n\r\n  graph._painted = true;\r\n  // Apply to top and bottom\r\n  graph._applyToAxes(\r\n    function (axis, position) {\r\n      if (!axis.isShown()) {\r\n        axis.hideGroup();\r\n        return;\r\n      } else {\r\n        axis.showGroup();\r\n      }\r\n\r\n      if (axis.floating) {\r\n        return;\r\n      }\r\n\r\n      var level = getAxisLevelFromSpan(axis.getSpan(), levels[position]);\r\n      axis.setLevel(level);\r\n\r\n      shift[position][level] = Math.max(\r\n        axis.getAxisPosition(),\r\n        shift[position][level] || 0\r\n      );\r\n    },\r\n    false,\r\n    true,\r\n    false\r\n  );\r\n\r\n  var shiftTop = shift.top.reduce(function (prev, curr) {\r\n    return prev + curr;\r\n  }, 0);\r\n\r\n  var shiftBottom = shift.bottom.reduce(function (prev, curr) {\r\n    return prev + curr;\r\n  }, 0);\r\n\r\n  graph.drawingSpaceHeight = graph.getDrawingHeight() - shiftTop - shiftBottom;\r\n\r\n  [shift.top, shift.bottom].map(function (arr) {\r\n    arr.reduce(function (prev, current, index) {\r\n      arr[index] = prev + current;\r\n      return prev + current;\r\n    }, 0);\r\n  });\r\n  // Apply to top and bottom\r\n  graph._applyToAxes(\r\n    function (axis, position) {\r\n      if (!axis.isShown() || axis.floating) {\r\n        return;\r\n      }\r\n\r\n      axis.setShift(shift[position][axis.getLevel()]);\r\n    },\r\n    false,\r\n    true,\r\n    false\r\n  );\r\n\r\n  // Applied to left and right\r\n  graph._applyToAxes(\r\n    function (axis, position) {\r\n      if (!axis.isShown()) {\r\n        axis.hideGroup();\r\n        // Don't return here. We need to go through the draw method as the axis must be assigned minPx and maxPx values.\r\n        // This is because some series can still be visible although the axis isn't.\r\n      } else {\r\n        axis.showGroup();\r\n      }\r\n      axis.setMinPx(shiftTop);\r\n      axis.setMaxPx(graph.getDrawingHeight(true) - shiftBottom);\r\n\r\n      if (axis.floating) {\r\n        return;\r\n      }\r\n\r\n      // First we need to draw it in order to determine the width to allocate\r\n      // graph is done to accomodate 0 and 100000 without overlapping any element in the DOM (label, ...)\r\n\r\n      // Let's not draw dependant axes yet\r\n      let drawn = !axis.linkedToAxis ? axis.draw() : 0;\r\n\r\n      if (!axis.isShown()) {\r\n        return;\r\n      }\r\n      // Get axis position gives the extra shift that is common\r\n      var level = getAxisLevelFromSpan(axis.getSpan(), levels[position]);\r\n      axis.setLevel(level);\r\n\r\n      if (axis.options.forcedWidth) {\r\n        shift[position][level] = axis.options.forcedWidth;\r\n      } else {\r\n        shift[position][level] = Math.max(drawn, shift[position][level] || 0);\r\n\r\n        if (level < shift[position].length - 1) {\r\n          shift[position][level] += 10;\r\n        }\r\n      }\r\n    },\r\n    false,\r\n    false,\r\n    true\r\n  );\r\n\r\n  var shift2 = util.extend(true, {}, shift);\r\n\r\n  // Applied to left and right\r\n  graph._applyToAxes(\r\n    function (axis, position) {\r\n      if (!axis.isShown() || axis.floating) {\r\n        return;\r\n      }\r\n\r\n      shift2[position][axis.getLevel()] = Math.max(\r\n        shift[position][axis.getLevel()],\r\n        axis.equalizePosition(shift[position][axis.getLevel()])\r\n      );\r\n    },\r\n    false,\r\n    false,\r\n    true\r\n  );\r\n\r\n  shift = shift2;\r\n\r\n  var shiftLeft = shift.left.reduce(function (prev, curr) {\r\n    return prev + curr;\r\n  }, 0);\r\n\r\n  var shiftRight = shift.right.reduce(function (prev, curr) {\r\n    return prev + curr;\r\n  }, 0);\r\n\r\n  graph.drawingSpaceWidth = graph.getDrawingWidth() - shiftLeft - shiftRight;\r\n\r\n  [shift.left, shift.right].forEach(function (arr) {\r\n    arr.reduce(function (prev, current, index) {\r\n      arr[index] = prev + current;\r\n      return prev + current;\r\n    }, 0);\r\n  });\r\n\r\n  // Apply to left and right\r\n  graph._applyToAxes(\r\n    (axis, position) => {\r\n      if (!axis.isShown() || axis.floating) {\r\n        return;\r\n      }\r\n      axis.setShift(shift[position][axis.getLevel()]);\r\n    },\r\n    false,\r\n    false,\r\n    true\r\n  );\r\n\r\n  // Apply to top and bottom\r\n  graph._applyToAxes(\r\n    function (axis, position) {\r\n      if (!axis.isShown()) {\r\n        //      return;\r\n      }\r\n\r\n      axis.setMinPx(shiftLeft);\r\n      axis.setMaxPx(graph.getDrawingWidth(true) - shiftRight);\r\n\r\n      if (axis.floating) {\r\n        return;\r\n      }\r\n\r\n      if (!axis.linkedToAxis) {\r\n        axis.draw();\r\n      }\r\n    },\r\n    false,\r\n    true,\r\n    false\r\n  );\r\n\r\n  // Floating axes\r\n  graph._applyToAxes(\r\n    function (axis) {\r\n      if (!axis.floating) {\r\n        return;\r\n      }\r\n\r\n      var floatingAxis = axis.getFloatingAxis();\r\n      var floatingValue = axis.getFloatingValue();\r\n      var floatingPx = floatingAxis.getPx(floatingValue);\r\n\r\n      axis.setShift(floatingPx);\r\n\r\n      if (!axis.linkedToAxis) {\r\n        axis.draw();\r\n      }\r\n    },\r\n    false,\r\n    true,\r\n    true\r\n  );\r\n\r\n  _closeLine(\r\n    graph,\r\n    'right',\r\n    graph.getDrawingWidth(true),\r\n    graph.getDrawingWidth(true),\r\n    shiftTop,\r\n    graph.getDrawingHeight(true) - shiftBottom\r\n  );\r\n  _closeLine(\r\n    graph,\r\n    'left',\r\n    0,\r\n    0,\r\n    shiftTop,\r\n    graph.getDrawingHeight(true) - shiftBottom\r\n  );\r\n  _closeLine(\r\n    graph,\r\n    'top',\r\n    shiftLeft,\r\n    graph.getDrawingWidth(true) - shiftRight,\r\n    0,\r\n    0\r\n  );\r\n  _closeLine(\r\n    graph,\r\n    'bottom',\r\n    shiftLeft,\r\n    graph.getDrawingWidth(true) - shiftRight,\r\n    graph.getDrawingHeight(true) - shiftBottom,\r\n    graph.getDrawingHeight(true) - shiftBottom\r\n  );\r\n\r\n  graph.clipRect.setAttribute('y', shiftTop);\r\n  graph.clipRect.setAttribute('x', shiftLeft);\r\n  graph.clipRect.setAttribute(\r\n    'width',\r\n    graph.getDrawingWidth() - shiftLeft - shiftRight\r\n  );\r\n  graph.clipRect.setAttribute(\r\n    'height',\r\n    graph.getDrawingHeight() - shiftTop - shiftBottom\r\n  );\r\n\r\n  graph.rectEvent.setAttribute('y', shiftTop + graph.getPaddingTop());\r\n  graph.rectEvent.setAttribute('x', shiftLeft + graph.getPaddingLeft());\r\n\r\n  graph.rectEvent.setAttribute('width', graph.drawingSpaceWidth);\r\n  graph.rectEvent.setAttribute('height', graph.drawingSpaceHeight);\r\n\r\n  graph.drawingSpaceMinX = shiftLeft + graph.getPaddingLeft(); // + \"px\";\r\n  graph.drawingSpaceMinY = shiftTop + graph.getPaddingTop(); // + \"px\";\r\n  graph.drawingSpaceMaxX =\r\n    graph.getDrawingWidth() - shiftRight + graph.getPaddingLeft(); // + \"px\";\r\n  graph.drawingSpaceMaxY =\r\n    graph.getDrawingHeight() - shiftBottom + graph.getPaddingTop(); //  + \"px\";\r\n\r\n  // Apply to top and bottom\r\n  graph._applyToAxes(\r\n    function (axis, position) {\r\n      if (!axis.isShown()) {\r\n        return;\r\n      }\r\n\r\n      axis.drawLines();\r\n    },\r\n    false,\r\n    true,\r\n    true\r\n  );\r\n\r\n  /**\r\n    graph.shapeZoneRect.setAttribute('x', shift[1]);\r\n    graph.shapeZoneRect.setAttribute('y', shift[2]);\r\n    graph.shapeZoneRect.setAttribute('width', graph.getDrawingWidth() - shift[2] - shift[3]);\r\n    graph.shapeZoneRect.setAttribute('height', graph.getDrawingHeight() - shift[1] - shift[0]);\r\n  */\r\n  graph.shift = shift;\r\n  graph.redrawShapes(); // Not sure this should be automatic here. The user should be clever.\r\n}\r\n\r\nfunction _handleKey(graph, event, type) {\r\n  var self = graph;\r\n  if (graph.forcedPlugin) {\r\n    graph.activePlugin = graph.forcedPlugin;\r\n    graph._pluginExecute(graph.activePlugin, type, [graph, event]);\r\n    return;\r\n  }\r\n\r\n  checkKeyActions(graph, event, [graph, event], type);\r\n}\r\n\r\n// Similar to checkMouseActions\r\nfunction checkKeyActions(graph, e, parameters, methodName) {\r\n  var keyComb = graph.options.keyActions,\r\n    i,\r\n    l;\r\n\r\n  for (i = 0, l = keyComb.length; i < l; i++) {\r\n    if (keyComb[i].plugin) {\r\n      // Is it a plugin ?\r\n\r\n      if (\r\n        graph.forcedPlugin == keyComb[i].plugin ||\r\n        graph.isActionAllowed(e, keyComb[i])\r\n      ) {\r\n        if (keyComb[i].options) {\r\n          parameters.push(keyComb[i].options);\r\n        }\r\n\r\n        graph.activePlugin = keyComb[i].plugin; // Lease the mouse action to the current action\r\n        graph._pluginExecute(keyComb[i].plugin, methodName, parameters);\r\n\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n\r\n        return true;\r\n      }\r\n    } else if (keyComb[i].callback && graph.isActionAllowed(e, keyComb[i])) {\r\n      if (keyComb[i].options) {\r\n        parameters.push(keyComb[i].options);\r\n      }\r\n\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n\r\n      keyComb[i].callback.apply(graph, parameters);\r\n      return true;\r\n    }\r\n\r\n    if (\r\n      keyComb[i].removeSelectedShape &&\r\n      graph.isActionAllowed(e, keyComb[i])\r\n    ) {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n\r\n      graph.selectedShapes.map((shape) => {\r\n        shape.kill(keyComb[i].keepInDom);\r\n      });\r\n    }\r\n\r\n    /* else if ( keyComb[ i ].series ) {\r\n\r\n      var series;\r\n      if ( keyComb[ i ].series === 'all' ) {\r\n        series = graph.series;\r\n      }\r\n\r\n      if ( !Array.isArray( keyComb[ i ].series ) ) {\r\n        series = [ series ];\r\n      }\r\n\r\n      if ( keyComb[ i ].options ) {\r\n        parameters.push( keyComb[ i ].options );\r\n      }\r\n\r\n      for ( var j = 0; j < series.length; i++ ) {\r\n        graph._serieExecute( series[ i ], methodName, parameters );\r\n      }\r\n      return true;\r\n    }*/\r\n  }\r\n\r\n  return false;\r\n}\r\n\r\nfunction __createDOM() {\r\n  // Create SVG element, set the NS\r\n  this.dom = document.createElementNS(Graph.ns, 'svg');\r\n  this.dom.setAttributeNS(\r\n    'http://www.w3.org/2000/xmlns/',\r\n    'xmlns:xlink',\r\n    'http://www.w3.org/1999/xlink'\r\n  );\r\n  //this.dom.setAttributeNS(this.ns, 'xmlns:xlink', this.nsxml);\r\n  util.setAttributeTo(this.dom, {\r\n    xmlns: Graph.ns,\r\n    'font-family': this.options.fontFamily,\r\n    'font-size': this.options.fontSize\r\n  });\r\n\r\n  try {\r\n    util.setAttributeTo(this.dom, {\r\n      // eslint-disable-next-line no-undef\r\n      'data-jsgraph-version': __VERSION__\r\n    });\r\n  } catch (e) {\r\n    // ignore\r\n  }\r\n\r\n  this.defs = document.createElementNS(Graph.ns, 'defs');\r\n  this.dom.appendChild(this.defs);\r\n\r\n  this.groupEvent = document.createElementNS(Graph.ns, 'g');\r\n\r\n  this.rectEvent = document.createElementNS(Graph.ns, 'rect');\r\n  util.setAttributeTo(this.rectEvent, {\r\n    'pointer-events': 'fill',\r\n    fill: 'transparent'\r\n  });\r\n  this.groupEvent.appendChild(this.rectEvent);\r\n\r\n  this.dom.appendChild(this.groupEvent);\r\n\r\n  // Handling graph title\r\n  this.domTitle = document.createElementNS(Graph.ns, 'text');\r\n  this.setTitle(this.options.title);\r\n  if (this.options.titleFontSize) {\r\n    this.setTitleFontSize(this.options.titleFontSize);\r\n  }\r\n  if (this.options.titleFontColor) {\r\n    this.setTitleFontSize(this.options.titleFontColor);\r\n  }\r\n  if (this.options.titleFontFamily) {\r\n    this.setTitleFontFamily(this.options.titleFontFamily);\r\n  }\r\n\r\n  util.setAttributeTo(this.domTitle, {\r\n    'text-anchor': 'middle',\r\n    y: 20\r\n  });\r\n  this.groupEvent.appendChild(this.domTitle);\r\n  //\r\n\r\n  this.graphingZone = document.createElementNS(Graph.ns, 'g');\r\n  this.updateGraphingZone();\r\n\r\n  this.groupEvent.appendChild(this.graphingZone);\r\n\r\n  /*  this.shapeZoneRect = document.createElementNS(this.ns, 'rect');\r\n  //this.shapeZoneRect.setAttribute('pointer-events', 'fill');\r\n  this.shapeZoneRect.setAttribute('fill', 'transparent');\r\n  this.shapeZone.appendChild(this.shapeZoneRect);\r\n*/\r\n  this.axisGroup = document.createElementNS(Graph.ns, 'g');\r\n  this.graphingZone.appendChild(this.axisGroup);\r\n\r\n  this.groupGrids = document.createElementNS(Graph.ns, 'g');\r\n\r\n  // With the z stacking, this should probably be removed\r\n  //this.groupGrids.setAttribute( 'clip-path', 'url(#_clipplot' + this._creation + ')' );\r\n\r\n  this.groupPrimaryGrids = document.createElementNS(Graph.ns, 'g');\r\n  this.groupSecondaryGrids = document.createElementNS(Graph.ns, 'g');\r\n\r\n  this.axisGroup.appendChild(this.groupGrids);\r\n\r\n  this.groupGrids.appendChild(this.groupSecondaryGrids);\r\n  this.groupGrids.appendChild(this.groupPrimaryGrids);\r\n\r\n  this.plotGroup = document.createElementNS(Graph.ns, 'g');\r\n  this.graphingZone.appendChild(this.plotGroup);\r\n\r\n  // 5 September 2014. I encountered a case here shapeZone must be above plotGroup\r\n  /*this.shapeZone = document.createElementNS( this.ns, 'g' );\r\n  this.graphingZone.appendChild( this.shapeZone );\r\n*/\r\n\r\n  this.layers = [];\r\n\r\n  this._makeClosingLines();\r\n\r\n  this.clip = document.createElementNS(Graph.ns, 'clipPath');\r\n  this.clip.setAttribute('id', `_clipplot${this._creation}`);\r\n  this.defs.appendChild(this.clip);\r\n\r\n  this.clipRect = document.createElementNS(Graph.ns, 'rect');\r\n  this.clip.appendChild(this.clipRect);\r\n  this.clip.setAttribute('clipPathUnits', 'userSpaceOnUse');\r\n\r\n  this.markerArrow = document.createElementNS(this.ns, 'marker');\r\n  this.markerArrow.setAttribute('viewBox', '0 0 10 10');\r\n  this.markerArrow.setAttribute('id', `arrow${this._creation}`);\r\n  this.markerArrow.setAttribute('refX', '6');\r\n  this.markerArrow.setAttribute('refY', '5');\r\n  this.markerArrow.setAttribute('markerUnits', 'strokeWidth');\r\n  this.markerArrow.setAttribute('markerWidth', '8');\r\n  this.markerArrow.setAttribute('markerHeight', '6');\r\n  this.markerArrow.setAttribute('orient', 'auto');\r\n  //this.markerArrow.setAttribute('fill', 'context-stroke');\r\n  //this.markerArrow.setAttribute('stroke', 'context-stroke');\r\n\r\n  var pathArrow = document.createElementNS(Graph.ns, 'path');\r\n  pathArrow.setAttribute('d', 'M 0 0 L 10 5 L 0 10 z');\r\n  //pathArrow.setAttribute( 'fill', 'context-stroke' );\r\n  this.markerArrow.appendChild(pathArrow);\r\n\r\n  this.defs.appendChild(this.markerArrow);\r\n\r\n  // Horionzal split marker for axis\r\n  this.markerHorizontalSplit = document.createElementNS(Graph.ns, 'marker');\r\n  this.markerHorizontalSplit.setAttribute('viewBox', '0 0 6 8');\r\n  this.markerHorizontalSplit.setAttribute(\r\n    'id',\r\n    `horionzalsplit_${this.getId()}`\r\n  );\r\n  this.markerHorizontalSplit.setAttribute('refX', '3');\r\n  this.markerHorizontalSplit.setAttribute('refY', '4');\r\n  this.markerHorizontalSplit.setAttribute('markerUnits', 'strokeWidth');\r\n  this.markerHorizontalSplit.setAttribute('markerWidth', '6');\r\n  this.markerHorizontalSplit.setAttribute('markerHeight', '8');\r\n\r\n  var path = document.createElementNS(Graph.ns, 'line');\r\n  path.setAttribute('x1', '0');\r\n  path.setAttribute('y1', '8');\r\n\r\n  path.setAttribute('x2', '6');\r\n  path.setAttribute('y2', '0');\r\n\r\n  path.setAttribute('stroke', 'black');\r\n  this.markerHorizontalSplit.appendChild(path);\r\n\r\n  this.defs.appendChild(this.markerHorizontalSplit);\r\n\r\n  // Vertical split marker for axis\r\n  this.markerVerticalSplit = document.createElementNS(Graph.ns, 'marker');\r\n  this.markerVerticalSplit.setAttribute('viewBox', '0 0 8 6');\r\n  this.markerVerticalSplit.setAttribute('id', `verticalsplit_${this.getId()}`);\r\n  this.markerVerticalSplit.setAttribute('refX', '4');\r\n  this.markerVerticalSplit.setAttribute('refY', '3');\r\n  this.markerVerticalSplit.setAttribute('markerUnits', 'strokeWidth');\r\n  this.markerVerticalSplit.setAttribute('markerWidth', '8');\r\n  this.markerVerticalSplit.setAttribute('markerHeight', '6');\r\n\r\n  var path = document.createElementNS(Graph.ns, 'line');\r\n\r\n  path.setAttribute('x1', '0');\r\n  path.setAttribute('y1', '0');\r\n\r\n  path.setAttribute('x2', '8');\r\n  path.setAttribute('y2', '6');\r\n\r\n  path.setAttribute('stroke', 'black');\r\n  this.markerVerticalSplit.appendChild(path);\r\n  this.defs.appendChild(this.markerVerticalSplit);\r\n\r\n  this.vertLineArrow = document.createElementNS(Graph.ns, 'marker');\r\n  this.vertLineArrow.setAttribute('viewBox', '0 0 10 10');\r\n  this.vertLineArrow.setAttribute('id', `verticalline${this._creation}`);\r\n  this.vertLineArrow.setAttribute('refX', '0');\r\n  this.vertLineArrow.setAttribute('refY', '5');\r\n  this.vertLineArrow.setAttribute('markerUnits', 'strokeWidth');\r\n  this.vertLineArrow.setAttribute('markerWidth', '20');\r\n  this.vertLineArrow.setAttribute('markerHeight', '10');\r\n  this.vertLineArrow.setAttribute('orient', 'auto');\r\n  //this.vertLineArrow.setAttribute('fill', 'context-stroke');\r\n  //this.vertLineArrow.setAttribute('stroke', 'context-stroke');\r\n  this.vertLineArrow.setAttribute('stroke-width', '1px');\r\n\r\n  var pathVertLine = document.createElementNS(Graph.ns, 'path');\r\n  pathVertLine.setAttribute('d', 'M 0 -10 L 0 10');\r\n  pathVertLine.setAttribute('stroke', 'black');\r\n\r\n  this.vertLineArrow.appendChild(pathVertLine);\r\n\r\n  this.defs.appendChild(this.vertLineArrow);\r\n\r\n  // Removed with z stacking ?\r\n  //    this.plotGroup.setAttribute( 'clip-path', 'url(#_clipplot' + this._creation + ')' );\r\n\r\n  this.bypassHandleMouse = false;\r\n}\r\n\r\nfunction _registerEvents(graph) {\r\n  var self = graph;\r\n\r\n  if (!graph.wrapper) {\r\n    throw 'No wrapper exists. Cannot register the events.';\r\n  }\r\n\r\n  graph.dom.setAttribute('tabindex', 0);\r\n\r\n  graph.dom.addEventListener('keydown', (e) => {\r\n    _handleKey(graph, e, 'keydown');\r\n  });\r\n\r\n  graph.dom.addEventListener('keypress', (e) => {\r\n    _handleKey(graph, e, 'keypress');\r\n  });\r\n\r\n  graph.dom.addEventListener('keyup', (e) => {\r\n    _handleKey(graph, e, 'keyup');\r\n  });\r\n  // Not sure this has to be prevented\r\n\r\n  // August 17th, 2017: I extended the graph.groupEvent to the more general graph.dom to make the zoom plugin more\r\n  // intuitive. Let us see if it breaks another example...\r\n  graph.dom.addEventListener('mousemove', (e) => {\r\n    //e.preventDefault();\r\n    var coords = graph._getXY(e);\r\n    _handleMouseMove(graph, coords.x, coords.y, e);\r\n  });\r\n\r\n  graph.dom.addEventListener('mouseleave', (e) => {\r\n    _handleMouseLeave(graph);\r\n  });\r\n\r\n  graph.groupEvent.addEventListener('mousedown', (e) => {\r\n    graph.focus();\r\n\r\n    //   e.preventDefault();\r\n    if (e.which == 3 || e.ctrlKey) {\r\n      return;\r\n    }\r\n\r\n    var coords = graph._getXY(e);\r\n    _handleMouseDown(graph, coords.x, coords.y, e);\r\n  });\r\n\r\n  graph.dom.addEventListener('mouseup', (e) => {\r\n    graph.emit('mouseUp', e);\r\n    var coords = graph._getXY(e);\r\n\r\n    _handleMouseUp(graph, coords.x, coords.y, e);\r\n  });\r\n\r\n  graph.wrapper.addEventListener('mouseup', (e) => {\r\n    e.stopPropagation();\r\n  });\r\n\r\n  graph.dom.addEventListener('dblclick', (e) => {\r\n    graph.emit('dblClick', e);\r\n    var coords = graph._getXY(e);\r\n\r\n    _handleDblClick(graph, coords.x, coords.y, e);\r\n  });\r\n\r\n  graph.groupEvent.addEventListener('click', (e) => {\r\n    // Cancel right click or Command+Click\r\n    if (e.which == 3 || e.ctrlKey) {\r\n      return;\r\n    }\r\n\r\n    //   e.preventDefault();\r\n    var coords = graph._getXY(e);\r\n\r\n    if (!graph.prevent(false)) {\r\n      _handleClick(graph, coords.x, coords.y, e);\r\n    }\r\n\r\n    //}, 200 );\r\n  });\r\n\r\n  graph.groupEvent.addEventListener('mousewheel', (e) => {\r\n    var deltaY = e.wheelDeltaY || e.wheelDelta || -e.deltaY;\r\n    var coords = graph._getXY(e);\r\n    _handleMouseWheel(graph, deltaY, coords.x, coords.y, e);\r\n\r\n    return false;\r\n  });\r\n\r\n  graph.groupEvent.addEventListener('wheel', (e) => {\r\n    var coords = graph._getXY(e);\r\n    var deltaY = e.wheelDeltaY || e.wheelDelta || -e.deltaY;\r\n    _handleMouseWheel(graph, deltaY, coords.x, coords.y, e);\r\n\r\n    return false;\r\n  });\r\n}\r\n\r\nfunction _handleMouseDown(graph, x, y, e) {\r\n  var self = graph;\r\n\r\n  if (graph.forcedPlugin) {\r\n    graph.activePlugin = graph.forcedPlugin;\r\n    graph._pluginExecute(graph.activePlugin, 'onMouseDown', [graph, x, y, e]);\r\n    return;\r\n  }\r\n\r\n  if (graph.activePlugin) {\r\n    graph.activePlugin = false;\r\n  }\r\n\r\n  checkMouseActions(graph, e, [graph, x, y, e], 'onMouseDown');\r\n}\r\n\r\nfunction _handleMouseMove(graph, x, y, e) {\r\n  if (graph.bypassHandleMouse) {\r\n    graph.bypassHandleMouse.handleMouseMove(e);\r\n    return;\r\n  }\r\n\r\n  if (\r\n    graph.activePlugin &&\r\n    graph._pluginExecute(graph.activePlugin, 'onMouseMove', [graph, x, y, e])\r\n  ) {\r\n    return;\r\n  }\r\n\r\n  let xRef;\r\n  let xOverwritePx = x;\r\n\r\n  //\t\t\treturn;\r\n\r\n  graph._applyToAxes(\r\n    'handleMouseMove',\r\n    [x - graph.options.paddingLeft, e],\r\n    true,\r\n    false\r\n  );\r\n  graph._applyToAxes(\r\n    'handleMouseMove',\r\n    [y - graph.options.paddingTop, e],\r\n    false,\r\n    true\r\n  );\r\n\r\n  if (!graph.activePlugin) {\r\n    var index;\r\n\r\n    // Takes care of the tracking line\r\n    if (graph.options.trackingLine && graph.options.trackingLine.enable) {\r\n      if (\r\n        graph.options.trackingLine.mode == 'common' &&\r\n        graph.options.trackingLine.snapToSerie\r\n      ) {\r\n        var snapToSerie = graph.options.trackingLine.snapToSerie;\r\n        index = snapToSerie.handleMouseMove(false, true);\r\n\r\n        if (graph.trackingLineShape) {\r\n          if (!index) {\r\n            graph.trackingLineShape.hide();\r\n          } else {\r\n            graph.trackingLineShape.show();\r\n\r\n            graph.trackingLineShape.getPosition(0).x = index.xClosest;\r\n            graph.trackingLineShape.getPosition(1).x = index.xClosest;\r\n            graph.trackingLineShape.redraw();\r\n\r\n            xRef = index.xClosest; //\r\n            xOverwritePx =\r\n              snapToSerie.getXAxis().getPx(index.xClosest) +\r\n              graph.options.paddingLeft;\r\n          }\r\n        }\r\n\r\n        var series = graph.options.trackingLine.series;\r\n\r\n        /*\r\n        // Gets a default value\r\n        if ( !series ) {\r\n          series = graph.getSeries();map( function( serie ) {\r\n            return {\r\n              serie: serie,\r\n              withinPx: 20,\r\n              withinVal: -1\r\n            };\r\n          } );\r\n        }*/\r\n\r\n        if (!series) {\r\n          return;\r\n        }\r\n\r\n        if (!index) {\r\n          return;\r\n        }\r\n        graph._trackingLegend = _trackingLegendSerie(\r\n          graph,\r\n          series,\r\n          xOverwritePx,\r\n          y,\r\n          graph._trackingLegend,\r\n          graph.options.trackingLine.textMethod ?\r\n            graph.options.trackingLine.textMethod :\r\n            trackingLineDefaultTextMethod,\r\n          xRef\r\n        );\r\n      } else if (graph.options.trackingLine.mode == 'individual') {\r\n        // Series looping\r\n\r\n        const output = [];\r\n        graph.options.trackingLine.series.forEach((serie) => {\r\n          //        const index = serie.handleMouseMove( false, true );\r\n          //console.log( index );\r\n\r\n          if (!serie.options.tracking) {\r\n            return;\r\n          }\r\n\r\n          const closestPoint = serie.getClosestPointToXY(\r\n            serie.getXAxis().getMouseVal(),\r\n            serie.getYAxis().getMouseVal(),\r\n            serie.options.tracking.withinPx,\r\n            serie.options.tracking.withinPx,\r\n            serie.options.tracking.useAxis,\r\n            true\r\n          );\r\n\r\n          // When all legends are in common mode, let's make sure we remove the serie-specific legend\r\n          if (graph.options.trackingLine.legendType == 'common') {\r\n            serie._trackingLegend = _trackingLegendSerie(\r\n              graph,\r\n              [],\r\n              false,\r\n              false,\r\n              serie._trackingLegend\r\n            );\r\n          }\r\n\r\n          // What happens if there is no point ?\r\n          if (!closestPoint) {\r\n            if (serie.trackingShape) {\r\n              serie.trackingShape.hide();\r\n\r\n              if (graph.options.trackingLine.legendType == 'independent') {\r\n                serie._trackingLegend = _trackingLegendSerie(\r\n                  graph,\r\n                  [],\r\n                  false,\r\n                  false,\r\n                  serie._trackingLegend\r\n                );\r\n              }\r\n            }\r\n          } else {\r\n            // We found a point: happy !\r\n            if (serie.trackingShape) {\r\n              serie.trackingShape.show();\r\n\r\n              serie.trackingShape.setPosition({\r\n                x: closestPoint.xClosest,\r\n                y: closestPoint.yClosest\r\n              });\r\n\r\n              serie.trackingShape.redraw();\r\n\r\n              // If we want one legend per serie, then we got to show it\r\n              if (graph.options.trackingLine.legendType == 'independent') {\r\n                serie._trackingLegend = _trackingLegendSerie(\r\n                  graph,\r\n                  [{\r\n                    serie: serie,\r\n                    closestPoint: closestPoint\r\n                  }],\r\n                  x,\r\n                  y,\r\n                  serie._trackingLegend\r\n                );\r\n              }\r\n              serie.emit('track', e, closestPoint);\r\n            }\r\n          }\r\n\r\n          if (closestPoint)\r\n            output.push({\r\n              serie: serie,\r\n              closestPoint: closestPoint\r\n            });\r\n        });\r\n\r\n        if (graph.options.trackingLine.legendType == 'common') {\r\n          graph._trackingLegend = _trackingLegendSerie(\r\n            graph,\r\n            output,\r\n            x,\r\n            y,\r\n            graph._trackingLegend\r\n          );\r\n        } else {\r\n          graph._trackingLegend = _trackingLegendSerie(\r\n            graph,\r\n            [],\r\n            false,\r\n            false,\r\n            graph._trackingLegend\r\n          );\r\n        }\r\n      }\r\n    }\r\n  }\r\n  // End takes care of the tracking line\r\n\r\n  if (graph.options.mouseMoveData) {\r\n    const results = {};\r\n\r\n    for (let i = 0; i < graph.series.length; i++) {\r\n      let serie = graph.series[i];\r\n      if (!serie.options.tracking) {\r\n        console.warn('Tracking not enabled for this serie');\r\n        continue;\r\n      }\r\n      results[graph.series[i].getName()] = graph.series[i].getClosestPointToXY(\r\n        undefined,\r\n        undefined,\r\n        serie.options.tracking.withinPxX || 0,\r\n        serie.options.tracking.withinPxY || 0,\r\n        serie.options.tracking.useAxis,\r\n        true\r\n      );\r\n    }\r\n\r\n    if (typeof graph.options.mouseMoveData == 'function') {\r\n      graph.options.mouseMoveData.call(graph, e, results);\r\n    }\r\n\r\n    graph.emit('mouseMoveData', e, results);\r\n  }\r\n\r\n  checkMouseActions(graph, e, [graph, x, y, e], 'onMouseMove');\r\n}\r\n\r\nfunction checkMouseActions(graph, e, parameters, methodName) {\r\n  var keyComb = graph.options.mouseActions,\r\n    i,\r\n    l,\r\n    executed = false;\r\n\r\n  for (i = 0, l = keyComb.length; i < l; i++) {\r\n    if (keyComb[i].plugin) {\r\n      // Is it a plugin ?\r\n\r\n      if (\r\n        graph.forcedPlugin == keyComb[i].plugin ||\r\n        graph.isActionAllowed(e, keyComb[i])\r\n      ) {\r\n        if (keyComb[i].options) {\r\n          parameters.push(keyComb[i].options);\r\n        }\r\n\r\n        // Lease the mouse action to the current action\r\n        // 25.10.2017: Except for mousewheel. See #111\r\n        if (e.type !== 'wheel' && e.type !== 'mousewheel') {\r\n          graph.activePlugin = keyComb[i].plugin;\r\n        }\r\n\r\n        graph._pluginExecute(keyComb[i].plugin, methodName, parameters);\r\n        executed = true;\r\n        continue;\r\n      }\r\n    } else if (keyComb[i].callback && graph.isActionAllowed(e, keyComb[i])) {\r\n      if (keyComb[i].options) {\r\n        parameters.push(keyComb[i].options);\r\n      }\r\n\r\n      keyComb[i].callback.apply(graph, parameters);\r\n      executed = true;\r\n      continue;\r\n    } else if (keyComb[i].series) {\r\n      var series;\r\n      if (keyComb[i].series === 'all') {\r\n        series = graph.series;\r\n      }\r\n\r\n      if (!Array.isArray(keyComb[i].series)) {\r\n        series = [series];\r\n      }\r\n\r\n      if (keyComb[i].options) {\r\n        parameters.push(keyComb[i].options);\r\n      }\r\n\r\n      for (var j = 0; j < series.length; i++) {\r\n        graph._serieExecute(series[i], methodName, parameters);\r\n      }\r\n      executed = true;\r\n      continue;\r\n    }\r\n  }\r\n\r\n  return executed;\r\n}\r\n\r\n/**\r\n *\r\n * @returns {DOMElement} legend - The legend element, or the newly created one if it didn't exist\r\n */\r\nvar _trackingLegendSerie = function (\r\n  graph,\r\n  seriesOutput,\r\n  posXPx,\r\n  posYPx,\r\n  legend\r\n) {\r\n  const textMethod =\r\n    graph.options.trackingLine.textMethod || trackingLineDefaultTextMethod;\r\n\r\n  var justCreated = false;\r\n  if (!legend && graph.options.trackingLine.legend) {\r\n    justCreated = true;\r\n    legend = _makeTrackingLegend(graph);\r\n  }\r\n  if (!graph.options.trackingLine.legend) {\r\n    return;\r\n  }\r\n\r\n  if (seriesOutput.length == 0) {\r\n    legend.style.display = 'none';\r\n    return legend;\r\n  } else {\r\n    if (legend.style.display == 'none' || justCreated) {\r\n      forceTrackingLegendMode(graph, legend, posXPx, posYPx, true);\r\n    } else {\r\n      _trackingLegendMove(graph, legend, posXPx, posYPx);\r\n    }\r\n\r\n    legend.style.display = 'block';\r\n    var txt = textMethod(seriesOutput, undefined, posXPx, posYPx);\r\n\r\n    legend.innerHTML = txt;\r\n\r\n    //legend.innerHTML = textMethod( output, xValue, x, y );\r\n  }\r\n\r\n  return legend;\r\n};\r\n\r\nvar forceTrackingLegendMode = function (graph, legend, toX, toY, skip) {\r\n  var start = Date.now(),\r\n    h = legend.offsetHeight,\r\n    startX = parseInt(legend.style.marginLeft.replace('px', '') || 0, 10),\r\n    startY = parseInt(legend.style.marginTop.replace('px', '') || 0, 10);\r\n\r\n  toX =\r\n    toX > graph.getWidth() / 2 ?\r\n      toX - (toX % 10) - 20 - legend.offsetWidth :\r\n      toX - (toX % 10) + 30;\r\n  toY = toY - (toY % 10) + h / 2;\r\n\r\n  if (skip) {\r\n    legend.style.marginLeft = `${toX}px`;\r\n    legend.style.marginTop = `${toY}px`;\r\n    return;\r\n  }\r\n\r\n  function next() {\r\n    var progress = (Date.now() - start) / 200;\r\n    if (progress > 1) {\r\n      progress = 1;\r\n    }\r\n\r\n    legend.style.marginLeft = `${(toX - startX) * progress + startX}px`;\r\n    legend.style.marginTop = `${(toY - startY) * progress + startY}px`;\r\n\r\n    if (progress < 1) {\r\n      window.requestAnimationFrame(next);\r\n    }\r\n  }\r\n\r\n  window.requestAnimationFrame(next);\r\n};\r\n\r\nvar _trackingLegendMove = (...args) => {\r\n  util.debounce(forceTrackingLegendMode, 50)(...args);\r\n};\r\n\r\nfunction _makeTrackingLegend(graph) {\r\n  var group = document.createElement('div');\r\n  group.setAttribute('class', 'trackingLegend');\r\n  group.style.position = 'absolute';\r\n  group.style.borderRadius = '4px';\r\n  group.style.boxShadow = '1px 1px 3px 0px rgba(100,100,100,0.6)';\r\n  group.style.border = '2px solid #333333';\r\n  group.style.backgroundColor = 'rgba(255, 255, 255, 0.5 )';\r\n  group.style.pointerEvents = 'none';\r\n  group.style.paddingTop = '5px';\r\n  group.style.paddingBottom = '5px';\r\n  group.style.paddingLeft = '10px';\r\n  group.style.paddingRight = '10px';\r\n\r\n  graph.getWrapper().insertBefore(group, graph.getDom());\r\n\r\n  return group;\r\n}\r\n\r\nconst trackingLineDefaultTextMethod = (output) => {\r\n  let txt = '';\r\n  for (var i in output) {\r\n    if (!output[i].closestPoint) {\r\n      continue;\r\n    }\r\n\r\n    txt += `${output[i].serie.getName()}: ${output[i].serie\r\n      .getYAxis()\r\n      .valueToHtml(output[i].closestPoint.yClosest, undefined, undefined, 2)}\r\n      `;\r\n  }\r\n  return txt;\r\n};\r\n\r\nfunction _handleDblClick(graph, x, y, e) {\r\n  // var _x = x - graph.options.paddingLeft;\r\n  // var _y = y - graph.options.paddingTop;\r\n  //var pref = graph.options.dblclick;\r\n  checkMouseActions(graph, e, [x, y, e], 'onDblClick');\r\n  /*\r\n      if ( !pref || !pref.type ) {\r\n        return;\r\n      }\r\n\r\n      switch ( pref.type ) {\r\n\r\n        case 'plugin':\r\n\r\n          var plugin;\r\n\r\n          if ( ( plugin = graph.plugins[ pref.plugin ] ) ) {\r\n\r\n            plugin.onDblClick( graph, x, y, pref.options, e );\r\n          }\r\n\r\n          break;\r\n      }*/\r\n}\r\n\r\nfunction _handleMouseUp(graph, x, y, e) {\r\n  if (graph.bypassHandleMouse) {\r\n    graph.bypassHandleMouse.handleMouseUp(e);\r\n    graph.activePlugin = false;\r\n    return;\r\n  }\r\n\r\n  graph._pluginExecute(graph.activePlugin, 'onMouseUp', [graph, x, y, e]);\r\n  graph.activePlugin = false;\r\n}\r\n\r\nfunction _handleClick(graph, x, y, e) {\r\n  graph.emit('click', [graph, x, y, e]);\r\n  // Not on a shape\r\n  checkMouseActions(graph, e, [x, y, e], 'onClick');\r\n\r\n  if (\r\n    !e.target.jsGraphIsShape &&\r\n    !graph.prevent(false) &&\r\n    graph.options.shapesUnselectOnClick\r\n  ) {\r\n    graph.unselectShapes();\r\n  }\r\n}\r\n\r\nfunction _getAxis(graph, num, options, pos) {\r\n  var options = options || {};\r\n  var inst;\r\n\r\n  var _availableAxes = {\r\n    def: {\r\n      x: graph.getConstructor('graph.axis.x'),\r\n      y: graph.getConstructor('graph.axis.y')\r\n    },\r\n\r\n    time: {\r\n      x: graph.getConstructor('graph.axis.x.time')\r\n    },\r\n\r\n    bar: {\r\n      x: graph.getConstructor('graph.axis.x.bar')\r\n    }\r\n  };\r\n\r\n  switch (options.type) {\r\n    case 'time':\r\n      var axisInstance = _availableAxes.time;\r\n      break;\r\n\r\n    case 'bar':\r\n      var axisInstance = _availableAxes.bar;\r\n      break;\r\n\r\n    case 'broken':\r\n      var axisInstance = _availableAxes.broken;\r\n      break;\r\n\r\n    default:\r\n      var axisInstance = _availableAxes.def;\r\n      break;\r\n  }\r\n\r\n  switch (pos) {\r\n    case 'top':\r\n    case 'bottom':\r\n      inst = axisInstance.x;\r\n      break;\r\n\r\n    case 'left':\r\n    case 'right':\r\n      inst = axisInstance.y;\r\n      break;\r\n\r\n    default:\r\n      return;\r\n  }\r\n\r\n  num = num || 0;\r\n\r\n  if (typeof num == 'object') {\r\n    options = num;\r\n    num = 0;\r\n  }\r\n\r\n  if (!graph.axis[pos][num]) {\r\n    graph.axis[pos][num] = new inst(graph, pos, options);\r\n    graph.axis[pos][num].init(graph, options);\r\n  }\r\n\r\n  return graph.axis[pos][num];\r\n}\r\n\r\nfunction _closeLine(graph, mode, x1, x2, y1, y2) {\r\n  if (graph.options.close === false) {\r\n    return;\r\n  }\r\n\r\n  var l = 0;\r\n\r\n  graph.axis[mode].map(function (g) {\r\n    if (g.isDisplayed() && !g.floating) {\r\n      l++;\r\n    }\r\n  });\r\n\r\n  if ((graph.options.close === true || graph.options.close[mode]) && l == 0) {\r\n    graph.closingLines[mode].setAttribute('display', 'block');\r\n    graph.closingLines[mode].setAttribute('x1', x1);\r\n    graph.closingLines[mode].setAttribute('x2', x2);\r\n    graph.closingLines[mode].setAttribute('y1', y1);\r\n    graph.closingLines[mode].setAttribute('y2', y2);\r\n  } else {\r\n    graph.closingLines[mode].setAttribute('display', 'none');\r\n  }\r\n}\r\n\r\nfunction _handleMouseWheel(graph, delta, coordX, coordY, e) {\r\n  if (checkMouseActions(graph, e, [delta, e, coordX, coordY], 'onMouseWheel')) {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n  }\r\n}\r\n\r\nfunction _handleMouseLeave(graph) {\r\n  if (graph.options.handleMouseLeave) {\r\n    graph.options.handleMouseLeave.call(graph);\r\n  }\r\n}\r\n\r\nfunction haveAxesChanged(graph) {\r\n  var temp = graph._axesHaveChanged;\r\n  graph._axesHaveChanged = false;\r\n  return temp;\r\n}\r\n\r\nfunction hasSizeChanged(graph) {\r\n  var temp = graph._sizeChanged;\r\n  graph._sizeChanged = false;\r\n  return temp;\r\n}\r\n\r\n// Constants\r\nGraph.SERIE_LINE = Symbol();\r\nGraph.SERIE_SCATTER = Symbol();\r\nGraph.SERIE_CONTOUR = Symbol();\r\nGraph.SERIE_BAR = Symbol();\r\nGraph.SERIE_BOX = Symbol();\r\nGraph.SERIE_ZONE = Symbol();\r\nGraph.SERIE_LINE_COLORED = Symbol();\r\nGraph.SERIE_ZONE = Symbol();\r\nGraph.SERIE_DENSITYMAP = Symbol();\r\nGraph.SERIE_LINE_3D = Symbol();\r\nGraph.SERIE_ZONE_3D = Symbol();\r\n\r\nGraph.TICKS_OUTSIDE = Symbol();\r\nGraph.TICKS_INSIDE = Symbol();\r\nGraph.TICKS_CENTERED = Symbol();\r\n\r\nGraph.ns = 'http://www.w3.org/2000/svg';\r\nGraph.nsxlink = 'http://www.w3.org/1999/xlink';\r\n\r\nGraphJSON(Graph);\r\nEventMixin(Graph);\r\n\r\nexport default Graph;","import GraphPosition from './graph.position.js';\r\nimport * as util from './graph.util.js';\r\n\r\n/**\r\n * Default legend configuration\r\n * @name LegendOptionsDefault\r\n * @object\r\n * @static\r\n * @prop {Boolean} frame - <code>true</code> to display a frame around the legend\r\n * @prop {Number} frameWidth - The width of the frame stroke\r\n * @prop {String} frameColor - The stroke color of the frame\r\n * @prop {String} backgroundColor - The background color of the frame\r\n * @prop {Number} paddingLeft - The left padding\r\n * @prop {Number} paddingRight - The right padding\r\n * @prop {Number} paddingTop - The top padding\r\n * @prop {Number} paddingBottom - The bottom padding\r\n * @prop {Boolean} shapesToggleable - <code>true</code> to toggle the shapes linked to serie with its status (shown or hidden)\r\n * @prop {Boolean} isSerieHideable - <code>true</code> to allow series to be hidden through the legend\r\n * @prop {Boolean} isSerieSelectable - <code>true</code> to allow series to be selected through the legend\r\n */\r\nvar legendDefaults = {\r\n  backgroundColor: 'rgba(255, 255, 255, 0.8)',\r\n  frame: true,\r\n  frameWidth: 1,\r\n  frameColor: 'black',\r\n  paddingTop: 10,\r\n  paddingLeft: 10,\r\n  paddingBottom: 10,\r\n  paddingRight: 10,\r\n  color: 'black',\r\n  frameRounding: 0,\r\n\r\n  movable: false,\r\n\r\n  shapesToggleable: true,\r\n  isSerieHideable: true,\r\n  isSerieSelectable: true\r\n};\r\n\r\n/**\r\n * Legend constructor. You should not call this method directly, but rather use {@link graph.makeLegend}\r\n * @example var legend = graph.makeLegend( {  backgroundColor: 'rgba(255, 255, 255, 0.8)',\r\n * frame: true,\r\n * frameWidth: 1,\r\n * frameColor: 'black',\r\n * paddingTop: 10,\r\n * paddingLeft: 10,\r\n * paddingBottom: 10,\r\n * paddingRight: 10,\r\n * frameRounding: 3,\r\n *\r\n * movable: false,\r\n *\r\n * shapesToggleable: true,\r\n * isSerieHideable: true,\r\n * isSerieSelectable: true\r\n * } );\r\n */\r\nclass Legend {\r\n  constructor( graph, options ) {\r\n    this.options = util.extend( {}, legendDefaults, options );\r\n\r\n    this.graph = graph;\r\n    this.svg = document.createElementNS( this.graph.ns, 'g' );\r\n    this.subG = document.createElementNS( this.graph.ns, 'g' );\r\n\r\n    this.groups = [];\r\n    this.rect = document.createElementNS( this.graph.ns, 'rect' );\r\n    this.rectBottom = document.createElementNS( this.graph.ns, 'rect' );\r\n\r\n    this.rect.setAttribute( 'x', 0 );\r\n    this.rect.setAttribute( 'y', 0 );\r\n\r\n    this.rectBottom.setAttribute( 'x', 0 );\r\n    this.rectBottom.setAttribute( 'y', 0 );\r\n\r\n    this.series = false;\r\n\r\n    this.svg.setAttribute( 'display', 'none' );\r\n    this.pos = {\r\n      x: undefined,\r\n      y: undefined,\r\n      transformX: 0,\r\n      transformY: 0\r\n    };\r\n\r\n    this.setEvents();\r\n\r\n    this.eyeId = util.guid();\r\n    this.eyeCrossedId = util.guid();\r\n\r\n    var eyeClosed = util.SVGParser(\r\n      `<svg xmlns=\"http://www.w3.org/2000/svg\"><symbol id=\"${this.eyeCrossedId\r\n      }\" viewBox=\"0 -256 1850 1850\"><rect pointer-events=\"fill\" fill=\"transparent\" x=\"-256\" y=\"0\" width=\"2106\" height=\"1850\" /><g transform=\"matrix(1,0,0,-1,30.372881,1214.339)\"><path d=\"m 555,201 78,141 q -87,63 -136,159 -49,96 -49,203 0,121 61,225 Q 280,812 128,576 295,318 555,201 z m 389,759 q 0,20 -14,34 -14,14 -34,14 -125,0 -214.5,-89.5 Q 592,829 592,704 q 0,-20 14,-34 14,-14 34,-14 20,0 34,14 14,14 14,34 0,86 61,147 61,61 147,61 20,0 34,14 14,14 14,34 z m 363,191 q 0,-7 -1,-9 Q 1201,954 991,576 781,198 675,9 l -49,-89 q -10,-16 -28,-16 -12,0 -134,70 -16,10 -16,28 0,12 44,87 Q 349,154 228.5,262 108,370 20,507 0,538 0,576 q 0,38 20,69 153,235 380,371 227,136 496,136 89,0 180,-17 l 54,97 q 10,16 28,16 5,0 18,-6 13,-6 31,-15.5 18,-9.5 33,-18.5 15,-9 31.5,-18.5 16.5,-9.5 19.5,-11.5 16,-10 16,-27 z m 37,-447 Q 1344,565 1265,450.5 1186,336 1056,286 l 280,502 q 8,-45 8,-84 z m 448,-128 q 0,-35 -20,-69 Q 1733,443 1663,362 1513,190 1315.5,95 1118,0 896,0 l 74,132 q 212,18 392.5,137 180.5,119 301.5,307 -115,179 -282,294 l 63,112 q 95,-64 182.5,-153 87.5,-89 144.5,-184 20,-34 20,-69 z\" fill=\"#c0c0c0\"></path></g></symbol></svg>`\r\n    );\r\n    //  var eyeClosed = util.SVGParser('<svg xmlns=\"http://www.w3.org/2000/svg\"><symbol id=\"' + this.eyeId + '\" viewBox=\"0 0 100 100\"><rect fill=\"black\" x=\"0\" y=\"0\" width=\"100\" height=\"100\" /></symbol></svg>');\r\n\r\n    /* var eyeClosed = document.createElementNS( this.graph.ns, \"symbol\");\r\n      eyeClosed.setAttribute('id', this.eyeId );\r\n      eyeClosed.setAttribute(\"viewBox\", '0 0 100 100');\r\n\r\n      var rect = document.createElementNS( this.graph.ns, \"rect\" );\r\n      rect.setAttribute('width', 100 );\r\n      rect.setAttribute('height', 100 );\r\n      rect.setAttribute('x', 0 );\r\n      rect.setAttribute('y', 0 );\r\n      rect.setAttribute('fill', 'black');\r\n      eyeClosed.appendChild( rect );\r\n  */\r\n    var eye = util.SVGParser(\r\n      `<svg xmlns=\"http://www.w3.org/2000/svg\"><symbol id=\"${this.eyeId\r\n      }\" viewBox=\"0 -256 1850 1850\"><rect pointer-events=\"fill\" x=\"-256\" y=\"0\" fill=\"transparent\" width=\"2106\" height=\"1850\" /><g transform=\"matrix(1,0,0,-1,30.372881,1259.8983)\"><path d=\"m 1664,576 q -152,236 -381,353 61,-104 61,-225 0,-185 -131.5,-316.5 Q 1081,256 896,256 711,256 579.5,387.5 448,519 448,704 448,825 509,929 280,812 128,576 261,371 461.5,249.5 662,128 896,128 1130,128 1330.5,249.5 1531,371 1664,576 z M 944,960 q 0,20 -14,34 -14,14 -34,14 -125,0 -214.5,-89.5 Q 592,829 592,704 q 0,-20 14,-34 14,-14 34,-14 20,0 34,14 14,14 14,34 0,86 61,147 61,61 147,61 20,0 34,14 14,14 14,34 z m 848,-384 q 0,-34 -20,-69 Q 1632,277 1395.5,138.5 1159,0 896,0 633,0 396.5,139 160,278 20,507 0,542 0,576 q 0,34 20,69 140,229 376.5,368 236.5,139 499.5,139 263,0 499.5,-139 236.5,-139 376.5,-368 20,-35 20,-69 z\" fill=\"#444444\" /></g></symbol></svg>`\r\n    );\r\n\r\n    this.svg.appendChild( document.adoptNode( eye.documentElement.firstChild ) );\r\n    this.svg.appendChild(\r\n      document.adoptNode( eyeClosed.documentElement.firstChild )\r\n    );\r\n\r\n    this.svg.appendChild( this.subG );\r\n\r\n    this.applyStyle();\r\n  }\r\n\r\n  /**\r\n   * Sets the position of the legend\r\n   * @param {Position} position - the position to set the legend to versus the graph main axes ({@link Graph#getXAxis} and {@link Graph#getYAxis})\r\n   * @param {String} alignToX - \"right\" or \"left\". References the legend right or left boundary using the position parameter\r\n   * @param {String} alignToY - \"top\" or \"bottom\". References the legend top or bottom boundary using the position parameter\r\n   * @example legend.setPosition( { x: 'max', y: '0px' }, 'right', 'top' ); // The rightmost side of the legend will at the maximum value of the axis, and will be positioned at the top\r\n   */\r\n  setPosition( position, alignToX, alignToY ) {\r\n    if ( !position ) {\r\n      return;\r\n    }\r\n\r\n    this.position = position;\r\n    this.alignToX = alignToX || 'left';\r\n    this.alignToY = alignToY || 'top';\r\n  }\r\n\r\n  setDraggable( bln ) {\r\n    this.options.movable = bln;\r\n  }\r\n\r\n  setAutoPosition( position ) {\r\n    if (\r\n      [ 'bottom', 'left', 'top', 'right' ].indexOf(\r\n        ( position = position.toLowerCase() )\r\n      ) > -1\r\n    ) {\r\n      this.autoPosition = position;\r\n      return this;\r\n    }\r\n\r\n    this.requireDelayedUpdate();\r\n    this.autoPosition = false;\r\n  }\r\n\r\n  autoPosition() {\r\n    return this.setAutoPosition( ...arguments );\r\n  }\r\n\r\n  kill() {\r\n\r\n    if ( !this.autoPosition ) {\r\n      this.graph.graphingZone.removeChild( this.getDom() );\r\n    } else {\r\n      this.graph.getDom().removeChild( this.getDom() );\r\n    }\r\n  }\r\n\r\n  buildLegendBox() {\r\n    var series = this.series || this.graph.getSeries(),\r\n      posX = 0,\r\n      posY = this.options.paddingTop;\r\n\r\n    if ( !this.autoPosition ) {\r\n      this.graph.graphingZone.appendChild( this.getDom() );\r\n    } else {\r\n      this.graph.getDom().appendChild( this.getDom() );\r\n    }\r\n\r\n    for ( var i = 0, l = series.length; i < l; i++ ) {\r\n      if ( series[ i ].excludedFromLegend && !this.series ) {\r\n        continue;\r\n      }\r\n\r\n      if ( this.autoPosition == 'bottom' || this.autoPosition == 'top' ) {\r\n        var bbox = getBBox( this.groups[ i ] );\r\n\r\n        if (\r\n          posX + bbox.width >\r\n          this.graph.getDrawingWidth() - this.options.paddingRight\r\n        ) {\r\n          posY += 16;\r\n          posX = 0;\r\n        }\r\n      }\r\n\r\n      this.groups[ i ].setAttribute( 'transform', `translate( ${posX}, ${posY})` );\r\n\r\n      if ( this.autoPosition == 'bottom' || this.autoPosition == 'top' ) {\r\n        posX += bbox.width + 10;\r\n        posY += 0;\r\n      } else {\r\n        posX = 0;\r\n        posY += 16;\r\n      }\r\n    }\r\n\r\n    var bbox = getBBox( this.subG );\r\n\r\n    /* Independant on box position */\r\n    this.width =\r\n      bbox.width + this.options.paddingRight + this.options.paddingLeft;\r\n    this.height =\r\n      bbox.height + this.options.paddingBottom + this.options.paddingTop;\r\n\r\n    this.rect.setAttribute( 'width', this.width );\r\n    this.rect.setAttribute( 'height', this.height );\r\n    this.rect.setAttribute( 'fill', 'none' );\r\n    this.rect.setAttribute( 'pointer-events', 'fill' );\r\n\r\n    this.rect.setAttribute( 'display', 'none' );\r\n\r\n    if ( this.options.movable ) {\r\n      this.rectBottom.style.cursor = 'move';\r\n    }\r\n\r\n    this.rectBottom.setAttribute( 'width', this.width );\r\n    this.rectBottom.setAttribute( 'height', this.height );\r\n\r\n    this.rectBottom.setAttribute( 'x', bbox.x - this.options.paddingLeft );\r\n    this.rectBottom.setAttribute( 'y', bbox.y - this.options.paddingTop );\r\n    /* End independant on box position */\r\n\r\n    this.position = this.position || {};\r\n\r\n    switch ( this.autoPosition ) {\r\n      case 'bottom':\r\n        this.position.y = `${this.graph.getHeight()}px`;\r\n        // Try to center with respect to the drawing space, not the full graph. It's useful when the graph is fairly asymmetric (i.e. multiple axes on 1 side)\r\n        this.position.x = `${(this.graph.drawingSpaceWidth - this.width) / 2 +\r\n          this.graph.drawingSpaceMinX}px`;\r\n        this.alignToY = 'bottom';\r\n        this.alignToX = false;\r\n        break;\r\n\r\n      case 'left':\r\n        this.position.x = '6px';\r\n        this.position.y = `${(this.graph.getHeight() - this.height) / 2}px`;\r\n        this.alignToX = 'left';\r\n        this.alignToY = false;\r\n        break;\r\n\r\n      case 'right':\r\n        this.position.x = `${this.graph.getWidth()}px`;\r\n        this.position.y = `${(this.graph.getHeight() - this.height) / 2}px`;\r\n        this.alignToX = 'right';\r\n        this.alignToY = false;\r\n        break;\r\n\r\n      case 'top':\r\n        this.position.x = `${(this.graph.drawingSpaceWidth - this.width) / 2 +\r\n          this.graph.drawingSpaceMinX}px`;\r\n        this.position.y = '10px';\r\n        this.alignToY = 'top';\r\n        this.alignToX = false;\r\n        break;\r\n\r\n      default:\r\n        console.error( 'Position is not supported' );\r\n        return;\r\n\r\n    }\r\n    if ( this.autoPosition ) {\r\n      let redrawGraph;\r\n      switch ( this.autoPosition ) {\r\n        case 'bottom':\r\n          this.graph.options.paddingBottom = this.height + 10;\r\n\r\n          redrawGraph = this.height !== this.previousHeight;\r\n          break;\r\n\r\n        case 'top':\r\n          this.graph.options.paddingTop = this.height + 14;\r\n\r\n          redrawGraph = this.height !== this.previousHeight;\r\n          break;\r\n\r\n        case 'left':\r\n          this.graph.options.paddingLeft = this.width + 5;\r\n\r\n          redrawGraph = this.width !== this.previousWidth;\r\n          break;\r\n\r\n        case 'right':\r\n          this.graph.options.paddingRight = this.width + 10;\r\n\r\n          redrawGraph = this.width !== this.previousWidth;\r\n          break;\r\n      }\r\n\r\n      if ( redrawGraph ) {\r\n        this.graph.draw( true );\r\n        this.previousHeight = this.height;\r\n        this.previousWidth = this.width;\r\n      }\r\n    }\r\n\r\n    this.bbox = bbox;\r\n  }\r\n\r\n  calculatePosition() {\r\n    var pos = GraphPosition.check( this.position );\r\n    let poscoords = pos.compute(\r\n      this.graph,\r\n      this.graph.getXAxis(),\r\n      this.graph.getYAxis()\r\n    );\r\n\r\n    if ( !poscoords ) {\r\n      return;\r\n    }\r\n\r\n    // I don't think this is correct... y=max already is axis-relative.\r\n    if ( pos.y == 'max' ) {\r\n      //    poscoords.y += this.graph.getPaddingTop();\r\n    }\r\n\r\n    if ( pos.x == 'max' ) {\r\n      // todo\r\n    }\r\n\r\n    // This was making the autoPosition fail. But I can totally see how this will cause problems in other case scenarios...\r\n    // poscoords.y += this.graph.getPaddingTop();\r\n    // poscoords.x += this.graph.getPaddingLeft();\r\n\r\n    if ( this.alignToX == 'right' ) {\r\n      poscoords.x -= this.width;\r\n      //poscoords.x -= this.bbox.x;\r\n    } else {\r\n      //poscoords.x -= this.bbox.x;\r\n    }\r\n\r\n    if ( this.alignToY == 'bottom' ) {\r\n      poscoords.y -= this.height;\r\n      //    poscoords.y -= this.bbox.y;\r\n    } else {\r\n      //     poscoords.y -= this.bbox.y;\r\n    }\r\n\r\n    this.pos.transformX = poscoords.x;\r\n    this.pos.transformY = poscoords.y;\r\n\r\n    this._setPosition();\r\n  }\r\n\r\n  /**\r\n   * Updates the legend position and content\r\n   */\r\n  update( onlyIfRequired ) {\r\n    if (\r\n      this.graph.isDelayedUpdate() ||\r\n      ( !this._requiredUpdate && onlyIfRequired )\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    this._requiredUpdate = false;\r\n\r\n    var self = this;\r\n\r\n    this.applyStyle();\r\n\r\n    while ( this.subG.hasChildNodes() ) {\r\n      this.subG.removeChild( this.subG.lastChild );\r\n    }\r\n\r\n    this.svg.insertBefore( this.rectBottom, this.svg.firstChild );\r\n\r\n    var series = this.series || this.graph.getSeries(),\r\n      line,\r\n      text,\r\n      g;\r\n\r\n    if ( series.length > 0 ) {\r\n      this.svg.setAttribute( 'display', 'block' );\r\n    } else {\r\n      return;\r\n    }\r\n\r\n    if ( this.autoPosition == 'bottom' || this.autoPosition == 'top' ) {\r\n      var fullWidth = this.graph.getDrawingWidth();\r\n    }\r\n\r\n    var posX, posY;\r\n\r\n    for ( let i = 0, l = series.length; i < l; i++ ) {\r\n      if ( series[ i ].excludedFromLegend && !this.series ) {\r\n        continue;\r\n      }\r\n\r\n      var g,\r\n        line,\r\n        text,\r\n        xPadding = 0;\r\n\r\n      const j = i;\r\n\r\n      if ( this.autoPosition == 'bottom' || this.autoPosition == 'top' ) {\r\n        var fullWidth = this.graph.getDrawingWidth();\r\n      }\r\n\r\n      g = document.createElementNS( self.graph.ns, 'g' );\r\n      var rect = document.createElementNS( self.graph.ns, 'rect' );\r\n\r\n      self.subG.appendChild( g );\r\n\r\n      g.appendChild( rect );\r\n\r\n      series[ i ].getSymbolForLegend();\r\n\r\n      var line = series[ i ]._getSymbolForLegendContainer();\r\n      var marker = series[ i ].getMarkerForLegend();\r\n      var text = series[ i ].getTextForLegend();\r\n\r\n      var dx = 35;\r\n      const eyeUse = document.createElementNS( self.graph.ns, 'use' );\r\n      if ( this.isHideable() ) {\r\n        dx += 20;\r\n\r\n        eyeUse.setAttributeNS(\r\n          'http://www.w3.org/1999/xlink',\r\n          'xlink:href',\r\n          `#${series[i].isShown() ? this.eyeId : this.eyeCrossedId}`\r\n        );\r\n        eyeUse.setAttribute( 'width', 15 );\r\n        eyeUse.setAttribute( 'height', 15 );\r\n        eyeUse.setAttribute( 'x', 35 );\r\n        eyeUse.setAttribute( 'y', -8 );\r\n\r\n        eyeUse.addEventListener( 'click', function( e ) {\r\n          e.stopPropagation();\r\n\r\n          var id;\r\n          if ( series[ j ].isShown() ) {\r\n            series[ j ].hide( self.options.hideShapesOnHideSerie );\r\n            id = self.eyeCrossedId;\r\n          } else {\r\n            series[ j ].show( self.options.hideShapesOnHideSerie );\r\n            id = self.eyeId;\r\n          }\r\n\r\n          eyeUse.setAttributeNS(\r\n            'http://www.w3.org/1999/xlink',\r\n            'xlink:href',\r\n            `#${id}`\r\n          );\r\n        } );\r\n      }\r\n\r\n      text.setAttribute( 'transform', `translate(${dx}, 3)` );\r\n      text.setAttribute( 'fill', this.options.color );\r\n\r\n      if ( line ) {\r\n        g.appendChild( line );\r\n      }\r\n\r\n      if ( series[ i ].getType() == 'scatter' ) {\r\n        line.setAttribute( 'transform', 'translate( 20, 0 )' );\r\n      }\r\n\r\n      if ( marker ) {\r\n        g.appendChild( marker );\r\n      }\r\n\r\n      if ( eyeUse ) {\r\n        g.appendChild( eyeUse );\r\n      }\r\n\r\n      g.appendChild( text );\r\n\r\n      var bbox = getBBox( g );\r\n\r\n      rect.setAttribute( 'x', bbox.x );\r\n      rect.setAttribute( 'y', bbox.y );\r\n      rect.setAttribute( 'width', bbox.width );\r\n      rect.setAttribute( 'height', bbox.height );\r\n      rect.setAttribute( 'fill', 'none' );\r\n      rect.setAttribute( 'pointer-events', 'fill' );\r\n\r\n      self.groups[ i ] = g;\r\n\r\n      g.addEventListener( 'click', function( e ) {\r\n        var serie = series[ i ];\r\n\r\n        if ( !serie.isShown() ) {\r\n          return;\r\n        }\r\n        if ( self.isSelectable() && !serie.isSelected() ) {\r\n          self.graph.selectSerie( serie );\r\n        } else {\r\n          self.graph.unselectSerie( serie );\r\n        }\r\n\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n      } );\r\n    }\r\n\r\n    this.svg.appendChild( this.rect );\r\n    this.buildLegendBox();\r\n    this.calculatePosition();\r\n  }\r\n\r\n  /**\r\n   * @return {Boolean} true or false depending if the series can be hidden or not\r\n   */\r\n  isHideable() {\r\n    return this.options.isSerieHideable;\r\n  }\r\n\r\n  notHideable() {\r\n    this.options.isSerieHideable = false;\r\n    return this;\r\n  }\r\n\r\n  hideable() {\r\n    this.options.isSerieHideable = true;\r\n    return this;\r\n  }\r\n\r\n  set seriesHideable( hideable ) {\r\n    this.options.isSerieHideable = !!hideable;\r\n  }\r\n\r\n  /**\r\n   *  @type {Boolean}\r\n   */\r\n  get seriesHideable() {\r\n    return this.options.isSerieHideable;\r\n  }\r\n\r\n  /**\r\n   * @return {Boolean} true or false depending if the series can be selected or not\r\n   */\r\n  isSelectable() {\r\n    return this.options.isSerieSelectable;\r\n  }\r\n\r\n  /**\r\n   * @return {Boolean} true or false depending if the series can be t or not\r\n   */\r\n  isToggleShapes() {\r\n    return this.options.shapesToggleable;\r\n  }\r\n\r\n  /**\r\n   * @return {SVGGroupElement} The SVG group element wrapping the legend\r\n   */\r\n  getDom() {\r\n    return this.svg;\r\n  }\r\n\r\n  setEvents() {\r\n    var self = this;\r\n    var pos = this.pos;\r\n\r\n    var mousedown = function( e ) {\r\n      e.stopPropagation();\r\n      if ( self.options.movable ) {\r\n        pos.x = e.clientX;\r\n        pos.y = e.clientY;\r\n\r\n        e.preventDefault();\r\n        self.mousedown = true;\r\n        self.graph.elementMoving( self );\r\n\r\n        self.rect.setAttribute( 'display', 'block' );\r\n      }\r\n    };\r\n\r\n    var mousemove = function( e ) {\r\n      self.handleMouseMove( e );\r\n    };\r\n\r\n    this.svg.addEventListener( 'mousedown', mousedown );\r\n    this.svg.addEventListener( 'click', function( e ) {\r\n      e.stopPropagation();\r\n    } );\r\n    this.svg.addEventListener( 'dblclick', function( e ) {\r\n      e.stopPropagation();\r\n    } );\r\n    this.svg.addEventListener( 'mousemove', mousemove );\r\n    //this.rect.addEventListener( 'mousemove', mousemove );\r\n  }\r\n\r\n  handleMouseUp( e ) {\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n    this.mousedown = false;\r\n    this.rect.setAttribute( 'display', 'none' );\r\n    this.graph.elementMoving( false );\r\n  }\r\n\r\n  handleMouseMove( e ) {\r\n    if ( !this.mousedown ) {\r\n      return;\r\n    }\r\n\r\n    var pos = this.pos;\r\n\r\n    var deltaX = e.clientX - pos.x;\r\n    var deltaY = e.clientY - pos.y;\r\n\r\n    pos.transformX += deltaX;\r\n    pos.transformY += deltaY;\r\n\r\n    pos.x = e.clientX;\r\n    pos.y = e.clientY;\r\n\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n\r\n    this._setPosition();\r\n  }\r\n\r\n  _setPosition() {\r\n    var pos = this.pos;\r\n    if (\r\n      !isNaN( pos.transformX ) &&\r\n      !isNaN( pos.transformY ) &&\r\n      pos.transformX !== false &&\r\n      pos.transformY !== false\r\n    ) {\r\n      this.svg.setAttribute(\r\n        'transform',\r\n        `translate(${pos.transformX}, ${pos.transformY})`\r\n      );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Re-applies the legend style\r\n   */\r\n  applyStyle() {\r\n    if ( this.options.frame ) {\r\n      this.rectBottom.setAttribute( 'stroke', this.options.frameColor );\r\n      this.rectBottom.setAttribute(\r\n        'stroke-width',\r\n        `${this.options.frameWidth}px`\r\n      );\r\n      this.rectBottom.setAttribute( 'rx', this.options.frameRounding );\r\n      this.rectBottom.setAttribute( 'ry', this.options.frameRounding );\r\n    }\r\n\r\n    this.rectBottom.setAttribute( 'fill', this.options.backgroundColor );\r\n  }\r\n\r\n  /**\r\n   * Re-applies the legend style\r\n   * @param {...(GraphSerie|GraphSerie[])} a serie or an array of series\r\n   */\r\n  fixSeries() {\r\n    var series = [];\r\n\r\n    if ( arguments[ 0 ] === false ) {\r\n      this.series = false;\r\n      this.update();\r\n      return;\r\n    }\r\n\r\n    for ( var i = 0, l = arguments.length; i < l; i++ ) {\r\n      if ( Array.isArray( arguments[ i ] ) ) {\r\n        series = series.concat( arguments[ i ] );\r\n      } else {\r\n        series.push( arguments[ i ] );\r\n      }\r\n    }\r\n\r\n    this.update();\r\n    this.series = series;\r\n  }\r\n\r\n  fixSeriesAdd( serie ) {\r\n    this.series = this.series || [];\r\n    this.series.push( serie );\r\n  }\r\n\r\n  requireDelayedUpdate() {\r\n    this._requiredUpdate = true;\r\n  }\r\n}\r\n\r\nfunction getBBox( svgElement ) {\r\n  // Firefox throws when trying to call getBBox() on elements\r\n  // that are not yet rendered.\r\n  try {\r\n    return svgElement.getBBox();\r\n  } catch ( e ) {\r\n    return {\r\n      height: 0,\r\n      width: 0,\r\n      x: 0,\r\n      y: 0\r\n    };\r\n  }\r\n}\r\n\r\nexport default Legend;","import {\n  EventMixin\n} from './graph.mixin.event.js';\n\nlet ExtendedEventMixin = ( manglingName ) => {\n\n  return {\n    __proto__: EventMixin,\n\n    trigger( eventName, ...args ) {\n\n      super.trigger( eventName, ...args );\n\n      if ( this.graph ) {\n        this.graph.trigger( manglingName + \".\" + eventName, ...args );\n      }\n    },\n\n    emit( eventName, ...args ) {\n      this.trigger( eventName, ...args );\n    }\n  }\n};\n\nexport default ( Obj, manglingName = \"__\" ) => {\n  Object.assign( Obj.prototype, ExtendedEventMixin( manglingName ) );\n};","import Graph from './graph.core.js';\r\nimport * as util from './graph.util.js';\r\nimport EventMixin from './mixins/graph.mixin.event_graph.js';\r\n\r\n/**\r\n * Default graph parameters\r\n * @name AxisOptionsDefault\r\n * @object\r\n * @static\r\n * @memberof Axis\r\n * @prop {Boolean} display - Whether to display or not the axis\r\n * @prop {Boolean} flipped - Flips the axis (maximum and minimum will be inverted)\r\n * @prop {Numner} axisDataSpacing.min - The spacing of the at the bottom of the axis. The value is multiplied by the (max - min) values given by the series (0.1 means 10% of the serie width / height).\r\n * @prop {Number} axisDataSpacing.max - The spacing of the at the top of the axis. The value is multiplied by the (max - min) values given by the series (0.1 means 10% of the serie width / height).\r\n * @prop {String} unitModification - Used to change the units of the axis in a defined way. Currently, \"time\" and \"time:min.sec\" are supported. They will display the value in days, hours, minutes and seconds and the data should be expressed in seconds.\r\n * @prop {Boolean} primaryGrid - Whether or not to display the primary grid (on the main ticks)\r\n * @prop {Boolean} secondaryGrid - Whether or not to display the secondary grid (on the secondary ticks)\r\n * @prop {Number} tickPosition - Sets the position of the ticks with regards to the axis ( 1 = inside, 2 = centered, 3 = outside ).\r\n * @prop {Number} nbTicksPrimary - The number of primary ticks to use (approximately)\r\n * @prop {Number} nbTicksSecondary - The number of secondary ticks to use (approximately)\r\n * @prop {Number} ticklabelratio - Scaling factor on the labels under each primary ticks\r\n * @prop {Number} exponentialFactor - Scales the labels under each primary ticks by 10^(exponentialFactor)\r\n * @prop {Number} exponentialLabelFactor - Scales the axis label by 10^(exponentialFactor)\r\n * @prop {Boolean} logScale - Display the axis in log scale (base 10)\r\n * @prop {(Number|Boolean)} forcedMin - Use a number to force the minimum value of the axis (becomes independant of its series)\r\n * @prop {(Number|Boolean)} forcedMax - Use a number to force the maximum value of the axis (becomes independant of its series)\r\n */\r\nconst defaults = {\r\n\r\n  name: undefined,\r\n\r\n  lineAt: false,\r\n  display: true,\r\n  flipped: false,\r\n  axisDataSpacing: {\r\n    min: 0.1,\r\n    max: 0.1\r\n  },\r\n  unitModification: false,\r\n  primaryGrid: true,\r\n  secondaryGrid: true,\r\n\r\n  primaryGridWidth: 1,\r\n  primaryGridColor: '#f0f0f0',\r\n  primaryGridDasharray: undefined,\r\n  primaryGridOpacity: undefined,\r\n  primaryTicksColor: 'black',\r\n\r\n  secondaryGridWidth: 1,\r\n  secondaryGridColor: '#f0f0f0',\r\n  secondaryGridDasharray: undefined,\r\n  secondaryGridOpacity: undefined,\r\n  secondaryTicksColor: 'black',\r\n\r\n  hideWhenNoSeriesShown: false,\r\n  shiftToZero: false,\r\n  tickPosition: 1,\r\n  nbTicksPrimary: 3,\r\n  nbTicksSecondary: 10,\r\n  ticklabelratio: 1,\r\n  exponentialFactor: 0,\r\n  exponentialLabelFactor: 0,\r\n  logScale: false,\r\n  forcedMin: false,\r\n  forcedMax: false,\r\n\r\n  span: [0, 1],\r\n  marginMin: 0,\r\n  marginMax: 0,\r\n\r\n  scientificScale: false,\r\n  scientificScaleExponent: false,\r\n  engineeringScale: false,\r\n\r\n  unitInTicks: false,\r\n  unit: false,\r\n  unitWrapperBefore: '',\r\n  unitWrapperAfter: '',\r\n\r\n\r\n  tickLabelOffset: 0,\r\n\r\n  useKatexForLabel: false,\r\n\r\n  highestMax: undefined,\r\n  lowestMin: undefined,\r\n\r\n  labelValue: ''\r\n};\r\n\r\n/**\r\n * Axis constructor. Usually not instanced directly, but for custom made axes, that's possible\r\n * @class Axis\r\n * @static\r\n * @example function myAxis() {};\r\n * myAxis.prototype = new Graph.getConstructor(\"axis\");\r\n * graph.setBottomAxis( new myAxis( { } ) );\r\n */\r\nclass Axis {\r\n\r\n  constructor() {\r\n\r\n  }\r\n\r\n  init(graph, options, overwriteoptions) {\r\n\r\n    this.unitModificationTimeTicks = [\r\n      [1, [1, 2, 5, 10, 20, 30]],\r\n      [60, [1, 2, 5, 10, 20, 30]],\r\n      [3600, [1, 2, 6, 12]],\r\n      [3600 * 24, [1, 2, 3, 4, 5, 10, 20, 40]]\r\n    ];\r\n\r\n    this.graph = graph;\r\n    this.options = util.extend(true, {}, defaults, overwriteoptions, options);\r\n\r\n    this.group = document.createElementNS(this.graph.ns, 'g');\r\n    this.hasChanged = true;\r\n\r\n    this.rectEvent = document.createElementNS(this.graph.ns, 'rect');\r\n    this.rectEvent.setAttribute('pointer-events', 'fill');\r\n    this.rectEvent.setAttribute('fill', 'transparent');\r\n    this.group.appendChild(this.rectEvent);\r\n\r\n    this.graph.axisGroup.appendChild(this.group); // Adds to the main axiszone\r\n\r\n    // Lines at a certain value\r\n    this._lines = [];\r\n\r\n    this.line = document.createElementNS(this.graph.ns, 'line');\r\n    this.line.setAttribute('stroke', 'black');\r\n    this.line.setAttribute('shape-rendering', 'crispEdges');\r\n    this.line.setAttribute('stroke-linecap', 'square');\r\n    this.groupTicks = document.createElementNS(this.graph.ns, 'g');\r\n    this.groupTickLabels = document.createElementNS(this.graph.ns, 'g');\r\n\r\n    this.group.appendChild(this.groupTicks);\r\n    this.group.appendChild(this.groupTickLabels);\r\n    this.group.appendChild(this.line);\r\n\r\n    this.label = document.createElementNS(this.graph.ns, 'text');\r\n\r\n    this.labelTspan = document.createElementNS(this.graph.ns, 'tspan'); // Contains the main label\r\n    this.preunit = ''; //document.createElementNS( this.graph.ns, 'tspan' ); // Contains the scaling unit\r\n    this.unitTspan = document.createElementNS(this.graph.ns, 'tspan'); // Contains the unit\r\n    this.expTspan = document.createElementNS(this.graph.ns, 'tspan'); // Contains the exponent (x10)\r\n    this.expTspanExp = document.createElementNS(this.graph.ns, 'tspan'); // Contains the exponent value\r\n\r\n    this.label.appendChild(this.labelTspan);\r\n    //this.label.appendChild( this.preunitTspan );\r\n    this.label.appendChild(this.unitTspan);\r\n    this.label.appendChild(this.expTspan);\r\n    this.label.appendChild(this.expTspanExp);\r\n\r\n    this.expTspan.setAttribute('dx', 6);\r\n    this.expTspanExp.setAttribute('dy', -5);\r\n    this.expTspanExp.setAttribute('font-size', '0.8em');\r\n\r\n    this.label.setAttribute('text-anchor', 'middle');\r\n\r\n    this.setTickPosition(this.options.tickPosition);\r\n\r\n    this.gridLinePath = {\r\n      primary: '',\r\n      secondary: ''\r\n    };\r\n\r\n    this.gridPrimary = document.createElementNS(this.graph.ns, 'path');\r\n    this.gridSecondary = document.createElementNS(this.graph.ns, 'path');\r\n\r\n    this.graph.groupPrimaryGrids.appendChild(this.gridPrimary);\r\n    this.graph.groupSecondaryGrids.appendChild(this.gridSecondary);\r\n\r\n    this.setGridLinesStyle();\r\n\r\n    this.group.appendChild(this.label);\r\n\r\n    this.groupSeries = document.createElementNS(this.graph.ns, 'g');\r\n    this.group.appendChild(this.groupSeries);\r\n\r\n    this.widthHeightTick = 0;\r\n\r\n    this.ticks = {};\r\n    this.ticksLabels = [];\r\n    this.tickScaling = {\r\n      1: 3,\r\n      2: 2,\r\n      3: 1,\r\n      4: 0.5\r\n    };\r\n\r\n    this.currentTick = {};\r\n    this.lastCurrentTick = {};\r\n\r\n    this.series = [];\r\n    this.totalDelta = 0;\r\n    this.currentAction = false;\r\n\r\n    this.group.addEventListener('mousemove', (e) => {\r\n      e.preventDefault();\r\n      var coords = this.graph._getXY(e);\r\n      this.handleMouseMoveLocal(coords.x, coords.y, e);\r\n\r\n      for (var i = 0, l = this.series.length; i < l; i++) {\r\n        this.series[i].handleMouseMove(false, true);\r\n      }\r\n    });\r\n\r\n    this.labels = [];\r\n    this.group.addEventListener('click', (e) => {\r\n      e.preventDefault();\r\n      var coords = this.graph._getXY(e);\r\n      this.addLabel(this.getVal(coords.x - this.graph.getPaddingLeft()));\r\n    });\r\n\r\n    //this.clip = document.createElementNS( this.graph.ns, 'clipPath' );\r\n    //this.clip.setAttribute( 'id', '_clip' + this.axisRand );\r\n    //this.graph.defs.appendChild( this.clip );\r\n    /*\r\n        this.clipRect = document.createElementNS( this.graph.ns, 'rect' );\r\n        this.clip.appendChild( this.clipRect );\r\n        this.clip.setAttribute( 'clipPathUnits', 'userSpaceOnUse' );\r\n    */\r\n    this.gridPrimary.setAttribute('clip-path', `url(#_clipplot${this.graph._creation})`);\r\n    this.gridSecondary.setAttribute('clip-path', `url(#_clipplot${this.graph._creation})`);\r\n    this.graph._axisHasChanged(this);\r\n\r\n    this.cache();\r\n  }\r\n\r\n  handleMouseMoveLocal() { }\r\n\r\n  /**\r\n   * Hides the axis\r\n   * @memberof Axis\r\n   * @return {Axis} The current axis\r\n   */\r\n  hide() {\r\n    this.options.display = false;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Shows the axis\r\n   * @memberof Axis\r\n   * @return {Axis} The current axis\r\n   */\r\n  show() {\r\n    this.options.display = true;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Shows or hides the axis\r\n   * @memberof Axis\r\n   * @param {Boolean} display - true to display the axis, false to hide it\r\n   * @return {Axis} The current axis\r\n   */\r\n  setDisplay(bool) {\r\n    this.options.display = !!bool;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * @memberof Axis\r\n   * @return {Boolean} A boolean indicating the displayed state of the axis\r\n   */\r\n  isDisplayed() {\r\n\r\n    if (!this.options.hideWhenNoSeriesShown) {\r\n      return this.options.display;\r\n    }\r\n\r\n    return this.graph.getSeriesFromAxis(this).reduce((accumulator, serie) => {\r\n      return accumulator || serie.isShown();\r\n    }, false);\r\n  }\r\n\r\n  isShown() {\r\n\r\n    return this.isDisplayed(...arguments);\r\n  }\r\n\r\n  hideGroup() {\r\n    if (this._hidden) {\r\n      return;\r\n    }\r\n    this._hidden = true;\r\n    this.group.setAttribute('display', 'none');\r\n  }\r\n\r\n  showGroup() {\r\n    if (!this._hidden) {\r\n      return;\r\n    }\r\n    this._hidden = false;\r\n    this.group.setAttribute('display', 'initial');\r\n  }\r\n\r\n  kill(noRedraw, noSerieKill) {\r\n    this.graph.killAxis(this, noRedraw, noSerieKill);\r\n  }\r\n  /**\r\n   * Forces the appearence of a straight perpendicular line at value 0\r\n   * @param {Array<Number>} atValues - An array of x or y values where the lines are displayed\r\n   * @memberof Axis\r\n   * @return {Axis} The current axis\r\n   */\r\n  setLineAt(atValues) {\r\n    this.options.lineAt = atValues;\r\n    return this;\r\n  }\r\n\r\n  // Used to adapt the 0 of the axis to the zero of another axis that has the same direction\r\n\r\n  /**\r\n   * Aligns ```thisValue``` of the axis to ```foreignValue``` of another axis\r\n   * @param {(Axis|Boolean)} axis - The axis with which the 0 should be aligned. Use \"false\" to deactivate the adapt to 0 mode.\r\n   * @param {Number} thisValue - The value of the current axis that should be aligned\r\n   * @param {Number} foreignValue - The value of the reference axis that should be aligned\r\n   * @param {String} preference - \"min\" or \"max\". Defined the boundary that should behave the more normally\r\n   * @memberof Axis\r\n   * @return {Axis} The current axis\r\n   * @since 1.13.2\r\n   */\r\n  adaptTo(axis, thisValue, foreignValue, preference) {\r\n\r\n    if (!axis) {\r\n      this.options.adaptTo = false;\r\n      return this;\r\n    }\r\n\r\n    this.options.adaptTo = {\r\n      axis: axis,\r\n      thisValue: thisValue,\r\n      foreignValue: foreignValue,\r\n      preference: preference\r\n    };\r\n\r\n    this.adapt();\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Adapts maximum and minimum of the axis if options.adaptTo is defined\r\n   * @memberof Axis\r\n   * @returns {Axis} The current axis\r\n   * @since 1.13.2\r\n   */\r\n  adapt() {\r\n\r\n    if (!this.options.adaptTo) {\r\n      return;\r\n    }\r\n\r\n    var axis = this.options.adaptTo.axis,\r\n      current = this.options.adaptTo.thisValue,\r\n      foreign = this.options.adaptTo.foreignValue;\r\n    if (axis.options.currentAxisMin === undefined || axis.options.currentAxisMax === undefined) {\r\n      axis.setMinMaxToFitSeries();\r\n    }\r\n    if ((this.options.forcedMin !== false && this.options.forcedMax == false) || (this.options.adaptTo.preference !== 'max')) {\r\n\r\n      if (this.options.forcedMin !== false) {\r\n        this.options.currentAxisMin = this.options.forcedMin;\r\n      } else if (this._zoomed) {\r\n        this.options.currentAxisMin = this.getCurrentMin();\r\n      } else {\r\n        this.options.currentAxisMin = this.getMinValue() - (current - this.getMinValue()) * (this.options.axisDataSpacing.min * (axis.getCurrentMax() - axis.getCurrentMin()) / (foreign - axis.getCurrentMin()));\r\n      }\r\n\r\n      var use = this.options.forcedMin !== false ? this.options.forcedMin : this.options.currentAxisMin;\r\n      this.options.currentAxisMax = (current - use) * (axis.getCurrentMax() - axis.getCurrentMin()) / (foreign - axis.getCurrentMin()) + use;\r\n\r\n    } else {\r\n\r\n      if (this.options.forcedMax !== false) {\r\n        this.options.currentAxisMax = this.options.forcedMax;\r\n      } else if (this._zoomed) {\r\n        this.options.currentAxisMax = this.getCurrentMax();\r\n      } else {\r\n        this.options.currentAxisMax = this.getMaxValue() + (this.getMaxValue() - current) * (this.options.axisDataSpacing.max * (axis.getCurrentMax() - axis.getCurrentMin()) / (axis.getCurrentMax() - foreign));\r\n      }\r\n\r\n      if (this.options.currentAxisMax == current) {\r\n        this.options.currentAxisMax += this.options.axisDataSpacing.max * this.getInterval();\r\n      }\r\n\r\n      var use = this.options.forcedMax !== false ? this.options.forcedMax : this.options.currentAxisMax;\r\n\r\n      this.options.currentAxisMin = (current - use) * (axis.getCurrentMin() - axis.getCurrentMax()) / (foreign - axis.getCurrentMax()) + use;\r\n    }\r\n\r\n    this.graph._axisHasChanged(this);\r\n  }\r\n\r\n  // Floating axis. Adapts axis position orthogonally to another axis at a defined value. Not taken into account for margins\r\n\r\n  /**\r\n   * Makes the axis floating (not aligned to the right or the left anymore). You need to specify another axis (perpendicular) and a value at which this axis should be located\r\n   * @param {Axis} axis - The axis on which the current axis should be aligned to\r\n   * @param {Number} value - The value on which the current axis should be aligned\r\n   * @memberof Axis\r\n   * @return {Axis} The current axis\r\n   * @example graph.getYAxis().setFloat( graph.getBottomAxis(), 0 ); // Alignes the y axis with the origin of the bottom axis\r\n   */\r\n  setFloating(axis, value) {\r\n\r\n    this.floating = true;\r\n    this.floatingAxis = axis;\r\n    this.floatingValue = value;\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * @memberof Axis\r\n   * @return {Axis} The axis referencing the floating value of the current axis\r\n   */\r\n  getFloatingAxis() {\r\n    return this.floatingAxis;\r\n  }\r\n\r\n  /**\r\n   * @memberof Axis\r\n   * @return {Axis} The value to which the current axis is aligned to\r\n   */\r\n  getFloatingValue() {\r\n    return this.floatingValue;\r\n  }\r\n\r\n  /**\r\n   * Sets the axis data spacing\r\n   * @memberof Axis\r\n   * @see AxisOptionsDefault\r\n   * @param {Number} min - The spacing at the axis min value\r\n   * @param {Number} [ max = min ] - The spacing at the axis max value. If omitted, will be equal to the \"min\" parameter\r\n   * @return {Axis} The current axis\r\n   */\r\n  setAxisDataSpacing(val1, val2) {\r\n    this.options.axisDataSpacing.min = val1;\r\n    this.options.axisDataSpacing.max = val2 || val1;\r\n    return this;\r\n  }\r\n\r\n  dataSpacing() {\r\n    return this.setAxisDataSpacing(...arguments);\r\n  }\r\n\r\n  /**\r\n   * Sets the axis data spacing at the minimum of the axis\r\n   * @memberof Axis\r\n   * @see AxisOptionsDefault\r\n   * @param {Number} min - The spacing at the axis min value\r\n   * @return {Axis} The current axis\r\n   */\r\n  setAxisDataSpacingMin(val) {\r\n    this.options.axisDataSpacing.min = val;\r\n  }\r\n\r\n  /**\r\n   * Sets the axis data spacing at the maximum of the axis\r\n   * @memberof Axis\r\n   * @see AxisOptionsDefault\r\n   * @param {Number} max - The spacing at the axis max value\r\n   * @return {Axis} The current axis\r\n   */\r\n  setAxisDataSpacingMax(val) {\r\n    this.options.axisDataSpacing.max = val;\r\n  }\r\n\r\n  setMinPx(px) {\r\n\r\n    this.minPx = px;\r\n    this.setMinMaxFlipped();\r\n  }\r\n\r\n  setMaxPx(px) {\r\n\r\n    this.maxPx = px;\r\n    this.setMinMaxFlipped();\r\n  }\r\n\r\n  /**\r\n   * @memberof Axis\r\n   * @return {Number} The position in px of the bottom of the axis\r\n   */\r\n  getMinPx() {\r\n    return this.minPxFlipped;\r\n  }\r\n\r\n  /**\r\n   * @memberof Axis\r\n   * @return {Number} The position in px of the top of the axis\r\n   */\r\n  getMaxPx() {\r\n    return this.maxPxFlipped;\r\n  }\r\n\r\n  getMathMaxPx() {\r\n    return this.maxPx;\r\n  }\r\n\r\n  getMathMinPx() {\r\n    return this.minPx;\r\n  }\r\n\r\n  // Returns the true minimum of the axis. Either forced in options or the one from the data\r\n\r\n  /**\r\n   * Retrieves the minimum possible value of the axis. Can be set by \"forcedMin\", \"adapt0ToAxis\" or by the values of the series the axis contains. Does not take into account any zooming.\r\n   * @memberof Axis\r\n   * @return {Number} The minimum possible value of the axis\r\n   */\r\n  getMinValue() {\r\n    return this.options.forcedMin !== false ? this.options.forcedMin : (!isNaN(this.options.lowestMin) ? Math.max(this.options.lowestMin, this.dataMin) : this.dataMin);\r\n  }\r\n\r\n  /**\r\n   * Retrieves the maximum possible value of the axis. Can be set by \"forcedMax\", \"adapt0ToAxis\" or by the values of the series the axis contains. Does not take into account any zooming.\r\n   * @memberof Axis\r\n   * @return {Number} The maximum possible value of the axis\r\n   */\r\n  getMaxValue() {\r\n    return this.options.forcedMax !== false ? this.options.forcedMax : (!isNaN(this.options.highestMax) ? Math.min(this.options.highestMax, this.dataMax) : this.dataMax);\r\n  }\r\n\r\n  setMinValueData(min) {\r\n    this.dataMin = min;\r\n\r\n    // 25.10.2017. This is to help in the case there's no autoscaling\r\n    if (isNaN(this.getCurrentMin())) {\r\n      //this.setCurrentMin( this.getMinValue() );\r\n      //this.cache();\r\n\r\n    }\r\n  }\r\n\r\n  setMaxValueData(max) {\r\n    this.dataMax = max;\r\n\r\n    // 25.10.2017. This is to help in the case there's no autoscaling\r\n    // 02.02.2018. Don't agree with this. Next time, put a link to show the use of this piece of code\r\n    if (isNaN(this.getCurrentMax())) {\r\n      //     this.setCurrentMax( this.getMaxValue() );\r\n      //this.cache();\r\n\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Retrieves the maximum possible value of the axis based only on the data. Does not take into account the possible axis forcing\r\n   * @memberof Axis\r\n   * @return {Number} The maximum possible value of the axis\r\n   */\r\n  getDataMax() {\r\n    return this.dataMax;\r\n  }\r\n\r\n  /**\r\n   * Retrieves the minimum possible value of the axis based only on the data. Does not take into account the possible axis forcing\r\n   * @memberof Axis\r\n   * @return {Number} The minimum possible value of the axis\r\n   */\r\n  getDataMin() {\r\n    return this.dataMin;\r\n  }\r\n\r\n  /**\r\n   * Sets the highest maximum value of the axis.\r\n   * @memberof Axis\r\n   * @param {Number} max - The maximum value of the axis\r\n   * @return {Axis} The current axis\r\n   */\r\n  setLowestMin(lowestMin) {\r\n    this.options.lowestMin = lowestMin;\r\n    this.graph._axisHasChanged(this);\r\n  }\r\n\r\n  /**\r\n   * Forces the minimum value of the axis (no more dependant on the serie values)\r\n   * @memberof Axis\r\n   * @param {Number} min - The minimum value of the axis\r\n   * @param {Boolean} noRescale - ```true``` to prevent the axis to rescale to set this minimum. Rescales anyway if current min is lower than the value. Defaults to ```false```\r\n   * @return {Axis} The current axis\r\n   */\r\n  forceMin(min, noRescale = false) {\r\n    this.options.forcedMin = min;\r\n    this.setCurrentMin(noRescale ? this.getCurrentMin() : undefined);\r\n    this.graph._axisHasChanged(this);\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Sets the highest maximum value of the axis.\r\n   * @memberof Axis\r\n   * @param {Number} max - The maximum value of the axis\r\n   * @return {Axis} The current axis\r\n   */\r\n  setHighestMax(highestMax) {\r\n    this.options.highestMax = highestMax;\r\n    this.graph._axisHasChanged(this);\r\n  }\r\n\r\n  /**\r\n   * Forces the maximum value of the axis (no more dependant on the serie values).\r\n   * @memberof Axis\r\n   * @param {Number} max - The maximum value of the axis\r\n   * @param {Boolean} noRescale - ```true``` to prevent the axis to rescale to set this maximum. Rescales anyway if current max is higher than the value\r\n   * @return {Axis} The current axis\r\n   */\r\n  forceMax(max, noRescale = false) {\r\n    this.options.forcedMax = max;\r\n    this.setCurrentMax(noRescale ? this.getCurrentMax() : undefined);\r\n    this.graph._axisHasChanged(this);\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Retrieves the forced minimum of the axis\r\n   * @memberof Axis\r\n   * @return {Number} The maximum possible value of the axis\r\n   */\r\n  getForcedMin() {\r\n    return this.options.forcedMin;\r\n  }\r\n\r\n  /**\r\n   * Retrieves the forced minimum of the axis\r\n   * @memberof Axis\r\n   * @return {Number} The maximum possible value of the axis\r\n   */\r\n  getForcedMax() {\r\n    return this.options.forcedMax;\r\n  }\r\n\r\n  /**\r\n   * Forces the min and max values of the axis to the min / max values of another axis\r\n   * @param {Axis} axis - The axis from which the min / max values are retrieved.\r\n   * @memberof Axis\r\n   * @return {Axis} The current axis\r\n   */\r\n  forceToAxis(axis) {\r\n    if (axis.getMaxValue && axis.getMinValue) {\r\n      this.options.forcedMin = axis.getMinValue();\r\n      this.options.forcedMax = axis.getMaxValue();\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  getNbTicksPrimary() {\r\n    return this.options.nbTicksPrimary;\r\n  }\r\n\r\n  setNbTicksPrimary(nb) {\r\n    this.options.nbTicksPrimary = nb;\r\n  }\r\n\r\n  getNbTicksSecondary() {\r\n    return this.options.nbTicksSecondary;\r\n  }\r\n\r\n  setNbTicksSecondary(nb) {\r\n    this.options.nbTicksSecondary = nb;\r\n    return this;\r\n  }\r\n\r\n  handleMouseMove(px) {\r\n    this.mouseVal = this.getVal(px);\r\n  }\r\n\r\n  handleMouseWheel(delta, e, baseline) {\r\n\r\n    delta = Math.min(0.2, Math.max(-0.2, delta));\r\n\r\n    if (baseline == 'min') {\r\n      baseline = this.getMinValue();\r\n    } else if (baseline == 'max') {\r\n      baseline = this.getMaxValue();\r\n    } else if (!baseline) {\r\n      baseline = 0;\r\n    }\r\n\r\n    this._doZoomVal(\r\n      ((this.getCurrentMax() - baseline) * (1 + delta)) + baseline, ((this.getCurrentMin() - baseline) * (1 + delta)) + baseline\r\n    );\r\n\r\n    this.graph.draw();\r\n    //\tthis.graph.drawSeries(true);\r\n\r\n  }\r\n\r\n  set zoomLock(bln) {\r\n    this._zoomLocked = bln;\r\n  }\r\n\r\n  get zoomLock() {\r\n    return this._zoomLocked || false;\r\n  }\r\n\r\n  /**\r\n   * Performs a zoom on the axis, without redraw afterwards\r\n   * @param {Number} val1 - The new axis minimum\r\n   * @param {Number} val2 - The new axis maximum\r\n   * @memberof Axis\r\n   * @return {Axis} The current axis\r\n   * @example\r\n   * graph.getBottomAxis().zoom( 50, 70 ); // Axis boundaries will be 50 and 70 after next redraw\r\n   * graph.redraw();\r\n   * @example\r\n   * graph.getBottomAxis().forceMin( 0 ).forceMax( 100 ).zoom( 50, 70 );  // Axis boundaries will be 50 and 70 after next redraw\r\n   * graph.draw();\r\n   * graph.autoscaleAxes(); // New bottom axis boundaries will be 0 and 100, not 50 and 70 !\r\n   * graph.draw();\r\n   */\r\n  zoom(val1, val2, forceLock) {\r\n\r\n    if (!forceLock && this.zoomLock) {\r\n      return;\r\n    }\r\n\r\n    return this._doZoomVal(val1, val2, true);\r\n  }\r\n\r\n  _doZoomVal(val1, val2, mute) {\r\n\r\n    return this._doZoom(this.getPx(val1), this.getPx(val2), val1, val2, mute);\r\n  }\r\n\r\n  _doZoom(px1, px2, val1, val2, mute) {\r\n\r\n    //if(this.options.display || 1 == 1) {\r\n    var val1 = val1 !== undefined ? val1 : this.getVal(px1);\r\n    var val2 = val2 !== undefined ? val2 : this.getVal(px2);\r\n\r\n    this.setCurrentMin(Math.min(val1, val2));\r\n    this.setCurrentMax(Math.max(val1, val2));\r\n\r\n    this.cacheCurrentMin();\r\n    this.cacheCurrentMax();\r\n    this.cacheInterval();\r\n\r\n    this._zoomed = true;\r\n\r\n    this.adapt();\r\n\r\n    this._hasChanged = true;\r\n\r\n    // New method\r\n    if (!mute) {\r\n      this.emit('zoom', [this.options.currentAxisMin, this.options.currentAxisMax, this]);\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  getSerieShift() {\r\n    return this._serieShift;\r\n  }\r\n\r\n  getSerieScale() {\r\n    return this._serieScale;\r\n  }\r\n\r\n  getMouseVal() {\r\n    return this.mouseVal;\r\n  }\r\n\r\n  getUnitPerTick(px, nbTick, valrange) {\r\n\r\n    var pxPerTick = px / nbTicks; // 1000 / 100 = 10 px per tick\r\n    if (!nbTick) {\r\n      nbTick = px / 10;\r\n    } else {\r\n      nbTick = Math.min(nbTick, px / 10);\r\n    }\r\n\r\n    // So now the question is, how many units per ticks ?\r\n    // Say, we have 0.0004 unit per tick\r\n    var unitPerTick = valrange / nbTick;\r\n    switch (this.options.unitModification) {\r\n\r\n      case 'time':\r\n      case 'time:min.sec':\r\n      case 'time:min_dec':\r\n\r\n        {\r\n\r\n          //const max = this.getModifiedValue( this.getMaxValue() );/*,\r\n          /*units = [\r\n            [ 60, 'min' ],\r\n            [ 3600, 'h' ],\r\n            [ 3600 * 24, 'd' ]\r\n          ];*/\r\n\r\n          let i, l, k, m;\r\n          let breaked = false;\r\n          for (i = 0, l = this.unitModificationTimeTicks.length; i < l; i++) {\r\n            for (k = 0, m = this.unitModificationTimeTicks[i][1].length; k < m; k++) {\r\n              if (unitPerTick < this.unitModificationTimeTicks[i][0] * this.unitModificationTimeTicks[i][1][k]) {\r\n                breaked = true;\r\n                break;\r\n              }\r\n            }\r\n            if (breaked) {\r\n              break;\r\n            }\r\n          }\r\n\r\n          //i and k contain the good variable;\r\n          if (i !== this.unitModificationTimeTicks.length) {\r\n            unitPerTickCorrect = this.unitModificationTimeTicks[i][0] * this.unitModificationTimeTicks[i][1][k];\r\n          } else {\r\n            unitPerTickCorrect = 1;\r\n          }\r\n\r\n          break;\r\n        }\r\n\r\n      default:\r\n        {\r\n\r\n          // We take the log\r\n          var decimals = Math.floor(Math.log(unitPerTick) / Math.log(10));\r\n          /*\r\n            Example:\r\n              13'453 => Math.log10() = 4.12 => 4\r\n              0.0000341 => Math.log10() = -4.46 => -5\r\n          */\r\n\r\n          var numberToNatural = unitPerTick * Math.pow(10, -decimals);\r\n\r\n          /*\r\n            Example:\r\n              13'453 (4) => 1.345\r\n              0.0000341 (-5) => 3.41\r\n          */\r\n\r\n          this.decimals = -decimals;\r\n\r\n          var possibleTicks = [1, 2, 5, 10];\r\n          var closest = false;\r\n          for (let i = possibleTicks.length - 1; i >= 0; i--) {\r\n            if (!closest || (Math.abs(possibleTicks[i] - numberToNatural) < Math.abs(closest - numberToNatural))) {\r\n              closest = possibleTicks[i];\r\n            }\r\n          }\r\n\r\n          // Ok now closest is the number of unit per tick in the natural number\r\n          /*\r\n            Example:\r\n              13'453 (4) (1.345) => 1\r\n              0.0000341 (-5) (3.41) => 5\r\n          */\r\n\r\n          // Let's scale it back\r\n          var unitPerTickCorrect = closest * Math.pow(10, decimals);\r\n\r\n          /*\r\n            Example:\r\n              13'453 (4) (1.345) (1) => 10'000\r\n              0.0000341 (-5) (3.41) (5) => 0.00005\r\n          */\r\n          break;\r\n        }\r\n    }\r\n\r\n    var nbTicks = valrange / unitPerTickCorrect;\r\n\r\n    var pxPerTick = px / nbTick;\r\n    return [unitPerTickCorrect, nbTicks, pxPerTick];\r\n  }\r\n\r\n  /**\r\n   * Resets the min and max of the serie to fit the series it contains\r\n   * @memberof Axis\r\n   * @return {Axis} The current axis\r\n   */\r\n  setMinMaxToFitSeries(noNotify) {\r\n\r\n    var interval = this.getInterval();\r\n\r\n    if (this.options.logScale) {\r\n\r\n      this.setCurrentMin(Math.max(1e-50, this.getMinValue() * 0.9));\r\n      this.setCurrentMax(Math.max(1e-50, this.getMaxValue() * 1.1));\r\n      //this.options.currentAxisMin = Math.max( 1e-50, this.getMinValue() * 0.9 );\r\n      //this.options.currentAxisMax = Math.max( 1e-50, this.getMaxValue() * 1.1 );\r\n\r\n    } else {\r\n      this.setCurrentMin(this.getMinValue());\r\n      this.setCurrentMax(this.getMaxValue());\r\n\r\n      //this.options.currentAxisMin = this.getMinValue();\r\n      //this.options.currentAxisMax = this.getMaxValue();\r\n\r\n      if (this.getForcedMin() === false) {\r\n\r\n        this.setCurrentMin(this.getCurrentMin() - (this.options.axisDataSpacing.min * interval));\r\n      }\r\n\r\n      if (this.getForcedMax() === false) {\r\n\r\n        this.setCurrentMax(this.getCurrentMax() + (this.options.axisDataSpacing.max * interval));\r\n      }\r\n    }\r\n\r\n    if (isNaN(this.options.currentAxisMin) || isNaN(this.options.currentAxisMax)) {\r\n      this.options.currentAxisMax = undefined;\r\n      this.options.currentAxisMin = undefined;\r\n    }\r\n\r\n\r\n    this._zoomed = false;\r\n\r\n    this.adapt();\r\n\r\n    // Let's cache the current min and max. This has to be done after the last possibility to change the min max, otherwise the cached value will be invalid during rendering.\r\n    // Most notably, it has to occur after the adapt() method, which again, can change the min/max value of the current axis\r\n    this.cache();\r\n\r\n    if (!noNotify) {\r\n      this.graph._axisHasChanged(this);\r\n    }\r\n\r\n    this.emit('zoomOutFull', [this.options.currentAxisMin, this.options.currentAxisMax, this]);\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * @memberof Axis\r\n   * @return {Number} the maximum interval ( max - min ) of the axis ( not nessarily the current one )\r\n   */\r\n  getInterval() {\r\n    return this.getMaxValue() - this.getMinValue();\r\n  }\r\n\r\n  /**\r\n   * @memberof Axis\r\n   * @return {Number} the maximum interval ( max - min ) of the axis ( not nessarily the current one )\r\n   */\r\n  getCurrentInterval() {\r\n    return this.cachedInterval;\r\n  }\r\n\r\n  /**\r\n   * @memberof Axis\r\n   * @return {Number} The current minimum value of the axis\r\n   */\r\n  getCurrentMin() {\r\n    return this.cachedCurrentMin;\r\n  }\r\n\r\n  /**\r\n   * @memberof Axis\r\n   * @return {Number} The current maximum value of the axis\r\n   */\r\n  getCurrentMax() {\r\n    return this.cachedCurrentMax;\r\n  }\r\n\r\n  /**\r\n   * Caches the current axis minimum\r\n   * @memberof Axis\r\n   */\r\n  cacheCurrentMin() {\r\n    this.cachedCurrentMin = this.options.currentAxisMin == this.options.currentAxisMax ? (this.options.logScale ? this.options.currentAxisMin / 10 : this.options.currentAxisMin - 1) : this.options.currentAxisMin;\r\n  }\r\n\r\n  /**\r\n   * Caches the current axis maximum\r\n   * @memberof Axis\r\n   */\r\n  cacheCurrentMax() {\r\n    this.cachedCurrentMax = this.options.currentAxisMax == this.options.currentAxisMin ? (this.options.logScale ? this.options.currentAxisMax * 10 : this.options.currentAxisMax + 1) : this.options.currentAxisMax;\r\n  }\r\n\r\n  /**\r\n   * Caches the current interval\r\n   * @memberof Axis\r\n   */\r\n  cacheInterval() {\r\n    this.cachedInterval = this.cachedCurrentMax - this.cachedCurrentMin;\r\n  }\r\n\r\n  cache() {\r\n    this.cacheCurrentMin();\r\n    this.cacheCurrentMax();\r\n    this.cacheInterval();\r\n  }\r\n\r\n  /**\r\n   * Sets the current minimum value of the axis. If lower that the forced value, the forced value is used\r\n   * @memberof Axis\r\n   * @param {Number} val - The new minimum value\r\n   * @return {Axis} The current axis\r\n   */\r\n  setCurrentMin(val) {\r\n\r\n    if (val === undefined || (this.getForcedMin() !== false && (val < this.getForcedMin() || val < this.options.lowestMin || val === undefined))) {\r\n      val = this.getMinValue();\r\n    }\r\n    this.options.currentAxisMin = val;\r\n    if (this.options.logScale) {\r\n      this.options.currentAxisMin = Math.max(1e-50, val);\r\n    }\r\n\r\n    this.cacheCurrentMin();\r\n    this.cacheInterval();\r\n\r\n    this.graph._axisHasChanged(this);\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Sets the current maximum value of the axis. If higher that the forced value, the forced value is used\r\n   * @memberof Axis\r\n   * @param {Number} val - The new maximum value\r\n   * @return {Axis} The current axis\r\n   */\r\n  setCurrentMax(val) {\r\n\r\n    if (val === undefined || (this.getForcedMax() !== false && (val > this.getForcedMax() || val > this.options.highestMax || val === undefined))) {\r\n      val = this.getMaxValue();\r\n    }\r\n\r\n    this.options.currentAxisMax = val;\r\n\r\n    if (this.options.logScale) {\r\n      this.options.currentAxisMax = Math.max(1e-50, val);\r\n    }\r\n\r\n    this.cacheCurrentMax();\r\n    this.cacheInterval();\r\n\r\n    this.graph._axisHasChanged(this);\r\n  }\r\n\r\n  /**\r\n   * Sets the flipping state of the axis. If enabled, the axis is descending rather than ascending.\r\n   * @memberof Axis\r\n   * @param {Boolean} flip - The new flipping state of the axis\r\n   * @return {Axis} The current axis\r\n   */\r\n  flip(flip) {\r\n    this.options.flipped = flip;\r\n    this.setMinMaxFlipped();\r\n    return this;\r\n  }\r\n  /*\r\n    setMinMaxFlipped() {\r\n  \r\n      var interval = this.maxPx - this.minPx;\r\n      var maxPx = this.maxPx - interval * this.options.span[ 0 ];\r\n      var minPx = this.maxPx - interval * this.options.span[ 1 ];\r\n  \r\n      this.minPxFlipped = this.isFlipped() ? maxPx : minPx;\r\n      this.maxPxFlipped = this.isFlipped() ? minPx : maxPx;\r\n  \r\n      // this.minPx = minPx;\r\n      //this.maxPx = maxPx;\r\n    }\r\n  */\r\n  /**\r\n   * @memberof Axis\r\n   * @return {Boolean} The current flipping state of the axis\r\n   */\r\n  isFlipped() {\r\n    return this.options.flipped;\r\n  }\r\n\r\n  _draw() { // Redrawing of the axis\r\n\r\n    var self = this;\r\n    // var visible;\r\n\r\n    //    this.drawInit();\r\n\r\n    if (this.options.currentAxisMin === undefined || this.options.currentAxisMax === undefined) {\r\n      this.setMinMaxToFitSeries(true); // We reset the min max as a function of the series\r\n    }\r\n    // this.cache();\r\n\r\n    //   this.setSlaveAxesBoundaries();\r\n\r\n    // The data min max is stored in this.dataMin, this.dataMax\r\n\r\n    //var widthPx = this.maxPx - this.minPx;\r\n    var widthPx = Math.abs(this.getMaxPx() - this.getMinPx());\r\n    var valrange = this.getCurrentInterval();\r\n    /* Number of px per unit */\r\n    /* Example: width: 1000px\r\n      /* \t\t\t10 - 100 => 11.11\r\n      /*\t\t\t0 - 2 => 500\r\n      /*\t\t\t0 - 0.00005 => 20'000'000\r\n      */\r\n\r\n    if (!this.isShown()) {\r\n      this.line.setAttribute('display', 'none');\r\n      return 0;\r\n    }\r\n\r\n    this.line.setAttribute('display', 'block');\r\n\r\n    if (this.options.scientificScale == true) {\r\n\r\n      if (this.options.scientificScaleExponent) {\r\n\r\n        this.scientificExponent = this.options.scientificScaleExponent;\r\n      } else {\r\n        this.scientificExponent = Math.floor(Math.log(Math.max(Math.abs(this.getCurrentMax()), Math.abs(this.getCurrentMin()))) / Math.log(10));\r\n      }\r\n    } else {\r\n      this.scientificExponent = 0;\r\n    }\r\n\r\n    /************************************/\r\n    /*** DRAWING LABEL ******************/\r\n    /************************************/\r\n\r\n    this.gridLinePath.primary = '';\r\n    this.gridLinePath.secondary = '';\r\n\r\n    /*\r\n    var label;\r\n    if ( label = this.getLabel() ) {\r\n      // Sets the label\r\n      this.labelTspan.textContent = label;\r\n    }\r\n  */\r\n    let letter;\r\n    if (!this.options.useKatexForLabel || !this.graph.hasKatexRenderer()) {\r\n\r\n      if (this.options.unitDecade && this.options.unit && this.scientificExponent !== 0 && (this.scientificExponent = this.getEngineeringExponent(this.scientificExponent)) && (letter = this.getExponentGreekLetter(this.scientificExponent))) {\r\n\r\n        this.preunit = letter;\r\n        this.unitTspan.setAttribute('dx', 0);\r\n\r\n      } else if (this.scientificExponent !== 0 && !isNaN(this.scientificExponent)) {\r\n\r\n        if (this.options.engineeringScale) {\r\n          this.scientificExponent = this.getEngineeringExponent(this.scientificExponent);\r\n        }\r\n\r\n        this.preunit = '';\r\n\r\n        this.expTspan.setAttribute('display', 'visible');\r\n        this.expTspanExp.setAttribute('display', 'visible');\r\n\r\n        this.expTspan.textContent = 'x10';\r\n        this.expTspanExp.textContent = this.scientificExponent;\r\n\r\n      } else {\r\n\r\n        if (!this.options.unit) {\r\n          this.unitTspan.setAttribute('display', 'none');\r\n        }\r\n\r\n        this.preunit = '';\r\n        this.expTspan.setAttribute('display', 'none');\r\n        this.expTspanExp.setAttribute('display', 'none');\r\n      }\r\n\r\n      this.writeUnit();\r\n\r\n    } else {\r\n\r\n      let string = this.getLabel();\r\n      /*,\r\n              domEl;*/\r\n\r\n      if (this.options.unitDecade && this.options.unit && this.scientificExponent !== 0 && (this.scientificExponent = this.getEngineeringExponent(this.scientificExponent)) && (letter = this.getExponentGreekLetter(this.scientificExponent))) {\r\n\r\n        string += letter;\r\n        this.preunitTspan.innerHTML = letter;\r\n        this.preunitTspan.setAttribute('display', 'visible');\r\n        this.unitTspan.setAttribute('dx', 0);\r\n\r\n        string += ` ${letter} ${this.options.unit}`;\r\n\r\n      } else if (this.scientificExponent !== 0 && !isNaN(this.scientificExponent)) {\r\n\r\n        if (this.options.engineeringScale) {\r\n          this.scientificExponent = this.getEngineeringExponent(this.scientificExponent);\r\n        }\r\n        string += ` \\\\cdot 10^${this.scientificExponent} ${this.options.unit}`;\r\n\r\n      }\r\n\r\n      this.katexElement = this.graph.renderWithKatex(string, this.katexElement);\r\n    }\r\n\r\n    if (!this.options.hideTicks) {\r\n\r\n      this.resetTicksLength();\r\n\r\n      if (this.linkedToAxis) { // px defined, linked to another axis\r\n\r\n        this.linkedToAxis.deltaPx = 10;\r\n        var widthHeight = this.drawLinkedToAxisTicksWrapper(widthPx, valrange);\r\n\r\n      } else if (!this.options.logScale) {\r\n        // So the setting is: How many ticks in total ? Then we have to separate it\r\n\r\n        var widthHeight = this.drawLinearTicksWrapper(widthPx, valrange);\r\n\r\n      } else {\r\n\r\n        var widthHeight = this.drawLogTicks();\r\n\r\n      }\r\n    } else {\r\n      var widthHeight = 0;\r\n    }\r\n\r\n    this.removeUselessTicks();\r\n    this.removeUselessTickLabels();\r\n\r\n    this.gridPrimary.setAttribute('d', this.gridLinePath.primary);\r\n    this.gridSecondary.setAttribute('d', this.gridLinePath.secondary);\r\n\r\n    // Looks for axes linked to this current axis\r\n    var axes = this.graph.findAxesLinkedTo(this);\r\n    axes.forEach(function (axis) {\r\n\r\n      if (!axis.linkedToAxis) {\r\n        return;\r\n      }\r\n      axis.setMinPx(self.getMinPx());\r\n      axis.setMaxPx(self.getMaxPx());\r\n\r\n      axis.draw();\r\n\r\n    });\r\n\r\n    /************************************/\r\n    /*** DRAW CHILDREN IMPL SPECIFIC ****/\r\n    /************************************/\r\n\r\n    //   this.drawSpecifics();\r\n\r\n    return widthHeight;\r\n  }\r\n\r\n  drawLines() {\r\n\r\n    if (this.options.lineAt && Array.isArray(this.options.lineAt)) {\r\n\r\n      this.options.lineAt.forEach((val, index) => {\r\n\r\n        if (!isNaN(val) && this.getCurrentMin() <= val && this.getCurrentMax() >= val) {\r\n\r\n          this._lines[index] = this._drawLine(val, this._lines[index]);\r\n\r\n        } else {\r\n          this._hideLine(this._lines[index]);\r\n        }\r\n\r\n      });\r\n    }\r\n\r\n  }\r\n\r\n  writeUnit() {\r\n    if (this.options.unit) {\r\n\r\n      this.unitTspan.setAttribute('display', 'visible');\r\n      this.unitTspan.setAttribute('dx', 5);\r\n\r\n      //6.10.2018: This was incompatible with the fact that there can be a unit + a *10^x factor, when setUnitDecate( false ) is called (which is also the default behaviour)\r\n      // We should check if this creates other issues.\r\n\r\n      //this.expTspan.setAttribute( 'display', 'none' );\r\n      //this.expTspanExp.setAttribute( 'display', 'none' );\r\n      this.unitTspan.innerHTML = (this.options.unitWrapperBefore + this.preunit + this.options.unit + this.options.unitWrapperAfter).replace(/\\^([-+0-9]*)(.*)/g, \"<tspan dy='-5' font-size='0.7em'>$1</tspan><tspan dy='5' font-size='1em'>$2</tspan>\");\r\n\r\n    } else {\r\n      this.unitTspan.setAttribute('display', 'none');\r\n    }\r\n  }\r\n\r\n  getExponentGreekLetter(val) {\r\n\r\n    switch (val) {\r\n\r\n      case 3:\r\n        {\r\n          return 'k';\r\n        }\r\n\r\n      case 6:\r\n        {\r\n          return 'M';\r\n        }\r\n      case 9:\r\n        {\r\n          return 'G';\r\n        }\r\n      case 12:\r\n        {\r\n          return 'T';\r\n        }\r\n      case 15:\r\n        {\r\n          return 'E';\r\n        }\r\n      case -3:\r\n        {\r\n          return 'm';\r\n        }\r\n      case -6:\r\n        {\r\n          return '&mu;';\r\n        }\r\n      case -9:\r\n        {\r\n          return 'n';\r\n        }\r\n      case -12:\r\n        {\r\n          return 'p';\r\n\r\n        }\r\n      case -15:\r\n        {\r\n          return 'f';\r\n        }\r\n      default:\r\n        {\r\n          return '';\r\n        }\r\n    }\r\n\r\n  }\r\n\r\n  drawLinearTicksWrapper(widthPx, valrange) {\r\n\r\n    let tickPrimaryUnit;\r\n\r\n    if (this.options.primaryTickUnit) {\r\n\r\n      tickPrimaryUnit = this.options.primaryTickUnit;\r\n\r\n    } else {\r\n\r\n      tickPrimaryUnit = this.getUnitPerTick(widthPx, this.getNbTicksPrimary(), valrange)[0];\r\n\r\n      if (this.options.maxPrimaryTickUnit && this.options.maxPrimaryTickUnit < tickPrimaryUnit) {\r\n        tickPrimaryUnit = this.options.maxPrimaryTickUnit;\r\n      } else if (this.options.minPrimaryTickUnit && this.options.minPrimaryTickUnit > tickPrimaryUnit) {\r\n        tickPrimaryUnit = this.options.minPrimaryTickUnit;\r\n      }\r\n\r\n    }\r\n\r\n    // We need to get here the width of the ticks to display the axis properly, with the correct shift\r\n    return this.drawTicks(tickPrimaryUnit, this.secondaryTicks());\r\n  }\r\n\r\n  forcePrimaryTickUnit(primaryInterval) {\r\n    this.options.primaryTickUnit = primaryInterval;\r\n\r\n    this.decimals = Math.max(0, Math.round(-Math.log(primaryInterval) / Math.log(10)));\r\n\r\n  }\r\n\r\n  forcePrimaryTickUnitMax(value) {\r\n    this.options.maxPrimaryTickUnit = value;\r\n  }\r\n\r\n  forcePrimaryTickUnitMin(value) {\r\n    this.options.minPrimaryTickUnit = value;\r\n  }\r\n\r\n  getPrimaryTickUnit() {\r\n    return this.incrTick;\r\n  }\r\n\r\n  setTickLabelRatio(tickRatio) {\r\n    this.options.ticklabelratio = tickRatio;\r\n  }\r\n\r\n  doesHideWhenNoSeriesShown() {\r\n    return this.options.hideWhenNoSeriesShown;\r\n  }\r\n\r\n  draw() {\r\n\r\n    this._widthLabels = 0;\r\n    var drawn = this._draw();\r\n    this._widthLabels += drawn;\r\n    return drawn;\r\n  }\r\n\r\n  drawTicks(primary, secondary) {\r\n\r\n    var unitPerTick = primary,\r\n      min = this.getCurrentMin(),\r\n      max = this.getCurrentMax(),\r\n      secondaryIncr,\r\n      incrTick,\r\n      subIncrTick,\r\n      loop = 0;\r\n\r\n    if (secondary) {\r\n      secondaryIncr = unitPerTick / secondary;\r\n    }\r\n\r\n    incrTick = this.options.shiftToZero ? this.dataMin - Math.ceil((this.dataMin - min) / unitPerTick) * unitPerTick : Math.floor(min / unitPerTick) * unitPerTick;\r\n    this.incrTick = primary;\r\n\r\n    while (incrTick <= max) {\r\n\r\n      loop++;\r\n      if (loop > 1000) {\r\n        break;\r\n      }\r\n\r\n      if (secondary) {\r\n\r\n        subIncrTick = incrTick + secondaryIncr;\r\n        this.subIncrTick = subIncrTick;\r\n        //widthHeight = Math.max(widthHeight, this.drawTick(subIncrTick, 1));\r\n        var loop2 = 0;\r\n\r\n        while (subIncrTick < incrTick + unitPerTick && Math.abs(subIncrTick - (incrTick + unitPerTick)) > 1e-7) {\r\n          loop2++;\r\n          if (loop2 > 100) {\r\n            break;\r\n          }\r\n\r\n          if (subIncrTick < min || subIncrTick > max) {\r\n            subIncrTick += secondaryIncr;\r\n            continue;\r\n          }\r\n\r\n          this.drawTickWrapper(subIncrTick, false, Math.abs(subIncrTick - incrTick - unitPerTick / 2) < 1e-4 ? 2 : 3);\r\n\r\n          subIncrTick += secondaryIncr;\r\n        }\r\n      }\r\n\r\n      if (incrTick < min || incrTick > max) {\r\n        incrTick += primary;\r\n        continue;\r\n      }\r\n\r\n      this.drawTickWrapper(incrTick, true, 1);\r\n      incrTick += primary;\r\n    }\r\n\r\n    this.widthHeightTick = this.getMaxSizeTick();\r\n    return this.widthHeightTick;\r\n  }\r\n\r\n  nextTick(level, callback) {\r\n\r\n    this.ticks[level] = this.ticks[level] || [];\r\n    this.lastCurrentTick[level] = this.lastCurrentTick[level] || 0;\r\n    this.currentTick[level] = this.currentTick[level] || 0;\r\n\r\n    if (this.currentTick[level] >= this.ticks[level].length) {\r\n      var tick = document.createElementNS(this.graph.ns, 'line');\r\n      this.groupTicks.appendChild(tick);\r\n      this.ticks[level].push(tick);\r\n\r\n      callback(tick);\r\n    }\r\n\r\n    var tick = this.ticks[level][this.currentTick[level]];\r\n\r\n    if (this.currentTick[level] >= this.lastCurrentTick[level]) {\r\n      tick.setAttribute('display', 'visible');\r\n    }\r\n\r\n    this.currentTick[level]++;\r\n\r\n    return tick;\r\n  }\r\n\r\n  nextTickLabel(callback) {\r\n\r\n    this.ticksLabels = this.ticksLabels || [];\r\n    this.lastCurrentTickLabel = this.lastCurrentTickLabel || 0;\r\n    this.currentTickLabel = this.currentTickLabel || 0;\r\n\r\n    if (this.currentTickLabel >= this.ticksLabels.length) {\r\n\r\n      var tickLabel = document.createElementNS(this.graph.ns, 'text');\r\n      this.groupTickLabels.appendChild(tickLabel);\r\n      this.ticksLabels.push(tickLabel);\r\n      callback(tickLabel);\r\n    }\r\n\r\n    var tickLabel = this.ticksLabels[this.currentTickLabel];\r\n\r\n    if (this.currentTickLabel >= this.lastCurrentTickLabel) {\r\n      tickLabel.setAttribute('display', 'visible');\r\n    }\r\n\r\n    this.currentTickLabel++;\r\n\r\n    return tickLabel;\r\n  }\r\n\r\n  removeUselessTicks() {\r\n\r\n    for (var j in this.currentTick) {\r\n\r\n      for (var i = this.currentTick[j]; i < this.ticks[j].length; i++) {\r\n        this.ticks[j][i].setAttribute('display', 'none');\r\n      }\r\n\r\n      this.lastCurrentTick[j] = this.currentTick[j];\r\n      this.currentTick[j] = 0;\r\n    }\r\n  }\r\n\r\n  removeUselessTickLabels() {\r\n\r\n    for (var i = this.currentTickLabel; i < this.ticksLabels.length; i++) {\r\n      this.ticksLabels[i].setAttribute('display', 'none');\r\n    }\r\n\r\n    this.lastCurrentTickLabel = this.currentTickLabel;\r\n    this.currentTickLabel = 0;\r\n\r\n  }\r\n  /*\r\n    doGridLine() {\r\n      var gridLine = document.createElementNS( this.graph.ns, 'line' );\r\n      this.groupGrids.appendChild( gridLine );\r\n      return gridLine;\r\n    };*/\r\n\r\n  nextGridLine(primary, x1, x2, y1, y2) {\r\n\r\n    if (!((primary && this.options.primaryGrid) || (!primary && this.options.secondaryGrid))) {\r\n      return;\r\n    }\r\n\r\n    this.gridLinePath[primary ? 'primary' : 'secondary'] += `M ${x1} ${y1} L ${x2} ${y2}`;\r\n  }\r\n\r\n  setGridLineStyle(gridLine, primary) {\r\n\r\n    gridLine.setAttribute('shape-rendering', 'crispEdges');\r\n    gridLine.setAttribute('stroke', primary ? this.getPrimaryGridColor() : this.getSecondaryGridColor());\r\n    gridLine.setAttribute('stroke-width', primary ? this.getPrimaryGridWidth() : this.getSecondaryGridWidth());\r\n    gridLine.setAttribute('stroke-opacity', primary ? this.getPrimaryGridOpacity() : this.getSecondaryGridOpacity());\r\n\r\n    var dasharray;\r\n    if ((dasharray = primary ? this.getPrimaryGridDasharray() : this.getSecondaryGridDasharray())) {\r\n      gridLine.setAttribute('stroke-dasharray', dasharray);\r\n    }\r\n\r\n  }\r\n\r\n  setGridLinesStyle() {\r\n    this.setGridLineStyle(this.gridPrimary, true);\r\n    this.setGridLineStyle(this.gridSecondary, false);\r\n    return this;\r\n  }\r\n\r\n  resetTicksLength() { }\r\n\r\n  secondaryTicks() {\r\n    return this.options.nbTicksSecondary;\r\n  }\r\n\r\n  drawLogTicks() {\r\n    var min = this.getCurrentMin(),\r\n      max = this.getCurrentMax();\r\n    var incr = Math.min(min, max);\r\n    var max = Math.max(min, max);\r\n\r\n    if (incr < 1e-50) {\r\n      incr = 1e-50;\r\n    }\r\n\r\n    if (Math.log(incr) - Math.log(max) > 20) {\r\n      max = Math.pow(10, (Math.log(incr) * 20));\r\n    }\r\n\r\n    var optsMain = {\r\n      fontSize: '1.0em',\r\n      exponential: true,\r\n      overwrite: false\r\n    };\r\n\r\n    if (incr < 0) {\r\n      incr = 0;\r\n    }\r\n\r\n    var pow = incr == 0 ? 0 : Math.floor(Math.log(incr) / Math.log(10));\r\n    var incr = 1,\r\n      val;\r\n    while ((val = incr * Math.pow(10, pow)) < max) {\r\n      if (incr == 1) { // Superior power\r\n        if (val > min)\r\n          this.drawTickWrapper(val, true, 1, optsMain);\r\n      }\r\n      if (incr == 10) {\r\n        incr = 1;\r\n        pow++;\r\n      } else {\r\n\r\n        if (incr != 1 && val > min) {\r\n\r\n          this.drawTickWrapper(val, false, 2, {\r\n            overwrite: '',\r\n            fontSize: '0.6em'\r\n          });\r\n\r\n        }\r\n\r\n        incr++;\r\n      }\r\n    }\r\n\r\n    this.widthHeightTick = this.getMaxSizeTick();\r\n    return this.widthHeightTick;\r\n  }\r\n\r\n  drawTickWrapper(value, label, level, options) {\r\n\r\n    //var pos = this.getPos( value );\r\n\r\n    this.drawTick(value, level, options);\r\n  }\r\n\r\n  /**\r\n   * Used to scale the master axis into the slave axis\r\n   * @function SlaveAxisScalingFunction\r\n   * @param {Number} val - The master value to convert into a slave value\r\n   * @returns undefined\r\n   */\r\n\r\n  /**\r\n   * Makes this axis a slave. This can be used to show the same data with different units, specifically when a conversion function exists from axis -> slaveAxis but not in reverse. This axis should actually have no series.\r\n   * @param {Axis} axis - The master axis\r\n   * @param {SlaveAxisScalingFunction} scalingFunction - The scaling function used to map masterValue -> slaveValue\r\n   * @param {Number} decimals - The number of decimals to round the value to\r\n   * @memberof Axis\r\n   * @return {Number} The width or height used by the axis (used internally)\r\n   */\r\n  linkToAxis(axis, scalingFunction, decimals) {\r\n\r\n    this.linkedToAxis = {\r\n      axis: axis,\r\n      scalingFunction: scalingFunction,\r\n      decimals: decimals || 1\r\n    };\r\n\r\n  }\r\n\r\n  drawLinkedToAxisTicksWrapper(widthPx, valrange) {\r\n\r\n    var opts = this.linkedToAxis,\r\n      px = 0,\r\n      val,\r\n      t,\r\n      l,\r\n      delta2;\r\n\r\n    // Redrawing the main axis ? Why ?\r\n    //opts.axis.draw();\r\n\r\n    if (!opts.deltaPx) {\r\n      opts.deltaPx = 10;\r\n    }\r\n\r\n    do {\r\n\r\n      val = opts.scalingFunction(opts.axis.getVal(px + this.getMinPx()));\r\n\r\n      if (opts.decimals) {\r\n        this.decimals = opts.decimals;\r\n      }\r\n\r\n      t = this.drawTick(val, 1, {}, px + this.getMinPx());\r\n\r\n      if (!t) {\r\n        console.error(val, px, this.getMinPx());\r\n        throw new Error('Unable to draw tick. Please report the test-case');\r\n      }\r\n\r\n      l = String(t[1].textContent).length * 8;\r\n      delta2 = Math.round(l / 5) * 5;\r\n\r\n      if (delta2 > opts.deltaPx) {\r\n        opts.deltaPx = delta2;\r\n        //     this.drawInit();\r\n        this.drawLinkedToAxisTicksWrapper(widthPx, valrange);\r\n        return;\r\n      }\r\n\r\n      px += opts.deltaPx;\r\n\r\n    } while (px < widthPx);\r\n  }\r\n\r\n  /**\r\n   * Transform a value into pixels, according to the axis scaling. The value is referenced to the drawing wrapper, not the the axis minimal value\r\n   * @param {Number} value - The value to translate into pixels\r\n   * @memberof Axis\r\n   * @return {Number} The value transformed into pixels\r\n   */\r\n  getPos(value) {\r\n    return this.getPx(value);\r\n  }\r\n\r\n  /**\r\n   * @alias Axis~getPos\r\n   */\r\n  getPx(value) {\r\n    //      if(this.getMaxPx() == undefined)\r\n    //        console.log(this);\r\n    //console.log(this.getMaxPx(), this.getMinPx(), this.getCurrentInterval());\r\n    // Ex 50 / (100) * (1000 - 700) + 700\r\n\r\n    //console.log( value, this.getCurrentMin(), this.getMaxPx(), this.getMinPx(), this.getCurrentInterval() );\r\n\r\n    if (!this.options.logScale) {\r\n\r\n      return (value - this.getCurrentMin()) / (this.getCurrentInterval()) * (this.getMaxPx() - this.getMinPx()) + this.getMinPx();\r\n    } else {\r\n      // 0 if value = min\r\n      // 1 if value = max\r\n\r\n      if (value < 0)\r\n        return;\r\n\r\n      var value = ((Math.log(value) - Math.log(this.getCurrentMin())) / (Math.log(this.getCurrentMax()) - Math.log(this.getCurrentMin()))) * (this.getMaxPx() - this.getMinPx()) + this.getMinPx();\r\n\r\n      return value;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @alias Axis~getPos\r\n   */\r\n  getRoundedPx(value) {\r\n    //      if(this.getMaxPx() == undefined)\r\n    //        console.log(this);\r\n    //console.log(this.getMaxPx(), this.getMinPx(), this.getCurrentInterval());\r\n    // Ex 50 / (100) * (1000 - 700) + 700\r\n\r\n    //console.log( value, this.getCurrentMin(), this.getMaxPx(), this.getMinPx(), this.getCurrentInterval() );\r\n    return Math.round(this.getPx(value) * 10) / 10;\r\n  }\r\n\r\n  /**\r\n   * Transform a pixel position (referenced to the graph zone, not to the axis minimum) into a value, according to the axis scaling.\r\n   * @param {Number} pixels - The number of pixels to translate into a value\r\n   * @memberof Axis\r\n   * @return {Number} The axis value corresponding to the pixel position\r\n   */\r\n  getVal(px) {\r\n\r\n    if (!this.options.logScale) {\r\n\r\n      return (px - this.getMinPx()) / (this.getMaxPx() - this.getMinPx()) * this.getCurrentInterval() + this.getCurrentMin();\r\n\r\n    } else {\r\n\r\n      return Math.exp((px - this.getMinPx()) / (this.getMaxPx() - this.getMinPx()) * (Math.log(this.getCurrentMax()) - Math.log(this.getCurrentMin())) + Math.log(this.getCurrentMin()));\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Transform a delta value into pixels\r\n   * @param {Number} value - The value to translate into pixels\r\n   * @return {Number} The value transformed into pixels\r\n   * @example graph.getBottomAxis().forceMin( 20 ).forceMax( 50 ).getRelPx( 2 ); // Returns how many pixels will be covered by 2 units. Let's assume 600px of width, it's ( 2 / 30 ) * 600 = 40px\r\n   */\r\n  getRelPx(delta) {\r\n\r\n    return (delta / this.getCurrentInterval()) * (this.getMaxPx() - this.getMinPx());\r\n  }\r\n\r\n  /**\r\n   * Transform a delta pixels value into value\r\n   * @param {Number} pixels - The pixel to convert into a value\r\n   * @return {Number} The delta value corresponding to delta pixels\r\n   * @see Axis~getRelPx\r\n   * @example graph.getBottomAxis().forceMin( 20 ).forceMax( 50 ).getRelVal( 40 ); // Returns 2 (for 600px width)\r\n   */\r\n  getRelVal(px) {\r\n    return px / (this.getMaxPx() - this.getMinPx()) * this.getCurrentInterval();\r\n  }\r\n\r\n  valueToText(value, forceDecimals) {\r\n\r\n    if (this.scientificExponent) {\r\n\r\n      value /= Math.pow(10, this.scientificExponent);\r\n      return value.toFixed(1);\r\n\r\n    } else {\r\n\r\n      value = value * Math.pow(10, this.getExponentialFactor()) * Math.pow(10, this.getExponentialLabelFactor());\r\n      if (this.options.shiftToZero) {\r\n        value -= this.dataMin;\r\n      }\r\n      if (this.options.ticklabelratio) {\r\n        value *= this.options.ticklabelratio;\r\n      }\r\n      if (this.options.unitModification) {\r\n        value = this.modifyUnit(value, this.options.unitModification);\r\n        return value;\r\n      }\r\n\r\n      var dec = this.decimals - this.getExponentialFactor() - this.getExponentialLabelFactor();\r\n\r\n      if (isNaN(value)) {\r\n        return '';\r\n      }\r\n\r\n      if (forceDecimals > 0) {\r\n        value = value.toFixed(forceDecimals);\r\n      } else {\r\n        if (dec > 0) {\r\n          value = value.toFixed(dec);\r\n        } else {\r\n          value = value.toFixed(0);\r\n        }\r\n      }\r\n      if (this.options.unitInTicks && this.options.unit) {\r\n        value += ` ${this.options.unit}`;\r\n      }\r\n\r\n      return value;\r\n    }\r\n  }\r\n\r\n  /**\r\n   *  Computes a value and returns it in HTML formatting\r\n   *  @memberof Axis\r\n   *  @param {Number} value - The value to compute\r\n   *  @param {Boolean} noScaling - Does not display scaling\r\n   *  @param {Boolean} noUnits - Does not display units\r\n   * @param {Number} [forceDecimals=0] - Force the precision of the display\r\n   *  @return {String} An HTML string containing the computed value\r\n   *  @example graph.getXAxis().setUnit( \"m\" ).setUnitDecade( true ).setScientific( true );\r\n   *  graph.getXAxis().valueToHtml( 3500 ); // Returns \"3.5 km\"\r\n   *  @see Axis#valueToText\r\n   */\r\n  valueToHtml(value, noScaling, noUnits, forceDecimals = 0) {\r\n\r\n    var text = this.valueToText(value, forceDecimals);\r\n    var letter;\r\n\r\n    if (this.options.unitDecade && this.options.unit && this.scientificExponent !== 0 && (this.scientificExponent = this.getEngineeringExponent(this.scientificExponent)) && (letter = this.getExponentGreekLetter(this.scientificExponent))) {\r\n\r\n      text += letter;\r\n\r\n    } else if (this.scientificExponent !== 0 && !isNaN(this.scientificExponent) && !noScaling) {\r\n      text += 'x10';\r\n      text += `<sup>${this.scientificExponent}</sup>`;\r\n    }\r\n\r\n    if (this.options.unit && !noUnits) {\r\n\r\n      text += this.options.unit.replace(/\\^([-+0-9]*)/g, '<sup>$1</sup>');\r\n    }\r\n\r\n    return text;\r\n  }\r\n\r\n  getModifiedValue(value) {\r\n    if (this.options.ticklabelratio) {\r\n      value *= this.options.ticklabelratio;\r\n    }\r\n\r\n    if (this.options.shiftToZero) {\r\n      value -= this.getMinValue() * (this.options.ticklabelratio || 1);\r\n    }\r\n\r\n    return value;\r\n  }\r\n\r\n  modifyUnit(value, mode) {\r\n\r\n    var text = '';\r\n    var incr = this.incrTick;\r\n    var umin;\r\n\r\n    switch (mode) {\r\n\r\n      case 'time': // val must be in seconds => transform in hours / days / months\r\n        var max = this.getModifiedValue(this.getMaxValue()),\r\n          units = [\r\n            [60, 'min'],\r\n            [3600, 'h'],\r\n            [3600 * 24, 'd']\r\n          ];\r\n\r\n        if (max < 3600) { // to minutes\r\n          umin = 0;\r\n        } else if (max < 3600 * 24) {\r\n          umin = 1;\r\n        } else if (max < 3600 * 24 * 30) {\r\n          umin = 2;\r\n        }\r\n\r\n        if (!units[umin]) {\r\n          return false;\r\n        }\r\n\r\n        value = value / units[umin][0];\r\n        var valueRounded = Math.floor(value);\r\n        text = valueRounded + units[umin][1];\r\n\r\n        // Addind lower unit for precision\r\n        umin--;\r\n        while (incr < 1 * units[umin + 1][0] && umin > -1) {\r\n\r\n          value = (value - valueRounded) * units[umin + 1][0] / units[umin][0];\r\n          valueRounded = Math.round(value);\r\n          text += ` ${valueRounded}${units[umin][1]}`;\r\n          umin--;\r\n        }\r\n\r\n        break;\r\n\r\n      case 'time:min.sec':\r\n        value = value / 60;\r\n        var valueRounded = Math.floor(value);\r\n        var s = (`${Math.round((value - valueRounded) * 60)}`);\r\n        s = s.length == 1 ? `0${s}` : s;\r\n        text = `${valueRounded}:${s}`;\r\n        break;\r\n\r\n      case 'time:min_dec':\r\n        value = value / 60;\r\n        var valueRounded = Math.floor(value);\r\n        var s = (`${Math.round((value - valueRounded) * 100)}`);\r\n        s = s.length == 1 ? `0${s}` : s;\r\n        text = `${valueRounded}.${s}`;\r\n        break;\r\n\r\n      default:\r\n        break;\r\n    }\r\n\r\n    return text;\r\n  }\r\n\r\n  getExponentialFactor() {\r\n    return this.options.exponentialFactor;\r\n  }\r\n\r\n  setExponentialFactor(value) {\r\n    this.options.exponentialFactor = value;\r\n  }\r\n\r\n  setExponentialLabelFactor(value) {\r\n    this.options.exponentialLabelFactor = value;\r\n  }\r\n\r\n  getExponentialLabelFactor() {\r\n    return this.options.exponentialLabelFactor;\r\n  }\r\n\r\n  setName(name) {\r\n    this.options.name = name;\r\n    return this;\r\n  }\r\n  /**\r\n   * Sets the label of the axis\r\n   * @param {Number} label - The label to display under the axis\r\n   * @memberof Axis\r\n   * @return {Axis} The current axis\r\n   */\r\n  setLabel(label) {\r\n    this.options.label = label;\r\n    return this;\r\n  }\r\n\r\n  setLabelFont(font) {\r\n    this.options.labelFont = font;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * @memberof Axis\r\n   * @return {String} The label value\r\n   */\r\n  getLabel() {\r\n    return this.options.label;\r\n  }\r\n\r\n  setSpan(_from, _to) {\r\n\r\n    this.options.span = [_from, _to];\r\n    return this;\r\n  }\r\n\r\n  getSpan() {\r\n    return this.options.span;\r\n  }\r\n\r\n  setLevel(level) {\r\n    this._level = level;\r\n    return this;\r\n  }\r\n\r\n  getLevel() {\r\n    return this._level;\r\n  }\r\n\r\n  setShift(shift) {\r\n    this.shift = shift;\r\n  }\r\n\r\n  getShift() {\r\n    return this.shift;\r\n  }\r\n\r\n  /**\r\n   * Changes the tick position\r\n   * @param {Number} pos - The new position ( \"outside\", \"centered\" or \"inside\" )\r\n   * @memberof Axis\r\n   * @return {Axis} The current axis\r\n   */\r\n  setTickPosition(pos) {\r\n    switch (pos) {\r\n      case 3:\r\n      case 'outside':\r\n      case Graph.TICKS_OUTSIDE:\r\n        {\r\n          pos = 3;\r\n          break;\r\n        }\r\n\r\n      case 2:\r\n      case 'centered':\r\n      case Graph.TICKS_CENTERED:\r\n        {\r\n          pos = 2;\r\n          break;\r\n        }\r\n\r\n      case 1:\r\n      case 'inside':\r\n      case Graph.TICKS_INSIDE:\r\n      default:\r\n        {\r\n          pos = 1;\r\n          break;\r\n        }\r\n    }\r\n\r\n    this.options.tickPosition = pos;\r\n\r\n    switch (this.options.tickPosition) {\r\n      case 3:\r\n        this.tickPx1 = -2;\r\n        this.tickPx2 = 0;\r\n        break;\r\n\r\n      case 2:\r\n        this.tickPx1 = -1;\r\n        this.tickPx2 = 1;\r\n        break;\r\n\r\n      default:\r\n      case 1:\r\n        this.tickPx1 = 0;\r\n        this.tickPx2 = 2;\r\n        break;\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Displays or hides the axis grids\r\n   * @param {Boolean} on - true to enable the grids, false to disable them\r\n   * @memberof Axis\r\n   * @return {Axis} The current axis\r\n   */\r\n  setGrids(on) {\r\n    this.options.primaryGrid = on;\r\n    this.options.secondaryGrid = on;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Displays or hides the axis primary grid\r\n   * @param {Boolean} on - true to enable the grids, false to disable it\r\n   * @memberof Axis\r\n   * @return {Axis} The current axis\r\n   */\r\n  setPrimaryGrid(on) {\r\n    this.options.primaryGrid = on;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Displays or hides the axis secondary grid\r\n   * @param {Boolean} on - true to enable the grids, false to disable it\r\n   * @memberof Axis\r\n   * @return {Axis} The current axis\r\n   */\r\n  setSecondaryGrid(on) {\r\n    this.options.secondaryGrid = on;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Enables primary grid\r\n   * @memberof Axis\r\n   * @return {Axis} The current axis\r\n   */\r\n  primaryGridOn() {\r\n    return this.setPrimaryGrid(true);\r\n  }\r\n\r\n  /**\r\n   * Disables primary grid\r\n   * @memberof Axis\r\n   * @return {Axis} The current axis\r\n   */\r\n  primaryGridOff() {\r\n    return this.setPrimaryGrid(false);\r\n  }\r\n\r\n  /**\r\n   * Enables secondary grid\r\n   * @memberof Axis\r\n   * @return {Axis} The current axis\r\n   */\r\n  secondaryGridOn() {\r\n    return this.setSecondaryGrid(true);\r\n  }\r\n\r\n  /**\r\n   * Disables secondary grid\r\n   * @return {Axis} The current axis\r\n   */\r\n  secondaryGridOff() {\r\n    return this.setSecondaryGrid(false);\r\n  }\r\n\r\n  /**\r\n   * Enables all the grids\r\n   * @return {Axis} The current axis\r\n   */\r\n  gridsOn() {\r\n    return this.setGrids(true);\r\n  }\r\n\r\n  /**\r\n   * Disables all the grids\r\n   * @return {Axis} The current axis\r\n   */\r\n  gridsOff() {\r\n    return this.setGrids(false);\r\n  }\r\n\r\n  /**\r\n   * @alias Axis#gridsOff\r\n   */\r\n  turnGridsOff() {\r\n    return this.gridsOff(...arguments);\r\n  }\r\n\r\n  /**\r\n   * @alias Axis#gridsOn\r\n   */\r\n  turnGridsOn() {\r\n    return this.gridsOn(...arguments);\r\n  }\r\n\r\n  /**\r\n   * Sets the color of the axis, the ticks and the label\r\n   * @memberof Axis\r\n   * @param {String} color - The new color of the primary ticks\r\n   * @return {Axis} The current axis\r\n   * @since 2.0.82\r\n   */\r\n  setColor(color = 'black') {\r\n    this.options.axisColor = color;\r\n    this.options.primaryTicksColor = color;\r\n    this.options.secondaryTicksColor = color;\r\n    this.options.ticksLabelColor = color;\r\n    this.options.primaryGridColor = color;\r\n    this.options.secondaryGridColor = color;\r\n    this.options.labelColor = color;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Sets the axis color\r\n   * @memberof Axis\r\n   * @param {String} color - The color to set the axis\r\n   * @return {Axis} The current axis\r\n   * @since 1.13.2\r\n   */\r\n  setAxisColor(color) {\r\n    this.options.axisColor = color;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Gets the axis color\r\n   * @memberof Axis\r\n   * @return {String} The color of the axis\r\n   * @since 1.13.2\r\n   */\r\n  getAxisColor() {\r\n    return this.options.axisColor || 'black';\r\n  }\r\n\r\n  setTickLabelOffset(offsetValue) {\r\n    this.options.tickLabelOffset = offsetValue;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Sets the color of the main ticks\r\n   * @memberof Axis\r\n   * @param {String} color - The new color of the primary ticks\r\n   * @return {Axis} The current axis\r\n   * @since 1.13.2\r\n   */\r\n  setPrimaryTicksColor(color) {\r\n    this.options.primaryTicksColor = color;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Gets the color of the main ticks\r\n   * @memberof Axis\r\n   * @return {String} The color of the primary ticks\r\n   * @since 1.13.2\r\n   */\r\n  getPrimaryTicksColor() {\r\n    return this.options.primaryTicksColor || 'black';\r\n  }\r\n\r\n  /**\r\n   * Sets the color of the secondary ticks\r\n   * @memberof Axis\r\n   * @param {String} color - The new color of the secondary ticks\r\n   * @return {Axis} The current axis\r\n   * @since 1.13.2\r\n   */\r\n  setSecondaryTicksColor(color) {\r\n    this.options.secondaryTicksColor = color;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Gets the color of the secondary ticks\r\n   * @memberof Axis\r\n   * @return {String} The color of the secondary ticks\r\n   * @since 1.13.2\r\n   */\r\n  getSecondaryTicksColor() {\r\n    return this.options.secondaryTicksColor || 'black';\r\n  }\r\n\r\n  /**\r\n   * Sets the color of the tick labels\r\n   * @memberof Axis\r\n   * @param {String} color - The new color of the tick labels\r\n   * @return {Axis} The current axis\r\n   * @since 1.13.2\r\n   */\r\n  setTicksLabelColor(color) {\r\n    this.options.ticksLabelColor = color;\r\n    if (Array.isArray(this.ticksLabels)) {\r\n      this.ticksLabels.forEach((tick) => {\r\n        tick.setAttribute('fill', color);\r\n      });\r\n    }\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Gets the color of the tick labels\r\n   * @memberof Axis\r\n   * @return {String} The color of the tick labels\r\n   * @since 1.13.2\r\n   */\r\n  getTicksLabelColor() {\r\n    return this.options.ticksLabelColor || 'black';\r\n  }\r\n\r\n  /**\r\n   * Sets the color of the primary grid\r\n   * @memberof Axis\r\n   * @param {String} color - The primary grid color\r\n   * @return {Axis} The current axis\r\n   * @since 1.13.3\r\n   */\r\n  setPrimaryGridColor(color) {\r\n    this.options.primaryGridColor = color;\r\n    this.setGridLinesStyle();\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Gets the color of the primary grid\r\n   * @memberof Axis\r\n   * @return {String} color - The primary grid color\r\n   * @since 1.13.3\r\n   */\r\n  getPrimaryGridColor() {\r\n    return this.options.primaryGridColor;\r\n  }\r\n\r\n  /**\r\n   * Sets the color of the primary grid\r\n   * @memberof Axis\r\n   * @param {String} color - The primary grid color\r\n   * @return {Axis} The current axis\r\n   * @since 1.13.3\r\n   */\r\n  setSecondaryGridColor(color) {\r\n    this.options.secondaryGridColor = color;\r\n    this.setGridLinesStyle();\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Gets the color of the secondary grid\r\n   * @memberof Axis\r\n   * @return {String} color - The secondary grid color\r\n   * @since 1.13.3\r\n   */\r\n  getSecondaryGridColor() {\r\n    return this.options.secondaryGridColor;\r\n  }\r\n\r\n  /**\r\n   * Sets the width of the primary grid lines\r\n   * @memberof Axis\r\n   * @param {Number} width - The width of the primary grid lines\r\n   * @return {Axis} The current axis\r\n   * @since 1.13.3\r\n   */\r\n  setPrimaryGridWidth(width) {\r\n    this.options.primaryGridWidth = width;\r\n    this.setGridLinesStyle();\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Gets the width of the primary grid lines\r\n   * @memberof Axis\r\n   * @return {Number} width - The width of the primary grid lines\r\n   * @since 1.13.3\r\n   */\r\n  getPrimaryGridWidth() {\r\n    return this.options.primaryGridWidth;\r\n  }\r\n\r\n  /**\r\n   * Sets the width of the secondary grid lines\r\n   * @memberof Axis\r\n   * @param {Number} width - The width of the secondary grid lines\r\n   * @return {Axis} The current axis\r\n   * @since 1.13.3\r\n   */\r\n  setSecondaryGridWidth(width) {\r\n    this.options.secondaryGridWidth = width;\r\n    this.setGridLinesStyle();\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Gets the width of the secondary grid lines\r\n   * @memberof Axis\r\n   * @return {Number} width - The width of the secondary grid lines\r\n   * @since 1.13.3\r\n   */\r\n  getSecondaryGridWidth() {\r\n    return this.options.secondaryGridWidth;\r\n  }\r\n\r\n  /**\r\n   * Sets the opacity of the primary grid lines\r\n   * @memberof Axis\r\n   * @param {Number} opacity - The opacity of the primary grid lines\r\n   * @return {Axis} The current axis\r\n   * @since 1.13.3\r\n   */\r\n  setPrimaryGridOpacity(opacity) {\r\n    this.options.primaryGridOpacity = opacity;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Gets the opacity of the primary grid lines\r\n   * @memberof Axis\r\n   * @return {Number} opacity - The opacity of the primary grid lines\r\n   * @since 1.13.3\r\n   */\r\n  getPrimaryGridOpacity() {\r\n    return this.options.primaryGridOpacity;\r\n  }\r\n\r\n  /**\r\n   * Sets the opacity of the secondary grid lines\r\n   * @memberof Axis\r\n   * @param {Number} opacity - The opacity of the secondary grid lines\r\n   * @return {Axis} The current axis\r\n   * @since 1.13.3\r\n   */\r\n  setSecondaryGridOpacity(opacity) {\r\n    this.options.secondaryGridOpacity = opacity;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Gets the opacity of the secondary grid lines\r\n   * @memberof Axis\r\n   * @return {Number} opacity - The opacity of the secondary grid lines\r\n   * @since 1.13.3\r\n   */\r\n  getSecondaryGridOpacity() {\r\n    return this.options.secondaryGridOpacity;\r\n  }\r\n\r\n  /**\r\n   * Sets the dasharray of the primary grid lines\r\n   * @memberof Axis\r\n   * @param {String} dasharray - The dasharray of the primary grid lines\r\n   * @return {Axis} The current axis\r\n   * @since 1.13.3\r\n   */\r\n  setPrimaryGridDasharray(dasharray) {\r\n    this.options.primaryGridDasharray = dasharray;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Gets the dasharray of the primary grid lines\r\n   * @memberof Axis\r\n   * @return {String} dasharray - The dasharray of the primary grid lines\r\n   * @since 1.13.3\r\n   */\r\n  getPrimaryGridDasharray() {\r\n    return this.options.primaryGridDasharray;\r\n  }\r\n\r\n  /**\r\n   * Sets the dasharray of the secondary grid lines\r\n   * @memberof Axis\r\n   * @param {String} dasharray - The dasharray of the secondary grid lines\r\n   * @return {Axis} The current axis\r\n   * @since 1.13.3\r\n   */\r\n  setSecondaryGridDasharray(dasharray) {\r\n    this.options.secondaryGridDasharray = dasharray;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Gets the dasharray of the secondary grid lines\r\n   * @memberof Axis\r\n   * @return {String} dasharray - The dasharray of the secondary grid lines\r\n   * @since 1.13.3\r\n   */\r\n  getSecondaryGridDasharray() {\r\n    return this.options.secondaryGridDasharray;\r\n  }\r\n\r\n  /**\r\n   * Sets the color of the label\r\n   * @memberof Axis\r\n   * @param {String} color - The new color of the label\r\n   * @return {Axis} The current axis\r\n   * @since 1.13.2\r\n   */\r\n  setLabelColor(color) {\r\n    this.options.labelColor = color;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Gets the color of the label\r\n   * @memberof Axis\r\n   * @return {String} The color of the label\r\n   * @since 1.13.2\r\n   */\r\n  getLabelColor() {\r\n    return this.options.labelColor;\r\n  }\r\n\r\n  setTickContent(dom, val, options) {\r\n    if (!options) {\r\n      options = {};\r\n    }\r\n\r\n    if (options.overwrite || !options.exponential) {\r\n\r\n      dom.textContent = options.overwrite || this.valueToText(val);\r\n\r\n    } else {\r\n      var log = Math.round(Math.log(val) / Math.log(10));\r\n      var unit = Math.floor(val * Math.pow(10, -log));\r\n\r\n      dom.textContent = (unit != 1) ? `${unit}x10` : '10';\r\n      var tspan = document.createElementNS(this.graph.ns, 'tspan');\r\n      tspan.textContent = log;\r\n      tspan.setAttribute('font-size', '0.7em');\r\n      tspan.setAttribute('dy', -5);\r\n      dom.appendChild(tspan);\r\n    }\r\n\r\n    if (options.fontSize) {\r\n      dom.setAttribute('font-size', options.fontSize);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @memberof Axis\r\n   * @returns {Boolean} true if it is an x axis, false otherwise\r\n   */\r\n  isX() {\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * @memberof Axis\r\n   * @returns {Boolean} true if it is an y axis, false otherwise\r\n   */\r\n  isY() {\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Sets the unit of the axis\r\n   * @param {String} unit - The unit of the axis\r\n   * @return {Axis} The current axis\r\n   * @memberof Axis\r\n   * @since 1.13.3\r\n   */\r\n  setUnit(unit) {\r\n    this.options.unit = unit;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Places the unit in every tick\r\n   * @param {Boolean} bool - ```true``` to place the unit, ```false``` otherwise\r\n   * @return {Axis} The current axis\r\n   * @memberof Axis\r\n   * @since 2.0.44\r\n   */\r\n  setUnitInTicks(bool) {\r\n    this.options.unitInTicks = bool;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Sets characters wrapping the unit\r\n   * @param {String} before - The string to insert before\r\n   * @param {String} after - The string to insert after\r\n   * @return {Axis} The current axis\r\n   * @memberof Axis\r\n   * @example axis.setUnitWrapper(\"[\", \"]\").setUnit('m'); // Will display [m]\r\n   * @since 1.13.3\r\n   */\r\n  setUnitWrapper(before, after) {\r\n    this.options.unitWrapperBefore = before;\r\n    this.options.unitWrapperAfter = after;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Allows the unit to scale with thousands\r\n   * @param {Boolean} on - Enables this mode\r\n   * @return {Axis} The current axis\r\n   * @memberof Axis\r\n   * @since 1.13.3\r\n   */\r\n  setUnitDecade(on) {\r\n    this.options.unitDecade = on;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Enable the scientific mode for the axis values. This way, big numbers can be avoided, e.g. \"1000000000\" would be displayed 1 with 10<sup>9</sup> or \"G\" shown on near the axis unit.\r\n   * @param {Boolean} on - Enables the scientific mode\r\n   * @return {Axis} The current axis\r\n   * @memberof Axis\r\n   * @since 1.13.3\r\n   */\r\n  setScientific(on) {\r\n    this.options.scientificScale = on;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * In the scientific mode, forces the axis to take a specific power of ten. Useful if you want to show kilometers instead of meters for example. In this case you would use \"3\" as a value.\r\n   * @param {Number} scientificScaleExponent - Forces the scientific scale to take a defined power of ten\r\n   * @return {Axis} The current axis\r\n   * @memberof Axis\r\n   * @since 1.13.3\r\n   * @see Axis#setScientific\r\n   */\r\n  setScientificScaleExponent(scientificScaleExponent) {\r\n    this.options.scientificScaleExponent = scientificScaleExponent;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * The engineer scaling is similar to the scientific scaling ({@link Axis#setScientificScale}) but allowing only mupltiples of 3 to be used to scale the axis (for instance, go from grams to kilograms while skipping decagrams and hexagrams)\r\n   * @param {Boolean} engineeringScaling - <code>true</code> to turn on the engineering scaling\r\n   * @return {Axis} The current axis\r\n   * @memberof Axis\r\n   * @since 1.13.3\r\n   * @see Axis#setScientific\r\n   */\r\n  setEngineering(engineeringScaling) { //bool\r\n    this.options.scientificScale = engineeringScaling;\r\n    this.options.engineeringScale = engineeringScaling;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Calculates the closest engineering exponent from a scientific exponent\r\n   * @param {Number} scientificExponent - The exponent of 10 based on which the axis will be scaled\r\n   * @return {Number} The appropriate engineering exponent\r\n   * @memberof Axis\r\n   * @since 1.13.3\r\n   * @private\r\n   */\r\n  getEngineeringExponent(scientificExponent) {\r\n\r\n    if (scientificExponent > 0) {\r\n      scientificExponent -= (scientificExponent % 3);\r\n    } else {\r\n      scientificExponent -= (3 - (-scientificExponent) % 3) % 3;\r\n    }\r\n\r\n    return scientificExponent;\r\n  }\r\n\r\n  /**\r\n   * Enables log scaling\r\n   * @param {Boolean} logScale - ```true``` to enable the log scaling, ```false``` to disable it\r\n   * @return {Axis} The current axis\r\n   * @memberof Axis\r\n   * @since 1.13.3\r\n   */\r\n  setLogScale(log) {\r\n    this.options.logScale = log;\r\n    return this;\r\n  }\r\n\r\n  isZoomed() {\r\n    return !(this.options.currentAxisMin == this.getMinValue() || this.options.currentAxisMax == this.getMaxValue());\r\n  }\r\n\r\n  hasAxis() {\r\n    return false;\r\n  }\r\n\r\n  getType() {\r\n    return null;\r\n  }\r\n\r\n  useKatexForLabel(use = true) {\r\n    this.options.useKatexForLabel = use;\r\n    return this;\r\n  }\r\n\r\n}\r\n\r\n/**\r\n *  @alias Axis#getVal\r\n */\r\nAxis.prototype.getValue = Axis.prototype.getVal;\r\n\r\n/**\r\n *  @alias Axis#getRelPx\r\n */\r\nAxis.prototype.getDeltaPx = Axis.prototype.getRelPx;\r\n\r\nEventMixin(Axis, \"axis\");\r\n\r\nexport default Axis;","import Axis from './graph.axis.js';\r\n\r\n/**\r\n * Generic constructor of a y axis\r\n * @augments Axis\r\n */\r\nclass AxisX extends Axis {\r\n  constructor( graph, topbottom, options = {} ) {\r\n    super( graph, topbottom, options );\r\n    this.top = topbottom == 'top';\r\n  }\r\n\r\n  /**\r\n   *  @private\r\n   *  Returns the position of the axis, used by refreshDrawingZone in core module\r\n   */\r\n  getAxisPosition() {\r\n    if ( !this.options.display ) {\r\n      return 0;\r\n    }\r\n\r\n    let size;\r\n\r\n    if ( this.options.tickLabelOffset == 0 ) {\r\n      // Normal mode, no offset\r\n      size = this.options.tickPosition == 1 ? 8 : 20;\r\n      size += this.graph.options.fontSize;\r\n    } else {\r\n      // With an offset, and ticks inside, axis position is actually 0. Otherwise, it's the heights of the ticks\r\n      size = this.options.tickPosition == 1 ? 0 : 12;\r\n    }\r\n\r\n    if ( this.getLabel() ) {\r\n      size += this.graph.options.fontSize;\r\n    }\r\n\r\n    return size;\r\n  }\r\n\r\n  /**\r\n   *  @returns {Boolean} always ```true```\r\n   */\r\n  isX() {\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   *  @returns {Boolean} always ```false```\r\n   */\r\n  isY() {\r\n    return false;\r\n  }\r\n\r\n  forceHeight( height ) {\r\n    this.options.forcedHeight = height;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   *  @private\r\n   *  Used to set the x position of the axis\r\n   */\r\n  setShift( shift ) {\r\n    this.shift = shift;\r\n    if ( shift === undefined || isNaN( shift ) || !this.graph.getDrawingHeight() || isNaN( this.graph.getDrawingHeight() ) ) {\r\n      return;\r\n    }\r\n\r\n    this.group.setAttribute(\r\n      'transform',\r\n      `translate(0 ${this.floating\r\n        ? this.getShift()\r\n        : this.top\r\n          ? this.shift\r\n          : this.graph.getDrawingHeight() - this.shift\r\n      })`\r\n    );\r\n  }\r\n\r\n  /**\r\n   *  Caclulates the maximum tick height\r\n   *  @return {Number} The maximum tick height\r\n   */\r\n  getMaxSizeTick() {\r\n    return ( this.top ? -1 : 1 ) * ( this.options.tickPosition == 1 ? 10 : 10 );\r\n  }\r\n\r\n  /**\r\n   *  Draws a tick. Mostly used internally but it can be useful if you want to make your own axes\r\n   *  @param {Number} value - The value in axis unit to place the tick\r\n   *  @param {Number} level - The importance of the tick\r\n   *  @param {Object} options - Further options to be passed to ```setTickContent```\r\n   *  @param {Number} forcedPos - Forces the position of the tick (for axis dependency)\r\n   */\r\n  drawTick( value, level, options, forcedPos ) {\r\n    var self = this,\r\n      val;\r\n\r\n    val = forcedPos || this.getPos( value );\r\n\r\n    if ( val == undefined || isNaN( val ) ) {\r\n      return;\r\n    }\r\n\r\n    var tick = this.nextTick( level, ( tick ) => {\r\n      tick.setAttribute(\r\n        'y1',\r\n        ( self.top ? 1 : -1 ) * self.tickPx1 * self.tickScaling[ level ]\r\n      );\r\n      tick.setAttribute(\r\n        'y2',\r\n        ( self.top ? 1 : -1 ) * self.tickPx2 * self.tickScaling[ level ]\r\n      );\r\n\r\n      if ( level == 1 ) {\r\n        tick.setAttribute( 'stroke', self.getPrimaryTicksColor() );\r\n      } else {\r\n        tick.setAttribute( 'stroke', self.getSecondaryTicksColor() );\r\n      }\r\n    } );\r\n\r\n    //      tick.setAttribute( 'shape-rendering', 'crispEdges' );\r\n    tick.setAttribute( 'x1', val );\r\n    tick.setAttribute( 'x2', val );\r\n    this.nextGridLine( level == 1, val, val, 0, this.graph.getDrawingHeight() );\r\n\r\n    //  this.groupTicks.appendChild( tick );\r\n    if ( level == 1 ) {\r\n      var tickLabel = this.nextTickLabel( ( tickLabel ) => {\r\n        tickLabel.setAttribute(\r\n          'y',\r\n          ( self.top ? -1 : 1 ) *\r\n          ( ( self.options.tickPosition == 1 ? 8 : 20 ) + ( self.top ? 10 : 0 ) ) +\r\n          this.options.tickLabelOffset\r\n        );\r\n        tickLabel.setAttribute( 'text-anchor', 'middle' );\r\n        if ( self.getTicksLabelColor() !== 'black' ) {\r\n          tickLabel.setAttribute( 'fill', self.getTicksLabelColor() );\r\n        }\r\n        tickLabel.style.dominantBaseline = 'hanging';\r\n      } );\r\n\r\n      tickLabel.setAttribute( 'x', val );\r\n      this.setTickContent( tickLabel, value, options );\r\n    }\r\n    //    this.ticks.push( tick );\r\n\r\n    return [ tick, tickLabel ];\r\n  }\r\n\r\n  drawLabel() {\r\n    // Place label correctly\r\n\r\n    if ( this.getLabelColor() !== 'black' ) {\r\n      this.label.setAttribute( 'fill', this.getLabelColor() );\r\n    }\r\n\r\n    if ( this.options.labelFont ) {\r\n      this.label.setAttribute( 'font-family', this.options.labelFont );\r\n    }\r\n\r\n    this.label.setAttribute( 'text-anchor', 'middle' );\r\n    this.label.setAttribute( 'style', 'display: initial;' );\r\n    this.label.setAttribute(\r\n      'x',\r\n      Math.abs( this.getMaxPx() + this.getMinPx() ) / 2\r\n    );\r\n    this.label.setAttribute(\r\n      'y',\r\n      ( this.top ? -1 : 1 ) *\r\n      ( ( this.options.tickPosition == 1 ? 10 : 25 ) +\r\n        this.graph.options.fontSize )\r\n    );\r\n    this.labelTspan.textContent = this.getLabel();\r\n  }\r\n\r\n  draw() {\r\n    var tickWidth = super.draw( ...arguments );\r\n    this.drawSpecifics();\r\n\r\n    return tickWidth;\r\n  }\r\n  /**\r\n   *  Paints the label, the axis line and anything else specific to x axes\r\n   */\r\n  drawSpecifics() {\r\n    // Adjusts group shift\r\n    //this.group.setAttribute('transform', 'translate(0 ' + this.getShift() + ')');\r\n\r\n    this.drawLabel();\r\n\r\n    this.line.setAttribute( 'x1', this.getMinPx() );\r\n    this.line.setAttribute( 'x2', this.getMaxPx() );\r\n    this.line.setAttribute( 'y1', 0 );\r\n    this.line.setAttribute( 'y2', 0 );\r\n\r\n    this.line.setAttribute( 'stroke', this.getAxisColor() );\r\n\r\n    if ( !this.top ) {\r\n      this.labelTspan.style.dominantBaseline = 'hanging';\r\n      this.expTspan.style.dominantBaseline = 'hanging';\r\n      this.expTspanExp.style.dominantBaseline = 'hanging';\r\n\r\n      this.unitTspan.style.dominantBaseline = 'hanging';\r\n      //  this.preunitTspan.style.dominantBaseline = 'hanging';\r\n    }\r\n\r\n    var span = this.getSpan();\r\n    this.line.setAttribute(\r\n      'marker-start', !this.options.splitMarks || span[ 0 ] == 0 ?\r\n      '' :\r\n      `url(#horionzalsplit_${this.graph.getId()})`\r\n    );\r\n    this.line.setAttribute(\r\n      'marker-end', !this.options.splitMarks || span[ 1 ] == 1 ?\r\n      '' :\r\n      `url(#horionzalsplit_${this.graph.getId()})`\r\n    );\r\n  }\r\n\r\n  /**\r\n   *  @private\r\n   */\r\n  _drawLine( pos, line ) {\r\n    let px = this.getPx( pos );\r\n\r\n    if ( !line ) {\r\n      line = document.createElementNS( this.graph.ns, 'line' );\r\n    } else {\r\n      line.setAttribute( 'display', 'initial' );\r\n    }\r\n\r\n    line.setAttribute( 'x1', px );\r\n    line.setAttribute( 'x2', px );\r\n\r\n    line.setAttribute( 'y1', 0 );\r\n    line.setAttribute( 'y2', this.graph.drawingSpaceHeight );\r\n\r\n    line.setAttribute( 'stroke', 'black' );\r\n    this.group.appendChild( line );\r\n\r\n    return line;\r\n  }\r\n\r\n  _hideLine( line ) {\r\n    if ( !line ) {\r\n      return;\r\n    }\r\n    line.setAttribute( 'display', 'none' );\r\n  }\r\n\r\n  /**\r\n   *  @private\r\n   */\r\n  handleMouseMoveLocal( x ) {\r\n    // handleMouseMoveLocal( x, y, e )\r\n    x -= this.graph.getPaddingLeft();\r\n    this.mouseVal = this.getVal( x );\r\n  }\r\n\r\n  /**\r\n   *  Caches the minimum px and maximum px position of the axis. Includes axis spans and flipping. Mostly used internally\r\n   */\r\n  setMinMaxFlipped() {\r\n    var interval = this.maxPx - this.minPx;\r\n\r\n    if ( isNaN( interval ) ) {\r\n      return;\r\n    }\r\n\r\n    var maxPx =\r\n      interval * this.options.span[ 1 ] + this.minPx - this.options.marginMax;\r\n    var minPx =\r\n      interval * this.options.span[ 0 ] + this.minPx + this.options.marginMin;\r\n\r\n    this.minPxFlipped = this.isFlipped() ? maxPx : minPx;\r\n    this.maxPxFlipped = this.isFlipped() ? minPx : maxPx;\r\n  }\r\n\r\n  getZProj( zValue ) {\r\n    return zValue * this.graph.options.zAxis.shiftX;\r\n  }\r\n}\r\n\r\nexport default AxisX;","import Axis from './graph.axis.js';\r\n\r\n/**\r\n * Generic constructor of a y axis\r\n * @extends Axis\r\n */\r\nclass AxisY extends Axis {\r\n  constructor( graph, leftright, options ) {\r\n    super( graph, leftright, options );\r\n    this.leftright = leftright;\r\n    this.left = leftright == 'left';\r\n  }\r\n\r\n  forceWidth( width ) {\r\n    this.options.forcedWidth = width;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   *  @private\r\n   */\r\n  setAxisPosition( shift ) {\r\n    this.shiftPosition = shift;\r\n  }\r\n\r\n  getAxisPosition() {\r\n    return this.shiftPosition || 0;\r\n  }\r\n\r\n  getAdditionalWidth() {\r\n    let pos = 0;\r\n    if ( this.getLabel() ) {\r\n      pos += this.graph.options.fontSize;\r\n    }\r\n\r\n    if ( this.isShown() ) {\r\n      pos += Math.abs( this.tickMargin );\r\n    }\r\n    return pos;\r\n  }\r\n\r\n  /**\r\n   *  @returns {Boolean} always ```false```\r\n   */\r\n  isX() {\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   *  @returns {Boolean} always ```true```\r\n   */\r\n  isY() {\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   *  @private\r\n   */\r\n  resetTicksLength() {\r\n    this.longestTick = [ false, 0 ];\r\n  }\r\n\r\n  /**\r\n   *  @private\r\n   */\r\n  getMaxSizeTick() {\r\n    // Gives an extra margin of 5px\r\n    return this.longestTick && this.longestTick[ 0 ] ?\r\n      this.longestTick[ 0 ].getComputedTextLength() + 5 :\r\n      0; //(this.left ? 10 : 0);\r\n  }\r\n\r\n  draw() {\r\n    this.tickMargin = this.left ?\r\n      -5 - this.tickPx1 * this.tickScaling[ 1 ] :\r\n      2 - this.tickPx1 * this.tickScaling[ 1 ];\r\n    var tickWidth = super.draw( ...arguments );\r\n    tickWidth += this.getAdditionalWidth();\r\n    this.drawSpecifics( tickWidth );\r\n\r\n    this.fullwidthlabel = tickWidth;\r\n\r\n    return tickWidth;\r\n  }\r\n\r\n  equalizePosition( width ) {\r\n    this.placeLabel( this.left ? -width : width );\r\n\r\n    if ( this.getLabel() ) {\r\n      return width + this.graph.options.fontSize;\r\n    }\r\n\r\n    return 0;\r\n  }\r\n\r\n  /**\r\n   *  @private\r\n   */\r\n  drawTick( value, level, options, forcedPos ) {\r\n    let pos, tick, tickLabel;\r\n\r\n    pos = forcedPos || this.getPos( value );\r\n\r\n    if ( pos == undefined || isNaN( pos ) ) {\r\n      return;\r\n    }\r\n\r\n    tick = this.nextTick( level, ( tick ) => {\r\n      tick.setAttribute(\r\n        'x1',\r\n        ( this.left ? 1 : -1 ) * this.tickPx1 * this.tickScaling[ level ]\r\n      );\r\n      tick.setAttribute(\r\n        'x2',\r\n        ( this.left ? 1 : -1 ) * this.tickPx2 * this.tickScaling[ level ]\r\n      );\r\n\r\n      if ( level == 1 ) {\r\n        tick.setAttribute( 'stroke', this.getPrimaryTicksColor() );\r\n      } else {\r\n        tick.setAttribute( 'stroke', this.getSecondaryTicksColor() );\r\n      }\r\n    } );\r\n\r\n    tick.setAttribute( 'y1', pos );\r\n    tick.setAttribute( 'y2', pos );\r\n\r\n    this.nextGridLine( level == 1, 0, this.graph.getDrawingWidth(), pos, pos );\r\n\r\n    //  this.groupTicks.appendChild( tick );\r\n    if ( level == 1 ) {\r\n      tickLabel = this.nextTickLabel( ( tickLabel ) => {\r\n        tickLabel.setAttribute(\r\n          'x',\r\n          this.tickMargin + this.options.tickLabelOffset\r\n        );\r\n        if ( this.getTicksLabelColor() !== 'black' ) {\r\n          tickLabel.setAttribute( 'fill', this.getTicksLabelColor() );\r\n        }\r\n\r\n        if ( this.left ) {\r\n          tickLabel.setAttribute( 'text-anchor', 'end' );\r\n        } else {\r\n          tickLabel.setAttribute( 'text-anchor', 'start' );\r\n        }\r\n        tickLabel.style.dominantBaseline = 'central';\r\n      } );\r\n\r\n      tickLabel.setAttribute( 'y', pos );\r\n      this.setTickContent( tickLabel, value, options );\r\n\r\n      if ( String( tickLabel.textContent ).length >= this.longestTick[ 1 ] ) {\r\n        this.longestTick[ 0 ] = tickLabel;\r\n        this.longestTick[ 1 ] = String( tickLabel.textContent ).length;\r\n      }\r\n    }\r\n  }\r\n\r\n  drawLabel() {\r\n    if ( this.getLabelColor() !== 'black' ) {\r\n      this.label.setAttribute( 'fill', this.getLabelColor() );\r\n    }\r\n\r\n    this.label.setAttribute( 'dominant-baseline', !this.left ? 'auto' : 'auto' );\r\n    this.labelTspan.textContent = this.getLabel();\r\n  }\r\n\r\n  placeLabel( y ) {\r\n    this.label.setAttribute(\r\n      'transform',\r\n      `translate(${y}, ${Math.abs(this.getMaxPx() + this.getMinPx()) /\r\n      2}) rotate(-90)`\r\n    );\r\n  }\r\n\r\n  /**\r\n   *  @private\r\n   */\r\n  drawSpecifics() {\r\n    // Place label correctly\r\n    //this.label.setAttribute('x', (this.getMaxPx() - this.getMinPx()) / 2);\r\n    /*\r\n    if ( !this.left ) {\r\n\r\n      this.labelTspan.style.dominantBaseline = 'hanging';\r\n      this.expTspan.style.dominantBaseline = 'hanging';\r\n      this.expTspanExp.style.dominantBaseline = 'hanging';\r\n\r\n      this.unitTspan.style.dominantBaseline = 'hanging';\r\n      this.preunitTspan.style.dominantBaseline = 'hanging';\r\n    }\r\n*/\r\n    this.line.setAttribute( 'y1', this.getMinPx() );\r\n    this.line.setAttribute( 'y2', this.getMaxPx() );\r\n    this.line.setAttribute( 'x1', 0 );\r\n    this.line.setAttribute( 'x2', 0 );\r\n\r\n    this.line.setAttribute( 'stroke', this.getAxisColor() );\r\n\r\n    var span = this.getSpan();\r\n    this.line.setAttribute(\r\n      'marker-start', !this.options.splitMarks || span[ 0 ] == 0 ?\r\n      '' :\r\n      `url(#verticalsplit_${this.graph.getId()})`\r\n    );\r\n    this.line.setAttribute(\r\n      'marker-end', !this.options.splitMarks || span[ 1 ] == 1 ?\r\n      '' :\r\n      `url(#verticalsplit_${this.graph.getId()})`\r\n    );\r\n  }\r\n\r\n  /**\r\n   *  @private\r\n   */\r\n  setShift( shift ) {\r\n    this.shift = shift;\r\n\r\n    if ( !this.shift || !this.graph.getWidth() ) {\r\n      return;\r\n    }\r\n\r\n    let xshift = this.shift;\r\n    xshift = this.floating ?\r\n      xshift :\r\n      this.isLeft() ?\r\n      xshift :\r\n      this.graph.getWidth() -\r\n      this.graph.getPaddingRight() -\r\n      this.graph.getPaddingLeft() -\r\n      xshift;\r\n    this.group.setAttribute( 'transform', `translate( ${xshift} 0 )` );\r\n    this.drawLabel();\r\n  }\r\n\r\n  /**\r\n   *  @private\r\n   */\r\n  isLeft() {\r\n    return this.left;\r\n  }\r\n\r\n  /**\r\n   *  @private\r\n   */\r\n  isRight() {\r\n    return !this.left;\r\n  }\r\n\r\n  /**\r\n   *  @private\r\n   */\r\n  isFlipped() {\r\n    return !this.options.flipped;\r\n  }\r\n\r\n  /**\r\n   *  @private\r\n   */\r\n  _drawLine( pos, line ) {\r\n    let px = this.getPx( pos );\r\n\r\n    if ( !line ) {\r\n      line = document.createElementNS( this.graph.ns, 'line' );\r\n    } else {\r\n      line.setAttribute( 'display', 'initial' );\r\n    }\r\n\r\n    line.setAttribute( 'y1', px );\r\n    line.setAttribute( 'y2', px );\r\n\r\n    line.setAttribute( 'x1', 0 );\r\n    line.setAttribute( 'x2', this.graph.drawingSpaceWidth );\r\n\r\n    line.setAttribute( 'stroke', 'black' );\r\n    this.group.appendChild( line );\r\n\r\n    return line;\r\n  }\r\n\r\n  _hideLine( line ) {\r\n    if ( !line ) {\r\n      return;\r\n    }\r\n\r\n    line.setAttribute( 'display', 'none' );\r\n  }\r\n\r\n  /**\r\n   *  @private\r\n   */\r\n  handleMouseMoveLocal( x, y ) {\r\n    y -= this.graph.getPaddingTop();\r\n    this.mouseVal = this.getVal( y );\r\n  }\r\n\r\n  /**\r\n   * Scales the axis with respect to the series contained in an x axis\r\n   * @param {Axis} [ axis = graph.getXAxis() ] - The X axis to use as a reference\r\n   * @param {Serie} [ excludeSerie ] - A serie to exclude\r\n   * @param {Number} [ start = xaxis.getCurrentMin() ] - The start of the boundary\r\n   * @param {Number} [ end = xaxis.getCurrentMax() ] - The end of the boundary\r\n   * @param {Boolean} [ min = true ] - Adapt the min\r\n   * @param {Boolean} [ max = true ] - Adapt the max\r\n   * @returns {Axis} The current axis\r\n   */\r\n  scaleToFitAxis( axis, excludeSerie, start, end, min, max ) {\r\n    //console.log( axis instanceof GraphAxis );\r\n    if ( !axis || !axis.isX() ) {\r\n      axis = this.graph.getXAxis();\r\n    }\r\n\r\n    if ( isNaN( start ) ) {\r\n      start = axis.getCurrentMin();\r\n    }\r\n\r\n    if ( isNaN( end ) ) {\r\n      end = axis.getCurrentMax();\r\n    }\r\n\r\n    if ( min === undefined ) {\r\n      min = true;\r\n    }\r\n\r\n    if ( max === undefined ) {\r\n      max = true;\r\n    }\r\n\r\n    if ( typeof excludeSerie == 'number' ) {\r\n      end = start;\r\n      start = excludeSerie;\r\n      excludeSerie = false;\r\n    }\r\n\r\n    var maxV = -Infinity,\r\n      minV = Infinity,\r\n      j = 0;\r\n\r\n    for ( var i = 0, l = this.graph.series.length; i < l; i++ ) {\r\n      if ( !this.graph.series[ i ].isShown() ) {\r\n        continue;\r\n      }\r\n\r\n      if ( this.graph.series[ i ] == excludeSerie ) {\r\n        continue;\r\n      }\r\n\r\n      if ( !( this.graph.series[ i ].getXAxis() == axis ) ||\r\n        this.graph.series[ i ].getYAxis() !== this\r\n      ) {\r\n        continue;\r\n      }\r\n\r\n      j++;\r\n\r\n      maxV = max ? Math.max( maxV, this.graph.series[ i ].getMax( start, end ) ) : 0;\r\n      minV = min ? Math.min( minV, this.graph.series[ i ].getMin( start, end ) ) : 0;\r\n    }\r\n\r\n    if ( j == 0 ) {\r\n      this.setMinMaxToFitSeries(); // No point was found\r\n    } else {\r\n      // If we wanted originally to resize min and max. Otherwise we use the current value\r\n      minV = min ? minV : this.getCurrentMin();\r\n      maxV = max ? maxV : this.getCurrentMax();\r\n\r\n      var interval = maxV - minV;\r\n\r\n      minV -= this.options.axisDataSpacing.min * interval;\r\n      maxV += this.options.axisDataSpacing.max * interval;\r\n\r\n      this._doZoomVal( minV, maxV );\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   *  Caches the minimum px and maximum px position of the axis. Includes axis spans and flipping. Mostly used internally\r\n   *  @return {Axis} The current axis instance\r\n   */\r\n  setMinMaxFlipped() {\r\n    var interval = this.maxPx - this.minPx;\r\n\r\n    if ( isNaN( interval ) ) {\r\n      return;\r\n    }\r\n\r\n    var maxPx =\r\n      this.maxPx - interval * this.options.span[ 0 ] - this.options.marginMin;\r\n    var minPx =\r\n      this.maxPx - interval * this.options.span[ 1 ] + this.options.marginMax;\r\n\r\n    this.minPxFlipped = this.isFlipped() ? maxPx : minPx;\r\n    this.maxPxFlipped = this.isFlipped() ? minPx : maxPx;\r\n  }\r\n\r\n  getZProj( zValue ) {\r\n    return zValue * this.graph.options.zAxis.shiftY;\r\n  }\r\n}\r\n\r\nexport default AxisY;","import AxisX from './graph.axis.x.js';\r\n\r\n/**\r\n * Generic constructor of a y axis\r\n * @class AxisXBar\r\n * @augments Axis\r\n */\r\nclass AxisXBar extends AxisX {\r\n  constructor( graph, topbottom, options = {} ) {\r\n    super( graph, topbottom, options );\r\n  }\r\n\r\n  /**\r\n   * @param {Object[]} categories - Categories array\r\n   * @param {(String|Number)} categories[].title - The title of the category (to be dispalyed)\r\n   * @param {(String|Number)} categories[].name - The name of the category (to indentify series)\r\n   * @returns {AxisBar} The current axis instance\r\n   */\r\n  set categories( categories ) {\r\n    this._barCategories = categories;\r\n    return this;\r\n  }\r\n\r\n  draw() {\r\n    var self = this,\r\n      tickLabel,\r\n      elements = this._barCategories;\r\n\r\n    if ( !this.series || this.series.length == 0 ) {\r\n      this.autoSeries();\r\n    }\r\n\r\n    this.forceMin( 0 );\r\n    this.forceMax( 1 );\r\n\r\n    this.cacheCurrentMin();\r\n    this.cacheCurrentMax();\r\n    this.cacheInterval();\r\n\r\n    if ( !elements ) {\r\n      return;\r\n    }\r\n\r\n    if ( !Array.isArray( elements ) ) {\r\n      elements = [ elements ];\r\n    }\r\n\r\n    // this.drawInit();\r\n\r\n    //var widthPerElement = width / elements.length;\r\n    for ( var i = 0; i <= elements.length; i++ ) {\r\n      this.drawTick( i / elements.length, 2 );\r\n\r\n      if ( i < elements.length ) {\r\n        tickLabel = this.nextTickLabel( function( tickLabel ) {\r\n          tickLabel.setAttribute(\r\n            'y',\r\n            ( self.top ? -1 : 1 ) *\r\n            ( ( self.options.tickPosition == 1 ? 8 : 20 ) + ( self.top ? 10 : 0 ) )\r\n          );\r\n          tickLabel.setAttribute( 'text-anchor', 'middle' );\r\n          if ( self.getTicksLabelColor() !== 'black' ) {\r\n            tickLabel.setAttribute( 'fill', self.getTicksLabelColor() );\r\n          }\r\n          tickLabel.style.dominantBaseline = 'hanging';\r\n        } );\r\n\r\n        tickLabel.setAttribute( 'x', this.getPos( ( i + 0.5 ) / elements.length ) );\r\n        tickLabel.textContent = elements[ i ].title;\r\n      }\r\n    }\r\n\r\n    this.drawSpecifics();\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Sets the series automatically\r\n   * @returns {AxisBar} The current axis instance\r\n   */\r\n  autoSeries() {\r\n    let series = [];\r\n    for ( let serie of this.graph.series ) {\r\n      if ( serie.getXAxis() == this ) {\r\n        series.push( serie );\r\n      }\r\n    }\r\n    this.setSeries( ...series );\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Sets the series that should belong to the axis\r\n   * @param {...(Series|Number|String)} series - List of series identified either by their instance, or their index (string or number)\r\n   * @returns {AxisBar} The current axis instance\r\n   */\r\n  setSeries() {\r\n    var self = this;\r\n    this.series = arguments;\r\n\r\n    Array.prototype.map.call( this.series, function( serie, index ) {\r\n      if ( !( typeof serie == 'object' ) ) {\r\n        serie = self.graph.getSerie( serie );\r\n      }\r\n\r\n      if ( serie.setCategoryConfig ) {\r\n        serie.setCategoryConfig( index, self._barCategories, self.series.length );\r\n      }\r\n    } );\r\n\r\n    this._getUsedCategories();\r\n\r\n    return this;\r\n  }\r\n\r\n  _getUsedCategories() {\r\n    let categories = {},\r\n      total = 0;\r\n\r\n    Array.prototype.map.call( this.series, ( serie ) => {\r\n      let usedCategories = serie.getUsedCategories();\r\n      for ( let cat of usedCategories ) {\r\n        if ( !categories.hasOwnProperty( cat ) ) {\r\n          categories[ cat ] = 1;\r\n          total += 1;\r\n        }\r\n\r\n        categories[ cat ]++;\r\n        total++;\r\n      }\r\n    } );\r\n    let accumulator = 0;\r\n    for ( let i in categories ) {\r\n      let temp = categories[ i ];\r\n      categories[ i ] = accumulator;\r\n      accumulator += temp;\r\n    }\r\n\r\n    let dispatchedCategories = {};\r\n\r\n    Array.prototype.map.call( this.series, ( serie ) => {\r\n      let scategories = serie.getUsedCategories(),\r\n        indices = {};\r\n\r\n      scategories.forEach( ( cat ) => {\r\n        dispatchedCategories[ cat ] = dispatchedCategories[ cat ] || 0.5;\r\n        indices[ cat ] = ( categories[ cat ] + dispatchedCategories[ cat ] ) / total;\r\n        dispatchedCategories[ cat ]++;\r\n      } );\r\n\r\n      serie.setDataIndices( indices, total );\r\n    } );\r\n  }\r\n\r\n  getType() {\r\n    return 'category';\r\n  }\r\n}\r\n\r\nexport default AxisXBar;","import Axis from './graph.axis.js';\r\nimport * as util from './graph.util.js';\r\n\r\nvar axisFormat = [\r\n\r\n  {\r\n\r\n    threshold: 20,\r\n    increments: {\r\n\r\n      1: {\r\n        increment: 1, // 1 minute\r\n        unit: 'i',\r\n        format: 'HH\"h\"MM (dd/mm/yy)'\r\n      },\r\n\r\n      2: { // 10 seconds\r\n        increment: 1,\r\n        unit: 's',\r\n        format: 'MM:ss\"s\"'\r\n      }\r\n    }\r\n  },\r\n\r\n  {\r\n\r\n    threshold: 50,\r\n    increments: {\r\n\r\n      1: {\r\n        increment: 1, // 1 minute\r\n        unit: 'i',\r\n        format: 'HH\"h\"MM (dd/mm/yy)'\r\n      },\r\n\r\n      2: { // 2 seconds\r\n        increment: 2,\r\n        unit: 's',\r\n        format: 'MM:ss\"s\"'\r\n      }\r\n    }\r\n  },\r\n\r\n  {\r\n\r\n    threshold: 100,\r\n    increments: {\r\n\r\n      1: {\r\n        increment: 1, // 1 minute\r\n        unit: 'i',\r\n        format: 'HH\"h\"MM (dd/mm/yy)'\r\n      },\r\n\r\n      2: { // 5 seconds\r\n        increment: 5,\r\n        unit: 's',\r\n        format: 'MM:ss\"s\"'\r\n      }\r\n    }\r\n  },\r\n\r\n  {\r\n\r\n    threshold: 600,\r\n    increments: {\r\n\r\n      1: {\r\n        increment: 10, // 1 minute\r\n        unit: 'i',\r\n        format: 'HH\"h\"MM (dd/mm/yy)'\r\n      },\r\n\r\n      2: { // 10 seconds\r\n        increment: 30,\r\n        unit: 's',\r\n        format: 'MM:ss\"s\"'\r\n      }\r\n    }\r\n  },\r\n\r\n  { // One day\r\n\r\n    threshold: 1000,\r\n    increments: {\r\n\r\n      1: { // 1h\r\n        increment: 1,\r\n        unit: 'h',\r\n        format: 'HH\"h\"MM (dd/mm/yy)'\r\n      },\r\n\r\n      2: { // 10 minutes\r\n        increment: 10,\r\n        unit: 'i',\r\n        format: 'MM\"min\"'\r\n      }\r\n    }\r\n  },\r\n\r\n  { // One day\r\n\r\n    threshold: 1500,\r\n    increments: {\r\n\r\n      1: {\r\n        increment: 1, // One day on the first axis\r\n        unit: 'd',\r\n        format: 'dd/mm/yyyy'\r\n      },\r\n\r\n      2: {\r\n        increment: 1,\r\n        unit: 'i',\r\n        format: 'H\"h\"MM'\r\n      }\r\n    }\r\n  },\r\n\r\n  { // One day\r\n\r\n    threshold: 3000,\r\n    increments: {\r\n\r\n      1: {\r\n        increment: 1, // One day on the first axis\r\n        unit: 'd',\r\n        format: 'dd/mm/yyyy'\r\n      },\r\n\r\n      2: {\r\n        increment: 2,\r\n        unit: 'i',\r\n        format: 'H\"h\"MM'\r\n      }\r\n    }\r\n  },\r\n\r\n  { // One day\r\n\r\n    threshold: 8000,\r\n    increments: {\r\n\r\n      1: {\r\n        increment: 1, // One day on the first axis\r\n        unit: 'd',\r\n        format: 'dd/mm/yyyy'\r\n      },\r\n\r\n      2: {\r\n        increment: 10,\r\n        unit: 'i',\r\n        format: 'H\"h\"MM'\r\n      }\r\n    }\r\n  },\r\n\r\n  { // One day\r\n\r\n    threshold: 26400,\r\n    increments: {\r\n\r\n      1: {\r\n        increment: 1, // One day on the first axis\r\n        unit: 'd',\r\n        format: 'dd/mm/yyyy'\r\n      },\r\n\r\n      2: {\r\n        increment: 20,\r\n        unit: 'i',\r\n        format: 'H\"h\"MM'\r\n      }\r\n    }\r\n  },\r\n\r\n  { // One day\r\n\r\n    threshold: 86400,\r\n    increments: {\r\n\r\n      1: {\r\n        increment: 1, // One day on the first axis\r\n        unit: 'd',\r\n        format: 'dd/mm/yyyy'\r\n      },\r\n\r\n      2: {\r\n        increment: 1,\r\n        unit: 'h',\r\n        format: 'H\"h\"MM'\r\n      }\r\n    }\r\n  },\r\n\r\n  { // One day\r\n\r\n    threshold: 200000,\r\n    increments: {\r\n\r\n      1: {\r\n\r\n        increment: 1,\r\n        unit: 'd',\r\n        format: 'dd/mm/yyyy'\r\n      },\r\n\r\n      2: {\r\n\r\n        increment: 2, // One day on the first axis\r\n        unit: 'h',\r\n        format: 'H\"h\"MM'\r\n      }\r\n    }\r\n  },\r\n\r\n  { // One day\r\n\r\n    threshold: 400000,\r\n    increments: {\r\n\r\n      1: {\r\n\r\n        increment: 1,\r\n        unit: 'd',\r\n        format: 'dd/mm/yyyy'\r\n      },\r\n\r\n      2: {\r\n\r\n        increment: 6, // One day on the first axis\r\n        unit: 'h',\r\n        format: 'H\"h\"MM'\r\n      }\r\n    }\r\n  },\r\n\r\n  { // One day\r\n\r\n    threshold: 1400000,\r\n    increments: {\r\n\r\n      1: {\r\n\r\n        increment: 1,\r\n        unit: 'd',\r\n        format: 'dd/mm/yyyy'\r\n      },\r\n\r\n      2: {\r\n\r\n        increment: 12, // One day on the first axis\r\n        unit: 'h',\r\n        format: 'HH\"h\"MM'\r\n      }\r\n    }\r\n  },\r\n\r\n  { // One day\r\n\r\n    threshold: 6400000,\r\n    increments: {\r\n\r\n      1: {\r\n\r\n        increment: 1,\r\n        unit: 'm',\r\n        format: 'mmmm yyyy'\r\n      },\r\n\r\n      2: {\r\n\r\n        increment: 1, // One day on the first axis\r\n        unit: 'd',\r\n        format: 'dd'\r\n      }\r\n    }\r\n  },\r\n\r\n  { // One day\r\n\r\n    threshold: 12400000,\r\n    increments: {\r\n\r\n      1: {\r\n\r\n        increment: 1,\r\n        unit: 'm',\r\n        format: 'mmmm yyyy'\r\n      },\r\n\r\n      2: {\r\n\r\n        increment: 2, // One day on the first axis\r\n        unit: 'd',\r\n        format: 'dd'\r\n      }\r\n    }\r\n  },\r\n\r\n  { // One day\r\n\r\n    threshold: 86400000 * 0.5,\r\n    increments: {\r\n\r\n      1: {\r\n\r\n        increment: 1,\r\n        unit: 'm',\r\n        format: 'mmmm yyyy'\r\n      },\r\n\r\n      2: {\r\n\r\n        increment: 7, // One day on the first axis\r\n        unit: 'd',\r\n        format: 'dd'\r\n      }\r\n    }\r\n  },\r\n\r\n  { // One day\r\n\r\n    threshold: 86400000 * 0.8,\r\n    increments: {\r\n\r\n      1: {\r\n\r\n        increment: 1,\r\n        unit: 'm',\r\n        format: 'mmmm yyyy'\r\n      },\r\n\r\n      2: {\r\n\r\n        increment: 15, // One day on the first axis\r\n        unit: 'd',\r\n        format: 'dd'\r\n      }\r\n    }\r\n  },\r\n\r\n  { // One month\r\n\r\n    threshold: 86400000 * 1,\r\n    increments: {\r\n\r\n      1: {\r\n        increment: 1,\r\n        unit: 'y',\r\n        format: 'yyyy'\r\n      },\r\n\r\n      2: {\r\n\r\n        increment: 3, // One day on the first axis\r\n        unit: 'm',\r\n        format: 'mm/yyyy'\r\n      }\r\n    }\r\n  },\r\n\r\n  { // One month\r\n\r\n    threshold: 86400000 * 2,\r\n    increments: {\r\n\r\n      1: {\r\n\r\n        increment: 1,\r\n        unit: 'y',\r\n        format: 'yyyy'\r\n      },\r\n\r\n      2: {\r\n\r\n        increment: 4, // One day on the first axis\r\n        unit: 'm',\r\n        format: 'mm/yyyy'\r\n      }\r\n    }\r\n  },\r\n\r\n  { // One month\r\n\r\n    threshold: 86400000 * 10,\r\n    increments: {\r\n\r\n      1: {\r\n\r\n        increment: 1,\r\n        unit: 'y',\r\n        format: 'yyyy'\r\n      },\r\n\r\n      2: {\r\n\r\n        increment: 6, // One day on the first axis\r\n        unit: 'm',\r\n        format: 'mm/yyyy'\r\n      }\r\n    }\r\n  },\r\n\r\n  { // One month\r\n\r\n    threshold: 86400000 * 12,\r\n    increments: {\r\n\r\n      1: {\r\n\r\n        increment: 1,\r\n        unit: 'y',\r\n        format: 'yyyy'\r\n      },\r\n\r\n      2: {\r\n\r\n        increment: 1, // One day on the first axis\r\n        unit: 'y',\r\n        format: 'yyyy'\r\n      }\r\n    }\r\n  },\r\n\r\n];\r\n\r\n/*\r\n * Date Format 1.2.3\r\n * (c) 2007-2009 Steven Levithan <stevenlevithan.com>\r\n * MIT license\r\n *\r\n * Includes enhancements by Scott Trenda <scott.trenda.net>\r\n * and Kris Kowal <cixar.com/~kris.kowal/>\r\n *\r\n * Accepts a date, a mask, or a date and a mask.\r\n * Returns a formatted version of the given date.\r\n * The date defaults to the current date/time.\r\n * The mask defaults to dateFormat.masks.default.\r\n */\r\n\r\nvar dateFormat = ( function() {\r\n  var token = /d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\\1?|[WLloSZ]|\"[^\"]*\"|'[^']*'/g,\r\n    timezone = /\\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\\d{4})?)\\b/g,\r\n    timezoneClip = /[^-+\\dA-Z]/g,\r\n    pad = function( val, len ) {\r\n      val = String( val );\r\n      len = len || 2;\r\n      while ( val.length < len ) val = `0${ val}`;\r\n      return val;\r\n    },\r\n    getWeek = function( d, f ) {\r\n      var onejan = new Date( d[ `${f }FullYear` ](), 0, 1 );\r\n      return Math.ceil( ( ( ( d - onejan ) / 86400000 ) + onejan[ `${f }Day` ]() + 1 ) / 7 );\r\n    };\r\n\r\n  // Regexes and supporting functions are cached through closure\r\n  return function( date, mask, utc ) {\r\n    var dF = dateFormat;\r\n\r\n    // You can't provide utc if you skip other args (use the \"UTC:\" mask prefix)\r\n    if ( arguments.length == 1 && Object.prototype.toString.call( date ) == '[object String]' && !/\\d/.test( date ) ) {\r\n      mask = date;\r\n      date = undefined;\r\n    }\r\n\r\n    // Passing date through Date applies Date.parse, if necessary\r\n    date = date ? new Date( date ) : new Date();\r\n    if ( isNaN( date ) ) throw SyntaxError( `invalid date:${ date}` );\r\n\r\n    mask = String( dF.masks[ mask ] || mask || dF.masks.default );\r\n\r\n    // Allow setting the utc argument via the mask\r\n    if ( mask.slice( 0, 4 ) == 'UTC:' ) {\r\n      mask = mask.slice( 4 );\r\n      utc = true;\r\n    }\r\n\r\n    var _ = utc ? 'getUTC' : 'get',\r\n      d = date[ `${_ }Date` ](),\r\n      D = date[ `${_ }Day` ](),\r\n      m = date[ `${_ }Month` ](),\r\n      y = date[ `${_ }FullYear` ](),\r\n      H = date[ `${_ }Hours` ](),\r\n      M = date[ `${_ }Minutes` ](),\r\n      s = date[ `${_ }Seconds` ](),\r\n      L = date[ `${_ }Milliseconds` ](),\r\n      o = utc ? 0 : date.getTimezoneOffset(),\r\n      flags = {\r\n        d: d,\r\n        dd: pad( d ),\r\n        ddd: dF.i18n.dayNames[ D ],\r\n        dddd: dF.i18n.dayNames[ D + 7 ],\r\n        m: m + 1,\r\n        mm: pad( m + 1 ),\r\n        mmm: dF.i18n.monthNames[ m ],\r\n        mmmm: dF.i18n.monthNames[ m + 12 ],\r\n        yy: String( y ).slice( 2 ),\r\n        yyyy: y,\r\n        h: H % 12 || 12,\r\n        hh: pad( H % 12 || 12 ),\r\n        H: H,\r\n        HH: pad( H ),\r\n        M: M,\r\n        MM: pad( M ),\r\n        s: s,\r\n        ss: pad( s ),\r\n        l: pad( L, 3 ),\r\n        L: pad( L > 99 ? Math.round( L / 10 ) : L ),\r\n        t: H < 12 ? 'a' : 'p',\r\n        tt: H < 12 ? 'am' : 'pm',\r\n        T: H < 12 ? 'A' : 'P',\r\n        TT: H < 12 ? 'AM' : 'PM',\r\n        Z: utc ? 'UTC' : ( String( date ).match( timezone ) || [ '' ] ).pop().replace( timezoneClip, '' ),\r\n        o: ( o > 0 ? '-' : '+' ) + pad( Math.floor( Math.abs( o ) / 60 ) * 100 + Math.abs( o ) % 60, 4 ),\r\n        S: [ 'th', 'st', 'nd', 'rd' ][ d % 10 > 3 ? 0 : ( d % 100 - d % 10 != 10 ) * d % 10 ],\r\n        W: getWeek( date, _ ),\r\n      };\r\n\r\n    return mask.replace( token, function( $0 ) {\r\n      return $0 in flags ? flags[ $0 ] : $0.slice( 1, $0.length - 1 );\r\n    } );\r\n  };\r\n} )();\r\n\r\n// Some common format strings\r\ndateFormat.masks = {\r\n  'default': 'ddd mmm dd yyyy HH:MM:ss',\r\n  shortDate: 'm/d/yy',\r\n  mediumDate: 'mmm d, yyyy',\r\n  longDate: 'mmmm d, yyyy',\r\n  fullDate: 'dddd, mmmm d, yyyy',\r\n  shortTime: 'h:MM TT',\r\n  mediumTime: 'h:MM:ss TT',\r\n  longTime: 'h:MM:ss TT Z',\r\n  isoDate: 'yyyy-mm-dd',\r\n  isoTime: 'HH:MM:ss',\r\n  isoDateTime: \"yyyy-mm-dd'T'HH:MM:ss\",\r\n  isoUtcDateTime: \"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'\"\r\n};\r\n\r\n// Internationalization strings\r\ndateFormat.i18n = {\r\n  dayNames: [\r\n    'Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat',\r\n    'Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'\r\n  ],\r\n  monthNames: [\r\n    'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec',\r\n    'January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'\r\n  ]\r\n};\r\n\r\n/* END DATE FORMAT */\r\n\r\nfunction getClosestIncrement( value, basis ) {\r\n  return Math.round( value / basis ) * basis;\r\n}\r\n\r\nfunction roundDate( date, format ) {\r\n\r\n  switch ( format.unit ) {\r\n\r\n    case 's': // Round at n hour\r\n\r\n      date.setSeconds( getClosestIncrement( date.getSeconds(), format.increment ) );\r\n      date.setMilliseconds( 0 );\r\n\r\n      break;\r\n\r\n    case 'i': // Round at n hour\r\n\r\n      date.setMinutes( getClosestIncrement( date.getMinutes(), format.increment ) );\r\n      date.setSeconds( 0 );\r\n      date.setMilliseconds( 0 );\r\n\r\n      break;\r\n\r\n    case 'h': // Round at n hour\r\n\r\n      date.setHours( getClosestIncrement( date.getHours(), format.increment ) );\r\n\r\n      date.setMinutes( 0 );\r\n      date.setSeconds( 0 );\r\n      date.setMilliseconds( 0 );\r\n\r\n      break;\r\n\r\n    case 'd':\r\n\r\n      date.setMinutes( 0 );\r\n      date.setSeconds( 0 );\r\n      date.setMilliseconds( 0 );\r\n      date.setHours( 0 );\r\n\r\n      date.setDate( getClosestIncrement( date.getDate(), format.increment ) );\r\n\r\n      break;\r\n\r\n    case 'm':\r\n\r\n      date.setMinutes( 0 );\r\n      date.setSeconds( 0 );\r\n      date.setMilliseconds( 0 );\r\n      date.setHours( 0 );\r\n      date.setDate( 1 );\r\n\r\n      date.setMonth( getClosestIncrement( date.getMonth(), format.increment ) );\r\n\r\n      break;\r\n\r\n    case 'y':\r\n\r\n      date.setMinutes( 0 );\r\n      date.setSeconds( 0 );\r\n      date.setMilliseconds( 0 );\r\n      date.setHours( 0 );\r\n      date.setDate( 1 );\r\n      date.setMonth( 0 );\r\n\r\n      //date.setYear( getClosest( date.getDate(), format.increment ) );\r\n\r\n      break;\r\n\r\n    default:\r\n      {\r\n        throw new Error( 'Date format not recognized' );\r\n      }\r\n  }\r\n\r\n  return date;\r\n}\r\n\r\nfunction incrementDate( date, format ) {\r\n\r\n  switch ( format.unit ) {\r\n\r\n    case 's':\r\n\r\n      date.setSeconds( date.getSeconds() + format.increment );\r\n      date.setMilliseconds( 0 );\r\n\r\n      break;\r\n\r\n    case 'i':\r\n\r\n      date.setMinutes( date.getMinutes() + format.increment );\r\n      date.setSeconds( 0 );\r\n      date.setMilliseconds( 0 );\r\n\r\n      break;\r\n\r\n    case 'h': // Round at n hour\r\n\r\n      date.setHours( date.getHours() + format.increment );\r\n      date.setMinutes( 0 );\r\n      date.setSeconds( 0 );\r\n      date.setMilliseconds( 0 );\r\n\r\n      break;\r\n\r\n    case 'd':\r\n\r\n      date.setDate( date.getDate() + format.increment );\r\n      date.setMinutes( 0 );\r\n      date.setSeconds( 0 );\r\n      date.setMilliseconds( 0 );\r\n      date.setHours( 0 );\r\n\r\n      break;\r\n\r\n    case 'm':\r\n\r\n      date.setMonth( date.getMonth() + format.increment );\r\n      date.setMinutes( 0 );\r\n      date.setSeconds( 0 );\r\n      date.setMilliseconds( 0 );\r\n      date.setHours( 0 );\r\n      date.setDate( 1 );\r\n\r\n      break;\r\n\r\n    case 'y':\r\n\r\n      date.setFullYear( date.getFullYear() + format.increment );\r\n\r\n      date.setMinutes( 0 );\r\n      date.setSeconds( 0 );\r\n      date.setMilliseconds( 0 );\r\n      date.setHours( 0 );\r\n      date.setDate( 1 );\r\n      date.setMonth( 0 );\r\n\r\n      break;\r\n\r\n    default:\r\n      {\r\n        throw new Error( 'Date format not recognized' );\r\n      }\r\n  }\r\n\r\n  return date;\r\n}\r\n\r\nfunction getGroup( axis, level, number ) {\r\n\r\n  if ( axis.groups[ level ][ number ] ) {\r\n    axis.groups[ level ][ number ].group.setAttribute( 'display', 'block' );\r\n    return axis.groups[ level ][ number ];\r\n  }\r\n\r\n  var g = {\r\n\r\n    group: document.createElementNS( axis.graph.ns, 'g' ),\r\n    text: document.createElementNS( axis.graph.ns, 'text' )\r\n  };\r\n\r\n  var line = document.createElementNS( axis.graph.ns, 'line' );\r\n\r\n  line.setAttribute( 'stroke', 'black' );\r\n  line.setAttribute( 'y1', 0 );\r\n  switch ( level ) {\r\n\r\n    case 2:\r\n\r\n      line.setAttribute( 'y2', 6 );\r\n      g.text.setAttribute( 'y', 15 );\r\n\r\n      g.line = line;\r\n\r\n      g.group.appendChild( g.line );\r\n      break;\r\n\r\n    default:\r\n    case 1:\r\n\r\n      line.setAttribute( 'y2', 20 );\r\n      g.text.setAttribute( 'y', 10 );\r\n\r\n      g.line1 = line;\r\n      g.line2 = line.cloneNode();\r\n\r\n      g.group.appendChild( g.line1 );\r\n      g.group.appendChild( g.line2 );\r\n\r\n      break;\r\n  }\r\n\r\n  g.text.setAttribute( 'text-anchor', 'middle' );\r\n  g.text.setAttribute( 'dominant-baseline', 'middle' );\r\n\r\n  g.group.appendChild( g.text );\r\n\r\n  axis.getWrapper( level ).appendChild( g.group );\r\n\r\n  return axis.groups[ level ][ number ] = g;\r\n}\r\n\r\nfunction hideGroups( axis, level, from ) {\r\n\r\n  for ( ; from < axis.groups[ level ].length; from++ ) {\r\n\r\n    hideGroup( axis.groups[ level ][ from ] );\r\n  }\r\n}\r\n\r\nfunction hideGroup( group ) {\r\n  group.group.setAttribute( 'display', 'none' );\r\n}\r\n\r\nfunction getDateText( date, format ) {\r\n\r\n  return dateFormat( date, format );\r\n}\r\n\r\nfunction renderGroup( level, group, text, minPx, maxPx, x1, x2 ) {\r\n\r\n  switch ( level ) {\r\n\r\n    case 2:\r\n\r\n      if ( x1 < minPx || x1 > maxPx ) {\r\n\r\n        hideGroup( group );\r\n        return;\r\n      }\r\n\r\n      group.line.setAttribute( 'x1', x1 );\r\n      group.line.setAttribute( 'x2', x1 );\r\n      group.text.setAttribute( 'x', x1 );\r\n      group.text.textContent = text;\r\n\r\n      break;\r\n\r\n    default:\r\n    case 1:\r\n\r\n      var x1B = Math.max( minPx, Math.min( maxPx, x1 ) ),\r\n        x2B = Math.max( minPx, Math.min( maxPx, x2 ) );\r\n\r\n      if ( isNaN( x2B ) || isNaN( x1B ) ) {\r\n        return;\r\n      }\r\n\r\n      group.line1.setAttribute( 'x1', x1B );\r\n      group.line2.setAttribute( 'x1', x2B );\r\n\r\n      group.line1.setAttribute( 'x2', x1B );\r\n      group.line2.setAttribute( 'x2', x2B );\r\n\r\n      group.text.setAttribute( 'x', ( x1B + x2B ) / 2 );\r\n\r\n      while ( text.length * 8 > x2B - x1B ) {\r\n\r\n        text = `${text.substr( 0, text.length - 2 ) }.`;\r\n\r\n        if ( text.length == 1 ) {\r\n          text = '';\r\n          break;\r\n        }\r\n      }\r\n\r\n      group.text.textContent = text;\r\n      break;\r\n  }\r\n}\r\n\r\nclass GraphTimeAxis extends Axis {\r\n\r\n  constructor() {\r\n\r\n    super( ...arguments );\r\n  }\r\n\r\n  init( graph, options ) {\r\n\r\n    super.init( graph, options );\r\n\r\n    this.wrapper = {\r\n      1: document.createElementNS( graph.ns, 'g' ),\r\n      2: document.createElementNS( graph.ns, 'g' )\r\n    };\r\n    this.groups = {\r\n      1: [],\r\n      2: []\r\n    };\r\n\r\n    var rect = document.createElementNS( graph.ns, 'rect' );\r\n    rect.setAttribute( 'fill', '#c0c0c0' );\r\n    rect.setAttribute( 'stroke', '#808080' );\r\n    rect.setAttribute( 'height', '20' );\r\n    rect.setAttribute( 'x', '0' );\r\n    rect.setAttribute( 'y', '0' );\r\n\r\n    this.rect = rect;\r\n\r\n    this.wrapper[ 1 ].appendChild( this.rect );\r\n\r\n    //    this.init( graph, options );\r\n\r\n    this.group.appendChild( this.wrapper[ 1 ] );\r\n    this.group.appendChild( this.wrapper[ 2 ] );\r\n\r\n    this.wrapper[ 1 ].setAttribute( 'transform', 'translate( 0, 25 )' );\r\n    this.wrapper[ 2 ].setAttribute( 'transform', 'translate( 0, 00 )' );\r\n  }\r\n\r\n  draw() { // Redrawing of the axis\r\n\r\n    //this.drawInit();\r\n\r\n    this.cacheCurrentMax();\r\n    this.cacheCurrentMin();\r\n\r\n    if ( this.currentAxisMin == undefined || this.currentAxisMax == undefined ) {\r\n      this.setMinMaxToFitSeries( true ); // We reset the min max as a function of the series\r\n\r\n    }\r\n\r\n    this.line.setAttribute( 'x1', this.getMinPx() );\r\n    this.line.setAttribute( 'x2', this.getMaxPx() );\r\n    this.line.setAttribute( 'y1', 0 );\r\n    this.line.setAttribute( 'y2', 0 );\r\n\r\n    var widthPx = this.maxPx - this.minPx;\r\n    var widthTime = this.getCurrentInterval();\r\n\r\n    var timePerPx = widthTime / widthPx;\r\n\r\n    var maxVal = this.getCurrentMax();\r\n    var minVal = this.getCurrentMin();\r\n\r\n    this.rect.setAttribute( 'width', widthPx );\r\n    this.rect.setAttribute( 'x', this.minPx );\r\n\r\n    if ( !maxVal || !minVal ) {\r\n      return 0;\r\n    }\r\n\r\n    var currentFormat;\r\n\r\n    for ( i = 0; i < axisFormat.length; i++ ) {\r\n\r\n      if ( axisFormat[ i ].threshold > timePerPx ) {\r\n        currentFormat = axisFormat[ i ];\r\n\r\n        break;\r\n      }\r\n\r\n    }\r\n\r\n    if ( !currentFormat ) {\r\n      currentFormat = axisFormat[ axisFormat.length - 1 ];\r\n    }\r\n\r\n    var xVal1,\r\n      xVal2,\r\n      level = 0,\r\n      dateFirst,\r\n      currentDate,\r\n      text,\r\n      group,\r\n      i;\r\n\r\n    for ( level = 1; level <= 2; level++ ) {\r\n\r\n      if ( !util.isNumeric( minVal ) ) {\r\n        hideGroups( this, level, 0 );\r\n        break;\r\n      }\r\n\r\n      dateFirst = new Date( minVal );\r\n\r\n      currentDate = roundDate( dateFirst, currentFormat.increments[ level ] );\r\n\r\n      i = 0;\r\n\r\n      do {\r\n        /** @ignore */\r\n        text = getDateText( currentDate, currentFormat.increments[ level ].format );\r\n        group = getGroup( this, level, i );\r\n\r\n        xVal1 = this.getPx( currentDate.getTime() );\r\n        currentDate = incrementDate( currentDate, currentFormat.increments[ level ] );\r\n        xVal2 = this.getPx( currentDate.getTime() );\r\n\r\n        renderGroup( level, group, text, this.getMinPx(), this.getMaxPx(), xVal1, xVal2 );\r\n\r\n        i++;\r\n        if ( i > 100 ) {\r\n          break;\r\n        }\r\n      } while ( currentDate.getTime() < maxVal );\r\n\r\n      hideGroups( this, level, i );\r\n    }\r\n\r\n  }\r\n\r\n  isX() {\r\n    return true;\r\n  }\r\n\r\n  getWrapper( level ) {\r\n    return this.wrapper[ level ];\r\n  }\r\n\r\n  setShift( shift ) {\r\n    this.shift = shift;\r\n    this.group.setAttribute( 'transform', `translate(0 ${ this.top ? this.shift : ( this.graph.getDrawingHeight() - this.shift ) })` );\r\n  }\r\n\r\n  getAxisPosition() {\r\n    return 60;\r\n  }\r\n\r\n  setMinMaxFlipped() {\r\n\r\n    var interval = this.maxPx - this.minPx;\r\n    var maxPx = interval * this.options.span[ 1 ] + this.minPx;\r\n    var minPx = interval * this.options.span[ 0 ] + this.minPx;\r\n\r\n    this.minPxFlipped = this.isFlipped() ? maxPx : minPx;\r\n    this.maxPxFlipped = this.isFlipped() ? minPx : maxPx;\r\n  }\r\n\r\n}\r\n\r\nexport default GraphTimeAxis;","import * as util from '../graph.util.js';\r\n\r\nvar ErrorBarMixin = {\r\n  /*\r\n    doErrorDraw: function( orientation, error, originVal, originPx, xpx, ypx ) {\r\n\r\n      if ( !( error instanceof Array ) ) {\r\n        error = [ error ];\r\n      }\r\n\r\n      var functionName = orientation == 'y' ? 'getY' : 'getX';\r\n      var bars = orientation == 'y' ? [ 'top', 'bottom' ] : [ 'left', 'right' ];\r\n      var j;\r\n\r\n      if ( isNaN( xpx ) || isNaN( ypx ) ) {\r\n        return;\r\n      }\r\n\r\n      for ( var i = 0, l = error.length; i < l; i++ ) {\r\n\r\n        if ( error[ i ] instanceof Array ) { // TOP\r\n\r\n          j = bars[ 0 ];\r\n          this.errorstyles[ i ].paths[ j ] += \" M \" + xpx + \" \" + ypx;\r\n          this.errorstyles[ i ].paths[ j ] += this.makeError( orientation, i, this[ functionName ]( originVal + error[ i ][ 0 ] ), originPx, j );\r\n\r\n          j = bars[ 1 ];\r\n          this.errorstyles[ i ].paths[ j ] += \" M \" + xpx + \" \" + ypx;\r\n          this.errorstyles[ i ].paths[ j ] += this.makeError( orientation, i, this[ functionName ]( originVal - error[ i ][ 1 ] ), originPx, j );\r\n\r\n        } else {\r\n\r\n          j = bars[ 0 ];\r\n\r\n          this.errorstyles[ i ].paths[ j ] += \" M \" + xpx + \" \" + ypx;\r\n          this.errorstyles[ i ].paths[ j ] += this.makeError( orientation, i, this[ functionName ]( originVal + error[ i ] ), originPx, j );\r\n          j = bars[ 1 ];\r\n          this.errorstyles[ i ].paths[ j ] += \" M \" + xpx + \" \" + ypx;\r\n          this.errorstyles[ i ].paths[ j ] += this.makeError( orientation, i, this[ functionName ]( originVal - error[ i ] ), originPx, j );\r\n        }\r\n      }\r\n    },\r\n  */\r\n\r\n  /*\r\n    makeError: function( orientation, type, coord, origin, quadOrientation ) {\r\n\r\n      var method;\r\n      switch ( this.errorstyles[ level ].type ) {\r\n        case 'bar':\r\n          method = \"makeBar\";\r\n          break;\r\n\r\n        case 'box':\r\n          method = \"makeBox\";\r\n          break;\r\n      }\r\n\r\n      return this[ method + orientation.toUpperCase() ]( coord, origin, this.errorstyles[ level ][ quadOrientation ] );\r\n\r\n    },*/\r\n\r\n  makeBarY: function( coordY, origin, style ) {\r\n    if ( !coordY || style === undefined ) {\r\n      return;\r\n    }\r\n    var width = !util.isNumeric( style.width ) ? 10 : style.width;\r\n    return ` V ${coordY} m -${width / 2} 0 h ${width} m -${width /\r\n      2} 0 V ${origin} `;\r\n  },\r\n\r\n  makeBoxY: function( coordY, origin, style ) {\r\n    if ( !coordY || style === undefined ) {\r\n      return;\r\n    }\r\n    return ` m 5 0 V ${coordY} h -10 V ${origin} m 5 0 `;\r\n  },\r\n\r\n  makeBarX: function( coordX, origin, style ) {\r\n    if ( !coordX || style === undefined ) {\r\n      return;\r\n    }\r\n    var height = !util.isNumeric( style.width ) ? 10 : style.width;\r\n    return ` H ${coordX} m 0 -${height / 2} v ${height} m 0 -${height /\r\n      2} H ${origin} `;\r\n  },\r\n\r\n  makeBoxX: function( coordX, origin, style ) {\r\n    if ( !coordX || style === undefined ) {\r\n      return;\r\n    }\r\n    return ` v 5 H ${coordX} v -10 H ${origin} v 5 `;\r\n  },\r\n  /*\r\n    check: function( index, valY, valX ) {\r\n\r\n      var dx, dy;\r\n\r\n      if ( ( this.getType() == Graph.SERIE_LINE || this.getType() == Graph.SERIE_SCATTER ) ) {\r\n\r\n        if ( !( dx = this.data[ index * 2 ] ) || !( dy = this.data[ index * 2 + 1 ] ) ) { //\r\n          return;\r\n        }\r\n      }\r\n\r\n      if ( dx === undefined ) {\r\n        return;\r\n      }\r\n\r\n      for ( var i = 0, l = valY.length; i < l; i++ ) {\r\n\r\n        if ( Array.isArray( valY[ i ] ) ) {\r\n\r\n          if ( !isNaN( valY[ i ][ 0 ] ) ) {\r\n            this._checkY( dy + valY[ i ][ 0 ] );\r\n          }\r\n\r\n          if ( !isNaN( valY[ i ][ 1 ] ) ) {\r\n            this._checkY( dy - valY[ i ][ 1 ] );\r\n          }\r\n\r\n        } else {\r\n\r\n          if ( !isNaN( valY[ i ] ) ) {\r\n            this._checkY( dy + valY[ i ] );\r\n            this._checkY( dy - valY[ i ] );\r\n          }\r\n        }\r\n      }\r\n\r\n      for ( var i = 0, l = valX.length; i < l; i++ ) {\r\n\r\n        if ( Array.isArray( valX[ i ] ) ) {\r\n\r\n          if ( !isNaN( valX[ i ][ 0 ] ) ) {\r\n            this._checkX( dx - valX[ i ][ 0 ] );\r\n          }\r\n\r\n          if ( !isNaN( valX[ i ][ 1 ] ) ) {\r\n            this._checkX( dx + valX[ i ][ 1 ] );\r\n          }\r\n\r\n        } else {\r\n\r\n          if ( !isNaN( valY[ i ] ) ) {\r\n            this._checkX( dx - valX[ i ] );\r\n            this._checkX( dx + valX[ i ] );\r\n          }\r\n        }\r\n      }\r\n\r\n    },\r\n  */\r\n\r\n  /**\r\n   *\r\n   *  @example serie.setErrorBarStyle( [ { type: 'bar', x: {} }, { type: 'box', top: { strokeColor: 'green', fillColor: 'olive' }, bottom: { strokeColor: 'red', fillColor: \"#800000\" }  } ] );\r\n   */\r\n  setErrorBarStyle: function( errorstyle ) {\r\n    this.errorbarStyle = this._setErrorStyle( errorstyle );\r\n\r\n    return this;\r\n  },\r\n\r\n  setErrorBoxStyle: function( errorstyle ) {\r\n    this.errorboxStyle = this._setErrorStyle( errorstyle );\r\n    return this;\r\n  },\r\n\r\n  _setErrorStyle( errorstyles = {} ) {\r\n    var styles = [];\r\n    var pairs = [\r\n      [ 'y', 'top', 'bottom' ],\r\n      [ 'x', 'left', 'right' ]\r\n    ];\r\n\r\n    var makePath = ( style ) => {\r\n      style.dom = document.createElementNS( this.graph.ns, 'path' );\r\n      style.dom.setAttribute( 'fill', style.fillColor || 'none' );\r\n      style.dom.setAttribute( 'stroke', style.strokeColor || 'black' );\r\n      style.dom.setAttribute( 'stroke-opacity', style.strokeOpacity || 1 );\r\n      style.dom.setAttribute( 'fill-opacity', style.fillOpacity || 1 );\r\n      style.dom.setAttribute( 'stroke-width', style.strokeWidth || 1 );\r\n\r\n      this.groupMain.appendChild( style.dom );\r\n    };\r\n    // i is bar or box\r\n\r\n    var styles = {};\r\n\r\n    if ( typeof errorstyles == 'string' ) {\r\n      errorstyles = {};\r\n    }\r\n\r\n    for ( var j = 0, l = pairs.length; j < l; j++ ) {\r\n      if ( errorstyles.all ) {\r\n        errorstyles[ pairs[ j ][ 1 ] ] = util.extend( true, {}, errorstyles.all );\r\n        errorstyles[ pairs[ j ][ 2 ] ] = util.extend( true, {}, errorstyles.all );\r\n      }\r\n\r\n      if ( errorstyles[ pairs[ j ][ 0 ] ] ) {\r\n        //.x, .y\r\n\r\n        errorstyles[ pairs[ j ][ 1 ] ] = util.extend(\r\n          true, {},\r\n          errorstyles[ pairs[ j ][ 0 ] ]\r\n        );\r\n        errorstyles[ pairs[ j ][ 2 ] ] = util.extend(\r\n          true, {},\r\n          errorstyles[ pairs[ j ][ 0 ] ]\r\n        );\r\n      }\r\n\r\n      for ( var k = 1; k <= 2; k++ ) {\r\n        if ( errorstyles[ pairs[ j ][ k ] ] ) {\r\n          styles[ pairs[ j ][ k ] ] = errorstyles[ pairs[ j ][ k ] ];\r\n          makePath( styles[ pairs[ j ][ k ] ] );\r\n        }\r\n      }\r\n    }\r\n    return styles;\r\n  },\r\n\r\n  errorDrawInit: function() {\r\n    var error;\r\n    //  var pathError = \"M 0 0 \";\r\n\r\n    if ( this.errorboxStyle ) {\r\n      this.errorboxStyle.paths = {\r\n        top: '',\r\n        bottom: '',\r\n        left: '',\r\n        right: ''\r\n      };\r\n    }\r\n\r\n    if ( this.errorbarStyle ) {\r\n      this.errorbarStyle.paths = {\r\n        top: '',\r\n        bottom: '',\r\n        left: '',\r\n        right: ''\r\n      };\r\n    }\r\n  },\r\n\r\n  errorAddPoint: function( index, dataX, dataY, xpx, ypx ) {\r\n    /* eslint-disable no-cond-assign */\r\n    let error;\r\n\r\n    if ( this.errorbarStyle ) {\r\n      if ( ( error = this.waveform.getErrorBarXBelow( index ) ) ) {\r\n        this.errorbarStyle.paths.left += ` M ${xpx} ${ypx}`;\r\n        this.errorbarStyle.paths.left += this.makeBarX(\r\n          this.getX( dataX - error ),\r\n          xpx,\r\n          this.errorbarStyle.left\r\n        );\r\n      }\r\n\r\n      if ( ( error = this.waveform.getErrorBarXAbove( index ) ) ) {\r\n        this.errorbarStyle.paths.right += ` M ${xpx} ${ypx}`;\r\n        this.errorbarStyle.paths.right += this.makeBarX(\r\n          this.getX( dataX + error ),\r\n          xpx,\r\n          this.errorbarStyle.right\r\n        );\r\n      }\r\n\r\n      if ( ( error = this.waveform.getErrorBarYBelow( index ) ) ) {\r\n        this.errorbarStyle.paths.bottom += ` M ${xpx} ${ypx}`;\r\n        this.errorbarStyle.paths.bottom += this.makeBarY(\r\n          this.getY( dataY - error ),\r\n          ypx,\r\n          this.errorbarStyle.bottom\r\n        );\r\n      }\r\n\r\n      if ( ( error = this.waveform.getErrorBarYAbove( index ) ) ) {\r\n        this.errorbarStyle.paths.top += ` M ${xpx} ${ypx}`;\r\n        this.errorbarStyle.paths.top += this.makeBarY(\r\n          this.getY( dataY + error ),\r\n          ypx,\r\n          this.errorbarStyle.top\r\n        );\r\n      }\r\n    }\r\n\r\n    if ( this.errorboxStyle ) {\r\n      if ( ( error = this.waveform.getErrorBoxXBelow( index ) ) ) {\r\n        this.errorboxStyle.paths.left += ` M ${xpx} ${ypx}`;\r\n        this.errorboxStyle.paths.left += this.makeBoxX(\r\n          this.getX( dataX - error ),\r\n          xpx,\r\n          this.errorboxStyle.left\r\n        );\r\n      }\r\n\r\n      if ( ( error = this.waveform.getErrorBoxXAbove( index ) ) ) {\r\n        this.errorboxStyle.paths.right += ` M ${xpx} ${ypx}`;\r\n        this.errorboxStyle.paths.right += this.makeBoxX(\r\n          this.getX( dataX + error ),\r\n          xpx,\r\n          this.errorboxStyle.right\r\n        );\r\n      }\r\n\r\n      if ( ( error = this.waveform.getErrorBoxYBelow( index ) ) ) {\r\n        this.errorboxStyle.paths.bottom += ` M ${xpx} ${ypx}`;\r\n        this.errorboxStyle.paths.bottom += this.makeBoxY(\r\n          this.getY( dataY - error ),\r\n          ypx,\r\n          this.errorboxStyle.bottom\r\n        );\r\n      }\r\n\r\n      if ( ( error = this.waveform.getErrorBoxYAbove( index ) ) ) {\r\n        this.errorboxStyle.paths.top += ` M ${xpx} ${ypx}`;\r\n        this.errorboxStyle.paths.top += this.makeBoxY(\r\n          this.getY( dataY + error ),\r\n          ypx,\r\n          this.errorboxStyle.top\r\n        );\r\n      }\r\n    }\r\n    /* eslint-enable */\r\n  },\r\n\r\n  errorAddPointBarChart: function( j, posY, xpx, ypx ) {\r\n    var error;\r\n    if ( this.error && ( error = this.error[ j ] ) ) {\r\n      this.doErrorDraw( 'y', error, posY, ypx, xpx, ypx );\r\n    }\r\n  },\r\n\r\n  errorDraw: function() {\r\n    if ( this.errorbarStyle ) {\r\n      for ( var j in this.errorbarStyle.paths ) {\r\n        if ( this.errorbarStyle[ j ] && this.errorbarStyle[ j ].dom ) {\r\n          this.errorbarStyle[ j ].dom.setAttribute(\r\n            'd',\r\n            this.errorbarStyle.paths[ j ]\r\n          );\r\n        }\r\n      }\r\n    }\r\n\r\n    if ( this.errorboxStyle ) {\r\n      for ( var j in this.errorboxStyle.paths ) {\r\n        if ( this.errorboxStyle[ j ] && this.errorboxStyle[ j ].dom ) {\r\n          this.errorboxStyle[ j ].dom.setAttribute(\r\n            'd',\r\n            this.errorboxStyle.paths[ j ]\r\n          );\r\n        }\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\nexport default ErrorBarMixin;","import * as util from '../graph.util.js';\r\nimport EventMixing from '../mixins/graph.mixin.event_graph.js';\r\n\r\nimport {\r\n  Waveform\r\n} from '../util/waveform.js';\r\n\r\nconst defaultOptions = {\r\n  redrawShapesAfterDraw: false\r\n};\r\n\r\n/**\r\n * Serie class to be extended\r\n * @static\r\n */\r\nclass Serie {\r\n  constructor(graph, name, options, defaultInherited) {\r\n    this.options = util.extend(\r\n      true, {},\r\n      defaultOptions,\r\n      defaultInherited,\r\n      options\r\n    );\r\n    this.graph = graph;\r\n    this.name = name;\r\n    this.groupMain = document.createElementNS(this.graph.ns, 'g');\r\n\r\n    this._symbolLegendContainer = document.createElementNS(this.graph.ns, 'g');\r\n  }\r\n\r\n  postInit() { }\r\n\r\n  draw() { }\r\n\r\n  beforeDraw() { }\r\n\r\n  afterDraw() {\r\n    if (this.options.redrawShapesAfterDraw) {\r\n      this.graph.getShapesOfSerie(this).forEach((shape) => {\r\n        shape.redraw();\r\n      });\r\n    }\r\n\r\n    this.emit('draw');\r\n  }\r\n\r\n  /**\r\n   * Sets data to the serie\r\n   * @memberof Serie\r\n   * @param {(Object|Array|Array[])} data - The data of the serie\r\n   * @param {Boolean} [ oneDimensional=false ] - In some cases you may need to force the 1D type. This is required when one uses an array or array to define the data (see examples)\r\n   * @param{String} [ type=float ] - Specify the type of the data. Use <code>int</code> to save memory (half the amount of bytes allocated to the data).\r\n   * @example serie.setData( [ [ x1, y1 ], [ x2, y2 ], ... ] );\r\n   * @example serie.setData( [ x1, y1, x2, y2, ... ] ); // Faster\r\n   * @example serie.setData( [ [ x1, y1, x2, y2, ..., xn, yn ] , [ xm, ym, x(m + 1), y(m + 1), ...] ], true ) // 1D array with a gap in the middle\r\n   * @example serie.setData( { x: x0, dx: spacing, y: [ y1, y2, y3, y4 ] } ); // Data with equal x separation. Fastest way\r\n   */\r\n  setData(data, oneDimensional, type) {\r\n    if (data instanceof Waveform) {\r\n      return this.setWaveform(data);\r\n    }\r\n\r\n    throw 'Setting data other than waveforms in not supported by default. You must implemented this method in the inherited class.';\r\n  }\r\n\r\n  _addData(type, howmany) {\r\n    return [];\r\n  }\r\n\r\n  /**\r\n   * Removes all the data from the serie, without redrawing\r\n   * @returns {Serie} The current serie\r\n   */\r\n  clearData() {\r\n    this.setData(new Waveform());\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Returns the data in its current form\r\n   * @returns {Array.<(Float64Array|Int32Array)>} An array containing the data chunks. Has only one member if the data has no gaps\r\n   * @memberof Serie\r\n   */\r\n  getData() {\r\n    return this.data;\r\n  }\r\n\r\n  /**\r\n   * Sets the options of the serie (no extension of default options)\r\n   * @param {Object} options - The options of the serie\r\n   * @memberof Serie\r\n   */\r\n  setOptions(options) {\r\n    this.options = options || {};\r\n  }\r\n\r\n  /**\r\n   * Sets the options of the serie (no extension of default options)\r\n   * @param {String} name - The option name\r\n   * @param value - The option value\r\n   * @memberof Serie\r\n   * @example serie.setOption('selectableOnClick', true );\r\n   */\r\n  setOption(name, value) {\r\n    this.options[name] = value;\r\n  }\r\n\r\n  /**\r\n   * Removes the serie from the graph. The method doesn't perform any axis autoscaling or repaint of the graph. This should be done manually.\r\n   * @return {Serie} The current serie instance\r\n   * @memberof Serie\r\n   */\r\n  kill(noLegendUpdate) {\r\n    this.graph.removeSerieFromDom(this);\r\n    this.graph._removeSerie(this);\r\n\r\n    if (this.graph.legend && !noLegendUpdate) {\r\n      this.graph.legend.update();\r\n    }\r\n\r\n    this.graph = undefined;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Hides the serie\r\n   * @memberof Serie\r\n   * @param {Boolean} [ hideShapes = false ] - <code>true</code> to hide the shapes associated to the serie\r\n   * @returns {Serie} The current serie\r\n   */\r\n  hide(hideShapes = this.options.bindShapesToDisplayState, mute = false) {\r\n    this.hidden = true;\r\n    this.groupMain.setAttribute('display', 'none');\r\n\r\n    this.getSymbolForLegend().setAttribute('opacity', 0.5);\r\n    this.getTextForLegend().setAttribute('opacity', 0.5);\r\n\r\n    this.hideImpl();\r\n\r\n    if (hideShapes) {\r\n      var shapes = this.graph.getShapesOfSerie(this);\r\n      for (var i = 0, l = shapes.length; i < l; i++) {\r\n        shapes[i].hide();\r\n      }\r\n    }\r\n\r\n    if (!mute) {\r\n      this.emit('hide');\r\n    }\r\n\r\n    if (\r\n      this.getXAxis().doesHideWhenNoSeriesShown() ||\r\n      this.getYAxis().doesHideWhenNoSeriesShown()\r\n    ) {\r\n      this.graph.draw(true);\r\n    }\r\n\r\n    if (\r\n      this.graph.hasPlugin('peakPicking') &&\r\n      this.graph.getPlugin('peakPicking').getSerie() == this\r\n    ) {\r\n      this.graph.getPlugin('peakPicking').hidePeakPicking();\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Shows the serie\r\n   * @memberof Serie\r\n   * @param {Boolean} [showShapes=false] - <code>true</code> to show the shapes associated to the serie\r\n   * @returns {Serie} The current serie\r\n   */\r\n  show(showShapes = this.options.bindShapesToDisplayState, mute = false) {\r\n    this.hidden = false;\r\n    this.groupMain.setAttribute('display', 'block');\r\n\r\n    this.getSymbolForLegend().setAttribute('opacity', 1);\r\n    this.getTextForLegend().setAttribute('opacity', 1);\r\n\r\n    this.showImpl();\r\n\r\n    this.draw(true);\r\n\r\n    if (showShapes) {\r\n      var shapes = this.graph.getShapesOfSerie(this);\r\n      for (var i = 0, l = shapes.length; i < l; i++) {\r\n        shapes[i].show();\r\n      }\r\n    }\r\n\r\n    if (!mute) {\r\n      this.emit('show');\r\n    }\r\n\r\n    if (\r\n      this.getXAxis().doesHideWhenNoSeriesShown() ||\r\n      this.getYAxis().doesHideWhenNoSeriesShown()\r\n    ) {\r\n      this.graph.draw(true);\r\n    }\r\n\r\n    if (\r\n      this.graph.hasPlugin('peakPicking') &&\r\n      this.graph.getPlugin('peakPicking').getSerie() == this\r\n    ) {\r\n      this.graph.getPlugin('peakPicking').showPeakPicking();\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  hideImpl() { }\r\n  showImpl() { }\r\n\r\n  /**\r\n   * Toggles the display of the serie (effectively, calls <code>.show()</code> and <code>.hide()</code> alternatively on each call)\r\n   * @memberof Serie\r\n   * @param {Boolean} [hideShapes=false] - <code>true</code> to hide the shapes associated to the serie\r\n   * @returns {Serie} The current serie\r\n   */\r\n  toggleDisplay() {\r\n    if (!this.isShown()) {\r\n      this.show();\r\n    } else {\r\n      this.hide();\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Determines if the serie is currently visible\r\n   * @memberof Serie\r\n   * @returns {Boolean} The current visibility status of the serie\r\n   */\r\n  isShown() {\r\n    return !this.hidden;\r\n  }\r\n\r\n  /**\r\n   * Checks that axes assigned to the serie have been defined and have proper values\r\n   * @memberof Serie\r\n   */\r\n  axisCheck() {\r\n    if (!this.getXAxis() || !this.getYAxis()) {\r\n      throw 'No axis exist for this serie. Check that they were properly assigned';\r\n    }\r\n\r\n    if (\r\n      isNaN(this.getXAxis().getCurrentMin()) ||\r\n      isNaN(this.getXAxis().getCurrentMax()) ||\r\n      isNaN(this.getYAxis().getCurrentMin()) ||\r\n      isNaN(this.getYAxis().getCurrentMax())\r\n    ) {\r\n      throw 'Axis min and max values are not defined. Try autoscaling';\r\n    }\r\n  }\r\n  /**\r\n   * Returns the x position of a certain value in pixels position, based on the serie's axis\r\n   * @memberof Serie\r\n   * @param {Number} val - Value to convert to pixels position\r\n   * @returns {Number} The x position in px corresponding to the x value\r\n   */\r\n  getX(val) {\r\n    return (val = this.getXAxis().getPx(val)) - (val % 0.2);\r\n  }\r\n\r\n  /**\r\n   * Returns the y position of a certain value in pixels position, based on the serie's axis\r\n   * @memberof Serie\r\n   * @param {Number} val - Value to convert to pixels position\r\n   * @returns {Number} The y position in px corresponding to the y value\r\n   */\r\n  getY(val) {\r\n    return (val = this.getYAxis().getPx(val)) - (val % 0.2);\r\n  }\r\n\r\n  /**\r\n   * Returns the selection state of the serie. Generic for most serie types\r\n   * @memberof Serie\r\n   * @returns {Boolean} <code>true</code> if the serie is selected, <code>false</code> otherwise\r\n   */\r\n  isSelected() {\r\n    return this.selected || this.selectionType !== 'unselected';\r\n  }\r\n\r\n  _checkX(val) {\r\n    this.minX = Math.min(this.minX, val);\r\n    this.maxX = Math.max(this.maxX, val);\r\n  }\r\n\r\n  _checkY(val) {\r\n    this.minY = Math.min(this.minY, val);\r\n    this.maxY = Math.max(this.maxY, val);\r\n  }\r\n\r\n  /**\r\n   * Getter for the serie name\r\n   * @memberof Serie\r\n   * @returns {String} The serie name\r\n   */\r\n  getName() {\r\n    return this.name;\r\n  }\r\n\r\n  /* AXIS */\r\n\r\n  /**\r\n   * Assigns axes automatically, based on {@link Graph#getXAxis} and {@link Graph#getYAxis}.\r\n   * @memberof Serie\r\n   * @returns {Serie} The current serie\r\n   */\r\n  autoAxis() {\r\n    if (this.isFlipped()) {\r\n      this.setXAxis(this.graph.getYAxis());\r\n      this.setYAxis(this.graph.getXAxis());\r\n    } else {\r\n      this.setXAxis(this.graph.getXAxis());\r\n      this.setYAxis(this.graph.getYAxis());\r\n    }\r\n\r\n    // After axes have been assigned, the graph axes should update their min/max\r\n    this.graph.updateDataMinMaxAxes();\r\n    return this;\r\n  }\r\n\r\n  autoAxes() {\r\n    return this.autoAxis(...arguments);\r\n  }\r\n\r\n  /**\r\n   * Assigns an x axis to the serie\r\n   * @memberof Serie\r\n   * @param {Axis|Number} axis - The axis to use as an x axis. If an integer, {@link Graph#getXAxis} or {@link Graph#getYAxis} will be used\r\n   * @returns {Serie} The current serie\r\n   * @example serie.setXAxis( graph.getTopAxis( 1 ) ); // Assigns the second top axis to the serie\r\n   */\r\n  setXAxis(axis) {\r\n    if (typeof axis == 'number') {\r\n      this.xaxis = this.isFlipped() ?\r\n        this.graph.getYAxis(axis) :\r\n        this.graph.getXAxis(axis);\r\n    } else {\r\n      this.xaxis = axis;\r\n    }\r\n\r\n    this.graph.updateDataMinMaxAxes();\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Assigns an y axis to the serie\r\n   * @memberof Serie\r\n   * @param {Axis|Number} axis - The axis to use as an y axis. If an integer, {@link Graph#getXAxis} or {@link Graph#getYAxis} will be used\r\n   * @returns {Serie} The current serie\r\n   * @example serie.setYAxis( graph.getLeftAxis( 4 ) ); // Assigns the 5th left axis to the serie\r\n   */\r\n  setYAxis(axis) {\r\n    if (typeof axis == 'number') {\r\n      this.xaxis = this.isFlipped() ?\r\n        this.graph.getXAxis(axis) :\r\n        this.graph.getYAxis(axis);\r\n    } else {\r\n      this.yaxis = axis;\r\n    }\r\n\r\n    this.graph.updateDataMinMaxAxes();\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Assigns two axes to the serie\r\n   * @param {GraphAxis} axis1 - First axis to assign to the serie (x or y)\r\n   * @param {GraphAxis} axis2 - Second axis to assign to the serie (y or x)\r\n   * @returns {Serie} The current serie\r\n   * @memberof Serie\r\n   */\r\n  setAxes() {\r\n    for (var i = 0; i < 2; i++) {\r\n      if (arguments[i]) {\r\n        this[arguments[i].isX() ? 'setXAxis' : 'setYAxis'](arguments[i]);\r\n      }\r\n    }\r\n\r\n    this.graph.updateDataMinMaxAxes();\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * @returns {GraphAxis} The x axis assigned to the serie\r\n   * @memberof Serie\r\n   */\r\n  getXAxis() {\r\n    return this.xaxis;\r\n  }\r\n\r\n  /**\r\n   * @returns {GraphAxis} The y axis assigned to the serie\r\n   * @memberof Serie\r\n   */\r\n  getYAxis() {\r\n    return this.yaxis;\r\n  }\r\n\r\n  /* */\r\n\r\n  /* DATA MIN MAX */\r\n\r\n  /**\r\n   * @returns {Number} Lowest x value of the serie's data\r\n   * @memberof Serie\r\n   */\r\n  getMinX() {\r\n    return this.minX;\r\n  }\r\n\r\n  /**\r\n   * @returns {Number} Highest x value of the serie's data\r\n   * @memberof Serie\r\n   */\r\n  getMaxX() {\r\n    return this.maxX;\r\n  }\r\n\r\n  /**\r\n   * @returns {Number} Lowest y value of the serie's data\r\n   * @memberof Serie\r\n   */\r\n  getMinY() {\r\n    return this.minY;\r\n  }\r\n\r\n  /**\r\n   * @returns {Number} Highest y value of the serie's data\r\n   * @memberof Serie\r\n   */\r\n  getMaxY() {\r\n    return this.maxY;\r\n  }\r\n\r\n  getWaveform() {\r\n    return this.waveform;\r\n  }\r\n\r\n  getWaveforms() {\r\n    return [this.waveform];\r\n  }\r\n\r\n  setWaveform(waveform) {\r\n    if (!(waveform instanceof Waveform)) {\r\n      console.trace();\r\n      console.error(waveform);\r\n      throw new Error(\r\n        'Cannot assign waveform to serie. Waveform is not of the proper Waveform instance'\r\n      );\r\n    }\r\n\r\n    this.waveform = waveform;\r\n    this.dataHasChanged();\r\n    this.graph.updateDataMinMaxAxes();\r\n\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Computes and returns a line SVG element with the same line style as the serie, or width 20px\r\n   * @returns {SVGElement}\r\n   * @memberof Serie\r\n   */\r\n  getSymbolForLegend() {\r\n    if (!this.lineForLegend) {\r\n      var line = document.createElementNS(this.graph.ns, 'line');\r\n      this.applyLineStyle(line);\r\n\r\n      line.setAttribute('x1', 5);\r\n      line.setAttribute('x2', 25);\r\n      line.setAttribute('y1', 0);\r\n      line.setAttribute('y2', 0);\r\n\r\n      line.setAttribute('cursor', 'pointer');\r\n\r\n      this.lineForLegend = line;\r\n    }\r\n\r\n    return this.lineForLegend;\r\n  }\r\n\r\n  _getSymbolForLegendContainer() {\r\n    return this._symbolLegendContainer;\r\n  }\r\n\r\n  /**\r\n   * Explicitely applies the line style to the SVG element returned by {@link Serie#getSymbolForLegend}\r\n   * @see Serie#getSymbolForLegend\r\n   * @returns {SVGElement}\r\n   * @memberof Serie\r\n   */\r\n  setLegendSymbolStyle() {\r\n    this.applyLineStyle(this.getSymbolForLegend());\r\n  }\r\n\r\n  /**\r\n   * @alias Serie#setLegendSymbolStyle\r\n   * @memberof Serie\r\n   */\r\n  updateStyle() {\r\n    this.setLegendSymbolStyle();\r\n    this.graph.updateLegend();\r\n  }\r\n\r\n  /**\r\n   * Computes and returns a text SVG element with the label of the serie as a text, translated by 35px\r\n   * @returns {SVGElement}\r\n   * @memberof Serie\r\n   * @see Serie#getLabel\r\n   */\r\n  getTextForLegend() {\r\n    if (!this.textForLegend) {\r\n      var text = document.createElementNS(this.graph.ns, 'text');\r\n      text.setAttribute('cursor', 'pointer');\r\n      text.textContent = this.getLabel();\r\n\r\n      this.textForLegend = text;\r\n    }\r\n\r\n    return this.textForLegend;\r\n  }\r\n\r\n  /**\r\n   * @returns {Number} The current index of the serie\r\n   * @memberof Serie\r\n   */\r\n  getIndex() {\r\n    return this.graph.series.indexOf(this);\r\n  }\r\n\r\n  /**\r\n   * @returns {String} The label or, alternatively - the name of the serie\r\n   * @memberof Serie\r\n   */\r\n  getLabel() {\r\n    return this.options.label || this.name;\r\n  }\r\n\r\n  /**\r\n   * Sets the label of the serie. Note that this does not automatically updates the legend\r\n   * @param {String} label - The new label of the serie\r\n   * @returns {Serie} The current serie\r\n   * @memberof Serie\r\n   */\r\n  setLabel(label) {\r\n    this.options.label = label;\r\n\r\n    if (this.textForLegend) {\r\n      this.textForLegend.textContent = label;\r\n    }\r\n\r\n    this.graph.requireLegendUpdate();\r\n    return this;\r\n  }\r\n\r\n  /* FLIP */\r\n\r\n  /**\r\n   * Assigns the flipping value of the serie. A flipped serie will have inverted axes. However this method does not automatically re-assigns the axes of the serie. Call {@link Serie#autoAxis} to re-assign the axes automatically, or any other axis setting method.\r\n   * @param {Boolean} [flipped=false] - <code>true</code> to flip the serie\r\n   * @returns {Serie} The current serie\r\n   * @memberof Serie\r\n   */\r\n  setFlip(flipped) {\r\n    this.options.flip = flipped;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * @returns {Boolean} <code>true</code> if the serie is flipped, <code>false</code> otherwise\r\n   * @memberof Serie\r\n   */\r\n  getFlip() {\r\n    return this.options.flip;\r\n  }\r\n\r\n  /**\r\n   * @alias Serie#getFlip\r\n   * @memberof Serie\r\n   */\r\n  isFlipped() {\r\n    return this.options.flip;\r\n  }\r\n\r\n  /**\r\n   * Sets the layer onto which the serie should be displayed. This method does not trigger a graph redraw.\r\n   * @memberof Serie\r\n   * @param {Number} layerIndex=1 - The index of the layer into which the serie will be drawn\r\n   * @returns {Serie} The current serie\r\n   */\r\n  setLayer(layerIndex) {\r\n    let newLayer = parseInt(layerIndex) || 1;\r\n\r\n    if (newLayer !== this.options.layer) {\r\n      this.options.layer = newLayer;\r\n      this.graph.appendSerieToDom(this);\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Sets the layer onto which the serie should be displayed. This method does not trigger a graph redraw.\r\n   * @memberof Serie\r\n   * @returns {Nunber} The index of the layer into which the serie will be drawn\r\n   */\r\n  getLayer() {\r\n    return this.options.layer || 1;\r\n  }\r\n\r\n  setStyle(style, selectionType = 'unselected') {\r\n    this.styles[selectionType] = style;\r\n    this.styleHasChanged(selectionType);\r\n  }\r\n\r\n  /**\r\n   * Notifies jsGraph that the style of the serie has changed and needs to be redrawn on the next repaint\r\n   * @param {String} selectionType - The selection for which the style may have changed\r\n   * @returns {Serie} The current serie\r\n   * @memberof Serie\r\n   */\r\n  styleHasChanged(selectionType = 'unselected') {\r\n    this._changedStyles = this._changedStyles || {};\r\n\r\n    if (selectionType === false) {\r\n      for (var i in this._changedStyles) {\r\n        this._changedStyles[i] = false;\r\n      }\r\n    } else {\r\n      this._changedStyles[selectionType || 'unselected'] = true;\r\n    }\r\n\r\n    this.graph.requireLegendUpdate();\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Checks if the style has changed for a selection type\r\n   * @param {String} selectionType - The selection for which the style may have changed\r\n   * @returns {Boolean} <code>true</code> if the style has changed\r\n   * @private\r\n   * @memberof Serie\r\n   */\r\n  hasStyleChanged(selectionType) {\r\n    this._changedStyles = this._changedStyles || {};\r\n    return this._changedStyles[selectionType || 'unselected'];\r\n  }\r\n\r\n  /**\r\n   * Notifies jsGraph that the data of the serie has changed\r\n   * @returns {Serie} The current serie\r\n   * @memberof Serie\r\n   */\r\n  dataHasChanged(arg) {\r\n    this._dataHasChanged = arg === undefined || arg;\r\n\r\n\r\n    this.minX = this.waveform.getXMin();\r\n    this.maxX = this.waveform.getXMax();\r\n    this.minY = this.waveform.getMin();\r\n    this.maxY = this.waveform.getMax();\r\n\r\n    console.log(this.minX, this.maxX, this.minY, this.maxY);\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Checks if the data has changed\r\n   * @returns {Boolean} <code>true</code> if the data has changed\r\n   * @private\r\n   * @memberof Serie\r\n   */\r\n  hasDataChanged() {\r\n    return this._dataHasChanged;\r\n  }\r\n\r\n  /**\r\n   * Set a key/value arbitrary information to the serie. It is particularly useful if you have this serie has a reference through an event for instance, and you want to retrieve data associated to it\r\n   * @param {String} prop - The property\r\n   * @param value - The value\r\n   * @returns {Serie} The current serie\r\n   * @see Serie#getInfo\r\n   * @memberof Serie\r\n   */\r\n  setInfo(prop, value) {\r\n    this.infos = this.infos || {};\r\n    this.infos[prop] = value;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Retrives an information value from its key\r\n   * @param {String} prop - The property\r\n   * @returns The value associated to the prop parameter\r\n   * @see Serie#setInfo\r\n   * @memberof Serie\r\n   */\r\n  getInfo(prop, value) {\r\n    return (this.infos || {})[prop];\r\n  }\r\n\r\n  /**\r\n   * @deprecated\r\n   * @memberof Serie\r\n   */\r\n  setAdditionalData(data) {\r\n    this.additionalData = data;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * @deprecated\r\n   * @memberof Serie\r\n   */\r\n  getAdditionalData() {\r\n    return this.additionalData;\r\n  }\r\n\r\n  /**\r\n   * Flags the serie as selected\r\n   * @returns {Serie} The current serie\r\n   * @memberof Serie\r\n   */\r\n  select(selectName) {\r\n    if (selectName == 'unselected') {\r\n      return this;\r\n    }\r\n    this.selected = true;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Flags the serie as unselected\r\n   * @returns {Serie} The current serie\r\n   * @memberof Serie\r\n   */\r\n  unselect() {\r\n    this.selected = false;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Allows mouse tracking of the serie\r\n   * @memberof Serie\r\n   * @returns {Serie} The current serie\r\n   * @param {Function} hoverCallback - Function to be called when the mouse enters the serie area\r\n   * @param {Function} outCallback - Function to be called when the mouse exits the serie area\r\n   * @private\r\n   */\r\n  enableTracking(hoverCallback, outCallback) {\r\n    this._tracker = true;\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Disables mouse tracking of the serie\r\n   * @memberof Serie\r\n   * @returns {Serie} The current serie\r\n   * @private\r\n   */\r\n  disableTracking() {\r\n    if (this._trackerDom) {\r\n      this._trackerDom.remove();\r\n      this._trackerDom = null;\r\n    }\r\n\r\n    this._tracker = false;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   *  Allows mouse tracking of the serie\r\n   *  @memberof Serie\r\n   *  @param {Object} options - The tracking line options\r\n   *  @returns {Serie} The current serie\r\n   */\r\n  allowTrackingLine(options) {\r\n    options = options || {};\r\n    this.graph.addSerieToTrackingLine(this, options);\r\n  }\r\n\r\n  getMarkerForLegend() {\r\n    return false;\r\n  }\r\n\r\n  get type() {\r\n    return this._type;\r\n  }\r\n\r\n  getType() {\r\n    return this._type;\r\n  }\r\n\r\n  excludeFromLegend() {\r\n    this._excludedFromLegend = true;\r\n    return this;\r\n  }\r\n\r\n  includeInLegend() {\r\n    this._excludedFromLegend = false;\r\n    return this;\r\n  }\r\n\r\n  setDataIndices(categories, nb) {\r\n    this.categoryIndices = categories;\r\n    this.nbCategories = nb;\r\n  }\r\n\r\n  hasErrors() {\r\n    if (!this.waveform) {\r\n      return false;\r\n    }\r\n\r\n    return this.waveform.hasErrorBars();\r\n  }\r\n}\r\n\r\nEventMixing(Serie, 'serie');\r\n\r\nexport default Serie;","import * as util from '../graph.util.js';\r\nimport ErrorBarMixin from '../mixins/graph.mixin.errorbars.js';\r\n\r\nimport Serie from './graph.serie.js';\r\n\r\nconst defaults = {};\r\n\r\nvar type = 'scatter';\r\n\r\nconst defaultOptions = {\r\n  markers: true,\r\n\r\n  markerStyles: {\r\n    unselected: {\r\n      default: {\r\n        shape: 'circle',\r\n        cx: 0,\r\n        cy: 0,\r\n        r: 3,\r\n        stroke: 'transparent',\r\n        fill: 'black'\r\n      }\r\n    },\r\n\r\n    selected: {\r\n      default: {\r\n        r: 4\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * @static\r\n * @augments Serie\r\n * @example graph.newSerie( name, options, \"scatter\" );\r\n * @see Graph#newSerie\r\n */\r\nclass SerieScatter extends Serie {\r\n  constructor( graph, name, options, defaultInherited ) {\r\n    super(\r\n      graph,\r\n      name,\r\n      options,\r\n      util.extend( true, {}, defaultOptions, defaultInherited )\r\n    );\r\n\r\n    this._type = type;\r\n    util.mapEventEmission( this.options, this );\r\n\r\n    this.shapes = []; // Stores all shapes\r\n    this.shapesDetails = [];\r\n    this.shapes = [];\r\n    this.keys = [];\r\n\r\n    this.groupMarkers = document.createElementNS( this.graph.ns, 'g' );\r\n    this.groupMain.appendChild( this.groupMarkers );\r\n\r\n    //    this.selectedStyleGeneral = {};\r\n    //    this.selectedStyleModifiers = {};\r\n\r\n    this.groupMarkers.addEventListener(\r\n      'mouseenter',\r\n      ( e ) => {\r\n        var id = parseInt( e.target.parentElement.getAttribute( 'data-shapeid' ) );\r\n        if ( isNaN( id ) ) {\r\n          return;\r\n        }\r\n\r\n        if ( this.options.selectMarkerOnHover ) {\r\n          this.selectMarker( id, 'selected' );\r\n        }\r\n\r\n        this.emit(\r\n          'mouseOverMarker',\r\n          id,\r\n          this.waveform.getX( id ),\r\n          this.waveform.getY( id )\r\n        );\r\n      },\r\n      true\r\n    );\r\n\r\n    this.groupMarkers.addEventListener( 'mouseout', ( e ) => {\r\n      var id = parseInt( e.target.parentElement.getAttribute( 'data-shapeid' ) );\r\n      if ( isNaN( id ) ) {\r\n        return;\r\n      }\r\n\r\n      if ( this.options.selectMarkerOnHover ) {\r\n        this.selectMarker( id, 'unselected' );\r\n      }\r\n\r\n      this.emit(\r\n        'mouseOutMarker',\r\n        id,\r\n        this.waveform.getX( id ),\r\n        this.waveform.getY( id )\r\n      );\r\n    } );\r\n  }\r\n\r\n  /**\r\n   * Applies for x as the category axis\r\n   * @example serie.setDataCategory( { x: \"someName\", y: Waveform } );\r\n   */\r\n  setDataCategory( data ) {\r\n    let minY = +Infinity;\r\n    let maxY = -Infinity;\r\n\r\n    for ( let dataCategory of data ) {\r\n      this._checkY( dataCategory.y.getMaxY() );\r\n      this._checkY( dataCategory.y.getMinY() );\r\n    }\r\n\r\n    this.data = data;\r\n    this.dataHasChanged();\r\n    this.graph.updateDataMinMaxAxes();\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Removes all DOM points\r\n   * @private\r\n   */\r\n  empty() {\r\n    while ( this.groupMarkers.firstChild ) {\r\n      this.groupMarkers.removeChild( this.groupMarkers.firstChild );\r\n    }\r\n  }\r\n\r\n  getSymbolForLegend() {\r\n    if ( !this.markers ) {\r\n      return;\r\n    }\r\n\r\n    const container = super._getSymbolForLegendContainer();\r\n\r\n    if ( !this.shapeLegend ) {\r\n      this.shapeLegend = this._makeMarker(\r\n        container,\r\n        this.options.markerStyles.unselected.default\r\n      );\r\n      container.appendChild( this.shapeLegend );\r\n    }\r\n\r\n    var style = this.getMarkerStyle( 'unselected', -1, true );\r\n    for ( var i in style[ -1 ] ) {\r\n      if ( i == 'shape' ) {\r\n        continue;\r\n      }\r\n      this.shapeLegend.setAttribute( i, style[ -1 ][ i ] );\r\n    }\r\n\r\n    return container;\r\n  }\r\n\r\n  setStyle( style, styleName = 'unselected' ) {\r\n    return this.setMarkerStyle( style, undefined, styleName );\r\n  }\r\n\r\n  /**\r\n   * Sets style to the scatter points\r\n   * First argument is the style applied by default to all points\r\n   * Second argument is an array of modifiers that allows customization of any point of the scatter plot. Data for each elements of the array will augment <code>allStyles</code>, so be sure to reset the style if needed.\r\n   * All parameters - except <code>shape</code> - will be set as parameters to the DOM element of the shape\r\n   *\r\n   * @example\r\n   * var modifiers = [];\r\n   * modifiers[ 20 ] = { shape: 'circle', r: 12, fill: 'rgba(0, 100, 255, 0.3)', stroke: 'rgb(0, 150, 255)' };\r\n   * serie.setMarkerStyle( { shape: 'circle', r: 2, fill: 'rgba(255, 0, 0, 0.3)', stroke: 'rgb(255, 100, 0)' }, modifiers ); // Will modify scatter point n°20\r\n   *\r\n   * @param {Object} allStyles - The general style for all markers\r\n   * @param {Object} [ modifiers ] - The general style for all markers\r\n   * @param {String} [ selectionMode=\"unselected\" ] - The selection mode to which this style corresponds. Default is unselected\r\n   *\r\n   */\r\n  setMarkerStyle( all, modifiers, mode = 'unselected' ) {\r\n    if ( typeof modifiers == 'string' ) {\r\n      mode = modifiers;\r\n      modifiers = false;\r\n    }\r\n\r\n    this.options.markerStyles[ mode ] = this.options.markerStyles[ mode ] || {};\r\n    this.options.markerStyles[ mode ].all = all;\r\n    this.options.markerStyles[ mode ].modifiers = modifiers;\r\n\r\n    this.styleHasChanged( mode );\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Redraws the serie\r\n   * @private\r\n   * @param {force} Boolean - Forces redraw even if the data hasn't changed\r\n   */\r\n  draw( force ) {\r\n    // Serie redrawing\r\n\r\n    if (\r\n      ( !force &&\r\n        !this.hasDataChanged() &&\r\n        !this.hasStyleChanged( 'unselected' ) ) ||\r\n      !this.options.markers\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    let xpx, ypx, j, k, m;\r\n    const isCategory = this.getXAxis().getType() == 'category';\r\n    const keys = [];\r\n\r\n    this.dataHasChanged( false );\r\n    this.styleHasChanged( false );\r\n\r\n    // Removes the marker group from the main DOM for operation (avoids browser repaint)\r\n    this.groupMain.removeChild( this.groupMarkers );\r\n\r\n    j = 0;\r\n    k = 0;\r\n\r\n    if ( this.hasErrors() ) {\r\n      this.errorDrawInit();\r\n    }\r\n    if ( isCategory ) {\r\n      let k = 0;\r\n\r\n      for ( ; j < this.data.length; j++ ) {\r\n        if ( !this.categoryIndices.hasOwnProperty( this.data[ j ].x ) ) {\r\n          continue;\r\n        }\r\n\r\n        if ( this.error ) {\r\n          //   this.errorAddPoint( j, position[ 0 ] + position[ 1 ] / 2, 0, this.getX( position[ 0 ] + position[ 1 ] / 2 ), ypx );\r\n        }\r\n\r\n        for ( var n = 0, l = this.data[ j ].y.getLength(); n < l; n++ ) {\r\n          //let xpos = i / ( l - 1 ) * ( position[ 1 ] ) + position[ 0 ];\r\n\r\n          ypx = this.getY( this.data[ j ].y.getY( n ) );\r\n          xpx = this.getX(\r\n            ( n / ( l - 1 ) ) * ( 0.8 / this.nbCategories ) +\r\n            this.categoryIndices[ this.data[ j ].x ] +\r\n            0.1 / this.nbCategories\r\n          );\r\n          n++;\r\n\r\n          this.shapesDetails[ k ] = this.shapesDetails[ k ] || [];\r\n          this.shapesDetails[ k ][ 0 ] = xpx;\r\n          this.shapesDetails[ k ][ 1 ] = ypx;\r\n          keys.push( k );\r\n          k++;\r\n        }\r\n      }\r\n    } else {\r\n      for ( ; j < this.waveform.getLength(); j++ ) {\r\n        if (\r\n          this.waveform.getX( j ) < this.getXAxis().getCurrentMin() ||\r\n          this.waveform.getX( j ) > this.getXAxis().getCurrentMax() ||\r\n          this.waveform.getY( j ) < this.getYAxis().getCurrentMin() ||\r\n          this.waveform.getY( j ) > this.getYAxis().getCurrentMax()\r\n        ) {\r\n          if ( this.shapes[ j ] ) {\r\n            this.shapes[ j ].setAttribute( 'display', 'none' );\r\n            this.shapes[ j ]._hidden = true;\r\n          }\r\n          continue;\r\n        } else if ( this.shapes[ j ] && this.shapes[ j ]._hidden ) {\r\n          this.shapes[ j ].setAttribute( 'display', 'initial' );\r\n          this.shapes[ j ]._hidden = false;\r\n        }\r\n\r\n        xpx = this.getX( this.waveform.getX( j ) );\r\n        ypx = this.getY( this.waveform.getY( j ) );\r\n\r\n        if ( this.hasErrors() ) {\r\n          this.errorAddPoint(\r\n            j,\r\n            this.waveform.getX( j ),\r\n            this.waveform.getY( j ),\r\n            xpx,\r\n            ypx\r\n          );\r\n        }\r\n\r\n        this.shapesDetails[ j ] = this.shapesDetails[ j ] || [];\r\n        this.shapesDetails[ j ][ 0 ] = xpx;\r\n        this.shapesDetails[ j ][ 1 ] = ypx;\r\n        keys.push( j );\r\n\r\n        //this.shapes[ j / 2 ] = this.shapes[ j / 2 ] || undefined;\r\n      }\r\n    }\r\n\r\n    if ( this.hasErrors() ) {\r\n      this.errorDraw();\r\n    }\r\n\r\n    // This will automatically create the shapes\r\n    this.applyMarkerStyle( this.selectionType || 'unselected', keys );\r\n    this.keys = keys;\r\n    this.groupMain.appendChild( this.groupMarkers );\r\n  }\r\n\r\n  _makeMarker( group, shape ) {\r\n    var el = document.createElementNS( this.graph.ns, shape.shape );\r\n    group.appendChild( el );\r\n    return el;\r\n  }\r\n\r\n  getMarkerStyle( selection, index, noSetPosition ) {\r\n    var selection = selection || 'unselected';\r\n    var indices;\r\n\r\n    var styles = {};\r\n    if ( typeof index == 'number' ) {\r\n      indices = [ index ];\r\n    } else if ( Array.isArray( index ) ) {\r\n      indices = index;\r\n    }\r\n\r\n    var shape, index, modifier, style, j; // loop variables\r\n\r\n    if ( !this.options.markerStyles[ selection ] ) {\r\n      selection = 'unselected';\r\n    }\r\n\r\n    var styleAll = this.options.markerStyles[ selection ].all;\r\n\r\n    if ( !styleAll ) {\r\n      styleAll = this.options.markerStyles[ selection ].default;\r\n    }\r\n\r\n    if ( typeof styleAll == 'function' ) {\r\n      styleAll = styleAll();\r\n    }\r\n\r\n    const defaultStyle = this.options.markerStyles[ selection ].default ?\r\n      this.options.markerStyles[ selection ].default :\r\n      this.options.markerStyles.unselected.default;\r\n    styleAll = Object.assign( {}, defaultStyle, styleAll );\r\n\r\n    var i = 0,\r\n      l = indices.length;\r\n\r\n    for ( ; i < l; i++ ) {\r\n      index = indices[ i ];\r\n      shape = this.shapes[ index ];\r\n\r\n      if (\r\n        ( modifier = this.options.markerStyles[ selection ].modifiers ) &&\r\n        ( typeof modifier == 'function' || modifier[ index ] )\r\n      ) {\r\n        if ( typeof modifier == 'function' ) {\r\n          style = modifier(\r\n            this.waveform.getX( index ),\r\n            this.waveform.getY( index ),\r\n            index,\r\n            shape,\r\n            styleAll\r\n          );\r\n          if ( style === false ) {\r\n            continue;\r\n          }\r\n        } else if ( modifier[ index ] ) {\r\n          style = modifier[ index ];\r\n        }\r\n\r\n        styles[ index ] = Object.assign( {}, styleAll, style );\r\n      } else if ( styleAll !== undefined ) {\r\n        styles[ index ] = styleAll;\r\n      } else {\r\n        styles[ index ] = this.options.markerStyles[ selection ].default;\r\n      }\r\n\r\n      if ( !styles[ index ] ) {\r\n        styles[ index ] = styleAll;\r\n      }\r\n\r\n      if ( !shape ) {\r\n        // Shape doesn't exist, let's create it\r\n\r\n        if ( !styles[ index ].shape ) {\r\n          console.error( style );\r\n          throw `No shape was defined with the style \"${style}\".`;\r\n        }\r\n\r\n        var g = document.createElementNS( this.graph.ns, 'g' );\r\n        g.setAttribute( 'data-shapeid', index );\r\n\r\n        this.shapes[ index ] = this._makeMarker( g, styles[ index ] );\r\n        this.groupMarkers.appendChild( g );\r\n        shape = this.shapes[ index ];\r\n      }\r\n\r\n      if (\r\n        !noSetPosition &&\r\n        this.shapesDetails[ index ][ 0 ] === this.shapesDetails[ index ][ 0 ] &&\r\n        this.shapesDetails[ index ][ 1 ] === this.shapesDetails[ index ][ 1 ]\r\n      ) {\r\n        shape.parentNode.setAttribute(\r\n          'transform',\r\n          `translate(${this.shapesDetails[index][0]}, ${this.shapesDetails[index][1]\r\n          })`\r\n        );\r\n      }\r\n    }\r\n\r\n    return styles;\r\n  }\r\n\r\n  applyMarkerStyle( selection, index, noSetPosition ) {\r\n    var i, j;\r\n    var styles = this.getMarkerStyle( selection, index, noSetPosition );\r\n\r\n    for ( i in styles ) {\r\n      for ( j in styles[ i ] ) {\r\n        if ( j !== 'shape' && this.shapes[ i ] ) {\r\n          if ( styles[ i ][ j ] ) {\r\n            this.shapes[ i ].setAttribute( j, styles[ i ][ j ] );\r\n          } else {\r\n            this.shapes[ i ].removeAttribute( j );\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  unselectMarker( index ) {\r\n    this.selectMarker( index, false );\r\n  }\r\n\r\n  selectMarker( index, setOn, selectionType ) {\r\n    if (\r\n      this.shapesDetails[ index ][ 2 ] &&\r\n      this.shapesDetails[ index ][ 2 ] == selectionType\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    if ( typeof setOn == 'string' ) {\r\n      selectionType = setOn;\r\n      setOn = undefined;\r\n    }\r\n\r\n    if ( Array.isArray( index ) ) {\r\n      return this.selectMarkers( index );\r\n    }\r\n\r\n    if ( this.shapes[ index ] && this.shapesDetails[ index ] ) {\r\n      if ( ( this.shapesDetails[ index ][ 2 ] || setOn === false ) && setOn !== true ) {\r\n        var selectionStyle = this.shapesDetails[ index ][ 2 ];\r\n        this.shapesDetails[ index ][ 2 ] = false;\r\n        var allStyles = this.getMarkerStyle( selectionStyle, index, true );\r\n\r\n        for ( var i in allStyles[ index ] ) {\r\n          this.shapes[ index ].removeAttribute( i );\r\n        }\r\n\r\n        this.applyMarkerStyle( 'unselected', index, true );\r\n      } else {\r\n        selectionType = selectionType || 'selected';\r\n        this.shapesDetails[ index ][ 2 ] = selectionType;\r\n        this.applyMarkerStyle( selectionType, index, true );\r\n      }\r\n    }\r\n  }\r\n\r\n  select( selectionType ) {\r\n    this.selectionType = selectionType;\r\n    this.applyMarkerStyle( this.selectionType || 'selected', this.keys );\r\n    super.select( selectionType );\r\n  }\r\n\r\n  unselect() {\r\n    this.selectionType = 'unselected';\r\n    this.applyMarkerStyle( this.selectionType || 'unselected', this.keys );\r\n\r\n    super.unselect();\r\n  }\r\n\r\n  setMarkers( bln = true ) {\r\n    this.options.markers = bln;\r\n\r\n    return this;\r\n  }\r\n\r\n  showMarkers() {\r\n    if ( this.options.markers ) {\r\n      return;\r\n    }\r\n\r\n    this.options.markers = true;\r\n    this.groupMarkers.setAttribute( 'display', 'initial' );\r\n\r\n    if ( this.shapeLegend ) {\r\n      this.shapeLegend.setAttribute( 'display', 'initial' );\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  hideMarkers() {\r\n    if ( !this.options.markers ) {\r\n      return;\r\n    }\r\n\r\n    this.options.markers = false;\r\n    this.groupMarkers.setAttribute( 'display', 'none' );\r\n\r\n    if ( this.shapeLegend ) {\r\n      this.shapeLegend.setAttribute( 'display', 'none' );\r\n    }\r\n    return this;\r\n  }\r\n\r\n  getUsedCategories() {\r\n    if ( typeof this.data[ 0 ] == 'object' ) {\r\n      return this.data.map( ( d ) => d.x );\r\n    }\r\n\r\n    return [];\r\n  }\r\n\r\n  getClosestPointToXY( valX = this.getXAxis().getMouseVal(), valY = this.getYAxis().getMouseVal(), withinPxX = 0, withinPxY = 0, useAxis = false, usePx = true ) {\r\n    // For the scatter serie it's pretty simple. No interpolation. We look at the point directly\r\n\r\n    //const xVal = this.getXAxis().getVal( x );\r\n    //const yVal = this.getYAxis().getVal( y );\r\n    const xValAllowed = this.getXAxis().getRelVal( withinPxX );\r\n    const yValAllowed = this.getYAxis().getRelVal( withinPxY );\r\n\r\n    // Index of the closest point\r\n    const closestPointIndex = this.waveform.findWithShortestDistance( {\r\n      x: valX,\r\n      y: valY,\r\n      xMax: xValAllowed,\r\n      yMax: yValAllowed,\r\n      interpolation: false,\r\n      scaleX: !usePx ? 1 : 1 / this.getXAxis().getRelVal( 1 ),\r\n      scaleY: !usePx ? 1 : 1 / this.getYAxis().getRelVal( 1 )\r\n    } );\r\n\r\n    return {\r\n\r\n      indexBefore: closestPointIndex,\r\n      indexAfter: closestPointIndex,\r\n\r\n      xBefore: this.waveform.getX( closestPointIndex ),\r\n      xAfter: this.waveform.getX( closestPointIndex ),\r\n      yBefore: this.waveform.getY( closestPointIndex ),\r\n      yAfter: this.waveform.getX( closestPointIndex ),\r\n\r\n      xExact: valX,\r\n\r\n      indexClosest: closestPointIndex,\r\n      interpolatedY: this.waveform.getY( closestPointIndex ),\r\n\r\n      xClosest: this.waveform.getX( closestPointIndex ),\r\n      yClosest: this.waveform.getY( closestPointIndex )\r\n    };\r\n  }\r\n}\r\n\r\nutil.mix( SerieScatter, ErrorBarMixin );\r\n\r\nexport default SerieScatter;","import * as util from '../graph.util.js';\r\nimport ErrorBarMixin from '../mixins/graph.mixin.errorbars.js';\r\n\r\nimport SerieScatter from './graph.serie.scatter.js';\r\n\r\nconst type = 'line';\r\n\r\nconst defaultOptions = {\r\n  /**\r\n   * @name SerieLineDefaultOptions\r\n   * @object\r\n   * @static\r\n   * @memberof SerieLine\r\n   */\r\n\r\n  // Extends scatterSerie\r\n  markers: false,\r\n\r\n  lineColor: 'black',\r\n  lineStyle: 1,\r\n  lineWidth: 1,\r\n\r\n  trackMouse: false,\r\n  lineToZero: false,\r\n  selectableOnClick: false,\r\n  overflowX: false,\r\n  overflowY: false\r\n};\r\n\r\nimport Serie from './graph.serie.js';\r\n\r\n/**\r\n * Serie line\r\n * @example graph.newSerie( name, options, \"line\" );\r\n * @see Graph#newSerie\r\n * @extends Serie\r\n */\r\nclass SerieLine extends SerieScatter {\r\n  constructor(graph, name, options, defaultInherited) {\r\n    super(\r\n      graph,\r\n      name,\r\n      options,\r\n      util.extend(true, {}, defaultOptions, defaultInherited)\r\n    );\r\n\r\n    this.selectionType = 'unselected';\r\n    this._type = type;\r\n    util.mapEventEmission(this.options, this); // Register events\r\n\r\n    // Creates an empty style variable\r\n    this.styles = {};\r\n\r\n    // Unselected style\r\n    this.styles.unselected = {\r\n      lineColor: this.options.lineColor,\r\n      lineStyle: this.options.lineStyle,\r\n      lineWidth: this.options.lineWidth\r\n    };\r\n\r\n    this.styles.selected = {\r\n      lineWidth: 3\r\n    };\r\n\r\n    this.shown = true;\r\n\r\n    this.data = [];\r\n    this._isMinOrMax = {\r\n      x: {\r\n        min: false,\r\n        max: false\r\n      },\r\n      y: {\r\n        min: false,\r\n        max: false\r\n      }\r\n    };\r\n\r\n    // Optimize is no markerPoints => save loops\r\n    //      this.markerPoints = {};\r\n\r\n    this.groupLines = document.createElementNS(this.graph.ns, 'g');\r\n    this.domMarker = document.createElementNS(this.graph.ns, 'path');\r\n\r\n    if (!this.domMarker.style) {\r\n      this.domMarker.style = {\r\n        cursor: 'pointer'\r\n      };\r\n    } else {\r\n      this.domMarker.style.cursor = 'pointer';\r\n    }\r\n\r\n    this.additionalData = {};\r\n\r\n    this.marker = document.createElementNS(this.graph.ns, 'circle');\r\n    this.marker.setAttribute('fill', 'black');\r\n    this.marker.setAttribute('r', 3);\r\n    this.marker.setAttribute('display', 'none');\r\n\r\n    this.markerLabel = document.createElementNS(this.graph.ns, 'text');\r\n    this.markerLabelSquare = document.createElementNS(this.graph.ns, 'rect');\r\n    this.markerLabelSquare.setAttribute('fill', 'white');\r\n    this.domMarkerHover = {};\r\n    this.domMarkerSelect = {};\r\n    this.markerHovered = 0;\r\n    this.groupMarkerSelected = document.createElementNS(this.graph.ns, 'g');\r\n\r\n    this.markerPoints = {};\r\n\r\n    //this.scale = 1;\r\n    //this.shift = 0;\r\n    this.lines = [];\r\n\r\n    this.groupMain.appendChild(this.groupLines);\r\n\r\n    this.groupMain.appendChild(this.marker);\r\n\r\n    this.groupMain.appendChild(this.groupMarkerSelected);\r\n    this.groupMain.appendChild(this.markerLabelSquare);\r\n    this.groupMain.appendChild(this.markerLabel);\r\n\r\n    this.independantMarkers = [];\r\n\r\n    if (this.initExtended1) {\r\n      this.initExtended1();\r\n    }\r\n\r\n    this.groupLines.addEventListener('click', (e) => {\r\n      if (this.options.selectableOnClick) {\r\n        if (this.isSelected()) {\r\n          this.graph.unselectSerie(this);\r\n        } else {\r\n          this.graph.selectSerie(this);\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  postInit() {\r\n    this.extendStyles();\r\n  }\r\n\r\n  /**\r\n   * Sets the options of the serie\r\n   * @see SerieLineDefaultOptions\r\n   * @param {Object} options - A object containing the options to set\r\n   * @return {SerieLine} The current serie\r\n   * @memberof SerieLine\r\n   */\r\n  setOptions(options) {\r\n    //this.options = util.extend( true, {}, SerieLine.prototype.defaults, ( options || {} ) );\r\n    // Unselected style\r\n    /*this.styles.unselected = {\r\n      lineColor: this.options.lineColor,\r\n      lineStyle: this.options.lineStyle\r\n    };\r\n*/\r\n    this.applyLineStyles();\r\n    return this;\r\n  }\r\n\r\n  onMouseWheel() { }\r\n\r\n  /**\r\n   * Cleans the DOM from the serie internal object (serie and markers). Mostly used internally when a new {@link Serie#setData} is called\r\n   * @returns {SerieLine} The current serie\r\n   * @memberof SerieLine\r\n   */\r\n  empty() {\r\n    for (var i = 0, l = this.lines.length; i < l; i++) {\r\n      this.groupLines.removeChild(this.lines[i]);\r\n    }\r\n    this.lines = [];\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Applies a selection to the serie\r\n   * @param {String} [ selectionType = \"selected\" ] - The selection name\r\n   * @returns {SerieLine} The current serie\r\n   * @see SerieLine#unselect\r\n   * @memberof SerieLine\r\n   */\r\n  select(selectionType = 'selected') {\r\n    this.selected = selectionType !== 'unselected';\r\n    this.selectionType = selectionType;\r\n\r\n    this.applyLineStyles();\r\n    this.applyLineStyle(this.getSymbolForLegend());\r\n\r\n    super.select(selectionType);\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Removes the selection to the serie. Effectively, calls {@link SerieLine#select}(\"unselected\").\r\n   * @returns {SerieLine} The current serie\r\n   * @see SerieLine#select\r\n   * @memberof SerieLine\r\n   */\r\n  unselect() {\r\n    this.selected = false;\r\n    super.unselect();\r\n    return this.select('unselected');\r\n  }\r\n\r\n  /**\r\n   * Computes and returns a line SVG element with the same line style as the serie, or width 20px\r\n   * @returns {SVGElement}\r\n   * @memberof SerieLine\r\n   */\r\n  getSymbolForLegend() {\r\n    const container = this._getSymbolForLegendContainer();\r\n\r\n    if (!this.lineForLegend) {\r\n      var line = document.createElementNS(this.graph.ns, 'line');\r\n      this.applyLineStyle(line);\r\n\r\n      line.setAttribute('x1', 5);\r\n      line.setAttribute('x2', 25);\r\n      line.setAttribute('y1', 0);\r\n      line.setAttribute('y2', 0);\r\n\r\n      line.setAttribute('cursor', 'pointer');\r\n\r\n      this.lineForLegend = line;\r\n      container.appendChild(this.lineForLegend);\r\n    } else {\r\n      this.applyLineStyle(this.lineForLegend);\r\n    }\r\n\r\n    super.getSymbolForLegend();\r\n\r\n    return this.lineForLegend;\r\n  }\r\n\r\n  /**\r\n   * Degrades the data of the serie. This option is used for big data sets that have monotoneously increasing (or decreasing) x values.\r\n   * For example, a serie containing 1'000'000 points, displayed over 1'000px, will have 1'000 points per pixel. Often it does not make sense to display more than 2-3 points per pixel.\r\n   * <code>degrade( pxPerPoint )</code> allows a degradation of the serie, based on a a number of pixel per point. It computes the average of the data that would be displayed over each pixel range\r\n   * Starting from jsGraph 2.0, it does not calculate the minimum and maximum and creates the zone serie anymore\r\n   * @return {SerieLine} The current serie instance\r\n   * @example serie.degrade( 0.5 ); // Will display 2 points per pixels\r\n   * @memberof SerieLine\r\n   */\r\n  degrade(pxPerP) {\r\n    this.degradationPx = pxPerP;\r\n    return this;\r\n  }\r\n\r\n  drawInit(force) {\r\n    var data, xData;\r\n\r\n    try {\r\n      this.axisCheck();\r\n    } catch (e) {\r\n      console.warn(e);\r\n      return false;\r\n    }\r\n\r\n    this.currentLineId = 0;\r\n    this.counter = 0;\r\n    this._drawn = true;\r\n    this.currentLine = '';\r\n\r\n    // Degradation\r\n\r\n    if (this.waveform) {\r\n      if (this.degradationPx) {\r\n        this.waveform.resampleForDisplay({\r\n          resampleToPx: this.degradationPx,\r\n          xPosition: this.getXAxis().getPx.bind(this.getXAxis()),\r\n          minX: this.getXAxis().getCurrentMin(),\r\n          maxX: this.getXAxis().getCurrentMax()\r\n        });\r\n\r\n        this._dataToUse = [this.waveform.getDataToUseFlat()];\r\n      } else if (this.waveform.hasAggregation()) {\r\n        let xaxis = this.getXAxis(),\r\n          numberOfPointsInTotal =\r\n            (this.graph.getDrawingWidth() *\r\n              (xaxis.getDataMax() - xaxis.getDataMin())) /\r\n            (xaxis.getCurrentMax() - xaxis.getCurrentMin()),\r\n          promise = this.waveform.selectAggregatedData(numberOfPointsInTotal);\r\n\r\n        if (promise instanceof Promise) {\r\n          promise.then(() => {\r\n            this.draw(force);\r\n          });\r\n\r\n          return false;\r\n        } else if (promise === false) {\r\n          return false;\r\n        } else {\r\n          this._dataToUse = this.waveform.getDataToUseFlat();\r\n        }\r\n      }\r\n\r\n      //    this._dataToUse = this.waveform.getDataToUseFlat();\r\n    } else {\r\n      this._dataToUse = this.data;\r\n      this._xDataToUse = this.xData;\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  removeLinesGroup() {\r\n    this._afterLinesGroup = this.groupLines.nextSibling;\r\n    this.groupMain.removeChild(this.groupLines);\r\n  }\r\n\r\n  insertLinesGroup() {\r\n    if (!this._afterLinesGroup) {\r\n      throw 'Could not find group after lines to insertion.';\r\n    }\r\n\r\n    this.groupMain.insertBefore(this.groupLines, this._afterLinesGroup);\r\n    this._afterLinesGroup = false;\r\n  }\r\n\r\n  removeExtraLines() {\r\n    var i = this.currentLineId,\r\n      l = this.lines.length;\r\n\r\n    for (; i < l; i++) {\r\n      this.groupLines.removeChild(this.lines[i]);\r\n    }\r\n\r\n    this.lines.splice(this.currentLineId, l - this.currentLineId);\r\n    this.currentLineId = 0;\r\n  }\r\n\r\n  /**\r\n   * Draws the serie\r\n   * @memberof SerieLine\r\n   */\r\n  draw(force) {\r\n    // Serie redrawing\r\n\r\n    if (!this.getXAxis() || !this.getYAxis()) {\r\n      throw 'No axes were defined for this serie';\r\n    }\r\n\r\n    if (force || this.hasDataChanged()) {\r\n      super.draw(force);\r\n\r\n      if (!this.drawInit(force)) {\r\n        return;\r\n      }\r\n\r\n      var data = this._dataToUse,\r\n        xData = this._xDataToUse,\r\n        slotToUse = this._slotToUse;\r\n\r\n      this.removeLinesGroup();\r\n\r\n      this.lookForMaxima = true;\r\n      this.lookForMinima = false;\r\n\r\n      this.pos0 = this.getYAxis().getPos(\r\n        Math.max(0, this.getYAxis().getCurrentMin())\r\n      );\r\n\r\n      if (this.hasErrors()) {\r\n        this.errorDrawInit();\r\n      }\r\n\r\n      this._draw();\r\n\r\n      if (this.hasErrors()) {\r\n        this.errorDraw();\r\n      }\r\n\r\n      this.removeExtraLines();\r\n\r\n      this.insertLinesGroup();\r\n    }\r\n\r\n    // Unhovers everything\r\n    for (var i in this.domMarkerHover) {\r\n      this.toggleMarker(i.split(','), false, true);\r\n    }\r\n\r\n    // Deselects everything\r\n    for (var i in this.domMarkerSelect) {\r\n      this.toggleMarker(i.split(','), false, false);\r\n    }\r\n\r\n    this.applyLineStyle(this.getSymbolForLegend());\r\n\r\n    if (this.hasStyleChanged(this.selectionType)) {\r\n      this.updateStyle();\r\n    }\r\n\r\n    this.dataHasChanged(false);\r\n    super.afterDraw();\r\n  }\r\n\r\n  _draw() {\r\n    let waveform = this.waveform,\r\n      data,\r\n      x,\r\n      y,\r\n      lastX = false,\r\n      lastY = false,\r\n      xpx,\r\n      ypx,\r\n      xpx2,\r\n      ypx2,\r\n      xAxis = this.getXAxis(),\r\n      yAxis = this.getYAxis(),\r\n      xMin = xAxis.getCurrentMin(),\r\n      yMin = yAxis.getCurrentMin(),\r\n      xMax = xAxis.getCurrentMax(),\r\n      yMax = yAxis.getCurrentMax();\r\n\r\n    if (!waveform) {\r\n      return;\r\n    }\r\n\r\n    data = waveform.getData(true);\r\n    // Y crossing\r\n    let yLeftCrossingRatio,\r\n      yLeftCrossing,\r\n      yRightCrossingRatio,\r\n      yRightCrossing,\r\n      xTopCrossingRatio,\r\n      xTopCrossing,\r\n      xBottomCrossingRatio,\r\n      xBottomCrossing,\r\n      /*xshift = waveform.getXShift(),\r\n      xscale = wave.getXScale(),*/\r\n      yshift = waveform.getShift(),\r\n      yscale = waveform.getScale();\r\n\r\n    let pointOutside = false;\r\n    let lastPointOutside = false;\r\n    let pointOnAxis;\r\n\r\n    let _monotoneous = this.isMonotoneous();\r\n\r\n    let i = 0,\r\n      l = waveform.getLength();\r\n\r\n    this.currentLine = '';\r\n\r\n    if (waveform.isXMonotoneous()) {\r\n      if (waveform.isXMonotoneousAscending()) {\r\n        try {\r\n          i = waveform.getIndexFromX(xMin, true) || 0;\r\n          l = waveform.getIndexFromX(xMax, true);\r\n          if (l == false) {\r\n            l = waveform.getLength();\r\n          }\r\n        } catch (e) {\r\n          l = waveform.getLength();\r\n        }\r\n      } else {\r\n        try {\r\n          i = waveform.getIndexFromX(xMax, true) || 0;\r\n          l = waveform.getIndexFromX(xMin, true);\r\n\r\n          if (l == false) {\r\n            l = waveform.getLength();\r\n          }\r\n\r\n        } catch (e) {\r\n          l = waveform.getLength();\r\n        }\r\n      }\r\n\r\n      l += 2;\r\n      if (l > data.length) {\r\n        l = data.length;\r\n      }\r\n    }\r\n\r\n    for (; i < l; i += 1) {\r\n      x = waveform.getX(i, true);\r\n      y = data[i] * yscale + yshift;\r\n      if (x != x || y != y) {\r\n        // NaN checks\r\n        this._createLine();\r\n        continue;\r\n      }\r\n\r\n      if (\r\n        (!this.options.overflowX && x < xMin && lastX < xMin) ||\r\n        (!this.options.overflowX && x > xMax && lastX > xMax) ||\r\n        (((!this.options.overflowY && y < yMin && lastY < yMin) ||\r\n          (!this.options.overflowY && y > yMax && lastY > yMax)) &&\r\n          !this.options.lineToZero)\r\n      ) {\r\n        lastX = x;\r\n        lastY = y;\r\n        lastPointOutside = true;\r\n        continue;\r\n      }\r\n\r\n      this.counter2 = i;\r\n\r\n      if (this.options.lineToZero) {\r\n        if (y > yMax) {\r\n          y = yMax;\r\n        }\r\n        if (y < yMin) {\r\n          y = yMin;\r\n        }\r\n      }\r\n\r\n      xpx2 = this.getX(x);\r\n      ypx2 = this.getY(y);\r\n      //xpx2 = 0;\r\n      //ypx2 = 0;\r\n\r\n      if (xpx2 == xpx && ypx2 == ypx) {\r\n        continue;\r\n      }\r\n\r\n      if (xpx2 != xpx2 || ypx2 != ypx2) {\r\n        // NaN checks\r\n        if (this.counter > 0) {\r\n          this._createLine();\r\n        }\r\n        continue;\r\n      }\r\n\r\n      if (!_monotoneous) {\r\n        pointOutside =\r\n          (!this.options.overflowX && (x < xMin || x > xMax)) ||\r\n          (!this.options.overflowY && (y < yMin || y > yMax));\r\n      } else {\r\n        pointOutside = !this.options.overflowY && (y < yMin || y > yMax);\r\n      }\r\n\r\n      if (this.options.lineToZero) {\r\n        pointOutside = x < xMin || x > xMax;\r\n\r\n        if (pointOutside) {\r\n          continue;\r\n        }\r\n      } else {\r\n        if (pointOutside || lastPointOutside) {\r\n          if ((lastX === false || lastY === false) && !lastPointOutside) {\r\n            xpx = xpx2;\r\n            ypx = ypx2;\r\n            lastX = x;\r\n            lastY = y;\r\n          } else {\r\n            pointOnAxis = [];\r\n            // Y crossing\r\n            yLeftCrossingRatio = (x - xMin) / (x - lastX);\r\n            yLeftCrossing = y - yLeftCrossingRatio * (y - lastY);\r\n            yRightCrossingRatio = (x - xMax) / (x - lastX);\r\n            yRightCrossing = y - yRightCrossingRatio * (y - lastY);\r\n\r\n            // X crossing\r\n            xTopCrossingRatio = (y - yMin) / (y - lastY);\r\n            xTopCrossing = x - xTopCrossingRatio * (x - lastX);\r\n            xBottomCrossingRatio = (y - yMax) / (y - lastY);\r\n            xBottomCrossing = x - xBottomCrossingRatio * (x - lastX);\r\n\r\n            if (\r\n              yLeftCrossingRatio < 1 &&\r\n              yLeftCrossingRatio > 0 &&\r\n              yLeftCrossing !== false &&\r\n              yLeftCrossing <= yMax &&\r\n              yLeftCrossing >= yMin\r\n            ) {\r\n              pointOnAxis.push([xMin, yLeftCrossing]);\r\n            }\r\n\r\n            if (\r\n              yRightCrossingRatio < 1 &&\r\n              yRightCrossingRatio > 0 &&\r\n              yRightCrossing !== false &&\r\n              yRightCrossing <= yMax &&\r\n              yRightCrossing >= yMin\r\n            ) {\r\n              pointOnAxis.push([xMax, yRightCrossing]);\r\n            }\r\n\r\n            if (\r\n              xTopCrossingRatio < 1 &&\r\n              xTopCrossingRatio > 0 &&\r\n              xTopCrossing !== false &&\r\n              xTopCrossing <= xMax &&\r\n              xTopCrossing >= xMin\r\n            ) {\r\n              pointOnAxis.push([xTopCrossing, yMin]);\r\n            }\r\n\r\n            if (\r\n              xBottomCrossingRatio < 1 &&\r\n              xBottomCrossingRatio > 0 &&\r\n              xBottomCrossing !== false &&\r\n              xBottomCrossing <= xMax &&\r\n              xBottomCrossing >= xMin\r\n            ) {\r\n              pointOnAxis.push([xBottomCrossing, yMax]);\r\n            }\r\n\r\n            if (pointOnAxis.length > 0) {\r\n              if (!pointOutside) {\r\n                // We were outside and now go inside\r\n                // Actually this is possible if we hit the corner pretty perfectly\r\n                /*\r\n                                if (pointOnAxis.length > 1) {\r\n                                  console.error('Programmation error. Please e-mail me.');\r\n                                  console.log(\r\n                                    pointOnAxis,\r\n                                    xBottomCrossing,\r\n                                    xTopCrossing,\r\n                                    yRightCrossing,\r\n                                    yLeftCrossing,\r\n                                    y,\r\n                                    yMin,\r\n                                    yMax,\r\n                                    lastY\r\n                                  );\r\n                                }*/\r\n\r\n                this._createLine();\r\n                this._addPoint(\r\n                  this.getX(pointOnAxis[0][0]),\r\n                  this.getY(pointOnAxis[0][1]),\r\n                  pointOnAxis[0][0],\r\n                  pointOnAxis[0][1],\r\n                  false,\r\n                  false,\r\n                  false\r\n                );\r\n                this._addPoint(xpx2, ypx2, lastX, lastY, false, false, true);\r\n              } else if (!lastPointOutside) {\r\n                // We were inside and now go outside\r\n                /*\r\n                                if (pointOnAxis.length > 1) {\r\n                                  console.error('Programmation error. Please e-mail me.');\r\n                                  console.log(\r\n                                    pointOnAxis,\r\n                                    xBottomCrossing,\r\n                                    xTopCrossing,\r\n                                    yRightCrossing,\r\n                                    yLeftCrossing,\r\n                                    y,\r\n                                    yMin,\r\n                                    yMax,\r\n                                    lastY\r\n                                  );\r\n                                }*/\r\n\r\n                this._addPoint(\r\n                  this.getX(pointOnAxis[0][0]),\r\n                  this.getY(pointOnAxis[0][1]),\r\n                  pointOnAxis[0][0],\r\n                  pointOnAxis[0][1],\r\n                  false,\r\n                  false,\r\n                  false\r\n                );\r\n              } else {\r\n                // No crossing: do nothing\r\n                if (pointOnAxis.length == 2) {\r\n                  this._createLine();\r\n\r\n                  this._addPoint(\r\n                    this.getX(pointOnAxis[0][0]),\r\n                    this.getY(pointOnAxis[0][1]),\r\n                    pointOnAxis[0][0],\r\n                    pointOnAxis[0][1],\r\n                    false,\r\n                    false,\r\n                    false\r\n                  );\r\n                  this._addPoint(\r\n                    this.getX(pointOnAxis[1][0]),\r\n                    this.getY(pointOnAxis[1][1]),\r\n                    pointOnAxis[0][0],\r\n                    pointOnAxis[0][1],\r\n                    false,\r\n                    false,\r\n                    false\r\n                  );\r\n                }\r\n              }\r\n            } else if (!pointOutside) {\r\n              this._addPoint(xpx2, ypx2, lastX, lastY, i, false, false);\r\n            } // else {\r\n            // Norman:\r\n            // This else case is not the sign of a bug. If yLeftCrossing == 0 or 1 for instance, pointOutside or lastPointOutside will be true\r\n            // However, there's no need to draw anything because the point is on the axis and will already be covered.\r\n            // 28 Aug 2015\r\n\r\n            /*\r\n              if ( lastPointOutside !== pointOutside ) {\r\n                console.error( \"Programmation error. A crossing should have been found\" );\r\n                console.log( yLeftCrossing, yLeftCrossingRatio, yMax, yMin );\r\n                console.log( yRightCrossing, yRightCrossingRatio, yMax, yMin );\r\n                console.log( xTopCrossing, xTopCrossingRatio, xMax, xMin );\r\n                console.log( xBottomCrossing, xBottomCrossingRatio, xMax, xMin );\r\n                console.log( pointOutside, lastPointOutside )\r\n\r\n              }\r\n              */\r\n            // }\r\n          }\r\n\r\n          xpx = xpx2;\r\n          ypx = ypx2;\r\n          lastX = x;\r\n          lastY = y;\r\n\r\n          lastPointOutside = pointOutside;\r\n\r\n          continue;\r\n        }\r\n      }\r\n\r\n      this._addPoint(xpx2, ypx2, x, y, i, false, true);\r\n\r\n      //this.detectPeaks( x, y );\r\n\r\n      xpx = xpx2;\r\n      ypx = ypx2;\r\n\r\n      lastX = x;\r\n      lastY = y;\r\n    }\r\n\r\n    this._createLine();\r\n\r\n    if (this._tracker) {\r\n      if (this._trackerDom) {\r\n        this._trackerDom.remove();\r\n      }\r\n\r\n      var cloned = this.groupLines.cloneNode(true);\r\n      this.groupMain.appendChild(cloned);\r\n\r\n      for (i = 0, l = cloned.children.length; i < l; i++) {\r\n        cloned.children[i].setAttribute('stroke', 'transparent');\r\n        cloned.children[i].setAttribute('stroke-width', '25px');\r\n        cloned.children[i].setAttribute('pointer-events', 'stroke');\r\n      }\r\n\r\n      this._trackerDom = cloned;\r\n\r\n      this.groupMain.addEventListener('mousemove', (e) => {\r\n        var coords = this.graph._getXY(e),\r\n          ret = this.handleMouseMove(false, false);\r\n\r\n        this._trackingCallback(this, ret, coords.x, coords.y);\r\n      });\r\n\r\n      this.groupMain.addEventListener('mouseleave', (e) => {\r\n        this._trackingOutCallback(this);\r\n      });\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  kill() {\r\n    super.kill();\r\n  }\r\n\r\n  _addPoint(xpx, ypx, x, y, j, move, allowMarker) {\r\n    /*if( ! this.currentLineId ) {\r\n        throw \"No current line\"\r\n      }* @memberof SerieLine\r\n*/\r\n\r\n    if (xpx !== xpx || ypx !== ypx) {\r\n      return;\r\n    }\r\n\r\n    if (this.counter == 0) {\r\n      this.currentLine = 'M ';\r\n    } else {\r\n      if (this.options.lineToZero || move) {\r\n        this.currentLine += 'M ';\r\n      } else {\r\n        this.currentLine += 'L ';\r\n      }\r\n    }\r\n\r\n    this.currentLine += xpx;\r\n    this.currentLine += ' ';\r\n    this.currentLine += ypx;\r\n    this.currentLine += ' ';\r\n\r\n    if (this.options.lineToZero && this.pos0 !== undefined) {\r\n      this.currentLine += 'L ';\r\n      this.currentLine += xpx;\r\n      this.currentLine += ' ';\r\n      this.currentLine += this.pos0;\r\n      this.currentLine += ' ';\r\n    }\r\n\r\n    if (this.hasErrors()) {\r\n      this.errorAddPoint(j, x, y, xpx, ypx);\r\n    }\r\n\r\n    this.counter++;\r\n  }\r\n\r\n  // Returns the DOM\r\n  _createLine() {\r\n    var i = this.currentLineId++,\r\n      line;\r\n\r\n    // Creates a line if needed\r\n    if (this.lines[i]) {\r\n      line = this.lines[i];\r\n    } else {\r\n      line = document.createElementNS(this.graph.ns, 'path');\r\n      this.applyLineStyle(line);\r\n      this.groupLines.appendChild(line);\r\n      this.lines[i] = line;\r\n    }\r\n\r\n    if (this.counter == 0) {\r\n      line.setAttribute('d', '');\r\n    } else {\r\n      line.setAttribute('d', this.currentLine);\r\n    }\r\n\r\n    this.currentLine = 'M ';\r\n    this.counter = 0;\r\n\r\n    return line;\r\n  }\r\n\r\n  /**\r\n   * Reapply the current style to the serie lines elements. Mostly used internally\r\n   * @memberof SerieLine\r\n   */\r\n  applyLineStyles() {\r\n    for (var i = 0; i < this.lines.length; i++) {\r\n      this.applyLineStyle(this.lines[i]);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Applies the current style to a line element. Mostly used internally\r\n   * @memberof SerieLine\r\n   */\r\n  applyLineStyle(line) {\r\n    line.setAttribute('stroke', this.getLineColor());\r\n    line.setAttribute('stroke-width', this.getLineWidth());\r\n    if (this.getLineDashArray()) {\r\n      line.setAttribute('stroke-dasharray', this.getLineDashArray());\r\n    } else {\r\n      line.removeAttribute('stroke-dasharray');\r\n    }\r\n\r\n    if (this.getFillColor()) {\r\n      line.setAttribute('fill', this.getFillColor());\r\n    } else {\r\n      line.setAttribute('fill', 'none');\r\n    }\r\n\r\n    //\tline.setAttribute('shape-rendering', 'optimizeSpeed');\r\n  }\r\n\r\n  /**\r\n   * Updates the current style (lines + legend) of the serie. Use this method if you have explicitely changed the options of the serie\r\n   * @example var opts = { lineColor: 'red' };\r\n   * var s = graph.newSerie( \"name\", opts ).setData( someData );\r\n   * opts.lineColor = 'green';\r\n   * s.updateStyle(); // Sets the lineColor to green\r\n   * s.draw(); // Would also do the same thing, but recalculates the whole serie display (including (x,y) point pairs)\r\n   * @memberof SerieLine\r\n   */\r\n  updateStyle() {\r\n    this.applyLineStyles();\r\n    this.setLegendSymbolStyle();\r\n\r\n    this.styleHasChanged(false);\r\n  }\r\n\r\n  // Revised August 2014. Ok\r\n  getMarkerPath(family, add) {\r\n    var z = family.zoom || 1,\r\n      add = add || 0,\r\n      el = [];\r\n\r\n    switch (family.type) {\r\n      case 2:\r\n        el = ['m', -2, -2, 'l', 4, 4, 'm', -4, 0, 'l', 4, -4];\r\n        break;\r\n\r\n      case 3:\r\n        el = ['m', -2, 0, 'l', 4, 0, 'm', -2, -2, 'l', 0, 4];\r\n        break;\r\n\r\n      case 4:\r\n        el = ['m', -1, -1, 'l', 2, 0, 'l', -1, 2, 'z'];\r\n        break;\r\n\r\n      default:\r\n      case 1:\r\n        el = ['m', -2, -2, 'l', 4, 0, 'l', 0, 4, 'l', -4, 0, 'z'];\r\n        break;\r\n    }\r\n\r\n    if ((z == 1 || !z) && !add) {\r\n      return el.join(' ');\r\n    }\r\n\r\n    var num = 'number';\r\n\r\n    if (!el) {\r\n      return;\r\n    }\r\n\r\n    for (var i = 0, l = el.length; i < l; i++) {\r\n      if (typeof el[i] == num) {\r\n        el[i] *= z + add;\r\n      }\r\n    }\r\n\r\n    return el.join(' ');\r\n  }\r\n\r\n  /**\r\n   * Searches the closest point pair (x,y) to the a pair of pixel position\r\n   * @param {Number} x - The x position in pixels (from the left)\r\n   * @param {Number} y - The y position in pixels (from the left)\r\n   * @returns {Number} Index in the data array of the closest (x,y) pair to the pixel position passed in parameters\r\n   * @memberof SerieLine\r\n   */\r\n  /*\r\n\r\n  Let's deprecate this\r\n\r\n  searchIndexByPxXY( x, y ) {\r\n    var oldDist = false,\r\n      xyindex = false,\r\n      dist;\r\n\r\n    var xData = this._xDataToUse,\r\n      p_x,\r\n      p_y;\r\n\r\n    for ( var k = 0, m = this.waveform.getLength(); k < m; k += 1 ) {\r\n      p_x = this.waveform.getX( k );\r\n      p_y = this.waveform.getY( k );\r\n\r\n      dist = Math.pow( this.getX( p_x ) - x, 2 ) + Math.pow( this.getY( p_y ) - y, 2 );\r\n\r\n      if ( !oldDist || dist < oldDist ) {\r\n        oldDist = dist;\r\n        xyindex = k;\r\n      }\r\n    }\r\n\r\n    return xyindex;\r\n  }\r\n*/\r\n  handleMouseMove(xValue, doMarker, yValue) {\r\n    var valX = xValue || this.getXAxis().getMouseVal(),\r\n      valY = yValue || this.getYAxis().getMouseVal();\r\n\r\n    var value = this.getClosestPointToXY(valX, valY);\r\n\r\n    if (!value) {\r\n      return;\r\n    }\r\n\r\n    var ratio, intY;\r\n\r\n    if (value.xMax == value.xMin) {\r\n      intY = value.yMin;\r\n    } else {\r\n      //ratio = ( valX - value.xMin ) / ( value.xMax - value.xMin );\r\n      //intY = ( ( 1 - ratio ) * value.yMin + ratio * value.yMax );\r\n    }\r\n\r\n    if (doMarker && this.options.trackMouse) {\r\n      if (value.xMin == undefined) {\r\n        return false;\r\n      }\r\n    }\r\n\r\n    return {\r\n      xBefore: value.xMin,\r\n      xAfter: value.xMax,\r\n      yBefore: value.yMin,\r\n      yAfter: value.yMax,\r\n      trueX: value.xExact,\r\n      indexClosest: value.indexClosest,\r\n      interpolatedY: intY,\r\n\r\n      xClosest: value.xClosest,\r\n      yClosest: value.yClosest\r\n    };\r\n  }\r\n  /**\r\n   * Gets the maximum value of the y values between two x values. The x values must be monotoneously increasing\r\n   * @param {Number} startX - The start of the x values\r\n   * @param {Number} endX - The end of the x values\r\n   * @returns {Number} Maximal y value in between startX and endX\r\n   * @memberof SerieLine\r\n   */\r\n  getMax(start, end) {\r\n    var start2 = Math.min(start, end),\r\n      end2 = Math.max(start, end),\r\n      v1 = this.getClosestPointToXY(start2),\r\n      v2 = this.getClosestPointToXY(end2),\r\n      i,\r\n      j,\r\n      max = -Infinity,\r\n      initJ,\r\n      maxJ;\r\n\r\n    if (!v1) {\r\n      start2 = this.minX;\r\n      v1 = this.getClosestPointToXY(start2);\r\n    }\r\n\r\n    if (!v2) {\r\n      end2 = this.maxX;\r\n      v2 = this.getClosestPointToXY(end2);\r\n    }\r\n\r\n    if (!v1 || !v2) {\r\n      return -Infinity;\r\n    }\r\n\r\n    for (i = v1.dataIndex; i <= v2.dataIndex; i++) {\r\n      initJ = i == v1.dataIndex ? v1.xBeforeIndexArr : 0;\r\n      maxJ = i == v2.dataIndex ? v2.xBeforeIndexArr : this.data[i].length;\r\n\r\n      for (j = initJ; j <= maxJ; j += 2) {\r\n        max = Math.max(max, this.data[i][j + 1]);\r\n      }\r\n    }\r\n\r\n    return max;\r\n  }\r\n\r\n  /**\r\n   * Gets the minimum value of the y values between two x values. The x values must be monotoneously increasing\r\n   * @param {Number} startX - The start of the x values\r\n   * @param {Number} endX - The end of the x values\r\n   * @returns {Number} Maximal y value in between startX and endX\r\n   * @memberof SerieLine\r\n   */\r\n  getMin(start, end) {\r\n    var start2 = Math.min(start, end),\r\n      end2 = Math.max(start, end),\r\n      v1 = this.getClosestPointToXY(start2),\r\n      v2 = this.getClosestPointToXY(end2),\r\n      i,\r\n      j,\r\n      min = Infinity,\r\n      initJ,\r\n      maxJ;\r\n\r\n    if (!v1) {\r\n      start2 = this.minX;\r\n      v1 = this.getClosestPointToXY(start2);\r\n    }\r\n\r\n    if (!v2) {\r\n      end2 = this.maxX;\r\n      v2 = this.getClosestPointToXY(end2);\r\n    }\r\n\r\n    if (!v1 || !v2) {\r\n      return Infinity;\r\n    }\r\n\r\n    for (i = v1.dataIndex; i <= v2.dataIndex; i++) {\r\n      initJ = i == v1.dataIndex ? v1.xBeforeIndexArr : 0;\r\n      maxJ = i == v2.dataIndex ? v2.xBeforeIndexArr : this.data[i].length;\r\n\r\n      for (j = initJ; j <= maxJ; j += 2) {\r\n        min = Math.min(min, this.data[i][j + 1]);\r\n      }\r\n    }\r\n\r\n    return min;\r\n  }\r\n\r\n  /* LINE STYLE * @memberof SerieLine\r\n   */\r\n\r\n  setStyle(style, selectionType = 'unselected') {\r\n    this.styles[selectionType] = style;\r\n    this.styleHasChanged(selectionType);\r\n  }\r\n\r\n  setLineStyle(number, selectionType = 'unselected', applyToSelected) {\r\n    this.styles[selectionType] = this.styles[selectionType] || {};\r\n    this.styles[selectionType].lineStyle = number;\r\n\r\n    if (applyToSelected) {\r\n      this.setLineStyle(number, 'selected');\r\n    }\r\n\r\n    this.styleHasChanged(selectionType);\r\n\r\n    return this;\r\n  }\r\n\r\n  getLineStyle(selectionType) {\r\n    return this.getStyle(selectionType).lineStyle;\r\n  }\r\n\r\n  getLineDashArray(selectionType = this.selectionType || 'unselected') {\r\n    switch (this.getStyle(selectionType).lineStyle) {\r\n      case 2:\r\n        return '1, 1';\r\n        break;\r\n      case 3:\r\n        return '2, 2';\r\n        break;\r\n      case 4:\r\n        return '3, 3';\r\n        break;\r\n      case 5:\r\n        return '4, 4';\r\n        break;\r\n      case 6:\r\n        return '5, 5';\r\n        break;\r\n\r\n      case 7:\r\n        return '5 2';\r\n        break;\r\n      case 8:\r\n        return '2 5';\r\n        break;\r\n\r\n      case 9:\r\n        return '4 2 4 4';\r\n        break;\r\n      case 10:\r\n        return '1,3,1';\r\n        break;\r\n      case 11:\r\n        return '9 2';\r\n        break;\r\n      case 12:\r\n        return '2 9';\r\n        break;\r\n\r\n      case 1:\r\n      case false:\r\n        return false;\r\n        break;\r\n\r\n      default:\r\n        return this.styles[selectionType].lineStyle;\r\n        break;\r\n    }\r\n\r\n    this.styleHasChanged(selectionType);\r\n  }\r\n\r\n  getStyle(selectionType = this.selectionType || 'unselected') {\r\n    return this.styles[selectionType] || this.styles.unselected;\r\n  }\r\n\r\n  extendStyles() {\r\n    for (var i in this.styles) {\r\n      var s = this.styles[i];\r\n      if (s) {\r\n        this.styles[i] = util.extend(true, {}, this.styles.unselected, s);\r\n      }\r\n    }\r\n  }\r\n\r\n  extendStyle(styleTarget, styleOrigin) {\r\n    var s = this.styles[styleTarget];\r\n    this.styles[styleTarget] = util.extend(\r\n      true, {},\r\n      this.styles[styleOrigin || 'unselected'],\r\n      s || {}\r\n    );\r\n    this.styleHasChanged(styleTarget);\r\n  }\r\n\r\n  /** @memberof SerieLine\r\n   */\r\n\r\n  setLineWidth(width, selectionType, applyToSelected) {\r\n    selectionType = selectionType || 'unselected';\r\n    this.styles[selectionType] = this.styles[selectionType] || {};\r\n    this.styles[selectionType].lineWidth = width;\r\n\r\n    if (applyToSelected) {\r\n      this.setLineWidth(width, 'selected');\r\n    }\r\n\r\n    this.styleHasChanged(selectionType);\r\n\r\n    return this;\r\n  }\r\n\r\n  getLineWidth(selectionType) {\r\n    return this.getStyle(selectionType).lineWidth || 1;\r\n  }\r\n\r\n  /* LINE COLOR * @memberof SerieLine\r\n   */\r\n  setLineColor(color, selectionType, applyToSelected) {\r\n    selectionType = selectionType || 'unselected';\r\n    this.styles[selectionType] = this.styles[selectionType] || {};\r\n    this.styles[selectionType].lineColor = color;\r\n\r\n    if (applyToSelected) {\r\n      this.setLineColor(color, 'selected');\r\n    }\r\n\r\n    this.styleHasChanged(selectionType);\r\n\r\n    return this;\r\n  }\r\n\r\n  /* FILL COLOR * @memberof SerieLine\r\n   */\r\n  setFillColor(color, selectionType, applyToSelected) {\r\n    selectionType = selectionType || 'unselected';\r\n    this.styles[selectionType] = this.styles[selectionType] || {};\r\n    this.styles[selectionType].fillColor = color;\r\n\r\n    if (applyToSelected) {\r\n      this.setFillColor(color, 'selected');\r\n    }\r\n\r\n    this.styleHasChanged(selectionType);\r\n\r\n    return this;\r\n  }\r\n\r\n  getLineColor(selectionType) {\r\n    return this.getStyle(selectionType).lineColor || 'black';\r\n  }\r\n\r\n  getFillColor(selectionType) {\r\n    return this.getStyle(selectionType).fillColor || undefined;\r\n  }\r\n\r\n  /** @memberof SerieLine\r\n   */\r\n\r\n  isMonotoneous() {\r\n    if (this.waveform) {\r\n      return this.waveform.isMonotoneous();\r\n    }\r\n\r\n    return !!this.xmonotoneous;\r\n  }\r\n\r\n  findLocalMinMax(xRef, xWithin, type) {\r\n    if (!this.waveform) {\r\n      return false;\r\n    }\r\n\r\n    return this.waveform.findLocalMinMax(xRef, xWithin, type);\r\n  }\r\n\r\n  /**\r\n   * Performs a binary search to find the closest point index to an x value. For the binary search to work, it is important that the x values are monotoneous.\r\n   * If the serie is not monotoneously ascending, then a Euclidian search is made\r\n   * @param {Number} valX - The x value to search for\r\n   * @param {number} valY - The y value to search for. Optional. When omitted, only a search in x will be done\r\n   * @param {Number} withinPxX - The maximum distance in X\r\n   * @param {number} withinPxY - The maximum distance in Y\r\n   * @param {string} useAxis - ```x``` or ```y```. Use only the value of x or y to find the closest point\r\n   * @returns {Object} Index in the data array of the closest (x,y) pair to the pixel position passed in parameters\r\n   * @memberof SerieLine\r\n   */\r\n  getClosestPointToXY(valX = this.getXAxis().getMouseVal(), valY = this.getYAxis().getMouseVal(), withinPxX = 0, withinPxY = 0, useAxis = false, usePx = true) {\r\n    // For the scatter serie it's pretty simple. No interpolation. We look at the point directly\r\n\r\n    //const xVal = this.getXAxis().getVal( x );\r\n    //const yVal = this.getYAxis().getVal( y );\r\n    const xValAllowed = this.getXAxis().getRelVal(withinPxX);\r\n    const yValAllowed = this.getYAxis().getRelVal(withinPxY);\r\n\r\n    // Index of the closest point\r\n    const closestPointIndex = this.waveform.findWithShortestDistance({\r\n      x: valX,\r\n      y: valY,\r\n      xMaxDistance: xValAllowed,\r\n      yMaxDistance: yValAllowed,\r\n      axisRef: useAxis,\r\n      scaleX: !usePx ? 1 : 1 / this.getXAxis().getRelVal(1),\r\n      scaleY: !usePx ? 1 : 1 / this.getYAxis().getRelVal(1)\r\n    });\r\n\r\n    if (isNaN(closestPointIndex) || closestPointIndex === false) {\r\n      return false;\r\n    }\r\n    /*\r\n\r\n        if (\r\n          ( Math.abs( valX - this.waveform.getX( closestPointIndex ) ) >\r\n            Math.abs( this.getXAxis().getRelVal( withinPxX ) ) &&\r\n            withinPxX ) ||\r\n          ( Math.abs( valY - this.waveform.getY( closestPointIndex ) ) >\r\n            Math.abs( this.getYAxis().getRelVal( withinPxY ) ) &&\r\n            withinPxY )\r\n        ) {\r\n          return false;\r\n        }\r\n    */\r\n\r\n    if (closestPointIndex < 0) {\r\n      return false;\r\n    }\r\n    const dataOutput = {\r\n\r\n      indexBefore: closestPointIndex,\r\n      indexAfter: closestPointIndex,\r\n\r\n      xExact: valX,\r\n\r\n      indexClosest: closestPointIndex,\r\n      interpolatedY: this.waveform.getY(closestPointIndex),\r\n\r\n      xClosest: this.waveform.getX(closestPointIndex),\r\n      yClosest: this.waveform.getY(closestPointIndex)\r\n    };\r\n\r\n    if (this.waveform.isMonotoneous()) {\r\n\r\n      let xBefore = this.waveform.getX(closestPointIndex);\r\n      let xAfter = this.waveform.getX(closestPointIndex);\r\n      let yBefore = this.waveform.getY(closestPointIndex);\r\n      let yAfter = this.waveform.getX(closestPointIndex);\r\n\r\n      if (xBefore < xAfter) {\r\n        dataOutput.xBefore = xBefore;\r\n        dataOutput.xAfter = xAfter;\r\n        dataOutput.yBefore = yBefore;\r\n        dataOutput.yAfter = yAfter;\r\n      } else {\r\n        dataOutput.xBefore = xAfter;\r\n        dataOutput.xAfter = xBefore;\r\n        dataOutput.yBefore = yAfter;\r\n        dataOutput.yAfter = yBefore;\r\n      }\r\n    }\r\n    return dataOutput;\r\n  }\r\n}\r\n\r\nutil.mix(SerieLine, ErrorBarMixin);\r\n\r\nexport default SerieLine;","var Serie3DMixin = {\r\n\r\n  /**\r\n   * Returns the x position of a certain value in pixels position, based on the serie's axis\r\n   * @memberof Serie\r\n   * @param {Number} val - Value to convert to pixels position\r\n   * @returns {Number} The x position in px corresponding to the x value\r\n   */\r\n  getX: function( val ) {\r\n    return ( ( val = this.getXAxis().getPx( val ) ) - val % 0.2 ) + this.getXAxis().getZProj( this.options.zpos );\r\n  },\r\n\r\n  /**\r\n   * Returns the y position of a certain value in pixels position, based on the serie's axis\r\n   * @memberof Serie3DMixin\r\n   * @param {Number} val - Value to convert to pixels position\r\n   * @returns {Number} The y position in px corresponding to the y value\r\n   */\r\n  getY: function( val ) {\r\n    return ( ( val = this.getYAxis().getPx( val ) ) - val % 0.2 ) + this.getYAxis().getZProj( this.options.zpos );\r\n  },\r\n\r\n  getZPos: function() {\r\n    return this.options.zpos;\r\n  },\r\n\r\n  /**\r\n   * @returns {Number} Lowest x value of the serie's data\r\n   * @memberof Serie\r\n   */\r\n  getMinX: function( useZValues ) {\r\n    if ( !useZValues ) {\r\n      return this.minX;\r\n    }\r\n\r\n    return getZCorrectedValue( this, true, true );\r\n  },\r\n\r\n  /**\r\n   * @returns {Number} Highest x value of the serie's data\r\n   * @memberof Serie\r\n   */\r\n  getMaxX: function( useZValues ) {\r\n\r\n    if ( !useZValues ) {\r\n      return this.maxX;\r\n    }\r\n    return getZCorrectedValue( this, true, false );\r\n  },\r\n\r\n  /**\r\n   * @returns {Number} Lowest y value of the serie's data\r\n   * @memberof Serie\r\n   */\r\n  getMinY: function( useZValues ) {\r\n\r\n    if ( !useZValues ) {\r\n      return this.minY;\r\n    }\r\n    return getZCorrectedValue( this, false, true );\r\n  },\r\n\r\n  /**\r\n   * @returns {Number} Highest y value of the serie's data\r\n   * @memberof Serie\r\n   */\r\n  getMaxY: function( useZValues ) {\r\n\r\n    if ( !useZValues ) {\r\n      return this.maxY;\r\n    }\r\n    return getZCorrectedValue( this, false, false );\r\n  }\r\n\r\n};\r\n\r\nfunction getZCorrectedValue( serie, x, min ) {\r\n\r\n  let i, l, data, val, valFinal;\r\n  let wf = serie.getWaveforms();\r\n\r\n  for ( let wave of wf ) {\r\n\r\n    i = 0;\r\n    l = wave.getLength();\r\n    data = wave.getData();\r\n\r\n    for ( ; i < l; i += 1 ) {\r\n\r\n      if ( x ) {\r\n        val = serie.getXAxis().getVal( serie.getX( wave.getX( i, true ) ) );\r\n      } else {\r\n        val = serie.getYAxis().getVal( serie.getY( data[ i ] ) );\r\n      }\r\n\r\n      if ( i == 0 ) {\r\n        valFinal = val;\r\n      } else {\r\n\r\n        if ( min ) {\r\n          valFinal = Math.min( valFinal, val );\r\n        } else {\r\n          valFinal = Math.max( valFinal, val );\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return valFinal;\r\n}\r\n\r\nexport default Serie3DMixin;","import Serie3DMixin from '../mixins/graph.mixin.serie3d.js';\r\nimport * as util from '../graph.util.js';\r\n\r\nimport Serie from './graph.serie.line.js';\r\n\r\n/**\r\n * Serie line with 3D projection\r\n * @example graph.newSerie( name, options, \"line\" );\r\n * @see Graph#newSerie\r\n * @extends SerieLine\r\n */\r\nclass SerieLine3D extends Serie {\r\n\r\n  static defaults() {\r\n    return {\r\n      zpos: 0\r\n    };\r\n  }\r\n  constructor( graph, name, options ) {\r\n    super( ...arguments );\r\n\r\n  }\r\n\r\n  /**\r\n   * Sets the z-position\r\n   * @memberof SerieLine3D\r\n   * @param {Number} zPos - The position in the z axis\r\n   */\r\n  setZPos( zPos ) {\r\n    this.options.zpos = zPos;\r\n    return this;\r\n  }\r\n\r\n  setz() {\r\n    return this.setZPos( ...arguments );\r\n  }\r\n}\r\n\r\nutil.mix( SerieLine3D, Serie3DMixin );\r\nexport default SerieLine3D;","import * as util from '../graph.util.js';\r\nimport ErrorBarMixin from '../mixins/graph.mixin.errorbars.js';\r\n\r\nimport Serie from './graph.serie.line.js';\r\n\r\n/**\r\n * Represents a bar serie.\r\n   Needs to be used exclusively with a bar axis ({@link AxisXBar}).\r\n   Supports error bars, line color, line width, fill color, fill opacity.\r\n * @example graph.newSerie(\"serieName\", { fillColor: 'red', fillOpacity: 0.2 }, \"bar\" );\r\n * @extends Serie\r\n */\r\nclass SerieBar extends Serie {\r\n\r\n  constructor( graph, name, options ) {\r\n\r\n    super( ...arguments );\r\n\r\n    this.pathDom = document.createElementNS( this.graph.ns, 'path' );\r\n    this.groupMain.appendChild( this.pathDom );\r\n\r\n    // Creates an empty style variable\r\n    this.styles = {};\r\n\r\n    // Unselected style\r\n    this.styles.unselected = {\r\n      lineColor: this.options.lineColor,\r\n      lineStyle: this.options.lineStyle,\r\n      lineWidth: this.options.lineWidth,\r\n      fillColor: this.options.fillColor,\r\n      fillOpacity: this.options.fillOpacity,\r\n      markers: this.options.markers\r\n    };\r\n\r\n  }\r\n\r\n  /**\r\n   *  Sets the fill color\r\n   */\r\n  setFillColor( fillColor, selectionType, applyToSelected ) {\r\n\r\n    selectionType = selectionType || 'unselected';\r\n    this.styles[ selectionType ] = this.styles[ selectionType ] || {};\r\n    this.styles[ selectionType ].fillColor = fillColor;\r\n\r\n    if ( applyToSelected ) {\r\n      this.setFillColor( fillColor, 'selected' );\r\n    }\r\n\r\n    this.styleHasChanged( selectionType );\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   *  Returns the fill color\r\n   */\r\n  getFillColor( selectionType ) {\r\n    return this.getStyle( selectionType ).fillColor;\r\n  }\r\n\r\n  /*\r\n   * @memberof SerieBar\r\n   */\r\n  setFillOpacity( opacity, selectionType, applyToSelected ) {\r\n\r\n    selectionType = selectionType || 'unselected';\r\n    this.styles[ selectionType ] = this.styles[ selectionType ] || {};\r\n    this.styles[ selectionType ].fillOpacity = opacity;\r\n\r\n    if ( applyToSelected ) {\r\n      this.setLineWidth( opacity, 'selected' );\r\n    }\r\n\r\n    this.styleHasChanged( selectionType );\r\n\r\n    return this;\r\n  }\r\n\r\n  getFillOpacity( selectionType ) {\r\n\r\n    return this.getStyle( selectionType ).fillOpacity || 1;\r\n  }\r\n\r\n  /**\r\n   * Reapply the current style to the serie lines elements. Mostly used internally\r\n   */\r\n  applyLineStyles() {\r\n    this.applyLineStyle( this.pathDom );\r\n  }\r\n\r\n  /**\r\n   * Applies the current style to a line element. Mostly used internally\r\n   * @memberof SerieBar\r\n   */\r\n  applyLineStyle( line ) {\r\n\r\n    line.setAttribute( 'stroke', this.getLineColor() );\r\n    line.setAttribute( 'stroke-width', this.getLineWidth() );\r\n    if ( this.getLineDashArray() ) {\r\n      line.setAttribute( 'stroke-dasharray', this.getLineDashArray() );\r\n    } else {\r\n      line.removeAttribute( 'stroke-dasharray' );\r\n    }\r\n    line.setAttribute( 'fill', this.getFillColor() );\r\n    line.setAttribute( 'fill-opacity', this.getFillOpacity() || 1 );\r\n  }\r\n\r\n  draw() {\r\n\r\n    var path = '';\r\n    var categoryNumber,\r\n      position;\r\n\r\n    if ( this.hasErrors() ) {\r\n      this.errorDrawInit();\r\n    }\r\n\r\n    var j = 0;\r\n\r\n    for ( ; j < this.waveform.getLength(); j++ ) {\r\n\r\n      if ( !this.categoryIndices[ this.waveform.getX( j ) ] ) {\r\n        continue;\r\n      }\r\n\r\n      path += `M ${this.getXAxis().getPos(this.categoryIndices[this.waveform.getX(j)])\r\n        } ${this.getYAxis().getPos(this.getYAxis().getCurrentMin())\r\n        } V ${this.getYAxis().getPos(this.waveform.getY(j))\r\n        } h ${this.getXAxis().getDeltaPx(1 / this.nbCategories)\r\n        } V ${this.getYAxis().getPos(this.getYAxis().getCurrentMin())}`;\r\n\r\n      if ( this.hasErrors() ) {\r\n\r\n        var xpx = this.getXAxis().getPos( this.categoryIndices[ this.waveform.getX( j ) ] ) + this.getXAxis().getDeltaPx( 1 / this.nbCategories ) / 2;\r\n        var ypx = this.getYAxis().getPos( this.waveform.getY( j ) );\r\n\r\n        this.errorAddPoint( j, this.waveform.getX( j ), this.waveform.getY( j ), xpx, ypx );\r\n      }\r\n\r\n    }\r\n\r\n    if ( this.hasErrors() ) {\r\n      this.errorDraw();\r\n    }\r\n\r\n    this.pathDom.setAttribute( 'd', path );\r\n    this.applyLineStyles();\r\n  }\r\n\r\n  // Markers now allowed\r\n  setMarkers() {}\r\n\r\n  getUsedCategories() {\r\n    return this.waveform.xdata;\r\n  }\r\n\r\n}\r\n\r\nexport default SerieBar;","import {\r\n  extend,\r\n  guid,\r\n  throwError,\r\n  emptyDom\r\n}\r\nfrom '../graph.util.js';\r\n\r\nimport Serie from './graph.serie.js';\r\n\r\nconst defaultOptions = {\r\n  orientation: 'y',\r\n  maxBoxWidth: 20,\r\n\r\n  defaultStyle: {\r\n\r\n    meanLineColor: 'rgb( 100, 0, 0 )',\r\n    meanLineWidth: 2,\r\n\r\n    boxAboveLineWidth: 1,\r\n    boxAboveLineColor: 'rgb( 0, 0, 0 )',\r\n    boxAboveFillColor: 'transparent',\r\n    boxAboveFillOpacity: 1,\r\n    boxBelowLineWidth: 1,\r\n    boxBelowLineColor: 'rgb( 0, 0, 0 )',\r\n    boxBelowFillColor: 'transparent',\r\n    boxBelowFillOpacity: 1,\r\n\r\n    barAboveLineColor: 'rgba( 0, 0, 0, 1 )',\r\n    barAboveLineWidth: 1,\r\n    barBelowLineColor: 'rgba( 0, 0, 0, 1 )',\r\n    barBelowLineWidth: 1,\r\n\r\n    outlierLineWidth: 1,\r\n    outlierLineColor: 'rgb( 255, 255, 255 )',\r\n    outlierFillColor: 'rgb( 0, 0, 0 )',\r\n    outlierFillOpacity: 1\r\n  }\r\n};\r\n\r\n/**\r\n * @static\r\n * @extends Serie\r\n * @example graph.newSerie( name, options, \"scatter\" );\r\n * @see Graph#newSerie\r\n */\r\nclass SerieBox extends Serie {\r\n  constructor( graph, name, options, defaultInherited = {} ) {\r\n\r\n    super( graph, name, options, extend( true, {}, defaultOptions, defaultInherited ) );\r\n\r\n    this.pathDom = document.createElementNS( this.graph.ns, 'path' );\r\n    this.groupMain.appendChild( this.pathDom );\r\n\r\n    // Creates an empty style variable\r\n    this.styles = {};\r\n\r\n    // Unselected style\r\n    this.styles.unselected = this.options.defaultStyle;\r\n\r\n  }\r\n\r\n  /**\r\n   *  Sets the data of the bar serie\r\n   *  @param {Object} data\r\n   *  @example serie.setData( [ { x: 'cat', Q2: valMean, Q1: valBoxMin, Q3: valBoxMax, whiskers: [ val1, val2 ], outliers: [ ...yList ] } ] );\r\n   *  @return {SerieBar} The current serie instance\r\n   */\r\n  setData( data, noRescale ) {\r\n\r\n    this.data = data;\r\n\r\n    if ( !Array.isArray( data ) ) {\r\n      return;\r\n    }\r\n\r\n    let axisref, axisval, methodref, methodval, blnX;\r\n\r\n    if ( this.options.orientation == 'y' ) {\r\n      axisref = this.getXAxis();\r\n      axisval = this.getYAxis();\r\n      methodref = this._checkX.bind( this );\r\n      methodval = this._checkY.bind( this );\r\n      blnX = true;\r\n\r\n      this.minY = data[ 0 ].Q2;\r\n      this.maxY = data[ 0 ].Q2;\r\n      this.maxX = data[ 0 ].x;\r\n      this.minX = data[ 0 ].x;\r\n\r\n    } else {\r\n      axisref = this.getYAxis();\r\n      axisval = this.getXAxis();\r\n      methodref = this._checkY.bind( this );\r\n      methodval = this._checkX.bind( this );\r\n      blnX = false;\r\n\r\n      this.minX = data[ 0 ].Q2;\r\n      this.maxX = data[ 0 ].Q2;\r\n      this.maxY = data[ 0 ].y;\r\n      this.minY = data[ 0 ].y;\r\n\r\n    }\r\n\r\n    if ( noRescale ) {\r\n      methodref = function() {};\r\n      methodval = function() {};\r\n    }\r\n\r\n    if ( !axisref || !axisval ) {\r\n      throwError( 'Error in setting data of the box serie. The X and Y axes must be set beforehand' );\r\n    }\r\n\r\n    for ( var i in this.data ) {\r\n\r\n      if ( blnX ) {\r\n        methodref( this.data[ i ].x );\r\n        this.data[ i ].pos = this.data[ i ].x;\r\n      } else {\r\n        methodref( this.data[ i ].y );\r\n        this.data[ i ].pos = this.data[ i ].y;\r\n      }\r\n\r\n      if ( this.data[ i ].Q3 ) {\r\n        methodval( this.data[ i ].Q3 );\r\n      }\r\n\r\n      if ( this.data[ i ].Q1 ) {\r\n        methodval( this.data[ i ].Q1 );\r\n      }\r\n\r\n      if ( this.data[ i ].whiskers ) {\r\n\r\n        if ( Array.isArray( this.data[ i ].whiskers ) ) {\r\n\r\n          if ( this.data[ i ].whiskers.length > 0 ) {\r\n\r\n            methodval( this.data[ i ].whiskers[ 0 ] );\r\n          }\r\n\r\n          if ( this.data[ i ].whiskers.length > 1 ) {\r\n            methodval( this.data[ i ].whiskers[ 1 ] );\r\n          }\r\n\r\n        } else {\r\n          methodval( this.data[ i ].whiskers );\r\n          this.data[ i ].whiskers = [ this.data[ i ].whiskers ];\r\n        }\r\n\r\n      } else {\r\n        this.data[ i ].whiskers = [];\r\n      }\r\n\r\n      if ( Array.isArray( this.data[ i ].outliers ) ) {\r\n        this.data[ i ].outliers.map( ( val ) => methodval( val ) );\r\n      } else {\r\n        this.data[ i ].outliers = [];\r\n      }\r\n    }\r\n\r\n    this.dataHasChanged();\r\n    this.graph.updateDataMinMaxAxes();\r\n\r\n    return this;\r\n  }\r\n\r\n  _style( type, styleValue, selectionType = 'unselected', applyToSelected = false ) {\r\n    this.styles[ selectionType ] = this.styles[ selectionType ] || {};\r\n    this.styles[ selectionType ][ type ] = styleValue;\r\n\r\n    if ( applyToSelected ) {\r\n      this._set( type, styleValue, 'selected' );\r\n    }\r\n\r\n    this.styleHasChanged( selectionType );\r\n    return this;\r\n  }\r\n\r\n  _gstyle( type, selectionType ) {\r\n    return this.getStyle( selectionType )[ type ];\r\n  }\r\n\r\n  /**\r\n   *  Retrives a selection object\r\n   *  @param {String} [ selectionType = \"unselected\" ] - The selection type\r\n   *  @returns {Object} The selection object\r\n   */\r\n  getStyle( selectionType = 'unselected' ) {\r\n\r\n    return this.styles[ selectionType ] || {};\r\n  }\r\n\r\n  /**\r\n   *  Sets the mean line color\r\n   *  @param {String} color - The mean line color\r\n   *  @returns {SerieBox} The current serie instance\r\n   */\r\n  setMeanLineColor() {\r\n    return this._style( 'meanLineColor', ...arguments );\r\n  }\r\n\r\n  /**\r\n   *  Returns the mean line color\r\n   * @return {String} The mean line color\r\n   */\r\n  getMeanLineColor() {\r\n    return this._gstyle( 'meanLineColor', ...arguments );\r\n  }\r\n\r\n  setStyle( style, selectionType = 'unselected' ) {\r\n    this.styles[ selectionType ] = extend( {}, this.default().defaultStyle, this.styles.unselected, style );\r\n    this.styleHasChanged( selectionType );\r\n  }\r\n\r\n  /**\r\n   *  Sets the mean line width\r\n   *  @param {Number} width - The line width\r\n   *  @returns {SerieBox} The current serie instance\r\n   */\r\n  setMeanLineWidth() {\r\n    return this._style( 'meanLineWidth', ...arguments );\r\n  }\r\n\r\n  /**\r\n   *  Returns the mean line width\r\n   * @return {Number} The mean line width\r\n   */\r\n  getMeanLineWidth() {\r\n    return this._gstyle( 'meanLineWidth', ...arguments );\r\n  }\r\n\r\n  /**\r\n   *  Sets the box line color\r\n   *  @param {Number} color - The color of the box above the median\r\n   *  @returns {SerieBox} The current serie instance\r\n   */\r\n  setBoxAboveLineColor() {\r\n    return this._style( 'boxAboveLineColor', ...arguments );\r\n  }\r\n\r\n  /**\r\n   * Returns the box line color\r\n   * @return {String} The line color of the box above the median\r\n   */\r\n  getBoxAboveLineColor() {\r\n    return this._gstyle( 'boxAboveLineColor', ...arguments );\r\n  }\r\n\r\n  /**\r\n   *  Sets the fill color\r\n   *  @param {Number} color - The color of the box below the median\r\n   *  @returns {SerieBox} The current serie instance\r\n   */\r\n  setBoxBelowLineColor() {\r\n    return this._style( 'boxBelowLineColor', ...arguments );\r\n  }\r\n\r\n  /**\r\n   *  Returns the fill color\r\n   * @return {String} The line color of the box below the median\r\n   */\r\n  getBoxBelowLineColor() {\r\n    return this._gstyle( 'boxBelowLineColor', ...arguments );\r\n  }\r\n\r\n  /**\r\n   *  Sets the fill color\r\n   *  @param {Number} width - The contour width of the box above the median\r\n   *  @returns {SerieBox} The current serie instance\r\n   */\r\n  setBoxAboveLineWidth() {\r\n    return this._style( 'boxAboveLineWidth', ...arguments );\r\n  }\r\n\r\n  /**\r\n   * Returns the line width of the box above the median\r\n   * @return {Number} The line width of the box above the median\r\n   */\r\n  getBoxAboveLineWidth() {\r\n    return this._gstyle( 'boxAboveLineWidth', ...arguments );\r\n  }\r\n\r\n  /**\r\n   *  Sets the fill color\r\n   *  @param {Number} width - The contour width of the box below the median\r\n   *  @returns {SerieBox} The current serie instance\r\n   */\r\n  setBoxBelowLineWidth() {\r\n    return this._style( 'boxBelowLineWidth', ...arguments );\r\n  }\r\n\r\n  /**\r\n   * Returns the line width of the box below the median\r\n   * @return {Number} The line width of the box below the median\r\n   */\r\n  getBoxBelowLineWidth() {\r\n    return this._gstyle( 'boxBelowLineWidth', ...arguments );\r\n  }\r\n\r\n  /**\r\n   *  Sets the fill color\r\n   *  @param {String} color - The fill color of the box above the median\r\n   *  @returns {SerieBox} The current serie instance\r\n   */\r\n  setBoxAboveFillColor() {\r\n    return this._style( 'boxAboveFillColor', ...arguments );\r\n  }\r\n\r\n  /**\r\n   * Returns the fill color of the box above the median\r\n   * @return {String} The fill color of the box above the median\r\n   */\r\n  getBoxAboveFillColor() {\r\n    return this._gstyle( 'boxAboveFillColor', ...arguments );\r\n  }\r\n\r\n  /**\r\n   *  Sets the fill color\r\n   *  @param {String} color - The fill color of the box below the median\r\n   *  @returns {SerieBox} The current serie instance\r\n   */\r\n  setBoxBelowFillColor() {\r\n    return this._style( 'boxBelowFillColor', ...arguments );\r\n  }\r\n\r\n  /**\r\n   * Returns the fill color of the box below the median\r\n   * @return {String} The fill color of the box below the median\r\n   */\r\n  getBoxBelowFillColor() {\r\n    return this._gstyle( 'boxBelowFillColor', ...arguments );\r\n  }\r\n\r\n  /**\r\n   *  Sets the fill color\r\n   *  @param {Number} opacity - The fill opacity of the box above the median\r\n   *  @returns {SerieBox} The current serie instance\r\n   */\r\n  setBoxAboveFillOpacity() {\r\n    return this._style( 'boxAboveFillOpacity', ...arguments );\r\n  }\r\n\r\n  /**\r\n   * Returns the fill opacity of the box above the median\r\n   * @return {Number} The fill opacity of the box above the median\r\n   */\r\n  getBoxAboveFillOpacity() {\r\n    return this._gstyle( 'boxAboveFillOpacity', ...arguments );\r\n  }\r\n\r\n  /**\r\n   *  Sets the fill color\r\n   *  @param {Number} opacity - The fill opacity of the box below the median\r\n   *  @returns {SerieBox} The current serie instance\r\n   */\r\n  setBoxBelowFillOpacity() {\r\n    return this._style( 'boxBelowFillOpacity', ...arguments );\r\n  }\r\n\r\n  /**\r\n   * Returns the fill opacity of the box below the median\r\n   * @return {Number} The fill opacity of the box below the median\r\n   */\r\n  getBoxBelowFillOpacity() {\r\n    return this._gstyle( 'boxBelowFillOpacity', ...arguments );\r\n  }\r\n\r\n  /**\r\n   *  Sets the whisker color\r\n   *  @param {String} color - The line color of the whisker above the median\r\n   *  @returns {SerieBox} The current serie instance\r\n   */\r\n  setBarAboveLineColor() {\r\n    return this._style( 'barAboveLineColor', ...arguments );\r\n  }\r\n\r\n  /**\r\n   * Returns the line color of the whisker above the median\r\n   * @return {String} The line color of the whisker above the median\r\n   */\r\n  getBarAboveLineColor() {\r\n    return this._gstyle( 'barAboveLineColor', ...arguments );\r\n  }\r\n\r\n  /**\r\n   *  Sets the fill color\r\n   *  @param {String} color - The line color of the whisker below the median\r\n   *  @returns {SerieBox} The current serie instance\r\n   */\r\n  setBarBelowLineColor() {\r\n    return this._style( 'barBelowLineColor', ...arguments );\r\n  }\r\n\r\n  /**\r\n   * Returns the line color of the whisker below the median\r\n   * @return {String} The line color of the whisker below the median\r\n   */\r\n  getBarBelowLineColor() {\r\n    return this._gstyle( 'barBelowLineColor', ...arguments );\r\n  }\r\n\r\n  /**\r\n   *  Sets the fill color\r\n   *  @param {Number} width - The line width of the whisker above the median\r\n   *  @returns {SerieBox} The current serie instance\r\n   */\r\n  setBarAboveLineWidth() {\r\n    return this._style( 'barAboveLineWidth', ...arguments );\r\n  }\r\n\r\n  /**\r\n   * Returns the line width of the whisker above the median\r\n   * @return {Number} The line width of the whisker above the median\r\n   */\r\n  getBarAboveLineWidth() {\r\n    return this._gstyle( 'barAboveLineWidth', ...arguments );\r\n  }\r\n\r\n  /**\r\n   *  Sets the fill color\r\n   *  @param {Number} width - The line width of the whisker below the median\r\n   *  @returns {SerieBox} The current serie instance\r\n   */\r\n  setBarBelowLineWidth() {\r\n    return this._style( 'barBelowLineWidth', ...arguments );\r\n  }\r\n\r\n  /**\r\n   * Returns the line width of the whisker below the median\r\n   * @return {Number} The line width of the whisker below the median\r\n   */\r\n  getBarBelowLineWidth() {\r\n    return this._gstyle( 'barBelowLineWidth', ...arguments );\r\n  }\r\n\r\n  /**\r\n   *  Sets the fill color\r\n   *  @param {String} color - The outlier stroke color\r\n   *  @returns {SerieBox} The current serie instance\r\n   */\r\n  setOutlierLineColor() {\r\n    return this._style( 'outlierLineColor', ...arguments );\r\n  }\r\n\r\n  /**\r\n   * Returns the line color of the outliers\r\n   * @return {String} The line color of the outliers\r\n   */\r\n  getOutlierLineColor() {\r\n    return this._gstyle( 'outlierLineColor', ...arguments );\r\n  }\r\n\r\n  /**\r\n   *  Sets the stroke width\r\n   *  @param {Number} width - The outlier stroke width\r\n   *  @returns {SerieBox} The current serie instance\r\n   */\r\n  setOutlierLineWidth() {\r\n    return this._style( 'outlierLineWidth', ...arguments );\r\n  }\r\n\r\n  /**\r\n   * Returns the line width of the outliers\r\n   * @return {Number} The line width of the outliers\r\n   */\r\n  getOutlierLineWidth() {\r\n    return this._gstyle( 'outlierLineWidth', ...arguments );\r\n  }\r\n\r\n  /**\r\n   *  Sets the fill color\r\n   *  @param {String} color - The outlier fill color\r\n   *  @returns {SerieBox} The current serie instance\r\n   */\r\n  setOutlierFillColor() {\r\n    return this._style( 'outlierFillColor', ...arguments );\r\n  }\r\n\r\n  /**\r\n   * Returns the fill color of the outliers\r\n   * @return {String} The fill color of the outliers\r\n   */\r\n  getOutlierFillColor() {\r\n    return this._gstyle( 'outlierFillColor', ...arguments );\r\n  }\r\n\r\n  /**\r\n   *  Sets the outlier fill opacity\r\n   *  @param {Number} opacity - The outlier fill opacity\r\n   *  @returns {SerieBox} The current serie instance\r\n   */\r\n  setOutlierFillOpacity() {\r\n    return this._style( 'outlierFillOpacity', ...arguments );\r\n  }\r\n\r\n  /**\r\n   * Returns the fill opacity of the outliers\r\n   * @return {Number} The fill opacity of the outliers\r\n   */\r\n  getOutlierFillOpacity() {\r\n    return this._gstyle( 'outlierFillOpacity', ...arguments );\r\n  }\r\n\r\n  /**\r\n   * Reapply the current style to the serie lines elements. Mostly used internally\r\n   *  @returns {SerieBox} The current serie instance\r\n   */\r\n  applyLineStyles() {\r\n    this.applyLineStyle( this.pathDom );\r\n  }\r\n\r\n  /**\r\n   * Applies the current style to a line element. Mostly used internally\r\n   * @memberof SerieBar\r\n   */\r\n  applyLineStyle( line ) {\r\n\r\n    line.setAttribute( 'stroke', this.getLineColor() );\r\n    line.setAttribute( 'stroke-width', this.getLineWidth() );\r\n    line.removeAttribute( 'stroke-dasharray' );\r\n    line.setAttribute( 'fill', this.getFillColor() );\r\n    line.setAttribute( 'fill-opacity', this.getFillOpacity() || 1 );\r\n  }\r\n\r\n  draw() {\r\n\r\n    if ( !this.data ) {\r\n      return;\r\n    }\r\n\r\n    let position;\r\n    let axis = this.options.orientation == 'y' ? this.getYAxis() : this.getXAxis();\r\n    let axis2 = this.options.orientation == 'y' ? this.getXAxis() : this.getYAxis();\r\n    let boxOtherDimension; // width or height of the box\r\n    let useCategories = false;\r\n    let mean, boxAbove, boxBelow, barAbove, barBelow, outliers, posAbove, posBelow;\r\n    let categoryNumber;\r\n\r\n    emptyDom( this.groupMain );\r\n\r\n    if ( axis2.getType() == 'category' ) {\r\n\r\n      boxOtherDimension = axis2.getRelPx( 0.8 / ( this.nbCategories ) );\r\n      useCategories = true;\r\n\r\n    } else {\r\n      // Get all the spacing and determine the smallest one\r\n      boxOtherDimension = this.options.maxBoxWidth;\r\n      for ( var i = 0, l = this.data.length; i < l - 1; i++ ) {\r\n\r\n        boxOtherDimension = Math.max( 5, Math.min( boxOtherDimension, Math.abs( axis2.getPx( this.data[ i + 1 ].x ) - axis2.getPx( this.data[ i ].x ) ) ) );\r\n      }\r\n\r\n    }\r\n\r\n    for ( var i = 0, l = this.data.length; i < l; i++ ) {\r\n\r\n      if ( axis2.getType() == 'category' ) {\r\n\r\n        let cat = this.options.orientation == 'y' ? this.data[ i ].x : this.data[ i ].y;\r\n\r\n        if ( !this.categoryIndices.hasOwnProperty( cat ) ) {\r\n\r\n          if ( Array.isArray( this._linkedToScatterSeries ) ) {\r\n            for ( let scatter_serie of this._linkedToScatterSeries ) {\r\n\r\n              if ( scatter_serie.categoryIndices.hasOwnProperty( cat ) ) {\r\n\r\n                position = [ axis2.getPos( scatter_serie.categoryIndices[ cat ] ) + 1.2 * boxOtherDimension / 2 ];\r\n\r\n                if ( this.options.orientation == 'y' ) {\r\n                  axis = scatter_serie.getYAxis();\r\n                } else {\r\n                  axis = scatter_serie.getXAxis();\r\n                }\r\n\r\n                break;\r\n              }\r\n            }\r\n          }\r\n        } else {\r\n\r\n          position = [ axis2.getPos( this.categoryIndices[ cat ] ) + 1.2 * boxOtherDimension / 2 ];\r\n\r\n        }\r\n\r\n      } else {\r\n\r\n        position = [ axis2.getPos( this.options.orientation == 'y' ? this.data[ i ].x : this.data[ i ].y ), boxOtherDimension ];\r\n\r\n      }\r\n\r\n      mean = axis.getPos( this.data[ i ].Q2 );\r\n      boxAbove = axis.getPos( this.data[ i ].Q3 );\r\n      boxBelow = axis.getPos( this.data[ i ].Q1 );\r\n\r\n      this.data[ i ].whiskers.map( ( val ) => {\r\n\r\n        if ( val < this.data[ i ].Q1 ) {\r\n          barBelow = axis.getPos( val );\r\n        } else {\r\n          barAbove = axis.getPos( val );\r\n        }\r\n      } );\r\n\r\n      outliers = this.data[ i ].outliers.map( ( val ) => axis.getPos( val ) );\r\n\r\n      var lineMean = document.createElementNS( this.graph.ns, 'line' );\r\n\r\n      this.applyMeanStyle( lineMean );\r\n\r\n      var rectAbove = document.createElementNS( this.graph.ns, 'rect' );\r\n      var rectBelow = document.createElementNS( this.graph.ns, 'rect' );\r\n\r\n      if ( this.options.orientation == 'y' ) {\r\n\r\n        rectAbove.setAttribute( 'width', boxOtherDimension );\r\n        rectAbove.setAttribute( 'x', position[ 0 ] - boxOtherDimension / 2 );\r\n\r\n        rectBelow.setAttribute( 'width', boxOtherDimension );\r\n        rectBelow.setAttribute( 'x', position[ 0 ] - boxOtherDimension / 2 );\r\n\r\n        lineMean.setAttribute( 'x1', position[ 0 ] - boxOtherDimension / 2 );\r\n        lineMean.setAttribute( 'x2', position[ 0 ] + boxOtherDimension / 2 );\r\n        lineMean.setAttribute( 'y1', mean );\r\n        lineMean.setAttribute( 'y2', mean );\r\n\r\n      } else {\r\n\r\n        rectAbove.setAttribute( 'height', boxOtherDimension );\r\n        rectAbove.setAttribute( 'y', position[ 0 ] - boxOtherDimension / 2 );\r\n\r\n        rectBelow.setAttribute( 'height', boxOtherDimension );\r\n        rectBelow.setAttribute( 'y', position[ 0 ] - boxOtherDimension / 2 );\r\n\r\n        lineMean.setAttribute( 'y1', position[ 0 ] - boxOtherDimension / 2 );\r\n        lineMean.setAttribute( 'y2', position[ 0 ] + boxOtherDimension / 2 );\r\n        lineMean.setAttribute( 'x1', mean );\r\n        lineMean.setAttribute( 'x2', mean );\r\n      }\r\n\r\n      this.boxPos( rectAbove, mean, boxAbove, this.options.orientation == 'x' );\r\n      this.boxPos( rectBelow, mean, boxBelow, this.options.orientation == 'x' );\r\n\r\n      this.applyBoxStyle( rectAbove, rectBelow );\r\n\r\n      var whiskerAbove = document.createElementNS( this.graph.ns, 'line' );\r\n      var whiskerBelow = document.createElementNS( this.graph.ns, 'line' );\r\n\r\n      if ( this.options.orientation == 'y' ) {\r\n\r\n        if ( barAbove !== undefined ) {\r\n          whiskerAbove.setAttribute( 'y1', boxAbove );\r\n          whiskerAbove.setAttribute( 'y2', barAbove );\r\n          whiskerAbove.setAttribute( 'x1', position[ 0 ] );\r\n          whiskerAbove.setAttribute( 'x2', position[ 0 ] );\r\n        }\r\n\r\n        if ( barBelow !== undefined ) {\r\n          whiskerBelow.setAttribute( 'y1', boxBelow );\r\n          whiskerBelow.setAttribute( 'y2', barBelow );\r\n          whiskerBelow.setAttribute( 'x1', position[ 0 ] );\r\n          whiskerBelow.setAttribute( 'x2', position[ 0 ] );\r\n        }\r\n\r\n      } else {\r\n\r\n        if ( barAbove !== undefined ) {\r\n          whiskerAbove.setAttribute( 'x1', boxAbove );\r\n          whiskerAbove.setAttribute( 'x2', barAbove );\r\n          whiskerAbove.setAttribute( 'y1', position[ 0 ] );\r\n          whiskerAbove.setAttribute( 'y2', position[ 0 ] );\r\n        }\r\n\r\n        if ( barBelow !== undefined ) {\r\n          whiskerBelow.setAttribute( 'x1', boxBelow );\r\n          whiskerBelow.setAttribute( 'x2', barBelow );\r\n          whiskerBelow.setAttribute( 'y1', position[ 0 ] );\r\n          whiskerBelow.setAttribute( 'y2', position[ 0 ] );\r\n        }\r\n      }\r\n\r\n      outliers.map( ( outliervalue ) => {\r\n\r\n        let outlier = document.createElementNS( this.graph.ns, 'circle' );\r\n\r\n        outlier.setAttribute( 'r', 2 );\r\n\r\n        if ( this.options.orientation == 'y' ) {\r\n\r\n          outlier.setAttribute( 'cx', position[ 0 ] );\r\n          outlier.setAttribute( 'cy', outliervalue );\r\n\r\n        } else {\r\n\r\n          outlier.setAttribute( 'cy', position[ 0 ] );\r\n          outlier.setAttribute( 'cx', outliervalue );\r\n        }\r\n\r\n        this.setOutlierStyle( outlier );\r\n\r\n        this.groupMain.appendChild( outlier );\r\n      } );\r\n\r\n      if ( barAbove !== undefined ) {\r\n        this.groupMain.appendChild( whiskerAbove );\r\n      }\r\n\r\n      if ( barBelow !== undefined ) {\r\n        this.groupMain.appendChild( whiskerBelow );\r\n      }\r\n\r\n      if ( boxAbove !== undefined ) {\r\n        this.groupMain.appendChild( rectAbove );\r\n      }\r\n\r\n      if ( boxBelow !== undefined ) {\r\n        this.groupMain.appendChild( rectBelow );\r\n      }\r\n\r\n      this.groupMain.appendChild( lineMean );\r\n\r\n      this.applyWhiskerStyle( whiskerAbove, whiskerBelow );\r\n    }\r\n  }\r\n\r\n  applyBoxStyle( above, below ) {\r\n\r\n    above.setAttribute( 'stroke', this.getBoxAboveLineColor() );\r\n    above.setAttribute( 'stroke-width', this.getBoxAboveLineWidth() );\r\n\r\n    if ( this.getBoxAboveFillColor() !== undefined ) {\r\n      above.setAttribute( 'fill', this.getBoxAboveFillColor() );\r\n    }\r\n    if ( this.getBoxAboveFillOpacity() !== undefined ) {\r\n      above.setAttribute( 'fill-opacity', this.getBoxAboveFillOpacity() );\r\n    }\r\n\r\n    below.setAttribute( 'stroke', this.getBoxBelowLineColor() );\r\n    below.setAttribute( 'stroke-width', this.getBoxBelowLineWidth() );\r\n\r\n    if ( this.getBoxBelowFillColor() !== undefined ) {\r\n      below.setAttribute( 'fill', this.getBoxBelowFillColor() );\r\n    }\r\n    if ( this.getBoxAboveFillOpacity() !== undefined ) {\r\n      below.setAttribute( 'fill-opacity', this.getBoxBelowFillOpacity() );\r\n    }\r\n  }\r\n\r\n  applyWhiskerStyle( above, below ) {\r\n\r\n    above.setAttribute( 'stroke', this.getBarAboveLineColor() );\r\n    above.setAttribute( 'stroke-width', this.getBarAboveLineWidth() );\r\n\r\n    below.setAttribute( 'stroke', this.getBarBelowLineColor() );\r\n    below.setAttribute( 'stroke-width', this.getBarBelowLineWidth() );\r\n  }\r\n\r\n  applyMeanStyle( line ) {\r\n\r\n    line.setAttribute( 'stroke', this.getMeanLineColor() );\r\n    line.setAttribute( 'stroke-width', this.getMeanLineWidth() );\r\n  }\r\n\r\n  setOutlierStyle( outlier ) {\r\n\r\n    outlier.setAttribute( 'stroke', this.getOutlierLineColor() );\r\n    outlier.setAttribute( 'stroke-width', this.getOutlierLineWidth() );\r\n\r\n    if ( this.getBoxBelowFillColor() !== undefined ) {\r\n      outlier.setAttribute( 'fill', this.getOutlierFillColor() );\r\n    }\r\n    if ( this.getBoxAboveFillOpacity() !== undefined ) {\r\n      outlier.setAttribute( 'fill-opacity', this.getOutlierFillOpacity() );\r\n    }\r\n  }\r\n  /**\r\n   * Returns the index of a category based on its name\r\n   * @param {String} name - The name of the category\r\n   */\r\n  getCategoryIndex( name ) {\r\n\r\n    if ( !this.categories ) {\r\n      throw new Error( 'No categories were defined. Probably axis.setSeries was not called' );\r\n    }\r\n\r\n    for ( var i = 0; i < this.categories.length; i++ ) {\r\n\r\n      if ( this.categories[ i ].name == name ) {\r\n        return i;\r\n      }\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  // Markers now allowed\r\n  setMarkers() {}\r\n\r\n  boxPos( box, mean, extremity, blnX ) {\r\n\r\n    if ( mean > extremity ) {\r\n\r\n      box.setAttribute( blnX ? 'x' : 'y', extremity );\r\n      box.setAttribute( blnX ? 'width' : 'height', mean - extremity );\r\n\r\n    } else {\r\n\r\n      box.setAttribute( blnX ? 'x' : 'y', mean );\r\n      box.setAttribute( blnX ? 'width' : 'height', extremity - mean );\r\n    }\r\n  }\r\n\r\n  getUsedCategories() {\r\n    let xymode = this.options.orientation == 'y' ? 'x' : 'y';\r\n\r\n    let categories = this.data.map( ( d ) => d[ xymode ] );\r\n\r\n    if ( Array.isArray( this._linkedToScatterSeries ) ) {\r\n      this._linkedToScatterSeries.map( ( scatter_serie ) => {\r\n\r\n        scatter_serie.getUsedCategories().map( ( scatter_serie_cat ) => {\r\n          let index;\r\n          if ( ( index = categories.indexOf( scatter_serie_cat ) ) > -1 ) {\r\n            categories.splice( index, 1 );\r\n          }\r\n\r\n        } );\r\n      } );\r\n\r\n    }\r\n\r\n    return categories;\r\n  }\r\n\r\n  linkToScatterSerie( ...series ) {\r\n    this._linkedToScatterSeries = series;\r\n  }\r\n}\r\n\r\nexport default SerieBox;","import * as util from '../graph.util.js';\r\nimport ErrorBarMixin from '../mixins/graph.mixin.errorbars.js';\r\n\r\nimport SerieLine from './graph.serie.line.js';\r\n\r\n/**\r\n * Colored serie line\r\n * @example graph.newSerie( name, options, \"color\" );\r\n * @see Graph#newSerie\r\n * @augments SerieLine\r\n */\r\nclass SerieLineColor extends SerieLine {\r\n\r\n  constructor( graph, name, options ) {\r\n\r\n    super( ...arguments );\r\n    this.lines = this.lines || {};\r\n  }\r\n\r\n  setColors( colors ) {\r\n    this.colors = colors;\r\n  }\r\n\r\n  _draw() {\r\n\r\n    var self = this,\r\n      data = this._dataToUse,\r\n      toBreak,\r\n      i = 0,\r\n      j,\r\n      k,\r\n      m,\r\n      x,\r\n      y,\r\n      k,\r\n      o,\r\n      lastX = false,\r\n      lastY = false,\r\n      xpx,\r\n      ypx,\r\n      xpx2,\r\n      ypx2,\r\n      xAxis = this.getXAxis(),\r\n      yAxis = this.getYAxis(),\r\n      xMin = xAxis.getCurrentMin(),\r\n      yMin = yAxis.getCurrentMin(),\r\n      xMax = xAxis.getCurrentMax(),\r\n      yMax = yAxis.getCurrentMax();\r\n\r\n    // Y crossing\r\n    var yLeftCrossingRatio,\r\n      yLeftCrossing,\r\n      yRightCrossingRatio,\r\n      yRightCrossing,\r\n      xTopCrossingRatio,\r\n      xTopCrossing,\r\n      xBottomCrossingRatio,\r\n      xBottomCrossing;\r\n\r\n    var incrXFlip = 0;\r\n    var incrYFlip = 1;\r\n\r\n    var pointOutside = false;\r\n    var lastPointOutside = false;\r\n    var pointOnAxis;\r\n\r\n    this.eraseLines();\r\n\r\n    if ( this.isFlipped() ) {\r\n      incrXFlip = 1;\r\n      incrYFlip = 0;\r\n    }\r\n\r\n    this.currentLine = '';\r\n    m = this.waveform.getLength();\r\n\r\n    for ( j = 0; j < m; j += 1 ) {\r\n\r\n      x = this.waveform.getX( j );\r\n      y = this.waveform.getY( j );\r\n\r\n      if ( ( x < xMin && lastX < xMin ) || ( x > xMax && lastX > xMax ) || ( ( ( y < yMin && lastY < yMin ) || ( y > yMax && lastY > yMax ) ) && !this.options.lineToZero ) ) {\r\n        lastX = x;\r\n        lastY = y;\r\n        lastPointOutside = true;\r\n        continue;\r\n      }\r\n\r\n      this.counter2 = j;\r\n\r\n      //if ( this.markersShown() ) {\r\n      //this.getMarkerCurrentFamily( this.counter2 );\r\n      //}\r\n\r\n      xpx2 = this.getX( x );\r\n      ypx2 = this.getY( y );\r\n\r\n      if ( xpx2 == xpx && ypx2 == ypx ) {\r\n        continue;\r\n      }\r\n\r\n      pointOutside = ( x < xMin || y < yMin || x > xMax || y > yMax );\r\n\r\n      if ( isNaN( xpx2 ) || isNaN( ypx2 ) ) {\r\n        if ( this.counter > 0 ) {\r\n\r\n          //      this._createLine();\r\n        }\r\n        continue;\r\n      }\r\n\r\n      var color = this.colors[ j ];\r\n\r\n      this._addPoint( xpx2, ypx2, x, y, xpx, ypx, lastX, lastY, j, color, false, true );\r\n\r\n      xpx = xpx2;\r\n      ypx = ypx2;\r\n\r\n      lastX = x;\r\n      lastY = y;\r\n    }\r\n\r\n    this.latchLines();\r\n\r\n    if ( this._tracker ) {\r\n\r\n      if ( this._trackerDom ) {\r\n        this._trackerDom.remove();\r\n      }\r\n\r\n      var cloned = this.groupLines.cloneNode( true );\r\n      this.groupMain.appendChild( cloned );\r\n\r\n      for ( var i = 0, l = cloned.children.length; i < l; i++ ) {\r\n\r\n        cloned.children[ i ].setAttribute( 'stroke', 'transparent' );\r\n        cloned.children[ i ].setAttribute( 'stroke-width', '25px' );\r\n        cloned.children[ i ].setAttribute( 'pointer-events', 'stroke' );\r\n      }\r\n\r\n      self._trackerDom = cloned;\r\n\r\n      self.groupMain.addEventListener( 'mousemove', function( e ) {\r\n        var coords = self.graph._getXY( e ),\r\n          ret = self.handleMouseMove( false, false );\r\n        self._trackingCallback( self, ret, coords.x, coords.y );\r\n      } );\r\n\r\n      self.groupMain.addEventListener( 'mouseleave', function( e ) {\r\n        self._trackingOutCallback( self );\r\n      } );\r\n    }\r\n    return this;\r\n\r\n  }\r\n\r\n  _addPoint( xpx, ypx, x, y, xpxbefore, ypxbefore, xbefore, ybefore, j, color, move, allowMarker ) {\r\n\r\n    if ( xpxbefore === undefined || ypxbefore === undefined ) {\r\n      return;\r\n    }\r\n\r\n    if ( isNaN( xpx ) || isNaN( ypx ) ) {\r\n      return;\r\n    }\r\n\r\n    if ( color._rgb ) {\r\n      color = `rgba(${color._rgb[0]},${color._rgb[1]},${color._rgb[2]},${color._rgb[3] || 1})`;\r\n    }\r\n\r\n    var line = this.lines[ color ];\r\n    if ( !line ) {\r\n      line = this.lines[ color ] = {\r\n        object: document.createElementNS( this.graph.ns, 'path' ),\r\n        path: '',\r\n        color: color\r\n      };\r\n      line.object.setAttribute( 'stroke', color );\r\n      line.color = color;\r\n\r\n      this.applyLineStyle( line.object );\r\n\r\n      //      this.applyLineStyle( line );\r\n      this.groupLines.appendChild( line.object );\r\n    }\r\n\r\n    line.path += `M ${xpxbefore} ${ypxbefore} L ${xpx} ${ypx}`;\r\n\r\n    if ( this.hasErrors() ) {\r\n      this.errorAddPoint( j, x, y, xpx, ypx );\r\n    }\r\n\r\n    /*if ( this.markersShown() && allowMarker !== false ) {\r\n      drawMarkerXY( this, this.markerFamilies[ this.selectionType ][ this.markerCurrentFamily ], xpx, ypx );\r\n    }*/\r\n  }\r\n\r\n  removeExtraLines() {\r\n\r\n  }\r\n\r\n  // Returns the DOM\r\n  latchLines() {\r\n\r\n    for ( var i in this.lines ) {\r\n      this.lines[ i ].object.setAttribute( 'd', this.lines[ i ].path );\r\n    }\r\n  }\r\n\r\n  // Returns the DOM\r\n  eraseLines() {\r\n\r\n    for ( var i in this.lines ) {\r\n      this.lines[ i ].path = '';\r\n      this.lines[ i ].object.setAttribute( 'd', '' );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Applies the current style to a line element. Mostly used internally\r\n   * @memberof SerieLine\r\n   */\r\n  applyLineStyle( line ) {\r\n\r\n    //line.setAttribute( 'stroke', this.getLineColor() );\r\n    line.setAttribute( 'stroke-width', this.getLineWidth() );\r\n    if ( this.getLineDashArray() ) {\r\n      line.setAttribute( 'stroke-dasharray', this.getLineDashArray() );\r\n    } else {\r\n      line.removeAttribute( 'stroke-dasharray' );\r\n    }\r\n    line.setAttribute( 'fill', 'none' );\r\n    //\tline.setAttribute('shape-rendering', 'optimizeSpeed');\r\n  }\r\n}\r\n\r\nexport default SerieLineColor;","import {\r\n  Waveform\r\n} from '../util/waveform.js';\r\nimport {\r\n  extend,\r\n  guid\r\n} from '../graph.util.js';\r\n\r\nimport Serie from './graph.serie.js';\r\n\r\n/**\r\n * @static\r\n * @extends Serie\r\n * @example graph.newSerie( name, options, \"scatter\" );\r\n * @see Graph#newSerie\r\n */\r\nclass SerieZone extends Serie {\r\n  static\r\n  default () {\r\n    return {\r\n      fillColor: 'rgba( 0, 0, 0, 0.1 )',\r\n      lineColor: 'rgba( 0, 0, 0, 1 )',\r\n      lineWidth: '1px'\r\n    };\r\n  }\r\n  constructor( graph, name, options ) {\r\n    super( ...arguments );\r\n\r\n    this.selectionType = 'unselected';\r\n    this.id = guid();\r\n\r\n    this.groupZones = document.createElementNS( this.graph.ns, 'g' );\r\n    this.lineZone = document.createElementNS( this.graph.ns, 'path' );\r\n    this.lineZone.setAttribute( 'stroke', 'black' );\r\n    this.lineZone.setAttribute( 'stroke-width', '1px' );\r\n\r\n    this.groupMain.appendChild( this.groupZones );\r\n    this.groupZones.appendChild( this.lineZone );\r\n\r\n    this.applyLineStyle( this.lineZone );\r\n    this.styleHasChanged();\r\n\r\n    this.clip = document.createElementNS( this.graph.ns, 'clipPath' );\r\n    this.clipId = guid();\r\n    this.clip.setAttribute( 'id', this.clipId );\r\n\r\n    this.graph.defs.appendChild( this.clip );\r\n  }\r\n\r\n  /**\r\n   * Assigns a collection of waveforms that make up the zone\r\n   * The waveforms will appended one after the other, without break\r\n   * @param {...Waveform} waveforms - The collection of waveforms\r\n   * @return {SerieZone} - The current serie zone instance\r\n   * @memberof SerieZone\r\n   */\r\n  setWaveform( ...waveforms ) {\r\n    this.waveforms = waveforms;\r\n\r\n    this.waveforms = this.waveforms.map( ( wave ) => {\r\n      if ( !( wave instanceof Waveform ) ) {\r\n        return new Waveform( wave );\r\n      } else {\r\n        return wave;\r\n      }\r\n    } );\r\n\r\n    this.minX = this.waveforms[ 0 ].getXMin();\r\n    this.maxX = this.waveforms[ 0 ].getXMax();\r\n    this.minY = this.waveforms[ 0 ].getMin();\r\n    this.maxY = this.waveforms[ 0 ].getMax();\r\n\r\n    this.waveforms.map( ( wave ) => {\r\n      this.minX = Math.min( wave.getXMin(), this.minX );\r\n      this.maxX = Math.max( wave.getXMin(), this.maxX );\r\n      this.minY = Math.min( wave.getMin(), this.minY );\r\n      this.maxY = Math.max( wave.getMax(), this.maxY );\r\n    } );\r\n\r\n    this.graph.updateDataMinMaxAxes();\r\n    this.dataHasChanged();\r\n    return this;\r\n  }\r\n\r\n  setWaveforms() {\r\n    return this.setWaveform( ...arguments );\r\n  }\r\n\r\n  getWaveforms() {\r\n    return this.waveforms;\r\n  }\r\n\r\n  setMinMaxWaveforms( min, max ) {\r\n    this.waveforms = [ min, max.reverse() ];\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Removes all the dom concerning this serie from the drawing zone\r\n   */\r\n  empty() {\r\n    while ( this.group.firstChild ) {\r\n      this.group.removeChild( this.group.firstChild );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Redraws the serie\r\n   * @private\r\n   *\r\n   * @param {force} Boolean - Forces redraw even if the data hasn't changed\r\n   */\r\n  draw( force ) {\r\n    // Serie redrawing\r\n\r\n    if ( force || this.hasDataChanged() ) {\r\n      if ( !this.waveforms ) {\r\n        return;\r\n      }\r\n\r\n      let dataX = 0,\r\n        dataY = 0,\r\n        xpx = 0,\r\n        ypx = 0,\r\n        j = 0,\r\n        line = '',\r\n        buffer,\r\n        move = false;\r\n\r\n      const xminpx = this.getXAxis().getMinPx(),\r\n        xmaxpx = this.getXAxis().getMaxPx(),\r\n        yminpx = this.getYAxis().getMinPx(),\r\n        ymaxpx = this.getYAxis().getMaxPx();\r\n\r\n      const xmin = this.getXAxis().getCurrentMin(),\r\n        xmax = this.getXAxis().getCurrentMax(),\r\n        ymin = this.getYAxis().getCurrentMin(),\r\n        ymax = this.getYAxis().getCurrentMax();\r\n\r\n      //this.clipRect.setAttribute( \"x\", Math.min( xmin, xmax ) );\r\n      //this.clipRect.setAttribute( \"y\", Math.min( ymin, ymax ) );\r\n      //this.clipRect.setAttribute( \"width\", Math.abs( xmax - xmin ) );\r\n      //this.clipRect.setAttribute( \"height\", Math.abs( ymax - ymin ) );\r\n\r\n      this.groupMain.removeChild( this.groupZones );\r\n\r\n      for ( let waveform of this.waveforms ) {\r\n        for ( j = 0; j < waveform.getLength(); j += 1 ) {\r\n          dataX = waveform.getX( j, true );\r\n          dataY = waveform.getY( j, true );\r\n\r\n          // The y axis in screen coordinate is inverted vs cartesians\r\n          if ( dataY[ j ] < ymin ) {\r\n            ypx = this.getY( ymin );\r\n          } else if ( dataY[ j ] > ymax ) {\r\n            ypx = this.getY( ymax );\r\n          }\r\n\r\n          if ( dataX !== dataX ) {\r\n            continue;\r\n          }\r\n\r\n          if ( dataY !== dataY ) {\r\n            // Let's make a new line\r\n\r\n            if ( line.length == 0 ) {\r\n              continue;\r\n            }\r\n\r\n            line += `L ${xpx}, ${this.getY(waveform.getMinY())}`;\r\n            move = true;\r\n            continue;\r\n          }\r\n\r\n          ypx = this.getY( dataY );\r\n          xpx = this.getX( dataX );\r\n\r\n          if ( dataX < xmin || dataX > xmax ) {\r\n            buffer = [ dataX, dataY[ j ], xpx, ypx ];\r\n            continue;\r\n          }\r\n\r\n          if ( move ) {\r\n            line += ` M ${xpx}, ${this.getY(waveform.getMinY())} `;\r\n            move = false;\r\n          }\r\n\r\n          if ( line.length > 0 ) {\r\n            line += ' L ';\r\n          }\r\n\r\n          if ( buffer ) {\r\n            line += `${buffer[2]},${buffer[3]} `;\r\n            buffer = false;\r\n          } else {\r\n            line += `${xpx},${ypx} `;\r\n          }\r\n        }\r\n      }\r\n\r\n      if ( line !== '' ) {\r\n        this.lineZone.setAttribute( 'd', `M ${line} z` );\r\n      } else {\r\n        this.lineZone.setAttribute( 'd', '' );\r\n      }\r\n      this.groupMain.appendChild( this.groupZones );\r\n    }\r\n\r\n    if ( this.hasStyleChanged( this.selectionType ) ) {\r\n      this.applyLineStyle( this.lineZone );\r\n      this.styleHasChanged( false );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Applies the computed style to the DOM element fed as a parameter\r\n   * @private\r\n   *\r\n   * @param {SVGLineElement} line - The line to which the style has to be applied to\r\n   */\r\n  applyLineStyle( line ) {\r\n    line.setAttribute( 'stroke', this.getLineColor() );\r\n    line.setAttribute( 'stroke-width', this.getLineWidth() );\r\n    line.setAttribute( 'fill', this.getFillColor() );\r\n    line.setAttribute( 'fill-opacity', this.getFillOpacity() );\r\n    line.setAttribute( 'stroke-opacity', this.getLineOpacity() );\r\n  }\r\n\r\n  /**\r\n   * Sets the line width\r\n   *\r\n   * @param {Number} width - The line width\r\n   * @returns {SerieZone} - The current serie\r\n   */\r\n  setLineWidth( width ) {\r\n    this.options.lineWidth = width;\r\n    this.styleHasChanged();\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Gets the line width\r\n   *\r\n   * @returns {Number} - The line width\r\n   */\r\n  getLineWidth() {\r\n    return this.options.lineWidth;\r\n  }\r\n\r\n  /**\r\n   * Sets the line opacity\r\n   *\r\n   * @param {Number} opacity - The line opacity\r\n   * @returns {SerieZone} - The current serie\r\n   */\r\n  setLineOpacity( opacity ) {\r\n    this.options.lineOpacity = opacity;\r\n    this.styleHasChanged();\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Gets the line opacity\r\n   *\r\n   * @returns {Number} - The line opacity\r\n   */\r\n  getLineOpacity() {\r\n    return this.options.lineOpacity;\r\n  }\r\n\r\n  /**\r\n   * Sets the line color\r\n   *\r\n   * @param {String} color - The line color\r\n   * @returns {SerieZone} - The current serie\r\n   */\r\n  setLineColor( color ) {\r\n    this.options.lineColor = color;\r\n    this.styleHasChanged();\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Gets the line width\r\n   *\r\n   * @returns {Number} - The line width\r\n   */\r\n  getLineColor() {\r\n    return this.options.lineColor;\r\n  }\r\n\r\n  /**\r\n   * Sets the fill opacity\r\n   *\r\n   * @param {Number} opacity - The fill opacity\r\n   * @returns {SerieZone} - The current serie\r\n   */\r\n  setFillOpacity( opacity ) {\r\n    this.options.fillOpacity = opacity;\r\n    this.styleHasChanged();\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Gets the fill opacity\r\n   *\r\n   * @returns {Number} - The fill opacity\r\n   */\r\n  getFillOpacity() {\r\n    return this.options.fillOpacity;\r\n  }\r\n\r\n  /**\r\n   * Sets the fill color\r\n   *\r\n   * @param {Number} width - The line width\r\n   * @returns {Number} - The line width\r\n   */\r\n  setFillColor( color ) {\r\n    this.options.fillColor = color;\r\n    this.styleHasChanged();\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Gets the fill color\r\n   *\r\n   * @returns {Number} - The fill color\r\n   */\r\n  getFillColor() {\r\n    return this.options.fillColor;\r\n  }\r\n}\r\n\r\nexport default SerieZone;","// import Graph from '../graph.core.js';\r\n// import { Waveform } from '../util/waveform.js';\r\nimport Serie3DMixin from '../mixins/graph.mixin.serie3d.js';\r\nimport * as util from '../graph.util.js';\r\n\r\nimport Serie from './graph.serie.zone.js';\r\n\r\n/**\r\n * Serie line with 3D projection\r\n * @example graph.newSerie( name, options, \"line\" );\r\n * @see Graph#newSerie\r\n * @extends SerieLine\r\n */\r\nclass SerieZone3D extends Serie {\r\n  static\r\n  default () {\r\n    return {\r\n      zpos: 0\r\n    };\r\n  }\r\n  constructor( graph, name, options ) {\r\n    super( ...arguments );\r\n  }\r\n\r\n  /**\r\n   * Sets the z-position\r\n   * @memberof SerieZone3D\r\n   * @param {Number} zPos - The position in the z axis\r\n   */\r\n  setZPos( zPos ) {\r\n    this.options.zpos = zPos;\r\n    return this;\r\n  }\r\n\r\n  setz() {\r\n    return this.setZPos( ...arguments );\r\n  }\r\n}\r\n\r\nutil.mix( SerieZone3D, Serie3DMixin );\r\nexport default SerieZone3D;","import * as util from '../graph.util.js';\r\n\r\nimport Serie from './graph.serie.js';\r\n\r\n/**\r\n * Density map serie\r\n * @example graph.newSerie( name, options, \"densitymap\" );\r\n * @see Graph#newSerie\r\n * @augments Serie\r\n */\r\nclass SerieDensityMap extends Serie {\r\n\r\n  constructor( graph, name, options ) {\r\n\r\n    super( ...arguments );\r\n    util.mapEventEmission( this.options, this ); // Register events\r\n\r\n    this.rects = [];\r\n    this.paths = [];\r\n\r\n    this.recalculateBinsOnDraw = false;\r\n  }\r\n  /**\r\n   * Sets the data of the serie. Careful, only one format allowed for now.\r\n   * @memberof SerieDensityMap\r\n   * @param {Array} data - A vector containing 2-elements arrays\r\n   * @return {SerieDensityMap} The current instance\r\n   * @example serie.setData( [ [ x1, y1 ], [ x2, y2 ], ..., [ xn, yn ] ] );\r\n   */\r\n  setData( data ) {\r\n\r\n    this.minX = this.maxX = this.minY = this.maxY = 0;\r\n    var i = 0,\r\n      l = data.length;\r\n    this.data = data;\r\n\r\n    this.minX = Number.POSITIVE_INFINITY;\r\n    this.minY = Number.POSITIVE_INFINITY;\r\n    this.maxX = Number.NEGATIVE_INFINITY;\r\n    this.maxY = Number.NEGATIVE_INFINITY;\r\n\r\n    for ( i = 0; i < l; i++ ) {\r\n      this._checkX( data[ i ][ 0 ] );\r\n      this._checkY( data[ i ][ 1 ] );\r\n    }\r\n\r\n    this.dataHasChanged();\r\n    this.graph.updateDataMinMaxAxes();\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n  /**\r\n   * Calculates the bins from the (x,y) dataset\r\n   * @memberof SerieDensityMap\r\n   * @param {Number} fromX - The first x element to consider\r\n   * @param {Number} deltaX - The x spacing between two bins\r\n   * @param {Number} numX - The number of x bins\r\n   * @param {Number} fromY - The first y element to consider\r\n   * @param {Number} deltaY - The y spacing between two bins\r\n   * @param {Number} numY - The number of y bins\r\n   * @return {Array} The generated density map\r\n   * @see SerieDensityMap#autoBins\r\n   * @see SerieDensityMap#autoColorMapBinBoundaries\r\n   * @see SerieDensityMap#setPxPerBin\r\n   */\r\n  calculateDensity( fromX, deltaX, numX, fromY, deltaY, numY ) {\r\n\r\n    var densitymap = [],\r\n      i,\r\n      l = this.data.length,\r\n      indexX, indexY;\r\n\r\n    var binMin = Number.POSITIVE_INFINITY;\r\n    var binMax = Number.NEGATIVE_INFINITY;\r\n\r\n    for ( i = 0; i < l; i++ ) {\r\n      indexX = ~~( ( this.data[ i ][ 0 ] - fromX ) / deltaX );\r\n      indexY = ~~( ( this.data[ i ][ 1 ] - fromY ) / deltaY );\r\n\r\n      if ( indexX > numX || indexY > numY || indexX < 0 || indexY < 0 ) {\r\n        continue;\r\n      }\r\n\r\n      densitymap[ indexX ] = densitymap[ indexX ] || [];\r\n      densitymap[ indexX ][ indexY ] = densitymap[ indexX ][ indexY ] + 1 || 1;\r\n\r\n      binMin = densitymap[ indexX ][ indexY ] < binMin ? densitymap[ indexX ][ indexY ] : binMin;\r\n      binMax = densitymap[ indexX ][ indexY ] > binMax ? densitymap[ indexX ][ indexY ] : binMax;\r\n      //binMax = Math.max( binMax, densitymap[ indexX ][ indexY ] );\r\n    }\r\n\r\n    this.maxIndexX = numX;\r\n    this.maxIndexY = numY;\r\n\r\n    this.binMin = binMin;\r\n    this.binMax = binMax;\r\n\r\n    this.deltaX = deltaX;\r\n    this.deltaY = deltaY;\r\n\r\n    this.fromX = fromX;\r\n    this.fromY = fromY;\r\n\r\n    this.numX = numX;\r\n    this.numY = numY;\r\n\r\n    this.densitymap = densitymap;\r\n    return densitymap;\r\n  }\r\n\r\n  /**\r\n   * Sets the density map from a precalculated data set\r\n   * @memberof SerieDensityMap\r\n   * @param {Array} densitymap - A 2D-array containing the map\r\n   * @param {Number} fromX - The first x element to consider\r\n   * @param {Number} deltaX - The x spacing between two bins\r\n   * @param {Number} fromY - The first y element to consider\r\n   * @param {Number} deltaY - The y spacing between two bins\r\n   * @return {Array} The generated density map\r\n   * @see SerieDensityMap#autoBins\r\n   * @see SerieDensityMap#autoColorMapBinBoundaries\r\n   * @see SerieDensityMap#setPxPerBin\r\n   */\r\n  setDensityMap( densitymap, fromX, deltaX, fromY, deltaY ) {\r\n\r\n    var i,\r\n      j,\r\n      indexX, indexY;\r\n\r\n    var binMin = Number.POSITIVE_INFINITY;\r\n    var binMax = Number.NEGATIVE_INFINITY;\r\n\r\n    for ( i = 0; i < densitymap.length; i++ ) {\r\n\r\n      for ( j = 0; j < densitymap[ i ].length; j++ ) {\r\n        binMin = densitymap[ i ][ j ] < binMin ? densitymap[ i ][ j ] : binMin;\r\n        binMax = densitymap[ i ][ j ] > binMax ? densitymap[ i ][ j ] : binMax;\r\n      }\r\n      //binMax = Math.max( binMax, densitymap[ indexX ][ indexY ] );\r\n    }\r\n\r\n    this.maxIndexX = densitymap.length;\r\n    this.maxIndexY = densitymap[ 0 ].length;\r\n    this.binMin = binMin;\r\n    this.binMax = binMax;\r\n\r\n    this.deltaX = deltaX;\r\n    this.deltaY = deltaY;\r\n\r\n    this.fromX = fromX;\r\n    this.fromY = fromY;\r\n\r\n    this.numX = this.maxIndexX;\r\n    this.numY = this.maxIndexY;\r\n\r\n    this.densitymap = densitymap;\r\n    return densitymap;\r\n  }\r\n\r\n  /**\r\n   * Calculates the bins from the (x,y) dataset using bin weighing\r\n   * Will assign a set of (x,y) to the 4 neighbouring bins according to its exact position\r\n   * @memberof SerieDensityMap\r\n   * @param {Number} fromX - The first x element to consider\r\n   * @param {Number} deltaX - The x spacing between two bins\r\n   * @param {Number} numX - The number of x bins\r\n   * @param {Number} fromY - The first y element to consider\r\n   * @param {Number} deltaY - The y spacing between two bins\r\n   * @param {Number} numY - The number of y bins\r\n   * @return {Array} The generated density map\r\n   * @see SerieDensityMap#autoBins\r\n   * @see SerieDensityMap#autoColorMapBinBoundaries\r\n   * @see SerieDensityMap#setPxPerBin\r\n   */\r\n  calculateDensityWeighted( fromX, deltaX, numX, fromY, deltaY, numY ) {\r\n\r\n    var densitymap = [],\r\n      i,\r\n      l = this.data.length,\r\n      indexX, indexY;\r\n\r\n    var binMin = Number.POSITIVE_INFINITY;\r\n    var binMax = Number.NEGATIVE_INFINITY;\r\n\r\n    var compX, compY;\r\n    var exactX, exactY;\r\n    var indexXLow, indexXHigh, indexYLow, indexYHigh;\r\n\r\n    for ( i = 0; i < l; i++ ) {\r\n      exactX = ( ( this.data[ i ][ 0 ] - fromX ) / deltaX ) - 0.5;\r\n      exactY = ( ( this.data[ i ][ 1 ] - fromY ) / deltaY ) - 0.5;\r\n\r\n      indexX = Math.floor( exactX );\r\n      indexY = Math.floor( exactY );\r\n\r\n      indexXLow = indexX; //Math.floor( exactX );\r\n      indexYLow = indexY; //Math.floor( exactY );\r\n\r\n      indexXHigh = indexX + 1; //Math.ceil( exactX );\r\n      indexYHigh = indexY + 1; //Math.ceil( exactY );\r\n\r\n      compX = ( 1 - ( exactX - indexX ) );\r\n      compY = ( 1 - ( exactY - indexY ) );\r\n\r\n      if ( indexX > numX || indexY > numY || indexX < 0 || indexY < 0 ) {\r\n        continue;\r\n      }\r\n\r\n      densitymap[ indexXLow ] = densitymap[ indexXLow ] || [];\r\n      densitymap[ indexXHigh ] = densitymap[ indexXHigh ] || [];\r\n\r\n      densitymap[ indexXLow ][ indexYLow ] = densitymap[ indexXLow ][ indexYLow ] || 0;\r\n      densitymap[ indexXHigh ][ indexYLow ] = densitymap[ indexXHigh ][ indexYLow ] || 0;\r\n      densitymap[ indexXLow ][ indexYHigh ] = densitymap[ indexXLow ][ indexYHigh ] || 0;\r\n      densitymap[ indexXHigh ][ indexYHigh ] = densitymap[ indexXHigh ][ indexYHigh ] || 0;\r\n\r\n      densitymap[ indexXLow ][ indexYLow ] += compX * compY;\r\n      densitymap[ indexXHigh ][ indexYLow ] += ( 1 - compX ) * compY;\r\n      densitymap[ indexXLow ][ indexYHigh ] += compX * ( 1 - compY );\r\n      densitymap[ indexXHigh ][ indexYHigh ] += ( 1 - compX ) * ( 1 - compY );\r\n\r\n      // A loop would be nicer, but would it be faster ?\r\n      binMin = densitymap[ indexXLow ][ indexYLow ] < binMin ? densitymap[ indexXLow ][ indexYLow ] : binMin;\r\n      binMax = densitymap[ indexXLow ][ indexYLow ] > binMax ? densitymap[ indexXLow ][ indexYLow ] : binMax;\r\n      binMin = densitymap[ indexXHigh ][ indexYLow ] < binMin ? densitymap[ indexXHigh ][ indexYLow ] : binMin;\r\n      binMax = densitymap[ indexXHigh ][ indexYLow ] > binMax ? densitymap[ indexXHigh ][ indexYLow ] : binMax;\r\n      binMin = densitymap[ indexXLow ][ indexYHigh ] < binMin ? densitymap[ indexXLow ][ indexYHigh ] : binMin;\r\n      binMax = densitymap[ indexXLow ][ indexYHigh ] > binMax ? densitymap[ indexXLow ][ indexYHigh ] : binMax;\r\n      binMin = densitymap[ indexXHigh ][ indexYHigh ] < binMin ? densitymap[ indexXHigh ][ indexYHigh ] : binMin;\r\n      binMax = densitymap[ indexXHigh ][ indexYHigh ] > binMax ? densitymap[ indexXHigh ][ indexYHigh ] : binMax;\r\n\r\n      //binMax = Math.max( binMax, densitymap[ indexX ][ indexY ] );\r\n    }\r\n\r\n    this.maxIndexX = numX;\r\n    this.maxIndexY = numY;\r\n\r\n    this.binMin = binMin;\r\n    this.binMax = binMax;\r\n\r\n    this.deltaX = deltaX;\r\n    this.deltaY = deltaY;\r\n\r\n    this.fromX = fromX;\r\n    this.fromY = fromY;\r\n\r\n    this.numX = numX;\r\n    this.numY = numY;\r\n\r\n    this.densitymap = densitymap;\r\n    return densitymap;\r\n  }\r\n\r\n  /**\r\n   * Calculates the density map based on the minimum and maximum values found in the data array\r\n   * @memberof SerieDensityMap\r\n   * @param {Number} [ numX = 400 ] - The number of x bins\r\n   * @param {Number} [ numY = numX ] - The number of y bins\r\n   * @return {SerieDensityMap} The current instance\r\n   * @see SerieDensityMap#calculateDensity\r\n   */\r\n  autoBins( numX, numY ) {\r\n\r\n    this.numX = numX || 400;\r\n    this.numY = numY || this.numX;\r\n\r\n    this.calculateDensity(\r\n      this.minX, ( this.maxX - this.minX ) / numX, numX,\r\n      this.minY, ( this.maxY - this.minY ) / numY, numY\r\n    );\r\n\r\n    this.recalculateBinsOnDraw = false;\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Only calculates the density map upon redraw based on the current state of the graph. In this mode, a fixed number of pixels per bin is used to calculate the number of bins and fed into\r\n   * the calculation of the density map. In this method, the color map spans on the full scale of the density map values (i.e. a subrange cannot be defined, like you would do using {@link SerieDensityMap#setColorMapBinBoundaries}).\r\n   * @memberof SerieDensityMap\r\n   * @param {Number} pxPerBinX - The number of x bins per pixels. Should be an integer, but technically it doesn't have to\r\n   * @param {Number} pxPerBinY - The number of y bins per pixels. Should be an integer, but technically it doesn't have to\r\n   * @param {Boolean} weightedDensityMap - Whether jsGraph should use weighted density mapping or not\r\n   * @return {SerieDensityMap} The current instance\r\n   * @see SerieDensityMap#calculateDensity\r\n   */\r\n  setPxPerBin( pxPerBinX, pxPerBinY, weightedDensityMap ) {\r\n\r\n    if ( pxPerBinX ) {\r\n      this.calculationDensityMap( {\r\n        from: 'min',\r\n        to: 'max',\r\n        pxPerBin: pxPerBinX,\r\n        weighted: weightedDensityMap\r\n      } );\r\n    }\r\n\r\n    if ( pxPerBinY ) {\r\n      this.calculationDensityMap( false, {\r\n        from: 'min',\r\n        to: 'max',\r\n        pxPerBin: pxPerBinY,\r\n        weighted: weightedDensityMap\r\n      } );\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Sets bins in the ```x``` or ```y``` direction based on a from value, a to value and a number of bins.\r\n   * @memberof SerieDensityMap\r\n   * @param {String} mode - ```x``` or ```y```\r\n   * @param {Number} from - The from value of the bin for the calculation with ```calculateDensityMap```\r\n   * @param {Number} to - The to value\r\n   * @param {Number} num - The number of bins\r\n   * @return {SerieDensityMap} The current instance\r\n   * @see SerieDensityMap#calculateDensity\r\n   */\r\n  setBinsFromTo( mode, from, to, num ) {\r\n\r\n    this.densityMapCalculation = this.densityMapCalculation || {};\r\n\r\n    this.densityMapCalculation[ mode ] = {\r\n      from: from,\r\n      to: to,\r\n      numBins: num\r\n    };\r\n    this.calculationDensityMap();\r\n    return this;\r\n  }\r\n\r\n  calculationDensityMap( x, y ) {\r\n\r\n    this.method = this.calculateDensityAdvanced;\r\n    this.densityMapCalculation = this.densityMapCalculation || {};\r\n\r\n    if ( x ) {\r\n      this.densityMapCalculation.x = x;\r\n    }\r\n\r\n    if ( y ) {\r\n      this.densityMapCalculation.y = y;\r\n    }\r\n  }\r\n\r\n  calculateDensityAdvanced() {\r\n\r\n    var results = {\r\n      x: {\r\n        from: 0,\r\n        num: 0,\r\n        delta: 0,\r\n        weighing: false\r\n      },\r\n\r\n      y: {\r\n        from: 0,\r\n        num: 0,\r\n        delta: 0,\r\n        weighing: false\r\n      }\r\n    };\r\n\r\n    var widthValues = {\r\n      x: this.graph.drawingSpaceWidth,\r\n      y: this.graph.drawingSpaceHeight\r\n    };\r\n    var axisGetter = {\r\n      x: this.getXAxis,\r\n      y: this.getYAxis\r\n    };\r\n\r\n    var weighing = false;\r\n\r\n    for ( var i in this.densityMapCalculation ) {\r\n\r\n      if ( this.densityMapCalculation[ i ].weighted ) {\r\n        weighing = true;\r\n        results[ i ].weighing = true;\r\n      }\r\n\r\n      if ( this.densityMapCalculation[ i ].pxPerBin ) {\r\n\r\n        // In value\r\n\r\n        var from = ( this.densityMapCalculation[ i ].from == 'min' ) ? axisGetter[ i ].call( this ).getCurrentMin() : this.densityMapCalculation[ i ].from;\r\n        var to = this.densityMapCalculation[ i ].to == 'max' ? axisGetter[ i ].call( this ).getCurrentMax() : this.densityMapCalculation[ i ].to;\r\n\r\n        // In px\r\n        var dimension = Math.abs( axisGetter[ i ].call( this ).getRelPx( to - from ) );\r\n        results[ i ].num = Math.ceil( widthValues[ i ] / this.densityMapCalculation[ i ].pxPerBin );\r\n\r\n        results[ i ].from = from - Math.abs( axisGetter[ i ].call( this ).getRelVal( ( ( results[ i ].num ) * this.densityMapCalculation[ i ].pxPerBin - dimension ) / 2 ) );\r\n        results[ i ].delta = Math.abs( axisGetter[ i ].call( this ).getRelVal( this.densityMapCalculation[ i ].pxPerBin ) );\r\n\r\n      } else {\r\n\r\n        results[ i ].num = this.densityMapCalculation[ i ].numBins || 400;\r\n        results[ i ].from = ( this.densityMapCalculation[ i ].from == 'min' ) ? axisGetter[ i ].call( this ).getCurrentMin() : this.densityMapCalculation[ i ].from;\r\n        results[ i ].delta = ( this.densityMapCalculation[ i ].to ) ? ( ( this.densityMapCalculation[ i ].to == 'max' ? axisGetter[ i ].call( this ).getCurrentMax() : this.densityMapCalculation[ i ].to ) - results[ i ].from ) / ( results[ i ].num ) : this.densityMapCalculate[ i ].delta;\r\n\r\n      }\r\n\r\n    }\r\n\r\n    ( weighing ? this.calculateDensityWeighted : this.calculateDensity ).call( this,\r\n      results.x.from, results.x.delta, results.x.num,\r\n      results.y.from, results.y.delta, results.y.num\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Selects a subrange of bins for the color mapping. There is no need to recalculate the color map after calling this method\r\n   * @memberof SerieDensityMap\r\n   * @param {Number} binMin - The minimum bin value\r\n   * @param {Number} binMax - The maximum bin value\r\n   * @return {SerieDensityMap} The current instance\r\n   * @example // In this case, all bins with values below binMin * 2 (the middle scale) will be rendered with the first color of the color map\r\n   * serie.setColorMapBinBoundaries( serie.binMin * 2, serie.binMax );\r\n   */\r\n  setColorMapBinBoundaries( min, max, _internal ) {\r\n    this.colorMapMin = min;\r\n    this.colorMapMax = max;\r\n\r\n    if ( !_internal ) {\r\n      // If the method is called externally, the bins must be fixed and not automatically scaled when the draw method is invoked.\r\n      this.callbackColorMapMinMax = 'manual';\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Calls {@link SerieDensityMap#setColorMapBinBoundaries} using the minimum and maximum bin values calculated by {@link SerieDensityMap#calculateDensity}. This function must be called, since colorMinMap and colorMaxMap are not set automatically when the density map is calculated.\r\n   * @memberof SerieDensityMap\r\n   * @param {Number} binMin - The minimum bin value\r\n   * @param {Number} binMax - The maximum bin value\r\n   * @return {SerieDensityMap} The current instance\r\n   */\r\n  autoColorMapBinBoundaries() {\r\n    this.colorMapMin = this.binMin;\r\n    this.colorMapMax = this.binMax;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Allows the use of a callback to determine the color map min and max value just before the density map is redrawn. This is very useful when the density map is recalculate before redraw, such as in the case where bins per pixels are used\r\n   * @memberof SerieDensityMap\r\n   * @param {(String|Function)} callback - The callback function to call. Should return an array with two elements ```[ colorMapMin, colorMapMax ]```. This parameter can also take the value ```auto```, in which case ```autoColorMapBinBoundaries``` will be called before redraw\r\n   * @return {SerieDensityMap} The current instance\r\n   */\r\n  onRedrawColorMapBinBoundaries( callback ) {\r\n    this.callbackColorMapMinMax = callback;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Generates a color map based on a serie of HSL(A) values.\r\n   * @summary Colors can scale linearly, logarithmically (enhances short range differences) or exponentially (enhances long range differences).\r\n   * One word of advice though. SVG being not canvas, jsGraph has to create a path for each color value of the color map. In other words, if you're asking for 16-bit coloring (65536 values), 65536 SVG paths will be created and your browser will start to suffer from it.\r\n   * As of now, all the colors in colorStops will be places at equal distances from each other between <code>colorMapMin</code> and <code>colorMapMax</code> set by {@link autoColorMapBinBoundaries} or {@link setColorMapBinBoundaries}\r\n   * @memberof SerieDensityMap\r\n   * @param {Array<Object>} colorStops - An array of objects, each having the following format: <code>{ h: [ 0-360], s: 0-1, l: 0-1, a: 0-1}</code>\r\n   * @param {Number} numColors - The number of colors to compute.\r\n   * @param {String} [ method = \"linear\" ] - The method to use to calculate the density map: <code>linear</code>, <code>exp</code>, or <code>log</code>\r\n   * @return {SerieDensityMap} The current instance\r\n   */\r\n  colorMapHSL( colorStops, numColors, method ) {\r\n\r\n    method = method || 'linear';\r\n\r\n    var methods = {\r\n      'exp': function( value ) {\r\n        return ( Math.exp( value / numColors * 1 ) - Math.exp( 0 ) ) / ( Math.exp( 1 ) - Math.exp( 0 ) );\r\n      },\r\n      'log': function( value ) {\r\n        return ( Math.log( value + 1 ) - Math.log( 1 ) ) / ( Math.log( numColors + 1 ) - Math.log( 1 ) );\r\n      },\r\n      'linear': function( value ) {\r\n        return ( value - 0 ) / ( numColors - 0 );\r\n      }\r\n    };\r\n\r\n    var k = 0,\r\n      colorMap = [],\r\n      opacities = [];\r\n\r\n    var color = {\r\n      h: null,\r\n      s: null,\r\n      l: null,\r\n      a: null\r\n    };\r\n\r\n    var ratio, first;\r\n\r\n    var slices = colorStops.length - 1;\r\n\r\n    for ( var i = 0; i <= numColors; i++ ) {\r\n\r\n      ratio = methods[ method ]( i );\r\n\r\n      first = Math.floor( ratio * slices );\r\n\r\n      if ( first == colorStops.length - 1 ) { // Handle 1\r\n        first = slices - 1;\r\n      }\r\n\r\n      ratio = ( ratio - first / ( slices ) ) / ( 1 / ( slices ) );\r\n\r\n      for ( var j in color ) {\r\n        color[ j ] = ( colorStops[ first + 1 ][ j ] - colorStops[ first ][ j ] ) * ratio + colorStops[ first ][ j ];\r\n      }\r\n\r\n      colorMap[ k ] = `hsl(${ color.h }, ${ Math.round( color.s * 100 ) }%, ${ Math.round( color.l * 100 ) }%)`; //this.HSVtoRGB( color.h, color.s, color.v );\r\n      opacities[ k ] = color.a;\r\n      k++;\r\n    }\r\n\r\n    this.opacities = opacities;\r\n    this.colorMap = colorMap;\r\n    this.colorMapNum = numColors;\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Calls {@link SerieDensityMap#colorMapHSV} using 100 colors.\r\n   * @memberof SerieDensityMap\r\n   * @param {Array<Object>} colorStops - An array of objects, each having the following format: <code>{ h: [ 0-360], s: 0-1, l: 0-1, a: 0-1}</code>\r\n   * @param {String} [ method = \"linear\" ] - The method to use to calculate the density map: <code>linear</code>, <code>exp</code> or <code>log</code>\r\n   * @return {SerieDensityMap} The current instance\r\n   */\r\n  autoColorMapHSL( colorStops, method = 'linear' ) {\r\n    this.colorMapHSL( colorStops, 100, method );\r\n    return this;\r\n  }\r\n\r\n  /*  byteToHex( b ) {\r\n        return hexChar[ ( b >> 4 ) & 0x0f ] + hexChar[ b & 0x0f ];\r\n      }\r\n      */\r\n  /*\r\n    HSVtoRGB( h, s, v ) {\r\n      var r, g, b, i, f, p, q, t;\r\n      if ( arguments.length === 1 ) {\r\n        s = h.s, v = h.v, h = h.h;\r\n      }\r\n      i = Math.floor( h * 6 );\r\n      f = h * 6 - i;\r\n      p = v * ( 1 - s );\r\n      q = v * ( 1 - f * s );\r\n      t = v * ( 1 - ( 1 - f ) * s );\r\n      switch ( i % 6 ) {\r\n        case 0:\r\n          r = v, g = t, b = p;\r\n          break;\r\n        case 1:\r\n          r = q, g = v, b = p;\r\n          break;\r\n        case 2:\r\n          r = p, g = v, b = t;\r\n          break;\r\n        case 3:\r\n          r = p, g = q, b = v;\r\n          break;\r\n        case 4:\r\n          r = t, g = p, b = v;\r\n          break;\r\n        case 5:\r\n          r = v, g = p, b = q;\r\n          break;\r\n      }\r\n      return \"#\" + this.byteToHex( Math.floor( r * 255 ) ) + this.byteToHex( Math.floor( g * 255 ) ) + this.byteToHex( Math.floor( b * 255 ) );\r\n    }\r\n  */\r\n\r\n  /**\r\n   * Returns the color index (```[ 0 - 1 ]```) for a certain value, based on colorMapMin and colorMapMax.\r\n   * @memberof SerieDensityMap\r\n   * @param {Number} binValue - The value of the bin\r\n   * @return {Number} The color index\r\n   */\r\n  getColorIndex( binValue ) {\r\n\r\n    return Math.max( 0, Math.min( this.colorMapNum, Math.floor( ( binValue - this.colorMapMin ) / ( this.colorMapMax - this.colorMapMin ) * this.colorMapNum ) ) );\r\n  }\r\n\r\n  /**\r\n   * Draws the serie\r\n   * @memberof SerieDensityMap\r\n   * @private\r\n   */\r\n  draw() {\r\n\r\n    var colorIndex;\r\n\r\n    if ( this.method ) {\r\n      this.method();\r\n    }\r\n\r\n    if ( !this.callbackColorMapMinMax || this.colorMapMin == undefined || this.colorMapMax == undefined || this.callbackColorMapMinMax == 'auto' ) {\r\n\r\n      this.autoColorMapBinBoundaries();\r\n\r\n    } else if ( typeof this.callbackColorMapMinMax == 'function' ) {\r\n\r\n      var val = this.callbackColorMapMinMax( this.binMin, this.binMax );\r\n      this.setColorMapBinBoundaries( val[ 0 ], val[ 1 ], true );\r\n    }\r\n\r\n    var deltaXPx = this.getXAxis().getRelPx( this.deltaX ),\r\n      deltaYPx = this.getYAxis().getRelPx( this.deltaY );\r\n\r\n    for ( var i = 0; i < this.paths.length; i++ ) {\r\n      this.paths[ i ] = '';\r\n    }\r\n\r\n    for ( var i = 0; i < this.maxIndexX; i++ ) {\r\n\r\n      for ( var j = 0; j < this.maxIndexY; j++ ) {\r\n\r\n        if ( this.densitymap[ i ] == undefined || this.densitymap[ i ][ j ] == undefined ) {\r\n          continue;\r\n        }\r\n\r\n        colorIndex = this.getColorIndex( this.densitymap[ i ][ j ] );\r\n        if ( !this.paths[ colorIndex ] ) {\r\n          this.paths[ colorIndex ] = '';\r\n        }\r\n\r\n        this.paths[ colorIndex ] += ` M ${ this.getXAxis().getPx( i * this.deltaX + this.fromX ) } ${ this.getYAxis().getPx( j * this.deltaY + this.fromY ) } h ${ deltaXPx } v ${ deltaYPx } h -${ deltaXPx } z`;\r\n\r\n      }\r\n    }\r\n    /*\r\n        this.maxIndexX = indexX;\r\n        this.maxIndexY = indexY;*/\r\n\r\n    this.drawRects();\r\n  }\r\n\r\n  /**\r\n   * Draws the rectangles\r\n   * @memberof SerieDensityMap\r\n   * @private\r\n   */\r\n  drawRects() {\r\n\r\n    for ( var i = 0; i < this.paths.length; i++ ) {\r\n\r\n      if ( !this.rects[ i ] ) {\r\n        this.rects[ i ] = document.createElementNS( this.graph.ns, 'path' );\r\n        this.rects[ i ].setAttribute( 'shape-rendering', 'crispEdges' );\r\n\r\n      }\r\n\r\n      if ( this.paths[ i ] !== undefined ) {\r\n        this.rects[ i ].setAttribute( 'd', this.paths[ i ] );\r\n        this.rects[ i ].setAttribute( 'fill', this.colorMap[ i ] );\r\n        this.rects[ i ].setAttribute( 'fill-opacity', this.opacities[ i ] );\r\n      }\r\n      this.groupMain.appendChild( this.rects[ i ] );\r\n    }\r\n\r\n  }\r\n\r\n  /**\r\n   * Sets the options of the serie\r\n   * @see SerieDensityMapDefaultOptions\r\n   * @param {Object} options - A object containing the options to set\r\n   * @return {SerieDensityMap} The current serie\r\n   * @memberof SerieDensityMap\r\n   */\r\n  setOptions( options ) {\r\n    this.options = util.extend( true, {}, this.defaults(), ( options || {} ) );\r\n    // Unselected style\r\n\r\n    return this;\r\n  }\r\n}\r\n\r\nexport default SerieDensityMap;","import * as util from '../graph.util.js';\r\n\r\nimport SerieLine from './graph.serie.line.js';\r\n\r\n/**\r\n * Constructor for the contour serie. Do not use this constructor directly, but use the {@link Graph#newSerie} method\r\n * @private\r\n * @extends Serie\r\n * @example graph.newSerie( name, options, \"contour\" );\r\n * @see Graph#newSerie\r\n */\r\nclass SerieContour extends SerieLine {\r\n\r\n  constructor( graph, name, options ) {\r\n    super( ...arguments );\r\n\r\n    this.negativeDelta = 0;\r\n    this.positiveDelta = 0;\r\n\r\n    this.negativeThreshold = 0;\r\n    this.positiveThreshold = 0;\r\n\r\n    this.groupMain.setAttribute( 'clip-path', `url(#_clipplot${ graph._creation })` );\r\n  }\r\n\r\n  /**\r\n   * Sets the contour lines\r\n   * @memberof SerieContour.prototype\r\n   * @param {Object} data - The object data\r\n   * @param {Number} data.minX - The minimum x value\r\n   * @param {Number} data.maxX - The maximum x value\r\n   * @param {Number} data.minY - The minimum y value\r\n   * @param {Number} data.maxY - The maximum y value\r\n   * @param {Object[]} data.segments - The segments making up the contour lines\r\n   * @param {Number[]} data.segments.lines - An array of alternating (x1,y1,x2,y2) quadruplet\r\n   * @param {Number} data.segments.zValue - The corresponding z-value of this array\r\n   * @return {Serie} The current serie\r\n   */\r\n  setData( data, arg, type ) {\r\n\r\n    var z = 0;\r\n    var x, dx, arg = arg || '2D',\r\n      type = type || 'float',\r\n      i, l = data.length,\r\n      j, k,\r\n      arr, datas = [];\r\n\r\n    if ( !( data instanceof Array ) ) {\r\n\r\n      if ( typeof data == 'object' ) {\r\n        // Def v2\r\n        this.minX = data.minX;\r\n        this.minY = data.minY;\r\n        this.maxX = data.maxX;\r\n        this.maxY = data.maxY;\r\n\r\n        data = data.segments;\r\n        l = data.length;\r\n      }\r\n    }\r\n\r\n    for ( i = 0; i < l; i++ ) {\r\n      k = data[ i ].lines.length;\r\n      arr = this._addData( type, k );\r\n\r\n      for ( j = 0; j < k; j += 2 ) {\r\n\r\n        arr[ j ] = data[ i ].lines[ j ];\r\n        this._checkX( arr[ j ] );\r\n        arr[ j + 1 ] = data[ i ].lines[ j + 1 ];\r\n        this._checkY( arr[ j + 1 ] );\r\n      }\r\n\r\n      datas.push( {\r\n        lines: arr,\r\n        zValue: data[ i ].zValue\r\n      } );\r\n    }\r\n    this.data = datas;\r\n    this.graph.updateDataMinMaxAxes();\r\n\r\n    this.dataHasChanged( true );\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Draws the serie if the data has changed\r\n   * @memberof SerieContour.prototype\r\n   * @param {Boolean} force - Forces redraw even if the data hasn't changed\r\n   * @return {Serie} The current serie\r\n   */\r\n  draw( force ) {\r\n\r\n    if ( force || this.hasDataChanged() ) {\r\n\r\n      this.currentLine = 0;\r\n      var x, y, xpx, ypx, xpx2, ypx2, i = 0,\r\n        l = this.data.length,\r\n        j = 0,\r\n        k, m, currentLine, domLine, arr;\r\n      this.minZ = Infinity;\r\n      this.maxZ = -Infinity;\r\n\r\n      var next = this.groupLines.nextSibling;\r\n      this.groupMain.removeChild( this.groupLines );\r\n      this.zValues = {};\r\n\r\n      var incrXFlip = 0;\r\n      var incrYFlip = 1;\r\n      if ( this.getFlip() ) {\r\n        incrXFlip = 0;\r\n        incrYFlip = 1;\r\n      }\r\n\r\n      var minY = this.getYAxis().getCurrentMin();\r\n      var minX = this.getXAxis().getCurrentMin();\r\n\r\n      var maxX = this.getXAxis().getCurrentMax();\r\n      var maxY = this.getYAxis().getCurrentMax();\r\n\r\n      this.counter = 0;\r\n      this.currentLineId = 0;\r\n\r\n      for ( ; i < l; i++ ) {\r\n        this.currentLine = '';\r\n        j = 0;\r\n        k = 0;\r\n\r\n        for ( arr = this.data[ i ].lines, m = arr.length; j < m; j += 4 ) {\r\n\r\n          var lastxpx, lastypx;\r\n\r\n          if ( ( arr[ j + incrXFlip ] < minX && arr[ j + 2 + incrXFlip ] < minX ) || ( arr[ j + incrYFlip ] < minY && arr[ j + 2 + incrYFlip ] < minY ) || ( arr[ j + incrYFlip ] > maxY && arr[ j + 2 + incrYFlip ] > maxY || ( arr[ j + incrXFlip ] > maxX && arr[ j + 2 + incrXFlip ] > maxX ) ) ) {\r\n            continue;\r\n          }\r\n\r\n          xpx2 = this.getX( arr[ j + incrXFlip ] );\r\n          ypx2 = this.getY( arr[ j + incrYFlip ] );\r\n\r\n          xpx = this.getX( arr[ j + 2 + incrXFlip ] );\r\n          ypx = this.getY( arr[ j + 2 + incrYFlip ] );\r\n\r\n          if ( xpx == xpx2 && ypx == ypx2 ) {\r\n            continue;\r\n          }\r\n\r\n          /*\tif( j > 0 && ( lastxpx !== undefined && lastypx !== undefined && Math.abs( xpx2 - lastxpx ) <= 30 && Math.abs( ypx2 - lastypx ) <= 30 ) ) {\r\n  \t\t\t\t\t\tcurrentLine += \"L\";\r\n  \t\t\t\t\t} else {\r\n  \t\t\t\t\t\tcurrentLine += \"M\";\r\n  \t\t\t\t\t}\r\n  */\r\n\r\n          this.currentLine += 'M ';\r\n          this.currentLine += xpx2;\r\n          this.currentLine += ' ';\r\n          this.currentLine += ypx2;\r\n\r\n          this.currentLine += 'L ';\r\n          this.currentLine += xpx;\r\n          this.currentLine += ' ';\r\n          this.currentLine += ypx;\r\n\r\n          this.counter++;\r\n\r\n          lastxpx = xpx;\r\n          lastypx = ypx;\r\n\r\n          k++;\r\n        }\r\n\r\n        this.currentLine += ' z';\r\n\r\n        domLine = this._createLine();\r\n        domLine.setAttribute( 'data-zvalue', this.data[ i ].zValue );\r\n\r\n        this.zValues[ this.data[ i ].zValue ] = {\r\n          dom: domLine\r\n        };\r\n\r\n        this.minZ = Math.min( this.minZ, this.data[ i ].zValue );\r\n        this.maxZ = Math.max( this.maxZ, this.data[ i ].zValue );\r\n      }\r\n\r\n      i++;\r\n\r\n      for ( i = this.currentLine + 1; i < this.lines.length; i++ ) {\r\n        this.groupLines.removeChild( this.lines[ i ] );\r\n        this.lines.splice( i, 1 );\r\n      }\r\n\r\n      i = 0;\r\n\r\n      for ( ; i < l; i++ ) {\r\n        this.setColorTo( this.lines[ i ], this.data[ i ].zValue, this.minZ, this.maxZ );\r\n      }\r\n\r\n      this.onMouseWheel( 0, {\r\n        shiftKey: false\r\n      } );\r\n      this.groupMain.insertBefore( this.groupLines, next );\r\n\r\n    } else if ( this.hasStyleChanged( this.selectionType ) ) {\r\n\r\n      for ( ; i < l; i++ ) {\r\n        this.setColorTo( this.lines[ i ], this.data[ i ].zValue, this.minZ, this.maxZ );\r\n      }\r\n\r\n    }\r\n\r\n  }\r\n\r\n  onMouseWheel( delta, e, fixed, positive ) {\r\n\r\n    delta /= 250;\r\n\r\n    if ( fixed !== undefined ) {\r\n\r\n      if ( !positive ) {\r\n        this.negativeThreshold = -fixed * this.minZ;\r\n        this.negativeDelta = -Math.pow( Math.abs( ( this.negativeThreshold / ( -this.minZ ) ) ), 1 / 3 );\r\n      }\r\n\r\n      if ( positive ) {\r\n        this.positiveThreshold = fixed * this.maxZ;\r\n        this.positiveDelta = Math.pow( this.positiveThreshold / ( this.maxZ ), 1 / 3 );\r\n      }\r\n\r\n    } else {\r\n\r\n      if ( ( !e.shiftKey ) || !this.options.hasNegative ) {\r\n\r\n        this.positiveDelta = Math.min( 1, Math.max( 0, this.positiveDelta + Math.min( 0.1, Math.max( -0.1, delta ) ) ) );\r\n        this.positiveThreshold = this.maxZ * ( Math.pow( this.positiveDelta, 3 ) );\r\n\r\n      } else {\r\n\r\n        this.negativeDelta = Math.min( 0, Math.max( -1, this.negativeDelta + Math.min( 0.1, Math.max( -0.1, delta ) ) ) );\r\n        this.negativeThreshold = -this.minZ * ( Math.pow( this.negativeDelta, 3 ) );\r\n\r\n      }\r\n\r\n    }\r\n\r\n    if ( isNaN( this.positiveDelta ) ) {\r\n      this.positiveDelta = 0;\r\n    }\r\n\r\n    if ( isNaN( this.negativeDelta ) ) {\r\n      this.negativeDelta = 0;\r\n    }\r\n\r\n    for ( var i in this.zValues ) {\r\n\r\n      this.zValues[ i ].dom.setAttribute( 'display', ( ( i >= 0 && i >= this.positiveThreshold ) || ( i <= 0 && i <= this.negativeThreshold ) ) ? 'block' : 'none' );\r\n\r\n    }\r\n\r\n    if ( this._shapeZoom ) {\r\n\r\n      if ( !this.options.hasNegative ) {\r\n        this._shapeZoom.hideHandleNeg();\r\n      } else {\r\n\r\n        this._shapeZoom.setHandleNeg( -( Math.pow( this.negativeDelta, 3 ) ), this.minZ );\r\n        this._shapeZoom.showHandleNeg();\r\n      }\r\n\r\n      this._shapeZoom.setHandlePos( ( Math.pow( this.positiveDelta, 3 ) ), this.maxZ );\r\n    }\r\n  }\r\n\r\n  handleMouseMove( xValue, doMarker, yValue ) {\r\n\r\n    var valX = xValue || this.getXAxis().getMouseVal(),\r\n      valY = yValue || this.getYAxis().getMouseVal();\r\n\r\n    return {\r\n      trueX: valX,\r\n      interpolatedY: valY,\r\n      xClosest: valX,\r\n      yClosest: valY\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Sets rainbow colors based on hsl format\r\n   * @memberof SerieContour.prototype\r\n   * @param {Object} colors\r\n   * @param {Object} colors.fromPositive\r\n   * @param {Number} colors.fromPositive.h\r\n   * @param {Number} colors.fromPositive.s\r\n   * @param {Number} colors.fromPositive.l\r\n\r\n   * @param {Object} colors.toPositive\r\n   * @param {Number} colors.toPositive.h\r\n   * @param {Number} colors.toPositive.s\r\n   * @param {Number} colors.toPositive.l\r\n\r\n\r\n   * @param {Object} colors.fromNegative\r\n   * @param {Number} colors.fromNegative.h\r\n   * @param {Number} colors.fromNegative.s\r\n   * @param {Number} colors.fromNegative.l\r\n\r\n\r\n   * @param {Object} colors.toNegative\r\n   * @param {Number} colors.toNegative.h\r\n   * @param {Number} colors.toNegative.s\r\n   * @param {Number} colors.toNegative.l\r\n   * @return {Serie} The current serie\r\n   */\r\n  setDynamicColor( colors ) {\r\n    this.lineColors = colors;\r\n\r\n    this.styleHasChanged();\r\n  }\r\n\r\n  setNegative( bln ) {\r\n    this.options.hasNegative = bln;\r\n\r\n    if ( bln ) {\r\n      this.negativeThreshold = 0;\r\n    }\r\n  }\r\n\r\n  setColorTo( line, zValue, min, max ) {\r\n\r\n    if ( !this.lineColors ) {\r\n      return;\r\n    }\r\n\r\n    var hsl = {\r\n      h: 0,\r\n      s: 0,\r\n      l: 0\r\n    };\r\n\r\n    for ( var i in hsl ) {\r\n\r\n      if ( zValue > 0 ) {\r\n        hsl[ i ] = this.lineColors.fromPositive[ i ] + ( ( this.lineColors.toPositive[ i ] - this.lineColors.fromPositive[ i ] ) * ( zValue / max ) );\r\n      } else {\r\n        hsl[ i ] = this.lineColors.fromNegative[ i ] + ( ( this.lineColors.toNegative[ i ] - this.lineColors.fromNegative[ i ] ) * ( zValue / min ) );\r\n      }\r\n    }\r\n\r\n    hsl.h /= 360;\r\n\r\n    var rgb = util.hslToRgb( hsl.h, hsl.s, hsl.l );\r\n\r\n    line.setAttribute( 'stroke', `rgb(${ rgb.join() })` );\r\n  }\r\n\r\n  getSymbolForLegend() {\r\n\r\n    if ( !this.lineForLegend ) {\r\n\r\n      var line = document.createElementNS( this.graph.ns, 'ellipse' );\r\n\r\n      line.setAttribute( 'cx', 7 );\r\n      line.setAttribute( 'cy', 0 );\r\n      line.setAttribute( 'rx', 8 );\r\n      line.setAttribute( 'ry', 3 );\r\n\r\n      line.setAttribute( 'cursor', 'pointer' );\r\n      this.lineForLegend = line;\r\n\r\n    }\r\n\r\n    this.applyLineStyle( this.lineForLegend, this.maxZ );\r\n\r\n    return this.lineForLegend;\r\n  }\r\n\r\n  applyLineStyle( line, overwriteValue ) {\r\n    line.setAttribute( 'stroke', this.getLineColor() );\r\n    line.setAttribute( 'stroke-width', this.getLineWidth() + ( this.isSelected() ? 2 : 0 ) );\r\n    if ( this.getLineDashArray() ) {\r\n      line.setAttribute( 'stroke-dasharray', this.getLineDashArray() );\r\n    }\r\n    line.setAttribute( 'fill', 'none' );\r\n\r\n    this.setColorTo( line, ( ( overwriteValue !== undefined ) ? overwriteValue : line.getAttribute( 'data-zvalue' ) ), this.minZ, this.maxZ );\r\n    //  line.setAttribute('shape-rendering', 'optimizeSpeed');\r\n\r\n    this.hasStyleChanged( false );\r\n  }\r\n\r\n  setShapeZoom( shape ) {\r\n    this._shapeZoom = shape;\r\n  }\r\n\r\n}\r\n\r\nexport default SerieContour;","import GraphPosition from '../graph.position.js';\r\nimport * as util from '../graph.util.js';\r\nimport EventMixin from '../mixins/graph.mixin.event_graph.js';\r\n/**\r\n * Shape class that should be extended\r\n * @class Shape\r\n * @static\r\n */\r\nclass Shape {\r\n  constructor() {}\r\n\r\n  /**\r\n   * Initializes the shape\r\n   * @param {Graph} graph - The graph containing the shape\r\n   * @param {Object} properties - The properties object (not copied)\r\n   * @return {Shape} The current shape\r\n   */\r\n  init( graph, properties, simplified = false ) {\r\n    var self = this;\r\n\r\n    this.graph = graph;\r\n    this.properties = properties || {};\r\n    this.handles = [];\r\n    this.options = this.options || {};\r\n\r\n    if ( !simplified ) {\r\n      this.group = document.createElementNS( this.graph.ns, 'g' );\r\n      this.group.setAttribute( 'clip-path', `url(#_clipplot${graph._creation})` );\r\n      this.group.jsGraphIsShape = this;\r\n    }\r\n\r\n    this.simplified = simplified;\r\n\r\n    this._selected = false;\r\n    this.createDom();\r\n\r\n    if ( this._dom ) {\r\n      this._dom.jsGraphIsShape = this;\r\n    }\r\n\r\n    this.classes = [];\r\n    this.transforms = [];\r\n\r\n    if ( this._data.masker ) {\r\n      var maskPath = document.createElementNS( this.graph.ns, 'mask' );\r\n      this.maskingId = Math.random();\r\n      maskPath.setAttribute( 'id', this.maskingId );\r\n\r\n      this.maskDomWrapper = document.createElementNS( this.graph.ns, 'rect' );\r\n      this.maskDomWrapper.setAttribute( 'fill', 'white' );\r\n      maskPath.appendChild( this.maskDomWrapper );\r\n\r\n      var maskDom = this._dom.cloneNode();\r\n      maskPath.appendChild( maskDom );\r\n\r\n      this.maskDom = maskDom;\r\n\r\n      this.graph.defs.appendChild( maskPath );\r\n    }\r\n\r\n    if ( this.group ) {\r\n      if ( this._dom && !this.isHTML() ) {\r\n        this.group.appendChild( this._dom );\r\n      }\r\n    }\r\n\r\n    let dom;\r\n    if ( simplified ) {\r\n      dom = this._dom;\r\n    } else {\r\n      dom = this.group;\r\n    }\r\n\r\n    dom.addEventListener( 'mouseover', function( e ) {\r\n      self.handleMouseOver( e );\r\n    } );\r\n\r\n    dom.addEventListener( 'mouseout', function( e ) {\r\n      self.handleMouseOut( e );\r\n    } );\r\n\r\n    dom.addEventListener( 'mousedown', function( e ) {\r\n      self.graph.focus();\r\n\r\n      self.handleMouseDown( e );\r\n    } );\r\n\r\n    dom.addEventListener( 'click', this.handleClick.bind( this ) );\r\n\r\n    dom.addEventListener( 'dblclick', function( e ) {\r\n      //e.preventDefault();\r\n      // e.stopPropagation();\r\n\r\n      self.handleDblClick( e );\r\n    } );\r\n\r\n    //\t\t\tthis.group.appendChild(this.rectEvent);\r\n\r\n    this.initImpl();\r\n\r\n    this.graph.emit( 'shapeNew', this );\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Implentation of the init method. To be extended if necessary on extended Shape classes\r\n   */\r\n  initImpl() {}\r\n\r\n  /**\r\n   * @return {Object} The shape's underlying data object\r\n   */\r\n  getData() {\r\n    return this._data;\r\n  }\r\n\r\n  /**\r\n   * @returns {String} The type of the shape\r\n   */\r\n  getType() {\r\n    return this.type;\r\n  }\r\n\r\n  /**\r\n   * Removes the shape from the DOM and unlinks it from the graph\r\n   */\r\n  kill( keepDom ) {\r\n    if ( this._inDom && !keepDom ) {\r\n      this.graph.removeShapeFromDom( this );\r\n    }\r\n\r\n    if ( !keepDom ) {\r\n      this.graph._removeShape( this );\r\n    }\r\n\r\n    this.graph.stopElementMoving( this );\r\n    this.graph.emit( 'shapeRemoved', this );\r\n    this.emit( 'removed', this );\r\n\r\n    this._inDom = false;\r\n  }\r\n\r\n  /**\r\n   * Hides the shape\r\n   * @return {Shape} The current shape\r\n   */\r\n  hide() {\r\n    if ( this.hidden ) {\r\n      return this;\r\n    }\r\n\r\n    this.hidden = true;\r\n    if ( !this.isHTML() && !this.simplified ) {\r\n      this.group.style.display = 'none';\r\n    } else {\r\n      this._dom.style.display = 'none';\r\n    }\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   *  Returns whether the shape is hidden or not\r\n   *  @return {Boolean} true if the shape is hidden, false otherwise\r\n   */\r\n  isHidden() {\r\n    return this.hidden;\r\n  }\r\n\r\n  /**\r\n   *  Returns whether the shape is visible or not\r\n   *  @return {Boolean} true if the shape is visible, false if it is hidden\r\n   */\r\n  isVisible() {\r\n    return !this.hidden;\r\n  }\r\n\r\n  /**\r\n   * Shows the shape\r\n   * @return {Shape} The current shape\r\n   */\r\n  show() {\r\n    if ( !this.hidden ) {\r\n      return this;\r\n    }\r\n\r\n    this.hidden = false;\r\n    if ( !this.isHTML() ) {\r\n      this.group.style.display = 'initial';\r\n    } else {\r\n      this._dom.style.display = 'initial';\r\n    }\r\n\r\n    this.redraw();\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Adds a class to the shape DOM\r\n   * @param {String} className - The class to add\r\n   * @return {Shape} The current shape\r\n   */\r\n  addClass( className ) {\r\n    this.classes = this.classes || [];\r\n    if ( this.classes.indexOf( className ) == -1 ) {\r\n      this.classes.push( className );\r\n    }\r\n    this.makeClasses();\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Removes a class from the shape DOM\r\n   * @param {String} className - The class to remove\r\n   * @return {Shape} The current shape\r\n   */\r\n  removeClass( className ) {\r\n    this.classes.splice( this.classes.indexOf( className ), 1 );\r\n    this.makeClasses();\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Builds the classes\r\n   * @private\r\n   * @return {Shape} The current shape\r\n   */\r\n  makeClasses() {\r\n    if ( this._dom ) {\r\n      this._dom.setAttribute( 'class', this.classes.join( ' ' ) );\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Triggers a ```shapeChanged``` event on the graph and a ```changed``` event on the shape\r\n   * @return {Shape} The current shape\r\n   */\r\n  changed( event, parameters ) {\r\n    if ( event ) {\r\n      this.graph.emit( event, this, parameters );\r\n      this.emit( event, this, parameters );\r\n    }\r\n\r\n    this.emit( 'changed', this, parameters );\r\n    this.graph.emit( 'shapeChanged', this, parameters );\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Creates an event receptacle with the coordinates of the shape bounding box\r\n   * @return {Shape} The current shape\r\n   */\r\n  setEventReceptacle() {\r\n\r\n    if ( this, simplified ) {\r\n      return;\r\n    }\r\n\r\n    if ( !this.rectEvent ) {\r\n      this.rectEvent = document.createElementNS( this.graph.ns, 'rect' );\r\n      this.rectEvent.setAttribute( 'pointer-events', 'fill' );\r\n      this.rectEvent.setAttribute( 'fill', 'transparent' );\r\n      this.group.appendChild( this.rectEvent );\r\n      this.rectEvent.jsGraphIsShape = this;\r\n    }\r\n\r\n    var box = this.group.getBBox();\r\n    this.rectEvent.setAttribute( 'x', box.x );\r\n    this.rectEvent.setAttribute( 'y', box.y - 10 );\r\n    this.rectEvent.setAttribute( 'width', box.width );\r\n    this.rectEvent.setAttribute( 'height', box.height + 20 );\r\n  }\r\n\r\n  /**\r\n   * Assigns a serie to the shape\r\n   * @param {Serie} The serie that owns the shape\r\n   * @return {Shape} The current shape\r\n   */\r\n  setSerie( serie ) {\r\n    if ( !serie ) {\r\n      return;\r\n    }\r\n\r\n    this.serie = serie;\r\n\r\n    if ( !serie.getXAxis || !serie.getYAxis ) {\r\n      console.error( serie );\r\n      throw 'Serie does not implement the getXAxis or getYAxis method';\r\n    }\r\n    this.xAxis = serie.getXAxis();\r\n    this.yAxis = serie.getYAxis();\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * @return {Serie} The serie associated to the shape\r\n   */\r\n  getSerie() {\r\n    return this.serie;\r\n  }\r\n\r\n  /**\r\n   * Assigns the shape to the default x and y axes of the graph, only if they don't exist yet\r\n   * @return {Shape} The current shape\r\n   * @see Graph#getXAxis\r\n   * @see Graph#getYAxis\r\n   */\r\n  autoAxes() {\r\n    if ( !this.xAxis ) {\r\n      this.xAxis = this.graph.getXAxis();\r\n    }\r\n\r\n    if ( !this.yAxis ) {\r\n      this.yAxis = this.graph.getYAxis();\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Assigns the shape to an x axis\r\n   * @param {XAxis} The X axis related to the shape\r\n   * @return {Shape} The current shape\r\n   */\r\n  setXAxis( axis ) {\r\n    this.xAxis = axis;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Assigns the shape to an y axis\r\n   * @param {YAxis} The Y axis related to the shape\r\n   * @return {Shape} The current shape\r\n   */\r\n  setYAxis( axis ) {\r\n    this.yAxis = axis;\r\n  }\r\n\r\n  /**\r\n   * Returns the x axis associated to the shape. If non-existent, assigns it automatically\r\n   * @return {XAxis} The x axis associated to the shape.\r\n   */\r\n  getXAxis() {\r\n    if ( !this.xAxis ) {\r\n      this.autoAxes();\r\n    }\r\n\r\n    return this.xAxis;\r\n  }\r\n\r\n  /**\r\n   * Returns the y axis associated to the shape. If non-existent, assigns it automatically\r\n   * @return {YAxis} The y axis associated to the shape.\r\n   */\r\n  getYAxis() {\r\n    if ( !this.yAxis ) {\r\n      this.autoAxes();\r\n    }\r\n\r\n    return this.yAxis;\r\n  }\r\n\r\n  /**\r\n   * Sets the layer of the shape\r\n   * @param {Number} layer - The layer number (1 being the lowest)\r\n   * @return {Shape} The current shape\r\n   * @see Shape#getLayer\r\n   */\r\n  setLayer( layer ) {\r\n    this.setProp( 'layer', layer );\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Returns the layer on which the shape is placed\r\n   * @return {Number} The layer number (1 being the lowest layer)\r\n   */\r\n  getLayer() {\r\n    var layer = this.getProp( 'layer' );\r\n\r\n    if ( layer !== undefined ) {\r\n      return layer;\r\n    }\r\n\r\n    return 1;\r\n  }\r\n\r\n  /**\r\n   * Initial drawing of the shape. Adds it to the DOM and creates the labels. If the shape was already in the DOM, the method simply recreates the labels and reapplies the shape style, unless ```force``` is set to ```true```\r\n   * @param {Boolean} force - Forces adding the shape to the DOM (useful if the shape has changed layer)\r\n   * @param {Boolean} preventRedraw - Prevents the redraw method\r\n   * @return {Shape} The current shape\r\n   */\r\n  draw( force, preventRedraw ) {\r\n    if ( !this._inDom || force ) {\r\n      this.appendToDom();\r\n      this._inDom = true;\r\n    }\r\n\r\n    this.makeLabels();\r\n\r\n    if ( !preventRedraw ) {\r\n      this.redraw();\r\n    }\r\n\r\n    this.applyStyle();\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Redraws the shape. Repositions it, applies the style and updates the labels\r\n   * @return {Shape} The current shape\r\n   */\r\n  redraw() {\r\n    if ( this.hidden ) {\r\n      return this;\r\n    }\r\n\r\n    this.position = this.applyPosition();\r\n\r\n    this.redrawImpl();\r\n    if ( !this.position ) {\r\n      this.updateLabels();\r\n      return this;\r\n    }\r\n\r\n    this.updateLabels();\r\n    this._applyTransforms();\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Implementation of the redraw method. Extended Shape classes should override this method\r\n   */\r\n  redrawImpl() {}\r\n\r\n  /**\r\n   * Sets all dumpable properties of the shape\r\n   * @param {Object} properties - The properties object\r\n   * @return {Shape} The current shape\r\n   */\r\n  setProperties( properties ) {\r\n    this.properties = properties;\r\n\r\n    if ( !Array.isArray( this.properties.position ) ) {\r\n      this.properties.position = [ this.properties.position ];\r\n    }\r\n    var self = this;\r\n    for ( var i = 0, l = this.properties.position.length; i < l; i++ ) {\r\n      var pos = GraphPosition.check( this.properties.position[ i ], function(\r\n        relativeTo\r\n      ) {\r\n        return self.getRelativePosition( relativeTo );\r\n      } );\r\n\r\n      this.properties.position[ i ] = pos;\r\n    }\r\n\r\n    this.emit( 'propertiesChanged' );\r\n    return this;\r\n  }\r\n\r\n  getRelativePosition( relativePosition ) {\r\n    var result;\r\n    if ( ( result = /position([0-9]*)/.exec( relativePosition ) ) !== null ) {\r\n      return this.getPosition( result[ 1 ] );\r\n    } else if (\r\n      ( result = /labelPosition([0-9]*)/.exec( relativePosition ) ) !== null\r\n    ) {\r\n      return this.getLabelPosition( result[ 1 ] );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Gets all dumpable properties of the shape\r\n   * @return {Object} properties - The properties object\r\n   */\r\n  getProperties( properties ) {\r\n    return this.properties;\r\n  }\r\n\r\n  /**\r\n   * Sets a property to the shape that is remembered and can be later reexported (or maybe reimported)\r\n   * @param {String} prop - The property to save\r\n   * @param val - The value to save\r\n   * @param [ index = 0 ] - The index of the property array to save the property\r\n   * @return {Shape} The current shape\r\n   */\r\n  setProp( prop, val, index ) {\r\n    this.properties = this.properties || {};\r\n    this.properties[ prop ] = this.properties[ prop ] || [];\r\n    this.properties[ prop ][ index || 0 ] = val;\r\n    this.emit( 'propertyChanged', prop );\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Returns a property of the shape\r\n   * @param {String} prop - The property to retrieve\r\n   * @param [ index = 0 ] - The index of the property array\r\n   */\r\n  getProp( prop, index ) {\r\n\r\n    if ( !Array.isArray( this.properties[ prop ] ) ) {\r\n\r\n      return this.properties[ prop ];\r\n    }\r\n    return ( this.properties[ prop ] || [] )[ index || 0 ];\r\n  }\r\n\r\n  /**\r\n   * Returns all the properties of the shape\r\n   * @param {String} prop - The property to retrieve\r\n   */\r\n  getProps( prop, index ) {\r\n    return this.properties[ prop ] || [];\r\n  }\r\n\r\n  /**\r\n   * Adds a property to the property array\r\n   * @param {String} prop - The property to add\r\n   * @param val - The value to save\r\n   */\r\n  addProp( prop, value ) {\r\n    this.properties[ prop ] = this.properties[ prop ] || [];\r\n    this.properties[ prop ].push( value );\r\n  }\r\n\r\n  /**\r\n   * Resets the property array\r\n   * @param {String} prop - The property to reset\r\n   */\r\n  resetProp( prop ) {\r\n    this.properties[ prop ] = [];\r\n  }\r\n\r\n  /**\r\n   * Sets a DOM property to the shape\r\n   */\r\n  setDom( prop, val, noForce ) {\r\n\r\n    this._cachedDOM = this._cachedDOM || {};\r\n\r\n    if ( this._cachedDOM[ prop ] == val ) {\r\n      return;\r\n    }\r\n\r\n    if ( this._dom ) {\r\n      if ( !noForce || !util.hasSavedAttribute( this._dom, prop ) ) {\r\n        this._dom.setAttribute( prop, val );\r\n        this._cachedDOM[ prop ] = val;\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Sets a DOM property to the shape group\r\n   */\r\n  setDomGroup( prop, val ) {\r\n\r\n    if ( this.simplified ) {\r\n      this._dom.setAttribute( prop, val );\r\n    } else if ( this.group ) {\r\n      this.group.setAttribute( prop, val );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Saves the stroke color\r\n   * @return {Shape} The current shape\r\n   */\r\n  setStrokeColor( color ) {\r\n    this.setProp( 'strokeColor', color );\r\n    this.overwriteSavedProp( 'stroke', color );\r\n    this.applySelectedStyle();\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Returns the stroke color\r\n   * @return {String} The stroke color of the shape\r\n   */\r\n  getStrokeColor() {\r\n    return this.getProp( 'strokeColor' );\r\n  }\r\n\r\n  /**\r\n   * Saves the fill color\r\n   * @param {String} color - The filling color\r\n   * @return {Shape} The current shape\r\n   */\r\n  setFillColor( color ) {\r\n    this.setProp( 'fillColor', color );\r\n    this.overwriteSavedProp( 'fill', color );\r\n    this.applySelectedStyle();\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Returns the fill color\r\n   * @return {String} The fill color of the shape\r\n   */\r\n  getFillColor() {\r\n    return this.getProp( 'fillColor' );\r\n  }\r\n\r\n  /**\r\n   * Saves the opacity of the filling color of the shape\r\n   * @param {Number} opacity - The filling opacity (0 to 1)\r\n   * @return {Shape} The current shape\r\n   */\r\n  setFillOpacity( opacity ) {\r\n    this.setProp( 'fillOpacity', opacity );\r\n    this.overwriteSavedProp( 'fill-opacity', opacity );\r\n    this.applySelectedStyle();\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Saves the stroke width\r\n   * @param {String} width - The stroke width\r\n   * @return {Shape} The current shape\r\n   */\r\n  setStrokeWidth( width ) {\r\n    this.setProp( 'strokeWidth', width );\r\n    this.overwriteSavedProp( 'stroke-width', width );\r\n    this.applySelectedStyle();\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Returns the stroke width\r\n   * @return {String} The stroke width of the shape\r\n   */\r\n  getStrokeWidth() {\r\n    return this.getProp( 'strokeWidth' );\r\n  }\r\n\r\n  /**\r\n   * Saves the stroke dash array\r\n   * @param {String} dasharray - The dasharray string\r\n   * @example shape.setStrokeDasharray(\"5,5,1,4\");\r\n   * shape.applyStyle();\r\n   * @return {Shape} The current shape\r\n   */\r\n  setStrokeDasharray( dasharray ) {\r\n    this.setProp( 'strokeDasharray', dasharray );\r\n    this.overwriteSavedProp( 'stroke-dasharray', dasharray );\r\n    this.applySelectedStyle();\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Sets any extra attributes to the DOM element of the shape\r\n   * @param {Object<String,String>} attributes - An extra attribute array to apply to the shape DOM\r\n   * @example shape.setAttributes( { \"data-bindable\" : true } );\r\n   * shape.applyStyle();\r\n   * @return {Shape} The current shape\r\n   */\r\n  setAttributes( attributes ) {\r\n    this.setProp( 'attributes', attributes );\r\n    return this;\r\n  }\r\n\r\n  overwriteSavedProp( prop, newValue ) {\r\n    util.overwriteDomAttribute( this._dom, prop, newValue );\r\n  }\r\n\r\n  /**\r\n   * Adds an extra attribute to the shape\r\n   * @param {String} attributeName - The name of the attribute\r\n   * @param {String} attributeValue - The value of the attribute\r\n   * @return {Shape} The current shape\r\n   */\r\n  addAttribute( attributeName, attributeValue ) {\r\n    var added = {};\r\n    added[ attributeName ] = attributeValue;\r\n    this.addProp( 'attributes', added );\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Adds a transform property to the shape.\r\n   * @param {String} type - The transform type (\"rotate\", \"transform\" or \"scale\")\r\n   * @param {String} args - The arguments following the transform\r\n   * @return {Shape} The current shape\r\n   */\r\n  addTransform( type, args ) {\r\n    this.addProp( 'transforms', {\r\n      type: type,\r\n      arguments: Array.isArray( args ) ? args : [ args ]\r\n    } );\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Adds a transform property to the shape.\r\n   * @param {Number} angle - The arguments following the transform\r\n   * @param {Number} cx - The arguments following the transform\r\n   * @param {Number} cy - The arguments following the transform\r\n   * @param {String} angleType - Which type of angle should be applied. ```degree``` or ```angleData```\r\n   * @return {Shape} The current shape\r\n   */\r\n  addTransformRotate( angle, cx, cy, angleType = 'degrees' ) {\r\n    this.addProp( 'transforms', {\r\n      type: 'rotate',\r\n      arguments: {\r\n        center: {\r\n          x: cx,\r\n          y: cy\r\n        },\r\n        angle: angle,\r\n        angleType: angleType\r\n      }\r\n    } );\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Resets the transforms\r\n   * @see Shape#addTransform\r\n   * @return {Shape} The current shape\r\n   */\r\n  resetTransforms() {\r\n    this.resetProp( 'transforms' );\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Sets the text of the label\r\n   * @param {String} text - The text of the label\r\n   * @param {Number} [ index = 0 ] - The index of the label\r\n   * @return {Shape} The current shape\r\n   */\r\n  setLabelText( text, index = 0 ) {\r\n    this.setProp( 'labelText', text, index );\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Sets the text of the label\r\n   * @param {String} data - Some additional HTML tags that will be set to the label\r\n   * @param {Number} [ index = 0 ] - The index of the label\r\n   * @return {Shape} The current shape\r\n   */\r\n  setLabelData( data, text, index = 0 ) {\r\n    this.setProp( 'labelData', text, index );\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Returns the text of the label\r\n   * @param {Number} [ index = 0 ] - The index of the label\r\n   * @return {String} The text of the label\r\n   */\r\n  getLabelText( text, index = 0 ) {\r\n    return this.getProp( 'labelText', index );\r\n  }\r\n\r\n  /**\r\n   * Displays a hidden label\r\n   * @param {Number} [ index = 0 ] - The index of the label\r\n   * @return {Shape} The current shape\r\n   */\r\n  displayLabel( index = 0 ) {\r\n    this.setProp( 'labelVisible', true, index );\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Hides a displayed label\r\n   * @param {Number} [ index = 0 ] - The index of the label\r\n   * @return {Shape} The current shape\r\n   */\r\n  hideLabel( index = 0 ) {\r\n    this.setProp( 'labelVisible', false, index );\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Sets the color of the label\r\n   * @param {String} color - The color of the label\r\n   * @param {Number} [ index = 0 ] - The index of the label\r\n   * @return {Shape} The current shape\r\n   */\r\n  setLabelColor( color, index = 0 ) {\r\n    this.setProp( 'labelColor', color, index );\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Sets the font size of the label\r\n   * @param {String} size - The font size (in px) of the label\r\n   * @param {Number} [ index = 0 ] - The index of the label\r\n   * @return {Shape} The current shape\r\n   */\r\n  setLabelFontSize( size, index = 0 ) {\r\n    this.setProp( 'labelFontSize', size, index );\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Returns the position of the label\r\n   * @param {Number} [ index = 0 ] - The index of the label\r\n   * @return {Position} The current position of the label\r\n   */\r\n  getLabelPosition( index = 0 ) {\r\n    return this.getProp( 'labelPosition', index );\r\n  }\r\n\r\n  /**\r\n   * Sets the position of the label\r\n   * @param {Position} position - The position of the label\r\n   * @param {Number} [ index = 0 ] - The index of the label\r\n   * @return {Shape} The current shape\r\n   */\r\n  setLabelPosition( position, index ) {\r\n    var self;\r\n    var pos = GraphPosition.check( position, function( relativeTo ) {\r\n      return self.getRelativePosition( relativeTo );\r\n    } );\r\n\r\n    this.setProp( 'labelPosition', pos, index || 0 );\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Sets the angle of the label\r\n   * @param {Number} angle - The angle of the label in degrees (0 to 360°)\r\n   * @param {Number} [ index = 0 ] - The index of the label\r\n   * @return {Shape} The current shape\r\n   */\r\n  setLabelAngle( angle, index ) {\r\n    this.setProp( 'labelAngle', angle, index || 0 );\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Sets the baseline of the label, which affects its y position with respect to the text direction. For text along the x direction, different baselines will reference differently the text to the ```y``` coordinate.\r\n   * @param {String} baseline - The baseline of the label. Most common baselines are ```no-change```, ```central```, ```middle``` and ```hanging```. You will find an explanation of those significations on the [corresponding MDN article]{@link https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/dominant-baseline}\r\n   * @param {Number} [ index = 0 ] - The index of the label\r\n   * @return {Shape} The current shape\r\n   */\r\n  setLabelBaseline( baseline, index ) {\r\n    this.setProp( 'labelBaseline', baseline, index || 0 );\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Sets the anchoring of the label.\r\n   * @param {String} anchor - The anchor of the label. Values can be ```start```, ```middle```, ```end``` or ```inherit```.\r\n   * @param {Number} [ index = 0 ] - The index of the label\r\n   * @return {Shape} The current shape\r\n   */\r\n  setLabelAnchor( anchor, index ) {\r\n    this.setProp( 'labelAnchor', anchor, index || 0 );\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Sets the anchoring of the label.\r\n   * @param {String} size - The font size in px\r\n   * @param {Number} [ index = 0 ] - The index of the label\r\n   * @return {Shape} The current shape\r\n   */\r\n  setLabelSize( size, index ) {\r\n    this.setProp( 'labelSize', size, index || 0 );\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Sets the color of the stroke of the label.\r\n   * @param {String} color - The color of the stroke\r\n   * @param {Number} [ index = 0 ] - The index of the label\r\n   * @return {Shape} The current shape\r\n   */\r\n  setLabelStrokeColor( color, index ) {\r\n    this.setProp( 'labelStrokeColor', color, index || 0 );\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Sets the width of the stroke of the label.\r\n   * @param {Number} width - The width of the stroke\r\n   * @param {Number} [ index = 0 ] - The index of the label\r\n   * @return {Shape} The current shape\r\n   */\r\n  setLabelStrokeWidth( width, index ) {\r\n    this.setProp( 'labelStrokeWidth', width, index || 0 );\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Sets the color of the background of the label.\r\n   * @param {String} color - The color of the background\r\n   * @param {Number} [ index = 0 ] - The index of the label\r\n   * @return {Shape} The current shape\r\n   */\r\n  setLabelBackgroundColor( color, index ) {\r\n    this.setProp( 'labelBackgroundColor', color, index || 0 );\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Sets the opacity of the background of the label.\r\n   * @param {Number} opacity - The opacity of the background, between 0 and 1\r\n   * @param {Number} [ index = 0 ] - The index of the label\r\n   * @return {Shape} The current shape\r\n   */\r\n  setLabelBackgroundOpacity( opacity, index ) {\r\n    this.setProp( 'labelBackgroundOpacity', opacity, index || 0 );\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Applies the generic style to the shape. This is a method that applies to most shapes, hence should not be overridden. However if you create a bundle of shapes that extend another one, you may use it to set common style properties to all your shapes.\r\n   * @return {Shape} The current shape\r\n   */\r\n  applyGenericStyle() {\r\n    this.setDom( 'fill', this.getProp( 'fillColor' ), true );\r\n    this.setDom( 'fill-opacity', this.getProp( 'fillOpacity' ), true );\r\n    this.setDom( 'stroke', this.getProp( 'strokeColor' ), true );\r\n    this.setDom( 'stroke-width', this.getProp( 'strokeWidth' ), true );\r\n    this.setDom( 'stroke-dasharray', this.getProp( 'strokeDasharray' ), true );\r\n\r\n    var attributes = this.getProps( 'attributes' );\r\n    for ( var j = 0, l = attributes.length; j < l; j++ ) {\r\n      for ( var i in attributes[ j ] ) {\r\n        this.setDom(\r\n          i,\r\n          typeof attributes[ j ][ i ] == 'function' ?\r\n          attributes[ j ][ i ].call( this, i ) :\r\n          attributes[ j ][ i ],\r\n          true\r\n        );\r\n      }\r\n    }\r\n\r\n    this._applyTransforms();\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Applies the style to the shape. This method can be extended to apply specific style to the shapes\r\n   * @return {Shape} The current shape\r\n   */\r\n  applyStyle() {\r\n    return this.applyGenericStyle();\r\n  }\r\n\r\n  /**\r\n   * Returns a computed position object\r\n   * @param {(Number|Position)} [ index = 0 ] - The index of the position to compute\r\n   * @param {Position} relToPosition - A base position from which to compute the position (useful for <code>dx</code> values)\r\n   * @return {Object} The computed position object in the format <code>{ x: x_in_px, y: y_in_px }</code>\r\n   */\r\n  calculatePosition( index ) {\r\n    //   var position = this.getPosition( index );\r\n    var position;\r\n    if ( !( index instanceof GraphPosition ) ) {\r\n\r\n      position = this.getPosition( index );\r\n\r\n    } else {\r\n      position = index;\r\n    }\r\n\r\n    if ( !position ) {\r\n      return;\r\n    }\r\n\r\n    if ( position && position.compute ) {\r\n      return position.compute(\r\n        this.graph,\r\n        this.getXAxis(),\r\n        this.getYAxis(),\r\n        this.getSerie()\r\n      );\r\n    }\r\n\r\n    this.graph.throw();\r\n  }\r\n\r\n  /**\r\n   * Returns a stored position object\r\n   * @param {Number} [ index = 0 ] - The index of the position to compute\r\n   * @return {Position} The position at the proper index, or undefined\r\n   */\r\n  getPosition( index ) {\r\n    var pos = this.getProp( 'position', index || 0 );\r\n    if ( pos == undefined ) {\r\n      return;\r\n    }\r\n    this.setProp( 'position', ( pos = GraphPosition.check( pos ) ), index );\r\n    return pos;\r\n  }\r\n\r\n  /**\r\n   * Sets a position object\r\n   * @param {Position} position - The position object to store\r\n   * @param {Number} [ index = 0 ] - The index of the position to store\r\n   * @return {Shape} The current shape\r\n   */\r\n  setPosition( position, index ) {\r\n    var self = this;\r\n    var pos = GraphPosition.check( position, function( relativeTo ) {\r\n      return self.getRelativePosition( relativeTo );\r\n    } );\r\n\r\n    return this.setProp( 'position', pos, index || 0 );\r\n  }\r\n\r\n  /**\r\n   * Sorts the positions\r\n   * @param {Function} sortFunction - Function passed into the ```Array.sort``` method\r\n   * @return {Position} The current shape\r\n   */\r\n  sortPositions( sortFunction ) {\r\n    this.getProps( 'position' ).sort( sortFunction );\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Applies the style to the shape. This method can be extended to apply specific style to the shapes\r\n   * @private\r\n   * @return {Shape} The current shape\r\n   */\r\n  _applyTransforms() {\r\n    var transforms = this.getProps( 'transforms' ),\r\n      transformString = '';\r\n\r\n    if ( !transforms ) {\r\n      return;\r\n    }\r\n    transforms = Array.isArray( transforms ) ? transforms : [ transforms ];\r\n\r\n    if ( transforms.length == 0 ) {\r\n      return;\r\n    }\r\n\r\n    for ( var i = 0; i < transforms.length; i++ ) {\r\n      transformString += `${transforms[i].type}(`;\r\n\r\n      let transform;\r\n      switch ( transforms[ i ].type ) {\r\n        case 'translate':\r\n          if ( transforms[ i ].arguments ) {\r\n            transform = transforms[ i ].arguments[ 0 ].compute(\r\n              this.graph,\r\n              this.getXAxis(),\r\n              this.getYAxis(),\r\n              this.getSerie()\r\n            );\r\n          } else {\r\n            const value = GraphPosition.check( transforms[ i ].value );\r\n\r\n            transform = value.compute(\r\n              this.graph,\r\n              this.getXAxis(),\r\n              this.getYAxis(),\r\n              this.getSerie()\r\n            );\r\n          }\r\n\r\n          transformString += transform.x || transform.dx || 0;\r\n          transformString += ', ';\r\n          transformString += transform.y || transform.dy || 0;\r\n\r\n          break;\r\n\r\n        case 'rotate':\r\n          let angle;\r\n\r\n          if ( !transforms[ i ].arguments ) {\r\n\r\n            if ( transforms[ i ].angleType == 'angleData' ) {\r\n\r\n              let xAxis, yAxis;\r\n\r\n              if ( !this.serie ) {\r\n                xAxis = this.graph.getXAxis();\r\n                yAxis = this.graph.getYAxis();\r\n              } else {\r\n                xAxis = this.serie.getXAxis();\r\n                yAxis = this.serie.getYAxis();\r\n              }\r\n\r\n              angle = Math.atan( Math.tan( transforms[ i ].angle * Math.PI / 180 ) * xAxis.getRelVal( 1 ) / yAxis.getRelVal( 1 ) ) * 180 / Math.PI;\r\n            } else {\r\n              angle = transforms[ i ].angle;\r\n            }\r\n\r\n            transformString += angle;\r\n\r\n            if ( !transforms[ i ].center ) {\r\n              var p = this.computePosition( 0 );\r\n\r\n              transformString += `, ${p.x}, ${p.y}`;\r\n            } else {\r\n              const posCenter = GraphPosition.check(\r\n                transforms[ i ].center\r\n              ).compute(\r\n                this.graph,\r\n                this.getXAxis(),\r\n                this.getYAxis(),\r\n                this.getSerie()\r\n              );\r\n\r\n              if ( posCenter.x === posCenter.x && posCenter.y === posCenter.y ) {\r\n                transformString += ', ';\r\n                transformString += posCenter.x;\r\n                transformString += ', ';\r\n                transformString += posCenter.y;\r\n\r\n              }\r\n\r\n            }\r\n\r\n          } else {\r\n            transformString += transforms[ i ].arguments[ 0 ];\r\n            transformString += ', ';\r\n\r\n            if ( transforms[ i ].arguments.length == 1 ) {\r\n              var p = this.computePosition( 0 );\r\n              transformString += `${p.x}, ${p.y}`;\r\n            } else {\r\n              transformString += GraphPosition.getDeltaPx(\r\n                transforms[ i ].arguments[ 1 ],\r\n                this.getXAxis()\r\n              ).replace( 'px', '' );\r\n              transformString += ', ';\r\n              transformString += GraphPosition.getDeltaPx(\r\n                transforms[ i ].arguments[ 2 ],\r\n                this.getYAxis()\r\n              ).replace( 'px', '' );\r\n            }\r\n          }\r\n\r\n          break;\r\n      }\r\n\r\n      transformString += ') ';\r\n    }\r\n\r\n    this.setDomGroup( 'transform', transformString );\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Creates all the labels\r\n   * @private\r\n   * @returns {Shape} The current shape\r\n   */\r\n  makeLabels() {\r\n\r\n    if ( this.simplified ) {\r\n      return;\r\n    }\r\n\r\n    this._labels = this._labels || [];\r\n    this._labelsBackground = this._labelsBackground || [];\r\n\r\n    this._labels.map( ( label ) => {\r\n      this.group.removeChild( label );\r\n    } );\r\n\r\n    this._labelsBackground.map( ( bg ) => {\r\n      this.group.removeChild( bg );\r\n    } );\r\n\r\n    this._labels = [];\r\n    this._labelsBackground[ i ] = [];\r\n\r\n    var i = 0;\r\n\r\n    while ( this.getProp( 'labelText', i ) !== undefined ) {\r\n\r\n      if ( !this._labels[ i ] ) {\r\n        this._labels[ i ] = document.createElementNS( this.graph.ns, 'text' );\r\n        this._labels[ i ].setAttribute( 'data-label-i', i );\r\n        this._labels[ i ].jsGraphIsShape = this;\r\n\r\n        this._labelsBackground[ i ] = document.createElementNS(\r\n          this.graph.ns,\r\n          'rect'\r\n        );\r\n        this._labelsBackground[ i ].setAttribute( 'data-label-i', i );\r\n        this._labelsBackground[ i ].jsGraphIsShape = this;\r\n\r\n        this.group.appendChild( this._labelsBackground[ i ] );\r\n        this.group.appendChild( this._labels[ i ] );\r\n\r\n        this._labels[ i ].addEventListener( 'dblclick', ( e ) => {\r\n          e.stopPropagation();\r\n\r\n          this.labelDblClickListener( e );\r\n        } );\r\n\r\n        this._labelsBackground[ i ].addEventListener( 'dblclick', ( e ) => {\r\n          e.stopPropagation();\r\n\r\n          this.labelDblClickListener( e );\r\n        } );\r\n      }\r\n\r\n      if ( !Array.isArray( this.getProp( 'labelText', i ) ) ) {\r\n        //   break;\r\n      }\r\n\r\n      i++;\r\n    }\r\n\r\n    this.updateLabels();\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Determines if the label is editable\r\n   * @param {Number} labelIndex - The index of the label\r\n   * @return {Boolean} ```true``` if the label is editable, ```false``` otherwise\r\n   */\r\n  isLabelEditable( labelIndex ) {\r\n    return this.getProp( 'labelEditable', labelIndex || 0 );\r\n  }\r\n\r\n  /**\r\n   * Applies the label data to the dom object\r\n   * @private\r\n   * @param {Number} labelIndex - The index of the label\r\n   * @returns {Shape} The current shape\r\n   */\r\n  updateLabels() {\r\n    var self = this;\r\n    this._labels = this._labels || [];\r\n\r\n    for ( var i = 0, l = this._labels.length; i < l; i++ ) {\r\n      this._applyLabelData( i );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Applies the label data to the dom object\r\n   * @private\r\n   * @param {Number} labelIndex - The index of the label\r\n   * @returns {Shape} The current shape\r\n   */\r\n  _applyLabelData( labelIndex ) {\r\n    labelIndex = labelIndex || 0;\r\n\r\n    /** Sets the position */\r\n\r\n    var visible = this.getProp( 'labelVisible', labelIndex );\r\n\r\n    if ( visible === false ) {\r\n      this._labels[ labelIndex ].setAttribute( 'display', 'none' );\r\n      this._labelsBackground[ labelIndex ].setAttribute( 'display', 'none' );\r\n      return;\r\n    } else {\r\n      this._labels[ labelIndex ].setAttribute( 'display', 'initial' );\r\n      this._labelsBackground[ labelIndex ].setAttribute( 'display', 'initial' );\r\n    }\r\n\r\n    var position = this.calculatePosition(\r\n      GraphPosition.check( this.getProp( 'labelPosition', labelIndex ) )\r\n    );\r\n\r\n    if (\r\n      !position ||\r\n      isNaN( position.x ) ||\r\n      isNaN( position.y ) ||\r\n      position.y === false ||\r\n      position.x === false\r\n    ) {\r\n      /*console.warn( \"Cannot compute positioning for labelIndex \" + labelIndex + \" with text \" + this.getProp( \"labelText\", labelIndex ) );\r\n      console.log( this, this._labels );\r\n      console.trace();*/\r\n      return;\r\n    }\r\n\r\n    if (\r\n      position.x != 'NaNpx' &&\r\n      !isNaN( position.x ) &&\r\n      position.x !== 'NaN' &&\r\n      position.x !== false\r\n    ) {\r\n      this._labels[ labelIndex ].setAttribute( 'x', position.x );\r\n      this._labels[ labelIndex ].setAttribute( 'y', position.y );\r\n    }\r\n\r\n    /** Sets the angle */\r\n    var currAngle = this.getProp( 'labelAngle', labelIndex ) || 0;\r\n    if ( currAngle != 0 ) {\r\n      var x = this._labels[ labelIndex ].getAttribute( 'x' ),\r\n        y = this._labels[ labelIndex ].getAttribute( 'y' );\r\n\r\n      this._labels[ labelIndex ].setAttribute(\r\n        'transform',\r\n        `rotate(${currAngle} ${x} ${y})`\r\n      );\r\n      //  this._labelsBackground[ labelIndex ].setAttribute( 'transform', 'rotate(' + currAngle + ' ' + x + ' ' + y + ')' );\r\n    }\r\n\r\n    let labelData = this.getProp( 'labelHTMLData', labelIndex ) || {};\r\n\r\n    for ( var i in labelData ) {\r\n      this._labels[ labelIndex ].setAttribute( i, labelData[ i ] );\r\n      this._labelsBackground[ labelIndex ].setAttribute( i, labelData[ i ] );\r\n    }\r\n\r\n    /** Sets the baseline */\r\n    this._labels[ labelIndex ].setAttribute(\r\n      'dominant-baseline',\r\n      this.getProp( 'labelBaseline', labelIndex ) || 'no-change'\r\n    );\r\n\r\n    /** Sets the text */\r\n    this._labels[ labelIndex ].textContent = this.getProp(\r\n      'labelText',\r\n      labelIndex\r\n    );\r\n\r\n    /** Sets the color */\r\n    this._labels[ labelIndex ].setAttribute(\r\n      'fill',\r\n      this.getProp( 'labelColor', labelIndex ) || 'black'\r\n    );\r\n\r\n    /** Sets the size */\r\n    this._labels[ labelIndex ].setAttribute(\r\n      'font-size',\r\n      `${this.getProp('labelSize', labelIndex)}px` || '12px'\r\n    );\r\n\r\n    /** Sets the anchor */\r\n    this._labels[ labelIndex ].setAttribute(\r\n      'text-anchor',\r\n      this._getLabelAnchor( labelIndex )\r\n    );\r\n\r\n    /** Sets the stroke */\r\n    this._labels[ labelIndex ].setAttribute(\r\n      'stroke',\r\n      this.getProp( 'labelStrokeColor', labelIndex ) || 'black'\r\n    );\r\n\r\n    /** Sets the stroke */\r\n    this._labels[ labelIndex ].setAttribute(\r\n      'stroke-width',\r\n      this.getProp( 'labelStrokeWidth', labelIndex ) || `${0}px`\r\n    );\r\n\r\n    this._labels[ labelIndex ].setAttribute( 'stroke-location', 'outside' );\r\n\r\n    let rect = this._labels[ labelIndex ].getBBox();\r\n\r\n    this._labelsBackground[ labelIndex ].setAttribute( 'x', rect.x );\r\n    this._labelsBackground[ labelIndex ].setAttribute( 'y', rect.y );\r\n    this._labelsBackground[ labelIndex ].setAttribute( 'width', rect.width );\r\n    this._labelsBackground[ labelIndex ].setAttribute( 'height', rect.height );\r\n\r\n    this._labelsBackground[ labelIndex ].setAttribute(\r\n      'fill',\r\n      this.getProp( 'labelBackgroundColor' ) || 'transparent'\r\n    );\r\n    this._labelsBackground[ labelIndex ].setAttribute(\r\n      'fill-opacity',\r\n      this.getProp( 'labelBackgroundOpacity' ) || 1\r\n    );\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   *  Temporarily empties the labels, until the next rendering.\r\n   *  This is used when the shape should not be displayed\r\n   *  @returns {Shape} The current shape instance\r\n   */\r\n  emptyLabels() {\r\n    for ( var i = 0, l = this._labels.length; i < l; i++ ) {\r\n      /** Sets the baseline */\r\n      this._labels[ i ].textContent = '';\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Returns the anchor of the label\r\n   * @private\r\n   * @param {Number} labelIndex - The index of the label\r\n   * @returns {String} The anchor in SVG string\r\n   */\r\n  _getLabelAnchor( labelIndex ) {\r\n    var anchor = this.getProp( 'labelAnchor', labelIndex );\r\n    switch ( anchor ) {\r\n      case 'middle':\r\n      case 'start':\r\n      case 'end':\r\n        return anchor;\r\n        break;\r\n\r\n      case 'right':\r\n        return 'end';\r\n        break;\r\n\r\n      case 'left':\r\n        return 'start';\r\n        break;\r\n\r\n      default:\r\n        return 'start';\r\n        break;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Returns the shape selection status\r\n   * @returns {Boolean} true is the shape is selected, false otherwise\r\n   */\r\n  isSelected() {\r\n    return this._selectStatus || false;\r\n  }\r\n\r\n  /**\r\n   * Sets or queries whether the shape can have handles. Even if the property is set to false, the getter can return true if the property ```statichandles``` is true (used when handles never disappear)\r\n   * @param {Boolean} setter - If used, defined if the shape has handles or not\r\n   * @returns {Boolean} true is the shape has handles, false otherwise\r\n   * @example Shape.hasHandles( true ); // Sets that the shape has handles\r\n   * @example Shape.hasHandles( false ); // Sets that the shape has no handles\r\n   * @example Shape.hasHandles( ); // Queries the shape to determine if it has handles or not. Also returns true if handles are static\r\n   */\r\n  hasHandles( setter ) {\r\n    if ( setter !== undefined ) {\r\n      this.setProp( 'handles', setter );\r\n    }\r\n\r\n    return !!this.getProp( 'handles' ) || !!this.getProp( 'staticHandles' );\r\n  }\r\n\r\n  /**\r\n   * Adds shape handles\r\n   * @private\r\n   * @return {Shape} The current shape\r\n   */\r\n  addHandles() {\r\n\r\n    if ( this.simplified ) {\r\n      return;\r\n    }\r\n\r\n    if ( this.isLocked() ) {\r\n      return;\r\n    }\r\n\r\n    if ( !this.handlesInDom ) {\r\n      this.handlesInDom = true;\r\n\r\n      for ( var i = 1; i < this.handles.length; i++ ) {\r\n        if ( this.handles[ i ] ) {\r\n          this.group.appendChild( this.handles[ i ] );\r\n        }\r\n      }\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Remove shape handles\r\n   * @private\r\n   * @return {Shape} The current shape\r\n   */\r\n  removeHandles() {\r\n    this.hideHandles();\r\n    this.handles = [];\r\n  }\r\n\r\n  /**\r\n   * Hide shape handles\r\n   * @private\r\n   * @return {Shape} The current shape\r\n   */\r\n  hideHandles() {\r\n    if ( !this.handlesInDom ) {\r\n      return this;\r\n    }\r\n\r\n    if ( this.simplified ) {\r\n      return;\r\n    }\r\n\r\n    for ( var i = 1; i < this.handles.length; i++ ) {\r\n      this.group.removeChild( this.handles[ i ] );\r\n    }\r\n\r\n    this.handlesInDom = false;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * @protected\r\n   * @return {Boolean} ```true``` if the handles are in the DOM\r\n   */\r\n  areHandlesInDom() {\r\n    return this.handlesInDom;\r\n  }\r\n\r\n  /**\r\n   * Selects the shape. Should only be called from jsGraph main instance\r\n   * @private\r\n   * @param {Boolean} [ mute = false ] - Mutes the method (no event emission)\r\n   * @returns {Shape} the current shape\r\n   */\r\n  _select( mute ) {\r\n    if ( !this.isSelectable() ) {\r\n      return false;\r\n    }\r\n\r\n    // Put on the stack\r\n    this.appendToDom();\r\n    //this.graph.appendShapeToDom( this ); // Put the shape on top of the stack !\r\n\r\n    this._selectStatus = true;\r\n\r\n    this.applySelectedStyle();\r\n\r\n    if ( this.hasHandles() && !this.hasStaticHandles() ) {\r\n      this.addHandles();\r\n      this.setHandles();\r\n    }\r\n\r\n    if ( !mute ) {\r\n      this.graph.emit( 'shapeSelected', this );\r\n    }\r\n  }\r\n\r\n  applySelectedStyle() {\r\n    if ( !this._selectStatus ) {\r\n      return;\r\n    }\r\n\r\n    var style = this.getSelectStyle();\r\n    var style2 = {};\r\n    for ( var i in style ) {\r\n      if ( typeof style[ i ] == 'function' ) {\r\n        style2[ i ] = style[ i ].call( this );\r\n      } else {\r\n        style2[ i ] = style[ i ];\r\n      }\r\n    }\r\n\r\n    util.saveDomAttributes( this._dom, style2, 'select' );\r\n  }\r\n\r\n  /**\r\n   * Unselects the shape. Should only be called from jsGraph main instance\r\n   * @private\r\n   * @param {Boolean} [ mute = false ] - Mutes the method (no event emission)\r\n   * @returns {Shape} the current shape\r\n   */\r\n  _unselect( mute ) {\r\n    this._selectStatus = false;\r\n\r\n    util.restoreDomAttributes( this._dom, 'select' );\r\n\r\n    if ( this.hasHandles() && !this.hasStaticHandles() ) {\r\n      this.hideHandles();\r\n    }\r\n\r\n    if ( !mute ) {\r\n      this.graph.emit( 'shapeUnselected', this );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Returns the special style of the shape when it is selected.\r\n   * @see Shape#setSelectStyle\r\n   * @param {Object<String,String>} The SVG attributes to apply to the shape\r\n   */\r\n  getSelectStyle() {\r\n    return this.selectStyle;\r\n  }\r\n\r\n  /**\r\n   * Defines the style that is applied to the shape when it is selected. The style extends the default style of the shape\r\n   * @param {Object<String,String>} [ attr = {} ] - The SVG attributes to apply to the shape\r\n   * @example rectangle.setSelectStyle( { fill: 'red' } );\r\n   * @returns {Shape} the current shape\r\n   */\r\n  setSelectStyle( attr ) {\r\n    this.selectStyle = attr;\r\n    this.applySelectedStyle(); // Maybe the shape is already selected\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Assigns static handles to the shape. In this mode, handles will not disappear\r\n   * @param {Boolean} staticHandles - true to enable static handles, false to disable them.\r\n   * @returns {Shape} the current shape\r\n   */\r\n  setStaticHandles( staticHandles ) {\r\n    this.setProp( 'staticHandles', staticHandles );\r\n  }\r\n\r\n  /**\r\n   * @returns {Boolean} ```true``` if the shape has static handles, ```false``` otherwise\r\n   */\r\n  hasStaticHandles( staticHandles ) {\r\n    return !!this.getProp( 'staticHandles' );\r\n  }\r\n\r\n  /**\r\n   * Creates the handles for the shape\r\n   * @param {Number} nb - The number of handles\r\n   * @param {String} type - The type of SVG shape to use\r\n   * @param {Object<String,String>} [ attr = {} ] - The SVG attributes to apply to the handles\r\n   * @param {Function} [ callbackEach ] - An additional callback the user can provide to further personalize the handles\r\n   * @returns {Shape} the current shape\r\n   * @private\r\n   */\r\n  _createHandles( nb, type, attr, callbackEach ) {\r\n    if ( this.handles && this.handles.length > 0 ) {\r\n      return;\r\n    }\r\n\r\n    var self = this;\r\n\r\n    for ( var i = 1, l = nb; i <= l; i++ ) {\r\n      ( ( j ) => {\r\n        var self = this;\r\n\r\n        var handle = document.createElementNS( self.graph.ns, type );\r\n        handle.jsGraphIsShape = true;\r\n\r\n        if ( attr ) {\r\n          for ( var k in attr ) {\r\n            handle.setAttribute( k, attr[ k ] );\r\n          }\r\n        }\r\n\r\n        handle.addEventListener( 'mousedown', ( e ) => {\r\n          if ( self.isResizable() ) {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n\r\n            self.graph.emit( 'beforeShapeResize', self );\r\n            this.emit( 'beforeShapeResize' );\r\n\r\n            if ( !self.graph.prevent( false ) ) {\r\n              self.resizing = true;\r\n              self.handleSelected = j;\r\n              self.handleMouseDown( e );\r\n            }\r\n          }\r\n        } );\r\n\r\n        if ( callbackEach ) {\r\n          callbackEach( self.handles[ j ] );\r\n        }\r\n\r\n        self.handles[ j ] = handle;\r\n      } ).call( this, i );\r\n    }\r\n\r\n    return this.handles;\r\n  }\r\n\r\n  /**\r\n   * Creates the handles for the shape. Should be implemented by the children shapes classes.\r\n   */\r\n  createHandles() {\r\n    if ( this.hasStaticHandles() ) {\r\n      this.addHandles();\r\n      this.setHandles();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handles mouse down event\r\n   * @private\r\n   * @param {Event} e - The native event.prototype\r\n   */\r\n  handleMouseDownImpl() {}\r\n\r\n  /**\r\n   * Handles the mouse move event\r\n   * @private\r\n   * @param {Event} e - The native event.prototype\r\n   */\r\n  handleMouseMoveImpl() {}\r\n\r\n  /**\r\n   * Handles mouse up event\r\n   * @private\r\n   * @param {Event} e - The native event.prototype\r\n   */\r\n  handleMouseUpImpl() {}\r\n\r\n  /**\r\n   * Called when the shape is created\r\n   * @private\r\n   * @param {Event} e - The native event.prototype\r\n   */\r\n  handleCreateImpl() {}\r\n\r\n  /**\r\n   * Handles mouse down events\r\n   * @param {Event} e - The native event\r\n   * @return The result of the {@link Shape#handleMouseDownImpl} method.prototype\r\n   */\r\n  handleMouseDown( e ) {\r\n    //this.handleSelected = false;\r\n\r\n    if ( this.isLocked() ) {\r\n      return;\r\n    }\r\n\r\n    if ( this.isMovable() || this.isResizable() ) {\r\n      this.graph.elementMoving( this );\r\n    }\r\n\r\n    if ( this.getProp( 'selectOnMouseDown' ) ) {\r\n      this.graph.selectShape( this );\r\n    }\r\n\r\n    if ( this.isMovable() ) {\r\n      if ( !this.resizing ) {\r\n        this.graph.emit( 'beforeShapeMove', self );\r\n\r\n        if ( !this.graph.prevent( false ) ) {\r\n          this.moving = true;\r\n          this.moved = false;\r\n        }\r\n      }\r\n    }\r\n\r\n    this._mouseCoords = this.graph._getXY( e );\r\n    return this.handleMouseDownImpl( e, this._mouseCoords );\r\n  }\r\n\r\n  /**\r\n   * Handles mouse click events\r\n   * @param {Event} e - The native event\r\n   * @return The result of the {@link Shape#handleMouseDownClick} method\r\n   * @private\r\n   */\r\n  handleClick( e ) {\r\n    this.graph.emit( 'shapeClicked', this );\r\n    this.emit( 'shapeClicked' );\r\n\r\n    if ( !this.isSelectable() ) {\r\n      return false;\r\n    }\r\n\r\n    if ( !e.shiftKey ) {\r\n      this.graph.unselectShapes();\r\n    }\r\n\r\n    if ( this.getProp( 'selectOnClick' ) ) {\r\n      this.graph.selectShape( this );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handles mouse click events\r\n   * @param {Event} e - The native event\r\n   * @return The result of the {@link Shape#handleMouseUpImpl} method\r\n   * @private\r\n   */\r\n  handleMouseMove( e ) {\r\n    if ( ( this.resizing || this.moving ) && !this.isSelected() ) {\r\n      this.graph.selectShape( this );\r\n    }\r\n\r\n    this.graph.emit( 'beforeShapeMouseMove', this );\r\n    this.emit( 'beforeShapeMouseMove' );\r\n\r\n    if ( this.graph.prevent( false ) || !this._mouseCoords ) {\r\n      return false;\r\n    }\r\n\r\n    this.moved = true;\r\n    var coords = this.graph._getXY( e );\r\n    var deltaX = this.getXAxis().getRelVal( coords.x - this._mouseCoords.x ),\r\n      deltaY = this.getYAxis().getRelVal( coords.y - this._mouseCoords.y );\r\n\r\n    if ( deltaX != 0 || deltaY !== 0 ) {\r\n      this.preventUnselect = true;\r\n    }\r\n\r\n    this._mouseCoords = coords;\r\n\r\n    var ret = this.handleMouseMoveImpl(\r\n      e,\r\n      deltaX,\r\n      deltaY,\r\n      coords.x - this._mouseCoords.x,\r\n      coords.y - this._mouseCoords.y\r\n    );\r\n\r\n    return ret;\r\n  }\r\n\r\n  /**\r\n   * Handles mouse up events\r\n   * @param {Event} e - The native event\r\n   * @return The result of the {@link Shape#handleMouseUpImpl} method\r\n   * @private\r\n   */\r\n  handleMouseUp( e ) {\r\n    if ( this.moving && this.moved ) {\r\n      this.graph.emit( 'shapeMoved', this );\r\n      this.emit( 'shapeMoved' );\r\n    }\r\n\r\n    if ( this.handleSelected || this.resize ) {\r\n      this.graph.emit( 'shapeResized', this );\r\n      this.emit( 'shapeResized' );\r\n    }\r\n\r\n    this.moving = false;\r\n    this.resizing = false;\r\n    this.handleSelected = false;\r\n    this.graph.elementMoving( false );\r\n\r\n    return this.handleMouseUpImpl( e );\r\n  }\r\n\r\n  /**\r\n   * Handles double click events\r\n   * @param {Event} e - The native event\r\n   * @return The result of the {@link Shape#handleMouseDblClickImpl} method\r\n   * @private\r\n   */\r\n  handleDblClick( e ) {}\r\n\r\n  /**\r\n   * Handles mouse over events\r\n   * @param {Event} e - The native event\r\n   * @return The result of the {@link Shape#handleMouseOverImpl} method\r\n   * @private\r\n   */\r\n  handleMouseOver() {\r\n    if ( this.getProp( 'highlightOnMouseOver' ) ) {\r\n      if ( !this.moving && !this.resizing ) {\r\n        this.highlight();\r\n      }\r\n    }\r\n\r\n    this.graph.emit( 'shapeMouseOver', this );\r\n  }\r\n\r\n  /**\r\n   * Handles mouse out events\r\n   * @param {Event} e - The native event\r\n   * @return The result of the {@link Shape#handleMouseOutImpl} method\r\n   * @private\r\n   */\r\n  handleMouseOut() {\r\n    if ( this.getProp( 'highlightOnMouseOver' ) ) {\r\n      this.unHighlight();\r\n    }\r\n\r\n    this.graph.emit( 'shapeMouseOut', this );\r\n  }\r\n\r\n  /*\r\n   *  Updated July 1st, 2015\r\n   */\r\n\r\n  /**\r\n   * Locks the shape (prevents selection, resizing and moving)\r\n   * @return {Shape} The current shape\r\n   */\r\n  lock() {\r\n    this.setProp( 'locked', true );\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Unlocks the shape (prevents selection, resizing and moving)\r\n   * @return {Shape} The current shape\r\n   */\r\n  unlock() {\r\n    this.setProp( 'locked', false );\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * @return {Boolean} True if the shape is locked, false otherwise\r\n   */\r\n  isLocked() {\r\n    return this.getProp( 'locked' ) || this.graph.shapesLocked;\r\n  }\r\n\r\n  /**\r\n   * Makes the shape moveable\r\n   * @return {Shape} The current shape\r\n   */\r\n  movable( bln ) {\r\n    this.setProp( 'movable', true );\r\n  }\r\n\r\n  /**\r\n   * Makes the shape non-moveable\r\n   * @return {Shape} The current shape\r\n   */\r\n  unmovable() {\r\n    this.setProp( 'movable', false );\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * @return {Boolean} True if the shape is movable, false otherwise\r\n   */\r\n  isMovable() {\r\n    return this.getProp( 'movable' );\r\n  }\r\n\r\n  /**\r\n   * Makes the shape resizable\r\n   * @return {Shape} The current shape\r\n   */\r\n  resizable() {\r\n    this.setProp( 'resizable', true );\r\n  }\r\n\r\n  /**\r\n   * Makes the shape non-resizable\r\n   * @return {Shape} The current shape\r\n   */\r\n  unresizable() {\r\n    this.setProp( 'resizable', false );\r\n  }\r\n\r\n  /**\r\n   * @return {Boolean} True if the shape is resizable, false otherwise\r\n   */\r\n  isResizable() {\r\n    return this.getProp( 'resizable' );\r\n  }\r\n\r\n  /**\r\n   * Makes the shape selectable\r\n   * @return {Shape} The current shape\r\n   */\r\n  selectable() {\r\n    this.setProp( 'selectable', true );\r\n  }\r\n\r\n  /**\r\n   * Makes the shape non-selectable\r\n   * @return {Shape} The current shape\r\n   */\r\n  unselectable() {\r\n    this.graph.unselectShape( this );\r\n    this.setProp( 'selectable', false );\r\n  }\r\n\r\n  /**\r\n   * @return {Boolean} True if the shape is selectable, false otherwise\r\n   */\r\n  isSelectable() {\r\n    return this.getProp( 'selectable' );\r\n  }\r\n\r\n  /**\r\n   * Highlights the shape with attributes\r\n   * @returns {Shape} The current shape\r\n   * @param {Object<String,String>} [ attributes ] - A hashmap of attributes to apply. If omitted, {@link Shape#getHighlightAttributes} will be called\r\n   * @param {String} [ saveDomName=highlight ] - The name to which the current shape attributes will be saved to be recovered later with the {@link Shape#unHighlight} method\r\n   * @example shape.highlight( { fill: 'red', 'fill-opacity': 0.5 } );\r\n   * @see Shape#unHighlight\r\n   */\r\n  highlight( attributes, saveDomName ) {\r\n    if ( !attributes ) {\r\n      attributes = this.getHighlightAttributes();\r\n    }\r\n\r\n    if ( !saveDomName ) {\r\n      saveDomName = 'highlight';\r\n    }\r\n\r\n    util.saveDomAttributes( this._dom, attributes, saveDomName );\r\n    this.highlightImpl();\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Removes the highlight properties from the same\r\n   * @returns {Shape} The current shape\r\n   * @param {String} [ saveDomName=highlight ] - The name to which the current shape attributes will be saved to be recovered later with the {@link Shape#unHighlight} method\r\n   * @see Shape#highlight\r\n   */\r\n  unHighlight( saveDomName ) {\r\n    if ( !saveDomName ) {\r\n      saveDomName = 'highlight';\r\n    }\r\n\r\n    util.restoreDomAttributes( this._dom, saveDomName );\r\n    this.unHighlightImpl();\r\n    return this;\r\n  }\r\n\r\n  highlightImpl() {}\r\n  unHighlightImpl() {}\r\n\r\n  /**\r\n   * @returns {Object} The attributes taken by the shape when highlighted\r\n   * @see Shape#highlight\r\n   */\r\n  getHighlightAttributes() {\r\n    return this._highlightAttributes;\r\n  }\r\n\r\n  /**\r\n   * Sets the attributes the shape will take when highlighted\r\n   * @param {Object<String,String>} [ attributes ] - A hashmap of attributes to apply when the shape is highlighted\r\n   * @returns {Shape} The current shape\r\n   * @see Shape#highlight\r\n   */\r\n  setHighlightAttributes( attributes ) {\r\n    this._highlightAttributes = attributes;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Returns the masking id of the shape. Returns null if the shape does not behave as a mask\r\n   * @returns {String} The ```id``` attribute of the shape\r\n   */\r\n  getMaskingID() {\r\n    return this.maskingId;\r\n  }\r\n\r\n  /**\r\n   * Masks the current shape with another shape passed as the first parameter of the method\r\n   * @param {Shape} maskingShape - The shape used to mask the current shape\r\n   * @return {Shape} The current shape\r\n   */\r\n  maskWith( maskingShape ) {\r\n    const maskingId = maskingShape.getMaskingID();\r\n\r\n    if ( maskingId ) {\r\n      this._dom.setAttribute( 'mask', `url(#${maskingId})` );\r\n    } else {\r\n      this._dom.removeAttribute( 'mask' );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Manually updates the mask of the shape. This is needed because the shape needs to be surrounded by a white rectangle (because transparent is treated as black and will not render the shape)\r\n   * This method will work well for rectangles but should be overridden for other shapes\r\n   * @return {Shape} The current shape\r\n   * @todo Explore a way to make it compatible for all kinds of shapes. Maybe the masker position should span the whole graph...\r\n   */\r\n  updateMask() {\r\n    return;\r\n    if ( !this.maskDom ) {\r\n      return; // eslint-disable-line no-useless-return\r\n    }\r\n\r\n    var position = {\r\n      x: 'min',\r\n      y: 'min'\r\n    };\r\n    var position2 = {\r\n      x: 'max',\r\n      y: 'max'\r\n    };\r\n\r\n    position = this._getPosition( position );\r\n    position2 = this._getPosition( position2 );\r\n\r\n    this.maskDomWrapper.setAttribute( 'x', Math.min( position.x, position2.x ) );\r\n    this.maskDomWrapper.setAttribute( 'y', Math.min( position.y, position2.y ) );\r\n\r\n    this.maskDomWrapper.setAttribute(\r\n      'width',\r\n      Math.abs( position2.x - position.x )\r\n    );\r\n    this.maskDomWrapper.setAttribute(\r\n      'height',\r\n      Math.abs( position2.y - position.y )\r\n    );\r\n\r\n    for ( var i = 0; i < this._dom.attributes.length; i++ ) {\r\n      this.maskDom.setAttribute(\r\n        this._dom.attributes[ i ].name,\r\n        this._dom.attributes[ i ].value\r\n      );\r\n    }\r\n\r\n    this.maskDom.setAttribute( 'fill', 'black' );\r\n\r\n    return this;\r\n  }\r\n\r\n  labelDblClickListener( e ) {\r\n    var i = parseInt( e.target.getAttribute( 'data-label-i' ) );\r\n\r\n    var self = this;\r\n\r\n    if ( isNaN( i ) ) {\r\n      return;\r\n    }\r\n\r\n    if ( !this.isLabelEditable( i ) ) {\r\n      return;\r\n    }\r\n\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n\r\n    var shapeLabel = document.createElement( 'input' );\r\n    shapeLabel.setAttribute( 'type', 'text' );\r\n    shapeLabel.setAttribute( 'value', self.getProp( 'labelText', i ) );\r\n\r\n    self.graph.wrapper.prepend( shapeLabel );\r\n    shapeLabel.select();\r\n\r\n    util.setCSS( shapeLabel, {\r\n      position: 'absolute',\r\n      marginTop: `${parseInt(e.target.getAttribute('y').replace('px', '')) +\r\n        this.graph.getPaddingTop() -\r\n        10}px`,\r\n      marginLeft: `${parseInt(e.target.getAttribute('x').replace('px', '')) +\r\n        this.graph.getPaddingLeft() -\r\n        50}px`,\r\n      textAlign: 'center',\r\n      width: '100px'\r\n    } );\r\n\r\n    const previousValue = self.getLabelText( i );\r\n\r\n    const blurEvent = function() {\r\n      self.setLabelText( shapeLabel.value, i );\r\n      self._labels[ i ].textContent = shapeLabel.value;\r\n\r\n      const nextValue = shapeLabel.value;\r\n\r\n      shapeLabel.remove();\r\n      shapeLabel.removeEventListener( 'blur', blurEvent );\r\n      shapeLabel = false;\r\n\r\n      self.changed( 'shapeLabelChanged', {\r\n        previousValue: previousValue,\r\n        nextValue: nextValue\r\n      } );\r\n    };\r\n\r\n    shapeLabel.addEventListener( 'blur', blurEvent );\r\n\r\n    shapeLabel.addEventListener( 'keyup', function( e ) {\r\n      if ( e.keyCode === 13 ) {\r\n        blurEvent();\r\n      }\r\n    } );\r\n    shapeLabel.addEventListener( 'keypress', function( e ) {\r\n      e.stopPropagation();\r\n    } );\r\n    shapeLabel.addEventListener( 'keydown', function( e ) {\r\n      e.stopPropagation();\r\n    } );\r\n    shapeLabel.focus();\r\n  }\r\n\r\n  /**\r\n   * Appends the shape DOM to its parent\r\n   * @private\r\n   * @return {Shape} The current shape\r\n   */\r\n  appendToDom() {\r\n    if ( this._forcedParentDom ) {\r\n      this._forcedParentDom.appendChild( this.group );\r\n    } else {\r\n      this.graph.appendShapeToDom( this );\r\n    }\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Forces the DOM parent (instead of the normal layer)\r\n   * @return {Shape} The current shape\r\n   */\r\n  forceParentDom( dom ) {\r\n    this._forcedParentDom = dom;\r\n\r\n    return this;\r\n  }\r\n\r\n  isHTML() {\r\n    return false;\r\n  }\r\n}\r\n\r\n/**\r\n * @alias Shape#calculatePosition\r\n */\r\nShape.prototype.computePosition = Shape.prototype.calculatePosition;\r\n\r\n/**\r\n * @alias Shape#displayLabel\r\n */\r\nShape.prototype.showLabel = Shape.prototype.displayLabel;\r\n\r\n/**\r\n * @alias Shape#kill\r\n */\r\nShape.prototype.remove = Shape.prototype.kill;\r\n\r\nEventMixin( Shape, 'shape' );\r\n\r\nexport default Shape;","import Shape from './graph.shape.js';\r\n\r\n/**\r\n *  Displays a surface under a line serie\r\n *  @extends GraphShape\r\n */\r\nclass ShapeSurfaceUnderCurve extends Shape {\r\n\r\n  createDom() {\r\n    this._dom = document.createElementNS( this.graph.ns, 'path' );\r\n  }\r\n\r\n  createHandles() {\r\n\r\n    this._createHandles( 2, 'line', {\r\n      'stroke-width': '3',\r\n      'stroke': 'transparent',\r\n      'pointer-events': 'stroke',\r\n      'cursor': 'ew-resize'\r\n    } );\r\n\r\n  }\r\n\r\n  handleMouseMoveImpl( e, deltaX, deltaY ) {\r\n\r\n    if ( this.isLocked() ) {\r\n      return;\r\n    }\r\n\r\n    if ( this.moving ) {\r\n\r\n      this.getPosition( 0 ).deltaPosition( 'x', deltaX, this.getXAxis() );\r\n      this.getPosition( 1 ).deltaPosition( 'x', deltaX, this.getXAxis() );\r\n\r\n    } else if ( this.serie && this.handleSelected ) {\r\n\r\n      this.resizingPosition = this.handleSelected == 1 ? this.getPosition( 0 ) : this.getPosition( 1 );\r\n\r\n      var value = this.serie.getClosestPointToXY( this.getXAxis().getVal( this.graph._getXY( e ).x - this.graph.getPaddingLeft() ) );\r\n\r\n      if ( !value ) {\r\n        return;\r\n      }\r\n\r\n      if ( this.resizingPosition.x != value.xMin ) {\r\n        this.preventUnselect = true;\r\n      }\r\n\r\n      this.resizingPosition.x = value.xMin;\r\n\r\n    } else if ( this.handleSelected ) {\r\n\r\n      this.resizingPosition = this.handleSelected == 1 ? this.getPosition( 0 ) : this.getPosition( 1 );\r\n      this.resizingPosition.deltaPosition( 'x', deltaX, this.getXAxis() );\r\n    }\r\n\r\n    this.applyPosition();\r\n  }\r\n  /*\r\n      redrawImpl: function() {\r\n        //var doDraw = this.setPosition();\r\n        //\tthis.setDom('fill', 'url(#' + 'patternFill' + this.graph._creation + ')')\r\n\r\n        if ( this.position != this.doDraw ) {\r\n          this.group.setAttribute( \"visibility\", this.position ? \"visible\" : 'hidden' );\r\n          this.doDraw = this.position;\r\n        }\r\n      },\r\n  */\r\n  applyPosition() {\r\n\r\n    if ( !this.serie ) {\r\n      return;\r\n    }\r\n\r\n    var posXY = this.computePosition( 0 ),\r\n      posXY2 = this.computePosition( 1 ),\r\n      w = Math.abs( posXY.x - posXY2.x ),\r\n      x = Math.min( posXY.x, posXY2.x );\r\n\r\n    //  this.reversed = x == posXY2.x;\r\n\r\n    if ( w < 2 || x + w < 0 || x > this.graph.getDrawingWidth() ) {\r\n      this.setDom( 'd', '' );\r\n      return false;\r\n    }\r\n\r\n    var v1 = this.serie.getClosestPointToXY( this.getPosition( 0 ).x ),\r\n      v2 = this.serie.getClosestPointToXY( this.getPosition( 1 ).x ),\r\n      v3,\r\n      i,\r\n      j,\r\n      init,\r\n      max,\r\n      k,\r\n      x,\r\n      y,\r\n      firstX,\r\n      firstY,\r\n      currentLine,\r\n      maxY = 0,\r\n      minY = Number.MAX_VALUE;\r\n\r\n    if ( !v1 || !v2 ) {\r\n      return false;\r\n    }\r\n\r\n    if ( v1.xBeforeIndex > v2.xBeforeIndex ) {\r\n      v3 = v1;\r\n      v1 = v2;\r\n      v2 = v3;\r\n\r\n      //this.handleSelected = ( this.handleSelected == 1 ) ? 2 : 1;\r\n    }\r\n\r\n    this.counter = 0;\r\n\r\n    for ( i = v1.dataIndex; i <= v2.dataIndex; i++ ) {\r\n      this.currentLine = '';\r\n      init = i == v1.dataIndex ? v1.xBeforeIndexArr : 0;\r\n      max = i == v2.dataIndex ? v2.xBeforeIndexArr : this.serie.data[ i ].length;\r\n      k = 0;\r\n\r\n      if ( init == max ) {\r\n        max++;\r\n      }\r\n\r\n      for ( j = init; j <= max; j += 2 ) {\r\n\r\n        x = this.serie.getX( this.serie.data[ i ][ j + 0 ] );\r\n        y = this.serie.getY( this.serie.data[ i ][ j + 1 ] );\r\n\r\n        maxY = Math.max( this.serie.data[ i ][ j + 1 ], maxY );\r\n        minY = Math.min( this.serie.data[ i ][ j + 1 ], minY );\r\n\r\n        if ( j == init ) {\r\n          this.firstX = x;\r\n          this.firstY = y;\r\n        }\r\n\r\n        if ( k > 0 ) {\r\n          this.currentLine += ` L ${ x } ${ y } `;\r\n        } else {\r\n          this.currentLine += ` M ${ x } ${ y } `;\r\n        }\r\n\r\n        //this.serie._addPoint( x, y, false, this.currentLine );\r\n        k++;\r\n\r\n      }\r\n\r\n      this.lastX = x;\r\n      this.lastY = y;\r\n\r\n      if ( !this.firstX || !this.firstY || !this.lastX || !this.lastY ) {\r\n        return;\r\n      }\r\n\r\n      this.currentLine += ` V ${ this.getYAxis().getPx( 0 ) } H ${ this.firstX } z`;\r\n      this.setDom( 'd', this.currentLine );\r\n    }\r\n\r\n    this.maxY = this.serie.getY( maxY );\r\n    this.setHandles();\r\n\r\n    this.changed();\r\n\r\n    return true;\r\n  }\r\n\r\n  setHandles() {\r\n\r\n    if ( !this.firstX ) {\r\n      return;\r\n    }\r\n\r\n    var posXY = this.computePosition( 0 ),\r\n      posXY2 = this.computePosition( 1 );\r\n\r\n    if ( posXY.x < posXY2.x ) {\r\n\r\n      this.handles[ 1 ].setAttribute( 'x1', this.firstX );\r\n      this.handles[ 1 ].setAttribute( 'x2', this.firstX );\r\n\r\n      this.handles[ 2 ].setAttribute( 'x1', this.lastX );\r\n      this.handles[ 2 ].setAttribute( 'x2', this.lastX );\r\n\r\n    } else {\r\n\r\n      this.handles[ 1 ].setAttribute( 'x1', this.lastX );\r\n      this.handles[ 1 ].setAttribute( 'x2', this.lastX );\r\n\r\n      this.handles[ 2 ].setAttribute( 'x1', this.firstX );\r\n      this.handles[ 2 ].setAttribute( 'x2', this.firstX );\r\n\r\n    }\r\n    this.handles[ 1 ].setAttribute( 'y1', this.getYAxis().getMaxPx() );\r\n    this.handles[ 1 ].setAttribute( 'y2', this.serie.getY( 0 ) );\r\n\r\n    this.handles[ 2 ].setAttribute( 'y1', this.getYAxis().getMaxPx() );\r\n    this.handles[ 2 ].setAttribute( 'y2', this.serie.getY( 0 ) );\r\n  }\r\n}\r\n\r\nexport default ShapeSurfaceUnderCurve;","import GraphShape from './graph.shape.js';\r\n\r\n/**\r\n * Represents a line\r\n * @extends Shape\r\n * @see Graph#newShape\r\n */\r\nclass ShapeLine extends GraphShape {\r\n  constructor( graph, options ) {\r\n    super( graph, options );\r\n  }\r\n\r\n  /**\r\n   * Creates the DOM\r\n   * @private\r\n   * @return {Shape} The current shape\r\n   */\r\n  createDom() {\r\n    this._dom = document.createElementNS( this.graph.ns, 'line' );\r\n\r\n    if ( !this.getStrokeColor() ) {\r\n      this.setStrokeColor( 'black' );\r\n    }\r\n\r\n    if ( this.getStrokeWidth() === undefined ) {\r\n      this.setStrokeWidth( 1 );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Creates the handles\r\n   * @private\r\n   * @return {Shape} The current shape\r\n   */\r\n  createHandles() {\r\n    this._createHandles( 2, 'rect', {\r\n      transform: 'translate(-3 -3)',\r\n      width: 6,\r\n      height: 6,\r\n      stroke: 'black',\r\n      fill: 'white',\r\n      cursor: 'nwse-resize'\r\n    } );\r\n  }\r\n\r\n  /**\r\n   * Recalculates the positions and applies them\r\n   * @private\r\n   * @return {Boolean} Whether the shape should be redrawn\r\n   */\r\n  applyPosition() {\r\n    var position = this.calculatePosition( 0 );\r\n    var position2 = this.calculatePosition( 1 );\r\n\r\n    if ( !position || !position.x || !position.y ) {\r\n      return;\r\n    }\r\n\r\n    this.setDom( 'x2', position.x );\r\n    this.setDom( 'y2', position.y );\r\n\r\n    this.setDom( 'y1', position2.y );\r\n    this.setDom( 'x1', position2.x );\r\n\r\n    this.currentPos2x = position2.x;\r\n    this.currentPos2y = position2.y;\r\n\r\n    this.currentPos1x = position.x;\r\n    this.currentPos1y = position.y;\r\n\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Handles mouse move events\r\n   * @private\r\n   */\r\n  handleMouseMoveImpl( e, deltaX, deltaY, deltaXPx, deltaYPx ) {\r\n    if ( this.isLocked() ) {\r\n      return;\r\n    }\r\n\r\n    var pos = this.getPosition( 0 );\r\n    var pos2 = this.getPosition( 1 );\r\n\r\n    var posToChange;\r\n    if ( this.handleSelected == 1 ) {\r\n      posToChange = pos;\r\n    } else if ( this.handleSelected == 2 ) {\r\n      posToChange = pos2;\r\n    }\r\n\r\n    if ( posToChange ) {\r\n      if ( !this._data.vertical ) {\r\n        posToChange.deltaPosition( 'x', deltaX, this.getXAxis() );\r\n      }\r\n\r\n      if ( !this._data.horizontal ) {\r\n        posToChange.deltaPosition( 'y', deltaY, this.getYAxis() );\r\n      }\r\n    }\r\n\r\n    if ( this.moving ) {\r\n      console.log( this._data );\r\n      // If the pos2 is defined by a delta, no need to move them\r\n      if ( pos.x && !this._data.noX ) {\r\n        pos.deltaPosition( 'x', deltaX, this.getXAxis() );\r\n      }\r\n      if ( pos.y && !this._data.noY ) {\r\n        pos.deltaPosition( 'y', deltaY, this.getYAxis() );\r\n      }\r\n\r\n      // If the pos2 is defined by a delta, no need to move them\r\n      if ( pos2.x && !this._data.noX ) {\r\n        pos2.deltaPosition( 'x', deltaX, this.getXAxis() );\r\n      }\r\n      if ( pos2.y && !this._data.noY ) {\r\n        pos2.deltaPosition( 'y', deltaY, this.getYAxis() );\r\n      }\r\n    }\r\n\r\n    if ( this._data.forcedCoords ) {\r\n      var forced = this._data.forcedCoords;\r\n\r\n      if ( forced.y !== undefined ) {\r\n        if ( typeof forced.y == 'function' ) {\r\n          pos2.y = pos.y = forced.y( this );\r\n        } else {\r\n          pos2.y = forced.y;\r\n          pos.y = forced.y;\r\n        }\r\n      }\r\n\r\n      if ( forced.x !== undefined ) {\r\n        if ( typeof forced.x == 'function' ) {\r\n          pos2.x = pos.x = forced.x( this );\r\n        } else {\r\n          pos2.x = forced.x;\r\n          pos.x = forced.x;\r\n        }\r\n      }\r\n    }\r\n\r\n    if ( this.rectEvent ) {\r\n      this.setEventReceptacle();\r\n    }\r\n\r\n    this.redraw();\r\n    this.changed();\r\n    this.setHandles();\r\n\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Sets the handle position\r\n   * @private\r\n   */\r\n  setHandles() {\r\n    if ( !this.areHandlesInDom() ) {\r\n      return;\r\n    }\r\n\r\n    if ( isNaN( this.currentPos1x ) ) {\r\n      return;\r\n    }\r\n\r\n    this.handles[ 1 ].setAttribute( 'x', this.currentPos1x );\r\n    this.handles[ 1 ].setAttribute( 'y', this.currentPos1y );\r\n\r\n    this.handles[ 2 ].setAttribute( 'x', this.currentPos2x );\r\n    this.handles[ 2 ].setAttribute( 'y', this.currentPos2y );\r\n  }\r\n\r\n  /**\r\n   * Creates an line receptacle with the coordinates of the line, but continuous and thicker\r\n   * @return {Shape} The current shape\r\n   */\r\n  setEventReceptacle() {\r\n    if ( !this.currentPos1x ) {\r\n      return;\r\n    }\r\n\r\n    if ( !this.rectEvent ) {\r\n      this.rectEvent = document.createElementNS( this.graph.ns, 'line' );\r\n      this.rectEvent.setAttribute( 'pointer-events', 'stroke' );\r\n      this.rectEvent.setAttribute( 'stroke', 'transparent' );\r\n      this.rectEvent.jsGraphIsShape = this;\r\n      this.group.appendChild( this.rectEvent );\r\n    }\r\n\r\n    this.rectEvent.setAttribute( 'x1', this.currentPos1x );\r\n    this.rectEvent.setAttribute( 'y1', this.currentPos1y );\r\n    this.rectEvent.setAttribute( 'x2', this.currentPos2x );\r\n    this.rectEvent.setAttribute( 'y2', this.currentPos2y );\r\n    this.rectEvent.setAttribute(\r\n      'stroke-width',\r\n      this.getProp( 'strokeWidth' ) + 2\r\n    );\r\n  }\r\n}\r\n\r\nexport default ShapeLine;","import ShapeLine from './graph.shape.line.js';\r\n\r\n/**\r\n *  Displays an arrow\r\n *  @extends GraphShapeLine\r\n */\r\nclass ShapeArrow extends ShapeLine {\r\n\r\n  constructor( graph ) {\r\n\r\n    super( graph );\r\n\r\n  }\r\n\r\n  createDom() {\r\n\r\n    this._dom = document.createElementNS( this.graph.ns, 'line' );\r\n    this._dom.setAttribute( 'marker-end', `url(#arrow${ this.graph._creation })` );\r\n\r\n    this.createHandles( this.nbHandles, 'rect', {\r\n      transform: 'translate(-3 -3)',\r\n      width: 6,\r\n      height: 6,\r\n      stroke: 'black',\r\n      fill: 'white',\r\n      cursor: 'nwse-resize'\r\n    } );\r\n\r\n    this.setStrokeColor( 'black' );\r\n    this.setStrokeWidth( 1 );\r\n  }\r\n}\r\n\r\nexport default ShapeArrow;","import * as util from '../graph.util.js';\r\n\r\nimport Shape from './graph.shape.js';\r\n\r\n/**\r\n * Displays an ellipse\r\n * @extends Shape\r\n */\r\nclass ShapeEllipse extends Shape {\r\n\r\n  constructor( graph, options ) {\r\n    super( graph, options );\r\n  }\r\n\r\n  createDom() {\r\n    this._dom = document.createElementNS( this.graph.ns, 'ellipse' );\r\n  }\r\n\r\n  applyPosition() {\r\n\r\n    var pos = this.computePosition( 0 );\r\n    if ( !pos ) {\r\n      return;\r\n    }\r\n    this.setDom( 'cx', pos.x || 0 );\r\n    this.setDom( 'cy', pos.y || 0 );\r\n\r\n    let posR = this.graph.newPosition( {\r\n\r\n      dx: this.getProp( 'rx' ),\r\n      dy: this.getProp( 'ry' ) || this.getProp( 'rx' )\r\n\r\n    } );\r\n\r\n    let posComputed = this.calculatePosition( posR );\r\n\r\n    this.setDom( 'rx', Math.abs( posComputed.x ) || 0 );\r\n    this.setDom( 'ry', Math.abs( posComputed.y ) || 0 );\r\n    return true;\r\n  }\r\n\r\n  setR( rx, ry ) {\r\n    this.setProp( 'rx', rx );\r\n    this.setProp( 'ry', ry );\r\n    return this;\r\n  }\r\n\r\n  handleMouseUpImpl() {\r\n    this.triggerChange();\r\n  }\r\n\r\n  handleMouseMoveImpl( e, deltaX, deltaY, deltaXPx, deltaYPx ) {\r\n\r\n  }\r\n}\r\n\r\nexport default ShapeEllipse;","import GraphShape from './graph.shape.js';\r\n\r\n/**\r\n * Blank shape used to display label\r\n * Use myShapelabel.setLabelText(); and associated methods\r\n * @extend GraphShape\r\n */\r\nclass ShapeLabel extends GraphShape {\r\n\r\n  constructor( graph, options ) {\r\n\r\n    super( graph, options );\r\n  }\r\n\r\n  createDom() {\r\n    return false;\r\n  }\r\n\r\n  applyPosition() {\r\n    return true;\r\n  }\r\n}\r\n\r\nexport default ShapeLabel;","import Shape from './graph.shape.js';\r\n\r\n/**\r\n * Represents a line that extends the Shape class. Used by the plugin {@link PluginSerieLineDifference}\r\n * @extends Shape\r\n * @see Graph#newShape\r\n */\r\nclass ShapePolyline extends Shape {\r\n\r\n  constructor( graph, options ) {\r\n    super( graph, options );\r\n\r\n    this.setProp( 'fillColor', 'none' );\r\n  }\r\n\r\n  /**\r\n   * Creates the DOM\r\n   * @private\r\n   * @return {Shape} The current shape\r\n   */\r\n  createDom() {\r\n\r\n    this._dom = document.createElementNS( this.graph.ns, 'path' );\r\n\r\n    if ( !this.getStrokeColor() ) {\r\n      this.setStrokeColor( 'black' );\r\n    }\r\n\r\n    if ( this.getStrokeWidth() === undefined ) {\r\n      this.setStrokeWidth( 1 );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * No handles for the polyline\r\n   * @private\r\n   * @return {Shape} The current shape\r\n   */\r\n  createHandles() {}\r\n\r\n  /**\r\n   *  Force the points of the polyline already computed in pixels\r\n   *  @param {String} a SVG string to be used in the ```d``` attribute of the path.\r\n   *  @return {ShapePolyline} The current polyline instance\r\n   */\r\n  setPointsPx( points ) {\r\n    //  this.setProp( 'pxPoints', points );\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Recalculates the positions and applies them\r\n   * @private\r\n   * @return {Boolean} Whether the shape should be redrawn\r\n   */\r\n  /**\r\n   * Recalculates the positions and applies them\r\n   * @private\r\n   * @return {Boolean} Whether the shape should be redrawn\r\n   */\r\n  applyPosition() {\r\n\r\n    let str = '';\r\n    let index = 0;\r\n    while ( true ) {\r\n\r\n      let pos = this.getPosition( index );\r\n      if ( pos === undefined ) {\r\n        break;\r\n      }\r\n\r\n      let posXY;\r\n      if ( this.serie ) {\r\n        posXY = pos.compute( this.graph, this.serie.getXAxis(), this.serie.getYAxis(), this.serie );\r\n      } else {\r\n        posXY = pos.compute( this.graph, this.getXAxis(), this.getYAxis() );\r\n      }\r\n\r\n      if ( isNaN( posXY.x ) || isNaN( posXY.y ) ) {\r\n        return;\r\n      }\r\n\r\n      if ( index == 0 ) {\r\n        str += ' M ';\r\n      } else {\r\n        str += ' L ';\r\n      }\r\n\r\n      str += `${posXY.x} ${posXY.y}`;\r\n      index++;\r\n    }\r\n\r\n    this.setDom( 'd', str );\r\n\r\n    this.changed();\r\n    return true;\r\n  }\r\n}\r\n/*\r\n  applyPosition() {\r\n\r\n    let pxPoints;\r\n    let pos = this.computePosition( 0 );\r\n    if ( !pos ) {\r\n      return;\r\n    }\r\n    if ( ( pxPoints = this.getProp( 'pxPoints' ) ) ) {\r\n\r\n      pxPoints = ` M ${ pos.x } ${ pos.y } ${ pxPoints}`;\r\n      this.setDom( 'd', pxPoints );\r\n\r\n    } else if ( this.points ) {\r\n\r\n      var xAxis, yAxis;\r\n\r\n      if ( this.serie ) {\r\n\r\n        xAxis = this.serie.getXAxis();\r\n        yAxis = this.serie.getYAxis();\r\n\r\n      } else if ( this.xAxis && this.yAxis ) {\r\n\r\n        xAxis = this.xAxis;\r\n        yAxis = this.yAxis;\r\n      }\r\n\r\n      this.setDom( 'd', `M ${ this.points.map( function( p ) {\r\n        return `${xAxis.getPx( p[ 0 ] ) }, ${ yAxis.getPx( p[ 1 ] )}`;\r\n      } ).join( ' L ' )}` );\r\n    }\r\n\r\n    this.changed();\r\n    return true;\r\n  }*/\r\n//}\r\n\r\nexport default ShapePolyline;","import Shape from './graph.shape.js';\r\n\r\n/**\r\n * Represents a line that extends the Shape class. Used by the plugin {@link PluginSerieLineDifference}\r\n * @extends Shape\r\n * @see Graph#newShape\r\n */\r\nclass ShapePolyline extends Shape {\r\n\r\n  constructor( graph, options ) {\r\n    super( graph, options );\r\n  }\r\n\r\n  /**\r\n   * Creates the DOM\r\n   * @private\r\n   * @return {Shape} The current shape\r\n   */\r\n  createDom() {\r\n\r\n    this._dom = document.createElementNS( this.graph.ns, 'path' );\r\n\r\n    if ( !this.getStrokeColor() ) {\r\n      this.setStrokeColor( 'black' );\r\n    }\r\n\r\n    if ( this.getStrokeWidth() === undefined ) {\r\n      this.setStrokeWidth( 1 );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * No handles for the polyline\r\n   * @private\r\n   * @return {Shape} The current shape\r\n   */\r\n  createHandles() {}\r\n\r\n  /**\r\n   *  Force the points of the polyline already computed in pixels\r\n   *  @param {String} a SVG string to be used in the ```d``` attribute of the path.\r\n   *  @return {ShapePolyline} The current polyline instance\r\n   */\r\n  setPointsPx( points ) {\r\n    this.setProp( 'pxPoints', points );\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Recalculates the positions and applies them\r\n   * @private\r\n   * @return {Boolean} Whether the shape should be redrawn\r\n   */\r\n  applyPosition() {\r\n\r\n    let str = '';\r\n    let index = 0;\r\n    while ( true ) {\r\n\r\n      let pos = this.getPosition( index );\r\n      if ( pos === undefined ) {\r\n        break;\r\n      }\r\n\r\n      let posXY;\r\n      if ( this.serie ) {\r\n        posXY = pos.compute( this.graph, this.serie.getXAxis(), this.serie.getYAxis(), this.serie );\r\n      } else {\r\n        posXY = pos.compute( this.graph, this.getXAxis(), this.getYAxis() );\r\n      }\r\n\r\n      if ( isNaN( posXY.x ) || isNaN( posXY.y ) ) {\r\n        return;\r\n      }\r\n\r\n      if ( index == 0 ) {\r\n        str += ' M ';\r\n      } else {\r\n        str += ' L ';\r\n      }\r\n\r\n      str += `${posXY.x} ${posXY.y}`;\r\n      index++;\r\n    }\r\n\r\n    str += 'z';\r\n\r\n    this.setDom( 'd', str );\r\n\r\n    this.changed();\r\n    return true;\r\n  }\r\n}\r\n\r\nexport default ShapePolyline;","import GraphPosition from '../graph.position.js';\r\n\r\nimport Shape from './graph.shape.js';\r\n\r\n/**\r\n * Displays an integral with NMR style\r\n * @extends ShapeSurfaceUnderCurve\r\n */\r\nclass ShapeNMRIntegral extends Shape {\r\n\r\n  constructor( graph, options ) {\r\n\r\n    super( graph, options );\r\n\r\n    this.nbHandles = 2;\r\n  }\r\n\r\n  createDom() {\r\n    this._dom = document.createElementNS( this.graph.ns, 'path' );\r\n    this._domShadow = document.createElementNS( this.graph.ns, 'path' );\r\n    this._domShadow.jsGraphIsShape = this;\r\n    this._dom.setAttribute( 'pointer-events', 'stroke' );\r\n    this._domShadow.setAttribute( 'pointer-events', 'stroke' );\r\n    this._domShadow.setAttribute( 'stroke-width', '12' );\r\n    this._domShadow.setAttribute( 'fill', 'transparent' );\r\n    this._domShadow.setAttribute( 'stroke', 'transparent' );\r\n    this.group.appendChild( this._domShadow );\r\n  }\r\n\r\n  initImpl() {\r\n    this.setFillColor( 'transparent' );\r\n    this.setStrokeColor( 'black' );\r\n  }\r\n\r\n  createHandles() {\r\n\r\n    this._createHandles( 2, 'rect', {\r\n      transform: 'translate(-3 -3)',\r\n      width: 6,\r\n      height: 6,\r\n      stroke: 'black',\r\n      fill: 'white'\r\n    } );\r\n\r\n    this.handles[ 1 ].setAttribute( 'fill', 'red' );\r\n  }\r\n\r\n  xor( a, b ) {\r\n    return ( a && !b ) || ( !a && b );\r\n  }\r\n\r\n  applyPosition() {\r\n\r\n    let\r\n      x,\r\n      y,\r\n      xVal,\r\n      yVal,\r\n      axis = this.getAxis(),\r\n      points = [];\r\n\r\n    let currentLine = '',\r\n      baseLine = this.getProp( 'baseLine', 0 ) || 300,\r\n      ratio;\r\n\r\n    if ( !this.serie ) {\r\n      throw 'No serie exists for this shape';\r\n    }\r\n    /*\r\n        this.sortPositions( ( a, b ) => {\r\n          return a.x - b.x;\r\n        } );\r\n\r\n        */\r\n    let pos1 = this.getPosition( 0 );\r\n    let pos2 = this.getPosition( 1 );\r\n\r\n    if ( ( pos1.x < this.serie.getXAxis().getCurrentMin() && pos2.x < this.serie.getXAxis().getCurrentMin() ) || ( pos1.x > this.serie.getXAxis().getCurrentMax() && pos2.x > this.serie.getXAxis().getCurrentMax() ) ) {\r\n      this.setDom( 'd', '' );\r\n      this._domShadow.setAttribute( 'd', '' );\r\n\r\n      this.hideLabel( 0 );\r\n      return false;\r\n    }\r\n\r\n    this.showLabel( 0 );\r\n\r\n    let sum = 0;\r\n\r\n    let j;\r\n    let waveform = this.serie.getWaveform();\r\n\r\n    if ( !waveform ) {\r\n      return;\r\n    }\r\n\r\n    let index1 = waveform.getIndexFromX( pos1[ axis ], true, Math.floor ),\r\n      index2 = waveform.getIndexFromX( pos2[ axis ], true, Math.ceil ),\r\n      index3,\r\n      flipped = false;\r\n\r\n    if ( index1 == index2 ) { // At least one px please !\r\n      if ( waveform.getReductionType() == 'aggregate' ) {\r\n        index2 += 4; // Aggregated state\r\n      } else {\r\n        index2++; // Non aggregated state\r\n      }\r\n    }\r\n\r\n    if ( index2 < index1 ) {\r\n      index3 = index1;\r\n      index1 = index2;\r\n      index2 = index3;\r\n      flipped = true;\r\n    }\r\n\r\n    let firstX, firstY, firstXVal, firstYVal, lastX, lastXVal, lastY, lastYVal;\r\n    let data = waveform.getDataInUse();\r\n\r\n    let condition, incrementation;\r\n\r\n    let normalSums = true;\r\n    if ( waveform.getReductionType() == 'aggregate' ) {\r\n      normalSums = false;\r\n    }\r\n\r\n    if (\r\n      ( waveform.getXMonotoneousAscending() && // Ascending\r\n        1 == 1 ) ||\r\n      ( !waveform.getXMonotoneousAscending() && // Ascending\r\n        1 == 2 )\r\n    ) {\r\n\r\n      j = index2;\r\n      condition = true;\r\n      incrementation = -1;\r\n\r\n    } else {\r\n\r\n      j = index1;\r\n      condition = false;\r\n      incrementation = 1;\r\n    }\r\n\r\n    for ( ; condition ? j >= index1 : j <= index2; j += incrementation ) {\r\n\r\n      xVal = waveform.getX( j, true );\r\n      yVal = waveform.getY( j, true );\r\n\r\n      x = this.serie.getX( xVal );\r\n      y = this.serie.getY( yVal );\r\n\r\n      /*\r\n            if ( ! normalSums && j % 4 == 0 && j >= index1 && data.sums ) { // Sums are located every 4 element\r\n\r\n              sum += data.sums[ j ];// * ( waveform.getX( j, true ) - waveform.getX( j - 3, true ) ); // y * (out-in)\r\n\r\n            } else if( normalSums ) {\r\n      */\r\n      sum += waveform.getY( j, true ); // * ( waveform.getX( j, true ) - waveform.getX( j - 1, true ) ); // y * (out-in)\r\n      //}\r\n\r\n      if ( !firstX ) {\r\n\r\n        firstX = x;\r\n        firstY = y;\r\n        firstXVal = waveform.getX( j );\r\n        firstYVal = waveform.getY( j );\r\n      }\r\n\r\n      if ( lastX == undefined ) {\r\n\r\n        lastX = x;\r\n        lastY = y;\r\n        lastXVal = waveform.getX( j );\r\n        lastYVal = waveform.getY( j );\r\n        continue;\r\n      }\r\n\r\n      if ( x == lastX && y == lastY ) {\r\n        //continue;\r\n      }\r\n\r\n      lastX = x;\r\n      lastY = y;\r\n      //console.log( data, data[ j ] );\r\n\r\n      points.push( [ x, y, sum ] );\r\n      lastXVal = xVal;\r\n    }\r\n\r\n    lastXVal = false;\r\n    lastYVal = false;\r\n    lastX = false;\r\n    lastY = false;\r\n\r\n    if ( sum == 0 ) {\r\n      sum = 1;\r\n    }\r\n\r\n    this._sumVal = waveform.integrate( pos1.x, pos2.x );\r\n\r\n    if ( !this.ratio ) {\r\n      // 150px / unit\r\n      ratio = 200 / sum;\r\n\r\n    } else {\r\n      // Already existing\r\n      ratio = this.ratio * ( this.sumVal / sum );\r\n    }\r\n    let py;\r\n\r\n    if ( points.length == 0 ) {\r\n      return;\r\n    }\r\n\r\n    for ( var i = 0, l = points.length; i < l; i++ ) {\r\n\r\n      py = baseLine - ( points[ i ][ 2 ] ) * ratio;\r\n\r\n      if ( i > 0 && ( ( points[ i - 1 ][ 2 ] > sum / 2 && points[ i ][ 2 ] <= sum / 2 ) || ( points[ i - 1 ][ 2 ] < sum / 2 && points[ i ][ 2 ] >= sum / 2 ) ) ) {\r\n\r\n        let pos = baseLine - ( points[ i - 1 ][ 2 ] + points[ i ][ 2 ] ) / 2 * ratio;\r\n\r\n        this.setPosition( {\r\n          x: `${points[ i ][ 0 ] }px`,\r\n          y: `${pos }px`\r\n\r\n        }, 3 );\r\n\r\n        this.setLabelPosition( this.getPosition( 3 ), 0 );\r\n      }\r\n\r\n      currentLine += ` L ${ points[ i ][ 0 ] }, ${ py } `;\r\n\r\n      this.lastPointX = points[ i ][ 0 ];\r\n      this.lastPointY = py;\r\n    }\r\n\r\n    this.points = points;\r\n    this._sum = sum;\r\n\r\n    if ( this.serie.isFlipped() ) {\r\n      currentLine = ` M ${ baseLine }, ${ firstX } ${ currentLine}`;\r\n    } else {\r\n      currentLine = ` M ${ firstX }, ${ baseLine } ${ currentLine}`;\r\n    }\r\n\r\n    this.firstPointX = firstX;\r\n    this.firstPointY = baseLine;\r\n\r\n    this.setDom( 'd', currentLine );\r\n    this._domShadow.setAttribute( 'd', currentLine );\r\n\r\n    this.firstX = firstX;\r\n    this.firstY = firstY;\r\n    /*\r\n          if ( this._selected ) {\r\n            this.select();\r\n          }\r\n\r\n          this.setHandles();*/\r\n\r\n    ( this.serie.ratioLabel && this.updateIntegralValue( this.serie.ratioLabel ) ) || this.updateLabels();\r\n\r\n    this.changed();\r\n    this.handleCondition = !this.xor( incrementation == -1, flipped );\r\n    this.setHandles();\r\n\r\n    this.updateIntegralValue();\r\n\r\n    return true;\r\n  }\r\n\r\n  updateIntegralValue( ratioLabel = this.serie.ratioLabel, forceValue ) {\r\n    console.log( ratioLabel );\r\n    if ( ratioLabel ) {\r\n      this.serie.ratioLabel = ratioLabel;\r\n    }\r\n\r\n    if ( !isNaN( forceValue ) && !isNaN( this.sumVal ) && this.sumVal ) {\r\n      this.serie.ratioLabel = forceValue / this.sumVal;\r\n    }\r\n\r\n    this.setLabelText( ratioLabel ? ( Math.round( 100 * this.sumVal * ratioLabel ) / 100 ).toPrecision( 3 ) : 'N/A', 0 );\r\n    this.updateLabels();\r\n    return this.serie.ratioLabel;\r\n  }\r\n\r\n  getAxis() {\r\n    return this._data.axis || 'x';\r\n  }\r\n\r\n  /**\r\n   * User to screen coordinate transform. In (unit)/(px), (unit) being the unit of the integral (x * y)\r\n   * @type {Number}\r\n   */\r\n  set ratio( r ) {\r\n    this._ratio = r;\r\n  }\r\n\r\n  get ratio() {\r\n    return this._ratio;\r\n  }\r\n\r\n  get sum() {\r\n    return this._sum;\r\n  }\r\n\r\n  get sumVal() {\r\n    return this._sumVal;\r\n  }\r\n\r\n  selectStyle() {\r\n    this.setDom( 'stroke-width', '2px' );\r\n  }\r\n\r\n  selectHandles() {} // Cancel areaundercurve\r\n\r\n  setHandles() {\r\n\r\n    if ( this.points == undefined ) {\r\n      return;\r\n    }\r\n\r\n    if ( !this.isSelected() ) {\r\n      return;\r\n    }\r\n\r\n    this.addHandles();\r\n\r\n    if ( this.handleCondition ) {\r\n\r\n      this.handles[ 1 ].setAttribute( 'x', this.firstPointX );\r\n      this.handles[ 1 ].setAttribute( 'y', this.firstPointY );\r\n      this.handles[ 2 ].setAttribute( 'x', this.lastPointX );\r\n      this.handles[ 2 ].setAttribute( 'y', this.lastPointY );\r\n\r\n    } else {\r\n\r\n      this.handles[ 2 ].setAttribute( 'x', this.firstPointX );\r\n      this.handles[ 2 ].setAttribute( 'y', this.firstPointY );\r\n      this.handles[ 1 ].setAttribute( 'x', this.lastPointX );\r\n      this.handles[ 1 ].setAttribute( 'y', this.lastPointY );\r\n\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handles mouse move events\r\n   * @private\r\n   */\r\n  handleMouseMoveImpl( e, deltaX, deltaY, deltaXPx, deltaYPx ) {\r\n\r\n    if ( this.isLocked() ) {\r\n      return;\r\n    }\r\n\r\n    var pos = this.getPosition( 0 );\r\n    var pos2 = this.getPosition( 1 );\r\n\r\n    var posToChange;\r\n\r\n    if ( this.handleSelected == 1 ) {\r\n\r\n      posToChange = pos;\r\n\r\n    } else if ( this.handleSelected == 2 ) {\r\n\r\n      posToChange = pos2;\r\n    }\r\n\r\n    if ( posToChange ) {\r\n\r\n      if ( !this._data.vertical ) {\r\n        posToChange.deltaPosition( 'x', deltaX, this.getXAxis() );\r\n      }\r\n    }\r\n\r\n    if ( this.moving ) {\r\n\r\n      // If the pos2 is defined by a delta, no need to move them\r\n      if ( pos.x ) {\r\n        pos.deltaPosition( 'x', deltaX, this.getXAxis() );\r\n      }\r\n\r\n      // If the pos2 is defined by a delta, no need to move them\r\n      if ( pos2.x ) {\r\n        pos2.deltaPosition( 'x', deltaX, this.getXAxis() );\r\n      }\r\n    }\r\n\r\n    if ( this.rectEvent ) {\r\n      this.setEventReceptacle();\r\n    }\r\n\r\n    this.redraw();\r\n    this.changed();\r\n\r\n    return true;\r\n  }\r\n}\r\n\r\nexport default ShapeNMRIntegral;","import * as util from '../graph.util.js';\r\n\r\nimport GraphShape from './graph.shape.js';\r\n\r\n/**\r\n * Represents a rectangle that extends the Shape class\r\n * @class ShapeRectangle\r\n * @augments Shape\r\n * @see Graph#newShape\r\n */\r\nclass ShapeRectangle extends GraphShape {\r\n  constructor( graph, options ) {\r\n    super( graph, options );\r\n  }\r\n\r\n  /**\r\n   * Creates the DOM\r\n   * @private\r\n   * @return {Shape} The current shape\r\n   */\r\n  createDom() {\r\n    this._dom = document.createElementNS( this.graph.ns, 'rect' );\r\n\r\n    if ( !this.getStrokeColor() ) {\r\n      this.setStrokeColor( 'black' );\r\n    }\r\n\r\n    if ( this.getStrokeWidth() === undefined ) {\r\n      this.setStrokeWidth( 1 );\r\n    }\r\n\r\n    if ( !this.getFillColor() ) {\r\n      this.setFillColor( 'transparent' );\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Creates the Handles\r\n   * @private\r\n   * @return {Shape} The current shape\r\n   */\r\n  createHandles() {\r\n    if ( !this.hasHandles() ) {\r\n      return;\r\n    }\r\n\r\n    /*\r\n          this._data.handles = this._data.handles || {\r\n            type: 'corners'\r\n          };\r\n    */\r\n\r\n    var handles = this.getProp( 'handles' );\r\n\r\n    if ( typeof handles != 'object' ) {\r\n      handles = {};\r\n    }\r\n\r\n    if ( !handles.type ) {\r\n      handles.type = 'corners';\r\n    }\r\n\r\n    switch ( handles.type ) {\r\n      case 'sides':\r\n        util.extend( handles, {\r\n          sides: {\r\n            top: true,\r\n            bottom: true,\r\n            left: true,\r\n            right: true\r\n          }\r\n        } );\r\n\r\n        var j = 0;\r\n        for ( var i in handles.sides ) {\r\n          if ( handles.sides[ i ] ) {\r\n            j++;\r\n          }\r\n        }\r\n\r\n        this._createHandles( j, 'g' ).map( function( g ) {\r\n          var r = document.createElementNS( self.graph.ns, 'rect' );\r\n          r.setAttribute( 'x', '-3' );\r\n          r.setAttribute( 'width', '6' );\r\n          r.setAttribute( 'y', '-6' );\r\n          r.setAttribute( 'height', '12' );\r\n          r.setAttribute( 'stroke', 'black' );\r\n          r.setAttribute( 'fill', 'white' );\r\n          r.setAttribute( 'cursor', 'pointer' );\r\n\r\n          g.appendChild( r );\r\n        } );\r\n\r\n        var j = 1;\r\n\r\n        for ( var i in handles.sides ) {\r\n          if ( handles.sides[ i ] ) {\r\n            this.handles[ i ] = this[ `handle${j}` ];\r\n            this.sides[ j ] = i;\r\n            j++;\r\n          }\r\n        }\r\n\r\n        break;\r\n\r\n      case 'corners':\r\n        this._createHandles( 4, 'rect', {\r\n          transform: 'translate(-3 -3)',\r\n          width: 6,\r\n          height: 6,\r\n          stroke: 'black',\r\n          fill: 'white'\r\n        } );\r\n\r\n        if ( this.handles ) {\r\n          this.handles[ 2 ].setAttribute( 'cursor', 'nesw-resize' );\r\n          this.handles[ 4 ].setAttribute( 'cursor', 'nesw-resize' );\r\n\r\n          this.handles[ 1 ].setAttribute( 'cursor', 'nwse-resize' );\r\n          this.handles[ 3 ].setAttribute( 'cursor', 'nwse-resize' );\r\n        }\r\n\r\n        break;\r\n\r\n      case 'seamlessX':\r\n        this._createHandles( 2, 'rect', {\r\n          transform: 'translate(-3 -3)',\r\n          stroke: 'transparent',\r\n          fill: 'transparent',\r\n          width: '20px',\r\n          cursor: 'ew-resize'\r\n        } );\r\n\r\n        break;\r\n    }\r\n\r\n    super.createHandles();\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Updates the position\r\n   * @memberof ShapeRectangle\r\n   * @private\r\n   * @return {Shape} The current shape\r\n   */\r\n  applyPosition() {\r\n    var pos = this.computePosition( 0 ),\r\n      pos2 = this.computePosition( 1 ),\r\n      x,\r\n      y,\r\n      width,\r\n      height;\r\n\r\n    if ( !pos || !pos2 ) {\r\n      return;\r\n    }\r\n\r\n    if ( pos.x < pos2.x ) {\r\n      x = pos.x;\r\n      width = pos2.x - pos.x;\r\n    } else {\r\n      x = pos2.x;\r\n      width = pos.x - pos2.x;\r\n    }\r\n\r\n    if ( pos.y < pos2.y ) {\r\n      y = pos.y;\r\n      height = pos2.y - pos.y;\r\n    } else {\r\n      y = pos2.y;\r\n      height = pos.y - pos2.y;\r\n    }\r\n\r\n    this.currentX = x;\r\n    this.currentY = y;\r\n    this.currentW = width;\r\n    this.currentH = height;\r\n\r\n    if ( !isNaN( x ) && !isNaN( y ) && x !== false && y !== false ) {\r\n      this.setDom( 'width', width );\r\n      this.setDom( 'height', height );\r\n      this.setDom( 'x', x );\r\n      this.setDom( 'y', y );\r\n\r\n      this.setHandles();\r\n      this.updateMask();\r\n\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Implements mouse move event\r\n   * @private\r\n   * @return {Shape} The current shape\r\n   */\r\n  handleMouseMoveImpl( e, deltaX, deltaY, deltaXPx, deltaYPx ) {\r\n    var handles = this.getProp( 'handles' );\r\n\r\n    if ( !this.moving && !this.handleSelected ) {\r\n      return;\r\n    }\r\n\r\n    var pos = this.getPosition( 0 );\r\n    var pos2 = this.getPosition( 1 );\r\n\r\n    var invX = this.getXAxis().isFlipped(),\r\n      invY = this.getYAxis().isFlipped(),\r\n      posX = pos.x,\r\n      posY = pos.y,\r\n      pos2X = pos2.x,\r\n      pos2Y = pos2.y;\r\n\r\n    if ( this.moving ) {\r\n      pos.deltaPosition( 'x', deltaX, this.getXAxis() );\r\n      pos.deltaPosition( 'y', deltaY, this.getYAxis() );\r\n\r\n      pos2.deltaPosition( 'x', deltaX, this.getXAxis() );\r\n      pos2.deltaPosition( 'y', deltaY, this.getYAxis() );\r\n    } else {\r\n      switch ( handles.type ) {\r\n        case 'seamlessX':\r\n          // Do nothing for now\r\n\r\n          switch ( this.handleSelected ) {\r\n            case 1:\r\n              pos.deltaPosition( 'x', deltaX, this.getXAxis() );\r\n              break;\r\n\r\n            case 2:\r\n              pos2.deltaPosition( 'x', deltaX, this.getXAxis() );\r\n              break;\r\n          }\r\n\r\n          break;\r\n\r\n        case 'sides':\r\n          // Do nothing for now\r\n\r\n          switch ( this.sides[ this.handleSelected ] ) {\r\n            case 'left':\r\n              pos.deltaPosition( 'x', deltaX, this.getXAxis() );\r\n              break;\r\n\r\n            case 'right':\r\n              pos2.deltaPosition( 'x', deltaX, this.getXAxis() );\r\n              break;\r\n\r\n            case 'top':\r\n              pos.deltaPosition( 'y', deltaY, this.getYAxis() );\r\n              break;\r\n\r\n            case 'bottom':\r\n              pos2.deltaPosition( 'y', deltaY, this.getYAxis() );\r\n              break;\r\n          }\r\n\r\n          break;\r\n\r\n        case 'corners':\r\n        default:\r\n          if ( this.handleSelected == 1 ) {\r\n            pos.deltaPosition( 'x', deltaX, this.getXAxis() );\r\n            pos.deltaPosition( 'y', deltaY, this.getYAxis() );\r\n          } else if ( this.handleSelected == 2 ) {\r\n            pos2.deltaPosition( 'x', deltaX, this.getXAxis() );\r\n            pos.deltaPosition( 'y', deltaY, this.getYAxis() );\r\n          } else if ( this.handleSelected == 3 ) {\r\n            pos2.deltaPosition( 'y', deltaY, this.getYAxis() );\r\n            pos2.deltaPosition( 'x', deltaX, this.getXAxis() );\r\n          } else if ( this.handleSelected == 4 ) {\r\n            pos.deltaPosition( 'x', deltaX, this.getXAxis() );\r\n            pos2.deltaPosition( 'y', deltaY, this.getYAxis() );\r\n          }\r\n\r\n          break;\r\n      }\r\n    }\r\n\r\n    this.redraw();\r\n    this.changed();\r\n    this.setHandles();\r\n\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Places handles properly\r\n   * @private\r\n   * @return {Shape} The current shape\r\n   */\r\n  setHandles() {\r\n    if ( this.isLocked() || ( !this.isSelectable() && !this._staticHandles ) ) {\r\n      return;\r\n    }\r\n\r\n    if ( !this.handlesInDom ) {\r\n      return;\r\n    }\r\n\r\n    var pos = this.computePosition( 0 );\r\n    var pos2 = this.computePosition( 1 );\r\n\r\n    var handles = this.getProp( 'handles' );\r\n\r\n    switch ( handles.type ) {\r\n      case 'seamlessX':\r\n        if ( this.handles[ 1 ] ) {\r\n          this.handles[ 1 ].setAttribute(\r\n            'transform',\r\n            `translate(-10) translate(${pos.x})`\r\n          );\r\n          this.handles[ 1 ].setAttribute( 'height', Math.abs( pos2.y - pos.y ) );\r\n          this.handles[ 1 ].setAttribute( 'y', Math.min( pos2.y, pos.y ) );\r\n        }\r\n\r\n        if ( this.handles[ 2 ] ) {\r\n          this.handles[ 2 ].setAttribute(\r\n            'transform',\r\n            `translate(-10)  translate(${pos2.x})`\r\n          );\r\n          this.handles[ 2 ].setAttribute( 'height', Math.abs( pos2.y - pos.y ) );\r\n          this.handles[ 2 ].setAttribute( 'y', Math.min( pos2.y, pos.y ) );\r\n        }\r\n\r\n        break;\r\n\r\n      case 'sides':\r\n        if ( this.handles.left ) {\r\n          this.handles.left.setAttribute(\r\n            'transform',\r\n            `translate(${this.currentX} ${this.currentY + this.currentH / 2})`\r\n          );\r\n        }\r\n\r\n        if ( this.handles.right ) {\r\n          this.handles.right.setAttribute(\r\n            'transform',\r\n            `translate( ${this.currentX + this.currentW} ${this.currentY +\r\n            this.currentH / 2})`\r\n          );\r\n        }\r\n\r\n        if ( this.handles.top ) {\r\n          this.handles.top.setAttribute(\r\n            'transform',\r\n            `translate( ${this.currentX + this.currentW / 2} ${this.currentY})`\r\n          );\r\n        }\r\n\r\n        if ( this.handles.bottom ) {\r\n          this.handles.bottom.setAttribute(\r\n            'transform',\r\n            `translate( ${this.currentX + this.currentW / 2} ${this.currentY +\r\n            this.currentH})`\r\n          );\r\n        }\r\n\r\n        break;\r\n\r\n      case 'corners':\r\n      default:\r\n        this.handles[ 1 ].setAttribute( 'x', pos.x );\r\n        this.handles[ 1 ].setAttribute( 'y', pos.y );\r\n\r\n        this.handles[ 2 ].setAttribute( 'x', pos2.x );\r\n        this.handles[ 2 ].setAttribute( 'y', pos.y );\r\n\r\n        this.handles[ 3 ].setAttribute( 'x', pos2.x );\r\n        this.handles[ 3 ].setAttribute( 'y', pos2.y );\r\n\r\n        this.handles[ 4 ].setAttribute( 'x', pos.x );\r\n        this.handles[ 4 ].setAttribute( 'y', pos2.y );\r\n\r\n        break;\r\n    }\r\n  }\r\n}\r\n\r\nexport default ShapeRectangle;","import ShapeRect from './graph.shape.rect.js';\r\n\r\nclass ShapePeakIntegration2D extends ShapeRect {\r\n\r\n  constructor( graph, options ) {\r\n\r\n    super( graph, options );\r\n    this.nbHandles = 4;\r\n  }\r\n\r\n  createDom() {\r\n\r\n    this._dom = document.createElementNS( this.graph.ns, 'rect' );\r\n    this._dom.element = this;\r\n\r\n    this.createHandles( this.nbHandles, 'rect', {\r\n      transform: 'translate(-3 -3)',\r\n      width: 6,\r\n      height: 6,\r\n      stroke: 'black',\r\n      fill: 'white',\r\n      cursor: 'nwse-resize'\r\n    } );\r\n  }\r\n\r\n  redrawImpl() {\r\n\r\n    this.setPosition();\r\n    this.setHandles();\r\n    this.setBindableToDom( this._dom );\r\n  }\r\n\r\n}\r\n\r\nexport default ShapePeakIntegration2D;","import Shape from './graph.shape.js';\r\n\r\n/**\r\n *  Displays a cross\r\n *  @extends Shape\r\n */\r\nclass ShapeCross extends Shape {\r\n\r\n  constructor( graph, options ) {\r\n    super( graph, options );\r\n    this.nbHandles = 1;\r\n  }\r\n\r\n  /**\r\n   * Width of the cross, also available from the constructor\r\n   * @type {Number} width\r\n   */\r\n  get width() {\r\n    return this.options.width || 10;\r\n  }\r\n\r\n  set width( l ) {\r\n    this.options.width = l;\r\n  }\r\n\r\n  createDom() {\r\n\r\n    this._dom = document.createElementNS( this.graph.ns, 'path' );\r\n    this._dom.setAttribute( 'd', `M -${ this.width / 2 } 0 h ${ this.width } m -${ this.width / 2 } -${ this.width / 2 } v ${ this.width }` );\r\n\r\n  }\r\n\r\n  createHandles() {\r\n\r\n    this._createHandles( this.nbHandles, 'rect', {\r\n      transform: 'translate(-3 -3)',\r\n      width: 6,\r\n      height: 6,\r\n      stroke: 'black',\r\n      fill: 'white',\r\n      cursor: 'nwse-resize'\r\n    } );\r\n\r\n  }\r\n  applyPosition() {\r\n\r\n    var position = this.calculatePosition( 0 );\r\n    if ( !position || !position.x || !position.y ) {\r\n      return;\r\n    }\r\n\r\n    this.setDom( 'transform', `translate( ${ position.x }, ${ position.y })` );\r\n\r\n    this.currentPos1x = position.x;\r\n    this.currentPos1y = position.y;\r\n\r\n    return true;\r\n  }\r\n\r\n  redrawImpl() {\r\n\r\n    this.setHandles();\r\n  }\r\n\r\n  handleCreateImpl() {\r\n\r\n  }\r\n\r\n  handleMouseDownImpl( e ) {\r\n\r\n    this.moving = true;\r\n\r\n    return true;\r\n  }\r\n\r\n  handleMouseUpImpl() {\r\n\r\n    this.triggerChange();\r\n    return true;\r\n  }\r\n\r\n  handleMouseMoveImpl( e, deltaX, deltaY, deltaXPx, deltaYPx ) {\r\n\r\n    if ( this.isLocked() ) {\r\n      return;\r\n    }\r\n\r\n    var pos = this.getFromData( 'pos' );\r\n\r\n    if ( this.moving ) {\r\n\r\n      pos.x = this.graph.deltaPosition( pos.x, deltaX, this.getXAxis() );\r\n      pos.y = this.graph.deltaPosition( pos.y, deltaY, this.getYAxis() );\r\n    }\r\n\r\n    this.redrawImpl();\r\n\r\n    return true;\r\n\r\n  }\r\n\r\n  setHandles() {\r\n\r\n    if ( !this.areHandlesInDom() ) {\r\n      return;\r\n    }\r\n\r\n    if ( isNaN( this.currentPos1x ) ) {\r\n      return;\r\n    }\r\n\r\n    this.handles[ 1 ].setAttribute( 'x', this.currentPos1x );\r\n    this.handles[ 1 ].setAttribute( 'y', this.currentPos1y );\r\n  }\r\n\r\n  selectStyle() {\r\n    this.setDom( 'stroke', 'red' );\r\n    this.setDom( 'stroke-width', '2' );\r\n  }\r\n}\r\n\r\nexport default ShapeCross;","import ShapeLine from './graph.shape.line.js';\r\n\r\n/**\r\n *  Shows a horizontal line with three little vertical bars. Very useful to demonstrate a peak start, end and middle value\r\n *  @extends ShapeLine\r\n */\r\nclass ShapePeakBoundaries extends ShapeLine {\r\n\r\n  constructor( graph ) {\r\n    super( graph );\r\n    this.lineHeight = 6;\r\n  }\r\n\r\n  createDom() {\r\n\r\n    this._dom = document.createElementNS( this.graph.ns, 'line' );\r\n    this.line1 = document.createElementNS( this.graph.ns, 'line' );\r\n    this.line2 = document.createElementNS( this.graph.ns, 'line' );\r\n    this.line3 = document.createElementNS( this.graph.ns, 'line' );\r\n\r\n    this.rectBoundary = document.createElementNS( this.graph.ns, 'path' );\r\n\r\n    this.rectBoundary.setAttribute( 'fill', 'transparent' );\r\n    this.rectBoundary.setAttribute( 'stroke', 'none' );\r\n    this.rectBoundary.setAttribute( 'pointer-events', 'fill' );\r\n\r\n    this.rectBoundary.jsGraphIsShape = true;\r\n\r\n    this.group.appendChild( this.rectBoundary );\r\n    this.group.appendChild( this.line1 );\r\n    this.group.appendChild( this.line2 );\r\n    this.group.appendChild( this.line3 );\r\n    this._dom.element = this;\r\n  }\r\n\r\n  createHandles() {\r\n    this._createHandles( 3, 'rect', {\r\n      transform: 'translate(-3 -3)',\r\n      width: 6,\r\n      height: 6,\r\n      stroke: 'black',\r\n      fill: 'white',\r\n      cursor: 'nwse-resize'\r\n    } );\r\n  }\r\n\r\n  redrawImpl() {\r\n\r\n    this.line1.setAttribute( 'stroke', this.getStrokeColor() );\r\n    this.line2.setAttribute( 'stroke', this.getStrokeColor() );\r\n    this.line3.setAttribute( 'stroke', this.getStrokeColor() );\r\n\r\n    this.line1.setAttribute( 'stroke-width', this.getStrokeWidth() );\r\n    this.line2.setAttribute( 'stroke-width', this.getStrokeWidth() );\r\n    this.line3.setAttribute( 'stroke-width', this.getStrokeWidth() );\r\n\r\n    this.setHandles();\r\n    this.redrawLines();\r\n  }\r\n\r\n  /**\r\n   * @memberof ShapePeakBoundaries\r\n   * Redraws the vertical lines according to the positions.\r\n   * Position 0 is the left line, position 1 is the right line and position 2 is the center line\r\n   * @returns {ShapePeakBoundaries} The shape instance\r\n   */\r\n  redrawLines() {\r\n\r\n    var posLeft = this.computePosition( 0 );\r\n    var posRight = this.computePosition( 1 );\r\n    var posCenter = this.computePosition( 2 );\r\n\r\n    if ( posLeft.x && posRight.x && posCenter.x && this.posYPx ) {\r\n\r\n      var height = this.lineHeight;\r\n      this.rectBoundary.setAttribute( 'd', `M ${ posLeft.x } ${ this.posYPx - height } v ${ 2 * height } H ${ posRight.x } v ${ -2 * height }z` );\r\n      this.line1.setAttribute( 'x1', posLeft.x );\r\n      this.line1.setAttribute( 'x2', posLeft.x );\r\n\r\n      this.line2.setAttribute( 'x1', posRight.x );\r\n      this.line2.setAttribute( 'x2', posRight.x );\r\n\r\n      this.line3.setAttribute( 'x1', posCenter.x );\r\n      this.line3.setAttribute( 'x2', posCenter.x );\r\n\r\n      this._dom.setAttribute( 'x1', posLeft.x );\r\n      this._dom.setAttribute( 'x2', posRight.x );\r\n\r\n      this.redrawY( height );\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * @memberof ShapePeakBoundaries\r\n   * Redraws the vertical positions of the shape\r\n   * @returns {ShapePeakBoundaries} The shape instance\r\n   */\r\n  redrawY() {\r\n\r\n    if ( !this.posYPx ) {\r\n      return this;\r\n    }\r\n\r\n    var height = this.lineHeight;\r\n\r\n    this.line1.setAttribute( 'y1', this.posYPx - height );\r\n    this.line1.setAttribute( 'y2', this.posYPx + height );\r\n\r\n    this.line2.setAttribute( 'y1', this.posYPx - height );\r\n    this.line2.setAttribute( 'y2', this.posYPx + height );\r\n\r\n    this.line3.setAttribute( 'y1', this.posYPx - height );\r\n    this.line3.setAttribute( 'y2', this.posYPx + height );\r\n\r\n    this._dom.setAttribute( 'y1', this.posYPx );\r\n    this._dom.setAttribute( 'y2', this.posYPx );\r\n\r\n    return this;\r\n  }\r\n\r\n  setHandles() {\r\n\r\n    if ( !this.posYPx ) {\r\n      return;\r\n    }\r\n\r\n    var posLeft = this.computePosition( 0 );\r\n    var posRight = this.computePosition( 1 );\r\n    var posCenter = this.computePosition( 2 );\r\n\r\n    if ( posLeft.x && posRight.x && posCenter.x ) {\r\n\r\n      this.handles[ 1 ].setAttribute( 'x', posLeft.x );\r\n      this.handles[ 1 ].setAttribute( 'y', this.posYPx );\r\n\r\n      this.handles[ 2 ].setAttribute( 'x', posRight.x );\r\n      this.handles[ 2 ].setAttribute( 'y', this.posYPx );\r\n\r\n      this.handles[ 3 ].setAttribute( 'x', posCenter.x );\r\n      this.handles[ 3 ].setAttribute( 'y', this.posYPx );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @memberof ShapePeakBoundaries\r\n   * Sets the y position of the shape\r\n   * @param {Number} y - The y position in px\r\n   * @returns {ShapePeakBoundaries} The shape instance\r\n   */\r\n  setY( y ) {\r\n    this.posYPx = y;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * @memberof ShapePeakBoundaries\r\n   * Sets the height of the peak lines\r\n   * @param {Number} height - The height of the lines in px\r\n   * @returns {ShapePeakBoundaries} The shape instance\r\n   */\r\n  setLineHeight( height ) {\r\n    this.lineHeihgt = height;\r\n  }\r\n\r\n  handleMouseMoveImpl( e, deltaX, deltaY ) {\r\n\r\n    if ( this.isLocked() ) {\r\n      return;\r\n    }\r\n\r\n    var posLeft = this.getPosition( 0 );\r\n    var posRight = this.getPosition( 1 );\r\n    var posCenter = this.getPosition( 2 );\r\n\r\n    switch ( this.handleSelected ) {\r\n\r\n      case 1: // left\r\n        posLeft.deltaPosition( 'x', deltaX, this.getXAxis() );\r\n\r\n        if ( Math.abs( posCenter.x - posRight.x ) > Math.abs( posRight.x - posLeft.x ) || Math.abs( posCenter.x - posLeft.x ) > Math.abs( posRight.x - posLeft.x ) ) {\r\n          posCenter.x = posLeft.x + ( posRight.x - posLeft.x ) * 0.1;\r\n        }\r\n        break;\r\n\r\n      case 2: // left\r\n\r\n        posRight.deltaPosition( 'x', deltaX, this.getXAxis() );\r\n\r\n        if ( Math.abs( posCenter.x - posRight.x ) > Math.abs( posRight.x - posLeft.x ) || Math.abs( posCenter.x - posLeft.x ) > Math.abs( posRight.x - posLeft.x ) ) {\r\n          posCenter.x = posRight.x + ( posLeft.x - posRight.x ) * 0.1;\r\n        }\r\n\r\n        break;\r\n\r\n      case 3: // left\r\n\r\n        posCenter.deltaPosition( 'x', deltaX, this.getXAxis() );\r\n\r\n        if ( Math.abs( posCenter.x - posRight.x ) > Math.abs( posRight.x - posLeft.x ) || Math.abs( posCenter.x - posLeft.x ) > Math.abs( posRight.x - posLeft.x ) ) {\r\n          return;\r\n        }\r\n\r\n        break;\r\n\r\n    }\r\n\r\n    this.setLabelPosition( {\r\n      y: this.getLabelPosition( 0 ).y,\r\n      x: posCenter.x\r\n    } );\r\n\r\n    this.updateLabels();\r\n    this.redrawLines();\r\n    this.setHandles();\r\n  }\r\n\r\n  applyPosition() {\r\n\r\n    this.redrawLines();\r\n    return true;\r\n  }\r\n\r\n}\r\n\r\nexport default ShapePeakBoundaries;","import {\r\n  isNumeric\r\n} from '../graph.util.js';\r\n\r\nimport GraphShape from './graph.shape.js';\r\n\r\n/**\r\n * Represents a line\r\n * @extends Shape\r\n * @see Graph#newShape\r\n */\r\nclass ShapeHTML extends GraphShape {\r\n\r\n  constructor( graph, options ) {\r\n    super( graph, options );\r\n  }\r\n\r\n  /**\r\n   * Creates the DOM\r\n   * @private\r\n   * @return {Shape} The current shape\r\n   */\r\n  createDom() {\r\n\r\n    this._dom = document.createElement( 'div' );\r\n    //  this._dom.setAttribute( \"requiredExtensions\", \"http://www.w3.org/1999/xhtml\" );\r\n\r\n    this._dom.setAttribute( 'style', 'position: absolute' );\r\n    let div = document.createElement( 'div' );\r\n    this._dom.appendChild( div );\r\n    this.div = div;\r\n  }\r\n\r\n  /**\r\n   * Creates the handles\r\n   * @private\r\n   * @return {Shape} The current shape\r\n   */\r\n  createHandles() {\r\n\r\n  }\r\n\r\n  setHeight( height ) {\r\n    this.setProp( 'height', height );\r\n  }\r\n\r\n  setWidth( width ) {\r\n    this.setProp( 'width', width );\r\n  }\r\n\r\n  setContent( content ) {\r\n    this.setProp( 'content', content );\r\n  }\r\n\r\n  setRenderer( method ) {\r\n    this._renderer = method;\r\n  }\r\n\r\n  redraw() {\r\n\r\n    if ( this._renderer ) {\r\n      this._renderer( this.div );\r\n    } else {\r\n      this.div.innerHTML = this.getProp( 'content' );\r\n    }\r\n    super.redraw( ...arguments );\r\n  }\r\n\r\n  /**\r\n   * Recalculates the positions and applies them\r\n   * @private\r\n   * @return {Boolean} Whether the shape should be redrawn\r\n   */\r\n  applyPosition() {\r\n\r\n    var position = this.calculatePosition( 0 );\r\n\r\n    if ( !position || !isNumeric( position.x ) || !isNumeric( position.y ) ) {\r\n      return;\r\n    }\r\n    this._dom.style.left = `${position.x }px`;\r\n    this._dom.style.top = `${position.y }px`;\r\n\r\n    this.currentPosX = position.x;\r\n    this.currentPosY = position.y;\r\n\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Handles mouse move events\r\n   * @private\r\n   */\r\n  handleMouseMoveImpl( e, deltaX, deltaY, deltaXPx, deltaYPx ) {\r\n\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Sets the handle position\r\n   * @private\r\n   */\r\n  setHandles() {\r\n\r\n  }\r\n\r\n  isHTML() {\r\n    return true;\r\n  }\r\n}\r\n\r\nexport default ShapeHTML;","import EventMixin from '../mixins/graph.mixin.event_graph.js'\r\n/**\r\n * Represents a plugin\r\n * @interface\r\n */\r\nclass Plugin {\r\n\r\n  static\r\n  default () {\r\n    return {};\r\n  }\r\n\r\n  constructor( options ) {\r\n    this.options = Object.assign( {}, Plugin.default(), this.constructor.default(), options );\r\n  }\r\n\r\n  /**\r\n   * Init function called by jsGraph on load\r\n   */\r\n  init( graph ) {\r\n    this.graph = graph;\r\n  }\r\n\r\n  /**\r\n   * Handles the mousedown event from jsGraph\r\n   * @param {Graph} graph - The graph instance\r\n   * @param {Number} x - The x position in px\r\n   * @param {Number} y - The y position in px\r\n   * @param {Event} e - The original event\r\n   * @param {SVGElement} target - The target element\r\n   */\r\n  onMouseDown() {}\r\n\r\n  /**\r\n   * Handles the mouseup event from jsGraph\r\n   * @param {Graph} graph - The graph instance\r\n   * @param {Number} x - The x position in px\r\n   * @param {Number} y - The y position in px\r\n   * @param {Event} e - The original event\r\n   * @param {SVGElement} target - The target element\r\n   */\r\n  onMouseUp() {}\r\n\r\n  /**\r\n   * Handles the mousemove event from jsGraph\r\n   * @param {Graph} graph - The graph instance\r\n   * @param {Number} x - The x position in px\r\n   * @param {Number} y - The y position in px\r\n   * @param {Event} e - The original event\r\n   * @param {SVGElement} target - The target element\r\n   */\r\n  onMouseMove() {}\r\n}\r\n\r\nEventMixin( Plugin, \"plugin\" );\r\nexport default Plugin;","import Plugin from './graph.plugin.js';\r\n\r\n/**\r\n * Constructor for the drag plugin. Do not use this constructor directly.\r\n * @class PluginDrag\r\n * @implements Plugin\r\n */\r\nclass PluginDrag extends Plugin {\r\n\r\n  static\r\n  default () {\r\n    return {\r\n\r\n      dragX: true,\r\n      dragY: true,\r\n      persistanceX: false,\r\n      persistanceY: false\r\n\r\n    };\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   */\r\n  init( graph ) {\r\n\r\n    this.graph = graph;\r\n    this.time = null;\r\n    this.totaltime = 2000;\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   */\r\n  onMouseDown( graph, x, y, e, target ) {\r\n    this._draggingX = x;\r\n    this._draggingY = y;\r\n\r\n    this._lastDraggingX = this._draggingX;\r\n    this._lastDraggingY = this._draggingY;\r\n\r\n    this.stopAnimation = true;\r\n\r\n    this.moved = false;\r\n\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * @memberof PluginDrag\r\n   * @private\r\n   */\r\n  onMouseMove( graph, x, y, e, target ) {\r\n\r\n    var deltaX = x - this._draggingX;\r\n    var deltaY = y - this._draggingY;\r\n\r\n    if ( this.options.dragX ) {\r\n      graph._applyToAxes( function( axis ) {\r\n        axis.setCurrentMin( axis.getVal( axis.getMinPx() - deltaX ) );\r\n        axis.setCurrentMax( axis.getVal( axis.getMaxPx() - deltaX ) );\r\n      }, false, true, false );\r\n    }\r\n\r\n    if ( this.options.dragY ) {\r\n\r\n      graph._applyToAxes( function( axis ) {\r\n        axis.setCurrentMin( axis.getVal( axis.getMinPx() - deltaY ) );\r\n        axis.setCurrentMax( axis.getVal( axis.getMaxPx() - deltaY ) );\r\n      }, false, false, true );\r\n    }\r\n\r\n    this._lastDraggingX = this._draggingX;\r\n    this._lastDraggingY = this._draggingY;\r\n\r\n    this._draggingX = x;\r\n    this._draggingY = y;\r\n\r\n    this.moved = true;\r\n\r\n    this.time = Date.now();\r\n\r\n    this.emit( 'dragging' );\r\n\r\n    graph.draw( true );\r\n\r\n  }\r\n\r\n  onMouseUp( graph, x, y, e, target ) {\r\n\r\n    var dt = ( Date.now() - this.time );\r\n\r\n    if ( x == this._lastDraggingX || y == this._lastDraggingY ) {\r\n\r\n      if ( this.moved ) {\r\n        this.emit( 'dragged' );\r\n      }\r\n\r\n      return;\r\n    }\r\n\r\n    this.speedX = ( x - this._lastDraggingX ) / dt;\r\n    this.speedY = ( y - this._lastDraggingY ) / dt;\r\n\r\n    if ( isNaN( this.speedX ) || isNaN( this.speedY ) ) {\r\n      this.emit( 'dragged' );\r\n      return;\r\n    }\r\n\r\n    graph._applyToAxes( function( axis ) {\r\n      axis._pluginDragMin = axis.getCurrentMin();\r\n      axis._pluginDragMax = axis.getCurrentMax();\r\n    }, false, true, true );\r\n\r\n    this.stopAnimation = false;\r\n    this.accelerationX = -this.speedX / this.totaltime;\r\n    this.accelerationY = -this.speedY / this.totaltime;\r\n\r\n    if ( this.options.persistanceX || this.options.persistanceY ) {\r\n\r\n      this._persistanceMove( graph );\r\n\r\n    } else {\r\n\r\n      this.emit( 'dragged' );\r\n    }\r\n\r\n  }\r\n\r\n  _persistanceMove( graph ) {\r\n\r\n    var self = this;\r\n\r\n    if ( self.stopAnimation ) {\r\n      self.emit( 'dragged' );\r\n      return;\r\n    }\r\n\r\n    window.requestAnimationFrame( function() {\r\n\r\n      var dt = Date.now() - self.time;\r\n      var dx = ( 0.5 * self.accelerationX * dt + self.speedX ) * dt;\r\n      var dy = ( 0.5 * self.accelerationY * dt + self.speedY ) * dt;\r\n\r\n      if ( self.options.persistanceX ) {\r\n\r\n        graph._applyToAxes( function( axis ) {\r\n\r\n          axis.setCurrentMin( -axis.getRelVal( dx ) + axis._pluginDragMin );\r\n          axis.setCurrentMax( -axis.getRelVal( dx ) + axis._pluginDragMax );\r\n\r\n          axis.cacheCurrentMin();\r\n          axis.cacheCurrentMax();\r\n          axis.cacheInterval();\r\n\r\n        }, false, true, false );\r\n      }\r\n\r\n      if ( self.options.persistanceY ) {\r\n\r\n        graph._applyToAxes( function( axis ) {\r\n\r\n          axis.setCurrentMin( -axis.getRelVal( dy ) + axis._pluginDragMin );\r\n          axis.setCurrentMax( -axis.getRelVal( dy ) + axis._pluginDragMax );\r\n\r\n          axis.cacheCurrentMin();\r\n          axis.cacheCurrentMax();\r\n          axis.cacheInterval();\r\n\r\n        }, false, false, true );\r\n      }\r\n\r\n      graph.draw();\r\n\r\n      if ( dt < self.totaltime ) {\r\n        self.emit( 'dragging' );\r\n        self._persistanceMove( graph );\r\n      } else {\r\n        self.emit( 'dragged' );\r\n      }\r\n\r\n    } );\r\n\r\n  }\r\n}\r\n\r\nexport default PluginDrag;","import * as util from '../graph.util.js';\r\n\r\nimport Plugin from './graph.plugin.js';\r\n\r\n/**\r\n * @class PluginShape\r\n * @implements Plugin\r\n */\r\nclass PluginShape extends Plugin {\r\n\r\n  constructor() {\r\n    super( ...arguments );\r\n  }\r\n\r\n  static\r\n  default () {\r\n    return {};\r\n  }\r\n\r\n  /**\r\n   * Init method\r\n   * @private\r\n   */\r\n  init( graph, options ) {\r\n\r\n    super.init( graph, options );\r\n    this.shapeType = options.type;\r\n  }\r\n\r\n  /**\r\n   * Sets the shape that is created by the plugin\r\n   * @param {String} shapeType - The type of the shape\r\n   */\r\n  setShape( shapeType ) {\r\n    this.shapeInfo.shapeType = shapeType;\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   */\r\n  onMouseDown( graph, x, y, e, target ) {\r\n\r\n    if ( !this.shapeType && !this.options.url ) {\r\n      return;\r\n    }\r\n\r\n    var self = this,\r\n      selfPlugin = this;\r\n\r\n    var xVal, yVal;\r\n\r\n    this.count = this.count || 0;\r\n\r\n    x -= graph.getPaddingLeft();\r\n    y -= graph.getPaddingTop();\r\n\r\n    xVal = graph.getXAxis().getVal( x );\r\n    yVal = graph.getYAxis().getVal( y );\r\n\r\n    var shapeInfo = {\r\n\r\n      position: [ {\r\n        x: xVal,\r\n        y: yVal\r\n      }, {\r\n        x: xVal,\r\n        y: yVal\r\n      } ],\r\n\r\n      onChange: function( newData ) {\r\n        graph.triggerEvent( 'onAnnotationChange', newData );\r\n      },\r\n\r\n      locked: false,\r\n      selectable: true,\r\n      resizable: true,\r\n      movable: true\r\n    };\r\n\r\n    let shapeProperties = this.options.properties;\r\n\r\n    util.extend( true, shapeInfo, this.options );\r\n\r\n    this.emit( 'beforeNewShape', e, shapeInfo );\r\n\r\n    if ( this.graph.prevent( false ) ) {\r\n      return;\r\n    }\r\n\r\n    var shape = graph.newShape( shapeInfo.type, shapeInfo, false, shapeProperties );\r\n\r\n    this.emit( 'createdShape', e, shape );\r\n\r\n    if ( shape ) {\r\n      self.currentShape = shape;\r\n      self.currentShapeEvent = e;\r\n    }\r\n\r\n    graph.once( 'mouseUp', () => {\r\n      if ( !this.currentShape ) { // The mouse has moved\r\n        self.emit( 'newShape', e, shape );\r\n      }\r\n    } );\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   */\r\n  onMouseMove( graph, x, y, e ) {\r\n\r\n    if ( this.currentShape ) {\r\n      this.count++;\r\n\r\n      var shape = this.currentShape;\r\n\r\n      this.currentShape = false;\r\n\r\n      if ( graph.selectedSerie && !shape.serie ) {\r\n        shape.setSerie( graph.selectedSerie );\r\n      }\r\n\r\n      shape.resizing = true;\r\n\r\n      if ( shape.options && shape.options.onCreate ) {\r\n        shape.options.onCreate.call( shape );\r\n      }\r\n\r\n      shape.draw();\r\n      graph.selectShape( shape );\r\n      shape.handleMouseDown( this.currentShapeEvent, true );\r\n      shape.handleSelected = this.options.handleSelected || 1;\r\n      shape.handleMouseMove( e, true );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   */\r\n  onMouseUp() {\r\n\r\n    if ( this.currentShape ) {\r\n      // No need to kill it as it hasn't been actually put in the dom right now\r\n\r\n      // Norman 30 July 2017: Yes but it's added in the jsGraph stack. We need to remove it. See #176\r\n      // From now on killing the shape will result in removing it from the stack as well.\r\n      this.currentShape.kill();\r\n      this.currentShape = false;\r\n    }\r\n  }\r\n\r\n}\r\n\r\nexport default PluginShape;","import * as util from '../graph.util.js';\r\n\r\nimport Plugin from './graph.plugin.js';\r\n\r\n/**\r\n * @extends Plugin\r\n */\r\nclass PluginSelectScatter extends Plugin {\r\n\r\n  constructor() {\r\n    super( ...arguments );\r\n  }\r\n\r\n  static\r\n  default () {\r\n    return {};\r\n  }\r\n  /**\r\n   * Init method\r\n   * @private\r\n   */\r\n  init( graph, options ) {\r\n\r\n    this._path = document.createElementNS( graph.ns, 'path' );\r\n\r\n    util.setAttributeTo( this._path, {\r\n      'display': 'none',\r\n      'fill': 'rgba(0,0,0,0.1)',\r\n      'stroke': 'rgba(0,0,0,1)',\r\n      'shape-rendering': 'crispEdges',\r\n      'x': 0,\r\n      'y': 0,\r\n      'height': 0,\r\n      'width': 0,\r\n      'd': ''\r\n    } );\r\n\r\n    this.graph = graph;\r\n\r\n    graph.dom.appendChild( this._path );\r\n  }\r\n\r\n  /**\r\n   * Assigns the scatter serie that should be selected to the plugin\r\n   * @param {ScatterSerie} serie - The serie\r\n   * @return {PluginSelectScatter} The current plugin instance\r\n   */\r\n  setSerie( serie ) {\r\n    this.options.serie = serie;\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   */\r\n  onMouseDown( graph, x, y, e, mute ) {\r\n\r\n    if ( !this.options.serie ) {\r\n      return;\r\n    }\r\n\r\n    const serie = graph.getSerie( this.options.serie );\r\n\r\n    this.path = `M ${x} ${y} `;\r\n    this.currentX = x;\r\n    this.currentY = y;\r\n\r\n    this.xs = [ serie.getXAxis().getVal( x - graph.getPaddingLeft() ) ];\r\n    this.ys = [ serie.getYAxis().getVal( y - graph.getPaddingTop() ) ];\r\n    this._path.setAttribute( 'd', '' );\r\n    this._path.setAttribute( 'display', 'block' );\r\n\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   */\r\n  onMouseMove( graph, x, y, e, mute ) {\r\n\r\n    if ( !this.options.serie ) {\r\n      return;\r\n    }\r\n\r\n    const serie = graph.getSerie( this.options.serie );\r\n\r\n    if ( Math.pow( ( x - this.currentX ), 2 ) + Math.pow( ( y - this.currentY ), 2 ) > 25 ) {\r\n\r\n      this.path += ` L ${x} ${y} `;\r\n      this.currentX = x;\r\n      this.currentY = y;\r\n\r\n      this.xs.push( serie.getXAxis().getVal( x - graph.getPaddingLeft() ) );\r\n      this.ys.push( serie.getYAxis().getVal( y - graph.getPaddingTop() ) );\r\n\r\n      this._path.setAttribute( 'd', `${this.path} z` );\r\n\r\n      this.findPoints();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   */\r\n  findPoints() {\r\n\r\n    if ( !this.options.serie ) {\r\n      return;\r\n    }\r\n\r\n    const serie = this.graph.getSerie( this.options.serie );\r\n\r\n    var data = serie.waveform;\r\n    var selected = [];\r\n    var counter = 0,\r\n      j2;\r\n    for ( var i = 0, l = data.getLength(); i < l; i += 1 ) {\r\n\r\n      counter = 0;\r\n      for ( var j = 0, k = this.xs.length; j < k; j += 1 ) {\r\n\r\n        if ( j == k - 1 ) {\r\n          j2 = 0;\r\n        } else {\r\n          j2 = j + 1;\r\n        }\r\n\r\n        if ( ( ( this.ys[ j ] < data.getY( i ) && this.ys[ j2 ] > data.getY( i ) ) || ( this.ys[ j ] > data.getY( i ) && this.ys[ j2 ] < data.getY( i ) ) ) ) {\r\n\r\n          if ( data.getX( i ) > ( ( data.getY( i ) - this.ys[ j ] ) / ( this.ys[ j2 ] - this.ys[ j ] ) ) * ( this.xs[ j2 ] - this.xs[ j ] ) + this.xs[ j ] ) {\r\n            counter++;\r\n          }\r\n        }\r\n      }\r\n\r\n      if ( counter % 2 == 1 ) {\r\n\r\n        selected.push( i );\r\n        serie.selectMarker( i, true, 'selected' );\r\n      } else {\r\n        serie.unselectMarker( i );\r\n      }\r\n\r\n    }\r\n\r\n    this.selected = selected;\r\n    this.emit( 'selectionProcess', selected );\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   */\r\n  onMouseUp( graph, x, y, e ) {\r\n    this._path.setAttribute( 'display', 'none' );\r\n    this.emit( 'selectionEnd', this.selected );\r\n  }\r\n\r\n}\r\n\r\nexport default PluginSelectScatter;","import * as util from '../graph.util.js';\r\n\r\nimport Plugin from './graph.plugin.js';\r\n\r\n/**\r\n * @class PluginZoom\r\n * @implements Plugin\r\n */\r\nclass PluginZoom extends Plugin {\r\n\r\n  constructor() {\r\n    super( ...arguments );\r\n  }\r\n\r\n  static\r\n  default () {\r\n\r\n    return {\r\n      'axes': 'all'\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Init method\r\n   * @private\r\n   */\r\n  init( graph, options ) {\r\n\r\n    this._zoomingGroup = document.createElementNS( graph.ns, 'g' );\r\n    this._zoomingSquare = document.createElementNS( graph.ns, 'rect' );\r\n    this._zoomingSquare.setAttribute( 'display', 'none' );\r\n\r\n    util.setAttributeTo( this._zoomingSquare, {\r\n      'display': 'none',\r\n      'fill': 'rgba(171,12,12,0.2)',\r\n      'stroke': 'rgba(171,12,12,1)',\r\n      'shape-rendering': 'crispEdges',\r\n      'x': 0,\r\n      'y': 0,\r\n      'height': 0,\r\n      'width': 0,\r\n      'pointer-events': 'none'\r\n    } );\r\n\r\n    this.graph = graph;\r\n    graph.groupEvent.appendChild( this._zoomingGroup );\r\n    this._zoomingGroup.appendChild( this._zoomingSquare );\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   */\r\n  onMouseDown( graph, x, y, e, mute ) {\r\n\r\n    var zoomMode = this.options.zoomMode;\r\n\r\n    if ( !zoomMode ) {\r\n      return;\r\n    }\r\n\r\n    this._zoomingMode = zoomMode;\r\n\r\n    if ( x === undefined ) {\r\n      this._backedUpZoomMode = this._zoomingMode;\r\n      this._zoomingMode = 'y';\r\n      x = 0;\r\n    }\r\n\r\n    if ( y === undefined ) {\r\n      this._backedUpZoomMode = this._zoomingMode;\r\n      this._zoomingMode = 'x';\r\n      y = 0;\r\n    }\r\n\r\n    this._zoomingXStart = x;\r\n    this._zoomingYStart = y;\r\n    this.x1 = x - graph.getPaddingLeft();\r\n    this.y1 = y - graph.getPaddingTop();\r\n\r\n    this._zoomingSquare.setAttribute( 'width', 0 );\r\n    this._zoomingSquare.setAttribute( 'height', 0 );\r\n    this._zoomingSquare.setAttribute( 'display', 'block' );\r\n\r\n    switch ( this._zoomingMode ) {\r\n\r\n      case 'x':\r\n        this._zoomingSquare.setAttribute( 'y', graph.options.paddingTop );\r\n        this._zoomingSquare.setAttribute( 'height', graph.getDrawingHeight() - graph.shift.bottom );\r\n        break;\r\n\r\n      case 'y':\r\n        this._zoomingSquare.setAttribute( 'x', graph.options.paddingLeft /* + this.shift[1]*/ );\r\n        this._zoomingSquare.setAttribute( 'width', graph.getDrawingWidth() /* - this.shift[1] - this.shift[2]*/ );\r\n        break;\r\n\r\n      case 'forceY2':\r\n\r\n        this.y2 = graph.getYAxis().getPx( this.options.forcedY ) + graph.options.paddingTop;\r\n\r\n        break;\r\n\r\n    }\r\n\r\n    if ( this.options.onZoomStart && !mute ) {\r\n      this.options.onZoomStart( graph, x, y, e, mute );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   */\r\n  onMouseMove( graph, x, y, e, mute ) {\r\n\r\n    //\tthis._zoomingSquare.setAttribute('display', 'none');\r\n\r\n    //\tthis._zoomingSquare.setAttribute('transform', 'translate(' + Math.random() + ', ' + Math.random() + ') scale(10, 10)');\r\n    switch ( this._zoomingMode ) {\r\n\r\n      case 'xy':\r\n        this._zoomingSquare.setAttribute( 'x', Math.min( this._zoomingXStart, x ) );\r\n        this._zoomingSquare.setAttribute( 'y', Math.min( this._zoomingYStart, y ) );\r\n        this._zoomingSquare.setAttribute( 'width', Math.abs( this._zoomingXStart - x ) );\r\n        this._zoomingSquare.setAttribute( 'height', Math.abs( this._zoomingYStart - y ) );\r\n\r\n        break;\r\n\r\n      case 'forceY2':\r\n        this._zoomingSquare.setAttribute( 'y', Math.min( this._zoomingYStart, this.y2 ) );\r\n        this._zoomingSquare.setAttribute( 'height', Math.abs( this._zoomingYStart - this.y2 ) );\r\n        this._zoomingSquare.setAttribute( 'x', Math.min( this._zoomingXStart, x ) );\r\n        this._zoomingSquare.setAttribute( 'width', Math.abs( this._zoomingXStart - x ) );\r\n\r\n        break;\r\n\r\n      case 'x':\r\n        this._zoomingSquare.setAttribute( 'x', Math.min( this._zoomingXStart, x ) );\r\n        this._zoomingSquare.setAttribute( 'width', Math.abs( this._zoomingXStart - x ) );\r\n\r\n        break;\r\n\r\n      case 'y':\r\n        this._zoomingSquare.setAttribute( 'y', Math.min( this._zoomingYStart, y ) );\r\n        this._zoomingSquare.setAttribute( 'height', Math.abs( this._zoomingYStart - y ) );\r\n        break;\r\n\r\n    }\r\n\r\n    if ( this.options.onZoomMove && !mute ) {\r\n\r\n      this.options.onZoomMove( graph, x, y, e, mute );\r\n    }\r\n    //\t\tthis._zoomingSquare.setAttribute('display', 'block');\r\n\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   */\r\n  onMouseUp( graph, x, y, e, mute ) {\r\n    var self = this;\r\n    this.removeZone();\r\n\r\n    var _x = x - graph.options.paddingLeft;\r\n    var _y = y - graph.options.paddingTop;\r\n\r\n    this.emit( 'beforeZoom', {\r\n      graph: graph,\r\n      x: x,\r\n      y: y,\r\n      e: e,\r\n      mute: mute\r\n    } );\r\n\r\n    if ( graph.prevent( false ) ) {\r\n\r\n      // This doesn't work !\r\n      //graph.prevent( true ); // Cancel future click event\r\n      return;\r\n    }\r\n\r\n    if ( ( x - this._zoomingXStart == 0 && this._zoomingMode != 'y' ) || ( y - this._zoomingYStart == 0 && this._zoomingMode != 'x' ) ) {\r\n      return;\r\n    }\r\n\r\n    if ( this.options.transition || this.options.smooth ) {\r\n\r\n      let modeX = false,\r\n        modeY = false;\r\n\r\n      if ( this._zoomingMode == 'x' || this._zoomingMode == 'xy' || this._zoomingMode == 'forceY2' ) {\r\n\r\n        this.fullX = false;\r\n        this.toAxes( function( axis ) {\r\n\r\n          axis._pluginZoomMin = axis.getCurrentMin();\r\n          axis._pluginZoomMax = axis.getCurrentMax();\r\n\r\n          axis._pluginZoomMinFinal = Math.min( axis.getVal( _x ), axis.getVal( self.x1 ) );\r\n          axis._pluginZoomMaxFinal = Math.max( axis.getVal( _x ), axis.getVal( self.x1 ) );\r\n        }, false, true, false );\r\n\r\n        modeX = true;\r\n\r\n      }\r\n\r\n      if ( this._zoomingMode == 'y' || this._zoomingMode == 'xy' ) {\r\n\r\n        this.fullY = false;\r\n        this.toAxes( function( axis ) {\r\n\r\n          axis._pluginZoomMin = axis.getCurrentMin();\r\n          axis._pluginZoomMax = axis.getCurrentMax();\r\n\r\n          axis._pluginZoomMinFinal = Math.min( axis.getVal( _y ), axis.getVal( self.y1 ) );\r\n          axis._pluginZoomMaxFinal = Math.max( axis.getVal( _y ), axis.getVal( self.y1 ) );\r\n\r\n        }, false, false, true );\r\n\r\n        modeY = true;\r\n      }\r\n\r\n      if ( this._zoomingMode == 'forceY2' ) {\r\n\r\n        this.fullY = false;\r\n        this.toAxes( function( axis ) {\r\n\r\n          axis._pluginZoomMin = axis.getCurrentMin();\r\n          axis._pluginZoomMax = axis.getCurrentMax();\r\n\r\n          axis._pluginZoomMinFinal = Math.min( axis.getVal( self.y2 ), axis.getVal( self.y1 ) );\r\n          axis._pluginZoomMaxFinal = Math.max( axis.getVal( self.y2 ), axis.getVal( self.y1 ) );\r\n\r\n        }, false, false, true );\r\n\r\n        modeY = true;\r\n      }\r\n\r\n      this.transition( modeX, modeY, 'zoomEnd' );\r\n\r\n    } else {\r\n\r\n      switch ( this._zoomingMode ) {\r\n        case 'x':\r\n          this.fullX = false;\r\n          this.toAxes( '_doZoom', [ _x, this.x1 ], true, false );\r\n          break;\r\n        case 'y':\r\n          this.fullY = false;\r\n          this.toAxes( '_doZoom', [ _y, this.y1 ], false, true );\r\n          break;\r\n        case 'xy':\r\n          this.fullX = false;\r\n          this.fullY = false;\r\n          this.toAxes( '_doZoom', [ _x, this.x1 ], true, false );\r\n          this.toAxes( '_doZoom', [ _y, this.y1 ], false, true );\r\n          break;\r\n\r\n        case 'forceY2':\r\n\r\n          this.fullX = false;\r\n          this.fullY = false;\r\n\r\n          this.toAxes( '_doZoom', [ _x, this.x1 ], true, false );\r\n          this.toAxes( '_doZoom', [ this.y1, this.y2 ], false, true );\r\n\r\n          break;\r\n      }\r\n\r\n      //  graph.prevent( true ); // WHat are you doing ??\r\n      graph.draw();\r\n\r\n      if ( this._backedUpZoomMode ) {\r\n        this._zoomingMode = this._backedUpZoomMode;\r\n      }\r\n\r\n      this.emit( 'zoomed' );\r\n\r\n      graph.pluginYieldActiveState();\r\n\r\n    }\r\n\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   */\r\n  removeZone() {\r\n\r\n    this._zoomingSquare.setAttribute( 'display', 'none' );\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   */\r\n  onMouseWheel( delta, e, coordX, coordY, options ) {\r\n\r\n    if ( !options ) {\r\n      options = {};\r\n    }\r\n\r\n    if ( !options.baseline ) {\r\n      options.baseline = 0;\r\n    }\r\n\r\n    let baseline = options.baseline;\r\n\r\n    if ( options.baseline == 'mousePosition' ) {\r\n      baseline = this.graph.getYAxis().getVal( coordY );\r\n    }\r\n\r\n    /*var serie;\r\n    if ( ( serie = this.graph.getSelectedSerie() ) ) {\r\n\r\n      if ( serie.getYAxis().handleMouseWheel( delta, e ) ) {\r\n        return;\r\n      }\r\n    }*/\r\n\r\n    var doX = ( options.direction == 'x' );\r\n    var doY = !( options.direction !== 'y' );\r\n\r\n    this.toAxes( 'handleMouseWheel', [ delta, e, baseline ], doX, doY );\r\n\r\n    this.graph.drawSeries();\r\n\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   */\r\n  onDblClick( x, y, e, pref, mute ) {\r\n\r\n    var graph = this.graph;\r\n    this.emit( 'beforeDblClick', {\r\n      graph: graph,\r\n      x: x,\r\n      y: y,\r\n      pref: pref,\r\n      e: e,\r\n      mute: mute\r\n    } );\r\n\r\n    if ( graph.prevent( false ) ) {\r\n      return;\r\n    }\r\n\r\n    if ( this.options.transition || this.options.smooth ) {\r\n\r\n      var modeX = false,\r\n        modeY = false;\r\n\r\n      if ( pref.mode == 'xtotal' || pref.mode == 'total' ) {\r\n\r\n        this.toAxes( function( axis ) {\r\n          axis._pluginZoomMin = axis.getCurrentMin();\r\n          axis._pluginZoomMax = axis.getCurrentMax();\r\n\r\n          axis._pluginZoomMinFinal = axis.getMinValue() - ( axis.options.axisDataSpacing.min * axis.getInterval() );\r\n          axis._pluginZoomMaxFinal = axis.getMaxValue() + ( axis.options.axisDataSpacing.max * axis.getInterval() );\r\n\r\n        }, false, true, false );\r\n\r\n        modeX = true;\r\n\r\n      }\r\n\r\n      if ( pref.mode == 'ytotal' || pref.mode == 'total' ) {\r\n\r\n        this.toAxes( function( axis ) {\r\n\r\n          axis._pluginZoomMin = axis.getCurrentMin();\r\n          axis._pluginZoomMax = axis.getCurrentMax();\r\n\r\n          axis._pluginZoomMinFinal = axis.getMinValue() - ( axis.options.axisDataSpacing.min * axis.getInterval() );\r\n          axis._pluginZoomMaxFinal = axis.getMaxValue() + ( axis.options.axisDataSpacing.max * axis.getInterval() );\r\n\r\n        }, false, false, true );\r\n\r\n        modeY = true;\r\n\r\n      }\r\n\r\n      let x, y;\r\n\r\n      if ( pref.mode == 'gradualX' || pref.mode == 'gradualY' || pref.mode == 'gradual' || pref.mode == 'gradualXY' ) {\r\n\r\n        x = false,\r\n          y = false;\r\n\r\n        if ( pref.mode == 'gradualX' || pref.mode == 'gradual' || pref.mode == 'gradualXY' ) {\r\n          x = true;\r\n          modeX = true;\r\n        }\r\n\r\n        if ( pref.mode == 'gradualY' || pref.mode == 'gradual' || pref.mode == 'gradualXY' ) {\r\n          y = true;\r\n          modeY = true;\r\n        }\r\n\r\n        this.toAxes( function( axis ) {\r\n\r\n          axis._pluginZoomMin = axis.getCurrentMin();\r\n          axis._pluginZoomMax = axis.getCurrentMax();\r\n\r\n          axis._pluginZoomMinFinal = axis.getCurrentMin() - ( axis.getCurrentMax() - axis.getCurrentMin() );\r\n          axis._pluginZoomMaxFinal = axis.getCurrentMax() + ( axis.getCurrentMax() - axis.getCurrentMin() );\r\n\r\n        }, false, x, y );\r\n\r\n      }\r\n\r\n      this.transition( modeX, modeY, 'dblClick' );\r\n      return;\r\n    }\r\n\r\n    var xAxis = this.graph.getXAxis(),\r\n      yAxis = this.graph.getYAxis();\r\n\r\n    if ( pref.mode == 'xtotal' ) {\r\n\r\n      this.toAxes( 'setMinMaxToFitSeries', null, true, false );\r\n      this.fullX = true;\r\n      this.fullY = false;\r\n\r\n    } else if ( pref.mode == 'ytotal' ) {\r\n\r\n      this.toAxes( 'setMinMaxToFitSeries', null, false, true );\r\n      this.fullX = false;\r\n      this.fullY = true;\r\n\r\n    } else if ( pref.mode == 'total' ) {\r\n\r\n      this.toAxes( 'setMinMaxToFitSeries', null, true, true );\r\n\r\n      this.fullX = true;\r\n      this.fullY = true;\r\n      // Nothing to do here\r\n      /*        this.graph._applyToAxes( function( axis ) {\r\n\r\n          axis.emit( 'zoom', axis.currentAxisMin, axis.currentAxisMax, axis );\r\n\r\n        }, null, true, true );\r\n*/\r\n    } else {\r\n\r\n      x -= this.graph.options.paddingLeft;\r\n      y -= this.graph.options.paddingTop;\r\n\r\n      var\r\n        xMin = xAxis.getCurrentMin(),\r\n        xMax = xAxis.getCurrentMax(),\r\n        xActual = xAxis.getVal( x ),\r\n        diffX = xMax - xMin,\r\n\r\n        yMin = yAxis.getCurrentMin(),\r\n        yMax = yAxis.getCurrentMax(),\r\n        yActual = yAxis.getVal( y ),\r\n        diffY = yMax - yMin;\r\n\r\n      if ( pref.mode == 'gradualXY' || pref.mode == 'gradualX' ) {\r\n\r\n        var ratio = ( xActual - xMin ) / ( xMax - xMin );\r\n        xMin = Math.max( xAxis.getMinValue() - xAxis.getInterval() * xAxis.options.axisDataSpacing.min, xMin - diffX * ratio );\r\n        xMax = Math.min( xAxis.getMaxValue() + xAxis.getInterval() * xAxis.options.axisDataSpacing.max, xMax + diffX * ( 1 - ratio ) );\r\n        xAxis.setCurrentMin( xMin );\r\n        xAxis.setCurrentMax( xMax );\r\n\r\n        if ( xAxis.options.onZoom ) {\r\n          xAxis.options.onZoom( xMin, xMax );\r\n        }\r\n\r\n        xAxis.cacheCurrentMin();\r\n        xAxis.cacheCurrentMax();\r\n        xAxis.cacheInterval();\r\n\r\n      }\r\n\r\n      if ( pref.mode == 'gradualXY' || pref.mode == 'gradualY' ) {\r\n\r\n        var ratio = ( yActual - yMin ) / ( yMax - yMin );\r\n        yMin = Math.max( yAxis.getMinValue() - yAxis.getInterval() * yAxis.options.axisDataSpacing.min, yMin - diffY * ratio );\r\n        yMax = Math.min( yAxis.getMaxValue() + yAxis.getInterval() * yAxis.options.axisDataSpacing.max, yMax + diffY * ( 1 - ratio ) );\r\n        yAxis.setCurrentMin( yMin );\r\n        yAxis.setCurrentMax( yMax );\r\n\r\n        if ( yAxis.options.onZoom ) {\r\n          yAxis.options.onZoom( yMin, yMax );\r\n        }\r\n\r\n        yAxis.cacheCurrentMin();\r\n        yAxis.cacheCurrentMax();\r\n        yAxis.cacheInterval();\r\n\r\n      }\r\n\r\n    }\r\n\r\n    graph.pluginYieldActiveState();\r\n\r\n    this.graph.draw();\r\n    /*\r\n        this.emit( \"dblClick\", {\r\n          graph: graph,\r\n          x: x,\r\n          y: y,\r\n          pref: pref,\r\n          e: e,\r\n          mute: mute\r\n        } );\r\n\r\n        if ( this.options.onDblClick && !mute ) {\r\n          this.options.onDblClick( graph, x, y, e, mute );\r\n        }*/\r\n\r\n  }\r\n\r\n  transition( modeX, modeY, eventName ) {\r\n\r\n    var self = this,\r\n      maxTime = 500;\r\n\r\n    if ( !self.gradualUnzoomStart ) {\r\n      self.gradualUnzoomStart = Date.now();\r\n    }\r\n\r\n    window.requestAnimationFrame( function() {\r\n\r\n      var dt = Date.now() - self.gradualUnzoomStart;\r\n\r\n      if ( dt > maxTime ) {\r\n        dt = maxTime;\r\n      }\r\n      var progress = Math.sin( dt / maxTime * Math.PI / 2 );\r\n\r\n      self.toAxes( function( axis ) {\r\n\r\n        axis.setCurrentMin( axis._pluginZoomMin + ( axis._pluginZoomMinFinal - axis._pluginZoomMin ) * progress );\r\n        axis.setCurrentMax( axis._pluginZoomMax + ( axis._pluginZoomMaxFinal - axis._pluginZoomMax ) * progress );\r\n\r\n        axis.cacheCurrentMin();\r\n        axis.cacheCurrentMax();\r\n        axis.cacheInterval();\r\n\r\n      }, false, modeX, modeY );\r\n\r\n      self.graph.draw();\r\n\r\n      if ( dt < maxTime ) {\r\n\r\n        self.transition( modeX, modeY, eventName );\r\n        self.emit( 'zooming' );\r\n\r\n      } else {\r\n\r\n        self.emit( 'zoomed' );\r\n        self.graph.pluginYieldActiveState();\r\n\r\n        if ( eventName ) {\r\n          self.emit( eventName );\r\n        }\r\n        self.gradualUnzoomStart = 0;\r\n\r\n      }\r\n\r\n    } );\r\n  }\r\n\r\n  isFullX() {\r\n    return this.fullX;\r\n  }\r\n\r\n  isFullY() {\r\n    return this.fullY;\r\n  }\r\n\r\n  toAxes( func, params, tb, lr ) {\r\n\r\n    var axes = this.options.axes;\r\n\r\n    if ( !axes || ( axes == 'serieSelected' && !this.graph.getSelectedSerie() ) ) {\r\n      axes = 'all';\r\n    }\r\n\r\n    switch ( axes ) {\r\n\r\n      case 'all':\r\n        this.graph._applyToAxes.apply( this.graph, arguments );\r\n        break;\r\n\r\n      case 'serieSelected':\r\n\r\n        var serie = this.graph.getSelectedSerie();\r\n        if ( serie ) {\r\n\r\n          if ( tb ) {\r\n\r\n            if ( typeof func == 'string' ) {\r\n              serie.getXAxis()[ func ].apply( serie.getXAxis(), params );\r\n            } else {\r\n              func.apply( serie.getXAxis(), params );\r\n            }\r\n          }\r\n\r\n          if ( lr ) {\r\n\r\n            if ( typeof func == 'string' ) {\r\n              serie.getYAxis()[ func ].apply( serie.getYAxis(), params );\r\n            } else {\r\n              func.apply( serie.getYAxis(), params );\r\n            }\r\n\r\n          }\r\n        }\r\n\r\n        break;\r\n\r\n      default:\r\n\r\n        if ( !Array.isArray( axes ) ) {\r\n          axes = [ axes ];\r\n        }\r\n\r\n        for ( let axis of axes ) {\r\n\r\n          if ( axis.isX() && tb ) { // Not the best check\r\n\r\n            if ( typeof func == 'string' ) {\r\n              axis[ func ].apply( axis, params );\r\n            } else {\r\n              func.apply( axis, params );\r\n            }\r\n\r\n          } else if ( axis.isY() && lr ) { // Not the best check\r\n\r\n            if ( typeof func == 'string' ) {\r\n              axis[ func ].apply( axis, params );\r\n            } else {\r\n              func.apply( axis, params );\r\n            }\r\n\r\n          }\r\n        }\r\n        break;\r\n    }\r\n  }\r\n\r\n}\r\n\r\nexport default PluginZoom;","var memory = {},\r\n  memoryHead = {},\r\n  memoryCount = {},\r\n  memoryLimit = {};\r\n\r\nfunction emptyMemory( store ) {\r\n  memory[ store ] = {};\r\n  memoryCount[ store ] = 0;\r\n}\r\n\r\nfunction createStoreMemory( store, limit ) {\r\n  limit = limit || 50;\r\n  if ( !memory[ store ] ) {\r\n    memory[ store ] = {};\r\n    memoryCount[ store ] = 0;\r\n  }\r\n\r\n  memoryLimit[ store ] = limit;\r\n}\r\n\r\nfunction getFromMemory( store, index ) {\r\n  var obj, head;\r\n\r\n  if ( memory[ store ] && memory[ store ][ index ] ) {\r\n\r\n    head = memoryHead[ store ];\r\n\r\n    obj = memory[ store ][ index ];\r\n    obj.prev = head;\r\n    obj.next = head.next;\r\n    head.next.prev = obj;\r\n    head.next = obj;\r\n\r\n    memoryHead[ store ] = obj;\r\n    return obj.data;\r\n  }\r\n}\r\n\r\nfunction storeInMemory( store, index, data ) {\r\n\r\n  var toStore, toDelete, head;\r\n  if ( memory[ store ] && memoryCount[ store ] !== undefined && memoryLimit[ store ] ) {\r\n    head = memoryHead[ store ];\r\n\r\n    if ( memory[ store ][ index ] ) {\r\n\r\n      getFromMemory( store, index );\r\n      memory[ store ][ index ].data.data = data;\r\n      memory[ store ][ index ].data.timeout = Date.now();\r\n\r\n    } else {\r\n\r\n      toStore = {\r\n        data: {\r\n          data: data,\r\n          timeout: Date.now()\r\n        }\r\n      };\r\n\r\n      if ( typeof head == 'undefined' ) {\r\n        toStore.prev = toStore;\r\n        toStore.next = toStore;\r\n      } else {\r\n        toStore.prev = head.prev;\r\n        toStore.next = head.next;\r\n        head.next.prev = toStore;\r\n        head.next = toStore;\r\n      }\r\n\r\n      memoryHead[ store ] = toStore;\r\n      memory[ store ][ index ] = toStore;\r\n      memoryCount[ store ]++;\r\n    }\r\n\r\n    // Remove oldest one\r\n    if ( memoryCount[ store ] > memoryLimit[ store ] && head ) {\r\n      toDelete = head.next;\r\n      head.next.next.prev = head;\r\n      head.next = head.next.next;\r\n      toDelete.next.next = undefined;\r\n      toDelete.next.prev = undefined;\r\n      memoryCount[ store ]--;\r\n    }\r\n\r\n    return data;\r\n  }\r\n}\r\n\r\nexport function create( store, limitMemory ) {\r\n  createStoreMemory( store, limitMemory );\r\n}\r\n\r\nexport function get( store, index ) {\r\n  var result;\r\n  if ( ( result = getFromMemory( store, index ) ) != undefined ) {\r\n    return result;\r\n  }\r\n}\r\n\r\nexport function store( store, index, value ) {\r\n  storeInMemory( store, index, value );\r\n  return value;\r\n}\r\n\r\nexport function empty( store ) {\r\n  emptyMemory( store );\r\n}\r\n\r\nexport function exist( store ) {\r\n  return ( memory[ store ] );\r\n}\r\n\r\nexport default get;","import Graph from '../graph.core.js';\r\nimport LRU from '../graph.lru.js';\r\nimport * as util from '../graph.util.js';\r\n\r\nimport Plugin from './graph.plugin.js';\r\n\r\n/**\r\n * @class PluginTimeSerieManager\r\n * @implements Plugin\r\n */\r\nclass PluginTimeSerieManager extends Plugin {\r\n\r\n  constructor() {\r\n\r\n    super( ...arguments );\r\n\r\n    this.series = [];\r\n    this.plugins = [];\r\n    this.currentSlots = {};\r\n\r\n    this.requestLevels = new Map();\r\n    this.update = ( noRecalculate, force ) => {\r\n\r\n      this.series.forEach( function( serie ) {\r\n\r\n        this.updateSerie( serie, noRecalculate );\r\n\r\n      } );\r\n\r\n      if ( !noRecalculate ) {\r\n        this.recalculateSeries( force );\r\n      }\r\n    };\r\n\r\n  }\r\n\r\n  static\r\n  default () {\r\n\r\n    return {\r\n\r\n      LRUName: 'PluginTimeSerieManager',\r\n      intervals: [ 1000, 15000, 60000, 900000, 3600000, 8640000 ],\r\n      maxParallelRequests: 3,\r\n      optimalPxPerPoint: 2,\r\n      nbPoints: 1000,\r\n      url: ''\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Init method\r\n   * @private\r\n   * @memberof PluginTimeSerieManager\r\n   */\r\n  init( graph, options ) {\r\n    this.graph = graph;\r\n    LRU.create( this.options.LRUName, 200 );\r\n    this.requestsRunning = 0;\r\n\r\n  }\r\n\r\n  setURL( url ) {\r\n    this.options.url = url;\r\n    return this;\r\n  }\r\n\r\n  setAvailableIntervals() {\r\n    this.options.intervals = arguments;\r\n  }\r\n\r\n  newSerie( serieName, serieOptions, serieType, dbElements, noZoneSerie ) {\r\n    var s = this.graph.newSerie( serieName, serieOptions, serieType );\r\n\r\n    this.currentSlots[ serieName ] = {\r\n      min: 0,\r\n      max: 0,\r\n      interval: 0\r\n    };\r\n\r\n    s.on( 'hide', function() {\r\n\r\n      if ( s._zoneSerie ) {\r\n\r\n        s._zoneSerie.hide();\r\n      }\r\n    } );\r\n\r\n    s.on( 'show', function() {\r\n\r\n      if ( s._zoneSerie ) {\r\n        s._zoneSerie.show();\r\n      }\r\n    } );\r\n\r\n    s.setInfo( 'timeSerieManagerDBElements', dbElements );\r\n\r\n    if ( !noZoneSerie ) {\r\n      s._zoneSerie = this.graph.newSerie( `${serieName }_zone`, {}, Graph.SERIE_ZONE );\r\n    }\r\n\r\n    this.series.push( s );\r\n    return s;\r\n  }\r\n\r\n  registerPlugin( plugin, event ) {\r\n\r\n    var index;\r\n    if ( ( index = this.plugins.indexOf( plugin ) ) > -1 ) {\r\n\r\n      for ( var i = 1; i < arguments.length; i++ ) {\r\n        plugin.removeListener( arguments[ i ], this.update );\r\n      }\r\n    }\r\n\r\n    for ( var i = 1; i < arguments.length; i++ ) {\r\n      plugin.on( arguments[ i ], this.update );\r\n    }\r\n  }\r\n\r\n  updateSerie( serie, noRecalculate ) {\r\n\r\n    var self = this;\r\n    var from = serie.getXAxis().getCurrentMin();\r\n    var to = serie.getXAxis().getCurrentMax();\r\n    var priority = 1;\r\n\r\n    var optimalInterval = this.getOptimalInterval( to - from );\r\n    var optimalIntervalIndex = this.options.intervals.indexOf( optimalInterval );\r\n    var interval;\r\n\r\n    this.cleanRegister( optimalIntervalIndex );\r\n\r\n    for ( var i = optimalIntervalIndex; i <= optimalIntervalIndex + 1; i++ ) {\r\n\r\n      interval = this.options.intervals[ i ];\r\n      var startSlotId = self.computeSlotID( from, interval );\r\n      var endSlotId = self.computeSlotID( to, interval );\r\n\r\n      var intervalMultipliers = [\r\n        [ 2, 5, 6 ],\r\n        [ 1, 2, 4 ],\r\n        [ 0, 1, 3 ]\r\n      ];\r\n\r\n      intervalMultipliers.forEach( function( multiplier ) {\r\n\r\n        var firstSlotId = startSlotId - multiplier[ 0 ] * ( endSlotId - startSlotId );\r\n        var lastSlotId = endSlotId + multiplier[ 0 ] * ( endSlotId - startSlotId );\r\n\r\n        var slotId = firstSlotId;\r\n\r\n        while ( slotId <= lastSlotId ) {\r\n\r\n          if ( self.computeTimeMin( slotId, interval ) > Date.now() ) {\r\n            break;\r\n          }\r\n\r\n          self.register( serie, slotId, interval, interval == optimalInterval ? multiplier[ 1 ] : multiplier[ 2 ], true, noRecalculate );\r\n          slotId++;\r\n        }\r\n\r\n      } );\r\n\r\n    }\r\n\r\n    this.processRequests();\r\n  }\r\n\r\n  cleanRegister( interval ) {\r\n\r\n    if ( !this.requestLevels ) {\r\n      return;\r\n    }\r\n\r\n    this.requestLevels.forEach( ( levelArray ) => {\r\n\r\n      levelArray.forEach( ( levelElement, levelIndex ) => {\r\n\r\n        if ( levelElement[ 4 ] < interval ) {\r\n          levelArray.splice( levelIndex, 1 );\r\n        }\r\n      } );\r\n\r\n    } );\r\n  }\r\n\r\n  register( serie, slotId, interval, priority, noProcess, noRecalculate ) {\r\n\r\n    var id = this.computeUniqueID( serie, slotId, interval );\r\n\r\n    var data = LRU.get( this.options.LRUName, id );\r\n\r\n    if ( !data || ( this.computeTimeMax( slotId, interval ) > Date.now() && data.timeout < ( Date.now() - ( noRecalculate ? 5000 : 100000 ) ) ) && priority == 1 ) {\r\n\r\n      this.request( serie, slotId, interval, priority, id, noProcess );\r\n    }\r\n  }\r\n\r\n  request( serie, slotId, interval, priority, slotName, noProcess ) {\r\n\r\n    for ( var i in this.requestLevels ) {\r\n\r\n      if ( i == priority ) {\r\n        continue;\r\n      }\r\n\r\n      if ( this.requestLevels[ i ][ slotName ] ) {\r\n\r\n        if ( this.requestLevels[ i ][ slotName ][ 0 ] !== 1 ) { // If the request is not pending\r\n\r\n          delete this.requestLevels[ i ][ slotName ];\r\n\r\n        } else {\r\n          this.requestLevels[ i ][ slotName ][ 5 ] = priority;\r\n        }\r\n\r\n      }\r\n    }\r\n\r\n    if ( this.requestLevels[ priority ] && this.requestLevels[ priority ][ slotName ] ) {\r\n      return;\r\n    }\r\n\r\n    this.requestLevels[ priority ] = this.requestLevels[ priority ] || {};\r\n    this.requestLevels[ priority ][ slotName ] = [ 0, slotName, serie.getName(), slotId, interval, priority, serie.getInfo( 'timeSerieManagerDBElements' ) ];\r\n\r\n    if ( !noProcess ) {\r\n      this.processRequests();\r\n    }\r\n  }\r\n\r\n  processRequests() {\r\n\r\n    if ( this.requestsRunning >= this.options.maxParallelRequests ) {\r\n      return;\r\n    }\r\n\r\n    var self = this,\r\n      currentLevelChecking = 1,\r\n      requestToMake;\r\n\r\n    while ( true ) {\r\n\r\n      for ( var i in this.requestLevels[ currentLevelChecking ] ) {\r\n\r\n        if ( this.requestLevels[ currentLevelChecking ][ i ][ 0 ] == 1 ) { // Running request\r\n          continue;\r\n        }\r\n\r\n        requestToMake = this.requestLevels[ currentLevelChecking ][ i ];\r\n        break;\r\n      }\r\n\r\n      if ( requestToMake ) {\r\n        break;\r\n      }\r\n\r\n      currentLevelChecking++;\r\n\r\n      if ( currentLevelChecking > 10 ) {\r\n        return;\r\n      }\r\n\r\n    }\r\n\r\n    this.requestsRunning++;\r\n\r\n    if ( !requestToMake ) {\r\n      return;\r\n    }\r\n\r\n    requestToMake[ 0 ] = 1;\r\n\r\n    util.ajaxGet( {\r\n\r\n      url: this.getURL( requestToMake ),\r\n      method: 'GET',\r\n      json: true\r\n\r\n    } ).done( function( data ) {\r\n\r\n      if ( data.status == 1 ) { // Success\r\n\r\n        self.requestsRunning--;\r\n\r\n        delete self.requestLevels[ currentLevelChecking ][ i ];\r\n\r\n        LRU.store( self.options.LRUName, requestToMake[ 1 ], data.data ); // Element 1 is the unique ID\r\n        self.processRequests();\r\n\r\n        if ( requestToMake[ 5 ] == 1 && Object.keys( self.requestLevels[ 1 ] ).length == 0 ) {\r\n\r\n          self.recalculateSeries( true );\r\n        }\r\n      }\r\n\r\n    } );\r\n  }\r\n\r\n  computeTimeMax( slotId, interval ) {\r\n    return ( slotId + 1 ) * ( interval * this.options.nbPoints );\r\n  }\r\n\r\n  computeTimeMin( slotId, interval ) {\r\n    return ( slotId ) * ( interval * this.options.nbPoints );\r\n  }\r\n\r\n  getURL( requestElements ) {\r\n\r\n    var url = this.options.url\r\n      .replace( '<measurementid>', requestElements[ 2 ] )\r\n      .replace( '<from>', this.computeTimeMin( requestElements[ 3 ], requestElements[ 4 ] ) )\r\n      .replace( '<to>', this.computeTimeMax( requestElements[ 3 ], requestElements[ 4 ] ) )\r\n      .replace( '<interval>', requestElements[ 4 ] );\r\n\r\n    var dbElements = requestElements[ 6 ] || {};\r\n\r\n    for ( var i in dbElements ) {\r\n      url = url.replace( `<${ i }>`, dbElements[ i ] );\r\n    }\r\n\r\n    return url;\r\n  }\r\n\r\n  getOptimalInterval( totalspan ) {\r\n\r\n    var optimalInterval = ( this.options.optimalPxPerPoint || 1 ) * totalspan / this.graph.getDrawingWidth(),\r\n      diff = Infinity,\r\n      optimalIntervalAmongAvailable;\r\n\r\n    this.options.intervals.forEach( function( interval ) {\r\n\r\n      var newDiff = Math.min( diff, Math.abs( interval - optimalInterval ) );\r\n      if ( diff !== newDiff ) {\r\n\r\n        optimalIntervalAmongAvailable = interval;\r\n        diff = newDiff;\r\n      }\r\n    } );\r\n\r\n    return optimalIntervalAmongAvailable || 1000;\r\n  }\r\n\r\n  computeUniqueID( serie, slotId, interval ) {\r\n    var extra = '';\r\n    var info = serie.getInfo( 'timeSerieManagerDBElements' );\r\n    for ( var i in info ) {\r\n      extra += `;${ i }:${ info[ i ]}`;\r\n    }\r\n\r\n    return `${serie.getName() };${ slotId };${ interval }${extra}`;\r\n  }\r\n\r\n  computeSlotID( time, interval ) {\r\n    return Math.floor( time / ( interval * this.options.nbPoints ) );\r\n  }\r\n\r\n  computeSlotTime( slotId, interval ) {\r\n    return slotId * ( interval * this.options.nbPoints );\r\n  }\r\n\r\n  getZoneSerie( serie ) {\r\n    return serie._zoneSerie;\r\n  }\r\n\r\n  updateZoneSerie( serieName ) {\r\n\r\n    var serie = this.graph.getSerie( serieName );\r\n\r\n    if ( !serie ) {\r\n      return;\r\n    }\r\n\r\n    if ( !serie._zoneSerie ) {\r\n      return;\r\n    }\r\n\r\n    serie._zoneSerie.setXAxis( serie.getXAxis() );\r\n    serie._zoneSerie.setYAxis( serie.getYAxis() );\r\n    serie._zoneSerie.setFillColor( serie.getLineColor() );\r\n    serie._zoneSerie.setLineColor( serie.getLineColor() );\r\n    serie._zoneSerie.setFillOpacity( 0.2 );\r\n    serie._zoneSerie.setLineOpacity( 0.3 );\r\n  }\r\n\r\n  recalculateSeries( force ) {\r\n\r\n    var self = this;\r\n\r\n    if ( this.locked ) {\r\n      return;\r\n    }\r\n\r\n    this.changed = false;\r\n\r\n    this.series.map( function( serie ) {\r\n      self.recalculateSerie( serie, force );\r\n    } );\r\n\r\n    /*if ( this.changed ) {\r\n        self.graph._applyToAxes( \"scaleToFitAxis\", [ this.graph.getXAxis(), false, undefined, undefined, false, true ], false, true );\r\n      }\r\n  */\r\n    this.changed = false;\r\n    //self.graph.autoscaleAxes();\r\n\r\n    self.graph.draw();\r\n  }\r\n\r\n  recalculateSerie( serie, force ) {\r\n\r\n    var from = serie.getXAxis().getCurrentMin(),\r\n      to = serie.getXAxis().getCurrentMax(),\r\n      interval = this.getOptimalInterval( to - from );\r\n\r\n    var startSlotId = this.computeSlotID( from, interval );\r\n    var endSlotId = this.computeSlotID( to, interval );\r\n\r\n    var data = [];\r\n    var dataMinMax = [];\r\n\r\n    if ( !force && interval == this.currentSlots[ serie.getName() ].interval && this.currentSlots[ serie.getName() ].min <= startSlotId && this.currentSlots[ serie.getName() ].max >= endSlotId ) {\r\n      return;\r\n    }\r\n\r\n    startSlotId -= 2;\r\n    endSlotId += 2;\r\n\r\n    this.currentSlots[ serie.getName() ].min = startSlotId;\r\n    this.currentSlots[ serie.getName() ].max = endSlotId;\r\n    this.currentSlots[ serie.getName() ].interval = interval;\r\n\r\n    var slotId = startSlotId;\r\n\r\n    while ( slotId <= endSlotId ) {\r\n\r\n      const lruData = LRU.get( this.options.LRUName, this.computeUniqueID( serie, slotId, interval ) );\r\n      if ( lruData ) {\r\n\r\n        data = data.concat( lruData.data.mean );\r\n        dataMinMax = dataMinMax.concat( lruData.data.minmax );\r\n\r\n      } else {\r\n\r\n        this.recalculateSerieUpwards( serie, slotId, interval, data, dataMinMax );\r\n      }\r\n\r\n      slotId++;\r\n    }\r\n\r\n    this.changed = true;\r\n\r\n    serie.setData( data );\r\n\r\n    if ( serie._zoneSerie ) {\r\n      serie._zoneSerie.setData( dataMinMax );\r\n    }\r\n  }\r\n\r\n  setIntervalCheck( interval ) {\r\n\r\n    if ( this.interval ) {\r\n      clearInterval( this.interval );\r\n    }\r\n\r\n    this.update( true, true );\r\n    this.interval = setInterval( () => {\r\n      this.update( true, false );\r\n    }, interval );\r\n  }\r\n\r\n  recalculateSerieUpwards( serie, downSlotId, downInterval, data, dataMinMax ) {\r\n\r\n    var intervals = this.options.intervals.slice( 0 );\r\n    intervals.sort();\r\n\r\n    var nextInterval = intervals[ intervals.indexOf( downInterval ) + 1 ] || -1;\r\n    if ( nextInterval < 0 ) {\r\n      return [];\r\n    }\r\n\r\n    var newSlotTime = this.computeSlotTime( downSlotId, downInterval );\r\n    var newSlotTimeEnd = this.computeSlotTime( downSlotId + 1, downInterval );\r\n    var newSlotId = this.computeSlotID( newSlotTime, nextInterval ),\r\n      start = false;\r\n\r\n    const lruData = LRU.get( this.options.LRUName, this.computeUniqueID( serie, newSlotId, nextInterval ) );\r\n    if ( lruData ) {\r\n\r\n      for ( var i = 0, l = lruData.data.mean.length; i < l; i += 2 ) {\r\n\r\n        if ( lruData.data.mean[ i ] < newSlotTime ) {\r\n          continue;\r\n\r\n        } else if ( start === false ) {\r\n          start = i;\r\n        }\r\n\r\n        if ( lruData.data.mean[ i ] >= newSlotTimeEnd ) {\r\n\r\n          data = data.concat( lruData.data.mean.slice( start, i ) );\r\n          dataMinMax = data.concat( lruData.data.minmax.slice( start, i ) );\r\n\r\n          return;\r\n        }\r\n      }\r\n    }\r\n\r\n    return this.recalculateSerieUpwards( serie, newSlotId, nextInterval, data, dataMinMax );\r\n  }\r\n\r\n  lockRedraw() {\r\n    this.locked = true;\r\n  }\r\n\r\n  unlockRedraw() {\r\n    this.locked = false;\r\n  }\r\n\r\n  isRedrawLocked() {\r\n    return !!this.locked;\r\n  }\r\n}\r\n\r\nexport default PluginTimeSerieManager;","import {\r\n  Waveform\r\n} from '../util/waveform.js';\r\n\r\nimport Plugin from './graph.plugin.js';\r\n\r\n/**\r\n * @class PluginSerieLineDifference\r\n * @implements Plugin\r\n */\r\nclass PluginSerieLineDifference extends Plugin {\r\n\r\n  constructor() {\r\n    super( ...arguments );\r\n  }\r\n\r\n  static\r\n  default () {\r\n    return {\r\n\r\n      positiveStyle: {\r\n\r\n        fillColor: 'green',\r\n        fillOpacity: 0.2,\r\n        strokeWidth: 0\r\n      },\r\n\r\n      negativeStyle: {\r\n        fillColor: 'red',\r\n        fillOpacity: 0.2,\r\n        strokeWidth: 0\r\n      },\r\n\r\n      from: 0,\r\n      to: 0\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Init method\r\n   * @private\r\n   */\r\n  init( graph, options ) {\r\n    this.graph = graph;\r\n\r\n    this.series = [];\r\n    this.pathsPositive = [];\r\n    this.pathsNegative = [];\r\n\r\n    this.positivePolyline = this.graph.newShape( 'polyline' ).draw();\r\n\r\n    this.positivePolyline.\r\n    setFillColor( this.options.positiveStyle.fillColor ).\r\n    setFillOpacity( this.options.positiveStyle.fillOpacity ).\r\n    setStrokeWidth( this.options.positiveStyle.strokeWidth ).\r\n    applyStyle();\r\n\r\n    this.negativePolyline = this.graph.newShape( 'polyline' ).draw();\r\n\r\n    this.negativePolyline.\r\n    setFillColor( this.options.negativeStyle.fillColor ).\r\n    setFillOpacity( this.options.negativeStyle.fillOpacity ).\r\n    setStrokeWidth( this.options.negativeStyle.strokeWidth ).\r\n    applyStyle();\r\n  }\r\n\r\n  /**\r\n   * Assigns the two series for the shape. Postive values are defined when ```serieTop``` is higher than ```serieBottom```.\r\n   * @param {SerieLine} serieTop - The top serie\r\n   * @param {SerieLine} serieBottom - The bottom serie\r\n   */\r\n  setSeries( serieTop, serieBottom ) {\r\n    this.serie1 = serieTop;\r\n    this.serie2 = serieBottom;\r\n  }\r\n\r\n  /**\r\n   * Assigns the boundaries\r\n   */\r\n  setBoundaries( from, to ) {\r\n    this.options.from = from;\r\n    this.options.to = to;\r\n  }\r\n\r\n  /**\r\n   * @returns the starting value used to draw the zone\r\n   */\r\n  getFrom() {\r\n    return this.options.from;\r\n  }\r\n\r\n  /**\r\n   * @returns the ending value used to draw the zone\r\n   */\r\n  getTo() {\r\n    return this.options.to;\r\n  }\r\n\r\n  /**\r\n   * Calculates and draws the zone series\r\n   * @returns {Plugin} The current plugin instance\r\n   */\r\n  draw() {\r\n\r\n    var self = this;\r\n\r\n    const w1 = this.serie1.getWaveform();\r\n    const w2 = this.serie2.getWaveform();\r\n\r\n    const wFinal = w1.duplicate( true ).subtract( w2 ).add( w2 );\r\n    const wFinal2 = w1.duplicate( true ).subtract( w1.duplicate( true ).subtract( w2 ) );\r\n\r\n    const chunks = [];\r\n    let currentChunk;\r\n\r\n    var newChunk = ( force = false ) => {\r\n\r\n      if ( !force ) {\r\n        if ( currentChunk.wave1.length == 0 && currentChunk.wave2.length == 0 ) {\r\n          return;\r\n        }\r\n      }\r\n      currentChunk = {\r\n        above: undefined,\r\n        wave1: [],\r\n        wave2: []\r\n      };\r\n      chunks.push( currentChunk );\r\n    };\r\n\r\n    newChunk( true );\r\n\r\n    let currentlyAbove = true;\r\n\r\n    for ( var i = 0; i < wFinal.getLength(); i++ ) {\r\n\r\n      if ( isNaN( wFinal.getY( i ) ) || isNaN( wFinal2.getY( i ) ) ) {\r\n        newChunk();\r\n        continue;\r\n      }\r\n\r\n      if ( i > 0 && currentChunk.wave1.length > 0 ) {\r\n\r\n        if ( ( wFinal.getY( i ) > wFinal2.getY( i ) && !currentChunk.above ) ) {\r\n\r\n          const crossing = this.computeCrossing( wFinal.getX( i - 1 ), wFinal.getY( i - 1 ), wFinal.getX( i ), wFinal.getY( i ), wFinal2.getX( i - 1 ), wFinal2.getY( i - 1 ), wFinal2.getX( i ), wFinal2.getY( i ) );\r\n          currentChunk.wave1.push( [ crossing.x, crossing.y ] );\r\n          newChunk();\r\n          currentChunk.wave1.push( [ crossing.x, crossing.y ] );\r\n          currentChunk.above = true;\r\n        }\r\n\r\n        if ( ( wFinal.getY( i ) < wFinal2.getY( i ) && currentChunk.above ) ) {\r\n\r\n          const crossing = this.computeCrossing( wFinal.getX( i - 1 ), wFinal.getY( i - 1 ), wFinal.getX( i ), wFinal.getY( i ), wFinal2.getX( i - 1 ), wFinal2.getY( i - 1 ), wFinal2.getX( i ), wFinal2.getY( i ) );\r\n          currentChunk.wave1.push( [ crossing.x, crossing.y ] );\r\n          newChunk();\r\n          currentChunk.wave1.push( [ crossing.x, crossing.y ] );\r\n          currentChunk.above = false;\r\n\r\n        }\r\n      }\r\n\r\n      if ( currentChunk.wave1.length == 0 ) {\r\n        currentChunk.above = wFinal.getY( i ) > wFinal2.getY( 1 );\r\n      }\r\n\r\n      currentChunk.wave1.push( [ wFinal.getX( i ), wFinal.getY( i ) ] );\r\n      currentChunk.wave2.push( [ wFinal2.getX( i ), wFinal2.getY( i ) ] );\r\n    }\r\n\r\n    this.series.forEach( ( serie ) => serie.kill() );\r\n\r\n    this.series = chunks.forEach( ( chunk, index ) => {\r\n\r\n      const serie = this.graph.newSerie( `__graph_serielinedifference_${this.serie1.getName()}_${this.serie2.getName()}_${index}` );\r\n      const wave = new Waveform();\r\n\r\n      wave.setData(\r\n        chunk.wave1.map( ( el ) => el[ 1 ] ).concat( chunk.wave2.reverse().map( ( el ) => el[ 1 ] ) ),\r\n        chunk.wave1.map( ( el ) => el[ 0 ] ).concat( chunk.wave2.map( ( el ) => el[ 0 ] ) )\r\n      );\r\n\r\n      if ( chunk.wave1[ 0 ] ) {\r\n        wave.append( chunk.wave1[ 0 ][ 0 ], chunk.wave1[ 0 ][ 1 ] );\r\n      }\r\n\r\n      serie.setWaveform( wave );\r\n      serie.setXAxis( this.serie1.getXAxis() );\r\n      serie.setYAxis( this.serie1.getYAxis() );\r\n\r\n      if ( chunk.above ) {\r\n        serie.setFillColor( this.options.positiveStyle.fillColor );\r\n      } else {\r\n        serie.setFillColor( this.options.negativeStyle.fillColor );\r\n      }\r\n    } );\r\n\r\n  }\r\n\r\n  /**\r\n   * Finds the crossing point between two vector and returns it, or ```false``` if it is not within the x boundaries\r\n   * @returns {(Object|Boolean)} An object containing the crossing point in the following format: ```{ x: xCrossing, y: yCrossing }``` or ```false``` if no crossing point can be found\r\n   * @param {Number} x11 - First x point of the first vector\r\n   * @param {Number} y11 - First y point of the first vector\r\n   * @param {Number} x12 - Second x point of the first vector\r\n   * @param {Number} y12 - Second y point of the first vector\r\n   * @param {Number} x21 - First x point of the second vector\r\n   * @param {Number} y21 - First y point of the second vector\r\n   * @param {Number} y22 - Second x point of the second vector\r\n   * @param {Number} y22 - Second y point of the second vector\r\n   */\r\n  computeCrossing( x11, y11, x12, y12, x21, y21, x22, y22 ) {\r\n\r\n    var a1 = ( y12 - y11 ) / ( x12 - x11 );\r\n    var a2 = ( y22 - y21 ) / ( x22 - x21 );\r\n\r\n    var b1 = y12 - a1 * x12;\r\n    var b2 = y22 - a2 * x22;\r\n\r\n    if ( x11 == x12 || x21 == x22 ) {\r\n\r\n      return false;\r\n    }\r\n\r\n    if ( a1 == a2 ) {\r\n      return {\r\n        x: x11,\r\n        y1: y11,\r\n        y2: y11,\r\n        y: y11\r\n      };\r\n    }\r\n\r\n    var x = ( b1 - b2 ) / ( a2 - a1 );\r\n\r\n    if ( x > x12 || x < x11 || x < x21 || x > x22 ) {\r\n      return false;\r\n    }\r\n\r\n    return {\r\n      x: x,\r\n      y: a1 * x + b1\r\n    };\r\n  }\r\n\r\n  /**\r\n   * @returns The positive polyline\r\n   */\r\n  getPositivePolyline() {\r\n    return this.positivePolyline;\r\n  }\r\n\r\n  /**\r\n   * @returns The negative polyline\r\n   */\r\n  getNegativePolyline() {\r\n    return this.negativePolyline;\r\n  }\r\n\r\n}\r\n\r\nexport default PluginSerieLineDifference;","import Graph from '../graph.core.js';\r\nimport AxisX from '../graph.axis.x.js';\r\nimport AxisY from '../graph.axis.y.js';\r\nimport * as util from '../graph.util.js';\r\nimport SerieLine from '../series/graph.serie.line.js';\r\nimport SerieScatter from '../series/graph.serie.scatter.js';\r\nimport Axis from '../graph.axis.js';\r\n\r\nimport Plugin from './graph.plugin.js';\r\n\r\nclass SerieLineExtended extends SerieLine {\r\n\r\n  constructor() {\r\n    super( ...arguments );\r\n\r\n    this.subSeries = [];\r\n  }\r\n\r\n  draw() {\r\n    return this;\r\n  }\r\n\r\n}\r\n\r\nclass SerieScatterExtended extends SerieScatter {\r\n\r\n  constructor() {\r\n\r\n    super( ...arguments );\r\n    this.subSeries = [];\r\n  }\r\n\r\n  draw() {\r\n    return this;\r\n  }\r\n\r\n  getMarkerForLegend() {\r\n    if ( !this.subSeries[ 0 ] ) {\r\n      return false;\r\n    }\r\n\r\n    return this.subSeries[ 0 ].getMarkerForLegend();\r\n  }\r\n}\r\n\r\nvar excludingMethods = [\r\n  'constructor',\r\n  'init',\r\n  'draw',\r\n  'setLineColor',\r\n  'setLineWidth',\r\n  'setLineStyle',\r\n  'getLineColor',\r\n  'getLineWidth',\r\n  'getLineStyle',\r\n  'setMarkers',\r\n  'getMarkerDom',\r\n  'getMarkerDomIndependant',\r\n  'getMarkerPath',\r\n  '_recalculateMarkerPoints',\r\n  'getSymbolForLegend',\r\n  '_getSymbolForLegendContainer'\r\n];\r\nvar addMethods = [];\r\n\r\nObject.getOwnPropertyNames( SerieLine.prototype ).concat( addMethods ).map( function( i ) {\r\n\r\n  if ( excludingMethods.indexOf( i ) > -1 ) {\r\n    return;\r\n  }\r\n\r\n  SerieLineExtended.prototype[ i ] = ( function( j ) {\r\n\r\n    return function() {\r\n\r\n      var args = arguments;\r\n      this.subSeries.map( ( subSerie ) => {\r\n        subSerie[ j ]( ...args );\r\n      } );\r\n    };\r\n\r\n  } )( i );\r\n} );\r\n\r\nvar returnMethods = [\r\n  'getSymbolForLegend'\r\n];\r\n\r\nvar addMethods = [\r\n  '_getSymbolForLegendContainer'\r\n];\r\n\r\nObject.getOwnPropertyNames( SerieLine.prototype ).map( function( i ) {\r\n\r\n  if ( returnMethods.indexOf( i ) == -1 ) {\r\n    return;\r\n  }\r\n\r\n  SerieLineExtended.prototype[ i ] = ( function( j ) {\r\n\r\n    return function() {\r\n      var args = arguments;\r\n      return this.subSeries[ 0 ][ j ]( ...args );\r\n    };\r\n\r\n  } )( i );\r\n\r\n  SerieScatterExtended.prototype[ i ] = ( function( j ) {\r\n\r\n    return function() {\r\n      var args = arguments;\r\n      return this.subSeries[ 0 ][ j ]( ...args );\r\n    };\r\n\r\n  } )( i );\r\n} );\r\n\r\naddMethods.map( ( method ) => {\r\n\r\n  SerieLineExtended.prototype[ method ] = ( function( j ) {\r\n\r\n    return function() {\r\n      var args = arguments;\r\n      return this.subSeries[ 0 ][ j ]( ...args );\r\n    };\r\n\r\n  } )( method );\r\n\r\n  SerieScatterExtended.prototype[ method ] = ( function( j ) {\r\n\r\n    return function() {\r\n      var args = arguments;\r\n      return this.subSeries[ 0 ][ j ]( ...args );\r\n    };\r\n\r\n  } )( method );\r\n\r\n} );\r\n\r\n/**\r\n * Axis splitting plugin\r\n * @augments Plugin\r\n */\r\nclass PluginAxisSplitting extends Plugin {\r\n\r\n  constructor( options ) {\r\n    super( ...arguments );\r\n    this.series = new Map();\r\n  }\r\n\r\n  static\r\n  default () {\r\n\r\n    return {\r\n      axes: {\r\n        margins: {\r\n          high: 5,\r\n          low: 5\r\n        }\r\n      }\r\n    };\r\n  }\r\n\r\n  init( graph ) {\r\n    this.graph = graph;\r\n  }\r\n\r\n  /**\r\n   *  Creates a new bottom split axis\r\n   *  @param {Object} [ options = {} ] The axis options\r\n   *  @return {Axis} The newly created split axis\r\n   */\r\n  newXAxis( options ) {\r\n    return this.newBottomAxis( options );\r\n  }\r\n\r\n  /**\r\n   *  Creates a new left split axis\r\n   *  @param {Object} [ options = {} ] The axis options\r\n   *  @return {Axis} The newly created split axis\r\n   */\r\n  newYAxis( options ) {\r\n    return this.newLeftAxis( options );\r\n  }\r\n\r\n  /**\r\n   *  Creates a new top split axis\r\n   *  @param {Object} [ options = {} ] The axis options\r\n   *  @return {Axis} The newly created split axis\r\n   */\r\n  newTopAxis( options ) {\r\n    options = this.getOptions( options );\r\n    return new SplitXAxis( this.graph, 'top', options );\r\n  }\r\n\r\n  /**\r\n   *  Creates a new bottom split axis\r\n   *  @param {Object} [ options = {} ] The axis options\r\n   *  @return {Axis} The newly created split axis\r\n   */\r\n  newBottomAxis( options ) {\r\n    options = this.getOptions( options );\r\n    return new SplitXAxis( this.graph, 'bottom', options );\r\n  }\r\n\r\n  /**\r\n   *  Creates a new left split axis\r\n   *  @param {Object} [ options = {} ] The axis options\r\n   *  @return {Axis} The newly created split axis\r\n   */\r\n  newLeftAxis( options ) {\r\n    options = this.getOptions( options );\r\n    return new SplitYAxis( this.graph, 'left', options );\r\n  }\r\n\r\n  /**\r\n   *  Creates a new right split axis\r\n   *  @param {Object} [ options = {} ] The axis options\r\n   *  @return {Axis} The newly created split axis\r\n   */\r\n  newRightAxis( options ) {\r\n    options = this.getOptions( options );\r\n    return new SplitYAxis( this.graph, 'right', options );\r\n  }\r\n\r\n  getOptions( options ) {\r\n    var defaults = {\r\n      marginMin: this.options.axes.margins.low,\r\n      marginMax: this.options.axes.margins.high,\r\n    };\r\n    return util.extend( true, defaults, options );\r\n  }\r\n\r\n  preDraw() {\r\n\r\n    var xAxis, yAxis;\r\n\r\n    //    for ( let { serie } of this.series.values() ) {\r\n    this.series.forEach( ( {\r\n      serie\r\n    } ) => {\r\n\r\n      xAxis = serie.getXAxis();\r\n      yAxis = serie.getYAxis();\r\n\r\n      let splits = 1;\r\n\r\n      if ( xAxis.splitNumber ) {\r\n        splits *= xAxis.splitNumber;\r\n      }\r\n\r\n      if ( yAxis.splitNumber ) {\r\n        splits *= yAxis.splitNumber;\r\n      }\r\n\r\n      while ( serie.subSeries.length < splits ) {\r\n\r\n        const name = `${serie.getName() }_${ serie.subSeries.length}`;\r\n\r\n        const s = this.graph.newSerie( name, {}, serie.getType() || Graph.SERIE_LINE );\r\n\r\n        s.excludedFromLegend = true;\r\n        s.styles = serie.styles;\r\n        s.waveform = serie.waveform; // Copy data\r\n\r\n        if ( serie.getType() == Graph.SERIE_LINE ) {\r\n          s.markerPoints = serie.markerPoints;\r\n          s.markerFamilies = serie.markerFamilies;\r\n        }\r\n\r\n        serie.subSeries.push( s );\r\n        serie.postInit();\r\n      }\r\n\r\n      while ( serie.subSeries.length > splits ) {\r\n\r\n        let subserie = this.graph.getSerie( `${serie.getName() }_${ serie.subSeries.length - 1}` );\r\n\r\n        if ( subserie && subserie.kill ) {\r\n          subserie.kill();\r\n        }\r\n        serie.subSeries.pop();\r\n\r\n      }\r\n\r\n      if ( !serie.getXAxis().splitNumber && serie.getXAxis().splitAxis ) {\r\n        serie.getXAxis().splitAxis();\r\n      }\r\n\r\n      if ( !serie.getYAxis().splitNumber && serie.getYAxis().splitAxis ) {\r\n        serie.getYAxis().splitAxis();\r\n      }\r\n\r\n      // Re-assign axes to the sub series\r\n      serie.subSeries.map( ( sserie, index ) => {\r\n\r\n        var xSubAxis, ySubAxis;\r\n\r\n        //sserie.groupMarkers = firstSubSerie.groupMarkers;\r\n\r\n        if ( serie.getXAxis().getSubAxis ) {\r\n          let subAxisIndex = index % ( ( xAxis.splitNumber || 1 ) );\r\n          xSubAxis = serie.getXAxis().getSubAxis( subAxisIndex );\r\n        } else {\r\n          xSubAxis = serie.getXAxis();\r\n        }\r\n\r\n        sserie.setXAxis( xSubAxis );\r\n\r\n        if ( serie.getYAxis().getSubAxis ) {\r\n\r\n          let subAxisIndex = Math.floor( index / ( ( xAxis.splitNumber || 1 ) ) );\r\n          ySubAxis = serie.getYAxis().getSubAxis( subAxisIndex );\r\n        } else {\r\n          ySubAxis = serie.getYAxis();\r\n        }\r\n\r\n        sserie.setYAxis( ySubAxis );\r\n\r\n        sserie.draw( true );\r\n      } );\r\n      //}\r\n\r\n    } );\r\n\r\n  }\r\n\r\n  /**\r\n   *  Creates a new serie\r\n   *  @param {(String|Number)} name - The name of the serie\r\n   *  @param {Object} [ options = {} ] The options of the serie\r\n   *  @param {String} type - The type of the serie\r\n   *  @return {Serie} The created serie\r\n   */\r\n  newSerie( name, options = {}, type ) {\r\n\r\n    switch ( type ) {\r\n\r\n      case 'line':\r\n        return this.newLineSerie( name, options );\r\n        break;\r\n\r\n      case 'scatter':\r\n        return this.newScatterSerie( name, options );\r\n        break;\r\n    }\r\n\r\n    throw `Cannot create a split serie of type ${ type}`;\r\n  }\r\n\r\n  /**\r\n   *  Creates a new line serie\r\n   *  @param {(String|Number)} name - The name of the serie\r\n   *  @param {Object} [ options = {} ] The options of the serie\r\n   *  @return {Serie} The created serie\r\n   */\r\n  newLineSerie( name, options ) {\r\n    var serieObj = {\r\n      type: 'lineSerie',\r\n      serie: new SerieLineExtended( this.graph, name, options, 'line' )\r\n    };\r\n    this.series.set( name, serieObj );\r\n    this.graph.series.push( serieObj.serie );\r\n    return serieObj.serie;\r\n  }\r\n\r\n  /**\r\n   *  Creates a new scatter serie\r\n   *  @param {(String|Number)} name - The name of the serie\r\n   *  @param {Object} [ options = {} ] The options of the serie\r\n   *  @return {Serie} The created serie\r\n   */\r\n  newScatterSerie( name, options ) {\r\n    var serieObj = {\r\n      type: 'scatterSerie',\r\n      serie: new SerieScatterExtended( this.graph, name, options, 'scatter' )\r\n    };\r\n    this.series.set( name, serieObj );\r\n    this.graph.series.push( serieObj.serie );\r\n    return serieObj.serie;\r\n  }\r\n\r\n}\r\n\r\nvar defaultAxisConstructorOptions = {\r\n  splitMarks: true\r\n};\r\n\r\nvar SplitAxis = function( mixin ) {\r\n\r\n  var delegateMethods = [\r\n\r\n    'turnGridsOff',\r\n    'turnGridsOn',\r\n    'gridsOff',\r\n    'gridsOn',\r\n    'setEngineering',\r\n    'setScientificScaleExponent',\r\n    'setScientific',\r\n    'setLabelColor',\r\n    'setSecondaryGridDasharray',\r\n    'setPrimaryGridDasharray',\r\n    'setSecondaryGridsOpacity',\r\n    'setPrimaryGridOpacity',\r\n    'setSecondaryGridWidth',\r\n    'setPrimaryGridWidth',\r\n    'setSecondaryGridColor',\r\n    'setPrimaryGridColor',\r\n    'setTicksLabelColor',\r\n    'setSecondaryTicksColor',\r\n    'setPrimaryTicksColor',\r\n    'setAxisColor',\r\n    'secondaryGridOn',\r\n    'secondaryGridOff',\r\n    'primaryGridOff',\r\n    'primaryGridOn',\r\n    'setSecondaryGrid',\r\n    'setPrimaryGrid',\r\n    'setGrids',\r\n    'setTickPosition',\r\n    'setExponentialFactor',\r\n    'setExponentialLabelFactor',\r\n    'setGridLinesStyle',\r\n    'forcePrimaryTickUnitMin',\r\n    'forcePrimaryTickUnitMax',\r\n    'forcePrimaryTickUnit',\r\n    'flip',\r\n    'show',\r\n    'hide',\r\n    'setDisplay'\r\n  ];\r\n\r\n  /**\r\n   * Split axis\r\n   * @mixes AxisX\r\n   * @mixes AxisY\r\n   * @name SplitAxis\r\n   * @static\r\n   */\r\n  var cl = class SplitAxis extends mixin {\r\n\r\n    constructor( graph, position, options = {} ) {\r\n\r\n      super( graph, position, options );\r\n      this.axes = [];\r\n      this.position = position;\r\n      this.constructorOptions = util.extend( true, {}, defaultAxisConstructorOptions, options );\r\n\r\n      this._splitVal = [];\r\n    }\r\n\r\n    /**\r\n     *  Calls a callback onto each chunk axes. The callback receives two parameters: 1) the ```axis``` itself and 2) the ```index``` of the axis in the stack\r\n     *  @param {Function} callback - The callback to be applied to each axes\r\n     *  @return {SplitAxis} The current axis instance\r\n     */\r\n    all( callback ) {\r\n\r\n      if ( !( typeof callback == 'function' ) ) {\r\n        return;\r\n      }\r\n\r\n      this.axes.map( callback );\r\n      return this;\r\n    }\r\n\r\n    /**\r\n     *  Splits the axis into chunks at the positions defined as a list of parameters.\r\n     *  @param {Function} ...splits - The positions of axis splitting\r\n     *  @return {SplitAxis} The current axis instance\r\n     *  @example axis.splitAxis( 0.2, 0.5, 0.8 ); // Creates 4 chunks (0-20%, 20%-50%, 50%-80%, 80%-100%)\r\n     */\r\n    splitAxis( ...splits ) {\r\n\r\n      splits.push( 1 );\r\n      let splitNumber = splits.length;\r\n\r\n      while ( this.axes.length > splitNumber ) {\r\n        this.axes.pop().kill( true, true );\r\n      }\r\n\r\n      while ( this.axes.length < splitNumber ) {\r\n        let axis = new( this.getConstructor() )( this.graph, this.position, this.constructorOptions );\r\n        this.axes.push( axis );\r\n        axis.zoomLock = true;\r\n        axis.init( this.graph, this.constructorOptions );\r\n      }\r\n\r\n      let from = 0;\r\n      let i = 0;\r\n      for ( let axis of this.axes ) {\r\n\r\n        axis.options.marginMin = 10;\r\n        axis.options.marginMax = 10;\r\n\r\n        if ( i == 0 ) {\r\n          axis.options.marginMin = 0;\r\n        }\r\n\r\n        if ( i == this.axes.length - 1 ) {\r\n          axis.options.marginMax = 0;\r\n        }\r\n\r\n        axis.setSpan( from, ( from = splits[ i ] ) );\r\n        axis.setMinMaxFlipped();\r\n        i++;\r\n      }\r\n\r\n      this._splits = splits;\r\n      return this;\r\n    }\r\n\r\n    /**\r\n     *  Fixes the major tick interval of all axes based on the one provided as a parameter\r\n     *  @param {Number} axisIndex - The index of the reference axis (starting at 0)\r\n     *  @return {SplitAxis} The current axis instance\r\n     */\r\n    fixGridIntervalBasedOnAxis( axisIndex ) {\r\n\r\n      this.fixGridFor = axisIndex;\r\n      this.graph._axisHasChanged();\r\n      return this;\r\n    }\r\n\r\n    /**\r\n     *  Spreads the chunks of the axis based on the relative interval of each one of them, so that the unit / px is constant for each chunk\r\n     *  @param {Boolean} bln - ```true``` to enable the spread, ```false``` otherwise\r\n     *  @return {SplitAxis} The current axis instance\r\n     */\r\n    splitSpread( bln ) {\r\n      this.autoSpread = !!bln;\r\n      return this;\r\n    }\r\n\r\n    hasAxis( axis ) {\r\n      return this.axes.indexOf( axis ) > -1;\r\n    }\r\n\r\n    _splitSpread() {\r\n\r\n      let splits = [],\r\n        total = 0,\r\n        currentSplit = 0;\r\n      for ( let split of this._splitVal ) {\r\n        total += split[ 1 ] - split[ 0 ];\r\n      }\r\n\r\n      for ( let split of this._splitVal ) {\r\n\r\n        splits.push( currentSplit += ( split[ 1 ] - split[ 0 ] ) / total );\r\n      }\r\n\r\n      splits.pop();\r\n      this.splitAxis( ...splits );\r\n    }\r\n\r\n    /**\r\n     *  Defines the boundaries of each chunk in axis unit.\r\n     *  @param {Array<(Array|Number)>} values - An array of either 2-component arrays (from-to) or number (mean)\r\n     *  @example axis.setChunkBoundaries( [ [ 12, 20 ], [ 100, 200 ] ] ); // First chunk from 12 to 20, second one from 100 to 200\r\n     *  @example axis.setChunkBoundaries( [ 12, [ 100, 200 ] ] ); // Second chunk from 100 to 200, first chunk with a mean at 12 and min / max determined by the relative widths of the chunks\r\n     *  @return {SplitAxis} The current axis instance\r\n     */\r\n    setChunkBoundaries( values ) {\r\n\r\n      let index = 0,\r\n        baseWidth,\r\n        baseWidthIndex;\r\n\r\n      for ( let axis of this.axes ) { // List all axes\r\n\r\n        // Two elements in the array => becomes the new reference\r\n        if ( Array.isArray( values[ index ] ) && values[ index ].length > 1 && !baseWidth ) {\r\n          baseWidth = values[ index ][ 1 ] - values[ index ][ 0 ];\r\n          baseWidthIndex = index;\r\n        }\r\n\r\n        if ( values[ index ].length == 1 || !Array.isArray( values[ index ] ) ) {\r\n          axis._mean = values[ index ];\r\n\r\n          if ( Array.isArray( axis._mean ) ) {\r\n            axis._mean = axis._mean[ 0 ];\r\n          }\r\n\r\n        } else {\r\n\r\n          axis\r\n            .forceMin( values[ index ][ 0 ] )\r\n            .forceMax( values[ index ][ 1 ] );\r\n        }\r\n\r\n        index++;\r\n      }\r\n\r\n      this._baseWidthVal = baseWidth;\r\n      this._baseWidthIndex = baseWidthIndex;\r\n\r\n      this._splitVal = values;\r\n\r\n      this.graph._axisHasChanged();\r\n\r\n      return this;\r\n    }\r\n\r\n    setMinMaxToFitSeries() {\r\n\r\n      if ( !this._splitVal || this._splitVal.length < 1 ) {\r\n        super.setMinMaxToFitSeries( ...arguments );\r\n        this._splitVal[ 0 ] = this._splitVal[ 0 ] || [];\r\n        this._splitVal[ this._splitVal.length - 1 ] = this._splitVal[ this._splitVal.length - 1 ] || [];\r\n\r\n        this._splitVal[ 0 ][ 0 ] = this.getCurrentMin();\r\n        this._splitVal[ this._splitVal.length - 1 ][ 1 ] = this.getCurrentMax();\r\n        this.setChunkBoundaries( this._splitVal );\r\n      }\r\n    }\r\n\r\n    draw() {\r\n\r\n      if ( this.autoSpread ) {\r\n        this._splitSpread();\r\n      }\r\n\r\n      let max = 0;\r\n      let unit;\r\n      let subAxis;\r\n      let spanReference;\r\n\r\n      if ( this._baseWidthIndex >= 0 && ( subAxis = this.getSubAxis( this._baseWidthIndex ) ) ) {\r\n        spanReference = subAxis.getSpan();\r\n      }\r\n\r\n      subAxis = undefined;\r\n\r\n      if ( this.fixGridFor >= 0 && ( subAxis = this.getSubAxis( this.fixGridFor ) ) ) {\r\n\r\n        if ( subAxis._mean !== undefined ) {\r\n          let width = ( subAxis.getSpan()[ 1 ] - subAxis.getSpan()[ 0 ] ) / ( spanReference[ 1 ] - spanReference[ 0 ] ) * this._baseWidthVal;\r\n          subAxis.forceMin( subAxis._mean - width / 2 );\r\n          subAxis.forceMax( subAxis._mean + width / 2 );\r\n        }\r\n\r\n        max = subAxis.draw();\r\n        unit = subAxis.getPrimaryTickUnit();\r\n      }\r\n\r\n      this.axes.map( ( axis ) => {\r\n\r\n        if ( subAxis === axis ) {\r\n          return;\r\n        }\r\n\r\n        if ( axis._mean !== undefined ) {\r\n          let width = ( axis.getSpan()[ 1 ] - axis.getSpan()[ 0 ] ) / ( spanReference[ 1 ] - spanReference[ 0 ] ) * this._baseWidthVal;\r\n          axis.forceMin( axis._mean - width / 2 );\r\n          axis.forceMax( axis._mean + width / 2 );\r\n        }\r\n\r\n        if ( unit ) {\r\n          axis.forcePrimaryTickUnit( unit );\r\n        }\r\n\r\n        max = Math.max( max, axis.draw() );\r\n\r\n      } );\r\n\r\n      //    this.drawLabel();\r\n      this.writeUnit();\r\n\r\n      return max;\r\n    }\r\n\r\n    setMinPx( min ) {\r\n\r\n      super.setMinPx( min );\r\n      for ( let axis of this.axes ) {\r\n        axis.setMinPx( min );\r\n      }\r\n    }\r\n\r\n    setMaxPx( max ) {\r\n\r\n      super.setMaxPx( max );\r\n\r\n      for ( let axis of this.axes ) {\r\n        axis.setMaxPx( max );\r\n      }\r\n    }\r\n\r\n    setShift() {\r\n\r\n      super.setShift( ...arguments );\r\n\r\n      for ( let axis of this.axes ) {\r\n        axis.setShift( ...arguments );\r\n      }\r\n    }\r\n\r\n    init() {\r\n      super.init( ...arguments );\r\n      this.splitAxis();\r\n    }\r\n\r\n    getAxisPosition() {\r\n      var max = 0;\r\n\r\n      this.axes.map( ( axis ) => {\r\n        max = Math.max( max, axis.getAxisPosition() );\r\n      } );\r\n\r\n      return max;\r\n    }\r\n\r\n    getSubAxis( index ) {\r\n\r\n      if ( this.axes.length <= index ) {\r\n        throw `Impossible to reach axis. Index ${ index } is out of range`;\r\n      }\r\n\r\n      return this.axes[ index ];\r\n    }\r\n\r\n    get splitNumber() {\r\n      return this._splits.length;\r\n    }\r\n  };\r\n\r\n  delegateMethods.map( ( methodName ) => {\r\n\r\n    cl.prototype[ methodName ] = ( function( method ) {\r\n\r\n      return function() {\r\n        //super[ method ]( ...arguments )\r\n\r\n        this.axes.map( ( axis ) => {\r\n          axis[ method ]( ...arguments );\r\n        } );\r\n        return this;\r\n      };\r\n\r\n    } )( methodName );\r\n  } );\r\n\r\n  return cl;\r\n};\r\n\r\nclass SplitXAxis extends SplitAxis( AxisX ) {\r\n\r\n  constructor( graph, topbottom, options ) {\r\n    super( ...arguments );\r\n    this.topbottom = topbottom;\r\n  }\r\n\r\n  getConstructor() {\r\n    return AxisX;\r\n  }\r\n\r\n  getAxisPosition() {\r\n    var max = super.getAxisPosition( ...arguments );\r\n\r\n    this.labelPosY = max;\r\n\r\n    if ( this.getLabel() ) {\r\n      max += this.graph.options.fontSize;\r\n    }\r\n\r\n    return max;\r\n  }\r\n\r\n  drawLabel() {\r\n    super.drawLabel();\r\n    this.label.setAttribute( 'y', ( this.top ? -1 : 1 ) * ( this.graph.options.fontSize + this.labelPosY ) );\r\n  }\r\n\r\n  draw() {\r\n    var height = super.draw( ...arguments );\r\n    this.drawLabel();\r\n    return height;\r\n  }\r\n\r\n}\r\n\r\nclass SplitYAxis extends SplitAxis( AxisY ) {\r\n\r\n  constructor( graph, leftright, options ) {\r\n    super( ...arguments );\r\n    ///this.leftright = leftright;\r\n  }\r\n\r\n  getConstructor() {\r\n    return AxisY;\r\n  }\r\n  /*\r\n    draw() {\r\n\r\n      if ( this.getLabel() ) {\r\n        this.axes.map( ( axis ) => {\r\n          axis.setAxisPosition( this.graph.options.fontSize );\r\n        } ); // Extra shift allowed for the label\r\n        //this.setShift( this.graph.options.fontSize );\r\n      }\r\n      return super.draw( ...arguments );\r\n    }\r\n  */\r\n  drawLabel() {\r\n    super.drawLabel();\r\n  }\r\n\r\n  equalizePosition( width ) {\r\n\r\n    var widthAfter = width;\r\n\r\n    if ( this.getLabel() ) {\r\n      this.axes.map( ( axis ) => {\r\n        widthAfter = Math.max( axis.equalizePosition( width ), widthAfter );\r\n      } ); // Extra shift allowed for the label\r\n      //this.setShift( this.graph.options.fontSize );\r\n    }\r\n\r\n    if ( this.getLabel() ) {\r\n      this.placeLabel( this.left ? -widthAfter : widthAfter );\r\n      return widthAfter + this.graph.options.fontSize;\r\n    }\r\n  }\r\n\r\n}\r\n\r\nutil.mix( SplitXAxis, new AxisX() );\r\nutil.mix( SplitYAxis, new AxisY() );\r\n\r\nexport default PluginAxisSplitting;","import * as util from '../graph.util.js';\r\n\r\nimport Plugin from './graph.plugin.js';\r\n\r\n/**\r\n * The intent of this plugin is to provide methods for the user to make the traces on the graph automatically different\r\n * Options to provide colorization, markers and line styles should be provided\r\n * @extends Plugin\r\n */\r\nclass PluginMakeTracesDifferent extends Plugin {\r\n\r\n  constructor() {\r\n    super( ...arguments );\r\n  }\r\n\r\n  init( graph, options ) {\r\n    super.init( graph, options );\r\n  }\r\n  // Load this with defaults\r\n  static\r\n  default () {\r\n\r\n    return {\r\n\r\n    };\r\n  }\r\n\r\n  checkHSL( color ) {\r\n\r\n    let result = {},\r\n      hue, saturation, lightness;\r\n\r\n    if ( ( hue = ( color.h || color.hue ) ) ) {\r\n\r\n      if ( hue < 1 ) {\r\n        hue = Math.round( hue * 360 );\r\n      }\r\n\r\n      result.hue = hue;\r\n    } else {\r\n      result.h = 0;\r\n    }\r\n\r\n    if ( ( saturation = ( color.s || color.saturation ) ) ) {\r\n\r\n      if ( saturation > 1 ) {\r\n        saturation /= 100;\r\n      }\r\n\r\n      result.saturation = saturation;\r\n    } else {\r\n      result.saturation = 0.75;\r\n    }\r\n\r\n    if ( ( lightness = ( color.lightness || color.l ) ) ) {\r\n\r\n      if ( lightness > 1 ) {\r\n        lightness /= 100;\r\n      }\r\n\r\n      result.lightness = lightness;\r\n    } else {\r\n      result.lightness = 0.5;\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  buildHSLString( hsl ) {\r\n    return `hsl( ${ Math.round( hsl.h ) }, ${ Math.round( hsl.s * 100 ) }%, ${ Math.round( hsl.l * 100 ) }%)`;\r\n  }\r\n\r\n  colorizeAll( options, callback = false ) {\r\n\r\n    let series,\r\n      seriesLength;\r\n\r\n    if ( options.serieTypes ) {\r\n\r\n      if ( !Array.isArray( options.serieTypes ) ) {\r\n        options.serieTypes = [ options.serieTypes ];\r\n      }\r\n\r\n      series = this.graph.allSeries( ...options.serieTypes );\r\n    } else {\r\n      series = this.graph.getSeries();\r\n    }\r\n\r\n    seriesLength = series.length;\r\n\r\n    if ( !options.startingColorHSL ) {\r\n\r\n      if ( options.colorHSL ) {\r\n        options.startingColorHSL = this.checkHSL( options.colorHSL );\r\n      } else {\r\n        throw 'No starting color was provided. There must exist either options.colorHSL or options.startingColorHSL';\r\n      }\r\n    }\r\n\r\n    if ( !options.endingColorHSL ) {\r\n\r\n      if ( !options.affect || ![ 'h', 's', 'l', 'hue', 'saturation', 'lightness' ].include( options.affect ) ) {\r\n        options.affect = 'h';\r\n      }\r\n\r\n      switch ( options.affect ) {\r\n\r\n        case 'h':\r\n        case 'hue':\r\n          options.endingColorHSL = {\r\n            h: options.startingColorHSL.h + 300,\r\n            s: options.startingColorHSL.s,\r\n            l: options.startingColorHSL.l\r\n          };\r\n          break;\r\n\r\n        case 'saturation':\r\n        case 's':\r\n          let endS;\r\n\r\n          if ( options.startingColorHSL.s > 0.5 ) {\r\n            endS = 0;\r\n          } else {\r\n            endS = 1;\r\n          }\r\n\r\n          options.endingColorHSL = {\r\n            h: options.startingColorHSL.h,\r\n            s: endS,\r\n            l: options.startingColorHSL.l\r\n          };\r\n          break;\r\n\r\n        case 'lightness':\r\n        case 'l':\r\n          let endL;\r\n\r\n          if ( options.startingColorHSL.l > 0.5 ) {\r\n            endL = 0;\r\n          } else {\r\n            endL = 0.75;\r\n          }\r\n\r\n          options.endingColorHSL = {\r\n            h: options.startingColorHSL.h,\r\n            s: options.startingColorHSL.s,\r\n            l: endL\r\n          };\r\n          break;\r\n      }\r\n    } else {\r\n      options.endingColorHSL = Object.assign( {}, options.startingColorHSL, options.endingColorHSL );\r\n    }\r\n\r\n    return series.map( ( serie, index ) => {\r\n\r\n      if ( !serie.setLineColor ) {\r\n        throw `The serie ${ serie.getName() } does not implement the method \\`startingColor\\``;\r\n      }\r\n\r\n      let colorString;\r\n\r\n      if ( seriesLength == 1 ) {\r\n\r\n        colorString = this.buildHSLString( {\r\n          h: options.startingColorHSL.h,\r\n          s: options.startingColorHSL.s,\r\n          l: options.startingColorHSL.l\r\n        } );\r\n\r\n      } else {\r\n\r\n        colorString = this.buildHSLString( {\r\n          h: options.startingColorHSL.h + index / ( seriesLength - 1 ) * ( options.endingColorHSL.h - options.startingColorHSL.h ),\r\n          s: options.startingColorHSL.s + index / ( seriesLength - 1 ) * ( options.endingColorHSL.s - options.startingColorHSL.s ),\r\n          l: options.startingColorHSL.l + index / ( seriesLength - 1 ) * ( options.endingColorHSL.l - options.startingColorHSL.l )\r\n        } );\r\n      }\r\n\r\n      serie.setLineColor( colorString );\r\n\r\n      if ( typeof callback == 'function' ) {\r\n        callback( index, colorString );\r\n      }\r\n\r\n      return colorString;\r\n    } );\r\n  }\r\n}\r\n\r\nexport default PluginMakeTracesDifferent;","import * as util from '../graph.util.js';\r\n\r\nimport Plugin from './graph.plugin.js';\r\n\r\n/*\r\n  What is it ?\r\n    It is a plugin for automatic peak detection on a line serie\r\n\r\n  How to use ?\r\n    Basic usage:\r\n\r\n    let graph = new Graph(\"dom\", {\r\n      plugins: {\r\n        'peakPicking': {}\r\n      }\r\n      }\r\n    );\r\n\r\n    let wv = Graph.newWaveform();\r\n    wv.setData( [ 1, 2, 1, 2, 1, 2, 1, 2, 1, 2 ] );\r\n    let s = graph.newSerie(\"serie\").setWaveform( wv ).autoAxis();\r\n\r\n    graph.getPlugin('peakPicking').setSerie( s );\r\n    graph.draw();\r\n*/\r\n\r\n/**\r\n * @extends Plugin\r\n */\r\nclass PluginPeakPicking extends Plugin {\r\n  constructor() {\r\n    super( ...arguments );\r\n  }\r\n\r\n  static\r\n  default () {\r\n    return {\r\n      autoPeakPicking: false,\r\n      autoPeakPickingNb: 4,\r\n      autoPeakPickingMinDistance: 10,\r\n      autoPeakPickingFormat: false,\r\n      autoPeakPickingAllowAllY: false\r\n    };\r\n  }\r\n\r\n  init( graph, options ) {\r\n    super.init( graph, options );\r\n    this.picks = [];\r\n\r\n    for ( var n = 0, m = this.options.autoPeakPickingNb; n < m; n++ ) {\r\n      var shape = this.graph.newShape( {\r\n        type: 'label',\r\n        label: {\r\n          text: '',\r\n          position: {\r\n            x: 0\r\n          },\r\n          anchor: 'middle'\r\n        },\r\n\r\n        selectable: true,\r\n\r\n        shapeOptions: {\r\n          minPosY: 15\r\n        }\r\n      } );\r\n\r\n      shape.draw();\r\n\r\n      this.picks.push( shape );\r\n    }\r\n  }\r\n\r\n  setSerie( serie ) {\r\n    this.serie = serie;\r\n\r\n    this.picks.map( ( pick ) => {\r\n      pick.show();\r\n    } );\r\n  }\r\n\r\n  serieRemoved( serie ) {\r\n    if ( this.serie == serie ) {\r\n      this.picks.map( ( pick ) => {\r\n        pick.hide();\r\n      } );\r\n    }\r\n  }\r\n\r\n  preDraw() {\r\n    if ( !this.serie ) {\r\n      return;\r\n    }\r\n\r\n    this.detectedPeaks = [];\r\n    this.lastYPeakPicking = false;\r\n  }\r\n\r\n  postDraw() {\r\n    if ( !this.serie ) {\r\n      return;\r\n    }\r\n    let lookForMaxima = true;\r\n    let lookForMinima = false;\r\n    let lastYPeakPicking;\r\n    let peaks = [];\r\n\r\n    let waveform = this.serie.getWaveform();\r\n\r\n    if ( !waveform ) {\r\n      throw 'The serie must have a waveform for the peak picking to work';\r\n    }\r\n\r\n    let length = waveform.getLength(),\r\n      i = 0,\r\n      y;\r\n\r\n    for ( ; i < length; i++ ) {\r\n      y = waveform.getY( i );\r\n\r\n      if ( this.serie.options.lineToZero ) {\r\n        peaks.push( [ waveform.getX( i ), y ] );\r\n        continue;\r\n      }\r\n\r\n      if ( !lastYPeakPicking ) {\r\n        lastYPeakPicking = [ waveform.getX( i ), y ];\r\n        continue;\r\n      }\r\n\r\n      if (\r\n        ( y >= lastYPeakPicking[ 1 ] && lookForMaxima ) ||\r\n        ( y <= lastYPeakPicking[ 1 ] && lookForMinima )\r\n      ) {\r\n        lastYPeakPicking = [ waveform.getX( i ), y ];\r\n      } else if (\r\n        ( y < lastYPeakPicking[ 1 ] && lookForMaxima ) ||\r\n        ( y > lastYPeakPicking[ 1 ] && lookForMinima )\r\n      ) {\r\n        if ( lookForMinima ) {\r\n          lookForMinima = false;\r\n          lookForMaxima = true;\r\n        } else {\r\n          lookForMinima = true;\r\n          lookForMaxima = false;\r\n\r\n          peaks.push( lastYPeakPicking );\r\n          lastYPeakPicking = false;\r\n        }\r\n\r\n        lastYPeakPicking = [ waveform.getX( i ), y ];\r\n      }\r\n    }\r\n\r\n    var ys = peaks;\r\n    var x,\r\n      px,\r\n      passed = [],\r\n      px,\r\n      l = ys.length,\r\n      k,\r\n      m,\r\n      index;\r\n\r\n    i = 0;\r\n\r\n    var selected = this.graph.selectedShapes.map( function( shape ) {\r\n      return shape.getProp( 'xval' );\r\n    } );\r\n\r\n    ys.sort( function( a, b ) {\r\n      return b[ 1 ] - a[ 1 ];\r\n    } );\r\n\r\n    m = 0;\r\n\r\n    for ( ; i < l; i++ ) {\r\n      x = ys[ i ][ 0 ];\r\n      px = this.serie.getX( x );\r\n      k = 0;\r\n      y = this.serie.getY( ys[ i ][ 1 ] );\r\n\r\n      if (\r\n        px < this.serie.getXAxis().getMinPx() ||\r\n        px > this.serie.getXAxis().getMaxPx()\r\n      ) {\r\n        continue;\r\n      }\r\n\r\n      if ( !this.options.autoPeakPickingAllowAllY &&\r\n        ( y > this.serie.getYAxis().getMinPx() ||\r\n          y < this.serie.getYAxis().getMaxPx() )\r\n      ) {\r\n        continue;\r\n      }\r\n\r\n      // Distance check\r\n      for ( ; k < passed.length; k++ ) {\r\n        if (\r\n          Math.abs( passed[ k ] - px ) < this.options.autoPeakPickingMinDistance\r\n        ) {\r\n          break;\r\n        }\r\n      }\r\n      if ( k < passed.length ) {\r\n        continue;\r\n      }\r\n\r\n      // Distance check end\r\n\r\n      // If the retained one has already been selected somewhere, continue;\r\n      if ( ( index = selected.indexOf( x ) ) > -1 ) {\r\n        passed.push( px );\r\n        continue;\r\n      }\r\n\r\n      if ( !this.picks[ m ] ) {\r\n        return;\r\n      }\r\n\r\n      //    this.picks[ m ].show();\r\n\r\n      if ( this.serie.getYAxis().getPx( ys[ i ][ 1 ] ) - 20 < 0 ) {\r\n        this.picks[ m ].setLabelPosition( {\r\n          x: x,\r\n          y: '5px'\r\n        } );\r\n\r\n        this.picks[ m ].setLabelBaseline( 'hanging' );\r\n      } else {\r\n        this.picks[ m ].setLabelBaseline( 'no-change' );\r\n\r\n        this.picks[ m ].setLabelPosition( {\r\n          x: x,\r\n          y: ys[ i ][ 1 ],\r\n          dy: '-15px'\r\n        } );\r\n      }\r\n\r\n      this.picks[ m ].setProp( 'xval', x );\r\n\r\n      if ( this.options.autoPeakPickingFormat ) {\r\n        this.picks[ m ].setLabelText(\r\n          this.options.autoPeakPickingFormat.call( this.picks[ m ], x, m )\r\n        );\r\n      } else {\r\n        this.picks[ m ].setLabelText( String( Math.round( x * 1000 ) / 1000 ) );\r\n      }\r\n\r\n      this.picks[ m ].makeLabels();\r\n\r\n      m++;\r\n      while ( this.picks[ m ] && this.picks[ m ].isSelected() ) {\r\n        m++;\r\n      }\r\n\r\n      if ( passed.length == this.options.autoPeakPickingNb ) {\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Hides the automatic peak picking (see the autoPeakPicking option)\r\n   * @memberof SerieLine\r\n   */\r\n  hidePeakPicking( lock ) {\r\n    if ( !this._hidePeakPickingLocked ) {\r\n      this._hidePeakPickingLocked = lock;\r\n    }\r\n\r\n    if ( !this.picks ) {\r\n      return;\r\n    }\r\n    for ( var i = 0; i < this.picks.length; i++ ) {\r\n      this.picks[ i ].hide();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Shows the automatic peak picking (see the autoPeakPicking option)\r\n   * @memberof SerieLine\r\n   */\r\n  showPeakPicking( unlock ) {\r\n    if ( this._hidePeakPickingLocked && !unlock ) {\r\n      return;\r\n    }\r\n\r\n    if ( !this.picks ) {\r\n      return;\r\n    }\r\n\r\n    for ( var i = 0; i < this.picks.length; i++ ) {\r\n      this.picks[ i ].show();\r\n    }\r\n  }\r\n\r\n  killPeakPicking() {\r\n    if ( this.picks ) {\r\n      for ( var i = 0, l = this.picks.length; i < l; i++ ) {\r\n        this.picks[ i ].kill();\r\n      }\r\n    }\r\n  }\r\n\r\n  getSerie() {\r\n    return this.serie;\r\n  }\r\n}\r\n\r\nexport default PluginPeakPicking;","import Graph from './graph.core.js';\r\nimport GraphPosition from './graph.position.js';\r\nimport GraphLegend from './graph.legend.js';\r\nimport AxisX from './graph.axis.x.js';\r\nimport AxisY from './graph.axis.y.js';\r\nimport AxisXBar from './graph.axis.x.bar.js';\r\nimport AxisXTime from './graph.axis.x.time.js';\r\nimport SerieLine from './series/graph.serie.line.js';\r\nimport SerieLine3D from './series/graph.serie.line.3d.js';\r\nimport SerieBar from './series/graph.serie.bar.js';\r\nimport SerieBox from './series/graph.serie.box.js';\r\nimport SerieLineColor from './series/graph.serie.line.colored.js';\r\nimport SerieScatter from './series/graph.serie.scatter.js';\r\nimport SerieZone from './series/graph.serie.zone.js';\r\nimport SerieZone3D from './series/graph.serie.zone.3d.js';\r\nimport SerieDensityMap from './series/graph.serie.densitymap.js';\r\nimport SerieContour from './series/graph.serie.contour.js';\r\nimport Shape from './shapes/graph.shape.js';\r\nimport ShapeAreaUnderCurve from './shapes/graph.shape.areaundercurve.js';\r\nimport ShapeArrow from './shapes/graph.shape.arrow.js';\r\nimport ShapeEllipse from './shapes/graph.shape.ellipse.js';\r\nimport ShapeLabel from './shapes/graph.shape.label.js';\r\nimport ShapePolyline from './shapes/graph.shape.polyline.js';\r\nimport ShapePolygon from './shapes/graph.shape.polygon.js';\r\nimport ShapeLine from './shapes/graph.shape.line.js';\r\nimport ShapeNMRIntegral from './shapes/graph.shape.nmrintegral.js';\r\nimport ShapePeakIntegration2D from './shapes/graph.shape.peakintegration2d.js';\r\nimport ShapeRect from './shapes/graph.shape.rect.js';\r\nimport ShapeCross from './shapes/graph.shape.cross.js';\r\nimport ShapePeakBoundariesCenter from './shapes/graph.shape.peakboundariescenter.js';\r\nimport ShapeHTML from './shapes/graph.shape.html.js';\r\nimport GraphPlugin from './plugins/graph.plugin.js';\r\nimport GraphPluginDrag from './plugins/graph.plugin.drag.js';\r\nimport GraphPluginShape from './plugins/graph.plugin.shape.js';\r\nimport GraphPluginSelectScatter from './plugins/graph.plugin.selectScatter.js';\r\nimport GraphPluginZoom from './plugins/graph.plugin.zoom.js';\r\nimport GraphPluginTimeSerieManager from './plugins/graph.plugin.timeseriemanager.js';\r\nimport GraphPluginSerieLineDifference from './plugins/graph.plugin.serielinedifference.js';\r\nimport GraphPluginAxisSplitting from './plugins/graph.plugin.axissplitting.js';\r\nimport GraphPluginMakeTracesDifferent from './plugins/graph.plugin.makeTracesDifferent.js';\r\nimport GraphPluginPeakPicking from './plugins/graph.plugin.peakpicking.js';\r\nimport {\r\n  Waveform\r\n} from './util/waveform.js';\r\nimport FitLM from './util/fit_lm.js';\r\n\r\n// Corrent naming is important here !\r\n\r\nGraph.registerConstructor( 'graph.position', GraphPosition );\r\n\r\nGraph.registerConstructor( 'graph.axis.x', AxisX );\r\nGraph.registerConstructor( 'graph.axis.y', AxisY );\r\nGraph.registerConstructor( 'graph.axis.x.bar', AxisXBar );\r\nGraph.registerConstructor( 'graph.axis.x.time', AxisXTime );\r\n\r\nGraph.registerConstructor( 'graph.serie.line', SerieLine );\r\nGraph.registerConstructor( 'graph.serie.line.3d', SerieLine3D );\r\nGraph.registerConstructor( 'graph.serie.line.color', SerieLineColor );\r\nGraph.registerConstructor( 'graph.serie.contour', SerieContour );\r\nGraph.registerConstructor( 'graph.serie.bar', SerieBar );\r\nGraph.registerConstructor( 'graph.serie.box', SerieBox );\r\nGraph.registerConstructor( 'graph.serie.scatter', SerieScatter );\r\nGraph.registerConstructor( 'graph.serie.zone', SerieZone );\r\nGraph.registerConstructor( 'graph.serie.zone.3d', SerieZone3D );\r\nGraph.registerConstructor( 'graph.serie.densitymap', SerieDensityMap );\r\n\r\nGraph.registerConstructor( Graph.SERIE_LINE, SerieLine );\r\nGraph.registerConstructor( Graph.SERIE_LINE_3D, SerieLine3D );\r\nGraph.registerConstructor( Graph.SERIE_LINE_COLORED, SerieLineColor );\r\nGraph.registerConstructor( Graph.SERIE_CONTOUR, SerieContour );\r\nGraph.registerConstructor( Graph.SERIE_BAR, SerieBar );\r\nGraph.registerConstructor( Graph.SERIE_BOX, SerieBox );\r\nGraph.registerConstructor( Graph.SERIE_SCATTER, SerieScatter );\r\nGraph.registerConstructor( Graph.SERIE_ZONE, SerieZone );\r\nGraph.registerConstructor( Graph.SERIE_ZONE_3D, SerieZone3D );\r\nGraph.registerConstructor( Graph.SERIE_DENSITYMAP, SerieDensityMap );\r\n\r\n//Graph.registerConstructor( \"graph.serie.line.broken\", GraphSerieLineBroken );\r\n\r\nGraph.registerConstructor( 'graph.plugin.shape', GraphPluginShape );\r\nGraph.registerConstructor( 'graph.plugin.drag', GraphPluginDrag );\r\nGraph.registerConstructor( 'graph.plugin.zoom', GraphPluginZoom );\r\nGraph.registerConstructor( 'graph.plugin.selectScatter', GraphPluginSelectScatter );\r\nGraph.registerConstructor( 'graph.plugin.timeSerieManager', GraphPluginTimeSerieManager );\r\nGraph.registerConstructor( 'graph.plugin.serielinedifference', GraphPluginSerieLineDifference );\r\nGraph.registerConstructor( 'graph.plugin.serieLineDifference', GraphPluginSerieLineDifference );\r\nGraph.registerConstructor( 'graph.plugin.axissplitting', GraphPluginAxisSplitting );\r\nGraph.registerConstructor( 'graph.plugin.makeTracesDifferent', GraphPluginMakeTracesDifferent );\r\nGraph.registerConstructor( 'graph.plugin.peakPicking', GraphPluginPeakPicking );\r\n\r\nGraph.registerConstructor( 'graph.shape', Shape );\r\nGraph.registerConstructor( 'graph.shape.areaundercurve', ShapeAreaUnderCurve );\r\nGraph.registerConstructor( 'graph.shape.arrow', ShapeArrow );\r\nGraph.registerConstructor( 'graph.shape.ellipse', ShapeEllipse );\r\nGraph.registerConstructor( 'graph.shape.polygon', ShapePolygon );\r\nGraph.registerConstructor( 'graph.shape.label', ShapeLabel );\r\nGraph.registerConstructor( 'graph.shape.polyline', ShapePolyline );\r\nGraph.registerConstructor( 'graph.shape.line', ShapeLine );\r\nGraph.registerConstructor( 'graph.shape.nmrintegral', ShapeNMRIntegral );\r\nGraph.registerConstructor( 'graph.shape.html', ShapeHTML );\r\nGraph.registerConstructor( 'graph.shape.peakintegration2d', ShapePeakIntegration2D );\r\n//  Graph.registerConstructor( \"graph.shape.peakinterval\", GraphShapePeakInterval );\r\n//  Graph.registerConstructor( \"graph.shape.peakinterval2\", GraphShapePeakInterval2 );\r\n//  Graph.registerConstructor( \"graph.shape.rangex\", GraphShapeRangeX );\r\nGraph.registerConstructor( 'graph.shape.rect', ShapeRect );\r\nGraph.registerConstructor( 'graph.shape.rectangle', ShapeRect );\r\nGraph.registerConstructor( 'graph.shape.cross', ShapeCross );\r\n//Graph.registerConstructor( \"graph.shape.zoom2d\", GraphShapeZoom2D );\r\nGraph.registerConstructor( 'graph.shape.peakboundariescenter', ShapePeakBoundariesCenter );\r\n\r\n//   Graph.registerConstructor( \"graph.toolbar\", GraphToolbar );\r\nGraph.registerConstructor( 'graph.legend', GraphLegend );\r\nGraph.registerConstructor( 'graph.waveform', Waveform );\r\n\r\nexport default Graph;"],"names":["_parsePx","px","indexOf","parseInt","replace","isNumeric","n","isNaN","parseFloat","isFinite","Position","constructor","x","y","dx","dy","duplicate","compute","graph","xAxis","yAxis","serie","hasXAxis","hasYAxis","throw","_compute","relativeTo","_relativeTo","relativeToComputed","parsed","pos","getXAxis","getYAxis","i","axis","val","dval","undefined","console","warn","closest","getClosestPointToXY","Error","getName","getY","yClosest","error","getPx","def","yMin","_parsePercent","_getPositionPx","getRelPx","value","getDrawingWidth","getDrawingHeight","getPos","percent","getDeltaPx","v","deltaPosition","mode","delta","ref","refd","refPx","deltaPx","getValPosition","getRelVal","rel","getMaxValue","getMinValue","getMinPx","getMaxPx","getPxRel","check","callback","posObject","position","setAttributeTo","to","params","ns","setAttributeNS","setAttribute","mapEventEmission","options","source","eventName","substring","toLowerCase","on","j","apply","arguments","guid","c","r","Math","random","toString","throwError","message","obj","Array","isArray","hue2rgb","p","q","t","hslToRgb","h","s","l","g","b","round","saveDomAttributes","attributes","identification","_savedAttributesIds","restoreDomAttributes","_savedAttributes","_attributes","push","getAttribute","hasSavedAttribute","dom","attr","overwriteDomAttribute","attribute","newValue","splice","attrs","length","debounce","func","wait","immediate","timeout","context","args","later","callNow","clearTimeout","setTimeout","SVGParser","svgString","parser","DOMParser","doc","parseFromString","getOffset","el","rect","getBoundingClientRect","top","left","setCSS","element","values","style","ajaxGet","Promise","resolve","reject","request","XMLHttpRequest","open","type","url","json","setRequestHeader","onload","status","response","responseText","JSON","parse","onerror","send","hasOwn","Object","prototype","hasOwnProperty","toStr","arr","call","isPlainObject","hasOwnConstructor","hasIsPrototypeOf","key","extend","name","src","copy","copyIsArray","clone","target","deep","mix","baseClass","mixin","prop","emptyDom","firstChild","removeChild","setMarkerStyle","styleName","showMarkers","_default","modifiers","default","setSerieStyle","Graph","jsonSerie","styles","map","index","line","SERIE_LINE","SERIE_BAR","SERIE_LINE_COLORED","color","setLineColor","width","setLineWidth","dash","setLineStyle","fill","setFillColor","fillOpacity","setFillOpacity","errorBar","setErrorBarStyle","errorBox","setErrorBoxStyle","marker","SERIE_SCATTER","processAxes","axisOptions","allAxes","forEach","constructorName","getConstructor","init","setBottomAxis","getNumAxes","setTopAxis","setLeftAxis","setRightAxis","categories","makeAxes","jsonAxes","bottom","right","makeAnnotation","axes","properties","label","propertyName","newPropertyName","charAt","toUpperCase","slice","shape","newShape","setSerie","layer","setLayer","setXAxis","setYAxis","draw","redraw","makeGraph","resize","height","legend","opts","seriesHideable","isSerieHideable","seriesSelectable","isSerieSelectable","makeLegend","setAutoPosition","setPosition","series","data","SERIE_BOX","newWaveformHash","errors","setData","newWaveform","xBar","setErrorBarX","xBarAbove","setErrorBarXAbove","xBarBelow","setErrorBarXBelow","yBar","setErrorBar","yBarAbove","setErrorBarAbove","yBarBelow","setErrorBarBelow","xBox","setErrorBoxX","xBoxAbove","setErrorBoxXAbove","xBoxBelow","setErrorBoxXBelow","yBox","setErrorBox","yBoxAbove","setErrorBoxAbove","yBoxBelow","setErrorBoxBelow","newSerie","setColors","autoAxis","excludeFromLegend","setWaveform","serieStyle","annotations","annotation","fromJSON","wrapper","graphFromJson","setWrapper","onAll","setJSON","killSeries","state","keepState","_applyToAxes","min","getCurrentMin","max","getCurrentMax","killAxis","killLegend","killShapes","this","setCurrentMin","setCurrentMax","EventMixin","handler","__eventHandlers","off","handlers","ofAll","trigger","allHandlers","__all","emit","Obj","assign","dataAggregator","URL","createObjectURL","Blob","Worker","aggregatorWorker","queue","string","onmessage","e","maxX","minX","maxY","minY","direction","numPoints","k","slots","dataAggregatedX","dataAggregatedY","aggregationSum","getX","slotNumber","lastAggregationX","lastAggregation","lastAggregationSum","newAggregation","newAggregationX","xdata","xScale","xOffset","aggregations","dataPerSlot","floor","slotX","slotY","sums","postMessage","aggregates","_queueId","workerUrl","id","toOptimize","requestId","Date","now","prom","resolver","FitHost","DELTAP","BIGVAL","WEIGHT","setYData","dataY","setXData","dataX","setWeight","weight","setInitialParams","subsetIndex","setSubset","setFunction","function","progress","hookIteration","parms","NPARMS","fromIndex","toIndex","_from","_to","f","_hookIteration","buildFit","_func","NPTS","getLength","arrY","getDataY","arrX","getDataX","resid","jac","fit","log","join","LM","_result","done","param","computeResiduals","sumsq","nudge","dp","buildJacobian","FACTOR","d","getResidualElement","getJacobianElement","xmin","getMin","xmax","getMax","waveformResult","waveform","gH","gnadj","gnpnts","hook","LMITER","LMBOOST","LMSHRINK","LAMBDAZERO","LAMBDAMAX","LMTOL","sos","sosprev","lambda","myH","nadj","npts","beta","alpha","amatrix","niter","bLMiter","rrise","gaussj","a","N","det","big","save","L","ik","jk","abs","Waveform","nb","bars","above","below","boxes","BELOW","ABOVE","BOX","BAR","_originalData","_originalDataX","mutated","setXWaveform","nanable","isNaNAllowed","warnNaN","newData","getTypedArrayClass","_makeArray","_setData","optimized","dataInUse","getScale","getShift","computeXMinMax","hasXWaveform","getXWaveform","wave","append","rescaleX","offset","scale","_typedArrayClass","setTypedArrayClass","isUnsigned","from","Float32Array","Float64Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","recalculateMinMaxNewPoint","prepend","unshift","monotoneous","getMonotoneousAscending","_monotoneousAscending","concat","wave2","checkMonotonicity","monoDir","Number","MAX_VALUE","_monotoneous","checkMinMaxErrorBars","hasErrorBars","getMaxError","b1","b2","getDataInUse","getIndexFromVal","useDataToUse","roundingMethod","getIndexFromMonotoneousData","dataInUseType","getIndexFromX","xval","getXShift","getXScale","getDataMinX","getDataMaxX","getData","isXMonotoneous","euclidianSearch","getIndexFromY","yval","ydata","getDataMinY","getDataMaxY","setAtIndex","getIndexFromXY","scaleX","scaleY","getIndexFromDataXY","valX","valY","valCollection","isAscending","isMonotoneous","trace","binarySearch","findWithShortestDistance","axisRef","xMaxDistance","yMaxDistance","getShortestDistanceToPoint","maxDistanceX","maxDistanceY","y2","x2","distance","shortestDistance","shortestDistanceIndex","point","POSITIVE_INFINITY","distToSegment","getReductionType","getXMin","getXMax","getYMin","getYMax","getMinX","getMaxX","getMinY","getMaxY","setShift","shift","setScale","setXShift","setXScale","getDataToUseFlat","self","rejector","FitLM","util","results","getXRaw","_integrateP","temp","sum","deltaTot","diff","integrateP","integrate","fromX","toX","average","p0","p1","getAverageP","mean","stddev","num","denom","getAverageX","_integrateX","dir","requireXMonotonicity","requireMonotonicity","invert","reverse","resampleForDisplay","inverting","dataMinMax","resampleSum","resampleMin","resampleMax","resampleNum","resample_x_start","resample_x_px_start","x_px","doing_mean","firstPointIndex","xPosition","resampleToPx","xpos","interpolate","yData","xIndex","xData","NaN","xIndexF","interpolateIndex_X","indexStart","getXMonotoneousAscending","isXMonotoneousAscending","divide","numberOrWave","_arithmetic","DIVIDE","divideBy","multiply","MULTIPLY","multiplyBy","logBase","ln","E","base","add","ADD","addBy","subtract","SUBTRACT","subtractBy","math","method","operator","_waveArithmetic","_numberArithmetic","operation","yDataThis","xSet","Set","xData2","xs","sort","ys","aggregate","_dataAggregating","_dataAggregated","_dataAggregationDirection","pow2","pow2floor","aggregator","then","event","hasAggregation","selectAggregatedData","pxWidth","level","pow2ceil","alsoDuplicateXWave","xShift","subrangeX","fromP","toP","findLocalMinMax","xRef","xWithin","indexPlus","indexMinus","findLocalMinMaxIndex","tmp","curr","currI","NEGATIVE_INFINITY","text","setUnit","unit","setXUnit","xunit","getUnit","getXUnit","hasXUnit","hasUnit","findLevels","box","edge","rounding","rangeP","lastLvlIndex","lvlIndex","indices","findLevel","ceil","rangeX","increment","getIndexInterpolate","normalize","factor","total","minValue","maxValue","ratio","filterNaN","filterInfinity","xWave","checkMinMax","side","getMaxErrorType","stack","getErrorBarXBelow","getErrorX","getErrorBarXAbove","getErrorBoxXBelow","getErrorBoxXAbove","getErrorBarYBelow","getError","getErrorBarYAbove","getErrorBoxYBelow","getErrorBoxYAbove","Symbol","valueBefore","valueAfter","indexBefore","indexAfter","targetX","targetY","haystackX","haystackY","distance_i","haystack","fineCheck","seedA","seedB","seedInt","nanDirection","WaveformHash","getYFromX","xValue","errorNotImplemented","keys","dist2","w","distToSegmentSquared","l2","GraphOptionsDefault","title","paddingTop","paddingBottom","paddingLeft","paddingRight","close","closeColor","fontSize","fontFamily","plugins","pluginAction","mouseActions","keyActions","wheel","dblclick","shapesUnselectOnClick","shapesUniqueSelection","_constructors","Map","HTMLElement","_creation","_drawn","__createDOM","bind","prevented","shapes","shapesLocked","plugin","selectedShapes","_axesHaveChanged","padding","currentAction","nsxlink","getTopAxis","getLeftAxis","getRightAxis","getBottomAxis","_pluginsInit","document","getElementById","appendChild","outline","wrapperStyle","getComputedStyle","setSize","_resize","_registerEvents","getDom","getId","getWrapper","setOption","setTitle","domTitle","textContent","setTitleFontSize","setTitleFontColor","fontColor","setTitleFontFamily","displayTitle","hideTitle","hide","display","show","onlyIfAxesHaveChanged","force","sizeSet","executeRedrawSlaves","haveAxesChanged","hasSizeChanged","refreshDrawingZone","_pluginsExecute","drawn","updateLegend","drawSeries","delayUpdate","_lockUpdate","doUpdate","update","resumeUpdate","isDelayedUpdate","setWidth","skipResize","setHeight","getWidth","getHeight","getPaddingTop","getPaddingLeft","getPaddingBottom","getPaddingRight","useCache","innerHeight","innerWidth","cacheOffset","offsetCached","uncacheOffset","_getAxis","kill","noRedraw","noSerieKill","isX","isY","axisGroup","group","groupPrimaryGrids","gridPrimary","groupSecondaryGrids","gridSecondary","hasTopAxis","hasBottomAxis","hasLeftAxis","hasRightAxis","hasAxis","axisList","autoscaleAxes","autoscale","autoScale","autoScaleAxes","autoScaleAxis","setMinMaxToFitSeries","gridsOff","gridsOn","setBackgroundColor","rectEvent","getAxisState","setAxisState","saveAxisState","savedName","savedAxisState","recallAxisState","_applyToAxis","getBoundaryAxis","minmax","usingZValues","valSeries","getBoundaryAxisFromSeries","func2use","infinity2use","Infinity","serieValue","getSeriesFromAxis","isShown","updateDataMinMaxAxes","axisvars","setMaxValueData","setMinValueData","tb","lr","ax","findAxesLinkedTo","linkedToAxis","_axisHasChanged","getSerie","makeSerie","postInit","getSeries","allSeries","types","filter","include","getType","sortSeries","drawSerie","resetSeries","removeSeries","selectSerie","selectName","selectedSerie","selectionType","unselectSerie","triggerEvent","select","getSelectedSerie","unselect","getShapesOfSerie","makeToolbar","toolbarData","toolbar","getShapes","shapeType","shapeData","mute","shapeProperties","prevent","_id","_data","setProperties","simplified","props","setProp","GraphPosition","fillColor","strokeColor","setStrokeColor","strokeWidth","setStrokeWidth","locked","lock","movable","selectable","resizable","handles","selectOnMouseDown","selectOnClick","transforms","addTransform","highlightOnMouseOver","labelEditable","labels","showLabel","setLabelText","setLabelPosition","setLabelColor","setLabelSize","size","setLabelAngle","angle","setLabelBaseline","baseline","setLabelAnchor","anchor","setLabelBackgroundColor","backgroundColor","setLabelBackgroundOpacity","backgroundOpacity","createHandles","applyStyle","newPosition","varArgs","redrawShapes","removeShapes","selectShape","isSelectable","unselectShapes","_select","getSelectedShapes","unselectShape","cancelUnselectShape","_unselect","_removeShape","appendShapeToDom","isHTML","insertBefore","_dom","getLayer","removeShapeFromDom","appendSerieToDom","groupMain","removeSerieFromDom","layers","createElementNS","prevLayer","plotGroup","nextSibling","focus","elementMoving","movingElement","bypassHandleMouse","stopElementMoving","_makeClosingLines","closingLines","els","graphingZone","isActionAllowed","action","enabled","keyCode","keyCheck","backspace","enter","tab","ctrl","alt","pause","escape","up","down","meta","shiftKey","ctrlKey","metaKey","altKey","forcePlugin","forcedPlugin","unforcePlugin","funcName","_pluginExecute","which","pluginYieldActiveState","activePlugin","_serieExecute","pluginName","pluginOptions","getPlugin","hasPlugin","onlyIfRequired","getLegend","requireLegendUpdate","requireDelayedUpdate","orthogonalProjectionSetup","zAxis","maxZ","minZ","shiftX","shiftY","orthogonalProjectionUpdate","groupGrids","refAxisX","refAxisY","x0","y0","getZProj","getZPos","sa","sb","_removeSerie","contextListen","menuElements","onContextMenuListen","lockShapes","moving","resizing","unlockShapes","arg","_getXY","clientX","clientY","_sizeChanged","updateGraphingZone","transform","getDrawingSpaceWidth","drawingSpaceWidth","getDrawingSpaceHeight","drawingSpaceHeight","getDrawingSpaceMinX","drawingSpaceMinX","getDrawingSpaceMinY","drawingSpaceMinY","getDrawingSpaceMaxX","drawingSpaceMaxX","getDrawingSpaceMaxY","drawingSpaceMaxY","tracking","trackingLine","enable","seriesSet","addSerieToTrackingLine","serieOptions","noLine","trackingLineShape","stroke","trackingLineShapeOptions","serieShape","rx","getLineWidth","ry","trackingShape","getLineColor","forceParentDom","setKatexRenderer","renderer","_katexRenderer","hasKatexRenderer","renderWithKatex","katexValue","katexElement","div","createElement","exportToSchema","schema","axesPositions","axesExport","allaxes","axisPosition","forcedMin","forcedMax","flip","flipped","seriesExport","toType","exportData","isFlipped","linestyle","stylename","lineColor","lineWidth","lineStyle","styleObj","markers","zoom","points","getLabel","registerConstructor","has","set","softFail","get","waveformHash","getAxisLevelFromSpan","span","possible","m","levels","_painted","hideGroup","showGroup","floating","getSpan","setLevel","getAxisPosition","shiftTop","reduce","prev","shiftBottom","current","getLevel","setMinPx","setMaxPx","forcedWidth","shift2","equalizePosition","shiftLeft","shiftRight","floatingAxis","getFloatingAxis","floatingValue","getFloatingValue","floatingPx","_closeLine","clipRect","drawLines","_handleKey","checkKeyActions","parameters","methodName","keyComb","preventDefault","stopPropagation","removeSelectedShape","keepInDom","xmlns","defs","groupEvent","titleFontSize","titleFontColor","titleFontFamily","clip","markerArrow","pathArrow","markerHorizontalSplit","path","markerVerticalSplit","vertLineArrow","pathVertLine","addEventListener","coords","_handleMouseMove","_handleMouseLeave","_handleMouseDown","_handleMouseUp","_handleDblClick","_handleClick","deltaY","wheelDeltaY","wheelDelta","_handleMouseWheel","checkMouseActions","handleMouseMove","xOverwritePx","snapToSerie","getPosition","xClosest","_trackingLegend","_trackingLegendSerie","textMethod","trackingLineDefaultTextMethod","output","closestPoint","getMouseVal","withinPx","useAxis","legendType","mouseMoveData","withinPxX","withinPxY","executed","seriesOutput","posXPx","posYPx","justCreated","_makeTrackingLegend","forceTrackingLegendMode","_trackingLegendMove","txt","innerHTML","toY","skip","start","offsetHeight","startX","marginLeft","startY","marginTop","offsetWidth","next","window","requestAnimationFrame","borderRadius","boxShadow","border","pointerEvents","valueToHtml","handleMouseUp","jsGraphIsShape","inst","_availableAxes","time","bar","axisInstance","broken","x1","y1","isDisplayed","coordX","coordY","handleMouseLeave","SERIE_CONTOUR","SERIE_ZONE","SERIE_DENSITYMAP","SERIE_LINE_3D","SERIE_ZONE_3D","TICKS_OUTSIDE","TICKS_INSIDE","TICKS_CENTERED","GraphJSON","legendDefaults","frame","frameWidth","frameColor","frameRounding","shapesToggleable","Legend","svg","subG","groups","rectBottom","transformX","transformY","setEvents","eyeId","eyeCrossedId","eyeClosed","eye","adoptNode","documentElement","alignToX","alignToY","setDraggable","bln","autoPosition","buildLegendBox","posX","posY","excludedFromLegend","bbox","getBBox","cursor","redrawGraph","previousHeight","previousWidth","calculatePosition","poscoords","_setPosition","_requiredUpdate","hasChildNodes","lastChild","fullWidth","getSymbolForLegend","_getSymbolForLegendContainer","getMarkerForLegend","getTextForLegend","eyeUse","isHideable","hideShapesOnHideSerie","isSelected","notHideable","hideable","isToggleShapes","mousedown","mousemove","deltaX","fixSeries","fixSeriesAdd","svgElement","ExtendedEventMixin","manglingName","__proto__","defaults","lineAt","axisDataSpacing","unitModification","primaryGrid","secondaryGrid","primaryGridWidth","primaryGridColor","primaryGridDasharray","primaryGridOpacity","primaryTicksColor","secondaryGridWidth","secondaryGridColor","secondaryGridDasharray","secondaryGridOpacity","secondaryTicksColor","hideWhenNoSeriesShown","shiftToZero","tickPosition","nbTicksPrimary","nbTicksSecondary","ticklabelratio","exponentialFactor","exponentialLabelFactor","logScale","marginMin","marginMax","scientificScale","scientificScaleExponent","engineeringScale","unitInTicks","unitWrapperBefore","unitWrapperAfter","tickLabelOffset","useKatexForLabel","highestMax","lowestMin","labelValue","Axis","overwriteoptions","unitModificationTimeTicks","hasChanged","_lines","groupTicks","groupTickLabels","labelTspan","preunit","unitTspan","expTspan","expTspanExp","setTickPosition","gridLinePath","primary","secondary","setGridLinesStyle","groupSeries","widthHeightTick","ticks","ticksLabels","tickScaling","currentTick","lastCurrentTick","totalDelta","handleMouseMoveLocal","addLabel","getVal","cache","setDisplay","bool","accumulator","_hidden","setLineAt","atValues","adaptTo","thisValue","foreignValue","preference","adapt","foreign","currentAxisMin","currentAxisMax","_zoomed","use","getInterval","setFloating","setAxisDataSpacing","val1","val2","dataSpacing","setAxisDataSpacingMin","setAxisDataSpacingMax","minPx","setMinMaxFlipped","maxPx","minPxFlipped","maxPxFlipped","getMathMaxPx","getMathMinPx","dataMin","dataMax","getDataMax","getDataMin","setLowestMin","forceMin","noRescale","setHighestMax","forceMax","getForcedMin","getForcedMax","forceToAxis","getNbTicksPrimary","setNbTicksPrimary","getNbTicksSecondary","setNbTicksSecondary","mouseVal","handleMouseWheel","_doZoomVal","zoomLock","_zoomLocked","forceLock","_doZoom","px1","px2","cacheCurrentMin","cacheCurrentMax","cacheInterval","_hasChanged","getSerieShift","_serieShift","getSerieScale","_serieScale","getUnitPerTick","nbTick","valrange","pxPerTick","nbTicks","unitPerTick","breaked","unitPerTickCorrect","decimals","numberToNatural","pow","possibleTicks","noNotify","interval","getCurrentInterval","cachedInterval","cachedCurrentMin","cachedCurrentMax","_draw","widthPx","scientificExponent","letter","unitDecade","getEngineeringExponent","getExponentGreekLetter","writeUnit","preunitTspan","hideTicks","resetTicksLength","widthHeight","drawLinkedToAxisTicksWrapper","drawLinearTicksWrapper","drawLogTicks","removeUselessTicks","removeUselessTickLabels","_drawLine","_hideLine","tickPrimaryUnit","primaryTickUnit","maxPrimaryTickUnit","minPrimaryTickUnit","drawTicks","secondaryTicks","forcePrimaryTickUnit","primaryInterval","forcePrimaryTickUnitMax","forcePrimaryTickUnitMin","getPrimaryTickUnit","incrTick","setTickLabelRatio","tickRatio","doesHideWhenNoSeriesShown","_widthLabels","secondaryIncr","subIncrTick","loop","loop2","drawTickWrapper","getMaxSizeTick","nextTick","tick","nextTickLabel","lastCurrentTickLabel","currentTickLabel","tickLabel","nextGridLine","setGridLineStyle","gridLine","getPrimaryGridColor","getSecondaryGridColor","getPrimaryGridWidth","getSecondaryGridWidth","getPrimaryGridOpacity","getSecondaryGridOpacity","dasharray","getPrimaryGridDasharray","getSecondaryGridDasharray","incr","optsMain","exponential","overwrite","drawTick","linkToAxis","scalingFunction","delta2","String","getRoundedPx","exp","valueToText","forceDecimals","toFixed","getExponentialFactor","getExponentialLabelFactor","modifyUnit","dec","noScaling","noUnits","getModifiedValue","umin","units","valueRounded","setExponentialFactor","setExponentialLabelFactor","setName","setLabel","setLabelFont","font","labelFont","setSpan","_level","tickPx1","tickPx2","setGrids","setPrimaryGrid","setSecondaryGrid","primaryGridOn","primaryGridOff","secondaryGridOn","secondaryGridOff","turnGridsOff","turnGridsOn","setColor","axisColor","ticksLabelColor","labelColor","setAxisColor","getAxisColor","setTickLabelOffset","offsetValue","setPrimaryTicksColor","getPrimaryTicksColor","setSecondaryTicksColor","getSecondaryTicksColor","setTicksLabelColor","getTicksLabelColor","setPrimaryGridColor","setSecondaryGridColor","setPrimaryGridWidth","setSecondaryGridWidth","setPrimaryGridOpacity","opacity","setSecondaryGridOpacity","setPrimaryGridDasharray","setSecondaryGridDasharray","getLabelColor","setTickContent","tspan","setUnitInTicks","setUnitWrapper","before","after","setUnitDecade","setScientific","setScientificScaleExponent","setEngineering","engineeringScaling","setLogScale","isZoomed","getValue","AxisX","topbottom","forceHeight","forcedHeight","forcedPos","dominantBaseline","drawLabel","tickWidth","drawSpecifics","splitMarks","zValue","AxisY","leftright","forceWidth","setAxisPosition","shiftPosition","getAdditionalWidth","tickMargin","longestTick","getComputedTextLength","fullwidthlabel","placeLabel","xshift","isLeft","isRight","scaleToFitAxis","excludeSerie","end","maxV","minV","AxisXBar","_barCategories","elements","autoSeries","setSeries","setCategoryConfig","_getUsedCategories","usedCategories","getUsedCategories","cat","dispatchedCategories","scategories","setDataIndices","axisFormat","threshold","increments","format","dateFormat","token","timezone","timezoneClip","pad","len","getWeek","onejan","date","mask","utc","dF","test","SyntaxError","masks","_","D","H","M","o","getTimezoneOffset","flags","dd","ddd","i18n","dayNames","dddd","mm","mmm","monthNames","mmmm","yy","yyyy","hh","HH","MM","ss","tt","T","TT","Z","match","pop","S","W","$0","shortDate","mediumDate","longDate","fullDate","shortTime","mediumTime","longTime","isoDate","isoTime","isoDateTime","isoUtcDateTime","getClosestIncrement","basis","roundDate","setSeconds","getSeconds","setMilliseconds","setMinutes","getMinutes","setHours","getHours","setDate","getDate","setMonth","getMonth","incrementDate","setFullYear","getFullYear","getGroup","number","line1","line2","cloneNode","hideGroups","getDateText","renderGroup","x1B","x2B","substr","GraphTimeAxis","widthTime","timePerPx","maxVal","minVal","currentFormat","xVal1","xVal2","dateFirst","currentDate","getTime","ErrorBarMixin","makeBarY","origin","makeBoxY","makeBarX","makeBoxX","errorstyle","errorbarStyle","_setErrorStyle","errorboxStyle","errorstyles","pairs","makePath","strokeOpacity","all","errorDrawInit","paths","errorAddPoint","xpx","ypx","errorAddPointBarChart","doErrorDraw","errorDraw","defaultOptions","redrawShapesAfterDraw","Serie","defaultInherited","_symbolLegendContainer","beforeDraw","afterDraw","oneDimensional","_addData","howmany","clearData","setOptions","noLegendUpdate","hideShapes","bindShapesToDisplayState","hidden","hideImpl","hidePeakPicking","showShapes","showImpl","showPeakPicking","toggleDisplay","axisCheck","selected","_checkX","_checkY","autoAxes","xaxis","yaxis","setAxes","getWaveform","getWaveforms","dataHasChanged","lineForLegend","applyLineStyle","setLegendSymbolStyle","updateStyle","textForLegend","getIndex","setFlip","getFlip","layerIndex","newLayer","setStyle","styleHasChanged","_changedStyles","hasStyleChanged","_dataHasChanged","hasDataChanged","setInfo","infos","getInfo","setAdditionalData","additionalData","getAdditionalData","enableTracking","hoverCallback","outCallback","_tracker","disableTracking","_trackerDom","remove","allowTrackingLine","_type","_excludedFromLegend","includeInLegend","categoryIndices","nbCategories","hasErrors","EventMixing","markerStyles","unselected","cx","cy","SerieScatter","shapesDetails","groupMarkers","parentElement","selectMarkerOnHover","selectMarker","setDataCategory","dataCategory","empty","container","shapeLegend","_makeMarker","getMarkerStyle","isCategory","applyMarkerStyle","selection","noSetPosition","modifier","styleAll","defaultStyle","parentNode","removeAttribute","unselectMarker","setOn","selectMarkers","selectionStyle","allStyles","setMarkers","hideMarkers","usePx","xValAllowed","yValAllowed","closestPointIndex","xMax","yMax","interpolation","xBefore","xAfter","yBefore","yAfter","xExact","indexClosest","interpolatedY","trackMouse","lineToZero","selectableOnClick","overflowX","overflowY","SerieLine","shown","_isMinOrMax","groupLines","domMarker","markerLabel","markerLabelSquare","domMarkerHover","domMarkerSelect","markerHovered","groupMarkerSelected","markerPoints","lines","independantMarkers","initExtended1","extendStyles","applyLineStyles","onMouseWheel","degrade","pxPerP","degradationPx","drawInit","currentLineId","counter","currentLine","_dataToUse","numberOfPointsInTotal","promise","_xDataToUse","removeLinesGroup","_afterLinesGroup","insertLinesGroup","removeExtraLines","slotToUse","_slotToUse","lookForMaxima","lookForMinima","pos0","toggleMarker","split","lastX","lastY","xpx2","ypx2","xMin","yLeftCrossingRatio","yLeftCrossing","yRightCrossingRatio","yRightCrossing","xTopCrossingRatio","xTopCrossing","xBottomCrossingRatio","xBottomCrossing","yshift","yscale","pointOutside","lastPointOutside","pointOnAxis","_createLine","counter2","_addPoint","cloned","children","ret","_trackingCallback","_trackingOutCallback","move","allowMarker","getLineDashArray","getFillColor","getMarkerPath","family","z","doMarker","yValue","intY","trueX","start2","end2","v1","v2","initJ","maxJ","dataIndex","xBeforeIndexArr","applyToSelected","getLineStyle","getStyle","extendStyle","styleTarget","styleOrigin","xmonotoneous","dataOutput","Serie3DMixin","zpos","useZValues","getZCorrectedValue","valFinal","wf","SerieLine3D","setZPos","zPos","setz","SerieBar","pathDom","getFillOpacity","orientation","maxBoxWidth","meanLineColor","meanLineWidth","boxAboveLineWidth","boxAboveLineColor","boxAboveFillColor","boxAboveFillOpacity","boxBelowLineWidth","boxBelowLineColor","boxBelowFillColor","boxBelowFillOpacity","barAboveLineColor","barAboveLineWidth","barBelowLineColor","barBelowLineWidth","outlierLineWidth","outlierLineColor","outlierFillColor","outlierFillOpacity","SerieBox","axisref","axisval","methodref","methodval","blnX","Q2","Q3","Q1","whiskers","outliers","_style","styleValue","_set","_gstyle","setMeanLineColor","getMeanLineColor","setMeanLineWidth","getMeanLineWidth","setBoxAboveLineColor","getBoxAboveLineColor","setBoxBelowLineColor","getBoxBelowLineColor","setBoxAboveLineWidth","getBoxAboveLineWidth","setBoxBelowLineWidth","getBoxBelowLineWidth","setBoxAboveFillColor","getBoxAboveFillColor","setBoxBelowFillColor","getBoxBelowFillColor","setBoxAboveFillOpacity","getBoxAboveFillOpacity","setBoxBelowFillOpacity","getBoxBelowFillOpacity","setBarAboveLineColor","getBarAboveLineColor","setBarBelowLineColor","getBarBelowLineColor","setBarAboveLineWidth","getBarAboveLineWidth","setBarBelowLineWidth","getBarBelowLineWidth","setOutlierLineColor","getOutlierLineColor","setOutlierLineWidth","getOutlierLineWidth","setOutlierFillColor","getOutlierFillColor","setOutlierFillOpacity","getOutlierFillOpacity","axis2","boxOtherDimension","boxAbove","boxBelow","barAbove","barBelow","useCategories","_linkedToScatterSeries","scatter_serie","lineMean","applyMeanStyle","rectAbove","rectBelow","boxPos","applyBoxStyle","whiskerAbove","whiskerBelow","outliervalue","outlier","setOutlierStyle","applyWhiskerStyle","getCategoryIndex","extremity","xymode","scatter_serie_cat","linkToScatterSerie","SerieLineColor","colors","toBreak","eraseLines","incrXFlip","latchLines","xpxbefore","ypxbefore","xbefore","ybefore","_rgb","object","SerieZone","groupZones","lineZone","clipId","waveforms","setWaveforms","setMinMaxWaveforms","buffer","xminpx","xmaxpx","yminpx","ymaxpx","ymin","ymax","getLineOpacity","setLineOpacity","lineOpacity","SerieZone3D","SerieDensityMap","rects","recalculateBinsOnDraw","calculateDensity","numX","fromY","numY","densitymap","indexX","indexY","binMin","binMax","maxIndexX","maxIndexY","setDensityMap","calculateDensityWeighted","compX","compY","exactX","exactY","indexXLow","indexXHigh","indexYLow","indexYHigh","autoBins","setPxPerBin","pxPerBinX","pxPerBinY","weightedDensityMap","calculationDensityMap","pxPerBin","weighted","setBinsFromTo","densityMapCalculation","numBins","calculateDensityAdvanced","weighing","widthValues","axisGetter","dimension","densityMapCalculate","setColorMapBinBoundaries","_internal","colorMapMin","colorMapMax","callbackColorMapMinMax","autoColorMapBinBoundaries","onRedrawColorMapBinBoundaries","colorMapHSL","colorStops","numColors","methods","colorMap","opacities","first","slices","colorMapNum","autoColorMapHSL","getColorIndex","binValue","colorIndex","deltaXPx","deltaYPx","drawRects","SerieContour","negativeDelta","positiveDelta","negativeThreshold","positiveThreshold","datas","segments","domLine","zValues","incrYFlip","lastxpx","setColorTo","fixed","positive","hasNegative","_shapeZoom","hideHandleNeg","setHandleNeg","showHandleNeg","setHandlePos","setDynamicColor","lineColors","setNegative","hsl","fromPositive","toPositive","fromNegative","toNegative","rgb","overwriteValue","setShapeZoom","Shape","_selected","createDom","classes","masker","maskPath","maskingId","maskDomWrapper","maskDom","handleMouseOver","handleMouseOut","handleMouseDown","handleClick","handleDblClick","initImpl","keepDom","_inDom","isHidden","isVisible","addClass","className","makeClasses","removeClass","changed","setEventReceptacle","getProp","preventRedraw","appendToDom","makeLabels","applyPosition","redrawImpl","updateLabels","_applyTransforms","getRelativePosition","relativePosition","result","exec","getLabelPosition","getProperties","getProps","addProp","resetProp","setDom","noForce","_cachedDOM","setDomGroup","overwriteSavedProp","applySelectedStyle","getStrokeColor","getStrokeWidth","setStrokeDasharray","setAttributes","addAttribute","attributeName","attributeValue","added","addTransformRotate","angleType","center","resetTransforms","setLabelData","getLabelText","displayLabel","hideLabel","setLabelFontSize","setLabelStrokeColor","setLabelStrokeWidth","applyGenericStyle","sortPositions","sortFunction","transformString","atan","tan","PI","computePosition","posCenter","_labels","_labelsBackground","bg","labelDblClickListener","isLabelEditable","labelIndex","_applyLabelData","visible","currAngle","labelData","_getLabelAnchor","emptyLabels","_selectStatus","hasHandles","setter","addHandles","isLocked","handlesInDom","removeHandles","hideHandles","areHandlesInDom","hasStaticHandles","setHandles","getSelectStyle","style2","selectStyle","setSelectStyle","setStaticHandles","staticHandles","_createHandles","callbackEach","handle","isResizable","handleSelected","handleMouseDownImpl","handleMouseMoveImpl","handleMouseUpImpl","handleCreateImpl","isMovable","moved","_mouseCoords","preventUnselect","highlight","unHighlight","unlock","unmovable","unresizable","unselectable","saveDomName","getHighlightAttributes","highlightImpl","unHighlightImpl","_highlightAttributes","setHighlightAttributes","getMaskingID","maskWith","maskingShape","updateMask","position2","_getPosition","shapeLabel","textAlign","previousValue","blurEvent","nextValue","removeEventListener","_forcedParentDom","ShapeSurfaceUnderCurve","resizingPosition","posXY","posXY2","v3","firstX","firstY","xBeforeIndex","ShapeLine","GraphShape","currentPos2x","currentPos2y","currentPos1x","currentPos1y","pos2","posToChange","vertical","horizontal","noX","noY","forcedCoords","forced","ShapeArrow","nbHandles","ShapeEllipse","posR","posComputed","setR","triggerChange","ShapeLabel","ShapePolyline","setPointsPx","str","ShapeNMRIntegral","_domShadow","xor","xVal","yVal","getAxis","baseLine","pos1","index1","index2","index3","firstXVal","firstYVal","lastXVal","lastYVal","condition","incrementation","normalSums","_sumVal","sumVal","py","lastPointX","lastPointY","_sum","firstPointX","firstPointY","ratioLabel","updateIntegralValue","handleCondition","forceValue","toPrecision","_ratio","selectHandles","ShapeRectangle","sides","currentX","currentY","currentW","currentH","invX","invY","pos2X","pos2Y","_staticHandles","ShapePeakIntegration2D","ShapeRect","setBindableToDom","ShapeCross","getFromData","ShapePeakBoundaries","lineHeight","line3","rectBoundary","redrawLines","posLeft","posRight","redrawY","setY","setLineHeight","lineHeihgt","ShapeHTML","setContent","content","setRenderer","_renderer","currentPosX","currentPosY","Plugin","onMouseDown","onMouseUp","onMouseMove","PluginDrag","dragX","dragY","persistanceX","persistanceY","totaltime","_draggingX","_draggingY","_lastDraggingX","_lastDraggingY","stopAnimation","dt","speedX","speedY","_pluginDragMin","_pluginDragMax","accelerationX","accelerationY","_persistanceMove","PluginShape","setShape","shapeInfo","count","onChange","currentShape","currentShapeEvent","once","onCreate","PluginSelectScatter","_path","findPoints","j2","PluginZoom","_zoomingGroup","_zoomingSquare","zoomMode","_zoomingMode","_backedUpZoomMode","_zoomingXStart","_zoomingYStart","forcedY","onZoomStart","onZoomMove","removeZone","_x","_y","transition","smooth","modeX","modeY","fullX","toAxes","_pluginZoomMin","_pluginZoomMax","_pluginZoomMinFinal","_pluginZoomMaxFinal","fullY","doX","doY","onDblClick","pref","xActual","diffX","yActual","diffY","onZoom","maxTime","gradualUnzoomStart","sin","isFullX","isFullY","memory","memoryHead","getFromMemory","store","head","PluginTimeSerieManager","currentSlots","requestLevels","noRecalculate","updateSerie","recalculateSeries","LRUName","intervals","maxParallelRequests","optimalPxPerPoint","nbPoints","LRU","create","requestsRunning","setURL","setAvailableIntervals","serieName","serieType","dbElements","noZoneSerie","_zoneSerie","registerPlugin","removeListener","optimalInterval","getOptimalInterval","optimalIntervalIndex","cleanRegister","startSlotId","computeSlotID","endSlotId","intervalMultipliers","multiplier","firstSlotId","lastSlotId","slotId","computeTimeMin","register","processRequests","levelArray","levelElement","levelIndex","priority","noProcess","computeUniqueID","computeTimeMax","slotName","currentLevelChecking","requestToMake","getURL","requestElements","totalspan","optimalIntervalAmongAvailable","newDiff","extra","info","computeSlotTime","getZoneSerie","updateZoneSerie","recalculateSerie","lruData","recalculateSerieUpwards","setIntervalCheck","clearInterval","setInterval","downSlotId","downInterval","nextInterval","newSlotTime","newSlotTimeEnd","newSlotId","lockRedraw","unlockRedraw","isRedrawLocked","PluginSerieLineDifference","positiveStyle","negativeStyle","pathsPositive","pathsNegative","positivePolyline","negativePolyline","serieTop","serieBottom","serie1","serie2","setBoundaries","getFrom","getTo","w1","w2","wFinal","wFinal2","chunks","currentChunk","newChunk","wave1","crossing","computeCrossing","chunk","x11","y11","x12","y12","x21","y21","x22","y22","a1","a2","getPositivePolyline","getNegativePolyline","SerieLineExtended","subSeries","SerieScatterExtended","excludingMethods","addMethods","getOwnPropertyNames","subSerie","returnMethods","PluginAxisSplitting","margins","high","low","newXAxis","newBottomAxis","newYAxis","newLeftAxis","newTopAxis","getOptions","SplitXAxis","SplitYAxis","newRightAxis","preDraw","splits","splitNumber","markerFamilies","subserie","splitAxis","sserie","xSubAxis","ySubAxis","getSubAxis","subAxisIndex","newLineSerie","newScatterSerie","serieObj","defaultAxisConstructorOptions","SplitAxis","delegateMethods","cl","constructorOptions","_splitVal","_splits","fixGridIntervalBasedOnAxis","axisIndex","fixGridFor","splitSpread","autoSpread","_splitSpread","currentSplit","setChunkBoundaries","baseWidth","baseWidthIndex","_mean","_baseWidthVal","_baseWidthIndex","subAxis","spanReference","labelPosY","widthAfter","PluginMakeTracesDifferent","checkHSL","hue","saturation","lightness","buildHSLString","colorizeAll","seriesLength","serieTypes","startingColorHSL","colorHSL","endingColorHSL","affect","endS","endL","colorString","PluginPeakPicking","autoPeakPicking","autoPeakPickingNb","autoPeakPickingMinDistance","autoPeakPickingFormat","autoPeakPickingAllowAllY","picks","shapeOptions","minPosY","pick","serieRemoved","detectedPeaks","lastYPeakPicking","postDraw","peaks","passed","_hidePeakPickingLocked","killPeakPicking","AxisXTime","GraphPluginShape","GraphPluginDrag","GraphPluginZoom","GraphPluginSelectScatter","GraphPluginTimeSerieManager","GraphPluginSerieLineDifference","GraphPluginAxisSplitting","GraphPluginMakeTracesDifferent","GraphPluginPeakPicking","ShapeAreaUnderCurve","ShapePolygon","ShapePeakBoundariesCenter","GraphLegend"],"mappings":"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"}