{"version":3,"file":null,"sources":["D:/Documents/Web/jsGraph/src/graph.position.js","D:/Documents/Web/jsGraph/src/graph.util.js","D:/Documents/Web/jsGraph/src/dependencies/eventEmitter/EventEmitter.js","D:/Documents/Web/jsGraph/src/renderer/style.js","D:/Documents/Web/jsGraph/src/renderer/axes.js","D:/Documents/Web/jsGraph/src/renderer/annotations.js","D:/Documents/Web/jsGraph/src/renderer/main.js","D:/Documents/Web/jsGraph/src/util/data_aggregator.js","D:/Documents/Web/jsGraph/src/util/fit_lm.js","D:/Documents/Web/jsGraph/src/util/waveform.js","D:/Documents/Web/jsGraph/src/graph.core.js","D:/Documents/Web/jsGraph/src/graph.legend.js","D:/Documents/Web/jsGraph/src/graph.axis.js","D:/Documents/Web/jsGraph/src/graph.axis.x.js","D:/Documents/Web/jsGraph/src/graph.axis.y.js","D:/Documents/Web/jsGraph/src/graph.axis.x.bar.js","D:/Documents/Web/jsGraph/src/graph.axis.x.time.js","D:/Documents/Web/jsGraph/src/mixins/graph.mixin.errorbars.js","D:/Documents/Web/jsGraph/src/series/graph.serie.js","D:/Documents/Web/jsGraph/src/series/graph.serie.scatter.js","D:/Documents/Web/jsGraph/src/series/graph.serie.line.js","D:/Documents/Web/jsGraph/src/mixins/graph.mixin.serie3d.js","D:/Documents/Web/jsGraph/src/series/graph.serie.line.3d.js","D:/Documents/Web/jsGraph/src/series/graph.serie.bar.js","D:/Documents/Web/jsGraph/src/series/graph.serie.box.js","D:/Documents/Web/jsGraph/src/series/graph.serie.line.colored.js","D:/Documents/Web/jsGraph/src/series/graph.serie.zone.js","D:/Documents/Web/jsGraph/src/series/graph.serie.zone.3d.js","D:/Documents/Web/jsGraph/src/series/graph.serie.densitymap.js","D:/Documents/Web/jsGraph/src/series/graph.serie.contour.js","D:/Documents/Web/jsGraph/src/shapes/graph.shape.js","D:/Documents/Web/jsGraph/src/shapes/graph.shape.areaundercurve.js","D:/Documents/Web/jsGraph/src/shapes/graph.shape.line.js","D:/Documents/Web/jsGraph/src/shapes/graph.shape.arrow.js","D:/Documents/Web/jsGraph/src/shapes/graph.shape.ellipse.js","D:/Documents/Web/jsGraph/src/shapes/graph.shape.label.js","D:/Documents/Web/jsGraph/src/shapes/graph.shape.polyline.js","D:/Documents/Web/jsGraph/src/shapes/graph.shape.nmrintegral.js","D:/Documents/Web/jsGraph/src/shapes/graph.shape.rect.js","D:/Documents/Web/jsGraph/src/shapes/graph.shape.peakintegration2d.js","D:/Documents/Web/jsGraph/src/shapes/graph.shape.cross.js","D:/Documents/Web/jsGraph/src/shapes/graph.shape.peakboundariescenter.js","D:/Documents/Web/jsGraph/src/shapes/graph.shape.html.js","D:/Documents/Web/jsGraph/src/plugins/graph.plugin.js","D:/Documents/Web/jsGraph/src/plugins/graph.plugin.drag.js","D:/Documents/Web/jsGraph/src/plugins/graph.plugin.shape.js","D:/Documents/Web/jsGraph/src/plugins/graph.plugin.selectScatter.js","D:/Documents/Web/jsGraph/src/plugins/graph.plugin.zoom.js","D:/Documents/Web/jsGraph/src/graph.lru.js","D:/Documents/Web/jsGraph/src/plugins/graph.plugin.timeseriemanager.js","D:/Documents/Web/jsGraph/src/plugins/graph.plugin.serielinedifference.js","D:/Documents/Web/jsGraph/src/plugins/graph.plugin.axissplitting.js","D:/Documents/Web/jsGraph/src/plugins/graph.plugin.makeTracesDifferent.js","D:/Documents/Web/jsGraph/src/plugins/graph.plugin.peakpicking.js","D:/Documents/Web/jsGraph/src/graph.js"],"sourcesContent":["function _parsePx( px ) {\r\n  if ( px && px.indexOf && px.indexOf( 'px' ) > -1 ) {\r\n    return parseInt( px.replace( 'px', '' ) );\r\n  }\r\n  return false;\r\n}\r\n\r\nfunction isNumeric( n ) {\r\n  return !isNaN( parseFloat( n ) ) && isFinite( n );\r\n}\r\n\r\n/**\r\n * Utility class to compute positioning\r\n * @class\r\n */\r\nclass Position {\r\n  constructor( x, y, dx, dy ) {\r\n    if ( typeof x == 'object' ) {\r\n      this.x = x.x;\r\n      this.y = x.y;\r\n      this.dx = x.dx;\r\n      this.dy = x.dy;\r\n    } else {\r\n      this.x = x;\r\n      this.y = y;\r\n      this.dx = dx;\r\n      this.dy = dy;\r\n    }\r\n  }\r\n\r\n  duplicate() {\r\n    return new Position( this.x, this.y, this.dx, this.dy );\r\n  }\r\n\r\n  /**\r\n   *  Computes the position of the position\r\n   *  @param {Graph} graph - The graph for which the position has to be computed\r\n   *  @param {AxisX} xAxis - The x axis to consider (has to belong to the graph)\r\n   *  @param {AxisY} yAxis - The y axis to consider (has to belong to the graph)\r\n   *  @param {Serie} [serie] - For non-existing y value, use a serie to compute it automatically from the serie data\r\n   *  @return {Object} An object in the format ```{x: xPx, y: yPx}``` containing the position in pixels of the position\r\n   */\r\n  compute( graph, xAxis, yAxis, serie ) {\r\n    if ( !graph || !xAxis || !yAxis || !graph.hasXAxis || !graph.hasYAxis ) {\r\n      graph.throw();\r\n    }\r\n\r\n    if ( !graph.hasXAxis( xAxis ) ) {\r\n      throw 'Graph does not contain the x axis that was used as a parameter';\r\n    }\r\n\r\n    if ( !graph.hasYAxis( yAxis ) ) {\r\n      throw 'Graph does not contain the x axis that was used as a parameter';\r\n    }\r\n\r\n    return this._compute( graph, xAxis, yAxis, serie );\r\n  }\r\n\r\n  _compute( graph, xAxis, yAxis, serie ) {\r\n    var relativeTo = this._relativeTo;\r\n    if ( relativeTo ) {\r\n      var relativeToComputed = relativeTo._compute( graph, xAxis, yAxis, serie );\r\n    }\r\n\r\n    var parsed,\r\n      pos = {\r\n        x: false,\r\n        y: false\r\n      };\r\n\r\n    if ( !xAxis ) {\r\n      xAxis = graph.getXAxis();\r\n    }\r\n\r\n    if ( !yAxis ) {\r\n      yAxis = graph.getYAxis();\r\n    }\r\n\r\n    for ( var i in pos ) {\r\n      var axis = i == 'x' ? xAxis : yAxis;\r\n      var val = this[ i ];\r\n      var dval = this[ `d${i}` ];\r\n\r\n      if (\r\n        val === undefined &&\r\n        ( ( dval !== undefined && relativeTo === undefined ) ||\r\n          relativeTo === undefined )\r\n      ) {\r\n        if ( i == 'x' ) {\r\n          if ( dval === undefined ) {\r\n            continue;\r\n          }\r\n\r\n          pos[ i ] = relativeTo ? relativeTo[ i ] : 0;\r\n        } else if ( this.x !== undefined && serie ) {\r\n          if ( _parsePx( this.x ) !== false ) {\r\n            console.warn(\r\n              'You have defined x in px and not y. Makes no sense. Returning 0 for y'\r\n            );\r\n            pos[ i ] = 0;\r\n          } else {\r\n            try {\r\n              var closest = serie.getClosestPointToXY( this.x );\r\n\r\n              if ( !closest ) {\r\n                throw new Error(\r\n                  `Could not find y position for x = ${\r\n                    this.x\r\n                  } on serie \"${serie.getName()}\". Returning 0 for y.`\r\n                );\r\n              }\r\n\r\n              pos[ i ] = serie.getY( closest.yClosest );\r\n            } catch ( error ) {\r\n              console.error( error );\r\n              pos[ i ] = 0;\r\n            }\r\n          }\r\n        }\r\n      } else if ( val !== undefined ) {\r\n        pos[ i ] = this.getPx( val, axis );\r\n      }\r\n\r\n      if ( dval !== undefined ) {\r\n        var def =\r\n          val !== undefined ||\r\n          relativeToComputed == undefined ||\r\n          relativeToComputed[ i ] == undefined ?\r\n          pos[ i ] :\r\n          relativeToComputed[ i ];\r\n\r\n        if (\r\n          i == 'y' &&\r\n          relativeToComputed &&\r\n          relativeToComputed.x !== undefined &&\r\n          relativeToComputed.y == undefined\r\n        ) {\r\n          if ( !serie ) {\r\n            throw new Error( 'Error. No serie exists. Cannot find y value' );\r\n            return;\r\n          }\r\n\r\n          var closest = serie.getClosestPointToXY( relativeTo.x );\r\n          if ( closest ) {\r\n            def = serie.getY( closest.yMin );\r\n          }\r\n\r\n          //console.log( relativeTo.x, closest, serie.getY( closest.yMin ), def );\r\n        }\r\n\r\n        if ( !def ) {\r\n          def = 0;\r\n        }\r\n\r\n        if ( ( parsed = _parsePx( dval ) ) !== false ) {\r\n          // dx in px => val + 10px\r\n\r\n          pos[ i ] = def + parsed; // return integer (will be interpreted as px)\r\n        } else if ( ( parsed = this._parsePercent( dval ) ) !== false ) {\r\n          pos[ i ] = def + this._getPositionPx( parsed, true, axis, graph ); // returns xx%\r\n        } else if ( axis ) {\r\n          pos[ i ] = def + axis.getRelPx( dval ); // px + unittopx\r\n        }\r\n      }\r\n    }\r\n\r\n    return pos;\r\n  }\r\n\r\n  _getPositionPx( value, x, axis, graph ) {\r\n    var parsed;\r\n\r\n    if ( ( parsed = _parsePx( value ) ) !== false ) {\r\n      return parsed; // return integer (will be interpreted as px)\r\n    }\r\n\r\n    if ( ( parsed = this._parsePercent( value ) ) !== false ) {\r\n      return (\r\n        ( parsed / 100 ) *\r\n        ( x ? graph.getDrawingWidth() : graph.getDrawingHeight() )\r\n      );\r\n    } else if ( axis ) {\r\n      return axis.getPos( value );\r\n    }\r\n  }\r\n\r\n  _parsePercent( percent ) {\r\n    if ( percent && percent.indexOf && percent.indexOf( '%' ) > -1 ) {\r\n      return percent;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   *  Computes the value in pixels of an amplitude (or a distance) for a certain axis\r\n   *  @param {Number} value - The value in axis unit\r\n   *  @param {Axis} Axis - The x axis to consider (has to belong to the graph)\r\n   *  @return {String} The value in pixels, e.g. \"20px\"\r\n   */\r\n  getDeltaPx( value, axis ) {\r\n    var v;\r\n    if ( ( v = _parsePx( value ) ) !== false ) {\r\n      return `${v}px`;\r\n    } else {\r\n      return `${axis.getRelPx( value )}px`;\r\n    }\r\n  }\r\n\r\n  deltaPosition( mode, delta, axis ) {\r\n    mode = mode == 'y' ? 'y' : 'x';\r\n    var ref = this[ mode ],\r\n      refd = this[ `d${mode}` ],\r\n      refPx,\r\n      deltaPx;\r\n\r\n    if ( ref !== undefined ) {\r\n      if ( ( refPx = _parsePx( ref ) ) !== false ) {\r\n        if ( ( deltaPx = _parsePx( delta ) ) !== false ) {\r\n          this[ mode ] = `${refPx + deltaPx}px`;\r\n        } else {\r\n          this[ mode ] = `${refPx + axis.getRelPx( delta )}px`;\r\n        }\r\n      } else {\r\n        ref = this.getValPosition( ref, axis );\r\n\r\n        if ( ( deltaPx = _parsePx( delta ) ) !== false ) {\r\n          this[ mode ] = ref + axis.getRelVal( deltaPx );\r\n        } else {\r\n          this[ mode ] = ref + delta;\r\n        }\r\n      }\r\n    } else if ( refd !== undefined ) {\r\n      if ( mode == 'y' && ref === undefined && !this._relativeTo ) {\r\n        // This means that the shape is placed by the x value. Therefore, the dy is only a stand-off.\r\n        // Therefore, we do nothing\r\n        return;\r\n      }\r\n\r\n      if ( ( refPx = _parsePx( refd ) ) !== false ) {\r\n        if ( ( deltaPx = _parsePx( delta ) ) !== false ) {\r\n          this[ `d${mode}` ] = `${refPx + deltaPx}px`;\r\n        } else {\r\n          this[ `d${mode}` ] = `${refPx + axis.getRelPx( delta )}px`;\r\n        }\r\n      } else {\r\n        refd = this.getValPosition( refd, axis );\r\n\r\n        if ( ( deltaPx = _parsePx( delta ) ) !== false ) {\r\n          this[ `d${mode}` ] = refd + axis.getRelVal( deltaPx );\r\n        } else {\r\n          this[ `d${mode}` ] = refd + delta;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  getValPosition( rel, axis ) {\r\n    if ( rel == 'max' ) {\r\n      return axis.getMaxValue();\r\n    }\r\n\r\n    if ( rel == 'min' ) {\r\n      return axis.getMinValue();\r\n    }\r\n\r\n    if ( rel == 'max' ) {\r\n      return axis.getMaxValue();\r\n    }\r\n\r\n    if ( rel == 'min' ) {\r\n      return axis.getMinValue();\r\n    }\r\n\r\n    return rel;\r\n  }\r\n\r\n  /**\r\n   *  Computes a value in pixels\r\n   *  @param {Number} value - The value in axis unit\r\n   *  @param {Axis} axis - The x or y axis to consider (has to belong to the graph)\r\n   *  @param {Boolean} rel - Whether or not the value is a distance\r\n   *  @return {(Number|String)} The computed value\r\n   */\r\n  getPx( value, axis, rel ) {\r\n    var parsed;\r\n\r\n    if ( typeof value == 'function' ) {\r\n      return value( axis, rel );\r\n    } else if ( ( parsed = _parsePx( value ) ) !== false ) {\r\n      return parsed; // return integer (will be interpreted as px)\r\n    } else if ( ( parsed = this._parsePercent( value ) ) !== false ) {\r\n      return parsed; // returns xx%\r\n    } else if ( axis ) {\r\n      if ( value == 'min' ) {\r\n        return axis.getMinPx();\r\n      } else if ( value == 'max' ) {\r\n        return axis.getMaxPx();\r\n      } else if ( rel ) {\r\n        return axis.getRelPx( value );\r\n      } else if ( isNumeric( value ) ) {\r\n        return axis.getPos( value );\r\n      }\r\n    }\r\n  }\r\n\r\n  getPxRel( value, axis ) {\r\n    return this.getPx( value, axis, true );\r\n  }\r\n\r\n  /**\r\n   *  Assigns the current position as relative to another. This is used when a position is used with \"dx\" or \"dy\" and not \"x\" or \"y\"\r\n   *  @param {Position} pos - The reference position\r\n   *  @return {Position} The current position\r\n   */\r\n  relativeTo( pos ) {\r\n    this._relativeTo = Position.check( pos );\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   *  Checks if an object is a position. If not, creates a new Position instance with the ```pos``` object. If a new position is created, ```callback``` is fired with the position as a unique parameter. The return of the function, if not false, should be a ```Position``` instance which serves as the reference position.\r\n   *  @example Position.check( { x: 1, y: 2 }, function() { return someOtherPosition; } );\r\n   *  @param {(Object|Position)} pos - The position object or the object fed into the constructor\r\n   *  @param {Function} callback - The callback fired if a new position is created\r\n   *  @return {Position} The resulting position object\r\n   */\r\n  static check( pos, callback ) {\r\n    if ( pos instanceof Position ) {\r\n      return pos;\r\n    }\r\n\r\n    var posObject = new Position( pos );\r\n\r\n    if ( pos && pos.relativeTo ) {\r\n      const position = callback( pos.relativeTo );\r\n      if ( position ) {\r\n        posObject.relativeTo( position );\r\n      }\r\n    }\r\n\r\n    return posObject;\r\n  }\r\n}\r\n\r\nexport default Position;","/**\r\n * Easy set attribute method to apply to a SVG Element the attributes listed. Optional namespacing\r\n * @param {SVGElement} to - The SVG element to apply the attributes to\r\n * @param {Object<String,Any>} attr - A key/value hashmap of attributes\r\n * @param {String} [ ns = undefined ] - The namespace to use (with <code>setAttributeNS</code>). Default if without namespacing\r\n */\r\nexport function setAttributeTo( to, params, ns ) {\r\n  var i;\r\n\r\n  if ( ns ) {\r\n    for ( i in params ) {\r\n      to.setAttributeNS( ns, i, params[ i ] );\r\n    }\r\n  } else {\r\n    for ( i in params ) {\r\n      to.setAttribute( i, params[ i ] );\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Maps old-style events defined within the creation (i.e. <code>{ onMouseOver: function() }</code>) to modern event listening <code>.on(\"mouseover\")</code>\r\n * The function will read any object and select the ones starting with \"on\"\r\n * @params {Object} options - An option object to read the events from\r\n * @param {Object} source - The source object to which the options belong\r\n * @example util.mapEventEmission( this.options, this );\r\n */\r\nexport function mapEventEmission( options, source ) {\r\n\r\n  if ( !source ) {\r\n    source = this;\r\n  }\r\n\r\n  var eventName;\r\n\r\n  for ( var i in options ) {\r\n\r\n    // Starts with onXXX\r\n    if ( i.indexOf( 'on' ) == 0 && typeof options[ i ] == 'function' ) {\r\n      eventName = i.substring( 2 );\r\n      eventName = eventName.substring( 0, 1 ).toLowerCase() + eventName.substring( 1 );\r\n\r\n      if ( source.on ) {\r\n\r\n        ( function( j ) {\r\n\r\n          source.on( eventName, function() {\r\n            options[ j ].apply( source, arguments );\r\n          } );\r\n\r\n        } )( i );\r\n\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * @link http://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript\r\n * @return {String} a random id\r\n */\r\nexport function guid() {\r\n  //\r\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace( /[xy]/g, function( c ) {\r\n    var r = Math.random() * 16 | 0,\r\n      v = c == 'x' ? r : ( r & 0x3 | 0x8 );\r\n    return v.toString( 16 );\r\n  } );\r\n\r\n}\r\n\r\nexport function throwError( message ) {\r\n  console.error( message );\r\n}\r\n\r\nexport function warn( message ) {\r\n  console.warn( message );\r\n}\r\n\r\n/**\r\n * Checks if a variable is a numeric or not\r\n * @return {Boolean} <code>true</code> for a numeric value, false otherwise\r\n */\r\nexport function isNumeric( obj ) {\r\n  return !Array.isArray( obj ) && ( obj - parseFloat( obj ) + 1 ) >= 0;\r\n}\r\n\r\n/**\r\n * @see http://stackoverflow.com/questions/2353211/hsl-to-rgb-color-conversion\r\n * Converts an HSL color value to RGB. Conversion formula\r\n * adapted from http://en.wikipedia.org/wiki/HSL_color_space.\r\n * Assumes h, s, and l are contained in the set [0, 1] and\r\n * returns r, g, and b in the set [0, 255].\r\n *\r\n * @param   Number  h       The hue\r\n * @param   Number  s       The saturation\r\n * @param   Number  l       The lightness\r\n * @return  Array           The RGB representation\r\n */\r\nexport function hue2rgb( p, q, t ) {\r\n  if ( t < 0 ) t += 1;\r\n  if ( t > 1 ) t -= 1;\r\n  if ( t < 1 / 6 ) return p + ( q - p ) * 6 * t;\r\n  if ( t < 1 / 2 ) return q;\r\n  if ( t < 2 / 3 ) return p + ( q - p ) * ( 2 / 3 - t ) * 6;\r\n  return p;\r\n}\r\n\r\nexport function hslToRgb( h, s, l ) {\r\n  var r, g, b;\r\n\r\n  if ( s == 0 ) {\r\n    r = g = b = l; // achromatic\r\n  } else {\r\n\r\n    var q = l < 0.5 ? l * ( 1 + s ) : l + s - l * s;\r\n    var p = 2 * l - q;\r\n    r = hue2rgb( p, q, h + 1 / 3 );\r\n    g = hue2rgb( p, q, h );\r\n    b = hue2rgb( p, q, h - 1 / 3 );\r\n  }\r\n\r\n  return [ Math.round( r * 255 ), Math.round( g * 255 ), Math.round( b * 255 ) ];\r\n}\r\n\r\nexport function saveDomAttributes( to, attributes, identification ) {\r\n\r\n  if ( !to ) return;\r\n\r\n  to._savedAttributesIds = to._savedAttributesIds || [];\r\n\r\n  if ( to._savedAttributesIds.indexOf( identification ) > -1 ) {\r\n    restoreDomAttributes( to, identification );\r\n  }\r\n\r\n  to._savedAttributes = to._savedAttributes || {};\r\n  to._attributes = to._attributes || {};\r\n  to._attributes[ identification ] = attributes;\r\n\r\n  to._savedAttributesIds.push( identification );\r\n\r\n  for ( var i in attributes ) {\r\n\r\n    if ( !to._savedAttributes[ i ] ) {\r\n      to._savedAttributes[ i ] = to.getAttribute( i );\r\n    }\r\n\r\n    to.setAttribute( i, attributes[ i ] );\r\n  }\r\n\r\n}\r\n\r\nexport function hasSavedAttribute( dom, attr ) {\r\n  return dom._savedAttributes && dom._savedAttributes[ attr ] !== undefined;\r\n}\r\n\r\nexport function overwriteDomAttribute( dom, attribute, newValue ) {\r\n  if ( hasSavedAttribute( dom, attribute ) ) {\r\n    dom._savedAttributes[ attribute ] = newValue;\r\n  }\r\n}\r\n\r\nexport function restoreDomAttributes( to, identification ) {\r\n\r\n  if ( !to || !to._savedAttributesIds ) {\r\n    return;\r\n  }\r\n\r\n  to._savedAttributesIds.splice( to._savedAttributesIds.indexOf( identification ), 1 );\r\n  delete to._attributes[ identification ];\r\n\r\n  var attrs = {};\r\n\r\n  for ( var i in to._savedAttributes ) {\r\n    attrs[ i ] = to._savedAttributes[ i ];\r\n  }\r\n\r\n  for ( var i = 0, l = to._savedAttributesIds.length; i < l; i++ ) {\r\n\r\n    for ( var j in to._attributes[ to._savedAttributesIds[ i ] ] ) {\r\n      attrs[ j ] = to._attributes[ to._savedAttributesIds[ i ] ][ j ];\r\n    }\r\n  }\r\n\r\n  for ( var j in attrs ) {\r\n    to.setAttribute( j, attrs[ j ] );\r\n  }\r\n\r\n}\r\n\r\n// https://davidwalsh.name/function-debounce\r\nexport function debounce( func, wait, immediate ) {\r\n  var timeout;\r\n  return function() {\r\n    var context = this,\r\n      args = arguments;\r\n    var later = function() {\r\n      timeout = null;\r\n      if ( !immediate ) func.apply( context, args );\r\n    };\r\n    var callNow = immediate && !timeout;\r\n    clearTimeout( timeout );\r\n    timeout = setTimeout( later, wait );\r\n    if ( callNow ) func.apply( context, args );\r\n  };\r\n}\r\n\r\nexport function SVGParser( svgString ) {\r\n\r\n  var parser = new DOMParser();\r\n  var doc = parser.parseFromString( svgString, 'image/svg+xml' );\r\n  // returns a SVGDocument, which also is a Document.\r\n\r\n  return doc;\r\n\r\n}\r\n\r\n// http://stackoverflow.com/questions/5276953/what-is-the-most-efficient-way-to-reverse-an-array-in-javascript\r\nexport function reverseArray( array ) {\r\n  var left = null;\r\n  var right = null;\r\n  var length = array.length;\r\n  for ( left = 0, right = length - 1; left < right; left += 1, right -= 1 ) {\r\n    var temporary = array[ left ];\r\n    array[ left ] = array[ right ];\r\n    array[ right ] = temporary;\r\n  }\r\n  return array;\r\n}\r\n\r\n// jQuery.fn.offset\r\nexport function getOffset( el ) {\r\n  var rect = el.getBoundingClientRect();\r\n  return {\r\n    top: rect.top,\r\n    left: rect.left\r\n  };\r\n}\r\n\r\n// jQuery.fn.css\r\nexport function setCSS( element, values ) {\r\n  var style = element.style;\r\n  for ( var i in values ) {\r\n    style[ i ] = values[ i ];\r\n  }\r\n}\r\n\r\nexport function ajaxGet( options ) {\r\n  return new Promise( function( resolve, reject ) {\r\n    var request = new XMLHttpRequest();\r\n    request.open( options.type || 'GET', options.url, true );\r\n    if ( options.json ) request.setRequestHeader( 'Accept', 'application/json' );\r\n    request.onload = function() {\r\n      if ( request.status === 200 ) {\r\n        var response = request.responseText;\r\n        if ( options.json ) response = JSON.parse( response );\r\n        resolve( response );\r\n      } else {\r\n        reject( new Error( `Request error: ${ request.status}` ) );\r\n      }\r\n    };\r\n    request.onerror = function() {\r\n      reject( new Error( `Network error: ${ request.status}` ) );\r\n    };\r\n    request.send();\r\n  } );\r\n}\r\n\r\n// https://raw.githubusercontent.com/justmoon/node-extend/888f153645115d1c6aa9a7e346e8e9cd9a83de9b/index.js\r\n// Copyright (c) 2014 Stefan Thomas\r\nvar hasOwn = Object.prototype.hasOwnProperty;\r\nvar toStr = Object.prototype.toString;\r\n\r\nvar isArray = function isArray( arr ) {\r\n  if ( typeof Array.isArray === 'function' ) {\r\n    return Array.isArray( arr );\r\n  }\r\n\r\n  return toStr.call( arr ) === '[object Array]';\r\n};\r\n\r\nvar isPlainObject = function isPlainObject( obj ) {\r\n  if ( !obj || toStr.call( obj ) !== '[object Object]' ) {\r\n    return false;\r\n  }\r\n\r\n  var hasOwnConstructor = hasOwn.call( obj, 'constructor' );\r\n  var hasIsPrototypeOf = obj.constructor && obj.constructor.prototype && hasOwn.call( obj.constructor.prototype, 'isPrototypeOf' );\r\n  // Not own constructor property must be Object\r\n  if ( obj.constructor && !hasOwnConstructor && !hasIsPrototypeOf ) {\r\n    return false;\r\n  }\r\n\r\n  // Own properties are enumerated firstly, so to speed up,\r\n  // if last one is own, then all properties are own.\r\n  var key;\r\n  for ( key in obj ) {\r\n    /**/\r\n  }\r\n\r\n  return typeof key === 'undefined' || hasOwn.call( obj, key );\r\n};\r\n\r\nexport function extend() {\r\n  var options, name, src, copy, copyIsArray, clone;\r\n  var target = arguments[ 0 ];\r\n  var i = 1;\r\n  var length = arguments.length;\r\n  var deep = false;\r\n\r\n  // Handle a deep copy situation\r\n  if ( typeof target === 'boolean' ) {\r\n    deep = target;\r\n    target = arguments[ 1 ] || {};\r\n    // skip the boolean and the target\r\n    i = 2;\r\n  } else if ( ( typeof target !== 'object' && typeof target !== 'function' ) || target == null ) {\r\n    target = {};\r\n  }\r\n\r\n  for ( ; i < length; ++i ) {\r\n    options = arguments[ i ];\r\n    // Only deal with non-null/undefined values\r\n    if ( options != null ) {\r\n      // Extend the base object\r\n      for ( name in options ) {\r\n        src = target[ name ];\r\n        copy = options[ name ];\r\n\r\n        // Prevent never-ending loop\r\n        if ( target !== copy ) {\r\n          // Recurse if we're merging plain objects or arrays\r\n          if ( deep && copy && ( isPlainObject( copy ) || ( copyIsArray = isArray( copy ) ) ) ) {\r\n            if ( copyIsArray ) {\r\n              copyIsArray = false;\r\n              clone = src && isArray( src ) ? src : [];\r\n            } else {\r\n              clone = src && isPlainObject( src ) ? src : {};\r\n            }\r\n\r\n            // Never move original objects, clone them\r\n            target[ name ] = extend( deep, clone, copy );\r\n\r\n            // Don't bring in undefined values\r\n          } else if ( typeof copy !== 'undefined' ) {\r\n            target[ name ] = copy;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // Return the modified object\r\n  return target;\r\n}\r\n\r\nexport default {};\r\n\r\nexport {\r\n  isArray\r\n};\r\nexport {\r\n  isPlainObject\r\n};\r\n\r\nexport function mix( baseClass, mixin ) {\r\n\r\n  for ( let prop in mixin ) {\r\n\r\n    if ( mixin.hasOwnProperty( prop ) ) {\r\n      baseClass.prototype[ prop ] = mixin[ prop ];\r\n    }\r\n  }\r\n}\r\n\r\nexport function emptyDom( dom ) {\r\n  while ( dom.firstChild ) {\r\n    dom.removeChild( dom.firstChild );\r\n  }\r\n}","/*!\r\n * EventEmitter v4.2.9 - git.io/ee\r\n * Oliver Caldwell\r\n * MIT license\r\n * @preserve\r\n */\r\n\r\n'use strict';\r\n\r\n/**\r\n * Class for managing events.\r\n * Can be extended to provide event functionality in other classes.\r\n *\r\n * @class EventEmitter Manages event registering and emitting.\r\n */\r\nfunction EventEmitter() {}\r\n\r\n// Shortcuts to improve speed and size\r\nvar proto = EventEmitter.prototype;\r\n\r\n/**\r\n * Finds the index of the listener for the event in its storage array.\r\n *\r\n * @param {Function[]} listeners Array of listeners to search through.\r\n * @param {Function} listener Method to look for.\r\n * @return {Number} Index of the specified listener, -1 if not found\r\n * @api private\r\n */\r\nfunction indexOfListener( listeners, listener ) {\r\n  var i = listeners.length;\r\n  while ( i-- ) {\r\n    if ( listeners[ i ].listener === listener ) {\r\n      return i;\r\n    }\r\n  }\r\n\r\n  return -1;\r\n}\r\n\r\n/**\r\n * Alias a method while keeping the context correct, to allow for overwriting of target method.\r\n *\r\n * @param {String} name The name of the target method.\r\n * @return {Function} The aliased method\r\n * @api private\r\n */\r\nfunction alias( name ) {\r\n  return function aliasClosure() {\r\n    return this[ name ].apply( this, arguments );\r\n  };\r\n}\r\n\r\n/**\r\n * Returns the listener array for the specified event.\r\n * Will initialise the event object and listener arrays if required.\r\n * Will return an object if you use a regex search. The object contains keys for each matched event. So /ba[rz]/ might return an object containing bar and baz. But only if you have either defined them with defineEvent or added some listeners to them.\r\n * Each property in the object response is an array of listener functions.\r\n *\r\n * @param {String|RegExp} evt Name of the event to return the listeners from.\r\n * @return {Function[]|Object} All listener functions for the event.\r\n */\r\nproto.getListeners = function getListeners( evt ) {\r\n  var events = this._getEvents();\r\n  var response;\r\n  var key;\r\n\r\n  // Return a concatenated array of all matching events if\r\n  // the selector is a regular expression.\r\n  if ( evt instanceof RegExp ) {\r\n    response = {};\r\n    for ( key in events ) {\r\n      if ( events.hasOwnProperty( key ) && evt.test( key ) ) {\r\n        response[ key ] = events[ key ];\r\n      }\r\n    }\r\n  } else {\r\n    response = events[ evt ] || ( events[ evt ] = [] );\r\n  }\r\n\r\n  return response;\r\n};\r\n\r\n/**\r\n * Takes a list of listener objects and flattens it into a list of listener functions.\r\n *\r\n * @param {Object[]} listeners Raw listener objects.\r\n * @return {Function[]} Just the listener functions.\r\n */\r\nproto.flattenListeners = function flattenListeners( listeners ) {\r\n  var flatListeners = [];\r\n  var i;\r\n\r\n  for ( i = 0; i < listeners.length; i += 1 ) {\r\n    flatListeners.push( listeners[ i ].listener );\r\n  }\r\n\r\n  return flatListeners;\r\n};\r\n\r\n/**\r\n * Fetches the requested listeners via getListeners but will always return the results inside an object. This is mainly for internal use but others may find it useful.\r\n *\r\n * @param {String|RegExp} evt Name of the event to return the listeners from.\r\n * @return {Object} All listener functions for an event in an object.\r\n */\r\nproto.getListenersAsObject = function getListenersAsObject( evt ) {\r\n  var listeners = this.getListeners( evt );\r\n  var response;\r\n\r\n  if ( listeners instanceof Array ) {\r\n    response = {};\r\n    response[ evt ] = listeners;\r\n  }\r\n\r\n  return response || listeners;\r\n};\r\n\r\n/**\r\n * Adds a listener function to the specified event.\r\n * The listener will not be added if it is a duplicate.\r\n * If the listener returns true then it will be removed after it is called.\r\n * If you pass a regular expression as the event name then the listener will be added to all events that match it.\r\n *\r\n * @param {String|RegExp} evt Name of the event to attach the listener to.\r\n * @param {Function} listener Method to be called when the event is emitted. If the function returns true then it will be removed after calling.\r\n * @return {Object} Current instance of EventEmitter for chaining.\r\n */\r\nproto.addListener = function addListener( evt, listener ) {\r\n  var listeners = this.getListenersAsObject( evt );\r\n  var listenerIsWrapped = typeof listener === 'object';\r\n  var key;\r\n\r\n  for ( key in listeners ) {\r\n    if ( listeners.hasOwnProperty( key ) && indexOfListener( listeners[ key ], listener ) === -1 ) {\r\n      listeners[ key ].push( listenerIsWrapped ? listener : {\r\n        listener: listener,\r\n        once: false\r\n      } );\r\n    }\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Alias of addListener\r\n */\r\nproto.on = alias( 'addListener' );\r\n\r\n/**\r\n * Semi-alias of addListener. It will add a listener that will be\r\n * automatically removed after its first execution.\r\n *\r\n * @param {String|RegExp} evt Name of the event to attach the listener to.\r\n * @param {Function} listener Method to be called when the event is emitted. If the function returns true then it will be removed after calling.\r\n * @return {Object} Current instance of EventEmitter for chaining.\r\n */\r\nproto.addOnceListener = function addOnceListener( evt, listener ) {\r\n  return this.addListener( evt, {\r\n    listener: listener,\r\n    once: true\r\n  } );\r\n};\r\n\r\n/**\r\n * Alias of addOnceListener.\r\n */\r\nproto.once = alias( 'addOnceListener' );\r\n\r\n/**\r\n * Defines an event name. This is required if you want to use a regex to add a listener to multiple events at once. If you don't do this then how do you expect it to know what event to add to? Should it just add to every possible match for a regex? No. That is scary and bad.\r\n * You need to tell it what event names should be matched by a regex.\r\n *\r\n * @param {String} evt Name of the event to create.\r\n * @return {Object} Current instance of EventEmitter for chaining.\r\n */\r\nproto.defineEvent = function defineEvent( evt ) {\r\n  this.getListeners( evt );\r\n  return this;\r\n};\r\n\r\n/**\r\n * Uses defineEvent to define multiple events.\r\n *\r\n * @param {String[]} evts An array of event names to define.\r\n * @return {Object} Current instance of EventEmitter for chaining.\r\n */\r\nproto.defineEvents = function defineEvents( evts ) {\r\n  for ( var i = 0; i < evts.length; i += 1 ) {\r\n    this.defineEvent( evts[ i ] );\r\n  }\r\n  return this;\r\n};\r\n\r\n/**\r\n * Removes a listener function from the specified event.\r\n * When passed a regular expression as the event name, it will remove the listener from all events that match it.\r\n *\r\n * @param {String|RegExp} evt Name of the event to remove the listener from.\r\n * @param {Function} listener Method to remove from the event.\r\n * @return {Object} Current instance of EventEmitter for chaining.\r\n */\r\nproto.removeListener = function removeListener( evt, listener ) {\r\n  var listeners = this.getListenersAsObject( evt );\r\n  var index;\r\n  var key;\r\n\r\n  for ( key in listeners ) {\r\n    if ( listeners.hasOwnProperty( key ) ) {\r\n      index = indexOfListener( listeners[ key ], listener );\r\n\r\n      if ( index !== -1 ) {\r\n        listeners[ key ].splice( index, 1 );\r\n      }\r\n    }\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Alias of removeListener\r\n */\r\nproto.off = alias( 'removeListener' );\r\n\r\n/**\r\n * Adds listeners in bulk using the manipulateListeners method.\r\n * If you pass an object as the second argument you can add to multiple events at once. The object should contain key value pairs of events and listeners or listener arrays. You can also pass it an event name and an array of listeners to be added.\r\n * You can also pass it a regular expression to add the array of listeners to all events that match it.\r\n * Yeah, this function does quite a bit. That's probably a bad thing.\r\n *\r\n * @param {String|Object|RegExp} evt An event name if you will pass an array of listeners next. An object if you wish to add to multiple events at once.\r\n * @param {Function[]} [listeners] An optional array of listener functions to add.\r\n * @return {Object} Current instance of EventEmitter for chaining.\r\n */\r\nproto.addListeners = function addListeners( evt, listeners ) {\r\n  // Pass through to manipulateListeners\r\n  return this.manipulateListeners( false, evt, listeners );\r\n};\r\n\r\n/**\r\n * Removes listeners in bulk using the manipulateListeners method.\r\n * If you pass an object as the second argument you can remove from multiple events at once. The object should contain key value pairs of events and listeners or listener arrays.\r\n * You can also pass it an event name and an array of listeners to be removed.\r\n * You can also pass it a regular expression to remove the listeners from all events that match it.\r\n *\r\n * @param {String|Object|RegExp} evt An event name if you will pass an array of listeners next. An object if you wish to remove from multiple events at once.\r\n * @param {Function[]} [listeners] An optional array of listener functions to remove.\r\n * @return {Object} Current instance of EventEmitter for chaining.\r\n */\r\nproto.removeListeners = function removeListeners( evt, listeners ) {\r\n  // Pass through to manipulateListeners\r\n  return this.manipulateListeners( true, evt, listeners );\r\n};\r\n\r\n/**\r\n * Edits listeners in bulk. The addListeners and removeListeners methods both use this to do their job. You should really use those instead, this is a little lower level.\r\n * The first argument will determine if the listeners are removed (true) or added (false).\r\n * If you pass an object as the second argument you can add/remove from multiple events at once. The object should contain key value pairs of events and listeners or listener arrays.\r\n * You can also pass it an event name and an array of listeners to be added/removed.\r\n * You can also pass it a regular expression to manipulate the listeners of all events that match it.\r\n *\r\n * @param {Boolean} remove True if you want to remove listeners, false if you want to add.\r\n * @param {String|Object|RegExp} evt An event name if you will pass an array of listeners next. An object if you wish to add/remove from multiple events at once.\r\n * @param {Function[]} [listeners] An optional array of listener functions to add/remove.\r\n * @return {Object} Current instance of EventEmitter for chaining.\r\n */\r\nproto.manipulateListeners = function manipulateListeners( remove, evt, listeners ) {\r\n  var i;\r\n  var value;\r\n  var single = remove ? this.removeListener : this.addListener;\r\n  var multiple = remove ? this.removeListeners : this.addListeners;\r\n\r\n  // If evt is an object then pass each of its properties to this method\r\n  if ( typeof evt === 'object' && !( evt instanceof RegExp ) ) {\r\n    for ( i in evt ) {\r\n      if ( evt.hasOwnProperty( i ) && ( value = evt[ i ] ) ) {\r\n        // Pass the single listener straight through to the singular method\r\n        if ( typeof value === 'function' ) {\r\n          single.call( this, i, value );\r\n        } else {\r\n          // Otherwise pass back to the multiple function\r\n          multiple.call( this, i, value );\r\n        }\r\n      }\r\n    }\r\n  } else {\r\n    // So evt must be a string\r\n    // And listeners must be an array of listeners\r\n    // Loop over it and pass each one to the multiple method\r\n    i = listeners.length;\r\n    while ( i-- ) {\r\n      single.call( this, evt, listeners[ i ] );\r\n    }\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Removes all listeners from a specified event.\r\n * If you do not specify an event then all listeners will be removed.\r\n * That means every event will be emptied.\r\n * You can also pass a regex to remove all events that match it.\r\n *\r\n * @param {String|RegExp} [evt] Optional name of the event to remove all listeners for. Will remove from every event if not passed.\r\n * @return {Object} Current instance of EventEmitter for chaining.\r\n */\r\nproto.removeEvent = function removeEvent( evt ) {\r\n  var type = typeof evt;\r\n  var events = this._getEvents();\r\n  var key;\r\n\r\n  // Remove different things depending on the state of evt\r\n  if ( type === 'string' ) {\r\n    // Remove all listeners for the specified event\r\n    delete events[ evt ];\r\n  } else if ( evt instanceof RegExp ) {\r\n    // Remove all events matching the regex.\r\n    for ( key in events ) {\r\n      if ( events.hasOwnProperty( key ) && evt.test( key ) ) {\r\n        delete events[ key ];\r\n      }\r\n    }\r\n  } else {\r\n    // Remove all listeners in all events\r\n    delete this._events;\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Alias of removeEvent.\r\n *\r\n * Added to mirror the node API.\r\n */\r\nproto.removeAllListeners = alias( 'removeEvent' );\r\n\r\n/**\r\n * Emits an event of your choice.\r\n * When emitted, every listener attached to that event will be executed.\r\n * If you pass the optional argument array then those arguments will be passed to every listener upon execution.\r\n * Because it uses `apply`, your array of arguments will be passed as if you wrote them out separately.\r\n * So they will not arrive within the array on the other side, they will be separate.\r\n * You can also pass a regular expression to emit to all events that match it.\r\n *\r\n * @param {String|RegExp} evt Name of the event to emit and execute listeners for.\r\n * @param {Array} [args] Optional array of arguments to be passed to each listener.\r\n * @return {Object} Current instance of EventEmitter for chaining.\r\n */\r\nproto.emitEvent = function emitEvent( evt, args ) {\r\n  var listeners = this.getListenersAsObject( evt );\r\n  var listener;\r\n  var i;\r\n  var key;\r\n  var response;\r\n\r\n  for ( key in listeners ) {\r\n    if ( listeners.hasOwnProperty( key ) ) {\r\n      i = listeners[ key ].length;\r\n\r\n      while ( i-- ) {\r\n        // If the listener returns true then it shall be removed from the event\r\n        // The function is executed either with a basic call or an apply if there is an args array\r\n        listener = listeners[ key ][ i ];\r\n\r\n        if ( listener.once === true ) {\r\n          this.removeListener( evt, listener.listener );\r\n        }\r\n\r\n        response = listener.listener.apply( this, args || [] );\r\n\r\n        if ( response === this._getOnceReturnValue() ) {\r\n          this.removeListener( evt, listener.listener );\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Alias of emitEvent\r\n */\r\nproto.trigger = alias( 'emitEvent' );\r\n\r\n/**\r\n * Subtly different from emitEvent in that it will pass its arguments on to the listeners, as opposed to taking a single array of arguments to pass on.\r\n * As with emitEvent, you can pass a regex in place of the event name to emit to all events that match it.\r\n *\r\n * @param {String|RegExp} evt Name of the event to emit and execute listeners for.\r\n * @param {...*} Optional additional arguments to be passed to each listener.\r\n * @return {Object} Current instance of EventEmitter for chaining.\r\n */\r\nproto.emit = function emit( evt ) {\r\n  var args = Array.prototype.slice.call( arguments, 1 );\r\n  return this.emitEvent( evt, args );\r\n};\r\n\r\n/**\r\n * Sets the current value to check against when executing listeners. If a\r\n * listeners return value matches the one set here then it will be removed\r\n * after execution. This value defaults to true.\r\n *\r\n * @param {*} value The new value to check for when executing listeners.\r\n * @return {Object} Current instance of EventEmitter for chaining.\r\n */\r\nproto.setOnceReturnValue = function setOnceReturnValue( value ) {\r\n  this._onceReturnValue = value;\r\n  return this;\r\n};\r\n\r\n/**\r\n * Fetches the current value to check against when executing listeners. If\r\n * the listeners return value matches this one then it should be removed\r\n * automatically. It will return true by default.\r\n *\r\n * @return {*|Boolean} The current value to check for or the default, true.\r\n * @api private\r\n */\r\nproto._getOnceReturnValue = function _getOnceReturnValue() {\r\n  if ( this.hasOwnProperty( '_onceReturnValue' ) ) {\r\n    return this._onceReturnValue;\r\n  } else {\r\n    return true;\r\n  }\r\n};\r\n\r\n/**\r\n * Fetches the events object and creates one if required.\r\n *\r\n * @return {Object} The events storage object.\r\n * @api private\r\n */\r\nproto._getEvents = function _getEvents() {\r\n  return this._events || ( this._events = {} );\r\n};\r\n\r\nexport default EventEmitter;","const setMarkerStyle = ( serie, style ) => {\r\n  serie.showMarkers();\r\n  let _default = {};\r\n  let modifiers = [];\r\n\r\n  if ( style.default ) {\r\n    _default = style.default;\r\n    if ( style.modifiers ) {\r\n      modifiers = style.modifiers;\r\n    }\r\n  } else {\r\n    _default = style;\r\n    modifiers = [];\r\n  }\r\n\r\n  serie.setMarkerStyle( _default, modifiers );\r\n};\r\n\r\nconst setSerieStyle = ( Graph, serie, jsonSerie, type ) => {\r\n  let styles = jsonSerie.style;\r\n\r\n  if ( !Array.isArray( styles ) ) {\r\n    styles = [ {\r\n      name: 'unselected',\r\n      style: styles\r\n    } ];\r\n  }\r\n\r\n  styles.map( ( {\r\n    name,\r\n    style\r\n  }, index ) => {\r\n    if ( style.line && ( type == Graph.SERIE_LINE || type == Graph.SERIE_BAR ) ) {\r\n      if ( style.line.color ) {\r\n        serie.setLineColor( style.line.color, name );\r\n      }\r\n\r\n      if ( style.line.width ) {\r\n        serie.setLineWidth( style.line.width, name );\r\n      }\r\n\r\n      if ( style.line.dash ) {\r\n        serie.setLineStyle( style.line.dash, name );\r\n      }\r\n\r\n      if ( style.line.fill ) {\r\n        serie.setFillColor( style.line.fill, name );\r\n      }\r\n\r\n      if ( style.line.fillOpacity && serie.setFillOpacity ) {\r\n        serie.setFillOpacity( style.line.fillOpacity, name );\r\n      }\r\n    }\r\n    if ( style.errorBar ) {\r\n      serie.setErrorBarStyle( style.errorBar );\r\n    }\r\n\r\n    if ( style.errorBox ) {\r\n      serie.setErrorBoxStyle( style.errorBox );\r\n    }\r\n\r\n    if (\r\n      style.marker &&\r\n      ( type == Graph.SERIE_LINE || type == Graph.SERIE_SCATTER )\r\n    ) {\r\n      setMarkerStyle( serie, style.marker );\r\n    }\r\n  } );\r\n};\r\n\r\nexport default setSerieStyle;","const processAxes = ( Graph, graph, type, axisOptions, allAxes ) => {\r\n  if ( !Array.isArray( axisOptions ) ) {\r\n    axisOptions = [ axisOptions ];\r\n  }\r\n\r\n  axisOptions.forEach( ( options ) => {\r\n    let constructorName;\r\n\r\n    if ( type == 'x' ) {\r\n      type = 'bottom';\r\n    } else if ( type == 'y' ) {\r\n      type = 'left';\r\n    }\r\n\r\n    if ( type == 'bottom' || type == 'top' ) {\r\n      constructorName = 'graph.axis.x';\r\n\r\n      if ( options.type == 'category' ) {\r\n        constructorName += '.bar';\r\n      }\r\n    } else {\r\n      constructorName = 'graph.axis.y';\r\n    }\r\n\r\n    var axis = new( Graph.getConstructor( constructorName ) )( graph, type );\r\n    axis.init( graph, options );\r\n\r\n    if ( type == 'bottom' ) {\r\n      graph.setBottomAxis( axis, graph.getNumAxes( 'bottom' ) );\r\n    } else if ( type == 'top' ) {\r\n      graph.setTopAxis( axis, graph.getNumAxes( 'top' ) );\r\n    } else if ( type == 'left' ) {\r\n      graph.setLeftAxis( axis, graph.getNumAxes( 'left' ) );\r\n    } else if ( type == 'right' ) {\r\n      graph.setRightAxis( axis, graph.getNumAxes( 'right' ) );\r\n    }\r\n\r\n    if ( options.type == 'category' ) {\r\n      axis.categories = options.categories;\r\n    }\r\n\r\n    if ( options.name ) {\r\n      allAxes[ name ] = axis;\r\n    }\r\n  } );\r\n};\r\n\r\nconst makeAxes = ( Graph, graph, jsonAxes ) => {\r\n  const allAxes = [];\r\n\r\n  if ( jsonAxes.x ) {\r\n    processAxes( Graph, graph, 'x', jsonAxes.x, allAxes );\r\n  }\r\n\r\n  if ( jsonAxes.y ) {\r\n    processAxes( Graph, graph, 'y', jsonAxes.y, allAxes );\r\n  }\r\n\r\n  if ( jsonAxes.top ) {\r\n    processAxes( Graph, graph, 'top', jsonAxes.top, allAxes );\r\n  }\r\n\r\n  if ( jsonAxes.left ) {\r\n    processAxes( Graph, graph, 'left', jsonAxes.left, allAxes );\r\n  }\r\n\r\n  if ( jsonAxes.bottom ) {\r\n    processAxes( Graph, graph, 'bottom', jsonAxes.bottom, allAxes );\r\n  }\r\n\r\n  if ( jsonAxes.right ) {\r\n    processAxes( Graph, graph, 'right', jsonAxes.right, allAxes );\r\n  }\r\n};\r\n\r\nexport default makeAxes;","const makeAnnotation = ( graph, json, serie, axes ) => {\r\n  if ( json.type ) {\r\n    const shape = graph.newShape( json.type, {}, false, json.properties );\r\n\r\n    if ( json.serie ) {\r\n      shape.setSerie( json.serie );\r\n    }\r\n\r\n    if ( json.layer ) {\r\n      shape.setLayer( json.layer );\r\n    }\r\n\r\n    if ( json.xAxis ) {\r\n      shape.setXAxis( axes[ json.xAxis ] );\r\n    }\r\n\r\n    if ( json.yAxis ) {\r\n      shape.setYAxis( axes[ json.yAxis ] );\r\n    }\r\n\r\n    shape.draw();\r\n    shape.redraw();\r\n  }\r\n};\r\n\r\nexport default makeAnnotation;","import serieStyle from './style.js';\r\nimport makeAxes from './axes.js';\r\nimport makeAnnotation from './annotations.js';\r\n\r\nconst makeGraph = ( Graph, json, wrapper ) => {\r\n  const options = json.options || {};\r\n  const graph = new Graph( undefined, options );\r\n  let axes = [];\r\n  graph.setWrapper( wrapper );\r\n\r\n  graph.resize( json.width || 400, json.height || 300 );\r\n\r\n  if ( json.axes ) {\r\n    makeAxes( Graph, graph, json.axes );\r\n  }\r\n\r\n  if ( json.legend ) {\r\n    const opts = {};\r\n\r\n    if ( json.legend.seriesHideable ) {\r\n      opts.isSerieHideable = true;\r\n    }\r\n\r\n    if ( json.legend.seriesSelectable ) {\r\n      opts.isSerieSelectable = true;\r\n    }\r\n\r\n    const legend = graph.makeLegend( opts );\r\n\r\n    if ( json.legend.position ) {\r\n      switch ( json.legend.position ) {\r\n        case 'bottom':\r\n          legend.setAutoposition( 'bottom' );\r\n          break;\r\n\r\n        case 'top':\r\n          legend.setAutoposition( 'top' );\r\n          break;\r\n\r\n        case 'left':\r\n          legend.setAutoposition( 'left' );\r\n          break;\r\n\r\n        case 'right':\r\n          legend.setAutoposition( 'right' );\r\n          break;\r\n\r\n        default:\r\n          legend.setPosition( json.legend.position );\r\n          break;\r\n      }\r\n    }\r\n  }\r\n\r\n  if ( json.series ) {\r\n    if ( !Array.isArray( json.series ) ) {\r\n      json.series = [ json.series ];\r\n    }\r\n\r\n    json.series.forEach( ( jsonSerie, index ) => {\r\n      let type, data;\r\n\r\n      switch ( jsonSerie.type ) {\r\n        case 'scatter':\r\n          type = Graph.SERIE_SCATTER;\r\n          break;\r\n\r\n        case 'bar':\r\n          type = Graph.SERIE_BAR;\r\n          break;\r\n\r\n        case 'box':\r\n          type = Graph.SERIE_BOX;\r\n          break;\r\n\r\n        case 'line':\r\n        default:\r\n          type = Graph.SERIE_LINE;\r\n          break;\r\n      }\r\n\r\n      switch ( jsonSerie.type ) {\r\n        case 'bar':\r\n          data = Graph.newWaveformHash();\r\n          if ( jsonSerie.data.errors ) {\r\n            data.setData( jsonSerie.data.values );\r\n          } else {\r\n            data.setData( jsonSerie.data );\r\n          }\r\n\r\n          break;\r\n\r\n        default:\r\n        case 'line':\r\n        case 'scatter':\r\n          data = Graph.newWaveform();\r\n          data.setData( jsonSerie.data.y, jsonSerie.data.x );\r\n          break;\r\n      }\r\n\r\n      if ( jsonSerie.data.errors ) {\r\n        if ( jsonSerie.data.errors.xBar ) {\r\n          data.setErrorBarX( jsonSerie.data.errors.xBar );\r\n        }\r\n        if ( jsonSerie.data.errors.xBarAbove ) {\r\n          data.setErrorBarXAbove( jsonSerie.data.errors.xBarAbove );\r\n        }\r\n        if ( jsonSerie.data.errors.xBarBelow ) {\r\n          data.setErrorBarXBelow( jsonSerie.data.errors.xBarBelow );\r\n        }\r\n\r\n        if ( jsonSerie.data.errors.yBar ) {\r\n          data.setErrorBar( jsonSerie.data.errors.yBar );\r\n        }\r\n        if ( jsonSerie.data.errors.yBarAbove ) {\r\n          data.setErrorBarAbove( jsonSerie.data.errors.yBarAbove );\r\n        }\r\n        if ( jsonSerie.data.errors.yBarBelow ) {\r\n          data.setErrorBarBelow( jsonSerie.data.errors.yBarBelow );\r\n        }\r\n\r\n        if ( jsonSerie.data.errors.xBox ) {\r\n          data.setErrorBoxX( jsonSerie.data.errors.xBox );\r\n        }\r\n        if ( jsonSerie.data.errors.xBoxAbove ) {\r\n          data.setErrorBoxXAbove( jsonSerie.data.errors.xBoxAbove );\r\n        }\r\n        if ( jsonSerie.data.errors.xBoxBelow ) {\r\n          data.setErrorBoxXBelow( jsonSerie.data.errors.xBoxBelow );\r\n        }\r\n\r\n        if ( jsonSerie.data.errors.yBox ) {\r\n          data.setErrorBox( jsonSerie.data.errors.yBox );\r\n        }\r\n        if ( jsonSerie.data.errors.yBoxAbove ) {\r\n          data.setErrorBoxAbove( jsonSerie.data.errors.yBoxAbove );\r\n        }\r\n        if ( jsonSerie.data.errors.yBoxBelow ) {\r\n          data.setErrorBoxBelow( jsonSerie.data.errors.yBoxBelow );\r\n        }\r\n      }\r\n\r\n      const serie = graph.newSerie(\r\n        jsonSerie.name || `_serie_${index}`,\r\n        jsonSerie.options || {},\r\n        type\r\n      );\r\n      serie.autoAxis();\r\n\r\n      if ( jsonSerie.excludeFromLegend ) {\r\n        serie.excludeFromLegend( true );\r\n      }\r\n\r\n      if ( data.xAxis && axes[ data.xAxis ] ) {\r\n        serie.setXAxis( axes[ data.xAxis ] );\r\n      }\r\n\r\n      if ( data.yAxis && axes[ data.yAxis ] ) {\r\n        serie.setYAxis( axes[ data.yAxis ] );\r\n      }\r\n\r\n      if ( data ) {\r\n        serie.setWaveform( data );\r\n      }\r\n\r\n      if ( jsonSerie.style ) {\r\n        serieStyle( Graph, serie, jsonSerie, type );\r\n      }\r\n\r\n      if ( jsonSerie.annotations ) {\r\n        jsonSerie.annotations.forEach( ( annotation ) => {\r\n          makeAnnotation( graph, annotation, undefined, axes );\r\n        } );\r\n      }\r\n    } );\r\n  }\r\n  console.time( 'a' );\r\n  if ( json.annotations ) {\r\n    json.annotations.forEach( ( annotation ) => {\r\n      makeAnnotation( graph, annotation, undefined, axes );\r\n    } );\r\n  }\r\n  console.timeEnd( 'a' );\r\n  return graph;\r\n};\r\n\r\nexport default makeGraph;","var dataAggregator;\r\n\r\nif (\r\n  typeof URL === 'undefined' ||\r\n  typeof URL.createObjectURL === 'undefined' ||\r\n  typeof Blob === 'undefined' ||\r\n  typeof Worker === 'undefined'\r\n) {\r\n  dataAggregator = () => {};\r\n} else {\r\n  var aggregatorWorker;\r\n  var queue = {};\r\n\r\n  let string = function() {\r\n    onmessage = function( e ) {\r\n      const data = e.data.data, // The initial data\r\n        maxX = e.data.maxX,\r\n        minX = e.data.minX,\r\n        maxY = e.data.maxY,\r\n        minY = e.data.minY,\r\n        direction = e.data.direction;\r\n\r\n      let numPoints = e.data.numPoints; // Total number of points in the slot\r\n      let l = data.length; // Number of data in the original buffer\r\n      let i = 0;\r\n      let k = -4;\r\n      let slots = [];\r\n      let dataAggregatedX = [];\r\n      let dataAggregatedY = [];\r\n      let aggregationSum = [];\r\n      let getX;\r\n      let slotNumber;\r\n      let lastAggregationX;\r\n      let lastAggregation;\r\n      let lastAggregationSum;\r\n      let newAggregation;\r\n      let newAggregationX;\r\n\r\n      if ( e.data.xdata ) {\r\n        getX = function getX( index ) {\r\n          return e.data.xdata[ index ];\r\n        };\r\n      } else {\r\n        getX = function getX( index ) {\r\n          return index * e.data.xScale + e.data.xOffset;\r\n        };\r\n      }\r\n\r\n      let aggregations = {};\r\n\r\n      // Direction x\r\n      if ( direction == 'x' ) {\r\n        const dataPerSlot = numPoints / ( maxX - minX ); // Computed number of aggregation per slot\r\n\r\n        for ( ; i < l; i++ ) {\r\n          // dataPerSlot: 1 / 1000 ( compression by 1'000 )\r\n          //console.log( dataPerSlot, getX( i ) );\r\n          slotNumber = Math.floor( ( getX( i ) - minX ) * dataPerSlot );\r\n\r\n          if ( slots[ k ] !== slotNumber ) {\r\n            k += 4;\r\n            slots[ k ] = slotNumber;\r\n\r\n            let slotX = ( slotNumber + 0.5 ) / dataPerSlot + minX;\r\n\r\n            dataAggregatedX[ k ] = slotX;\r\n            dataAggregatedX[ k + 1 ] = slotX;\r\n            dataAggregatedX[ k + 2 ] = slotX;\r\n            dataAggregatedX[ k + 3 ] = slotX;\r\n\r\n            dataAggregatedY[ k ] = data[ i ];\r\n            dataAggregatedY[ k + 1 ] = data[ i ];\r\n            dataAggregatedY[ k + 2 ] = data[ i ];\r\n            dataAggregatedY[ k + 3 ] = data[ i ];\r\n            aggregationSum[ k ] = 0;\r\n          }\r\n\r\n          dataAggregatedY[ k + 1 ] = Math.min( data[ i ], dataAggregatedY[ k + 1 ] );\r\n          dataAggregatedY[ k + 2 ] = Math.max( data[ i ], dataAggregatedY[ k + 2 ] );\r\n          dataAggregatedY[ k + 3 ] = data[ i ];\r\n          aggregationSum[ k ] += data[ i ];\r\n        }\r\n      } else {\r\n        // y\r\n\r\n        const dataPerSlot = numPoints / ( maxY - minY ); // Computed number of aggregation per slot\r\n\r\n        for ( ; i < l; i++ ) {\r\n          // dataPerSlot: 1 / 1000 ( compression by 1'000 )\r\n          //console.log( dataPerSlot, getX( i ) );\r\n          slotNumber = Math.floor( ( data[ i ] - minY ) * dataPerSlot );\r\n\r\n          if ( slots[ k ] !== slotNumber ) {\r\n            k += 4;\r\n            slots[ k ] = slotNumber;\r\n\r\n            let slotY = ( slotNumber + 0.5 ) / dataPerSlot + minY;\r\n\r\n            dataAggregatedY[ k ] = slotY;\r\n            dataAggregatedY[ k + 1 ] = slotY;\r\n            dataAggregatedY[ k + 2 ] = slotY;\r\n            dataAggregatedY[ k + 3 ] = slotY;\r\n\r\n            dataAggregatedX[ k ] = data[ i ];\r\n            dataAggregatedX[ k + 1 ] = data[ i ];\r\n            dataAggregatedX[ k + 2 ] = data[ i ];\r\n            dataAggregatedX[ k + 3 ] = data[ i ];\r\n            aggregationSum[ k ] = 0;\r\n          }\r\n          dataAggregatedX[ k + 1 ] = Math.min( getX( i ), dataAggregatedX[ k + 1 ] );\r\n          dataAggregatedX[ k + 2 ] = Math.max( getX( i ), dataAggregatedX[ k + 2 ] );\r\n          dataAggregatedX[ k + 3 ] = getX( i );\r\n          aggregationSum[ k ] += getX( i );\r\n        }\r\n      }\r\n\r\n      aggregations[ numPoints ] = {\r\n        x: dataAggregatedX,\r\n        y: dataAggregatedY,\r\n        sums: aggregationSum\r\n      };\r\n\r\n      lastAggregation = dataAggregatedY;\r\n      lastAggregationX = dataAggregatedX;\r\n      lastAggregationSum = aggregationSum;\r\n\r\n      while ( numPoints > 256 ) {\r\n        numPoints /= 2;\r\n\r\n        newAggregation = [];\r\n        newAggregationX = [];\r\n\r\n        k = 0;\r\n\r\n        if ( direction == 'x' ) {\r\n          for ( i = 0, l = lastAggregation.length - 8; i < l; i += 8 ) {\r\n            newAggregationX[ k ] =\r\n              ( lastAggregationX[ i ] + lastAggregationX[ i + 4 ] ) / 2;\r\n            newAggregationX[ k + 1 ] = newAggregationX[ k ];\r\n            newAggregationX[ k + 2 ] = newAggregationX[ k ];\r\n            newAggregationX[ k + 3 ] = newAggregationX[ k ];\r\n\r\n            newAggregation[ k ] = lastAggregation[ i ];\r\n            newAggregation[ k + 1 ] = Math.min(\r\n              lastAggregation[ i + 1 ],\r\n              lastAggregation[ i + 5 ]\r\n            );\r\n            newAggregation[ k + 2 ] = Math.max(\r\n              lastAggregation[ i + 2 ],\r\n              lastAggregation[ i + 6 ]\r\n            );\r\n            newAggregation[ k + 3 ] = lastAggregation[ i + 7 ];\r\n\r\n            aggregationSum[ k ] =\r\n              ( lastAggregationSum[ i ] + lastAggregationSum[ i + 4 ] ) / 2;\r\n\r\n            k += 4;\r\n          }\r\n        } else {\r\n          for ( i = 0, l = lastAggregation.length - 8; i < l; i += 8 ) {\r\n            newAggregation[ k ] =\r\n              ( lastAggregation[ i ] + lastAggregation[ i + 4 ] ) / 2;\r\n            newAggregation[ k + 1 ] = newAggregation[ k ];\r\n            newAggregation[ k + 2 ] = newAggregation[ k ];\r\n            newAggregation[ k + 3 ] = newAggregation[ k ];\r\n\r\n            newAggregationX[ k ] = lastAggregationX[ i ];\r\n            newAggregationX[ k + 1 ] = Math.min(\r\n              lastAggregationX[ i + 1 ],\r\n              lastAggregationX[ i + 5 ]\r\n            );\r\n            newAggregationX[ k + 2 ] = Math.max(\r\n              lastAggregationX[ i + 2 ],\r\n              lastAggregationX[ i + 6 ]\r\n            );\r\n            newAggregationX[ k + 3 ] = lastAggregationX[ i + 7 ];\r\n\r\n            aggregationSum[ k ] =\r\n              ( lastAggregationSum[ i ] + lastAggregationSum[ i + 4 ] ) / 2;\r\n\r\n            k += 4;\r\n          }\r\n        }\r\n\r\n        aggregations[ numPoints ] = {\r\n          x: newAggregationX,\r\n          y: newAggregation,\r\n          sums: aggregationSum\r\n        };\r\n\r\n        lastAggregation = newAggregation;\r\n        lastAggregationX = newAggregationX;\r\n        lastAggregationSum = aggregationSum;\r\n\r\n        aggregationSum = [];\r\n      }\r\n\r\n      postMessage( {\r\n        aggregates: aggregations,\r\n        _queueId: e.data._queueId\r\n      } );\r\n    };\r\n  }.toString();\r\n\r\n  string = string.replace( /^\\s*function\\s*\\(\\s*\\)\\s*\\{/, '' );\r\n  string = string.replace( /}\\s*$/, '' );\r\n  /*\r\n  if ( typeof URL == \"undefined\" ) {\r\n    module.exports = function() {};\r\n\r\n  } else {\r\n  */\r\n\r\n  var workerUrl = URL.createObjectURL(\r\n    new Blob( [ string ], {\r\n      type: 'application/javascript'\r\n    } )\r\n  );\r\n\r\n  aggregatorWorker = new Worker( workerUrl );\r\n\r\n  aggregatorWorker.onmessage = function( e ) {\r\n    var id = e.data._queueId;\r\n    delete e.data._queueId;\r\n    queue[ id ]( e.data );\r\n    delete queue[ id ];\r\n  };\r\n\r\n  dataAggregator = function( toOptimize ) {\r\n    var requestId = Date.now();\r\n    toOptimize._queueId = requestId;\r\n\r\n    var prom = new Promise( ( resolver ) => {\r\n      queue[ requestId ] = resolver;\r\n    } );\r\n\r\n    aggregatorWorker.postMessage( toOptimize );\r\n    return prom;\r\n  };\r\n}\r\n\r\nexport default dataAggregator;","class FitHost {\r\n  constructor( options ) {\r\n    this.DELTAP = 1e-6;\r\n    this.BIGVAL = 9e99;\r\n    this.WEIGHT = 1.0;\r\n\r\n    this.setYData( options.dataY );\r\n    this.setXData( options.dataX );\r\n    this.setWeight( options.weight );\r\n    this.setInitialParams( options.params );\r\n\r\n    if ( options.subsetIndex ) {\r\n      this.setSubset( ...options.subsetIndex );\r\n    }\r\n\r\n    this.setFunction( options.function );\r\n\r\n    if ( options.progress ) {\r\n      this.hookIteration( options.progress );\r\n    }\r\n\r\n    this.options = options;\r\n  }\r\n\r\n  //[ [ x1, y1 ], [ x2, y2 ] ]\r\n  setYData( data ) {\r\n    // Waveform instance\r\n    this.data = data;\r\n  }\r\n\r\n  setXData( data ) {\r\n    // Waveform instance\r\n    this.dataX = data;\r\n  }\r\n\r\n  setWeight( weight ) {\r\n    // Waveform instance\r\n    this.weight = weight;\r\n  }\r\n\r\n  setInitialParams( params ) {\r\n    this.parms = params;\r\n\r\n    this.parms = this.parms.map( ( el ) => {\r\n      if ( typeof el == 'function' ) {\r\n        return el( this.data, this.dataX );\r\n      } else {\r\n        return el;\r\n      }\r\n    } );\r\n    this.NPARMS = params.length;\r\n  }\r\n\r\n  setSubset( fromIndex, toIndex ) {\r\n    if ( fromIndex !== undefined && toIndex !== undefined ) {\r\n      this._from = fromIndex;\r\n      this._to = toIndex;\r\n    }\r\n  }\r\n\r\n  hookIteration( f ) {\r\n    this._hookIteration = ( params ) => {\r\n      let data = this.buildFit( params, 200 );\r\n      f( data );\r\n    };\r\n  }\r\n\r\n  setFunction( func ) {\r\n    this._func = func;\r\n  }\r\n\r\n  init() {\r\n    // Get data length\r\n    if ( this._from !== undefined && this._to !== undefined ) {\r\n      if ( this._from >= this._to ) {\r\n        throw 'Impossible to fit negative subranges. The starting index must be lower than the ending index';\r\n      }\r\n\r\n      this.NPTS = this._to - this._from + 1;\r\n\r\n      if ( this.data && this.data.getLength() <= this._to ) {\r\n        throw `Wave Y has not enough point to be fitted to subrange [${\r\n          this._from\r\n        }, ${this._to}]`;\r\n      }\r\n\r\n      if ( this._from < 0 ) {\r\n        throw 'Impossible to fit a subrange with negative indices';\r\n      }\r\n    } else {\r\n      this.NPTS = this.data.getLength();\r\n      this._from = 0;\r\n      this._to = this.data.getLength() - 1;\r\n    }\r\n\r\n    if ( this.dataX && this.dataX.getLength() <= this._to ) {\r\n      throw `Wave X has not enough point to be fitted to subrange [${\r\n        this._from\r\n      }, ${this._to}]`;\r\n    }\r\n\r\n    this.arrY = this.data.getDataY();\r\n\r\n    if ( this.dataX ) {\r\n      this.arrX = this.dataX.getDataY();\r\n    } else {\r\n      this.arrX = this.data.getDataX();\r\n    }\r\n\r\n    this.resid = new Array( this.NPTS ).fill( 0 );\r\n    this.jac = new Array( this.NPTS ).fill( 0 );\r\n    this.jac = this.jac.map( ( el ) => new Array( this.NPARMS ) );\r\n  }\r\n\r\n  fit() {\r\n    this.log(\r\n      `Starting the fit with initial parameter list {${this.parms.join()}};`\r\n    );\r\n    new LM( this, this.NPARMS, this.NPTS, this._hookIteration );\r\n    this.log( `Fit successful. Output parameters {${this.parms.join()}};` );\r\n\r\n    this._result = this.buildFit( this.parms, 200 );\r\n\r\n    if ( this.options.done ) {\r\n      this.options.done( this.parms, this._result );\r\n    }\r\n\r\n    return this._result;\r\n  }\r\n\r\n  func( x, param ) {\r\n    return this._func( x, param );\r\n  }\r\n\r\n  computeResiduals() {\r\n    var sumsq = 0;\r\n    for ( var i = 0; i < this.NPTS; i++ ) {\r\n      this.resid[ i ] =\r\n        ( this.func( this.arrX[ i + this._from ], this.parms ) -\r\n          this.arrY[ i + this._from ] ) *\r\n        this.WEIGHT;\r\n      sumsq += this.resid[ i ] * this.resid[ i ];\r\n    }\r\n\r\n    return sumsq;\r\n  }\r\n\r\n  log( message ) {\r\n    if ( this.options.log ) {\r\n      console.log( message );\r\n    }\r\n  }\r\n\r\n  //------the four mandated interface methods------------\r\n  nudge( dp ) {\r\n    for ( var j = 0; j < this.NPARMS; j++ ) {\r\n      this.parms[ j ] += dp[ j ];\r\n    }\r\n    return this.computeResiduals();\r\n  }\r\n\r\n  buildJacobian() {\r\n    // Allows LM to compute a new Jacobian.\r\n    // Uses current parms[] and two-sided finite difference.\r\n    // If current parms[] is bad, returns false.\r\n    var delta = new Array( this.NPARMS );\r\n    var FACTOR = 0.5 / this.DELTAP;\r\n    var d = 0;\r\n\r\n    for ( var j = 0; j < this.NPARMS; j++ ) {\r\n      for ( var k = 0; k < this.NPARMS; k++ )\r\n        delta[ k ] = k == j ? this.DELTAP : 0.0;\r\n\r\n      d = this.nudge( delta ); // resid at pplus\r\n      if ( d == this.BIGVAL ) {\r\n        throw 'Bad dBuildJacobian() exit 2';\r\n      }\r\n\r\n      for ( var i = 0; i < this.NPTS; i++ ) {\r\n        this.jac[ i ][ j ] = this.getResidualElement( i );\r\n      }\r\n\r\n      for ( var k = 0; k < this.NPARMS; k++ ) {\r\n        delta[ k ] = k == j ? -2 * this.DELTAP : 0.0;\r\n      }\r\n\r\n      d = this.nudge( delta ); // resid at pminus\r\n      if ( d == this.BIGVAL ) {\r\n        throw 'Bad dBuildJacobian(). exit 3';\r\n      }\r\n\r\n      for ( var i = 0; i < this.NPTS; i++ )\r\n        this.jac[ i ][ j ] -= this.getResidualElement( i ); // fetches resid[]\r\n\r\n      for ( var i = 0; i < this.NPTS; i++ ) this.jac[ i ][ j ] *= FACTOR;\r\n\r\n      for ( var k = 0; k < this.NPARMS; k++ )\r\n        delta[ k ] = k == j ? this.DELTAP : 0.0;\r\n\r\n      d = this.nudge( delta );\r\n      if ( d == this.BIGVAL ) {\r\n        throw 'Bad dBuildJacobian(). exit 4';\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  getResidualElement( i ) {\r\n    // Allows LM to see one element of the resid[] vector.\r\n    return this.resid[ i ];\r\n  }\r\n\r\n  getJacobianElement( i, j ) {\r\n    // Allows LM to see one element of the Jacobian matrix.\r\n    return this.jac[ i ][ j ];\r\n  }\r\n\r\n  buildFit( parms, length ) {\r\n    let x;\r\n\r\n    if ( !length ) {\r\n      x = this.arrX;\r\n    } else {\r\n      const xmin = this.dataX.getMin( this._from, this._to );\r\n      const xmax = this.dataX.getMax( this._from, this._to );\r\n\r\n      x = new Array( length )\r\n        .fill( 0 )\r\n        .map( ( el, index ) => ( index * ( xmax - xmin ) ) / ( length - 1 ) + xmin );\r\n    }\r\n\r\n    var fit = new Array( x.length );\r\n    for ( var i = 0, l = x.length; i < l; i++ ) {\r\n      fit[ i ] = this.func( x[ i ], this.parms );\r\n    }\r\n\r\n    let waveformResult = this.options.waveform;\r\n    waveformResult.setData( fit, x );\r\n    //waveformResult.setXWaveform( x );\r\n\r\n    return waveformResult;\r\n  }\r\n}\r\n\r\nclass LM {\r\n  constructor( gH, gnadj, gnpnts, hook ) {\r\n    this.LMITER = 100; // max number of L-M iterations\r\n    this.LMBOOST = 2.0; // damping increase per failed step\r\n    this.LMSHRINK = 0.1; // damping decrease per successful step\r\n    this.LAMBDAZERO = 0.001; // initial damping\r\n    this.LAMBDAMAX = 1e9; // max damping\r\n    this.LMTOL = 1e-12; // exit tolerance\r\n    this.BIGVAL = 9e99; // trouble flag\r\n\r\n    this.sos;\r\n    this.sosprev;\r\n    this.lambda;\r\n\r\n    this.myH = null; // overwritten by constructor\r\n    this.nadj = 0; // overwritten by constructor\r\n    this.npts = 0; // overwritten by constructor\r\n\r\n    this.delta; // local parm change\r\n    this.beta;\r\n    this.alpha;\r\n    this.amatrix;\r\n\r\n    // Constructor sets up fields and drives iterations.\r\n    this.myH = gH;\r\n    this.nadj = gnadj;\r\n    this.npts = gnpnts;\r\n\r\n    this.delta = new Array( this.nadj ).fill( 0 );\r\n    this.beta = new Array( this.nadj ).fill( 0 );\r\n\r\n    this.alpha = new Array( this.nadj ).fill( 0 );\r\n    this.amatrix = new Array( this.nadj ).fill( 0 );\r\n\r\n    this.alpha = this.alpha.map( () => new Array( this.nadj ) );\r\n    this.amatrix = this.amatrix.map( () => new Array( this.nadj ) );\r\n\r\n    this.lambda = this.LAMBDAZERO;\r\n\r\n    var niter = 0;\r\n    var done = false;\r\n    do {\r\n      done = this.bLMiter();\r\n\r\n      if ( hook ) {\r\n        hook( this.myH.params );\r\n      }\r\n\r\n      niter++;\r\n    } while ( !done && niter < this.LMITER );\r\n  }\r\n\r\n  bLMiter() {\r\n    // Each call performs one LM iteration.\r\n    // Returns true if done with iterations; false=wants more.\r\n    // Global nadj, npts; needs nadj, myH to be preset.\r\n    // Ref: M.Lampton, Computers in Physics v.11 pp.110-115 1997.\r\n    for ( var k = 0; k < this.nadj; k++ ) this.delta[ k ] = 0.0;\r\n    this.sos = this.myH.nudge( this.delta );\r\n    if ( this.sos == this.BIGVAL ) {\r\n      console.error( '  bLMiter finds faulty initial nudge()' );\r\n      return false;\r\n    }\r\n    this.sosprev = this.sos;\r\n\r\n    this.myH.log( `  bLMiter..SumOfSquares= ${this.sos}` );\r\n    if ( !this.myH.buildJacobian() ) {\r\n      console.error( '  bLMiter finds buildJacobian()=false' );\r\n      return false;\r\n    }\r\n\r\n    for (\r\n      var k = 0; k < this.nadj; k++ // get downhill gradient beta\r\n    ) {\r\n      this.beta[ k ] = 0.0;\r\n      for ( var i = 0; i < this.npts; i++ ) {\r\n        this.beta[ k ] -=\r\n          this.myH.getResidualElement( i ) * this.myH.getJacobianElement( i, k );\r\n      }\r\n    }\r\n\r\n    for (\r\n      var k = 0; k < this.nadj; k++ // get curvature matrix alpha\r\n    )\r\n      for ( var j = 0; j < this.nadj; j++ ) {\r\n        this.alpha[ j ][ k ] = 0.0;\r\n        for ( var i = 0; i < this.npts; i++ ) {\r\n          this.alpha[ j ][ k ] +=\r\n            this.myH.getJacobianElement( i, j ) *\r\n            this.myH.getJacobianElement( i, k );\r\n        }\r\n      }\r\n    var rrise = 0;\r\n    do // inner damping loop searches for one downhill step\r\n    {\r\n      for ( var k = 0; k < this.nadj; k++ ) {\r\n        // copy and damp it\r\n        for ( var j = 0; j < this.nadj; j++ ) {\r\n          this.amatrix[ j ][ k ] = this.alpha[ j ][ k ] + ( j == k ? this.lambda : 0.0 );\r\n        }\r\n      }\r\n\r\n      this.gaussj( this.amatrix, this.nadj ); // invert\r\n\r\n      for (\r\n        var k = 0; k < this.nadj; k++ // compute delta[]\r\n      ) {\r\n        this.delta[ k ] = 0.0;\r\n        for ( var j = 0; j < this.nadj; j++ )\r\n          this.delta[ k ] += this.amatrix[ j ][ k ] * this.beta[ j ];\r\n      }\r\n      this.sos = this.myH.nudge( this.delta ); // try it out.\r\n      if ( this.sos == this.BIGVAL ) {\r\n        console.error( '  LMinner failed SOS step' );\r\n        return false;\r\n      }\r\n      rrise = ( this.sos - this.sosprev ) / ( 1 + this.sos );\r\n      if ( rrise <= 0.0 ) {\r\n        // good step!\r\n        this.lambda *= this.LMSHRINK; // shrink lambda\r\n        break; // leave lmInner.\r\n      }\r\n      for ( var q = 0; q < this.nadj; q++ ) {\r\n        // reverse course!\r\n        this.delta[ q ] *= -1.0;\r\n      }\r\n      this.myH.nudge( this.delta ); // sosprev should still be OK\r\n      if ( rrise < this.LMTOL ) {\r\n        // finished but keep prev parms\r\n        break; // leave inner loop\r\n      }\r\n      this.lambda *= this.LMBOOST; // else try more damping.\r\n    } while ( this.lambda < this.LAMBDAMAX );\r\n    return rrise > -this.LMTOL || this.lambda > this.LAMBDAMAX;\r\n  }\r\n\r\n  gaussj( a, N ) {\r\n    // Inverts the double array a[N][N] by Gauss-Jordan method\r\n    // M.Lampton UCB SSL (c)2003, 2005\r\n\r\n    var det = 1.0,\r\n      big,\r\n      save;\r\n    var i, j, k, L;\r\n    var ik = new Array( 100 );\r\n    var jk = new Array( 100 );\r\n\r\n    for ( k = 0; k < N; k++ ) {\r\n      big = 0.0;\r\n      for ( i = k; i < N; i++ )\r\n        for (\r\n          j = k; j < N; j++ // find biggest element\r\n        )\r\n          if ( Math.abs( big ) <= Math.abs( a[ i ][ j ] ) ) {\r\n            big = a[ i ][ j ];\r\n            ik[ k ] = i;\r\n            jk[ k ] = j;\r\n          }\r\n      if ( big == 0.0 ) return 0.0;\r\n      i = ik[ k ];\r\n      if ( i > k )\r\n        for (\r\n          j = 0; j < N; j++ // exchange rows\r\n        ) {\r\n          save = a[ k ][ j ];\r\n          a[ k ][ j ] = a[ i ][ j ];\r\n          a[ i ][ j ] = -save;\r\n        }\r\n      j = jk[ k ];\r\n      if ( j > k )\r\n        for ( i = 0; i < N; i++ ) {\r\n          save = a[ i ][ k ];\r\n          a[ i ][ k ] = a[ i ][ j ];\r\n          a[ i ][ j ] = -save;\r\n        }\r\n      for (\r\n        i = 0; i < N; i++ // build the inverse\r\n      )\r\n        if ( i != k ) a[ i ][ k ] = -a[ i ][ k ] / big;\r\n      for ( i = 0; i < N; i++ )\r\n        for ( j = 0; j < N; j++ )\r\n          if ( i != k && j != k ) a[ i ][ j ] += a[ i ][ k ] * a[ k ][ j ];\r\n      for ( j = 0; j < N; j++ )\r\n        if ( j != k ) a[ k ][ j ] /= big;\r\n      a[ k ][ k ] = 1.0 / big;\r\n      det *= big; // bomb point\r\n    } // end k loop\r\n    for ( L = 0; L < N; L++ ) {\r\n      k = N - L - 1;\r\n      j = ik[ k ];\r\n      if ( j > k )\r\n        for ( i = 0; i < N; i++ ) {\r\n          save = a[ i ][ k ];\r\n          a[ i ][ k ] = -a[ i ][ j ];\r\n          a[ i ][ j ] = save;\r\n        }\r\n      i = jk[ k ];\r\n      if ( i > k )\r\n        for ( j = 0; j < N; j++ ) {\r\n          save = a[ k ][ j ];\r\n          a[ k ][ j ] = -a[ i ][ j ];\r\n          a[ i ][ j ] = save;\r\n        }\r\n    }\r\n    return det;\r\n  }\r\n}\r\n\r\nexport default FitHost;\r\n//module.export = FitHost","import * as util from '../graph.util.js';\r\n\r\nimport aggregator from './data_aggregator.js';\r\nimport FitLM from './fit_lm.js';\r\n\r\nclass Waveform {\r\n  constructor( data = [], xOffset = 0, xScale = 1 ) {\r\n    this.xOffset = xOffset;\r\n    this.xScale = xScale;\r\n\r\n    // Error bar handling\r\n    this.errors = {\r\n      nb: 0,\r\n\r\n      bars: {\r\n        above: null,\r\n        below: null\r\n      },\r\n\r\n      boxes: {\r\n        above: null,\r\n        below: null\r\n      }\r\n    };\r\n\r\n    this.BELOW = Waveform.BELOW;\r\n    this.ABOVE = Waveform.ABOVE;\r\n    this.BOX = Waveform.BOX;\r\n    this.BAR = Waveform.BAR;\r\n\r\n    this.setData( data );\r\n  }\r\n\r\n  /** [ [ x1, y1 ], [ x2, y2 ] ] */\r\n\r\n  /*\r\n  setDataXY( data ) {\r\n\r\n    let newData = [ this._makeArray( data.length ), this._makeArray( data.length ) ],\r\n      warnNaN = false;\r\n    const nanable = this.isNaNAllowed();\r\n\r\n    data.map( ( el, index ) => {\r\n\r\n      if ( !nanable && ( el[ 0 ] !== el[ 0 ] || el[ 1 ] !== el[ 1 ] ) ) {\r\n        warnNaN = true;\r\n      }\r\n\r\n      newData[ 0 ][ index ] = el[ 0 ];\r\n      newData[ 1 ][ index ] = el[ 1 ];\r\n    } );\r\n\r\n    if ( warnNaN ) {\r\n      this.warn( \"Trying to assign NaN values to a typed array that does not support NaNs. 0's will be used instead\" );\r\n    }\r\n\r\n    this._setData( ...newData );\r\n    return this;\r\n  }\r\n*/\r\n  setData( data, dataX = null ) {\r\n    /* First, we must treat the case of the array of array for backward compatibility */\r\n    if ( Array.isArray( data[ 0 ] ) ) {\r\n      let x = [];\r\n      let y = [];\r\n      data.forEach( ( el ) => {\r\n        x.push( el[ 0 ] );\r\n        y.push( el[ 1 ] );\r\n      } );\r\n\r\n      this.setXWaveform( x );\r\n      data = y;\r\n    }\r\n\r\n    let newData = this._makeArray( data.length ),\r\n      warnNaN = false;\r\n\r\n    const nanable = this.isNaNAllowed();\r\n\r\n    data.map( ( el, index ) => {\r\n      if ( !nanable && ( el[ 0 ] !== el[ 0 ] || el[ 1 ] !== el[ 1 ] ) ) {\r\n        warnNaN = true;\r\n      }\r\n\r\n      newData[ index ] = el;\r\n    } );\r\n\r\n    if ( warnNaN ) {\r\n      this.warn(\r\n        \"Trying to assign NaN values to a typed array that does not support NaNs. 0's will be used instead\"\r\n      );\r\n    }\r\n\r\n    this._setData( newData );\r\n\r\n    if ( dataX ) {\r\n      this.setXWaveform( dataX );\r\n    }\r\n    return this;\r\n  }\r\n\r\n  getY( index, optimized ) {\r\n    if ( optimized && this.dataInUse ) {\r\n      return this.dataInUse.y[ index ] * this.getScale() + this.getShift();\r\n    }\r\n\r\n    return this.data[ index ] * this.getScale() + this.getShift();\r\n  }\r\n\r\n  /*\r\n    flipXY() {\r\n      let temp;\r\n      temp = this.data.x;\r\n      this.data.x = this.data.y;\r\n      this.data.y = temp;\r\n\r\n      this._setData( this.data.x, this.data.y );\r\n    }*/\r\n\r\n  setXWaveform( waveform ) {\r\n    if ( !( waveform instanceof Waveform ) ) {\r\n      if ( Array.isArray( waveform ) ) {\r\n        waveform = new Waveform( waveform );\r\n      } else {\r\n        throw 'Cannot set X waveform. Data is not a valid array.';\r\n      }\r\n    }\r\n\r\n    this.xdata = waveform;\r\n\r\n    this.computeXMinMax();\r\n    return this;\r\n  }\r\n\r\n  hasXWaveform() {\r\n    return !!this.xdata;\r\n  }\r\n\r\n  getXWaveform() {\r\n    if ( this.xdata ) {\r\n      return this.xdata;\r\n    }\r\n\r\n    var wave = new Waveform();\r\n    for ( var i = 0; i < this.getLength(); i += 1 ) {\r\n      wave.append( this.getX( i ) );\r\n    }\r\n    return wave;\r\n  }\r\n\r\n  rescaleX( offset, scale ) {\r\n    this.xScale = scale;\r\n    this.xOffset = offset;\r\n    this.computeXMinMax();\r\n    return this;\r\n  }\r\n\r\n  getTypedArrayClass() {\r\n    return this._typedArrayClass || false;\r\n  }\r\n\r\n  setTypedArrayClass( constructor ) {\r\n    if (\r\n      this.getTypedArrayClass() &&\r\n      this.isNaNAllowed() &&\r\n      !this.isNaNAllowed( constructor )\r\n    ) {\r\n      this.warn(\r\n        `NaN values are not allowed by the new constructor (${\r\n          constructor.name\r\n        }) while it was allowed by the previous one (${\r\n          this._typedArrayClass.name\r\n        })`\r\n      );\r\n    }\r\n\r\n    if (\r\n      this.getTypedArrayClass() &&\r\n      this.isUnsigned() &&\r\n      !this.isUnsigned( constructor )\r\n    ) {\r\n      this.warn(\r\n        'You are switching from signed values to unsigned values. You may experience data corruption if there were some negative values.'\r\n      );\r\n    }\r\n\r\n    this._typedArrayClass = constructor;\r\n\r\n    if ( this.data ) {\r\n      this._setData( constructor.from( this.data ) );\r\n    }\r\n\r\n    if ( this.hasXWaveform() ) {\r\n      this.getXWaveform().setTypedArrayClass( constructor );\r\n    }\r\n  }\r\n\r\n  isNaNAllowed( constructor = this._typedArrayClass ) {\r\n    // The following types accept NaNs\r\n    return (\r\n      constructor == Array ||\r\n      constructor == Float32Array ||\r\n      constructor == Float64Array\r\n    );\r\n  }\r\n\r\n  isUnsigned( constructor = this._typedArrayClass ) {\r\n    // The following types accept NaNs\r\n    return (\r\n      constructor == Uint8Array ||\r\n      constructor == Uint8ClampedArray ||\r\n      constructor == Uint16Array ||\r\n      constructor == Uint32Array\r\n    );\r\n  }\r\n\r\n  recalculateMinMaxNewPoint( x, y ) {\r\n    if ( x < this.minX || this.minX === undefined ) {\r\n      this.minX = x;\r\n    }\r\n\r\n    if ( x > this.maxX || this.maxX === undefined ) {\r\n      this.maxX = x;\r\n    }\r\n\r\n    if ( y < this.minY || this.minY === undefined ) {\r\n      this.minY = y;\r\n    }\r\n\r\n    if ( y > this.maxY || this.maxY === undefined ) {\r\n      this.maxY = y;\r\n    }\r\n  }\r\n\r\n  prepend( x, y ) {\r\n    if ( typeof x == 'function' ) {\r\n      x = x( this );\r\n    }\r\n\r\n    if ( typeof y == 'function' ) {\r\n      y = y( this );\r\n    }\r\n\r\n    if ( this.xdata ) {\r\n      this.xdata.prepend( null, x );\r\n    } else if ( x !== null ) {\r\n      this.xdata = this.getXWaveform();\r\n      this.xdata.prepend( null, x );\r\n    } else {\r\n      this.xOffset -= this.xScale;\r\n    }\r\n\r\n    this.data.unshift( y );\r\n    this.recalculateMinMaxNewPoint( x, y );\r\n    return this;\r\n  }\r\n\r\n  append( x, y ) {\r\n    if ( typeof x == 'function' ) {\r\n      x = x( this );\r\n    }\r\n\r\n    if ( typeof y == 'function' ) {\r\n      y = y( this );\r\n    }\r\n\r\n    if ( this.xdata ) {\r\n      this.xdata.append( null, x );\r\n    } else if ( x !== null ) {\r\n      this.xdata = this.getXWaveform();\r\n      this.xdata.append( null, x );\r\n    }\r\n\r\n    if ( this.monotoneous ) {\r\n      if (\r\n        y > this.data[ this.data.y ] &&\r\n        this.getMonotoneousAscending() === false\r\n      ) {\r\n        this.monotoneous = false;\r\n      } else if (\r\n        y < this.data[ this.data.y ] &&\r\n        this.getMonotoneousAscending() === true\r\n      ) {\r\n        this.monotoneous = false;\r\n      }\r\n    }\r\n\r\n    if ( this.data.length == 1 || this._monotoneousAscending === undefined ) {\r\n      this.monotoneous = true;\r\n\r\n      if ( y == this.data[ 0 ] ) {\r\n        this._monotoneousAscending = undefined;\r\n      } else {\r\n        this._monotoneousAscending = y > this.data[ 0 ];\r\n      }\r\n    }\r\n\r\n    this.data.push( y );\r\n    this.recalculateMinMaxNewPoint( x, y );\r\n\r\n    return this;\r\n  }\r\n\r\n  concat( wave2 ) {\r\n    if ( !this.xdata ) {\r\n      this.xdata = this.getXWaveform();\r\n    }\r\n\r\n    if ( !wave2.xdata ) {\r\n      wave2.xdata = wave2.getXWaveform();\r\n    }\r\n\r\n    this.data = this.data.concat( wave2.data );\r\n    this.xdata.data = this.xdata.data.concat( wave2.xdata.data );\r\n\r\n    this.checkMonotonicity();\r\n    this.xdata.checkMonotonicity();\r\n\r\n    this.computeXMinMax();\r\n\r\n    return this;\r\n  }\r\n\r\n  _makeArray( length ) {\r\n    const constructor = this.getTypedArrayClass();\r\n    if ( constructor ) {\r\n      return new constructor( length );\r\n    }\r\n    return new Array( length );\r\n  }\r\n\r\n  _setData( dataY ) {\r\n    const l = dataY.length;\r\n    let i = 1,\r\n      monoDir = dataY[ 1 ] > dataY[ 0 ],\r\n      minY = dataY[ 0 ],\r\n      maxY = dataY[ 0 ];\r\n\r\n    if ( isNaN( minY ) ) {\r\n      minY = Number.MAX_VALUE;\r\n    }\r\n\r\n    if ( isNaN( maxY ) ) {\r\n      maxY = -Number.MAX_VALUE;\r\n    }\r\n\r\n    this._monotoneous = true;\r\n\r\n    for ( ; i < l; i++ ) {\r\n      if ( dataY[ i ] !== dataY[ i - 1 ] && monoDir !== dataY[ i ] > dataY[ i - 1 ] ) {\r\n        this._monotoneous = false;\r\n      }\r\n\r\n      if ( dataY[ i ] === dataY[ i ] ) {\r\n        // NaN support\r\n        minY = Math.min( dataY[ i ], minY );\r\n        maxY = Math.max( dataY[ i ], maxY );\r\n      }\r\n    }\r\n\r\n    if ( this._monotoneous ) {\r\n      this._monotoneousAscending = dataY[ 1 ] > dataY[ 0 ];\r\n    }\r\n\r\n    this.data = dataY;\r\n\r\n    this.minY = minY;\r\n    this.maxY = maxY;\r\n\r\n    this.checkMinMaxErrorBars();\r\n    this.computeXMinMax();\r\n  }\r\n\r\n  checkMinMaxErrorBars() {\r\n    let minY = this.minY,\r\n      maxY = this.maxY,\r\n      i = 0,\r\n      l = this.getLength();\r\n\r\n    if ( this.hasErrorBars() ) {\r\n      // If prefer to loop again here\r\n\r\n      for ( i = 0; i < l; i++ ) {\r\n        if ( this.data[ i ] === this.data[ i ] ) {\r\n          // NaN support\r\n\r\n          minY = Math.min( minY, this.data[ i ] - this.getMaxError( i, 'below' ) );\r\n          maxY = Math.max( maxY, this.data[ i ] + this.getMaxError( i, 'above' ) );\r\n        }\r\n      }\r\n\r\n      this.minY = minY;\r\n      this.maxY = maxY;\r\n    } else {\r\n      this.minY = minY;\r\n      this.maxY = maxY;\r\n    }\r\n  }\r\n\r\n  computeXMinMax() {\r\n    if ( !this.data ) {\r\n      return;\r\n    }\r\n\r\n    if ( this.xdata ) {\r\n      this.minX = this.xdata.getMin();\r\n      this.maxX = this.xdata.getMax();\r\n    } else {\r\n      const b1 = this.xOffset + this.xScale * this.getLength(),\r\n        b2 = this.xOffset;\r\n\r\n      this.minX = Math.min( b1, b2 );\r\n      this.maxX = Math.max( b1, b2 );\r\n    }\r\n  }\r\n\r\n  getDataInUse() {\r\n    return this.dataInUse || this.data;\r\n  }\r\n\r\n  getIndexFromVal( val, useDataToUse = false, roundingMethod = Math.round ) {\r\n    let data;\r\n\r\n    if ( useDataToUse && this.dataInUse ) {\r\n      data = this.dataInUse.y;\r\n    } else {\r\n      data = this.data;\r\n    }\r\n\r\n    let position;\r\n\r\n    position = this.getIndexFromMonotoneousData(\r\n      val,\r\n      data,\r\n      this.data.getMonotoneousAscending(),\r\n      roundingMethod\r\n    );\r\n\r\n    if ( useDataToUse && this.dataInUse && this.dataInUseType == 'aggregateY' ) {\r\n      // In case of aggregation, round to the closest element of 4.\r\n      return position - ( position % 4 );\r\n    }\r\n\r\n    return position;\r\n  }\r\n\r\n  getIndexFromX( xval, useDataToUse = false, roundingMethod = Math.round ) {\r\n    let xdata;\r\n\r\n    let data, position;\r\n\r\n    xval -= this.getXShift();\r\n    xval /= this.getXScale();\r\n\r\n    if ( xval < this.getDataMinX() ) {\r\n      return false;\r\n    }\r\n\r\n    if ( xval > this.getDataMaxX() ) {\r\n      return false;\r\n    }\r\n\r\n    if ( useDataToUse && this.dataInUse ) {\r\n      xdata = this.dataInUse.x;\r\n    } else if ( this.xdata ) {\r\n      xdata = this.xdata.getData();\r\n    }\r\n\r\n    if ( this.hasXWaveform() ) {\r\n\r\n      if ( this.isXMonotoneous() ) {\r\n        position = this.xdata.getIndexFromMonotoneousData(\r\n          xval,\r\n          xdata,\r\n          this.xdata.getMonotoneousAscending(),\r\n          roundingMethod\r\n        );\r\n      } else {\r\n        position = euclidianSearch( xval, undefined, xdata, undefined, 1, undefined );\r\n\r\n      }\r\n    } else {\r\n      position = Math.max(\r\n        0,\r\n        Math.min(\r\n          this.getLength() - 1,\r\n          roundingMethod( ( xval - this.xOffset ) / this.xScale )\r\n        )\r\n      );\r\n    }\r\n\r\n    if ( useDataToUse && this.dataInUse && this.dataInUseType == 'aggregateX' ) {\r\n      // In case of aggregation, round to the closest element of 4.\r\n      return position - ( position % 4 );\r\n    }\r\n\r\n    return position;\r\n  }\r\n\r\n  getIndexFromY( yval, useDataToUse = false, roundingMethod = Math.round ) {\r\n    let ydata;\r\n\r\n    let data, position;\r\n\r\n    yval -= this.getShift();\r\n    yval /= this.getScale();\r\n\r\n    if ( yval < this.getDataMinY() ) {\r\n      return false;\r\n    }\r\n\r\n    if ( yval > this.getDataMaxY() ) {\r\n      return false;\r\n    }\r\n\r\n    if ( useDataToUse && this.dataInUse ) {\r\n      ydata = this.dataInUse.y;\r\n    } else {\r\n      ydata = this.getData();\r\n    }\r\n\r\n    position = euclidianSearch( undefined, yval, undefined, ydata, 1, undefined );\r\n\r\n    if ( useDataToUse && this.dataInUse && this.dataInUseType == 'aggregateX' ) {\r\n      // In case of aggregation, round to the closest element of 4.\r\n      return position - ( position % 4 );\r\n    }\r\n\r\n    return position;\r\n  }\r\n\r\n  /*\r\n    getIndexFromX( xval, useDataToUse = false, roundingMethod = Math.round ) {\r\n      if ( this.getXMin() > xval || this.getXMax() < xval ) {\r\n        return false;\r\n      }\r\n\r\n      if ( this.hasXWaveform() ) {\r\n        // The x value HAS to be rescaled\r\n\r\n        position = this.xdata.getIndexFromMonotoneousData(\r\n          xval,\r\n          xdata,\r\n          this.xdata.getMonotoneousAscending(),\r\n          roundingMethod\r\n        );\r\n      } else {\r\n        position = Math.max(\r\n          0,\r\n          Math.min(\r\n            this.getLength() - 1,\r\n            roundingMethod( ( xval - this.xOffset ) / this.xScale )\r\n          )\r\n        );\r\n      }\r\n\r\n      return position;\r\n    }\r\n  */\r\n\r\n  setAtIndex( index, value ) {\r\n    this.data[ index ] = value;\r\n  }\r\n  /**\r\n   * Finds the point in the data stack with the smalled distance based on an x and y value.\r\n   * @param {number} xval\r\n   * @param {number} yval\r\n   * @param {boolean} useDataToUse\r\n   * @param {function} roundingMethod\r\n   * @param {number} scaleX\r\n   * @param {number} scaleY\r\n   * @returns {number} The index of the closest position\r\n   */\r\n  getIndexFromXY(\r\n    xval,\r\n    yval,\r\n    useDataToUse = false,\r\n    roundingMethod = Math.round,\r\n    scaleX = 1,\r\n    scaleY = 1\r\n  ) {\r\n    let xdata, ydata;\r\n\r\n    if ( useDataToUse && this.dataInUse ) {\r\n      xdata = this.dataInUse.x;\r\n      ydata = this.dataInUse.y;\r\n    } else if ( this.xdata ) {\r\n      xdata = this.xdata.data;\r\n      ydata = this.data;\r\n    }\r\n\r\n    let position;\r\n\r\n    //  if ( this.isXMonotoneous() ) {\r\n    // X lookup only\r\n    //     position = this.getIndexFromX( xval, useDataToUse, roundingMethod );\r\n\r\n    //   } else if ( !isNaN( yval ) ) {\r\n    position = this.getIndexFromDataXY(\r\n      xval,\r\n      xdata,\r\n      yval,\r\n      ydata,\r\n      scaleX,\r\n      scaleY\r\n    );\r\n    //   } else {\r\n    //     return;\r\n    //   }\r\n\r\n    if ( useDataToUse && this.dataInUse && this.dataInUseType == 'aggregateX' ) {\r\n      // In case of aggregation, round to the closest element of 4.\r\n      return position - ( position % 4 );\r\n    }\r\n\r\n    return position;\r\n  }\r\n\r\n  /**\r\n   * Finds the closest point in x and y direction.\r\n   * @see euclidianSearch\r\n   * @private\r\n   * @param {number} valX\r\n   * @param {array<number>} dataX\r\n   * @param {number} valY\r\n   * @param {array<number>} dataY\r\n   * @param {number} [ scaleX = 1 ]\r\n   * @param {number} [ scaleY = 1 ]\r\n   *\r\n   * @returns {number} The index of the closest point\r\n   */\r\n  getIndexFromDataXY( valX, dataX, valY, dataY, scaleX = 1, scaleY = 1 ) {\r\n    let data, position;\r\n\r\n    valX -= this.getXShift();\r\n    valX /= this.getXScale();\r\n\r\n    valY -= this.getShift();\r\n    valY /= this.getScale();\r\n\r\n    return euclidianSearch( valX, valY, dataX, dataY, scaleX, scaleY );\r\n  }\r\n\r\n  /**\r\n   * Uses binary search to find the index the closest to ```val``` in ```valCollection```.\r\n   * @param {number} val\r\n   * @param {array<number>} valCollection\r\n   * @param {boolean} isAscending\r\n   */\r\n  getIndexFromMonotoneousData( val, valCollection, isAscending ) {\r\n    if ( !this.isMonotoneous() ) {\r\n      console.trace();\r\n      throw 'Impossible to get the index from a non-monotoneous wave !';\r\n    }\r\n\r\n    val -= this.getShift();\r\n    val /= this.getScale();\r\n\r\n    return binarySearch( val, valCollection, !isAscending );\r\n  }\r\n\r\n  findWithShortestDistance( options ) {\r\n\r\n    if ( !options.axisRef ) {\r\n      const index = this.getIndexFromXY(\r\n        options.x,\r\n        options.y,\r\n        true,\r\n        undefined,\r\n        options.scaleX,\r\n        options.scaleY\r\n      );\r\n\r\n      if ( options.xMaxDistance && Math.abs( options.x - this.getX( index ) ) > Math.abs( options.xMaxDistance ) ) {\r\n        return -1;\r\n      }\r\n\r\n      if ( options.yMaxDistance && Math.abs( options.y - this.getY( index ) ) > Math.abs( options.yMaxDistance ) ) {\r\n        return -1;\r\n      }\r\n\r\n      return index;\r\n    } else {\r\n\r\n      if ( options.axisRef == 'x' ) {\r\n        const index = this.getIndexFromX( options.x, true, undefined );\r\n\r\n        if ( options.xMaxDistance && Math.abs( options.x - this.getX( index ) ) > Math.abs( options.xMaxDistance ) ) {\r\n          return -1;\r\n        }\r\n\r\n        return index;\r\n      }\r\n\r\n      if ( options.axisRef == 'y' ) {\r\n        const index = this.getIndexFromY( options.y, true, undefined );\r\n\r\n        if ( options.yMaxDistance && Math.abs( options.y - this.getY( index ) ) > Math.abs( options.yMaxDistance ) ) {\r\n          return -1;\r\n        }\r\n\r\n        return index;\r\n      }\r\n    }\r\n  }\r\n\r\n  getShortestDistanceToPoint( valX, valY, maxDistanceX, maxDistanceY ) {\r\n    valX -= this.getXShift();\r\n    valX /= this.getXScale();\r\n\r\n    valY -= this.getShift();\r\n    valY /= this.getScale();\r\n\r\n    let x, y, y2, x2, i, distance, shortestDistance, shortestDistanceIndex;\r\n\r\n    const point = {\r\n      x: valX,\r\n      y: valY\r\n    };\r\n\r\n    for ( i = 0; i < this.length() - 1; i++ ) {\r\n      shortestDistance = Math.POSITIVE_INFINITY;\r\n      shortestDistanceIndex = 0;\r\n\r\n      x = this.getX( i );\r\n      y = this.getY( i );\r\n\r\n      x2 = this.getX( i + 1 );\r\n      y2 = this.getY( i + 1 );\r\n\r\n      if (\r\n        ( maxDistanceX &&\r\n          ( ( x - valX > maxDistanceX && x2 - valX > maxDistanceX ) ||\r\n            ( valX - x > maxDistanceX && valX - x2 > maxDistanceX ) ) ) ||\r\n        ( maxDistanceY &&\r\n          ( ( y - valY > maxDistanceY && y2 - valY > maxDistanceY ) ||\r\n            ( valY - y > maxDistanceY && valY - y2 > maxDistanceY ) ) )\r\n      ) {\r\n        continue;\r\n      }\r\n\r\n      distance = distToSegment( point, {\r\n        x: x,\r\n        y: y\r\n      }, {\r\n        x: x2,\r\n        y: y2\r\n      } );\r\n      if ( distance < shortestDistance ) {\r\n        shortestDistance = distance;\r\n        shortestDistanceIndex = i;\r\n      }\r\n    }\r\n\r\n    return {\r\n      shortestDistance: distance,\r\n      index: shortestDistanceIndex\r\n    };\r\n  }\r\n  getReductionType() {\r\n    return this.dataInUseType;\r\n  }\r\n\r\n  getXMin() {\r\n    return this.minX * this.getXScale() + this.getXShift();\r\n  }\r\n\r\n  getXMax() {\r\n    return this.maxX * this.getXScale() + this.getXShift();\r\n  }\r\n\r\n  getYMin() {\r\n    return this.minY * this.getScale() + this.getShift();\r\n  }\r\n\r\n  getYMax() {\r\n    return this.maxY * this.getScale() + this.getShift();\r\n  }\r\n\r\n  getMin() {\r\n    return this.minY * this.getScale() + this.getShift();\r\n  }\r\n\r\n  getMax() {\r\n    return this.maxY * this.getScale() + this.getShift();\r\n  }\r\n\r\n  getMinX() {\r\n    return this.minX * this.getXScale() + this.getXShift();\r\n  }\r\n\r\n  getMaxX() {\r\n    return this.maxX * this.getXScale() + this.getXShift();\r\n  }\r\n\r\n  getMinY() {\r\n    return this.minY * this.getScale() + this.getShift();\r\n  }\r\n\r\n  getMaxY() {\r\n    return this.maxY * this.getScale() + this.getShift();\r\n  }\r\n\r\n  getDataMaxX() {\r\n    return this.maxX;\r\n  }\r\n\r\n  getDataMinX() {\r\n    return this.minX;\r\n  }\r\n\r\n  getDataMaxY() {\r\n    return this.maxY;\r\n  }\r\n\r\n  getDataMinY() {\r\n    return this.minY;\r\n  }\r\n\r\n  getDataY() {\r\n    return this.data;\r\n  }\r\n\r\n  getData( optimized ) {\r\n    if ( !optimized || !this.dataInUse ) {\r\n      return this.data;\r\n    }\r\n    return this.dataInUse.y;\r\n  }\r\n\r\n  setShift( shift = 0 ) {\r\n    // We must update the min and the max of the y data\r\n    //this.minY += ( shift - this.getShift() );\r\n    //this.maxY += ( shift - this.getShift() );\r\n    this.shift = shift;\r\n    return this;\r\n  }\r\n\r\n  getShift() {\r\n    return this.shift || 0;\r\n  }\r\n\r\n  getScale() {\r\n    return this.scale || 1;\r\n  }\r\n\r\n  setScale( scale = 1 ) {\r\n    // this.minY = ( this.minY - this.getShift() ) * scale;\r\n    // this.maxY = ( this.maxY - this.getShift() ) * scale;\r\n    this.scale = scale;\r\n    return this;\r\n  }\r\n\r\n  setXShift( shift = 0 ) {\r\n    if ( !this.hasXWaveform ) {\r\n      return this;\r\n    }\r\n\r\n    // We must update the min and the max of the x data\r\n    // That's important for when the data has already been set\r\n    //  this.minX += ( shift - this.getXShift() );\r\n    //    this.maxX += ( shift - this.getXShift() );\r\n    this.getXWaveform().setShift( shift );\r\n    return this;\r\n  }\r\n\r\n  getXShift( shift = 0 ) {\r\n    if ( !this.hasXWaveform ) {\r\n      return 0;\r\n    }\r\n\r\n    return this.getXWaveform().getShift();\r\n  }\r\n\r\n  setXScale( scale = 1 ) {\r\n    if ( !this.hasXWaveform ) {\r\n      return this;\r\n    }\r\n\r\n    this.getXWaveform().setScale( scale );\r\n    return this;\r\n  }\r\n\r\n  getXScale() {\r\n    if ( !this.hasXWaveform ) {\r\n      return 1;\r\n    }\r\n\r\n    return this.getXWaveform().getScale();\r\n  }\r\n\r\n  getLength() {\r\n    return this.data.length;\r\n  }\r\n\r\n  getDataToUseFlat() {\r\n    let l;\r\n    let j = 0;\r\n    let arr;\r\n\r\n    if ( this.dataInUse ) {\r\n      l = this.dataInUse.x.length;\r\n      arr = new Array( l * 2 ).fill( 0 );\r\n\r\n      for ( var i = 0; i < l; i += 1 ) {\r\n        arr[ j ] = this.dataInUse.x[ i ];\r\n        arr[ j + 1 ] = this.dataInUse.y[ i ];\r\n        j += 2;\r\n      }\r\n    } else {\r\n      l = this.getLength();\r\n      arr = new Array( l * 2 ).fill( 0 );\r\n      for ( var i = 0; i < l; i += 1 ) {\r\n        arr[ j + 1 ] = this.data[ i ];\r\n        arr[ j ] = this.getX( i );\r\n        j += 2;\r\n      }\r\n    }\r\n\r\n    return arr;\r\n  }\r\n\r\n  fit( options ) {\r\n    var self = this;\r\n\r\n    return new Promise( function( resolver, rejector ) {\r\n      var fit = new FitLM(\r\n        util.extend( {}, {\r\n            dataY: self,\r\n            dataX: self.getXWaveform(),\r\n            done: function( results ) {\r\n              resolver( results );\r\n            },\r\n            waveform: new Waveform()\r\n          },\r\n          options\r\n        )\r\n      );\r\n\r\n      fit.init();\r\n      fit.fit();\r\n    } );\r\n  }\r\n\r\n  getX( index, optimized ) {\r\n    if ( optimized && this.dataInUse ) {\r\n      return this.dataInUse.x[ index ] * this.getXScale() + this.getXShift();\r\n    }\r\n\r\n    if ( this.xdata ) {\r\n      return this.xdata.data[ index ] * this.getXScale() + this.getXShift();\r\n    } else {\r\n      return this.xOffset + index * this.xScale;\r\n    }\r\n  }\r\n\r\n  getXRaw( index, optimized ) {\r\n    if ( optimized && this.dataInUse ) {\r\n      return this.dataInUse.x[ index ];\r\n    }\r\n\r\n    if ( this.xdata ) {\r\n      return this.xdata.data[ index ];\r\n    } else {\r\n      return index;\r\n    }\r\n  }\r\n\r\n  _integrateP( from = 0, to = this.getLength() - 1 ) {\r\n    from = Math.round( from );\r\n    to = Math.round( to );\r\n\r\n    if ( from > to ) {\r\n      let temp = from;\r\n      from = to;\r\n      to = temp;\r\n    }\r\n\r\n    var l = to - from + 1;\r\n    var sum = 0,\r\n      delta;\r\n\r\n    let deltaTot = 0;\r\n    let diff;\r\n    var arrY = this.getData();\r\n\r\n    for ( ; from <= to; from++ ) {\r\n      if ( arrY.length - 1 > from ) {\r\n        diff = this.getX( from + 1 ) - this.getX( from );\r\n        deltaTot += diff;\r\n        sum += arrY[ from ] * diff;\r\n      }\r\n    }\r\n\r\n    return [ sum, l, deltaTot ];\r\n  }\r\n\r\n  integrateP( from, to ) {\r\n    var val = this._integrateP( from, to );\r\n    return val[ 0 ];\r\n  }\r\n\r\n  integrate( fromX, toX ) {\r\n    return this.integrateP( this.getIndexFromX( fromX ), this.getIndexFromX( toX ) );\r\n  }\r\n\r\n  average( p0 = 0, p1 = this.getLength() - 1 ) {\r\n    return this.getAverageP( p0, p1 );\r\n  }\r\n\r\n  mean() {\r\n    return this.average();\r\n  }\r\n\r\n  stddev() {\r\n    let num = 0,\r\n      denom = 0;\r\n    const mean = this.mean();\r\n    for ( var i = 0; i < this.getLength(); i++ ) {\r\n      num += ( this.getY( i ) - mean ) ** 2;\r\n      denom++;\r\n    }\r\n\r\n    return ( num / denom ) ** 0.5;\r\n  }\r\n\r\n  getAverageP( from, to ) {\r\n    var sum = this._integrateP( from, to );\r\n    return sum[ 0 ] / sum[ 2 ];\r\n  }\r\n\r\n  getAverageX( from, to ) {\r\n    var sum = this._integrateX( from, to );\r\n    return sum[ 0 ] / sum[ 2 ];\r\n  }\r\n\r\n  checkMonotonicity() {\r\n    let i = 1,\r\n      data = this.getData();\r\n    const l = this.data.length;\r\n    let dir = data[ 1 ] > data[ 0 ];\r\n\r\n    for ( ; i < l; i++ ) {\r\n      if ( data[ i ] !== data[ i - 1 ] && dir !== data[ i ] > data[ i - 1 ] ) {\r\n        return ( this._monotoneous = false );\r\n      }\r\n    }\r\n\r\n    this._monotoneousAscending = data[ 1 ] > data[ 0 ];\r\n    return ( this._monotoneous = true );\r\n  }\r\n\r\n  requireXMonotonicity() {\r\n    if ( this.xdata ) {\r\n      this.xdata.requireMonotonicity();\r\n    }\r\n  }\r\n\r\n  requireMonotonicity() {\r\n    if ( !this.isMonotoneous() ) {\r\n      throw 'The wave must be monotonic';\r\n    }\r\n  }\r\n\r\n  isMonotoneous() {\r\n    return !!this._monotoneous;\r\n  }\r\n\r\n  isXMonotoneous() {\r\n    if ( this.xdata ) {\r\n      return this.xdata.isMonotoneous();\r\n    }\r\n    // Offset and scale is always monotoneous\r\n    return true;\r\n  }\r\n\r\n  invert( data ) {\r\n    let d = data || this.data;\r\n    d.reverse();\r\n\r\n    if ( this.xdata ) {\r\n      this.xdata.invert();\r\n    }\r\n\r\n    if ( this.isMonotoneous() ) {\r\n      this._monotoneousAscending = !this._monotoneousAscending;\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  resampleForDisplay( options ) {\r\n    // Serie redrawing\r\n\r\n    let i = 0;\r\n\r\n    this.requireXMonotonicity();\r\n\r\n    let inverting = false,\r\n      dataY = this.getDataY(),\r\n      data = {\r\n        x: [],\r\n        y: []\r\n      },\r\n      dataMinMax = [],\r\n      resampleSum,\r\n      resampleMin,\r\n      resampleMax,\r\n      resampleNum,\r\n      resample_x_start,\r\n      resample_x_px_start,\r\n      x_px,\r\n      doing_mean = false,\r\n      firstPointIndex = 0,\r\n      xval;\r\n\r\n    const l = this.getLength();\r\n\r\n    if ( !options.xPosition ) {\r\n      throw 'No position calculation method provided';\r\n    }\r\n\r\n    if ( !options.resampleToPx ) {\r\n      throw 'No \"resampleToPx\" method was provided. Unit: px per point';\r\n    }\r\n\r\n    if ( options.minX > options.maxX ) {\r\n      let temp = options.minX;\r\n      options.minX = options.maxX;\r\n      options.maxX = temp;\r\n    }\r\n\r\n    if (\r\n      ( this.xdata && !this.xdata.getMonotoneousAscending() ) ||\r\n      ( !this.xdata && this.xScale < -0 )\r\n    ) {\r\n      inverting = true;\r\n      i = l;\r\n    }\r\n\r\n    for ( ; inverting ? i > 0 : i < l; inverting ? i-- : i++ ) {\r\n      xval = this.getX( i );\r\n\r\n      if ( options.minX > xval ) {\r\n        firstPointIndex = i;\r\n        continue;\r\n      }\r\n\r\n      x_px = options.xPosition( xval );\r\n\r\n      if ( !doing_mean ) {\r\n        if ( !firstPointIndex ) {\r\n          firstPointIndex = i;\r\n        } else {\r\n          data.x.push( xval );\r\n          data.y.push( dataY[ firstPointIndex ] );\r\n        }\r\n\r\n        while ( isNaN( dataY[ i ] ) ) {\r\n          if ( inverting ) {\r\n            i--;\r\n          } else {\r\n            i++;\r\n          }\r\n        }\r\n\r\n        resampleSum = resampleMin = resampleMax = dataY[ firstPointIndex ];\r\n        resampleNum = 1;\r\n        resample_x_px_start = x_px;\r\n        resample_x_start = xval;\r\n        firstPointIndex = 0;\r\n\r\n        doing_mean = true;\r\n\r\n        continue;\r\n      }\r\n\r\n      if (\r\n        Math.abs( x_px - resample_x_px_start ) > options.resampleToPx ||\r\n        i == l ||\r\n        i == 0 ||\r\n        isNaN( dataY[ i ] )\r\n      ) {\r\n        let xpos = ( resample_x_start + xval ) / 2;\r\n\r\n        data.x.push( xpos );\r\n        data.y.push( resampleSum / resampleNum );\r\n\r\n        dataMinMax.push( xpos, resampleMin, resampleMax );\r\n\r\n        if ( options.maxX !== undefined && xval > options.maxX ) {\r\n          break;\r\n        }\r\n\r\n        doing_mean = false;\r\n\r\n        continue;\r\n      }\r\n\r\n      resampleSum += dataY[ i ];\r\n      resampleNum++;\r\n\r\n      resampleMin = Math.min( resampleMin, dataY[ i ] );\r\n      resampleMax = Math.max( resampleMax, dataY[ i ] );\r\n    }\r\n\r\n    this.dataInUseType = 'resampled';\r\n    this.dataInUse = data;\r\n    return dataMinMax;\r\n  }\r\n\r\n  interpolate( x ) {\r\n    let yData = this.getDataY();\r\n    let xIndex;\r\n\r\n    if ( this.xdata ) {\r\n      let xData = this.xdata.getData();\r\n\r\n      try {\r\n        xIndex = binarySearch( x, xData, !this.xdata.getMonotoneousAscending() );\r\n      } catch ( e ) {\r\n        return NaN;\r\n      }\r\n\r\n      if ( xData[ xIndex ] == x ) {\r\n        return yData[ xIndex ];\r\n      }\r\n      return (\r\n        ( ( x - xData[ xIndex ] ) / ( xData[ xIndex + 1 ] - xData[ xIndex ] ) ) *\r\n        ( yData[ xIndex + 1 ] - yData[ xIndex ] ) +\r\n        yData[ xIndex ]\r\n      );\r\n    } else {\r\n      xIndex = ( x - this.xOffset ) / this.xScale;\r\n      let xIndexF = Math.floor( xIndex );\r\n      return (\r\n        ( xIndex - xIndexF ) * ( yData[ xIndexF + 1 ] - yData[ xIndexF ] ) +\r\n        yData[ xIndexF ]\r\n      );\r\n    }\r\n  }\r\n\r\n  interpolateIndex_X( index ) {\r\n    let yData = this.getDataY();\r\n    if ( this.xdata ) {\r\n      let xData = this.xdata.getData();\r\n      let indexStart = Math.floor( index );\r\n\r\n      return (\r\n        ( index - indexStart ) * ( xData[ indexStart + 1 ] - xData[ indexStart ] ) +\r\n        xData[ indexStart ]\r\n      );\r\n    }\r\n  }\r\n\r\n  getMonotoneousAscending() {\r\n    if ( !this.isMonotoneous() ) {\r\n      return 'The waveform is not monotoneous';\r\n    }\r\n\r\n    return this._monotoneousAscending;\r\n  }\r\n\r\n  getXMonotoneousAscending() {\r\n    if ( this.xdata ) {\r\n      return this.xdata.getMonotoneousAscending();\r\n    }\r\n\r\n    return this.xScale > 0;\r\n  }\r\n\r\n  isXMonotoneousAscending() {\r\n    return this.getXMonotoneousAscending( ...arguments );\r\n  }\r\n\r\n  divide( numberOrWave ) {\r\n    return this._arithmetic( numberOrWave, DIVIDE );\r\n  }\r\n\r\n  divideBy() {\r\n    return this.divide( ...arguments );\r\n  }\r\n\r\n  multiply( numberOrWave ) {\r\n    return this._arithmetic( numberOrWave, MULTIPLY );\r\n  }\r\n\r\n  multiplyBy() {\r\n    return this.multiply( ...arguments );\r\n  }\r\n\r\n  log() {\r\n    return this.logBase( 10 );\r\n  }\r\n\r\n  ln() {\r\n    return this.logBase( Math.E );\r\n  }\r\n\r\n  logBase( base ) {\r\n    let logBase = Math.log( base );\r\n    this.data.map( ( valY ) => {\r\n      return Math.log( valY ) / logBase;\r\n    } );\r\n  }\r\n\r\n  add( numberOrWave ) {\r\n    return this._arithmetic( numberOrWave, ADD );\r\n  }\r\n\r\n  addBy() {\r\n    return this.add( ...arguments );\r\n  }\r\n\r\n  subtract( numberOrWave ) {\r\n    return this._arithmetic( numberOrWave, SUBTRACT );\r\n  }\r\n\r\n  subtractBy() {\r\n    return this.subtract( ...arguments );\r\n  }\r\n\r\n  math( method ) {\r\n    for ( var i = 0; i < this.getLength(); i++ ) {\r\n      this.data[ i ] = method( this.getY( i ), this.getX( i ) );\r\n    }\r\n\r\n    this._setData( this.data );\r\n    return this;\r\n  }\r\n\r\n  _arithmetic( numberOrWave, operator ) {\r\n    if ( numberOrWave instanceof Waveform ) {\r\n      return this._waveArithmetic( numberOrWave, operator );\r\n    } else if ( typeof numberOrWave == 'number' ) {\r\n      return this._numberArithmetic( numberOrWave, operator );\r\n    }\r\n  }\r\n\r\n  _numberArithmetic( num, operation ) {\r\n    let i = 0,\r\n      l = this.getLength();\r\n\r\n    if ( operation == MULTIPLY ) {\r\n      for ( ; i < l; i++ ) {\r\n        this.data[ i ] *= num;\r\n      }\r\n\r\n      this.minY *= num;\r\n      this.maxY *= num;\r\n    } else if ( operation == DIVIDE ) {\r\n      for ( ; i < l; i++ ) {\r\n        this.data[ i ] /= num;\r\n      }\r\n\r\n      this.minY /= num;\r\n      this.maxY /= num;\r\n    } else if ( operation == ADD ) {\r\n      for ( ; i < l; i++ ) {\r\n        this.data[ i ] += num;\r\n      }\r\n\r\n      this.minY += num;\r\n      this.maxY += num;\r\n    } else if ( operation == SUBTRACT ) {\r\n      for ( ; i < l; i++ ) {\r\n        this.data[ i ] -= num;\r\n      }\r\n\r\n      this.minY -= num;\r\n      this.maxY -= num;\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  _waveArithmetic( wave, operation ) {\r\n    let yDataThis = this.getDataY(),\r\n      i = 0;\r\n    const l = this.getLength();\r\n    this.requireXMonotonicity();\r\n    wave.requireXMonotonicity();\r\n\r\n    if ( this.xdata && wave.xdata ) {\r\n      const xSet = new Set();\r\n      const xData = this.xdata.data;\r\n      const xData2 = wave.xdata.data;\r\n\r\n      for ( i = 0; i < xData.length; i++ ) {\r\n        xSet.add( xData[ i ] );\r\n      }\r\n\r\n      for ( i = 0; i < xData2.length; i++ ) {\r\n        xSet.add( xData2[ i ] );\r\n      }\r\n\r\n      const xs = Array.from( xSet.values() );\r\n      xs.sort( ( a, b ) => a - b );\r\n\r\n      const ys = xs.map( ( x ) => {\r\n        if ( operation == MULTIPLY ) {\r\n          return this.interpolate( x ) * wave.interpolate( x );\r\n        } else if ( operation == DIVIDE ) {\r\n          return this.interpolate( x ) / wave.interpolate( x );\r\n        } else if ( operation == ADD ) {\r\n          return this.interpolate( x ) + wave.interpolate( x );\r\n        } else if ( operation == SUBTRACT ) {\r\n          return this.interpolate( x ) - wave.interpolate( x );\r\n        }\r\n      } );\r\n\r\n      this._setData( ys );\r\n\r\n      this.xdata._setData( xs );\r\n    } else {\r\n      if ( operation == MULTIPLY ) {\r\n        for ( ; i < l; i++ ) {\r\n          yDataThis[ i ] *= wave.interpolate( this.getX( i ) );\r\n        }\r\n      } else if ( operation == DIVIDE ) {\r\n        for ( ; i < l; i++ ) {\r\n          yDataThis[ i ] /= wave.interpolate( this.getX( i ) );\r\n        }\r\n      } else if ( operation == ADD ) {\r\n        for ( ; i < l; i++ ) {\r\n          yDataThis[ i ] += wave.interpolate( this.getX( i ) );\r\n        }\r\n      } else if ( operation == SUBTRACT ) {\r\n        for ( ; i < l; i++ ) {\r\n          yDataThis[ i ] -= wave.interpolate( this.getX( i ) );\r\n        }\r\n      }\r\n\r\n      this._setData( yDataThis );\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  aggregate( direction = 'x' ) {\r\n    this._dataAggregating = {};\r\n    this._dataAggregated = {};\r\n    this._dataAggregationDirection = direction.toUpperCase();\r\n\r\n    var pow2 = pow2floor( this.getLength() );\r\n\r\n    this._dataAggregating = aggregator( {\r\n      minX: this.minX,\r\n      maxX: this.maxX,\r\n      minY: this.minY,\r\n      maxY: this.maxY,\r\n      data: this.data,\r\n      xdata: this.xdata ? this.xdata.getData() : undefined,\r\n      xScale: this.xScale,\r\n      xOffset: this.xOffset,\r\n      numPoints: pow2,\r\n      direction: direction\r\n    } ).then( ( event ) => {\r\n      this._dataAggregated = event.aggregates;\r\n      this._dataAggregating = false;\r\n    } );\r\n  }\r\n\r\n  hasAggregation() {\r\n    return !!this._dataAggregated;\r\n  }\r\n\r\n  selectAggregatedData( pxWidth ) {\r\n    if ( pxWidth < 2 ) {\r\n      return false;\r\n    }\r\n    /*\r\n        if( direction !== this._dataAggregationDirection ) {\r\n          throw \"The data is not aggregated in that direction\";\r\n        }\r\n    */\r\n\r\n    var level = pow2ceil( pxWidth );\r\n\r\n    if ( this._dataAggregated[ level ] ) {\r\n      this.dataInUseType = `aggregate${this._dataAggregationDirection}`;\r\n      this.dataInUse = this._dataAggregated[ level ];\r\n      return;\r\n    } else if ( this._dataAggregating ) {\r\n      return this._dataAggregating;\r\n    }\r\n\r\n    this.dataInUseType = 'none';\r\n    this.dataInUse = {\r\n      y: this.data,\r\n      x: this.getXWaveform().data\r\n    };\r\n  }\r\n\r\n  duplicate( alsoDuplicateXWave = true ) {\r\n    var newWaveform = new Waveform();\r\n    newWaveform._setData( this.getDataY().slice() );\r\n    newWaveform.rescaleX( this.xOffset, this.xShift );\r\n    newWaveform.setShift( this.getShift() );\r\n    newWaveform.setScale( this.getScale() );\r\n\r\n    if ( this.xdata ) {\r\n      if ( alsoDuplicateXWave ) {\r\n        newWaveform.setXWaveform( this.xdata.duplicate() );\r\n      } else {\r\n        newWaveform.setXWaveform( this.xdata );\r\n      }\r\n\r\n      newWaveform.setXShift( this.getXShift() );\r\n      newWaveform.setXScale( this.getXScale() );\r\n    } else {\r\n      newWaveform.xOffset = this.xOffset;\r\n      newWaveform.xScale = this.xScale;\r\n    }\r\n\r\n    return newWaveform;\r\n  }\r\n\r\n  subrangeX( fromX, toX ) {\r\n    if ( !this.xdata ) {\r\n      // We can select the new range from there\r\n\r\n      let fromP = this.getIndexFromX( fromX ),\r\n        toP = this.getIndexFromX( toP );\r\n\r\n      return new Waveform()\r\n        .setData( this.data.slice( fromP, toP ) )\r\n        .rescaleX( this.xOffset, this.xScale );\r\n    } else {\r\n      var waveform = new Waveform();\r\n\r\n      for ( var i = 0, l = this.data.length; i < l; i++ ) {\r\n        if ( this.data[ i ] >= fromX && this.data[ i ] < toX ) {\r\n          waveform.append( this.dataX[ i ], this.data[ i ] );\r\n        }\r\n      }\r\n\r\n      return waveform;\r\n    }\r\n  }\r\n\r\n  findLocalMinMax( xRef, xWithin, type ) {\r\n    let index = this.getIndexFromX( xRef ),\r\n      indexPlus = this.getIndexFromX( xRef + xWithin ),\r\n      indexMinus = this.getIndexFromX( xRef - xWithin );\r\n\r\n    return this.findLocalMinMaxIndex( indexMinus, indexPlus, type );\r\n  }\r\n\r\n  findLocalMinMaxIndex( indexMinus, indexPlus, type ) {\r\n    let tmp;\r\n\r\n    if ( indexPlus < indexMinus ) {\r\n      tmp = indexPlus;\r\n      indexPlus = indexMinus;\r\n      indexMinus = tmp;\r\n    }\r\n\r\n    let curr, currI;\r\n\r\n    if ( type == 'max' ) {\r\n      curr = Number.NEGATIVE_INFINITY;\r\n\r\n      for ( var i = indexMinus; i <= indexPlus; i++ ) {\r\n        if ( this.getY( i ) > curr ) {\r\n          curr = this.getY( i );\r\n          currI = i;\r\n        }\r\n      }\r\n    } else {\r\n      curr = Number.POSITIVE_INFINITY;\r\n\r\n      for ( var i = indexMinus; i <= indexPlus; i++ ) {\r\n        if ( this.getY( i ) < curr ) {\r\n          curr = this.getY( i );\r\n          currI = i;\r\n        }\r\n      }\r\n    }\r\n\r\n    if ( currI == indexMinus || currI == indexPlus ) {\r\n      return false;\r\n    }\r\n\r\n    return this.getX( currI );\r\n  }\r\n\r\n  warn( text ) {\r\n    if ( console ) {\r\n      console.warn( text );\r\n    }\r\n  }\r\n\r\n  setUnit( unit ) {\r\n    this.unit = unit;\r\n    return this;\r\n  }\r\n\r\n  setXUnit( unit ) {\r\n    if ( this.hasXWaveform() ) {\r\n      this.xdata.setUnit( unit );\r\n    }\r\n\r\n    this.xunit = unit;\r\n    return this;\r\n  }\r\n\r\n  getUnit() {\r\n    return this.unit || '';\r\n  }\r\n\r\n  getXUnit() {\r\n    if ( this.hasXWaveform() ) {\r\n      return this.xdata.getUnit();\r\n    }\r\n\r\n    return this.xunit | '';\r\n  }\r\n\r\n  hasXUnit() {\r\n    return this.getXUnit().length > 0;\r\n  }\r\n\r\n  hasUnit() {\r\n    return this.getUnit().length > 0;\r\n  }\r\n\r\n  findLevels( level, options ) {\r\n    options = util.extend( {\r\n        box: 1,\r\n        edge: 'both',\r\n        rounding: 'before',\r\n        rangeP: [ 0, this.getLength() ]\r\n      },\r\n      options\r\n    );\r\n\r\n    var lastLvlIndex = options.rangeP[ 0 ];\r\n    var lvlIndex;\r\n    var indices = [];\r\n    var i = 0;\r\n\r\n    while (\r\n      ( lvlIndex = this.findLevel(\r\n        level,\r\n        util.extend( true, {}, options, {\r\n          rangeP: [ lastLvlIndex, options.rangeP[ 1 ] ]\r\n        } )\r\n      ) )\r\n    ) {\r\n      indices.push( lvlIndex );\r\n      lastLvlIndex = Math.ceil( lvlIndex );\r\n\r\n      i++;\r\n      if ( i > 1000 ) {\r\n        return;\r\n      }\r\n    }\r\n\r\n    return indices;\r\n  }\r\n\r\n  // Find the first level in the specified range\r\n  findLevel( level, options ) {\r\n    options = util.extend( {\r\n        box: 1,\r\n        edge: 'both',\r\n        direction: 'ascending',\r\n        rounding: 'before',\r\n        rangeP: [ 0, this.getLength() ]\r\n      },\r\n      options\r\n    );\r\n\r\n    if ( options.rangeX ) {\r\n      options.rangeP = options.rangeX.map( this.getIndexFromX );\r\n    }\r\n\r\n    var value, below, i, j, l, increment;\r\n\r\n    var box = options.box;\r\n\r\n    if ( box % 2 == 0 ) {\r\n      box++;\r\n    }\r\n\r\n    if ( options.direction == 'descending' ) {\r\n      ( i = options.rangeP[ 1 ] ), ( l = options.rangeP[ 0 ] ), ( increment = -1 );\r\n    } else {\r\n      ( i = options.rangeP[ 0 ] ), ( l = options.rangeP[ 1 ] ), ( increment = +1 );\r\n    }\r\n\r\n    for ( ;; i += increment ) {\r\n      if ( options.direction == 'descending' ) {\r\n        if ( i < l ) {\r\n          break;\r\n        }\r\n      } else {\r\n        if ( i > l ) {\r\n          break;\r\n        }\r\n      }\r\n\r\n      if ( i < options.rangeP[ 0 ] + ( box - 1 ) / 2 ) {\r\n        continue;\r\n      }\r\n\r\n      if ( i > options.rangeP[ 1 ] - ( box - 1 ) / 2 ) {\r\n        break;\r\n      }\r\n\r\n      value = this.getAverageP( i - ( box - 1 ) / 2, i + ( box - 1 ) / 2 );\r\n\r\n      if ( below === undefined ) {\r\n        below = value < level;\r\n        continue;\r\n      }\r\n      // Crossing up\r\n      if ( value >= level && below ) {\r\n        below = false;\r\n\r\n        if ( options.edge == 'ascending' || options.edge == 'both' ) {\r\n          // Found something\r\n\r\n          for ( let j = i + ( box - 1 ) / 2; j >= i - ( box - 1 ) / 2; j-- ) {\r\n            if ( this.data[ j ] >= level && this.data[ j - 1 ] <= level ) {\r\n              // Find a crossing\r\n\r\n              switch ( options.rounding ) {\r\n                case 'before':\r\n                  return j - 1;\r\n                  break;\r\n\r\n                case 'after':\r\n                  return j;\r\n                  break;\r\n\r\n                case 'interpolate':\r\n                  return getIndexInterpolate(\r\n                    level,\r\n                    this.data[ j ],\r\n                    this.data[ j - 1 ],\r\n                    j,\r\n                    j - 1\r\n                  );\r\n                  break;\r\n              }\r\n            }\r\n          }\r\n        }\r\n      } else if ( value <= level && !below ) {\r\n        below = true;\r\n\r\n        if ( options.edge == 'descending' || options.edge == 'both' ) {\r\n          for ( j = i + ( box - 1 ) / 2; j >= i - ( box - 1 ) / 2; j-- ) {\r\n            if ( this.data[ j ] <= level && this.data[ j - 1 ] >= level ) {\r\n              // Find a crossing\r\n\r\n              switch ( options.rounding ) {\r\n                case 'before':\r\n                  return j - 1;\r\n                  break;\r\n\r\n                case 'after':\r\n                  return j;\r\n                  break;\r\n\r\n                case 'interpolate':\r\n                  return getIndexInterpolate(\r\n                    level,\r\n                    this.data[ j ],\r\n                    this.data[ j - 1 ],\r\n                    j,\r\n                    j - 1\r\n                  );\r\n                  break;\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  normalize( mode ) {\r\n    let factor, total, minValue, maxValue, ratio, i;\r\n\r\n    if ( mode == 'max1' || mode == 'max100' ) {\r\n      factor = 1;\r\n\r\n      if ( mode == 'max100' ) {\r\n        factor = 100;\r\n      }\r\n\r\n      maxValue = this.data[ 0 ];\r\n\r\n      for ( i = 1; i < this.getLength(); i++ ) {\r\n        if ( this.data[ i ] > maxValue ) {\r\n          maxValue = this.data[ i ];\r\n        }\r\n      }\r\n\r\n      for ( i = 0; i < this.getLength(); i++ ) {\r\n        this.data[ i ] /= maxValue / factor;\r\n      }\r\n    } else if ( mode == 'sum1' ) {\r\n      total = 0;\r\n\r\n      for ( i = 0; i < this.getLength(); i++ ) {\r\n        total += this.data[ i ];\r\n      }\r\n\r\n      for ( i = 0; i < this.getLength(); i++ ) {\r\n        this.data[ i ] /= total;\r\n      }\r\n    } else if ( mode == 'max1min0' ) {\r\n      ( maxValue = this.data[ 0 ] ), ( minValue = this.data[ 0 ] );\r\n\r\n      for ( i = 1; i < this.getLength(); i++ ) {\r\n        if ( this.data[ i ] > maxValue ) {\r\n          maxValue = this.data[ i ];\r\n        } else if ( this.data[ i ] < minValue ) {\r\n          minValue = this.data[ i ];\r\n        }\r\n      }\r\n\r\n      ratio = 1 / ( maxValue - minValue );\r\n\r\n      for ( i = 0; i < this.getLength(); i++ ) {\r\n        this.data[ i ] = ( this.data[ i ] - minValue ) * ratio;\r\n      }\r\n    }\r\n\r\n    this.setData( this.data );\r\n  }\r\n\r\n  filterNaN() {\r\n    const l = this.data.length - 1;\r\n    for ( var i = l; i >= 0; i-- ) {\r\n      if ( isNaN( this.data[ i ] ) ) {\r\n        this.data = this.data.splice( i, 1 );\r\n\r\n        if ( this.xdata ) {\r\n          this.xdata.data.splice( i, 1 );\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  filterInfinity() {\r\n    const l = this.data.length - 1;\r\n    for ( var i = l; i >= 0; i-- ) {\r\n      if ( !isFinite( this.data[ i ] ) ) {\r\n        this.data = this.data.splice( i, 1 );\r\n\r\n        if ( this.xdata ) {\r\n          this.xdata.data.splice( i, 1 );\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  ////////////////////////////////////////////////////////////\r\n  ///// HANDLING ERRORS   ////////////////////////////////////\r\n  ////////////////////////////////////////////////////////////\r\n\r\n  setErrorBarX( waveform ) {\r\n    if ( !( waveform instanceof Waveform ) ) {\r\n      waveform = new this.constructor( waveform );\r\n    }\r\n\r\n    var xWave = this.getXWaveform();\r\n    xWave.setErrorBar( waveform );\r\n    return this;\r\n  }\r\n\r\n  setErrorBarXBelow( waveform ) {\r\n    if ( !( waveform instanceof Waveform ) ) {\r\n      waveform = new this.constructor( waveform );\r\n    }\r\n\r\n    var xWave = this.getXWaveform();\r\n    xWave.setErrorBarBelow( waveform );\r\n    return this;\r\n  }\r\n\r\n  setErrorBarXAbove( waveform ) {\r\n    if ( !( waveform instanceof Waveform ) ) {\r\n      waveform = new this.constructor( waveform );\r\n    }\r\n\r\n    var xWave = this.getXWaveform();\r\n    xWave.setErrorBarAbove( waveform );\r\n    return this;\r\n  }\r\n\r\n  setErrorBoxX( waveform ) {\r\n    if ( !( waveform instanceof Waveform ) ) {\r\n      waveform = new this.constructor( waveform );\r\n    }\r\n\r\n    var xWave = this.getXWaveform();\r\n    xWave.setErrorBoxAbove( waveform );\r\n    xWave.setErrorBoxBelow( waveform );\r\n    return this;\r\n  }\r\n\r\n  setErrorBoxXBelow( waveform ) {\r\n    if ( !( waveform instanceof Waveform ) ) {\r\n      waveform = new this.constructor( waveform );\r\n    }\r\n\r\n    var xWave = this.getXWaveform();\r\n\r\n    xWave.setErrorBoxBelow( waveform );\r\n    return this;\r\n  }\r\n\r\n  setErrorBoxXAbove( waveform ) {\r\n    if ( !( waveform instanceof Waveform ) ) {\r\n      waveform = new this.constructor( waveform );\r\n    }\r\n\r\n    var xWave = this.getXWaveform();\r\n    xWave.setErrorBoxAbove( waveform );\r\n    return this;\r\n  }\r\n\r\n  setErrorBar( waveform, checkMinMax = true ) {\r\n    if ( !( waveform instanceof Waveform ) ) {\r\n      waveform = new this.constructor( waveform );\r\n    }\r\n    this.errors.nb++;\r\n    this.errors.nb++;\r\n    this.errors.bars.below = waveform;\r\n    this.errors.bars.above = waveform;\r\n\r\n    if ( checkMinMax ) {\r\n      this._setData( this.data );\r\n    }\r\n  }\r\n\r\n  setErrorBarBelow( waveform, checkMinMax = true ) {\r\n    if ( !( waveform instanceof Waveform ) ) {\r\n      waveform = new this.constructor( waveform );\r\n    }\r\n    this.errors.nb++;\r\n    this.errors.bars.below = waveform;\r\n\r\n    if ( checkMinMax ) {\r\n      this._setData( this.data );\r\n    }\r\n  }\r\n\r\n  setErrorBarAbove( waveform, checkMinMax = true ) {\r\n    if ( !( waveform instanceof Waveform ) ) {\r\n      waveform = new this.constructor( waveform );\r\n    }\r\n\r\n    this.errors.nb++;\r\n    this.errors.bars.above = waveform;\r\n\r\n    if ( checkMinMax ) {\r\n      this._setData( this.data );\r\n    }\r\n  }\r\n\r\n  setErrorBox( waveform, checkMinMax = true ) {\r\n    if ( !( waveform instanceof Waveform ) ) {\r\n      waveform = new this.constructor( waveform );\r\n    }\r\n    this.errors.nb++;\r\n    this.errors.nb++;\r\n    this.errors.boxes.above = waveform;\r\n    this.errors.boxes.below = waveform;\r\n\r\n    if ( checkMinMax ) {\r\n      this._setData( this.data );\r\n    }\r\n  }\r\n\r\n  setErrorBoxBelow( waveform, checkMinMax = true ) {\r\n    if ( !( waveform instanceof Waveform ) ) {\r\n      waveform = new this.constructor( waveform );\r\n    }\r\n    this.errors.nb++;\r\n    this.errors.boxes.below = waveform;\r\n\r\n    if ( checkMinMax ) {\r\n      this._setData( this.data );\r\n    }\r\n  }\r\n\r\n  setErrorBoxAbove( waveform, checkMinMax = true ) {\r\n    if ( !( waveform instanceof Waveform ) ) {\r\n      waveform = new Waveform( waveform );\r\n    }\r\n\r\n    this.errors.boxes.above = waveform;\r\n    if ( checkMinMax ) {\r\n      this._setData( this.data );\r\n    }\r\n  }\r\n\r\n  getMaxError( i, side = Waveform.ABOVE ) {\r\n    return Math.max(\r\n      this.getMaxErrorType( i, side, Waveform.BOX ),\r\n      this.getMaxErrorType( i, side, Waveform.BAR )\r\n    );\r\n  }\r\n\r\n  getMaxErrorType( i, side = Waveform.ABOVE, type = Waveform.BOX ) {\r\n    let stack;\r\n    if ( type == Waveform.BOX ) {\r\n      stack = this.errors.boxes;\r\n    } else if ( type == Waveform.BAR ) {\r\n      stack = this.errors.bars;\r\n    } else {\r\n      throw 'Unknown type of error';\r\n    }\r\n\r\n    let waveform;\r\n    if ( !( waveform = stack[ side ] ) ) {\r\n      if ( side == Waveform.ABOVE ) {\r\n        if ( stack[ side ] == Waveform.BELOW ) {\r\n          waveform = stack.below;\r\n        }\r\n      } else {\r\n        if ( stack[ side ] == Waveform.ABOVE ) {\r\n          waveform = stack.above;\r\n        }\r\n      }\r\n    }\r\n\r\n    if ( !waveform ) {\r\n      return 0;\r\n    }\r\n\r\n    return waveform.getY( i );\r\n  }\r\n\r\n  getErrorBarXBelow( index ) {\r\n    return this.getErrorX( index, Waveform.BELOW, Waveform.BAR );\r\n  }\r\n  getErrorBarXAbove( index ) {\r\n    return this.getErrorX( index, Waveform.ABOVE, Waveform.BAR );\r\n  }\r\n  getErrorBoxXBelow( index ) {\r\n    return this.getErrorX( index, Waveform.BELOW, Waveform.BOX );\r\n  }\r\n  getErrorBoxXAbove( index ) {\r\n    return this.getErrorX( index, Waveform.ABOVE, Waveform.BOX );\r\n  }\r\n\r\n  getErrorBarYBelow( index ) {\r\n    return this.getError( index, Waveform.BELOW, Waveform.BAR );\r\n  }\r\n  getErrorBarYAbove( index ) {\r\n    return this.getError( index, Waveform.ABOVE, Waveform.BAR );\r\n  }\r\n  getErrorBoxYBelow( index ) {\r\n    return this.getError( index, Waveform.BELOW, Waveform.BOX );\r\n  }\r\n  getErrorBoxYAbove( index ) {\r\n    return this.getError( index, Waveform.ABOVE, Waveform.BOX );\r\n  }\r\n\r\n  getErrorX( index, side = Waveform.ABOVE, type = Waveform.BAR ) {\r\n    if ( !this.hasXWaveform() ) {\r\n      return false;\r\n    }\r\n\r\n    return this.xdata.getError( index, side, type );\r\n  }\r\n\r\n  getError( index, side = Waveform.ABOVE, type = Waveform.BAR ) {\r\n    let errors = type == Waveform.BAR ? this.errors.bars : this.errors.boxes;\r\n\r\n    if ( !errors ) {\r\n      return false;\r\n    }\r\n\r\n    let wave;\r\n    if ( ( wave = side == Waveform.ABOVE ? errors.above : errors.below ) ) {\r\n      /*console.log( wave );\r\n            if ( wave == Waveform.ABOVE && side == Waveform.BELOW ) {\r\n              wave = errors.above;\r\n            } else if ( wave == Waveform.BELOW && side == Waveform.ABOVE ) {\r\n              wave = errors.below;\r\n            }\r\n      */\r\n      /*\r\n            if ( !wave ) {\r\n              return false;\r\n            }\r\n      */\r\n      return wave.getY( index );\r\n    }\r\n  }\r\n\r\n  hasErrorBars() {\r\n    return (\r\n      this.errors.nb > 0 || ( this.hasXWaveform() && this.xdata.errors.nb > 0 )\r\n    );\r\n  }\r\n}\r\n\r\nWaveform.BELOW = Symbol();\r\nWaveform.ABOVE = Symbol();\r\n\r\nWaveform.BOX = Symbol();\r\nWaveform.BAR = Symbol();\r\n\r\nconst MULTIPLY = Symbol();\r\nconst ADD = Symbol();\r\nconst SUBTRACT = Symbol();\r\nconst DIVIDE = Symbol();\r\n\r\n// http://stackoverflow.com/questions/26965171/fast-nearest-power-of-2-in-javascript\r\nfunction pow2ceil( v ) {\r\n  v--;\r\n  var p = 2;\r\n  while ( ( v >>= 1 ) ) {\r\n    p <<= 1;\r\n  }\r\n  return p;\r\n}\r\n\r\nfunction pow2floor( v ) {\r\n  var p = 1;\r\n  while ( ( v >>= 1 ) ) {\r\n    p <<= 1;\r\n  }\r\n  return p;\r\n}\r\n\r\nfunction getIndexInterpolate(\r\n  value,\r\n  valueBefore,\r\n  valueAfter,\r\n  indexBefore,\r\n  indexAfter\r\n) {\r\n  return (\r\n    ( ( value - valueBefore ) / ( valueAfter - valueBefore ) ) *\r\n    ( indexAfter - indexBefore ) +\r\n    indexBefore\r\n  );\r\n}\r\n\r\n/**\r\n * @private\r\n * Performs a euclidian search (as opposed to a binary search where the data must be monotoneously increasing and where the search is only in x). This is useful to find the closest point to a position (for example the one of the mouse) for any kind of data.\r\n * The scaleX and scaleY parameters could be used to skew the search. For example, let's say that you want to search the closest point in pixel, and not in value, you would need to reflect the different axes scaling into the scaleX and scaleY parameter\r\n *\r\n * @param {number} targetX The x position we want to get close to\r\n * @param {number} targetY The y position we want to get close to\r\n * @param {array<number>} haystackX The source data (array of x's)\r\n * @param {array<number>} haystackY The source data (array of y's) (paired by index to the x array)\r\n * @param {number} [ scaleX = 1 ] X-scaler (the higher, the more importance given to the x distance)\r\n * @param {number} [ scaleY = 1 ] Y-scaler (the higher, the more importance given to the y distance)\r\n * @returns The index of the closest point\r\n */\r\nfunction euclidianSearch(\r\n  targetX,\r\n  targetY,\r\n  haystackX,\r\n  haystackY,\r\n  scaleX = 1,\r\n  scaleY = 1\r\n) {\r\n  let distance = Number.MAX_VALUE,\r\n    distance_i;\r\n\r\n  let index = -1;\r\n\r\n  if ( targetX !== undefined && targetY == undefined ) {\r\n\r\n    for ( var i = 0, l = haystackX.length; i < l; i++ ) {\r\n      distance_i = Math.abs( ( targetX - haystackX[ i ] ) * scaleX );\r\n      if ( distance_i < distance ) {\r\n        index = i;\r\n        distance = distance_i;\r\n      }\r\n    }\r\n\r\n  } else if ( targetX == undefined && targetY !== undefined ) {\r\n\r\n    for ( var i = 0, l = haystackY.length; i < l; i++ ) {\r\n      distance_i = Math.abs( ( targetY - haystackY[ i ] ) * scaleY );\r\n      if ( distance_i < distance ) {\r\n        index = i;\r\n        distance = distance_i;\r\n      }\r\n    }\r\n\r\n  } else {\r\n\r\n    for ( var i = 0, l = haystackX.length; i < l; i++ ) {\r\n      distance_i =\r\n        ( ( targetX - haystackX[ i ] ) * scaleX ) ** 2 +\r\n        ( ( targetY - haystackY[ i ] ) * scaleY ) ** 2;\r\n\r\n      if ( distance_i < distance ) {\r\n        index = i;\r\n        distance = distance_i;\r\n      }\r\n    }\r\n  }\r\n\r\n  return index;\r\n}\r\n\r\nfunction binarySearch(\r\n  target,\r\n  haystack,\r\n  reverse = haystack[ haystack.length - 1 ] < haystack[ 0 ],\r\n  fineCheck = true\r\n) {\r\n  let seedA = 0,\r\n    length = haystack.length,\r\n    seedB = length - 1,\r\n    seedInt,\r\n    i = 0,\r\n    nanDirection = 1;\r\n\r\n  if (\r\n    ( !reverse && ( haystack[ 0 ] > target || haystack[ seedB ] < target ) ) ||\r\n    ( reverse && ( haystack[ 0 ] < target || haystack[ seedB ] > target ) )\r\n  ) {\r\n    throw new Error( `Target ${target} is not in the stack` );\r\n  }\r\n\r\n  if ( haystack[ seedA ] == target ) {\r\n    return seedA;\r\n  }\r\n\r\n  if ( haystack[ seedB ] == target ) {\r\n    return seedB;\r\n  }\r\n\r\n  while ( true ) {\r\n    i++;\r\n    if ( i > 1000 ) {\r\n      throw new Error( 'Error loop' );\r\n    }\r\n\r\n    seedInt = Math.floor( ( seedA + seedB ) / 2 );\r\n\r\n    //  seedInt -= seedInt % 2; // Always looks for an x.\r\n\r\n    while ( isNaN( haystack[ seedInt ] ) ) {\r\n      if ( seedInt >= haystack.length - 1 ) {\r\n        return haystack.length - 1;\r\n      } else if ( seedInt <= 0 ) {\r\n        return 0;\r\n      }\r\n\r\n      seedInt += nanDirection;\r\n    }\r\n\r\n    if ( haystack[ seedInt ] == target ) {\r\n      return seedInt;\r\n    }\r\n\r\n    if ( seedInt == seedA || seedInt == seedB ) {\r\n      if ( !fineCheck ) {\r\n        return seedInt;\r\n      }\r\n\r\n      if (\r\n        Math.abs( target - haystack[ seedA ] ) < Math.abs( target - haystack[ seedB ] )\r\n      ) {\r\n        return seedA;\r\n      }\r\n\r\n      return seedB;\r\n    }\r\n\r\n    //    console.log(seedA, seedB, seedInt, haystack[seedInt]);\r\n    if ( haystack[ seedInt ] < target ) {\r\n      if ( reverse ) {\r\n        seedB = seedInt;\r\n      } else {\r\n        seedA = seedInt;\r\n      }\r\n    } else if ( haystack[ seedInt ] > target ) {\r\n      if ( reverse ) {\r\n        seedA = seedInt;\r\n      } else {\r\n        seedB = seedInt;\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n\r\n    nanDirection *= -1;\r\n  }\r\n}\r\n\r\n// Stores key: value\r\nclass WaveformHash extends Waveform {\r\n  hasXWaveform() {\r\n    return false;\r\n  }\r\n\r\n  setXWaveform( data ) {\r\n    this.xdata = data;\r\n  }\r\n\r\n  getYFromX( xValue ) {\r\n    const index = this.xdata.indexOf( xValue );\r\n    if ( index == -1 ) {\r\n      throw `Cannot find key ${xValue}`;\r\n    }\r\n\r\n    return this.data[ index ];\r\n  }\r\n\r\n  getY( index ) {\r\n    return this.data[ index ];\r\n  }\r\n\r\n  getX( index ) {\r\n    return this.xdata[ index ];\r\n  }\r\n\r\n  hasXUnit() {\r\n    return false;\r\n  }\r\n\r\n  errorNotImplemented() {\r\n    console.trace();\r\n    throw 'Not available in hash waveform';\r\n  }\r\n\r\n  subrangeX() {\r\n    this.errorNotImplemented();\r\n  }\r\n\r\n  duplicate() {\r\n    this.errorNotImplemented();\r\n  }\r\n\r\n  aggregate() {\r\n    this.errorNotImplemented();\r\n  }\r\n\r\n  _waveArithmetic() {\r\n    this.errorNotImplemented();\r\n  }\r\n\r\n  interpolateIndex_X( index ) {\r\n    this.errorNotImplemented();\r\n  }\r\n\r\n  getXMonotoneousAscending() {\r\n    this.errorNotImplemented();\r\n  }\r\n\r\n  isXMonotoneousAscending() {\r\n    this.errorNotImplemented();\r\n  }\r\n\r\n  interpolate() {\r\n    this.errorNotImplemented();\r\n  }\r\n\r\n  resampleForDisplay() {\r\n    this.errorNotImplemented();\r\n  }\r\n\r\n  isXMonotoneous() {\r\n    this.errorNotImplemented();\r\n  }\r\n\r\n  rescaleX() {\r\n    this.errorNotImplemented();\r\n  }\r\n\r\n  getXMin() {\r\n    return undefined;\r\n  }\r\n\r\n  getXMax() {\r\n    return undefined;\r\n  }\r\n\r\n  computeXMinMax() {}\r\n\r\n  setData( data ) {\r\n    this.data = Object.values( data );\r\n    this.xdata = Object.keys( data );\r\n\r\n    this._setData();\r\n  }\r\n\r\n  _setData() {\r\n    this.minY = Math.min( ...this.data );\r\n    this.maxY = Math.max( ...this.data );\r\n\r\n    this.checkMinMaxErrorBars();\r\n  }\r\n}\r\n\r\nfunction dist2( v, w ) {\r\n  return ( v.x - w.x ) ** 2 + ( v.y - w.y ) ** 2;\r\n}\r\n\r\nfunction distToSegmentSquared( p, v, w ) {\r\n  var l2 = dist2( v, w );\r\n  if ( l2 == 0 ) return dist2( p, v );\r\n  var t = ( ( p.x - v.x ) * ( w.x - v.x ) + ( p.y - v.y ) * ( w.y - v.y ) ) / l2;\r\n  t = Math.max( 0, Math.min( 1, t ) );\r\n  return dist2( p, {\r\n    x: v.x + t * ( w.x - v.x ),\r\n    y: v.y + t * ( w.y - v.y )\r\n  } );\r\n}\r\n\r\nfunction distToSegment( p, v, w ) {\r\n  return distToSegmentSquared( p, v, w ) ** 0.5;\r\n}\r\n\r\nexport {\r\n  Waveform,\r\n  WaveformHash\r\n};","import GraphPosition from './graph.position.js';\r\nimport * as util from './graph.util.js';\r\nimport EventEmitter from './dependencies/eventEmitter/EventEmitter.js';\r\nimport graphFromJson from './renderer/main.js';\r\nimport {\r\n  Waveform,\r\n  WaveformHash\r\n} from './util/waveform.js';\r\n\r\n/**\r\n * Default graph parameters\r\n * @name Graph~GraphOptionsDefault\r\n * @name GraphOptions\r\n * @object\r\n * @static\r\n * @memberof Graph\r\n * @prop {String} title - Title of the graph\r\n * @prop {Number} paddingTop - The top padding\r\n * @prop {Number} paddingLeft - The left padding\r\n * @prop {Number} paddingRight - The right padding\r\n * @prop {Number} paddingBottom - The bottom padding\r\n * @prop {(Number|Boolean)} padding - A common padding value for top, bottom, left and right\r\n * @prop {Number} fontSize - The basic text size of the graphs\r\n * @prop {Number} fontFamily - The basic font family. Should be installed on the computer of the user\r\n * @prop {Object.<String,Object>} plugins - A list of plugins to import with their options\r\n * @prop {Object.<String,Object>} pluginAction - The default key combination to access those actions\r\n * @prop {Object.<String,Object>} mouseActions - Alias of pluginActions\r\n * @prop {Object.<String,Object>} keyActions - Defines what happens when keys are pressed\r\n * @prop {Object} wheel - Define the mouse wheel action\r\n * @prop {Object} dblclick - Define the double click action\r\n * @prop {Boolean} shapesUniqueSelection - true to allow only one shape to be selected at the time\r\n * @prop {Boolean} shapesUnselectOnClick - true to unselect all shapes on click\r\n */\r\nconst GraphOptionsDefault = {\r\n  title: '',\r\n\r\n  paddingTop: 30,\r\n  paddingBottom: 5,\r\n  paddingLeft: 20,\r\n  paddingRight: 20,\r\n\r\n  close: {\r\n    left: true,\r\n    right: true,\r\n    top: true,\r\n    bottom: true\r\n  },\r\n\r\n  closeColor: 'black',\r\n\r\n  fontSize: 12,\r\n  fontFamily: 'Myriad Pro, Helvetica, Arial',\r\n\r\n  plugins: {},\r\n  pluginAction: {},\r\n  mouseActions: [],\r\n  keyActions: [],\r\n  wheel: {},\r\n  dblclick: {},\r\n\r\n  shapesUnselectOnClick: true,\r\n  shapesUniqueSelection: true\r\n};\r\n\r\nvar _constructors = new Map();\r\n\r\n/**\r\n * Entry class of jsGraph that creates a new graph.\r\n * @extends EventEmitter\r\n * @tutorial basic\r\n */\r\nclass Graph extends EventEmitter {\r\n  /**\r\n   * Graph constructor\r\n   * @param {(HTMLElement|String)} [wrapper ] - The DOM Wrapper element its ```id``` property. If you do not use the wrapper during the graph creation, use it with the @link{Graph.setWrapper} method\r\n   * @param {GraphOptions} [ options ] - The options of the graph\r\n   * @param {Object} [ axis ] - The list of axes\r\n   * @param {Array} axis.left - The list of left axes\r\n   * @param {Array} axis.bottom - The list of bottom axes\r\n   * @param {Array} axis.top - The list of top axes\r\n   * @param {Array} axis.right - The list of right axes\r\n   * @example var graph = new Graph(\"someDomID\");\r\n   * @example var graph = new Graph(\"someOtherDomID\", { title: 'Graph title', paddingRight: 100 } );\r\n   */\r\n  constructor( wrapper, options, axis ) {\r\n    super();\r\n\r\n    /*\r\n      The unique ID of the graph\r\n      @name Graph#uniqueid\r\n      @type String\r\n    */\r\n    this._creation = util.guid();\r\n    this._drawn = false;\r\n\r\n    /**\r\n     * @object\r\n     * @memberof Graph\r\n     * @name Graph#options\r\n     * @type GraphOptions\r\n     * @default {@link GraphOptionsDefault}\r\n     * Access directly the options of the graph using this public object.\r\n     * @example graph.options.mouseActions.push( {  } );\r\n     */\r\n    this.options = util.extend( {}, GraphOptionsDefault, options );\r\n    // Options declaration must be placed before the doDom operation\r\n\r\n    // doDom is a private method. We bind it to this thanks to ES6 features\r\n    doDom.bind( this )();\r\n\r\n    if ( wrapper ) {\r\n      this.setWrapper( wrapper );\r\n    }\r\n\r\n    this.prevented = false;\r\n\r\n    this.axis = {\r\n      left: [],\r\n      top: [],\r\n      bottom: [],\r\n      right: []\r\n    };\r\n\r\n    this.shapes = [];\r\n    this.shapesLocked = false;\r\n    this.plugins = {};\r\n\r\n    for ( var i in this.options.pluginAction ) {\r\n      this.options.pluginAction.plugin = i;\r\n      this.options.mouseActions.push( this.options.pluginAction );\r\n    }\r\n\r\n    this.selectedShapes = [];\r\n\r\n    this.series = [];\r\n    //this._dom = wrapper;\r\n    this._axesHaveChanged = true;\r\n\r\n    if (\r\n      this.options.hasOwnProperty( 'padding' ) &&\r\n      util.isNumeric( this.options.padding )\r\n    ) {\r\n      this.options.paddingTop = this.options.paddingBottom = this.options.paddingLeft = this.options.paddingRight = this.options.padding;\r\n    }\r\n\r\n    this.currentAction = false;\r\n\r\n    this.ns = Graph.ns;\r\n    this.nsxlink = Graph.nsxlink;\r\n\r\n    // Load all axes\r\n    if ( axis ) {\r\n      for ( var i in axis ) {\r\n        for ( var j = 0, l = axis[ i ].length; j < l; j++ ) {\r\n          switch ( i ) {\r\n            case 'top':\r\n              this.getTopAxis( j, axis[ i ][ j ] );\r\n              break;\r\n            case 'left':\r\n              this.getLeftAxis( j, axis[ i ][ j ] );\r\n              break;\r\n            case 'right':\r\n              this.getRightAxis( j, axis[ i ][ j ] );\r\n              break;\r\n            case 'bottom':\r\n              this.getBottomAxis( j, axis[ i ][ j ] );\r\n              break;\r\n\r\n            default:\r\n              // Do not do anything\r\n              break;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    this._pluginsInit();\r\n  }\r\n\r\n  setWrapper( wrapper ) {\r\n    if ( wrapper === Object( wrapper ) && !( wrapper instanceof HTMLElement ) ) {\r\n      // Wrapper is options\r\n      axis = options;\r\n      options = wrapper;\r\n      wrapper = null;\r\n    } else if ( typeof wrapper == 'string' ) {\r\n      wrapper = document.getElementById( wrapper );\r\n    } else if ( typeof wrapper.length == 'number' ) {\r\n      wrapper = wrapper[ 0 ];\r\n    }\r\n\r\n    if ( !wrapper ) {\r\n      throw new Error( 'The wrapper DOM element was not found.' );\r\n    }\r\n\r\n    if ( !wrapper.appendChild ) {\r\n      throw new Error( 'The wrapper appears to be an invalid HTMLElement' );\r\n    }\r\n\r\n    wrapper.style[ '-webkit-user-select' ] = 'none';\r\n    wrapper.style[ '-moz-user-select' ] = 'none';\r\n    wrapper.style[ '-o-user-select' ] = 'none';\r\n    wrapper.style[ '-ms-user-select' ] = 'none';\r\n    wrapper.style[ 'user-select' ] = 'none';\r\n\r\n    wrapper.style.position = 'relative';\r\n    wrapper.style.outline = 'none';\r\n\r\n    // Why would that be necessary ?\r\n    // wrapper.setAttribute( 'tabindex', 1 );\r\n\r\n    this.wrapper = wrapper;\r\n\r\n    // DOM\r\n\r\n    if ( !this.height || !this.width ) {\r\n      var wrapperStyle = getComputedStyle( wrapper );\r\n      var w = parseInt( wrapperStyle.width, 10 );\r\n      var h = parseInt( wrapperStyle.height, 10 );\r\n      this.setSize( w, h );\r\n      this._resize();\r\n    }\r\n\r\n    wrapper.appendChild( this.dom );\r\n\r\n    _registerEvents( this );\r\n  }\r\n  /**\r\n   * Returns the graph SVG wrapper element\r\n   * @public\r\n   * @return {SVGElement} The DOM element wrapping the graph\r\n   */\r\n  getDom() {\r\n    return this.dom;\r\n  }\r\n\r\n  /**\r\n   * Returns the unique id representing the graph\r\n   * @public\r\n   * @return {String} The unique ID of the graph\r\n   */\r\n  getId() {\r\n    return this._creation;\r\n  }\r\n\r\n  /**\r\n   * Returns the graph wrapper element passed during the graph creation\r\n   * @public\r\n   * @return {HTMLElement} The DOM element wrapping the graph\r\n   */\r\n  getWrapper() {\r\n    return this.wrapper;\r\n  }\r\n\r\n  /**\r\n   * Sets an option of the graph\r\n   * @param {String} name - Option name\r\n   * @param value - New option value\r\n   * @returns {Graph} - Graph instance\r\n   */\r\n  setOption( name, val ) {\r\n    this.options[ name ] = val;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   *  Sets the title of the graph\r\n   */\r\n  setTitle( title ) {\r\n    this.options.title = title;\r\n    this.domTitle.textContent = title;\r\n  }\r\n\r\n  setTitleFontSize( fontSize ) {\r\n    this.domTitle.setAttribute( 'font-size', fontSize );\r\n  }\r\n\r\n  setTitleFontColor( fontColor ) {\r\n    this.domTitle.setAttribute( 'fill', fontColor );\r\n  }\r\n\r\n  setTitleFontFamily( fontColor ) {\r\n    this.domTitle.setAttribute( 'font-family', fontColor );\r\n  }\r\n\r\n  /**\r\n   *  Shows the title of the graph\r\n   */\r\n  displayTitle() {\r\n    this.domTitle.setAttribute( 'display', 'inline' );\r\n  }\r\n\r\n  /**\r\n   *  Hides the title of the graph\r\n   */\r\n  hideTitle() {\r\n    this.domTitle.setAttribute( 'display', 'none' );\r\n  }\r\n\r\n  hide() {\r\n    if ( this.dom.style.display !== 'none' ) {\r\n      this.dom.style.display = 'none';\r\n    }\r\n  }\r\n\r\n  show() {\r\n    if ( this.dom.style.display == 'none' ) {\r\n      this.dom.style.display = 'initial';\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Calls a repaint of the container. Used internally when zooming on the graph, or when <code>.autoscaleAxes()</code> is called (see {@link Graph#autoscaleAxes}).<br />\r\n   * To be called after axes min/max are expected to have changed (e.g. after an <code>axis.zoom( from, to )</code>) has been called\r\n   * @param {Boolean} onlyIfAxesHaveChanged - Triggers a redraw only if min/max values of the axes have changed.\r\n   * @return {Boolean} if the redraw has been successful\r\n   */\r\n  redraw( onlyIfAxesHaveChanged, force ) {\r\n    if ( !this.width || !this.height ) {\r\n      return;\r\n    }\r\n\r\n    if ( !this.sizeSet ) {\r\n      this._resize();\r\n      this.executeRedrawSlaves();\r\n      return true;\r\n    } else {\r\n      if (\r\n        !onlyIfAxesHaveChanged ||\r\n        force ||\r\n        haveAxesChanged( this ) ||\r\n        hasSizeChanged( this )\r\n      ) {\r\n        this.executeRedrawSlaves();\r\n        refreshDrawingZone( this );\r\n        return true;\r\n      }\r\n    }\r\n\r\n    this.executeRedrawSlaves( true );\r\n    return false;\r\n  }\r\n\r\n  executeRedrawSlaves() {\r\n    this._pluginsExecute( 'preDraw' );\r\n  }\r\n\r\n  /**\r\n   * Draw the graph and the series. This method will only redraw what is necessary. You may trust its use when you have set new data to series, changed serie styles or called for a zoom on an axis.\r\n   */\r\n  draw( force ) {\r\n    this.drawn = true;\r\n    this.updateLegend( true );\r\n    this.drawSeries( this.redraw( true, force ) );\r\n\r\n    this._pluginsExecute( 'postDraw' );\r\n  }\r\n\r\n  /**\r\n   *  Prevents the graph, the series and the legend from redrawing automatically. Valid until {@link Graph#resumeUpdate} is called\r\n   *  @memberof Graph\r\n   *  @return {Graph} The current graph instance\r\n   *  @see {@link Graph#resumeUpdate}\r\n   *  @see {@link Graph#doUpdate}\r\n   *  @since 1.16.19\r\n   */\r\n  delayUpdate() {\r\n    this._lockUpdate = true;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   *  Forces legend and graph update, even is {@link Graph#delayUpdate} has been called before.\r\n   *  @memberof Graph\r\n   *  @return {Graph} The current graph instance\r\n   *  @see {@link Graph#delayUpdate}\r\n   *  @see {@link Graph#resumeUpdate}\r\n   *  @since 1.16.19\r\n   */\r\n  doUpdate() {\r\n    if ( this.legend ) {\r\n      this.legend.update();\r\n    }\r\n    this.draw();\r\n    if ( this.legend ) {\r\n      this.legend.update();\r\n    }\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   *  Cancels the effect of {@link Graph#delayUpdate}, but does not redraw the graph automatically\r\n   *  @memberof Graph\r\n   *  @return {Graph} The current graph instance\r\n   *  @see {@link Graph#delayUpdate}\r\n   *  @see {@link Graph#doUpdate}\r\n   *  @since 1.16.19\r\n   */\r\n  resumeUpdate() {\r\n    this._lockUpdate = false;\r\n    return this;\r\n  }\r\n\r\n  isDelayedUpdate() {\r\n    return this._lockUpdate;\r\n  }\r\n\r\n  /**\r\n   * Sets the total width of the graph\r\n   * @param {Number} width - The new width of the graph\r\n   * @param {Boolean} skipResize - <code>true</code> to defer graph repaint. Use {@link Graph#resize} to force repain later on. (Useful if many graph sizing operations are done successively)\r\n   * @see Graph#setHeight\r\n   * @see Graph#resize\r\n   */\r\n  setWidth( width, skipResize ) {\r\n    this.width = width;\r\n    if ( !skipResize ) {\r\n      this._resize();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Sets the total height of the graph\r\n   * @param {Number} height - The new height of the graph\r\n   * @param {Boolean} skipResize - <code>true</code> to defer graph repaint. Use {@link Graph#resize} to force repain later on. (Useful if many graph sizing operations are done successively)\r\n   * @see Graph#setWidth\r\n   * @see Graph#resize\r\n   */\r\n  setHeight( height, skipResize ) {\r\n    this.height = height;\r\n    if ( !skipResize ) {\r\n      this._resize();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Sets the new dimension of the graph and repaints it. If width and height are omitted, a simple refresh is done.\r\n   * @param {Number} [ width ] - The new width of the graph\r\n   * @param {Number} [ height ] - The new height of the graph\r\n   * @see Graph#setWidth\r\n   * @see Graph#setHeight\r\n   * @return {Graph} The current graph\r\n   */\r\n  resize( w, h ) {\r\n    if ( w && h ) {\r\n      this.setSize( w, h );\r\n    }\r\n\r\n    this._resize();\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Sets the new dimension of the graph without repainting it. Use {@link Graph#resize} to perform the actual resizing of the graph.\r\n   * @param {Number} [ width ] - The new width of the graph\r\n   * @param {Number} [ height ] - The new height of the graph\r\n   * @see Graph#setWidth\r\n   * @see Graph#setHeight\r\n   * @see Graph#resize\r\n   */\r\n  setSize( w, h ) {\r\n    this.setWidth( w, true );\r\n    this.setHeight( h, true );\r\n    this.getDrawingHeight();\r\n    this.getDrawingWidth();\r\n  }\r\n\r\n  /**\r\n   * Returns the width of the graph (set by setSize, setWidth or resize methods)\r\n   * @return {Number} Width of the graph\r\n   */\r\n  getWidth() {\r\n    return this.width;\r\n  }\r\n\r\n  /**\r\n   * Returns the height of the graph (set by setSize, setHeight or resize methods)\r\n   * @return {Number} Height of the graph\r\n   */\r\n  getHeight() {\r\n    return this.height;\r\n  }\r\n\r\n  /**\r\n   * Returns the top padding of the graph (space between the top of the svg container and the topmost axis)\r\n   * @return {Number} paddingTop\r\n   */\r\n  getPaddingTop() {\r\n    return this.options.paddingTop;\r\n  }\r\n\r\n  /**\r\n   * Returns the left padding of the graph (space between the left of the svg container and the leftmost axis)\r\n   * @return {Number} paddingTop\r\n   */\r\n  getPaddingLeft() {\r\n    return this.options.paddingLeft;\r\n  }\r\n\r\n  /**\r\n   * Returns the bottom padding of the graph (space between the bottom of the svg container and the bottommost axis)\r\n   * @return {Number} paddingTop\r\n   */\r\n  getPaddingBottom() {\r\n    return this.options.paddingBottom;\r\n  }\r\n\r\n  /**\r\n   * Returns the right padding of the graph (space between the right of the svg container and the rightmost axis)\r\n   * @return {Number} paddingRight\r\n   */\r\n  getPaddingRight() {\r\n    return this.options.paddingRight;\r\n  }\r\n\r\n  /**\r\n   * Returns the height of the drawable zone, including the space used by the axes\r\n   * @param {Boolean} useCache - Use cached value. Useful if one is sure the graph hasn't changed dimension. Automatically called after a Graph.resize();\r\n   * @returns {Number} Height of the graph\r\n   */\r\n  getDrawingHeight( useCache ) {\r\n    if ( useCache && this.innerHeight ) {\r\n      return this.innerHeight;\r\n    }\r\n    return ( this.innerHeight =\r\n      this.height - this.options.paddingTop - this.options.paddingBottom );\r\n  }\r\n\r\n  /**\r\n   * Returns the width of the drawable zone, including the space used by the axes\r\n   * @param {Boolean} useCache - Use cached value. Useful if one is sure the graph hasn't changed dimension. Automatically called after a Graph.resize();\r\n   * @returns {Number} Width of the graph\r\n   */\r\n  getDrawingWidth( useCache ) {\r\n    if ( useCache && this.innerWidth ) {\r\n      return this.innerWidth;\r\n    }\r\n    return ( this.innerWidth =\r\n      this.width - this.options.paddingLeft - this.options.paddingRight );\r\n  }\r\n\r\n  /**\r\n   * Caches the wrapper offset in the page.<br />\r\n   * The position of the wrapper is used when processing most of mouse events and it is fetched via the jQuery function .offset().\r\n   * If performance becomes a critical issue in your application, <code>cacheOffset()</code> should be used to store the offset position. It should be ensured that the graph doesn't move in the page. If one can know when the graph has moved, <code>cacheOffset()</code> should be called again to update the offset position.\r\n   * @see Graph#uncacheOffset\r\n   */\r\n  cacheOffset() {\r\n    this.offsetCached = util.getOffset( this.wrapper );\r\n  }\r\n\r\n  /**\r\n   * Un-caches the wrapper offset value\r\n   * @see Graph#cacheOffset\r\n   */\r\n  uncacheOffset() {\r\n    this.offsetCached = false;\r\n  }\r\n\r\n  getNumAxes( position ) {\r\n    return this.axis[ position ].length;\r\n  }\r\n\r\n  /**\r\n   * Returns the x axis at a certain index. If any top axis exists and no bottom axis exists, returns or creates a top axis. Otherwise, creates or returns a bottom axis\r\n   * Caution ! The <code>options</code> parameter will only be effective if an axis is created\r\n   * @param {Number} [ index=0 ] - The index of the axis\r\n   * @param {Object} [ options={} ] - The options to pass to the axis constructor\r\n   */\r\n  getXAxis( index, options ) {\r\n    if ( this.axis.top.length > 0 && this.axis.bottom.length == 0 ) {\r\n      return this.getTopAxis( index, options );\r\n    }\r\n\r\n    return this.getBottomAxis( index, options );\r\n  }\r\n\r\n  /**\r\n   * Returns the y axis at a certain index. If any right axis exists and no left axis exists, returns or creates a right axis. Otherwise, creates or returns a left axis\r\n   * Caution ! The <code>options</code> parameter will only be effective if an axis is created\r\n   * @param {Number} [ index=0 ] - The index of the axis\r\n   * @param {Object} [ options={} ] - The options to pass to the axis constructor\r\n   */\r\n  getYAxis( index, options ) {\r\n    if ( this.axis.right.length > 0 && this.axis.left.length == 0 ) {\r\n      return this.getRightAxis( index, options );\r\n    }\r\n\r\n    return this.getLeftAxis( index, options );\r\n  }\r\n\r\n  /**\r\n   * Returns the top axis at a certain index. Creates it if non-existant\r\n   * @param {Number} [ index=0 ] - The index of the axis\r\n   * @param {Object} [ options={} ] - The options to pass to the axis constructor\r\n   */\r\n  getTopAxis( index, options ) {\r\n    return _getAxis( this, index, options, 'top' );\r\n  }\r\n\r\n  /**\r\n   * Returns the bottom axis at a certain index. Creates it if non-existant\r\n   * @param {Number} [ index=0 ] - The index of the axis\r\n   * @param {Object} [ options={} ] - The options to pass to the axis constructor\r\n   */\r\n  getBottomAxis( index, options ) {\r\n    return _getAxis( this, index, options, 'bottom' );\r\n  }\r\n\r\n  /**\r\n   * Returns the left axis at a certain index. Creates it if non-existant\r\n   * @param {Number} [ index=0 ] - The index of the axis\r\n   * @param {Object} [ options={} ] - The options to pass to the axis constructor\r\n   */\r\n  getLeftAxis( index, options ) {\r\n    return _getAxis( this, index, options, 'left' );\r\n  }\r\n\r\n  /**\r\n   * Returns the right axis at a certain index. Creates it if non-existant\r\n   * @param {Number} [ index=0 ] - The index of the axis\r\n   * @param {Object} [ options={} ] - The options to pass to the axis constructor\r\n   */\r\n  getRightAxis( index, options ) {\r\n    return _getAxis( this, index, options, 'right' );\r\n  }\r\n\r\n  /**\r\n   * Sets a bottom axis\r\n   * @param {Axis} axis - The axis instance to set\r\n   * @param {Number} [ index=0 ] - The index of the axis\r\n   */\r\n  setXAxis( axis, index ) {\r\n    this.setBottomAxis( axis, index );\r\n  }\r\n\r\n  /**\r\n   * Sets a left axis\r\n   * @param {Axis} axis - The axis instance to set\r\n   * @param {Number} [ index=0 ] - The index of the axis\r\n   */\r\n  setYAxis( axis, index ) {\r\n    this.setLeftAxis( axis, index );\r\n  }\r\n\r\n  /**\r\n   * Sets a left axis\r\n   * @param {Axis} axis - The axis instance to set\r\n   * @param {Number} [ index=0 ] - The index of the axis\r\n   * @see Graph#setBottomAxis\r\n   * @see Graph#setTopAxis\r\n   * @see Graph#setRightAxis\r\n   * @see Graph#getLeftAxis\r\n   * @see Graph#getYAxis\r\n   */\r\n  setLeftAxis( axis, index ) {\r\n    index = index || 0;\r\n\r\n    if ( this.axis.left[ index ] ) {\r\n      this.axis.left[ index ].kill();\r\n    }\r\n    this.axis.left[ index ] = axis;\r\n  }\r\n\r\n  /**\r\n   * Sets a right axis\r\n   * @param {Axis} axis - The axis instance to set\r\n   * @param {Number} [ index=0 ] - The index of the axis\r\n   * @see Graph#setBottomAxis\r\n   * @see Graph#setLeftAxis\r\n   * @see Graph#setTopAxis\r\n   * @see Graph#getRightAxis\r\n   * @see Graph#getYAxis\r\n   */\r\n  setRightAxis( axis, index ) {\r\n    index = index || 0;\r\n\r\n    if ( this.axis.right[ index ] ) {\r\n      this.axis.right[ index ].kill();\r\n    }\r\n    this.axis.right[ index ] = axis;\r\n  }\r\n\r\n  /**\r\n   * Sets a top axis\r\n   * @param {Axis} axis - The axis instance to set\r\n   * @param {Number} [ index=0 ] - The index of the axis\r\n   * @see Graph#setBottomAxis\r\n   * @see Graph#setLeftAxis\r\n   * @see Graph#setRightAxis\r\n   * @see Graph#getBottomAxis\r\n   * @see Graph#getXAxis\r\n   */\r\n  setTopAxis( axis, index ) {\r\n    index = index || 0;\r\n\r\n    if ( this.axis.top[ index ] ) {\r\n      this.axis.top[ index ].kill();\r\n    }\r\n    this.axis.top[ index ] = axis;\r\n  }\r\n\r\n  /**\r\n   * Sets a bottom axis\r\n   * @param {Axis} axis - The axis instance to set\r\n   * @param {Number} [ index=0 ] - The index of the axis\r\n   * @see Graph#setTopAxis\r\n   * @see Graph#setLeftAxis\r\n   * @see Graph#setRightAxis\r\n   * @see Graph#getTopAxis\r\n   * @see Graph#getXAxis\r\n   */\r\n  setBottomAxis( axis, index ) {\r\n    index = index || 0;\r\n\r\n    if ( this.axis.bottom[ index ] ) {\r\n      this.axis.bottom[ index ].kill();\r\n    }\r\n    this.axis.bottom[ index ] = axis;\r\n  }\r\n\r\n  killAxis( axis, noRedraw = false, noSerieKill = false ) {\r\n    var index;\r\n\r\n    if ( axis.isX() ) {\r\n      if ( ( index = this.axis.bottom.indexOf( axis ) ) > -1 ) {\r\n        this.axis.bottom.splice( index, 1 );\r\n      }\r\n\r\n      if ( ( index = this.axis.top.indexOf( axis ) ) > -1 ) {\r\n        this.axis.top.splice( index, 1 );\r\n      }\r\n\r\n      if ( !noSerieKill ) {\r\n        this.series.forEach( ( serie ) => {\r\n          if ( serie.getXAxis() == axis ) {\r\n            serie.kill();\r\n          }\r\n        } );\r\n      }\r\n    }\r\n\r\n    if ( axis.isY() ) {\r\n      if ( ( index = this.axis.left.indexOf( axis ) ) > -1 ) {\r\n        this.axis.left.splice( index, 1 );\r\n      }\r\n\r\n      if ( ( index = this.axis.right.indexOf( axis ) ) > -1 ) {\r\n        this.axis.right.splice( index, 1 );\r\n      }\r\n\r\n      if ( !noSerieKill ) {\r\n        this.series.forEach( ( serie ) => {\r\n          if ( serie.getYAxis() == axis ) {\r\n            serie.kill();\r\n          }\r\n        } );\r\n      }\r\n    }\r\n\r\n    this.axisGroup.removeChild( axis.group ); // Removes all DOM\r\n    this.groupPrimaryGrids.removeChild( axis.gridPrimary );\r\n    this.groupSecondaryGrids.removeChild( axis.gridSecondary );\r\n\r\n    if ( !noRedraw ) {\r\n      this.draw( true );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Determines if an x axis belongs to the graph\r\n   * @param {Axis} axis - The axis instance to check\r\n   */\r\n  hasXAxis( axis ) {\r\n    return this.hasTopAxis( axis ) || this.hasBottomAxis( axis );\r\n  }\r\n\r\n  /**\r\n   * Determines if an x axis belongs to the graph\r\n   * @param {Axis} axis - The axis instance to check\r\n   */\r\n  hasYAxis( axis ) {\r\n    return this.hasLeftAxis( axis ) || this.hasRightAxis( axis );\r\n  }\r\n\r\n  /**\r\n   * Determines if an x axis belongs to top axes list of the graph\r\n   * @param {Axis} axis - The axis instance to check\r\n   */\r\n  hasTopAxis( axis ) {\r\n    return this.hasAxis( axis, this.axis.top );\r\n  }\r\n\r\n  /**\r\n   * Determines if an x axis belongs to bottom axes list of the graph\r\n   * @param {Axis} axis - The axis instance to check\r\n   */\r\n  hasBottomAxis( axis ) {\r\n    return this.hasAxis( axis, this.axis.bottom );\r\n  }\r\n\r\n  /**\r\n   * Determines if a y axis belongs to left axes list of the graph\r\n   * @param {Axis} axis - The axis instance to check\r\n   */\r\n  hasLeftAxis( axis ) {\r\n    return this.hasAxis( axis, this.axis.left );\r\n  }\r\n\r\n  /**\r\n   * Determines if a y axis belongs to right axes list of the graph\r\n   * @param {Axis} axis - The axis instance to check\r\n   */\r\n  hasRightAxis( axis ) {\r\n    return this.hasAxis( axis, this.axis.right );\r\n  }\r\n\r\n  /**\r\n   * Determines if an axis belongs to a list of axes\r\n   * @param {Axis} axis - The axis instance to check\r\n   * @param {Array} axisList - The list of axes to check\r\n   * @private\r\n   */\r\n  hasAxis( axis, axisList ) {\r\n    for ( var i = 0, l = axisList.length; i < l; i++ ) {\r\n      if ( axisList[ i ] == axis ) {\r\n        return true;\r\n      }\r\n\r\n      if ( axisList[ i ].hasAxis( axis ) ) {\r\n        return true;\r\n      }\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Autoscales the x and y axes of the graph.\r\n   * Does not repaint the canvas\r\n   * @return {Graph} The current graph instance\r\n   */\r\n  autoscaleAxes() {\r\n    this._applyToAxes( 'setMinMaxToFitSeries', null, true, true );\r\n\r\n    //this._applyToAxes( \"scaleToFitAxis\", [ this.getYAxis() ], false, true )\r\n    // X is not always ascending...\r\n    return this;\r\n  }\r\n\r\n  // See #138\r\n  /**\r\n   *  @alias Graph#autoscaleAxes\r\n   */\r\n  autoscale() {\r\n    return this.autoscaleAxes( ...arguments );\r\n  }\r\n\r\n  // See #138\r\n  /**\r\n   *  @alias Graph#autoscaleAxes\r\n   */\r\n  autoScale() {\r\n    return this.autoscaleAxes( ...arguments );\r\n  }\r\n\r\n  // See #138\r\n  /**\r\n   *  @alias Graph#autoscaleAxes\r\n   */\r\n  autoScaleAxes() {\r\n    return this.autoscaleAxes( ...arguments );\r\n  }\r\n\r\n  // See #138\r\n  /**\r\n   *  Autoscales a particular axis\r\n   *  @param {Axis} The axis to rescale\r\n   *  @return {Graph} The current graph instance\r\n   */\r\n  autoScaleAxis( axis ) {\r\n    if ( !axis ) {\r\n      return this;\r\n    }\r\n\r\n    axis.setMinMaxToFitSeries();\r\n    return this;\r\n  }\r\n\r\n  gridsOff() {\r\n    this._applyToAxes(\r\n      ( axis ) => {\r\n        axis.gridsOff();\r\n      },\r\n      undefined,\r\n      true,\r\n      true\r\n    );\r\n  }\r\n  gridsOn() {\r\n    this._applyToAxes(\r\n      ( axis ) => {\r\n        axis.gridsOn();\r\n      },\r\n      undefined,\r\n      true,\r\n      true\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Sets the background color\r\n   * @param {String} color - An SVG accepted color for the background\r\n   * @return {Graph} The current graph instance\r\n   */\r\n  setBackgroundColor( color ) {\r\n    this.rectEvent.setAttribute( 'fill', color );\r\n    return this;\r\n  }\r\n\r\n  getAxisState() {\r\n    var state = {};\r\n    for ( var i in this.axis ) {\r\n      state[ i ] = this.axis[ i ].map( function( axis ) {\r\n        return [ axis.getCurrentMin(), axis.getCurrentMax() ];\r\n      } );\r\n    }\r\n    return state;\r\n  }\r\n\r\n  setAxisState( state ) {\r\n    var j, l;\r\n    for ( var i in state ) {\r\n      if ( !this.axis[ i ] ) {\r\n        continue;\r\n      }\r\n\r\n      for ( j = 0, l = state[ i ].length; j < l; j++ ) {\r\n        if ( !this.axis[ i ][ j ] ) {\r\n          continue;\r\n        }\r\n\r\n        this.axis[ i ][ j ].setCurrentMin( state[ i ][ j ][ 0 ] );\r\n        this.axis[ i ][ j ].setCurrentMax( state[ i ][ j ][ 1 ] );\r\n      }\r\n    }\r\n\r\n    this.draw();\r\n  }\r\n\r\n  saveAxisState( savedName ) {\r\n    this.savedAxisState = this.savedAxisState || {};\r\n    this.savedAxisState[ savedName ] = this.getAxisState();\r\n    return this;\r\n  }\r\n\r\n  recallAxisState( savedName ) {\r\n    if ( this.savedAxisState[ savedName ] ) {\r\n      this.recallAxisState( this.savedAxisState[ savedName ] );\r\n    }\r\n    return this;\r\n  }\r\n\r\n  _applyToAxis( type ) {\r\n    switch ( type ) {\r\n      case 'string':\r\n        return function( type, func, params ) {\r\n          //    params.splice(1, 0, type);\r\n\r\n          for ( var i = 0; i < this.axis[ type ].length; i++ ) {\r\n            this.axis[ type ][ i ][ func ].apply( this.axis[ type ][ i ], params );\r\n          }\r\n        };\r\n\r\n      case 'function':\r\n        return function( type, func, params ) {\r\n          for ( var i = 0; i < this.axis[ type ].length; i++ ) {\r\n            func.call( this, this.axis[ type ][ i ], type, params );\r\n          }\r\n        };\r\n\r\n      default:\r\n        throw new Error(\r\n          'You must either execute a function or provide a string that registers a function'\r\n        );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Calculates the minimal or maximal value of the axis. Currently, alias of getBoudaryAxisFromSeries\r\n   */\r\n  getBoundaryAxis( axis, minmax, usingZValues ) {\r\n    var valSeries = this.getBoundaryAxisFromSeries( axis, minmax, usingZValues );\r\n    //  var valShapes = this.getBoundaryAxisFromShapes( axis, xy, minmax );\r\n\r\n    return valSeries;\r\n    //return Math[ minmax ]( valSeries, valShapes );\r\n  }\r\n\r\n  /**\r\n   * Calculates the minimal or maximal value of the axis, based on the series that belong to it. The value is computed so that all series just fit in the value.\r\n   * @memberof Graph.prototype\r\n   * @param {Axis} axis - The axis for which the value should be computed\r\n   * @param {minmax} minmax - The minimum or maximum to look for. \"min\" for the minimum, anything else for the maximum\r\n   * @returns {Number} The minimimum or maximum of the axis based on its series\r\n   */\r\n  getBoundaryAxisFromSeries( axis, minmax, usingZValues ) {\r\n    var min = minmax == 'min',\r\n      val,\r\n      func = axis.isX() ? [ 'getMinX', 'getMaxX' ] : [ 'getMinY', 'getMaxY' ],\r\n      func2use = func[ min ? 0 : 1 ],\r\n      infinity2use = min ? +Infinity : -Infinity,\r\n      serie,\r\n      series,\r\n      serieValue,\r\n      i,\r\n      l;\r\n\r\n    val = infinity2use;\r\n    series = this.getSeriesFromAxis( axis );\r\n\r\n    for ( i = 0, l = series.length; i < l; i++ ) {\r\n      serie = series[ i ];\r\n\r\n      if ( !serie.isShown() ) {\r\n        continue;\r\n      }\r\n\r\n      serieValue = serie[ func2use ]( usingZValues );\r\n      val = Math[ minmax ](\r\n        isNaN( val ) ? infinity2use : val,\r\n        isNaN( serieValue ) ? infinity2use : serieValue\r\n      );\r\n    }\r\n\r\n    return val;\r\n  }\r\n\r\n  /**\r\n   *  Returns all the series associated to an axis\r\n   *  @param {Axis} axis - The axis to which the series belong\r\n   *  @returns {Serie[]} An array containing the list of series that belong to the axis\r\n   */\r\n  getSeriesFromAxis( axis ) {\r\n    var series = [],\r\n      i = this.series.length - 1;\r\n\r\n    for ( ; i >= 0; i-- ) {\r\n      if (\r\n        this.series[ i ].getXAxis() == axis ||\r\n        this.series[ i ].getYAxis() == axis\r\n      ) {\r\n        series.push( this.series[ i ] );\r\n      }\r\n    }\r\n\r\n    return series;\r\n  }\r\n\r\n  /**\r\n   * Determines the maximum and minimum of each axes, based on {@link Graph#getBoundaryAxis}. It is usually called internally, but if the data of series has changed, called this function to make sure that minimum / maximum of the axes are properly updated.\r\n   * @see Graph#getBoundaryAxis\r\n   */\r\n  updateDataMinMaxAxes( usingZValues ) {\r\n    var axisvars = [ 'bottom', 'top', 'left', 'right' ],\r\n      axis,\r\n      j,\r\n      l,\r\n      i;\r\n\r\n    for ( j = 0, l = axisvars.length; j < l; j++ ) {\r\n      for ( i = this.axis[ axisvars[ j ] ].length - 1; i >= 0; i-- ) {\r\n        axis = this.axis[ axisvars[ j ] ][ i ];\r\n\r\n        // 25.10.2017. Wait a second, this cannot be real. Even hidden axes must have min max values.\r\n        // The data can be displayed while the axis is hidden\r\n        // I assume this was added to cover another bug, but another approach must be chosen\r\n        if ( !axis.isShown() ) {\r\n          //          continue;\r\n        }\r\n\r\n        let min = this.getBoundaryAxis(\r\n          this.axis[ axisvars[ j ] ][ i ],\r\n          'min',\r\n          usingZValues\r\n        );\r\n        let max = this.getBoundaryAxis(\r\n          this.axis[ axisvars[ j ] ][ i ],\r\n          'max',\r\n          usingZValues\r\n        );\r\n\r\n        if ( isFinite( max ) ) {\r\n          axis.setMaxValueData( max );\r\n        }\r\n        if ( isFinite( min ) ) {\r\n          axis.setMinValueData( min );\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Function that is called from {@link Graph#_applyToAxes}\r\n   * @function\r\n   * @name AxisCallbackFunction\r\n   * @param {Axis} axis - The axis of the function\r\n   * @param {String} type - The type of the axis (left,right,top,bottom)\r\n   * @param params - The params passed in the _applyToAxis function.\r\n   * @see Graph#_applyToAxes\r\n   */\r\n\r\n  /**\r\n   * Applies a function to axes. The function will be executed once for every axis.\r\n   * If func is a string, the internal function belonging to <strong>the axis</strong> will be called, with the params array flattened out (in this case, params must be an array).\r\n   * If func is a function, the function will be called with the axis, its type and params as parameters. See {@link AxisCallbackFunction} for more details.\r\n   * @param {(AxisCallbackFunction|String)} func - The function or function name to execute\r\n   * @param params - Extra parameters to pass to the function\r\n   * @param {Boolean} topbottom=false - True to apply to function to top and bottom axes\r\n   * @param {Boolean} leftright=false - True to apply to function to left and right axes\r\n   */\r\n  _applyToAxes( func, params, tb = false, lr = false ) {\r\n    var ax = [],\r\n      i = 0,\r\n      l;\r\n\r\n    if ( tb || tb == undefined ) {\r\n      ax.push( 'top' );\r\n      ax.push( 'bottom' );\r\n    }\r\n    if ( lr || lr == undefined ) {\r\n      ax.push( 'left' );\r\n      ax.push( 'right' );\r\n    }\r\n\r\n    for ( l = ax.length; i < l; i++ ) {\r\n      this._applyToAxis( typeof func ).call( this, ax[ i ], func, params );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Axes can be dependant of one another (for instance for unit conversions)\r\n   * Finds and returns all the axes that are linked to a specific axis. Mostly used internally.\r\n   * @param {Axis} axis - The axis that links one or multiple other dependant axes\r\n   * @returns {Axis[]} The list of axes linked to the axis passed as parameter\r\n   */\r\n  findAxesLinkedTo( axis ) {\r\n    var axes = [];\r\n    this._applyToAxes(\r\n      function( a ) {\r\n        if ( a.linkedToAxis && a.linkedToAxis.axis == axis ) {\r\n          axes.push( a );\r\n        }\r\n      }, {},\r\n      axis instanceof this.getConstructor( 'graph.axis.x' ),\r\n      axis instanceof this.getConstructor( 'graph.axis.y' )\r\n    );\r\n\r\n    return axes;\r\n  }\r\n\r\n  _axisHasChanged() {\r\n    this._axesHaveChanged = true;\r\n  }\r\n\r\n  /**\r\n   * Creates a new serie.\r\n   * If the a serie with the same name exists, returns this serie with update options.\r\n   * The type of the serie is used to fetch the corresponding registered constructor registered with the name \"graph.serie.<type>\", e.g \"line\" will fetch the \"graph.serie.line\" prototype (built-in)<br />\r\n   * Built-in series types are \"line\", \"contour\", \"zone\" and \"scatter\".\r\n   * @param {String} name - The name of the serie (unique)\r\n   * @param {Object} options - The serie options\r\n   * @param {Type} type - The type of the serie.\r\n   * @returns {Serie} The newly created serie\r\n   */\r\n  newSerie( name, options, type ) {\r\n    let serie;\r\n\r\n    if ( typeof options !== 'object' && !type ) {\r\n      type = options;\r\n      options = {};\r\n    }\r\n\r\n    if ( !type ) {\r\n      type = Graph.SERIE_LINE;\r\n    }\r\n\r\n    if ( ( serie = this.getSerie( name ) ) ) {\r\n      return serie;\r\n    }\r\n\r\n    if ( !( serie = makeSerie( this, name, options, type ) ) ) {\r\n      return;\r\n    }\r\n\r\n    this.series.push( serie );\r\n\r\n    serie.postInit();\r\n    this.emit( 'newSerie', serie );\r\n    return serie;\r\n  }\r\n\r\n  /**\r\n   * Looks for an existing serie by name or by index and returns it.\r\n   * The index of the serie follows the creation sequence (0 for the first one, 1 for the second one, ...)\r\n   * @param {(String|Number)} name - The name or the index of the serie\r\n   * @returns {Serie}\r\n   */\r\n  getSerie( name ) {\r\n    if ( typeof name == 'number' ) {\r\n      return this.series[ name ] || false;\r\n    }\r\n\r\n    if ( typeof name == 'function' ) {\r\n      name = name();\r\n    }\r\n\r\n    var i = 0,\r\n      l = this.series.length;\r\n\r\n    for ( ; i < l; i++ ) {\r\n      if ( this.series[ i ].getName() == name || this.series[ i ] == name ) {\r\n        return this.series[ i ];\r\n      }\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Returns all the series\r\n   * @returns {Serie[]} An array of all the series\r\n   */\r\n  getSeries() {\r\n    return this.series;\r\n  }\r\n\r\n  /**\r\n   * Returns all the series that correspond to one or multiple types\r\n   * @param {...Symbol} type - The serie types to select\r\n   * @returns {Serie[]} An array of all the series\r\n   * @example graph.allSeries( Graph.SERIE_LINE, Graph.SERIE_ZONE );\r\n   */\r\n  allSeries( ...types ) {\r\n    return this.series.filter( ( serie ) => {\r\n      return types.include( serie.getType() );\r\n    } );\r\n  }\r\n\r\n  /**\r\n   * Sorts the series\r\n   * @param {function} method - Sorting method (arguments: serieA, serieB)\r\n   * @example graph.sortSeries( ( sA, sB ) => sA.label > sB.label ? 1 : -1 );\r\n   */\r\n  sortSeries( method ) {\r\n    if ( typeof method !== 'function' ) {\r\n      return this;\r\n    }\r\n\r\n    this.series.sort( method );\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Draws a specific serie\r\n   * @param {Serie} serie - The serie to redraw\r\n   * @param {Boolean} force - Forces redraw even if no data has changed\r\n   */\r\n  drawSerie( serie, force ) {\r\n    if ( !serie.draw ) {\r\n      throw new Error( 'Serie has no method draw' );\r\n    }\r\n\r\n    serie.draw( force );\r\n  }\r\n\r\n  /**\r\n   * Redraws all visible series\r\n   * @param {Boolean} force - Forces redraw even if no data has changed\r\n   */\r\n  drawSeries( force ) {\r\n    if ( !this.width || !this.height ) {\r\n      return;\r\n    }\r\n\r\n    var i = this.series.length - 1;\r\n    for ( ; i >= 0; i-- ) {\r\n      if ( this.series[ i ].isShown() ) {\r\n        this.drawSerie( this.series[ i ], force );\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @alias Graph#removeSeries\r\n   */\r\n  resetSeries() {\r\n    this.removeSeries();\r\n  }\r\n\r\n  /**\r\n   * @alias Graph#removeSeries\r\n   */\r\n\r\n  killSeries() {\r\n    this.resetSeries();\r\n  }\r\n\r\n  /**\r\n   * Removes all series from the graph\r\n   */\r\n  removeSeries() {\r\n    while ( this.series[ 0 ] ) {\r\n      this.series[ 0 ].kill( true );\r\n    }\r\n    this.series = [];\r\n\r\n    if ( this.legend ) {\r\n      this.legend.update();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Selects a serie. Only one serie per graph can be selected.\r\n   * @param {Serie} serie - The serie to select\r\n   * @param {String} selectName=\"selected\" - The name of the selection\r\n   */\r\n  selectSerie( serie, selectName ) {\r\n    if ( !( typeof serie == 'object' ) ) {\r\n      serie = this.getSerie( serie );\r\n    }\r\n\r\n    if (\r\n      this.selectedSerie == serie &&\r\n      this.selectedSerie.selectionType == selectName\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    if ( this.selectedSerie !== serie && this.selectedSerie ) {\r\n      this.unselectSerie( this.selectedSerie );\r\n    }\r\n\r\n    this.selectedSerie = serie;\r\n    this.triggerEvent( 'onSelectSerie', serie );\r\n\r\n    serie.select( selectName || 'selected' );\r\n  }\r\n\r\n  /**\r\n   * Returns the selected serie\r\n   * @returns {(Serie|undefined)} The selected serie\r\n   */\r\n  getSelectedSerie() {\r\n    return this.selectedSerie;\r\n  }\r\n\r\n  /**\r\n   * Unselects a serie\r\n   * @param {Serie} serie - The serie to unselect\r\n   */\r\n  unselectSerie( serie ) {\r\n    if ( !serie.unselect ) {\r\n      return;\r\n    }\r\n\r\n    serie.unselect();\r\n    this.selectedSerie = false;\r\n    this.triggerEvent( 'onUnselectSerie', serie );\r\n  }\r\n\r\n  /**\r\n   * Returns all the shapes associated to a serie. Shapes can (but don't have to) be associated to a serie. The position of the shape can then be relative to the same axes as the serie.\r\n   * @param {Serie} serie - The serie containing the shapes\r\n   * @returns {Shape[]} An array containing a list of shapes associated to the serie\r\n   */\r\n  getShapesOfSerie( serie ) {\r\n    var shapes = [];\r\n    var i = this.shapes.length - 1;\r\n\r\n    for ( ; i >= 0; i-- ) {\r\n      if ( this.shapes[ i ].getSerie() == serie ) {\r\n        shapes.push( this.shapes[ i ] );\r\n      }\r\n    }\r\n\r\n    return shapes;\r\n  }\r\n  makeToolbar( toolbarData ) {\r\n    var constructor = this.getConstructor( 'graph.toolbar' );\r\n    if ( constructor ) {\r\n      return ( this.toolbar = new constructor( this, toolbarData ) );\r\n    } else {\r\n      return util.throwError( 'No constructor exists for toolbar' );\r\n    }\r\n  }\r\n\r\n  /**\r\n   *  Returns all shapes from the graph\r\n   */\r\n  getShapes() {\r\n    return this.shapes || [];\r\n  }\r\n\r\n  /**\r\n   * Creates a new shape. jsGraph will look for the registered constructor \"graph.shape.<shapeType>\".\r\n   * @param {String} shapeType - The type of the shape\r\n   * @param {Object} [shapeData] - The options passed to the shape creator\r\n   * @param {Boolean} [mute=false] - <code>true</code> to create the shape quietly\r\n   * @param {Object} [shapeProperties] - The native object containing the shape properties in the jsGraph format (caution when using it)\r\n   * @returns {Shape} The created shape\r\n   * @see Graph#getConstructor\r\n   */\r\n  newShape( shapeType, shapeData, mute = false, shapeProperties ) {\r\n    this.prevent( false );\r\n\r\n    if ( !mute ) {\r\n      this.emit( 'beforeNewShape', shapeData );\r\n\r\n      if ( this.prevent( false ) ) {\r\n        return false;\r\n      }\r\n    }\r\n\r\n    // Backward compatibility\r\n    if ( typeof shapeType == 'object' ) {\r\n      mute = shapeData;\r\n      shapeData = shapeType;\r\n      shapeType = shapeData.type;\r\n    }\r\n\r\n    shapeData = shapeData || {};\r\n    shapeData._id = util.guid();\r\n\r\n    var constructor;\r\n    if ( typeof shapeType == 'function' ) {\r\n      constructor = shapeType;\r\n    } else {\r\n      constructor = this.getConstructor( `graph.shape.${shapeType}` );\r\n    }\r\n\r\n    if ( !constructor ) {\r\n      return util.throwError( 'No constructor for this shape' );\r\n    }\r\n\r\n    var shape = new constructor( this, shapeData );\r\n\r\n    if ( !shape ) {\r\n      return util.throwError( 'Failed to construct shape.' );\r\n    }\r\n\r\n    shape.type = shapeType;\r\n    shape.graph = this;\r\n    shape._data = shapeData;\r\n\r\n    if ( shapeData.properties !== undefined ) {\r\n      shape.setProperties( shapeData.properties );\r\n    }\r\n\r\n    shape.init(\r\n      this,\r\n      shapeProperties,\r\n      shapeProperties ? shapeProperties.simplified : false\r\n    );\r\n\r\n    if ( shapeData.props !== undefined ) {\r\n      for ( var i in shapeData.props ) {\r\n        shape.setProp( i, shapeData.props[ i ] );\r\n      }\r\n    }\r\n\r\n    if ( shapeData.position ) {\r\n      for ( var i = 0, l = shapeData.position.length; i < l; i++ ) {\r\n        shape.setPosition( new GraphPosition( shapeData.position[ i ] ), i );\r\n      }\r\n    }\r\n\r\n    /* Setting shape properties */\r\n    if ( shapeData.fillColor !== undefined ) {\r\n      shape.setFillColor( shapeData.fillColor );\r\n    }\r\n\r\n    if ( shapeData.fillOpacity !== undefined ) {\r\n      shape.setFillOpacity( shapeData.fillOpacity );\r\n    }\r\n\r\n    if ( shapeData.strokeColor !== undefined ) {\r\n      shape.setStrokeColor( shapeData.strokeColor );\r\n    }\r\n\r\n    if ( shapeData.strokeWidth !== undefined ) {\r\n      shape.setStrokeWidth( shapeData.strokeWidth );\r\n    }\r\n\r\n    if ( shapeData.layer !== undefined ) {\r\n      shape.setLayer( shapeData.layer );\r\n    }\r\n\r\n    if ( shapeData.locked == true ) {\r\n      shape.lock();\r\n    }\r\n\r\n    if ( shapeData.movable == true ) {\r\n      shape.movable();\r\n    }\r\n\r\n    if ( shapeData.selectable == true ) {\r\n      shape.selectable();\r\n    }\r\n\r\n    if ( shapeData.resizable == true ) {\r\n      shape.resizable();\r\n    }\r\n\r\n    if ( shapeData.attributes !== undefined ) {\r\n      shape.setProp( 'attributes', shapeData.attributes );\r\n    }\r\n\r\n    if ( shapeData.handles !== undefined ) {\r\n      shape.setProp( 'handles', shapeData.handles );\r\n    }\r\n\r\n    if ( shapeData.selectOnMouseDown !== undefined ) {\r\n      shape.setProp( 'selectOnMouseDown', true );\r\n    }\r\n\r\n    if ( shapeData.selectOnClick !== undefined ) {\r\n      shape.setProp( 'selectOnClick', true );\r\n    }\r\n\r\n    if (\r\n      shapeData.transforms !== undefined &&\r\n      Array.isArray( shapeData.transforms )\r\n    ) {\r\n      shapeData.transforms.forEach( ( {\r\n        type,\r\n        value\r\n      } ) => {\r\n        shape.addTransform( type, value );\r\n      } );\r\n    }\r\n\r\n    if ( shapeData.highlightOnMouseOver !== undefined ) {\r\n      shape.setProp( 'highlightOnMouseOver', true );\r\n    }\r\n\r\n    if ( shapeData.labelEditable ) {\r\n      shape.setProp( 'labelEditable', shapeData.labelEditable );\r\n    }\r\n\r\n    if ( shapeData.labels && !shapeData.label ) {\r\n      shapeData.label = shapeData.labels;\r\n    }\r\n\r\n    if ( shapeData.label !== undefined ) {\r\n      if ( !Array.isArray( shapeData.label ) ) {\r\n        shapeData.label = [ shapeData.label ];\r\n      }\r\n\r\n      for ( var i = 0, l = shapeData.label.length; i < l; i++ ) {\r\n        shape.showLabel( i );\r\n        shape.setLabelText( shapeData.label[ i ].text, i );\r\n        shape.setLabelPosition( shapeData.label[ i ].position, i );\r\n        shape.setLabelColor( shapeData.label[ i ].color || 'black', i );\r\n        shape.setLabelSize( shapeData.label[ i ].size, i );\r\n        shape.setLabelAngle( shapeData.label[ i ].angle || 0, i );\r\n        shape.setLabelBaseline( shapeData.label[ i ].baseline || 'no-change', i );\r\n        shape.setLabelAnchor( shapeData.label[ i ].anchor || 'start', i );\r\n        shape.setLabelBackgroundColor(\r\n          shapeData.label[ i ].backgroundColor || 'transparent',\r\n          i\r\n        );\r\n        shape.setLabelBackgroundOpacity(\r\n          shapeData.label[ i ].backgroundOpacity || 1,\r\n          i\r\n        );\r\n      }\r\n    }\r\n\r\n    if ( shapeData.serie ) {\r\n      shape.setSerie( this.getSerie( shapeData.serie ) );\r\n    }\r\n    shape.createHandles();\r\n    shape.applyStyle();\r\n\r\n    this.shapes.push( shape );\r\n\r\n    if ( !mute ) {\r\n      this.emit( 'newShape', shape, shapeData );\r\n    }\r\n\r\n    return shape;\r\n  }\r\n\r\n  /**\r\n   * Creates a new position. Arguments are passed to the position constructor\r\n   * @param {...*} varArgs\r\n   * @see Position\r\n   */\r\n  newPosition( varArgs ) {\r\n    return new GraphPosition( ...arguments );\r\n\r\n    // 18 September 2016 Norman: What is that ?\r\n    //Array.prototype.unshift.call( arguments, null );\r\n    //return new( Function.prototype.bind.apply( GraphPosition, arguments ) )();\r\n  }\r\n\r\n  /**\r\n   *  Redraws all shapes. To be called if their definitions have changed\r\n   */\r\n  redrawShapes() {\r\n    //this.graphingZone.removeChild(this.shapeZone);\r\n    for ( var i = 0, l = this.shapes.length; i < l; i++ ) {\r\n      this.shapes[ i ].redraw();\r\n    }\r\n    //this.graphingZone.insertBefore(this.shapeZone, this.axisGroup);\r\n  }\r\n\r\n  /**\r\n   *  Removes all shapes from the graph\r\n   */\r\n  removeShapes() {\r\n    for ( var i = 0, l = this.shapes.length; i < l; i++ ) {\r\n      if ( this.shapes[ i ] && this.shapes[ i ].kill ) {\r\n        this.shapes[ i ].kill( true );\r\n      }\r\n    }\r\n    this.shapes = [];\r\n  }\r\n\r\n  /**\r\n   * Selects a shape\r\n   * @param {Shape} shape - The shape to select\r\n   * @param {Boolean} mute - Select the shape quietly\r\n   */\r\n  selectShape( shape, mute ) {\r\n    // Already selected. Returns false\r\n\r\n    if ( !shape ) {\r\n      return;\r\n    }\r\n\r\n    if ( this.selectedShapes.indexOf( shape ) > -1 ) {\r\n      return false;\r\n    }\r\n\r\n    if ( !shape.isSelectable() ) {\r\n      return false;\r\n    }\r\n\r\n    if ( !mute ) {\r\n      this.emit( 'beforeShapeSelect', shape );\r\n    }\r\n\r\n    if ( this.prevent( false ) ) {\r\n      return;\r\n    }\r\n\r\n    if ( this.selectedShapes.length > 0 && this.options.shapesUniqueSelection ) {\r\n      // Only one selected shape at the time\r\n\r\n      this.unselectShapes( mute );\r\n    }\r\n\r\n    shape._select( mute );\r\n    this.selectedShapes.push( shape );\r\n\r\n    if ( !mute ) {\r\n      this.emit( 'shapeSelect', shape );\r\n    }\r\n  }\r\n\r\n  getSelectedShapes() {\r\n    return this.selectedShapes;\r\n  }\r\n\r\n  /**\r\n   * Unselects a shape\r\n   * @param {Shape} shape - The shape to unselect\r\n   * @param {Boolean} mute - Unselect the shape quietly\r\n   */\r\n  unselectShape( shape, mute ) {\r\n    if ( this.selectedShapes.indexOf( shape ) == -1 ) {\r\n      return;\r\n    }\r\n\r\n    if ( !mute ) {\r\n      this.emit( 'beforeShapeUnselect', shape );\r\n    }\r\n\r\n    if ( this.cancelUnselectShape ) {\r\n      this.cancelUnselectShape = false;\r\n      return;\r\n    }\r\n\r\n    shape._unselect();\r\n\r\n    this.selectedShapes.splice( this.selectedShapes.indexOf( shape ), 1 );\r\n\r\n    if ( !mute ) {\r\n      this.emit( 'shapeUnselect', shape );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Unselects all shapes\r\n   * @param {Boolean} [ mute = false ] - Mutes all unselection events\r\n   * @return {Graph} The current graph instance\r\n   */\r\n  unselectShapes( mute ) {\r\n    while ( this.selectedShapes[ 0 ] ) {\r\n      this.unselectShape( this.selectedShapes[ 0 ], mute );\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  _removeShape( shape ) {\r\n    this.shapes.splice( this.shapes.indexOf( shape ), 1 );\r\n  }\r\n\r\n  appendShapeToDom( shape ) {\r\n    if ( shape.isHTML() ) {\r\n      this.wrapper.insertBefore( shape._dom, this.dom );\r\n    }\r\n\r\n    this.getLayer( shape.getLayer(), 'shape' ).appendChild(\r\n      shape.simplified ? shape._dom : shape.group\r\n    );\r\n  }\r\n\r\n  removeShapeFromDom( shape ) {\r\n    if ( shape.isHTML() ) {\r\n      this.wrapper.removeChild( shape._dom );\r\n    }\r\n\r\n    this.getLayer( shape.getLayer(), 'shape' ).removeChild( shape.group );\r\n  }\r\n\r\n  appendSerieToDom( serie ) {\r\n    this.getLayer( serie.getLayer(), 'serie' ).appendChild( serie.groupMain );\r\n  }\r\n\r\n  removeSerieFromDom( serie ) {\r\n    this.getLayer( serie.getLayer(), 'serie' ).removeChild( serie.groupMain );\r\n  }\r\n\r\n  getLayer( layer, mode ) {\r\n    if ( !this.layers[ layer ] ) {\r\n      this.layers[ layer ] = [];\r\n\r\n      this.layers[ layer ][ 0 ] = document.createElementNS( Graph.ns, 'g' );\r\n      this.layers[ layer ][ 0 ].setAttribute( 'data-layer', layer );\r\n      this.layers[ layer ][ 1 ] = document.createElementNS( Graph.ns, 'g' );\r\n      this.layers[ layer ][ 2 ] = document.createElementNS( Graph.ns, 'g' );\r\n\r\n      this.layers[ layer ][ 0 ].appendChild( this.layers[ layer ][ 1 ] );\r\n      this.layers[ layer ][ 0 ].appendChild( this.layers[ layer ][ 2 ] );\r\n\r\n      var i = 1,\r\n        prevLayer;\r\n\r\n      while ( !( prevLayer = this.layers[ layer - i ] ) && layer - i >= 0 ) {\r\n        i++;\r\n      }\r\n\r\n      if ( !prevLayer ) {\r\n        this.plotGroup.insertBefore(\r\n          this.layers[ layer ][ 0 ],\r\n          this.plotGroup.firstChild\r\n        );\r\n      } else if ( prevLayer.nextSibling ) {\r\n        this.plotGroup.insertBefore(\r\n          this.layers[ layer ][ 0 ],\r\n          prevLayer.nextSibling\r\n        );\r\n      } else {\r\n        this.plotGroup.appendChild( this.layers[ layer ][ 0 ] );\r\n      }\r\n    }\r\n\r\n    return this.layers[ layer ][ mode == 'shape' ? 2 : 1 ];\r\n  }\r\n\r\n  focus() {\r\n    this.wrapper.focus();\r\n  }\r\n\r\n  elementMoving( movingElement ) {\r\n    this.bypassHandleMouse = movingElement;\r\n  }\r\n\r\n  stopElementMoving( element ) {\r\n    if ( element && element == this.bypassHandleMouse ) {\r\n      this.bypassHandleMouse = false;\r\n    } else if ( !element ) {\r\n      this.bypassHandleMouse = false;\r\n    }\r\n  }\r\n\r\n  _makeClosingLines() {\r\n    this.closingLines = {};\r\n    var els = [ 'top', 'bottom', 'left', 'right' ],\r\n      i = 0,\r\n      l = 4;\r\n    for ( ; i < l; i++ ) {\r\n      var line = document.createElementNS( Graph.ns, 'line' );\r\n      line.setAttribute( 'stroke', this.options.closeColor );\r\n      line.setAttribute( 'shape-rendering', 'crispEdges' );\r\n      line.setAttribute( 'stroke-linecap', 'square' );\r\n      line.setAttribute( 'display', 'none' );\r\n      this.closingLines[ els[ i ] ] = line;\r\n      this.graphingZone.appendChild( line );\r\n    }\r\n  }\r\n\r\n  isActionAllowed( e, action ) {\r\n    if (\r\n      action.type !== e.type &&\r\n      ( action.type !== undefined || e.type !== 'mousedown' ) &&\r\n      !(\r\n        ( e.type === 'wheel' || e.type === 'mousewheel' ) &&\r\n        action.type == 'mousewheel'\r\n      )\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    if (\r\n      action.enabled &&\r\n      ( typeof action.enabled == 'function' ?\r\n        !action.enabled( this ) :\r\n        !action.enabled )\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    if ( action.key ) {\r\n      if ( action.key !== e.keyCode ) {\r\n        let keyCheck = {\r\n          backspace: 8,\r\n          enter: 13,\r\n          tab: 9,\r\n          shift: 16,\r\n          ctrl: 17,\r\n          alt: 18,\r\n          pause: 19,\r\n          escape: 27,\r\n          up: 33,\r\n          down: 34,\r\n          left: 37,\r\n          right: 39\r\n        };\r\n\r\n        if ( keyCheck[ action.key ] !== e.keyCode ) {\r\n          return;\r\n        }\r\n      }\r\n    }\r\n\r\n    if ( action.shift === undefined ) {\r\n      action.shift = false;\r\n    }\r\n\r\n    if ( action.ctrl === undefined ) {\r\n      action.ctrl = false;\r\n    }\r\n\r\n    if ( action.meta === undefined ) {\r\n      action.meta = false;\r\n    }\r\n\r\n    if ( action.alt === undefined ) {\r\n      action.alt = false;\r\n    }\r\n\r\n    return (\r\n      e.shiftKey == action.shift &&\r\n      e.ctrlKey == action.ctrl &&\r\n      e.metaKey == action.meta &&\r\n      e.altKey == action.alt\r\n    );\r\n  }\r\n\r\n  forcePlugin( plugin ) {\r\n    this.forcedPlugin = plugin;\r\n  }\r\n\r\n  unforcePlugin() {\r\n    this.forcedPlugin = false;\r\n  }\r\n\r\n  _pluginsExecute( funcName, ...args ) {\r\n    //\t\t\tArray.prototype.splice.apply(args, [0, 0, this]);\r\n\r\n    for ( var i in this.plugins ) {\r\n      if ( this.plugins[ i ] && this.plugins[ i ][ funcName ] ) {\r\n        this.plugins[ i ][ funcName ].apply( this.plugins[ i ], args );\r\n      }\r\n    }\r\n  }\r\n\r\n  _pluginExecute( which, func, args ) {\r\n    //Array.prototype.splice.apply( args, [ 0, 0, this ] );\r\n    if ( !which ) {\r\n      return;\r\n    }\r\n\r\n    if ( this.plugins[ which ] && this.plugins[ which ][ func ] ) {\r\n      this.plugins[ which ][ func ].apply( this.plugins[ which ], args );\r\n      return true;\r\n    }\r\n  }\r\n\r\n  pluginYieldActiveState() {\r\n    this.activePlugin = false;\r\n  }\r\n\r\n  _serieExecute( serie, func, args ) {\r\n    if ( typeof serie !== 'object' ) {\r\n      serie = this.getSerie( serie );\r\n    }\r\n\r\n    if ( typeof serie[ func ] == 'function' ) {\r\n      serie.apply( serie, args );\r\n    }\r\n  }\r\n  _pluginsInit() {\r\n    var constructor, pluginName, pluginOptions;\r\n\r\n    for ( var i in this.options.plugins ) {\r\n      pluginName = i;\r\n      pluginOptions = this.options.plugins[ i ];\r\n\r\n      constructor = this.getConstructor( `graph.plugin.${pluginName}` );\r\n\r\n      if ( constructor ) {\r\n        //var options = util.extend( true, {}, constructor.defaults(), pluginOptions );\r\n        this.plugins[ pluginName ] = new constructor( pluginOptions );\r\n\r\n        util.mapEventEmission(\r\n          this.plugins[ pluginName ].options,\r\n          this.plugins[ pluginName ]\r\n        );\r\n        this.plugins[ pluginName ].init( this, pluginOptions );\r\n      } else {\r\n        util.throwError( `Plugin \"${pluginName}\" has not been registered` );\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Returns an initialized plugin\r\n   * @param {String} pluginName\r\n   * @returns {Plugin} The plugin which name is <pluginName>\r\n   */\r\n  getPlugin( pluginName ) {\r\n    var plugin = this.plugins[ pluginName ];\r\n\r\n    if ( !plugin ) {\r\n      return util.throwError(\r\n        `Plugin \"${pluginName}\" has not been loaded or properly registered`\r\n      );\r\n    }\r\n\r\n    return plugin;\r\n  }\r\n\r\n  hasPlugin( pluginName ) {\r\n    return !!this.plugins[ pluginName ];\r\n  }\r\n\r\n  triggerEvent() {\r\n    var func = arguments[ 0 ];\r\n    /*,\r\n          args = Array.prototype.splice.apply( arguments, [ 0, 1 ] );\r\n    */\r\n    if ( typeof this.options[ func ] == 'function' ) {\r\n      return this.options[ func ].apply( this, arguments );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Creates a legend. Only one legend is allowed per graph\r\n   * @param {Object} options - The legend options\r\n   */\r\n  makeLegend( options ) {\r\n    if ( this.legend ) {\r\n      return this.legend;\r\n    }\r\n\r\n    var constructor = this.getConstructor( 'graph.legend' );\r\n    if ( constructor ) {\r\n      this.legend = new constructor( this, options );\r\n    } else {\r\n      return util.throwError(\r\n        'Graph legend is not available as it has not been registered'\r\n      );\r\n    }\r\n\r\n    return this.legend;\r\n  }\r\n\r\n  /**\r\n   * Redraws the legend if it exists\r\n   * @param {Boolean} [ onlyIfRequired = false ] ```true``` to redraw the legend only when it actually needs to be updated\r\n   * @return {Graph} The graph instance\r\n   */\r\n  updateLegend( onlyIfRequired = false ) {\r\n    if ( !this.legend ) {\r\n      return;\r\n    }\r\n\r\n    this.legend.update( onlyIfRequired );\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * @returns {Legend} The legend item\r\n   */\r\n  getLegend() {\r\n    if ( !this.legend ) {\r\n      return;\r\n    }\r\n\r\n    return this.legend;\r\n  }\r\n\r\n  requireLegendUpdate() {\r\n    if ( !this.legend ) {\r\n      return;\r\n    }\r\n\r\n    this.legend.requireDelayedUpdate();\r\n  }\r\n\r\n  orthogonalProjectionSetup() {\r\n    this.options.zAxis = util.extend( true, {\r\n      maxZ: 10,\r\n      minZ: 0,\r\n      shiftX: -25,\r\n      shiftY: -15,\r\n      xAxis: this.getXAxis(),\r\n      yAxis: this.getYAxis()\r\n    } );\r\n  }\r\n\r\n  orthogonalProjectionUpdate() {\r\n    if ( !this.zAxis ) {\r\n      this.zAxis = {\r\n        g: document.createElementNS( Graph.ns, 'g' ),\r\n        l: document.createElementNS( Graph.ns, 'line' )\r\n      };\r\n\r\n      this.zAxis.g.appendChild( this.zAxis.l );\r\n      this.groupGrids.appendChild( this.zAxis.g );\r\n    }\r\n\r\n    let refAxisX = this.options.zAxis.xAxis;\r\n    let refAxisY = this.options.zAxis.yAxis;\r\n\r\n    var x0 = refAxisX.getMinPx();\r\n    var y0 = refAxisY.getMinPx();\r\n\r\n    var dx = refAxisX.getZProj( this.options.zAxis.maxZ );\r\n    var dy = refAxisY.getZProj( this.options.zAxis.maxZ );\r\n\r\n    this.zAxis.l.setAttribute( 'stroke', 'black' );\r\n    this.zAxis.l.setAttribute( 'x1', x0 );\r\n    this.zAxis.l.setAttribute( 'x2', x0 + dx );\r\n    this.zAxis.l.setAttribute( 'y1', y0 );\r\n    this.zAxis.l.setAttribute( 'y2', y0 + dy );\r\n\r\n    this.updateDataMinMaxAxes( true );\r\n\r\n    var sort = this.series.map( ( serie ) => {\r\n      return [ serie.getZPos(), serie ];\r\n    } );\r\n\r\n    sort.sort( ( sa, sb ) => {\r\n      return sb[ 0 ] - sa[ 0 ];\r\n    } );\r\n\r\n    let i = 0;\r\n    sort.forEach( ( s ) => {\r\n      s[ 1 ].setLayer( i );\r\n      this.appendSerieToDom( s[ 1 ] );\r\n      i++;\r\n    } );\r\n\r\n    this.drawSeries( true );\r\n  }\r\n\r\n  /**\r\n   * Kills the graph\r\n   **/\r\n  kill() {\r\n    this.wrapper.removeChild( this.dom );\r\n  }\r\n  _removeSerie( serie ) {\r\n    this.series.splice( this.series.indexOf( serie ), 1 );\r\n    this._pluginsExecute( 'serieRemoved', serie );\r\n  }\r\n  contextListen( target, menuElements, callback ) {\r\n    if ( this.options.onContextMenuListen ) {\r\n      return this.options.onContextMenuListen( target, menuElements, callback );\r\n    }\r\n  }\r\n  lockShapes() {\r\n    this.shapesLocked = true;\r\n\r\n    // Removes the current actions of the shapes\r\n    for ( var i = 0, l = this.shapes.length; i < l; i++ ) {\r\n      this.shapes[ i ].moving = false;\r\n      this.shapes[ i ].resizing = false;\r\n    }\r\n  }\r\n  unlockShapes() {\r\n    this.shapesLocked = false;\r\n  }\r\n  prevent( arg ) {\r\n    var curr = this.prevented;\r\n    if ( arg != -1 ) {\r\n      this.prevented = arg == undefined || arg;\r\n    }\r\n    return curr;\r\n  }\r\n  _getXY( e ) {\r\n    var x = e.clientX,\r\n      y = e.clientY;\r\n\r\n    var pos = this.offsetCached || util.getOffset( this.wrapper );\r\n\r\n    x -= pos.left;\r\n    y -= pos.top;\r\n\r\n    return {\r\n      x: x,\r\n      y: y\r\n    };\r\n  }\r\n  _resize() {\r\n    if ( !this.width || !this.height ) {\r\n      return;\r\n    }\r\n\r\n    this.getDrawingWidth();\r\n    this.getDrawingHeight();\r\n\r\n    this.sizeSet = true;\r\n    this.dom.setAttribute( 'width', this.width );\r\n    this.dom.setAttribute( 'height', this.height );\r\n    this.domTitle.setAttribute( 'x', this.width / 2 );\r\n\r\n    this._sizeChanged = true;\r\n\r\n    if ( this.drawn ) {\r\n      this.requireLegendUpdate();\r\n      this.draw( true );\r\n    }\r\n  }\r\n\r\n  updateGraphingZone() {\r\n    util.setAttributeTo( this.graphingZone, {\r\n      transform: `translate(${this.options.paddingLeft}, ${\r\n        this.options.paddingTop\r\n      })`\r\n    } );\r\n\r\n    this._sizeChanged = true;\r\n  }\r\n\r\n  // We have to proxy the methods in case they are called anonymously\r\n  getDrawingSpaceWidth() {\r\n    return () => this.drawingSpaceWidth;\r\n  }\r\n\r\n  getDrawingSpaceHeight() {\r\n    return () => this.drawingSpaceHeight;\r\n  }\r\n\r\n  getDrawingSpaceMinX() {\r\n    return () => this.drawingSpaceMinX;\r\n  }\r\n\r\n  getDrawingSpaceMinY() {\r\n    return () => this.drawingSpaceMinY;\r\n  }\r\n\r\n  getDrawingSpaceMaxX() {\r\n    return () => this.drawingSpaceMaxX;\r\n  }\r\n\r\n  getDrawingSpaceMaxY() {\r\n    return () => this.drawingSpaceMaxY;\r\n  }\r\n\r\n  tracking( options ) {\r\n    // This is the new alias\r\n    return this.trackingLine( options );\r\n  }\r\n\r\n  /**\r\n   *  Enables the line tracking\r\n   *  @param {Object|Boolean} options - Defines the tracking behavior. If a boolean, simply enables or disables the existing tracking.\r\n   */\r\n  trackingLine( options ) {\r\n    var self = this;\r\n\r\n    if ( typeof options === 'boolean' ) {\r\n      if ( this.options.trackingLine ) {\r\n        this.options.trackingLine.enable = options;\r\n      }\r\n      return;\r\n    }\r\n\r\n    if ( options ) {\r\n      this.options.trackingLine = options;\r\n    }\r\n\r\n    // One can enable / disable the tracking\r\n    options.enable = options.enable === undefined ? true : !!options.enable;\r\n\r\n    // Treat the series\r\n    const seriesSet = new Set();\r\n    let backupSeries = [];\r\n    // If we defined an array, let's save it\r\n    if ( Array.isArray( options.series ) ) {\r\n      options.series.forEach( ( serie ) => {\r\n        seriesSet.add( this.getSerie( serie ) );\r\n      } );\r\n    } else if ( options.series == 'all' ) {\r\n      this.allSeries().forEach( ( serie ) => seriesSet.add( serie ) );\r\n    }\r\n\r\n    options.series = seriesSet;\r\n\r\n    // Individual tracking\r\n    if ( options.mode == 'individual' ) {\r\n      seriesSet.forEach( ( serie ) => {\r\n        self.addSerieToTrackingLine( serie, options.serieOptions );\r\n      } );\r\n    } else {\r\n      /*\r\n      options.series.forEach( ( serie ) => {\r\n        serie.serie.disableTracking();\r\n      } );\r\n*/\r\n      if ( options.noLine ) {\r\n        return;\r\n      }\r\n\r\n      if ( !this.trackingLineShape ) {\r\n        // Avoid multiple creation of tracking lines\r\n\r\n        // Creates a new shape called trackingLine, in the first layer (below everything)\r\n        this.trackingLineShape = this.newShape(\r\n          'line',\r\n          util.extend(\r\n            true, {\r\n              position: [ {\r\n                  y: 'min'\r\n                },\r\n                {\r\n                  y: 'max'\r\n                }\r\n              ],\r\n              stroke: 'black',\r\n              layer: -1\r\n            },\r\n            options.trackingLineShapeOptions\r\n          )\r\n        );\r\n      }\r\n\r\n      this.trackingLineShape.draw();\r\n\r\n      // return this.trackingLineShape;\r\n    }\r\n    //return this.trackingObject;\r\n  }\r\n\r\n  addSerieToTrackingLine( serie, options = {} ) {\r\n    // Safeguard when claled externally\r\n    if ( !this.options.trackingLine ) {\r\n      this.trackingLine( {\r\n        mode: 'individual'\r\n      } );\r\n    }\r\n\r\n    this.options.trackingLine.series.add( serie );\r\n\r\n    let serieShape;\r\n    if ( this.options.trackingLine.serieShape ) {\r\n      serieShape = this.options.trackingLine.serieShape;\r\n    } else {\r\n      serieShape = {\r\n        shape: 'ellipse',\r\n        properties: {\r\n          rx: [ `${serie.getLineWidth() * 3}px` ],\r\n          ry: [ `${serie.getLineWidth() * 3}px` ]\r\n        }\r\n      };\r\n    }\r\n\r\n    serie.options.tracking = Object.assign( {}, options );\r\n\r\n    if ( !serie.trackingShape ) {\r\n      serie.trackingShape = this.newShape(\r\n          serieShape.shape, {\r\n            fillColor: serie.getLineColor(),\r\n            strokeColor: 'White',\r\n            strokeWidth: serie.getLineWidth()\r\n          },\r\n          true,\r\n          serieShape.properties\r\n        )\r\n        .setSerie( serie )\r\n        .forceParentDom( serie.groupMain )\r\n        .draw();\r\n    }\r\n    /*\r\n      serie.serie.trackingShape.show();\r\n      serie.serie.trackingShape.getPosition( 0 ).x = index.xClosest;\r\n\r\n      if ( serieShape.magnet ) {\r\n\r\n        let magnetOptions = serieShape.magnet,\r\n          val = magnetOptions.within,\r\n          minmaxpos;\r\n\r\n        if ( magnetOptions.withinPx ) {\r\n          val = serie.serie.getXAxis().getRelVal( magnetOptions.withinPx );\r\n        }\r\n\r\n        if ( ( minmaxpos = serie.serie.findLocalMinMax( index.xClosest, val, magnetOptions.mode ) ) ) {\r\n\r\n          serie.serie.trackingShape.getPosition( 0 ).x = minmaxpos;\r\n        }\r\n      }\r\n\r\n      serie.serie.trackingShape.redraw();\r\n\r\n*/\r\n\r\n    /*  serie.enableTracking( ( serie, index, x, y ) => {\r\n\r\n      if ( this.options.trackingLine.enable ) {\r\n\r\n        if ( index ) {\r\n\r\n          if ( this.trackingObject ) {\r\n\r\n            this.trackingObject.show();\r\n            this.trackingObject.getPosition( 0 ).x = index.trueX; //serie.getData()[ 0 ][ index.closestIndex * 2 ];\r\n            this.trackingObject.getPosition( 1 ).x = index.trueX; //serie.getData()[ 0 ][ index.closestIndex * 2 ];\r\n            this.trackingObject.redraw();\r\n          }\r\n\r\n          serie._trackingLegend = _trackingLegendSerie( this, {\r\n            serie: serie\r\n          }, x, y, serie._trackingLegend, options.textMethod ? options.textMethod : trackingLineDefaultTextMethod, index.trueX );\r\n\r\n          if ( serie._trackingLegend ) {\r\n            serie._trackingLegend.style.display = 'block';\r\n          }\r\n        }\r\n      }\r\n    }, ( serie ) => {\r\n\r\n      if ( this.trackingObject ) {\r\n        this.trackingObject.hide();\r\n      }\r\n\r\n      if ( serie.trackingShape ) {\r\n        serie.trackingShape.hide();\r\n      }\r\n\r\n      if ( serie._trackingLegend ) {\r\n        serie._trackingLegend.style.display = 'none';\r\n      }\r\n\r\n      serie._trackingLegend = _trackingLegendSerie( this, {\r\n        serie: serie\r\n      }, false, false, serie._trackingLegend, false, false );\r\n\r\n    } );\r\n*/\r\n  }\r\n\r\n  /**\r\n   *  Pass here the katex.render method to be used later\r\n   *   @param {Function} renderer -  katexRendered - renderer\r\n   *   @return {Graph} The current graph instance\r\n   */\r\n  setKatexRenderer( renderer ) {\r\n    this._katexRenderer = renderer;\r\n  }\r\n\r\n  hasKatexRenderer() {\r\n    return !!this._katexRenderer;\r\n  }\r\n\r\n  renderWithKatex( katexValue, katexElement ) {\r\n    if ( this._katexRenderer ) {\r\n      if ( katexElement ) {\r\n        katexElement.removeChild( katexElement.firstChild );\r\n      } else {\r\n        katexElement = document.createElementNS( Graph.ns, 'foreignObject' );\r\n      }\r\n\r\n      let div = document.createElement( 'div' );\r\n\r\n      katexElement.appendChild( div );\r\n      this._katexRenderer( katexValue, div );\r\n\r\n      return katexElement;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Returns a graph created from a schema\r\n   * @param {Object} json\r\n   * @param {HTMLElement} wrapper - The wrapping element\r\n   * @returns {Graph} Newly created graph\r\n   */\r\n  static fromJSON( json, wrapper ) {\r\n    const graph = graphFromJson( Graph, json, wrapper );\r\n    return graph;\r\n  }\r\n\r\n  exportToSchema() {\r\n    let schema = {};\r\n\r\n    schema.title = this.options.title;\r\n\r\n    schema.width = this.getWidth();\r\n    schema.height = this.getHeight();\r\n\r\n    let axesPositions = [ 'top', 'bottom', 'left', 'right' ];\r\n    let axesExport = [];\r\n    let allaxes = {\r\n      x: [],\r\n      y: []\r\n    };\r\n\r\n    axesPositions.map( ( axisPosition ) => {\r\n      if ( !this.axis[ axisPosition ] ) {\r\n        return {};\r\n      }\r\n\r\n      axesExport = axesExport.concat(\r\n        this.axis[ axisPosition ].map( ( axis ) => {\r\n          return {\r\n            type: axisPosition,\r\n            label: axis.options.label,\r\n            unit: axis.options.unit,\r\n            min: axis.options.forcedMin,\r\n            max: axis.options.forcedMax,\r\n            flip: axis.options.flipped\r\n          };\r\n        } )\r\n      );\r\n\r\n      if ( axisPosition == 'top' || axisPosition == 'bottom' ) {\r\n        allaxes.x = allaxes.x.concat( this.axis[ axisPosition ] );\r\n      } else {\r\n        allaxes.y = allaxes.y.concat( this.axis[ axisPosition ] );\r\n      }\r\n    } );\r\n\r\n    schema.axis = axesExport;\r\n\r\n    let seriesExport = [];\r\n\r\n    let toType = ( type ) => {\r\n      switch ( type ) {\r\n        case Graph.SERIE_BAR:\r\n          return 'bar';\r\n\r\n        case Graph.SERIE_LINE_COLORED:\r\n          return 'color';\r\n\r\n        case Graph.SERIE_SCATTER:\r\n          return 'scatter';\r\n\r\n        default:\r\n        case Graph.SERIE_LINE:\r\n          return 'line';\r\n      }\r\n    };\r\n\r\n    let exportData = ( serie, x ) => {\r\n      let data = [];\r\n\r\n      switch ( serie.getType() ) {\r\n        case Graph.SERIE_LINE:\r\n          for ( var i = 0; i < serie.data.length; i++ ) {\r\n            for ( var j = 0; j < serie.data[ i ].length - 1; j += 2 ) {\r\n              data.push(\r\n                serie.data[ i ][\r\n                  j +\r\n                  ( ( x && serie.isFlipped() ) || ( !x && !serie.isFlipped() ) ?\r\n                    1 :\r\n                    0 )\r\n                ]\r\n              );\r\n            }\r\n          }\r\n          break;\r\n\r\n        case Graph.SERIE_SCATTER:\r\n          for ( var j = 0; j < serie.data.length - 1; j += 2 ) {\r\n            data.push(\r\n              serie.data[\r\n                i +\r\n                ( ( x && serie.isFlipped() ) || ( !x && !serie.isFlipped() ) ?\r\n                  1 :\r\n                  0 )\r\n              ]\r\n            );\r\n          }\r\n\r\n          break;\r\n      }\r\n\r\n      return data;\r\n    };\r\n\r\n    schema.data = seriesExport.concat(\r\n      this.series.map( ( serie ) => {\r\n        let style = [];\r\n        let linestyle = [];\r\n\r\n        if ( serie.getType() == Graph.SERIE_LINE ) {\r\n          for ( var stylename in serie.styles ) {\r\n            linestyle.push( {\r\n              styleName: stylename,\r\n              color: serie.styles[ stylename ].lineColor,\r\n              lineWidth: serie.styles[ stylename ].lineWidth,\r\n              lineStyle: serie.styles[ stylename ].lineStyle\r\n            } );\r\n\r\n            let styleObj = {\r\n              styleName: stylename,\r\n              styles: []\r\n            };\r\n            style.push( styleObj );\r\n\r\n            styleObj.styles = styleObj.styles.concat(\r\n              ( serie.styles[ stylename ].markers || [] ).map( ( markers ) => {\r\n                return {\r\n                  shape: markers.type,\r\n                  zoom: markers.zoom,\r\n                  lineWidth: markers.strokeWidth,\r\n                  lineColor: markers.strokeColor,\r\n                  color: markers.fillColor,\r\n                  points: markers.points\r\n                };\r\n              } )\r\n            );\r\n          }\r\n        }\r\n\r\n        return {\r\n          label: serie.getLabel(),\r\n          id: serie.getName(),\r\n          type: toType( serie.getType() ),\r\n          x: exportData( serie, true ),\r\n          y: exportData( serie, false ),\r\n          xAxis: allaxes.x.indexOf( serie.getXAxis() ),\r\n          yAxis: allaxes.y.indexOf( serie.getYAxis() ),\r\n          style: style,\r\n          lineStyle: linestyle\r\n        };\r\n      } )\r\n    );\r\n\r\n    return schema;\r\n  }\r\n\r\n  /**\r\n   * Registers a constructor to jsGraph. Constructors are used on a later basis by jsGraph to create series, shapes or plugins\r\n   * @param {String} constructorName - The name of the constructor\r\n   * @param {Function} constructor - The constructor method\r\n   * @see Graph.getConstructor\r\n   * @static\r\n   */\r\n  static registerConstructor( constructorName, constructor ) {\r\n    if ( _constructors.has( constructorName ) ) {\r\n      return util.throwError( `Constructor ${constructor} already exists.` );\r\n    }\r\n\r\n    _constructors.set( constructorName, constructor );\r\n  }\r\n\r\n  /**\r\n   * Returns a registered constructor\r\n   * @param {String} constructorName - The constructor name to look for\r\n   * @param {Boolean} [softFail = false ] - Fails silently if the constructor doesn't exist, and returns false\r\n   * @returns {Function} The registered constructor\r\n   * @throws Error\r\n   * @see Graph.registerConstructor\r\n   * @static\r\n   */\r\n  static getConstructor( constructorName, softFail = false ) {\r\n    if ( !_constructors.has( constructorName ) ) {\r\n      if ( softFail ) {\r\n        return false;\r\n      }\r\n\r\n      return util.throwError( `Constructor \"${constructorName}\" doesn't exist` );\r\n    }\r\n\r\n    return _constructors.get( constructorName );\r\n  }\r\n\r\n  static newWaveform() {\r\n    return new Waveform( ...arguments );\r\n  }\r\n\r\n  static waveform() {\r\n    return new Waveform( ...arguments );\r\n  }\r\n\r\n  static newWaveformHash() {\r\n    return new WaveformHash( ...arguments );\r\n  }\r\n\r\n  static waveformHash() {\r\n    return new WaveformHash( ...arguments );\r\n  }\r\n}\r\n\r\n// Adds getConstructor to the prototype. Cannot do that in ES6 classes\r\nGraph.prototype.getConstructor = Graph.getConstructor;\r\n\r\nfunction makeSerie( graph, name, options, type ) {\r\n  var constructor = graph.getConstructor( type, true );\r\n  if ( !constructor && typeof type == 'string' ) {\r\n    constructor = graph.getConstructor( `graph.serie.${type}`, true );\r\n  }\r\n\r\n  if ( constructor ) {\r\n    var serie = new constructor( graph, name, options );\r\n    //serie.init( graph, name, options );\r\n    graph.appendSerieToDom( serie );\r\n  } else {\r\n    return util.throwError(\r\n      'No constructor exists for the serie type provided. Use Graph.registerConstructor( name, constructor ) first is you use your own series'\r\n    );\r\n  }\r\n\r\n  return serie;\r\n}\r\n\r\nfunction getAxisLevelFromSpan( span, level ) {\r\n  for ( var i = 0, l = level.length; i < l; i++ ) {\r\n    var possible = true;\r\n    for ( var k = 0, m = level[ i ].length; k < m; k++ ) {\r\n      if (\r\n        !(\r\n          ( span[ 0 ] < level[ i ][ k ][ 0 ] && span[ 1 ] < level[ i ][ k ][ 0 ] ) ||\r\n          ( span[ 0 ] > level[ i ][ k ][ 1 ] && span[ 1 ] > level[ i ][ k ][ 1 ] )\r\n        )\r\n      ) {\r\n        possible = false;\r\n      }\r\n    }\r\n\r\n    if ( possible ) {\r\n      level[ i ].push( span );\r\n      return i;\r\n    }\r\n  }\r\n\r\n  level.push( [ span ] );\r\n  return level.length - 1;\r\n}\r\n\r\nfunction refreshDrawingZone( graph ) {\r\n  var shift = {\r\n    top: [],\r\n    bottom: [],\r\n    left: [],\r\n    right: []\r\n  };\r\n\r\n  var levels = {\r\n    top: [],\r\n    bottom: [],\r\n    left: [],\r\n    right: []\r\n  };\r\n\r\n  graph._painted = true;\r\n\r\n  // Apply to top and bottom\r\n  graph._applyToAxes(\r\n    function( axis, position ) {\r\n      if ( !axis.isShown() ) {\r\n        axis.hideGroup();\r\n        return;\r\n      } else {\r\n        axis.showGroup();\r\n      }\r\n\r\n      if ( axis.floating ) {\r\n        return;\r\n      }\r\n\r\n      var level = getAxisLevelFromSpan( axis.getSpan(), levels[ position ] );\r\n      axis.setLevel( level );\r\n\r\n      shift[ position ][ level ] = Math.max(\r\n        axis.getAxisPosition(),\r\n        shift[ position ][ level ] || 0\r\n      );\r\n    },\r\n    false,\r\n    true,\r\n    false\r\n  );\r\n\r\n  var shiftTop = shift.top.reduce( function( prev, curr ) {\r\n    return prev + curr;\r\n  }, 0 );\r\n\r\n  var shiftBottom = shift.bottom.reduce( function( prev, curr ) {\r\n    return prev + curr;\r\n  }, 0 );\r\n\r\n  graph.drawingSpaceHeight = graph.getDrawingHeight() - shiftTop - shiftBottom;\r\n\r\n  [ shift.top, shift.bottom ].map( function( arr ) {\r\n    arr.reduce( function( prev, current, index ) {\r\n      arr[ index ] = prev + current;\r\n      return prev + current;\r\n    }, 0 );\r\n  } );\r\n\r\n  // Apply to top and bottom\r\n  graph._applyToAxes(\r\n    function( axis, position ) {\r\n      if ( !axis.isShown() || axis.floating ) {\r\n        return;\r\n      }\r\n\r\n      axis.setShift( shift[ position ][ axis.getLevel() ] );\r\n    },\r\n    false,\r\n    true,\r\n    false\r\n  );\r\n\r\n  // Applied to left and right\r\n  graph._applyToAxes(\r\n    function( axis, position ) {\r\n      if ( !axis.isShown() ) {\r\n        axis.hideGroup();\r\n        // Don't return here. We need to go through the draw method as the axis must be assigned minPx and maxPx values.\r\n        // This is because some series can still be visible although the axis isn't.\r\n      } else {\r\n        axis.showGroup();\r\n      }\r\n\r\n      axis.setMinPx( shiftTop );\r\n      axis.setMaxPx( graph.getDrawingHeight( true ) - shiftBottom );\r\n\r\n      if ( axis.floating ) {\r\n        return;\r\n      }\r\n\r\n      // First we need to draw it in order to determine the width to allocate\r\n      // graph is done to accomodate 0 and 100000 without overlapping any element in the DOM (label, ...)\r\n\r\n      // Let's not draw dependant axes yet\r\n      let drawn = !axis.linkedToAxis ? axis.draw() : 0;\r\n\r\n      if ( !axis.isShown() ) {\r\n        return;\r\n      }\r\n      // Get axis position gives the extra shift that is common\r\n      var level = getAxisLevelFromSpan( axis.getSpan(), levels[ position ] );\r\n      axis.setLevel( level );\r\n\r\n      if ( axis.options.forcedWidth ) {\r\n        shift[ position ][ level ] = axis.options.forcedWidth;\r\n      } else {\r\n        shift[ position ][ level ] = Math.max( drawn, shift[ position ][ level ] || 0 );\r\n\r\n        if ( level < shift[ position ].length - 1 ) {\r\n          shift[ position ][ level ] += 10;\r\n        }\r\n      }\r\n    },\r\n    false,\r\n    false,\r\n    true\r\n  );\r\n\r\n  var shift2 = util.extend( true, {}, shift );\r\n\r\n  // Applied to left and right\r\n  graph._applyToAxes(\r\n    function( axis, position ) {\r\n      if ( !axis.isShown() || axis.floating ) {\r\n        return;\r\n      }\r\n\r\n      shift2[ position ][ axis.getLevel() ] = Math.max(\r\n        shift[ position ][ axis.getLevel() ],\r\n        axis.equalizePosition( shift[ position ][ axis.getLevel() ] )\r\n      );\r\n    },\r\n    false,\r\n    false,\r\n    true\r\n  );\r\n\r\n  shift = shift2;\r\n\r\n  var shiftLeft = shift.left.reduce( function( prev, curr ) {\r\n    return prev + curr;\r\n  }, 0 );\r\n\r\n  var shiftRight = shift.right.reduce( function( prev, curr ) {\r\n    return prev + curr;\r\n  }, 0 );\r\n\r\n  graph.drawingSpaceWidth = graph.getDrawingWidth() - shiftLeft - shiftRight;\r\n\r\n  [ shift.left, shift.right ].forEach( function( arr ) {\r\n    arr.reduce( function( prev, current, index ) {\r\n      arr[ index ] = prev + current;\r\n      return prev + current;\r\n    }, 0 );\r\n  } );\r\n\r\n  // Apply to left and right\r\n  graph._applyToAxes(\r\n    ( axis, position ) => {\r\n      if ( !axis.isShown() || axis.floating ) {\r\n        return;\r\n      }\r\n      axis.setShift( shift[ position ][ axis.getLevel() ] );\r\n    },\r\n    false,\r\n    false,\r\n    true\r\n  );\r\n\r\n  // Apply to top and bottom\r\n  graph._applyToAxes(\r\n    function( axis, position ) {\r\n      if ( !axis.isShown() ) {\r\n        //      return;\r\n      }\r\n\r\n      axis.setMinPx( shiftLeft );\r\n      axis.setMaxPx( graph.getDrawingWidth( true ) - shiftRight );\r\n\r\n      if ( axis.floating ) {\r\n        return;\r\n      }\r\n\r\n      if ( !axis.linkedToAxis ) {\r\n        axis.draw();\r\n      }\r\n    },\r\n    false,\r\n    true,\r\n    false\r\n  );\r\n\r\n  // Floating axes\r\n  graph._applyToAxes(\r\n    function( axis ) {\r\n      if ( !axis.floating ) {\r\n        return;\r\n      }\r\n\r\n      var floatingAxis = axis.getFloatingAxis();\r\n      var floatingValue = axis.getFloatingValue();\r\n      var floatingPx = floatingAxis.getPx( floatingValue );\r\n\r\n      axis.setShift( floatingPx );\r\n\r\n      if ( !axis.linkedToAxis ) {\r\n        axis.draw();\r\n      }\r\n    },\r\n    false,\r\n    true,\r\n    true\r\n  );\r\n\r\n  _closeLine(\r\n    graph,\r\n    'right',\r\n    graph.getDrawingWidth( true ),\r\n    graph.getDrawingWidth( true ),\r\n    shiftTop,\r\n    graph.getDrawingHeight( true ) - shiftBottom\r\n  );\r\n  _closeLine(\r\n    graph,\r\n    'left',\r\n    0,\r\n    0,\r\n    shiftTop,\r\n    graph.getDrawingHeight( true ) - shiftBottom\r\n  );\r\n  _closeLine(\r\n    graph,\r\n    'top',\r\n    shiftLeft,\r\n    graph.getDrawingWidth( true ) - shiftRight,\r\n    0,\r\n    0\r\n  );\r\n  _closeLine(\r\n    graph,\r\n    'bottom',\r\n    shiftLeft,\r\n    graph.getDrawingWidth( true ) - shiftRight,\r\n    graph.getDrawingHeight( true ) - shiftBottom,\r\n    graph.getDrawingHeight( true ) - shiftBottom\r\n  );\r\n\r\n  graph.clipRect.setAttribute( 'y', shiftTop );\r\n  graph.clipRect.setAttribute( 'x', shiftLeft );\r\n  graph.clipRect.setAttribute(\r\n    'width',\r\n    graph.getDrawingWidth() - shiftLeft - shiftRight\r\n  );\r\n  graph.clipRect.setAttribute(\r\n    'height',\r\n    graph.getDrawingHeight() - shiftTop - shiftBottom\r\n  );\r\n\r\n  graph.rectEvent.setAttribute( 'y', shiftTop + graph.getPaddingTop() );\r\n  graph.rectEvent.setAttribute( 'x', shiftLeft + graph.getPaddingLeft() );\r\n\r\n  graph.rectEvent.setAttribute( 'width', graph.drawingSpaceWidth );\r\n  graph.rectEvent.setAttribute( 'height', graph.drawingSpaceHeight );\r\n\r\n  graph.drawingSpaceMinX = shiftLeft + graph.getPaddingLeft(); // + \"px\";\r\n  graph.drawingSpaceMinY = shiftTop + graph.getPaddingTop(); // + \"px\";\r\n  graph.drawingSpaceMaxX =\r\n    graph.getDrawingWidth() - shiftRight + graph.getPaddingLeft(); // + \"px\";\r\n  graph.drawingSpaceMaxY =\r\n    graph.getDrawingHeight() - shiftBottom + graph.getPaddingTop(); //  + \"px\";\r\n\r\n  // Apply to top and bottom\r\n  graph._applyToAxes(\r\n    function( axis, position ) {\r\n      if ( !axis.isShown() ) {\r\n        return;\r\n      }\r\n\r\n      axis.drawLines();\r\n    },\r\n    false,\r\n    true,\r\n    true\r\n  );\r\n\r\n  /**\r\n    graph.shapeZoneRect.setAttribute('x', shift[1]);\r\n  \tgraph.shapeZoneRect.setAttribute('y', shift[2]);\r\n  \tgraph.shapeZoneRect.setAttribute('width', graph.getDrawingWidth() - shift[2] - shift[3]);\r\n  \tgraph.shapeZoneRect.setAttribute('height', graph.getDrawingHeight() - shift[1] - shift[0]);\r\n  */\r\n  graph.shift = shift;\r\n  graph.redrawShapes(); // Not sure this should be automatic here. The user should be clever.\r\n}\r\n\r\nfunction _handleKey( graph, event, type ) {\r\n  var self = graph;\r\n  if ( graph.forcedPlugin ) {\r\n    graph.activePlugin = graph.forcedPlugin;\r\n    graph._pluginExecute( graph.activePlugin, type, [ graph, event ] );\r\n    return;\r\n  }\r\n\r\n  checkKeyActions( graph, event, [ graph, event ], type );\r\n}\r\n\r\n// Similar to checkMouseActions\r\nfunction checkKeyActions( graph, e, parameters, methodName ) {\r\n  var keyComb = graph.options.keyActions,\r\n    i,\r\n    l;\r\n\r\n  for ( i = 0, l = keyComb.length; i < l; i++ ) {\r\n    if ( keyComb[ i ].plugin ) {\r\n      // Is it a plugin ?\r\n\r\n      if (\r\n        graph.forcedPlugin == keyComb[ i ].plugin ||\r\n        graph.isActionAllowed( e, keyComb[ i ] )\r\n      ) {\r\n        if ( keyComb[ i ].options ) {\r\n          parameters.push( keyComb[ i ].options );\r\n        }\r\n\r\n        graph.activePlugin = keyComb[ i ].plugin; // Lease the mouse action to the current action\r\n        graph._pluginExecute( keyComb[ i ].plugin, methodName, parameters );\r\n\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n\r\n        return true;\r\n      }\r\n    } else if ( keyComb[ i ].callback && graph.isActionAllowed( e, keyComb[ i ] ) ) {\r\n      if ( keyComb[ i ].options ) {\r\n        parameters.push( keyComb[ i ].options );\r\n      }\r\n\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n\r\n      keyComb[ i ].callback.apply( graph, parameters );\r\n      return true;\r\n    }\r\n\r\n    if (\r\n      keyComb[ i ].removeSelectedShape &&\r\n      graph.isActionAllowed( e, keyComb[ i ] )\r\n    ) {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n\r\n      graph.selectedShapes.map( ( shape ) => {\r\n        shape.kill( keyComb[ i ].keepInDom );\r\n      } );\r\n    }\r\n\r\n    /* else if ( keyComb[ i ].series ) {\r\n\r\n      var series;\r\n      if ( keyComb[ i ].series === 'all' ) {\r\n        series = graph.series;\r\n      }\r\n\r\n      if ( !Array.isArray( keyComb[ i ].series ) ) {\r\n        series = [ series ];\r\n      }\r\n\r\n      if ( keyComb[ i ].options ) {\r\n        parameters.push( keyComb[ i ].options );\r\n      }\r\n\r\n      for ( var j = 0; j < series.length; i++ ) {\r\n        graph._serieExecute( series[ i ], methodName, parameters );\r\n      }\r\n      return true;\r\n    }*/\r\n  }\r\n\r\n  return false;\r\n}\r\n\r\nfunction doDom() {\r\n  // Create SVG element, set the NS\r\n  this.dom = document.createElementNS( Graph.ns, 'svg' );\r\n  this.dom.setAttributeNS(\r\n    'http://www.w3.org/2000/xmlns/',\r\n    'xmlns:xlink',\r\n    'http://www.w3.org/1999/xlink'\r\n  );\r\n  //this.dom.setAttributeNS(this.ns, 'xmlns:xlink', this.nsxml);\r\n  util.setAttributeTo( this.dom, {\r\n    xmlns: Graph.ns,\r\n    'font-family': this.options.fontFamily,\r\n    'font-size': this.options.fontSize\r\n  } );\r\n\r\n  try {\r\n    util.setAttributeTo( this.dom, {\r\n      // eslint-disable-next-line no-undef\r\n      'data-jsgraph-version': __VERSION__\r\n    } );\r\n  } catch ( e ) {\r\n    // ignore\r\n  }\r\n\r\n  this.defs = document.createElementNS( Graph.ns, 'defs' );\r\n  this.dom.appendChild( this.defs );\r\n\r\n  this.groupEvent = document.createElementNS( Graph.ns, 'g' );\r\n\r\n  this.rectEvent = document.createElementNS( Graph.ns, 'rect' );\r\n  util.setAttributeTo( this.rectEvent, {\r\n    'pointer-events': 'fill',\r\n    fill: 'transparent'\r\n  } );\r\n  this.groupEvent.appendChild( this.rectEvent );\r\n\r\n  this.dom.appendChild( this.groupEvent );\r\n\r\n  // Handling graph title\r\n  this.domTitle = document.createElementNS( Graph.ns, 'text' );\r\n  this.setTitle( this.options.title );\r\n  if ( this.options.titleFontSize ) {\r\n    this.setTitleFontSize( this.options.titleFontSize );\r\n  }\r\n  if ( this.options.titleFontColor ) {\r\n    this.setTitleFontSize( this.options.titleFontColor );\r\n  }\r\n  if ( this.options.titleFontFamily ) {\r\n    this.setTitleFontFamily( this.options.titleFontFamily );\r\n  }\r\n\r\n  util.setAttributeTo( this.domTitle, {\r\n    'text-anchor': 'middle',\r\n    y: 20\r\n  } );\r\n  this.groupEvent.appendChild( this.domTitle );\r\n  //\r\n\r\n  this.graphingZone = document.createElementNS( Graph.ns, 'g' );\r\n  this.updateGraphingZone();\r\n\r\n  this.groupEvent.appendChild( this.graphingZone );\r\n\r\n  /*  this.shapeZoneRect = document.createElementNS(this.ns, 'rect');\r\n  //this.shapeZoneRect.setAttribute('pointer-events', 'fill');\r\n  this.shapeZoneRect.setAttribute('fill', 'transparent');\r\n  this.shapeZone.appendChild(this.shapeZoneRect);\r\n*/\r\n  this.axisGroup = document.createElementNS( Graph.ns, 'g' );\r\n  this.graphingZone.appendChild( this.axisGroup );\r\n\r\n  this.groupGrids = document.createElementNS( Graph.ns, 'g' );\r\n\r\n  // With the z stacking, this should probably be removed\r\n  //this.groupGrids.setAttribute( 'clip-path', 'url(#_clipplot' + this._creation + ')' );\r\n\r\n  this.groupPrimaryGrids = document.createElementNS( Graph.ns, 'g' );\r\n  this.groupSecondaryGrids = document.createElementNS( Graph.ns, 'g' );\r\n\r\n  this.axisGroup.appendChild( this.groupGrids );\r\n\r\n  this.groupGrids.appendChild( this.groupSecondaryGrids );\r\n  this.groupGrids.appendChild( this.groupPrimaryGrids );\r\n\r\n  this.plotGroup = document.createElementNS( Graph.ns, 'g' );\r\n  this.graphingZone.appendChild( this.plotGroup );\r\n\r\n  // 5 September 2014. I encountered a case here shapeZone must be above plotGroup\r\n  /*this.shapeZone = document.createElementNS( this.ns, 'g' );\r\n  this.graphingZone.appendChild( this.shapeZone );\r\n*/\r\n\r\n  this.layers = [];\r\n\r\n  this._makeClosingLines();\r\n\r\n  this.clip = document.createElementNS( Graph.ns, 'clipPath' );\r\n  this.clip.setAttribute( 'id', `_clipplot${this._creation}` );\r\n  this.defs.appendChild( this.clip );\r\n\r\n  this.clipRect = document.createElementNS( Graph.ns, 'rect' );\r\n  this.clip.appendChild( this.clipRect );\r\n  this.clip.setAttribute( 'clipPathUnits', 'userSpaceOnUse' );\r\n\r\n  this.markerArrow = document.createElementNS( this.ns, 'marker' );\r\n  this.markerArrow.setAttribute( 'viewBox', '0 0 10 10' );\r\n  this.markerArrow.setAttribute( 'id', `arrow${this._creation}` );\r\n  this.markerArrow.setAttribute( 'refX', '6' );\r\n  this.markerArrow.setAttribute( 'refY', '5' );\r\n  this.markerArrow.setAttribute( 'markerUnits', 'strokeWidth' );\r\n  this.markerArrow.setAttribute( 'markerWidth', '8' );\r\n  this.markerArrow.setAttribute( 'markerHeight', '6' );\r\n  this.markerArrow.setAttribute( 'orient', 'auto' );\r\n  //this.markerArrow.setAttribute('fill', 'context-stroke');\r\n  //this.markerArrow.setAttribute('stroke', 'context-stroke');\r\n\r\n  var pathArrow = document.createElementNS( Graph.ns, 'path' );\r\n  pathArrow.setAttribute( 'd', 'M 0 0 L 10 5 L 0 10 z' );\r\n  //pathArrow.setAttribute( 'fill', 'context-stroke' );\r\n  this.markerArrow.appendChild( pathArrow );\r\n\r\n  this.defs.appendChild( this.markerArrow );\r\n\r\n  // Horionzal split marker for axis\r\n  this.markerHorizontalSplit = document.createElementNS( Graph.ns, 'marker' );\r\n  this.markerHorizontalSplit.setAttribute( 'viewBox', '0 0 6 8' );\r\n  this.markerHorizontalSplit.setAttribute(\r\n    'id',\r\n    `horionzalsplit_${this.getId()}`\r\n  );\r\n  this.markerHorizontalSplit.setAttribute( 'refX', '3' );\r\n  this.markerHorizontalSplit.setAttribute( 'refY', '4' );\r\n  this.markerHorizontalSplit.setAttribute( 'markerUnits', 'strokeWidth' );\r\n  this.markerHorizontalSplit.setAttribute( 'markerWidth', '6' );\r\n  this.markerHorizontalSplit.setAttribute( 'markerHeight', '8' );\r\n\r\n  var path = document.createElementNS( Graph.ns, 'line' );\r\n  path.setAttribute( 'x1', '0' );\r\n  path.setAttribute( 'y1', '8' );\r\n\r\n  path.setAttribute( 'x2', '6' );\r\n  path.setAttribute( 'y2', '0' );\r\n\r\n  path.setAttribute( 'stroke', 'black' );\r\n  this.markerHorizontalSplit.appendChild( path );\r\n\r\n  this.defs.appendChild( this.markerHorizontalSplit );\r\n\r\n  // Vertical split marker for axis\r\n  this.markerVerticalSplit = document.createElementNS( Graph.ns, 'marker' );\r\n  this.markerVerticalSplit.setAttribute( 'viewBox', '0 0 8 6' );\r\n  this.markerVerticalSplit.setAttribute( 'id', `verticalsplit_${this.getId()}` );\r\n  this.markerVerticalSplit.setAttribute( 'refX', '4' );\r\n  this.markerVerticalSplit.setAttribute( 'refY', '3' );\r\n  this.markerVerticalSplit.setAttribute( 'markerUnits', 'strokeWidth' );\r\n  this.markerVerticalSplit.setAttribute( 'markerWidth', '8' );\r\n  this.markerVerticalSplit.setAttribute( 'markerHeight', '6' );\r\n\r\n  var path = document.createElementNS( Graph.ns, 'line' );\r\n\r\n  path.setAttribute( 'x1', '0' );\r\n  path.setAttribute( 'y1', '0' );\r\n\r\n  path.setAttribute( 'x2', '8' );\r\n  path.setAttribute( 'y2', '6' );\r\n\r\n  path.setAttribute( 'stroke', 'black' );\r\n  this.markerVerticalSplit.appendChild( path );\r\n  this.defs.appendChild( this.markerVerticalSplit );\r\n\r\n  this.vertLineArrow = document.createElementNS( Graph.ns, 'marker' );\r\n  this.vertLineArrow.setAttribute( 'viewBox', '0 0 10 10' );\r\n  this.vertLineArrow.setAttribute( 'id', `verticalline${this._creation}` );\r\n  this.vertLineArrow.setAttribute( 'refX', '0' );\r\n  this.vertLineArrow.setAttribute( 'refY', '5' );\r\n  this.vertLineArrow.setAttribute( 'markerUnits', 'strokeWidth' );\r\n  this.vertLineArrow.setAttribute( 'markerWidth', '20' );\r\n  this.vertLineArrow.setAttribute( 'markerHeight', '10' );\r\n  this.vertLineArrow.setAttribute( 'orient', 'auto' );\r\n  //this.vertLineArrow.setAttribute('fill', 'context-stroke');\r\n  //this.vertLineArrow.setAttribute('stroke', 'context-stroke');\r\n  this.vertLineArrow.setAttribute( 'stroke-width', '1px' );\r\n\r\n  var pathVertLine = document.createElementNS( Graph.ns, 'path' );\r\n  pathVertLine.setAttribute( 'd', 'M 0 -10 L 0 10' );\r\n  pathVertLine.setAttribute( 'stroke', 'black' );\r\n\r\n  this.vertLineArrow.appendChild( pathVertLine );\r\n\r\n  this.defs.appendChild( this.vertLineArrow );\r\n\r\n  // Removed with z stacking ?\r\n  //    this.plotGroup.setAttribute( 'clip-path', 'url(#_clipplot' + this._creation + ')' );\r\n\r\n  this.bypassHandleMouse = false;\r\n}\r\n\r\nfunction _registerEvents( graph ) {\r\n  var self = graph;\r\n\r\n  if ( !graph.wrapper ) {\r\n    throw 'No wrapper exists. Cannot register the events.';\r\n  }\r\n\r\n  graph.dom.setAttribute( 'tabindex', 0 );\r\n\r\n  graph.dom.addEventListener( 'keydown', ( e ) => {\r\n    _handleKey( graph, e, 'keydown' );\r\n  } );\r\n\r\n  graph.dom.addEventListener( 'keypress', ( e ) => {\r\n    _handleKey( graph, e, 'keypress' );\r\n  } );\r\n\r\n  graph.dom.addEventListener( 'keyup', ( e ) => {\r\n    _handleKey( graph, e, 'keyup' );\r\n  } );\r\n  // Not sure this has to be prevented\r\n\r\n  // August 17th, 2017: I extended the graph.groupEvent to the more general graph.dom to make the zoom plugin more\r\n  // intuitive. Let us see if it breaks another example...\r\n  graph.dom.addEventListener( 'mousemove', ( e ) => {\r\n    //e.preventDefault();\r\n    var coords = graph._getXY( e );\r\n    _handleMouseMove( graph, coords.x, coords.y, e );\r\n  } );\r\n\r\n  graph.dom.addEventListener( 'mouseleave', ( e ) => {\r\n    _handleMouseLeave( graph );\r\n  } );\r\n\r\n  graph.groupEvent.addEventListener( 'mousedown', ( e ) => {\r\n    graph.focus();\r\n\r\n    //   e.preventDefault();\r\n    if ( e.which == 3 || e.ctrlKey ) {\r\n      return;\r\n    }\r\n\r\n    var coords = graph._getXY( e );\r\n    _handleMouseDown( graph, coords.x, coords.y, e );\r\n  } );\r\n\r\n  graph.dom.addEventListener( 'mouseup', ( e ) => {\r\n    graph.emit( 'mouseUp', e );\r\n    var coords = graph._getXY( e );\r\n\r\n    _handleMouseUp( graph, coords.x, coords.y, e );\r\n  } );\r\n\r\n  graph.wrapper.addEventListener( 'mouseup', ( e ) => {\r\n    e.stopPropagation();\r\n  } );\r\n\r\n  graph.dom.addEventListener( 'dblclick', ( e ) => {\r\n    graph.emit( 'dblClick', e );\r\n    var coords = graph._getXY( e );\r\n\r\n    _handleDblClick( graph, coords.x, coords.y, e );\r\n  } );\r\n\r\n  graph.groupEvent.addEventListener( 'click', ( e ) => {\r\n    // Cancel right click or Command+Click\r\n    if ( e.which == 3 || e.ctrlKey ) {\r\n      return;\r\n    }\r\n\r\n    //   e.preventDefault();\r\n    var coords = graph._getXY( e );\r\n\r\n    if ( !graph.prevent( false ) ) {\r\n      _handleClick( graph, coords.x, coords.y, e );\r\n    }\r\n\r\n    //}, 200 );\r\n  } );\r\n\r\n  graph.groupEvent.addEventListener( 'mousewheel', ( e ) => {\r\n    var deltaY = e.wheelDeltaY || e.wheelDelta || -e.deltaY;\r\n    var coords = graph._getXY( e );\r\n    _handleMouseWheel( graph, deltaY, coords.x, coords.y, e );\r\n\r\n    return false;\r\n  } );\r\n\r\n  graph.groupEvent.addEventListener( 'wheel', ( e ) => {\r\n    var coords = graph._getXY( e );\r\n    var deltaY = e.wheelDeltaY || e.wheelDelta || -e.deltaY;\r\n    _handleMouseWheel( graph, deltaY, coords.x, coords.y, e );\r\n\r\n    return false;\r\n  } );\r\n}\r\n\r\nfunction _handleMouseDown( graph, x, y, e ) {\r\n  var self = graph;\r\n\r\n  if ( graph.forcedPlugin ) {\r\n    graph.activePlugin = graph.forcedPlugin;\r\n    graph._pluginExecute( graph.activePlugin, 'onMouseDown', [ graph, x, y, e ] );\r\n    return;\r\n  }\r\n\r\n  if ( graph.activePlugin ) {\r\n    graph.activePlugin = false;\r\n  }\r\n\r\n  checkMouseActions( graph, e, [ graph, x, y, e ], 'onMouseDown' );\r\n}\r\n\r\nfunction _handleMouseMove( graph, x, y, e ) {\r\n  if ( graph.bypassHandleMouse ) {\r\n    graph.bypassHandleMouse.handleMouseMove( e );\r\n    return;\r\n  }\r\n\r\n  if (\r\n    graph.activePlugin &&\r\n    graph._pluginExecute( graph.activePlugin, 'onMouseMove', [ graph, x, y, e ] )\r\n  ) {\r\n    return;\r\n  }\r\n\r\n  let xRef;\r\n  let xOverwritePx = x;\r\n\r\n  //\t\t\treturn;\r\n\r\n  graph._applyToAxes(\r\n    'handleMouseMove',\r\n    [ x - graph.options.paddingLeft, e ],\r\n    true,\r\n    false\r\n  );\r\n  graph._applyToAxes(\r\n    'handleMouseMove',\r\n    [ y - graph.options.paddingTop, e ],\r\n    false,\r\n    true\r\n  );\r\n\r\n  if ( !graph.activePlugin ) {\r\n    var index;\r\n\r\n    // Takes care of the tracking line\r\n    if ( graph.options.trackingLine && graph.options.trackingLine.enable ) {\r\n      if (\r\n        graph.options.trackingLine.mode == 'common' &&\r\n        graph.options.trackingLine.snapToSerie\r\n      ) {\r\n        var snapToSerie = graph.options.trackingLine.snapToSerie;\r\n        index = snapToSerie.handleMouseMove( false, true );\r\n\r\n        if ( graph.trackingLineShape ) {\r\n          if ( !index ) {\r\n            graph.trackingLineShape.hide();\r\n          } else {\r\n            graph.trackingLineShape.show();\r\n\r\n            graph.trackingLineShape.getPosition( 0 ).x = index.xClosest;\r\n            graph.trackingLineShape.getPosition( 1 ).x = index.xClosest;\r\n            graph.trackingLineShape.redraw();\r\n\r\n            xRef = index.xClosest; //\r\n            xOverwritePx =\r\n              snapToSerie.getXAxis().getPx( index.xClosest ) +\r\n              graph.options.paddingLeft;\r\n          }\r\n        }\r\n\r\n        var series = graph.options.trackingLine.series;\r\n\r\n        /*\r\n        // Gets a default value\r\n        if ( !series ) {\r\n          series = graph.getSeries();map( function( serie ) {\r\n            return {\r\n              serie: serie,\r\n              withinPx: 20,\r\n              withinVal: -1\r\n            };\r\n          } );\r\n        }*/\r\n\r\n        if ( !series ) {\r\n          return;\r\n        }\r\n\r\n        if ( !index ) {\r\n          return;\r\n        }\r\n        graph._trackingLegend = _trackingLegendSerie(\r\n          graph,\r\n          series,\r\n          xOverwritePx,\r\n          y,\r\n          graph._trackingLegend,\r\n          graph.options.trackingLine.textMethod ?\r\n          graph.options.trackingLine.textMethod :\r\n          trackingLineDefaultTextMethod,\r\n          xRef\r\n        );\r\n      } else if ( graph.options.trackingLine.mode == 'individual' ) {\r\n        // Series looping\r\n\r\n        const output = [];\r\n        graph.options.trackingLine.series.forEach( ( serie ) => {\r\n          //        const index = serie.handleMouseMove( false, true );\r\n          //console.log( index );\r\n\r\n          if ( !serie.options.tracking ) {\r\n            return;\r\n          }\r\n\r\n          const closestPoint = serie.getClosestPointToXY(\r\n            serie.getXAxis().getMouseVal(),\r\n            serie.getYAxis().getMouseVal(),\r\n            serie.options.tracking.withinPx,\r\n            serie.options.tracking.withinPx,\r\n            serie.options.tracking.useAxis\r\n          );\r\n\r\n          // When all legends are in common mode, let's make sure we remove the serie-specific legend\r\n          if ( graph.options.trackingLine.legendType == 'common' ) {\r\n            serie._trackingLegend = _trackingLegendSerie(\r\n              graph,\r\n              [],\r\n              false,\r\n              false,\r\n              serie._trackingLegend\r\n            );\r\n          }\r\n\r\n          // What happens if there is no point ?\r\n          if ( !closestPoint ) {\r\n            if ( serie.trackingShape ) {\r\n              serie.trackingShape.hide();\r\n\r\n              if ( graph.options.trackingLine.legendType == 'independent' ) {\r\n                serie._trackingLegend = _trackingLegendSerie(\r\n                  graph,\r\n                  [],\r\n                  false,\r\n                  false,\r\n                  serie._trackingLegend\r\n                );\r\n              }\r\n            }\r\n          } else {\r\n            // We found a point: happy !\r\n            if ( serie.trackingShape ) {\r\n              serie.trackingShape.show();\r\n\r\n              serie.trackingShape.setPosition( {\r\n                x: closestPoint.xClosest,\r\n                y: closestPoint.yClosest\r\n              } );\r\n\r\n              serie.trackingShape.redraw();\r\n\r\n              // If we want one legend per serie, then we got to show it\r\n              if ( graph.options.trackingLine.legendType == 'independent' ) {\r\n                serie._trackingLegend = _trackingLegendSerie(\r\n                  graph,\r\n                  [ {\r\n                    serie: serie,\r\n                    closestPoint: closestPoint\r\n                  } ],\r\n                  x,\r\n                  y,\r\n                  serie._trackingLegend\r\n                );\r\n              }\r\n              serie.emit( 'track', closestPoint );\r\n            }\r\n          }\r\n\r\n          if ( closestPoint )\r\n            output.push( {\r\n              serie: serie,\r\n              closestPoint: closestPoint\r\n            } );\r\n        } );\r\n\r\n        if ( graph.options.trackingLine.legendType == 'common' ) {\r\n          graph._trackingLegend = _trackingLegendSerie(\r\n            graph,\r\n            output,\r\n            x,\r\n            y,\r\n            graph._trackingLegend\r\n          );\r\n        } else {\r\n          graph._trackingLegend = _trackingLegendSerie(\r\n            graph,\r\n            [],\r\n            false,\r\n            false,\r\n            graph._trackingLegend\r\n          );\r\n        }\r\n      }\r\n    }\r\n  }\r\n  // End takes care of the tracking line\r\n\r\n  if ( graph.options.mouseMoveData ) {\r\n    var results = {};\r\n\r\n    for ( var i = 0; i < graph.series.length; i++ ) {\r\n      results[ graph.series[ i ].getName() ] = graph.series[ i ].getClosestPointToXY();\r\n    }\r\n\r\n    if ( typeof graph.options.mouseMoveData == \"function\" ) {\r\n      graph.options.mouseMoveData.call( graph, e, results );\r\n    }\r\n\r\n    graph.emit( \"mouseMoveData\", results );\r\n  }\r\n\r\n  checkMouseActions( graph, e, [ graph, x, y, e ], 'onMouseMove' );\r\n}\r\n\r\nfunction checkMouseActions( graph, e, parameters, methodName ) {\r\n  var keyComb = graph.options.mouseActions,\r\n    i,\r\n    l,\r\n    executed = false;\r\n\r\n  for ( i = 0, l = keyComb.length; i < l; i++ ) {\r\n    if ( keyComb[ i ].plugin ) {\r\n      // Is it a plugin ?\r\n\r\n      if (\r\n        graph.forcedPlugin == keyComb[ i ].plugin ||\r\n        graph.isActionAllowed( e, keyComb[ i ] )\r\n      ) {\r\n        if ( keyComb[ i ].options ) {\r\n          parameters.push( keyComb[ i ].options );\r\n        }\r\n\r\n        // Lease the mouse action to the current action\r\n        // 25.10.2017: Except for mousewheel. See #111\r\n        if ( e.type !== 'wheel' && e.type !== 'mousewheel' ) {\r\n          graph.activePlugin = keyComb[ i ].plugin;\r\n        }\r\n\r\n        graph._pluginExecute( keyComb[ i ].plugin, methodName, parameters );\r\n        executed = true;\r\n        continue;\r\n      }\r\n    } else if ( keyComb[ i ].callback && graph.isActionAllowed( e, keyComb[ i ] ) ) {\r\n      if ( keyComb[ i ].options ) {\r\n        parameters.push( keyComb[ i ].options );\r\n      }\r\n\r\n      keyComb[ i ].callback.apply( graph, parameters );\r\n      executed = true;\r\n      continue;\r\n    } else if ( keyComb[ i ].series ) {\r\n      var series;\r\n      if ( keyComb[ i ].series === 'all' ) {\r\n        series = graph.series;\r\n      }\r\n\r\n      if ( !Array.isArray( keyComb[ i ].series ) ) {\r\n        series = [ series ];\r\n      }\r\n\r\n      if ( keyComb[ i ].options ) {\r\n        parameters.push( keyComb[ i ].options );\r\n      }\r\n\r\n      for ( var j = 0; j < series.length; i++ ) {\r\n        graph._serieExecute( series[ i ], methodName, parameters );\r\n      }\r\n      executed = true;\r\n      continue;\r\n    }\r\n  }\r\n\r\n  return executed;\r\n}\r\n\r\n/**\r\n *\r\n * @returns {DOMElement} legend - The legend element, or the newly created one if it didn't exist\r\n */\r\nvar _trackingLegendSerie = function(\r\n  graph,\r\n  seriesOutput,\r\n  posXPx,\r\n  posYPx,\r\n  legend\r\n) {\r\n  const textMethod =\r\n    graph.options.trackingLine.textMethod || trackingLineDefaultTextMethod;\r\n\r\n  var justCreated = false;\r\n  if ( !legend && graph.options.trackingLine.legend ) {\r\n    justCreated = true;\r\n    legend = _makeTrackingLegend( graph );\r\n  }\r\n  if ( !graph.options.trackingLine.legend ) {\r\n    return;\r\n  }\r\n\r\n  if ( seriesOutput.length == 0 ) {\r\n    legend.style.display = 'none';\r\n    return legend;\r\n  } else {\r\n    if ( legend.style.display == 'none' || justCreated ) {\r\n      forceTrackingLegendMode( graph, legend, posXPx, posYPx, true );\r\n    } else {\r\n      _trackingLegendMove( graph, legend, posXPx, posYPx );\r\n    }\r\n\r\n    legend.style.display = 'block';\r\n    var txt = textMethod( seriesOutput, undefined, posXPx, posYPx );\r\n\r\n    legend.innerHTML = txt;\r\n\r\n    //legend.innerHTML = textMethod( output, xValue, x, y );\r\n  }\r\n\r\n  return legend;\r\n};\r\n\r\nvar forceTrackingLegendMode = function( graph, legend, toX, toY, skip ) {\r\n  var start = Date.now(),\r\n    h = legend.offsetHeight,\r\n    startX = parseInt( legend.style.marginLeft.replace( 'px', '' ) || 0, 10 ),\r\n    startY = parseInt( legend.style.marginTop.replace( 'px', '' ) || 0, 10 );\r\n\r\n  toX =\r\n    toX > graph.getWidth() / 2 ?\r\n    toX - ( toX % 10 ) - 20 - legend.offsetWidth :\r\n    toX - ( toX % 10 ) + 30;\r\n  toY = toY - ( toY % 10 ) + h / 2;\r\n\r\n  if ( skip ) {\r\n    legend.style.marginLeft = `${toX}px`;\r\n    legend.style.marginTop = `${toY}px`;\r\n    return;\r\n  }\r\n\r\n  function next() {\r\n    var progress = ( Date.now() - start ) / 200;\r\n    if ( progress > 1 ) {\r\n      progress = 1;\r\n    }\r\n\r\n    legend.style.marginLeft = `${( toX - startX ) * progress + startX}px`;\r\n    legend.style.marginTop = `${( toY - startY ) * progress + startY}px`;\r\n\r\n    if ( progress < 1 ) {\r\n      window.requestAnimationFrame( next );\r\n    }\r\n  }\r\n\r\n  window.requestAnimationFrame( next );\r\n};\r\n\r\nvar _trackingLegendMove = ( ...args ) => {\r\n  util.debounce( forceTrackingLegendMode, 50 )( ...args );\r\n};\r\n\r\nfunction _makeTrackingLegend( graph ) {\r\n  var group = document.createElement( 'div' );\r\n  group.setAttribute( 'class', 'trackingLegend' );\r\n  group.style.position = 'absolute';\r\n  group.style.borderRadius = '4px';\r\n  group.style.boxShadow = '1px 1px 3px 0px rgba(100,100,100,0.6)';\r\n  group.style.border = '2px solid #333333';\r\n  group.style.backgroundColor = 'rgba(255, 255, 255, 0.5 )';\r\n  group.style.pointerEvents = 'none';\r\n  group.style.paddingTop = '5px';\r\n  group.style.paddingBottom = '5px';\r\n  group.style.paddingLeft = '10px';\r\n  group.style.paddingRight = '10px';\r\n\r\n  graph.getWrapper().insertBefore( group, graph.getDom() );\r\n\r\n  return group;\r\n}\r\n\r\nconst trackingLineDefaultTextMethod = ( output ) => {\r\n  let txt = '';\r\n  for ( var i in output ) {\r\n    if ( !output[ i ].closestPoint ) {\r\n      continue;\r\n    }\r\n\r\n    txt += `${output[i].serie.getName()}: ${output[i].serie\r\n      .getYAxis()\r\n      .valueToHtml( output[i].closestPoint.yClosest, undefined, undefined, 2 )}\r\n      `;\r\n  }\r\n  return txt;\r\n};\r\n\r\nfunction _handleDblClick( graph, x, y, e ) {\r\n  // var _x = x - graph.options.paddingLeft;\r\n  // var _y = y - graph.options.paddingTop;\r\n  //var pref = graph.options.dblclick;\r\n  checkMouseActions( graph, e, [ x, y, e ], 'onDblClick' );\r\n  /*\r\n      if ( !pref || !pref.type ) {\r\n        return;\r\n      }\r\n\r\n      switch ( pref.type ) {\r\n\r\n        case 'plugin':\r\n\r\n          var plugin;\r\n\r\n          if ( ( plugin = graph.plugins[ pref.plugin ] ) ) {\r\n\r\n            plugin.onDblClick( graph, x, y, pref.options, e );\r\n          }\r\n\r\n          break;\r\n      }*/\r\n}\r\n\r\nfunction _handleMouseUp( graph, x, y, e ) {\r\n  if ( graph.bypassHandleMouse ) {\r\n    graph.bypassHandleMouse.handleMouseUp( e );\r\n    graph.activePlugin = false;\r\n    return;\r\n  }\r\n\r\n  graph._pluginExecute( graph.activePlugin, 'onMouseUp', [ graph, x, y, e ] );\r\n  graph.activePlugin = false;\r\n}\r\n\r\nfunction _handleClick( graph, x, y, e ) {\r\n  graph.emit( 'click', [ graph, x, y, e ] );\r\n  // Not on a shape\r\n  checkMouseActions( graph, e, [ x, y, e ], 'onClick' );\r\n\r\n  if (\r\n    !e.target.jsGraphIsShape &&\r\n    !graph.prevent( false ) &&\r\n    graph.options.shapesUnselectOnClick\r\n  ) {\r\n    graph.unselectShapes();\r\n  }\r\n}\r\n\r\nfunction _getAxis( graph, num, options, pos ) {\r\n  var options = options || {};\r\n  var inst;\r\n\r\n  var _availableAxes = {\r\n    def: {\r\n      x: graph.getConstructor( 'graph.axis.x' ),\r\n      y: graph.getConstructor( 'graph.axis.y' )\r\n    },\r\n\r\n    time: {\r\n      x: graph.getConstructor( 'graph.axis.x.time' )\r\n    },\r\n\r\n    bar: {\r\n      x: graph.getConstructor( 'graph.axis.x.bar' )\r\n    }\r\n  };\r\n\r\n  switch ( options.type ) {\r\n    case 'time':\r\n      var axisInstance = _availableAxes.time;\r\n      break;\r\n\r\n    case 'bar':\r\n      var axisInstance = _availableAxes.bar;\r\n      break;\r\n\r\n    case 'broken':\r\n      var axisInstance = _availableAxes.broken;\r\n      break;\r\n\r\n    default:\r\n      var axisInstance = _availableAxes.def;\r\n      break;\r\n  }\r\n\r\n  switch ( pos ) {\r\n    case 'top':\r\n    case 'bottom':\r\n      inst = axisInstance.x;\r\n      break;\r\n\r\n    case 'left':\r\n    case 'right':\r\n      inst = axisInstance.y;\r\n      break;\r\n\r\n    default:\r\n      return;\r\n  }\r\n\r\n  num = num || 0;\r\n\r\n  if ( typeof num == 'object' ) {\r\n    options = num;\r\n    num = 0;\r\n  }\r\n\r\n  if ( !graph.axis[ pos ][ num ] ) {\r\n    graph.axis[ pos ][ num ] = new inst( graph, pos, options );\r\n    graph.axis[ pos ][ num ].init( graph, options );\r\n  }\r\n\r\n  return graph.axis[ pos ][ num ];\r\n}\r\n\r\nfunction _closeLine( graph, mode, x1, x2, y1, y2 ) {\r\n  if ( graph.options.close === false ) {\r\n    return;\r\n  }\r\n\r\n  var l = 0;\r\n\r\n  graph.axis[ mode ].map( function( g ) {\r\n    if ( g.isDisplayed() && !g.floating ) {\r\n      l++;\r\n    }\r\n  } );\r\n\r\n  if ( ( graph.options.close === true || graph.options.close[ mode ] ) && l == 0 ) {\r\n    graph.closingLines[ mode ].setAttribute( 'display', 'block' );\r\n    graph.closingLines[ mode ].setAttribute( 'x1', x1 );\r\n    graph.closingLines[ mode ].setAttribute( 'x2', x2 );\r\n    graph.closingLines[ mode ].setAttribute( 'y1', y1 );\r\n    graph.closingLines[ mode ].setAttribute( 'y2', y2 );\r\n  } else {\r\n    graph.closingLines[ mode ].setAttribute( 'display', 'none' );\r\n  }\r\n}\r\n\r\nfunction _handleMouseWheel( graph, delta, coordX, coordY, e ) {\r\n  if ( checkMouseActions( graph, e, [ delta, e, coordX, coordY ], 'onMouseWheel' ) ) {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n  }\r\n}\r\n\r\nfunction _handleMouseLeave( graph ) {\r\n  if ( graph.options.handleMouseLeave ) {\r\n    graph.options.handleMouseLeave.call( graph );\r\n  }\r\n}\r\n\r\nfunction haveAxesChanged( graph ) {\r\n  var temp = graph._axesHaveChanged;\r\n  graph._axesHaveChanged = false;\r\n  return temp;\r\n}\r\n\r\nfunction hasSizeChanged( graph ) {\r\n  var temp = graph._sizeChanged;\r\n  graph._sizeChanged = false;\r\n  return temp;\r\n}\r\n\r\n// Constants\r\nGraph.SERIE_LINE = Symbol();\r\nGraph.SERIE_SCATTER = Symbol();\r\nGraph.SERIE_CONTOUR = Symbol();\r\nGraph.SERIE_BAR = Symbol();\r\nGraph.SERIE_BOX = Symbol();\r\nGraph.SERIE_ZONE = Symbol();\r\nGraph.SERIE_LINE_COLORED = Symbol();\r\nGraph.SERIE_ZONE = Symbol();\r\nGraph.SERIE_DENSITYMAP = Symbol();\r\nGraph.SERIE_LINE_3D = Symbol();\r\nGraph.SERIE_ZONE_3D = Symbol();\r\n\r\nGraph.TICKS_OUTSIDE = Symbol();\r\nGraph.TICKS_INSIDE = Symbol();\r\nGraph.TICKS_CENTERED = Symbol();\r\n\r\nGraph.ns = 'http://www.w3.org/2000/svg';\r\nGraph.nsxlink = 'http://www.w3.org/1999/xlink';\r\n\r\nexport default Graph;","import GraphPosition from './graph.position.js';\r\nimport * as util from './graph.util.js';\r\n\r\n/**\r\n * Default legend configuration\r\n * @name LegendOptionsDefault\r\n * @object\r\n * @static\r\n * @prop {Boolean} frame - <code>true</code> to display a frame around the legend\r\n * @prop {Number} frameWidth - The width of the frame stroke\r\n * @prop {String} frameColor - The stroke color of the frame\r\n * @prop {String} backgroundColor - The background color of the frame\r\n * @prop {Number} paddingLeft - The left padding\r\n * @prop {Number} paddingRight - The right padding\r\n * @prop {Number} paddingTop - The top padding\r\n * @prop {Number} paddingBottom - The bottom padding\r\n * @prop {Boolean} shapesToggleable - <code>true</code> to toggle the shapes linked to serie with its status (shown or hidden)\r\n * @prop {Boolean} isSerieHideable - <code>true</code> to allow series to be hidden through the legend\r\n * @prop {Boolean} isSerieSelectable - <code>true</code> to allow series to be selected through the legend\r\n */\r\nvar legendDefaults = {\r\n  backgroundColor: 'rgba(255, 255, 255, 0.8)',\r\n  frame: true,\r\n  frameWidth: 1,\r\n  frameColor: 'black',\r\n  paddingTop: 10,\r\n  paddingLeft: 10,\r\n  paddingBottom: 10,\r\n  paddingRight: 10,\r\n  color: 'black',\r\n  frameRounding: 0,\r\n\r\n  movable: false,\r\n\r\n  shapesToggleable: true,\r\n  isSerieHideable: true,\r\n  isSerieSelectable: true\r\n};\r\n\r\n/**\r\n * Legend constructor. You should not call this method directly, but rather use {@link graph.makeLegend}\r\n * @example var legend = graph.makeLegend( {  backgroundColor: 'rgba(255, 255, 255, 0.8)',\r\n * frame: true,\r\n * frameWidth: 1,\r\n * frameColor: 'black',\r\n * paddingTop: 10,\r\n * paddingLeft: 10,\r\n * paddingBottom: 10,\r\n * paddingRight: 10,\r\n * frameRounding: 3,\r\n *\r\n * movable: false,\r\n *\r\n * shapesToggleable: true,\r\n * isSerieHideable: true,\r\n * isSerieSelectable: true\r\n * } );\r\n */\r\nclass Legend {\r\n  constructor( graph, options ) {\r\n    this.options = util.extend( {}, legendDefaults, options );\r\n\r\n    this.graph = graph;\r\n    this.svg = document.createElementNS( this.graph.ns, 'g' );\r\n    this.subG = document.createElementNS( this.graph.ns, 'g' );\r\n\r\n    this.groups = [];\r\n    this.rect = document.createElementNS( this.graph.ns, 'rect' );\r\n    this.rectBottom = document.createElementNS( this.graph.ns, 'rect' );\r\n\r\n    this.rect.setAttribute( 'x', 0 );\r\n    this.rect.setAttribute( 'y', 0 );\r\n\r\n    this.rectBottom.setAttribute( 'x', 0 );\r\n    this.rectBottom.setAttribute( 'y', 0 );\r\n\r\n    this.series = false;\r\n\r\n    this.svg.setAttribute( 'display', 'none' );\r\n    this.pos = {\r\n      x: undefined,\r\n      y: undefined,\r\n      transformX: 0,\r\n      transformY: 0\r\n    };\r\n\r\n    this.setEvents();\r\n\r\n    this.eyeId = util.guid();\r\n    this.eyeCrossedId = util.guid();\r\n\r\n    var eyeClosed = util.SVGParser(\r\n      `<svg xmlns=\"http://www.w3.org/2000/svg\"><symbol id=\"${\r\n        this.eyeCrossedId\r\n      }\" viewBox=\"0 -256 1850 1850\"><rect pointer-events=\"fill\" fill=\"transparent\" x=\"-256\" y=\"0\" width=\"2106\" height=\"1850\" /><g transform=\"matrix(1,0,0,-1,30.372881,1214.339)\"><path d=\"m 555,201 78,141 q -87,63 -136,159 -49,96 -49,203 0,121 61,225 Q 280,812 128,576 295,318 555,201 z m 389,759 q 0,20 -14,34 -14,14 -34,14 -125,0 -214.5,-89.5 Q 592,829 592,704 q 0,-20 14,-34 14,-14 34,-14 20,0 34,14 14,14 14,34 0,86 61,147 61,61 147,61 20,0 34,14 14,14 14,34 z m 363,191 q 0,-7 -1,-9 Q 1201,954 991,576 781,198 675,9 l -49,-89 q -10,-16 -28,-16 -12,0 -134,70 -16,10 -16,28 0,12 44,87 Q 349,154 228.5,262 108,370 20,507 0,538 0,576 q 0,38 20,69 153,235 380,371 227,136 496,136 89,0 180,-17 l 54,97 q 10,16 28,16 5,0 18,-6 13,-6 31,-15.5 18,-9.5 33,-18.5 15,-9 31.5,-18.5 16.5,-9.5 19.5,-11.5 16,-10 16,-27 z m 37,-447 Q 1344,565 1265,450.5 1186,336 1056,286 l 280,502 q 8,-45 8,-84 z m 448,-128 q 0,-35 -20,-69 Q 1733,443 1663,362 1513,190 1315.5,95 1118,0 896,0 l 74,132 q 212,18 392.5,137 180.5,119 301.5,307 -115,179 -282,294 l 63,112 q 95,-64 182.5,-153 87.5,-89 144.5,-184 20,-34 20,-69 z\" fill=\"#c0c0c0\"></path></g></symbol></svg>`\r\n    );\r\n    //  var eyeClosed = util.SVGParser('<svg xmlns=\"http://www.w3.org/2000/svg\"><symbol id=\"' + this.eyeId + '\" viewBox=\"0 0 100 100\"><rect fill=\"black\" x=\"0\" y=\"0\" width=\"100\" height=\"100\" /></symbol></svg>');\r\n\r\n    /* var eyeClosed = document.createElementNS( this.graph.ns, \"symbol\");\r\n      eyeClosed.setAttribute('id', this.eyeId );\r\n      eyeClosed.setAttribute(\"viewBox\", '0 0 100 100');\r\n\r\n      var rect = document.createElementNS( this.graph.ns, \"rect\" );\r\n      rect.setAttribute('width', 100 );\r\n      rect.setAttribute('height', 100 );\r\n      rect.setAttribute('x', 0 );\r\n      rect.setAttribute('y', 0 );\r\n      rect.setAttribute('fill', 'black');\r\n      eyeClosed.appendChild( rect );\r\n  */\r\n    var eye = util.SVGParser(\r\n      `<svg xmlns=\"http://www.w3.org/2000/svg\"><symbol id=\"${\r\n        this.eyeId\r\n      }\" viewBox=\"0 -256 1850 1850\"><rect pointer-events=\"fill\" x=\"-256\" y=\"0\" fill=\"transparent\" width=\"2106\" height=\"1850\" /><g transform=\"matrix(1,0,0,-1,30.372881,1259.8983)\"><path d=\"m 1664,576 q -152,236 -381,353 61,-104 61,-225 0,-185 -131.5,-316.5 Q 1081,256 896,256 711,256 579.5,387.5 448,519 448,704 448,825 509,929 280,812 128,576 261,371 461.5,249.5 662,128 896,128 1130,128 1330.5,249.5 1531,371 1664,576 z M 944,960 q 0,20 -14,34 -14,14 -34,14 -125,0 -214.5,-89.5 Q 592,829 592,704 q 0,-20 14,-34 14,-14 34,-14 20,0 34,14 14,14 14,34 0,86 61,147 61,61 147,61 20,0 34,14 14,14 14,34 z m 848,-384 q 0,-34 -20,-69 Q 1632,277 1395.5,138.5 1159,0 896,0 633,0 396.5,139 160,278 20,507 0,542 0,576 q 0,34 20,69 140,229 376.5,368 236.5,139 499.5,139 263,0 499.5,-139 236.5,-139 376.5,-368 20,-35 20,-69 z\" fill=\"#444444\" /></g></symbol></svg>`\r\n    );\r\n\r\n    this.svg.appendChild( document.adoptNode( eye.documentElement.firstChild ) );\r\n    this.svg.appendChild(\r\n      document.adoptNode( eyeClosed.documentElement.firstChild )\r\n    );\r\n\r\n    this.svg.appendChild( this.subG );\r\n\r\n    this.applyStyle();\r\n  }\r\n\r\n  /**\r\n   * Sets the position of the legend\r\n   * @param {Position} position - the position to set the legend to versus the graph main axes ({@link Graph#getXAxis} and {@link Graph#getYAxis})\r\n   * @param {String} alignToX - \"right\" or \"left\". References the legend right or left boundary using the position parameter\r\n   * @param {String} alignToY - \"top\" or \"bottom\". References the legend top or bottom boundary using the position parameter\r\n   * @example legend.setPosition( { x: 'max', y: '0px' }, 'right', 'top' ); // The rightmost side of the legend will at the maximum value of the axis, and will be positioned at the top\r\n   */\r\n  setPosition( position, alignToX, alignToY ) {\r\n    if ( !position ) {\r\n      return;\r\n    }\r\n\r\n    this.position = position;\r\n    this.alignToX = alignToX || 'left';\r\n    this.alignToY = alignToY || 'top';\r\n  }\r\n\r\n  setDraggable( bln ) {\r\n    this.options.movable = bln;\r\n  }\r\n\r\n  setAutoPosition( position ) {\r\n    if (\r\n      [ 'bottom', 'left', 'top', 'right' ].indexOf(\r\n        ( position = position.toLowerCase() )\r\n      ) > -1\r\n    ) {\r\n      this.autoPosition = position;\r\n      return this;\r\n    }\r\n\r\n    this.requireDelayedUpdate();\r\n    this.autoPosition = false;\r\n  }\r\n\r\n  autoPosition() {\r\n    return this.setAutoPosition( ...arguments );\r\n  }\r\n\r\n  buildLegendBox() {\r\n    var series = this.series || this.graph.getSeries(),\r\n      posX = 0,\r\n      posY = this.options.paddingTop;\r\n\r\n    if ( !this.autoPosition ) {\r\n      this.graph.graphingZone.appendChild( this.getDom() );\r\n    } else {\r\n      this.graph.getDom().appendChild( this.getDom() );\r\n    }\r\n\r\n    for ( var i = 0, l = series.length; i < l; i++ ) {\r\n      if ( series[ i ].excludedFromLegend && !this.series ) {\r\n        continue;\r\n      }\r\n\r\n      if ( this.autoPosition == 'bottom' || this.autoPosition == 'top' ) {\r\n        var bbox = getBBox( this.groups[ i ] );\r\n\r\n        if (\r\n          posX + bbox.width >\r\n          this.graph.getDrawingWidth() - this.options.paddingRight\r\n        ) {\r\n          posY += 16;\r\n          posX = 0;\r\n        }\r\n      }\r\n\r\n      this.groups[ i ].setAttribute( 'transform', `translate( ${posX}, ${posY})` );\r\n\r\n      if ( this.autoPosition == 'bottom' || this.autoPosition == 'top' ) {\r\n        posX += bbox.width + 10;\r\n        posY += 0;\r\n      } else {\r\n        posX = 0;\r\n        posY += 16;\r\n      }\r\n    }\r\n\r\n    var bbox = getBBox( this.subG );\r\n\r\n    /* Independant on box position */\r\n    this.width =\r\n      bbox.width + this.options.paddingRight + this.options.paddingLeft;\r\n    this.height =\r\n      bbox.height + this.options.paddingBottom + this.options.paddingTop;\r\n\r\n    this.rect.setAttribute( 'width', this.width );\r\n    this.rect.setAttribute( 'height', this.height );\r\n    this.rect.setAttribute( 'fill', 'none' );\r\n    this.rect.setAttribute( 'pointer-events', 'fill' );\r\n\r\n    this.rect.setAttribute( 'display', 'none' );\r\n\r\n    if ( this.options.movable ) {\r\n      this.rectBottom.style.cursor = 'move';\r\n    }\r\n\r\n    this.rectBottom.setAttribute( 'width', this.width );\r\n    this.rectBottom.setAttribute( 'height', this.height );\r\n\r\n    this.rectBottom.setAttribute( 'x', bbox.x - this.options.paddingLeft );\r\n    this.rectBottom.setAttribute( 'y', bbox.y - this.options.paddingTop );\r\n    /* End independant on box position */\r\n\r\n    this.position = this.position || {};\r\n\r\n    switch ( this.autoPosition ) {\r\n      case 'bottom':\r\n        this.position.y = `${this.graph.getHeight()}px`;\r\n        // Try to center with respect to the drawing space, not the full graph. It's useful when the graph is fairly asymmetric (i.e. multiple axes on 1 side)\r\n        this.position.x = `${( this.graph.drawingSpaceWidth - this.width ) / 2 +\r\n          this.graph.drawingSpaceMinX}px`;\r\n        this.alignToY = 'bottom';\r\n        this.alignToX = false;\r\n        break;\r\n\r\n      case 'left':\r\n        this.position.x = '6px';\r\n        this.position.y = `${( this.graph.getHeight() - this.height ) / 2}px`;\r\n        this.alignToX = 'left';\r\n        this.alignToY = false;\r\n        break;\r\n\r\n      case 'right':\r\n        this.position.x = `${this.graph.getWidth()}px`;\r\n        this.position.y = `${( this.graph.getHeight() - this.height ) / 2}px`;\r\n        this.alignToX = 'right';\r\n        this.alignToY = false;\r\n        break;\r\n\r\n      case 'top':\r\n        this.position.x = `${( this.graph.drawingSpaceWidth - this.width ) / 2 +\r\n          this.graph.drawingSpaceMinX}px`;\r\n        this.position.y = '10px';\r\n        this.alignToY = 'top';\r\n        this.alignToX = false;\r\n        break;\r\n    }\r\n    if ( this.autoPosition ) {\r\n      let redrawGraph;\r\n      switch ( this.autoPosition ) {\r\n        case 'bottom':\r\n          this.graph.options.paddingBottom = this.height + 10;\r\n\r\n          redrawGraph = this.height !== this.previousHeight;\r\n          break;\r\n\r\n        case 'top':\r\n          this.graph.options.paddingTop = this.height + 14;\r\n\r\n          redrawGraph = this.height !== this.previousHeight;\r\n          break;\r\n\r\n        case 'left':\r\n          this.graph.options.paddingLeft = this.width + 5;\r\n\r\n          redrawGraph = this.width !== this.previousWidth;\r\n          break;\r\n\r\n        case 'right':\r\n          this.graph.options.paddingRight = this.width + 10;\r\n\r\n          redrawGraph = this.width !== this.previousWidth;\r\n          break;\r\n      }\r\n\r\n      if ( redrawGraph ) {\r\n        this.graph.draw( true );\r\n        this.previousHeight = this.height;\r\n        this.previousWidth = this.width;\r\n      }\r\n    }\r\n\r\n    this.bbox = bbox;\r\n  }\r\n\r\n  calculatePosition() {\r\n    var pos = GraphPosition.check( this.position );\r\n    let poscoords = pos.compute(\r\n      this.graph,\r\n      this.graph.getXAxis(),\r\n      this.graph.getYAxis()\r\n    );\r\n\r\n    if ( !poscoords ) {\r\n      return;\r\n    }\r\n\r\n    // I don't think this is correct... y=max already is axis-relative.\r\n    if ( pos.y == 'max' ) {\r\n      //    poscoords.y += this.graph.getPaddingTop();\r\n    }\r\n\r\n    if ( pos.x == 'max' ) {\r\n      // todo\r\n    }\r\n\r\n    // This was making the autoPosition fail. But I can totally see how this will cause problems in other case scenarios...\r\n    // poscoords.y += this.graph.getPaddingTop();\r\n    // poscoords.x += this.graph.getPaddingLeft();\r\n\r\n    if ( this.alignToX == 'right' ) {\r\n      poscoords.x -= this.width;\r\n      //poscoords.x -= this.bbox.x;\r\n    } else {\r\n      //poscoords.x -= this.bbox.x;\r\n    }\r\n\r\n    if ( this.alignToY == 'bottom' ) {\r\n      poscoords.y -= this.height;\r\n      //    poscoords.y -= this.bbox.y;\r\n    } else {\r\n      //     poscoords.y -= this.bbox.y;\r\n    }\r\n\r\n    this.pos.transformX = poscoords.x;\r\n    this.pos.transformY = poscoords.y;\r\n\r\n    this._setPosition();\r\n  }\r\n\r\n  /**\r\n   * Updates the legend position and content\r\n   */\r\n  update( onlyIfRequired ) {\r\n    if (\r\n      this.graph.isDelayedUpdate() ||\r\n      ( !this._requiredUpdate && onlyIfRequired )\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    this._requiredUpdate = false;\r\n\r\n    var self = this;\r\n\r\n    this.applyStyle();\r\n\r\n    while ( this.subG.hasChildNodes() ) {\r\n      this.subG.removeChild( this.subG.lastChild );\r\n    }\r\n\r\n    this.svg.insertBefore( this.rectBottom, this.svg.firstChild );\r\n\r\n    var series = this.series || this.graph.getSeries(),\r\n      line,\r\n      text,\r\n      g;\r\n\r\n    if ( series.length > 0 ) {\r\n      this.svg.setAttribute( 'display', 'block' );\r\n    } else {\r\n      return;\r\n    }\r\n\r\n    if ( this.autoPosition == 'bottom' || this.autoPosition == 'top' ) {\r\n      var fullWidth = this.graph.getDrawingWidth();\r\n    }\r\n\r\n    var posX, posY;\r\n\r\n    for ( let i = 0, l = series.length; i < l; i++ ) {\r\n      if ( series[ i ].excludedFromLegend && !this.series ) {\r\n        continue;\r\n      }\r\n\r\n      var g,\r\n        line,\r\n        text,\r\n        xPadding = 0;\r\n\r\n      if ( this.autoPosition == 'bottom' || this.autoPosition == 'top' ) {\r\n        var fullWidth = this.graph.getDrawingWidth();\r\n      }\r\n\r\n      g = document.createElementNS( self.graph.ns, 'g' );\r\n      var rect = document.createElementNS( self.graph.ns, 'rect' );\r\n\r\n      self.subG.appendChild( g );\r\n\r\n      g.appendChild( rect );\r\n\r\n      series[ i ].getSymbolForLegend();\r\n\r\n      var line = series[ i ]._getSymbolForLegendContainer();\r\n      var marker = series[ i ].getMarkerForLegend();\r\n      var text = series[ i ].getTextForLegend();\r\n\r\n      var dx = 35;\r\n\r\n      if ( this.isHideable() ) {\r\n        dx += 20;\r\n\r\n        var eyeUse = document.createElementNS( self.graph.ns, 'use' );\r\n        eyeUse.setAttributeNS(\r\n          'http://www.w3.org/1999/xlink',\r\n          'xlink:href',\r\n          `#${series[i].isShown() ? this.eyeId : this.eyeCrossedId}`\r\n        );\r\n        eyeUse.setAttribute( 'width', 15 );\r\n        eyeUse.setAttribute( 'height', 15 );\r\n        eyeUse.setAttribute( 'x', 35 );\r\n        eyeUse.setAttribute( 'y', -8 );\r\n\r\n        eyeUse.addEventListener( 'click', function( e ) {\r\n          e.stopPropagation();\r\n\r\n          var id;\r\n          if ( series[ i ].isShown() ) {\r\n            series[ i ].hide( self.options.hideShapesOnHideSerie );\r\n            id = self.eyeCrossedId;\r\n          } else {\r\n            series[ i ].show( self.options.hideShapesOnHideSerie );\r\n            id = self.eyeId;\r\n          }\r\n\r\n          eyeUse.setAttributeNS(\r\n            'http://www.w3.org/1999/xlink',\r\n            'xlink:href',\r\n            `#${id}`\r\n          );\r\n        } );\r\n      }\r\n\r\n      text.setAttribute( 'transform', `translate(${dx}, 3)` );\r\n      text.setAttribute( 'fill', this.options.color );\r\n\r\n      if ( line ) {\r\n        g.appendChild( line );\r\n      }\r\n\r\n      if ( series[ i ].getType() == 'scatter' ) {\r\n        line.setAttribute( 'transform', 'translate( 20, 0 )' );\r\n      }\r\n\r\n      if ( marker ) {\r\n        g.appendChild( marker );\r\n      }\r\n\r\n      if ( eyeUse ) {\r\n        g.appendChild( eyeUse );\r\n      }\r\n\r\n      g.appendChild( text );\r\n\r\n      var bbox = getBBox( g );\r\n\r\n      rect.setAttribute( 'x', bbox.x );\r\n      rect.setAttribute( 'y', bbox.y );\r\n      rect.setAttribute( 'width', bbox.width );\r\n      rect.setAttribute( 'height', bbox.height );\r\n      rect.setAttribute( 'fill', 'none' );\r\n      rect.setAttribute( 'pointer-events', 'fill' );\r\n\r\n      self.groups[ i ] = g;\r\n\r\n      g.addEventListener( 'click', function( e ) {\r\n        var serie = series[ i ];\r\n\r\n        if ( !serie.isShown() ) {\r\n          return;\r\n        }\r\n        if ( self.isSelectable() && !serie.isSelected() ) {\r\n          self.graph.selectSerie( serie );\r\n        } else {\r\n          self.graph.unselectSerie( serie );\r\n        }\r\n\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n      } );\r\n    }\r\n\r\n    this.svg.appendChild( this.rect );\r\n    this.buildLegendBox();\r\n    this.calculatePosition();\r\n  }\r\n\r\n  /**\r\n   * @return {Boolean} true or false depending if the series can be hidden or not\r\n   */\r\n  isHideable() {\r\n    return this.options.isSerieHideable;\r\n  }\r\n\r\n  notHideable() {\r\n    this.options.isSerieHideable = false;\r\n    return this;\r\n  }\r\n\r\n  hideable() {\r\n    this.options.isSerieHideable = true;\r\n    return this;\r\n  }\r\n\r\n  set seriesHideable( hideable ) {\r\n    this.options.isSerieHideable = !!hideable;\r\n  }\r\n\r\n  /**\r\n   *  @type {Boolean}\r\n   */\r\n  get seriesHideable() {\r\n    return this.options.isSerieHideable;\r\n  }\r\n\r\n  /**\r\n   * @return {Boolean} true or false depending if the series can be selected or not\r\n   */\r\n  isSelectable() {\r\n    return this.options.isSerieSelectable;\r\n  }\r\n\r\n  /**\r\n   * @return {Boolean} true or false depending if the series can be t or not\r\n   */\r\n  isToggleShapes() {\r\n    return this.options.shapesToggleable;\r\n  }\r\n\r\n  /**\r\n   * @return {SVGGroupElement} The SVG group element wrapping the legend\r\n   */\r\n  getDom() {\r\n    return this.svg;\r\n  }\r\n\r\n  setEvents() {\r\n    var self = this;\r\n    var pos = this.pos;\r\n\r\n    var mousedown = function( e ) {\r\n      e.stopPropagation();\r\n      if ( self.options.movable ) {\r\n        pos.x = e.clientX;\r\n        pos.y = e.clientY;\r\n\r\n        e.preventDefault();\r\n        self.mousedown = true;\r\n        self.graph.elementMoving( self );\r\n\r\n        self.rect.setAttribute( 'display', 'block' );\r\n      }\r\n    };\r\n\r\n    var mousemove = function( e ) {\r\n      self.handleMouseMove( e );\r\n    };\r\n\r\n    this.svg.addEventListener( 'mousedown', mousedown );\r\n    this.svg.addEventListener( 'click', function( e ) {\r\n      e.stopPropagation();\r\n    } );\r\n    this.svg.addEventListener( 'dblclick', function( e ) {\r\n      e.stopPropagation();\r\n    } );\r\n    this.svg.addEventListener( 'mousemove', mousemove );\r\n    //this.rect.addEventListener( 'mousemove', mousemove );\r\n  }\r\n\r\n  handleMouseUp( e ) {\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n    this.mousedown = false;\r\n    this.rect.setAttribute( 'display', 'none' );\r\n    this.graph.elementMoving( false );\r\n  }\r\n\r\n  handleMouseMove( e ) {\r\n    if ( !this.mousedown ) {\r\n      return;\r\n    }\r\n\r\n    var pos = this.pos;\r\n\r\n    var deltaX = e.clientX - pos.x;\r\n    var deltaY = e.clientY - pos.y;\r\n\r\n    pos.transformX += deltaX;\r\n    pos.transformY += deltaY;\r\n\r\n    pos.x = e.clientX;\r\n    pos.y = e.clientY;\r\n\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n\r\n    this._setPosition();\r\n  }\r\n\r\n  _setPosition() {\r\n    var pos = this.pos;\r\n    if (\r\n      !isNaN( pos.transformX ) &&\r\n      !isNaN( pos.transformY ) &&\r\n      pos.transformX !== false &&\r\n      pos.transformY !== false\r\n    ) {\r\n      this.svg.setAttribute(\r\n        'transform',\r\n        `translate(${pos.transformX}, ${pos.transformY})`\r\n      );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Re-applies the legend style\r\n   */\r\n  applyStyle() {\r\n    if ( this.options.frame ) {\r\n      this.rectBottom.setAttribute( 'stroke', this.options.frameColor );\r\n      this.rectBottom.setAttribute(\r\n        'stroke-width',\r\n        `${this.options.frameWidth}px`\r\n      );\r\n      this.rectBottom.setAttribute( 'rx', this.options.frameRounding );\r\n      this.rectBottom.setAttribute( 'ry', this.options.frameRounding );\r\n    }\r\n\r\n    this.rectBottom.setAttribute( 'fill', this.options.backgroundColor );\r\n  }\r\n\r\n  /**\r\n   * Re-applies the legend style\r\n   * @param {...(GraphSerie|GraphSerie[])} a serie or an array of series\r\n   */\r\n  fixSeries() {\r\n    var series = [];\r\n\r\n    if ( arguments[ 0 ] === false ) {\r\n      this.series = false;\r\n      this.update();\r\n      return;\r\n    }\r\n\r\n    for ( var i = 0, l = arguments.length; i < l; i++ ) {\r\n      if ( Array.isArray( arguments[ i ] ) ) {\r\n        series = series.concat( arguments[ i ] );\r\n      } else {\r\n        series.push( arguments[ i ] );\r\n      }\r\n    }\r\n\r\n    this.update();\r\n    this.series = series;\r\n  }\r\n\r\n  fixSeriesAdd( serie ) {\r\n    this.series = this.series || [];\r\n    this.series.push( serie );\r\n  }\r\n\r\n  requireDelayedUpdate() {\r\n    this._requiredUpdate = true;\r\n  }\r\n}\r\n\r\nfunction getBBox( svgElement ) {\r\n  // Firefox throws when trying to call getBBox() on elements\r\n  // that are not yet rendered.\r\n  try {\r\n    return svgElement.getBBox();\r\n  } catch ( e ) {\r\n    return {\r\n      height: 0,\r\n      width: 0,\r\n      x: 0,\r\n      y: 0\r\n    };\r\n  }\r\n}\r\n\r\nexport default Legend;","import Graph from './graph.core.js';\r\nimport EventEmitter from './dependencies/eventEmitter/EventEmitter.js';\r\nimport * as util from './graph.util.js';\r\n\r\n/**\r\n * Default graph parameters\r\n * @name AxisOptionsDefault\r\n * @object\r\n * @static\r\n * @memberof Axis\r\n * @prop {Boolean} display - Whether to display or not the axis\r\n * @prop {Boolean} flipped - Flips the axis (maximum and minimum will be inverted)\r\n * @prop {Numner} axisDataSpacing.min - The spacing of the at the bottom of the axis. The value is multiplied by the (max - min) values given by the series (0.1 means 10% of the serie width / height).\r\n * @prop {Number} axisDataSpacing.max - The spacing of the at the top of the axis. The value is multiplied by the (max - min) values given by the series (0.1 means 10% of the serie width / height).\r\n * @prop {String} unitModification - Used to change the units of the axis in a defined way. Currently, \"time\" and \"time:min.sec\" are supported. They will display the value in days, hours, minutes and seconds and the data should be expressed in seconds.\r\n * @prop {Boolean} primaryGrid - Whether or not to display the primary grid (on the main ticks)\r\n * @prop {Boolean} secondaryGrid - Whether or not to display the secondary grid (on the secondary ticks)\r\n * @prop {Number} tickPosition - Sets the position of the ticks with regards to the axis ( 1 = inside, 2 = centered, 3 = outside ).\r\n * @prop {Number} nbTicksPrimary - The number of primary ticks to use (approximately)\r\n * @prop {Number} nbTicksSecondary - The number of secondary ticks to use (approximately)\r\n * @prop {Number} ticklabelratio - Scaling factor on the labels under each primary ticks\r\n * @prop {Number} exponentialFactor - Scales the labels under each primary ticks by 10^(exponentialFactor)\r\n * @prop {Number} exponentialLabelFactor - Scales the axis label by 10^(exponentialFactor)\r\n * @prop {Boolean} logScale - Display the axis in log scale (base 10)\r\n * @prop {(Number|Boolean)} forcedMin - Use a number to force the minimum value of the axis (becomes independant of its series)\r\n * @prop {(Number|Boolean)} forcedMax - Use a number to force the maximum value of the axis (becomes independant of its series)\r\n */\r\nconst defaults = {\r\n  lineAt: false,\r\n  display: true,\r\n  flipped: false,\r\n  axisDataSpacing: {\r\n    min: 0.1,\r\n    max: 0.1\r\n  },\r\n  unitModification: false,\r\n  primaryGrid: true,\r\n  secondaryGrid: true,\r\n\r\n  primaryGridColor: '#f0f0f0',\r\n  secondaryGridColor: '#f0f0f0',\r\n\r\n  primaryGridWidth: 1,\r\n  secondaryGridWidth: 1,\r\n\r\n  hideWhenNoSeriesShown: false,\r\n  shiftToZero: false,\r\n  tickPosition: 1,\r\n  nbTicksPrimary: 3,\r\n  nbTicksSecondary: 10,\r\n  ticklabelratio: 1,\r\n  exponentialFactor: 0,\r\n  exponentialLabelFactor: 0,\r\n  logScale: false,\r\n  forcedMin: false,\r\n  forcedMax: false,\r\n\r\n  span: [ 0, 1 ],\r\n  marginMin: 0,\r\n  marginMax: 0,\r\n\r\n  scientificScale: false,\r\n  scientificScaleExponent: false,\r\n  engineeringScale: false,\r\n\r\n  unitInTicks: false,\r\n  unit: false,\r\n  unitWrapperBefore: '',\r\n  unitWrapperAfter: '',\r\n\r\n  splitMarks: false,\r\n\r\n  tickLabelOffset: 0,\r\n\r\n  useKatexForLabel: false,\r\n\r\n  highestMax: undefined,\r\n  lowestMin: undefined,\r\n\r\n  labelValue: ''\r\n};\r\n\r\n/**\r\n * Axis constructor. Usually not instanced directly, but for custom made axes, that's possible\r\n * @class Axis\r\n * @static\r\n * @augments EventEmitter\r\n * @example function myAxis() {};\r\n * myAxis.prototype = new Graph.getConstructor(\"axis\");\r\n * graph.setBottomAxis( new myAxis( { } ) );\r\n */\r\nclass Axis extends EventEmitter {\r\n\r\n  constructor() {\r\n\r\n    super();\r\n  }\r\n\r\n  init( graph, options, overwriteoptions ) {\r\n\r\n    this.unitModificationTimeTicks = [\r\n      [ 1, [ 1, 2, 5, 10, 20, 30 ] ],\r\n      [ 60, [ 1, 2, 5, 10, 20, 30 ] ],\r\n      [ 3600, [ 1, 2, 6, 12 ] ],\r\n      [ 3600 * 24, [ 1, 2, 3, 4, 5, 10, 20, 40 ] ]\r\n    ];\r\n\r\n    this.graph = graph;\r\n    this.options = util.extend( true, {}, defaults, overwriteoptions, options );\r\n\r\n    this.group = document.createElementNS( this.graph.ns, 'g' );\r\n    this.hasChanged = true;\r\n\r\n    this.rectEvent = document.createElementNS( this.graph.ns, 'rect' );\r\n    this.rectEvent.setAttribute( 'pointer-events', 'fill' );\r\n    this.rectEvent.setAttribute( 'fill', 'transparent' );\r\n    this.group.appendChild( this.rectEvent );\r\n\r\n    this.graph.axisGroup.appendChild( this.group ); // Adds to the main axiszone\r\n\r\n    // Lines at a certain value\r\n    this._lines = [];\r\n\r\n    this.line = document.createElementNS( this.graph.ns, 'line' );\r\n    this.line.setAttribute( 'stroke', 'black' );\r\n    this.line.setAttribute( 'shape-rendering', 'crispEdges' );\r\n    this.line.setAttribute( 'stroke-linecap', 'square' );\r\n    this.groupTicks = document.createElementNS( this.graph.ns, 'g' );\r\n    this.groupTickLabels = document.createElementNS( this.graph.ns, 'g' );\r\n\r\n    this.group.appendChild( this.groupTicks );\r\n    this.group.appendChild( this.groupTickLabels );\r\n    this.group.appendChild( this.line );\r\n\r\n    this.label = document.createElementNS( this.graph.ns, 'text' );\r\n\r\n    this.labelTspan = document.createElementNS( this.graph.ns, 'tspan' ); // Contains the main label\r\n    this.preunit = ''; //document.createElementNS( this.graph.ns, 'tspan' ); // Contains the scaling unit\r\n    this.unitTspan = document.createElementNS( this.graph.ns, 'tspan' ); // Contains the unit\r\n    this.expTspan = document.createElementNS( this.graph.ns, 'tspan' ); // Contains the exponent (x10)\r\n    this.expTspanExp = document.createElementNS( this.graph.ns, 'tspan' ); // Contains the exponent value\r\n\r\n    this.label.appendChild( this.labelTspan );\r\n    //this.label.appendChild( this.preunitTspan );\r\n    this.label.appendChild( this.unitTspan );\r\n    this.label.appendChild( this.expTspan );\r\n    this.label.appendChild( this.expTspanExp );\r\n\r\n    this.expTspan.setAttribute( 'dx', 6 );\r\n    this.expTspanExp.setAttribute( 'dy', -5 );\r\n    this.expTspanExp.setAttribute( 'font-size', '0.8em' );\r\n\r\n    this.label.setAttribute( 'text-anchor', 'middle' );\r\n\r\n    this.setTickPosition( this.options.tickPosition );\r\n\r\n    this.gridLinePath = {\r\n      primary: '',\r\n      secondary: ''\r\n    };\r\n\r\n    this.gridPrimary = document.createElementNS( this.graph.ns, 'path' );\r\n    this.gridSecondary = document.createElementNS( this.graph.ns, 'path' );\r\n\r\n    this.graph.groupPrimaryGrids.appendChild( this.gridPrimary );\r\n    this.graph.groupSecondaryGrids.appendChild( this.gridSecondary );\r\n\r\n    this.setGridLinesStyle();\r\n\r\n    this.group.appendChild( this.label );\r\n\r\n    this.groupSeries = document.createElementNS( this.graph.ns, 'g' );\r\n    this.group.appendChild( this.groupSeries );\r\n\r\n    this.widthHeightTick = 0;\r\n\r\n    this.ticks = {};\r\n    this.ticksLabels = [];\r\n    this.tickScaling = {\r\n      1: 3,\r\n      2: 2,\r\n      3: 1,\r\n      4: 0.5\r\n    };\r\n\r\n    this.currentTick = {};\r\n    this.lastCurrentTick = {};\r\n\r\n    this.series = [];\r\n    this.totalDelta = 0;\r\n    this.currentAction = false;\r\n\r\n    this.group.addEventListener( 'mousemove', ( e ) => {\r\n      e.preventDefault();\r\n      var coords = this.graph._getXY( e );\r\n      this.handleMouseMoveLocal( coords.x, coords.y, e );\r\n\r\n      for ( var i = 0, l = this.series.length; i < l; i++ ) {\r\n        this.series[ i ].handleMouseMove( false, true );\r\n      }\r\n    } );\r\n\r\n    this.labels = [];\r\n    this.group.addEventListener( 'click', ( e ) => {\r\n      e.preventDefault();\r\n      var coords = this.graph._getXY( e );\r\n      this.addLabel( this.getVal( coords.x - this.graph.getPaddingLeft() ) );\r\n    } );\r\n\r\n    //this.clip = document.createElementNS( this.graph.ns, 'clipPath' );\r\n    //this.clip.setAttribute( 'id', '_clip' + this.axisRand );\r\n    //this.graph.defs.appendChild( this.clip );\r\n    /*\r\n        this.clipRect = document.createElementNS( this.graph.ns, 'rect' );\r\n        this.clip.appendChild( this.clipRect );\r\n        this.clip.setAttribute( 'clipPathUnits', 'userSpaceOnUse' );\r\n    */\r\n    this.gridPrimary.setAttribute( 'clip-path', `url(#_clipplot${ this.graph._creation })` );\r\n    this.gridSecondary.setAttribute( 'clip-path', `url(#_clipplot${ this.graph._creation })` );\r\n    this.graph._axisHasChanged( this );\r\n  }\r\n\r\n  handleMouseMoveLocal() {}\r\n\r\n  /**\r\n   * Hides the axis\r\n   * @memberof Axis\r\n   * @return {Axis} The current axis\r\n   */\r\n  hide() {\r\n    this.options.display = false;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Shows the axis\r\n   * @memberof Axis\r\n   * @return {Axis} The current axis\r\n   */\r\n  show() {\r\n    this.options.display = true;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Shows or hides the axis\r\n   * @memberof Axis\r\n   * @param {Boolean} display - true to display the axis, false to hide it\r\n   * @return {Axis} The current axis\r\n   */\r\n  setDisplay( bool ) {\r\n    this.options.display = !!bool;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * @memberof Axis\r\n   * @return {Boolean} A boolean indicating the displayed state of the axis\r\n   */\r\n  isDisplayed() {\r\n\r\n    if ( !this.options.hideWhenNoSeriesShown ) {\r\n      return this.options.display;\r\n    }\r\n\r\n    return this.graph.getSeriesFromAxis( this ).reduce( ( accumulator, serie ) => {\r\n      return accumulator || serie.isShown();\r\n    }, false );\r\n  }\r\n\r\n  isShown() {\r\n\r\n    return this.isDisplayed( ...arguments );\r\n  }\r\n\r\n  hideGroup() {\r\n    if ( this._hidden ) {\r\n      return;\r\n    }\r\n    this._hidden = true;\r\n    this.group.setAttribute( 'display', 'none' );\r\n  }\r\n\r\n  showGroup() {\r\n    if ( !this._hidden ) {\r\n      return;\r\n    }\r\n    this._hidden = false;\r\n    this.group.setAttribute( 'display', 'initial' );\r\n  }\r\n\r\n  kill( noRedraw, noSerieKill ) {\r\n    this.graph.killAxis( this, noRedraw, noSerieKill );\r\n  }\r\n  /**\r\n   * Forces the appearence of a straight perpendicular line at value 0\r\n   * @param {Array<Number>} atValues - An array of x or y values where the lines are displayed\r\n   * @memberof Axis\r\n   * @return {Axis} The current axis\r\n   */\r\n  setLineAt( atValues ) {\r\n    this.options.lineAt = atValues;\r\n    return this;\r\n  }\r\n\r\n  // Used to adapt the 0 of the axis to the zero of another axis that has the same direction\r\n\r\n  /**\r\n   * Aligns ```thisValue``` of the axis to ```foreignValue``` of another axis\r\n   * @param {(Axis|Boolean)} axis - The axis with which the 0 should be aligned. Use \"false\" to deactivate the adapt to 0 mode.\r\n   * @param {Number} thisValue - The value of the current axis that should be aligned\r\n   * @param {Number} foreignValue - The value of the reference axis that should be aligned\r\n   * @param {String} preference - \"min\" or \"max\". Defined the boundary that should behave the more normally\r\n   * @memberof Axis\r\n   * @return {Axis} The current axis\r\n   * @since 1.13.2\r\n   */\r\n  adaptTo( axis, thisValue, foreignValue, preference ) {\r\n\r\n    if ( !axis ) {\r\n      this.options.adaptTo = false;\r\n      return this;\r\n    }\r\n\r\n    this.options.adaptTo = {\r\n      axis: axis,\r\n      thisValue: thisValue,\r\n      foreignValue: foreignValue,\r\n      preference: preference\r\n    };\r\n\r\n    this.adapt();\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Adapts maximum and minimum of the axis if options.adaptTo is defined\r\n   * @memberof Axis\r\n   * @returns {Axis} The current axis\r\n   * @since 1.13.2\r\n   */\r\n  adapt() {\r\n\r\n    if ( !this.options.adaptTo ) {\r\n      return;\r\n    }\r\n\r\n    var axis = this.options.adaptTo.axis,\r\n      current = this.options.adaptTo.thisValue,\r\n      foreign = this.options.adaptTo.foreignValue;\r\n\r\n    if ( axis.currentAxisMin === undefined || axis.currentAxisMax === undefined ) {\r\n      axis.setMinMaxToFitSeries();\r\n    }\r\n\r\n    if ( ( this.options.forcedMin !== false && this.options.forcedMax == false ) || ( this.options.adaptTo.preference !== 'max' ) ) {\r\n\r\n      if ( this.options.forcedMin !== false ) {\r\n        this.currentAxisMin = this.options.forcedMin;\r\n      } else {\r\n        this.currentAxisMin = this._zoomed ? this.getCurrentMin() : this.getMinValue() - ( current - this.getMinValue() ) * ( this.options.axisDataSpacing.min * ( axis.getCurrentMax() - axis.getCurrentMin() ) / ( foreign - axis.getCurrentMin() ) );\r\n      }\r\n\r\n      if ( this.currentAxisMin == current ) {\r\n        this.currentAxisMin -= this.options.axisDataSpacing.min * this.getInterval();\r\n      }\r\n\r\n      var use = this.options.forcedMin !== false ? this.options.forcedMin : this.currentAxisMin;\r\n      this.currentAxisMax = ( current - use ) * ( axis.getCurrentMax() - axis.getCurrentMin() ) / ( foreign - axis.getCurrentMin() ) + use;\r\n\r\n    } else {\r\n\r\n      if ( this.options.forcedMax !== false ) {\r\n        this.currentAxisMax = this.options.forcedMax;\r\n      } else {\r\n        this.currentAxisMax = this._zoomed ? this.getCurrentMax() : this.getMaxValue() + ( this.getMaxValue() - current ) * ( this.options.axisDataSpacing.max * ( axis.getCurrentMax() - axis.getCurrentMin() ) / ( axis.getCurrentMax() - foreign ) );\r\n      }\r\n\r\n      if ( this.currentAxisMax == current ) {\r\n        this.currentAxisMax += this.options.axisDataSpacing.max * this.getInterval();\r\n      }\r\n\r\n      var use = this.options.forcedMax !== false ? this.options.forcedMax : this.currentAxisMax;\r\n\r\n      this.currentAxisMin = ( current - use ) * ( axis.getCurrentMin() - axis.getCurrentMax() ) / ( foreign - axis.getCurrentMax() ) + use;\r\n    }\r\n\r\n    this.graph._axisHasChanged( this );\r\n  }\r\n\r\n  // Floating axis. Adapts axis position orthogonally to another axis at a defined value. Not taken into account for margins\r\n\r\n  /**\r\n   * Makes the axis floating (not aligned to the right or the left anymore). You need to specify another axis (perpendicular) and a value at which this axis should be located\r\n   * @param {Axis} axis - The axis on which the current axis should be aligned to\r\n   * @param {Number} value - The value on which the current axis should be aligned\r\n   * @memberof Axis\r\n   * @return {Axis} The current axis\r\n   * @example graph.getYAxis().setFloat( graph.getBottomAxis(), 0 ); // Alignes the y axis with the origin of the bottom axis\r\n   */\r\n  setFloating( axis, value ) {\r\n\r\n    this.floating = true;\r\n    this.floatingAxis = axis;\r\n    this.floatingValue = value;\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * @memberof Axis\r\n   * @return {Axis} The axis referencing the floating value of the current axis\r\n   */\r\n  getFloatingAxis() {\r\n    return this.floatingAxis;\r\n  }\r\n\r\n  /**\r\n   * @memberof Axis\r\n   * @return {Axis} The value to which the current axis is aligned to\r\n   */\r\n  getFloatingValue() {\r\n    return this.floatingValue;\r\n  }\r\n\r\n  /**\r\n   * Sets the axis data spacing\r\n   * @memberof Axis\r\n   * @see AxisOptionsDefault\r\n   * @param {Number} min - The spacing at the axis min value\r\n   * @param {Number} [ max = min ] - The spacing at the axis max value. If omitted, will be equal to the \"min\" parameter\r\n   * @return {Axis} The current axis\r\n   */\r\n  setAxisDataSpacing( val1, val2 ) {\r\n    this.options.axisDataSpacing.min = val1;\r\n    this.options.axisDataSpacing.max = val2 || val1;\r\n    return this;\r\n  }\r\n\r\n  dataSpacing() {\r\n    return this.setAxisDataSpacing( ...arguments );\r\n  }\r\n\r\n  /**\r\n   * Sets the axis data spacing at the minimum of the axis\r\n   * @memberof Axis\r\n   * @see AxisOptionsDefault\r\n   * @param {Number} min - The spacing at the axis min value\r\n   * @return {Axis} The current axis\r\n   */\r\n  setAxisDataSpacingMin( val ) {\r\n    this.options.axisDataSpacing.min = val;\r\n  }\r\n\r\n  /**\r\n   * Sets the axis data spacing at the maximum of the axis\r\n   * @memberof Axis\r\n   * @see AxisOptionsDefault\r\n   * @param {Number} max - The spacing at the axis max value\r\n   * @return {Axis} The current axis\r\n   */\r\n  setAxisDataSpacingMax( val ) {\r\n    this.options.axisDataSpacing.max = val;\r\n  }\r\n\r\n  setMinPx( px ) {\r\n\r\n    this.minPx = px;\r\n    this.setMinMaxFlipped();\r\n  }\r\n\r\n  setMaxPx( px ) {\r\n\r\n    this.maxPx = px;\r\n    this.setMinMaxFlipped();\r\n  }\r\n\r\n  /**\r\n   * @memberof Axis\r\n   * @return {Number} The position in px of the bottom of the axis\r\n   */\r\n  getMinPx() {\r\n    return this.minPxFlipped;\r\n  }\r\n\r\n  /**\r\n   * @memberof Axis\r\n   * @return {Number} The position in px of the top of the axis\r\n   */\r\n  getMaxPx() {\r\n    return this.maxPxFlipped;\r\n  }\r\n\r\n  getMathMaxPx() {\r\n    return this.maxPx;\r\n  }\r\n\r\n  getMathMinPx() {\r\n    return this.minPx;\r\n  }\r\n\r\n  // Returns the true minimum of the axis. Either forced in options or the one from the data\r\n\r\n  /**\r\n   * Retrieves the minimum possible value of the axis. Can be set by \"forcedMin\", \"adapt0ToAxis\" or by the values of the series the axis contains. Does not take into account any zooming.\r\n   * @memberof Axis\r\n   * @return {Number} The minimum possible value of the axis\r\n   */\r\n  getMinValue() {\r\n    return this.options.forcedMin !== false ? this.options.forcedMin : ( !isNaN( this.options.lowestMin ) ? Math.max( this.options.lowestMin, this.dataMin ) : this.dataMin );\r\n  }\r\n\r\n  /**\r\n   * Retrieves the maximum possible value of the axis. Can be set by \"forcedMax\", \"adapt0ToAxis\" or by the values of the series the axis contains. Does not take into account any zooming.\r\n   * @memberof Axis\r\n   * @return {Number} The maximum possible value of the axis\r\n   */\r\n  getMaxValue() {\r\n    return this.options.forcedMax !== false ? this.options.forcedMax : ( !isNaN( this.options.highestMax ) ? Math.min( this.options.highestMax, this.dataMax ) : this.dataMax );\r\n  }\r\n\r\n  setMinValueData( min ) {\r\n    this.dataMin = min;\r\n\r\n    // 25.10.2017. This is to help in the case there's no autoscaling\r\n    if ( isNaN( this.getCurrentMin() ) ) {\r\n      //this.setCurrentMin( this.getMinValue() );\r\n      //this.cache();\r\n\r\n    }\r\n  }\r\n\r\n  setMaxValueData( max ) {\r\n    this.dataMax = max;\r\n\r\n    // 25.10.2017. This is to help in the case there's no autoscaling\r\n    // 02.02.2018. Don't agree with this. Next time, put a link to show the use of this piece of code\r\n    if ( isNaN( this.getCurrentMax() ) ) {\r\n      //     this.setCurrentMax( this.getMaxValue() );\r\n      //this.cache();\r\n\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Retrieves the maximum possible value of the axis based only on the data. Does not take into account the possible axis forcing\r\n   * @memberof Axis\r\n   * @return {Number} The maximum possible value of the axis\r\n   */\r\n  getDataMax() {\r\n    return this.dataMax;\r\n  }\r\n\r\n  /**\r\n   * Retrieves the minimum possible value of the axis based only on the data. Does not take into account the possible axis forcing\r\n   * @memberof Axis\r\n   * @return {Number} The minimum possible value of the axis\r\n   */\r\n  getDataMin() {\r\n    return this.dataMin;\r\n  }\r\n\r\n  /**\r\n   * Sets the highest maximum value of the axis.\r\n   * @memberof Axis\r\n   * @param {Number} max - The maximum value of the axis\r\n   * @return {Axis} The current axis\r\n   */\r\n  setLowestMin( lowestMin ) {\r\n    this.options.lowestMin = lowestMin;\r\n    this.graph._axisHasChanged( this );\r\n  }\r\n\r\n  /**\r\n   * Forces the minimum value of the axis (no more dependant on the serie values)\r\n   * @memberof Axis\r\n   * @param {Number} min - The minimum value of the axis\r\n   * @param {Boolean} noRescale - ```true``` to prevent the axis to rescale to set this minimum. Rescales anyway if current min is lower than the value. Defaults to ```false```\r\n   * @return {Axis} The current axis\r\n   */\r\n  forceMin( min, noRescale = false ) {\r\n    this.options.forcedMin = min;\r\n    this.setCurrentMin( noRescale ? this.getCurrentMin() : undefined );\r\n    this.graph._axisHasChanged( this );\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Sets the highest maximum value of the axis.\r\n   * @memberof Axis\r\n   * @param {Number} max - The maximum value of the axis\r\n   * @return {Axis} The current axis\r\n   */\r\n  setHighestMax( highestMax ) {\r\n    this.options.highestMax = highestMax;\r\n    this.graph._axisHasChanged( this );\r\n  }\r\n\r\n  /**\r\n   * Forces the maximum value of the axis (no more dependant on the serie values).\r\n   * @memberof Axis\r\n   * @param {Number} max - The maximum value of the axis\r\n   * @param {Boolean} noRescale - ```true``` to prevent the axis to rescale to set this maximum. Rescales anyway if current max is higher than the value\r\n   * @return {Axis} The current axis\r\n   */\r\n  forceMax( max, noRescale = false ) {\r\n    this.options.forcedMax = max;\r\n    this.setCurrentMax( noRescale ? this.getCurrentMax() : undefined );\r\n    this.graph._axisHasChanged( this );\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Retrieves the forced minimum of the axis\r\n   * @memberof Axis\r\n   * @return {Number} The maximum possible value of the axis\r\n   */\r\n  getForcedMin() {\r\n    return this.options.forcedMin;\r\n  }\r\n\r\n  /**\r\n   * Retrieves the forced minimum of the axis\r\n   * @memberof Axis\r\n   * @return {Number} The maximum possible value of the axis\r\n   */\r\n  getForcedMax() {\r\n    return this.options.forcedMax;\r\n  }\r\n\r\n  /**\r\n   * Forces the min and max values of the axis to the min / max values of another axis\r\n   * @param {Axis} axis - The axis from which the min / max values are retrieved.\r\n   * @memberof Axis\r\n   * @return {Axis} The current axis\r\n   */\r\n  forceToAxis( axis ) {\r\n    if ( axis.getMaxValue && axis.getMinValue ) {\r\n      this.options.forcedMin = axis.getMinValue();\r\n      this.options.forcedMax = axis.getMaxValue();\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  getNbTicksPrimary() {\r\n    return this.options.nbTicksPrimary;\r\n  }\r\n\r\n  setNbTicksPrimary( nb ) {\r\n    this.options.nbTicksPrimary = nb;\r\n  }\r\n\r\n  getNbTicksSecondary() {\r\n    return this.options.nbTicksSecondary;\r\n  }\r\n\r\n  setNbTicksSecondary( nb ) {\r\n    this.options.nbTicksSecondary = nb;\r\n    return this;\r\n  }\r\n\r\n  handleMouseMove( px ) {\r\n    this.mouseVal = this.getVal( px );\r\n  }\r\n\r\n  handleMouseWheel( delta, e, baseline ) {\r\n\r\n    delta = Math.min( 0.2, Math.max( -0.2, delta ) );\r\n\r\n    if ( baseline == 'min' ) {\r\n      baseline = this.getMinValue();\r\n    } else if ( baseline == 'max' ) {\r\n      baseline = this.getMaxValue();\r\n    } else if ( !baseline ) {\r\n      baseline = 0;\r\n    }\r\n\r\n    this._doZoomVal(\r\n      ( ( this.getCurrentMax() - baseline ) * ( 1 + delta ) ) + baseline, ( ( this.getCurrentMin() - baseline ) * ( 1 + delta ) ) + baseline\r\n    );\r\n\r\n    this.graph.draw();\r\n    //\tthis.graph.drawSeries(true);\r\n\r\n  }\r\n\r\n  set zoomLock( bln ) {\r\n    this._zoomLocked = bln;\r\n  }\r\n\r\n  get zoomLock() {\r\n    return this._zoomLocked || false;\r\n  }\r\n\r\n  /**\r\n   * Performs a zoom on the axis, without redraw afterwards\r\n   * @param {Number} val1 - The new axis minimum\r\n   * @param {Number} val2 - The new axis maximum\r\n   * @memberof Axis\r\n   * @return {Axis} The current axis\r\n   * @example\r\n   * graph.getBottomAxis().zoom( 50, 70 ); // Axis boundaries will be 50 and 70 after next redraw\r\n   * graph.redraw();\r\n   * @example\r\n   * graph.getBottomAxis().forceMin( 0 ).forceMax( 100 ).zoom( 50, 70 );  // Axis boundaries will be 50 and 70 after next redraw\r\n   * graph.draw();\r\n   * graph.autoscaleAxes(); // New bottom axis boundaries will be 0 and 100, not 50 and 70 !\r\n   * graph.draw();\r\n   */\r\n  zoom( val1, val2, forceLock ) {\r\n\r\n    if ( !forceLock && this.zoomLock ) {\r\n      return;\r\n    }\r\n\r\n    return this._doZoomVal( val1, val2, true );\r\n  }\r\n\r\n  _doZoomVal( val1, val2, mute ) {\r\n\r\n    return this._doZoom( this.getPx( val1 ), this.getPx( val2 ), val1, val2, mute );\r\n  }\r\n\r\n  _doZoom( px1, px2, val1, val2, mute ) {\r\n\r\n    //if(this.options.display || 1 == 1) {\r\n    var val1 = val1 !== undefined ? val1 : this.getVal( px1 );\r\n    var val2 = val2 !== undefined ? val2 : this.getVal( px2 );\r\n\r\n    this.setCurrentMin( Math.min( val1, val2 ) );\r\n    this.setCurrentMax( Math.max( val1, val2 ) );\r\n\r\n    this.cacheCurrentMin();\r\n    this.cacheCurrentMax();\r\n    this.cacheInterval();\r\n\r\n    this._zoomed = true;\r\n\r\n    this.adapt();\r\n\r\n    this._hasChanged = true;\r\n\r\n    // New method\r\n    if ( !mute ) {\r\n      this.emit( 'zoom', [ this.currentAxisMin, this.currentAxisMax, this ] );\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  getSerieShift() {\r\n    return this._serieShift;\r\n  }\r\n\r\n  getSerieScale() {\r\n    return this._serieScale;\r\n  }\r\n\r\n  getMouseVal() {\r\n    return this.mouseVal;\r\n  }\r\n\r\n  getUnitPerTick( px, nbTick, valrange ) {\r\n\r\n    var pxPerTick = px / nbTicks; // 1000 / 100 = 10 px per tick\r\n    if ( !nbTick ) {\r\n      nbTick = px / 10;\r\n    } else {\r\n      nbTick = Math.min( nbTick, px / 10 );\r\n    }\r\n\r\n    // So now the question is, how many units per ticks ?\r\n    // Say, we have 0.0004 unit per tick\r\n    var unitPerTick = valrange / nbTick;\r\n\r\n    switch ( this.options.unitModification ) {\r\n\r\n      case 'time':\r\n      case 'time:min.sec':\r\n        {\r\n\r\n          //const max = this.getModifiedValue( this.getMaxValue() );/*,\r\n          /*units = [\r\n            [ 60, 'min' ],\r\n            [ 3600, 'h' ],\r\n            [ 3600 * 24, 'd' ]\r\n          ];*/\r\n\r\n          let i, l, k, m;\r\n          let breaked = false;\r\n          for ( i = 0, l = this.unitModificationTimeTicks.length; i < l; i++ ) {\r\n            for ( k = 0, m = this.unitModificationTimeTicks[ i ][ 1 ].length; k < m; k++ ) {\r\n              if ( unitPerTick < this.unitModificationTimeTicks[ i ][ 0 ] * this.unitModificationTimeTicks[ i ][ 1 ][ k ] ) {\r\n                breaked = true;\r\n                break;\r\n              }\r\n            }\r\n            if ( breaked ) {\r\n              break;\r\n            }\r\n          }\r\n\r\n          //i and k contain the good variable;\r\n          if ( i !== this.unitModificationTimeTicks.length ) {\r\n            unitPerTickCorrect = this.unitModificationTimeTicks[ i ][ 0 ] * this.unitModificationTimeTicks[ i ][ 1 ][ k ];\r\n          } else {\r\n            unitPerTickCorrect = 1;\r\n          }\r\n\r\n          break;\r\n        }\r\n      default:\r\n        {\r\n\r\n          // We take the log\r\n          var decimals = Math.floor( Math.log( unitPerTick ) / Math.log( 10 ) );\r\n          /*\r\n  \t\t\t\t\tExample:\r\n  \t\t\t\t\t\t13'453 => Math.log10() = 4.12 => 4\r\n  \t\t\t\t\t\t0.0000341 => Math.log10() = -4.46 => -5\r\n  \t\t\t\t*/\r\n\r\n          var numberToNatural = unitPerTick * Math.pow( 10, -decimals );\r\n\r\n          /*\r\n  \t\t\t\t\tExample:\r\n  \t\t\t\t\t\t13'453 (4) => 1.345\r\n  \t\t\t\t\t\t0.0000341 (-5) => 3.41\r\n  \t\t\t\t*/\r\n\r\n          this.decimals = -decimals;\r\n\r\n          var possibleTicks = [ 1, 2, 5, 10 ];\r\n          var closest = false;\r\n          for ( let i = possibleTicks.length - 1; i >= 0; i-- ) {\r\n            if ( !closest || ( Math.abs( possibleTicks[ i ] - numberToNatural ) < Math.abs( closest - numberToNatural ) ) ) {\r\n              closest = possibleTicks[ i ];\r\n            }\r\n          }\r\n\r\n          // Ok now closest is the number of unit per tick in the natural number\r\n          /*\r\n  \t\t\t\t\tExample:\r\n  \t\t\t\t\t\t13'453 (4) (1.345) => 1\r\n  \t\t\t\t\t\t0.0000341 (-5) (3.41) => 5\r\n  \t\t\t\t*/\r\n\r\n          // Let's scale it back\r\n          var unitPerTickCorrect = closest * Math.pow( 10, decimals );\r\n\r\n          /*\r\n  \t\t\t\t\tExample:\r\n  \t\t\t\t\t\t13'453 (4) (1.345) (1) => 10'000\r\n  \t\t\t\t\t\t0.0000341 (-5) (3.41) (5) => 0.00005\r\n  \t\t\t\t*/\r\n          break;\r\n        }\r\n    }\r\n\r\n    var nbTicks = valrange / unitPerTickCorrect;\r\n\r\n    var pxPerTick = px / nbTick;\r\n    return [ unitPerTickCorrect, nbTicks, pxPerTick ];\r\n  }\r\n\r\n  /**\r\n   * Resets the min and max of the serie to fit the series it contains\r\n   * @memberof Axis\r\n   * @return {Axis} The current axis\r\n   */\r\n  setMinMaxToFitSeries( noNotify ) {\r\n\r\n    var interval = this.getInterval();\r\n\r\n    if ( this.options.logScale ) {\r\n\r\n      this.setCurrentMin( Math.max( 1e-50, this.getMinValue() * 0.9 ) );\r\n      this.setCurrentMax( Math.max( 1e-50, this.getMaxValue() * 1.1 ) );\r\n      //this.currentAxisMin = Math.max( 1e-50, this.getMinValue() * 0.9 );\r\n      //this.currentAxisMax = Math.max( 1e-50, this.getMaxValue() * 1.1 );\r\n\r\n    } else {\r\n\r\n      this.setCurrentMin( this.getMinValue() );\r\n      this.setCurrentMax( this.getMaxValue() );\r\n\r\n      //this.currentAxisMin = this.getMinValue();\r\n      //this.currentAxisMax = this.getMaxValue();\r\n\r\n      if ( this.getForcedMin() === false ) {\r\n\r\n        this.setCurrentMin( this.getCurrentMin() - ( this.options.axisDataSpacing.min * interval ) );\r\n      }\r\n\r\n      if ( this.getForcedMax() === false ) {\r\n\r\n        this.setCurrentMax( this.getCurrentMax() + ( this.options.axisDataSpacing.max * interval ) );\r\n      }\r\n    }\r\n\r\n    if ( isNaN( this.currentAxisMin ) || isNaN( this.currentAxisMax ) ) {\r\n      this.currentAxisMax = undefined;\r\n      this.currentAxisMin = undefined;\r\n    }\r\n\r\n    this.cache();\r\n\r\n    this._zoomed = false;\r\n\r\n    this.adapt();\r\n\r\n    if ( !noNotify ) {\r\n      this.graph._axisHasChanged( this );\r\n    }\r\n\r\n    this.emit( 'zoomOutFull', [ this.currentAxisMin, this.currentAxisMax, this ] );\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * @memberof Axis\r\n   * @return {Number} the maximum interval ( max - min ) of the axis ( not nessarily the current one )\r\n   */\r\n  getInterval() {\r\n    return this.getMaxValue() - this.getMinValue();\r\n  }\r\n\r\n  /**\r\n   * @memberof Axis\r\n   * @return {Number} the maximum interval ( max - min ) of the axis ( not nessarily the current one )\r\n   */\r\n  getCurrentInterval() {\r\n    return this.cachedInterval;\r\n  }\r\n\r\n  /**\r\n   * @memberof Axis\r\n   * @return {Number} The current minimum value of the axis\r\n   */\r\n  getCurrentMin() {\r\n    return this.cachedCurrentMin;\r\n  }\r\n\r\n  /**\r\n   * @memberof Axis\r\n   * @return {Number} The current maximum value of the axis\r\n   */\r\n  getCurrentMax() {\r\n    return this.cachedCurrentMax;\r\n  }\r\n\r\n  /**\r\n   * Caches the current axis minimum\r\n   * @memberof Axis\r\n   */\r\n  cacheCurrentMin() {\r\n    this.cachedCurrentMin = this.currentAxisMin == this.currentAxisMax ? ( this.options.logScale ? this.currentAxisMin / 10 : this.currentAxisMin - 1 ) : this.currentAxisMin;\r\n  }\r\n\r\n  /**\r\n   * Caches the current axis maximum\r\n   * @memberof Axis\r\n   */\r\n  cacheCurrentMax() {\r\n    this.cachedCurrentMax = this.currentAxisMax == this.currentAxisMin ? ( this.options.logScale ? this.currentAxisMax * 10 : this.currentAxisMax + 1 ) : this.currentAxisMax;\r\n  }\r\n\r\n  /**\r\n   * Caches the current interval\r\n   * @memberof Axis\r\n   */\r\n  cacheInterval() {\r\n    this.cachedInterval = this.cachedCurrentMax - this.cachedCurrentMin;\r\n  }\r\n\r\n  cache() {\r\n    this.cacheCurrentMin();\r\n    this.cacheCurrentMax();\r\n    this.cacheInterval();\r\n  }\r\n\r\n  /**\r\n   * Sets the current minimum value of the axis. If lower that the forced value, the forced value is used\r\n   * @memberof Axis\r\n   * @param {Number} val - The new minimum value\r\n   * @return {Axis} The current axis\r\n   */\r\n  setCurrentMin( val ) {\r\n\r\n    if ( val === undefined || ( this.getForcedMin() !== false && ( val < this.getForcedMin() || val < this.options.lowestMin || val === undefined ) ) ) {\r\n      val = this.getMinValue();\r\n    }\r\n    this.currentAxisMin = val;\r\n    if ( this.options.logScale ) {\r\n      this.currentAxisMin = Math.max( 1e-50, val );\r\n    }\r\n\r\n    this.cacheCurrentMin();\r\n    this.cacheInterval();\r\n\r\n    this.graph._axisHasChanged( this );\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Sets the current maximum value of the axis. If higher that the forced value, the forced value is used\r\n   * @memberof Axis\r\n   * @param {Number} val - The new maximum value\r\n   * @return {Axis} The current axis\r\n   */\r\n  setCurrentMax( val ) {\r\n\r\n    if ( val === undefined || ( this.getForcedMax() !== false && ( val > this.getForcedMax() || val > this.options.highestMax || val === undefined ) ) ) {\r\n      val = this.getMaxValue();\r\n    }\r\n\r\n    this.currentAxisMax = val;\r\n\r\n    if ( this.options.logScale ) {\r\n      this.currentAxisMax = Math.max( 1e-50, val );\r\n    }\r\n\r\n    this.cacheCurrentMax();\r\n    this.cacheInterval();\r\n\r\n    this.graph._axisHasChanged( this );\r\n  }\r\n\r\n  /**\r\n   * Sets the flipping state of the axis. If enabled, the axis is descending rather than ascending.\r\n   * @memberof Axis\r\n   * @param {Boolean} flip - The new flipping state of the axis\r\n   * @return {Axis} The current axis\r\n   */\r\n  flip( flip ) {\r\n    this.options.flipped = flip;\r\n    this.setMinMaxFlipped();\r\n    return this;\r\n  }\r\n  /*\r\n    setMinMaxFlipped() {\r\n\r\n      var interval = this.maxPx - this.minPx;\r\n      var maxPx = this.maxPx - interval * this.options.span[ 0 ];\r\n      var minPx = this.maxPx - interval * this.options.span[ 1 ];\r\n\r\n      this.minPxFlipped = this.isFlipped() ? maxPx : minPx;\r\n      this.maxPxFlipped = this.isFlipped() ? minPx : maxPx;\r\n\r\n      // this.minPx = minPx;\r\n      //this.maxPx = maxPx;\r\n    }\r\n  */\r\n  /**\r\n   * @memberof Axis\r\n   * @return {Boolean} The current flipping state of the axis\r\n   */\r\n  isFlipped() {\r\n    return this.options.flipped;\r\n  }\r\n\r\n  _draw() { // Redrawing of the axis\r\n\r\n    var self = this;\r\n    // var visible;\r\n\r\n    //    this.drawInit();\r\n\r\n    if ( this.currentAxisMin === undefined || this.currentAxisMax === undefined ) {\r\n      this.setMinMaxToFitSeries( true ); // We reset the min max as a function of the series\r\n    }\r\n\r\n    // this.cache();\r\n\r\n    //   this.setSlaveAxesBoundaries();\r\n\r\n    // The data min max is stored in this.dataMin, this.dataMax\r\n\r\n    //var widthPx = this.maxPx - this.minPx;\r\n    var widthPx = Math.abs( this.getMaxPx() - this.getMinPx() );\r\n    var valrange = this.getCurrentInterval();\r\n\r\n    /* Number of px per unit */\r\n    /* Example: width: 1000px\r\n\t\t\t/* \t\t\t10 - 100 => 11.11\r\n\t\t\t/*\t\t\t0 - 2 => 500\r\n\t\t\t/*\t\t\t0 - 0.00005 => 20'000'000\r\n\t\t\t*/\r\n\r\n    if ( !this.isShown() ) {\r\n      this.line.setAttribute( 'display', 'none' );\r\n      return 0;\r\n    }\r\n\r\n    this.line.setAttribute( 'display', 'block' );\r\n\r\n    if ( this.options.scientificScale == true ) {\r\n\r\n      if ( this.options.scientificScaleExponent ) {\r\n\r\n        this.scientificExponent = this.options.scientificScaleExponent;\r\n      } else {\r\n        this.scientificExponent = Math.floor( Math.log( Math.max( Math.abs( this.getCurrentMax() ), Math.abs( this.getCurrentMin() ) ) ) / Math.log( 10 ) );\r\n      }\r\n    } else {\r\n      this.scientificExponent = 0;\r\n    }\r\n\r\n    /************************************/\r\n    /*** DRAWING LABEL ******************/\r\n    /************************************/\r\n\r\n    this.gridLinePath.primary = '';\r\n    this.gridLinePath.secondary = '';\r\n\r\n    /*\r\n    var label;\r\n    if ( label = this.getLabel() ) {\r\n      // Sets the label\r\n      this.labelTspan.textContent = label;\r\n    }\r\n*/\r\n    let letter;\r\n    if ( !this.options.useKatexForLabel || !this.graph.hasKatexRenderer() ) {\r\n\r\n      if ( this.options.unitDecade && this.options.unit && this.scientificExponent !== 0 && ( this.scientificExponent = this.getEngineeringExponent( this.scientificExponent ) ) && ( letter = this.getExponentGreekLetter( this.scientificExponent ) ) ) {\r\n\r\n        this.preunit = letter;\r\n        this.unitTspan.setAttribute( 'dx', 0 );\r\n\r\n      } else if ( this.scientificExponent !== 0 && !isNaN( this.scientificExponent ) ) {\r\n\r\n        if ( this.options.engineeringScale ) {\r\n          this.scientificExponent = this.getEngineeringExponent( this.scientificExponent );\r\n        }\r\n\r\n        this.preunit = '';\r\n\r\n        this.expTspan.setAttribute( 'display', 'visible' );\r\n        this.expTspanExp.setAttribute( 'display', 'visible' );\r\n\r\n        this.expTspan.textContent = 'x10';\r\n        this.expTspanExp.textContent = this.scientificExponent;\r\n\r\n      } else {\r\n\r\n        if ( !this.options.unit ) {\r\n          this.unitTspan.setAttribute( 'display', 'none' );\r\n        }\r\n\r\n        this.preunit = '';\r\n        this.expTspan.setAttribute( 'display', 'none' );\r\n        this.expTspanExp.setAttribute( 'display', 'none' );\r\n      }\r\n\r\n      this.writeUnit();\r\n\r\n    } else {\r\n\r\n      let string = this.getLabel();\r\n      /*,\r\n              domEl;*/\r\n\r\n      if ( this.options.unitDecade && this.options.unit && this.scientificExponent !== 0 && ( this.scientificExponent = this.getEngineeringExponent( this.scientificExponent ) ) && ( letter = this.getExponentGreekLetter( this.scientificExponent ) ) ) {\r\n\r\n        string += letter;\r\n        this.preunitTspan.innerHTML = letter;\r\n        this.preunitTspan.setAttribute( 'display', 'visible' );\r\n        this.unitTspan.setAttribute( 'dx', 0 );\r\n\r\n        string += ` ${ letter } ${ this.options.unit}`;\r\n\r\n      } else if ( this.scientificExponent !== 0 && !isNaN( this.scientificExponent ) ) {\r\n\r\n        if ( this.options.engineeringScale ) {\r\n          this.scientificExponent = this.getEngineeringExponent( this.scientificExponent );\r\n        }\r\n        string += ` \\\\cdot 10^${ this.scientificExponent } ${ this.options.unit}`;\r\n\r\n      }\r\n\r\n      this.katexElement = this.graph.renderWithKatex( string, this.katexElement );\r\n    }\r\n\r\n    if ( !this.options.hideTicks ) {\r\n\r\n      this.resetTicksLength();\r\n\r\n      if ( this.linkedToAxis ) { // px defined, linked to another axis\r\n\r\n        this.linkedToAxis.deltaPx = 10;\r\n        var widthHeight = this.drawLinkedToAxisTicksWrapper( widthPx, valrange );\r\n\r\n      } else if ( !this.options.logScale ) {\r\n        // So the setting is: How many ticks in total ? Then we have to separate it\r\n\r\n        var widthHeight = this.drawLinearTicksWrapper( widthPx, valrange );\r\n\r\n      } else {\r\n\r\n        var widthHeight = this.drawLogTicks();\r\n\r\n      }\r\n    } else {\r\n      var widthHeight = 0;\r\n    }\r\n\r\n    this.removeUselessTicks();\r\n    this.removeUselessTickLabels();\r\n\r\n    this.gridPrimary.setAttribute( 'd', this.gridLinePath.primary );\r\n    this.gridSecondary.setAttribute( 'd', this.gridLinePath.secondary );\r\n\r\n    // Looks for axes linked to this current axis\r\n    var axes = this.graph.findAxesLinkedTo( this );\r\n    axes.forEach( function( axis ) {\r\n\r\n      if ( !axis.linkedToAxis ) {\r\n        return;\r\n      }\r\n      axis.setMinPx( self.getMinPx() );\r\n      axis.setMaxPx( self.getMaxPx() );\r\n\r\n      axis.draw();\r\n\r\n    } );\r\n\r\n    /************************************/\r\n    /*** DRAW CHILDREN IMPL SPECIFIC ****/\r\n    /************************************/\r\n\r\n    //   this.drawSpecifics();\r\n\r\n    return widthHeight;\r\n  }\r\n\r\n  drawLines() {\r\n\r\n    if ( this.options.lineAt && Array.isArray( this.options.lineAt ) ) {\r\n\r\n      this.options.lineAt.forEach( ( val, index ) => {\r\n\r\n        if ( !isNaN( val ) && this.getCurrentMin() <= val && this.getCurrentMax() >= val ) {\r\n\r\n          this._lines[ index ] = this._drawLine( val, this._lines[ index ] );\r\n\r\n        } else {\r\n          this._hideLine( this._lines[ index ] );\r\n        }\r\n\r\n      } );\r\n    }\r\n\r\n  }\r\n\r\n  writeUnit() {\r\n    if ( this.options.unit ) {\r\n\r\n      this.unitTspan.setAttribute( 'display', 'visible' );\r\n      this.unitTspan.setAttribute( 'dx', 5 );\r\n\r\n      //6.10.2018: This was incompatible with the fact that there can be a unit + a *10^x factor, when setUnitDecate( false ) is called (which is also the default behaviour)\r\n      // We should check if this creates other issues.\r\n\r\n      //this.expTspan.setAttribute( 'display', 'none' );\r\n      //this.expTspanExp.setAttribute( 'display', 'none' );\r\n      this.unitTspan.innerHTML = ( this.options.unitWrapperBefore + this.preunit + this.options.unit + this.options.unitWrapperAfter ).replace( /\\^([-+0-9]*)(.*)/g, \"<tspan dy='-5' font-size='0.7em'>$1</tspan><tspan dy='5' font-size='1em'>$2</tspan>\" );\r\n\r\n    } else {\r\n      this.unitTspan.setAttribute( 'display', 'none' );\r\n    }\r\n  }\r\n\r\n  getExponentGreekLetter( val ) {\r\n\r\n    switch ( val ) {\r\n\r\n      case 3:\r\n        {\r\n          return 'k';\r\n        }\r\n\r\n      case 6:\r\n        {\r\n          return 'M';\r\n        }\r\n      case 9:\r\n        {\r\n          return 'G';\r\n        }\r\n      case 12:\r\n        {\r\n          return 'T';\r\n        }\r\n      case 15:\r\n        {\r\n          return 'E';\r\n        }\r\n      case -3:\r\n        {\r\n          return 'm';\r\n        }\r\n      case -6:\r\n        {\r\n          return '&mu;';\r\n        }\r\n      case -9:\r\n        {\r\n          return 'n';\r\n        }\r\n      case -12:\r\n        {\r\n          return 'p';\r\n\r\n        }\r\n      case -15:\r\n        {\r\n          return 'f';\r\n        }\r\n      default:\r\n        {\r\n          return '';\r\n        }\r\n    }\r\n\r\n  }\r\n\r\n  drawLinearTicksWrapper( widthPx, valrange ) {\r\n\r\n    let tickPrimaryUnit;\r\n\r\n    if ( this.options.primaryTickUnit ) {\r\n\r\n      tickPrimaryUnit = this.options.primaryTickUnit;\r\n\r\n    } else {\r\n\r\n      tickPrimaryUnit = this.getUnitPerTick( widthPx, this.getNbTicksPrimary(), valrange )[ 0 ];\r\n\r\n      if ( this.options.maxPrimaryTickUnit && this.options.maxPrimaryTickUnit < tickPrimaryUnit ) {\r\n        tickPrimaryUnit = this.options.maxPrimaryTickUnit;\r\n      } else if ( this.options.minPrimaryTickUnit && this.options.minPrimaryTickUnit > tickPrimaryUnit ) {\r\n        tickPrimaryUnit = this.options.minPrimaryTickUnit;\r\n      }\r\n\r\n    }\r\n\r\n    // We need to get here the width of the ticks to display the axis properly, with the correct shift\r\n    return this.drawTicks( tickPrimaryUnit, this.secondaryTicks() );\r\n  }\r\n\r\n  forcePrimaryTickUnit( primaryInterval ) {\r\n    this.options.primaryTickUnit = primaryInterval;\r\n\r\n    this.decimals = Math.max( 0, Math.round( -Math.log( primaryInterval ) / Math.log( 10 ) ) );\r\n\r\n  }\r\n\r\n  forcePrimaryTickUnitMax( value ) {\r\n    this.options.maxPrimaryTickUnit = value;\r\n  }\r\n\r\n  forcePrimaryTickUnitMin( value ) {\r\n    this.options.minPrimaryTickUnit = value;\r\n  }\r\n\r\n  getPrimaryTickUnit() {\r\n    return this.incrTick;\r\n  }\r\n\r\n  setTickLabelRatio( tickRatio ) {\r\n    this.options.ticklabelratio = tickRatio;\r\n  }\r\n\r\n  doesHideWhenNoSeriesShown() {\r\n    return this.options.hideWhenNoSeriesShown;\r\n  }\r\n\r\n  draw() {\r\n\r\n    this._widthLabels = 0;\r\n    var drawn = this._draw();\r\n    this._widthLabels += drawn;\r\n    return drawn;\r\n  }\r\n\r\n  drawTicks( primary, secondary ) {\r\n\r\n    var unitPerTick = primary,\r\n      min = this.getCurrentMin(),\r\n      max = this.getCurrentMax(),\r\n      secondaryIncr,\r\n      incrTick,\r\n      subIncrTick,\r\n      loop = 0;\r\n\r\n    if ( secondary ) {\r\n      secondaryIncr = unitPerTick / secondary;\r\n    }\r\n\r\n    incrTick = this.options.shiftToZero ? this.dataMin - Math.ceil( ( this.dataMin - min ) / unitPerTick ) * unitPerTick : Math.floor( min / unitPerTick ) * unitPerTick;\r\n    this.incrTick = primary;\r\n\r\n    while ( incrTick <= max ) {\r\n\r\n      loop++;\r\n      if ( loop > 1000 ) {\r\n        break;\r\n      }\r\n\r\n      if ( secondary ) {\r\n\r\n        subIncrTick = incrTick + secondaryIncr;\r\n        this.subIncrTick = subIncrTick;\r\n        //widthHeight = Math.max(widthHeight, this.drawTick(subIncrTick, 1));\r\n        var loop2 = 0;\r\n\r\n        while ( subIncrTick < incrTick + unitPerTick ) {\r\n          loop2++;\r\n          if ( loop2 > 100 ) {\r\n            break;\r\n          }\r\n\r\n          if ( subIncrTick < min || subIncrTick > max ) {\r\n            subIncrTick += secondaryIncr;\r\n            continue;\r\n          }\r\n\r\n          this.drawTickWrapper( subIncrTick, false, Math.abs( subIncrTick - incrTick - unitPerTick / 2 ) < 1e-4 ? 2 : 3 );\r\n\r\n          subIncrTick += secondaryIncr;\r\n        }\r\n      }\r\n\r\n      if ( incrTick < min || incrTick > max ) {\r\n        incrTick += primary;\r\n        continue;\r\n      }\r\n\r\n      this.drawTickWrapper( incrTick, true, 1 );\r\n      incrTick += primary;\r\n    }\r\n\r\n    this.widthHeightTick = this.getMaxSizeTick();\r\n    return this.widthHeightTick;\r\n  }\r\n\r\n  nextTick( level, callback ) {\r\n\r\n    this.ticks[ level ] = this.ticks[ level ] || [];\r\n    this.lastCurrentTick[ level ] = this.lastCurrentTick[ level ] || 0;\r\n    this.currentTick[ level ] = this.currentTick[ level ] || 0;\r\n\r\n    if ( this.currentTick[ level ] >= this.ticks[ level ].length ) {\r\n      var tick = document.createElementNS( this.graph.ns, 'line' );\r\n      this.groupTicks.appendChild( tick );\r\n      this.ticks[ level ].push( tick );\r\n\r\n      callback( tick );\r\n    }\r\n\r\n    var tick = this.ticks[ level ][ this.currentTick[ level ] ];\r\n\r\n    if ( this.currentTick[ level ] >= this.lastCurrentTick[ level ] ) {\r\n      tick.setAttribute( 'display', 'visible' );\r\n    }\r\n\r\n    this.currentTick[ level ]++;\r\n\r\n    return tick;\r\n  }\r\n\r\n  nextTickLabel( callback ) {\r\n\r\n    this.ticksLabels = this.ticksLabels || [];\r\n    this.lastCurrentTickLabel = this.lastCurrentTickLabel || 0;\r\n    this.currentTickLabel = this.currentTickLabel || 0;\r\n\r\n    if ( this.currentTickLabel >= this.ticksLabels.length ) {\r\n\r\n      var tickLabel = document.createElementNS( this.graph.ns, 'text' );\r\n      this.groupTickLabels.appendChild( tickLabel );\r\n      this.ticksLabels.push( tickLabel );\r\n      callback( tickLabel );\r\n    }\r\n\r\n    var tickLabel = this.ticksLabels[ this.currentTickLabel ];\r\n\r\n    if ( this.currentTickLabel >= this.lastCurrentTickLabel ) {\r\n      tickLabel.setAttribute( 'display', 'visible' );\r\n    }\r\n\r\n    this.currentTickLabel++;\r\n\r\n    return tickLabel;\r\n  }\r\n\r\n  removeUselessTicks() {\r\n\r\n    for ( var j in this.currentTick ) {\r\n\r\n      for ( var i = this.currentTick[ j ]; i < this.ticks[ j ].length; i++ ) {\r\n        this.ticks[ j ][ i ].setAttribute( 'display', 'none' );\r\n      }\r\n\r\n      this.lastCurrentTick[ j ] = this.currentTick[ j ];\r\n      this.currentTick[ j ] = 0;\r\n    }\r\n  }\r\n\r\n  removeUselessTickLabels() {\r\n\r\n    for ( var i = this.currentTickLabel; i < this.ticksLabels.length; i++ ) {\r\n      this.ticksLabels[ i ].setAttribute( 'display', 'none' );\r\n    }\r\n\r\n    this.lastCurrentTickLabel = this.currentTickLabel;\r\n    this.currentTickLabel = 0;\r\n\r\n  }\r\n  /*\r\n    doGridLine() {\r\n      var gridLine = document.createElementNS( this.graph.ns, 'line' );\r\n      this.groupGrids.appendChild( gridLine );\r\n      return gridLine;\r\n    };*/\r\n\r\n  nextGridLine( primary, x1, x2, y1, y2 ) {\r\n\r\n    if ( !( ( primary && this.options.primaryGrid ) || ( !primary && this.options.secondaryGrid ) ) ) {\r\n      return;\r\n    }\r\n\r\n    this.gridLinePath[ primary ? 'primary' : 'secondary' ] += `M ${ x1 } ${ y1 } L ${ x2 } ${ y2}`;\r\n  }\r\n\r\n  setGridLineStyle( gridLine, primary ) {\r\n\r\n    gridLine.setAttribute( 'shape-rendering', 'crispEdges' );\r\n    gridLine.setAttribute( 'stroke', primary ? this.getPrimaryGridColor() : this.getSecondaryGridColor() );\r\n    gridLine.setAttribute( 'stroke-width', primary ? this.getPrimaryGridWidth() : this.getSecondaryGridWidth() );\r\n    gridLine.setAttribute( 'stroke-opacity', primary ? this.getPrimaryGridOpacity() : this.getSecondaryGridOpacity() );\r\n\r\n    var dasharray;\r\n    if ( ( dasharray = primary ? this.getPrimaryGridDasharray() : this.getSecondaryGridDasharray() ) ) {\r\n      gridLine.setAttribute( 'stroke-dasharray', dasharray );\r\n    }\r\n\r\n  }\r\n\r\n  setGridLinesStyle() {\r\n    this.setGridLineStyle( this.gridPrimary, true );\r\n    this.setGridLineStyle( this.gridSecondary, false );\r\n    return this;\r\n  }\r\n\r\n  resetTicksLength() {}\r\n\r\n  secondaryTicks() {\r\n    return this.options.nbTicksSecondary;\r\n  }\r\n\r\n  drawLogTicks() {\r\n    var min = this.getCurrentMin(),\r\n      max = this.getCurrentMax();\r\n    var incr = Math.min( min, max );\r\n    var max = Math.max( min, max );\r\n\r\n    if ( incr < 1e-50 ) {\r\n      incr = 1e-50;\r\n    }\r\n\r\n    if ( Math.log( incr ) - Math.log( max ) > 20 ) {\r\n      max = Math.pow( 10, ( Math.log( incr ) * 20 ) );\r\n    }\r\n\r\n    var optsMain = {\r\n      fontSize: '1.0em',\r\n      exponential: true,\r\n      overwrite: false\r\n    };\r\n\r\n    if ( incr < 0 ) {\r\n      incr = 0;\r\n    }\r\n\r\n    var pow = incr == 0 ? 0 : Math.floor( Math.log( incr ) / Math.log( 10 ) );\r\n    var incr = 1,\r\n      val;\r\n    while ( ( val = incr * Math.pow( 10, pow ) ) < max ) {\r\n      if ( incr == 1 ) { // Superior power\r\n        if ( val > min )\r\n          this.drawTickWrapper( val, true, 1, optsMain );\r\n      }\r\n      if ( incr == 10 ) {\r\n        incr = 1;\r\n        pow++;\r\n      } else {\r\n\r\n        if ( incr != 1 && val > min ) {\r\n\r\n          this.drawTickWrapper( val, false, 2, {\r\n            overwrite: '',\r\n            fontSize: '0.6em'\r\n          } );\r\n\r\n        }\r\n\r\n        incr++;\r\n      }\r\n    }\r\n\r\n    this.widthHeightTick = this.getMaxSizeTick();\r\n    return this.widthHeightTick;\r\n  }\r\n\r\n  drawTickWrapper( value, label, level, options ) {\r\n\r\n    //var pos = this.getPos( value );\r\n\r\n    this.drawTick( value, level, options );\r\n  }\r\n\r\n  /**\r\n   * Used to scale the master axis into the slave axis\r\n   * @function SlaveAxisScalingFunction\r\n   * @param {Number} val - The master value to convert into a slave value\r\n   * @returns undefined\r\n   */\r\n\r\n  /**\r\n   * Makes this axis a slave. This can be used to show the same data with different units, specifically when a conversion function exists from axis -> slaveAxis but not in reverse. This axis should actually have no series.\r\n   * @param {Axis} axis - The master axis\r\n   * @param {SlaveAxisScalingFunction} scalingFunction - The scaling function used to map masterValue -> slaveValue\r\n   * @param {Number} decimals - The number of decimals to round the value to\r\n   * @memberof Axis\r\n   * @return {Number} The width or height used by the axis (used internally)\r\n   */\r\n  linkToAxis( axis, scalingFunction, decimals ) {\r\n\r\n    this.linkedToAxis = {\r\n      axis: axis,\r\n      scalingFunction: scalingFunction,\r\n      decimals: decimals || 1\r\n    };\r\n\r\n  }\r\n\r\n  drawLinkedToAxisTicksWrapper( widthPx, valrange ) {\r\n\r\n    var opts = this.linkedToAxis,\r\n      px = 0,\r\n      val,\r\n      t,\r\n      l,\r\n      delta2;\r\n\r\n    // Redrawing the main axis ? Why ?\r\n    //opts.axis.draw();\r\n\r\n    if ( !opts.deltaPx ) {\r\n      opts.deltaPx = 10;\r\n    }\r\n\r\n    do {\r\n\r\n      val = opts.scalingFunction( opts.axis.getVal( px + this.getMinPx() ) );\r\n\r\n      if ( opts.decimals ) {\r\n        this.decimals = opts.decimals;\r\n      }\r\n\r\n      t = this.drawTick( val, 1, {}, px + this.getMinPx() );\r\n\r\n      if ( !t ) {\r\n        console.error( val, px, this.getMinPx() );\r\n        throw new Error( 'Unable to draw tick. Please report the test-case' );\r\n      }\r\n\r\n      l = String( t[ 1 ].textContent ).length * 8;\r\n      delta2 = Math.round( l / 5 ) * 5;\r\n\r\n      if ( delta2 > opts.deltaPx ) {\r\n        opts.deltaPx = delta2;\r\n        //     this.drawInit();\r\n        this.drawLinkedToAxisTicksWrapper( widthPx, valrange );\r\n        return;\r\n      }\r\n\r\n      px += opts.deltaPx;\r\n\r\n    } while ( px < widthPx );\r\n  }\r\n\r\n  /**\r\n   * Transform a value into pixels, according to the axis scaling. The value is referenced to the drawing wrapper, not the the axis minimal value\r\n   * @param {Number} value - The value to translate into pixels\r\n   * @memberof Axis\r\n   * @return {Number} The value transformed into pixels\r\n   */\r\n  getPos( value ) {\r\n    return this.getPx( value );\r\n  }\r\n\r\n  /**\r\n   * @alias Axis~getPos\r\n   */\r\n  getPx( value ) {\r\n    //      if(this.getMaxPx() == undefined)\r\n    //        console.log(this);\r\n    //console.log(this.getMaxPx(), this.getMinPx(), this.getCurrentInterval());\r\n    // Ex 50 / (100) * (1000 - 700) + 700\r\n\r\n    //console.log( value, this.getCurrentMin(), this.getMaxPx(), this.getMinPx(), this.getCurrentInterval() );\r\n\r\n    if ( !this.options.logScale ) {\r\n\r\n      return ( value - this.getCurrentMin() ) / ( this.getCurrentInterval() ) * ( this.getMaxPx() - this.getMinPx() ) + this.getMinPx();\r\n    } else {\r\n      // 0 if value = min\r\n      // 1 if value = max\r\n\r\n      if ( value < 0 )\r\n        return;\r\n\r\n      var value = ( ( Math.log( value ) - Math.log( this.getCurrentMin() ) ) / ( Math.log( this.getCurrentMax() ) - Math.log( this.getCurrentMin() ) ) ) * ( this.getMaxPx() - this.getMinPx() ) + this.getMinPx();\r\n\r\n      return value;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @alias Axis~getPos\r\n   */\r\n  getRoundedPx( value ) {\r\n    //      if(this.getMaxPx() == undefined)\r\n    //        console.log(this);\r\n    //console.log(this.getMaxPx(), this.getMinPx(), this.getCurrentInterval());\r\n    // Ex 50 / (100) * (1000 - 700) + 700\r\n\r\n    //console.log( value, this.getCurrentMin(), this.getMaxPx(), this.getMinPx(), this.getCurrentInterval() );\r\n    return Math.round( this.getPx( value ) * 10 ) / 10;\r\n  }\r\n\r\n  /**\r\n   * Transform a pixel position (referenced to the graph zone, not to the axis minimum) into a value, according to the axis scaling.\r\n   * @param {Number} pixels - The number of pixels to translate into a value\r\n   * @memberof Axis\r\n   * @return {Number} The axis value corresponding to the pixel position\r\n   */\r\n  getVal( px ) {\r\n\r\n    if ( !this.options.logScale ) {\r\n\r\n      return ( px - this.getMinPx() ) / ( this.getMaxPx() - this.getMinPx() ) * this.getCurrentInterval() + this.getCurrentMin();\r\n\r\n    } else {\r\n\r\n      return Math.exp( ( px - this.getMinPx() ) / ( this.getMaxPx() - this.getMinPx() ) * ( Math.log( this.getCurrentMax() ) - Math.log( this.getCurrentMin() ) ) + Math.log( this.getCurrentMin() ) );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Transform a delta value into pixels\r\n   * @param {Number} value - The value to translate into pixels\r\n   * @return {Number} The value transformed into pixels\r\n   * @example graph.getBottomAxis().forceMin( 20 ).forceMax( 50 ).getRelPx( 2 ); // Returns how many pixels will be covered by 2 units. Let's assume 600px of width, it's ( 2 / 30 ) * 600 = 40px\r\n   */\r\n  getRelPx( delta ) {\r\n\r\n    return ( delta / this.getCurrentInterval() ) * ( this.getMaxPx() - this.getMinPx() );\r\n  }\r\n\r\n  /**\r\n   * Transform a delta pixels value into value\r\n   * @param {Number} pixels - The pixel to convert into a value\r\n   * @return {Number} The delta value corresponding to delta pixels\r\n   * @see Axis~getRelPx\r\n   * @example graph.getBottomAxis().forceMin( 20 ).forceMax( 50 ).getRelVal( 40 ); // Returns 2 (for 600px width)\r\n   */\r\n  getRelVal( px ) {\r\n    return px / ( this.getMaxPx() - this.getMinPx() ) * this.getCurrentInterval();\r\n  }\r\n\r\n  valueToText( value, forceDecimals = 2 ) {\r\n\r\n    if ( this.scientificExponent ) {\r\n\r\n      value /= Math.pow( 10, this.scientificExponent );\r\n      return value.toFixed( 1 );\r\n\r\n    } else {\r\n\r\n      value = value * Math.pow( 10, this.getExponentialFactor() ) * Math.pow( 10, this.getExponentialLabelFactor() );\r\n      if ( this.options.shiftToZero ) {\r\n        value -= this.dataMin;\r\n      }\r\n      if ( this.options.ticklabelratio ) {\r\n        value *= this.options.ticklabelratio;\r\n      }\r\n      if ( this.options.unitModification ) {\r\n        value = this.modifyUnit( value, this.options.unitModification );\r\n        return value;\r\n      }\r\n\r\n      var dec = this.decimals - this.getExponentialFactor() - this.getExponentialLabelFactor();\r\n\r\n      if ( isNaN( value ) ) {\r\n        return '';\r\n      }\r\n\r\n      if ( forceDecimals > 0 ) {\r\n        value = value.toFixed( forceDecimals )\r\n      } else {\r\n        if ( dec > 0 ) {\r\n          value = value.toFixed( dec );\r\n        } else {\r\n          value = value.toFixed( 0 );\r\n        }\r\n      }\r\n      if ( this.options.unitInTicks && this.options.unit ) {\r\n        value += ` ${ this.options.unit}`;\r\n      }\r\n\r\n      return value;\r\n    }\r\n  }\r\n\r\n  /**\r\n   *  Computes a value and returns it in HTML formatting\r\n   *  @memberof Axis\r\n   *  @param {Number} value - The value to compute\r\n   *  @param {Boolean} noScaling - Does not display scaling\r\n   *  @param {Boolean} noUnits - Does not display units\r\n   * @param {Number} [forceDecimals=0] - Force the precision of the display\r\n   *  @return {String} An HTML string containing the computed value\r\n   *  @example graph.getXAxis().setUnit( \"m\" ).setUnitDecade( true ).setScientific( true );\r\n   *  graph.getXAxis().valueToHtml( 3500 ); // Returns \"3.5 km\"\r\n   *  @see Axis#valueToText\r\n   */\r\n  valueToHtml( value, noScaling, noUnits, forceDecimals = 0 ) {\r\n\r\n    var text = this.valueToText( value, forceDecimals );\r\n    var letter;\r\n\r\n    if ( this.options.unitDecade && this.options.unit && this.scientificExponent !== 0 && ( this.scientificExponent = this.getEngineeringExponent( this.scientificExponent ) ) && ( letter = this.getExponentGreekLetter( this.scientificExponent ) ) ) {\r\n\r\n      text += letter;\r\n\r\n    } else if ( this.scientificExponent !== 0 && !isNaN( this.scientificExponent ) && !noScaling ) {\r\n      text += 'x10';\r\n      text += `<sup>${ this.scientificExponent }</sup>`;\r\n    }\r\n\r\n    if ( this.options.unit && !noUnits ) {\r\n\r\n      text += this.options.unit.replace( /\\^([-+0-9]*)/g, '<sup>$1</sup>' );\r\n    }\r\n\r\n    return text;\r\n  }\r\n\r\n  getModifiedValue( value ) {\r\n    if ( this.options.ticklabelratio ) {\r\n      value *= this.options.ticklabelratio;\r\n    }\r\n\r\n    if ( this.options.shiftToZero ) {\r\n      value -= this.getMinValue() * ( this.options.ticklabelratio || 1 );\r\n    }\r\n\r\n    return value;\r\n  }\r\n\r\n  modifyUnit( value, mode ) {\r\n\r\n    var text = '';\r\n    var incr = this.incrTick;\r\n    var umin;\r\n\r\n    switch ( mode ) {\r\n\r\n      case 'time': // val must be in seconds => transform in hours / days / months\r\n        var max = this.getModifiedValue( this.getMaxValue() ),\r\n          units = [\r\n            [ 60, 'min' ],\r\n            [ 3600, 'h' ],\r\n            [ 3600 * 24, 'd' ]\r\n          ];\r\n\r\n        if ( max < 3600 ) { // to minutes\r\n          umin = 0;\r\n        } else if ( max < 3600 * 24 ) {\r\n          umin = 1;\r\n        } else if ( max < 3600 * 24 * 30 ) {\r\n          umin = 2;\r\n        }\r\n\r\n        if ( !units[ umin ] ) {\r\n          return false;\r\n        }\r\n\r\n        value = value / units[ umin ][ 0 ];\r\n        var valueRounded = Math.floor( value );\r\n        text = valueRounded + units[ umin ][ 1 ];\r\n\r\n        // Addind lower unit for precision\r\n        umin--;\r\n        while ( incr < 1 * units[ umin + 1 ][ 0 ] && umin > -1 ) {\r\n\r\n          value = ( value - valueRounded ) * units[ umin + 1 ][ 0 ] / units[ umin ][ 0 ];\r\n          valueRounded = Math.round( value );\r\n          text += ` ${ valueRounded }${units[ umin ][ 1 ]}`;\r\n          umin--;\r\n        }\r\n\r\n        break;\r\n\r\n      case 'time:min.sec':\r\n        value = value / 60;\r\n        var valueRounded = Math.floor( value );\r\n        var s = ( `${Math.round( ( value - valueRounded ) * 60 ) }` );\r\n        s = s.length == 1 ? `0${ s}` : s;\r\n        text = `${valueRounded }.${ s}`;\r\n        break;\r\n\r\n      default:\r\n        break;\r\n    }\r\n\r\n    return text;\r\n  }\r\n\r\n  getExponentialFactor() {\r\n    return this.options.exponentialFactor;\r\n  }\r\n\r\n  setExponentialFactor( value ) {\r\n    this.options.exponentialFactor = value;\r\n  }\r\n\r\n  setExponentialLabelFactor( value ) {\r\n    this.options.exponentialLabelFactor = value;\r\n  }\r\n\r\n  getExponentialLabelFactor() {\r\n    return this.options.exponentialLabelFactor;\r\n  }\r\n\r\n  /**\r\n   * Sets the label of the axis\r\n   * @param {Number} label - The label to display under the axis\r\n   * @memberof Axis\r\n   * @return {Axis} The current axis\r\n   */\r\n  setLabel( label ) {\r\n    this.options.label = label;\r\n    return this;\r\n  }\r\n\r\n  setLabelFont( font ) {\r\n    this.options.labelFont = font;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * @memberof Axis\r\n   * @return {String} The label value\r\n   */\r\n  getLabel() {\r\n    return this.options.label;\r\n  }\r\n\r\n  setSpan( _from, _to ) {\r\n\r\n    this.options.span = [ _from, _to ];\r\n    return this;\r\n  }\r\n\r\n  getSpan() {\r\n    return this.options.span;\r\n  }\r\n\r\n  setLevel( level ) {\r\n    this._level = level;\r\n    return this;\r\n  }\r\n\r\n  getLevel() {\r\n    return this._level;\r\n  }\r\n\r\n  setShift( shift ) {\r\n    this.shift = shift;\r\n  }\r\n\r\n  getShift() {\r\n    return this.shift;\r\n  }\r\n\r\n  /**\r\n   * Changes the tick position\r\n   * @param {Number} pos - The new position ( \"outside\", \"centered\" or \"inside\" )\r\n   * @memberof Axis\r\n   * @return {Axis} The current axis\r\n   */\r\n  setTickPosition( pos ) {\r\n    switch ( pos ) {\r\n      case 3:\r\n      case 'outside':\r\n      case Graph.TICKS_OUTSIDE:\r\n        {\r\n          pos = 3;\r\n          break;\r\n        }\r\n\r\n      case 2:\r\n      case 'centered':\r\n      case Graph.TICKS_CENTERED:\r\n        {\r\n          pos = 2;\r\n          break;\r\n        }\r\n\r\n      case 1:\r\n      case 'inside':\r\n      case Graph.TICKS_INSIDE:\r\n      default:\r\n        {\r\n          pos = 1;\r\n          break;\r\n        }\r\n    }\r\n\r\n    this.options.tickPosition = pos;\r\n\r\n    switch ( this.options.tickPosition ) {\r\n      case 3:\r\n        this.tickPx1 = -2;\r\n        this.tickPx2 = 0;\r\n        break;\r\n\r\n      case 2:\r\n        this.tickPx1 = -1;\r\n        this.tickPx2 = 1;\r\n        break;\r\n\r\n      default:\r\n      case 1:\r\n        this.tickPx1 = 0;\r\n        this.tickPx2 = 2;\r\n        break;\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Displays or hides the axis grids\r\n   * @param {Boolean} on - true to enable the grids, false to disable them\r\n   * @memberof Axis\r\n   * @return {Axis} The current axis\r\n   */\r\n  setGrids( on ) {\r\n    this.options.primaryGrid = on;\r\n    this.options.secondaryGrid = on;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Displays or hides the axis primary grid\r\n   * @param {Boolean} on - true to enable the grids, false to disable it\r\n   * @memberof Axis\r\n   * @return {Axis} The current axis\r\n   */\r\n  setPrimaryGrid( on ) {\r\n    this.options.primaryGrid = on;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Displays or hides the axis secondary grid\r\n   * @param {Boolean} on - true to enable the grids, false to disable it\r\n   * @memberof Axis\r\n   * @return {Axis} The current axis\r\n   */\r\n  setSecondaryGrid( on ) {\r\n    this.options.secondaryGrid = on;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Enables primary grid\r\n   * @memberof Axis\r\n   * @return {Axis} The current axis\r\n   */\r\n  primaryGridOn() {\r\n    return this.setPrimaryGrid( true );\r\n  }\r\n\r\n  /**\r\n   * Disables primary grid\r\n   * @memberof Axis\r\n   * @return {Axis} The current axis\r\n   */\r\n  primaryGridOff() {\r\n    return this.setPrimaryGrid( false );\r\n  }\r\n\r\n  /**\r\n   * Enables secondary grid\r\n   * @memberof Axis\r\n   * @return {Axis} The current axis\r\n   */\r\n  secondaryGridOn() {\r\n    return this.setSecondaryGrid( true );\r\n  }\r\n\r\n  /**\r\n   * Disables secondary grid\r\n   * @return {Axis} The current axis\r\n   */\r\n  secondaryGridOff() {\r\n    return this.setSecondaryGrid( false );\r\n  }\r\n\r\n  /**\r\n   * Enables all the grids\r\n   * @return {Axis} The current axis\r\n   */\r\n  gridsOn() {\r\n    return this.setGrids( true );\r\n  }\r\n\r\n  /**\r\n   * Disables all the grids\r\n   * @return {Axis} The current axis\r\n   */\r\n  gridsOff() {\r\n    return this.setGrids( false );\r\n  }\r\n\r\n  /**\r\n   * @alias Axis#gridsOff\r\n   */\r\n  turnGridsOff() {\r\n    return this.gridsOff( ...arguments );\r\n  }\r\n\r\n  /**\r\n   * @alias Axis#gridsOn\r\n   */\r\n  turnGridsOn() {\r\n    return this.gridsOn( ...arguments );\r\n  }\r\n\r\n  /**\r\n   * Sets the color of the axis, the ticks and the label\r\n   * @memberof Axis\r\n   * @param {String} color - The new color of the primary ticks\r\n   * @return {Axis} The current axis\r\n   * @since 2.0.82\r\n   */\r\n  setColor( color = 'black' ) {\r\n    this.options.axisColor = color;\r\n    this.options.primaryTicksColor = color;\r\n    this.options.secondaryTicksColor = color;\r\n    this.options.ticksLabelColor = color;\r\n    this.options.primaryGridColor = color;\r\n    this.options.secondaryGridColor = color;\r\n    this.options.labelColor = color;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Sets the axis color\r\n   * @memberof Axis\r\n   * @param {String} color - The color to set the axis\r\n   * @return {Axis} The current axis\r\n   * @since 1.13.2\r\n   */\r\n  setAxisColor( color ) {\r\n    this.options.axisColor = color;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Gets the axis color\r\n   * @memberof Axis\r\n   * @return {String} The color of the axis\r\n   * @since 1.13.2\r\n   */\r\n  getAxisColor() {\r\n    return this.options.axisColor || 'black';\r\n  }\r\n\r\n  setTickLabelOffset( offsetValue ) {\r\n    this.options.tickLabelOffset = offsetValue;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Sets the color of the main ticks\r\n   * @memberof Axis\r\n   * @param {String} color - The new color of the primary ticks\r\n   * @return {Axis} The current axis\r\n   * @since 1.13.2\r\n   */\r\n  setPrimaryTicksColor( color ) {\r\n    this.options.primaryTicksColor = color;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Gets the color of the main ticks\r\n   * @memberof Axis\r\n   * @return {String} The color of the primary ticks\r\n   * @since 1.13.2\r\n   */\r\n  getPrimaryTicksColor() {\r\n    return this.options.primaryTicksColor || 'black';\r\n  }\r\n\r\n  /**\r\n   * Sets the color of the secondary ticks\r\n   * @memberof Axis\r\n   * @param {String} color - The new color of the secondary ticks\r\n   * @return {Axis} The current axis\r\n   * @since 1.13.2\r\n   */\r\n  setSecondaryTicksColor( color ) {\r\n    this.options.secondaryTicksColor = color;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Gets the color of the secondary ticks\r\n   * @memberof Axis\r\n   * @return {String} The color of the secondary ticks\r\n   * @since 1.13.2\r\n   */\r\n  getSecondaryTicksColor() {\r\n    return this.options.secondaryTicksColor || 'black';\r\n  }\r\n\r\n  /**\r\n   * Sets the color of the tick labels\r\n   * @memberof Axis\r\n   * @param {String} color - The new color of the tick labels\r\n   * @return {Axis} The current axis\r\n   * @since 1.13.2\r\n   */\r\n  setTicksLabelColor( color ) {\r\n    this.options.ticksLabelColor = color;\r\n    if ( Array.isArray( this.ticksLabels ) ) {\r\n      this.ticksLabels.forEach( ( tick ) => {\r\n        tick.setAttribute( 'fill', color );\r\n      } );\r\n    }\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Gets the color of the tick labels\r\n   * @memberof Axis\r\n   * @return {String} The color of the tick labels\r\n   * @since 1.13.2\r\n   */\r\n  getTicksLabelColor() {\r\n    return this.options.ticksLabelColor || 'black';\r\n  }\r\n\r\n  /**\r\n   * Sets the color of the primary grid\r\n   * @memberof Axis\r\n   * @param {String} color - The primary grid color\r\n   * @return {Axis} The current axis\r\n   * @since 1.13.3\r\n   */\r\n  setPrimaryGridColor( color ) {\r\n    this.options.primaryGridColor = color;\r\n    this.setGridLinesStyle();\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Gets the color of the primary grid\r\n   * @memberof Axis\r\n   * @return {String} color - The primary grid color\r\n   * @since 1.13.3\r\n   */\r\n  getPrimaryGridColor() {\r\n    return this.options.primaryGridColor;\r\n  }\r\n\r\n  /**\r\n   * Sets the color of the primary grid\r\n   * @memberof Axis\r\n   * @param {String} color - The primary grid color\r\n   * @return {Axis} The current axis\r\n   * @since 1.13.3\r\n   */\r\n  setSecondaryGridColor( color ) {\r\n    this.options.secondaryGridColor = color;\r\n    this.setGridLinesStyle();\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Gets the color of the secondary grid\r\n   * @memberof Axis\r\n   * @return {String} color - The secondary grid color\r\n   * @since 1.13.3\r\n   */\r\n  getSecondaryGridColor() {\r\n    return this.options.secondaryGridColor;\r\n  }\r\n\r\n  /**\r\n   * Sets the width of the primary grid lines\r\n   * @memberof Axis\r\n   * @param {Number} width - The width of the primary grid lines\r\n   * @return {Axis} The current axis\r\n   * @since 1.13.3\r\n   */\r\n  setPrimaryGridWidth( width ) {\r\n    this.options.primaryGridWidth = width;\r\n    this.setGridLinesStyle();\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Gets the width of the primary grid lines\r\n   * @memberof Axis\r\n   * @return {Number} width - The width of the primary grid lines\r\n   * @since 1.13.3\r\n   */\r\n  getPrimaryGridWidth() {\r\n    return this.options.primaryGridWidth;\r\n  }\r\n\r\n  /**\r\n   * Sets the width of the secondary grid lines\r\n   * @memberof Axis\r\n   * @param {Number} width - The width of the secondary grid lines\r\n   * @return {Axis} The current axis\r\n   * @since 1.13.3\r\n   */\r\n  setSecondaryGridWidth( width ) {\r\n    this.options.secondaryGridWidth = width;\r\n    this.setGridLinesStyle();\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Gets the width of the secondary grid lines\r\n   * @memberof Axis\r\n   * @return {Number} width - The width of the secondary grid lines\r\n   * @since 1.13.3\r\n   */\r\n  getSecondaryGridWidth() {\r\n    return this.options.secondaryGridWidth;\r\n  }\r\n\r\n  /**\r\n   * Sets the opacity of the primary grid lines\r\n   * @memberof Axis\r\n   * @param {Number} opacity - The opacity of the primary grid lines\r\n   * @return {Axis} The current axis\r\n   * @since 1.13.3\r\n   */\r\n  setPrimaryGridOpacity( opacity ) {\r\n    this.options.primaryGridOpacity = opacity;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Gets the opacity of the primary grid lines\r\n   * @memberof Axis\r\n   * @return {Number} opacity - The opacity of the primary grid lines\r\n   * @since 1.13.3\r\n   */\r\n  getPrimaryGridOpacity() {\r\n    return this.options.primaryGridOpacity;\r\n  }\r\n\r\n  /**\r\n   * Sets the opacity of the secondary grid lines\r\n   * @memberof Axis\r\n   * @param {Number} opacity - The opacity of the secondary grid lines\r\n   * @return {Axis} The current axis\r\n   * @since 1.13.3\r\n   */\r\n  setSecondaryGridOpacity( opacity ) {\r\n    this.options.secondaryGridOpacity = opacity;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Gets the opacity of the secondary grid lines\r\n   * @memberof Axis\r\n   * @return {Number} opacity - The opacity of the secondary grid lines\r\n   * @since 1.13.3\r\n   */\r\n  getSecondaryGridOpacity() {\r\n    return this.options.secondaryGridOpacity;\r\n  }\r\n\r\n  /**\r\n   * Sets the dasharray of the primary grid lines\r\n   * @memberof Axis\r\n   * @param {String} dasharray - The dasharray of the primary grid lines\r\n   * @return {Axis} The current axis\r\n   * @since 1.13.3\r\n   */\r\n  setPrimaryGridDasharray( dasharray ) {\r\n    this.options.primaryGridDasharray = dasharray;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Gets the dasharray of the primary grid lines\r\n   * @memberof Axis\r\n   * @return {String} dasharray - The dasharray of the primary grid lines\r\n   * @since 1.13.3\r\n   */\r\n  getPrimaryGridDasharray() {\r\n    return this.options.primaryGridDasharray;\r\n  }\r\n\r\n  /**\r\n   * Sets the dasharray of the secondary grid lines\r\n   * @memberof Axis\r\n   * @param {String} dasharray - The dasharray of the secondary grid lines\r\n   * @return {Axis} The current axis\r\n   * @since 1.13.3\r\n   */\r\n  setSecondaryGridDasharray( dasharray ) {\r\n    this.options.secondaryGridDasharray = dasharray;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Gets the dasharray of the secondary grid lines\r\n   * @memberof Axis\r\n   * @return {String} dasharray - The dasharray of the secondary grid lines\r\n   * @since 1.13.3\r\n   */\r\n  getSecondaryGridDasharray() {\r\n    return this.options.secondaryGridDasharray;\r\n  }\r\n\r\n  /**\r\n   * Sets the color of the label\r\n   * @memberof Axis\r\n   * @param {String} color - The new color of the label\r\n   * @return {Axis} The current axis\r\n   * @since 1.13.2\r\n   */\r\n  setLabelColor( color ) {\r\n    this.options.labelColor = color;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Gets the color of the label\r\n   * @memberof Axis\r\n   * @return {String} The color of the label\r\n   * @since 1.13.2\r\n   */\r\n  getLabelColor() {\r\n    return this.options.labelColor;\r\n  }\r\n\r\n  setTickContent( dom, val, options ) {\r\n    if ( !options ) {\r\n      options = {};\r\n    }\r\n\r\n    if ( options.overwrite || !options.exponential ) {\r\n\r\n      dom.textContent = options.overwrite || this.valueToText( val );\r\n\r\n    } else {\r\n      var log = Math.round( Math.log( val ) / Math.log( 10 ) );\r\n      var unit = Math.floor( val * Math.pow( 10, -log ) );\r\n\r\n      dom.textContent = ( unit != 1 ) ? `${unit }x10` : '10';\r\n      var tspan = document.createElementNS( this.graph.ns, 'tspan' );\r\n      tspan.textContent = log;\r\n      tspan.setAttribute( 'font-size', '0.7em' );\r\n      tspan.setAttribute( 'dy', -5 );\r\n      dom.appendChild( tspan );\r\n    }\r\n\r\n    if ( options.fontSize ) {\r\n      dom.setAttribute( 'font-size', options.fontSize );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @memberof Axis\r\n   * @returns {Boolean} true if it is an x axis, false otherwise\r\n   */\r\n  isX() {\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * @memberof Axis\r\n   * @returns {Boolean} true if it is an y axis, false otherwise\r\n   */\r\n  isY() {\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Sets the unit of the axis\r\n   * @param {String} unit - The unit of the axis\r\n   * @return {Axis} The current axis\r\n   * @memberof Axis\r\n   * @since 1.13.3\r\n   */\r\n  setUnit( unit ) {\r\n    this.options.unit = unit;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Places the unit in every tick\r\n   * @param {Boolean} bool - ```true``` to place the unit, ```false``` otherwise\r\n   * @return {Axis} The current axis\r\n   * @memberof Axis\r\n   * @since 2.0.44\r\n   */\r\n  setUnitInTicks( bool ) {\r\n    this.options.unitInTicks = bool;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Sets characters wrapping the unit\r\n   * @param {String} before - The string to insert before\r\n   * @param {String} after - The string to insert after\r\n   * @return {Axis} The current axis\r\n   * @memberof Axis\r\n   * @example axis.setUnitWrapper(\"[\", \"]\").setUnit('m'); // Will display [m]\r\n   * @since 1.13.3\r\n   */\r\n  setUnitWrapper( before, after ) {\r\n    this.options.unitWrapperBefore = before;\r\n    this.options.unitWrapperAfter = after;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Allows the unit to scale with thousands\r\n   * @param {Boolean} on - Enables this mode\r\n   * @return {Axis} The current axis\r\n   * @memberof Axis\r\n   * @since 1.13.3\r\n   */\r\n  setUnitDecade( on ) {\r\n    this.options.unitDecade = on;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Enable the scientific mode for the axis values. This way, big numbers can be avoided, e.g. \"1000000000\" would be displayed 1 with 10<sup>9</sup> or \"G\" shown on near the axis unit.\r\n   * @param {Boolean} on - Enables the scientific mode\r\n   * @return {Axis} The current axis\r\n   * @memberof Axis\r\n   * @since 1.13.3\r\n   */\r\n  setScientific( on ) {\r\n    this.options.scientificScale = on;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * In the scientific mode, forces the axis to take a specific power of ten. Useful if you want to show kilometers instead of meters for example. In this case you would use \"3\" as a value.\r\n   * @param {Number} scientificScaleExponent - Forces the scientific scale to take a defined power of ten\r\n   * @return {Axis} The current axis\r\n   * @memberof Axis\r\n   * @since 1.13.3\r\n   * @see Axis#setScientific\r\n   */\r\n  setScientificScaleExponent( scientificScaleExponent ) {\r\n    this.options.scientificScaleExponent = scientificScaleExponent;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * The engineer scaling is similar to the scientific scaling ({@link Axis#setScientificScale}) but allowing only mupltiples of 3 to be used to scale the axis (for instance, go from grams to kilograms while skipping decagrams and hexagrams)\r\n   * @param {Boolean} engineeringScaling - <code>true</code> to turn on the engineering scaling\r\n   * @return {Axis} The current axis\r\n   * @memberof Axis\r\n   * @since 1.13.3\r\n   * @see Axis#setScientific\r\n   */\r\n  setEngineering( engineeringScaling ) { //bool\r\n    this.options.scientificScale = engineeringScaling;\r\n    this.options.engineeringScale = engineeringScaling;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Calculates the closest engineering exponent from a scientific exponent\r\n   * @param {Number} scientificExponent - The exponent of 10 based on which the axis will be scaled\r\n   * @return {Number} The appropriate engineering exponent\r\n   * @memberof Axis\r\n   * @since 1.13.3\r\n   * @private\r\n   */\r\n  getEngineeringExponent( scientificExponent ) {\r\n\r\n    if ( scientificExponent > 0 ) {\r\n      scientificExponent -= ( scientificExponent % 3 );\r\n    } else {\r\n      scientificExponent -= ( 3 - ( -scientificExponent ) % 3 ) % 3;\r\n    }\r\n\r\n    return scientificExponent;\r\n  }\r\n\r\n  /**\r\n   * Enables log scaling\r\n   * @param {Boolean} logScale - ```true``` to enable the log scaling, ```false``` to disable it\r\n   * @return {Axis} The current axis\r\n   * @memberof Axis\r\n   * @since 1.13.3\r\n   */\r\n  setLogScale( log ) {\r\n    this.options.logScale = log;\r\n    return this;\r\n  }\r\n\r\n  isZoomed() {\r\n    return !( this.currentAxisMin == this.getMinValue() || this.currentAxisMax == this.getMaxValue() );\r\n  }\r\n\r\n  hasAxis() {\r\n    return false;\r\n  }\r\n\r\n  getType() {\r\n    return null;\r\n  }\r\n\r\n  useKatexForLabel( use = true ) {\r\n    this.options.useKatexForLabel = use;\r\n    return this;\r\n  }\r\n\r\n}\r\n\r\n/**\r\n *  @alias Axis#getVal\r\n */\r\nAxis.prototype.getValue = Axis.prototype.getVal;\r\n\r\n/**\r\n *  @alias Axis#getRelPx\r\n */\r\nAxis.prototype.getDeltaPx = Axis.prototype.getRelPx;\r\n\r\nexport default Axis;","import Axis from './graph.axis.js';\r\n\r\n/**\r\n * Generic constructor of a y axis\r\n * @augments Axis\r\n */\r\nclass AxisX extends Axis {\r\n  constructor( graph, topbottom, options = {} ) {\r\n    super( graph, topbottom, options );\r\n    this.top = topbottom == 'top';\r\n  }\r\n\r\n  /**\r\n   *  @private\r\n   *  Returns the position of the axis, used by refreshDrawingZone in core module\r\n   */\r\n  getAxisPosition() {\r\n    if ( !this.options.display ) {\r\n      return 0;\r\n    }\r\n\r\n    let size;\r\n\r\n    if ( this.options.tickLabelOffset == 0 ) {\r\n      // Normal mode, no offset\r\n      size = this.options.tickPosition == 1 ? 8 : 20;\r\n      size += this.graph.options.fontSize * 1;\r\n    } else {\r\n      // With an offset, and ticks inside, axis position is actually 0. Otherwise, it's the heights of the ticks\r\n      size = this.options.tickPosition == 1 ? 0 : 12;\r\n    }\r\n\r\n    if ( this.getLabel() ) {\r\n      size += this.graph.options.fontSize;\r\n    }\r\n\r\n    return size;\r\n  }\r\n\r\n  /**\r\n   *  @returns {Boolean} always ```true```\r\n   */\r\n  isX() {\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   *  @returns {Boolean} always ```false```\r\n   */\r\n  isY() {\r\n    return false;\r\n  }\r\n\r\n  forceHeight( height ) {\r\n    this.options.forcedHeight = height;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   *  @private\r\n   *  Used to set the x position of the axis\r\n   */\r\n  setShift( shift ) {\r\n    this.shift = shift;\r\n    if ( this.getShift() === undefined || !this.graph.getDrawingHeight() ) {\r\n      return;\r\n    }\r\n\r\n    this.group.setAttribute(\r\n      'transform',\r\n      `translate(0 ${\r\n        this.floating\r\n          ? this.getShift()\r\n          : this.top\r\n          ? this.shift\r\n          : this.graph.getDrawingHeight() - this.shift\r\n      })`\r\n    );\r\n  }\r\n\r\n  /**\r\n   *  Caclulates the maximum tick height\r\n   *  @return {Number} The maximum tick height\r\n   */\r\n  getMaxSizeTick() {\r\n    return ( this.top ? -1 : 1 ) * ( this.options.tickPosition == 1 ? 10 : 10 );\r\n  }\r\n\r\n  /**\r\n   *  Draws a tick. Mostly used internally but it can be useful if you want to make your own axes\r\n   *  @param {Number} value - The value in axis unit to place the tick\r\n   *  @param {Number} level - The importance of the tick\r\n   *  @param {Object} options - Further options to be passed to ```setTickContent```\r\n   *  @param {Number} forcedPos - Forces the position of the tick (for axis dependency)\r\n   */\r\n  drawTick( value, level, options, forcedPos ) {\r\n    var self = this,\r\n      val;\r\n\r\n    val = forcedPos || this.getPos( value );\r\n\r\n    if ( val == undefined || isNaN( val ) ) {\r\n      return;\r\n    }\r\n\r\n    var tick = this.nextTick( level, ( tick ) => {\r\n      tick.setAttribute(\r\n        'y1',\r\n        ( self.top ? 1 : -1 ) * self.tickPx1 * self.tickScaling[ level ]\r\n      );\r\n      tick.setAttribute(\r\n        'y2',\r\n        ( self.top ? 1 : -1 ) * self.tickPx2 * self.tickScaling[ level ]\r\n      );\r\n\r\n      if ( level == 1 ) {\r\n        tick.setAttribute( 'stroke', self.getPrimaryTicksColor() );\r\n      } else {\r\n        tick.setAttribute( 'stroke', self.getSecondaryTicksColor() );\r\n      }\r\n    } );\r\n\r\n    //      tick.setAttribute( 'shape-rendering', 'crispEdges' );\r\n    tick.setAttribute( 'x1', val );\r\n    tick.setAttribute( 'x2', val );\r\n\r\n    this.nextGridLine( level == 1, val, val, 0, this.graph.getDrawingHeight() );\r\n\r\n    //  this.groupTicks.appendChild( tick );\r\n    if ( level == 1 ) {\r\n      var tickLabel = this.nextTickLabel( ( tickLabel ) => {\r\n        tickLabel.setAttribute(\r\n          'y',\r\n          ( self.top ? -1 : 1 ) *\r\n          ( ( self.options.tickPosition == 1 ? 8 : 20 ) + ( self.top ? 10 : 0 ) ) +\r\n          this.options.tickLabelOffset\r\n        );\r\n        tickLabel.setAttribute( 'text-anchor', 'middle' );\r\n        if ( self.getTicksLabelColor() !== 'black' ) {\r\n          tickLabel.setAttribute( 'fill', self.getTicksLabelColor() );\r\n        }\r\n        tickLabel.style.dominantBaseline = 'hanging';\r\n      } );\r\n\r\n      tickLabel.setAttribute( 'x', val );\r\n      this.setTickContent( tickLabel, value, options );\r\n    }\r\n    //    this.ticks.push( tick );\r\n\r\n    return [ tick, tickLabel ];\r\n  }\r\n\r\n  drawLabel() {\r\n    // Place label correctly\r\n\r\n    if ( this.getLabelColor() !== 'black' ) {\r\n      this.label.setAttribute( 'fill', this.getLabelColor() );\r\n    }\r\n\r\n    if ( this.options.labelFont ) {\r\n      this.label.setAttribute( 'font-family', this.options.labelFont );\r\n    }\r\n\r\n    this.label.setAttribute( 'text-anchor', 'middle' );\r\n    this.label.setAttribute( 'style', 'display: initial;' );\r\n    this.label.setAttribute(\r\n      'x',\r\n      Math.abs( this.getMaxPx() + this.getMinPx() ) / 2\r\n    );\r\n    this.label.setAttribute(\r\n      'y',\r\n      ( this.top ? -1 : 1 ) *\r\n      ( ( this.options.tickPosition == 1 ? 10 : 25 ) +\r\n        this.graph.options.fontSize )\r\n    );\r\n    this.labelTspan.textContent = this.getLabel();\r\n  }\r\n\r\n  draw() {\r\n    var tickWidth = super.draw( ...arguments );\r\n    this.drawSpecifics();\r\n\r\n    return tickWidth;\r\n  }\r\n  /**\r\n   *  Paints the label, the axis line and anything else specific to x axes\r\n   */\r\n  drawSpecifics() {\r\n    // Adjusts group shift\r\n    //this.group.setAttribute('transform', 'translate(0 ' + this.getShift() + ')');\r\n\r\n    this.drawLabel();\r\n\r\n    this.line.setAttribute( 'x1', this.getMinPx() );\r\n    this.line.setAttribute( 'x2', this.getMaxPx() );\r\n    this.line.setAttribute( 'y1', 0 );\r\n    this.line.setAttribute( 'y2', 0 );\r\n\r\n    this.line.setAttribute( 'stroke', this.getAxisColor() );\r\n\r\n    if ( !this.top ) {\r\n      this.labelTspan.style.dominantBaseline = 'hanging';\r\n      this.expTspan.style.dominantBaseline = 'hanging';\r\n      this.expTspanExp.style.dominantBaseline = 'hanging';\r\n\r\n      this.unitTspan.style.dominantBaseline = 'hanging';\r\n      //  this.preunitTspan.style.dominantBaseline = 'hanging';\r\n    }\r\n\r\n    var span = this.getSpan();\r\n    this.line.setAttribute(\r\n      'marker-start', !this.options.splitMarks || span[ 0 ] == 0 ?\r\n      '' :\r\n      `url(#horionzalsplit_${this.graph.getId()})`\r\n    );\r\n    this.line.setAttribute(\r\n      'marker-end', !this.options.splitMarks || span[ 1 ] == 1 ?\r\n      '' :\r\n      `url(#horionzalsplit_${this.graph.getId()})`\r\n    );\r\n  }\r\n\r\n  /**\r\n   *  @private\r\n   */\r\n  _drawLine( pos, line ) {\r\n    let px = this.getPx( pos );\r\n\r\n    if ( !line ) {\r\n      line = document.createElementNS( this.graph.ns, 'line' );\r\n    } else {\r\n      line.setAttribute( 'display', 'initial' );\r\n    }\r\n\r\n    line.setAttribute( 'x1', px );\r\n    line.setAttribute( 'x2', px );\r\n\r\n    line.setAttribute( 'y1', 0 );\r\n    line.setAttribute( 'y2', this.graph.drawingSpaceHeight );\r\n\r\n    line.setAttribute( 'stroke', 'black' );\r\n    this.group.appendChild( line );\r\n\r\n    return line;\r\n  }\r\n\r\n  _hideLine( line ) {\r\n    if ( !line ) {\r\n      return;\r\n    }\r\n    line.setAttribute( 'display', 'none' );\r\n  }\r\n\r\n  /**\r\n   *  @private\r\n   */\r\n  handleMouseMoveLocal( x ) {\r\n    // handleMouseMoveLocal( x, y, e )\r\n    x -= this.graph.getPaddingLeft();\r\n    this.mouseVal = this.getVal( x );\r\n  }\r\n\r\n  /**\r\n   *  Caches the minimum px and maximum px position of the axis. Includes axis spans and flipping. Mostly used internally\r\n   */\r\n  setMinMaxFlipped() {\r\n    var interval = this.maxPx - this.minPx;\r\n\r\n    if ( isNaN( interval ) ) {\r\n      return;\r\n    }\r\n\r\n    var maxPx =\r\n      interval * this.options.span[ 1 ] + this.minPx - this.options.marginMax;\r\n    var minPx =\r\n      interval * this.options.span[ 0 ] + this.minPx + this.options.marginMin;\r\n\r\n    this.minPxFlipped = this.isFlipped() ? maxPx : minPx;\r\n    this.maxPxFlipped = this.isFlipped() ? minPx : maxPx;\r\n  }\r\n\r\n  getZProj( zValue ) {\r\n    return zValue * this.graph.options.zAxis.shiftX;\r\n  }\r\n}\r\n\r\nexport default AxisX;","import Axis from './graph.axis.js';\r\n\r\n/**\r\n * Generic constructor of a y axis\r\n * @extends Axis\r\n */\r\nclass AxisY extends Axis {\r\n  constructor( graph, leftright, options ) {\r\n    super( graph, leftright, options );\r\n    this.leftright = leftright;\r\n    this.left = leftright == 'left';\r\n  }\r\n\r\n  forceWidth( width ) {\r\n    this.options.forcedWidth = width;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   *  @private\r\n   */\r\n  setAxisPosition( shift ) {\r\n    this.shiftPosition = shift;\r\n  }\r\n\r\n  getAxisPosition() {\r\n    return this.shiftPosition || 0;\r\n  }\r\n\r\n  getAdditionalWidth() {\r\n    let pos = 0;\r\n    if ( this.getLabel() ) {\r\n      pos += this.graph.options.fontSize;\r\n    }\r\n\r\n    if ( this.isShown() ) {\r\n      pos += Math.abs( this.tickMargin );\r\n    }\r\n    return pos;\r\n  }\r\n\r\n  /**\r\n   *  @returns {Boolean} always ```false```\r\n   */\r\n  isX() {\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   *  @returns {Boolean} always ```true```\r\n   */\r\n  isY() {\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   *  @private\r\n   */\r\n  resetTicksLength() {\r\n    this.longestTick = [ false, 0 ];\r\n  }\r\n\r\n  /**\r\n   *  @private\r\n   */\r\n  getMaxSizeTick() {\r\n    // Gives an extra margin of 5px\r\n    return this.longestTick && this.longestTick[ 0 ] ?\r\n      this.longestTick[ 0 ].getComputedTextLength() + 5 :\r\n      0; //(this.left ? 10 : 0);\r\n  }\r\n\r\n  draw() {\r\n    this.tickMargin = this.left ?\r\n      -5 - this.tickPx1 * this.tickScaling[ 1 ] :\r\n      2 - this.tickPx1 * this.tickScaling[ 1 ];\r\n    var tickWidth = super.draw( ...arguments );\r\n    tickWidth += this.getAdditionalWidth();\r\n    this.drawSpecifics( tickWidth );\r\n\r\n    this.fullwidthlabel = tickWidth;\r\n\r\n    return tickWidth;\r\n  }\r\n\r\n  equalizePosition( width ) {\r\n    this.placeLabel( this.left ? -width : width );\r\n\r\n    if ( this.getLabel() ) {\r\n      return width + this.graph.options.fontSize;\r\n    }\r\n\r\n    return 0;\r\n  }\r\n\r\n  /**\r\n   *  @private\r\n   */\r\n  drawTick( value, level, options, forcedPos ) {\r\n    let pos, tick, tickLabel;\r\n\r\n    pos = forcedPos || this.getPos( value );\r\n\r\n    if ( pos == undefined || isNaN( pos ) ) {\r\n      return;\r\n    }\r\n\r\n    tick = this.nextTick( level, ( tick ) => {\r\n      tick.setAttribute(\r\n        'x1',\r\n        ( this.left ? 1 : -1 ) * this.tickPx1 * this.tickScaling[ level ]\r\n      );\r\n      tick.setAttribute(\r\n        'x2',\r\n        ( this.left ? 1 : -1 ) * this.tickPx2 * this.tickScaling[ level ]\r\n      );\r\n\r\n      if ( level == 1 ) {\r\n        tick.setAttribute( 'stroke', this.getPrimaryTicksColor() );\r\n      } else {\r\n        tick.setAttribute( 'stroke', this.getSecondaryTicksColor() );\r\n      }\r\n    } );\r\n\r\n    tick.setAttribute( 'y1', pos );\r\n    tick.setAttribute( 'y2', pos );\r\n\r\n    this.nextGridLine( level == 1, 0, this.graph.getDrawingWidth(), pos, pos );\r\n\r\n    //  this.groupTicks.appendChild( tick );\r\n    if ( level == 1 ) {\r\n      tickLabel = this.nextTickLabel( ( tickLabel ) => {\r\n        tickLabel.setAttribute(\r\n          'x',\r\n          this.tickMargin + this.options.tickLabelOffset\r\n        );\r\n        if ( this.getTicksLabelColor() !== 'black' ) {\r\n          tickLabel.setAttribute( 'fill', this.getTicksLabelColor() );\r\n        }\r\n\r\n        if ( this.left ) {\r\n          tickLabel.setAttribute( 'text-anchor', 'end' );\r\n        } else {\r\n          tickLabel.setAttribute( 'text-anchor', 'start' );\r\n        }\r\n        tickLabel.style.dominantBaseline = 'central';\r\n      } );\r\n\r\n      tickLabel.setAttribute( 'y', pos );\r\n      this.setTickContent( tickLabel, value, options );\r\n\r\n      if ( String( tickLabel.textContent ).length >= this.longestTick[ 1 ] ) {\r\n        this.longestTick[ 0 ] = tickLabel;\r\n        this.longestTick[ 1 ] = String( tickLabel.textContent ).length;\r\n      }\r\n    }\r\n  }\r\n\r\n  drawLabel() {\r\n    if ( this.getLabelColor() !== 'black' ) {\r\n      this.label.setAttribute( 'fill', this.getLabelColor() );\r\n    }\r\n\r\n    this.label.setAttribute( 'dominant-baseline', !this.left ? 'auto' : 'auto' );\r\n    this.labelTspan.textContent = this.getLabel();\r\n  }\r\n\r\n  placeLabel( y ) {\r\n    this.label.setAttribute(\r\n      'transform',\r\n      `translate(${y}, ${Math.abs( this.getMaxPx() + this.getMinPx() ) /\r\n        2}) rotate(-90)`\r\n    );\r\n  }\r\n\r\n  /**\r\n   *  @private\r\n   */\r\n  drawSpecifics() {\r\n    // Place label correctly\r\n    //this.label.setAttribute('x', (this.getMaxPx() - this.getMinPx()) / 2);\r\n    /*\r\n    if ( !this.left ) {\r\n\r\n      this.labelTspan.style.dominantBaseline = 'hanging';\r\n      this.expTspan.style.dominantBaseline = 'hanging';\r\n      this.expTspanExp.style.dominantBaseline = 'hanging';\r\n\r\n      this.unitTspan.style.dominantBaseline = 'hanging';\r\n      this.preunitTspan.style.dominantBaseline = 'hanging';\r\n    }\r\n*/\r\n    this.line.setAttribute( 'y1', this.getMinPx() );\r\n    this.line.setAttribute( 'y2', this.getMaxPx() );\r\n    this.line.setAttribute( 'x1', 0 );\r\n    this.line.setAttribute( 'x2', 0 );\r\n\r\n    this.line.setAttribute( 'stroke', this.getAxisColor() );\r\n\r\n    var span = this.getSpan();\r\n    this.line.setAttribute(\r\n      'marker-start', !this.options.splitMarks || span[ 0 ] == 0 ?\r\n      '' :\r\n      `url(#verticalsplit_${this.graph.getId()})`\r\n    );\r\n    this.line.setAttribute(\r\n      'marker-end', !this.options.splitMarks || span[ 1 ] == 1 ?\r\n      '' :\r\n      `url(#verticalsplit_${this.graph.getId()})`\r\n    );\r\n  }\r\n\r\n  /**\r\n   *  @private\r\n   */\r\n  setShift( shift ) {\r\n    this.shift = shift;\r\n\r\n    if ( !this.shift || !this.graph.getWidth() ) {\r\n      return;\r\n    }\r\n\r\n    let xshift = this.shift;\r\n    xshift = this.floating ?\r\n      xshift :\r\n      this.isLeft() ?\r\n      xshift :\r\n      this.graph.getWidth() -\r\n      this.graph.getPaddingRight() -\r\n      this.graph.getPaddingLeft() -\r\n      xshift;\r\n    this.group.setAttribute( 'transform', `translate( ${xshift} 0 )` );\r\n    this.drawLabel();\r\n  }\r\n\r\n  /**\r\n   *  @private\r\n   */\r\n  isLeft() {\r\n    return this.left;\r\n  }\r\n\r\n  /**\r\n   *  @private\r\n   */\r\n  isRight() {\r\n    return !this.left;\r\n  }\r\n\r\n  /**\r\n   *  @private\r\n   */\r\n  isFlipped() {\r\n    return !this.options.flipped;\r\n  }\r\n\r\n  /**\r\n   *  @private\r\n   */\r\n  _drawLine( pos, line ) {\r\n    let px = this.getPx( pos );\r\n\r\n    if ( !line ) {\r\n      line = document.createElementNS( this.graph.ns, 'line' );\r\n    } else {\r\n      line.setAttribute( 'display', 'initial' );\r\n    }\r\n\r\n    line.setAttribute( 'y1', px );\r\n    line.setAttribute( 'y2', px );\r\n\r\n    line.setAttribute( 'x1', 0 );\r\n    line.setAttribute( 'x2', this.graph.drawingSpaceWidth );\r\n\r\n    line.setAttribute( 'stroke', 'black' );\r\n    this.group.appendChild( line );\r\n\r\n    return line;\r\n  }\r\n\r\n  _hideLine( line ) {\r\n    if ( !line ) {\r\n      return;\r\n    }\r\n\r\n    line.setAttribute( 'display', 'none' );\r\n  }\r\n\r\n  /**\r\n   *  @private\r\n   */\r\n  handleMouseMoveLocal( x, y ) {\r\n    y -= this.graph.getPaddingTop();\r\n    this.mouseVal = this.getVal( y );\r\n  }\r\n\r\n  /**\r\n   * Scales the axis with respect to the series contained in an x axis\r\n   * @param {Axis} [ axis = graph.getXAxis() ] - The X axis to use as a reference\r\n   * @param {Serie} [ excludeSerie ] - A serie to exclude\r\n   * @param {Number} [ start = xaxis.getCurrentMin() ] - The start of the boundary\r\n   * @param {Number} [ end = xaxis.getCurrentMax() ] - The end of the boundary\r\n   * @param {Boolean} [ min = true ] - Adapt the min\r\n   * @param {Boolean} [ max = true ] - Adapt the max\r\n   * @returns {Axis} The current axis\r\n   */\r\n  scaleToFitAxis( axis, excludeSerie, start, end, min, max ) {\r\n    //console.log( axis instanceof GraphAxis );\r\n    if ( !axis || !axis.isX() ) {\r\n      axis = this.graph.getXAxis();\r\n    }\r\n\r\n    if ( isNaN( start ) ) {\r\n      start = axis.getCurrentMin();\r\n    }\r\n\r\n    if ( isNaN( end ) ) {\r\n      end = axis.getCurrentMax();\r\n    }\r\n\r\n    if ( min === undefined ) {\r\n      min = true;\r\n    }\r\n\r\n    if ( max === undefined ) {\r\n      max = true;\r\n    }\r\n\r\n    if ( typeof excludeSerie == 'number' ) {\r\n      end = start;\r\n      start = excludeSerie;\r\n      excludeSerie = false;\r\n    }\r\n\r\n    var maxV = -Infinity,\r\n      minV = Infinity,\r\n      j = 0;\r\n\r\n    for ( var i = 0, l = this.graph.series.length; i < l; i++ ) {\r\n      if ( !this.graph.series[ i ].isShown() ) {\r\n        continue;\r\n      }\r\n\r\n      if ( this.graph.series[ i ] == excludeSerie ) {\r\n        continue;\r\n      }\r\n\r\n      if ( !( this.graph.series[ i ].getXAxis() == axis ) ||\r\n        this.graph.series[ i ].getYAxis() !== this\r\n      ) {\r\n        continue;\r\n      }\r\n\r\n      j++;\r\n\r\n      maxV = max ? Math.max( maxV, this.graph.series[ i ].getMax( start, end ) ) : 0;\r\n      minV = min ? Math.min( minV, this.graph.series[ i ].getMin( start, end ) ) : 0;\r\n    }\r\n\r\n    if ( j == 0 ) {\r\n      this.setMinMaxToFitSeries(); // No point was found\r\n    } else {\r\n      // If we wanted originally to resize min and max. Otherwise we use the current value\r\n      minV = min ? minV : this.getCurrentMin();\r\n      maxV = max ? maxV : this.getCurrentMax();\r\n\r\n      var interval = maxV - minV;\r\n\r\n      minV -= this.options.axisDataSpacing.min * interval;\r\n      maxV += this.options.axisDataSpacing.max * interval;\r\n\r\n      this._doZoomVal( minV, maxV );\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   *  Caches the minimum px and maximum px position of the axis. Includes axis spans and flipping. Mostly used internally\r\n   *  @return {Axis} The current axis instance\r\n   */\r\n  setMinMaxFlipped() {\r\n    var interval = this.maxPx - this.minPx;\r\n\r\n    if ( isNaN( interval ) ) {\r\n      return;\r\n    }\r\n\r\n    var maxPx =\r\n      this.maxPx - interval * this.options.span[ 0 ] - this.options.marginMin;\r\n    var minPx =\r\n      this.maxPx - interval * this.options.span[ 1 ] + this.options.marginMax;\r\n\r\n    this.minPxFlipped = this.isFlipped() ? maxPx : minPx;\r\n    this.maxPxFlipped = this.isFlipped() ? minPx : maxPx;\r\n  }\r\n\r\n  getZProj( zValue ) {\r\n    return zValue * this.graph.options.zAxis.shiftY;\r\n  }\r\n}\r\n\r\nexport default AxisY;","import AxisX from './graph.axis.x.js';\r\n\r\n/**\r\n * Generic constructor of a y axis\r\n * @class AxisXBar\r\n * @augments Axis\r\n */\r\nclass AxisXBar extends AxisX {\r\n  constructor( graph, topbottom, options = {} ) {\r\n    super( graph, topbottom, options );\r\n  }\r\n\r\n  /**\r\n   * @param {Object[]} categories - Categories array\r\n   * @param {(String|Number)} categories[].title - The title of the category (to be dispalyed)\r\n   * @param {(String|Number)} categories[].name - The name of the category (to indentify series)\r\n   * @returns {AxisBar} The current axis instance\r\n   */\r\n  set categories( categories ) {\r\n    this._barCategories = categories;\r\n    return this;\r\n  }\r\n\r\n  draw() {\r\n    var self = this,\r\n      tickLabel,\r\n      elements = this._barCategories;\r\n\r\n    if ( !this.series || this.series.length == 0 ) {\r\n      this.autoSeries();\r\n    }\r\n\r\n    this.forceMin( 0 );\r\n    this.forceMax( 1 );\r\n\r\n    this.cacheCurrentMin();\r\n    this.cacheCurrentMax();\r\n    this.cacheInterval();\r\n\r\n    if ( !elements ) {\r\n      return;\r\n    }\r\n\r\n    if ( !Array.isArray( elements ) ) {\r\n      elements = [ elements ];\r\n    }\r\n\r\n    // this.drawInit();\r\n\r\n    //var widthPerElement = width / elements.length;\r\n    for ( var i = 0; i <= elements.length; i++ ) {\r\n      this.drawTick( i / elements.length, 2 );\r\n\r\n      if ( i < elements.length ) {\r\n        tickLabel = this.nextTickLabel( function( tickLabel ) {\r\n          tickLabel.setAttribute(\r\n            'y',\r\n            ( self.top ? -1 : 1 ) *\r\n            ( ( self.options.tickPosition == 1 ? 8 : 20 ) + ( self.top ? 10 : 0 ) )\r\n          );\r\n          tickLabel.setAttribute( 'text-anchor', 'middle' );\r\n          if ( self.getTicksLabelColor() !== 'black' ) {\r\n            tickLabel.setAttribute( 'fill', self.getTicksLabelColor() );\r\n          }\r\n          tickLabel.style.dominantBaseline = 'hanging';\r\n        } );\r\n\r\n        tickLabel.setAttribute( 'x', this.getPos( ( i + 0.5 ) / elements.length ) );\r\n        tickLabel.textContent = elements[ i ].title;\r\n      }\r\n    }\r\n\r\n    this.drawSpecifics();\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Sets the series automatically\r\n   * @returns {AxisBar} The current axis instance\r\n   */\r\n  autoSeries() {\r\n    let series = [];\r\n    for ( let serie of this.graph.series ) {\r\n      if ( serie.getXAxis() == this ) {\r\n        series.push( serie );\r\n      }\r\n    }\r\n    this.setSeries( ...series );\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Sets the series that should belong to the axis\r\n   * @param {...(Series|Number|String)} series - List of series identified either by their instance, or their index (string or number)\r\n   * @returns {AxisBar} The current axis instance\r\n   */\r\n  setSeries() {\r\n    var self = this;\r\n    this.series = arguments;\r\n\r\n    Array.prototype.map.call( this.series, function( serie, index ) {\r\n      if ( !( typeof serie == 'object' ) ) {\r\n        serie = self.graph.getSerie( serie );\r\n      }\r\n\r\n      if ( serie.setCategoryConfig ) {\r\n        serie.setCategoryConfig( index, self._barCategories, self.series.length );\r\n      }\r\n    } );\r\n\r\n    this._getUsedCategories();\r\n\r\n    return this;\r\n  }\r\n\r\n  _getUsedCategories() {\r\n    let categories = {},\r\n      total = 0;\r\n\r\n    Array.prototype.map.call( this.series, ( serie ) => {\r\n      let usedCategories = serie.getUsedCategories();\r\n      for ( let cat of usedCategories ) {\r\n        if ( !categories.hasOwnProperty( cat ) ) {\r\n          categories[ cat ] = 1;\r\n          total += 1;\r\n        }\r\n\r\n        categories[ cat ]++;\r\n        total++;\r\n      }\r\n    } );\r\n    let accumulator = 0;\r\n    for ( let i in categories ) {\r\n      let temp = categories[ i ];\r\n      categories[ i ] = accumulator;\r\n      accumulator += temp;\r\n    }\r\n\r\n    let dispatchedCategories = {};\r\n\r\n    Array.prototype.map.call( this.series, ( serie ) => {\r\n      let scategories = serie.getUsedCategories(),\r\n        indices = {};\r\n\r\n      scategories.forEach( ( cat ) => {\r\n        dispatchedCategories[ cat ] = dispatchedCategories[ cat ] || 0.5;\r\n        indices[ cat ] = ( categories[ cat ] + dispatchedCategories[ cat ] ) / total;\r\n        dispatchedCategories[ cat ]++;\r\n      } );\r\n\r\n      serie.setDataIndices( indices, total );\r\n    } );\r\n  }\r\n\r\n  getType() {\r\n    return 'category';\r\n  }\r\n}\r\n\r\nexport default AxisXBar;","import Axis from './graph.axis.js';\r\nimport * as util from './graph.util.js';\r\n\r\nvar axisFormat = [\r\n\r\n  {\r\n\r\n    threshold: 20,\r\n    increments: {\r\n\r\n      1: {\r\n        increment: 1, // 1 minute\r\n        unit: 'i',\r\n        format: 'HH\"h\"MM (dd/mm/yy)'\r\n      },\r\n\r\n      2: { // 10 seconds\r\n        increment: 1,\r\n        unit: 's',\r\n        format: 'MM:ss\"s\"'\r\n      }\r\n    }\r\n  },\r\n\r\n  {\r\n\r\n    threshold: 50,\r\n    increments: {\r\n\r\n      1: {\r\n        increment: 1, // 1 minute\r\n        unit: 'i',\r\n        format: 'HH\"h\"MM (dd/mm/yy)'\r\n      },\r\n\r\n      2: { // 2 seconds\r\n        increment: 2,\r\n        unit: 's',\r\n        format: 'MM:ss\"s\"'\r\n      }\r\n    }\r\n  },\r\n\r\n  {\r\n\r\n    threshold: 100,\r\n    increments: {\r\n\r\n      1: {\r\n        increment: 1, // 1 minute\r\n        unit: 'i',\r\n        format: 'HH\"h\"MM (dd/mm/yy)'\r\n      },\r\n\r\n      2: { // 5 seconds\r\n        increment: 5,\r\n        unit: 's',\r\n        format: 'MM:ss\"s\"'\r\n      }\r\n    }\r\n  },\r\n\r\n  {\r\n\r\n    threshold: 600,\r\n    increments: {\r\n\r\n      1: {\r\n        increment: 10, // 1 minute\r\n        unit: 'i',\r\n        format: 'HH\"h\"MM (dd/mm/yy)'\r\n      },\r\n\r\n      2: { // 10 seconds\r\n        increment: 30,\r\n        unit: 's',\r\n        format: 'MM:ss\"s\"'\r\n      }\r\n    }\r\n  },\r\n\r\n  { // One day\r\n\r\n    threshold: 1000,\r\n    increments: {\r\n\r\n      1: { // 1h\r\n        increment: 1,\r\n        unit: 'h',\r\n        format: 'HH\"h\"MM (dd/mm/yy)'\r\n      },\r\n\r\n      2: { // 10 minutes\r\n        increment: 10,\r\n        unit: 'i',\r\n        format: 'MM\"min\"'\r\n      }\r\n    }\r\n  },\r\n\r\n  { // One day\r\n\r\n    threshold: 1500,\r\n    increments: {\r\n\r\n      1: {\r\n        increment: 1, // One day on the first axis\r\n        unit: 'd',\r\n        format: 'dd/mm/yyyy'\r\n      },\r\n\r\n      2: {\r\n        increment: 1,\r\n        unit: 'i',\r\n        format: 'H\"h\"MM'\r\n      }\r\n    }\r\n  },\r\n\r\n  { // One day\r\n\r\n    threshold: 3000,\r\n    increments: {\r\n\r\n      1: {\r\n        increment: 1, // One day on the first axis\r\n        unit: 'd',\r\n        format: 'dd/mm/yyyy'\r\n      },\r\n\r\n      2: {\r\n        increment: 2,\r\n        unit: 'i',\r\n        format: 'H\"h\"MM'\r\n      }\r\n    }\r\n  },\r\n\r\n  { // One day\r\n\r\n    threshold: 8000,\r\n    increments: {\r\n\r\n      1: {\r\n        increment: 1, // One day on the first axis\r\n        unit: 'd',\r\n        format: 'dd/mm/yyyy'\r\n      },\r\n\r\n      2: {\r\n        increment: 10,\r\n        unit: 'i',\r\n        format: 'H\"h\"MM'\r\n      }\r\n    }\r\n  },\r\n\r\n  { // One day\r\n\r\n    threshold: 26400,\r\n    increments: {\r\n\r\n      1: {\r\n        increment: 1, // One day on the first axis\r\n        unit: 'd',\r\n        format: 'dd/mm/yyyy'\r\n      },\r\n\r\n      2: {\r\n        increment: 20,\r\n        unit: 'i',\r\n        format: 'H\"h\"MM'\r\n      }\r\n    }\r\n  },\r\n\r\n  { // One day\r\n\r\n    threshold: 86400,\r\n    increments: {\r\n\r\n      1: {\r\n        increment: 1, // One day on the first axis\r\n        unit: 'd',\r\n        format: 'dd/mm/yyyy'\r\n      },\r\n\r\n      2: {\r\n        increment: 1,\r\n        unit: 'h',\r\n        format: 'H\"h\"MM'\r\n      }\r\n    }\r\n  },\r\n\r\n  { // One day\r\n\r\n    threshold: 200000,\r\n    increments: {\r\n\r\n      1: {\r\n\r\n        increment: 1,\r\n        unit: 'd',\r\n        format: 'dd/mm/yyyy'\r\n      },\r\n\r\n      2: {\r\n\r\n        increment: 2, // One day on the first axis\r\n        unit: 'h',\r\n        format: 'H\"h\"MM'\r\n      }\r\n    }\r\n  },\r\n\r\n  { // One day\r\n\r\n    threshold: 400000,\r\n    increments: {\r\n\r\n      1: {\r\n\r\n        increment: 1,\r\n        unit: 'd',\r\n        format: 'dd/mm/yyyy'\r\n      },\r\n\r\n      2: {\r\n\r\n        increment: 6, // One day on the first axis\r\n        unit: 'h',\r\n        format: 'H\"h\"MM'\r\n      }\r\n    }\r\n  },\r\n\r\n  { // One day\r\n\r\n    threshold: 1400000,\r\n    increments: {\r\n\r\n      1: {\r\n\r\n        increment: 1,\r\n        unit: 'd',\r\n        format: 'dd/mm/yyyy'\r\n      },\r\n\r\n      2: {\r\n\r\n        increment: 12, // One day on the first axis\r\n        unit: 'h',\r\n        format: 'HH\"h\"MM'\r\n      }\r\n    }\r\n  },\r\n\r\n  { // One day\r\n\r\n    threshold: 6400000,\r\n    increments: {\r\n\r\n      1: {\r\n\r\n        increment: 1,\r\n        unit: 'm',\r\n        format: 'mmmm yyyy'\r\n      },\r\n\r\n      2: {\r\n\r\n        increment: 1, // One day on the first axis\r\n        unit: 'd',\r\n        format: 'dd'\r\n      }\r\n    }\r\n  },\r\n\r\n  { // One day\r\n\r\n    threshold: 12400000,\r\n    increments: {\r\n\r\n      1: {\r\n\r\n        increment: 1,\r\n        unit: 'm',\r\n        format: 'mmmm yyyy'\r\n      },\r\n\r\n      2: {\r\n\r\n        increment: 2, // One day on the first axis\r\n        unit: 'd',\r\n        format: 'dd'\r\n      }\r\n    }\r\n  },\r\n\r\n  { // One day\r\n\r\n    threshold: 86400000 * 0.5,\r\n    increments: {\r\n\r\n      1: {\r\n\r\n        increment: 1,\r\n        unit: 'm',\r\n        format: 'mmmm yyyy'\r\n      },\r\n\r\n      2: {\r\n\r\n        increment: 7, // One day on the first axis\r\n        unit: 'd',\r\n        format: 'dd'\r\n      }\r\n    }\r\n  },\r\n\r\n  { // One day\r\n\r\n    threshold: 86400000 * 0.8,\r\n    increments: {\r\n\r\n      1: {\r\n\r\n        increment: 1,\r\n        unit: 'm',\r\n        format: 'mmmm yyyy'\r\n      },\r\n\r\n      2: {\r\n\r\n        increment: 15, // One day on the first axis\r\n        unit: 'd',\r\n        format: 'dd'\r\n      }\r\n    }\r\n  },\r\n\r\n  { // One month\r\n\r\n    threshold: 86400000 * 1,\r\n    increments: {\r\n\r\n      1: {\r\n        increment: 1,\r\n        unit: 'y',\r\n        format: 'yyyy'\r\n      },\r\n\r\n      2: {\r\n\r\n        increment: 3, // One day on the first axis\r\n        unit: 'm',\r\n        format: 'mm/yyyy'\r\n      }\r\n    }\r\n  },\r\n\r\n  { // One month\r\n\r\n    threshold: 86400000 * 2,\r\n    increments: {\r\n\r\n      1: {\r\n\r\n        increment: 1,\r\n        unit: 'y',\r\n        format: 'yyyy'\r\n      },\r\n\r\n      2: {\r\n\r\n        increment: 4, // One day on the first axis\r\n        unit: 'm',\r\n        format: 'mm/yyyy'\r\n      }\r\n    }\r\n  },\r\n\r\n  { // One month\r\n\r\n    threshold: 86400000 * 10,\r\n    increments: {\r\n\r\n      1: {\r\n\r\n        increment: 1,\r\n        unit: 'y',\r\n        format: 'yyyy'\r\n      },\r\n\r\n      2: {\r\n\r\n        increment: 6, // One day on the first axis\r\n        unit: 'm',\r\n        format: 'mm/yyyy'\r\n      }\r\n    }\r\n  },\r\n\r\n  { // One month\r\n\r\n    threshold: 86400000 * 12,\r\n    increments: {\r\n\r\n      1: {\r\n\r\n        increment: 1,\r\n        unit: 'y',\r\n        format: 'yyyy'\r\n      },\r\n\r\n      2: {\r\n\r\n        increment: 1, // One day on the first axis\r\n        unit: 'y',\r\n        format: 'yyyy'\r\n      }\r\n    }\r\n  },\r\n\r\n];\r\n\r\n/*\r\n * Date Format 1.2.3\r\n * (c) 2007-2009 Steven Levithan <stevenlevithan.com>\r\n * MIT license\r\n *\r\n * Includes enhancements by Scott Trenda <scott.trenda.net>\r\n * and Kris Kowal <cixar.com/~kris.kowal/>\r\n *\r\n * Accepts a date, a mask, or a date and a mask.\r\n * Returns a formatted version of the given date.\r\n * The date defaults to the current date/time.\r\n * The mask defaults to dateFormat.masks.default.\r\n */\r\n\r\nvar dateFormat = ( function() {\r\n  var token = /d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\\1?|[WLloSZ]|\"[^\"]*\"|'[^']*'/g,\r\n    timezone = /\\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\\d{4})?)\\b/g,\r\n    timezoneClip = /[^-+\\dA-Z]/g,\r\n    pad = function( val, len ) {\r\n      val = String( val );\r\n      len = len || 2;\r\n      while ( val.length < len ) val = `0${ val}`;\r\n      return val;\r\n    },\r\n    getWeek = function( d, f ) {\r\n      var onejan = new Date( d[ `${f }FullYear` ](), 0, 1 );\r\n      return Math.ceil( ( ( ( d - onejan ) / 86400000 ) + onejan[ `${f }Day` ]() + 1 ) / 7 );\r\n    };\r\n\r\n  // Regexes and supporting functions are cached through closure\r\n  return function( date, mask, utc ) {\r\n    var dF = dateFormat;\r\n\r\n    // You can't provide utc if you skip other args (use the \"UTC:\" mask prefix)\r\n    if ( arguments.length == 1 && Object.prototype.toString.call( date ) == '[object String]' && !/\\d/.test( date ) ) {\r\n      mask = date;\r\n      date = undefined;\r\n    }\r\n\r\n    // Passing date through Date applies Date.parse, if necessary\r\n    date = date ? new Date( date ) : new Date();\r\n    if ( isNaN( date ) ) throw SyntaxError( `invalid date:${ date}` );\r\n\r\n    mask = String( dF.masks[ mask ] || mask || dF.masks.default );\r\n\r\n    // Allow setting the utc argument via the mask\r\n    if ( mask.slice( 0, 4 ) == 'UTC:' ) {\r\n      mask = mask.slice( 4 );\r\n      utc = true;\r\n    }\r\n\r\n    var _ = utc ? 'getUTC' : 'get',\r\n      d = date[ `${_ }Date` ](),\r\n      D = date[ `${_ }Day` ](),\r\n      m = date[ `${_ }Month` ](),\r\n      y = date[ `${_ }FullYear` ](),\r\n      H = date[ `${_ }Hours` ](),\r\n      M = date[ `${_ }Minutes` ](),\r\n      s = date[ `${_ }Seconds` ](),\r\n      L = date[ `${_ }Milliseconds` ](),\r\n      o = utc ? 0 : date.getTimezoneOffset(),\r\n      flags = {\r\n        d: d,\r\n        dd: pad( d ),\r\n        ddd: dF.i18n.dayNames[ D ],\r\n        dddd: dF.i18n.dayNames[ D + 7 ],\r\n        m: m + 1,\r\n        mm: pad( m + 1 ),\r\n        mmm: dF.i18n.monthNames[ m ],\r\n        mmmm: dF.i18n.monthNames[ m + 12 ],\r\n        yy: String( y ).slice( 2 ),\r\n        yyyy: y,\r\n        h: H % 12 || 12,\r\n        hh: pad( H % 12 || 12 ),\r\n        H: H,\r\n        HH: pad( H ),\r\n        M: M,\r\n        MM: pad( M ),\r\n        s: s,\r\n        ss: pad( s ),\r\n        l: pad( L, 3 ),\r\n        L: pad( L > 99 ? Math.round( L / 10 ) : L ),\r\n        t: H < 12 ? 'a' : 'p',\r\n        tt: H < 12 ? 'am' : 'pm',\r\n        T: H < 12 ? 'A' : 'P',\r\n        TT: H < 12 ? 'AM' : 'PM',\r\n        Z: utc ? 'UTC' : ( String( date ).match( timezone ) || [ '' ] ).pop().replace( timezoneClip, '' ),\r\n        o: ( o > 0 ? '-' : '+' ) + pad( Math.floor( Math.abs( o ) / 60 ) * 100 + Math.abs( o ) % 60, 4 ),\r\n        S: [ 'th', 'st', 'nd', 'rd' ][ d % 10 > 3 ? 0 : ( d % 100 - d % 10 != 10 ) * d % 10 ],\r\n        W: getWeek( date, _ ),\r\n      };\r\n\r\n    return mask.replace( token, function( $0 ) {\r\n      return $0 in flags ? flags[ $0 ] : $0.slice( 1, $0.length - 1 );\r\n    } );\r\n  };\r\n} )();\r\n\r\n// Some common format strings\r\ndateFormat.masks = {\r\n  'default': 'ddd mmm dd yyyy HH:MM:ss',\r\n  shortDate: 'm/d/yy',\r\n  mediumDate: 'mmm d, yyyy',\r\n  longDate: 'mmmm d, yyyy',\r\n  fullDate: 'dddd, mmmm d, yyyy',\r\n  shortTime: 'h:MM TT',\r\n  mediumTime: 'h:MM:ss TT',\r\n  longTime: 'h:MM:ss TT Z',\r\n  isoDate: 'yyyy-mm-dd',\r\n  isoTime: 'HH:MM:ss',\r\n  isoDateTime: \"yyyy-mm-dd'T'HH:MM:ss\",\r\n  isoUtcDateTime: \"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'\"\r\n};\r\n\r\n// Internationalization strings\r\ndateFormat.i18n = {\r\n  dayNames: [\r\n    'Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat',\r\n    'Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'\r\n  ],\r\n  monthNames: [\r\n    'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec',\r\n    'January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'\r\n  ]\r\n};\r\n\r\n/* END DATE FORMAT */\r\n\r\nfunction getClosestIncrement( value, basis ) {\r\n  return Math.round( value / basis ) * basis;\r\n}\r\n\r\nfunction roundDate( date, format ) {\r\n\r\n  switch ( format.unit ) {\r\n\r\n    case 's': // Round at n hour\r\n\r\n      date.setSeconds( getClosestIncrement( date.getSeconds(), format.increment ) );\r\n      date.setMilliseconds( 0 );\r\n\r\n      break;\r\n\r\n    case 'i': // Round at n hour\r\n\r\n      date.setMinutes( getClosestIncrement( date.getMinutes(), format.increment ) );\r\n      date.setSeconds( 0 );\r\n      date.setMilliseconds( 0 );\r\n\r\n      break;\r\n\r\n    case 'h': // Round at n hour\r\n\r\n      date.setHours( getClosestIncrement( date.getHours(), format.increment ) );\r\n\r\n      date.setMinutes( 0 );\r\n      date.setSeconds( 0 );\r\n      date.setMilliseconds( 0 );\r\n\r\n      break;\r\n\r\n    case 'd':\r\n\r\n      date.setMinutes( 0 );\r\n      date.setSeconds( 0 );\r\n      date.setMilliseconds( 0 );\r\n      date.setHours( 0 );\r\n\r\n      date.setDate( getClosestIncrement( date.getDate(), format.increment ) );\r\n\r\n      break;\r\n\r\n    case 'm':\r\n\r\n      date.setMinutes( 0 );\r\n      date.setSeconds( 0 );\r\n      date.setMilliseconds( 0 );\r\n      date.setHours( 0 );\r\n      date.setDate( 1 );\r\n\r\n      date.setMonth( getClosestIncrement( date.getMonth(), format.increment ) );\r\n\r\n      break;\r\n\r\n    case 'y':\r\n\r\n      date.setMinutes( 0 );\r\n      date.setSeconds( 0 );\r\n      date.setMilliseconds( 0 );\r\n      date.setHours( 0 );\r\n      date.setDate( 1 );\r\n      date.setMonth( 0 );\r\n\r\n      //date.setYear( getClosest( date.getDate(), format.increment ) );\r\n\r\n      break;\r\n\r\n    default:\r\n      {\r\n        throw new Error( 'Date format not recognized' );\r\n      }\r\n  }\r\n\r\n  return date;\r\n}\r\n\r\nfunction incrementDate( date, format ) {\r\n\r\n  switch ( format.unit ) {\r\n\r\n    case 's':\r\n\r\n      date.setSeconds( date.getSeconds() + format.increment );\r\n      date.setMilliseconds( 0 );\r\n\r\n      break;\r\n\r\n    case 'i':\r\n\r\n      date.setMinutes( date.getMinutes() + format.increment );\r\n      date.setSeconds( 0 );\r\n      date.setMilliseconds( 0 );\r\n\r\n      break;\r\n\r\n    case 'h': // Round at n hour\r\n\r\n      date.setHours( date.getHours() + format.increment );\r\n      date.setMinutes( 0 );\r\n      date.setSeconds( 0 );\r\n      date.setMilliseconds( 0 );\r\n\r\n      break;\r\n\r\n    case 'd':\r\n\r\n      date.setDate( date.getDate() + format.increment );\r\n      date.setMinutes( 0 );\r\n      date.setSeconds( 0 );\r\n      date.setMilliseconds( 0 );\r\n      date.setHours( 0 );\r\n\r\n      break;\r\n\r\n    case 'm':\r\n\r\n      date.setMonth( date.getMonth() + format.increment );\r\n      date.setMinutes( 0 );\r\n      date.setSeconds( 0 );\r\n      date.setMilliseconds( 0 );\r\n      date.setHours( 0 );\r\n      date.setDate( 1 );\r\n\r\n      break;\r\n\r\n    case 'y':\r\n\r\n      date.setFullYear( date.getFullYear() + format.increment );\r\n\r\n      date.setMinutes( 0 );\r\n      date.setSeconds( 0 );\r\n      date.setMilliseconds( 0 );\r\n      date.setHours( 0 );\r\n      date.setDate( 1 );\r\n      date.setMonth( 0 );\r\n\r\n      break;\r\n\r\n    default:\r\n      {\r\n        throw new Error( 'Date format not recognized' );\r\n      }\r\n  }\r\n\r\n  return date;\r\n}\r\n\r\nfunction getGroup( axis, level, number ) {\r\n\r\n  if ( axis.groups[ level ][ number ] ) {\r\n    axis.groups[ level ][ number ].group.setAttribute( 'display', 'block' );\r\n    return axis.groups[ level ][ number ];\r\n  }\r\n\r\n  var g = {\r\n\r\n    group: document.createElementNS( axis.graph.ns, 'g' ),\r\n    text: document.createElementNS( axis.graph.ns, 'text' )\r\n  };\r\n\r\n  var line = document.createElementNS( axis.graph.ns, 'line' );\r\n\r\n  line.setAttribute( 'stroke', 'black' );\r\n  line.setAttribute( 'y1', 0 );\r\n  switch ( level ) {\r\n\r\n    case 2:\r\n\r\n      line.setAttribute( 'y2', 6 );\r\n      g.text.setAttribute( 'y', 15 );\r\n\r\n      g.line = line;\r\n\r\n      g.group.appendChild( g.line );\r\n      break;\r\n\r\n    default:\r\n    case 1:\r\n\r\n      line.setAttribute( 'y2', 20 );\r\n      g.text.setAttribute( 'y', 10 );\r\n\r\n      g.line1 = line;\r\n      g.line2 = line.cloneNode();\r\n\r\n      g.group.appendChild( g.line1 );\r\n      g.group.appendChild( g.line2 );\r\n\r\n      break;\r\n  }\r\n\r\n  g.text.setAttribute( 'text-anchor', 'middle' );\r\n  g.text.setAttribute( 'dominant-baseline', 'middle' );\r\n\r\n  g.group.appendChild( g.text );\r\n\r\n  axis.getWrapper( level ).appendChild( g.group );\r\n\r\n  return axis.groups[ level ][ number ] = g;\r\n}\r\n\r\nfunction hideGroups( axis, level, from ) {\r\n\r\n  for ( ; from < axis.groups[ level ].length; from++ ) {\r\n\r\n    hideGroup( axis.groups[ level ][ from ] );\r\n  }\r\n}\r\n\r\nfunction hideGroup( group ) {\r\n  group.group.setAttribute( 'display', 'none' );\r\n}\r\n\r\nfunction getDateText( date, format ) {\r\n\r\n  return dateFormat( date, format );\r\n}\r\n\r\nfunction renderGroup( level, group, text, minPx, maxPx, x1, x2 ) {\r\n\r\n  switch ( level ) {\r\n\r\n    case 2:\r\n\r\n      if ( x1 < minPx || x1 > maxPx ) {\r\n\r\n        hideGroup( group );\r\n        return;\r\n      }\r\n\r\n      group.line.setAttribute( 'x1', x1 );\r\n      group.line.setAttribute( 'x2', x1 );\r\n      group.text.setAttribute( 'x', x1 );\r\n      group.text.textContent = text;\r\n\r\n      break;\r\n\r\n    default:\r\n    case 1:\r\n\r\n      var x1B = Math.max( minPx, Math.min( maxPx, x1 ) ),\r\n        x2B = Math.max( minPx, Math.min( maxPx, x2 ) );\r\n\r\n      if ( isNaN( x2B ) || isNaN( x1B ) ) {\r\n        return;\r\n      }\r\n\r\n      group.line1.setAttribute( 'x1', x1B );\r\n      group.line2.setAttribute( 'x1', x2B );\r\n\r\n      group.line1.setAttribute( 'x2', x1B );\r\n      group.line2.setAttribute( 'x2', x2B );\r\n\r\n      group.text.setAttribute( 'x', ( x1B + x2B ) / 2 );\r\n\r\n      while ( text.length * 8 > x2B - x1B ) {\r\n\r\n        text = `${text.substr( 0, text.length - 2 ) }.`;\r\n\r\n        if ( text.length == 1 ) {\r\n          text = '';\r\n          break;\r\n        }\r\n      }\r\n\r\n      group.text.textContent = text;\r\n      break;\r\n  }\r\n}\r\n\r\nclass GraphTimeAxis extends Axis {\r\n\r\n  constructor() {\r\n\r\n    super( ...arguments );\r\n  }\r\n\r\n  init( graph, options ) {\r\n\r\n    super.init( graph, options );\r\n\r\n    this.wrapper = {\r\n      1: document.createElementNS( graph.ns, 'g' ),\r\n      2: document.createElementNS( graph.ns, 'g' )\r\n    };\r\n    this.groups = {\r\n      1: [],\r\n      2: []\r\n    };\r\n\r\n    var rect = document.createElementNS( graph.ns, 'rect' );\r\n    rect.setAttribute( 'fill', '#c0c0c0' );\r\n    rect.setAttribute( 'stroke', '#808080' );\r\n    rect.setAttribute( 'height', '20' );\r\n    rect.setAttribute( 'x', '0' );\r\n    rect.setAttribute( 'y', '0' );\r\n\r\n    this.rect = rect;\r\n\r\n    this.wrapper[ 1 ].appendChild( this.rect );\r\n\r\n    //    this.init( graph, options );\r\n\r\n    this.group.appendChild( this.wrapper[ 1 ] );\r\n    this.group.appendChild( this.wrapper[ 2 ] );\r\n\r\n    this.wrapper[ 1 ].setAttribute( 'transform', 'translate( 0, 25 )' );\r\n    this.wrapper[ 2 ].setAttribute( 'transform', 'translate( 0, 00 )' );\r\n  }\r\n\r\n  draw() { // Redrawing of the axis\r\n\r\n    //this.drawInit();\r\n\r\n    this.cacheCurrentMax();\r\n    this.cacheCurrentMin();\r\n\r\n    if ( this.currentAxisMin == undefined || this.currentAxisMax == undefined ) {\r\n      this.setMinMaxToFitSeries( true ); // We reset the min max as a function of the series\r\n\r\n    }\r\n\r\n    this.line.setAttribute( 'x1', this.getMinPx() );\r\n    this.line.setAttribute( 'x2', this.getMaxPx() );\r\n    this.line.setAttribute( 'y1', 0 );\r\n    this.line.setAttribute( 'y2', 0 );\r\n\r\n    var widthPx = this.maxPx - this.minPx;\r\n    var widthTime = this.getCurrentInterval();\r\n\r\n    var timePerPx = widthTime / widthPx;\r\n\r\n    var maxVal = this.getCurrentMax();\r\n    var minVal = this.getCurrentMin();\r\n\r\n    this.rect.setAttribute( 'width', widthPx );\r\n    this.rect.setAttribute( 'x', this.minPx );\r\n\r\n    if ( !maxVal || !minVal ) {\r\n      return 0;\r\n    }\r\n\r\n    var currentFormat;\r\n\r\n    for ( i = 0; i < axisFormat.length; i++ ) {\r\n\r\n      if ( axisFormat[ i ].threshold > timePerPx ) {\r\n        currentFormat = axisFormat[ i ];\r\n\r\n        break;\r\n      }\r\n\r\n    }\r\n\r\n    if ( !currentFormat ) {\r\n      currentFormat = axisFormat[ axisFormat.length - 1 ];\r\n    }\r\n\r\n    var xVal1,\r\n      xVal2,\r\n      level = 0,\r\n      dateFirst,\r\n      currentDate,\r\n      text,\r\n      group,\r\n      i;\r\n\r\n    for ( level = 1; level <= 2; level++ ) {\r\n\r\n      if ( !util.isNumeric( minVal ) ) {\r\n        hideGroups( this, level, 0 );\r\n        break;\r\n      }\r\n\r\n      dateFirst = new Date( minVal );\r\n\r\n      currentDate = roundDate( dateFirst, currentFormat.increments[ level ] );\r\n\r\n      i = 0;\r\n\r\n      do {\r\n        /** @ignore */\r\n        text = getDateText( currentDate, currentFormat.increments[ level ].format );\r\n        group = getGroup( this, level, i );\r\n\r\n        xVal1 = this.getPx( currentDate.getTime() );\r\n        currentDate = incrementDate( currentDate, currentFormat.increments[ level ] );\r\n        xVal2 = this.getPx( currentDate.getTime() );\r\n\r\n        renderGroup( level, group, text, this.getMinPx(), this.getMaxPx(), xVal1, xVal2 );\r\n\r\n        i++;\r\n        if ( i > 100 ) {\r\n          break;\r\n        }\r\n      } while ( currentDate.getTime() < maxVal );\r\n\r\n      hideGroups( this, level, i );\r\n    }\r\n\r\n  }\r\n\r\n  isX() {\r\n    return true;\r\n  }\r\n\r\n  getWrapper( level ) {\r\n    return this.wrapper[ level ];\r\n  }\r\n\r\n  setShift( shift ) {\r\n    this.shift = shift;\r\n    this.group.setAttribute( 'transform', `translate(0 ${ this.top ? this.shift : ( this.graph.getDrawingHeight() - this.shift ) })` );\r\n  }\r\n\r\n  getAxisPosition() {\r\n    return 60;\r\n  }\r\n\r\n  setMinMaxFlipped() {\r\n\r\n    var interval = this.maxPx - this.minPx;\r\n    var maxPx = interval * this.options.span[ 1 ] + this.minPx;\r\n    var minPx = interval * this.options.span[ 0 ] + this.minPx;\r\n\r\n    this.minPxFlipped = this.isFlipped() ? maxPx : minPx;\r\n    this.maxPxFlipped = this.isFlipped() ? minPx : maxPx;\r\n  }\r\n\r\n}\r\n\r\nexport default GraphTimeAxis;","import * as util from '../graph.util.js';\r\n\r\nvar ErrorBarMixin = {\r\n  /*\r\n    doErrorDraw: function( orientation, error, originVal, originPx, xpx, ypx ) {\r\n\r\n      if ( !( error instanceof Array ) ) {\r\n        error = [ error ];\r\n      }\r\n\r\n      var functionName = orientation == 'y' ? 'getY' : 'getX';\r\n      var bars = orientation == 'y' ? [ 'top', 'bottom' ] : [ 'left', 'right' ];\r\n      var j;\r\n\r\n      if ( isNaN( xpx ) || isNaN( ypx ) ) {\r\n        return;\r\n      }\r\n\r\n      for ( var i = 0, l = error.length; i < l; i++ ) {\r\n\r\n        if ( error[ i ] instanceof Array ) { // TOP\r\n\r\n          j = bars[ 0 ];\r\n          this.errorstyles[ i ].paths[ j ] += \" M \" + xpx + \" \" + ypx;\r\n          this.errorstyles[ i ].paths[ j ] += this.makeError( orientation, i, this[ functionName ]( originVal + error[ i ][ 0 ] ), originPx, j );\r\n\r\n          j = bars[ 1 ];\r\n          this.errorstyles[ i ].paths[ j ] += \" M \" + xpx + \" \" + ypx;\r\n          this.errorstyles[ i ].paths[ j ] += this.makeError( orientation, i, this[ functionName ]( originVal - error[ i ][ 1 ] ), originPx, j );\r\n\r\n        } else {\r\n\r\n          j = bars[ 0 ];\r\n\r\n          this.errorstyles[ i ].paths[ j ] += \" M \" + xpx + \" \" + ypx;\r\n          this.errorstyles[ i ].paths[ j ] += this.makeError( orientation, i, this[ functionName ]( originVal + error[ i ] ), originPx, j );\r\n          j = bars[ 1 ];\r\n          this.errorstyles[ i ].paths[ j ] += \" M \" + xpx + \" \" + ypx;\r\n          this.errorstyles[ i ].paths[ j ] += this.makeError( orientation, i, this[ functionName ]( originVal - error[ i ] ), originPx, j );\r\n        }\r\n      }\r\n    },\r\n  */\r\n\r\n  /*\r\n    makeError: function( orientation, type, coord, origin, quadOrientation ) {\r\n\r\n      var method;\r\n      switch ( this.errorstyles[ level ].type ) {\r\n        case 'bar':\r\n          method = \"makeBar\";\r\n          break;\r\n\r\n        case 'box':\r\n          method = \"makeBox\";\r\n          break;\r\n      }\r\n\r\n      return this[ method + orientation.toUpperCase() ]( coord, origin, this.errorstyles[ level ][ quadOrientation ] );\r\n\r\n    },*/\r\n\r\n  makeBarY: function( coordY, origin, style ) {\r\n    if ( !coordY || style === undefined ) {\r\n      return;\r\n    }\r\n    var width = !util.isNumeric( style.width ) ? 10 : style.width;\r\n    return ` V ${coordY} m -${width / 2} 0 h ${width} m -${width /\r\n      2} 0 V ${origin} `;\r\n  },\r\n\r\n  makeBoxY: function( coordY, origin, style ) {\r\n    if ( !coordY || style === undefined ) {\r\n      return;\r\n    }\r\n    return ` m 5 0 V ${coordY} h -10 V ${origin} m 5 0 `;\r\n  },\r\n\r\n  makeBarX: function( coordX, origin, style ) {\r\n    if ( !coordX || style === undefined ) {\r\n      return;\r\n    }\r\n    var height = !util.isNumeric( style.width ) ? 10 : style.width;\r\n    return ` H ${coordX} m 0 -${height / 2} v ${height} m 0 -${height /\r\n      2} H ${origin} `;\r\n  },\r\n\r\n  makeBoxX: function( coordX, origin, style ) {\r\n    if ( !coordX || style === undefined ) {\r\n      return;\r\n    }\r\n    return ` v 5 H ${coordX} v -10 H ${origin} v 5 `;\r\n  },\r\n  /*\r\n    check: function( index, valY, valX ) {\r\n\r\n      var dx, dy;\r\n\r\n      if ( ( this.getType() == Graph.SERIE_LINE || this.getType() == Graph.SERIE_SCATTER ) ) {\r\n\r\n        if ( !( dx = this.data[ index * 2 ] ) || !( dy = this.data[ index * 2 + 1 ] ) ) { //\r\n          return;\r\n        }\r\n      }\r\n\r\n      if ( dx === undefined ) {\r\n        return;\r\n      }\r\n\r\n      for ( var i = 0, l = valY.length; i < l; i++ ) {\r\n\r\n        if ( Array.isArray( valY[ i ] ) ) {\r\n\r\n          if ( !isNaN( valY[ i ][ 0 ] ) ) {\r\n            this._checkY( dy + valY[ i ][ 0 ] );\r\n          }\r\n\r\n          if ( !isNaN( valY[ i ][ 1 ] ) ) {\r\n            this._checkY( dy - valY[ i ][ 1 ] );\r\n          }\r\n\r\n        } else {\r\n\r\n          if ( !isNaN( valY[ i ] ) ) {\r\n            this._checkY( dy + valY[ i ] );\r\n            this._checkY( dy - valY[ i ] );\r\n          }\r\n        }\r\n      }\r\n\r\n      for ( var i = 0, l = valX.length; i < l; i++ ) {\r\n\r\n        if ( Array.isArray( valX[ i ] ) ) {\r\n\r\n          if ( !isNaN( valX[ i ][ 0 ] ) ) {\r\n            this._checkX( dx - valX[ i ][ 0 ] );\r\n          }\r\n\r\n          if ( !isNaN( valX[ i ][ 1 ] ) ) {\r\n            this._checkX( dx + valX[ i ][ 1 ] );\r\n          }\r\n\r\n        } else {\r\n\r\n          if ( !isNaN( valY[ i ] ) ) {\r\n            this._checkX( dx - valX[ i ] );\r\n            this._checkX( dx + valX[ i ] );\r\n          }\r\n        }\r\n      }\r\n\r\n    },\r\n  */\r\n\r\n  /**\r\n   *\r\n   *  @example serie.setErrorBarStyle( [ { type: 'bar', x: {} }, { type: 'box', top: { strokeColor: 'green', fillColor: 'olive' }, bottom: { strokeColor: 'red', fillColor: \"#800000\" }  } ] );\r\n   */\r\n  setErrorBarStyle: function( errorstyle ) {\r\n    this.errorbarStyle = this._setErrorStyle( errorstyle );\r\n\r\n    return this;\r\n  },\r\n\r\n  setErrorBoxStyle: function( errorstyle ) {\r\n    this.errorboxStyle = this._setErrorStyle( errorstyle );\r\n    return this;\r\n  },\r\n\r\n  _setErrorStyle( errorstyles = {} ) {\r\n    var styles = [];\r\n    var pairs = [\r\n      [ 'y', 'top', 'bottom' ],\r\n      [ 'x', 'left', 'right' ]\r\n    ];\r\n\r\n    var makePath = ( style ) => {\r\n      style.dom = document.createElementNS( this.graph.ns, 'path' );\r\n      style.dom.setAttribute( 'fill', style.fillColor || 'none' );\r\n      style.dom.setAttribute( 'stroke', style.strokeColor || 'black' );\r\n      style.dom.setAttribute( 'stroke-opacity', style.strokeOpacity || 1 );\r\n      style.dom.setAttribute( 'fill-opacity', style.fillOpacity || 1 );\r\n      style.dom.setAttribute( 'stroke-width', style.strokeWidth || 1 );\r\n\r\n      this.groupMain.appendChild( style.dom );\r\n    };\r\n    // i is bar or box\r\n\r\n    var styles = {};\r\n\r\n    if ( typeof errorstyles == 'string' ) {\r\n      errorstyles = {};\r\n    }\r\n\r\n    for ( var j = 0, l = pairs.length; j < l; j++ ) {\r\n      if ( errorstyles.all ) {\r\n        errorstyles[ pairs[ j ][ 1 ] ] = util.extend( true, {}, errorstyles.all );\r\n        errorstyles[ pairs[ j ][ 2 ] ] = util.extend( true, {}, errorstyles.all );\r\n      }\r\n\r\n      if ( errorstyles[ pairs[ j ][ 0 ] ] ) {\r\n        //.x, .y\r\n\r\n        errorstyles[ pairs[ j ][ 1 ] ] = util.extend(\r\n          true, {},\r\n          errorstyles[ pairs[ j ][ 0 ] ]\r\n        );\r\n        errorstyles[ pairs[ j ][ 2 ] ] = util.extend(\r\n          true, {},\r\n          errorstyles[ pairs[ j ][ 0 ] ]\r\n        );\r\n      }\r\n\r\n      for ( var k = 1; k <= 2; k++ ) {\r\n        if ( errorstyles[ pairs[ j ][ k ] ] ) {\r\n          styles[ pairs[ j ][ k ] ] = errorstyles[ pairs[ j ][ k ] ];\r\n          makePath( styles[ pairs[ j ][ k ] ] );\r\n        }\r\n      }\r\n    }\r\n    return styles;\r\n  },\r\n\r\n  errorDrawInit: function() {\r\n    var error;\r\n    //  var pathError = \"M 0 0 \";\r\n\r\n    if ( this.errorboxStyle ) {\r\n      this.errorboxStyle.paths = {\r\n        top: '',\r\n        bottom: '',\r\n        left: '',\r\n        right: ''\r\n      };\r\n    }\r\n\r\n    if ( this.errorbarStyle ) {\r\n      this.errorbarStyle.paths = {\r\n        top: '',\r\n        bottom: '',\r\n        left: '',\r\n        right: ''\r\n      };\r\n    }\r\n  },\r\n\r\n  errorAddPoint: function( index, dataX, dataY, xpx, ypx ) {\r\n    /* eslint-disable no-cond-assign */\r\n    let error;\r\n\r\n    if ( this.errorbarStyle ) {\r\n      if ( ( error = this.waveform.getErrorBarXBelow( index ) ) ) {\r\n        this.errorbarStyle.paths.left += ` M ${xpx} ${ypx}`;\r\n        this.errorbarStyle.paths.left += this.makeBarX(\r\n          this.getX( dataX - error ),\r\n          xpx,\r\n          this.errorbarStyle.left\r\n        );\r\n      }\r\n\r\n      if ( ( error = this.waveform.getErrorBarXAbove( index ) ) ) {\r\n        this.errorbarStyle.paths.right += ` M ${xpx} ${ypx}`;\r\n        this.errorbarStyle.paths.right += this.makeBarX(\r\n          this.getX( dataX + error ),\r\n          xpx,\r\n          this.errorbarStyle.right\r\n        );\r\n      }\r\n\r\n      if ( ( error = this.waveform.getErrorBarYBelow( index ) ) ) {\r\n        this.errorbarStyle.paths.bottom += ` M ${xpx} ${ypx}`;\r\n        this.errorbarStyle.paths.bottom += this.makeBarY(\r\n          this.getY( dataY - error ),\r\n          ypx,\r\n          this.errorbarStyle.bottom\r\n        );\r\n      }\r\n\r\n      if ( ( error = this.waveform.getErrorBarYAbove( index ) ) ) {\r\n        this.errorbarStyle.paths.top += ` M ${xpx} ${ypx}`;\r\n        this.errorbarStyle.paths.top += this.makeBarY(\r\n          this.getY( dataY + error ),\r\n          ypx,\r\n          this.errorbarStyle.top\r\n        );\r\n      }\r\n    }\r\n\r\n    if ( this.errorboxStyle ) {\r\n      if ( ( error = this.waveform.getErrorBoxXBelow( index ) ) ) {\r\n        this.errorboxStyle.paths.left += ` M ${xpx} ${ypx}`;\r\n        this.errorboxStyle.paths.left += this.makeBoxX(\r\n          this.getX( dataX - error ),\r\n          xpx,\r\n          this.errorboxStyle.left\r\n        );\r\n      }\r\n\r\n      if ( ( error = this.waveform.getErrorBoxXAbove( index ) ) ) {\r\n        this.errorboxStyle.paths.right += ` M ${xpx} ${ypx}`;\r\n        this.errorboxStyle.paths.right += this.makeBoxX(\r\n          this.getX( dataX + error ),\r\n          xpx,\r\n          this.errorboxStyle.right\r\n        );\r\n      }\r\n\r\n      if ( ( error = this.waveform.getErrorBoxYBelow( index ) ) ) {\r\n        this.errorboxStyle.paths.bottom += ` M ${xpx} ${ypx}`;\r\n        this.errorboxStyle.paths.bottom += this.makeBoxY(\r\n          this.getY( dataY - error ),\r\n          ypx,\r\n          this.errorboxStyle.bottom\r\n        );\r\n      }\r\n\r\n      if ( ( error = this.waveform.getErrorBoxYAbove( index ) ) ) {\r\n        this.errorboxStyle.paths.top += ` M ${xpx} ${ypx}`;\r\n        this.errorboxStyle.paths.top += this.makeBoxY(\r\n          this.getY( dataY + error ),\r\n          ypx,\r\n          this.errorboxStyle.top\r\n        );\r\n      }\r\n    }\r\n    /* eslint-enable */\r\n  },\r\n\r\n  errorAddPointBarChart: function( j, posY, xpx, ypx ) {\r\n    var error;\r\n    if ( this.error && ( error = this.error[ j ] ) ) {\r\n      this.doErrorDraw( 'y', error, posY, ypx, xpx, ypx );\r\n    }\r\n  },\r\n\r\n  errorDraw: function() {\r\n    if ( this.errorbarStyle ) {\r\n      for ( var j in this.errorbarStyle.paths ) {\r\n        if ( this.errorbarStyle[ j ] && this.errorbarStyle[ j ].dom ) {\r\n          this.errorbarStyle[ j ].dom.setAttribute(\r\n            'd',\r\n            this.errorbarStyle.paths[ j ]\r\n          );\r\n        }\r\n      }\r\n    }\r\n\r\n    if ( this.errorboxStyle ) {\r\n      for ( var j in this.errorboxStyle.paths ) {\r\n        if ( this.errorboxStyle[ j ] && this.errorboxStyle[ j ].dom ) {\r\n          this.errorboxStyle[ j ].dom.setAttribute(\r\n            'd',\r\n            this.errorboxStyle.paths[ j ]\r\n          );\r\n        }\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\nexport default ErrorBarMixin;","import EventEmitter from '../dependencies/eventEmitter/EventEmitter.js';\r\nimport * as util from '../graph.util.js';\r\nimport {\r\n  Waveform\r\n} from '../util/waveform.js';\r\n\r\nconst defaultOptions = {\r\n  redrawShapesAfterDraw: false\r\n};\r\n\r\n/**\r\n * Serie class to be extended\r\n * @static\r\n */\r\nclass Serie extends EventEmitter {\r\n  constructor( graph, name, options, defaultInherited ) {\r\n    super( ...arguments );\r\n    this.options = util.extend(\r\n      true, {},\r\n      defaultOptions,\r\n      defaultInherited,\r\n      options\r\n    );\r\n    this.graph = graph;\r\n    this.name = name;\r\n    this.groupMain = document.createElementNS( this.graph.ns, 'g' );\r\n\r\n    this._symbolLegendContainer = document.createElementNS( this.graph.ns, 'g' );\r\n  }\r\n\r\n  postInit() {}\r\n\r\n  draw() {}\r\n\r\n  beforeDraw() {}\r\n\r\n  afterDraw() {\r\n    if ( this.options.redrawShapesAfterDraw ) {\r\n      this.graph.getShapesOfSerie( this ).forEach( ( shape ) => {\r\n        shape.redraw();\r\n      } );\r\n    }\r\n\r\n    this.emit( 'draw' );\r\n  }\r\n\r\n  /**\r\n   * Sets data to the serie\r\n   * @memberof Serie\r\n   * @param {(Object|Array|Array[])} data - The data of the serie\r\n   * @param {Boolean} [ oneDimensional=false ] - In some cases you may need to force the 1D type. This is required when one uses an array or array to define the data (see examples)\r\n   * @param{String} [ type=float ] - Specify the type of the data. Use <code>int</code> to save memory (half the amount of bytes allocated to the data).\r\n   * @example serie.setData( [ [ x1, y1 ], [ x2, y2 ], ... ] );\r\n   * @example serie.setData( [ x1, y1, x2, y2, ... ] ); // Faster\r\n   * @example serie.setData( [ [ x1, y1, x2, y2, ..., xn, yn ] , [ xm, ym, x(m + 1), y(m + 1), ...] ], true ) // 1D array with a gap in the middle\r\n   * @example serie.setData( { x: x0, dx: spacing, y: [ y1, y2, y3, y4 ] } ); // Data with equal x separation. Fastest way\r\n   */\r\n  setData( data, oneDimensional, type ) {\r\n    if ( data instanceof Waveform ) {\r\n      return this.setWaveform( data );\r\n    }\r\n\r\n    throw 'Setting data other than waveforms in not supported by default. You must implemented this method in the inherited class.';\r\n  }\r\n\r\n  _addData( type, howmany ) {\r\n    return [];\r\n  }\r\n\r\n  /**\r\n   * Removes all the data from the serie, without redrawing\r\n   * @returns {Serie} The current serie\r\n   */\r\n  clearData() {\r\n    this.setData( new Waveform() );\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Returns the data in its current form\r\n   * @returns {Array.<(Float64Array|Int32Array)>} An array containing the data chunks. Has only one member if the data has no gaps\r\n   * @memberof Serie\r\n   */\r\n  getData() {\r\n    return this.data;\r\n  }\r\n\r\n  /**\r\n   * Sets the options of the serie (no extension of default options)\r\n   * @param {Object} options - The options of the serie\r\n   * @memberof Serie\r\n   */\r\n  setOptions( options ) {\r\n    this.options = options || {};\r\n  }\r\n\r\n  /**\r\n   * Sets the options of the serie (no extension of default options)\r\n   * @param {String} name - The option name\r\n   * @param value - The option value\r\n   * @memberof Serie\r\n   * @example serie.setOption('selectableOnClick', true );\r\n   */\r\n  setOption( name, value ) {\r\n    this.options[ name ] = value;\r\n  }\r\n\r\n  /**\r\n   * Removes the serie from the graph. The method doesn't perform any axis autoscaling or repaint of the graph. This should be done manually.\r\n   * @return {Serie} The current serie instance\r\n   * @memberof Serie\r\n   */\r\n  kill( noLegendUpdate ) {\r\n    this.graph.removeSerieFromDom( this );\r\n    this.graph._removeSerie( this );\r\n\r\n    if ( this.graph.legend && !noLegendUpdate ) {\r\n      this.graph.legend.update();\r\n    }\r\n\r\n    this.graph = undefined;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Hides the serie\r\n   * @memberof Serie\r\n   * @param {Boolean} [ hideShapes = false ] - <code>true</code> to hide the shapes associated to the serie\r\n   * @returns {Serie} The current serie\r\n   */\r\n  hide( hideShapes, mute = false ) {\r\n    this.hidden = true;\r\n    this.groupMain.setAttribute( 'display', 'none' );\r\n\r\n    this.getSymbolForLegend().setAttribute( 'opacity', 0.5 );\r\n    this.getTextForLegend().setAttribute( 'opacity', 0.5 );\r\n\r\n    this.hideImpl();\r\n\r\n    if ( hideShapes ) {\r\n      var shapes = this.graph.getShapesOfSerie( this );\r\n      for ( var i = 0, l = shapes.length; i < l; i++ ) {\r\n        shapes[ i ].hide();\r\n      }\r\n    }\r\n\r\n    if ( !mute ) {\r\n      this.emit( 'hide' );\r\n    }\r\n\r\n    if (\r\n      this.getXAxis().doesHideWhenNoSeriesShown() ||\r\n      this.getYAxis().doesHideWhenNoSeriesShown()\r\n    ) {\r\n      this.graph.draw( true );\r\n    }\r\n\r\n    if (\r\n      this.graph.hasPlugin( 'peakPicking' ) &&\r\n      this.graph.getPlugin( 'peakPicking' ).getSerie() == this\r\n    ) {\r\n      this.graph.getPlugin( 'peakPicking' ).hidePeakPicking();\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Shows the serie\r\n   * @memberof Serie\r\n   * @param {Boolean} [showShapes=false] - <code>true</code> to show the shapes associated to the serie\r\n   * @returns {Serie} The current serie\r\n   */\r\n  show( showShapes, mute = false ) {\r\n    this.hidden = false;\r\n    this.groupMain.setAttribute( 'display', 'block' );\r\n\r\n    this.getSymbolForLegend().setAttribute( 'opacity', 1 );\r\n    this.getTextForLegend().setAttribute( 'opacity', 1 );\r\n\r\n    this.showImpl();\r\n\r\n    this.draw( true );\r\n\r\n    if ( showShapes ) {\r\n      var shapes = this.graph.getShapesOfSerie( this );\r\n      for ( var i = 0, l = shapes.length; i < l; i++ ) {\r\n        shapes[ i ].show();\r\n      }\r\n    }\r\n\r\n    if ( !mute ) {\r\n      this.emit( 'show' );\r\n    }\r\n\r\n    if (\r\n      this.getXAxis().doesHideWhenNoSeriesShown() ||\r\n      this.getYAxis().doesHideWhenNoSeriesShown()\r\n    ) {\r\n      this.graph.draw( true );\r\n    }\r\n\r\n    if (\r\n      this.graph.hasPlugin( 'peakPicking' ) &&\r\n      this.graph.getPlugin( 'peakPicking' ).getSerie() == this\r\n    ) {\r\n      this.graph.getPlugin( 'peakPicking' ).showPeakPicking();\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  hideImpl() {}\r\n  showImpl() {}\r\n\r\n  /**\r\n   * Toggles the display of the serie (effectively, calls <code>.show()</code> and <code>.hide()</code> alternatively on each call)\r\n   * @memberof Serie\r\n   * @param {Boolean} [hideShapes=false] - <code>true</code> to hide the shapes associated to the serie\r\n   * @returns {Serie} The current serie\r\n   */\r\n  toggleDisplay() {\r\n    if ( !this.isShown() ) {\r\n      this.show();\r\n    } else {\r\n      this.hide();\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Determines if the serie is currently visible\r\n   * @memberof Serie\r\n   * @returns {Boolean} The current visibility status of the serie\r\n   */\r\n  isShown() {\r\n    return !this.hidden;\r\n  }\r\n\r\n  /**\r\n   * Checks that axes assigned to the serie have been defined and have proper values\r\n   * @memberof Serie\r\n   */\r\n  axisCheck() {\r\n    if ( !this.getXAxis() || !this.getYAxis() ) {\r\n      throw 'No axis exist for this serie. Check that they were properly assigned';\r\n    }\r\n\r\n    if (\r\n      isNaN( this.getXAxis().getCurrentMin() ) ||\r\n      isNaN( this.getXAxis().getCurrentMax() ) ||\r\n      isNaN( this.getYAxis().getCurrentMin() ) ||\r\n      isNaN( this.getYAxis().getCurrentMax() )\r\n    ) {\r\n      throw 'Axis min and max values are not defined. Try autoscaling';\r\n    }\r\n  }\r\n  /**\r\n   * Returns the x position of a certain value in pixels position, based on the serie's axis\r\n   * @memberof Serie\r\n   * @param {Number} val - Value to convert to pixels position\r\n   * @returns {Number} The x position in px corresponding to the x value\r\n   */\r\n  getX( val ) {\r\n    return ( val = this.getXAxis().getPx( val ) ) - ( val % 0.2 );\r\n  }\r\n\r\n  /**\r\n   * Returns the y position of a certain value in pixels position, based on the serie's axis\r\n   * @memberof Serie\r\n   * @param {Number} val - Value to convert to pixels position\r\n   * @returns {Number} The y position in px corresponding to the y value\r\n   */\r\n  getY( val ) {\r\n    return ( val = this.getYAxis().getPx( val ) ) - ( val % 0.2 );\r\n  }\r\n\r\n  /**\r\n   * Returns the selection state of the serie. Generic for most serie types\r\n   * @memberof Serie\r\n   * @returns {Boolean} <code>true</code> if the serie is selected, <code>false</code> otherwise\r\n   */\r\n  isSelected() {\r\n    return this.selected || this.selectionType !== 'unselected';\r\n  }\r\n\r\n  _checkX( val ) {\r\n    this.minX = Math.min( this.minX, val );\r\n    this.maxX = Math.max( this.maxX, val );\r\n  }\r\n\r\n  _checkY( val ) {\r\n    this.minY = Math.min( this.minY, val );\r\n    this.maxY = Math.max( this.maxY, val );\r\n  }\r\n\r\n  /**\r\n   * Getter for the serie name\r\n   * @memberof Serie\r\n   * @returns {String} The serie name\r\n   */\r\n  getName() {\r\n    return this.name;\r\n  }\r\n\r\n  /* AXIS */\r\n\r\n  /**\r\n   * Assigns axes automatically, based on {@link Graph#getXAxis} and {@link Graph#getYAxis}.\r\n   * @memberof Serie\r\n   * @returns {Serie} The current serie\r\n   */\r\n  autoAxis() {\r\n    if ( this.isFlipped() ) {\r\n      this.setXAxis( this.graph.getYAxis() );\r\n      this.setYAxis( this.graph.getXAxis() );\r\n    } else {\r\n      this.setXAxis( this.graph.getXAxis() );\r\n      this.setYAxis( this.graph.getYAxis() );\r\n    }\r\n\r\n    // After axes have been assigned, the graph axes should update their min/max\r\n    this.graph.updateDataMinMaxAxes();\r\n    return this;\r\n  }\r\n\r\n  autoAxes() {\r\n    return this.autoAxis( ...arguments );\r\n  }\r\n\r\n  /**\r\n   * Assigns an x axis to the serie\r\n   * @memberof Serie\r\n   * @param {Axis|Number} axis - The axis to use as an x axis. If an integer, {@link Graph#getXAxis} or {@link Graph#getYAxis} will be used\r\n   * @returns {Serie} The current serie\r\n   * @example serie.setXAxis( graph.getTopAxis( 1 ) ); // Assigns the second top axis to the serie\r\n   */\r\n  setXAxis( axis ) {\r\n    if ( typeof axis == 'number' ) {\r\n      this.xaxis = this.isFlipped() ?\r\n        this.graph.getYAxis( axis ) :\r\n        this.graph.getXAxis( axis );\r\n    } else {\r\n      this.xaxis = axis;\r\n    }\r\n\r\n    this.graph.updateDataMinMaxAxes();\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Assigns an y axis to the serie\r\n   * @memberof Serie\r\n   * @param {Axis|Number} axis - The axis to use as an y axis. If an integer, {@link Graph#getXAxis} or {@link Graph#getYAxis} will be used\r\n   * @returns {Serie} The current serie\r\n   * @example serie.setYAxis( graph.getLeftAxis( 4 ) ); // Assigns the 5th left axis to the serie\r\n   */\r\n  setYAxis( axis ) {\r\n    if ( typeof axis == 'number' ) {\r\n      this.xaxis = this.isFlipped() ?\r\n        this.graph.getXAxis( axis ) :\r\n        this.graph.getYAxis( axis );\r\n    } else {\r\n      this.yaxis = axis;\r\n    }\r\n\r\n    this.graph.updateDataMinMaxAxes();\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Assigns two axes to the serie\r\n   * @param {GraphAxis} axis1 - First axis to assign to the serie (x or y)\r\n   * @param {GraphAxis} axis2 - Second axis to assign to the serie (y or x)\r\n   * @returns {Serie} The current serie\r\n   * @memberof Serie\r\n   */\r\n  setAxes() {\r\n    for ( var i = 0; i < 2; i++ ) {\r\n      if ( arguments[ i ] ) {\r\n        this[ arguments[ i ].isX() ? 'setXAxis' : 'setYAxis' ]( arguments[ i ] );\r\n      }\r\n    }\r\n\r\n    this.graph.updateDataMinMaxAxes();\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * @returns {GraphAxis} The x axis assigned to the serie\r\n   * @memberof Serie\r\n   */\r\n  getXAxis() {\r\n    return this.xaxis;\r\n  }\r\n\r\n  /**\r\n   * @returns {GraphAxis} The y axis assigned to the serie\r\n   * @memberof Serie\r\n   */\r\n  getYAxis() {\r\n    return this.yaxis;\r\n  }\r\n\r\n  /* */\r\n\r\n  /* DATA MIN MAX */\r\n\r\n  /**\r\n   * @returns {Number} Lowest x value of the serie's data\r\n   * @memberof Serie\r\n   */\r\n  getMinX() {\r\n    return this.minX;\r\n  }\r\n\r\n  /**\r\n   * @returns {Number} Highest x value of the serie's data\r\n   * @memberof Serie\r\n   */\r\n  getMaxX() {\r\n    return this.maxX;\r\n  }\r\n\r\n  /**\r\n   * @returns {Number} Lowest y value of the serie's data\r\n   * @memberof Serie\r\n   */\r\n  getMinY() {\r\n    return this.minY;\r\n  }\r\n\r\n  /**\r\n   * @returns {Number} Highest y value of the serie's data\r\n   * @memberof Serie\r\n   */\r\n  getMaxY() {\r\n    return this.maxY;\r\n  }\r\n\r\n  getWaveform() {\r\n    return this.waveform;\r\n  }\r\n\r\n  getWaveforms() {\r\n    return [ this.waveform ];\r\n  }\r\n\r\n  setWaveform( waveform ) {\r\n    if ( !( waveform instanceof Waveform ) ) {\r\n      console.trace();\r\n      console.error( waveform );\r\n      throw new Error(\r\n        'Cannot assign waveform to serie. Waveform is not of the proper Waveform instance'\r\n      );\r\n    }\r\n\r\n    this.waveform = waveform;\r\n\r\n    this.minX = this.waveform.getXMin();\r\n    this.maxX = this.waveform.getXMax();\r\n    this.minY = this.waveform.getMin();\r\n    this.maxY = this.waveform.getMax();\r\n\r\n    this.graph.updateDataMinMaxAxes();\r\n    this.dataHasChanged();\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Computes and returns a line SVG element with the same line style as the serie, or width 20px\r\n   * @returns {SVGElement}\r\n   * @memberof Serie\r\n   */\r\n  getSymbolForLegend() {\r\n    if ( !this.lineForLegend ) {\r\n      var line = document.createElementNS( this.graph.ns, 'line' );\r\n      this.applyLineStyle( line );\r\n\r\n      line.setAttribute( 'x1', 5 );\r\n      line.setAttribute( 'x2', 25 );\r\n      line.setAttribute( 'y1', 0 );\r\n      line.setAttribute( 'y2', 0 );\r\n\r\n      line.setAttribute( 'cursor', 'pointer' );\r\n\r\n      this.lineForLegend = line;\r\n    }\r\n\r\n    return this.lineForLegend;\r\n  }\r\n\r\n  _getSymbolForLegendContainer() {\r\n    return this._symbolLegendContainer;\r\n  }\r\n\r\n  /**\r\n   * Explicitely applies the line style to the SVG element returned by {@link Serie#getSymbolForLegend}\r\n   * @see Serie#getSymbolForLegend\r\n   * @returns {SVGElement}\r\n   * @memberof Serie\r\n   */\r\n  setLegendSymbolStyle() {\r\n    this.applyLineStyle( this.getSymbolForLegend() );\r\n  }\r\n\r\n  /**\r\n   * @alias Serie#setLegendSymbolStyle\r\n   * @memberof Serie\r\n   */\r\n  updateStyle() {\r\n    this.setLegendSymbolStyle();\r\n    this.graph.updateLegend();\r\n  }\r\n\r\n  /**\r\n   * Computes and returns a text SVG element with the label of the serie as a text, translated by 35px\r\n   * @returns {SVGElement}\r\n   * @memberof Serie\r\n   * @see Serie#getLabel\r\n   */\r\n  getTextForLegend() {\r\n    if ( !this.textForLegend ) {\r\n      var text = document.createElementNS( this.graph.ns, 'text' );\r\n      text.setAttribute( 'cursor', 'pointer' );\r\n      text.textContent = this.getLabel();\r\n\r\n      this.textForLegend = text;\r\n    }\r\n\r\n    return this.textForLegend;\r\n  }\r\n\r\n  /**\r\n   * @returns {Number} The current index of the serie\r\n   * @memberof Serie\r\n   */\r\n  getIndex() {\r\n    return this.graph.series.indexOf( this );\r\n  }\r\n\r\n  /**\r\n   * @returns {String} The label or, alternatively - the name of the serie\r\n   * @memberof Serie\r\n   */\r\n  getLabel() {\r\n    return this.options.label || this.name;\r\n  }\r\n\r\n  /**\r\n   * Sets the label of the serie. Note that this does not automatically updates the legend\r\n   * @param {String} label - The new label of the serie\r\n   * @returns {Serie} The current serie\r\n   * @memberof Serie\r\n   */\r\n  setLabel( label ) {\r\n    this.options.label = label;\r\n\r\n    if ( this.textForLegend ) {\r\n      this.textForLegend.textContent = label;\r\n    }\r\n\r\n    this.graph.requireLegendUpdate();\r\n    return this;\r\n  }\r\n\r\n  /* FLIP */\r\n\r\n  /**\r\n   * Assigns the flipping value of the serie. A flipped serie will have inverted axes. However this method does not automatically re-assigns the axes of the serie. Call {@link Serie#autoAxis} to re-assign the axes automatically, or any other axis setting method.\r\n   * @param {Boolean} [flipped=false] - <code>true</code> to flip the serie\r\n   * @returns {Serie} The current serie\r\n   * @memberof Serie\r\n   */\r\n  setFlip( flipped ) {\r\n    this.options.flip = flipped;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * @returns {Boolean} <code>true</code> if the serie is flipped, <code>false</code> otherwise\r\n   * @memberof Serie\r\n   */\r\n  getFlip() {\r\n    return this.options.flip;\r\n  }\r\n\r\n  /**\r\n   * @alias Serie#getFlip\r\n   * @memberof Serie\r\n   */\r\n  isFlipped() {\r\n    return this.options.flip;\r\n  }\r\n\r\n  /**\r\n   * Sets the layer onto which the serie should be displayed. This method does not trigger a graph redraw.\r\n   * @memberof Serie\r\n   * @param {Number} layerIndex=1 - The index of the layer into which the serie will be drawn\r\n   * @returns {Serie} The current serie\r\n   */\r\n  setLayer( layerIndex ) {\r\n    let newLayer = parseInt( layerIndex ) || 1;\r\n\r\n    if ( newLayer !== this.options.layer ) {\r\n      this.options.layer = newLayer;\r\n      this.graph.appendSerieToDom( this );\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Sets the layer onto which the serie should be displayed. This method does not trigger a graph redraw.\r\n   * @memberof Serie\r\n   * @returns {Nunber} The index of the layer into which the serie will be drawn\r\n   */\r\n  getLayer() {\r\n    return this.options.layer || 1;\r\n  }\r\n\r\n  setStyle( style, selectionType = 'unselected' ) {\r\n    this.styles[ selectionType ] = style;\r\n    this.styleHasChanged( selectionType );\r\n  }\r\n\r\n  /**\r\n   * Notifies jsGraph that the style of the serie has changed and needs to be redrawn on the next repaint\r\n   * @param {String} selectionType - The selection for which the style may have changed\r\n   * @returns {Serie} The current serie\r\n   * @memberof Serie\r\n   */\r\n  styleHasChanged( selectionType = 'unselected' ) {\r\n    this._changedStyles = this._changedStyles || {};\r\n\r\n    if ( selectionType === false ) {\r\n      for ( var i in this._changedStyles ) {\r\n        this._changedStyles[ i ] = false;\r\n      }\r\n    } else {\r\n      this._changedStyles[ selectionType || 'unselected' ] = true;\r\n    }\r\n\r\n    this.graph.requireLegendUpdate();\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Checks if the style has changed for a selection type\r\n   * @param {String} selectionType - The selection for which the style may have changed\r\n   * @returns {Boolean} <code>true</code> if the style has changed\r\n   * @private\r\n   * @memberof Serie\r\n   */\r\n  hasStyleChanged( selectionType ) {\r\n    this._changedStyles = this._changedStyles || {};\r\n    return this._changedStyles[ selectionType || 'unselected' ];\r\n  }\r\n\r\n  /**\r\n   * Notifies jsGraph that the data of the serie has changed\r\n   * @returns {Serie} The current serie\r\n   * @memberof Serie\r\n   */\r\n  dataHasChanged( arg ) {\r\n    this._dataHasChanged = arg === undefined || arg;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Checks if the data has changed\r\n   * @returns {Boolean} <code>true</code> if the data has changed\r\n   * @private\r\n   * @memberof Serie\r\n   */\r\n  hasDataChanged() {\r\n    return this._dataHasChanged;\r\n  }\r\n\r\n  /**\r\n   * Set a key/value arbitrary information to the serie. It is particularly useful if you have this serie has a reference through an event for instance, and you want to retrieve data associated to it\r\n   * @param {String} prop - The property\r\n   * @param value - The value\r\n   * @returns {Serie} The current serie\r\n   * @see Serie#getInfo\r\n   * @memberof Serie\r\n   */\r\n  setInfo( prop, value ) {\r\n    this.infos = this.infos || {};\r\n    this.infos[ prop ] = value;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Retrives an information value from its key\r\n   * @param {String} prop - The property\r\n   * @returns The value associated to the prop parameter\r\n   * @see Serie#setInfo\r\n   * @memberof Serie\r\n   */\r\n  getInfo( prop, value ) {\r\n    return ( this.infos || {} )[ prop ];\r\n  }\r\n\r\n  /**\r\n   * @deprecated\r\n   * @memberof Serie\r\n   */\r\n  setAdditionalData( data ) {\r\n    this.additionalData = data;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * @deprecated\r\n   * @memberof Serie\r\n   */\r\n  getAdditionalData() {\r\n    return this.additionalData;\r\n  }\r\n\r\n  /**\r\n   * Flags the serie as selected\r\n   * @returns {Serie} The current serie\r\n   * @memberof Serie\r\n   */\r\n  select( selectName ) {\r\n    if ( selectName == 'unselected' ) {\r\n      return this;\r\n    }\r\n    this.selected = true;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Flags the serie as unselected\r\n   * @returns {Serie} The current serie\r\n   * @memberof Serie\r\n   */\r\n  unselect() {\r\n    this.selected = false;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Allows mouse tracking of the serie\r\n   * @memberof Serie\r\n   * @returns {Serie} The current serie\r\n   * @param {Function} hoverCallback - Function to be called when the mouse enters the serie area\r\n   * @param {Function} outCallback - Function to be called when the mouse exits the serie area\r\n   * @private\r\n   */\r\n  enableTracking( hoverCallback, outCallback ) {\r\n    this._tracker = true;\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Disables mouse tracking of the serie\r\n   * @memberof Serie\r\n   * @returns {Serie} The current serie\r\n   * @private\r\n   */\r\n  disableTracking() {\r\n    if ( this._trackerDom ) {\r\n      this._trackerDom.remove();\r\n      this._trackerDom = null;\r\n    }\r\n\r\n    this._tracker = false;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   *  Allows mouse tracking of the serie\r\n   *  @memberof Serie\r\n   *  @param {Object} options - The tracking line options\r\n   *  @returns {Serie} The current serie\r\n   */\r\n  allowTrackingLine( options ) {\r\n    options = options || {};\r\n    this.graph.addSerieToTrackingLine( this, options );\r\n  }\r\n\r\n  getMarkerForLegend() {\r\n    return false;\r\n  }\r\n\r\n  get type() {\r\n    return this._type;\r\n  }\r\n\r\n  getType() {\r\n    return this._type;\r\n  }\r\n\r\n  excludeFromLegend() {\r\n    this._excludedFromLegend = true;\r\n    return this;\r\n  }\r\n\r\n  includeInLegend() {\r\n    this._excludedFromLegend = false;\r\n    return this;\r\n  }\r\n\r\n  setDataIndices( categories, nb ) {\r\n    this.categoryIndices = categories;\r\n    this.nbCategories = nb;\r\n  }\r\n\r\n  hasErrors() {\r\n    if ( !this.waveform ) {\r\n      return false;\r\n    }\r\n\r\n    return this.waveform.hasErrorBars();\r\n  }\r\n}\r\n\r\nexport default Serie;","import * as util from '../graph.util.js';\r\nimport ErrorBarMixin from '../mixins/graph.mixin.errorbars.js';\r\n\r\nimport Serie from './graph.serie.js';\r\n\r\nconst defaults = {};\r\n\r\nvar type = 'scatter';\r\n\r\nconst defaultOptions = {\r\n  markers: true,\r\n\r\n  markerStyles: {\r\n    unselected: {\r\n      default: {\r\n        shape: 'circle',\r\n        cx: 0,\r\n        cy: 0,\r\n        r: 3,\r\n        stroke: 'transparent',\r\n        fill: 'black'\r\n      }\r\n    },\r\n\r\n    selected: {\r\n      default: {\r\n        r: 4\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * @static\r\n * @augments Serie\r\n * @example graph.newSerie( name, options, \"scatter\" );\r\n * @see Graph#newSerie\r\n */\r\nclass SerieScatter extends Serie {\r\n  constructor( graph, name, options, defaultInherited ) {\r\n    super(\r\n      graph,\r\n      name,\r\n      options,\r\n      util.extend( true, {}, defaultOptions, defaultInherited )\r\n    );\r\n\r\n    this._type = type;\r\n    util.mapEventEmission( this.options, this );\r\n\r\n    this.shapes = []; // Stores all shapes\r\n    this.shapesDetails = [];\r\n    this.shapes = [];\r\n    this.keys = [];\r\n\r\n    this.groupMarkers = document.createElementNS( this.graph.ns, 'g' );\r\n    this.groupMain.appendChild( this.groupMarkers );\r\n\r\n    //    this.selectedStyleGeneral = {};\r\n    //    this.selectedStyleModifiers = {};\r\n\r\n    this.groupMarkers.addEventListener(\r\n      'mouseenter',\r\n      ( e ) => {\r\n        var id = parseInt( e.target.parentElement.getAttribute( 'data-shapeid' ) );\r\n        if ( isNaN( id ) ) {\r\n          return;\r\n        }\r\n\r\n        if ( this.options.selectMarkerOnHover ) {\r\n          this.selectMarker( id, 'selected' );\r\n        }\r\n\r\n        this.emit(\r\n          'mouseOverMarker',\r\n          id,\r\n          this.waveform.getX( id ),\r\n          this.waveform.getY( id )\r\n        );\r\n      },\r\n      true\r\n    );\r\n\r\n    this.groupMarkers.addEventListener( 'mouseout', ( e ) => {\r\n      var id = parseInt( e.target.parentElement.getAttribute( 'data-shapeid' ) );\r\n      if ( isNaN( id ) ) {\r\n        return;\r\n      }\r\n\r\n      if ( this.options.selectMarkerOnHover ) {\r\n        this.selectMarker( id, 'unselected' );\r\n      }\r\n\r\n      this.emit(\r\n        'mouseOutMarker',\r\n        id,\r\n        this.waveform.getX( id ),\r\n        this.waveform.getY( id )\r\n      );\r\n    } );\r\n  }\r\n\r\n  /**\r\n   * Applies for x as the category axis\r\n   * @example serie.setDataCategory( { x: \"someName\", y: Waveform } );\r\n   */\r\n  setDataCategory( data ) {\r\n    let minY = +Infinity;\r\n    let maxY = -Infinity;\r\n\r\n    for ( let dataCategory of data ) {\r\n      this._checkY( dataCategory.y.getMaxY() );\r\n      this._checkY( dataCategory.y.getMinY() );\r\n    }\r\n\r\n    this.data = data;\r\n    this.dataHasChanged();\r\n    this.graph.updateDataMinMaxAxes();\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Removes all DOM points\r\n   * @private\r\n   */\r\n  empty() {\r\n    while ( this.groupMarkers.firstChild ) {\r\n      this.groupMarkers.removeChild( this.groupMarkers.firstChild );\r\n    }\r\n  }\r\n\r\n  getSymbolForLegend() {\r\n    if ( !this.markers ) {\r\n      return;\r\n    }\r\n\r\n    const container = super._getSymbolForLegendContainer();\r\n\r\n    if ( !this.shapeLegend ) {\r\n      this.shapeLegend = this._makeMarker(\r\n        container,\r\n        this.options.markerStyles.unselected.default\r\n      );\r\n      container.appendChild( this.shapeLegend );\r\n    }\r\n\r\n    var style = this.getMarkerStyle( 'unselected', -1, true );\r\n    for ( var i in style[ -1 ] ) {\r\n      if ( i == 'shape' ) {\r\n        continue;\r\n      }\r\n      this.shapeLegend.setAttribute( i, style[ -1 ][ i ] );\r\n    }\r\n\r\n    return container;\r\n  }\r\n\r\n  /**\r\n   * Sets style to the scatter points\r\n   * First argument is the style applied by default to all points\r\n   * Second argument is an array of modifiers that allows customization of any point of the scatter plot. Data for each elements of the array will augment <code>allStyles</code>, so be sure to reset the style if needed.\r\n   * All parameters - except <code>shape</code> - will be set as parameters to the DOM element of the shape\r\n   *\r\n   * @example\r\n   * var modifiers = [];\r\n   * modifiers[ 20 ] = { shape: 'circle', r: 12, fill: 'rgba(0, 100, 255, 0.3)', stroke: 'rgb(0, 150, 255)' };\r\n   * serie.setMarkerStyle( { shape: 'circle', r: 2, fill: 'rgba(255, 0, 0, 0.3)', stroke: 'rgb(255, 100, 0)' }, modifiers ); // Will modify scatter point n°20\r\n   *\r\n   * @param {Object} allStyles - The general style for all markers\r\n   * @param {Object} [ modifiers ] - The general style for all markers\r\n   * @param {String} [ selectionMode=\"unselected\" ] - The selection mode to which this style corresponds. Default is unselected\r\n   *\r\n   */\r\n  setMarkerStyle( all, modifiers, mode = 'unselected' ) {\r\n    if ( typeof modifiers == 'string' ) {\r\n      mode = modifiers;\r\n      modifiers = false;\r\n    }\r\n\r\n    this.options.markerStyles[ mode ] = this.options.markerStyles[ mode ] || {};\r\n    this.options.markerStyles[ mode ].all = all;\r\n    this.options.markerStyles[ mode ].modifiers = modifiers;\r\n\r\n    this.styleHasChanged( mode );\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Redraws the serie\r\n   * @private\r\n   * @param {force} Boolean - Forces redraw even if the data hasn't changed\r\n   */\r\n  draw( force ) {\r\n    // Serie redrawing\r\n\r\n    if (\r\n      ( !force &&\r\n        !this.hasDataChanged() &&\r\n        !this.hasStyleChanged( 'unselected' ) ) ||\r\n      !this.options.markers\r\n    ) {\r\n      return;\r\n    }\r\n    let xpx, ypx, j, k, m;\r\n    const isCategory = this.getXAxis().getType() == 'category';\r\n    const keys = [];\r\n\r\n    this.dataHasChanged( false );\r\n    this.styleHasChanged( false );\r\n\r\n    // Removes the marker group from the main DOM for operation (avoids browser repaint)\r\n    this.groupMain.removeChild( this.groupMarkers );\r\n\r\n    j = 0;\r\n    k = 0;\r\n\r\n    if ( this.hasErrors() ) {\r\n      this.errorDrawInit();\r\n    }\r\n\r\n    if ( isCategory ) {\r\n      let k = 0;\r\n\r\n      for ( ; j < this.data.length; j++ ) {\r\n        if ( !this.categoryIndices.hasOwnProperty( this.data[ j ].x ) ) {\r\n          continue;\r\n        }\r\n\r\n        if ( this.error ) {\r\n          //   this.errorAddPoint( j, position[ 0 ] + position[ 1 ] / 2, 0, this.getX( position[ 0 ] + position[ 1 ] / 2 ), ypx );\r\n        }\r\n\r\n        for ( var n = 0, l = this.data[ j ].y.getLength(); n < l; n++ ) {\r\n          //let xpos = i / ( l - 1 ) * ( position[ 1 ] ) + position[ 0 ];\r\n\r\n          ypx = this.getY( this.data[ j ].y.getY( n ) );\r\n          xpx = this.getX(\r\n            ( n / ( l - 1 ) ) * ( 0.8 / this.nbCategories ) +\r\n            this.categoryIndices[ this.data[ j ].x ] +\r\n            0.1 / this.nbCategories\r\n          );\r\n          n++;\r\n\r\n          this.shapesDetails[ k ] = this.shapesDetails[ k ] || [];\r\n          this.shapesDetails[ k ][ 0 ] = xpx;\r\n          this.shapesDetails[ k ][ 1 ] = ypx;\r\n          keys.push( k );\r\n          k++;\r\n        }\r\n      }\r\n    } else {\r\n      for ( ; j < this.waveform.getLength(); j++ ) {\r\n        if (\r\n          this.waveform.getX( j ) < this.getXAxis().getCurrentMin() ||\r\n          this.waveform.getX( j ) > this.getXAxis().getCurrentMax() ||\r\n          this.waveform.getY( j ) < this.getYAxis().getCurrentMin() ||\r\n          this.waveform.getY( j ) > this.getYAxis().getCurrentMax()\r\n        ) {\r\n          if ( this.shapes[ j ] ) {\r\n            this.shapes[ j ].setAttribute( 'display', 'none' );\r\n            this.shapes[ j ]._hidden = true;\r\n          }\r\n          continue;\r\n        } else if ( this.shapes[ j ] && this.shapes[ j ]._hidden ) {\r\n          this.shapes[ j ].setAttribute( 'display', 'initial' );\r\n          this.shapes[ j ]._hidden = false;\r\n        }\r\n\r\n        xpx = this.getX( this.waveform.getX( j ) );\r\n        ypx = this.getY( this.waveform.getY( j ) );\r\n\r\n        if ( this.hasErrors() ) {\r\n          this.errorAddPoint(\r\n            j,\r\n            this.waveform.getX( j ),\r\n            this.waveform.getY( j ),\r\n            xpx,\r\n            ypx\r\n          );\r\n        }\r\n\r\n        this.shapesDetails[ j ] = this.shapesDetails[ j ] || [];\r\n        this.shapesDetails[ j ][ 0 ] = xpx;\r\n        this.shapesDetails[ j ][ 1 ] = ypx;\r\n        keys.push( j );\r\n\r\n        //this.shapes[ j / 2 ] = this.shapes[ j / 2 ] || undefined;\r\n      }\r\n    }\r\n\r\n    if ( this.hasErrors() ) {\r\n      this.errorDraw();\r\n    }\r\n\r\n    // This will automatically create the shapes\r\n    this.applyMarkerStyle( this.selectionType || 'unselected', keys );\r\n    this.keys = keys;\r\n    this.groupMain.appendChild( this.groupMarkers );\r\n  }\r\n\r\n  _makeMarker( group, shape ) {\r\n    var el = document.createElementNS( this.graph.ns, shape.shape );\r\n    group.appendChild( el );\r\n    return el;\r\n  }\r\n\r\n  getMarkerStyle( selection, index, noSetPosition ) {\r\n    var selection = selection || 'unselected';\r\n    var indices;\r\n\r\n    var styles = {};\r\n    if ( typeof index == 'number' ) {\r\n      indices = [ index ];\r\n    } else if ( Array.isArray( index ) ) {\r\n      indices = index;\r\n    }\r\n\r\n    var shape, index, modifier, style, j; // loop variables\r\n\r\n    if ( !this.options.markerStyles[ selection ] ) {\r\n      selection = 'unselected';\r\n    }\r\n\r\n    var styleAll = this.options.markerStyles[ selection ].all;\r\n\r\n    if ( !styleAll ) {\r\n      styleAll = this.options.markerStyles[ selection ].default;\r\n    }\r\n\r\n    if ( typeof styleAll == 'function' ) {\r\n      styleAll = styleAll();\r\n    }\r\n\r\n    const defaultStyle = this.options.markerStyles[ selection ].default ?\r\n      this.options.markerStyles[ selection ].default :\r\n      this.options.markerStyles.unselected.default;\r\n    styleAll = Object.assign( {}, defaultStyle, styleAll );\r\n\r\n    var i = 0,\r\n      l = indices.length;\r\n\r\n    for ( ; i < l; i++ ) {\r\n      index = indices[ i ];\r\n      shape = this.shapes[ index ];\r\n\r\n      if (\r\n        ( modifier = this.options.markerStyles[ selection ].modifiers ) &&\r\n        ( typeof modifier == 'function' || modifier[ index ] )\r\n      ) {\r\n        if ( typeof modifier == 'function' ) {\r\n          style = modifier(\r\n            this.waveform.getX( index ),\r\n            this.waveform.getY( index ),\r\n            index,\r\n            shape,\r\n            styleAll\r\n          );\r\n          if ( style === false ) {\r\n            continue;\r\n          }\r\n        } else if ( modifier[ index ] ) {\r\n          style = modifier[ index ];\r\n        }\r\n\r\n        styles[ index ] = Object.assign( {}, styleAll, style );\r\n      } else if ( styleAll !== undefined ) {\r\n        styles[ index ] = styleAll;\r\n      } else {\r\n        styles[ index ] = this.options.markerStyles[ selection ].default;\r\n      }\r\n\r\n      if ( !styles[ index ] ) {\r\n        styles[ index ] = styleAll;\r\n      }\r\n\r\n      if ( !shape ) {\r\n        // Shape doesn't exist, let's create it\r\n\r\n        if ( !styles[ index ].shape ) {\r\n          console.error( style );\r\n          throw `No shape was defined with the style \"${style}\".`;\r\n        }\r\n\r\n        var g = document.createElementNS( this.graph.ns, 'g' );\r\n        g.setAttribute( 'data-shapeid', index );\r\n\r\n        this.shapes[ index ] = this._makeMarker( g, styles[ index ] );\r\n        this.groupMarkers.appendChild( g );\r\n        shape = this.shapes[ index ];\r\n      }\r\n\r\n      if (\r\n        !noSetPosition &&\r\n        this.shapesDetails[ index ][ 0 ] === this.shapesDetails[ index ][ 0 ] &&\r\n        this.shapesDetails[ index ][ 1 ] === this.shapesDetails[ index ][ 1 ]\r\n      ) {\r\n        shape.parentNode.setAttribute(\r\n          'transform',\r\n          `translate(${this.shapesDetails[index][0]}, ${\r\n            this.shapesDetails[index][1]\r\n          })`\r\n        );\r\n      }\r\n    }\r\n\r\n    return styles;\r\n  }\r\n\r\n  applyMarkerStyle( selection, index, noSetPosition ) {\r\n    var i, j;\r\n    var styles = this.getMarkerStyle( selection, index, noSetPosition );\r\n\r\n    for ( i in styles ) {\r\n      for ( j in styles[ i ] ) {\r\n        if ( j !== 'shape' && this.shapes[ i ] ) {\r\n          if ( styles[ i ][ j ] ) {\r\n            this.shapes[ i ].setAttribute( j, styles[ i ][ j ] );\r\n          } else {\r\n            this.shapes[ i ].removeAttribute( j );\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  unselectMarker( index ) {\r\n    this.selectMarker( index, false );\r\n  }\r\n\r\n  selectMarker( index, setOn, selectionType ) {\r\n    if (\r\n      this.shapesDetails[ index ][ 2 ] &&\r\n      this.shapesDetails[ index ][ 2 ] == selectionType\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    if ( typeof setOn == 'string' ) {\r\n      selectionType = setOn;\r\n      setOn = undefined;\r\n    }\r\n\r\n    if ( Array.isArray( index ) ) {\r\n      return this.selectMarkers( index );\r\n    }\r\n\r\n    if ( this.shapes[ index ] && this.shapesDetails[ index ] ) {\r\n      if ( ( this.shapesDetails[ index ][ 2 ] || setOn === false ) && setOn !== true ) {\r\n        var selectionStyle = this.shapesDetails[ index ][ 2 ];\r\n        this.shapesDetails[ index ][ 2 ] = false;\r\n        var allStyles = this.getMarkerStyle( selectionStyle, index, true );\r\n\r\n        for ( var i in allStyles[ index ] ) {\r\n          this.shapes[ index ].removeAttribute( i );\r\n        }\r\n\r\n        this.applyMarkerStyle( 'unselected', index, true );\r\n      } else {\r\n        selectionType = selectionType || 'selected';\r\n        this.shapesDetails[ index ][ 2 ] = selectionType;\r\n        this.applyMarkerStyle( selectionType, index, true );\r\n      }\r\n    }\r\n  }\r\n\r\n  select( selectionType ) {\r\n    this.selectionType = selectionType;\r\n    this.applyMarkerStyle( this.selectionType || 'selected', this.keys );\r\n    super.select( selectionType );\r\n  }\r\n\r\n  unselect() {\r\n    this.selectionType = 'unselected';\r\n    this.applyMarkerStyle( this.selectionType || 'unselected', this.keys );\r\n\r\n    super.unselect();\r\n  }\r\n\r\n  setMarkers( bln = true ) {\r\n    this.options.markers = bln;\r\n\r\n    return this;\r\n  }\r\n\r\n  showMarkers() {\r\n    if ( this.options.markers ) {\r\n      return;\r\n    }\r\n\r\n    this.options.markers = true;\r\n    this.groupMarkers.setAttribute( 'display', 'initial' );\r\n\r\n    if ( this.shapeLegend ) {\r\n      this.shapeLegend.setAttribute( 'display', 'initial' );\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  hideMarkers() {\r\n    if ( !this.options.markers ) {\r\n      return;\r\n    }\r\n\r\n    this.options.markers = false;\r\n    this.groupMarkers.setAttribute( 'display', 'none' );\r\n\r\n    if ( this.shapeLegend ) {\r\n      this.shapeLegend.setAttribute( 'display', 'none' );\r\n    }\r\n    return this;\r\n  }\r\n\r\n  getUsedCategories() {\r\n    if ( typeof this.data[ 0 ] == 'object' ) {\r\n      return this.data.map( ( d ) => d.x );\r\n    }\r\n\r\n    return [];\r\n  }\r\n\r\n  getClosestPointToXY( valX = this.getXAxis().getMouseVal(), valY = this.getYAxis().getMouseVal(), withinPxX = 0, withinPxY = 0 ) {\r\n    // For the scatter serie it's pretty simple. No interpolation. We look at the point directly\r\n\r\n    //const xVal = this.getXAxis().getVal( x );\r\n    //const yVal = this.getYAxis().getVal( y );\r\n    const xValAllowed = this.getXAxis().getRelVal( withinPxX );\r\n    const yValAllowed = this.getYAxis().getRelVal( withinPxY );\r\n\r\n    // Index of the closest point\r\n    const closestPointIndex = this.waveform.findWithShortestDistance( {\r\n      x: valX,\r\n      y: valY,\r\n      xMax: xValAllowed,\r\n      yMax: yValAllowed,\r\n      interpolation: false\r\n    } );\r\n\r\n    return {\r\n\r\n      indexBefore: closestPointIndex,\r\n      indexAfter: closestPointIndex,\r\n\r\n      xBefore: this.waveform.getX( closestPointIndex ),\r\n      xAfter: this.waveform.getX( closestPointIndex ),\r\n      yBefore: this.waveform.getY( closestPointIndex ),\r\n      yAfter: this.waveform.getX( closestPointIndex ),\r\n\r\n      xExact: valX,\r\n\r\n      indexClosest: closestPointIndex,\r\n      interpolatedY: this.waveform.getY( closestPointIndex ),\r\n\r\n      xClosest: this.waveform.getX( closestPointIndex ),\r\n      yClosest: this.waveform.getY( closestPointIndex )\r\n    };\r\n  }\r\n}\r\n\r\nutil.mix( SerieScatter, ErrorBarMixin );\r\n\r\nexport default SerieScatter;","import * as util from '../graph.util.js';\r\nimport ErrorBarMixin from '../mixins/graph.mixin.errorbars.js';\r\n\r\nimport SerieScatter from './graph.serie.scatter.js';\r\n\r\nconst type = 'line';\r\n\r\nconst defaultOptions = {\r\n  /**\r\n   * @name SerieLineDefaultOptions\r\n   * @object\r\n   * @static\r\n   * @memberof SerieLine\r\n   */\r\n\r\n  // Extends scatterSerie\r\n  markers: false,\r\n\r\n  lineColor: 'black',\r\n  lineStyle: 1,\r\n  lineWidth: 1,\r\n\r\n  trackMouse: false,\r\n  lineToZero: false,\r\n  selectableOnClick: false,\r\n  overflowX: false,\r\n  overflowY: false\r\n};\r\n\r\n/**\r\n * Serie line\r\n * @example graph.newSerie( name, options, \"line\" );\r\n * @see Graph#newSerie\r\n * @extends Serie\r\n */\r\nclass SerieLine extends SerieScatter {\r\n  constructor( graph, name, options, defaultInherited ) {\r\n    super(\r\n      graph,\r\n      name,\r\n      options,\r\n      util.extend( true, {}, defaultOptions, defaultInherited )\r\n    );\r\n\r\n    this.selectionType = 'unselected';\r\n    this._type = type;\r\n    util.mapEventEmission( this.options, this ); // Register events\r\n\r\n    // Creates an empty style variable\r\n    this.styles = {};\r\n\r\n    // Unselected style\r\n    this.styles.unselected = {\r\n      lineColor: this.options.lineColor,\r\n      lineStyle: this.options.lineStyle,\r\n      lineWidth: this.options.lineWidth\r\n    };\r\n\r\n    this.styles.selected = {\r\n      lineWidth: 3\r\n    };\r\n\r\n    this.shown = true;\r\n\r\n    this.data = [];\r\n    this._isMinOrMax = {\r\n      x: {\r\n        min: false,\r\n        max: false\r\n      },\r\n      y: {\r\n        min: false,\r\n        max: false\r\n      }\r\n    };\r\n\r\n    // Optimize is no markerPoints => save loops\r\n    //      this.markerPoints = {};\r\n\r\n    this.groupLines = document.createElementNS( this.graph.ns, 'g' );\r\n    this.domMarker = document.createElementNS( this.graph.ns, 'path' );\r\n\r\n    if ( !this.domMarker.style ) {\r\n      this.domMarker.style = {\r\n        cursor: 'pointer'\r\n      };\r\n    } else {\r\n      this.domMarker.style.cursor = 'pointer';\r\n    }\r\n\r\n    this.additionalData = {};\r\n\r\n    this.marker = document.createElementNS( this.graph.ns, 'circle' );\r\n    this.marker.setAttribute( 'fill', 'black' );\r\n    this.marker.setAttribute( 'r', 3 );\r\n    this.marker.setAttribute( 'display', 'none' );\r\n\r\n    this.markerLabel = document.createElementNS( this.graph.ns, 'text' );\r\n    this.markerLabelSquare = document.createElementNS( this.graph.ns, 'rect' );\r\n    this.markerLabelSquare.setAttribute( 'fill', 'white' );\r\n    this.domMarkerHover = {};\r\n    this.domMarkerSelect = {};\r\n    this.markerHovered = 0;\r\n    this.groupMarkerSelected = document.createElementNS( this.graph.ns, 'g' );\r\n\r\n    this.markerPoints = {};\r\n\r\n    //this.scale = 1;\r\n    //this.shift = 0;\r\n    this.lines = [];\r\n\r\n    this.groupMain.appendChild( this.groupLines );\r\n\r\n    this.groupMain.appendChild( this.marker );\r\n\r\n    this.groupMain.appendChild( this.groupMarkerSelected );\r\n    this.groupMain.appendChild( this.markerLabelSquare );\r\n    this.groupMain.appendChild( this.markerLabel );\r\n\r\n    this.independantMarkers = [];\r\n\r\n    if ( this.initExtended1 ) {\r\n      this.initExtended1();\r\n    }\r\n\r\n    this.groupLines.addEventListener( 'click', ( e ) => {\r\n      if ( this.options.selectableOnClick ) {\r\n        if ( this.isSelected() ) {\r\n          this.graph.unselectSerie( this );\r\n        } else {\r\n          this.graph.selectSerie( this );\r\n        }\r\n      }\r\n    } );\r\n  }\r\n\r\n  postInit() {\r\n    this.extendStyles();\r\n  }\r\n\r\n  /**\r\n   * Sets the options of the serie\r\n   * @see SerieLineDefaultOptions\r\n   * @param {Object} options - A object containing the options to set\r\n   * @return {SerieLine} The current serie\r\n   * @memberof SerieLine\r\n   */\r\n  setOptions( options ) {\r\n    //this.options = util.extend( true, {}, SerieLine.prototype.defaults, ( options || {} ) );\r\n    // Unselected style\r\n    /*this.styles.unselected = {\r\n      lineColor: this.options.lineColor,\r\n      lineStyle: this.options.lineStyle\r\n    };\r\n*/\r\n    this.applyLineStyles();\r\n    return this;\r\n  }\r\n\r\n  onMouseWheel() {}\r\n\r\n  /**\r\n   * Cleans the DOM from the serie internal object (serie and markers). Mostly used internally when a new {@link Serie#setData} is called\r\n   * @returns {SerieLine} The current serie\r\n   * @memberof SerieLine\r\n   */\r\n  empty() {\r\n    for ( var i = 0, l = this.lines.length; i < l; i++ ) {\r\n      this.groupLines.removeChild( this.lines[ i ] );\r\n    }\r\n    this.lines = [];\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Applies a selection to the serie\r\n   * @param {String} [ selectionType = \"selected\" ] - The selection name\r\n   * @returns {SerieLine} The current serie\r\n   * @see SerieLine#unselect\r\n   * @memberof SerieLine\r\n   */\r\n  select( selectionType = 'selected' ) {\r\n    this.selected = selectionType !== 'unselected';\r\n    this.selectionType = selectionType;\r\n\r\n    this.applyLineStyles();\r\n    this.applyLineStyle( this.getSymbolForLegend() );\r\n\r\n    super.select( selectionType );\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Removes the selection to the serie. Effectively, calls {@link SerieLine#select}(\"unselected\").\r\n   * @returns {SerieLine} The current serie\r\n   * @see SerieLine#select\r\n   * @memberof SerieLine\r\n   */\r\n  unselect() {\r\n    this.selected = false;\r\n    super.unselect();\r\n    return this.select( 'unselected' );\r\n  }\r\n\r\n  /**\r\n   * Computes and returns a line SVG element with the same line style as the serie, or width 20px\r\n   * @returns {SVGElement}\r\n   * @memberof SerieLine\r\n   */\r\n  getSymbolForLegend() {\r\n    const container = this._getSymbolForLegendContainer();\r\n\r\n    if ( !this.lineForLegend ) {\r\n      var line = document.createElementNS( this.graph.ns, 'line' );\r\n      this.applyLineStyle( line );\r\n\r\n      line.setAttribute( 'x1', 5 );\r\n      line.setAttribute( 'x2', 25 );\r\n      line.setAttribute( 'y1', 0 );\r\n      line.setAttribute( 'y2', 0 );\r\n\r\n      line.setAttribute( 'cursor', 'pointer' );\r\n\r\n      this.lineForLegend = line;\r\n      container.appendChild( this.lineForLegend );\r\n    } else {\r\n      this.applyLineStyle( this.lineForLegend );\r\n    }\r\n\r\n    super.getSymbolForLegend();\r\n\r\n    return this.lineForLegend;\r\n  }\r\n\r\n  /**\r\n   * Degrades the data of the serie. This option is used for big data sets that have monotoneously increasing (or decreasing) x values.\r\n   * For example, a serie containing 1'000'000 points, displayed over 1'000px, will have 1'000 points per pixel. Often it does not make sense to display more than 2-3 points per pixel.\r\n   * <code>degrade( pxPerPoint )</code> allows a degradation of the serie, based on a a number of pixel per point. It computes the average of the data that would be displayed over each pixel range\r\n   * Starting from jsGraph 2.0, it does not calculate the minimum and maximum and creates the zone serie anymore\r\n   * @return {SerieLine} The current serie instance\r\n   * @example serie.degrade( 0.5 ); // Will display 2 points per pixels\r\n   * @memberof SerieLine\r\n   */\r\n  degrade( pxPerP ) {\r\n    this.degradationPx = pxPerP;\r\n    return this;\r\n  }\r\n\r\n  drawInit( force ) {\r\n    var data, xData;\r\n\r\n    try {\r\n      this.axisCheck();\r\n    } catch ( e ) {\r\n      console.warn( e );\r\n      return false;\r\n    }\r\n\r\n    this.currentLineId = 0;\r\n    this.counter = 0;\r\n    this._drawn = true;\r\n    this.currentLine = '';\r\n\r\n    // Degradation\r\n\r\n    if ( this.waveform ) {\r\n      if ( this.degradationPx ) {\r\n        this.waveform.resampleForDisplay( {\r\n          resampleToPx: this.degradationPx,\r\n          xPosition: this.getXAxis().getPx.bind( this.getXAxis() ),\r\n          minX: this.getXAxis().getCurrentMin(),\r\n          maxX: this.getXAxis().getCurrentMax()\r\n        } );\r\n\r\n        this._dataToUse = [ this.waveform.getDataToUseFlat() ];\r\n      } else if ( this.waveform.hasAggregation() ) {\r\n        let xaxis = this.getXAxis(),\r\n          numberOfPointsInTotal =\r\n          ( this.graph.getDrawingWidth() *\r\n            ( xaxis.getDataMax() - xaxis.getDataMin() ) ) /\r\n          ( xaxis.getCurrentMax() - xaxis.getCurrentMin() ),\r\n          promise = this.waveform.selectAggregatedData( numberOfPointsInTotal );\r\n\r\n        if ( promise instanceof Promise ) {\r\n          promise.then( () => {\r\n            this.draw( force );\r\n          } );\r\n\r\n          return false;\r\n        } else if ( promise === false ) {\r\n          return false;\r\n        } else {\r\n          this._dataToUse = this.waveform.getDataToUseFlat();\r\n        }\r\n      }\r\n\r\n      //    this._dataToUse = this.waveform.getDataToUseFlat();\r\n    } else {\r\n      this._dataToUse = this.data;\r\n      this._xDataToUse = this.xData;\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  removeLinesGroup() {\r\n    this._afterLinesGroup = this.groupLines.nextSibling;\r\n    this.groupMain.removeChild( this.groupLines );\r\n  }\r\n\r\n  insertLinesGroup() {\r\n    if ( !this._afterLinesGroup ) {\r\n      throw 'Could not find group after lines to insertion.';\r\n    }\r\n\r\n    this.groupMain.insertBefore( this.groupLines, this._afterLinesGroup );\r\n    this._afterLinesGroup = false;\r\n  }\r\n\r\n  removeExtraLines() {\r\n    var i = this.currentLineId,\r\n      l = this.lines.length;\r\n\r\n    for ( ; i < l; i++ ) {\r\n      this.groupLines.removeChild( this.lines[ i ] );\r\n    }\r\n\r\n    this.lines.splice( this.currentLineId, l - this.currentLineId );\r\n    this.currentLineId = 0;\r\n  }\r\n\r\n  /**\r\n   * Draws the serie\r\n   * @memberof SerieLine\r\n   */\r\n  draw( force ) {\r\n    // Serie redrawing\r\n\r\n    if ( !this.getXAxis() || !this.getYAxis() ) {\r\n      throw 'No axes were defined for this serie';\r\n    }\r\n    if ( force || this.hasDataChanged() ) {\r\n      super.draw( force );\r\n\r\n      if ( !this.drawInit( force ) ) {\r\n        return;\r\n      }\r\n\r\n      var data = this._dataToUse,\r\n        xData = this._xDataToUse,\r\n        slotToUse = this._slotToUse;\r\n\r\n      this.removeLinesGroup();\r\n\r\n      this.lookForMaxima = true;\r\n      this.lookForMinima = false;\r\n\r\n      this.pos0 = this.getYAxis().getPos(\r\n        Math.max( 0, this.getYAxis().getCurrentMin() )\r\n      );\r\n\r\n      if ( this.hasErrors() ) {\r\n        this.errorDrawInit();\r\n      }\r\n\r\n      this._draw();\r\n\r\n      if ( this.hasErrors() ) {\r\n        this.errorDraw();\r\n      }\r\n\r\n      this.removeExtraLines();\r\n\r\n      this.insertLinesGroup();\r\n    }\r\n\r\n    // Unhovers everything\r\n    for ( var i in this.domMarkerHover ) {\r\n      this.toggleMarker( i.split( ',' ), false, true );\r\n    }\r\n\r\n    // Deselects everything\r\n    for ( var i in this.domMarkerSelect ) {\r\n      this.toggleMarker( i.split( ',' ), false, false );\r\n    }\r\n\r\n    this.applyLineStyle( this.getSymbolForLegend() );\r\n\r\n    if ( this.hasStyleChanged( this.selectionType ) ) {\r\n      this.updateStyle();\r\n    }\r\n\r\n    this.dataHasChanged( false );\r\n    super.afterDraw();\r\n  }\r\n\r\n  _draw() {\r\n    let waveform = this.waveform,\r\n      data,\r\n      x,\r\n      y,\r\n      lastX = false,\r\n      lastY = false,\r\n      xpx,\r\n      ypx,\r\n      xpx2,\r\n      ypx2,\r\n      xAxis = this.getXAxis(),\r\n      yAxis = this.getYAxis(),\r\n      xMin = xAxis.getCurrentMin(),\r\n      yMin = yAxis.getCurrentMin(),\r\n      xMax = xAxis.getCurrentMax(),\r\n      yMax = yAxis.getCurrentMax();\r\n\r\n    if ( !waveform ) {\r\n      return;\r\n    }\r\n\r\n    data = waveform.getData( true );\r\n\r\n    // Y crossing\r\n    let yLeftCrossingRatio,\r\n      yLeftCrossing,\r\n      yRightCrossingRatio,\r\n      yRightCrossing,\r\n      xTopCrossingRatio,\r\n      xTopCrossing,\r\n      xBottomCrossingRatio,\r\n      xBottomCrossing,\r\n      /*xshift = waveform.getXShift(),\r\n      xscale = wave.getXScale(),*/\r\n      yshift = waveform.getShift(),\r\n      yscale = waveform.getScale();\r\n\r\n    let pointOutside = false;\r\n    let lastPointOutside = false;\r\n    let pointOnAxis;\r\n\r\n    let _monotoneous = this.isMonotoneous();\r\n\r\n    let i = 0,\r\n      l = waveform.getLength();\r\n\r\n    this.currentLine = '';\r\n\r\n    if ( waveform.isXMonotoneous() ) {\r\n      if ( waveform.isXMonotoneousAscending() ) {\r\n        try {\r\n          i = waveform.getIndexFromX( xMin, true ) || 0;\r\n          l = waveform.getIndexFromX( xMax, true ) || waveform.getLength();\r\n        } catch ( e ) {\r\n          l = waveform.getLength();\r\n        }\r\n      } else {\r\n        try {\r\n          i = waveform.getIndexFromX( xMax, true ) || 0;\r\n          l = waveform.getIndexFromX( xMin, true ) || waveform.getLength();\r\n        } catch ( e ) {\r\n          l = waveform.getLength();\r\n        }\r\n      }\r\n\r\n      l += 2;\r\n      if ( l > data.length ) {\r\n        l = data.length;\r\n      }\r\n    }\r\n\r\n    for ( ; i < l; i += 1 ) {\r\n      x = waveform.getX( i, true );\r\n      y = data[ i ] * yscale + yshift;\r\n\r\n      if ( x != x || y != y ) {\r\n        // NaN checks\r\n        this._createLine();\r\n        continue;\r\n      }\r\n\r\n      if (\r\n        ( !this.options.overflowX && x < xMin && lastX < xMin ) ||\r\n        ( !this.options.overflowX && x > xMax && lastX > xMax ) ||\r\n        ( ( ( !this.options.overflowY && y < yMin && lastY < yMin ) ||\r\n            ( !this.options.overflowY && y > yMax && lastY > yMax ) ) &&\r\n          !this.options.lineToZero )\r\n      ) {\r\n        lastX = x;\r\n        lastY = y;\r\n        lastPointOutside = true;\r\n        continue;\r\n      }\r\n\r\n      this.counter2 = i;\r\n\r\n      if ( this.options.lineToZero ) {\r\n        if ( y > yMax ) {\r\n          y = yMax;\r\n        }\r\n        if ( y < yMin ) {\r\n          y = yMin;\r\n        }\r\n      }\r\n\r\n      xpx2 = this.getX( x );\r\n      ypx2 = this.getY( y );\r\n      //xpx2 = 0;\r\n      //ypx2 = 0;\r\n\r\n      if ( xpx2 == xpx && ypx2 == ypx ) {\r\n        continue;\r\n      }\r\n\r\n      if ( xpx2 != xpx2 || ypx2 != ypx2 ) {\r\n        // NaN checks\r\n        if ( this.counter > 0 ) {\r\n          this._createLine();\r\n        }\r\n        continue;\r\n      }\r\n\r\n      if ( !_monotoneous ) {\r\n        pointOutside =\r\n          ( !this.options.overflowX && ( x < xMin || x > xMax ) ) ||\r\n          ( !this.options.overflowY && ( y < yMin || y > yMax ) );\r\n      } else {\r\n        pointOutside = !this.options.overflowY && ( y < yMin || y > yMax );\r\n      }\r\n\r\n      if ( this.options.lineToZero ) {\r\n        pointOutside = x < xMin || x > xMax;\r\n\r\n        if ( pointOutside ) {\r\n          continue;\r\n        }\r\n      } else {\r\n        if ( pointOutside || lastPointOutside ) {\r\n          if ( ( lastX === false || lastY === false ) && !lastPointOutside ) {\r\n            xpx = xpx2;\r\n            ypx = ypx2;\r\n            lastX = x;\r\n            lastY = y;\r\n          } else {\r\n            pointOnAxis = [];\r\n            // Y crossing\r\n            yLeftCrossingRatio = ( x - xMin ) / ( x - lastX );\r\n            yLeftCrossing = y - yLeftCrossingRatio * ( y - lastY );\r\n            yRightCrossingRatio = ( x - xMax ) / ( x - lastX );\r\n            yRightCrossing = y - yRightCrossingRatio * ( y - lastY );\r\n\r\n            // X crossing\r\n            xTopCrossingRatio = ( y - yMin ) / ( y - lastY );\r\n            xTopCrossing = x - xTopCrossingRatio * ( x - lastX );\r\n            xBottomCrossingRatio = ( y - yMax ) / ( y - lastY );\r\n            xBottomCrossing = x - xBottomCrossingRatio * ( x - lastX );\r\n\r\n            if (\r\n              yLeftCrossingRatio < 1 &&\r\n              yLeftCrossingRatio > 0 &&\r\n              yLeftCrossing !== false &&\r\n              yLeftCrossing < yMax &&\r\n              yLeftCrossing > yMin\r\n            ) {\r\n              pointOnAxis.push( [ xMin, yLeftCrossing ] );\r\n            }\r\n\r\n            if (\r\n              yRightCrossingRatio < 1 &&\r\n              yRightCrossingRatio > 0 &&\r\n              yRightCrossing !== false &&\r\n              yRightCrossing < yMax &&\r\n              yRightCrossing > yMin\r\n            ) {\r\n              pointOnAxis.push( [ xMax, yRightCrossing ] );\r\n            }\r\n\r\n            if (\r\n              xTopCrossingRatio < 1 &&\r\n              xTopCrossingRatio > 0 &&\r\n              xTopCrossing !== false &&\r\n              xTopCrossing < xMax &&\r\n              xTopCrossing > xMin\r\n            ) {\r\n              pointOnAxis.push( [ xTopCrossing, yMin ] );\r\n            }\r\n\r\n            if (\r\n              xBottomCrossingRatio < 1 &&\r\n              xBottomCrossingRatio > 0 &&\r\n              xBottomCrossing !== false &&\r\n              xBottomCrossing < xMax &&\r\n              xBottomCrossing > xMin\r\n            ) {\r\n              pointOnAxis.push( [ xBottomCrossing, yMax ] );\r\n            }\r\n\r\n            if ( pointOnAxis.length > 0 ) {\r\n              if ( !pointOutside ) {\r\n                // We were outside and now go inside\r\n\r\n                if ( pointOnAxis.length > 1 ) {\r\n                  console.error( 'Programmation error. Please e-mail me.' );\r\n                  console.log(\r\n                    pointOnAxis,\r\n                    xBottomCrossing,\r\n                    xTopCrossing,\r\n                    yRightCrossing,\r\n                    yLeftCrossing,\r\n                    y,\r\n                    yMin,\r\n                    yMax,\r\n                    lastY\r\n                  );\r\n                }\r\n\r\n                this._createLine();\r\n                this._addPoint(\r\n                  this.getX( pointOnAxis[ 0 ][ 0 ] ),\r\n                  this.getY( pointOnAxis[ 0 ][ 1 ] ),\r\n                  pointOnAxis[ 0 ][ 0 ],\r\n                  pointOnAxis[ 0 ][ 1 ],\r\n                  false,\r\n                  false,\r\n                  false\r\n                );\r\n                this._addPoint( xpx2, ypx2, lastX, lastY, false, false, true );\r\n              } else if ( !lastPointOutside ) {\r\n                // We were inside and now go outside\r\n\r\n                if ( pointOnAxis.length > 1 ) {\r\n                  console.error( 'Programmation error. Please e-mail me.' );\r\n                  console.log(\r\n                    pointOnAxis,\r\n                    xBottomCrossing,\r\n                    xTopCrossing,\r\n                    yRightCrossing,\r\n                    yLeftCrossing,\r\n                    y,\r\n                    yMin,\r\n                    yMax,\r\n                    lastY\r\n                  );\r\n                }\r\n\r\n                this._addPoint(\r\n                  this.getX( pointOnAxis[ 0 ][ 0 ] ),\r\n                  this.getY( pointOnAxis[ 0 ][ 1 ] ),\r\n                  pointOnAxis[ 0 ][ 0 ],\r\n                  pointOnAxis[ 0 ][ 1 ],\r\n                  false,\r\n                  false,\r\n                  false\r\n                );\r\n              } else {\r\n                // No crossing: do nothing\r\n                if ( pointOnAxis.length == 2 ) {\r\n                  this._createLine();\r\n\r\n                  this._addPoint(\r\n                    this.getX( pointOnAxis[ 0 ][ 0 ] ),\r\n                    this.getY( pointOnAxis[ 0 ][ 1 ] ),\r\n                    pointOnAxis[ 0 ][ 0 ],\r\n                    pointOnAxis[ 0 ][ 1 ],\r\n                    false,\r\n                    false,\r\n                    false\r\n                  );\r\n                  this._addPoint(\r\n                    this.getX( pointOnAxis[ 1 ][ 0 ] ),\r\n                    this.getY( pointOnAxis[ 1 ][ 1 ] ),\r\n                    pointOnAxis[ 0 ][ 0 ],\r\n                    pointOnAxis[ 0 ][ 1 ],\r\n                    false,\r\n                    false,\r\n                    false\r\n                  );\r\n                }\r\n              }\r\n            } else if ( !pointOutside ) {\r\n              this._addPoint( xpx2, ypx2, lastX, lastY, i, false, false );\r\n            } // else {\r\n            // Norman:\r\n            // This else case is not the sign of a bug. If yLeftCrossing == 0 or 1 for instance, pointOutside or lastPointOutside will be true\r\n            // However, there's no need to draw anything because the point is on the axis and will already be covered.\r\n            // 28 Aug 2015\r\n\r\n            /*\r\n              if ( lastPointOutside !== pointOutside ) {\r\n                console.error( \"Programmation error. A crossing should have been found\" );\r\n                console.log( yLeftCrossing, yLeftCrossingRatio, yMax, yMin );\r\n                console.log( yRightCrossing, yRightCrossingRatio, yMax, yMin );\r\n                console.log( xTopCrossing, xTopCrossingRatio, xMax, xMin );\r\n                console.log( xBottomCrossing, xBottomCrossingRatio, xMax, xMin );\r\n                console.log( pointOutside, lastPointOutside )\r\n\r\n              }\r\n              */\r\n            // }\r\n          }\r\n\r\n          xpx = xpx2;\r\n          ypx = ypx2;\r\n          lastX = x;\r\n          lastY = y;\r\n\r\n          lastPointOutside = pointOutside;\r\n\r\n          continue;\r\n        }\r\n      }\r\n\r\n      this._addPoint( xpx2, ypx2, x, y, i, false, true );\r\n\r\n      //this.detectPeaks( x, y );\r\n\r\n      xpx = xpx2;\r\n      ypx = ypx2;\r\n\r\n      lastX = x;\r\n      lastY = y;\r\n    }\r\n\r\n    this._createLine();\r\n\r\n    if ( this._tracker ) {\r\n      if ( this._trackerDom ) {\r\n        this._trackerDom.remove();\r\n      }\r\n\r\n      var cloned = this.groupLines.cloneNode( true );\r\n      this.groupMain.appendChild( cloned );\r\n\r\n      for ( i = 0, l = cloned.children.length; i < l; i++ ) {\r\n        cloned.children[ i ].setAttribute( 'stroke', 'transparent' );\r\n        cloned.children[ i ].setAttribute( 'stroke-width', '25px' );\r\n        cloned.children[ i ].setAttribute( 'pointer-events', 'stroke' );\r\n      }\r\n\r\n      this._trackerDom = cloned;\r\n\r\n      this.groupMain.addEventListener( 'mousemove', ( e ) => {\r\n        var coords = this.graph._getXY( e ),\r\n          ret = this.handleMouseMove( false, false );\r\n\r\n        this._trackingCallback( this, ret, coords.x, coords.y );\r\n      } );\r\n\r\n      this.groupMain.addEventListener( 'mouseleave', ( e ) => {\r\n        this._trackingOutCallback( this );\r\n      } );\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  kill() {\r\n    super.kill();\r\n  }\r\n\r\n  _addPoint( xpx, ypx, x, y, j, move, allowMarker ) {\r\n    /*if( ! this.currentLineId ) {\r\n        throw \"No current line\"\r\n      }* @memberof SerieLine\r\n*/\r\n\r\n    if ( xpx !== xpx || ypx !== ypx ) {\r\n      return;\r\n    }\r\n\r\n    if ( this.counter == 0 ) {\r\n      this.currentLine = 'M ';\r\n    } else {\r\n      if ( this.options.lineToZero || move ) {\r\n        this.currentLine += 'M ';\r\n      } else {\r\n        this.currentLine += 'L ';\r\n      }\r\n    }\r\n\r\n    this.currentLine += xpx;\r\n    this.currentLine += ' ';\r\n    this.currentLine += ypx;\r\n    this.currentLine += ' ';\r\n\r\n    if ( this.options.lineToZero && this.pos0 !== undefined ) {\r\n      this.currentLine += 'L ';\r\n      this.currentLine += xpx;\r\n      this.currentLine += ' ';\r\n      this.currentLine += this.pos0;\r\n      this.currentLine += ' ';\r\n    }\r\n\r\n    if ( this.hasErrors() ) {\r\n      this.errorAddPoint( j, x, y, xpx, ypx );\r\n    }\r\n\r\n    this.counter++;\r\n  }\r\n\r\n  // Returns the DOM\r\n  _createLine() {\r\n    var i = this.currentLineId++,\r\n      line;\r\n\r\n    // Creates a line if needed\r\n    if ( this.lines[ i ] ) {\r\n      line = this.lines[ i ];\r\n    } else {\r\n      line = document.createElementNS( this.graph.ns, 'path' );\r\n      this.applyLineStyle( line );\r\n      this.groupLines.appendChild( line );\r\n      this.lines[ i ] = line;\r\n    }\r\n\r\n    if ( this.counter == 0 ) {\r\n      line.setAttribute( 'd', '' );\r\n    } else {\r\n      line.setAttribute( 'd', this.currentLine );\r\n    }\r\n\r\n    this.currentLine = 'M ';\r\n    this.counter = 0;\r\n\r\n    return line;\r\n  }\r\n\r\n  /**\r\n   * Reapply the current style to the serie lines elements. Mostly used internally\r\n   * @memberof SerieLine\r\n   */\r\n  applyLineStyles() {\r\n    for ( var i = 0; i < this.lines.length; i++ ) {\r\n      this.applyLineStyle( this.lines[ i ] );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Applies the current style to a line element. Mostly used internally\r\n   * @memberof SerieLine\r\n   */\r\n  applyLineStyle( line ) {\r\n    line.setAttribute( 'stroke', this.getLineColor() );\r\n    line.setAttribute( 'stroke-width', this.getLineWidth() );\r\n    if ( this.getLineDashArray() ) {\r\n      line.setAttribute( 'stroke-dasharray', this.getLineDashArray() );\r\n    } else {\r\n      line.removeAttribute( 'stroke-dasharray' );\r\n    }\r\n\r\n    if ( this.getFillColor() ) {\r\n      line.setAttribute( 'fill', this.getFillColor() );\r\n    } else {\r\n      line.setAttribute( 'fill', 'none' );\r\n    }\r\n\r\n    //\tline.setAttribute('shape-rendering', 'optimizeSpeed');\r\n  }\r\n\r\n  /**\r\n   * Updates the current style (lines + legend) of the serie. Use this method if you have explicitely changed the options of the serie\r\n   * @example var opts = { lineColor: 'red' };\r\n   * var s = graph.newSerie( \"name\", opts ).setData( someData );\r\n   * opts.lineColor = 'green';\r\n   * s.updateStyle(); // Sets the lineColor to green\r\n   * s.draw(); // Would also do the same thing, but recalculates the whole serie display (including (x,y) point pairs)\r\n   * @memberof SerieLine\r\n   */\r\n  updateStyle() {\r\n    this.applyLineStyles();\r\n    this.setLegendSymbolStyle();\r\n\r\n    this.styleHasChanged( false );\r\n  }\r\n\r\n  // Revised August 2014. Ok\r\n  getMarkerPath( family, add ) {\r\n    var z = family.zoom || 1,\r\n      add = add || 0,\r\n      el = [];\r\n\r\n    switch ( family.type ) {\r\n      case 2:\r\n        el = [ 'm', -2, -2, 'l', 4, 4, 'm', -4, 0, 'l', 4, -4 ];\r\n        break;\r\n\r\n      case 3:\r\n        el = [ 'm', -2, 0, 'l', 4, 0, 'm', -2, -2, 'l', 0, 4 ];\r\n        break;\r\n\r\n      case 4:\r\n        el = [ 'm', -1, -1, 'l', 2, 0, 'l', -1, 2, 'z' ];\r\n        break;\r\n\r\n      default:\r\n      case 1:\r\n        el = [ 'm', -2, -2, 'l', 4, 0, 'l', 0, 4, 'l', -4, 0, 'z' ];\r\n        break;\r\n    }\r\n\r\n    if ( ( z == 1 || !z ) && !add ) {\r\n      return el.join( ' ' );\r\n    }\r\n\r\n    var num = 'number';\r\n\r\n    if ( !el ) {\r\n      return;\r\n    }\r\n\r\n    for ( var i = 0, l = el.length; i < l; i++ ) {\r\n      if ( typeof el[ i ] == num ) {\r\n        el[ i ] *= z + add;\r\n      }\r\n    }\r\n\r\n    return el.join( ' ' );\r\n  }\r\n\r\n  /**\r\n   * Searches the closest point pair (x,y) to the a pair of pixel position\r\n   * @param {Number} x - The x position in pixels (from the left)\r\n   * @param {Number} y - The y position in pixels (from the left)\r\n   * @returns {Number} Index in the data array of the closest (x,y) pair to the pixel position passed in parameters\r\n   * @memberof SerieLine\r\n   */\r\n  /*\r\n\r\n  Let's deprecate this\r\n\r\n  searchIndexByPxXY( x, y ) {\r\n    var oldDist = false,\r\n      xyindex = false,\r\n      dist;\r\n\r\n    var xData = this._xDataToUse,\r\n      p_x,\r\n      p_y;\r\n\r\n    for ( var k = 0, m = this.waveform.getLength(); k < m; k += 1 ) {\r\n      p_x = this.waveform.getX( k );\r\n      p_y = this.waveform.getY( k );\r\n\r\n      dist = Math.pow( this.getX( p_x ) - x, 2 ) + Math.pow( this.getY( p_y ) - y, 2 );\r\n\r\n      if ( !oldDist || dist < oldDist ) {\r\n        oldDist = dist;\r\n        xyindex = k;\r\n      }\r\n    }\r\n\r\n    return xyindex;\r\n  }\r\n*/\r\n  handleMouseMove( xValue, doMarker, yValue ) {\r\n    var valX = xValue || this.getXAxis().getMouseVal(),\r\n      valY = yValue || this.getYAxis().getMouseVal();\r\n\r\n    var value = this.getClosestPointToXY( valX, valY );\r\n\r\n    if ( !value ) {\r\n      return;\r\n    }\r\n\r\n    var ratio, intY;\r\n\r\n    if ( value.xMax == value.xMin ) {\r\n      intY = value.yMin;\r\n    } else {\r\n      //ratio = ( valX - value.xMin ) / ( value.xMax - value.xMin );\r\n      //intY = ( ( 1 - ratio ) * value.yMin + ratio * value.yMax );\r\n    }\r\n\r\n    if ( doMarker && this.options.trackMouse ) {\r\n      if ( value.xMin == undefined ) {\r\n        return false;\r\n      }\r\n    }\r\n\r\n    return {\r\n      xBefore: value.xMin,\r\n      xAfter: value.xMax,\r\n      yBefore: value.yMin,\r\n      yAfter: value.yMax,\r\n      trueX: value.xExact,\r\n      indexClosest: value.indexClosest,\r\n      interpolatedY: intY,\r\n\r\n      xClosest: value.xClosest,\r\n      yClosest: value.yClosest\r\n    };\r\n  }\r\n  /**\r\n   * Gets the maximum value of the y values between two x values. The x values must be monotoneously increasing\r\n   * @param {Number} startX - The start of the x values\r\n   * @param {Number} endX - The end of the x values\r\n   * @returns {Number} Maximal y value in between startX and endX\r\n   * @memberof SerieLine\r\n   */\r\n  getMax( start, end ) {\r\n    var start2 = Math.min( start, end ),\r\n      end2 = Math.max( start, end ),\r\n      v1 = this.getClosestPointToXY( start2 ),\r\n      v2 = this.getClosestPointToXY( end2 ),\r\n      i,\r\n      j,\r\n      max = -Infinity,\r\n      initJ,\r\n      maxJ;\r\n\r\n    if ( !v1 ) {\r\n      start2 = this.minX;\r\n      v1 = this.getClosestPointToXY( start2 );\r\n    }\r\n\r\n    if ( !v2 ) {\r\n      end2 = this.maxX;\r\n      v2 = this.getClosestPointToXY( end2 );\r\n    }\r\n\r\n    if ( !v1 || !v2 ) {\r\n      return -Infinity;\r\n    }\r\n\r\n    for ( i = v1.dataIndex; i <= v2.dataIndex; i++ ) {\r\n      initJ = i == v1.dataIndex ? v1.xBeforeIndexArr : 0;\r\n      maxJ = i == v2.dataIndex ? v2.xBeforeIndexArr : this.data[ i ].length;\r\n\r\n      for ( j = initJ; j <= maxJ; j += 2 ) {\r\n        max = Math.max( max, this.data[ i ][ j + 1 ] );\r\n      }\r\n    }\r\n\r\n    return max;\r\n  }\r\n\r\n  /**\r\n   * Gets the minimum value of the y values between two x values. The x values must be monotoneously increasing\r\n   * @param {Number} startX - The start of the x values\r\n   * @param {Number} endX - The end of the x values\r\n   * @returns {Number} Maximal y value in between startX and endX\r\n   * @memberof SerieLine\r\n   */\r\n  getMin( start, end ) {\r\n    var start2 = Math.min( start, end ),\r\n      end2 = Math.max( start, end ),\r\n      v1 = this.getClosestPointToXY( start2 ),\r\n      v2 = this.getClosestPointToXY( end2 ),\r\n      i,\r\n      j,\r\n      min = Infinity,\r\n      initJ,\r\n      maxJ;\r\n\r\n    if ( !v1 ) {\r\n      start2 = this.minX;\r\n      v1 = this.getClosestPointToXY( start2 );\r\n    }\r\n\r\n    if ( !v2 ) {\r\n      end2 = this.maxX;\r\n      v2 = this.getClosestPointToXY( end2 );\r\n    }\r\n\r\n    if ( !v1 || !v2 ) {\r\n      return Infinity;\r\n    }\r\n\r\n    for ( i = v1.dataIndex; i <= v2.dataIndex; i++ ) {\r\n      initJ = i == v1.dataIndex ? v1.xBeforeIndexArr : 0;\r\n      maxJ = i == v2.dataIndex ? v2.xBeforeIndexArr : this.data[ i ].length;\r\n\r\n      for ( j = initJ; j <= maxJ; j += 2 ) {\r\n        min = Math.min( min, this.data[ i ][ j + 1 ] );\r\n      }\r\n    }\r\n\r\n    return min;\r\n  }\r\n\r\n  /* LINE STYLE * @memberof SerieLine\r\n   */\r\n\r\n  setStyle( style, selectionType = 'unselected' ) {\r\n    this.styles[ selectionType ] = style;\r\n    this.styleHasChanged( selectionType );\r\n  }\r\n\r\n  setLineStyle( number, selectionType = 'unselected', applyToSelected ) {\r\n    this.styles[ selectionType ] = this.styles[ selectionType ] || {};\r\n    this.styles[ selectionType ].lineStyle = number;\r\n\r\n    if ( applyToSelected ) {\r\n      this.setLineStyle( number, 'selected' );\r\n    }\r\n\r\n    this.styleHasChanged( selectionType );\r\n\r\n    return this;\r\n  }\r\n\r\n  getLineStyle( selectionType ) {\r\n    return this.getStyle( selectionType ).lineStyle;\r\n  }\r\n\r\n  getLineDashArray( selectionType = this.selectionType || 'unselected' ) {\r\n    switch ( this.getStyle( selectionType ).lineStyle ) {\r\n      case 2:\r\n        return '1, 1';\r\n        break;\r\n      case 3:\r\n        return '2, 2';\r\n        break;\r\n      case 4:\r\n        return '3, 3';\r\n        break;\r\n      case 5:\r\n        return '4, 4';\r\n        break;\r\n      case 6:\r\n        return '5, 5';\r\n        break;\r\n\r\n      case 7:\r\n        return '5 2';\r\n        break;\r\n      case 8:\r\n        return '2 5';\r\n        break;\r\n\r\n      case 9:\r\n        return '4 2 4 4';\r\n        break;\r\n      case 10:\r\n        return '1,3,1';\r\n        break;\r\n      case 11:\r\n        return '9 2';\r\n        break;\r\n      case 12:\r\n        return '2 9';\r\n        break;\r\n\r\n      case 1:\r\n      case false:\r\n        return false;\r\n        break;\r\n\r\n      default:\r\n        return this.styles[ selectionType ].lineStyle;\r\n        break;\r\n    }\r\n\r\n    this.styleHasChanged( selectionType );\r\n  }\r\n\r\n  getStyle( selectionType = this.selectionType || 'unselected' ) {\r\n    return this.styles[ selectionType ] || this.styles.unselected;\r\n  }\r\n\r\n  extendStyles() {\r\n    for ( var i in this.styles ) {\r\n      var s = this.styles[ i ];\r\n      if ( s ) {\r\n        this.styles[ i ] = util.extend( true, {}, this.styles.unselected, s );\r\n      }\r\n    }\r\n  }\r\n\r\n  extendStyle( styleTarget, styleOrigin ) {\r\n    var s = this.styles[ styleTarget ];\r\n    this.styles[ styleTarget ] = util.extend(\r\n      true, {},\r\n      this.styles[ styleOrigin || 'unselected' ],\r\n      s || {}\r\n    );\r\n    this.styleHasChanged( styleTarget );\r\n  }\r\n\r\n  /** @memberof SerieLine\r\n   */\r\n\r\n  setLineWidth( width, selectionType, applyToSelected ) {\r\n    selectionType = selectionType || 'unselected';\r\n    this.styles[ selectionType ] = this.styles[ selectionType ] || {};\r\n    this.styles[ selectionType ].lineWidth = width;\r\n\r\n    if ( applyToSelected ) {\r\n      this.setLineWidth( width, 'selected' );\r\n    }\r\n\r\n    this.styleHasChanged( selectionType );\r\n\r\n    return this;\r\n  }\r\n\r\n  getLineWidth( selectionType ) {\r\n    return this.getStyle( selectionType ).lineWidth || 1;\r\n  }\r\n\r\n  /* LINE COLOR * @memberof SerieLine\r\n   */\r\n  setLineColor( color, selectionType, applyToSelected ) {\r\n    selectionType = selectionType || 'unselected';\r\n    this.styles[ selectionType ] = this.styles[ selectionType ] || {};\r\n    this.styles[ selectionType ].lineColor = color;\r\n\r\n    if ( applyToSelected ) {\r\n      this.setLineColor( color, 'selected' );\r\n    }\r\n\r\n    this.styleHasChanged( selectionType );\r\n\r\n    return this;\r\n  }\r\n\r\n  /* FILL COLOR * @memberof SerieLine\r\n   */\r\n  setFillColor( color, selectionType, applyToSelected ) {\r\n    selectionType = selectionType || 'unselected';\r\n    this.styles[ selectionType ] = this.styles[ selectionType ] || {};\r\n    this.styles[ selectionType ].fillColor = color;\r\n\r\n    if ( applyToSelected ) {\r\n      this.setFillColor( color, 'selected' );\r\n    }\r\n\r\n    this.styleHasChanged( selectionType );\r\n\r\n    return this;\r\n  }\r\n\r\n  getLineColor( selectionType ) {\r\n    return this.getStyle( selectionType ).lineColor || 'black';\r\n  }\r\n\r\n  getFillColor( selectionType ) {\r\n    return this.getStyle( selectionType ).fillColor || undefined;\r\n  }\r\n\r\n  /** @memberof SerieLine\r\n   */\r\n\r\n  isMonotoneous() {\r\n    if ( this.waveform ) {\r\n      return this.waveform.isMonotoneous();\r\n    }\r\n\r\n    return !!this.xmonotoneous;\r\n  }\r\n\r\n  findLocalMinMax( xRef, xWithin, type ) {\r\n    if ( !this.waveform ) {\r\n      return false;\r\n    }\r\n\r\n    return this.waveform.findLocalMinMax( xRef, xWithin, type );\r\n  }\r\n\r\n  /**\r\n   * Performs a binary search to find the closest point index to an x value. For the binary search to work, it is important that the x values are monotoneous.\r\n   * @param {Number} valX - The x value to search for\r\n   * @param {number} valY - The y value to search for. Optional. When omitted, only a search in x will be done\r\n   * @param {Number} withinPxX - The maximum distance in X\r\n   * @param {number} withinPxY - The maximum distance in Y\r\n   * @param {string} useAxis - ```x``` or ```y```. Use only the value of x or y to find the closest point\r\n   * @returns {Object} Index in the data array of the closest (x,y) pair to the pixel position passed in parameters\r\n   * @memberof SerieLine\r\n   */\r\n  getClosestPointToXY( valX = this.getXAxis().getMouseVal(), valY = this.getYAxis().getMouseVal(), withinPxX = 0, withinPxY = 0, useAxis = false ) {\r\n    // For the scatter serie it's pretty simple. No interpolation. We look at the point directly\r\n\r\n    //const xVal = this.getXAxis().getVal( x );\r\n    //const yVal = this.getYAxis().getVal( y );\r\n    const xValAllowed = this.getXAxis().getRelVal( withinPxX );\r\n    const yValAllowed = this.getYAxis().getRelVal( withinPxY );\r\n\r\n    // Index of the closest point\r\n    const closestPointIndex = this.waveform.findWithShortestDistance( {\r\n      x: valX,\r\n      y: valY,\r\n      xMaxDistance: xValAllowed,\r\n      yMaxDistance: yValAllowed,\r\n      axisRef: useAxis\r\n    } );\r\n\r\n    if ( isNaN( closestPointIndex ) || closestPointIndex === false ) {\r\n      return false;\r\n    }\r\n    /*\r\n\r\n        if (\r\n          ( Math.abs( valX - this.waveform.getX( closestPointIndex ) ) >\r\n            Math.abs( this.getXAxis().getRelVal( withinPxX ) ) &&\r\n            withinPxX ) ||\r\n          ( Math.abs( valY - this.waveform.getY( closestPointIndex ) ) >\r\n            Math.abs( this.getYAxis().getRelVal( withinPxY ) ) &&\r\n            withinPxY )\r\n        ) {\r\n          return false;\r\n        }\r\n    */\r\n\r\n    if ( closestPointIndex < 0 ) {\r\n      return false;\r\n    }\r\n    const dataOutput = {\r\n\r\n      indexBefore: closestPointIndex,\r\n      indexAfter: closestPointIndex,\r\n\r\n      xExact: valX,\r\n\r\n      indexClosest: closestPointIndex,\r\n      interpolatedY: this.waveform.getY( closestPointIndex ),\r\n\r\n      xClosest: this.waveform.getX( closestPointIndex ),\r\n      yClosest: this.waveform.getY( closestPointIndex )\r\n    };\r\n\r\n    if ( this.waveform.isMonotoneous() ) {\r\n\r\n      let xBefore = this.waveform.getX( closestPointIndex );\r\n      let xAfter = this.waveform.getX( closestPointIndex );\r\n      let yBefore = this.waveform.getY( closestPointIndex );\r\n      let yAfter = this.waveform.getX( closestPointIndex );\r\n\r\n      if ( xBefore < xAfter ) {\r\n        dataOutput.xBefore = xBefore;\r\n        dataOutput.xAfter = xAfter;\r\n        dataOutput.yBefore = yBefore;\r\n        dataOutput.yAfter = yAfter;\r\n      } else {\r\n        dataOutput.xBefore = xAfter;\r\n        dataOutput.xAfter = xBefore;\r\n        dataOutput.yBefore = yAfter;\r\n        dataOutput.yAfter = yBefore;\r\n      }\r\n    }\r\n    return dataOutput;\r\n  }\r\n}\r\n\r\nutil.mix( SerieLine, ErrorBarMixin );\r\n\r\nexport default SerieLine;","var Serie3DMixin = {\r\n\r\n  /**\r\n   * Returns the x position of a certain value in pixels position, based on the serie's axis\r\n   * @memberof Serie\r\n   * @param {Number} val - Value to convert to pixels position\r\n   * @returns {Number} The x position in px corresponding to the x value\r\n   */\r\n  getX: function( val ) {\r\n    return ( ( val = this.getXAxis().getPx( val ) ) - val % 0.2 ) + this.getXAxis().getZProj( this.options.zpos );\r\n  },\r\n\r\n  /**\r\n   * Returns the y position of a certain value in pixels position, based on the serie's axis\r\n   * @memberof Serie3DMixin\r\n   * @param {Number} val - Value to convert to pixels position\r\n   * @returns {Number} The y position in px corresponding to the y value\r\n   */\r\n  getY: function( val ) {\r\n    return ( ( val = this.getYAxis().getPx( val ) ) - val % 0.2 ) + this.getYAxis().getZProj( this.options.zpos );\r\n  },\r\n\r\n  getZPos: function() {\r\n    return this.options.zpos;\r\n  },\r\n\r\n  /**\r\n   * @returns {Number} Lowest x value of the serie's data\r\n   * @memberof Serie\r\n   */\r\n  getMinX: function( useZValues ) {\r\n    if ( !useZValues ) {\r\n      return this.minX;\r\n    }\r\n\r\n    return getZCorrectedValue( this, true, true );\r\n  },\r\n\r\n  /**\r\n   * @returns {Number} Highest x value of the serie's data\r\n   * @memberof Serie\r\n   */\r\n  getMaxX: function( useZValues ) {\r\n\r\n    if ( !useZValues ) {\r\n      return this.maxX;\r\n    }\r\n    return getZCorrectedValue( this, true, false );\r\n  },\r\n\r\n  /**\r\n   * @returns {Number} Lowest y value of the serie's data\r\n   * @memberof Serie\r\n   */\r\n  getMinY: function( useZValues ) {\r\n\r\n    if ( !useZValues ) {\r\n      return this.minY;\r\n    }\r\n    return getZCorrectedValue( this, false, true );\r\n  },\r\n\r\n  /**\r\n   * @returns {Number} Highest y value of the serie's data\r\n   * @memberof Serie\r\n   */\r\n  getMaxY: function( useZValues ) {\r\n\r\n    if ( !useZValues ) {\r\n      return this.maxY;\r\n    }\r\n    return getZCorrectedValue( this, false, false );\r\n  }\r\n\r\n};\r\n\r\nfunction getZCorrectedValue( serie, x, min ) {\r\n\r\n  let i, l, data, val, valFinal;\r\n  let wf = serie.getWaveforms();\r\n\r\n  for ( let wave of wf ) {\r\n\r\n    i = 0;\r\n    l = wave.getLength();\r\n    data = wave.getData();\r\n\r\n    for ( ; i < l; i += 1 ) {\r\n\r\n      if ( x ) {\r\n        val = serie.getXAxis().getVal( serie.getX( wave.getX( i, true ) ) );\r\n      } else {\r\n        val = serie.getYAxis().getVal( serie.getY( data[ i ] ) );\r\n      }\r\n\r\n      if ( i == 0 ) {\r\n        valFinal = val;\r\n      } else {\r\n\r\n        if ( min ) {\r\n          valFinal = Math.min( valFinal, val );\r\n        } else {\r\n          valFinal = Math.max( valFinal, val );\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return valFinal;\r\n}\r\n\r\nexport default Serie3DMixin;","import Serie3DMixin from '../mixins/graph.mixin.serie3d.js';\r\nimport * as util from '../graph.util.js';\r\n\r\nimport Serie from './graph.serie.line.js';\r\n\r\n/**\r\n * Serie line with 3D projection\r\n * @example graph.newSerie( name, options, \"line\" );\r\n * @see Graph#newSerie\r\n * @extends SerieLine\r\n */\r\nclass SerieLine3D extends Serie {\r\n\r\n  static defaults() {\r\n    return {\r\n      zpos: 0\r\n    };\r\n  }\r\n  constructor( graph, name, options ) {\r\n    super( ...arguments );\r\n\r\n  }\r\n\r\n  /**\r\n   * Sets the z-position\r\n   * @memberof SerieLine3D\r\n   * @param {Number} zPos - The position in the z axis\r\n   */\r\n  setZPos( zPos ) {\r\n    this.options.zpos = zPos;\r\n    return this;\r\n  }\r\n\r\n  setz() {\r\n    return this.setZPos( ...arguments );\r\n  }\r\n}\r\n\r\nutil.mix( SerieLine3D, Serie3DMixin );\r\nexport default SerieLine3D;","import * as util from '../graph.util.js';\r\nimport ErrorBarMixin from '../mixins/graph.mixin.errorbars.js';\r\n\r\nimport Serie from './graph.serie.line.js';\r\n\r\n/**\r\n * Represents a bar serie.\r\n   Needs to be used exclusively with a bar axis ({@link AxisXBar}).\r\n   Supports error bars, line color, line width, fill color, fill opacity.\r\n * @example graph.newSerie(\"serieName\", { fillColor: 'red', fillOpacity: 0.2 }, \"bar\" );\r\n * @extends Serie\r\n */\r\nclass SerieBar extends Serie {\r\n\r\n  constructor( graph, name, options ) {\r\n\r\n    super( ...arguments );\r\n\r\n    this.pathDom = document.createElementNS( this.graph.ns, 'path' );\r\n    this.groupMain.appendChild( this.pathDom );\r\n\r\n    // Creates an empty style variable\r\n    this.styles = {};\r\n\r\n    // Unselected style\r\n    this.styles.unselected = {\r\n      lineColor: this.options.lineColor,\r\n      lineStyle: this.options.lineStyle,\r\n      lineWidth: this.options.lineWidth,\r\n      fillColor: this.options.fillColor,\r\n      fillOpacity: this.options.fillOpacity,\r\n      markers: this.options.markers\r\n    };\r\n\r\n  }\r\n\r\n  /**\r\n   *  Sets the fill color\r\n   */\r\n  setFillColor( fillColor, selectionType, applyToSelected ) {\r\n\r\n    selectionType = selectionType || 'unselected';\r\n    this.styles[ selectionType ] = this.styles[ selectionType ] || {};\r\n    this.styles[ selectionType ].fillColor = fillColor;\r\n\r\n    if ( applyToSelected ) {\r\n      this.setFillColor( fillColor, 'selected' );\r\n    }\r\n\r\n    this.styleHasChanged( selectionType );\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   *  Returns the fill color\r\n   */\r\n  getFillColor( selectionType ) {\r\n    return this.getStyle( selectionType ).fillColor;\r\n  }\r\n\r\n  /*\r\n   * @memberof SerieBar\r\n   */\r\n  setFillOpacity( opacity, selectionType, applyToSelected ) {\r\n\r\n    selectionType = selectionType || 'unselected';\r\n    this.styles[ selectionType ] = this.styles[ selectionType ] || {};\r\n    this.styles[ selectionType ].fillOpacity = opacity;\r\n\r\n    if ( applyToSelected ) {\r\n      this.setLineWidth( opacity, 'selected' );\r\n    }\r\n\r\n    this.styleHasChanged( selectionType );\r\n\r\n    return this;\r\n  }\r\n\r\n  getFillOpacity( selectionType ) {\r\n\r\n    return this.getStyle( selectionType ).fillOpacity || 1;\r\n  }\r\n\r\n  /**\r\n   * Reapply the current style to the serie lines elements. Mostly used internally\r\n   */\r\n  applyLineStyles() {\r\n    this.applyLineStyle( this.pathDom );\r\n  }\r\n\r\n  /**\r\n   * Applies the current style to a line element. Mostly used internally\r\n   * @memberof SerieBar\r\n   */\r\n  applyLineStyle( line ) {\r\n\r\n    line.setAttribute( 'stroke', this.getLineColor() );\r\n    line.setAttribute( 'stroke-width', this.getLineWidth() );\r\n    if ( this.getLineDashArray() ) {\r\n      line.setAttribute( 'stroke-dasharray', this.getLineDashArray() );\r\n    } else {\r\n      line.removeAttribute( 'stroke-dasharray' );\r\n    }\r\n    line.setAttribute( 'fill', this.getFillColor() );\r\n    line.setAttribute( 'fill-opacity', this.getFillOpacity() || 1 );\r\n  }\r\n\r\n  draw() {\r\n\r\n    var path = '';\r\n    var categoryNumber,\r\n      position;\r\n\r\n    if ( this.hasErrors() ) {\r\n      this.errorDrawInit();\r\n    }\r\n\r\n    var j = 0;\r\n\r\n    for ( ; j < this.waveform.getLength(); j++ ) {\r\n\r\n      if ( !this.categoryIndices[ this.waveform.getX( j ) ] ) {\r\n        continue;\r\n      }\r\n\r\n      path += `M ${\r\n        this.getXAxis().getPos( this.categoryIndices[ this.waveform.getX( j ) ] )\r\n        } ${\r\n        this.getYAxis().getPos( this.getYAxis().getCurrentMin() )\r\n        } V ${\r\n        this.getYAxis().getPos( this.waveform.getY( j ) )\r\n        } h ${\r\n        this.getXAxis().getDeltaPx( 1 / this.nbCategories )\r\n        } V ${\r\n        this.getYAxis().getPos( this.getYAxis().getCurrentMin() )}`;\r\n\r\n      if ( this.hasErrors() ) {\r\n\r\n        var xpx = this.getXAxis().getPos( this.categoryIndices[ this.waveform.getX( j ) ] ) + this.getXAxis().getDeltaPx( 1 / this.nbCategories ) / 2;\r\n        var ypx = this.getYAxis().getPos( this.waveform.getY( j ) );\r\n\r\n        this.errorAddPoint( j, this.waveform.getX( j ), this.waveform.getY( j ), xpx, ypx );\r\n      }\r\n\r\n    }\r\n\r\n    if ( this.hasErrors() ) {\r\n      this.errorDraw();\r\n    }\r\n\r\n    this.pathDom.setAttribute( 'd', path );\r\n    this.applyLineStyles();\r\n  }\r\n\r\n  // Markers now allowed\r\n  setMarkers() {}\r\n\r\n  getUsedCategories() {\r\n    return this.waveform.xdata;\r\n  }\r\n\r\n}\r\n\r\nexport default SerieBar;","import {\r\n  extend,\r\n  guid,\r\n  throwError,\r\n  emptyDom\r\n}\r\nfrom '../graph.util.js';\r\n\r\nimport Serie from './graph.serie.js';\r\n\r\nconst defaultOptions = {\r\n  orientation: 'y',\r\n  maxBoxWidth: 20,\r\n\r\n  defaultStyle: {\r\n\r\n    meanLineColor: 'rgb( 100, 0, 0 )',\r\n    meanLineWidth: 2,\r\n\r\n    boxAboveLineWidth: 1,\r\n    boxAboveLineColor: 'rgb( 0, 0, 0 )',\r\n    boxAboveFillColor: 'transparent',\r\n    boxAboveFillOpacity: 1,\r\n    boxBelowLineWidth: 1,\r\n    boxBelowLineColor: 'rgb( 0, 0, 0 )',\r\n    boxBelowFillColor: 'transparent',\r\n    boxBelowFillOpacity: 1,\r\n\r\n    barAboveLineColor: 'rgba( 0, 0, 0, 1 )',\r\n    barAboveLineWidth: 1,\r\n    barBelowLineColor: 'rgba( 0, 0, 0, 1 )',\r\n    barBelowLineWidth: 1,\r\n\r\n    outlierLineWidth: 1,\r\n    outlierLineColor: 'rgb( 255, 255, 255 )',\r\n    outlierFillColor: 'rgb( 0, 0, 0 )',\r\n    outlierFillOpacity: 1\r\n  }\r\n};\r\n\r\n/**\r\n * @static\r\n * @extends Serie\r\n * @example graph.newSerie( name, options, \"scatter\" );\r\n * @see Graph#newSerie\r\n */\r\nclass SerieBox extends Serie {\r\n  constructor( graph, name, options, defaultInherited = {} ) {\r\n\r\n    super( graph, name, options, extend( true, {}, defaultOptions, defaultInherited ) );\r\n\r\n    this.pathDom = document.createElementNS( this.graph.ns, 'path' );\r\n    this.groupMain.appendChild( this.pathDom );\r\n\r\n    // Creates an empty style variable\r\n    this.styles = {};\r\n\r\n    // Unselected style\r\n    this.styles.unselected = this.options.defaultStyle;\r\n\r\n  }\r\n\r\n  /**\r\n   *  Sets the data of the bar serie\r\n   *  @param {Object} data\r\n   *  @example serie.setData( [ { x: 'cat', Q2: valMean, Q1: valBoxMin, Q3: valBoxMax, whiskers: [ val1, val2 ], outliers: [ ...yList ] } ] );\r\n   *  @return {SerieBar} The current serie instance\r\n   */\r\n  setData( data, noRescale ) {\r\n\r\n    this.data = data;\r\n\r\n    if ( !Array.isArray( data ) ) {\r\n      return;\r\n    }\r\n\r\n    let axisref, axisval, methodref, methodval, blnX;\r\n\r\n    if ( this.options.orientation == 'y' ) {\r\n      axisref = this.getXAxis();\r\n      axisval = this.getYAxis();\r\n      methodref = this._checkX.bind( this );\r\n      methodval = this._checkY.bind( this );\r\n      blnX = true;\r\n\r\n      this.minY = data[ 0 ].Q2;\r\n      this.maxY = data[ 0 ].Q2;\r\n      this.maxX = data[ 0 ].x;\r\n      this.minX = data[ 0 ].x;\r\n\r\n    } else {\r\n      axisref = this.getYAxis();\r\n      axisval = this.getXAxis();\r\n      methodref = this._checkY.bind( this );\r\n      methodval = this._checkX.bind( this );\r\n      blnX = false;\r\n\r\n      this.minX = data[ 0 ].Q2;\r\n      this.maxX = data[ 0 ].Q2;\r\n      this.maxY = data[ 0 ].y;\r\n      this.minY = data[ 0 ].y;\r\n\r\n    }\r\n\r\n    if ( noRescale ) {\r\n      methodref = function() {};\r\n      methodval = function() {};\r\n    }\r\n\r\n    if ( !axisref || !axisval ) {\r\n      throwError( 'Error in setting data of the box serie. The X and Y axes must be set beforehand' );\r\n    }\r\n\r\n    for ( var i in this.data ) {\r\n\r\n      if ( blnX ) {\r\n        methodref( this.data[ i ].x );\r\n        this.data[ i ].pos = this.data[ i ].x;\r\n      } else {\r\n        methodref( this.data[ i ].y );\r\n        this.data[ i ].pos = this.data[ i ].y;\r\n      }\r\n\r\n      if ( this.data[ i ].Q3 ) {\r\n        methodval( this.data[ i ].Q3 );\r\n      }\r\n\r\n      if ( this.data[ i ].Q1 ) {\r\n        methodval( this.data[ i ].Q1 );\r\n      }\r\n\r\n      if ( this.data[ i ].whiskers ) {\r\n\r\n        if ( Array.isArray( this.data[ i ].whiskers ) ) {\r\n\r\n          if ( this.data[ i ].whiskers.length > 0 ) {\r\n\r\n            methodval( this.data[ i ].whiskers[ 0 ] );\r\n          }\r\n\r\n          if ( this.data[ i ].whiskers.length > 1 ) {\r\n            methodval( this.data[ i ].whiskers[ 1 ] );\r\n          }\r\n\r\n        } else {\r\n          methodval( this.data[ i ].whiskers );\r\n          this.data[ i ].whiskers = [ this.data[ i ].whiskers ];\r\n        }\r\n\r\n      } else {\r\n        this.data[ i ].whiskers = [];\r\n      }\r\n\r\n      if ( Array.isArray( this.data[ i ].outliers ) ) {\r\n        this.data[ i ].outliers.map( ( val ) => methodval( val ) );\r\n      } else {\r\n        this.data[ i ].outliers = [];\r\n      }\r\n    }\r\n\r\n    this.dataHasChanged();\r\n    this.graph.updateDataMinMaxAxes();\r\n\r\n    return this;\r\n  }\r\n\r\n  _style( type, styleValue, selectionType = 'unselected', applyToSelected = false ) {\r\n    this.styles[ selectionType ] = this.styles[ selectionType ] || {};\r\n    this.styles[ selectionType ][ type ] = styleValue;\r\n\r\n    if ( applyToSelected ) {\r\n      this._set( type, styleValue, 'selected' );\r\n    }\r\n\r\n    this.styleHasChanged( selectionType );\r\n    return this;\r\n  }\r\n\r\n  _gstyle( type, selectionType ) {\r\n    return this.getStyle( selectionType )[ type ];\r\n  }\r\n\r\n  /**\r\n   *  Retrives a selection object\r\n   *  @param {String} [ selectionType = \"unselected\" ] - The selection type\r\n   *  @returns {Object} The selection object\r\n   */\r\n  getStyle( selectionType = 'unselected' ) {\r\n\r\n    return this.styles[ selectionType ] || {};\r\n  }\r\n\r\n  /**\r\n   *  Sets the mean line color\r\n   *  @param {String} color - The mean line color\r\n   *  @returns {SerieBox} The current serie instance\r\n   */\r\n  setMeanLineColor() {\r\n    return this._style( 'meanLineColor', ...arguments );\r\n  }\r\n\r\n  /**\r\n   *  Returns the mean line color\r\n   * @return {String} The mean line color\r\n   */\r\n  getMeanLineColor() {\r\n    return this._gstyle( 'meanLineColor', ...arguments );\r\n  }\r\n\r\n  setStyle( style, selectionType = 'unselected' ) {\r\n    this.styles[ selectionType ] = extend( {}, this.default().defaultStyle, this.styles.unselected, style );\r\n    this.styleHasChanged( selectionType );\r\n  }\r\n\r\n  /**\r\n   *  Sets the mean line width\r\n   *  @param {Number} width - The line width\r\n   *  @returns {SerieBox} The current serie instance\r\n   */\r\n  setMeanLineWidth() {\r\n    return this._style( 'meanLineWidth', ...arguments );\r\n  }\r\n\r\n  /**\r\n   *  Returns the mean line width\r\n   * @return {Number} The mean line width\r\n   */\r\n  getMeanLineWidth() {\r\n    return this._gstyle( 'meanLineWidth', ...arguments );\r\n  }\r\n\r\n  /**\r\n   *  Sets the box line color\r\n   *  @param {Number} color - The color of the box above the median\r\n   *  @returns {SerieBox} The current serie instance\r\n   */\r\n  setBoxAboveLineColor() {\r\n    return this._style( 'boxAboveLineColor', ...arguments );\r\n  }\r\n\r\n  /**\r\n   * Returns the box line color\r\n   * @return {String} The line color of the box above the median\r\n   */\r\n  getBoxAboveLineColor() {\r\n    return this._gstyle( 'boxAboveLineColor', ...arguments );\r\n  }\r\n\r\n  /**\r\n   *  Sets the fill color\r\n   *  @param {Number} color - The color of the box below the median\r\n   *  @returns {SerieBox} The current serie instance\r\n   */\r\n  setBoxBelowLineColor() {\r\n    return this._style( 'boxBelowLineColor', ...arguments );\r\n  }\r\n\r\n  /**\r\n   *  Returns the fill color\r\n   * @return {String} The line color of the box below the median\r\n   */\r\n  getBoxBelowLineColor() {\r\n    return this._gstyle( 'boxBelowLineColor', ...arguments );\r\n  }\r\n\r\n  /**\r\n   *  Sets the fill color\r\n   *  @param {Number} width - The contour width of the box above the median\r\n   *  @returns {SerieBox} The current serie instance\r\n   */\r\n  setBoxAboveLineWidth() {\r\n    return this._style( 'boxAboveLineWidth', ...arguments );\r\n  }\r\n\r\n  /**\r\n   * Returns the line width of the box above the median\r\n   * @return {Number} The line width of the box above the median\r\n   */\r\n  getBoxAboveLineWidth() {\r\n    return this._gstyle( 'boxAboveLineWidth', ...arguments );\r\n  }\r\n\r\n  /**\r\n   *  Sets the fill color\r\n   *  @param {Number} width - The contour width of the box below the median\r\n   *  @returns {SerieBox} The current serie instance\r\n   */\r\n  setBoxBelowLineWidth() {\r\n    return this._style( 'boxBelowLineWidth', ...arguments );\r\n  }\r\n\r\n  /**\r\n   * Returns the line width of the box below the median\r\n   * @return {Number} The line width of the box below the median\r\n   */\r\n  getBoxBelowLineWidth() {\r\n    return this._gstyle( 'boxBelowLineWidth', ...arguments );\r\n  }\r\n\r\n  /**\r\n   *  Sets the fill color\r\n   *  @param {String} color - The fill color of the box above the median\r\n   *  @returns {SerieBox} The current serie instance\r\n   */\r\n  setBoxAboveFillColor() {\r\n    return this._style( 'boxAboveFillColor', ...arguments );\r\n  }\r\n\r\n  /**\r\n   * Returns the fill color of the box above the median\r\n   * @return {String} The fill color of the box above the median\r\n   */\r\n  getBoxAboveFillColor() {\r\n    return this._gstyle( 'boxAboveFillColor', ...arguments );\r\n  }\r\n\r\n  /**\r\n   *  Sets the fill color\r\n   *  @param {String} color - The fill color of the box below the median\r\n   *  @returns {SerieBox} The current serie instance\r\n   */\r\n  setBoxBelowFillColor() {\r\n    return this._style( 'boxBelowFillColor', ...arguments );\r\n  }\r\n\r\n  /**\r\n   * Returns the fill color of the box below the median\r\n   * @return {String} The fill color of the box below the median\r\n   */\r\n  getBoxBelowFillColor() {\r\n    return this._gstyle( 'boxBelowFillColor', ...arguments );\r\n  }\r\n\r\n  /**\r\n   *  Sets the fill color\r\n   *  @param {Number} opacity - The fill opacity of the box above the median\r\n   *  @returns {SerieBox} The current serie instance\r\n   */\r\n  setBoxAboveFillOpacity() {\r\n    return this._style( 'boxAboveFillOpacity', ...arguments );\r\n  }\r\n\r\n  /**\r\n   * Returns the fill opacity of the box above the median\r\n   * @return {Number} The fill opacity of the box above the median\r\n   */\r\n  getBoxAboveFillOpacity() {\r\n    return this._gstyle( 'boxAboveFillOpacity', ...arguments );\r\n  }\r\n\r\n  /**\r\n   *  Sets the fill color\r\n   *  @param {Number} opacity - The fill opacity of the box below the median\r\n   *  @returns {SerieBox} The current serie instance\r\n   */\r\n  setBoxBelowFillOpacity() {\r\n    return this._style( 'boxBelowFillOpacity', ...arguments );\r\n  }\r\n\r\n  /**\r\n   * Returns the fill opacity of the box below the median\r\n   * @return {Number} The fill opacity of the box below the median\r\n   */\r\n  getBoxBelowFillOpacity() {\r\n    return this._gstyle( 'boxBelowFillOpacity', ...arguments );\r\n  }\r\n\r\n  /**\r\n   *  Sets the whisker color\r\n   *  @param {String} color - The line color of the whisker above the median\r\n   *  @returns {SerieBox} The current serie instance\r\n   */\r\n  setBarAboveLineColor() {\r\n    return this._style( 'barAboveLineColor', ...arguments );\r\n  }\r\n\r\n  /**\r\n   * Returns the line color of the whisker above the median\r\n   * @return {String} The line color of the whisker above the median\r\n   */\r\n  getBarAboveLineColor() {\r\n    return this._gstyle( 'barAboveLineColor', ...arguments );\r\n  }\r\n\r\n  /**\r\n   *  Sets the fill color\r\n   *  @param {String} color - The line color of the whisker below the median\r\n   *  @returns {SerieBox} The current serie instance\r\n   */\r\n  setBarBelowLineColor() {\r\n    return this._style( 'barBelowLineColor', ...arguments );\r\n  }\r\n\r\n  /**\r\n   * Returns the line color of the whisker below the median\r\n   * @return {String} The line color of the whisker below the median\r\n   */\r\n  getBarBelowLineColor() {\r\n    return this._gstyle( 'barBelowLineColor', ...arguments );\r\n  }\r\n\r\n  /**\r\n   *  Sets the fill color\r\n   *  @param {Number} width - The line width of the whisker above the median\r\n   *  @returns {SerieBox} The current serie instance\r\n   */\r\n  setBarAboveLineWidth() {\r\n    return this._style( 'barAboveLineWidth', ...arguments );\r\n  }\r\n\r\n  /**\r\n   * Returns the line width of the whisker above the median\r\n   * @return {Number} The line width of the whisker above the median\r\n   */\r\n  getBarAboveLineWidth() {\r\n    return this._gstyle( 'barAboveLineWidth', ...arguments );\r\n  }\r\n\r\n  /**\r\n   *  Sets the fill color\r\n   *  @param {Number} width - The line width of the whisker below the median\r\n   *  @returns {SerieBox} The current serie instance\r\n   */\r\n  setBarBelowLineWidth() {\r\n    return this._style( 'barBelowLineWidth', ...arguments );\r\n  }\r\n\r\n  /**\r\n   * Returns the line width of the whisker below the median\r\n   * @return {Number} The line width of the whisker below the median\r\n   */\r\n  getBarBelowLineWidth() {\r\n    return this._gstyle( 'barBelowLineWidth', ...arguments );\r\n  }\r\n\r\n  /**\r\n   *  Sets the fill color\r\n   *  @param {String} color - The outlier stroke color\r\n   *  @returns {SerieBox} The current serie instance\r\n   */\r\n  setOutlierLineColor() {\r\n    return this._style( 'outlierLineColor', ...arguments );\r\n  }\r\n\r\n  /**\r\n   * Returns the line color of the outliers\r\n   * @return {String} The line color of the outliers\r\n   */\r\n  getOutlierLineColor() {\r\n    return this._gstyle( 'outlierLineColor', ...arguments );\r\n  }\r\n\r\n  /**\r\n   *  Sets the stroke width\r\n   *  @param {Number} width - The outlier stroke width\r\n   *  @returns {SerieBox} The current serie instance\r\n   */\r\n  setOutlierLineWidth() {\r\n    return this._style( 'outlierLineWidth', ...arguments );\r\n  }\r\n\r\n  /**\r\n   * Returns the line width of the outliers\r\n   * @return {Number} The line width of the outliers\r\n   */\r\n  getOutlierLineWidth() {\r\n    return this._gstyle( 'outlierLineWidth', ...arguments );\r\n  }\r\n\r\n  /**\r\n   *  Sets the fill color\r\n   *  @param {String} color - The outlier fill color\r\n   *  @returns {SerieBox} The current serie instance\r\n   */\r\n  setOutlierFillColor() {\r\n    return this._style( 'outlierFillColor', ...arguments );\r\n  }\r\n\r\n  /**\r\n   * Returns the fill color of the outliers\r\n   * @return {String} The fill color of the outliers\r\n   */\r\n  getOutlierFillColor() {\r\n    return this._gstyle( 'outlierFillColor', ...arguments );\r\n  }\r\n\r\n  /**\r\n   *  Sets the outlier fill opacity\r\n   *  @param {Number} opacity - The outlier fill opacity\r\n   *  @returns {SerieBox} The current serie instance\r\n   */\r\n  setOutlierFillOpacity() {\r\n    return this._style( 'outlierFillOpacity', ...arguments );\r\n  }\r\n\r\n  /**\r\n   * Returns the fill opacity of the outliers\r\n   * @return {Number} The fill opacity of the outliers\r\n   */\r\n  getOutlierFillOpacity() {\r\n    return this._gstyle( 'outlierFillOpacity', ...arguments );\r\n  }\r\n\r\n  /**\r\n   * Reapply the current style to the serie lines elements. Mostly used internally\r\n   *  @returns {SerieBox} The current serie instance\r\n   */\r\n  applyLineStyles() {\r\n    this.applyLineStyle( this.pathDom );\r\n  }\r\n\r\n  /**\r\n   * Applies the current style to a line element. Mostly used internally\r\n   * @memberof SerieBar\r\n   */\r\n  applyLineStyle( line ) {\r\n\r\n    line.setAttribute( 'stroke', this.getLineColor() );\r\n    line.setAttribute( 'stroke-width', this.getLineWidth() );\r\n    line.removeAttribute( 'stroke-dasharray' );\r\n    line.setAttribute( 'fill', this.getFillColor() );\r\n    line.setAttribute( 'fill-opacity', this.getFillOpacity() || 1 );\r\n  }\r\n\r\n  draw() {\r\n\r\n    if ( !this.data ) {\r\n      return;\r\n    }\r\n\r\n    let position;\r\n    let axis = this.options.orientation == 'y' ? this.getYAxis() : this.getXAxis();\r\n    let axis2 = this.options.orientation == 'y' ? this.getXAxis() : this.getYAxis();\r\n    let boxOtherDimension; // width or height of the box\r\n    let useCategories = false;\r\n    let mean, boxAbove, boxBelow, barAbove, barBelow, outliers, posAbove, posBelow;\r\n    let categoryNumber;\r\n\r\n    emptyDom( this.groupMain );\r\n\r\n    if ( axis2.getType() == 'category' ) {\r\n\r\n      boxOtherDimension = axis2.getRelPx( 0.8 / ( this.nbCategories ) );\r\n      useCategories = true;\r\n\r\n    } else {\r\n      // Get all the spacing and determine the smallest one\r\n      boxOtherDimension = this.options.maxBoxWidth;\r\n      for ( var i = 0, l = this.data.length; i < l - 1; i++ ) {\r\n\r\n        boxOtherDimension = Math.max( 5, Math.min( boxOtherDimension, Math.abs( axis2.getPx( this.data[ i + 1 ].x ) - axis2.getPx( this.data[ i ].x ) ) ) );\r\n      }\r\n\r\n    }\r\n\r\n    for ( var i = 0, l = this.data.length; i < l; i++ ) {\r\n\r\n      if ( axis2.getType() == 'category' ) {\r\n\r\n        let cat = this.options.orientation == 'y' ? this.data[ i ].x : this.data[ i ].y;\r\n\r\n        if ( !this.categoryIndices.hasOwnProperty( cat ) ) {\r\n\r\n          if ( Array.isArray( this._linkedToScatterSeries ) ) {\r\n            for ( let scatter_serie of this._linkedToScatterSeries ) {\r\n\r\n              if ( scatter_serie.categoryIndices.hasOwnProperty( cat ) ) {\r\n\r\n                position = [ axis2.getPos( scatter_serie.categoryIndices[ cat ] ) + 1.2 * boxOtherDimension / 2 ];\r\n\r\n                if ( this.options.orientation == 'y' ) {\r\n                  axis = scatter_serie.getYAxis();\r\n                } else {\r\n                  axis = scatter_serie.getXAxis();\r\n                }\r\n\r\n                break;\r\n              }\r\n            }\r\n          }\r\n        } else {\r\n\r\n          position = [ axis2.getPos( this.categoryIndices[ cat ] ) + 1.2 * boxOtherDimension / 2 ];\r\n\r\n        }\r\n\r\n      } else {\r\n\r\n        position = [ axis2.getPos( this.options.orientation == 'y' ? this.data[ i ].x : this.data[ i ].y ), boxOtherDimension ];\r\n\r\n      }\r\n\r\n      mean = axis.getPos( this.data[ i ].Q2 );\r\n      boxAbove = axis.getPos( this.data[ i ].Q3 );\r\n      boxBelow = axis.getPos( this.data[ i ].Q1 );\r\n\r\n      this.data[ i ].whiskers.map( ( val ) => {\r\n\r\n        if ( val < this.data[ i ].Q1 ) {\r\n          barBelow = axis.getPos( val );\r\n        } else {\r\n          barAbove = axis.getPos( val );\r\n        }\r\n      } );\r\n\r\n      outliers = this.data[ i ].outliers.map( ( val ) => axis.getPos( val ) );\r\n\r\n      var lineMean = document.createElementNS( this.graph.ns, 'line' );\r\n\r\n      this.applyMeanStyle( lineMean );\r\n\r\n      var rectAbove = document.createElementNS( this.graph.ns, 'rect' );\r\n      var rectBelow = document.createElementNS( this.graph.ns, 'rect' );\r\n\r\n      if ( this.options.orientation == 'y' ) {\r\n\r\n        rectAbove.setAttribute( 'width', boxOtherDimension );\r\n        rectAbove.setAttribute( 'x', position[ 0 ] - boxOtherDimension / 2 );\r\n\r\n        rectBelow.setAttribute( 'width', boxOtherDimension );\r\n        rectBelow.setAttribute( 'x', position[ 0 ] - boxOtherDimension / 2 );\r\n\r\n        lineMean.setAttribute( 'x1', position[ 0 ] - boxOtherDimension / 2 );\r\n        lineMean.setAttribute( 'x2', position[ 0 ] + boxOtherDimension / 2 );\r\n        lineMean.setAttribute( 'y1', mean );\r\n        lineMean.setAttribute( 'y2', mean );\r\n\r\n      } else {\r\n\r\n        rectAbove.setAttribute( 'height', boxOtherDimension );\r\n        rectAbove.setAttribute( 'y', position[ 0 ] - boxOtherDimension / 2 );\r\n\r\n        rectBelow.setAttribute( 'height', boxOtherDimension );\r\n        rectBelow.setAttribute( 'y', position[ 0 ] - boxOtherDimension / 2 );\r\n\r\n        lineMean.setAttribute( 'y1', position[ 0 ] - boxOtherDimension / 2 );\r\n        lineMean.setAttribute( 'y2', position[ 0 ] + boxOtherDimension / 2 );\r\n        lineMean.setAttribute( 'x1', mean );\r\n        lineMean.setAttribute( 'x2', mean );\r\n      }\r\n\r\n      this.boxPos( rectAbove, mean, boxAbove, this.options.orientation == 'x' );\r\n      this.boxPos( rectBelow, mean, boxBelow, this.options.orientation == 'x' );\r\n\r\n      this.applyBoxStyle( rectAbove, rectBelow );\r\n\r\n      var whiskerAbove = document.createElementNS( this.graph.ns, 'line' );\r\n      var whiskerBelow = document.createElementNS( this.graph.ns, 'line' );\r\n\r\n      if ( this.options.orientation == 'y' ) {\r\n\r\n        if ( barAbove !== undefined ) {\r\n          whiskerAbove.setAttribute( 'y1', boxAbove );\r\n          whiskerAbove.setAttribute( 'y2', barAbove );\r\n          whiskerAbove.setAttribute( 'x1', position[ 0 ] );\r\n          whiskerAbove.setAttribute( 'x2', position[ 0 ] );\r\n        }\r\n\r\n        if ( barBelow !== undefined ) {\r\n          whiskerBelow.setAttribute( 'y1', boxBelow );\r\n          whiskerBelow.setAttribute( 'y2', barBelow );\r\n          whiskerBelow.setAttribute( 'x1', position[ 0 ] );\r\n          whiskerBelow.setAttribute( 'x2', position[ 0 ] );\r\n        }\r\n\r\n      } else {\r\n\r\n        if ( barAbove !== undefined ) {\r\n          whiskerAbove.setAttribute( 'x1', boxAbove );\r\n          whiskerAbove.setAttribute( 'x2', barAbove );\r\n          whiskerAbove.setAttribute( 'y1', position[ 0 ] );\r\n          whiskerAbove.setAttribute( 'y2', position[ 0 ] );\r\n        }\r\n\r\n        if ( barBelow !== undefined ) {\r\n          whiskerBelow.setAttribute( 'x1', boxBelow );\r\n          whiskerBelow.setAttribute( 'x2', barBelow );\r\n          whiskerBelow.setAttribute( 'y1', position[ 0 ] );\r\n          whiskerBelow.setAttribute( 'y2', position[ 0 ] );\r\n        }\r\n      }\r\n\r\n      outliers.map( ( outliervalue ) => {\r\n\r\n        let outlier = document.createElementNS( this.graph.ns, 'circle' );\r\n\r\n        outlier.setAttribute( 'r', 2 );\r\n\r\n        if ( this.options.orientation == 'y' ) {\r\n\r\n          outlier.setAttribute( 'cx', position[ 0 ] );\r\n          outlier.setAttribute( 'cy', outliervalue );\r\n\r\n        } else {\r\n\r\n          outlier.setAttribute( 'cy', position[ 0 ] );\r\n          outlier.setAttribute( 'cx', outliervalue );\r\n        }\r\n\r\n        this.setOutlierStyle( outlier );\r\n\r\n        this.groupMain.appendChild( outlier );\r\n      } );\r\n\r\n      if ( barAbove !== undefined ) {\r\n        this.groupMain.appendChild( whiskerAbove );\r\n      }\r\n\r\n      if ( barBelow !== undefined ) {\r\n        this.groupMain.appendChild( whiskerBelow );\r\n      }\r\n\r\n      if ( boxAbove !== undefined ) {\r\n        this.groupMain.appendChild( rectAbove );\r\n      }\r\n\r\n      if ( boxBelow !== undefined ) {\r\n        this.groupMain.appendChild( rectBelow );\r\n      }\r\n\r\n      this.groupMain.appendChild( lineMean );\r\n\r\n      this.applyWhiskerStyle( whiskerAbove, whiskerBelow );\r\n    }\r\n  }\r\n\r\n  applyBoxStyle( above, below ) {\r\n\r\n    above.setAttribute( 'stroke', this.getBoxAboveLineColor() );\r\n    above.setAttribute( 'stroke-width', this.getBoxAboveLineWidth() );\r\n\r\n    if ( this.getBoxAboveFillColor() !== undefined ) {\r\n      above.setAttribute( 'fill', this.getBoxAboveFillColor() );\r\n    }\r\n    if ( this.getBoxAboveFillOpacity() !== undefined ) {\r\n      above.setAttribute( 'fill-opacity', this.getBoxAboveFillOpacity() );\r\n    }\r\n\r\n    below.setAttribute( 'stroke', this.getBoxBelowLineColor() );\r\n    below.setAttribute( 'stroke-width', this.getBoxBelowLineWidth() );\r\n\r\n    if ( this.getBoxBelowFillColor() !== undefined ) {\r\n      below.setAttribute( 'fill', this.getBoxBelowFillColor() );\r\n    }\r\n    if ( this.getBoxAboveFillOpacity() !== undefined ) {\r\n      below.setAttribute( 'fill-opacity', this.getBoxBelowFillOpacity() );\r\n    }\r\n  }\r\n\r\n  applyWhiskerStyle( above, below ) {\r\n\r\n    above.setAttribute( 'stroke', this.getBarAboveLineColor() );\r\n    above.setAttribute( 'stroke-width', this.getBarAboveLineWidth() );\r\n\r\n    below.setAttribute( 'stroke', this.getBarBelowLineColor() );\r\n    below.setAttribute( 'stroke-width', this.getBarBelowLineWidth() );\r\n  }\r\n\r\n  applyMeanStyle( line ) {\r\n\r\n    line.setAttribute( 'stroke', this.getMeanLineColor() );\r\n    line.setAttribute( 'stroke-width', this.getMeanLineWidth() );\r\n  }\r\n\r\n  setOutlierStyle( outlier ) {\r\n\r\n    outlier.setAttribute( 'stroke', this.getOutlierLineColor() );\r\n    outlier.setAttribute( 'stroke-width', this.getOutlierLineWidth() );\r\n\r\n    if ( this.getBoxBelowFillColor() !== undefined ) {\r\n      outlier.setAttribute( 'fill', this.getOutlierFillColor() );\r\n    }\r\n    if ( this.getBoxAboveFillOpacity() !== undefined ) {\r\n      outlier.setAttribute( 'fill-opacity', this.getOutlierFillOpacity() );\r\n    }\r\n  }\r\n  /**\r\n   * Returns the index of a category based on its name\r\n   * @param {String} name - The name of the category\r\n   */\r\n  getCategoryIndex( name ) {\r\n\r\n    if ( !this.categories ) {\r\n      throw new Error( 'No categories were defined. Probably axis.setSeries was not called' );\r\n    }\r\n\r\n    for ( var i = 0; i < this.categories.length; i++ ) {\r\n\r\n      if ( this.categories[ i ].name == name ) {\r\n        return i;\r\n      }\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  // Markers now allowed\r\n  setMarkers() {}\r\n\r\n  boxPos( box, mean, extremity, blnX ) {\r\n\r\n    if ( mean > extremity ) {\r\n\r\n      box.setAttribute( blnX ? 'x' : 'y', extremity );\r\n      box.setAttribute( blnX ? 'width' : 'height', mean - extremity );\r\n\r\n    } else {\r\n\r\n      box.setAttribute( blnX ? 'x' : 'y', mean );\r\n      box.setAttribute( blnX ? 'width' : 'height', extremity - mean );\r\n    }\r\n  }\r\n\r\n  getUsedCategories() {\r\n    let xymode = this.options.orientation == 'y' ? 'x' : 'y';\r\n\r\n    let categories = this.data.map( ( d ) => d[ xymode ] );\r\n\r\n    if ( Array.isArray( this._linkedToScatterSeries ) ) {\r\n      this._linkedToScatterSeries.map( ( scatter_serie ) => {\r\n\r\n        scatter_serie.getUsedCategories().map( ( scatter_serie_cat ) => {\r\n          let index;\r\n          if ( ( index = categories.indexOf( scatter_serie_cat ) ) > -1 ) {\r\n            categories.splice( index, 1 );\r\n          }\r\n\r\n        } );\r\n      } );\r\n\r\n    }\r\n\r\n    return categories;\r\n  }\r\n\r\n  linkToScatterSerie( ...series ) {\r\n    this._linkedToScatterSeries = series;\r\n  }\r\n}\r\n\r\nexport default SerieBox;","import * as util from '../graph.util.js';\r\nimport ErrorBarMixin from '../mixins/graph.mixin.errorbars.js';\r\n\r\nimport SerieLine from './graph.serie.line.js';\r\n\r\n/**\r\n * Colored serie line\r\n * @example graph.newSerie( name, options, \"color\" );\r\n * @see Graph#newSerie\r\n * @augments SerieLine\r\n */\r\nclass SerieLineColor extends SerieLine {\r\n\r\n  constructor( graph, name, options ) {\r\n\r\n    super( ...arguments );\r\n    this.lines = this.lines || {};\r\n  }\r\n\r\n  setColors( colors ) {\r\n    this.colors = colors;\r\n  }\r\n\r\n  _draw() {\r\n\r\n    var self = this,\r\n      data = this._dataToUse,\r\n      toBreak,\r\n      i = 0,\r\n      j,\r\n      k,\r\n      m,\r\n      x,\r\n      y,\r\n      k,\r\n      o,\r\n      lastX = false,\r\n      lastY = false,\r\n      xpx,\r\n      ypx,\r\n      xpx2,\r\n      ypx2,\r\n      xAxis = this.getXAxis(),\r\n      yAxis = this.getYAxis(),\r\n      xMin = xAxis.getCurrentMin(),\r\n      yMin = yAxis.getCurrentMin(),\r\n      xMax = xAxis.getCurrentMax(),\r\n      yMax = yAxis.getCurrentMax();\r\n\r\n    // Y crossing\r\n    var yLeftCrossingRatio,\r\n      yLeftCrossing,\r\n      yRightCrossingRatio,\r\n      yRightCrossing,\r\n      xTopCrossingRatio,\r\n      xTopCrossing,\r\n      xBottomCrossingRatio,\r\n      xBottomCrossing;\r\n\r\n    var incrXFlip = 0;\r\n    var incrYFlip = 1;\r\n\r\n    var pointOutside = false;\r\n    var lastPointOutside = false;\r\n    var pointOnAxis;\r\n\r\n    this.eraseLines();\r\n\r\n    if ( this.isFlipped() ) {\r\n      incrXFlip = 1;\r\n      incrYFlip = 0;\r\n    }\r\n\r\n    this.currentLine = '';\r\n    m = this.waveform.getLength();\r\n\r\n    for ( j = 0; j < m; j += 2 ) {\r\n\r\n      x = this.waveform.getX( j );\r\n      y = this.waveform.getY( j );\r\n\r\n      if ( ( x < xMin && lastX < xMin ) || ( x > xMax && lastX > xMax ) || ( ( ( y < yMin && lastY < yMin ) || ( y > yMax && lastY > yMax ) ) && !this.options.lineToZero ) ) {\r\n        lastX = x;\r\n        lastY = y;\r\n        lastPointOutside = true;\r\n        continue;\r\n      }\r\n\r\n      this.counter2 = j;\r\n\r\n      if ( this.markersShown() ) {\r\n        this.getMarkerCurrentFamily( this.counter2 );\r\n      }\r\n\r\n      xpx2 = this.getX( x );\r\n      ypx2 = this.getY( y );\r\n\r\n      if ( xpx2 == xpx && ypx2 == ypx ) {\r\n        continue;\r\n      }\r\n\r\n      pointOutside = ( x < xMin || y < yMin || x > xMax || y > yMax );\r\n      /*\r\n              if ( this.options.lineToZero ) {\r\n                pointOutside = ( x < xMin || x > xMax );\r\n\r\n                if ( pointOutside ) {\r\n                  continue;\r\n                }\r\n              } else {\r\n\r\n                if ( pointOutside || lastPointOutside ) {\r\n\r\n                  if ( ( lastX === false || lastY === false ) && !lastPointOutside ) {\r\n\r\n                    xpx = xpx2;\r\n                    ypx = ypx2;\r\n                    lastX = x;\r\n                    lastY = y;\r\n\r\n                  } else {\r\n\r\n                    pointOnAxis = [];\r\n                    // Y crossing\r\n                    yLeftCrossingRatio = ( x - xMin ) / ( x - lastX );\r\n                    yLeftCrossing = y - yLeftCrossingRatio * ( y - lastY );\r\n                    yRightCrossingRatio = ( x - xMax ) / ( x - lastX );\r\n                    yRightCrossing = y - yRightCrossingRatio * ( y - lastY );\r\n\r\n                    // X crossing\r\n                    xTopCrossingRatio = ( y - yMin ) / ( y - lastY );\r\n                    xTopCrossing = x - xTopCrossingRatio * ( x - lastX );\r\n                    xBottomCrossingRatio = ( y - yMax ) / ( y - lastY );\r\n                    xBottomCrossing = x - xBottomCrossingRatio * ( x - lastX );\r\n\r\n                    if ( yLeftCrossingRatio < 1 && yLeftCrossingRatio > 0 && yLeftCrossing !== false && yLeftCrossing < yMax && yLeftCrossing > yMin ) {\r\n                      pointOnAxis.push( [ xMin, yLeftCrossing ] );\r\n                    }\r\n\r\n                    if ( yRightCrossingRatio < 1 && yRightCrossingRatio > 0 && yRightCrossing !== false && yRightCrossing < yMax && yRightCrossing > yMin ) {\r\n                      pointOnAxis.push( [ xMax, yRightCrossing ] );\r\n                    }\r\n\r\n                    if ( xTopCrossingRatio < 1 && xTopCrossingRatio > 0 && xTopCrossing !== false && xTopCrossing < xMax && xTopCrossing > xMin ) {\r\n                      pointOnAxis.push( [ xTopCrossing, yMin ] );\r\n                    }\r\n\r\n                    if ( xBottomCrossingRatio < 1 && xBottomCrossingRatio > 0 && xBottomCrossing !== false && xBottomCrossing < xMax && xBottomCrossing > xMin ) {\r\n                      pointOnAxis.push( [ xBottomCrossing, yMax ] );\r\n                    }\r\n\r\n                    if ( pointOnAxis.length > 0 ) {\r\n\r\n                      if ( !pointOutside ) { // We were outside and now go inside\r\n\r\n                        if ( pointOnAxis.length > 1 ) {\r\n                          console.error( \"Programmation error. Please e-mail me.\" );\r\n                          console.log( pointOnAxis, xBottomCrossing, xTopCrossing, yRightCrossing, yLeftCrossing, y, yMin, yMax, lastY );\r\n                        }\r\n\r\n                        this._createLine();\r\n                        this._addPoint( this.getX( pointOnAxis[ 0 ][ 0 ] ), this.getY( pointOnAxis[ 0 ][ 1 ] ), pointOnAxis[ 0 ][ 0 ], pointOnAxis[ 0 ][ 1 ], false, false, false );\r\n                        this._addPoint( xpx2, ypx2, lastX, lastY, false, false, true );\r\n\r\n                      } else if ( !lastPointOutside ) { // We were inside and now go outside\r\n\r\n                        if ( pointOnAxis.length > 1 ) {\r\n                          console.error( \"Programmation error. Please e-mail me.\" );\r\n                          console.log( pointOnAxis, xBottomCrossing, xTopCrossing, yRightCrossing, yLeftCrossing, y, yMin, yMax, lastY );\r\n                        }\r\n\r\n                        this._addPoint( this.getX( pointOnAxis[ 0 ][ 0 ] ), this.getY( pointOnAxis[ 0 ][ 1 ] ), pointOnAxis[ 0 ][ 0 ], pointOnAxis[ 0 ][ 1 ], false, false, false );\r\n\r\n                      } else {\r\n\r\n                        // No crossing: do nothing\r\n                        if ( pointOnAxis.length == 2 ) {\r\n                          this._createLine();\r\n\r\n                          this._addPoint( this.getX( pointOnAxis[ 0 ][ 0 ] ), this.getY( pointOnAxis[ 0 ][ 1 ] ), pointOnAxis[ 0 ][ 0 ], pointOnAxis[ 0 ][ 1 ], false, false, false );\r\n                          this._addPoint( this.getX( pointOnAxis[ 1 ][ 0 ] ), this.getY( pointOnAxis[ 1 ][ 1 ] ), pointOnAxis[ 0 ][ 0 ], pointOnAxis[ 0 ][ 1 ], false, false, false );\r\n                        }\r\n\r\n                      }\r\n                    } else if ( !pointOutside ) {\r\n                      this._addPoint( xpx2, ypx2, lastX, lastY, j, false, false );\r\n                    }\r\n                  }\r\n\r\n                  xpx = xpx2;\r\n                  ypx = ypx2;\r\n                  lastX = x;\r\n                  lastY = y;\r\n\r\n                  lastPointOutside = pointOutside;\r\n\r\n                  continue;\r\n                }\r\n\r\n              }*/\r\n\r\n      if ( isNaN( xpx2 ) || isNaN( ypx2 ) ) {\r\n        if ( this.counter > 0 ) {\r\n\r\n          //      this._createLine();\r\n        }\r\n        continue;\r\n      }\r\n\r\n      var color = this.colors[ j ];\r\n\r\n      this._addPoint( xpx2, ypx2, x, y, xpx, ypx, lastX, lastY, j, color, false, true );\r\n\r\n      xpx = xpx2;\r\n      ypx = ypx2;\r\n\r\n      lastX = x;\r\n      lastY = y;\r\n    }\r\n\r\n    this.latchLines();\r\n\r\n    if ( this._tracker ) {\r\n\r\n      if ( this._trackerDom ) {\r\n        this._trackerDom.remove();\r\n      }\r\n\r\n      var cloned = this.groupLines.cloneNode( true );\r\n      this.groupMain.appendChild( cloned );\r\n\r\n      for ( var i = 0, l = cloned.children.length; i < l; i++ ) {\r\n\r\n        cloned.children[ i ].setAttribute( 'stroke', 'transparent' );\r\n        cloned.children[ i ].setAttribute( 'stroke-width', '25px' );\r\n        cloned.children[ i ].setAttribute( 'pointer-events', 'stroke' );\r\n      }\r\n\r\n      self._trackerDom = cloned;\r\n\r\n      self.groupMain.addEventListener( 'mousemove', function( e ) {\r\n        var coords = self.graph._getXY( e ),\r\n          ret = self.handleMouseMove( false, false );\r\n        self._trackingCallback( self, ret, coords.x, coords.y );\r\n      } );\r\n\r\n      self.groupMain.addEventListener( 'mouseleave', function( e ) {\r\n        self._trackingOutCallback( self );\r\n      } );\r\n    }\r\n    return this;\r\n\r\n  }\r\n\r\n  _addPoint( xpx, ypx, x, y, xpxbefore, ypxbefore, xbefore, ybefore, j, color, move, allowMarker ) {\r\n\r\n    if ( xpxbefore === undefined || ypxbefore === undefined ) {\r\n      return;\r\n    }\r\n\r\n    if ( isNaN( xpx ) || isNaN( ypx ) ) {\r\n      return;\r\n    }\r\n\r\n    if ( color._rgb ) {\r\n      color = `rgba(${ color._rgb[ 0 ] },${ color._rgb[ 1 ] },${ color._rgb[ 2 ] },${ color._rgb[ 3 ] || 1 })`;\r\n    }\r\n\r\n    var line = this.lines[ color ];\r\n    if ( !line ) {\r\n      line = this.lines[ color ] = {\r\n        object: document.createElementNS( this.graph.ns, 'path' ),\r\n        path: '',\r\n        color: color\r\n      };\r\n      line.object.setAttribute( 'stroke', color );\r\n      line.color = color;\r\n      //      this.applyLineStyle( line );\r\n      this.groupLines.appendChild( line.object );\r\n    }\r\n\r\n    line.path += `M ${ xpxbefore } ${ ypxbefore } L ${ xpx } ${ ypx}`;\r\n\r\n    if ( this.hasErrors() ) {\r\n      this.errorAddPoint( j, x, y, xpx, ypx );\r\n    }\r\n\r\n    /*if ( this.markersShown() && allowMarker !== false ) {\r\n      drawMarkerXY( this, this.markerFamilies[ this.selectionType ][ this.markerCurrentFamily ], xpx, ypx );\r\n    }*/\r\n  }\r\n\r\n  removeExtraLines() {\r\n\r\n  }\r\n\r\n  // Returns the DOM\r\n  latchLines() {\r\n\r\n    for ( var i in this.lines ) {\r\n      this.lines[ i ].object.setAttribute( 'd', this.lines[ i ].path );\r\n    }\r\n  }\r\n\r\n  // Returns the DOM\r\n  eraseLines() {\r\n\r\n    for ( var i in this.lines ) {\r\n      this.lines[ i ].path = '';\r\n      this.lines[ i ].object.setAttribute( 'd', '' );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Applies the current style to a line element. Mostly used internally\r\n   * @memberof SerieLine\r\n   */\r\n  applyLineStyle( line ) {\r\n\r\n    //line.setAttribute( 'stroke', this.getLineColor() );\r\n    line.setAttribute( 'stroke-width', this.getLineWidth() );\r\n    if ( this.getLineDashArray() ) {\r\n      line.setAttribute( 'stroke-dasharray', this.getLineDashArray() );\r\n    } else {\r\n      line.removeAttribute( 'stroke-dasharray' );\r\n    }\r\n    line.setAttribute( 'fill', 'none' );\r\n    //\tline.setAttribute('shape-rendering', 'optimizeSpeed');\r\n  }\r\n}\r\n\r\nexport default SerieLineColor;","import {\r\n  Waveform\r\n} from '../util/waveform.js';\r\nimport {\r\n  extend,\r\n  guid\r\n} from '../graph.util.js';\r\n\r\nimport Serie from './graph.serie.js';\r\n\r\n/**\r\n * @static\r\n * @extends Serie\r\n * @example graph.newSerie( name, options, \"scatter\" );\r\n * @see Graph#newSerie\r\n */\r\nclass SerieZone extends Serie {\r\n  static\r\n  default () {\r\n    return {\r\n      fillColor: 'rgba( 0, 0, 0, 0.1 )',\r\n      lineColor: 'rgba( 0, 0, 0, 1 )',\r\n      lineWidth: '1px'\r\n    };\r\n  }\r\n  constructor( graph, name, options ) {\r\n    super( ...arguments );\r\n\r\n    this.selectionType = 'unselected';\r\n    this.id = guid();\r\n\r\n    this.groupZones = document.createElementNS( this.graph.ns, 'g' );\r\n    this.lineZone = document.createElementNS( this.graph.ns, 'path' );\r\n    this.lineZone.setAttribute( 'stroke', 'black' );\r\n    this.lineZone.setAttribute( 'stroke-width', '1px' );\r\n\r\n    this.groupMain.appendChild( this.groupZones );\r\n    this.groupZones.appendChild( this.lineZone );\r\n\r\n    this.applyLineStyle( this.lineZone );\r\n    this.styleHasChanged();\r\n\r\n    this.clip = document.createElementNS( this.graph.ns, 'clipPath' );\r\n    this.clipId = guid();\r\n    this.clip.setAttribute( 'id', this.clipId );\r\n\r\n    this.graph.defs.appendChild( this.clip );\r\n  }\r\n\r\n  /**\r\n   * Assigns a collection of waveforms that make up the zone\r\n   * The waveforms will appended one after the other, without break\r\n   * @param {...Waveform} waveforms - The collection of waveforms\r\n   * @return {SerieZone} - The current serie zone instance\r\n   * @memberof SerieZone\r\n   */\r\n  setWaveform( ...waveforms ) {\r\n    this.waveforms = waveforms;\r\n\r\n    this.waveforms = this.waveforms.map( ( wave ) => {\r\n      if ( !( wave instanceof Waveform ) ) {\r\n        return new Waveform( wave );\r\n      } else {\r\n        return wave;\r\n      }\r\n    } );\r\n\r\n    this.minX = this.waveforms[ 0 ].getXMin();\r\n    this.maxX = this.waveforms[ 0 ].getXMax();\r\n    this.minY = this.waveforms[ 0 ].getMin();\r\n    this.maxY = this.waveforms[ 0 ].getMax();\r\n\r\n    this.waveforms.map( ( wave ) => {\r\n      this.minX = Math.min( wave.getXMin(), this.minX );\r\n      this.maxX = Math.max( wave.getXMin(), this.maxX );\r\n      this.minY = Math.min( wave.getMin(), this.minY );\r\n      this.maxY = Math.max( wave.getMax(), this.maxY );\r\n    } );\r\n\r\n    this.graph.updateDataMinMaxAxes();\r\n    this.dataHasChanged();\r\n    return this;\r\n  }\r\n\r\n  setWaveforms() {\r\n    return this.setWaveform( ...arguments );\r\n  }\r\n\r\n  getWaveforms() {\r\n    return this.waveforms;\r\n  }\r\n\r\n  setMinMaxWaveforms( min, max ) {\r\n    this.waveforms = [ min, max.reverse() ];\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Removes all the dom concerning this serie from the drawing zone\r\n   */\r\n  empty() {\r\n    while ( this.group.firstChild ) {\r\n      this.group.removeChild( this.group.firstChild );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Redraws the serie\r\n   * @private\r\n   *\r\n   * @param {force} Boolean - Forces redraw even if the data hasn't changed\r\n   */\r\n  draw( force ) {\r\n    // Serie redrawing\r\n\r\n    if ( force || this.hasDataChanged() ) {\r\n      if ( !this.waveforms ) {\r\n        return;\r\n      }\r\n\r\n      let dataX = 0,\r\n        dataY = 0,\r\n        xpx = 0,\r\n        ypx = 0,\r\n        j = 0,\r\n        line = '',\r\n        buffer,\r\n        move = false;\r\n\r\n      const xminpx = this.getXAxis().getMinPx(),\r\n        xmaxpx = this.getXAxis().getMaxPx(),\r\n        yminpx = this.getYAxis().getMinPx(),\r\n        ymaxpx = this.getYAxis().getMaxPx();\r\n\r\n      const xmin = this.getXAxis().getCurrentMin(),\r\n        xmax = this.getXAxis().getCurrentMax(),\r\n        ymin = this.getYAxis().getCurrentMin(),\r\n        ymax = this.getYAxis().getCurrentMax();\r\n\r\n      //this.clipRect.setAttribute( \"x\", Math.min( xmin, xmax ) );\r\n      //this.clipRect.setAttribute( \"y\", Math.min( ymin, ymax ) );\r\n      //this.clipRect.setAttribute( \"width\", Math.abs( xmax - xmin ) );\r\n      //this.clipRect.setAttribute( \"height\", Math.abs( ymax - ymin ) );\r\n\r\n      this.groupMain.removeChild( this.groupZones );\r\n\r\n      for ( let waveform of this.waveforms ) {\r\n        for ( j = 0; j < waveform.getLength(); j += 1 ) {\r\n          dataX = waveform.getX( j, true );\r\n          dataY = waveform.getY( j, true );\r\n\r\n          // The y axis in screen coordinate is inverted vs cartesians\r\n          if ( dataY[ j ] < ymin ) {\r\n            ypx = this.getY( ymin );\r\n          } else if ( dataY[ j ] > ymax ) {\r\n            ypx = this.getY( ymax );\r\n          }\r\n\r\n          if ( dataX !== dataX ) {\r\n            continue;\r\n          }\r\n\r\n          if ( dataY !== dataY ) {\r\n            // Let's make a new line\r\n\r\n            if ( line.length == 0 ) {\r\n              continue;\r\n            }\r\n\r\n            line += `L ${xpx}, ${this.getY( waveform.getMinY() )}`;\r\n            move = true;\r\n            continue;\r\n          }\r\n\r\n          ypx = this.getY( dataY );\r\n          xpx = this.getX( dataX );\r\n\r\n          if ( dataX < xmin || dataX > xmax ) {\r\n            buffer = [ dataX, dataY[ j ], xpx, ypx ];\r\n            continue;\r\n          }\r\n\r\n          if ( move ) {\r\n            line += ` M ${xpx}, ${this.getY( waveform.getMinY() )} `;\r\n            move = false;\r\n          }\r\n\r\n          if ( line.length > 0 ) {\r\n            line += ' L ';\r\n          }\r\n\r\n          if ( buffer ) {\r\n            line += `${buffer[2]},${buffer[3]} `;\r\n            buffer = false;\r\n          } else {\r\n            line += `${xpx},${ypx} `;\r\n          }\r\n        }\r\n      }\r\n\r\n      if ( line !== '' ) {\r\n        this.lineZone.setAttribute( 'd', `M ${line} z` );\r\n      } else {\r\n        this.lineZone.setAttribute( 'd', '' );\r\n      }\r\n      this.groupMain.appendChild( this.groupZones );\r\n    }\r\n\r\n    if ( this.hasStyleChanged( this.selectionType ) ) {\r\n      this.applyLineStyle( this.lineZone );\r\n      this.styleHasChanged( false );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Applies the computed style to the DOM element fed as a parameter\r\n   * @private\r\n   *\r\n   * @param {SVGLineElement} line - The line to which the style has to be applied to\r\n   */\r\n  applyLineStyle( line ) {\r\n    line.setAttribute( 'stroke', this.getLineColor() );\r\n    line.setAttribute( 'stroke-width', this.getLineWidth() );\r\n    line.setAttribute( 'fill', this.getFillColor() );\r\n    line.setAttribute( 'fill-opacity', this.getFillOpacity() );\r\n    line.setAttribute( 'stroke-opacity', this.getLineOpacity() );\r\n  }\r\n\r\n  /**\r\n   * Sets the line width\r\n   *\r\n   * @param {Number} width - The line width\r\n   * @returns {SerieZone} - The current serie\r\n   */\r\n  setLineWidth( width ) {\r\n    this.options.lineWidth = width;\r\n    this.styleHasChanged();\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Gets the line width\r\n   *\r\n   * @returns {Number} - The line width\r\n   */\r\n  getLineWidth() {\r\n    return this.options.lineWidth;\r\n  }\r\n\r\n  /**\r\n   * Sets the line opacity\r\n   *\r\n   * @param {Number} opacity - The line opacity\r\n   * @returns {SerieZone} - The current serie\r\n   */\r\n  setLineOpacity( opacity ) {\r\n    this.options.lineOpacity = opacity;\r\n    this.styleHasChanged();\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Gets the line opacity\r\n   *\r\n   * @returns {Number} - The line opacity\r\n   */\r\n  getLineOpacity() {\r\n    return this.options.lineOpacity;\r\n  }\r\n\r\n  /**\r\n   * Sets the line color\r\n   *\r\n   * @param {String} color - The line color\r\n   * @returns {SerieZone} - The current serie\r\n   */\r\n  setLineColor( color ) {\r\n    this.options.lineColor = color;\r\n    this.styleHasChanged();\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Gets the line width\r\n   *\r\n   * @returns {Number} - The line width\r\n   */\r\n  getLineColor() {\r\n    return this.options.lineColor;\r\n  }\r\n\r\n  /**\r\n   * Sets the fill opacity\r\n   *\r\n   * @param {Number} opacity - The fill opacity\r\n   * @returns {SerieZone} - The current serie\r\n   */\r\n  setFillOpacity( opacity ) {\r\n    this.options.fillOpacity = opacity;\r\n    this.styleHasChanged();\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Gets the fill opacity\r\n   *\r\n   * @returns {Number} - The fill opacity\r\n   */\r\n  getFillOpacity() {\r\n    return this.options.fillOpacity;\r\n  }\r\n\r\n  /**\r\n   * Sets the fill color\r\n   *\r\n   * @param {Number} width - The line width\r\n   * @returns {Number} - The line width\r\n   */\r\n  setFillColor( color ) {\r\n    this.options.fillColor = color;\r\n    this.styleHasChanged();\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Gets the fill color\r\n   *\r\n   * @returns {Number} - The fill color\r\n   */\r\n  getFillColor() {\r\n    return this.options.fillColor;\r\n  }\r\n}\r\n\r\nexport default SerieZone;","// import Graph from '../graph.core.js';\r\n// import { Waveform } from '../util/waveform.js';\r\nimport Serie3DMixin from '../mixins/graph.mixin.serie3d.js';\r\nimport * as util from '../graph.util.js';\r\n\r\nimport Serie from './graph.serie.zone.js';\r\n\r\n/**\r\n * Serie line with 3D projection\r\n * @example graph.newSerie( name, options, \"line\" );\r\n * @see Graph#newSerie\r\n * @extends SerieLine\r\n */\r\nclass SerieZone3D extends Serie {\r\n  static\r\n  default () {\r\n    return {\r\n      zpos: 0\r\n    };\r\n  }\r\n  constructor( graph, name, options ) {\r\n    super( ...arguments );\r\n  }\r\n\r\n  /**\r\n   * Sets the z-position\r\n   * @memberof SerieZone3D\r\n   * @param {Number} zPos - The position in the z axis\r\n   */\r\n  setZPos( zPos ) {\r\n    this.options.zpos = zPos;\r\n    return this;\r\n  }\r\n\r\n  setz() {\r\n    return this.setZPos( ...arguments );\r\n  }\r\n}\r\n\r\nutil.mix( SerieZone3D, Serie3DMixin );\r\nexport default SerieZone3D;","import * as util from '../graph.util.js';\r\n\r\nimport Serie from './graph.serie.js';\r\n\r\n/**\r\n * Density map serie\r\n * @example graph.newSerie( name, options, \"densitymap\" );\r\n * @see Graph#newSerie\r\n * @augments Serie\r\n */\r\nclass SerieDensityMap extends Serie {\r\n\r\n  constructor( graph, name, options ) {\r\n\r\n    super( ...arguments );\r\n    util.mapEventEmission( this.options, this ); // Register events\r\n\r\n    this.rects = [];\r\n    this.paths = [];\r\n\r\n    this.recalculateBinsOnDraw = false;\r\n  }\r\n  /**\r\n   * Sets the data of the serie. Careful, only one format allowed for now.\r\n   * @memberof SerieDensityMap\r\n   * @param {Array} data - A vector containing 2-elements arrays\r\n   * @return {SerieDensityMap} The current instance\r\n   * @example serie.setData( [ [ x1, y1 ], [ x2, y2 ], ..., [ xn, yn ] ] );\r\n   */\r\n  setData( data ) {\r\n\r\n    this.minX = this.maxX = this.minY = this.maxY = 0;\r\n    var i = 0,\r\n      l = data.length;\r\n    this.data = data;\r\n\r\n    this.minX = Number.POSITIVE_INFINITY;\r\n    this.minY = Number.POSITIVE_INFINITY;\r\n    this.maxX = Number.NEGATIVE_INFINITY;\r\n    this.maxY = Number.NEGATIVE_INFINITY;\r\n\r\n    for ( i = 0; i < l; i++ ) {\r\n      this._checkX( data[ i ][ 0 ] );\r\n      this._checkY( data[ i ][ 1 ] );\r\n    }\r\n\r\n    this.dataHasChanged();\r\n    this.graph.updateDataMinMaxAxes();\r\n\r\n    return this;\r\n\r\n  }\r\n\r\n  /**\r\n   * Calculates the bins from the (x,y) dataset\r\n   * @memberof SerieDensityMap\r\n   * @param {Number} fromX - The first x element to consider\r\n   * @param {Number} deltaX - The x spacing between two bins\r\n   * @param {Number} numX - The number of x bins\r\n   * @param {Number} fromY - The first y element to consider\r\n   * @param {Number} deltaY - The y spacing between two bins\r\n   * @param {Number} numY - The number of y bins\r\n   * @return {Array} The generated density map\r\n   * @see SerieDensityMap#autoBins\r\n   * @see SerieDensityMap#autoColorMapBinBoundaries\r\n   * @see SerieDensityMap#setPxPerBin\r\n   */\r\n  calculateDensity( fromX, deltaX, numX, fromY, deltaY, numY ) {\r\n\r\n    var densitymap = [],\r\n      i,\r\n      l = this.data.length,\r\n      indexX, indexY;\r\n\r\n    var binMin = Number.POSITIVE_INFINITY;\r\n    var binMax = Number.NEGATIVE_INFINITY;\r\n\r\n    for ( i = 0; i < l; i++ ) {\r\n      indexX = ~~( ( this.data[ i ][ 0 ] - fromX ) / deltaX );\r\n      indexY = ~~( ( this.data[ i ][ 1 ] - fromY ) / deltaY );\r\n\r\n      if ( indexX > numX || indexY > numY || indexX < 0 || indexY < 0 ) {\r\n        continue;\r\n      }\r\n\r\n      densitymap[ indexX ] = densitymap[ indexX ] || [];\r\n      densitymap[ indexX ][ indexY ] = densitymap[ indexX ][ indexY ] + 1 || 1;\r\n\r\n      binMin = densitymap[ indexX ][ indexY ] < binMin ? densitymap[ indexX ][ indexY ] : binMin;\r\n      binMax = densitymap[ indexX ][ indexY ] > binMax ? densitymap[ indexX ][ indexY ] : binMax;\r\n      //binMax = Math.max( binMax, densitymap[ indexX ][ indexY ] );\r\n    }\r\n\r\n    this.maxIndexX = numX;\r\n    this.maxIndexY = numY;\r\n\r\n    this.binMin = binMin;\r\n    this.binMax = binMax;\r\n\r\n    this.deltaX = deltaX;\r\n    this.deltaY = deltaY;\r\n\r\n    this.fromX = fromX;\r\n    this.fromY = fromY;\r\n\r\n    this.numX = numX;\r\n    this.numY = numY;\r\n\r\n    this.densitymap = densitymap;\r\n    return densitymap;\r\n  }\r\n\r\n  /**\r\n   * Sets the density map from a precalculated data set\r\n   * @memberof SerieDensityMap\r\n   * @param {Array} densitymap - A 2D-array containing the map\r\n   * @param {Number} fromX - The first x element to consider\r\n   * @param {Number} deltaX - The x spacing between two bins\r\n   * @param {Number} fromY - The first y element to consider\r\n   * @param {Number} deltaY - The y spacing between two bins\r\n   * @return {Array} The generated density map\r\n   * @see SerieDensityMap#autoBins\r\n   * @see SerieDensityMap#autoColorMapBinBoundaries\r\n   * @see SerieDensityMap#setPxPerBin\r\n   */\r\n  setDensityMap( densitymap, fromX, deltaX, fromY, deltaY ) {\r\n\r\n    var i,\r\n      j,\r\n      indexX, indexY;\r\n\r\n    var binMin = Number.POSITIVE_INFINITY;\r\n    var binMax = Number.NEGATIVE_INFINITY;\r\n\r\n    for ( i = 0; i < densitymap.length; i++ ) {\r\n\r\n      for ( j = 0; j < densitymap[ i ].length; j++ ) {\r\n        binMin = densitymap[ i ][ j ] < binMin ? densitymap[ i ][ j ] : binMin;\r\n        binMax = densitymap[ i ][ j ] > binMax ? densitymap[ i ][ j ] : binMax;\r\n      }\r\n      //binMax = Math.max( binMax, densitymap[ indexX ][ indexY ] );\r\n    }\r\n\r\n    this.maxIndexX = densitymap.length;\r\n    this.maxIndexY = densitymap[ 0 ].length;\r\n    this.binMin = binMin;\r\n    this.binMax = binMax;\r\n\r\n    this.deltaX = deltaX;\r\n    this.deltaY = deltaY;\r\n\r\n    this.fromX = fromX;\r\n    this.fromY = fromY;\r\n\r\n    this.numX = this.maxIndexX;\r\n    this.numY = this.maxIndexY;\r\n\r\n    this.densitymap = densitymap;\r\n    return densitymap;\r\n  }\r\n\r\n  /**\r\n   * Calculates the bins from the (x,y) dataset using bin weighing\r\n   * Will assign a set of (x,y) to the 4 neighbouring bins according to its exact position\r\n   * @memberof SerieDensityMap\r\n   * @param {Number} fromX - The first x element to consider\r\n   * @param {Number} deltaX - The x spacing between two bins\r\n   * @param {Number} numX - The number of x bins\r\n   * @param {Number} fromY - The first y element to consider\r\n   * @param {Number} deltaY - The y spacing between two bins\r\n   * @param {Number} numY - The number of y bins\r\n   * @return {Array} The generated density map\r\n   * @see SerieDensityMap#autoBins\r\n   * @see SerieDensityMap#autoColorMapBinBoundaries\r\n   * @see SerieDensityMap#setPxPerBin\r\n   */\r\n  calculateDensityWeighted( fromX, deltaX, numX, fromY, deltaY, numY ) {\r\n\r\n    var densitymap = [],\r\n      i,\r\n      l = this.data.length,\r\n      indexX, indexY;\r\n\r\n    var binMin = Number.POSITIVE_INFINITY;\r\n    var binMax = Number.NEGATIVE_INFINITY;\r\n\r\n    var compX, compY;\r\n    var exactX, exactY;\r\n    var indexXLow, indexXHigh, indexYLow, indexYHigh;\r\n\r\n    for ( i = 0; i < l; i++ ) {\r\n      exactX = ( ( this.data[ i ][ 0 ] - fromX ) / deltaX ) - 0.5;\r\n      exactY = ( ( this.data[ i ][ 1 ] - fromY ) / deltaY ) - 0.5;\r\n\r\n      indexX = Math.floor( exactX );\r\n      indexY = Math.floor( exactY );\r\n\r\n      indexXLow = indexX; //Math.floor( exactX );\r\n      indexYLow = indexY; //Math.floor( exactY );\r\n\r\n      indexXHigh = indexX + 1; //Math.ceil( exactX );\r\n      indexYHigh = indexY + 1; //Math.ceil( exactY );\r\n\r\n      compX = ( 1 - ( exactX - indexX ) );\r\n      compY = ( 1 - ( exactY - indexY ) );\r\n\r\n      if ( indexX > numX || indexY > numY || indexX < 0 || indexY < 0 ) {\r\n        continue;\r\n      }\r\n\r\n      densitymap[ indexXLow ] = densitymap[ indexXLow ] || [];\r\n      densitymap[ indexXHigh ] = densitymap[ indexXHigh ] || [];\r\n\r\n      densitymap[ indexXLow ][ indexYLow ] = densitymap[ indexXLow ][ indexYLow ] || 0;\r\n      densitymap[ indexXHigh ][ indexYLow ] = densitymap[ indexXHigh ][ indexYLow ] || 0;\r\n      densitymap[ indexXLow ][ indexYHigh ] = densitymap[ indexXLow ][ indexYHigh ] || 0;\r\n      densitymap[ indexXHigh ][ indexYHigh ] = densitymap[ indexXHigh ][ indexYHigh ] || 0;\r\n\r\n      densitymap[ indexXLow ][ indexYLow ] += compX * compY;\r\n      densitymap[ indexXHigh ][ indexYLow ] += ( 1 - compX ) * compY;\r\n      densitymap[ indexXLow ][ indexYHigh ] += compX * ( 1 - compY );\r\n      densitymap[ indexXHigh ][ indexYHigh ] += ( 1 - compX ) * ( 1 - compY );\r\n\r\n      // A loop would be nicer, but would it be faster ?\r\n      binMin = densitymap[ indexXLow ][ indexYLow ] < binMin ? densitymap[ indexXLow ][ indexYLow ] : binMin;\r\n      binMax = densitymap[ indexXLow ][ indexYLow ] > binMax ? densitymap[ indexXLow ][ indexYLow ] : binMax;\r\n      binMin = densitymap[ indexXHigh ][ indexYLow ] < binMin ? densitymap[ indexXHigh ][ indexYLow ] : binMin;\r\n      binMax = densitymap[ indexXHigh ][ indexYLow ] > binMax ? densitymap[ indexXHigh ][ indexYLow ] : binMax;\r\n      binMin = densitymap[ indexXLow ][ indexYHigh ] < binMin ? densitymap[ indexXLow ][ indexYHigh ] : binMin;\r\n      binMax = densitymap[ indexXLow ][ indexYHigh ] > binMax ? densitymap[ indexXLow ][ indexYHigh ] : binMax;\r\n      binMin = densitymap[ indexXHigh ][ indexYHigh ] < binMin ? densitymap[ indexXHigh ][ indexYHigh ] : binMin;\r\n      binMax = densitymap[ indexXHigh ][ indexYHigh ] > binMax ? densitymap[ indexXHigh ][ indexYHigh ] : binMax;\r\n\r\n      //binMax = Math.max( binMax, densitymap[ indexX ][ indexY ] );\r\n    }\r\n\r\n    this.maxIndexX = numX;\r\n    this.maxIndexY = numY;\r\n\r\n    this.binMin = binMin;\r\n    this.binMax = binMax;\r\n\r\n    this.deltaX = deltaX;\r\n    this.deltaY = deltaY;\r\n\r\n    this.fromX = fromX;\r\n    this.fromY = fromY;\r\n\r\n    this.numX = numX;\r\n    this.numY = numY;\r\n\r\n    this.densitymap = densitymap;\r\n    return densitymap;\r\n  }\r\n\r\n  /**\r\n   * Calculates the density map based on the minimum and maximum values found in the data array\r\n   * @memberof SerieDensityMap\r\n   * @param {Number} [ numX = 400 ] - The number of x bins\r\n   * @param {Number} [ numY = numX ] - The number of y bins\r\n   * @return {SerieDensityMap} The current instance\r\n   * @see SerieDensityMap#calculateDensity\r\n   */\r\n  autoBins( numX, numY ) {\r\n\r\n    this.numX = numX || 400;\r\n    this.numY = numY || this.numX;\r\n\r\n    this.calculateDensity(\r\n      this.minX, ( this.maxX - this.minX ) / numX, numX,\r\n      this.minY, ( this.maxY - this.minY ) / numY, numY\r\n    );\r\n\r\n    this.recalculateBinsOnDraw = false;\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Only calculates the density map upon redraw based on the current state of the graph. In this mode, a fixed number of pixels per bin is used to calculate the number of bins and fed into\r\n   * the calculation of the density map. In this method, the color map spans on the full scale of the density map values (i.e. a subrange cannot be defined, like you would do using {@link SerieDensityMap#setColorMapBinBoundaries}).\r\n   * @memberof SerieDensityMap\r\n   * @param {Number} pxPerBinX - The number of x bins per pixels. Should be an integer, but technically it doesn't have to\r\n   * @param {Number} pxPerBinY - The number of y bins per pixels. Should be an integer, but technically it doesn't have to\r\n   * @param {Boolean} weightedDensityMap - Whether jsGraph should use weighted density mapping or not\r\n   * @return {SerieDensityMap} The current instance\r\n   * @see SerieDensityMap#calculateDensity\r\n   */\r\n  setPxPerBin( pxPerBinX, pxPerBinY, weightedDensityMap ) {\r\n\r\n    if ( pxPerBinX ) {\r\n      this.calculationDensityMap( {\r\n        from: 'min',\r\n        to: 'max',\r\n        pxPerBin: pxPerBinX,\r\n        weighted: weightedDensityMap\r\n      } );\r\n    }\r\n\r\n    if ( pxPerBinY ) {\r\n      this.calculationDensityMap( false, {\r\n        from: 'min',\r\n        to: 'max',\r\n        pxPerBin: pxPerBinY,\r\n        weighted: weightedDensityMap\r\n      } );\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Sets bins in the ```x``` or ```y``` direction based on a from value, a to value and a number of bins.\r\n   * @memberof SerieDensityMap\r\n   * @param {String} mode - ```x``` or ```y```\r\n   * @param {Number} from - The from value of the bin for the calculation with ```calculateDensityMap```\r\n   * @param {Number} to - The to value\r\n   * @param {Number} num - The number of bins\r\n   * @return {SerieDensityMap} The current instance\r\n   * @see SerieDensityMap#calculateDensity\r\n   */\r\n  setBinsFromTo( mode, from, to, num ) {\r\n\r\n    this.densityMapCalculation = this.densityMapCalculation || {};\r\n\r\n    this.densityMapCalculation[ mode ] = {\r\n      from: from,\r\n      to: to,\r\n      numBins: num\r\n    };\r\n    this.calculationDensityMap();\r\n    return this;\r\n  }\r\n\r\n  calculationDensityMap( x, y ) {\r\n\r\n    this.method = this.calculateDensityAdvanced;\r\n    this.densityMapCalculation = this.densityMapCalculation || {};\r\n\r\n    if ( x ) {\r\n      this.densityMapCalculation.x = x;\r\n    }\r\n\r\n    if ( y ) {\r\n      this.densityMapCalculation.y = y;\r\n    }\r\n  }\r\n\r\n  calculateDensityAdvanced() {\r\n\r\n    var results = {\r\n      x: {\r\n        from: 0,\r\n        num: 0,\r\n        delta: 0,\r\n        weighing: false\r\n      },\r\n\r\n      y: {\r\n        from: 0,\r\n        num: 0,\r\n        delta: 0,\r\n        weighing: false\r\n      }\r\n    };\r\n\r\n    var widthValues = {\r\n      x: this.graph.drawingSpaceWidth,\r\n      y: this.graph.drawingSpaceHeight\r\n    };\r\n    var axisGetter = {\r\n      x: this.getXAxis,\r\n      y: this.getYAxis\r\n    };\r\n\r\n    var weighing = false;\r\n\r\n    for ( var i in this.densityMapCalculation ) {\r\n\r\n      if ( this.densityMapCalculation[ i ].weighted ) {\r\n        weighing = true;\r\n        results[ i ].weighing = true;\r\n      }\r\n\r\n      if ( this.densityMapCalculation[ i ].pxPerBin ) {\r\n\r\n        // In value\r\n\r\n        var from = ( this.densityMapCalculation[ i ].from == 'min' ) ? axisGetter[ i ].call( this ).getCurrentMin() : this.densityMapCalculation[ i ].from;\r\n        var to = this.densityMapCalculation[ i ].to == 'max' ? axisGetter[ i ].call( this ).getCurrentMax() : this.densityMapCalculation[ i ].to;\r\n\r\n        // In px\r\n        var dimension = Math.abs( axisGetter[ i ].call( this ).getRelPx( to - from ) );\r\n        results[ i ].num = Math.ceil( widthValues[ i ] / this.densityMapCalculation[ i ].pxPerBin );\r\n\r\n        results[ i ].from = from - Math.abs( axisGetter[ i ].call( this ).getRelVal( ( ( results[ i ].num ) * this.densityMapCalculation[ i ].pxPerBin - dimension ) / 2 ) );\r\n        results[ i ].delta = Math.abs( axisGetter[ i ].call( this ).getRelVal( this.densityMapCalculation[ i ].pxPerBin ) );\r\n\r\n      } else {\r\n\r\n        results[ i ].num = this.densityMapCalculation[ i ].numBins || 400;\r\n        results[ i ].from = ( this.densityMapCalculation[ i ].from == 'min' ) ? axisGetter[ i ].call( this ).getCurrentMin() : this.densityMapCalculation[ i ].from;\r\n        results[ i ].delta = ( this.densityMapCalculation[ i ].to ) ? ( ( this.densityMapCalculation[ i ].to == 'max' ? axisGetter[ i ].call( this ).getCurrentMax() : this.densityMapCalculation[ i ].to ) - results[ i ].from ) / ( results[ i ].num ) : this.densityMapCalculate[ i ].delta;\r\n\r\n      }\r\n\r\n    }\r\n\r\n    ( weighing ? this.calculateDensityWeighted : this.calculateDensity ).call( this,\r\n      results.x.from, results.x.delta, results.x.num,\r\n      results.y.from, results.y.delta, results.y.num\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Selects a subrange of bins for the color mapping. There is no need to recalculate the color map after calling this method\r\n   * @memberof SerieDensityMap\r\n   * @param {Number} binMin - The minimum bin value\r\n   * @param {Number} binMax - The maximum bin value\r\n   * @return {SerieDensityMap} The current instance\r\n   * @example // In this case, all bins with values below binMin * 2 (the middle scale) will be rendered with the first color of the color map\r\n   * serie.setColorMapBinBoundaries( serie.binMin * 2, serie.binMax );\r\n   */\r\n  setColorMapBinBoundaries( min, max, _internal ) {\r\n    this.colorMapMin = min;\r\n    this.colorMapMax = max;\r\n\r\n    if ( !_internal ) {\r\n      // If the method is called externally, the bins must be fixed and not automatically scaled when the draw method is invoked.\r\n      this.callbackColorMapMinMax = 'manual';\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Calls {@link SerieDensityMap#setColorMapBinBoundaries} using the minimum and maximum bin values calculated by {@link SerieDensityMap#calculateDensity}. This function must be called, since colorMinMap and colorMaxMap are not set automatically when the density map is calculated.\r\n   * @memberof SerieDensityMap\r\n   * @param {Number} binMin - The minimum bin value\r\n   * @param {Number} binMax - The maximum bin value\r\n   * @return {SerieDensityMap} The current instance\r\n   */\r\n  autoColorMapBinBoundaries() {\r\n    this.colorMapMin = this.binMin;\r\n    this.colorMapMax = this.binMax;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Allows the use of a callback to determine the color map min and max value just before the density map is redrawn. This is very useful when the density map is recalculate before redraw, such as in the case where bins per pixels are used\r\n   * @memberof SerieDensityMap\r\n   * @param {(String|Function)} callback - The callback function to call. Should return an array with two elements ```[ colorMapMin, colorMapMax ]```. This parameter can also take the value ```auto```, in which case ```autoColorMapBinBoundaries``` will be called before redraw\r\n   * @return {SerieDensityMap} The current instance\r\n   */\r\n  onRedrawColorMapBinBoundaries( callback ) {\r\n    this.callbackColorMapMinMax = callback;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Generates a color map based on a serie of HSL(A) values.\r\n   * @summary Colors can scale linearly, logarithmically (enhances short range differences) or exponentially (enhances long range differences).\r\n   * One word of advice though. SVG being not canvas, jsGraph has to create a path for each color value of the color map. In other words, if you're asking for 16-bit coloring (65536 values), 65536 SVG paths will be created and your browser will start to suffer from it.\r\n   * As of now, all the colors in colorStops will be places at equal distances from each other between <code>colorMapMin</code> and <code>colorMapMax</code> set by {@link autoColorMapBinBoundaries} or {@link setColorMapBinBoundaries}\r\n   * @memberof SerieDensityMap\r\n   * @param {Array<Object>} colorStops - An array of objects, each having the following format: <code>{ h: [ 0-360], s: 0-1, l: 0-1, a: 0-1}</code>\r\n   * @param {Number} numColors - The number of colors to compute.\r\n   * @param {String} [ method = \"linear\" ] - The method to use to calculate the density map: <code>linear</code>, <code>exp</code>, or <code>log</code>\r\n   * @return {SerieDensityMap} The current instance\r\n   */\r\n  colorMapHSL( colorStops, numColors, method ) {\r\n\r\n    method = method || 'linear';\r\n\r\n    var methods = {\r\n      'exp': function( value ) {\r\n        return ( Math.exp( value / numColors * 1 ) - Math.exp( 0 ) ) / ( Math.exp( 1 ) - Math.exp( 0 ) );\r\n      },\r\n      'log': function( value ) {\r\n        return ( Math.log( value + 1 ) - Math.log( 1 ) ) / ( Math.log( numColors + 1 ) - Math.log( 1 ) );\r\n      },\r\n      'linear': function( value ) {\r\n        return ( value - 0 ) / ( numColors - 0 );\r\n      }\r\n    };\r\n\r\n    var k = 0,\r\n      colorMap = [],\r\n      opacities = [];\r\n\r\n    var color = {\r\n      h: null,\r\n      s: null,\r\n      l: null,\r\n      a: null\r\n    };\r\n\r\n    var ratio, first;\r\n\r\n    var slices = colorStops.length - 1;\r\n\r\n    for ( var i = 0; i <= numColors; i++ ) {\r\n\r\n      ratio = methods[ method ]( i );\r\n\r\n      first = Math.floor( ratio * slices );\r\n\r\n      if ( first == colorStops.length - 1 ) { // Handle 1\r\n        first = slices - 1;\r\n      }\r\n\r\n      ratio = ( ratio - first / ( slices ) ) / ( 1 / ( slices ) );\r\n\r\n      for ( var j in color ) {\r\n        color[ j ] = ( colorStops[ first + 1 ][ j ] - colorStops[ first ][ j ] ) * ratio + colorStops[ first ][ j ];\r\n      }\r\n\r\n      colorMap[ k ] = `hsl(${ color.h }, ${ Math.round( color.s * 100 ) }%, ${ Math.round( color.l * 100 ) }%)`; //this.HSVtoRGB( color.h, color.s, color.v );\r\n      opacities[ k ] = color.a;\r\n      k++;\r\n    }\r\n\r\n    this.opacities = opacities;\r\n    this.colorMap = colorMap;\r\n    this.colorMapNum = numColors;\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Calls {@link SerieDensityMap#colorMapHSV} using 100 colors.\r\n   * @memberof SerieDensityMap\r\n   * @param {Array<Object>} colorStops - An array of objects, each having the following format: <code>{ h: [ 0-360], s: 0-1, l: 0-1, a: 0-1}</code>\r\n   * @param {String} [ method = \"linear\" ] - The method to use to calculate the density map: <code>linear</code>, <code>exp</code> or <code>log</code>\r\n   * @return {SerieDensityMap} The current instance\r\n   */\r\n  autoColorMapHSL( colorStops, method = 'linear' ) {\r\n    this.colorMapHSL( colorStops, 100, method );\r\n    return this;\r\n  }\r\n\r\n  /*  byteToHex( b ) {\r\n        return hexChar[ ( b >> 4 ) & 0x0f ] + hexChar[ b & 0x0f ];\r\n      }\r\n      */\r\n  /*\r\n    HSVtoRGB( h, s, v ) {\r\n      var r, g, b, i, f, p, q, t;\r\n      if ( arguments.length === 1 ) {\r\n        s = h.s, v = h.v, h = h.h;\r\n      }\r\n      i = Math.floor( h * 6 );\r\n      f = h * 6 - i;\r\n      p = v * ( 1 - s );\r\n      q = v * ( 1 - f * s );\r\n      t = v * ( 1 - ( 1 - f ) * s );\r\n      switch ( i % 6 ) {\r\n        case 0:\r\n          r = v, g = t, b = p;\r\n          break;\r\n        case 1:\r\n          r = q, g = v, b = p;\r\n          break;\r\n        case 2:\r\n          r = p, g = v, b = t;\r\n          break;\r\n        case 3:\r\n          r = p, g = q, b = v;\r\n          break;\r\n        case 4:\r\n          r = t, g = p, b = v;\r\n          break;\r\n        case 5:\r\n          r = v, g = p, b = q;\r\n          break;\r\n      }\r\n      return \"#\" + this.byteToHex( Math.floor( r * 255 ) ) + this.byteToHex( Math.floor( g * 255 ) ) + this.byteToHex( Math.floor( b * 255 ) );\r\n    }\r\n  */\r\n\r\n  /**\r\n   * Returns the color index (```[ 0 - 1 ]```) for a certain value, based on colorMapMin and colorMapMax.\r\n   * @memberof SerieDensityMap\r\n   * @param {Number} binValue - The value of the bin\r\n   * @return {Number} The color index\r\n   */\r\n  getColorIndex( binValue ) {\r\n\r\n    return Math.max( 0, Math.min( this.colorMapNum, Math.floor( ( binValue - this.colorMapMin ) / ( this.colorMapMax - this.colorMapMin ) * this.colorMapNum ) ) );\r\n  }\r\n\r\n  /**\r\n   * Draws the serie\r\n   * @memberof SerieDensityMap\r\n   * @private\r\n   */\r\n  draw() {\r\n\r\n    var colorIndex;\r\n\r\n    if ( this.method ) {\r\n      this.method();\r\n    }\r\n\r\n    if ( !this.callbackColorMapMinMax || this.colorMapMin == undefined || this.colorMapMax == undefined || this.callbackColorMapMinMax == 'auto' ) {\r\n\r\n      this.autoColorMapBinBoundaries();\r\n\r\n    } else if ( typeof this.callbackColorMapMinMax == 'function' ) {\r\n\r\n      var val = this.callbackColorMapMinMax( this.binMin, this.binMax );\r\n      this.setColorMapBinBoundaries( val[ 0 ], val[ 1 ], true );\r\n    }\r\n\r\n    var deltaXPx = this.getXAxis().getRelPx( this.deltaX ),\r\n      deltaYPx = this.getYAxis().getRelPx( this.deltaY );\r\n\r\n    for ( var i = 0; i < this.paths.length; i++ ) {\r\n      this.paths[ i ] = '';\r\n    }\r\n\r\n    for ( var i = 0; i < this.maxIndexX; i++ ) {\r\n\r\n      for ( var j = 0; j < this.maxIndexY; j++ ) {\r\n\r\n        if ( this.densitymap[ i ] == undefined || this.densitymap[ i ][ j ] == undefined ) {\r\n          continue;\r\n        }\r\n\r\n        colorIndex = this.getColorIndex( this.densitymap[ i ][ j ] );\r\n        if ( !this.paths[ colorIndex ] ) {\r\n          this.paths[ colorIndex ] = '';\r\n        }\r\n\r\n        this.paths[ colorIndex ] += ` M ${ this.getXAxis().getPx( i * this.deltaX + this.fromX ) } ${ this.getYAxis().getPx( j * this.deltaY + this.fromY ) } h ${ deltaXPx } v ${ deltaYPx } h -${ deltaXPx } z`;\r\n\r\n      }\r\n    }\r\n    /*\r\n        this.maxIndexX = indexX;\r\n        this.maxIndexY = indexY;*/\r\n\r\n    this.drawRects();\r\n  }\r\n\r\n  /**\r\n   * Draws the rectangles\r\n   * @memberof SerieDensityMap\r\n   * @private\r\n   */\r\n  drawRects() {\r\n\r\n    for ( var i = 0; i < this.paths.length; i++ ) {\r\n\r\n      if ( !this.rects[ i ] ) {\r\n        this.rects[ i ] = document.createElementNS( this.graph.ns, 'path' );\r\n        this.rects[ i ].setAttribute( 'shape-rendering', 'crispEdges' );\r\n\r\n      }\r\n\r\n      if ( this.paths[ i ] !== undefined ) {\r\n        this.rects[ i ].setAttribute( 'd', this.paths[ i ] );\r\n        this.rects[ i ].setAttribute( 'fill', this.colorMap[ i ] );\r\n        this.rects[ i ].setAttribute( 'fill-opacity', this.opacities[ i ] );\r\n      }\r\n      this.groupMain.appendChild( this.rects[ i ] );\r\n    }\r\n\r\n  }\r\n\r\n  /**\r\n   * Sets the options of the serie\r\n   * @see SerieDensityMapDefaultOptions\r\n   * @param {Object} options - A object containing the options to set\r\n   * @return {SerieDensityMap} The current serie\r\n   * @memberof SerieDensityMap\r\n   */\r\n  setOptions( options ) {\r\n    this.options = util.extend( true, {}, this.defaults(), ( options || {} ) );\r\n    // Unselected style\r\n\r\n    return this;\r\n  }\r\n}\r\n\r\nexport default SerieDensityMap;","import * as util from '../graph.util.js';\r\n\r\nimport SerieLine from './graph.serie.line.js';\r\n\r\n/**\r\n * Constructor for the contour serie. Do not use this constructor directly, but use the {@link Graph#newSerie} method\r\n * @private\r\n * @extends Serie\r\n * @example graph.newSerie( name, options, \"contour\" );\r\n * @see Graph#newSerie\r\n */\r\nclass SerieContour extends SerieLine {\r\n\r\n  constructor( graph, name, options ) {\r\n    super( ...arguments );\r\n\r\n    this.negativeDelta = 0;\r\n    this.positiveDelta = 0;\r\n\r\n    this.negativeThreshold = 0;\r\n    this.positiveThreshold = 0;\r\n\r\n    this.groupMain.setAttribute( 'clip-path', `url(#_clipplot${ graph._creation })` );\r\n  }\r\n\r\n  /**\r\n   * Sets the contour lines\r\n   * @memberof SerieContour.prototype\r\n   * @param {Object} data - The object data\r\n   * @param {Number} data.minX - The minimum x value\r\n   * @param {Number} data.maxX - The maximum x value\r\n   * @param {Number} data.minY - The minimum y value\r\n   * @param {Number} data.maxY - The maximum y value\r\n   * @param {Object[]} data.segments - The segments making up the contour lines\r\n   * @param {Number[]} data.segments.lines - An array of alternating (x1,y1,x2,y2) quadruplet\r\n   * @param {Number} data.segments.zValue - The corresponding z-value of this array\r\n   * @return {Serie} The current serie\r\n   */\r\n  setData( data, arg, type ) {\r\n\r\n    var z = 0;\r\n    var x, dx, arg = arg || '2D',\r\n      type = type || 'float',\r\n      i, l = data.length,\r\n      j, k,\r\n      arr, datas = [];\r\n\r\n    if ( !( data instanceof Array ) ) {\r\n\r\n      if ( typeof data == 'object' ) {\r\n        // Def v2\r\n        this.minX = data.minX;\r\n        this.minY = data.minY;\r\n        this.maxX = data.maxX;\r\n        this.maxY = data.maxY;\r\n\r\n        data = data.segments;\r\n        l = data.length;\r\n      }\r\n    }\r\n\r\n    for ( i = 0; i < l; i++ ) {\r\n      k = data[ i ].lines.length;\r\n      arr = this._addData( type, k );\r\n\r\n      for ( j = 0; j < k; j += 2 ) {\r\n\r\n        arr[ j ] = data[ i ].lines[ j ];\r\n        this._checkX( arr[ j ] );\r\n        arr[ j + 1 ] = data[ i ].lines[ j + 1 ];\r\n        this._checkY( arr[ j + 1 ] );\r\n      }\r\n\r\n      datas.push( {\r\n        lines: arr,\r\n        zValue: data[ i ].zValue\r\n      } );\r\n    }\r\n    this.data = datas;\r\n    this.graph.updateDataMinMaxAxes();\r\n\r\n    this.dataHasChanged( true );\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Draws the serie if the data has changed\r\n   * @memberof SerieContour.prototype\r\n   * @param {Boolean} force - Forces redraw even if the data hasn't changed\r\n   * @return {Serie} The current serie\r\n   */\r\n  draw( force ) {\r\n\r\n    if ( force || this.hasDataChanged() ) {\r\n\r\n      this.currentLine = 0;\r\n      var x, y, xpx, ypx, xpx2, ypx2, i = 0,\r\n        l = this.data.length,\r\n        j = 0,\r\n        k, m, currentLine, domLine, arr;\r\n      this.minZ = Infinity;\r\n      this.maxZ = -Infinity;\r\n\r\n      var next = this.groupLines.nextSibling;\r\n      this.groupMain.removeChild( this.groupLines );\r\n      this.zValues = {};\r\n\r\n      var incrXFlip = 0;\r\n      var incrYFlip = 1;\r\n      if ( this.getFlip() ) {\r\n        incrXFlip = 0;\r\n        incrYFlip = 1;\r\n      }\r\n\r\n      var minY = this.getYAxis().getCurrentMin();\r\n      var minX = this.getXAxis().getCurrentMin();\r\n\r\n      var maxX = this.getXAxis().getCurrentMax();\r\n      var maxY = this.getYAxis().getCurrentMax();\r\n\r\n      this.counter = 0;\r\n      this.currentLineId = 0;\r\n\r\n      for ( ; i < l; i++ ) {\r\n        this.currentLine = '';\r\n        j = 0;\r\n        k = 0;\r\n\r\n        for ( arr = this.data[ i ].lines, m = arr.length; j < m; j += 4 ) {\r\n\r\n          var lastxpx, lastypx;\r\n\r\n          if ( ( arr[ j + incrXFlip ] < minX && arr[ j + 2 + incrXFlip ] < minX ) || ( arr[ j + incrYFlip ] < minY && arr[ j + 2 + incrYFlip ] < minY ) || ( arr[ j + incrYFlip ] > maxY && arr[ j + 2 + incrYFlip ] > maxY || ( arr[ j + incrXFlip ] > maxX && arr[ j + 2 + incrXFlip ] > maxX ) ) ) {\r\n            continue;\r\n          }\r\n\r\n          xpx2 = this.getX( arr[ j + incrXFlip ] );\r\n          ypx2 = this.getY( arr[ j + incrYFlip ] );\r\n\r\n          xpx = this.getX( arr[ j + 2 + incrXFlip ] );\r\n          ypx = this.getY( arr[ j + 2 + incrYFlip ] );\r\n\r\n          if ( xpx == xpx2 && ypx == ypx2 ) {\r\n            continue;\r\n          }\r\n\r\n          /*\tif( j > 0 && ( lastxpx !== undefined && lastypx !== undefined && Math.abs( xpx2 - lastxpx ) <= 30 && Math.abs( ypx2 - lastypx ) <= 30 ) ) {\r\n  \t\t\t\t\t\tcurrentLine += \"L\";\r\n  \t\t\t\t\t} else {\r\n  \t\t\t\t\t\tcurrentLine += \"M\";\r\n  \t\t\t\t\t}\r\n  */\r\n\r\n          this.currentLine += 'M ';\r\n          this.currentLine += xpx2;\r\n          this.currentLine += ' ';\r\n          this.currentLine += ypx2;\r\n\r\n          this.currentLine += 'L ';\r\n          this.currentLine += xpx;\r\n          this.currentLine += ' ';\r\n          this.currentLine += ypx;\r\n\r\n          this.counter++;\r\n\r\n          lastxpx = xpx;\r\n          lastypx = ypx;\r\n\r\n          k++;\r\n        }\r\n\r\n        this.currentLine += ' z';\r\n\r\n        domLine = this._createLine();\r\n        domLine.setAttribute( 'data-zvalue', this.data[ i ].zValue );\r\n\r\n        this.zValues[ this.data[ i ].zValue ] = {\r\n          dom: domLine\r\n        };\r\n\r\n        this.minZ = Math.min( this.minZ, this.data[ i ].zValue );\r\n        this.maxZ = Math.max( this.maxZ, this.data[ i ].zValue );\r\n      }\r\n\r\n      i++;\r\n\r\n      for ( i = this.currentLine + 1; i < this.lines.length; i++ ) {\r\n        this.groupLines.removeChild( this.lines[ i ] );\r\n        this.lines.splice( i, 1 );\r\n      }\r\n\r\n      i = 0;\r\n\r\n      for ( ; i < l; i++ ) {\r\n        this.setColorTo( this.lines[ i ], this.data[ i ].zValue, this.minZ, this.maxZ );\r\n      }\r\n\r\n      this.onMouseWheel( 0, {\r\n        shiftKey: false\r\n      } );\r\n      this.groupMain.insertBefore( this.groupLines, next );\r\n\r\n    } else if ( this.hasStyleChanged( this.selectionType ) ) {\r\n\r\n      for ( ; i < l; i++ ) {\r\n        this.setColorTo( this.lines[ i ], this.data[ i ].zValue, this.minZ, this.maxZ );\r\n      }\r\n\r\n    }\r\n\r\n  }\r\n\r\n  onMouseWheel( delta, e, fixed, positive ) {\r\n\r\n    delta /= 250;\r\n\r\n    if ( fixed !== undefined ) {\r\n\r\n      if ( !positive ) {\r\n        this.negativeThreshold = -fixed * this.minZ;\r\n        this.negativeDelta = -Math.pow( Math.abs( ( this.negativeThreshold / ( -this.minZ ) ) ), 1 / 3 );\r\n      }\r\n\r\n      if ( positive ) {\r\n        this.positiveThreshold = fixed * this.maxZ;\r\n        this.positiveDelta = Math.pow( this.positiveThreshold / ( this.maxZ ), 1 / 3 );\r\n      }\r\n\r\n    } else {\r\n\r\n      if ( ( !e.shiftKey ) || !this.options.hasNegative ) {\r\n\r\n        this.positiveDelta = Math.min( 1, Math.max( 0, this.positiveDelta + Math.min( 0.1, Math.max( -0.1, delta ) ) ) );\r\n        this.positiveThreshold = this.maxZ * ( Math.pow( this.positiveDelta, 3 ) );\r\n\r\n      } else {\r\n\r\n        this.negativeDelta = Math.min( 0, Math.max( -1, this.negativeDelta + Math.min( 0.1, Math.max( -0.1, delta ) ) ) );\r\n        this.negativeThreshold = -this.minZ * ( Math.pow( this.negativeDelta, 3 ) );\r\n\r\n      }\r\n\r\n    }\r\n\r\n    if ( isNaN( this.positiveDelta ) ) {\r\n      this.positiveDelta = 0;\r\n    }\r\n\r\n    if ( isNaN( this.negativeDelta ) ) {\r\n      this.negativeDelta = 0;\r\n    }\r\n\r\n    for ( var i in this.zValues ) {\r\n\r\n      this.zValues[ i ].dom.setAttribute( 'display', ( ( i >= 0 && i >= this.positiveThreshold ) || ( i <= 0 && i <= this.negativeThreshold ) ) ? 'block' : 'none' );\r\n\r\n    }\r\n\r\n    if ( this._shapeZoom ) {\r\n\r\n      if ( !this.options.hasNegative ) {\r\n        this._shapeZoom.hideHandleNeg();\r\n      } else {\r\n\r\n        this._shapeZoom.setHandleNeg( -( Math.pow( this.negativeDelta, 3 ) ), this.minZ );\r\n        this._shapeZoom.showHandleNeg();\r\n      }\r\n\r\n      this._shapeZoom.setHandlePos( ( Math.pow( this.positiveDelta, 3 ) ), this.maxZ );\r\n    }\r\n  }\r\n\r\n  handleMouseMove( xValue, doMarker, yValue ) {\r\n\r\n    var valX = xValue || this.getXAxis().getMouseVal(),\r\n      valY = yValue || this.getYAxis().getMouseVal();\r\n\r\n    return {\r\n      trueX: valX,\r\n      interpolatedY: valY,\r\n      xClosest: valX,\r\n      yClosest: valY\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Sets rainbow colors based on hsl format\r\n   * @memberof SerieContour.prototype\r\n   * @param {Object} colors\r\n   * @param {Object} colors.fromPositive\r\n   * @param {Number} colors.fromPositive.h\r\n   * @param {Number} colors.fromPositive.s\r\n   * @param {Number} colors.fromPositive.l\r\n\r\n   * @param {Object} colors.toPositive\r\n   * @param {Number} colors.toPositive.h\r\n   * @param {Number} colors.toPositive.s\r\n   * @param {Number} colors.toPositive.l\r\n\r\n\r\n   * @param {Object} colors.fromNegative\r\n   * @param {Number} colors.fromNegative.h\r\n   * @param {Number} colors.fromNegative.s\r\n   * @param {Number} colors.fromNegative.l\r\n\r\n\r\n   * @param {Object} colors.toNegative\r\n   * @param {Number} colors.toNegative.h\r\n   * @param {Number} colors.toNegative.s\r\n   * @param {Number} colors.toNegative.l\r\n   * @return {Serie} The current serie\r\n   */\r\n  setDynamicColor( colors ) {\r\n    this.lineColors = colors;\r\n\r\n    this.styleHasChanged();\r\n  }\r\n\r\n  setNegative( bln ) {\r\n    this.options.hasNegative = bln;\r\n\r\n    if ( bln ) {\r\n      this.negativeThreshold = 0;\r\n    }\r\n  }\r\n\r\n  setColorTo( line, zValue, min, max ) {\r\n\r\n    if ( !this.lineColors ) {\r\n      return;\r\n    }\r\n\r\n    var hsl = {\r\n      h: 0,\r\n      s: 0,\r\n      l: 0\r\n    };\r\n\r\n    for ( var i in hsl ) {\r\n\r\n      if ( zValue > 0 ) {\r\n        hsl[ i ] = this.lineColors.fromPositive[ i ] + ( ( this.lineColors.toPositive[ i ] - this.lineColors.fromPositive[ i ] ) * ( zValue / max ) );\r\n      } else {\r\n        hsl[ i ] = this.lineColors.fromNegative[ i ] + ( ( this.lineColors.toNegative[ i ] - this.lineColors.fromNegative[ i ] ) * ( zValue / min ) );\r\n      }\r\n    }\r\n\r\n    hsl.h /= 360;\r\n\r\n    var rgb = util.hslToRgb( hsl.h, hsl.s, hsl.l );\r\n\r\n    line.setAttribute( 'stroke', `rgb(${ rgb.join() })` );\r\n  }\r\n\r\n  getSymbolForLegend() {\r\n\r\n    if ( !this.lineForLegend ) {\r\n\r\n      var line = document.createElementNS( this.graph.ns, 'ellipse' );\r\n\r\n      line.setAttribute( 'cx', 7 );\r\n      line.setAttribute( 'cy', 0 );\r\n      line.setAttribute( 'rx', 8 );\r\n      line.setAttribute( 'ry', 3 );\r\n\r\n      line.setAttribute( 'cursor', 'pointer' );\r\n      this.lineForLegend = line;\r\n\r\n    }\r\n\r\n    this.applyLineStyle( this.lineForLegend, this.maxZ );\r\n\r\n    return this.lineForLegend;\r\n  }\r\n\r\n  applyLineStyle( line, overwriteValue ) {\r\n    line.setAttribute( 'stroke', this.getLineColor() );\r\n    line.setAttribute( 'stroke-width', this.getLineWidth() + ( this.isSelected() ? 2 : 0 ) );\r\n    if ( this.getLineDashArray() ) {\r\n      line.setAttribute( 'stroke-dasharray', this.getLineDashArray() );\r\n    }\r\n    line.setAttribute( 'fill', 'none' );\r\n\r\n    this.setColorTo( line, ( ( overwriteValue !== undefined ) ? overwriteValue : line.getAttribute( 'data-zvalue' ) ), this.minZ, this.maxZ );\r\n    //  line.setAttribute('shape-rendering', 'optimizeSpeed');\r\n\r\n    this.hasStyleChanged( false );\r\n  }\r\n\r\n  setShapeZoom( shape ) {\r\n    this._shapeZoom = shape;\r\n  }\r\n\r\n}\r\n\r\nexport default SerieContour;","import GraphPosition from '../graph.position.js';\r\nimport * as util from '../graph.util.js';\r\nimport EventEmitter from '../dependencies/eventEmitter/EventEmitter.js';\r\n\r\n/**\r\n * Shape class that should be extended\r\n * @class Shape\r\n * @static\r\n */\r\nclass Shape extends EventEmitter {\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  /**\r\n   * Initializes the shape\r\n   * @param {Graph} graph - The graph containing the shape\r\n   * @param {Object} properties - The properties object (not copied)\r\n   * @return {Shape} The current shape\r\n   */\r\n  init( graph, properties, simplified = false ) {\r\n    var self = this;\r\n\r\n    this.graph = graph;\r\n    this.properties = properties || {};\r\n    this.handles = [];\r\n    this.options = this.options || {};\r\n\r\n    if ( !simplified ) {\r\n      this.group = document.createElementNS( this.graph.ns, 'g' );\r\n      this.group.setAttribute( 'clip-path', `url(#_clipplot${graph._creation})` );\r\n      this.group.jsGraphIsShape = this;\r\n    }\r\n\r\n    this.simplified = simplified;\r\n\r\n    this._selected = false;\r\n    this.createDom();\r\n\r\n    if ( this._dom ) {\r\n      this._dom.jsGraphIsShape = this;\r\n    }\r\n\r\n    this.classes = [];\r\n    this.transforms = [];\r\n\r\n    if ( this._data.masker ) {\r\n      var maskPath = document.createElementNS( this.graph.ns, 'mask' );\r\n      this.maskingId = Math.random();\r\n      maskPath.setAttribute( 'id', this.maskingId );\r\n\r\n      this.maskDomWrapper = document.createElementNS( this.graph.ns, 'rect' );\r\n      this.maskDomWrapper.setAttribute( 'fill', 'white' );\r\n      maskPath.appendChild( this.maskDomWrapper );\r\n\r\n      var maskDom = this._dom.cloneNode();\r\n      maskPath.appendChild( maskDom );\r\n\r\n      this.maskDom = maskDom;\r\n\r\n      this.graph.defs.appendChild( maskPath );\r\n    }\r\n\r\n    if ( this.group ) {\r\n      if ( this._dom && !this.isHTML() ) {\r\n        this.group.appendChild( this._dom );\r\n      }\r\n    }\r\n\r\n    let dom;\r\n    if ( simplified ) {\r\n      dom = this._dom;\r\n    } else {\r\n      dom = this.group;\r\n    }\r\n\r\n    dom.addEventListener( 'mouseover', function( e ) {\r\n      self.handleMouseOver( e );\r\n    } );\r\n\r\n    dom.addEventListener( 'mouseout', function( e ) {\r\n      self.handleMouseOut( e );\r\n    } );\r\n\r\n    dom.addEventListener( 'mousedown', function( e ) {\r\n      self.graph.focus();\r\n\r\n      self.handleMouseDown( e );\r\n    } );\r\n\r\n    dom.addEventListener( 'click', this.handleClick.bind( this ) );\r\n\r\n    dom.addEventListener( 'dblclick', function( e ) {\r\n      //e.preventDefault();\r\n      // e.stopPropagation();\r\n\r\n      self.handleDblClick( e );\r\n    } );\r\n\r\n    //\t\t\tthis.group.appendChild(this.rectEvent);\r\n\r\n    this.initImpl();\r\n\r\n    this.graph.emit( 'shapeNew', this );\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Implentation of the init method. To be extended if necessary on extended Shape classes\r\n   */\r\n  initImpl() {}\r\n\r\n  /**\r\n   * @return {Object} The shape's underlying data object\r\n   */\r\n  getData() {\r\n    return this._data;\r\n  }\r\n\r\n  /**\r\n   * @returns {String} The type of the shape\r\n   */\r\n  getType() {\r\n    return this.type;\r\n  }\r\n\r\n  /**\r\n   * Removes the shape from the DOM and unlinks it from the graph\r\n   */\r\n  kill( keepDom ) {\r\n    if ( this._inDom && !keepDom ) {\r\n      this.graph.removeShapeFromDom( this );\r\n    }\r\n\r\n    if ( !keepDom ) {\r\n      this.graph._removeShape( this );\r\n    }\r\n\r\n    this.graph.stopElementMoving( this );\r\n    this.graph.emit( 'shapeRemoved', this );\r\n    this.emit( 'removed', this );\r\n\r\n    this._inDom = false;\r\n  }\r\n\r\n  /**\r\n   * Hides the shape\r\n   * @return {Shape} The current shape\r\n   */\r\n  hide() {\r\n    if ( this.hidden ) {\r\n      return this;\r\n    }\r\n\r\n    this.hidden = true;\r\n    if ( !this.isHTML() && !this.simplified ) {\r\n      this.group.style.display = 'none';\r\n    } else {\r\n      this._dom.style.display = 'none';\r\n    }\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   *  Returns whether the shape is hidden or not\r\n   *  @return {Boolean} true if the shape is hidden, false otherwise\r\n   */\r\n  isHidden() {\r\n    return this.hidden;\r\n  }\r\n\r\n  /**\r\n   *  Returns whether the shape is visible or not\r\n   *  @return {Boolean} true if the shape is visible, false if it is hidden\r\n   */\r\n  isVisible() {\r\n    return !this.hidden;\r\n  }\r\n\r\n  /**\r\n   * Shows the shape\r\n   * @return {Shape} The current shape\r\n   */\r\n  show() {\r\n    if ( !this.hidden ) {\r\n      return this;\r\n    }\r\n\r\n    this.hidden = false;\r\n    if ( !this.isHTML() ) {\r\n      this.group.style.display = 'initial';\r\n    } else {\r\n      this._dom.style.display = 'initial';\r\n    }\r\n\r\n    this.redraw();\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Adds a class to the shape DOM\r\n   * @param {String} className - The class to add\r\n   * @return {Shape} The current shape\r\n   */\r\n  addClass( className ) {\r\n    this.classes = this.classes || [];\r\n    if ( this.classes.indexOf( className ) == -1 ) {\r\n      this.classes.push( className );\r\n    }\r\n    this.makeClasses();\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Removes a class from the shape DOM\r\n   * @param {String} className - The class to remove\r\n   * @return {Shape} The current shape\r\n   */\r\n  removeClass( className ) {\r\n    this.classes.splice( this.classes.indexOf( className ), 1 );\r\n    this.makeClasses();\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Builds the classes\r\n   * @private\r\n   * @return {Shape} The current shape\r\n   */\r\n  makeClasses() {\r\n    if ( this._dom ) {\r\n      this._dom.setAttribute( 'class', this.classes.join( ' ' ) );\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Triggers a ```shapeChanged``` event on the graph and a ```changed``` event on the shape\r\n   * @return {Shape} The current shape\r\n   */\r\n  changed( event, parameters ) {\r\n    if ( event ) {\r\n      this.graph.emit( event, this, parameters );\r\n      this.emit( event, this, parameters );\r\n    }\r\n\r\n    this.emit( 'changed', this, parameters );\r\n    this.graph.emit( 'shapeChanged', this, parameters );\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Creates an event receptacle with the coordinates of the shape bounding box\r\n   * @return {Shape} The current shape\r\n   */\r\n  setEventReceptacle() {\r\n\r\n    if ( this, simplified ) {\r\n      return;\r\n    }\r\n\r\n    if ( !this.rectEvent ) {\r\n      this.rectEvent = document.createElementNS( this.graph.ns, 'rect' );\r\n      this.rectEvent.setAttribute( 'pointer-events', 'fill' );\r\n      this.rectEvent.setAttribute( 'fill', 'transparent' );\r\n      this.group.appendChild( this.rectEvent );\r\n      this.rectEvent.jsGraphIsShape = this;\r\n    }\r\n\r\n    var box = this.group.getBBox();\r\n    this.rectEvent.setAttribute( 'x', box.x );\r\n    this.rectEvent.setAttribute( 'y', box.y - 10 );\r\n    this.rectEvent.setAttribute( 'width', box.width );\r\n    this.rectEvent.setAttribute( 'height', box.height + 20 );\r\n  }\r\n\r\n  /**\r\n   * Assigns a serie to the shape\r\n   * @param {Serie} The serie that owns the shape\r\n   * @return {Shape} The current shape\r\n   */\r\n  setSerie( serie ) {\r\n    if ( !serie ) {\r\n      return;\r\n    }\r\n\r\n    this.serie = serie;\r\n\r\n    if ( !serie.getXAxis || !serie.getYAxis ) {\r\n      console.error( serie );\r\n      throw 'Serie does not implement the getXAxis or getYAxis method';\r\n    }\r\n    this.xAxis = serie.getXAxis();\r\n    this.yAxis = serie.getYAxis();\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * @return {Serie} The serie associated to the shape\r\n   */\r\n  getSerie() {\r\n    return this.serie;\r\n  }\r\n\r\n  /**\r\n   * Assigns the shape to the default x and y axes of the graph, only if they don't exist yet\r\n   * @return {Shape} The current shape\r\n   * @see Graph#getXAxis\r\n   * @see Graph#getYAxis\r\n   */\r\n  autoAxes() {\r\n    if ( !this.xAxis ) {\r\n      this.xAxis = this.graph.getXAxis();\r\n    }\r\n\r\n    if ( !this.yAxis ) {\r\n      this.yAxis = this.graph.getYAxis();\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Assigns the shape to an x axis\r\n   * @param {XAxis} The X axis related to the shape\r\n   * @return {Shape} The current shape\r\n   */\r\n  setXAxis( axis ) {\r\n    this.xAxis = axis;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Assigns the shape to an y axis\r\n   * @param {YAxis} The Y axis related to the shape\r\n   * @return {Shape} The current shape\r\n   */\r\n  setYAxis( axis ) {\r\n    this.yAxis = axis;\r\n  }\r\n\r\n  /**\r\n   * Returns the x axis associated to the shape. If non-existent, assigns it automatically\r\n   * @return {XAxis} The x axis associated to the shape.\r\n   */\r\n  getXAxis() {\r\n    if ( !this.xAxis ) {\r\n      this.autoAxes();\r\n    }\r\n\r\n    return this.xAxis;\r\n  }\r\n\r\n  /**\r\n   * Returns the y axis associated to the shape. If non-existent, assigns it automatically\r\n   * @return {YAxis} The y axis associated to the shape.\r\n   */\r\n  getYAxis() {\r\n    if ( !this.yAxis ) {\r\n      this.autoAxes();\r\n    }\r\n\r\n    return this.yAxis;\r\n  }\r\n\r\n  /**\r\n   * Sets the layer of the shape\r\n   * @param {Number} layer - The layer number (1 being the lowest)\r\n   * @return {Shape} The current shape\r\n   * @see Shape#getLayer\r\n   */\r\n  setLayer( layer ) {\r\n    this.setProp( 'layer', layer );\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Returns the layer on which the shape is placed\r\n   * @return {Number} The layer number (1 being the lowest layer)\r\n   */\r\n  getLayer() {\r\n    var layer = this.getProp( 'layer' );\r\n\r\n    if ( layer !== undefined ) {\r\n      return layer;\r\n    }\r\n\r\n    return 1;\r\n  }\r\n\r\n  /**\r\n   * Initial drawing of the shape. Adds it to the DOM and creates the labels. If the shape was already in the DOM, the method simply recreates the labels and reapplies the shape style, unless ```force``` is set to ```true```\r\n   * @param {Boolean} force - Forces adding the shape to the DOM (useful if the shape has changed layer)\r\n   * @param {Boolean} preventRedraw - Prevents the redraw method\r\n   * @return {Shape} The current shape\r\n   */\r\n  draw( force, preventRedraw ) {\r\n    if ( !this._inDom || force ) {\r\n      this.appendToDom();\r\n      this._inDom = true;\r\n    }\r\n\r\n    this.makeLabels();\r\n\r\n    if ( !preventRedraw ) {\r\n      this.redraw();\r\n    }\r\n\r\n    this.applyStyle();\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Redraws the shape. Repositions it, applies the style and updates the labels\r\n   * @return {Shape} The current shape\r\n   */\r\n  redraw() {\r\n    if ( this.hidden ) {\r\n      return this;\r\n    }\r\n\r\n    this.position = this.applyPosition();\r\n\r\n    this.redrawImpl();\r\n    if ( !this.position ) {\r\n      this.updateLabels();\r\n      return this;\r\n    }\r\n\r\n    this.updateLabels();\r\n    this._applyTransforms();\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Implementation of the redraw method. Extended Shape classes should override this method\r\n   */\r\n  redrawImpl() {}\r\n\r\n  /**\r\n   * Sets all dumpable properties of the shape\r\n   * @param {Object} properties - The properties object\r\n   * @return {Shape} The current shape\r\n   */\r\n  setProperties( properties ) {\r\n    this.properties = properties;\r\n\r\n    if ( !Array.isArray( this.properties.position ) ) {\r\n      this.properties.position = [ this.properties.position ];\r\n    }\r\n    var self = this;\r\n    for ( var i = 0, l = this.properties.position.length; i < l; i++ ) {\r\n      var pos = GraphPosition.check( this.properties.position[ i ], function(\r\n        relativeTo\r\n      ) {\r\n        return self.getRelativePosition( relativeTo );\r\n      } );\r\n\r\n      this.properties.position[ i ] = pos;\r\n    }\r\n\r\n    this.emit( 'propertiesChanged' );\r\n    return this;\r\n  }\r\n\r\n  getRelativePosition( relativePosition ) {\r\n    var result;\r\n    if ( ( result = /position([0-9]*)/.exec( relativePosition ) ) !== null ) {\r\n      return this.getPosition( result[ 1 ] );\r\n    } else if (\r\n      ( result = /labelPosition([0-9]*)/.exec( relativePosition ) ) !== null\r\n    ) {\r\n      return this.getLabelPosition( result[ 1 ] );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Gets all dumpable properties of the shape\r\n   * @return {Object} properties - The properties object\r\n   */\r\n  getProperties( properties ) {\r\n    return this.properties;\r\n  }\r\n\r\n  /**\r\n   * Sets a property to the shape that is remembered and can be later reexported (or maybe reimported)\r\n   * @param {String} prop - The property to save\r\n   * @param val - The value to save\r\n   * @param [ index = 0 ] - The index of the property array to save the property\r\n   * @return {Shape} The current shape\r\n   */\r\n  setProp( prop, val, index ) {\r\n    this.properties = this.properties || {};\r\n    this.properties[ prop ] = this.properties[ prop ] || [];\r\n    this.properties[ prop ][ index || 0 ] = val;\r\n    this.emit( 'propertyChanged', prop );\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Returns a property of the shape\r\n   * @param {String} prop - The property to retrieve\r\n   * @param [ index = 0 ] - The index of the property array\r\n   */\r\n  getProp( prop, index ) {\r\n    if ( !Array.isArray( this.properties[ prop ] || [] ) ) {\r\n      return this.properties[ prop ];\r\n    }\r\n    return ( this.properties[ prop ] || [] )[ index || 0 ];\r\n  }\r\n\r\n  /**\r\n   * Returns all the properties of the shape\r\n   * @param {String} prop - The property to retrieve\r\n   */\r\n  getProps( prop, index ) {\r\n    return this.properties[ prop ] || [];\r\n  }\r\n\r\n  /**\r\n   * Adds a property to the property array\r\n   * @param {String} prop - The property to add\r\n   * @param val - The value to save\r\n   */\r\n  addProp( prop, value ) {\r\n    this.properties[ prop ] = this.properties[ prop ] || [];\r\n    this.properties[ prop ].push( value );\r\n  }\r\n\r\n  /**\r\n   * Resets the property array\r\n   * @param {String} prop - The property to reset\r\n   */\r\n  resetProp( prop ) {\r\n    this.properties[ prop ] = [];\r\n  }\r\n\r\n  /**\r\n   * Sets a DOM property to the shape\r\n   */\r\n  setDom( prop, val, noForce ) {\r\n    if ( this._dom ) {\r\n      if ( !noForce || !util.hasSavedAttribute( this._dom, prop ) ) {\r\n        this._dom.setAttribute( prop, val );\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Sets a DOM property to the shape group\r\n   */\r\n  setDomGroup( prop, val ) {\r\n\r\n    if ( this.simplified ) {\r\n      this._dom.setAttribute( prop, val );\r\n    } else if ( this.group ) {\r\n      this.group.setAttribute( prop, val );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Saves the stroke color\r\n   * @return {Shape} The current shape\r\n   */\r\n  setStrokeColor( color ) {\r\n    this.setProp( 'strokeColor', color );\r\n    this.overwriteSavedProp( 'stroke', color );\r\n    this.applySelectedStyle();\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Returns the stroke color\r\n   * @return {String} The stroke color of the shape\r\n   */\r\n  getStrokeColor() {\r\n    return this.getProp( 'strokeColor' );\r\n  }\r\n\r\n  /**\r\n   * Saves the fill color\r\n   * @param {String} color - The filling color\r\n   * @return {Shape} The current shape\r\n   */\r\n  setFillColor( color ) {\r\n    this.setProp( 'fillColor', color );\r\n    this.overwriteSavedProp( 'fill', color );\r\n    this.applySelectedStyle();\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Returns the fill color\r\n   * @return {String} The fill color of the shape\r\n   */\r\n  getFillColor() {\r\n    return this.getProp( 'fillColor' );\r\n  }\r\n\r\n  /**\r\n   * Saves the opacity of the filling color of the shape\r\n   * @param {Number} opacity - The filling opacity (0 to 1)\r\n   * @return {Shape} The current shape\r\n   */\r\n  setFillOpacity( opacity ) {\r\n    this.setProp( 'fillOpacity', opacity );\r\n    this.overwriteSavedProp( 'fill-opacity', opacity );\r\n    this.applySelectedStyle();\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Saves the stroke width\r\n   * @param {String} width - The stroke width\r\n   * @return {Shape} The current shape\r\n   */\r\n  setStrokeWidth( width ) {\r\n    this.setProp( 'strokeWidth', width );\r\n    this.overwriteSavedProp( 'stroke-width', width );\r\n    this.applySelectedStyle();\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Returns the stroke width\r\n   * @return {String} The stroke width of the shape\r\n   */\r\n  getStrokeWidth() {\r\n    return this.getProp( 'strokeWidth' );\r\n  }\r\n\r\n  /**\r\n   * Saves the stroke dash array\r\n   * @param {String} dasharray - The dasharray string\r\n   * @example shape.setStrokeDasharray(\"5,5,1,4\");\r\n   * shape.applyStyle();\r\n   * @return {Shape} The current shape\r\n   */\r\n  setStrokeDasharray( dasharray ) {\r\n    this.setProp( 'strokeDasharray', dasharray );\r\n    this.overwriteSavedProp( 'stroke-dasharray', dasharray );\r\n    this.applySelectedStyle();\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Sets any extra attributes to the DOM element of the shape\r\n   * @param {Object<String,String>} attributes - An extra attribute array to apply to the shape DOM\r\n   * @example shape.setAttributes( { \"data-bindable\" : true } );\r\n   * shape.applyStyle();\r\n   * @return {Shape} The current shape\r\n   */\r\n  setAttributes( attributes ) {\r\n    this.setProp( 'attributes', attributes );\r\n    return this;\r\n  }\r\n\r\n  overwriteSavedProp( prop, newValue ) {\r\n    util.overwriteDomAttribute( this._dom, prop, newValue );\r\n  }\r\n\r\n  /**\r\n   * Adds an extra attribute to the shape\r\n   * @param {String} attributeName - The name of the attribute\r\n   * @param {String} attributeValue - The value of the attribute\r\n   * @return {Shape} The current shape\r\n   */\r\n  addAttribute( attributeName, attributeValue ) {\r\n    var added = {};\r\n    added[ attributeName ] = attributeValue;\r\n    this.addProp( 'attributes', added );\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Adds a transform property to the shape.\r\n   * @param {String} type - The transform type (\"rotate\", \"transform\" or \"scale\")\r\n   * @param {String} args - The arguments following the transform\r\n   * @return {Shape} The current shape\r\n   */\r\n  addTransform( type, args ) {\r\n    this.addProp( 'transforms', {\r\n      type: type,\r\n      arguments: Array.isArray( args ) ? args : [ args ]\r\n    } );\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Resets the transforms\r\n   * @see Shape#addTransform\r\n   * @return {Shape} The current shape\r\n   */\r\n  resetTransforms() {\r\n    this.resetProp( 'transforms' );\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Sets the text of the label\r\n   * @param {String} text - The text of the label\r\n   * @param {Number} [ index = 0 ] - The index of the label\r\n   * @return {Shape} The current shape\r\n   */\r\n  setLabelText( text, index = 0 ) {\r\n    this.setProp( 'labelText', text, index );\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Sets the text of the label\r\n   * @param {String} data - Some additional HTML tags that will be set to the label\r\n   * @param {Number} [ index = 0 ] - The index of the label\r\n   * @return {Shape} The current shape\r\n   */\r\n  setLabelData( data, text, index = 0 ) {\r\n    this.setProp( 'labelData', text, index );\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Returns the text of the label\r\n   * @param {Number} [ index = 0 ] - The index of the label\r\n   * @return {String} The text of the label\r\n   */\r\n  getLabelText( text, index = 0 ) {\r\n    return this.getProp( 'labelText', index );\r\n  }\r\n\r\n  /**\r\n   * Displays a hidden label\r\n   * @param {Number} [ index = 0 ] - The index of the label\r\n   * @return {Shape} The current shape\r\n   */\r\n  displayLabel( index = 0 ) {\r\n    this.setProp( 'labelVisible', true, index );\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Hides a displayed label\r\n   * @param {Number} [ index = 0 ] - The index of the label\r\n   * @return {Shape} The current shape\r\n   */\r\n  hideLabel( index = 0 ) {\r\n    this.setProp( 'labelVisible', false, index );\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Sets the color of the label\r\n   * @param {String} color - The color of the label\r\n   * @param {Number} [ index = 0 ] - The index of the label\r\n   * @return {Shape} The current shape\r\n   */\r\n  setLabelColor( color, index = 0 ) {\r\n    this.setProp( 'labelColor', color, index );\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Sets the font size of the label\r\n   * @param {String} size - The font size (in px) of the label\r\n   * @param {Number} [ index = 0 ] - The index of the label\r\n   * @return {Shape} The current shape\r\n   */\r\n  setLabelFontSize( size, index = 0 ) {\r\n    this.setProp( 'labelFontSize', size, index );\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Returns the position of the label\r\n   * @param {Number} [ index = 0 ] - The index of the label\r\n   * @return {Position} The current position of the label\r\n   */\r\n  getLabelPosition( index = 0 ) {\r\n    return this.getProp( 'labelPosition', index );\r\n  }\r\n\r\n  /**\r\n   * Sets the position of the label\r\n   * @param {Position} position - The position of the label\r\n   * @param {Number} [ index = 0 ] - The index of the label\r\n   * @return {Shape} The current shape\r\n   */\r\n  setLabelPosition( position, index ) {\r\n    var self;\r\n    var pos = GraphPosition.check( position, function( relativeTo ) {\r\n      return self.getRelativePosition( relativeTo );\r\n    } );\r\n\r\n    this.setProp( 'labelPosition', pos, index || 0 );\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Sets the angle of the label\r\n   * @param {Number} angle - The angle of the label in degrees (0 to 360°)\r\n   * @param {Number} [ index = 0 ] - The index of the label\r\n   * @return {Shape} The current shape\r\n   */\r\n  setLabelAngle( angle, index ) {\r\n    this.setProp( 'labelAngle', angle, index || 0 );\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Sets the baseline of the label, which affects its y position with respect to the text direction. For text along the x direction, different baselines will reference differently the text to the ```y``` coordinate.\r\n   * @param {String} baseline - The baseline of the label. Most common baselines are ```no-change```, ```central```, ```middle``` and ```hanging```. You will find an explanation of those significations on the [corresponding MDN article]{@link https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/dominant-baseline}\r\n   * @param {Number} [ index = 0 ] - The index of the label\r\n   * @return {Shape} The current shape\r\n   */\r\n  setLabelBaseline( baseline, index ) {\r\n    this.setProp( 'labelBaseline', baseline, index || 0 );\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Sets the anchoring of the label.\r\n   * @param {String} anchor - The anchor of the label. Values can be ```start```, ```middle```, ```end``` or ```inherit```.\r\n   * @param {Number} [ index = 0 ] - The index of the label\r\n   * @return {Shape} The current shape\r\n   */\r\n  setLabelAnchor( anchor, index ) {\r\n    this.setProp( 'labelAnchor', anchor, index || 0 );\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Sets the anchoring of the label.\r\n   * @param {String} size - The font size in px\r\n   * @param {Number} [ index = 0 ] - The index of the label\r\n   * @return {Shape} The current shape\r\n   */\r\n  setLabelSize( size, index ) {\r\n    this.setProp( 'labelSize', size, index || 0 );\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Sets the color of the stroke of the label.\r\n   * @param {String} color - The color of the stroke\r\n   * @param {Number} [ index = 0 ] - The index of the label\r\n   * @return {Shape} The current shape\r\n   */\r\n  setLabelStrokeColor( color, index ) {\r\n    this.setProp( 'labelStrokeColor', color, index || 0 );\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Sets the width of the stroke of the label.\r\n   * @param {Number} width - The width of the stroke\r\n   * @param {Number} [ index = 0 ] - The index of the label\r\n   * @return {Shape} The current shape\r\n   */\r\n  setLabelStrokeWidth( width, index ) {\r\n    this.setProp( 'labelStrokeWidth', width, index || 0 );\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Sets the color of the background of the label.\r\n   * @param {String} color - The color of the background\r\n   * @param {Number} [ index = 0 ] - The index of the label\r\n   * @return {Shape} The current shape\r\n   */\r\n  setLabelBackgroundColor( color, index ) {\r\n    this.setProp( 'labelBackgroundColor', color, index || 0 );\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Sets the opacity of the background of the label.\r\n   * @param {Number} opacity - The opacity of the background, between 0 and 1\r\n   * @param {Number} [ index = 0 ] - The index of the label\r\n   * @return {Shape} The current shape\r\n   */\r\n  setLabelBackgroundOpacity( opacity, index ) {\r\n    this.setProp( 'labelBackgroundOpacity', opacity, index || 0 );\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Applies the generic style to the shape. This is a method that applies to most shapes, hence should not be overridden. However if you create a bundle of shapes that extend another one, you may use it to set common style properties to all your shapes.\r\n   * @return {Shape} The current shape\r\n   */\r\n  applyGenericStyle() {\r\n    this.setDom( 'fill', this.getProp( 'fillColor' ), true );\r\n    this.setDom( 'fill-opacity', this.getProp( 'fillOpacity' ), true );\r\n    this.setDom( 'stroke', this.getProp( 'strokeColor' ), true );\r\n    this.setDom( 'stroke-width', this.getProp( 'strokeWidth' ), true );\r\n    this.setDom( 'stroke-dasharray', this.getProp( 'strokeDasharray' ), true );\r\n\r\n    var attributes = this.getProps( 'attributes' );\r\n    for ( var j = 0, l = attributes.length; j < l; j++ ) {\r\n      for ( var i in attributes[ j ] ) {\r\n        this.setDom(\r\n          i,\r\n          typeof attributes[ j ][ i ] == 'function' ?\r\n          attributes[ j ][ i ].call( this, i ) :\r\n          attributes[ j ][ i ],\r\n          true\r\n        );\r\n      }\r\n    }\r\n\r\n    this._applyTransforms();\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Applies the style to the shape. This method can be extended to apply specific style to the shapes\r\n   * @return {Shape} The current shape\r\n   */\r\n  applyStyle() {\r\n    return this.applyGenericStyle();\r\n  }\r\n\r\n  /**\r\n   * Returns a computed position object\r\n   * @param {(Number|Position)} [ index = 0 ] - The index of the position to compute\r\n   * @param {Position} relToPosition - A base position from which to compute the position (useful for <code>dx</code> values)\r\n   * @return {Object} The computed position object in the format <code>{ x: x_in_px, y: y_in_px }</code>\r\n   */\r\n  calculatePosition( index ) {\r\n    var position;\r\n\r\n    position = index instanceof GraphPosition ? index : this.getPosition( index );\r\n\r\n    if ( !position ) {\r\n      return;\r\n    }\r\n\r\n    if ( position && position.compute ) {\r\n      return position.compute(\r\n        this.graph,\r\n        this.getXAxis(),\r\n        this.getYAxis(),\r\n        this.getSerie()\r\n      );\r\n    }\r\n\r\n    this.graph.throw();\r\n  }\r\n\r\n  /**\r\n   * Returns a stored position object\r\n   * @param {Number} [ index = 0 ] - The index of the position to compute\r\n   * @return {Position} The position at the proper index, or undefined\r\n   */\r\n  getPosition( index ) {\r\n    var pos = this.getProp( 'position', index || 0 );\r\n    this.setProp( 'position', ( pos = GraphPosition.check( pos ) ), index );\r\n    return pos;\r\n  }\r\n\r\n  /**\r\n   * Sets a position object\r\n   * @param {Position} position - The position object to store\r\n   * @param {Number} [ index = 0 ] - The index of the position to store\r\n   * @return {Shape} The current shape\r\n   */\r\n  setPosition( position, index ) {\r\n    var self = this;\r\n    var pos = GraphPosition.check( position, function( relativeTo ) {\r\n      return self.getRelativePosition( relativeTo );\r\n    } );\r\n\r\n    return this.setProp( 'position', pos, index || 0 );\r\n  }\r\n\r\n  /**\r\n   * Sorts the positions\r\n   * @param {Function} sortFunction - Function passed into the ```Array.sort``` method\r\n   * @return {Position} The current shape\r\n   */\r\n  sortPositions( sortFunction ) {\r\n    this.getProps( 'position' ).sort( sortFunction );\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Applies the style to the shape. This method can be extended to apply specific style to the shapes\r\n   * @private\r\n   * @return {Shape} The current shape\r\n   */\r\n  _applyTransforms() {\r\n    var transforms = this.getProps( 'transforms' ),\r\n      transformString = '';\r\n\r\n    if ( !transforms ) {\r\n      return;\r\n    }\r\n    transforms = Array.isArray( transforms ) ? transforms : [ transforms ];\r\n\r\n    if ( transforms.length == 0 ) {\r\n      return;\r\n    }\r\n\r\n    for ( var i = 0; i < transforms.length; i++ ) {\r\n      transformString += `${transforms[i].type}(`;\r\n\r\n      let transform;\r\n      switch ( transforms[ i ].type ) {\r\n        case 'translate':\r\n          if ( transforms[ i ].arguments ) {\r\n            transform = transforms[ i ].arguments[ 0 ].compute(\r\n              this.graph,\r\n              this.getXAxis(),\r\n              this.getYAxis(),\r\n              this.getSerie()\r\n            );\r\n          } else {\r\n            const value = GraphPosition.check( transforms[ i ].value );\r\n\r\n            transform = value.compute(\r\n              this.graph,\r\n              this.getXAxis(),\r\n              this.getYAxis(),\r\n              this.getSerie()\r\n            );\r\n          }\r\n\r\n          transformString += transform.x || transform.dx || 0;\r\n          transformString += ', ';\r\n          transformString += transform.y || transform.dy || 0;\r\n\r\n          break;\r\n\r\n        case 'rotate':\r\n          if ( !transforms[ i ].arguments ) {\r\n            transformString += transforms[ i ].angle;\r\n\r\n            if ( !transforms[ i ].center ) {\r\n              var p = this.computePosition( 0 );\r\n              transformString += `, ${p.x}, ${p.y}`;\r\n            } else {\r\n              const posCenter = GraphPosition.check(\r\n                transforms[ i ].center\r\n              ).compute(\r\n                this.graph,\r\n                this.getXAxis(),\r\n                this.getYAxis(),\r\n                this.getSerie()\r\n              );\r\n\r\n              if ( posCenter.x === posCenter.x && posCenter.y === posCenter.y ) {\r\n                transformString += ', ';\r\n                transformString += posCenter.x;\r\n                transformString += ', ';\r\n                transformString += posCenter.y;\r\n\r\n              }\r\n\r\n            }\r\n          } else {\r\n            transformString += transforms[ i ].arguments[ 0 ];\r\n            transformString += ', ';\r\n\r\n            if ( transforms[ i ].arguments.length == 1 ) {\r\n              var p = this.computePosition( 0 );\r\n              transformString += `${p.x}, ${p.y}`;\r\n            } else {\r\n              transformString += GraphPosition.getDeltaPx(\r\n                transforms[ i ].arguments[ 1 ],\r\n                this.getXAxis()\r\n              ).replace( 'px', '' );\r\n              transformString += ', ';\r\n              transformString += GraphPosition.getDeltaPx(\r\n                transforms[ i ].arguments[ 2 ],\r\n                this.getYAxis()\r\n              ).replace( 'px', '' );\r\n            }\r\n          }\r\n\r\n          break;\r\n      }\r\n\r\n      transformString += ') ';\r\n    }\r\n\r\n    this.setDomGroup( 'transform', transformString );\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Creates all the labels\r\n   * @private\r\n   * @returns {Shape} The current shape\r\n   */\r\n  makeLabels() {\r\n\r\n    if ( this.simplified ) {\r\n      return;\r\n    }\r\n\r\n    this._labels = this._labels || [];\r\n    this._labelsBackground = this._labelsBackground || [];\r\n\r\n    this._labels.map( ( label ) => {\r\n      this.group.removeChild( label );\r\n    } );\r\n\r\n    this._labelsBackground.map( ( bg ) => {\r\n      this.group.removeChild( bg );\r\n    } );\r\n\r\n    this._labels = [];\r\n    this._labelsBackground[ i ] = [];\r\n\r\n    var i = 0;\r\n\r\n    while ( this.getProp( 'labelText', i ) !== undefined ) {\r\n      if ( !this._labels[ i ] ) {\r\n        this._labels[ i ] = document.createElementNS( this.graph.ns, 'text' );\r\n        this._labels[ i ].setAttribute( 'data-label-i', i );\r\n        this._labels[ i ].jsGraphIsShape = this;\r\n\r\n        this._labelsBackground[ i ] = document.createElementNS(\r\n          this.graph.ns,\r\n          'rect'\r\n        );\r\n        this._labelsBackground[ i ].setAttribute( 'data-label-i', i );\r\n        this._labelsBackground[ i ].jsGraphIsShape = this;\r\n\r\n        this.group.appendChild( this._labelsBackground[ i ] );\r\n        this.group.appendChild( this._labels[ i ] );\r\n\r\n        this._labels[ i ].addEventListener( 'dblclick', ( e ) => {\r\n          e.stopPropagation();\r\n\r\n          this.labelDblClickListener( e );\r\n        } );\r\n\r\n        this._labelsBackground[ i ].addEventListener( 'dblclick', ( e ) => {\r\n          e.stopPropagation();\r\n\r\n          this.labelDblClickListener( e );\r\n        } );\r\n      }\r\n\r\n      if ( !Array.isArray( this.getProp( 'labelText', i ) ) ) {\r\n        break;\r\n      }\r\n\r\n      i++;\r\n    }\r\n\r\n    this.updateLabels();\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Determines if the label is editable\r\n   * @param {Number} labelIndex - The index of the label\r\n   * @return {Boolean} ```true``` if the label is editable, ```false``` otherwise\r\n   */\r\n  isLabelEditable( labelIndex ) {\r\n    return this.getProp( 'labelEditable', labelIndex || 0 );\r\n  }\r\n\r\n  /**\r\n   * Applies the label data to the dom object\r\n   * @private\r\n   * @param {Number} labelIndex - The index of the label\r\n   * @returns {Shape} The current shape\r\n   */\r\n  updateLabels() {\r\n    var self = this;\r\n    this._labels = this._labels || [];\r\n\r\n    for ( var i = 0, l = this._labels.length; i < l; i++ ) {\r\n      this._applyLabelData( i );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Applies the label data to the dom object\r\n   * @private\r\n   * @param {Number} labelIndex - The index of the label\r\n   * @returns {Shape} The current shape\r\n   */\r\n  _applyLabelData( labelIndex ) {\r\n    labelIndex = labelIndex || 0;\r\n\r\n    /** Sets the position */\r\n\r\n    var visible = this.getProp( 'labelVisible', labelIndex );\r\n\r\n    if ( visible === false ) {\r\n      this._labels[ labelIndex ].setAttribute( 'display', 'none' );\r\n      this._labelsBackground[ labelIndex ].setAttribute( 'display', 'none' );\r\n      return;\r\n    } else {\r\n      this._labels[ labelIndex ].setAttribute( 'display', 'initial' );\r\n      this._labelsBackground[ labelIndex ].setAttribute( 'display', 'initial' );\r\n    }\r\n\r\n    var position = this.calculatePosition(\r\n      GraphPosition.check( this.getProp( 'labelPosition', labelIndex ) )\r\n    );\r\n\r\n    if (\r\n      isNaN( position.x ) ||\r\n      isNaN( position.y ) ||\r\n      position.y === false ||\r\n      position.x === false\r\n    ) {\r\n      /*console.warn( \"Cannot compute positioning for labelIndex \" + labelIndex + \" with text \" + this.getProp( \"labelText\", labelIndex ) );\r\n      console.log( this, this._labels );\r\n      console.trace();*/\r\n      return;\r\n    }\r\n\r\n    if (\r\n      position.x != 'NaNpx' &&\r\n      !isNaN( position.x ) &&\r\n      position.x !== 'NaN' &&\r\n      position.x !== false\r\n    ) {\r\n      this._labels[ labelIndex ].setAttribute( 'x', position.x );\r\n      this._labels[ labelIndex ].setAttribute( 'y', position.y );\r\n    }\r\n\r\n    /** Sets the angle */\r\n    var currAngle = this.getProp( 'labelAngle', labelIndex ) || 0;\r\n    if ( currAngle != 0 ) {\r\n      var x = this._labels[ labelIndex ].getAttribute( 'x' ),\r\n        y = this._labels[ labelIndex ].getAttribute( 'y' );\r\n\r\n      this._labels[ labelIndex ].setAttribute(\r\n        'transform',\r\n        `rotate(${currAngle} ${x} ${y})`\r\n      );\r\n      //  this._labelsBackground[ labelIndex ].setAttribute( 'transform', 'rotate(' + currAngle + ' ' + x + ' ' + y + ')' );\r\n    }\r\n\r\n    let labelData = this.getProp( 'labelHTMLData', labelIndex ) || {};\r\n\r\n    for ( var i in labelData ) {\r\n      this._labels[ labelIndex ].setAttribute( i, labelData[ i ] );\r\n      this._labelsBackground[ labelIndex ].setAttribute( i, labelData[ i ] );\r\n    }\r\n\r\n    /** Sets the baseline */\r\n    this._labels[ labelIndex ].setAttribute(\r\n      'dominant-baseline',\r\n      this.getProp( 'labelBaseline', labelIndex ) || 'no-change'\r\n    );\r\n\r\n    /** Sets the text */\r\n    this._labels[ labelIndex ].textContent = this.getProp(\r\n      'labelText',\r\n      labelIndex\r\n    );\r\n\r\n    /** Sets the color */\r\n    this._labels[ labelIndex ].setAttribute(\r\n      'fill',\r\n      this.getProp( 'labelColor', labelIndex ) || 'black'\r\n    );\r\n\r\n    /** Sets the size */\r\n    this._labels[ labelIndex ].setAttribute(\r\n      'font-size',\r\n      `${this.getProp( 'labelSize', labelIndex )}px` || '12px'\r\n    );\r\n\r\n    /** Sets the anchor */\r\n    this._labels[ labelIndex ].setAttribute(\r\n      'text-anchor',\r\n      this._getLabelAnchor( labelIndex )\r\n    );\r\n\r\n    /** Sets the stroke */\r\n    this._labels[ labelIndex ].setAttribute(\r\n      'stroke',\r\n      this.getProp( 'labelStrokeColor', labelIndex ) || 'black'\r\n    );\r\n\r\n    /** Sets the stroke */\r\n    this._labels[ labelIndex ].setAttribute(\r\n      'stroke-width',\r\n      this.getProp( 'labelStrokeWidth', labelIndex ) || `${0}px`\r\n    );\r\n\r\n    this._labels[ labelIndex ].setAttribute( 'stroke-location', 'outside' );\r\n\r\n    let rect = this._labels[ labelIndex ].getBBox();\r\n\r\n    this._labelsBackground[ labelIndex ].setAttribute( 'x', rect.x );\r\n    this._labelsBackground[ labelIndex ].setAttribute( 'y', rect.y );\r\n    this._labelsBackground[ labelIndex ].setAttribute( 'width', rect.width );\r\n    this._labelsBackground[ labelIndex ].setAttribute( 'height', rect.height );\r\n\r\n    this._labelsBackground[ labelIndex ].setAttribute(\r\n      'fill',\r\n      this.getProp( 'labelBackgroundColor' ) || 'transparent'\r\n    );\r\n    this._labelsBackground[ labelIndex ].setAttribute(\r\n      'fill-opacity',\r\n      this.getProp( 'labelBackgroundOpacity' ) || 1\r\n    );\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   *  Temporarily empties the labels, until the next rendering.\r\n   *  This is used when the shape should not be displayed\r\n   *  @returns {Shape} The current shape instance\r\n   */\r\n  emptyLabels() {\r\n    for ( var i = 0, l = this._labels.length; i < l; i++ ) {\r\n      /** Sets the baseline */\r\n      this._labels[ i ].textContent = '';\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Returns the anchor of the label\r\n   * @private\r\n   * @param {Number} labelIndex - The index of the label\r\n   * @returns {String} The anchor in SVG string\r\n   */\r\n  _getLabelAnchor( labelIndex ) {\r\n    var anchor = this.getProp( 'labelAnchor', labelIndex );\r\n    switch ( anchor ) {\r\n      case 'middle':\r\n      case 'start':\r\n      case 'end':\r\n        return anchor;\r\n        break;\r\n\r\n      case 'right':\r\n        return 'end';\r\n        break;\r\n\r\n      case 'left':\r\n        return 'start';\r\n        break;\r\n\r\n      default:\r\n        return 'start';\r\n        break;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Returns the shape selection status\r\n   * @returns {Boolean} true is the shape is selected, false otherwise\r\n   */\r\n  isSelected() {\r\n    return this._selectStatus || false;\r\n  }\r\n\r\n  /**\r\n   * Sets or queries whether the shape can have handles. Even if the property is set to false, the getter can return true if the property ```statichandles``` is true (used when handles never disappear)\r\n   * @param {Boolean} setter - If used, defined if the shape has handles or not\r\n   * @returns {Boolean} true is the shape has handles, false otherwise\r\n   * @example Shape.hasHandles( true ); // Sets that the shape has handles\r\n   * @example Shape.hasHandles( false ); // Sets that the shape has no handles\r\n   * @example Shape.hasHandles( ); // Queries the shape to determine if it has handles or not. Also returns true if handles are static\r\n   */\r\n  hasHandles( setter ) {\r\n    if ( setter !== undefined ) {\r\n      this.setProp( 'handles', setter );\r\n    }\r\n\r\n    return !!this.getProp( 'handles' ) || !!this.getProp( 'staticHandles' );\r\n  }\r\n\r\n  /**\r\n   * Adds shape handles\r\n   * @private\r\n   * @return {Shape} The current shape\r\n   */\r\n  addHandles() {\r\n\r\n    if ( this.simplified ) {\r\n      return;\r\n    }\r\n\r\n    if ( this.isLocked() ) {\r\n      return;\r\n    }\r\n\r\n    if ( !this.handlesInDom ) {\r\n      this.handlesInDom = true;\r\n\r\n      for ( var i = 1; i < this.handles.length; i++ ) {\r\n        if ( this.handles[ i ] ) {\r\n          this.group.appendChild( this.handles[ i ] );\r\n        }\r\n      }\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Remove shape handles\r\n   * @private\r\n   * @return {Shape} The current shape\r\n   */\r\n  removeHandles() {\r\n    this.hideHandles();\r\n    this.handles = [];\r\n  }\r\n\r\n  /**\r\n   * Hide shape handles\r\n   * @private\r\n   * @return {Shape} The current shape\r\n   */\r\n  hideHandles() {\r\n    if ( !this.handlesInDom ) {\r\n      return this;\r\n    }\r\n\r\n    if ( this.simplified ) {\r\n      return;\r\n    }\r\n\r\n    for ( var i = 1; i < this.handles.length; i++ ) {\r\n      this.group.removeChild( this.handles[ i ] );\r\n    }\r\n\r\n    this.handlesInDom = false;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * @protected\r\n   * @return {Boolean} ```true``` if the handles are in the DOM\r\n   */\r\n  areHandlesInDom() {\r\n    return this.handlesInDom;\r\n  }\r\n\r\n  /**\r\n   * Selects the shape. Should only be called from jsGraph main instance\r\n   * @private\r\n   * @param {Boolean} [ mute = false ] - Mutes the method (no event emission)\r\n   * @returns {Shape} the current shape\r\n   */\r\n  _select( mute ) {\r\n    if ( !this.isSelectable() ) {\r\n      return false;\r\n    }\r\n\r\n    // Put on the stack\r\n    this.appendToDom();\r\n    //this.graph.appendShapeToDom( this ); // Put the shape on top of the stack !\r\n\r\n    this._selectStatus = true;\r\n\r\n    this.applySelectedStyle();\r\n\r\n    if ( this.hasHandles() && !this.hasStaticHandles() ) {\r\n      this.addHandles();\r\n      this.setHandles();\r\n    }\r\n\r\n    if ( !mute ) {\r\n      this.graph.emit( 'shapeSelected', this );\r\n    }\r\n  }\r\n\r\n  applySelectedStyle() {\r\n    if ( !this._selectStatus ) {\r\n      return;\r\n    }\r\n\r\n    var style = this.getSelectStyle();\r\n    var style2 = {};\r\n    for ( var i in style ) {\r\n      if ( typeof style[ i ] == 'function' ) {\r\n        style2[ i ] = style[ i ].call( this );\r\n      } else {\r\n        style2[ i ] = style[ i ];\r\n      }\r\n    }\r\n\r\n    util.saveDomAttributes( this._dom, style2, 'select' );\r\n  }\r\n\r\n  /**\r\n   * Unselects the shape. Should only be called from jsGraph main instance\r\n   * @private\r\n   * @param {Boolean} [ mute = false ] - Mutes the method (no event emission)\r\n   * @returns {Shape} the current shape\r\n   */\r\n  _unselect( mute ) {\r\n    this._selectStatus = false;\r\n\r\n    util.restoreDomAttributes( this._dom, 'select' );\r\n\r\n    if ( this.hasHandles() && !this.hasStaticHandles() ) {\r\n      this.hideHandles();\r\n    }\r\n\r\n    if ( !mute ) {\r\n      this.graph.emit( 'shapeUnselected', this );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Returns the special style of the shape when it is selected.\r\n   * @see Shape#setSelectStyle\r\n   * @param {Object<String,String>} The SVG attributes to apply to the shape\r\n   */\r\n  getSelectStyle() {\r\n    return this.selectStyle;\r\n  }\r\n\r\n  /**\r\n   * Defines the style that is applied to the shape when it is selected. The style extends the default style of the shape\r\n   * @param {Object<String,String>} [ attr = {} ] - The SVG attributes to apply to the shape\r\n   * @example rectangle.setSelectStyle( { fill: 'red' } );\r\n   * @returns {Shape} the current shape\r\n   */\r\n  setSelectStyle( attr ) {\r\n    this.selectStyle = attr;\r\n    this.applySelectedStyle(); // Maybe the shape is already selected\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Assigns static handles to the shape. In this mode, handles will not disappear\r\n   * @param {Boolean} staticHandles - true to enable static handles, false to disable them.\r\n   * @returns {Shape} the current shape\r\n   */\r\n  setStaticHandles( staticHandles ) {\r\n    this.setProp( 'staticHandles', staticHandles );\r\n  }\r\n\r\n  /**\r\n   * @returns {Boolean} ```true``` if the shape has static handles, ```false``` otherwise\r\n   */\r\n  hasStaticHandles( staticHandles ) {\r\n    return !!this.getProp( 'staticHandles' );\r\n  }\r\n\r\n  /**\r\n   * Creates the handles for the shape\r\n   * @param {Number} nb - The number of handles\r\n   * @param {String} type - The type of SVG shape to use\r\n   * @param {Object<String,String>} [ attr = {} ] - The SVG attributes to apply to the handles\r\n   * @param {Function} [ callbackEach ] - An additional callback the user can provide to further personalize the handles\r\n   * @returns {Shape} the current shape\r\n   * @private\r\n   */\r\n  _createHandles( nb, type, attr, callbackEach ) {\r\n    if ( this.handles && this.handles.length > 0 ) {\r\n      return;\r\n    }\r\n\r\n    var self = this;\r\n\r\n    for ( var i = 1, l = nb; i <= l; i++ ) {\r\n      ( ( j ) => {\r\n        var self = this;\r\n\r\n        var handle = document.createElementNS( self.graph.ns, type );\r\n        handle.jsGraphIsShape = true;\r\n\r\n        if ( attr ) {\r\n          for ( var k in attr ) {\r\n            handle.setAttribute( k, attr[ k ] );\r\n          }\r\n        }\r\n\r\n        handle.addEventListener( 'mousedown', ( e ) => {\r\n          if ( self.isResizable() ) {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n\r\n            self.graph.emit( 'beforeShapeResize', self );\r\n            this.emit( 'beforeShapeResize' );\r\n\r\n            if ( !self.graph.prevent( false ) ) {\r\n              self.resizing = true;\r\n              self.handleSelected = j;\r\n              self.handleMouseDown( e );\r\n            }\r\n          }\r\n        } );\r\n\r\n        if ( callbackEach ) {\r\n          callbackEach( self.handles[ j ] );\r\n        }\r\n\r\n        self.handles[ j ] = handle;\r\n      } ).call( this, i );\r\n    }\r\n\r\n    return this.handles;\r\n  }\r\n\r\n  /**\r\n   * Creates the handles for the shape. Should be implemented by the children shapes classes.\r\n   */\r\n  createHandles() {\r\n    if ( this.hasStaticHandles() ) {\r\n      this.addHandles();\r\n      this.setHandles();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handles mouse down event\r\n   * @private\r\n   * @param {Event} e - The native event.prototype\r\n   */\r\n  handleMouseDownImpl() {}\r\n\r\n  /**\r\n   * Handles the mouse move event\r\n   * @private\r\n   * @param {Event} e - The native event.prototype\r\n   */\r\n  handleMouseMoveImpl() {}\r\n\r\n  /**\r\n   * Handles mouse up event\r\n   * @private\r\n   * @param {Event} e - The native event.prototype\r\n   */\r\n  handleMouseUpImpl() {}\r\n\r\n  /**\r\n   * Called when the shape is created\r\n   * @private\r\n   * @param {Event} e - The native event.prototype\r\n   */\r\n  handleCreateImpl() {}\r\n\r\n  /**\r\n   * Handles mouse down events\r\n   * @param {Event} e - The native event\r\n   * @return The result of the {@link Shape#handleMouseDownImpl} method.prototype\r\n   */\r\n  handleMouseDown( e ) {\r\n    //this.handleSelected = false;\r\n\r\n    if ( this.isLocked() ) {\r\n      return;\r\n    }\r\n\r\n    if ( this.isMovable() || this.isResizable() ) {\r\n      this.graph.elementMoving( this );\r\n    }\r\n\r\n    if ( this.getProp( 'selectOnMouseDown' ) ) {\r\n      this.graph.selectShape( this );\r\n    }\r\n\r\n    if ( this.isMovable() ) {\r\n      if ( !this.resizing ) {\r\n        this.graph.emit( 'beforeShapeMove', self );\r\n\r\n        if ( !this.graph.prevent( false ) ) {\r\n          this.moving = true;\r\n          this.moved = false;\r\n        }\r\n      }\r\n    }\r\n\r\n    this._mouseCoords = this.graph._getXY( e );\r\n    return this.handleMouseDownImpl( e, this._mouseCoords );\r\n  }\r\n\r\n  /**\r\n   * Handles mouse click events\r\n   * @param {Event} e - The native event\r\n   * @return The result of the {@link Shape#handleMouseDownClick} method\r\n   * @private\r\n   */\r\n  handleClick( e ) {\r\n    this.graph.emit( 'shapeClicked', this );\r\n    this.emit( 'shapeClicked' );\r\n\r\n    if ( !this.isSelectable() ) {\r\n      return false;\r\n    }\r\n\r\n    if ( !e.shiftKey ) {\r\n      this.graph.unselectShapes();\r\n    }\r\n\r\n    if ( this.getProp( 'selectOnClick' ) ) {\r\n      this.graph.selectShape( this );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handles mouse click events\r\n   * @param {Event} e - The native event\r\n   * @return The result of the {@link Shape#handleMouseUpImpl} method\r\n   * @private\r\n   */\r\n  handleMouseMove( e ) {\r\n    if ( ( this.resizing || this.moving ) && !this.isSelected() ) {\r\n      this.graph.selectShape( this );\r\n    }\r\n\r\n    this.graph.emit( 'beforeShapeMouseMove', this );\r\n    this.emit( 'beforeShapeMouseMove' );\r\n\r\n    if ( this.graph.prevent( false ) || !this._mouseCoords ) {\r\n      return false;\r\n    }\r\n\r\n    this.moved = true;\r\n    var coords = this.graph._getXY( e );\r\n    var deltaX = this.getXAxis().getRelVal( coords.x - this._mouseCoords.x ),\r\n      deltaY = this.getYAxis().getRelVal( coords.y - this._mouseCoords.y );\r\n\r\n    if ( deltaX != 0 || deltaY !== 0 ) {\r\n      this.preventUnselect = true;\r\n    }\r\n\r\n    this._mouseCoords = coords;\r\n\r\n    var ret = this.handleMouseMoveImpl(\r\n      e,\r\n      deltaX,\r\n      deltaY,\r\n      coords.x - this._mouseCoords.x,\r\n      coords.y - this._mouseCoords.y\r\n    );\r\n\r\n    return ret;\r\n  }\r\n\r\n  /**\r\n   * Handles mouse up events\r\n   * @param {Event} e - The native event\r\n   * @return The result of the {@link Shape#handleMouseUpImpl} method\r\n   * @private\r\n   */\r\n  handleMouseUp( e ) {\r\n    if ( this.moving && this.moved ) {\r\n      this.graph.emit( 'shapeMoved', this );\r\n      this.emit( 'shapeMoved' );\r\n    }\r\n\r\n    if ( this.handleSelected || this.resize ) {\r\n      this.graph.emit( 'shapeResized', this );\r\n      this.emit( 'shapeResized' );\r\n    }\r\n\r\n    this.moving = false;\r\n    this.resizing = false;\r\n    this.handleSelected = false;\r\n    this.graph.elementMoving( false );\r\n\r\n    return this.handleMouseUpImpl( e );\r\n  }\r\n\r\n  /**\r\n   * Handles double click events\r\n   * @param {Event} e - The native event\r\n   * @return The result of the {@link Shape#handleMouseDblClickImpl} method\r\n   * @private\r\n   */\r\n  handleDblClick( e ) {}\r\n\r\n  /**\r\n   * Handles mouse over events\r\n   * @param {Event} e - The native event\r\n   * @return The result of the {@link Shape#handleMouseOverImpl} method\r\n   * @private\r\n   */\r\n  handleMouseOver() {\r\n    if ( this.getProp( 'highlightOnMouseOver' ) ) {\r\n      if ( !this.moving && !this.resizing ) {\r\n        this.highlight();\r\n      }\r\n    }\r\n\r\n    this.graph.emit( 'shapeMouseOver', this );\r\n  }\r\n\r\n  /**\r\n   * Handles mouse out events\r\n   * @param {Event} e - The native event\r\n   * @return The result of the {@link Shape#handleMouseOutImpl} method\r\n   * @private\r\n   */\r\n  handleMouseOut() {\r\n    if ( this.getProp( 'highlightOnMouseOver' ) ) {\r\n      this.unHighlight();\r\n    }\r\n\r\n    this.graph.emit( 'shapeMouseOut', this );\r\n  }\r\n\r\n  /*\r\n   *  Updated July 1st, 2015\r\n   */\r\n\r\n  /**\r\n   * Locks the shape (prevents selection, resizing and moving)\r\n   * @return {Shape} The current shape\r\n   */\r\n  lock() {\r\n    this.setProp( 'locked', true );\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Unlocks the shape (prevents selection, resizing and moving)\r\n   * @return {Shape} The current shape\r\n   */\r\n  unlock() {\r\n    this.setProp( 'locked', false );\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * @return {Boolean} True if the shape is locked, false otherwise\r\n   */\r\n  isLocked() {\r\n    return this.getProp( 'locked' ) || this.graph.shapesLocked;\r\n  }\r\n\r\n  /**\r\n   * Makes the shape moveable\r\n   * @return {Shape} The current shape\r\n   */\r\n  movable( bln ) {\r\n    this.setProp( 'movable', true );\r\n  }\r\n\r\n  /**\r\n   * Makes the shape non-moveable\r\n   * @return {Shape} The current shape\r\n   */\r\n  unmovable() {\r\n    this.setProp( 'movable', false );\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * @return {Boolean} True if the shape is movable, false otherwise\r\n   */\r\n  isMovable() {\r\n    return this.getProp( 'movable' );\r\n  }\r\n\r\n  /**\r\n   * Makes the shape resizable\r\n   * @return {Shape} The current shape\r\n   */\r\n  resizable() {\r\n    this.setProp( 'resizable', true );\r\n  }\r\n\r\n  /**\r\n   * Makes the shape non-resizable\r\n   * @return {Shape} The current shape\r\n   */\r\n  unresizable() {\r\n    this.setProp( 'resizable', false );\r\n  }\r\n\r\n  /**\r\n   * @return {Boolean} True if the shape is resizable, false otherwise\r\n   */\r\n  isResizable() {\r\n    return this.getProp( 'resizable' );\r\n  }\r\n\r\n  /**\r\n   * Makes the shape selectable\r\n   * @return {Shape} The current shape\r\n   */\r\n  selectable() {\r\n    this.setProp( 'selectable', true );\r\n  }\r\n\r\n  /**\r\n   * Makes the shape non-selectable\r\n   * @return {Shape} The current shape\r\n   */\r\n  unselectable() {\r\n    this.graph.unselectShape( this );\r\n    this.setProp( 'selectable', false );\r\n  }\r\n\r\n  /**\r\n   * @return {Boolean} True if the shape is selectable, false otherwise\r\n   */\r\n  isSelectable() {\r\n    return this.getProp( 'selectable' );\r\n  }\r\n\r\n  /**\r\n   * Highlights the shape with attributes\r\n   * @returns {Shape} The current shape\r\n   * @param {Object<String,String>} [ attributes ] - A hashmap of attributes to apply. If omitted, {@link Shape#getHighlightAttributes} will be called\r\n   * @param {String} [ saveDomName=highlight ] - The name to which the current shape attributes will be saved to be recovered later with the {@link Shape#unHighlight} method\r\n   * @example shape.highlight( { fill: 'red', 'fill-opacity': 0.5 } );\r\n   * @see Shape#unHighlight\r\n   */\r\n  highlight( attributes, saveDomName ) {\r\n    if ( !attributes ) {\r\n      attributes = this.getHighlightAttributes();\r\n    }\r\n\r\n    if ( !saveDomName ) {\r\n      saveDomName = 'highlight';\r\n    }\r\n\r\n    util.saveDomAttributes( this._dom, attributes, saveDomName );\r\n    this.highlightImpl();\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Removes the highlight properties from the same\r\n   * @returns {Shape} The current shape\r\n   * @param {String} [ saveDomName=highlight ] - The name to which the current shape attributes will be saved to be recovered later with the {@link Shape#unHighlight} method\r\n   * @see Shape#highlight\r\n   */\r\n  unHighlight( saveDomName ) {\r\n    if ( !saveDomName ) {\r\n      saveDomName = 'highlight';\r\n    }\r\n\r\n    util.restoreDomAttributes( this._dom, saveDomName );\r\n    this.unHighlightImpl();\r\n    return this;\r\n  }\r\n\r\n  highlightImpl() {}\r\n  unHighlightImpl() {}\r\n\r\n  /**\r\n   * @returns {Object} The attributes taken by the shape when highlighted\r\n   * @see Shape#highlight\r\n   */\r\n  getHighlightAttributes() {\r\n    return this._highlightAttributes;\r\n  }\r\n\r\n  /**\r\n   * Sets the attributes the shape will take when highlighted\r\n   * @param {Object<String,String>} [ attributes ] - A hashmap of attributes to apply when the shape is highlighted\r\n   * @returns {Shape} The current shape\r\n   * @see Shape#highlight\r\n   */\r\n  setHighlightAttributes( attributes ) {\r\n    this._highlightAttributes = attributes;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Returns the masking id of the shape. Returns null if the shape does not behave as a mask\r\n   * @returns {String} The ```id``` attribute of the shape\r\n   */\r\n  getMaskingID() {\r\n    return this.maskingId;\r\n  }\r\n\r\n  /**\r\n   * Masks the current shape with another shape passed as the first parameter of the method\r\n   * @param {Shape} maskingShape - The shape used to mask the current shape\r\n   * @return {Shape} The current shape\r\n   */\r\n  maskWith( maskingShape ) {\r\n    const maskingId = maskingShape.getMaskingID();\r\n\r\n    if ( maskingId ) {\r\n      this._dom.setAttribute( 'mask', `url(#${maskingId})` );\r\n    } else {\r\n      this._dom.removeAttribute( 'mask' );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Manually updates the mask of the shape. This is needed because the shape needs to be surrounded by a white rectangle (because transparent is treated as black and will not render the shape)\r\n   * This method will work well for rectangles but should be overridden for other shapes\r\n   * @return {Shape} The current shape\r\n   * @todo Explore a way to make it compatible for all kinds of shapes. Maybe the masker position should span the whole graph...\r\n   */\r\n  updateMask() {\r\n    return;\r\n    if ( !this.maskDom ) {\r\n      return; // eslint-disable-line no-useless-return\r\n    }\r\n\r\n    var position = {\r\n      x: 'min',\r\n      y: 'min'\r\n    };\r\n    var position2 = {\r\n      x: 'max',\r\n      y: 'max'\r\n    };\r\n\r\n    position = this._getPosition( position );\r\n    position2 = this._getPosition( position2 );\r\n\r\n    this.maskDomWrapper.setAttribute( 'x', Math.min( position.x, position2.x ) );\r\n    this.maskDomWrapper.setAttribute( 'y', Math.min( position.y, position2.y ) );\r\n\r\n    this.maskDomWrapper.setAttribute(\r\n      'width',\r\n      Math.abs( position2.x - position.x )\r\n    );\r\n    this.maskDomWrapper.setAttribute(\r\n      'height',\r\n      Math.abs( position2.y - position.y )\r\n    );\r\n\r\n    for ( var i = 0; i < this._dom.attributes.length; i++ ) {\r\n      this.maskDom.setAttribute(\r\n        this._dom.attributes[ i ].name,\r\n        this._dom.attributes[ i ].value\r\n      );\r\n    }\r\n\r\n    this.maskDom.setAttribute( 'fill', 'black' );\r\n\r\n    return this;\r\n  }\r\n\r\n  labelDblClickListener( e ) {\r\n    var i = parseInt( e.target.getAttribute( 'data-label-i' ) );\r\n\r\n    var self = this;\r\n\r\n    if ( isNaN( i ) ) {\r\n      return;\r\n    }\r\n\r\n    if ( !this.isLabelEditable( i ) ) {\r\n      return;\r\n    }\r\n\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n\r\n    var shapeLabel = document.createElement( 'input' );\r\n    shapeLabel.setAttribute( 'type', 'text' );\r\n    shapeLabel.setAttribute( 'value', self.getProp( 'labelText', i ) );\r\n\r\n    self.graph.wrapper.prepend( shapeLabel );\r\n    shapeLabel.select();\r\n\r\n    util.setCSS( shapeLabel, {\r\n      position: 'absolute',\r\n      marginTop: `${parseInt( e.target.getAttribute( 'y' ).replace( 'px', '' ) ) +\r\n        this.graph.getPaddingTop() -\r\n        10}px`,\r\n      marginLeft: `${parseInt( e.target.getAttribute( 'x' ).replace( 'px', '' ) ) +\r\n        this.graph.getPaddingLeft() -\r\n        50}px`,\r\n      textAlign: 'center',\r\n      width: '100px'\r\n    } );\r\n\r\n    const previousValue = self.getLabelText( i );\r\n\r\n    const blurEvent = function() {\r\n      self.setLabelText( shapeLabel.value, i );\r\n      self._labels[ i ].textContent = shapeLabel.value;\r\n\r\n      const nextValue = shapeLabel.value;\r\n\r\n      shapeLabel.remove();\r\n      shapeLabel.removeEventListener( 'blur', blurEvent );\r\n      shapeLabel = false;\r\n\r\n      self.changed( 'shapeLabelChanged', {\r\n        previousValue: previousValue,\r\n        nextValue: nextValue\r\n      } );\r\n    };\r\n\r\n    shapeLabel.addEventListener( 'blur', blurEvent );\r\n\r\n    shapeLabel.addEventListener( 'keyup', function( e ) {\r\n      if ( e.keyCode === 13 ) {\r\n        blurEvent();\r\n      }\r\n    } );\r\n    shapeLabel.addEventListener( 'keypress', function( e ) {\r\n      e.stopPropagation();\r\n    } );\r\n    shapeLabel.addEventListener( 'keydown', function( e ) {\r\n      e.stopPropagation();\r\n    } );\r\n    shapeLabel.focus();\r\n  }\r\n\r\n  /**\r\n   * Appends the shape DOM to its parent\r\n   * @private\r\n   * @return {Shape} The current shape\r\n   */\r\n  appendToDom() {\r\n    if ( this._forcedParentDom ) {\r\n      this._forcedParentDom.appendChild( this.group );\r\n    } else {\r\n      this.graph.appendShapeToDom( this );\r\n    }\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Forces the DOM parent (instead of the normal layer)\r\n   * @return {Shape} The current shape\r\n   */\r\n  forceParentDom( dom ) {\r\n    this._forcedParentDom = dom;\r\n\r\n    return this;\r\n  }\r\n\r\n  isHTML() {\r\n    return false;\r\n  }\r\n}\r\n\r\n/**\r\n * @alias Shape#calculatePosition\r\n */\r\nShape.prototype.computePosition = Shape.prototype.calculatePosition;\r\n\r\n/**\r\n * @alias Shape#displayLabel\r\n */\r\nShape.prototype.showLabel = Shape.prototype.displayLabel;\r\n\r\n/**\r\n * @alias Shape#kill\r\n */\r\nShape.prototype.remove = Shape.prototype.kill;\r\n\r\nexport default Shape;","import Shape from './graph.shape.js';\r\n\r\n/**\r\n *  Displays a surface under a line serie\r\n *  @extends GraphShape\r\n */\r\nclass ShapeSurfaceUnderCurve extends Shape {\r\n\r\n  createDom() {\r\n    this._dom = document.createElementNS( this.graph.ns, 'path' );\r\n  }\r\n\r\n  createHandles() {\r\n\r\n    this._createHandles( 2, 'line', {\r\n      'stroke-width': '3',\r\n      'stroke': 'transparent',\r\n      'pointer-events': 'stroke',\r\n      'cursor': 'ew-resize'\r\n    } );\r\n\r\n  }\r\n\r\n  handleMouseMoveImpl( e, deltaX, deltaY ) {\r\n\r\n    if ( this.isLocked() ) {\r\n      return;\r\n    }\r\n\r\n    if ( this.moving ) {\r\n\r\n      this.getPosition( 0 ).deltaPosition( 'x', deltaX, this.getXAxis() );\r\n      this.getPosition( 1 ).deltaPosition( 'x', deltaX, this.getXAxis() );\r\n\r\n    } else if ( this.serie && this.handleSelected ) {\r\n\r\n      this.resizingPosition = this.handleSelected == 1 ? this.getPosition( 0 ) : this.getPosition( 1 );\r\n\r\n      var value = this.serie.getClosestPointToXY( this.getXAxis().getVal( this.graph._getXY( e ).x - this.graph.getPaddingLeft() ) );\r\n\r\n      if ( !value ) {\r\n        return;\r\n      }\r\n\r\n      if ( this.resizingPosition.x != value.xMin ) {\r\n        this.preventUnselect = true;\r\n      }\r\n\r\n      this.resizingPosition.x = value.xMin;\r\n\r\n    } else if ( this.handleSelected ) {\r\n\r\n      this.resizingPosition = this.handleSelected == 1 ? this.getPosition( 0 ) : this.getPosition( 1 );\r\n      this.resizingPosition.deltaPosition( 'x', deltaX, this.getXAxis() );\r\n    }\r\n\r\n    this.applyPosition();\r\n  }\r\n  /*\r\n      redrawImpl: function() {\r\n        //var doDraw = this.setPosition();\r\n        //\tthis.setDom('fill', 'url(#' + 'patternFill' + this.graph._creation + ')')\r\n\r\n        if ( this.position != this.doDraw ) {\r\n          this.group.setAttribute( \"visibility\", this.position ? \"visible\" : 'hidden' );\r\n          this.doDraw = this.position;\r\n        }\r\n      },\r\n  */\r\n  applyPosition() {\r\n\r\n    if ( !this.serie ) {\r\n      return;\r\n    }\r\n\r\n    var posXY = this.computePosition( 0 ),\r\n      posXY2 = this.computePosition( 1 ),\r\n      w = Math.abs( posXY.x - posXY2.x ),\r\n      x = Math.min( posXY.x, posXY2.x );\r\n\r\n    //  this.reversed = x == posXY2.x;\r\n\r\n    if ( w < 2 || x + w < 0 || x > this.graph.getDrawingWidth() ) {\r\n      this.setDom( 'd', '' );\r\n      return false;\r\n    }\r\n\r\n    var v1 = this.serie.getClosestPointToXY( this.getPosition( 0 ).x ),\r\n      v2 = this.serie.getClosestPointToXY( this.getPosition( 1 ).x ),\r\n      v3,\r\n      i,\r\n      j,\r\n      init,\r\n      max,\r\n      k,\r\n      x,\r\n      y,\r\n      firstX,\r\n      firstY,\r\n      currentLine,\r\n      maxY = 0,\r\n      minY = Number.MAX_VALUE;\r\n\r\n    if ( !v1 || !v2 ) {\r\n      return false;\r\n    }\r\n\r\n    if ( v1.xBeforeIndex > v2.xBeforeIndex ) {\r\n      v3 = v1;\r\n      v1 = v2;\r\n      v2 = v3;\r\n\r\n      //this.handleSelected = ( this.handleSelected == 1 ) ? 2 : 1;\r\n    }\r\n\r\n    this.counter = 0;\r\n\r\n    for ( i = v1.dataIndex; i <= v2.dataIndex; i++ ) {\r\n      this.currentLine = '';\r\n      init = i == v1.dataIndex ? v1.xBeforeIndexArr : 0;\r\n      max = i == v2.dataIndex ? v2.xBeforeIndexArr : this.serie.data[ i ].length;\r\n      k = 0;\r\n\r\n      if ( init == max ) {\r\n        max++;\r\n      }\r\n\r\n      for ( j = init; j <= max; j += 2 ) {\r\n\r\n        x = this.serie.getX( this.serie.data[ i ][ j + 0 ] );\r\n        y = this.serie.getY( this.serie.data[ i ][ j + 1 ] );\r\n\r\n        maxY = Math.max( this.serie.data[ i ][ j + 1 ], maxY );\r\n        minY = Math.min( this.serie.data[ i ][ j + 1 ], minY );\r\n\r\n        if ( j == init ) {\r\n          this.firstX = x;\r\n          this.firstY = y;\r\n        }\r\n\r\n        if ( k > 0 ) {\r\n          this.currentLine += ` L ${ x } ${ y } `;\r\n        } else {\r\n          this.currentLine += ` M ${ x } ${ y } `;\r\n        }\r\n\r\n        //this.serie._addPoint( x, y, false, this.currentLine );\r\n        k++;\r\n\r\n      }\r\n\r\n      this.lastX = x;\r\n      this.lastY = y;\r\n\r\n      if ( !this.firstX || !this.firstY || !this.lastX || !this.lastY ) {\r\n        return;\r\n      }\r\n\r\n      this.currentLine += ` V ${ this.getYAxis().getPx( 0 ) } H ${ this.firstX } z`;\r\n      this.setDom( 'd', this.currentLine );\r\n    }\r\n\r\n    this.maxY = this.serie.getY( maxY );\r\n    this.setHandles();\r\n\r\n    this.changed();\r\n\r\n    return true;\r\n  }\r\n\r\n  setHandles() {\r\n\r\n    if ( !this.firstX ) {\r\n      return;\r\n    }\r\n\r\n    var posXY = this.computePosition( 0 ),\r\n      posXY2 = this.computePosition( 1 );\r\n\r\n    if ( posXY.x < posXY2.x ) {\r\n\r\n      this.handles[ 1 ].setAttribute( 'x1', this.firstX );\r\n      this.handles[ 1 ].setAttribute( 'x2', this.firstX );\r\n\r\n      this.handles[ 2 ].setAttribute( 'x1', this.lastX );\r\n      this.handles[ 2 ].setAttribute( 'x2', this.lastX );\r\n\r\n    } else {\r\n\r\n      this.handles[ 1 ].setAttribute( 'x1', this.lastX );\r\n      this.handles[ 1 ].setAttribute( 'x2', this.lastX );\r\n\r\n      this.handles[ 2 ].setAttribute( 'x1', this.firstX );\r\n      this.handles[ 2 ].setAttribute( 'x2', this.firstX );\r\n\r\n    }\r\n    this.handles[ 1 ].setAttribute( 'y1', this.getYAxis().getMaxPx() );\r\n    this.handles[ 1 ].setAttribute( 'y2', this.serie.getY( 0 ) );\r\n\r\n    this.handles[ 2 ].setAttribute( 'y1', this.getYAxis().getMaxPx() );\r\n    this.handles[ 2 ].setAttribute( 'y2', this.serie.getY( 0 ) );\r\n  }\r\n}\r\n\r\nexport default ShapeSurfaceUnderCurve;","import GraphShape from './graph.shape.js';\r\n\r\n/**\r\n * Represents a line\r\n * @extends Shape\r\n * @see Graph#newShape\r\n */\r\nclass ShapeLine extends GraphShape {\r\n  constructor( graph, options ) {\r\n    super( graph, options );\r\n  }\r\n\r\n  /**\r\n   * Creates the DOM\r\n   * @private\r\n   * @return {Shape} The current shape\r\n   */\r\n  createDom() {\r\n    this._dom = document.createElementNS( this.graph.ns, 'line' );\r\n\r\n    if ( !this.getStrokeColor() ) {\r\n      this.setStrokeColor( 'black' );\r\n    }\r\n\r\n    if ( !this.getStrokeWidth() ) {\r\n      this.setStrokeWidth( 1 );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Creates the handles\r\n   * @private\r\n   * @return {Shape} The current shape\r\n   */\r\n  createHandles() {\r\n    this._createHandles( 2, 'rect', {\r\n      transform: 'translate(-3 -3)',\r\n      width: 6,\r\n      height: 6,\r\n      stroke: 'black',\r\n      fill: 'white',\r\n      cursor: 'nwse-resize'\r\n    } );\r\n  }\r\n\r\n  /**\r\n   * Recalculates the positions and applies them\r\n   * @private\r\n   * @return {Boolean} Whether the shape should be redrawn\r\n   */\r\n  applyPosition() {\r\n    var position = this.calculatePosition( 0 );\r\n    var position2 = this.calculatePosition( 1 );\r\n    console.log( position, position2, this.getProp( 'position' ) );\r\n    if ( !position || !position.x || !position.y ) {\r\n      return;\r\n    }\r\n\r\n    this.setDom( 'x2', position.x );\r\n    this.setDom( 'y2', position.y );\r\n\r\n    this.setDom( 'y1', position2.y );\r\n    this.setDom( 'x1', position2.x );\r\n\r\n    this.currentPos2x = position2.x;\r\n    this.currentPos2y = position2.y;\r\n\r\n    this.currentPos1x = position.x;\r\n    this.currentPos1y = position.y;\r\n\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Handles mouse move events\r\n   * @private\r\n   */\r\n  handleMouseMoveImpl( e, deltaX, deltaY, deltaXPx, deltaYPx ) {\r\n    if ( this.isLocked() ) {\r\n      return;\r\n    }\r\n\r\n    var pos = this.getPosition( 0 );\r\n    var pos2 = this.getPosition( 1 );\r\n\r\n    var posToChange;\r\n    if ( this.handleSelected == 1 ) {\r\n      posToChange = pos;\r\n    } else if ( this.handleSelected == 2 ) {\r\n      posToChange = pos2;\r\n    }\r\n\r\n    if ( posToChange ) {\r\n      if ( !this._data.vertical ) {\r\n        posToChange.deltaPosition( 'x', deltaX, this.getXAxis() );\r\n      }\r\n\r\n      if ( !this._data.horizontal ) {\r\n        posToChange.deltaPosition( 'y', deltaY, this.getYAxis() );\r\n      }\r\n    }\r\n\r\n    if ( this.moving ) {\r\n      console.log( this._data );\r\n      // If the pos2 is defined by a delta, no need to move them\r\n      if ( pos.x && !this._data.noX ) {\r\n        pos.deltaPosition( 'x', deltaX, this.getXAxis() );\r\n      }\r\n      if ( pos.y && !this._data.noY ) {\r\n        pos.deltaPosition( 'y', deltaY, this.getYAxis() );\r\n      }\r\n\r\n      // If the pos2 is defined by a delta, no need to move them\r\n      if ( pos2.x && !this._data.noX ) {\r\n        pos2.deltaPosition( 'x', deltaX, this.getXAxis() );\r\n      }\r\n      if ( pos2.y && !this._data.noY ) {\r\n        pos2.deltaPosition( 'y', deltaY, this.getYAxis() );\r\n      }\r\n    }\r\n\r\n    if ( this._data.forcedCoords ) {\r\n      var forced = this._data.forcedCoords;\r\n\r\n      if ( forced.y !== undefined ) {\r\n        if ( typeof forced.y == 'function' ) {\r\n          pos2.y = pos.y = forced.y( this );\r\n        } else {\r\n          pos2.y = forced.y;\r\n          pos.y = forced.y;\r\n        }\r\n      }\r\n\r\n      if ( forced.x !== undefined ) {\r\n        if ( typeof forced.x == 'function' ) {\r\n          pos2.x = pos.x = forced.x( this );\r\n        } else {\r\n          pos2.x = forced.x;\r\n          pos.x = forced.x;\r\n        }\r\n      }\r\n    }\r\n\r\n    if ( this.rectEvent ) {\r\n      this.setEventReceptacle();\r\n    }\r\n\r\n    this.redraw();\r\n    this.changed();\r\n    this.setHandles();\r\n\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Sets the handle position\r\n   * @private\r\n   */\r\n  setHandles() {\r\n    if ( !this.areHandlesInDom() ) {\r\n      return;\r\n    }\r\n\r\n    if ( isNaN( this.currentPos1x ) ) {\r\n      return;\r\n    }\r\n\r\n    this.handles[ 1 ].setAttribute( 'x', this.currentPos1x );\r\n    this.handles[ 1 ].setAttribute( 'y', this.currentPos1y );\r\n\r\n    this.handles[ 2 ].setAttribute( 'x', this.currentPos2x );\r\n    this.handles[ 2 ].setAttribute( 'y', this.currentPos2y );\r\n  }\r\n\r\n  /**\r\n   * Creates an line receptacle with the coordinates of the line, but continuous and thicker\r\n   * @return {Shape} The current shape\r\n   */\r\n  setEventReceptacle() {\r\n    if ( !this.currentPos1x ) {\r\n      return;\r\n    }\r\n\r\n    if ( !this.rectEvent ) {\r\n      this.rectEvent = document.createElementNS( this.graph.ns, 'line' );\r\n      this.rectEvent.setAttribute( 'pointer-events', 'stroke' );\r\n      this.rectEvent.setAttribute( 'stroke', 'transparent' );\r\n      this.rectEvent.jsGraphIsShape = this;\r\n      this.group.appendChild( this.rectEvent );\r\n    }\r\n\r\n    this.rectEvent.setAttribute( 'x1', this.currentPos1x );\r\n    this.rectEvent.setAttribute( 'y1', this.currentPos1y );\r\n    this.rectEvent.setAttribute( 'x2', this.currentPos2x );\r\n    this.rectEvent.setAttribute( 'y2', this.currentPos2y );\r\n    this.rectEvent.setAttribute(\r\n      'stroke-width',\r\n      this.getProp( 'strokeWidth' ) + 2\r\n    );\r\n  }\r\n}\r\n\r\nexport default ShapeLine;","import ShapeLine from './graph.shape.line.js';\r\n\r\n/**\r\n *  Displays an arrow\r\n *  @extends GraphShapeLine\r\n */\r\nclass ShapeArrow extends ShapeLine {\r\n\r\n  constructor( graph ) {\r\n\r\n    super( graph );\r\n\r\n  }\r\n\r\n  createDom() {\r\n\r\n    this._dom = document.createElementNS( this.graph.ns, 'line' );\r\n    this._dom.setAttribute( 'marker-end', `url(#arrow${ this.graph._creation })` );\r\n\r\n    this.createHandles( this.nbHandles, 'rect', {\r\n      transform: 'translate(-3 -3)',\r\n      width: 6,\r\n      height: 6,\r\n      stroke: 'black',\r\n      fill: 'white',\r\n      cursor: 'nwse-resize'\r\n    } );\r\n\r\n    this.setStrokeColor( 'black' );\r\n    this.setStrokeWidth( 1 );\r\n  }\r\n}\r\n\r\nexport default ShapeArrow;","import * as util from '../graph.util.js';\r\n\r\nimport Shape from './graph.shape.js';\r\n\r\n/**\r\n * Displays an ellipse\r\n * @extends Shape\r\n */\r\nclass ShapeEllipse extends Shape {\r\n\r\n  constructor( graph, options ) {\r\n    super( graph, options );\r\n  }\r\n\r\n  createDom() {\r\n    this._dom = document.createElementNS( this.graph.ns, 'ellipse' );\r\n  }\r\n\r\n  applyPosition() {\r\n\r\n    var pos = this.computePosition( 0 );\r\n\r\n    this.setDom( 'cx', pos.x || 0 );\r\n    this.setDom( 'cy', pos.y || 0 );\r\n\r\n    let posR = this.graph.newPosition( {\r\n\r\n      dx: this.getProp( 'rx' ),\r\n      dy: this.getProp( 'ry' ) || this.getProp( 'rx' )\r\n\r\n    } );\r\n\r\n    let posComputed = this.calculatePosition( posR );\r\n\r\n    this.setDom( 'rx', Math.abs( posComputed.x ) || 0 );\r\n    this.setDom( 'ry', Math.abs( posComputed.y ) || 0 );\r\n    return true;\r\n  }\r\n\r\n  setR( rx, ry ) {\r\n    this.setProp( 'rx', rx );\r\n    this.setProp( 'ry', ry );\r\n    return this;\r\n  }\r\n\r\n  handleMouseUpImpl() {\r\n    this.triggerChange();\r\n  }\r\n\r\n  handleMouseMoveImpl( e, deltaX, deltaY, deltaXPx, deltaYPx ) {\r\n\r\n  }\r\n}\r\n\r\nexport default ShapeEllipse;","import GraphShape from './graph.shape.js';\r\n\r\n/**\r\n * Blank shape used to display label\r\n * Use myShapelabel.setLabelText(); and associated methods\r\n * @extend GraphShape\r\n */\r\nclass ShapeLabel extends GraphShape {\r\n\r\n  constructor( graph, options ) {\r\n\r\n    super( graph, options );\r\n  }\r\n\r\n  createDom() {\r\n    return false;\r\n  }\r\n\r\n  applyPosition() {\r\n    return true;\r\n  }\r\n}\r\n\r\nexport default ShapeLabel;","import Shape from './graph.shape.js';\r\n\r\n/**\r\n * Represents a line that extends the Shape class. Used by the plugin {@link PluginSerieLineDifference}\r\n * @extends Shape\r\n * @see Graph#newShape\r\n */\r\nclass ShapePolyline extends Shape {\r\n\r\n  constructor( graph, options ) {\r\n    super( graph, options );\r\n  }\r\n\r\n  /**\r\n   * Creates the DOM\r\n   * @private\r\n   * @return {Shape} The current shape\r\n   */\r\n  createDom() {\r\n\r\n    this._dom = document.createElementNS( this.graph.ns, 'path' );\r\n\r\n    if ( !this.getStrokeColor() ) {\r\n      this.setStrokeColor( 'black' );\r\n    }\r\n\r\n    if ( this.getStrokeWidth() == undefined ) {\r\n      this.setStrokeWidth( 1 );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * No handles for the polyline\r\n   * @private\r\n   * @return {Shape} The current shape\r\n   */\r\n  createHandles() {}\r\n\r\n  /**\r\n   *  Force the points of the polyline already computed in pixels\r\n   *  @param {String} a SVG string to be used in the ```d``` attribute of the path.\r\n   *  @return {ShapePolyline} The current polyline instance\r\n   */\r\n  setPointsPx( points ) {\r\n    this.setProp( 'pxPoints', points );\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Recalculates the positions and applies them\r\n   * @private\r\n   * @return {Boolean} Whether the shape should be redrawn\r\n   */\r\n  applyPosition() {\r\n\r\n    let pxPoints;\r\n    let pos = this.computePosition( 0 );\r\n\r\n    if ( ( pxPoints = this.getProp( 'pxPoints' ) ) ) {\r\n\r\n      pxPoints = ` M ${ pos.x } ${ pos.y } ${ pxPoints}`;\r\n      this.setDom( 'd', pxPoints );\r\n\r\n    } else if ( this.points ) {\r\n\r\n      var xAxis, yAxis;\r\n\r\n      if ( this.serie ) {\r\n\r\n        xAxis = this.serie.getXAxis();\r\n        yAxis = this.serie.getYAxis();\r\n\r\n      } else if ( this.xAxis && this.yAxis ) {\r\n\r\n        xAxis = this.xAxis;\r\n        yAxis = this.yAxis;\r\n      }\r\n\r\n      this.setDom( 'd', `M ${ this.points.map( function( p ) {\r\n        return `${xAxis.getPx( p[ 0 ] ) }, ${ yAxis.getPx( p[ 1 ] )}`;\r\n      } ).join( ' L ' )}` );\r\n    }\r\n\r\n    this.changed();\r\n    return true;\r\n  }\r\n}\r\n\r\nexport default ShapePolyline;","import GraphPosition from '../graph.position.js';\r\n\r\nimport Shape from './graph.shape.js';\r\n\r\n/**\r\n * Displays an integral with NMR style\r\n * @extends ShapeSurfaceUnderCurve\r\n */\r\nclass ShapeNMRIntegral extends Shape {\r\n\r\n  constructor( graph, options ) {\r\n\r\n    super( graph, options );\r\n\r\n    this.nbHandles = 2;\r\n  }\r\n\r\n  createDom() {\r\n    this._dom = document.createElementNS( this.graph.ns, 'path' );\r\n    this._domShadow = document.createElementNS( this.graph.ns, 'path' );\r\n    this._domShadow.jsGraphIsShape = this;\r\n    this._dom.setAttribute( 'pointer-events', 'stroke' );\r\n    this._domShadow.setAttribute( 'pointer-events', 'stroke' );\r\n    this._domShadow.setAttribute( 'stroke-width', '12' );\r\n    this._domShadow.setAttribute( 'fill', 'transparent' );\r\n    this._domShadow.setAttribute( 'stroke', 'transparent' );\r\n    this.group.appendChild( this._domShadow );\r\n  }\r\n\r\n  initImpl() {\r\n    this.setFillColor( 'transparent' );\r\n    this.setStrokeColor( 'black' );\r\n  }\r\n\r\n  createHandles() {\r\n\r\n    this._createHandles( 2, 'rect', {\r\n      transform: 'translate(-3 -3)',\r\n      width: 6,\r\n      height: 6,\r\n      stroke: 'black',\r\n      fill: 'white'\r\n    } );\r\n\r\n    this.handles[ 1 ].setAttribute( 'fill', 'red' );\r\n  }\r\n\r\n  xor( a, b ) {\r\n    return ( a && !b ) || ( !a && b );\r\n  }\r\n\r\n  applyPosition() {\r\n\r\n    let\r\n      x,\r\n      y,\r\n      xVal,\r\n      yVal,\r\n      axis = this.getAxis(),\r\n      points = [];\r\n\r\n    let currentLine = '',\r\n      baseLine = this.getProp( 'baseLine', 0 ) || 300,\r\n      ratio;\r\n\r\n    if ( !this.serie ) {\r\n      throw 'No serie exists for this shape';\r\n    }\r\n    /*\r\n        this.sortPositions( ( a, b ) => {\r\n          return a.x - b.x;\r\n        } );\r\n\r\n        */\r\n    let pos1 = this.getPosition( 0 );\r\n    let pos2 = this.getPosition( 1 );\r\n\r\n    if ( ( pos1.x < this.serie.getXAxis().getCurrentMin() && pos2.x < this.serie.getXAxis().getCurrentMin() ) || ( pos1.x > this.serie.getXAxis().getCurrentMax() && pos2.x > this.serie.getXAxis().getCurrentMax() ) ) {\r\n      this.setDom( 'd', '' );\r\n      this._domShadow.setAttribute( 'd', '' );\r\n\r\n      this.hideLabel( 0 );\r\n      return false;\r\n    }\r\n\r\n    this.showLabel( 0 );\r\n\r\n    let sum = 0;\r\n\r\n    let j;\r\n    let waveform = this.serie.getWaveform();\r\n\r\n    if ( !waveform ) {\r\n      return;\r\n    }\r\n\r\n    let index1 = waveform.getIndexFromX( pos1[ axis ], true, Math.floor ),\r\n      index2 = waveform.getIndexFromX( pos2[ axis ], true, Math.ceil ),\r\n      index3,\r\n      flipped = false;\r\n\r\n    if ( index1 == index2 ) { // At least one px please !\r\n      if ( waveform.getReductionType() == 'aggregate' ) {\r\n        index2 += 4; // Aggregated state\r\n      } else {\r\n        index2++; // Non aggregated state\r\n      }\r\n    }\r\n\r\n    if ( index2 < index1 ) {\r\n      index3 = index1;\r\n      index1 = index2;\r\n      index2 = index3;\r\n      flipped = true;\r\n    }\r\n\r\n    let firstX, firstY, firstXVal, firstYVal, lastX, lastXVal, lastY, lastYVal;\r\n    let data = waveform.getDataInUse();\r\n\r\n    let condition, incrementation;\r\n\r\n    let normalSums = true;\r\n    if ( waveform.getReductionType() == 'aggregate' ) {\r\n      normalSums = false;\r\n    }\r\n\r\n    if (\r\n      ( waveform.getXMonotoneousAscending() && // Ascending\r\n        1 == 1 ) ||\r\n      ( !waveform.getXMonotoneousAscending() && // Ascending\r\n        1 == 2 )\r\n    ) {\r\n\r\n      j = index2;\r\n      condition = true;\r\n      incrementation = -1;\r\n\r\n    } else {\r\n\r\n      j = index1;\r\n      condition = false;\r\n      incrementation = 1;\r\n    }\r\n\r\n    for ( ; condition ? j >= index1 : j <= index2; j += incrementation ) {\r\n\r\n      xVal = waveform.getX( j, true );\r\n      yVal = waveform.getY( j, true );\r\n\r\n      x = this.serie.getX( xVal );\r\n      y = this.serie.getY( yVal );\r\n\r\n      /*\r\n            if ( ! normalSums && j % 4 == 0 && j >= index1 && data.sums ) { // Sums are located every 4 element\r\n\r\n              sum += data.sums[ j ];// * ( waveform.getX( j, true ) - waveform.getX( j - 3, true ) ); // y * (out-in)\r\n\r\n            } else if( normalSums ) {\r\n      */\r\n      sum += waveform.getY( j, true ); // * ( waveform.getX( j, true ) - waveform.getX( j - 1, true ) ); // y * (out-in)\r\n      //}\r\n\r\n      if ( !firstX ) {\r\n\r\n        firstX = x;\r\n        firstY = y;\r\n        firstXVal = waveform.getX( j );\r\n        firstYVal = waveform.getY( j );\r\n      }\r\n\r\n      if ( lastX == undefined ) {\r\n\r\n        lastX = x;\r\n        lastY = y;\r\n        lastXVal = waveform.getX( j );\r\n        lastYVal = waveform.getY( j );\r\n        continue;\r\n      }\r\n\r\n      if ( x == lastX && y == lastY ) {\r\n        //continue;\r\n      }\r\n\r\n      lastX = x;\r\n      lastY = y;\r\n      //console.log( data, data[ j ] );\r\n\r\n      points.push( [ x, y, sum ] );\r\n      lastXVal = xVal;\r\n    }\r\n\r\n    lastXVal = false;\r\n    lastYVal = false;\r\n    lastX = false;\r\n    lastY = false;\r\n\r\n    if ( sum == 0 ) {\r\n      sum = 1;\r\n    }\r\n\r\n    this._sumVal = waveform.integrate( pos1.x, pos2.x );\r\n\r\n    if ( !this.ratio ) {\r\n      // 150px / unit\r\n      ratio = 200 / sum;\r\n\r\n    } else {\r\n      // Already existing\r\n      ratio = this.ratio * ( this.sumVal / sum );\r\n    }\r\n    let py;\r\n\r\n    if ( points.length == 0 ) {\r\n      return;\r\n    }\r\n\r\n    for ( var i = 0, l = points.length; i < l; i++ ) {\r\n\r\n      py = baseLine - ( points[ i ][ 2 ] ) * ratio;\r\n\r\n      if ( i > 0 && ( ( points[ i - 1 ][ 2 ] > sum / 2 && points[ i ][ 2 ] <= sum / 2 ) || ( points[ i - 1 ][ 2 ] < sum / 2 && points[ i ][ 2 ] >= sum / 2 ) ) ) {\r\n\r\n        let pos = baseLine - ( points[ i - 1 ][ 2 ] + points[ i ][ 2 ] ) / 2 * ratio;\r\n\r\n        this.setPosition( {\r\n          x: `${points[ i ][ 0 ] }px`,\r\n          y: `${pos }px`\r\n\r\n        }, 3 );\r\n\r\n        this.setLabelPosition( this.getPosition( 3 ), 0 );\r\n      }\r\n\r\n      currentLine += ` L ${ points[ i ][ 0 ] }, ${ py } `;\r\n\r\n      this.lastPointX = points[ i ][ 0 ];\r\n      this.lastPointY = py;\r\n    }\r\n\r\n    this.points = points;\r\n    this._sum = sum;\r\n\r\n    if ( this.serie.isFlipped() ) {\r\n      currentLine = ` M ${ baseLine }, ${ firstX } ${ currentLine}`;\r\n    } else {\r\n      currentLine = ` M ${ firstX }, ${ baseLine } ${ currentLine}`;\r\n    }\r\n\r\n    this.firstPointX = firstX;\r\n    this.firstPointY = baseLine;\r\n\r\n    this.setDom( 'd', currentLine );\r\n    this._domShadow.setAttribute( 'd', currentLine );\r\n\r\n    this.firstX = firstX;\r\n    this.firstY = firstY;\r\n    /*\r\n          if ( this._selected ) {\r\n            this.select();\r\n          }\r\n\r\n          this.setHandles();*/\r\n\r\n    ( this.serie.ratioLabel && this.updateIntegralValue( this.serie.ratioLabel ) ) || this.updateLabels();\r\n\r\n    this.changed();\r\n    this.handleCondition = !this.xor( incrementation == -1, flipped );\r\n    this.setHandles();\r\n\r\n    this.updateIntegralValue();\r\n\r\n    return true;\r\n  }\r\n\r\n  updateIntegralValue( ratioLabel = this.serie.ratioLabel, forceValue ) {\r\n    console.log( ratioLabel );\r\n    if ( ratioLabel ) {\r\n      this.serie.ratioLabel = ratioLabel;\r\n    }\r\n\r\n    if ( !isNaN( forceValue ) && !isNaN( this.sumVal ) && this.sumVal ) {\r\n      this.serie.ratioLabel = forceValue / this.sumVal;\r\n    }\r\n\r\n    this.setLabelText( ratioLabel ? ( Math.round( 100 * this.sumVal * ratioLabel ) / 100 ).toPrecision( 3 ) : 'N/A', 0 );\r\n    this.updateLabels();\r\n    return this.serie.ratioLabel;\r\n  }\r\n\r\n  getAxis() {\r\n    return this._data.axis || 'x';\r\n  }\r\n\r\n  /**\r\n   * User to screen coordinate transform. In (unit)/(px), (unit) being the unit of the integral (x * y)\r\n   * @type {Number}\r\n   */\r\n  set ratio( r ) {\r\n    this._ratio = r;\r\n  }\r\n\r\n  get ratio() {\r\n    return this._ratio;\r\n  }\r\n\r\n  get sum() {\r\n    return this._sum;\r\n  }\r\n\r\n  get sumVal() {\r\n    return this._sumVal;\r\n  }\r\n\r\n  selectStyle() {\r\n    this.setDom( 'stroke-width', '2px' );\r\n  }\r\n\r\n  selectHandles() {} // Cancel areaundercurve\r\n\r\n  setHandles() {\r\n\r\n    if ( this.points == undefined ) {\r\n      return;\r\n    }\r\n\r\n    if ( !this.isSelected() ) {\r\n      return;\r\n    }\r\n\r\n    this.addHandles();\r\n\r\n    if ( this.handleCondition ) {\r\n\r\n      this.handles[ 1 ].setAttribute( 'x', this.firstPointX );\r\n      this.handles[ 1 ].setAttribute( 'y', this.firstPointY );\r\n      this.handles[ 2 ].setAttribute( 'x', this.lastPointX );\r\n      this.handles[ 2 ].setAttribute( 'y', this.lastPointY );\r\n\r\n    } else {\r\n\r\n      this.handles[ 2 ].setAttribute( 'x', this.firstPointX );\r\n      this.handles[ 2 ].setAttribute( 'y', this.firstPointY );\r\n      this.handles[ 1 ].setAttribute( 'x', this.lastPointX );\r\n      this.handles[ 1 ].setAttribute( 'y', this.lastPointY );\r\n\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handles mouse move events\r\n   * @private\r\n   */\r\n  handleMouseMoveImpl( e, deltaX, deltaY, deltaXPx, deltaYPx ) {\r\n\r\n    if ( this.isLocked() ) {\r\n      return;\r\n    }\r\n\r\n    var pos = this.getPosition( 0 );\r\n    var pos2 = this.getPosition( 1 );\r\n\r\n    var posToChange;\r\n\r\n    if ( this.handleSelected == 1 ) {\r\n\r\n      posToChange = pos;\r\n\r\n    } else if ( this.handleSelected == 2 ) {\r\n\r\n      posToChange = pos2;\r\n    }\r\n\r\n    if ( posToChange ) {\r\n\r\n      if ( !this._data.vertical ) {\r\n        posToChange.deltaPosition( 'x', deltaX, this.getXAxis() );\r\n      }\r\n    }\r\n\r\n    if ( this.moving ) {\r\n\r\n      // If the pos2 is defined by a delta, no need to move them\r\n      if ( pos.x ) {\r\n        pos.deltaPosition( 'x', deltaX, this.getXAxis() );\r\n      }\r\n\r\n      // If the pos2 is defined by a delta, no need to move them\r\n      if ( pos2.x ) {\r\n        pos2.deltaPosition( 'x', deltaX, this.getXAxis() );\r\n      }\r\n    }\r\n\r\n    if ( this.rectEvent ) {\r\n      this.setEventReceptacle();\r\n    }\r\n\r\n    this.redraw();\r\n    this.changed();\r\n\r\n    return true;\r\n  }\r\n}\r\n\r\nexport default ShapeNMRIntegral;","import * as util from '../graph.util.js';\r\n\r\nimport GraphShape from './graph.shape.js';\r\n\r\n/**\r\n * Represents a rectangle that extends the Shape class\r\n * @class ShapeRectangle\r\n * @augments Shape\r\n * @see Graph#newShape\r\n */\r\nclass ShapeRectangle extends GraphShape {\r\n\r\n  constructor( graph, options ) {\r\n    super( graph, options );\r\n\r\n  }\r\n\r\n  /**\r\n   * Creates the DOM\r\n   * @private\r\n   * @return {Shape} The current shape\r\n   */\r\n  createDom() {\r\n    this._dom = document.createElementNS( this.graph.ns, 'rect' );\r\n\r\n    if ( !this.getStrokeColor() ) {\r\n      this.setStrokeColor( 'black' );\r\n    }\r\n\r\n    if ( !this.getStrokeWidth() ) {\r\n      this.setStrokeWidth( 1 );\r\n    }\r\n\r\n    if ( !this.getFillColor() ) {\r\n      this.setFillColor( 'transparent' );\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Creates the Handles\r\n   * @private\r\n   * @return {Shape} The current shape\r\n   */\r\n  createHandles() {\r\n    if ( !this.hasHandles() ) {\r\n      return;\r\n    }\r\n\r\n    /*\r\n          this._data.handles = this._data.handles || {\r\n            type: 'corners'\r\n          };\r\n    */\r\n\r\n    var handles = this.getProp( 'handles' );\r\n\r\n    if ( typeof handles != 'object' ) {\r\n      handles = {};\r\n    }\r\n\r\n    if ( !handles.type ) {\r\n      handles.type = 'corners';\r\n    }\r\n\r\n    switch ( handles.type ) {\r\n\r\n      case 'sides':\r\n\r\n        util.extend( handles, {\r\n          sides: {\r\n            top: true,\r\n            bottom: true,\r\n            left: true,\r\n            right: true\r\n          }\r\n        } );\r\n\r\n        var j = 0;\r\n        for ( var i in handles.sides ) {\r\n          if ( handles.sides[ i ] ) {\r\n            j++;\r\n          }\r\n        }\r\n\r\n        this._createHandles( j, 'g' ).map( function( g ) {\r\n\r\n          var r = document.createElementNS( self.graph.ns, 'rect' );\r\n          r.setAttribute( 'x', '-3' );\r\n          r.setAttribute( 'width', '6' );\r\n          r.setAttribute( 'y', '-6' );\r\n          r.setAttribute( 'height', '12' );\r\n          r.setAttribute( 'stroke', 'black' );\r\n          r.setAttribute( 'fill', 'white' );\r\n          r.setAttribute( 'cursor', 'pointer' );\r\n\r\n          g.appendChild( r );\r\n\r\n        } );\r\n\r\n        var j = 1;\r\n\r\n        for ( var i in handles.sides ) {\r\n          if ( handles.sides[ i ] ) {\r\n            this.handles[ i ] = this[ `handle${ j}` ];\r\n            this.sides[ j ] = i;\r\n            j++;\r\n          }\r\n        }\r\n\r\n        break;\r\n\r\n      case 'corners':\r\n        this._createHandles( 4, 'rect', {\r\n          transform: 'translate(-3 -3)',\r\n          width: 6,\r\n          height: 6,\r\n          stroke: 'black',\r\n          fill: 'white'\r\n        } );\r\n\r\n        if ( this.handles ) {\r\n          this.handles[ 2 ].setAttribute( 'cursor', 'nesw-resize' );\r\n          this.handles[ 4 ].setAttribute( 'cursor', 'nesw-resize' );\r\n\r\n          this.handles[ 1 ].setAttribute( 'cursor', 'nwse-resize' );\r\n          this.handles[ 3 ].setAttribute( 'cursor', 'nwse-resize' );\r\n        }\r\n\r\n        break;\r\n\r\n      case 'seamlessX':\r\n\r\n        this._createHandles( 2, 'rect', {\r\n          transform: 'translate(-3 -3)',\r\n          stroke: 'transparent',\r\n          fill: 'transparent',\r\n          width: '20px',\r\n          cursor: 'ew-resize'\r\n        } );\r\n\r\n        break;\r\n    }\r\n\r\n    super.createHandles();\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Updates the position\r\n   * @memberof ShapeRectangle\r\n   * @private\r\n   * @return {Shape} The current shape\r\n   */\r\n  applyPosition() {\r\n\r\n    var pos = this.computePosition( 0 ),\r\n      pos2 = this.computePosition( 1 ),\r\n      x,\r\n      y,\r\n      width,\r\n      height;\r\n\r\n    if ( pos.x < pos2.x ) {\r\n      x = pos.x;\r\n      width = pos2.x - pos.x;\r\n    } else {\r\n      x = pos2.x;\r\n      width = pos.x - pos2.x;\r\n    }\r\n\r\n    if ( pos.y < pos2.y ) {\r\n      y = pos.y;\r\n      height = pos2.y - pos.y;\r\n    } else {\r\n      y = pos2.y;\r\n      height = pos.y - pos2.y;\r\n    }\r\n\r\n    this.currentX = x;\r\n    this.currentY = y;\r\n    this.currentW = width;\r\n    this.currentH = height;\r\n\r\n    if ( !isNaN( x ) && !isNaN( y ) && x !== false && y !== false ) {\r\n\r\n      this.setDom( 'width', width );\r\n      this.setDom( 'height', height );\r\n      this.setDom( 'x', x );\r\n      this.setDom( 'y', y );\r\n\r\n      this.setHandles();\r\n      this.updateMask();\r\n\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Implements mouse move event\r\n   * @private\r\n   * @return {Shape} The current shape\r\n   */\r\n  handleMouseMoveImpl( e, deltaX, deltaY, deltaXPx, deltaYPx ) {\r\n\r\n    var handles = this.getProp( 'handles' );\r\n\r\n    if ( !this.moving && !this.handleSelected ) {\r\n      return;\r\n    }\r\n\r\n    var pos = this.getPosition( 0 );\r\n    var pos2 = this.getPosition( 1 );\r\n\r\n    var invX = this.getXAxis().isFlipped(),\r\n      invY = this.getYAxis().isFlipped(),\r\n      posX = pos.x,\r\n      posY = pos.y,\r\n      pos2X = pos2.x,\r\n      pos2Y = pos2.y;\r\n\r\n    if ( this.moving ) {\r\n\r\n      pos.deltaPosition( 'x', deltaX, this.getXAxis() );\r\n      pos.deltaPosition( 'y', deltaY, this.getYAxis() );\r\n\r\n      pos2.deltaPosition( 'x', deltaX, this.getXAxis() );\r\n      pos2.deltaPosition( 'y', deltaY, this.getYAxis() );\r\n\r\n    } else {\r\n\r\n      switch ( handles.type ) {\r\n\r\n        case 'seamlessX':\r\n          // Do nothing for now\r\n\r\n          switch ( this.handleSelected ) {\r\n\r\n            case 1:\r\n              pos.deltaPosition( 'x', deltaX, this.getXAxis() );\r\n              break;\r\n\r\n            case 2:\r\n              pos2.deltaPosition( 'x', deltaX, this.getXAxis() );\r\n              break;\r\n          }\r\n\r\n          break;\r\n\r\n        case 'sides':\r\n          // Do nothing for now\r\n\r\n          switch ( this.sides[ this.handleSelected ] ) {\r\n\r\n            case 'left':\r\n              pos.deltaPosition( 'x', deltaX, this.getXAxis() );\r\n              break;\r\n\r\n            case 'right':\r\n              pos2.deltaPosition( 'x', deltaX, this.getXAxis() );\r\n              break;\r\n\r\n            case 'top':\r\n              pos.deltaPosition( 'y', deltaY, this.getYAxis() );\r\n              break;\r\n\r\n            case 'bottom':\r\n              pos2.deltaPosition( 'y', deltaY, this.getYAxis() );\r\n              break;\r\n\r\n          }\r\n\r\n          break;\r\n\r\n        case 'corners':\r\n        default:\r\n\r\n          if ( this.handleSelected == 1 ) {\r\n\r\n            pos.deltaPosition( 'x', deltaX, this.getXAxis() );\r\n            pos.deltaPosition( 'y', deltaY, this.getYAxis() );\r\n\r\n          } else if ( this.handleSelected == 2 ) {\r\n\r\n            pos2.deltaPosition( 'x', deltaX, this.getXAxis() );\r\n            pos.deltaPosition( 'y', deltaY, this.getYAxis() );\r\n\r\n          } else if ( this.handleSelected == 3 ) {\r\n\r\n            pos2.deltaPosition( 'y', deltaY, this.getYAxis() );\r\n            pos2.deltaPosition( 'x', deltaX, this.getXAxis() );\r\n\r\n          } else if ( this.handleSelected == 4 ) {\r\n\r\n            pos.deltaPosition( 'x', deltaX, this.getXAxis() );\r\n            pos2.deltaPosition( 'y', deltaY, this.getYAxis() );\r\n\r\n          }\r\n\r\n          break;\r\n\r\n      }\r\n    }\r\n\r\n    this.redraw();\r\n    this.changed();\r\n    this.setHandles();\r\n\r\n    return true;\r\n\r\n  }\r\n\r\n  /**\r\n   * Places handles properly\r\n   * @private\r\n   * @return {Shape} The current shape\r\n   */\r\n  setHandles() {\r\n\r\n    if ( this.isLocked() || ( !this.isSelectable() && !this._staticHandles ) ) {\r\n      return;\r\n    }\r\n\r\n    if ( !this.handlesInDom ) {\r\n      return;\r\n    }\r\n\r\n    var pos = this.computePosition( 0 );\r\n    var pos2 = this.computePosition( 1 );\r\n\r\n    var handles = this.getProp( 'handles' );\r\n\r\n    switch ( handles.type ) {\r\n\r\n      case 'seamlessX':\r\n\r\n        if ( this.handles[ 1 ] ) {\r\n          this.handles[ 1 ].setAttribute( 'transform', `translate(-10) translate(${ pos.x })` );\r\n          this.handles[ 1 ].setAttribute( 'height', Math.abs( ( pos2.y - pos.y ) ) );\r\n          this.handles[ 1 ].setAttribute( 'y', Math.min( pos2.y, pos.y ) );\r\n        }\r\n\r\n        if ( this.handles[ 2 ] ) {\r\n          this.handles[ 2 ].setAttribute( 'transform', `translate(-10)  translate(${ pos2.x })` );\r\n          this.handles[ 2 ].setAttribute( 'height', Math.abs( ( pos2.y - pos.y ) ) );\r\n          this.handles[ 2 ].setAttribute( 'y', Math.min( pos2.y, pos.y ) );\r\n        }\r\n\r\n        break;\r\n\r\n      case 'sides':\r\n\r\n        if ( this.handles.left ) {\r\n          this.handles.left.setAttribute( 'transform', `translate(${ this.currentX } ${ this.currentY + this.currentH / 2 })` );\r\n        }\r\n\r\n        if ( this.handles.right ) {\r\n          this.handles.right.setAttribute( 'transform', `translate( ${ this.currentX + this.currentW } ${ this.currentY + this.currentH / 2 })` );\r\n        }\r\n\r\n        if ( this.handles.top ) {\r\n          this.handles.top.setAttribute( 'transform', `translate( ${ this.currentX + this.currentW / 2 } ${ this.currentY })` );\r\n        }\r\n\r\n        if ( this.handles.bottom ) {\r\n          this.handles.bottom.setAttribute( 'transform', `translate( ${ this.currentX + this.currentW / 2 } ${ this.currentY + this.currentH })` );\r\n        }\r\n\r\n        break;\r\n\r\n      case 'corners':\r\n      default:\r\n\r\n        this.handles[ 1 ].setAttribute( 'x', pos.x );\r\n        this.handles[ 1 ].setAttribute( 'y', pos.y );\r\n\r\n        this.handles[ 2 ].setAttribute( 'x', pos2.x );\r\n        this.handles[ 2 ].setAttribute( 'y', pos.y );\r\n\r\n        this.handles[ 3 ].setAttribute( 'x', pos2.x );\r\n        this.handles[ 3 ].setAttribute( 'y', pos2.y );\r\n\r\n        this.handles[ 4 ].setAttribute( 'x', pos.x );\r\n        this.handles[ 4 ].setAttribute( 'y', pos2.y );\r\n\r\n        break;\r\n\r\n    }\r\n\r\n  }\r\n\r\n}\r\n\r\nexport default ShapeRectangle;","import ShapeRect from './graph.shape.rect.js';\r\n\r\nclass ShapePeakIntegration2D extends ShapeRect {\r\n\r\n  constructor( graph, options ) {\r\n\r\n    super( graph, options );\r\n    this.nbHandles = 4;\r\n  }\r\n\r\n  createDom() {\r\n\r\n    this._dom = document.createElementNS( this.graph.ns, 'rect' );\r\n    this._dom.element = this;\r\n\r\n    this.createHandles( this.nbHandles, 'rect', {\r\n      transform: 'translate(-3 -3)',\r\n      width: 6,\r\n      height: 6,\r\n      stroke: 'black',\r\n      fill: 'white',\r\n      cursor: 'nwse-resize'\r\n    } );\r\n  }\r\n\r\n  redrawImpl() {\r\n\r\n    this.setPosition();\r\n    this.setHandles();\r\n    this.setBindableToDom( this._dom );\r\n  }\r\n\r\n}\r\n\r\nexport default ShapePeakIntegration2D;","import Shape from './graph.shape.js';\r\n\r\n/**\r\n *  Displays a cross\r\n *  @extends Shape\r\n */\r\nclass ShapeCross extends Shape {\r\n\r\n  constructor( graph, options ) {\r\n    super( graph, options );\r\n    this.nbHandles = 1;\r\n  }\r\n\r\n  /**\r\n   * Width of the cross, also available from the constructor\r\n   * @type {Number} width\r\n   */\r\n  get width() {\r\n    return this.options.width || 10;\r\n  }\r\n\r\n  set width( l ) {\r\n    this.options.width = l;\r\n  }\r\n\r\n  createDom() {\r\n\r\n    this._dom = document.createElementNS( this.graph.ns, 'path' );\r\n    this._dom.setAttribute( 'd', `M -${ this.width / 2 } 0 h ${ this.width } m -${ this.width / 2 } -${ this.width / 2 } v ${ this.width }` );\r\n\r\n  }\r\n\r\n  createHandles() {\r\n\r\n    this._createHandles( this.nbHandles, 'rect', {\r\n      transform: 'translate(-3 -3)',\r\n      width: 6,\r\n      height: 6,\r\n      stroke: 'black',\r\n      fill: 'white',\r\n      cursor: 'nwse-resize'\r\n    } );\r\n\r\n  }\r\n  applyPosition() {\r\n\r\n    var position = this.calculatePosition( 0 );\r\n    if ( !position || !position.x || !position.y ) {\r\n      return;\r\n    }\r\n\r\n    this.setDom( 'transform', `translate( ${ position.x }, ${ position.y })` );\r\n\r\n    this.currentPos1x = position.x;\r\n    this.currentPos1y = position.y;\r\n\r\n    return true;\r\n  }\r\n\r\n  redrawImpl() {\r\n\r\n    this.setHandles();\r\n  }\r\n\r\n  handleCreateImpl() {\r\n\r\n  }\r\n\r\n  handleMouseDownImpl( e ) {\r\n\r\n    this.moving = true;\r\n\r\n    return true;\r\n  }\r\n\r\n  handleMouseUpImpl() {\r\n\r\n    this.triggerChange();\r\n    return true;\r\n  }\r\n\r\n  handleMouseMoveImpl( e, deltaX, deltaY, deltaXPx, deltaYPx ) {\r\n\r\n    if ( this.isLocked() ) {\r\n      return;\r\n    }\r\n\r\n    var pos = this.getFromData( 'pos' );\r\n\r\n    if ( this.moving ) {\r\n\r\n      pos.x = this.graph.deltaPosition( pos.x, deltaX, this.getXAxis() );\r\n      pos.y = this.graph.deltaPosition( pos.y, deltaY, this.getYAxis() );\r\n    }\r\n\r\n    this.redrawImpl();\r\n\r\n    return true;\r\n\r\n  }\r\n\r\n  setHandles() {\r\n\r\n    if ( !this.areHandlesInDom() ) {\r\n      return;\r\n    }\r\n\r\n    if ( isNaN( this.currentPos1x ) ) {\r\n      return;\r\n    }\r\n\r\n    this.handles[ 1 ].setAttribute( 'x', this.currentPos1x );\r\n    this.handles[ 1 ].setAttribute( 'y', this.currentPos1y );\r\n  }\r\n\r\n  selectStyle() {\r\n    this.setDom( 'stroke', 'red' );\r\n    this.setDom( 'stroke-width', '2' );\r\n  }\r\n}\r\n\r\nexport default ShapeCross;","import ShapeLine from './graph.shape.line.js';\r\n\r\n/**\r\n *  Shows a horizontal line with three little vertical bars. Very useful to demonstrate a peak start, end and middle value\r\n *  @extends ShapeLine\r\n */\r\nclass ShapePeakBoundaries extends ShapeLine {\r\n\r\n  constructor( graph ) {\r\n    super( graph );\r\n    this.lineHeight = 6;\r\n  }\r\n\r\n  createDom() {\r\n\r\n    this._dom = document.createElementNS( this.graph.ns, 'line' );\r\n    this.line1 = document.createElementNS( this.graph.ns, 'line' );\r\n    this.line2 = document.createElementNS( this.graph.ns, 'line' );\r\n    this.line3 = document.createElementNS( this.graph.ns, 'line' );\r\n\r\n    this.rectBoundary = document.createElementNS( this.graph.ns, 'path' );\r\n\r\n    this.rectBoundary.setAttribute( 'fill', 'transparent' );\r\n    this.rectBoundary.setAttribute( 'stroke', 'none' );\r\n    this.rectBoundary.setAttribute( 'pointer-events', 'fill' );\r\n\r\n    this.rectBoundary.jsGraphIsShape = true;\r\n\r\n    this.group.appendChild( this.rectBoundary );\r\n    this.group.appendChild( this.line1 );\r\n    this.group.appendChild( this.line2 );\r\n    this.group.appendChild( this.line3 );\r\n    this._dom.element = this;\r\n  }\r\n\r\n  createHandles() {\r\n    this._createHandles( 3, 'rect', {\r\n      transform: 'translate(-3 -3)',\r\n      width: 6,\r\n      height: 6,\r\n      stroke: 'black',\r\n      fill: 'white',\r\n      cursor: 'nwse-resize'\r\n    } );\r\n  }\r\n\r\n  redrawImpl() {\r\n\r\n    this.line1.setAttribute( 'stroke', this.getStrokeColor() );\r\n    this.line2.setAttribute( 'stroke', this.getStrokeColor() );\r\n    this.line3.setAttribute( 'stroke', this.getStrokeColor() );\r\n\r\n    this.line1.setAttribute( 'stroke-width', this.getStrokeWidth() );\r\n    this.line2.setAttribute( 'stroke-width', this.getStrokeWidth() );\r\n    this.line3.setAttribute( 'stroke-width', this.getStrokeWidth() );\r\n\r\n    this.setHandles();\r\n    this.redrawLines();\r\n  }\r\n\r\n  /**\r\n   * @memberof ShapePeakBoundaries\r\n   * Redraws the vertical lines according to the positions.\r\n   * Position 0 is the left line, position 1 is the right line and position 2 is the center line\r\n   * @returns {ShapePeakBoundaries} The shape instance\r\n   */\r\n  redrawLines() {\r\n\r\n    var posLeft = this.computePosition( 0 );\r\n    var posRight = this.computePosition( 1 );\r\n    var posCenter = this.computePosition( 2 );\r\n\r\n    if ( posLeft.x && posRight.x && posCenter.x && this.posYPx ) {\r\n\r\n      var height = this.lineHeight;\r\n      this.rectBoundary.setAttribute( 'd', `M ${ posLeft.x } ${ this.posYPx - height } v ${ 2 * height } H ${ posRight.x } v ${ -2 * height }z` );\r\n      this.line1.setAttribute( 'x1', posLeft.x );\r\n      this.line1.setAttribute( 'x2', posLeft.x );\r\n\r\n      this.line2.setAttribute( 'x1', posRight.x );\r\n      this.line2.setAttribute( 'x2', posRight.x );\r\n\r\n      this.line3.setAttribute( 'x1', posCenter.x );\r\n      this.line3.setAttribute( 'x2', posCenter.x );\r\n\r\n      this._dom.setAttribute( 'x1', posLeft.x );\r\n      this._dom.setAttribute( 'x2', posRight.x );\r\n\r\n      this.redrawY( height );\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * @memberof ShapePeakBoundaries\r\n   * Redraws the vertical positions of the shape\r\n   * @returns {ShapePeakBoundaries} The shape instance\r\n   */\r\n  redrawY() {\r\n\r\n    if ( !this.posYPx ) {\r\n      return this;\r\n    }\r\n\r\n    var height = this.lineHeight;\r\n\r\n    this.line1.setAttribute( 'y1', this.posYPx - height );\r\n    this.line1.setAttribute( 'y2', this.posYPx + height );\r\n\r\n    this.line2.setAttribute( 'y1', this.posYPx - height );\r\n    this.line2.setAttribute( 'y2', this.posYPx + height );\r\n\r\n    this.line3.setAttribute( 'y1', this.posYPx - height );\r\n    this.line3.setAttribute( 'y2', this.posYPx + height );\r\n\r\n    this._dom.setAttribute( 'y1', this.posYPx );\r\n    this._dom.setAttribute( 'y2', this.posYPx );\r\n\r\n    return this;\r\n  }\r\n\r\n  setHandles() {\r\n\r\n    if ( !this.posYPx ) {\r\n      return;\r\n    }\r\n\r\n    var posLeft = this.computePosition( 0 );\r\n    var posRight = this.computePosition( 1 );\r\n    var posCenter = this.computePosition( 2 );\r\n\r\n    if ( posLeft.x && posRight.x && posCenter.x ) {\r\n\r\n      this.handles[ 1 ].setAttribute( 'x', posLeft.x );\r\n      this.handles[ 1 ].setAttribute( 'y', this.posYPx );\r\n\r\n      this.handles[ 2 ].setAttribute( 'x', posRight.x );\r\n      this.handles[ 2 ].setAttribute( 'y', this.posYPx );\r\n\r\n      this.handles[ 3 ].setAttribute( 'x', posCenter.x );\r\n      this.handles[ 3 ].setAttribute( 'y', this.posYPx );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @memberof ShapePeakBoundaries\r\n   * Sets the y position of the shape\r\n   * @param {Number} y - The y position in px\r\n   * @returns {ShapePeakBoundaries} The shape instance\r\n   */\r\n  setY( y ) {\r\n    this.posYPx = y;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * @memberof ShapePeakBoundaries\r\n   * Sets the height of the peak lines\r\n   * @param {Number} height - The height of the lines in px\r\n   * @returns {ShapePeakBoundaries} The shape instance\r\n   */\r\n  setLineHeight( height ) {\r\n    this.lineHeihgt = height;\r\n  }\r\n\r\n  handleMouseMoveImpl( e, deltaX, deltaY ) {\r\n\r\n    if ( this.isLocked() ) {\r\n      return;\r\n    }\r\n\r\n    var posLeft = this.getPosition( 0 );\r\n    var posRight = this.getPosition( 1 );\r\n    var posCenter = this.getPosition( 2 );\r\n\r\n    switch ( this.handleSelected ) {\r\n\r\n      case 1: // left\r\n        posLeft.deltaPosition( 'x', deltaX, this.getXAxis() );\r\n\r\n        if ( Math.abs( posCenter.x - posRight.x ) > Math.abs( posRight.x - posLeft.x ) || Math.abs( posCenter.x - posLeft.x ) > Math.abs( posRight.x - posLeft.x ) ) {\r\n          posCenter.x = posLeft.x + ( posRight.x - posLeft.x ) * 0.1;\r\n        }\r\n        break;\r\n\r\n      case 2: // left\r\n\r\n        posRight.deltaPosition( 'x', deltaX, this.getXAxis() );\r\n\r\n        if ( Math.abs( posCenter.x - posRight.x ) > Math.abs( posRight.x - posLeft.x ) || Math.abs( posCenter.x - posLeft.x ) > Math.abs( posRight.x - posLeft.x ) ) {\r\n          posCenter.x = posRight.x + ( posLeft.x - posRight.x ) * 0.1;\r\n        }\r\n\r\n        break;\r\n\r\n      case 3: // left\r\n\r\n        posCenter.deltaPosition( 'x', deltaX, this.getXAxis() );\r\n\r\n        if ( Math.abs( posCenter.x - posRight.x ) > Math.abs( posRight.x - posLeft.x ) || Math.abs( posCenter.x - posLeft.x ) > Math.abs( posRight.x - posLeft.x ) ) {\r\n          return;\r\n        }\r\n\r\n        break;\r\n\r\n    }\r\n\r\n    this.setLabelPosition( {\r\n      y: this.getLabelPosition( 0 ).y,\r\n      x: posCenter.x\r\n    } );\r\n\r\n    this.updateLabels();\r\n    this.redrawLines();\r\n    this.setHandles();\r\n  }\r\n\r\n  applyPosition() {\r\n\r\n    this.redrawLines();\r\n    return true;\r\n  }\r\n\r\n}\r\n\r\nexport default ShapePeakBoundaries;","import {\r\n  isNumeric\r\n} from '../graph.util.js';\r\n\r\nimport GraphShape from './graph.shape.js';\r\n\r\n/**\r\n * Represents a line\r\n * @extends Shape\r\n * @see Graph#newShape\r\n */\r\nclass ShapeHTML extends GraphShape {\r\n\r\n  constructor( graph, options ) {\r\n    super( graph, options );\r\n  }\r\n\r\n  /**\r\n   * Creates the DOM\r\n   * @private\r\n   * @return {Shape} The current shape\r\n   */\r\n  createDom() {\r\n\r\n    this._dom = document.createElement( 'div' );\r\n    //  this._dom.setAttribute( \"requiredExtensions\", \"http://www.w3.org/1999/xhtml\" );\r\n\r\n    this._dom.setAttribute( 'style', 'position: absolute' );\r\n    let div = document.createElement( 'div' );\r\n    this._dom.appendChild( div );\r\n    this.div = div;\r\n  }\r\n\r\n  /**\r\n   * Creates the handles\r\n   * @private\r\n   * @return {Shape} The current shape\r\n   */\r\n  createHandles() {\r\n\r\n  }\r\n\r\n  setHeight( height ) {\r\n    this.setProp( 'height', height );\r\n  }\r\n\r\n  setWidth( width ) {\r\n    this.setProp( 'width', width );\r\n  }\r\n\r\n  setContent( content ) {\r\n    this.setProp( 'content', content );\r\n  }\r\n\r\n  setRenderer( method ) {\r\n    this._renderer = method;\r\n  }\r\n\r\n  redraw() {\r\n\r\n    if ( this._renderer ) {\r\n      this._renderer( this.div );\r\n    } else {\r\n      this.div.innerHTML = this.getProp( 'content' );\r\n    }\r\n    super.redraw( ...arguments );\r\n  }\r\n\r\n  /**\r\n   * Recalculates the positions and applies them\r\n   * @private\r\n   * @return {Boolean} Whether the shape should be redrawn\r\n   */\r\n  applyPosition() {\r\n\r\n    var position = this.calculatePosition( 0 );\r\n\r\n    if ( !position || !isNumeric( position.x ) || !isNumeric( position.y ) ) {\r\n      return;\r\n    }\r\n    this._dom.style.left = `${position.x }px`;\r\n    this._dom.style.top = `${position.y }px`;\r\n\r\n    this.currentPosX = position.x;\r\n    this.currentPosY = position.y;\r\n\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Handles mouse move events\r\n   * @private\r\n   */\r\n  handleMouseMoveImpl( e, deltaX, deltaY, deltaXPx, deltaYPx ) {\r\n\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Sets the handle position\r\n   * @private\r\n   */\r\n  setHandles() {\r\n\r\n  }\r\n\r\n  isHTML() {\r\n    return true;\r\n  }\r\n}\r\n\r\nexport default ShapeHTML;","import EventEmitter from '../dependencies/eventEmitter/EventEmitter.js';\r\n\r\n/**\r\n * Represents a plugin\r\n * @interface\r\n */\r\nclass Plugin extends EventEmitter {\r\n\r\n  static\r\n  default () {\r\n    return {};\r\n  }\r\n\r\n  constructor( options ) {\r\n    super( ...arguments );\r\n    this.options = Object.assign( {}, Plugin.default(), this.constructor.default(), options );\r\n  }\r\n\r\n  /**\r\n   * Init function called by jsGraph on load\r\n   */\r\n  init( graph ) {\r\n    this.graph = graph;\r\n  }\r\n\r\n  /**\r\n   * Handles the mousedown event from jsGraph\r\n   * @param {Graph} graph - The graph instance\r\n   * @param {Number} x - The x position in px\r\n   * @param {Number} y - The y position in px\r\n   * @param {Event} e - The original event\r\n   * @param {SVGElement} target - The target element\r\n   */\r\n  onMouseDown() {}\r\n\r\n  /**\r\n   * Handles the mouseup event from jsGraph\r\n   * @param {Graph} graph - The graph instance\r\n   * @param {Number} x - The x position in px\r\n   * @param {Number} y - The y position in px\r\n   * @param {Event} e - The original event\r\n   * @param {SVGElement} target - The target element\r\n   */\r\n  onMouseUp() {}\r\n\r\n  /**\r\n   * Handles the mousemove event from jsGraph\r\n   * @param {Graph} graph - The graph instance\r\n   * @param {Number} x - The x position in px\r\n   * @param {Number} y - The y position in px\r\n   * @param {Event} e - The original event\r\n   * @param {SVGElement} target - The target element\r\n   */\r\n  onMouseMove() {}\r\n}\r\n\r\nexport default Plugin;","import Plugin from './graph.plugin.js';\r\n\r\n/**\r\n * Constructor for the drag plugin. Do not use this constructor directly.\r\n * @class PluginDrag\r\n * @implements Plugin\r\n */\r\nclass PluginDrag extends Plugin {\r\n\r\n  static\r\n  default () {\r\n    return {\r\n\r\n      dragX: true,\r\n      dragY: true,\r\n      persistanceX: false,\r\n      persistanceY: false\r\n\r\n    };\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   */\r\n  init( graph ) {\r\n\r\n    this.graph = graph;\r\n    this.time = null;\r\n    this.totaltime = 2000;\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   */\r\n  onMouseDown( graph, x, y, e, target ) {\r\n    this._draggingX = x;\r\n    this._draggingY = y;\r\n\r\n    this._lastDraggingX = this._draggingX;\r\n    this._lastDraggingY = this._draggingY;\r\n\r\n    this.stopAnimation = true;\r\n\r\n    this.moved = false;\r\n\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * @memberof PluginDrag\r\n   * @private\r\n   */\r\n  onMouseMove( graph, x, y, e, target ) {\r\n\r\n    var deltaX = x - this._draggingX;\r\n    var deltaY = y - this._draggingY;\r\n\r\n    if ( this.options.dragX ) {\r\n      graph._applyToAxes( function( axis ) {\r\n        axis.setCurrentMin( axis.getVal( axis.getMinPx() - deltaX ) );\r\n        axis.setCurrentMax( axis.getVal( axis.getMaxPx() - deltaX ) );\r\n      }, false, true, false );\r\n    }\r\n\r\n    if ( this.options.dragY ) {\r\n\r\n      graph._applyToAxes( function( axis ) {\r\n        axis.setCurrentMin( axis.getVal( axis.getMinPx() - deltaY ) );\r\n        axis.setCurrentMax( axis.getVal( axis.getMaxPx() - deltaY ) );\r\n      }, false, false, true );\r\n    }\r\n\r\n    this._lastDraggingX = this._draggingX;\r\n    this._lastDraggingY = this._draggingY;\r\n\r\n    this._draggingX = x;\r\n    this._draggingY = y;\r\n\r\n    this.moved = true;\r\n\r\n    this.time = Date.now();\r\n\r\n    this.emit( 'dragging' );\r\n\r\n    graph.draw( true );\r\n\r\n  }\r\n\r\n  onMouseUp( graph, x, y, e, target ) {\r\n\r\n    var dt = ( Date.now() - this.time );\r\n\r\n    if ( x == this._lastDraggingX || y == this._lastDraggingY ) {\r\n\r\n      if ( this.moved ) {\r\n        this.emit( 'dragged' );\r\n      }\r\n\r\n      return;\r\n    }\r\n\r\n    this.speedX = ( x - this._lastDraggingX ) / dt;\r\n    this.speedY = ( y - this._lastDraggingY ) / dt;\r\n\r\n    if ( isNaN( this.speedX ) || isNaN( this.speedY ) ) {\r\n      this.emit( 'dragged' );\r\n      return;\r\n    }\r\n\r\n    graph._applyToAxes( function( axis ) {\r\n      axis._pluginDragMin = axis.getCurrentMin();\r\n      axis._pluginDragMax = axis.getCurrentMax();\r\n    }, false, true, true );\r\n\r\n    this.stopAnimation = false;\r\n    this.accelerationX = -this.speedX / this.totaltime;\r\n    this.accelerationY = -this.speedY / this.totaltime;\r\n\r\n    if ( this.options.persistanceX || this.options.persistanceY ) {\r\n\r\n      this._persistanceMove( graph );\r\n\r\n    } else {\r\n\r\n      this.emit( 'dragged' );\r\n    }\r\n\r\n  }\r\n\r\n  _persistanceMove( graph ) {\r\n\r\n    var self = this;\r\n\r\n    if ( self.stopAnimation ) {\r\n      self.emit( 'dragged' );\r\n      return;\r\n    }\r\n\r\n    window.requestAnimationFrame( function() {\r\n\r\n      var dt = Date.now() - self.time;\r\n      var dx = ( 0.5 * self.accelerationX * dt + self.speedX ) * dt;\r\n      var dy = ( 0.5 * self.accelerationY * dt + self.speedY ) * dt;\r\n\r\n      if ( self.options.persistanceX ) {\r\n\r\n        graph._applyToAxes( function( axis ) {\r\n\r\n          axis.setCurrentMin( -axis.getRelVal( dx ) + axis._pluginDragMin );\r\n          axis.setCurrentMax( -axis.getRelVal( dx ) + axis._pluginDragMax );\r\n\r\n          axis.cacheCurrentMin();\r\n          axis.cacheCurrentMax();\r\n          axis.cacheInterval();\r\n\r\n        }, false, true, false );\r\n      }\r\n\r\n      if ( self.options.persistanceY ) {\r\n\r\n        graph._applyToAxes( function( axis ) {\r\n\r\n          axis.setCurrentMin( -axis.getRelVal( dy ) + axis._pluginDragMin );\r\n          axis.setCurrentMax( -axis.getRelVal( dy ) + axis._pluginDragMax );\r\n\r\n          axis.cacheCurrentMin();\r\n          axis.cacheCurrentMax();\r\n          axis.cacheInterval();\r\n\r\n        }, false, false, true );\r\n      }\r\n\r\n      graph.draw();\r\n\r\n      if ( dt < self.totaltime ) {\r\n        self.emit( 'dragging' );\r\n        self._persistanceMove( graph );\r\n      } else {\r\n        self.emit( 'dragged' );\r\n      }\r\n\r\n    } );\r\n\r\n  }\r\n}\r\n\r\nexport default PluginDrag;","import * as util from '../graph.util.js';\r\n\r\nimport Plugin from './graph.plugin.js';\r\n\r\n/**\r\n * @class PluginShape\r\n * @implements Plugin\r\n */\r\nclass PluginShape extends Plugin {\r\n\r\n  constructor() {\r\n    super( ...arguments );\r\n  }\r\n\r\n  static\r\n  default () {\r\n    return {};\r\n  }\r\n\r\n  /**\r\n   * Init method\r\n   * @private\r\n   */\r\n  init( graph, options ) {\r\n\r\n    super.init( graph, options );\r\n    this.shapeType = options.type;\r\n  }\r\n\r\n  /**\r\n   * Sets the shape that is created by the plugin\r\n   * @param {String} shapeType - The type of the shape\r\n   */\r\n  setShape( shapeType ) {\r\n    this.shapeInfo.shapeType = shapeType;\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   */\r\n  onMouseDown( graph, x, y, e, target ) {\r\n\r\n    if ( !this.shapeType && !this.options.url ) {\r\n      return;\r\n    }\r\n\r\n    var self = this,\r\n      selfPlugin = this;\r\n\r\n    var xVal, yVal;\r\n\r\n    this.count = this.count || 0;\r\n\r\n    x -= graph.getPaddingLeft();\r\n    y -= graph.getPaddingTop();\r\n\r\n    xVal = graph.getXAxis().getVal( x );\r\n    yVal = graph.getYAxis().getVal( y );\r\n\r\n    var shapeInfo = {\r\n\r\n      position: [ {\r\n        x: xVal,\r\n        y: yVal\r\n      }, {\r\n        x: xVal,\r\n        y: yVal\r\n      } ],\r\n\r\n      onChange: function( newData ) {\r\n        graph.triggerEvent( 'onAnnotationChange', newData );\r\n      },\r\n\r\n      locked: false,\r\n      selectable: true,\r\n      resizable: true,\r\n      movable: true\r\n    };\r\n\r\n    let shapeProperties = this.options.properties;\r\n\r\n    util.extend( true, shapeInfo, this.options );\r\n\r\n    this.emit( 'beforeNewShape', e, shapeInfo );\r\n\r\n    if ( this.graph.prevent( false ) ) {\r\n      return;\r\n    }\r\n\r\n    var shape = graph.newShape( shapeInfo.type, shapeInfo, false, shapeProperties );\r\n\r\n    this.emit( 'createdShape', e, shape );\r\n\r\n    if ( shape ) {\r\n      self.currentShape = shape;\r\n      self.currentShapeEvent = e;\r\n    }\r\n\r\n    graph.once( 'mouseUp', () => {\r\n      if ( !this.currentShape ) { // The mouse has moved\r\n        self.emit( 'newShape', e, shape );\r\n      }\r\n    } );\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   */\r\n  onMouseMove( graph, x, y, e ) {\r\n\r\n    if ( this.currentShape ) {\r\n      this.count++;\r\n\r\n      var shape = this.currentShape;\r\n\r\n      this.currentShape = false;\r\n\r\n      if ( graph.selectedSerie && !shape.serie ) {\r\n        shape.setSerie( graph.selectedSerie );\r\n      }\r\n\r\n      shape.resizing = true;\r\n\r\n      if ( shape.options && shape.options.onCreate ) {\r\n        shape.options.onCreate.call( shape );\r\n      }\r\n\r\n      shape.draw();\r\n      graph.selectShape( shape );\r\n      shape.handleMouseDown( this.currentShapeEvent, true );\r\n      shape.handleSelected = this.options.handleSelected || 1;\r\n      shape.handleMouseMove( e, true );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   */\r\n  onMouseUp() {\r\n\r\n    if ( this.currentShape ) {\r\n      // No need to kill it as it hasn't been actually put in the dom right now\r\n\r\n      // Norman 30 July 2017: Yes but it's added in the jsGraph stack. We need to remove it. See #176\r\n      // From now on killing the shape will result in removing it from the stack as well.\r\n      this.currentShape.kill();\r\n      this.currentShape = false;\r\n    }\r\n  }\r\n\r\n}\r\n\r\nexport default PluginShape;","import * as util from '../graph.util.js';\r\n\r\nimport Plugin from './graph.plugin.js';\r\n\r\n/**\r\n * @extends Plugin\r\n */\r\nclass PluginSelectScatter extends Plugin {\r\n\r\n  constructor() {\r\n    super( ...arguments );\r\n  }\r\n\r\n  static\r\n  default () {\r\n    return {};\r\n  }\r\n  /**\r\n   * Init method\r\n   * @private\r\n   */\r\n  init( graph, options ) {\r\n\r\n    this._path = document.createElementNS( graph.ns, 'path' );\r\n\r\n    util.setAttributeTo( this._path, {\r\n      'display': 'none',\r\n      'fill': 'rgba(0,0,0,0.1)',\r\n      'stroke': 'rgba(0,0,0,1)',\r\n      'shape-rendering': 'crispEdges',\r\n      'x': 0,\r\n      'y': 0,\r\n      'height': 0,\r\n      'width': 0,\r\n      'd': ''\r\n    } );\r\n\r\n    this.graph = graph;\r\n\r\n    graph.dom.appendChild( this._path );\r\n  }\r\n\r\n  /**\r\n   * Assigns the scatter serie that should be selected to the plugin\r\n   * @param {ScatterSerie} serie - The serie\r\n   * @return {PluginSelectScatter} The current plugin instance\r\n   */\r\n  setSerie( serie ) {\r\n    this.serie = serie;\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   */\r\n  onMouseDown( graph, x, y, e, mute ) {\r\n\r\n    if ( !this.serie ) {\r\n      return;\r\n    }\r\n\r\n    this.path = `M ${ x } ${ y } `;\r\n    this.currentX = x;\r\n    this.currentY = y;\r\n\r\n    this.xs = [ this.serie.getXAxis().getVal( x - graph.getPaddingLeft() ) ];\r\n    this.ys = [ this.serie.getYAxis().getVal( y - graph.getPaddingTop() ) ];\r\n    this._path.setAttribute( 'd', '' );\r\n    this._path.setAttribute( 'display', 'block' );\r\n\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   */\r\n  onMouseMove( graph, x, y, e, mute ) {\r\n\r\n    if ( Math.pow( ( x - this.currentX ), 2 ) + Math.pow( ( y - this.currentY ), 2 ) > 25 ) {\r\n\r\n      this.path += ` L ${ x } ${ y } `;\r\n      this.currentX = x;\r\n      this.currentY = y;\r\n\r\n      this.xs.push( this.serie.getXAxis().getVal( x - graph.getPaddingLeft() ) );\r\n      this.ys.push( this.serie.getYAxis().getVal( y - graph.getPaddingTop() ) );\r\n\r\n      this._path.setAttribute( 'd', `${this.path } z` );\r\n\r\n      this.findPoints();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   */\r\n  findPoints() {\r\n\r\n    var data = this.serie.waveform;\r\n    var selected = [];\r\n    var counter = 0,\r\n      j2;\r\n    for ( var i = 0, l = data.getLength(); i < l; i += 1 ) {\r\n\r\n      counter = 0;\r\n      for ( var j = 0, k = this.xs.length; j < k; j += 1 ) {\r\n\r\n        if ( j == k - 1 ) {\r\n          j2 = 0;\r\n        } else {\r\n          j2 = j + 1;\r\n        }\r\n\r\n        if ( ( ( this.ys[ j ] < data.getY( i ) && this.ys[ j2 ] > data.getY( i ) ) || ( this.ys[ j ] > data.getY( i ) && this.ys[ j2 ] < data.getY( i ) ) ) ) {\r\n\r\n          if ( data.getX( i ) > ( ( data.getY( i ) - this.ys[ j ] ) / ( this.ys[ j2 ] - this.ys[ j ] ) ) * ( this.xs[ j2 ] - this.xs[ j ] ) + this.xs[ j ] ) {\r\n            counter++;\r\n          }\r\n        }\r\n      }\r\n\r\n      if ( counter % 2 == 1 ) {\r\n        selected.push( i );\r\n        this.serie.selectPoint( i, true, 'selected' );\r\n      } else {\r\n        this.serie.unselectPoint( i );\r\n      }\r\n\r\n    }\r\n\r\n    this.selected = selected;\r\n    this.emit( 'selectionProcess', selected );\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   */\r\n  onMouseUp( graph, x, y, e ) {\r\n    this._path.setAttribute( 'display', 'none' );\r\n    this.emit( 'selectionEnd', this.selected );\r\n  }\r\n\r\n}\r\n\r\nexport default PluginSelectScatter;","import * as util from '../graph.util.js';\r\n\r\nimport Plugin from './graph.plugin.js';\r\n\r\n/**\r\n * @class PluginZoom\r\n * @implements Plugin\r\n */\r\nclass PluginZoom extends Plugin {\r\n\r\n  constructor() {\r\n    super( ...arguments );\r\n  }\r\n\r\n  static\r\n  default () {\r\n\r\n    return {\r\n      'axes': 'all'\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Init method\r\n   * @private\r\n   */\r\n  init( graph, options ) {\r\n\r\n    this._zoomingGroup = document.createElementNS( graph.ns, 'g' );\r\n    this._zoomingSquare = document.createElementNS( graph.ns, 'rect' );\r\n    this._zoomingSquare.setAttribute( 'display', 'none' );\r\n\r\n    util.setAttributeTo( this._zoomingSquare, {\r\n      'display': 'none',\r\n      'fill': 'rgba(171,12,12,0.2)',\r\n      'stroke': 'rgba(171,12,12,1)',\r\n      'shape-rendering': 'crispEdges',\r\n      'x': 0,\r\n      'y': 0,\r\n      'height': 0,\r\n      'width': 0,\r\n      'pointer-events': 'none'\r\n    } );\r\n\r\n    this.graph = graph;\r\n    graph.groupEvent.appendChild( this._zoomingGroup );\r\n    this._zoomingGroup.appendChild( this._zoomingSquare );\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   */\r\n  onMouseDown( graph, x, y, e, mute ) {\r\n\r\n    var zoomMode = this.options.zoomMode;\r\n\r\n    if ( !zoomMode ) {\r\n      return;\r\n    }\r\n\r\n    this._zoomingMode = zoomMode;\r\n\r\n    if ( x === undefined ) {\r\n      this._backedUpZoomMode = this._zoomingMode;\r\n      this._zoomingMode = 'y';\r\n      x = 0;\r\n    }\r\n\r\n    if ( y === undefined ) {\r\n      this._backedUpZoomMode = this._zoomingMode;\r\n      this._zoomingMode = 'x';\r\n      y = 0;\r\n    }\r\n\r\n    this._zoomingXStart = x;\r\n    this._zoomingYStart = y;\r\n    this.x1 = x - graph.getPaddingLeft();\r\n    this.y1 = y - graph.getPaddingTop();\r\n\r\n    this._zoomingSquare.setAttribute( 'width', 0 );\r\n    this._zoomingSquare.setAttribute( 'height', 0 );\r\n    this._zoomingSquare.setAttribute( 'display', 'block' );\r\n\r\n    switch ( this._zoomingMode ) {\r\n\r\n      case 'x':\r\n        this._zoomingSquare.setAttribute( 'y', graph.options.paddingTop );\r\n        this._zoomingSquare.setAttribute( 'height', graph.getDrawingHeight() - graph.shift.bottom );\r\n        break;\r\n\r\n      case 'y':\r\n        this._zoomingSquare.setAttribute( 'x', graph.options.paddingLeft /* + this.shift[1]*/ );\r\n        this._zoomingSquare.setAttribute( 'width', graph.getDrawingWidth() /* - this.shift[1] - this.shift[2]*/ );\r\n        break;\r\n\r\n      case 'forceY2':\r\n\r\n        this.y2 = graph.getYAxis().getPx( this.options.forcedY ) + graph.options.paddingTop;\r\n\r\n        break;\r\n\r\n    }\r\n\r\n    if ( this.options.onZoomStart && !mute ) {\r\n      this.options.onZoomStart( graph, x, y, e, mute );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   */\r\n  onMouseMove( graph, x, y, e, mute ) {\r\n\r\n    //\tthis._zoomingSquare.setAttribute('display', 'none');\r\n\r\n    //\tthis._zoomingSquare.setAttribute('transform', 'translate(' + Math.random() + ', ' + Math.random() + ') scale(10, 10)');\r\n    switch ( this._zoomingMode ) {\r\n\r\n      case 'xy':\r\n        this._zoomingSquare.setAttribute( 'x', Math.min( this._zoomingXStart, x ) );\r\n        this._zoomingSquare.setAttribute( 'y', Math.min( this._zoomingYStart, y ) );\r\n        this._zoomingSquare.setAttribute( 'width', Math.abs( this._zoomingXStart - x ) );\r\n        this._zoomingSquare.setAttribute( 'height', Math.abs( this._zoomingYStart - y ) );\r\n\r\n        break;\r\n\r\n      case 'forceY2':\r\n        this._zoomingSquare.setAttribute( 'y', Math.min( this._zoomingYStart, this.y2 ) );\r\n        this._zoomingSquare.setAttribute( 'height', Math.abs( this._zoomingYStart - this.y2 ) );\r\n        this._zoomingSquare.setAttribute( 'x', Math.min( this._zoomingXStart, x ) );\r\n        this._zoomingSquare.setAttribute( 'width', Math.abs( this._zoomingXStart - x ) );\r\n\r\n        break;\r\n\r\n      case 'x':\r\n        this._zoomingSquare.setAttribute( 'x', Math.min( this._zoomingXStart, x ) );\r\n        this._zoomingSquare.setAttribute( 'width', Math.abs( this._zoomingXStart - x ) );\r\n\r\n        break;\r\n\r\n      case 'y':\r\n        this._zoomingSquare.setAttribute( 'y', Math.min( this._zoomingYStart, y ) );\r\n        this._zoomingSquare.setAttribute( 'height', Math.abs( this._zoomingYStart - y ) );\r\n        break;\r\n\r\n    }\r\n\r\n    if ( this.options.onZoomMove && !mute ) {\r\n\r\n      this.options.onZoomMove( graph, x, y, e, mute );\r\n    }\r\n    //\t\tthis._zoomingSquare.setAttribute('display', 'block');\r\n\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   */\r\n  onMouseUp( graph, x, y, e, mute ) {\r\n    var self = this;\r\n    this.removeZone();\r\n\r\n    var _x = x - graph.options.paddingLeft;\r\n    var _y = y - graph.options.paddingTop;\r\n\r\n    this.emit( 'beforeZoom', {\r\n      graph: graph,\r\n      x: x,\r\n      y: y,\r\n      e: e,\r\n      mute: mute\r\n    } );\r\n\r\n    if ( graph.prevent( false ) ) {\r\n\r\n      // This doesn't work !\r\n      //graph.prevent( true ); // Cancel future click event\r\n      return;\r\n    }\r\n\r\n    if ( ( x - this._zoomingXStart == 0 && this._zoomingMode != 'y' ) || ( y - this._zoomingYStart == 0 && this._zoomingMode != 'x' ) ) {\r\n      return;\r\n    }\r\n\r\n    if ( this.options.transition || this.options.smooth ) {\r\n\r\n      let modeX = false,\r\n        modeY = false;\r\n\r\n      if ( this._zoomingMode == 'x' || this._zoomingMode == 'xy' || this._zoomingMode == 'forceY2' ) {\r\n\r\n        this.fullX = false;\r\n        this.toAxes( function( axis ) {\r\n\r\n          axis._pluginZoomMin = axis.getCurrentMin();\r\n          axis._pluginZoomMax = axis.getCurrentMax();\r\n\r\n          axis._pluginZoomMinFinal = Math.min( axis.getVal( _x ), axis.getVal( self.x1 ) );\r\n          axis._pluginZoomMaxFinal = Math.max( axis.getVal( _x ), axis.getVal( self.x1 ) );\r\n        }, false, true, false );\r\n\r\n        modeX = true;\r\n\r\n      }\r\n\r\n      if ( this._zoomingMode == 'y' || this._zoomingMode == 'xy' ) {\r\n\r\n        this.fullY = false;\r\n        this.toAxes( function( axis ) {\r\n\r\n          axis._pluginZoomMin = axis.getCurrentMin();\r\n          axis._pluginZoomMax = axis.getCurrentMax();\r\n\r\n          axis._pluginZoomMinFinal = Math.min( axis.getVal( _y ), axis.getVal( self.y1 ) );\r\n          axis._pluginZoomMaxFinal = Math.max( axis.getVal( _y ), axis.getVal( self.y1 ) );\r\n\r\n        }, false, false, true );\r\n\r\n        modeY = true;\r\n      }\r\n\r\n      if ( this._zoomingMode == 'forceY2' ) {\r\n\r\n        this.fullY = false;\r\n        this.toAxes( function( axis ) {\r\n\r\n          axis._pluginZoomMin = axis.getCurrentMin();\r\n          axis._pluginZoomMax = axis.getCurrentMax();\r\n\r\n          axis._pluginZoomMinFinal = Math.min( axis.getVal( self.y2 ), axis.getVal( self.y1 ) );\r\n          axis._pluginZoomMaxFinal = Math.max( axis.getVal( self.y2 ), axis.getVal( self.y1 ) );\r\n\r\n        }, false, false, true );\r\n\r\n        modeY = true;\r\n      }\r\n\r\n      this.transition( modeX, modeY, 'zoomEnd' );\r\n\r\n    } else {\r\n\r\n      switch ( this._zoomingMode ) {\r\n        case 'x':\r\n          this.fullX = false;\r\n          this.toAxes( '_doZoom', [ _x, this.x1 ], true, false );\r\n          break;\r\n        case 'y':\r\n          this.fullY = false;\r\n          this.toAxes( '_doZoom', [ _y, this.y1 ], false, true );\r\n          break;\r\n        case 'xy':\r\n          this.fullX = false;\r\n          this.fullY = false;\r\n          this.toAxes( '_doZoom', [ _x, this.x1 ], true, false );\r\n          this.toAxes( '_doZoom', [ _y, this.y1 ], false, true );\r\n          break;\r\n\r\n        case 'forceY2':\r\n\r\n          this.fullX = false;\r\n          this.fullY = false;\r\n\r\n          this.toAxes( '_doZoom', [ _x, this.x1 ], true, false );\r\n          this.toAxes( '_doZoom', [ this.y1, this.y2 ], false, true );\r\n\r\n          break;\r\n      }\r\n\r\n      //  graph.prevent( true ); // WHat are you doing ??\r\n      graph.draw();\r\n\r\n      if ( this._backedUpZoomMode ) {\r\n        this._zoomingMode = this._backedUpZoomMode;\r\n      }\r\n\r\n      this.emit( 'zoomed' );\r\n\r\n      graph.pluginYieldActiveState();\r\n\r\n    }\r\n\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   */\r\n  removeZone() {\r\n\r\n    this._zoomingSquare.setAttribute( 'display', 'none' );\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   */\r\n  onMouseWheel( delta, e, coordX, coordY, options ) {\r\n\r\n    if ( !options ) {\r\n      options = {};\r\n    }\r\n\r\n    if ( !options.baseline ) {\r\n      options.baseline = 0;\r\n    }\r\n\r\n    let baseline = options.baseline;\r\n\r\n    if ( options.baseline == 'mousePosition' ) {\r\n      baseline = this.graph.getYAxis().getVal( coordY );\r\n    }\r\n\r\n    /*var serie;\r\n    if ( ( serie = this.graph.getSelectedSerie() ) ) {\r\n\r\n      if ( serie.getYAxis().handleMouseWheel( delta, e ) ) {\r\n        return;\r\n      }\r\n    }*/\r\n\r\n    var doX = ( options.direction == 'x' );\r\n    var doY = !( options.direction !== 'y' );\r\n\r\n    this.toAxes( 'handleMouseWheel', [ delta, e, baseline ], doX, doY );\r\n\r\n    this.graph.drawSeries();\r\n\r\n  }\r\n\r\n  /**\r\n   * @private\r\n   */\r\n  onDblClick( x, y, e, pref, mute ) {\r\n\r\n    var graph = this.graph;\r\n    this.emit( 'beforeDblClick', {\r\n      graph: graph,\r\n      x: x,\r\n      y: y,\r\n      pref: pref,\r\n      e: e,\r\n      mute: mute\r\n    } );\r\n\r\n    if ( graph.prevent( false ) ) {\r\n      return;\r\n    }\r\n\r\n    if ( this.options.transition || this.options.smooth ) {\r\n\r\n      var modeX = false,\r\n        modeY = false;\r\n\r\n      if ( pref.mode == 'xtotal' || pref.mode == 'total' ) {\r\n\r\n        this.toAxes( function( axis ) {\r\n          axis._pluginZoomMin = axis.getCurrentMin();\r\n          axis._pluginZoomMax = axis.getCurrentMax();\r\n\r\n          axis._pluginZoomMinFinal = axis.getMinValue() - ( axis.options.axisDataSpacing.min * axis.getInterval() );\r\n          axis._pluginZoomMaxFinal = axis.getMaxValue() + ( axis.options.axisDataSpacing.max * axis.getInterval() );\r\n\r\n        }, false, true, false );\r\n\r\n        modeX = true;\r\n\r\n      }\r\n\r\n      if ( pref.mode == 'ytotal' || pref.mode == 'total' ) {\r\n\r\n        this.toAxes( function( axis ) {\r\n\r\n          axis._pluginZoomMin = axis.getCurrentMin();\r\n          axis._pluginZoomMax = axis.getCurrentMax();\r\n\r\n          axis._pluginZoomMinFinal = axis.getMinValue() - ( axis.options.axisDataSpacing.min * axis.getInterval() );\r\n          axis._pluginZoomMaxFinal = axis.getMaxValue() + ( axis.options.axisDataSpacing.max * axis.getInterval() );\r\n\r\n        }, false, false, true );\r\n\r\n        modeY = true;\r\n\r\n      }\r\n\r\n      let x, y;\r\n\r\n      if ( pref.mode == 'gradualX' || pref.mode == 'gradualY' || pref.mode == 'gradual' || pref.mode == 'gradualXY' ) {\r\n\r\n        x = false,\r\n          y = false;\r\n\r\n        if ( pref.mode == 'gradualX' || pref.mode == 'gradual' || pref.mode == 'gradualXY' ) {\r\n          x = true;\r\n          modeX = true;\r\n        }\r\n\r\n        if ( pref.mode == 'gradualY' || pref.mode == 'gradual' || pref.mode == 'gradualXY' ) {\r\n          y = true;\r\n          modeY = true;\r\n        }\r\n\r\n        this.toAxes( function( axis ) {\r\n\r\n          axis._pluginZoomMin = axis.getCurrentMin();\r\n          axis._pluginZoomMax = axis.getCurrentMax();\r\n\r\n          axis._pluginZoomMinFinal = axis.getCurrentMin() - ( axis.getCurrentMax() - axis.getCurrentMin() );\r\n          axis._pluginZoomMaxFinal = axis.getCurrentMax() + ( axis.getCurrentMax() - axis.getCurrentMin() );\r\n\r\n        }, false, x, y );\r\n\r\n      }\r\n\r\n      this.transition( modeX, modeY, 'dblClick' );\r\n      return;\r\n    }\r\n\r\n    var xAxis = this.graph.getXAxis(),\r\n      yAxis = this.graph.getYAxis();\r\n\r\n    if ( pref.mode == 'xtotal' ) {\r\n\r\n      this.toAxes( 'setMinMaxToFitSeries', null, true, false );\r\n      this.fullX = true;\r\n      this.fullY = false;\r\n\r\n    } else if ( pref.mode == 'ytotal' ) {\r\n\r\n      this.toAxes( 'setMinMaxToFitSeries', null, false, true );\r\n      this.fullX = false;\r\n      this.fullY = true;\r\n\r\n    } else if ( pref.mode == 'total' ) {\r\n\r\n      this.toAxes( 'setMinMaxToFitSeries', null, true, true );\r\n\r\n      this.fullX = true;\r\n      this.fullY = true;\r\n      // Nothing to do here\r\n      /*        this.graph._applyToAxes( function( axis ) {\r\n\r\n          axis.emit( 'zoom', axis.currentAxisMin, axis.currentAxisMax, axis );\r\n\r\n        }, null, true, true );\r\n*/\r\n    } else {\r\n\r\n      x -= this.graph.options.paddingLeft;\r\n      y -= this.graph.options.paddingTop;\r\n\r\n      var\r\n        xMin = xAxis.getCurrentMin(),\r\n        xMax = xAxis.getCurrentMax(),\r\n        xActual = xAxis.getVal( x ),\r\n        diffX = xMax - xMin,\r\n\r\n        yMin = yAxis.getCurrentMin(),\r\n        yMax = yAxis.getCurrentMax(),\r\n        yActual = yAxis.getVal( y ),\r\n        diffY = yMax - yMin;\r\n\r\n      if ( pref.mode == 'gradualXY' || pref.mode == 'gradualX' ) {\r\n\r\n        var ratio = ( xActual - xMin ) / ( xMax - xMin );\r\n        xMin = Math.max( xAxis.getMinValue() - xAxis.getInterval() * xAxis.options.axisDataSpacing.min, xMin - diffX * ratio );\r\n        xMax = Math.min( xAxis.getMaxValue() + xAxis.getInterval() * xAxis.options.axisDataSpacing.max, xMax + diffX * ( 1 - ratio ) );\r\n        xAxis.setCurrentMin( xMin );\r\n        xAxis.setCurrentMax( xMax );\r\n\r\n        if ( xAxis.options.onZoom ) {\r\n          xAxis.options.onZoom( xMin, xMax );\r\n        }\r\n\r\n        xAxis.cacheCurrentMin();\r\n        xAxis.cacheCurrentMax();\r\n        xAxis.cacheInterval();\r\n\r\n      }\r\n\r\n      if ( pref.mode == 'gradualXY' || pref.mode == 'gradualY' ) {\r\n\r\n        var ratio = ( yActual - yMin ) / ( yMax - yMin );\r\n        yMin = Math.max( yAxis.getMinValue() - yAxis.getInterval() * yAxis.options.axisDataSpacing.min, yMin - diffY * ratio );\r\n        yMax = Math.min( yAxis.getMaxValue() + yAxis.getInterval() * yAxis.options.axisDataSpacing.max, yMax + diffY * ( 1 - ratio ) );\r\n        yAxis.setCurrentMin( yMin );\r\n        yAxis.setCurrentMax( yMax );\r\n\r\n        if ( yAxis.options.onZoom ) {\r\n          yAxis.options.onZoom( yMin, yMax );\r\n        }\r\n\r\n        yAxis.cacheCurrentMin();\r\n        yAxis.cacheCurrentMax();\r\n        yAxis.cacheInterval();\r\n\r\n      }\r\n\r\n    }\r\n\r\n    graph.pluginYieldActiveState();\r\n\r\n    this.graph.draw();\r\n    /*\r\n        this.emit( \"dblClick\", {\r\n          graph: graph,\r\n          x: x,\r\n          y: y,\r\n          pref: pref,\r\n          e: e,\r\n          mute: mute\r\n        } );\r\n\r\n        if ( this.options.onDblClick && !mute ) {\r\n          this.options.onDblClick( graph, x, y, e, mute );\r\n        }*/\r\n\r\n  }\r\n\r\n  transition( modeX, modeY, eventName ) {\r\n\r\n    var self = this,\r\n      maxTime = 500;\r\n\r\n    if ( !self.gradualUnzoomStart ) {\r\n      self.gradualUnzoomStart = Date.now();\r\n    }\r\n\r\n    window.requestAnimationFrame( function() {\r\n\r\n      var dt = Date.now() - self.gradualUnzoomStart;\r\n\r\n      if ( dt > maxTime ) {\r\n        dt = maxTime;\r\n      }\r\n      var progress = Math.sin( dt / maxTime * Math.PI / 2 );\r\n\r\n      self.toAxes( function( axis ) {\r\n\r\n        axis.setCurrentMin( axis._pluginZoomMin + ( axis._pluginZoomMinFinal - axis._pluginZoomMin ) * progress );\r\n        axis.setCurrentMax( axis._pluginZoomMax + ( axis._pluginZoomMaxFinal - axis._pluginZoomMax ) * progress );\r\n\r\n        axis.cacheCurrentMin();\r\n        axis.cacheCurrentMax();\r\n        axis.cacheInterval();\r\n\r\n      }, false, modeX, modeY );\r\n\r\n      self.graph.draw();\r\n\r\n      if ( dt < maxTime ) {\r\n\r\n        self.transition( modeX, modeY, eventName );\r\n        self.emit( 'zooming' );\r\n\r\n      } else {\r\n\r\n        self.emit( 'zoomed' );\r\n        self.graph.pluginYieldActiveState();\r\n\r\n        if ( eventName ) {\r\n          self.emit( eventName );\r\n        }\r\n        self.gradualUnzoomStart = 0;\r\n\r\n      }\r\n\r\n    } );\r\n  }\r\n\r\n  isFullX() {\r\n    return this.fullX;\r\n  }\r\n\r\n  isFullY() {\r\n    return this.fullY;\r\n  }\r\n\r\n  toAxes( func, params, tb, lr ) {\r\n\r\n    var axes = this.options.axes;\r\n\r\n    if ( !axes || ( axes == 'serieSelected' && !this.graph.getSelectedSerie() ) ) {\r\n      axes = 'all';\r\n    }\r\n\r\n    switch ( axes ) {\r\n\r\n      case 'all':\r\n        this.graph._applyToAxes.apply( this.graph, arguments );\r\n        break;\r\n\r\n      case 'serieSelected':\r\n\r\n        var serie = this.graph.getSelectedSerie();\r\n        if ( serie ) {\r\n\r\n          if ( tb ) {\r\n\r\n            if ( typeof func == 'string' ) {\r\n              serie.getXAxis()[ func ].apply( serie.getXAxis(), params );\r\n            } else {\r\n              func.apply( serie.getXAxis(), params );\r\n            }\r\n          }\r\n\r\n          if ( lr ) {\r\n\r\n            if ( typeof func == 'string' ) {\r\n              serie.getYAxis()[ func ].apply( serie.getYAxis(), params );\r\n            } else {\r\n              func.apply( serie.getYAxis(), params );\r\n            }\r\n\r\n          }\r\n        }\r\n\r\n        break;\r\n\r\n      default:\r\n\r\n        if ( !Array.isArray( axes ) ) {\r\n          axes = [ axes ];\r\n        }\r\n\r\n        for ( let axis of axes ) {\r\n\r\n          if ( axis.isX() && tb ) { // Not the best check\r\n\r\n            if ( typeof func == 'string' ) {\r\n              axis[ func ].apply( axis, params );\r\n            } else {\r\n              func.apply( axis, params );\r\n            }\r\n\r\n          } else if ( axis.isY() && lr ) { // Not the best check\r\n\r\n            if ( typeof func == 'string' ) {\r\n              axis[ func ].apply( axis, params );\r\n            } else {\r\n              func.apply( axis, params );\r\n            }\r\n\r\n          }\r\n        }\r\n        break;\r\n    }\r\n  }\r\n\r\n}\r\n\r\nexport default PluginZoom;","var memory = {},\r\n  memoryHead = {},\r\n  memoryCount = {},\r\n  memoryLimit = {};\r\n\r\nfunction emptyMemory( store ) {\r\n  memory[ store ] = {};\r\n  memoryCount[ store ] = 0;\r\n}\r\n\r\nfunction createStoreMemory( store, limit ) {\r\n  limit = limit || 50;\r\n  if ( !memory[ store ] ) {\r\n    memory[ store ] = {};\r\n    memoryCount[ store ] = 0;\r\n  }\r\n\r\n  memoryLimit[ store ] = limit;\r\n}\r\n\r\nfunction getFromMemory( store, index ) {\r\n  var obj, head;\r\n\r\n  if ( memory[ store ] && memory[ store ][ index ] ) {\r\n\r\n    head = memoryHead[ store ];\r\n\r\n    obj = memory[ store ][ index ];\r\n    obj.prev = head;\r\n    obj.next = head.next;\r\n    head.next.prev = obj;\r\n    head.next = obj;\r\n\r\n    memoryHead[ store ] = obj;\r\n    return obj.data;\r\n  }\r\n}\r\n\r\nfunction storeInMemory( store, index, data ) {\r\n\r\n  var toStore, toDelete, head;\r\n  if ( memory[ store ] && memoryCount[ store ] !== undefined && memoryLimit[ store ] ) {\r\n    head = memoryHead[ store ];\r\n\r\n    if ( memory[ store ][ index ] ) {\r\n\r\n      getFromMemory( store, index );\r\n      memory[ store ][ index ].data.data = data;\r\n      memory[ store ][ index ].data.timeout = Date.now();\r\n\r\n    } else {\r\n\r\n      toStore = {\r\n        data: {\r\n          data: data,\r\n          timeout: Date.now()\r\n        }\r\n      };\r\n\r\n      if ( typeof head == 'undefined' ) {\r\n        toStore.prev = toStore;\r\n        toStore.next = toStore;\r\n      } else {\r\n        toStore.prev = head.prev;\r\n        toStore.next = head.next;\r\n        head.next.prev = toStore;\r\n        head.next = toStore;\r\n      }\r\n\r\n      memoryHead[ store ] = toStore;\r\n      memory[ store ][ index ] = toStore;\r\n      memoryCount[ store ]++;\r\n    }\r\n\r\n    // Remove oldest one\r\n    if ( memoryCount[ store ] > memoryLimit[ store ] && head ) {\r\n      toDelete = head.next;\r\n      head.next.next.prev = head;\r\n      head.next = head.next.next;\r\n      toDelete.next.next = undefined;\r\n      toDelete.next.prev = undefined;\r\n      memoryCount[ store ]--;\r\n    }\r\n\r\n    return data;\r\n  }\r\n}\r\n\r\nexport function create( store, limitMemory ) {\r\n  createStoreMemory( store, limitMemory );\r\n}\r\n\r\nexport function get( store, index ) {\r\n  var result;\r\n  if ( ( result = getFromMemory( store, index ) ) != undefined ) {\r\n    return result;\r\n  }\r\n}\r\n\r\nexport function store( store, index, value ) {\r\n  storeInMemory( store, index, value );\r\n  return value;\r\n}\r\n\r\nexport function empty( store ) {\r\n  emptyMemory( store );\r\n}\r\n\r\nexport function exist( store ) {\r\n  return ( memory[ store ] );\r\n}\r\n\r\nexport default get;","import Graph from '../graph.core.js';\r\nimport LRU from '../graph.lru.js';\r\nimport * as util from '../graph.util.js';\r\n\r\nimport Plugin from './graph.plugin.js';\r\n\r\n/**\r\n * @class PluginTimeSerieManager\r\n * @implements Plugin\r\n */\r\nclass PluginTimeSerieManager extends Plugin {\r\n\r\n  constructor() {\r\n\r\n    super( ...arguments );\r\n\r\n    this.series = [];\r\n    this.plugins = [];\r\n    this.currentSlots = {};\r\n\r\n    this.requestLevels = new Map();\r\n    this.update = ( noRecalculate, force ) => {\r\n\r\n      this.series.forEach( function( serie ) {\r\n\r\n        this.updateSerie( serie, noRecalculate );\r\n\r\n      } );\r\n\r\n      if ( !noRecalculate ) {\r\n        this.recalculateSeries( force );\r\n      }\r\n    };\r\n\r\n  }\r\n\r\n  static\r\n  default () {\r\n\r\n    return {\r\n\r\n      LRUName: 'PluginTimeSerieManager',\r\n      intervals: [ 1000, 15000, 60000, 900000, 3600000, 8640000 ],\r\n      maxParallelRequests: 3,\r\n      optimalPxPerPoint: 2,\r\n      nbPoints: 1000,\r\n      url: ''\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Init method\r\n   * @private\r\n   * @memberof PluginTimeSerieManager\r\n   */\r\n  init( graph, options ) {\r\n    this.graph = graph;\r\n    LRU.create( this.options.LRUName, 200 );\r\n    this.requestsRunning = 0;\r\n\r\n  }\r\n\r\n  setURL( url ) {\r\n    this.options.url = url;\r\n    return this;\r\n  }\r\n\r\n  setAvailableIntervals() {\r\n    this.options.intervals = arguments;\r\n  }\r\n\r\n  newSerie( serieName, serieOptions, serieType, dbElements, noZoneSerie ) {\r\n    var s = this.graph.newSerie( serieName, serieOptions, serieType );\r\n\r\n    this.currentSlots[ serieName ] = {\r\n      min: 0,\r\n      max: 0,\r\n      interval: 0\r\n    };\r\n\r\n    s.on( 'hide', function() {\r\n\r\n      if ( s._zoneSerie ) {\r\n\r\n        s._zoneSerie.hide();\r\n      }\r\n    } );\r\n\r\n    s.on( 'show', function() {\r\n\r\n      if ( s._zoneSerie ) {\r\n        s._zoneSerie.show();\r\n      }\r\n    } );\r\n\r\n    s.setInfo( 'timeSerieManagerDBElements', dbElements );\r\n\r\n    if ( !noZoneSerie ) {\r\n      s._zoneSerie = this.graph.newSerie( `${serieName }_zone`, {}, Graph.SERIE_ZONE );\r\n    }\r\n\r\n    this.series.push( s );\r\n    return s;\r\n  }\r\n\r\n  registerPlugin( plugin, event ) {\r\n\r\n    var index;\r\n    if ( ( index = this.plugins.indexOf( plugin ) ) > -1 ) {\r\n\r\n      for ( var i = 1; i < arguments.length; i++ ) {\r\n        plugin.removeListener( arguments[ i ], this.update );\r\n      }\r\n    }\r\n\r\n    for ( var i = 1; i < arguments.length; i++ ) {\r\n      plugin.on( arguments[ i ], this.update );\r\n    }\r\n  }\r\n\r\n  updateSerie( serie, noRecalculate ) {\r\n\r\n    var self = this;\r\n    var from = serie.getXAxis().getCurrentMin();\r\n    var to = serie.getXAxis().getCurrentMax();\r\n    var priority = 1;\r\n\r\n    var optimalInterval = this.getOptimalInterval( to - from );\r\n    var optimalIntervalIndex = this.options.intervals.indexOf( optimalInterval );\r\n    var interval;\r\n\r\n    this.cleanRegister( optimalIntervalIndex );\r\n\r\n    for ( var i = optimalIntervalIndex; i <= optimalIntervalIndex + 1; i++ ) {\r\n\r\n      interval = this.options.intervals[ i ];\r\n      var startSlotId = self.computeSlotID( from, interval );\r\n      var endSlotId = self.computeSlotID( to, interval );\r\n\r\n      var intervalMultipliers = [\r\n        [ 2, 5, 6 ],\r\n        [ 1, 2, 4 ],\r\n        [ 0, 1, 3 ]\r\n      ];\r\n\r\n      intervalMultipliers.forEach( function( multiplier ) {\r\n\r\n        var firstSlotId = startSlotId - multiplier[ 0 ] * ( endSlotId - startSlotId );\r\n        var lastSlotId = endSlotId + multiplier[ 0 ] * ( endSlotId - startSlotId );\r\n\r\n        var slotId = firstSlotId;\r\n\r\n        while ( slotId <= lastSlotId ) {\r\n\r\n          if ( self.computeTimeMin( slotId, interval ) > Date.now() ) {\r\n            break;\r\n          }\r\n\r\n          self.register( serie, slotId, interval, interval == optimalInterval ? multiplier[ 1 ] : multiplier[ 2 ], true, noRecalculate );\r\n          slotId++;\r\n        }\r\n\r\n      } );\r\n\r\n    }\r\n\r\n    this.processRequests();\r\n  }\r\n\r\n  cleanRegister( interval ) {\r\n\r\n    if ( !this.requestLevels ) {\r\n      return;\r\n    }\r\n\r\n    this.requestLevels.forEach( ( levelArray ) => {\r\n\r\n      levelArray.forEach( ( levelElement, levelIndex ) => {\r\n\r\n        if ( levelElement[ 4 ] < interval ) {\r\n          levelArray.splice( levelIndex, 1 );\r\n        }\r\n      } );\r\n\r\n    } );\r\n  }\r\n\r\n  register( serie, slotId, interval, priority, noProcess, noRecalculate ) {\r\n\r\n    var id = this.computeUniqueID( serie, slotId, interval );\r\n\r\n    var data = LRU.get( this.options.LRUName, id );\r\n\r\n    if ( !data || ( this.computeTimeMax( slotId, interval ) > Date.now() && data.timeout < ( Date.now() - ( noRecalculate ? 5000 : 100000 ) ) ) && priority == 1 ) {\r\n\r\n      this.request( serie, slotId, interval, priority, id, noProcess );\r\n    }\r\n  }\r\n\r\n  request( serie, slotId, interval, priority, slotName, noProcess ) {\r\n\r\n    for ( var i in this.requestLevels ) {\r\n\r\n      if ( i == priority ) {\r\n        continue;\r\n      }\r\n\r\n      if ( this.requestLevels[ i ][ slotName ] ) {\r\n\r\n        if ( this.requestLevels[ i ][ slotName ][ 0 ] !== 1 ) { // If the request is not pending\r\n\r\n          delete this.requestLevels[ i ][ slotName ];\r\n\r\n        } else {\r\n          this.requestLevels[ i ][ slotName ][ 5 ] = priority;\r\n        }\r\n\r\n      }\r\n    }\r\n\r\n    if ( this.requestLevels[ priority ] && this.requestLevels[ priority ][ slotName ] ) {\r\n      return;\r\n    }\r\n\r\n    this.requestLevels[ priority ] = this.requestLevels[ priority ] || {};\r\n    this.requestLevels[ priority ][ slotName ] = [ 0, slotName, serie.getName(), slotId, interval, priority, serie.getInfo( 'timeSerieManagerDBElements' ) ];\r\n\r\n    if ( !noProcess ) {\r\n      this.processRequests();\r\n    }\r\n  }\r\n\r\n  processRequests() {\r\n\r\n    if ( this.requestsRunning >= this.options.maxParallelRequests ) {\r\n      return;\r\n    }\r\n\r\n    var self = this,\r\n      currentLevelChecking = 1,\r\n      requestToMake;\r\n\r\n    while ( true ) {\r\n\r\n      for ( var i in this.requestLevels[ currentLevelChecking ] ) {\r\n\r\n        if ( this.requestLevels[ currentLevelChecking ][ i ][ 0 ] == 1 ) { // Running request\r\n          continue;\r\n        }\r\n\r\n        requestToMake = this.requestLevels[ currentLevelChecking ][ i ];\r\n        break;\r\n      }\r\n\r\n      if ( requestToMake ) {\r\n        break;\r\n      }\r\n\r\n      currentLevelChecking++;\r\n\r\n      if ( currentLevelChecking > 10 ) {\r\n        return;\r\n      }\r\n\r\n    }\r\n\r\n    this.requestsRunning++;\r\n\r\n    if ( !requestToMake ) {\r\n      return;\r\n    }\r\n\r\n    requestToMake[ 0 ] = 1;\r\n\r\n    util.ajaxGet( {\r\n\r\n      url: this.getURL( requestToMake ),\r\n      method: 'GET',\r\n      json: true\r\n\r\n    } ).done( function( data ) {\r\n\r\n      if ( data.status == 1 ) { // Success\r\n\r\n        self.requestsRunning--;\r\n\r\n        delete self.requestLevels[ currentLevelChecking ][ i ];\r\n\r\n        LRU.store( self.options.LRUName, requestToMake[ 1 ], data.data ); // Element 1 is the unique ID\r\n        self.processRequests();\r\n\r\n        if ( requestToMake[ 5 ] == 1 && Object.keys( self.requestLevels[ 1 ] ).length == 0 ) {\r\n\r\n          self.recalculateSeries( true );\r\n        }\r\n      }\r\n\r\n    } );\r\n  }\r\n\r\n  computeTimeMax( slotId, interval ) {\r\n    return ( slotId + 1 ) * ( interval * this.options.nbPoints );\r\n  }\r\n\r\n  computeTimeMin( slotId, interval ) {\r\n    return ( slotId ) * ( interval * this.options.nbPoints );\r\n  }\r\n\r\n  getURL( requestElements ) {\r\n\r\n    var url = this.options.url\r\n      .replace( '<measurementid>', requestElements[ 2 ] )\r\n      .replace( '<from>', this.computeTimeMin( requestElements[ 3 ], requestElements[ 4 ] ) )\r\n      .replace( '<to>', this.computeTimeMax( requestElements[ 3 ], requestElements[ 4 ] ) )\r\n      .replace( '<interval>', requestElements[ 4 ] );\r\n\r\n    var dbElements = requestElements[ 6 ] || {};\r\n\r\n    for ( var i in dbElements ) {\r\n      url = url.replace( `<${ i }>`, dbElements[ i ] );\r\n    }\r\n\r\n    return url;\r\n  }\r\n\r\n  getOptimalInterval( totalspan ) {\r\n\r\n    var optimalInterval = ( this.options.optimalPxPerPoint || 1 ) * totalspan / this.graph.getDrawingWidth(),\r\n      diff = Infinity,\r\n      optimalIntervalAmongAvailable;\r\n\r\n    this.options.intervals.forEach( function( interval ) {\r\n\r\n      var newDiff = Math.min( diff, Math.abs( interval - optimalInterval ) );\r\n      if ( diff !== newDiff ) {\r\n\r\n        optimalIntervalAmongAvailable = interval;\r\n        diff = newDiff;\r\n      }\r\n    } );\r\n\r\n    return optimalIntervalAmongAvailable || 1000;\r\n  }\r\n\r\n  computeUniqueID( serie, slotId, interval ) {\r\n    var extra = '';\r\n    var info = serie.getInfo( 'timeSerieManagerDBElements' );\r\n    for ( var i in info ) {\r\n      extra += `;${ i }:${ info[ i ]}`;\r\n    }\r\n\r\n    return `${serie.getName() };${ slotId };${ interval }${extra}`;\r\n  }\r\n\r\n  computeSlotID( time, interval ) {\r\n    return Math.floor( time / ( interval * this.options.nbPoints ) );\r\n  }\r\n\r\n  computeSlotTime( slotId, interval ) {\r\n    return slotId * ( interval * this.options.nbPoints );\r\n  }\r\n\r\n  getZoneSerie( serie ) {\r\n    return serie._zoneSerie;\r\n  }\r\n\r\n  updateZoneSerie( serieName ) {\r\n\r\n    var serie = this.graph.getSerie( serieName );\r\n\r\n    if ( !serie ) {\r\n      return;\r\n    }\r\n\r\n    if ( !serie._zoneSerie ) {\r\n      return;\r\n    }\r\n\r\n    serie._zoneSerie.setXAxis( serie.getXAxis() );\r\n    serie._zoneSerie.setYAxis( serie.getYAxis() );\r\n    serie._zoneSerie.setFillColor( serie.getLineColor() );\r\n    serie._zoneSerie.setLineColor( serie.getLineColor() );\r\n    serie._zoneSerie.setFillOpacity( 0.2 );\r\n    serie._zoneSerie.setLineOpacity( 0.3 );\r\n  }\r\n\r\n  recalculateSeries( force ) {\r\n\r\n    var self = this;\r\n\r\n    if ( this.locked ) {\r\n      return;\r\n    }\r\n\r\n    this.changed = false;\r\n\r\n    this.series.map( function( serie ) {\r\n      self.recalculateSerie( serie, force );\r\n    } );\r\n\r\n    /*if ( this.changed ) {\r\n        self.graph._applyToAxes( \"scaleToFitAxis\", [ this.graph.getXAxis(), false, undefined, undefined, false, true ], false, true );\r\n      }\r\n  */\r\n    this.changed = false;\r\n    //self.graph.autoscaleAxes();\r\n\r\n    self.graph.draw();\r\n  }\r\n\r\n  recalculateSerie( serie, force ) {\r\n\r\n    var from = serie.getXAxis().getCurrentMin(),\r\n      to = serie.getXAxis().getCurrentMax(),\r\n      interval = this.getOptimalInterval( to - from );\r\n\r\n    var startSlotId = this.computeSlotID( from, interval );\r\n    var endSlotId = this.computeSlotID( to, interval );\r\n\r\n    var data = [];\r\n    var dataMinMax = [];\r\n\r\n    if ( !force && interval == this.currentSlots[ serie.getName() ].interval && this.currentSlots[ serie.getName() ].min <= startSlotId && this.currentSlots[ serie.getName() ].max >= endSlotId ) {\r\n      return;\r\n    }\r\n\r\n    startSlotId -= 2;\r\n    endSlotId += 2;\r\n\r\n    this.currentSlots[ serie.getName() ].min = startSlotId;\r\n    this.currentSlots[ serie.getName() ].max = endSlotId;\r\n    this.currentSlots[ serie.getName() ].interval = interval;\r\n\r\n    var slotId = startSlotId;\r\n\r\n    while ( slotId <= endSlotId ) {\r\n\r\n      const lruData = LRU.get( this.options.LRUName, this.computeUniqueID( serie, slotId, interval ) );\r\n      if ( lruData ) {\r\n\r\n        data = data.concat( lruData.data.mean );\r\n        dataMinMax = dataMinMax.concat( lruData.data.minmax );\r\n\r\n      } else {\r\n\r\n        this.recalculateSerieUpwards( serie, slotId, interval, data, dataMinMax );\r\n      }\r\n\r\n      slotId++;\r\n    }\r\n\r\n    this.changed = true;\r\n\r\n    serie.setData( data );\r\n\r\n    if ( serie._zoneSerie ) {\r\n      serie._zoneSerie.setData( dataMinMax );\r\n    }\r\n  }\r\n\r\n  setIntervalCheck( interval ) {\r\n\r\n    if ( this.interval ) {\r\n      clearInterval( this.interval );\r\n    }\r\n\r\n    this.update( true, true );\r\n    this.interval = setInterval( () => {\r\n      this.update( true, false );\r\n    }, interval );\r\n  }\r\n\r\n  recalculateSerieUpwards( serie, downSlotId, downInterval, data, dataMinMax ) {\r\n\r\n    var intervals = this.options.intervals.slice( 0 );\r\n    intervals.sort();\r\n\r\n    var nextInterval = intervals[ intervals.indexOf( downInterval ) + 1 ] || -1;\r\n    if ( nextInterval < 0 ) {\r\n      return [];\r\n    }\r\n\r\n    var newSlotTime = this.computeSlotTime( downSlotId, downInterval );\r\n    var newSlotTimeEnd = this.computeSlotTime( downSlotId + 1, downInterval );\r\n    var newSlotId = this.computeSlotID( newSlotTime, nextInterval ),\r\n      start = false;\r\n\r\n    const lruData = LRU.get( this.options.LRUName, this.computeUniqueID( serie, newSlotId, nextInterval ) );\r\n    if ( lruData ) {\r\n\r\n      for ( var i = 0, l = lruData.data.mean.length; i < l; i += 2 ) {\r\n\r\n        if ( lruData.data.mean[ i ] < newSlotTime ) {\r\n          continue;\r\n\r\n        } else if ( start === false ) {\r\n          start = i;\r\n        }\r\n\r\n        if ( lruData.data.mean[ i ] >= newSlotTimeEnd ) {\r\n\r\n          data = data.concat( lruData.data.mean.slice( start, i ) );\r\n          dataMinMax = data.concat( lruData.data.minmax.slice( start, i ) );\r\n\r\n          return;\r\n        }\r\n      }\r\n    }\r\n\r\n    return this.recalculateSerieUpwards( serie, newSlotId, nextInterval, data, dataMinMax );\r\n  }\r\n\r\n  lockRedraw() {\r\n    this.locked = true;\r\n  }\r\n\r\n  unlockRedraw() {\r\n    this.locked = false;\r\n  }\r\n\r\n  isRedrawLocked() {\r\n    return !!this.locked;\r\n  }\r\n}\r\n\r\nexport default PluginTimeSerieManager;","import Plugin from './graph.plugin.js';\r\nimport {\r\n  Waveform\r\n} from '../util/waveform.js';\r\n\r\n/**\r\n * @class PluginSerieLineDifference\r\n * @implements Plugin\r\n */\r\nclass PluginSerieLineDifference extends Plugin {\r\n\r\n  constructor() {\r\n    super( ...arguments );\r\n  }\r\n\r\n  static\r\n  default () {\r\n    return {\r\n\r\n      positiveStyle: {\r\n\r\n        fillColor: 'green',\r\n        fillOpacity: 0.2,\r\n        strokeWidth: 0\r\n      },\r\n\r\n      negativeStyle: {\r\n        fillColor: 'red',\r\n        fillOpacity: 0.2,\r\n        strokeWidth: 0\r\n      },\r\n\r\n      from: 0,\r\n      to: 0\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Init method\r\n   * @private\r\n   */\r\n  init( graph, options ) {\r\n    this.graph = graph;\r\n\r\n    this.series = [];\r\n    this.pathsPositive = [];\r\n    this.pathsNegative = [];\r\n\r\n    this.positivePolyline = this.graph.newShape( 'polyline' ).draw();\r\n\r\n    this.positivePolyline.\r\n    setFillColor( this.options.positiveStyle.fillColor ).\r\n    setFillOpacity( this.options.positiveStyle.fillOpacity ).\r\n    setStrokeWidth( this.options.positiveStyle.strokeWidth ).\r\n    applyStyle();\r\n\r\n    this.negativePolyline = this.graph.newShape( 'polyline' ).draw();\r\n\r\n    this.negativePolyline.\r\n    setFillColor( this.options.negativeStyle.fillColor ).\r\n    setFillOpacity( this.options.negativeStyle.fillOpacity ).\r\n    setStrokeWidth( this.options.negativeStyle.strokeWidth ).\r\n    applyStyle();\r\n  }\r\n\r\n  /**\r\n   * Assigns the two series for the shape. Postive values are defined when ```serieTop``` is higher than ```serieBottom```.\r\n   * @param {SerieLine} serieTop - The top serie\r\n   * @param {SerieLine} serieBottom - The bottom serie\r\n   */\r\n  setSeries( serieTop, serieBottom ) {\r\n    this.serie1 = serieTop;\r\n    this.serie2 = serieBottom;\r\n  }\r\n\r\n  /**\r\n   * Assigns the boundaries\r\n   */\r\n  setBoundaries( from, to ) {\r\n    this.options.from = from;\r\n    this.options.to = to;\r\n  }\r\n\r\n  /**\r\n   * @returns the starting value used to draw the zone\r\n   */\r\n  getFrom() {\r\n    return this.options.from;\r\n  }\r\n\r\n  /**\r\n   * @returns the ending value used to draw the zone\r\n   */\r\n  getTo() {\r\n    return this.options.to;\r\n  }\r\n\r\n  /**\r\n   * Calculates and draws the zone series\r\n   * @returns {Plugin} The current plugin instance\r\n   */\r\n  draw() {\r\n\r\n    var self = this;\r\n\r\n    const w1 = this.serie1.getWaveform();\r\n    const w2 = this.serie2.getWaveform();\r\n\r\n    const wFinal = w1.duplicate( true ).subtract( w2 ).add( w2 );\r\n    const wFinal2 = w1.duplicate( true ).subtract( w1.duplicate( true ).subtract( w2 ) );\r\n\r\n    const chunks = [];\r\n    let currentChunk;\r\n\r\n    var newChunk = ( force = false ) => {\r\n\r\n      if ( !force ) {\r\n        if ( currentChunk.wave1.length == 0 && currentChunk.wave2.length == 0 ) {\r\n          return;\r\n        }\r\n      }\r\n      currentChunk = {\r\n        above: undefined,\r\n        wave1: [],\r\n        wave2: []\r\n      };\r\n      chunks.push( currentChunk );\r\n    };\r\n\r\n    newChunk( true );\r\n\r\n    let currentlyAbove = true;\r\n\r\n    for ( var i = 0; i < wFinal.getLength(); i++ ) {\r\n\r\n      if ( isNaN( wFinal.getY( i ) ) || isNaN( wFinal2.getY( i ) ) ) {\r\n        newChunk();\r\n        continue;\r\n      }\r\n\r\n      if ( i > 0 && currentChunk.wave1.length > 0 ) {\r\n\r\n        if ( ( wFinal.getY( i ) > wFinal2.getY( i ) && !currentChunk.above ) ) {\r\n\r\n          const crossing = this.computeCrossing( wFinal.getX( i - 1 ), wFinal.getY( i - 1 ), wFinal.getX( i ), wFinal.getY( i ), wFinal2.getX( i - 1 ), wFinal2.getY( i - 1 ), wFinal2.getX( i ), wFinal2.getY( i ) );\r\n          currentChunk.wave1.push( [ crossing.x, crossing.y ] );\r\n          newChunk();\r\n          currentChunk.wave1.push( [ crossing.x, crossing.y ] );\r\n          currentChunk.above = true;\r\n        }\r\n\r\n        if ( ( wFinal.getY( i ) < wFinal2.getY( i ) && currentChunk.above ) ) {\r\n\r\n          const crossing = this.computeCrossing( wFinal.getX( i - 1 ), wFinal.getY( i - 1 ), wFinal.getX( i ), wFinal.getY( i ), wFinal2.getX( i - 1 ), wFinal2.getY( i - 1 ), wFinal2.getX( i ), wFinal2.getY( i ) );\r\n          currentChunk.wave1.push( [ crossing.x, crossing.y ] );\r\n          newChunk();\r\n          currentChunk.wave1.push( [ crossing.x, crossing.y ] );\r\n          currentChunk.above = false;\r\n\r\n        }\r\n      }\r\n\r\n      if ( currentChunk.wave1.length == 0 ) {\r\n        currentChunk.above = wFinal.getY( i ) > wFinal2.getY( 1 );\r\n      }\r\n\r\n      currentChunk.wave1.push( [ wFinal.getX( i ), wFinal.getY( i ) ] );\r\n      currentChunk.wave2.push( [ wFinal2.getX( i ), wFinal2.getY( i ) ] );\r\n    }\r\n\r\n    this.series.forEach( serie => serie.kill() );\r\n\r\n    this.series = chunks.forEach( ( chunk, index ) => {\r\n\r\n      const serie = this.graph.newSerie( '__graph_serielinedifference_' + this.serie1.getName() + '_' + this.serie2.getName() + '_' + index );\r\n      const wave = new Waveform();\r\n\r\n      wave.setData(\r\n        chunk.wave1.map( el => el[ 1 ] ).concat( chunk.wave2.reverse().map( el => el[ 1 ] ) ),\r\n        chunk.wave1.map( el => el[ 0 ] ).concat( chunk.wave2.map( el => el[ 0 ] ) )\r\n      );\r\n\r\n      if ( chunk.wave1[ 0 ] ) {\r\n        wave.append( chunk.wave1[ 0 ][ 0 ], chunk.wave1[ 0 ][ 1 ] );\r\n      }\r\n\r\n      serie.setWaveform( wave );\r\n      serie.setXAxis( this.serie1.getXAxis() );\r\n      serie.setYAxis( this.serie1.getYAxis() );\r\n\r\n      if ( chunk.above ) {\r\n        serie.setFillColor( this.options.positiveStyle.fillColor );\r\n      } else {\r\n        serie.setFillColor( this.options.negativeStyle.fillColor );\r\n      }\r\n    } );\r\n\r\n  }\r\n\r\n  /**\r\n   * Finds the crossing point between two vector and returns it, or ```false``` if it is not within the x boundaries\r\n   * @returns {(Object|Boolean)} An object containing the crossing point in the following format: ```{ x: xCrossing, y: yCrossing }``` or ```false``` if no crossing point can be found\r\n   * @param {Number} x11 - First x point of the first vector\r\n   * @param {Number} y11 - First y point of the first vector\r\n   * @param {Number} x12 - Second x point of the first vector\r\n   * @param {Number} y12 - Second y point of the first vector\r\n   * @param {Number} x21 - First x point of the second vector\r\n   * @param {Number} y21 - First y point of the second vector\r\n   * @param {Number} y22 - Second x point of the second vector\r\n   * @param {Number} y22 - Second y point of the second vector\r\n   */\r\n  computeCrossing( x11, y11, x12, y12, x21, y21, x22, y22 ) {\r\n\r\n    var a1 = ( y12 - y11 ) / ( x12 - x11 );\r\n    var a2 = ( y22 - y21 ) / ( x22 - x21 );\r\n\r\n    var b1 = y12 - a1 * x12;\r\n    var b2 = y22 - a2 * x22;\r\n\r\n    if ( x11 == x12 || x21 == x22 ) {\r\n\r\n      return false;\r\n    }\r\n\r\n    if ( a1 == a2 ) {\r\n      return {\r\n        x: x11,\r\n        y1: y11,\r\n        y2: y11,\r\n        y: y11\r\n      };\r\n    }\r\n\r\n    var x = ( b1 - b2 ) / ( a2 - a1 );\r\n\r\n    if ( x > x12 || x < x11 || x < x21 || x > x22 ) {\r\n      return false;\r\n    }\r\n\r\n    return {\r\n      x: x,\r\n      y: a1 * x + b1\r\n    };\r\n  }\r\n\r\n  /**\r\n   * @returns The positive polyline\r\n   */\r\n  getPositivePolyline() {\r\n    return this.positivePolyline;\r\n  }\r\n\r\n  /**\r\n   * @returns The negative polyline\r\n   */\r\n  getNegativePolyline() {\r\n    return this.negativePolyline;\r\n  }\r\n\r\n}\r\n\r\nexport default PluginSerieLineDifference;","import Graph from '../graph.core.js';\r\nimport AxisX from '../graph.axis.x.js';\r\nimport AxisY from '../graph.axis.y.js';\r\nimport * as util from '../graph.util.js';\r\nimport SerieLine from '../series/graph.serie.line.js';\r\nimport SerieScatter from '../series/graph.serie.scatter.js';\r\nimport Axis from '../graph.axis.js';\r\n\r\nimport Plugin from './graph.plugin.js';\r\n\r\nclass SerieLineExtended extends SerieLine {\r\n\r\n  constructor() {\r\n    super( ...arguments );\r\n\r\n    this.subSeries = [];\r\n  }\r\n\r\n  draw() {\r\n    return this;\r\n  }\r\n\r\n}\r\n\r\nclass SerieScatterExtended extends SerieScatter {\r\n\r\n  constructor() {\r\n\r\n    super( ...arguments );\r\n    this.subSeries = [];\r\n  }\r\n\r\n  draw() {\r\n    return this;\r\n  }\r\n\r\n  getMarkerForLegend() {\r\n    if ( !this.subSeries[ 0 ] ) {\r\n      return false;\r\n    }\r\n\r\n    return this.subSeries[ 0 ].getMarkerForLegend();\r\n  }\r\n}\r\n\r\nvar excludingMethods = [\r\n  'constructor',\r\n  'init',\r\n  'draw',\r\n  'setLineColor',\r\n  'setLineWidth',\r\n  'setLineStyle',\r\n  'getLineColor',\r\n  'getLineWidth',\r\n  'getLineStyle',\r\n  'setMarkers',\r\n  'getMarkerDom',\r\n  'getMarkerDomIndependant',\r\n  'getMarkerPath',\r\n  '_recalculateMarkerPoints',\r\n  'getSymbolForLegend',\r\n  '_getSymbolForLegendContainer'\r\n];\r\nvar addMethods = [];\r\n\r\nObject.getOwnPropertyNames( SerieLine.prototype ).concat( addMethods ).map( function( i ) {\r\n\r\n  if ( excludingMethods.indexOf( i ) > -1 ) {\r\n    return;\r\n  }\r\n\r\n  SerieLineExtended.prototype[ i ] = ( function( j ) {\r\n\r\n    return function() {\r\n\r\n      var args = arguments;\r\n      this.subSeries.map( ( subSerie ) => {\r\n        subSerie[ j ]( ...args );\r\n      } );\r\n    };\r\n\r\n  } )( i );\r\n} );\r\n\r\nvar returnMethods = [\r\n  'getSymbolForLegend'\r\n];\r\n\r\nvar addMethods = [\r\n  '_getSymbolForLegendContainer'\r\n];\r\n\r\nObject.getOwnPropertyNames( SerieLine.prototype ).map( function( i ) {\r\n\r\n  if ( returnMethods.indexOf( i ) == -1 ) {\r\n    return;\r\n  }\r\n\r\n  SerieLineExtended.prototype[ i ] = ( function( j ) {\r\n\r\n    return function() {\r\n      var args = arguments;\r\n      return this.subSeries[ 0 ][ j ]( ...args );\r\n    };\r\n\r\n  } )( i );\r\n\r\n  SerieScatterExtended.prototype[ i ] = ( function( j ) {\r\n\r\n    return function() {\r\n      var args = arguments;\r\n      return this.subSeries[ 0 ][ j ]( ...args );\r\n    };\r\n\r\n  } )( i );\r\n} );\r\n\r\naddMethods.map( ( method ) => {\r\n\r\n  SerieLineExtended.prototype[ method ] = ( function( j ) {\r\n\r\n    return function() {\r\n      var args = arguments;\r\n      return this.subSeries[ 0 ][ j ]( ...args );\r\n    };\r\n\r\n  } )( method );\r\n\r\n  SerieScatterExtended.prototype[ method ] = ( function( j ) {\r\n\r\n    return function() {\r\n      var args = arguments;\r\n      return this.subSeries[ 0 ][ j ]( ...args );\r\n    };\r\n\r\n  } )( method );\r\n\r\n} );\r\n\r\n/**\r\n * Axis splitting plugin\r\n * @augments Plugin\r\n */\r\nclass PluginAxisSplitting extends Plugin {\r\n\r\n  constructor( options ) {\r\n    super( ...arguments );\r\n    this.series = new Map();\r\n  }\r\n\r\n  static\r\n  default () {\r\n\r\n    return {\r\n      axes: {\r\n        margins: {\r\n          high: 5,\r\n          low: 5\r\n        }\r\n      }\r\n    };\r\n  }\r\n\r\n  init( graph ) {\r\n    this.graph = graph;\r\n  }\r\n\r\n  /**\r\n   *  Creates a new bottom split axis\r\n   *  @param {Object} [ options = {} ] The axis options\r\n   *  @return {Axis} The newly created split axis\r\n   */\r\n  newXAxis( options ) {\r\n    return this.newBottomAxis( options );\r\n  }\r\n\r\n  /**\r\n   *  Creates a new left split axis\r\n   *  @param {Object} [ options = {} ] The axis options\r\n   *  @return {Axis} The newly created split axis\r\n   */\r\n  newYAxis( options ) {\r\n    return this.newLeftAxis( options );\r\n  }\r\n\r\n  /**\r\n   *  Creates a new top split axis\r\n   *  @param {Object} [ options = {} ] The axis options\r\n   *  @return {Axis} The newly created split axis\r\n   */\r\n  newTopAxis( options ) {\r\n    options = this.getOptions( options );\r\n    return new SplitXAxis( this.graph, 'top', options );\r\n  }\r\n\r\n  /**\r\n   *  Creates a new bottom split axis\r\n   *  @param {Object} [ options = {} ] The axis options\r\n   *  @return {Axis} The newly created split axis\r\n   */\r\n  newBottomAxis( options ) {\r\n    options = this.getOptions( options );\r\n    return new SplitXAxis( this.graph, 'bottom', options );\r\n  }\r\n\r\n  /**\r\n   *  Creates a new left split axis\r\n   *  @param {Object} [ options = {} ] The axis options\r\n   *  @return {Axis} The newly created split axis\r\n   */\r\n  newLeftAxis( options ) {\r\n    options = this.getOptions( options );\r\n    return new SplitYAxis( this.graph, 'left', options );\r\n  }\r\n\r\n  /**\r\n   *  Creates a new right split axis\r\n   *  @param {Object} [ options = {} ] The axis options\r\n   *  @return {Axis} The newly created split axis\r\n   */\r\n  newRightAxis( options ) {\r\n    options = this.getOptions( options );\r\n    return new SplitYAxis( this.graph, 'right', options );\r\n  }\r\n\r\n  getOptions( options ) {\r\n    var defaults = {\r\n      marginMin: this.options.axes.margins.low,\r\n      marginMax: this.options.axes.margins.high,\r\n    };\r\n    return util.extend( true, defaults, options );\r\n  }\r\n\r\n  preDraw() {\r\n\r\n    var xAxis, yAxis;\r\n\r\n    //    for ( let { serie } of this.series.values() ) {\r\n    this.series.forEach( ( {\r\n      serie\r\n    } ) => {\r\n\r\n      xAxis = serie.getXAxis();\r\n      yAxis = serie.getYAxis();\r\n\r\n      let splits = 1;\r\n\r\n      if ( xAxis.splitNumber ) {\r\n        splits *= xAxis.splitNumber;\r\n      }\r\n\r\n      if ( yAxis.splitNumber ) {\r\n        splits *= yAxis.splitNumber;\r\n      }\r\n\r\n      while ( serie.subSeries.length < splits ) {\r\n\r\n        const name = `${serie.getName() }_${ serie.subSeries.length}`;\r\n\r\n        const s = this.graph.newSerie( name, {}, serie.getType() || Graph.SERIE_LINE );\r\n\r\n        s.excludedFromLegend = true;\r\n        s.styles = serie.styles;\r\n        s.waveform = serie.waveform; // Copy data\r\n\r\n        if ( serie.getType() == Graph.SERIE_LINE ) {\r\n          s.markerPoints = serie.markerPoints;\r\n          s.markerFamilies = serie.markerFamilies;\r\n        }\r\n\r\n        serie.subSeries.push( s );\r\n        serie.postInit();\r\n      }\r\n\r\n      while ( serie.subSeries.length > splits ) {\r\n\r\n        let subserie = this.graph.getSerie( `${serie.getName() }_${ serie.subSeries.length - 1}` );\r\n\r\n        if ( subserie && subserie.kill ) {\r\n          subserie.kill();\r\n        }\r\n        serie.subSeries.pop();\r\n\r\n      }\r\n\r\n      if ( !serie.getXAxis().splitNumber && serie.getXAxis().splitAxis ) {\r\n        serie.getXAxis().splitAxis();\r\n      }\r\n\r\n      if ( !serie.getYAxis().splitNumber && serie.getYAxis().splitAxis ) {\r\n        serie.getYAxis().splitAxis();\r\n      }\r\n\r\n      // Re-assign axes to the sub series\r\n      serie.subSeries.map( ( sserie, index ) => {\r\n\r\n        var xSubAxis, ySubAxis;\r\n\r\n        //sserie.groupMarkers = firstSubSerie.groupMarkers;\r\n\r\n        if ( serie.getXAxis().getSubAxis ) {\r\n          let subAxisIndex = index % ( ( xAxis.splitNumber || 1 ) );\r\n          xSubAxis = serie.getXAxis().getSubAxis( subAxisIndex );\r\n        } else {\r\n          xSubAxis = serie.getXAxis();\r\n        }\r\n\r\n        sserie.setXAxis( xSubAxis );\r\n\r\n        if ( serie.getYAxis().getSubAxis ) {\r\n\r\n          let subAxisIndex = Math.floor( index / ( ( xAxis.splitNumber || 1 ) ) );\r\n          ySubAxis = serie.getYAxis().getSubAxis( subAxisIndex );\r\n        } else {\r\n          ySubAxis = serie.getYAxis();\r\n        }\r\n\r\n        sserie.setYAxis( ySubAxis );\r\n\r\n        sserie.draw( true );\r\n      } );\r\n      //}\r\n\r\n    } );\r\n\r\n  }\r\n\r\n  /**\r\n   *  Creates a new serie\r\n   *  @param {(String|Number)} name - The name of the serie\r\n   *  @param {Object} [ options = {} ] The options of the serie\r\n   *  @param {String} type - The type of the serie\r\n   *  @return {Serie} The created serie\r\n   */\r\n  newSerie( name, options = {}, type ) {\r\n\r\n    switch ( type ) {\r\n\r\n      case 'line':\r\n        return this.newLineSerie( name, options );\r\n        break;\r\n\r\n      case 'scatter':\r\n        return this.newScatterSerie( name, options );\r\n        break;\r\n    }\r\n\r\n    throw `Cannot create a split serie of type ${ type}`;\r\n  }\r\n\r\n  /**\r\n   *  Creates a new line serie\r\n   *  @param {(String|Number)} name - The name of the serie\r\n   *  @param {Object} [ options = {} ] The options of the serie\r\n   *  @return {Serie} The created serie\r\n   */\r\n  newLineSerie( name, options ) {\r\n    var serieObj = {\r\n      type: 'lineSerie',\r\n      serie: new SerieLineExtended( this.graph, name, options, 'line' )\r\n    };\r\n    this.series.set( name, serieObj );\r\n    this.graph.series.push( serieObj.serie );\r\n    return serieObj.serie;\r\n  }\r\n\r\n  /**\r\n   *  Creates a new scatter serie\r\n   *  @param {(String|Number)} name - The name of the serie\r\n   *  @param {Object} [ options = {} ] The options of the serie\r\n   *  @return {Serie} The created serie\r\n   */\r\n  newScatterSerie( name, options ) {\r\n    var serieObj = {\r\n      type: 'scatterSerie',\r\n      serie: new SerieScatterExtended( this.graph, name, options, 'scatter' )\r\n    };\r\n    this.series.set( name, serieObj );\r\n    this.graph.series.push( serieObj.serie );\r\n    return serieObj.serie;\r\n  }\r\n\r\n}\r\n\r\nvar defaultAxisConstructorOptions = {\r\n  splitMarks: true\r\n};\r\n\r\nvar SplitAxis = function( mixin ) {\r\n\r\n  var delegateMethods = [\r\n\r\n    'turnGridsOff',\r\n    'turnGridsOn',\r\n    'gridsOff',\r\n    'gridsOn',\r\n    'setEngineering',\r\n    'setScientificScaleExponent',\r\n    'setScientific',\r\n    'setLabelColor',\r\n    'setSecondaryGridDasharray',\r\n    'setPrimaryGridDasharray',\r\n    'setSecondaryGridsOpacity',\r\n    'setPrimaryGridOpacity',\r\n    'setSecondaryGridWidth',\r\n    'setPrimaryGridWidth',\r\n    'setSecondaryGridColor',\r\n    'setPrimaryGridColor',\r\n    'setTicksLabelColor',\r\n    'setSecondaryTicksColor',\r\n    'setPrimaryTicksColor',\r\n    'setAxisColor',\r\n    'secondaryGridOn',\r\n    'secondaryGridOff',\r\n    'primaryGridOff',\r\n    'primaryGridOn',\r\n    'setSecondaryGrid',\r\n    'setPrimaryGrid',\r\n    'setGrids',\r\n    'setTickPosition',\r\n    'setExponentialFactor',\r\n    'setExponentialLabelFactor',\r\n    'setGridLinesStyle',\r\n    'forcePrimaryTickUnitMin',\r\n    'forcePrimaryTickUnitMax',\r\n    'forcePrimaryTickUnit',\r\n    'flip',\r\n    'show',\r\n    'hide',\r\n    'setDisplay'\r\n  ];\r\n\r\n  /**\r\n   * Split axis\r\n   * @mixes AxisX\r\n   * @mixes AxisY\r\n   * @name SplitAxis\r\n   * @static\r\n   */\r\n  var cl = class SplitAxis extends mixin {\r\n\r\n    constructor( graph, position, options = {} ) {\r\n\r\n      super( graph, position, options );\r\n      this.axes = [];\r\n      this.position = position;\r\n      this.constructorOptions = util.extend( true, {}, defaultAxisConstructorOptions, options );\r\n\r\n      this._splitVal = [];\r\n    }\r\n\r\n    /**\r\n     *  Calls a callback onto each chunk axes. The callback receives two parameters: 1) the ```axis``` itself and 2) the ```index``` of the axis in the stack\r\n     *  @param {Function} callback - The callback to be applied to each axes\r\n     *  @return {SplitAxis} The current axis instance\r\n     */\r\n    all( callback ) {\r\n\r\n      if ( !( typeof callback == 'function' ) ) {\r\n        return;\r\n      }\r\n\r\n      this.axes.map( callback );\r\n      return this;\r\n    }\r\n\r\n    /**\r\n     *  Splits the axis into chunks at the positions defined as a list of parameters.\r\n     *  @param {Function} ...splits - The positions of axis splitting\r\n     *  @return {SplitAxis} The current axis instance\r\n     *  @example axis.splitAxis( 0.2, 0.5, 0.8 ); // Creates 4 chunks (0-20%, 20%-50%, 50%-80%, 80%-100%)\r\n     */\r\n    splitAxis( ...splits ) {\r\n\r\n      splits.push( 1 );\r\n      let splitNumber = splits.length;\r\n\r\n      while ( this.axes.length > splitNumber ) {\r\n        this.axes.pop().kill( true, true );\r\n      }\r\n\r\n      while ( this.axes.length < splitNumber ) {\r\n        let axis = new( this.getConstructor() )( this.graph, this.position, this.constructorOptions );\r\n        this.axes.push( axis );\r\n        axis.zoomLock = true;\r\n        axis.init( this.graph, this.constructorOptions );\r\n      }\r\n\r\n      let from = 0;\r\n      let i = 0;\r\n      for ( let axis of this.axes ) {\r\n\r\n        axis.options.marginMin = 10;\r\n        axis.options.marginMax = 10;\r\n\r\n        if ( i == 0 ) {\r\n          axis.options.marginMin = 0;\r\n        }\r\n\r\n        if ( i == this.axes.length - 1 ) {\r\n          axis.options.marginMax = 0;\r\n        }\r\n\r\n        axis.setSpan( from, ( from = splits[ i ] ) );\r\n        axis.setMinMaxFlipped();\r\n        i++;\r\n      }\r\n\r\n      this._splits = splits;\r\n      return this;\r\n    }\r\n\r\n    /**\r\n     *  Fixes the major tick interval of all axes based on the one provided as a parameter\r\n     *  @param {Number} axisIndex - The index of the reference axis (starting at 0)\r\n     *  @return {SplitAxis} The current axis instance\r\n     */\r\n    fixGridIntervalBasedOnAxis( axisIndex ) {\r\n\r\n      this.fixGridFor = axisIndex;\r\n      this.graph._axisHasChanged();\r\n      return this;\r\n    }\r\n\r\n    /**\r\n     *  Spreads the chunks of the axis based on the relative interval of each one of them, so that the unit / px is constant for each chunk\r\n     *  @param {Boolean} bln - ```true``` to enable the spread, ```false``` otherwise\r\n     *  @return {SplitAxis} The current axis instance\r\n     */\r\n    splitSpread( bln ) {\r\n      this.autoSpread = !!bln;\r\n      return this;\r\n    }\r\n\r\n    hasAxis( axis ) {\r\n      return this.axes.indexOf( axis ) > -1;\r\n    }\r\n\r\n    _splitSpread() {\r\n\r\n      let splits = [],\r\n        total = 0,\r\n        currentSplit = 0;\r\n      for ( let split of this._splitVal ) {\r\n        total += split[ 1 ] - split[ 0 ];\r\n      }\r\n\r\n      for ( let split of this._splitVal ) {\r\n\r\n        splits.push( currentSplit += ( split[ 1 ] - split[ 0 ] ) / total );\r\n      }\r\n\r\n      splits.pop();\r\n      this.splitAxis( ...splits );\r\n    }\r\n\r\n    /**\r\n     *  Defines the boundaries of each chunk in axis unit.\r\n     *  @param {Array<(Array|Number)>} values - An array of either 2-component arrays (from-to) or number (mean)\r\n     *  @example axis.setChunkBoundaries( [ [ 12, 20 ], [ 100, 200 ] ] ); // First chunk from 12 to 20, second one from 100 to 200\r\n     *  @example axis.setChunkBoundaries( [ 12, [ 100, 200 ] ] ); // Second chunk from 100 to 200, first chunk with a mean at 12 and min / max determined by the relative widths of the chunks\r\n     *  @return {SplitAxis} The current axis instance\r\n     */\r\n    setChunkBoundaries( values ) {\r\n\r\n      let index = 0,\r\n        baseWidth,\r\n        baseWidthIndex;\r\n\r\n      for ( let axis of this.axes ) { // List all axes\r\n\r\n        // Two elements in the array => becomes the new reference\r\n        if ( Array.isArray( values[ index ] ) && values[ index ].length > 1 && !baseWidth ) {\r\n          baseWidth = values[ index ][ 1 ] - values[ index ][ 0 ];\r\n          baseWidthIndex = index;\r\n        }\r\n\r\n        if ( values[ index ].length == 1 || !Array.isArray( values[ index ] ) ) {\r\n          axis._mean = values[ index ];\r\n\r\n          if ( Array.isArray( axis._mean ) ) {\r\n            axis._mean = axis._mean[ 0 ];\r\n          }\r\n\r\n        } else {\r\n\r\n          axis\r\n            .forceMin( values[ index ][ 0 ] )\r\n            .forceMax( values[ index ][ 1 ] );\r\n        }\r\n\r\n        index++;\r\n      }\r\n\r\n      this._baseWidthVal = baseWidth;\r\n      this._baseWidthIndex = baseWidthIndex;\r\n\r\n      this._splitVal = values;\r\n\r\n      this.graph._axisHasChanged();\r\n\r\n      return this;\r\n    }\r\n\r\n    setMinMaxToFitSeries() {\r\n\r\n      if ( !this._splitVal || this._splitVal.length < 1 ) {\r\n        super.setMinMaxToFitSeries( ...arguments );\r\n        this._splitVal[ 0 ] = this._splitVal[ 0 ] || [];\r\n        this._splitVal[ this._splitVal.length - 1 ] = this._splitVal[ this._splitVal.length - 1 ] || [];\r\n\r\n        this._splitVal[ 0 ][ 0 ] = this.getCurrentMin();\r\n        this._splitVal[ this._splitVal.length - 1 ][ 1 ] = this.getCurrentMax();\r\n        this.setChunkBoundaries( this._splitVal );\r\n      }\r\n    }\r\n\r\n    draw() {\r\n\r\n      if ( this.autoSpread ) {\r\n        this._splitSpread();\r\n      }\r\n\r\n      let max = 0;\r\n      let unit;\r\n      let subAxis;\r\n      let spanReference;\r\n\r\n      if ( this._baseWidthIndex >= 0 && ( subAxis = this.getSubAxis( this._baseWidthIndex ) ) ) {\r\n        spanReference = subAxis.getSpan();\r\n      }\r\n\r\n      subAxis = undefined;\r\n\r\n      if ( this.fixGridFor >= 0 && ( subAxis = this.getSubAxis( this.fixGridFor ) ) ) {\r\n\r\n        if ( subAxis._mean !== undefined ) {\r\n          let width = ( subAxis.getSpan()[ 1 ] - subAxis.getSpan()[ 0 ] ) / ( spanReference[ 1 ] - spanReference[ 0 ] ) * this._baseWidthVal;\r\n          subAxis.forceMin( subAxis._mean - width / 2 );\r\n          subAxis.forceMax( subAxis._mean + width / 2 );\r\n        }\r\n\r\n        max = subAxis.draw();\r\n        unit = subAxis.getPrimaryTickUnit();\r\n      }\r\n\r\n      this.axes.map( ( axis ) => {\r\n\r\n        if ( subAxis === axis ) {\r\n          return;\r\n        }\r\n\r\n        if ( axis._mean !== undefined ) {\r\n          let width = ( axis.getSpan()[ 1 ] - axis.getSpan()[ 0 ] ) / ( spanReference[ 1 ] - spanReference[ 0 ] ) * this._baseWidthVal;\r\n          axis.forceMin( axis._mean - width / 2 );\r\n          axis.forceMax( axis._mean + width / 2 );\r\n        }\r\n\r\n        if ( unit ) {\r\n          axis.forcePrimaryTickUnit( unit );\r\n        }\r\n\r\n        max = Math.max( max, axis.draw() );\r\n\r\n      } );\r\n\r\n      //    this.drawLabel();\r\n      this.writeUnit();\r\n\r\n      return max;\r\n    }\r\n\r\n    setMinPx( min ) {\r\n\r\n      super.setMinPx( min );\r\n      for ( let axis of this.axes ) {\r\n        axis.setMinPx( min );\r\n      }\r\n    }\r\n\r\n    setMaxPx( max ) {\r\n\r\n      super.setMaxPx( max );\r\n\r\n      for ( let axis of this.axes ) {\r\n        axis.setMaxPx( max );\r\n      }\r\n    }\r\n\r\n    setShift() {\r\n\r\n      super.setShift( ...arguments );\r\n\r\n      for ( let axis of this.axes ) {\r\n        axis.setShift( ...arguments );\r\n      }\r\n    }\r\n\r\n    init() {\r\n      super.init( ...arguments );\r\n      this.splitAxis();\r\n    }\r\n\r\n    getAxisPosition() {\r\n      var max = 0;\r\n\r\n      this.axes.map( ( axis ) => {\r\n        max = Math.max( max, axis.getAxisPosition() );\r\n      } );\r\n\r\n      return max;\r\n    }\r\n\r\n    getSubAxis( index ) {\r\n\r\n      if ( this.axes.length <= index ) {\r\n        throw `Impossible to reach axis. Index ${ index } is out of range`;\r\n      }\r\n\r\n      return this.axes[ index ];\r\n    }\r\n\r\n    get splitNumber() {\r\n      return this._splits.length;\r\n    }\r\n  };\r\n\r\n  delegateMethods.map( ( methodName ) => {\r\n\r\n    cl.prototype[ methodName ] = ( function( method ) {\r\n\r\n      return function() {\r\n        //super[ method ]( ...arguments )\r\n\r\n        this.axes.map( ( axis ) => {\r\n          axis[ method ]( ...arguments );\r\n        } );\r\n        return this;\r\n      };\r\n\r\n    } )( methodName );\r\n  } );\r\n\r\n  return cl;\r\n};\r\n\r\nclass SplitXAxis extends SplitAxis( AxisX ) {\r\n\r\n  constructor( graph, topbottom, options ) {\r\n    super( ...arguments );\r\n    this.topbottom = topbottom;\r\n  }\r\n\r\n  getConstructor() {\r\n    return AxisX;\r\n  }\r\n\r\n  getAxisPosition() {\r\n    var max = super.getAxisPosition( ...arguments );\r\n\r\n    this.labelPosY = max;\r\n\r\n    if ( this.getLabel() ) {\r\n      max += this.graph.options.fontSize;\r\n    }\r\n\r\n    return max;\r\n  }\r\n\r\n  drawLabel() {\r\n    super.drawLabel();\r\n    this.label.setAttribute( 'y', ( this.top ? -1 : 1 ) * ( this.graph.options.fontSize + this.labelPosY ) );\r\n  }\r\n\r\n  draw() {\r\n    var height = super.draw( ...arguments );\r\n    this.drawLabel();\r\n    return height;\r\n  }\r\n\r\n}\r\n\r\nclass SplitYAxis extends SplitAxis( AxisY ) {\r\n\r\n  constructor( graph, leftright, options ) {\r\n    super( ...arguments );\r\n    ///this.leftright = leftright;\r\n  }\r\n\r\n  getConstructor() {\r\n    return AxisY;\r\n  }\r\n  /*\r\n    draw() {\r\n\r\n      if ( this.getLabel() ) {\r\n        this.axes.map( ( axis ) => {\r\n          axis.setAxisPosition( this.graph.options.fontSize );\r\n        } ); // Extra shift allowed for the label\r\n        //this.setShift( this.graph.options.fontSize );\r\n      }\r\n      return super.draw( ...arguments );\r\n    }\r\n  */\r\n  drawLabel() {\r\n    super.drawLabel();\r\n  }\r\n\r\n  equalizePosition( width ) {\r\n\r\n    var widthAfter = width;\r\n\r\n    if ( this.getLabel() ) {\r\n      this.axes.map( ( axis ) => {\r\n        widthAfter = Math.max( axis.equalizePosition( width ), widthAfter );\r\n      } ); // Extra shift allowed for the label\r\n      //this.setShift( this.graph.options.fontSize );\r\n    }\r\n\r\n    if ( this.getLabel() ) {\r\n      this.placeLabel( this.left ? -widthAfter : widthAfter );\r\n      return widthAfter + this.graph.options.fontSize;\r\n    }\r\n  }\r\n\r\n}\r\n\r\nutil.mix( SplitXAxis, new AxisX() );\r\nutil.mix( SplitYAxis, new AxisY() );\r\n\r\nexport default PluginAxisSplitting;","import * as util from '../graph.util.js';\r\n\r\nimport Plugin from './graph.plugin.js';\r\n\r\n/**\r\n * The intent of this plugin is to provide methods for the user to make the traces on the graph automatically different\r\n * Options to provide colorization, markers and line styles should be provided\r\n * @extends Plugin\r\n */\r\nclass PluginMakeTracesDifferent extends Plugin {\r\n\r\n  constructor() {\r\n    super( ...arguments );\r\n  }\r\n\r\n  init( graph, options ) {\r\n    super.init( graph, options );\r\n  }\r\n  // Load this with defaults\r\n  static\r\n  default () {\r\n\r\n    return {\r\n\r\n    };\r\n  }\r\n\r\n  checkHSL( color ) {\r\n\r\n    let result = {},\r\n      hue, saturation, lightness;\r\n\r\n    if ( ( hue = ( color.h || color.hue ) ) ) {\r\n\r\n      if ( hue < 1 ) {\r\n        hue = Math.round( hue * 360 );\r\n      }\r\n\r\n      result.hue = hue;\r\n    } else {\r\n      result.h = 0;\r\n    }\r\n\r\n    if ( ( saturation = ( color.s || color.saturation ) ) ) {\r\n\r\n      if ( saturation > 1 ) {\r\n        saturation /= 100;\r\n      }\r\n\r\n      result.saturation = saturation;\r\n    } else {\r\n      result.saturation = 0.75;\r\n    }\r\n\r\n    if ( ( lightness = ( color.lightness || color.l ) ) ) {\r\n\r\n      if ( lightness > 1 ) {\r\n        lightness /= 100;\r\n      }\r\n\r\n      result.lightness = lightness;\r\n    } else {\r\n      result.lightness = 0.5;\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  buildHSLString( hsl ) {\r\n    return `hsl( ${ Math.round( hsl.h ) }, ${ Math.round( hsl.s * 100 ) }%, ${ Math.round( hsl.l * 100 ) }%)`;\r\n  }\r\n\r\n  colorizeAll( options, callback = false ) {\r\n\r\n    let series,\r\n      seriesLength;\r\n\r\n    if ( options.serieTypes ) {\r\n\r\n      if ( !Array.isArray( options.serieTypes ) ) {\r\n        options.serieTypes = [ options.serieTypes ];\r\n      }\r\n\r\n      series = this.graph.allSeries( ...options.serieTypes );\r\n    } else {\r\n      series = this.graph.getSeries();\r\n    }\r\n\r\n    seriesLength = series.length;\r\n\r\n    if ( !options.startingColorHSL ) {\r\n\r\n      if ( options.colorHSL ) {\r\n        options.startingColorHSL = this.checkHSL( options.colorHSL );\r\n      } else {\r\n        throw 'No starting color was provided. There must exist either options.colorHSL or options.startingColorHSL';\r\n      }\r\n    }\r\n\r\n    if ( !options.endingColorHSL ) {\r\n\r\n      if ( !options.affect || ![ 'h', 's', 'l', 'hue', 'saturation', 'lightness' ].include( options.affect ) ) {\r\n        options.affect = 'h';\r\n      }\r\n\r\n      switch ( options.affect ) {\r\n\r\n        case 'h':\r\n        case 'hue':\r\n          options.endingColorHSL = {\r\n            h: options.startingColorHSL.h + 300,\r\n            s: options.startingColorHSL.s,\r\n            l: options.startingColorHSL.l\r\n          };\r\n          break;\r\n\r\n        case 'saturation':\r\n        case 's':\r\n          let endS;\r\n\r\n          if ( options.startingColorHSL.s > 0.5 ) {\r\n            endS = 0;\r\n          } else {\r\n            endS = 1;\r\n          }\r\n\r\n          options.endingColorHSL = {\r\n            h: options.startingColorHSL.h,\r\n            s: endS,\r\n            l: options.startingColorHSL.l\r\n          };\r\n          break;\r\n\r\n        case 'lightness':\r\n        case 'l':\r\n          let endL;\r\n\r\n          if ( options.startingColorHSL.l > 0.5 ) {\r\n            endL = 0;\r\n          } else {\r\n            endL = 0.75;\r\n          }\r\n\r\n          options.endingColorHSL = {\r\n            h: options.startingColorHSL.h,\r\n            s: options.startingColorHSL.s,\r\n            l: endL\r\n          };\r\n          break;\r\n      }\r\n    } else {\r\n      options.endingColorHSL = Object.assign( {}, options.startingColorHSL, options.endingColorHSL );\r\n    }\r\n\r\n    return series.map( ( serie, index ) => {\r\n\r\n      if ( !serie.setLineColor ) {\r\n        throw `The serie ${ serie.getName() } does not implement the method \\`startingColor\\``;\r\n      }\r\n\r\n      let colorString;\r\n\r\n      if ( seriesLength == 1 ) {\r\n\r\n        colorString = this.buildHSLString( {\r\n          h: options.startingColorHSL.h,\r\n          s: options.startingColorHSL.s,\r\n          l: options.startingColorHSL.l\r\n        } );\r\n\r\n      } else {\r\n\r\n        colorString = this.buildHSLString( {\r\n          h: options.startingColorHSL.h + index / ( seriesLength - 1 ) * ( options.endingColorHSL.h - options.startingColorHSL.h ),\r\n          s: options.startingColorHSL.s + index / ( seriesLength - 1 ) * ( options.endingColorHSL.s - options.startingColorHSL.s ),\r\n          l: options.startingColorHSL.l + index / ( seriesLength - 1 ) * ( options.endingColorHSL.l - options.startingColorHSL.l )\r\n        } );\r\n      }\r\n\r\n      serie.setLineColor( colorString );\r\n\r\n      if ( typeof callback == 'function' ) {\r\n        callback( index, colorString );\r\n      }\r\n\r\n      return colorString;\r\n    } );\r\n  }\r\n}\r\n\r\nexport default PluginMakeTracesDifferent;","import * as util from '../graph.util.js';\r\n\r\nimport Plugin from './graph.plugin.js';\r\n\r\n/*\r\n  What is it ?\r\n    It is a plugin for automatic peak detection on a line serie\r\n\r\n  How to use ?\r\n    Basic usage:\r\n\r\n    let graph = new Graph(\"dom\", {\r\n      plugins: {\r\n        'peakPicking': {}\r\n      }\r\n      }\r\n    );\r\n\r\n    let wv = Graph.newWaveform();\r\n    wv.setData( [ 1, 2, 1, 2, 1, 2, 1, 2, 1, 2 ] );\r\n    let s = graph.newSerie(\"serie\").setWaveform( wv ).autoAxis();\r\n\r\n    graph.getPlugin('peakPicking').setSerie( s );\r\n    graph.draw();\r\n*/\r\n\r\n/**\r\n * @extends Plugin\r\n */\r\nclass PluginPeakPicking extends Plugin {\r\n  constructor() {\r\n    super( ...arguments );\r\n  }\r\n\r\n  static\r\n  default () {\r\n    return {\r\n      autoPeakPicking: false,\r\n      autoPeakPickingNb: 4,\r\n      autoPeakPickingMinDistance: 10,\r\n      autoPeakPickingFormat: false,\r\n      autoPeakPickingAllowAllY: false\r\n    };\r\n  }\r\n\r\n  init( graph, options ) {\r\n    super.init( graph, options );\r\n    this.picks = [];\r\n\r\n    for ( var n = 0, m = this.options.autoPeakPickingNb; n < m; n++ ) {\r\n      var shape = this.graph.newShape( {\r\n        type: 'label',\r\n        label: {\r\n          text: '',\r\n          position: {\r\n            x: 0\r\n          },\r\n          anchor: 'middle'\r\n        },\r\n\r\n        selectable: true,\r\n\r\n        shapeOptions: {\r\n          minPosY: 15\r\n        }\r\n      } );\r\n\r\n      shape.draw();\r\n\r\n      this.picks.push( shape );\r\n    }\r\n  }\r\n\r\n  setSerie( serie ) {\r\n    this.serie = serie;\r\n\r\n    this.picks.map( ( pick ) => {\r\n      pick.show();\r\n    } );\r\n  }\r\n\r\n  serieRemoved( serie ) {\r\n    if ( this.serie == serie ) {\r\n      this.picks.map( ( pick ) => {\r\n        pick.hide();\r\n      } );\r\n    }\r\n  }\r\n\r\n  preDraw() {\r\n    if ( !this.serie ) {\r\n      return;\r\n    }\r\n\r\n    this.detectedPeaks = [];\r\n    this.lastYPeakPicking = false;\r\n  }\r\n\r\n  postDraw() {\r\n    if ( !this.serie ) {\r\n      return;\r\n    }\r\n    let lookForMaxima = true;\r\n    let lookForMinima = false;\r\n    let lastYPeakPicking;\r\n    let peaks = [];\r\n\r\n    let waveform = this.serie.getWaveform();\r\n\r\n    if ( !waveform ) {\r\n      throw 'The serie must have a waveform for the peak picking to work';\r\n    }\r\n\r\n    let length = waveform.getLength(),\r\n      i = 0,\r\n      y;\r\n\r\n    for ( ; i < length; i++ ) {\r\n      y = waveform.getY( i );\r\n\r\n      if ( this.serie.options.lineToZero ) {\r\n        peaks.push( [ waveform.getX( i ), y ] );\r\n        continue;\r\n      }\r\n\r\n      if ( !lastYPeakPicking ) {\r\n        lastYPeakPicking = [ waveform.getX( i ), y ];\r\n        continue;\r\n      }\r\n\r\n      if (\r\n        ( y >= lastYPeakPicking[ 1 ] && lookForMaxima ) ||\r\n        ( y <= lastYPeakPicking[ 1 ] && lookForMinima )\r\n      ) {\r\n        lastYPeakPicking = [ waveform.getX( i ), y ];\r\n      } else if (\r\n        ( y < lastYPeakPicking[ 1 ] && lookForMaxima ) ||\r\n        ( y > lastYPeakPicking[ 1 ] && lookForMinima )\r\n      ) {\r\n        if ( lookForMinima ) {\r\n          lookForMinima = false;\r\n          lookForMaxima = true;\r\n        } else {\r\n          lookForMinima = true;\r\n          lookForMaxima = false;\r\n\r\n          peaks.push( lastYPeakPicking );\r\n          lastYPeakPicking = false;\r\n        }\r\n\r\n        lastYPeakPicking = [ waveform.getX( i ), y ];\r\n      }\r\n    }\r\n\r\n    var ys = peaks;\r\n    var x,\r\n      px,\r\n      passed = [],\r\n      px,\r\n      l = ys.length,\r\n      k,\r\n      m,\r\n      index;\r\n\r\n    i = 0;\r\n\r\n    var selected = this.graph.selectedShapes.map( function( shape ) {\r\n      return shape.getProp( 'xval' );\r\n    } );\r\n\r\n    ys.sort( function( a, b ) {\r\n      return b[ 1 ] - a[ 1 ];\r\n    } );\r\n\r\n    m = 0;\r\n\r\n    for ( ; i < l; i++ ) {\r\n      x = ys[ i ][ 0 ];\r\n      px = this.serie.getX( x );\r\n      k = 0;\r\n      y = this.serie.getY( ys[ i ][ 1 ] );\r\n\r\n      if (\r\n        px < this.serie.getXAxis().getMinPx() ||\r\n        px > this.serie.getXAxis().getMaxPx()\r\n      ) {\r\n        continue;\r\n      }\r\n\r\n      if ( !this.options.autoPeakPickingAllowAllY &&\r\n        ( y > this.serie.getYAxis().getMinPx() ||\r\n          y < this.serie.getYAxis().getMaxPx() )\r\n      ) {\r\n        continue;\r\n      }\r\n\r\n      // Distance check\r\n      for ( ; k < passed.length; k++ ) {\r\n        if (\r\n          Math.abs( passed[ k ] - px ) < this.options.autoPeakPickingMinDistance\r\n        ) {\r\n          break;\r\n        }\r\n      }\r\n      if ( k < passed.length ) {\r\n        continue;\r\n      }\r\n\r\n      // Distance check end\r\n\r\n      // If the retained one has already been selected somewhere, continue;\r\n      if ( ( index = selected.indexOf( x ) ) > -1 ) {\r\n        passed.push( px );\r\n        continue;\r\n      }\r\n\r\n      if ( !this.picks[ m ] ) {\r\n        return;\r\n      }\r\n\r\n      //    this.picks[ m ].show();\r\n\r\n      if ( this.serie.getYAxis().getPx( ys[ i ][ 1 ] ) - 20 < 0 ) {\r\n        this.picks[ m ].setLabelPosition( {\r\n          x: x,\r\n          y: '5px'\r\n        } );\r\n\r\n        this.picks[ m ].setLabelBaseline( 'hanging' );\r\n      } else {\r\n        this.picks[ m ].setLabelBaseline( 'no-change' );\r\n\r\n        this.picks[ m ].setLabelPosition( {\r\n          x: x,\r\n          y: ys[ i ][ 1 ],\r\n          dy: '-15px'\r\n        } );\r\n      }\r\n\r\n      this.picks[ m ].setProp( 'xval', x );\r\n\r\n      if ( this.options.autoPeakPickingFormat ) {\r\n        this.picks[ m ].setLabelText(\r\n          this.options.autoPeakPickingFormat.call( this.picks[ m ], x, m )\r\n        );\r\n      } else {\r\n        this.picks[ m ].setLabelText( String( Math.round( x * 1000 ) / 1000 ) );\r\n      }\r\n\r\n      this.picks[ m ].makeLabels();\r\n\r\n      m++;\r\n      while ( this.picks[ m ] && this.picks[ m ].isSelected() ) {\r\n        m++;\r\n      }\r\n\r\n      if ( passed.length == this.options.autoPeakPickingNb ) {\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Hides the automatic peak picking (see the autoPeakPicking option)\r\n   * @memberof SerieLine\r\n   */\r\n  hidePeakPicking( lock ) {\r\n    if ( !this._hidePeakPickingLocked ) {\r\n      this._hidePeakPickingLocked = lock;\r\n    }\r\n\r\n    if ( !this.picks ) {\r\n      return;\r\n    }\r\n    for ( var i = 0; i < this.picks.length; i++ ) {\r\n      this.picks[ i ].hide();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Shows the automatic peak picking (see the autoPeakPicking option)\r\n   * @memberof SerieLine\r\n   */\r\n  showPeakPicking( unlock ) {\r\n    if ( this._hidePeakPickingLocked && !unlock ) {\r\n      return;\r\n    }\r\n\r\n    if ( !this.picks ) {\r\n      return;\r\n    }\r\n\r\n    for ( var i = 0; i < this.picks.length; i++ ) {\r\n      this.picks[ i ].show();\r\n    }\r\n  }\r\n\r\n  killPeakPicking() {\r\n    if ( this.picks ) {\r\n      for ( var i = 0, l = this.picks.length; i < l; i++ ) {\r\n        this.picks[ i ].kill();\r\n      }\r\n    }\r\n  }\r\n\r\n  getSerie() {\r\n    return this.serie;\r\n  }\r\n}\r\n\r\nexport default PluginPeakPicking;","import Graph from './graph.core.js';\r\nimport GraphPosition from './graph.position.js';\r\nimport GraphLegend from './graph.legend.js';\r\nimport AxisX from './graph.axis.x.js';\r\nimport AxisY from './graph.axis.y.js';\r\nimport AxisXBar from './graph.axis.x.bar.js';\r\nimport AxisXTime from './graph.axis.x.time.js';\r\nimport SerieLine from './series/graph.serie.line.js';\r\nimport SerieLine3D from './series/graph.serie.line.3d.js';\r\nimport SerieBar from './series/graph.serie.bar.js';\r\nimport SerieBox from './series/graph.serie.box.js';\r\nimport SerieLineColor from './series/graph.serie.line.colored.js';\r\nimport SerieScatter from './series/graph.serie.scatter.js';\r\nimport SerieZone from './series/graph.serie.zone.js';\r\nimport SerieZone3D from './series/graph.serie.zone.3d.js';\r\nimport SerieDensityMap from './series/graph.serie.densitymap.js';\r\nimport SerieContour from './series/graph.serie.contour.js';\r\nimport Shape from './shapes/graph.shape.js';\r\nimport ShapeAreaUnderCurve from './shapes/graph.shape.areaundercurve.js';\r\nimport ShapeArrow from './shapes/graph.shape.arrow.js';\r\nimport ShapeEllipse from './shapes/graph.shape.ellipse.js';\r\nimport ShapeLabel from './shapes/graph.shape.label.js';\r\nimport ShapePolyline from './shapes/graph.shape.polyline.js';\r\nimport ShapeLine from './shapes/graph.shape.line.js';\r\nimport ShapeNMRIntegral from './shapes/graph.shape.nmrintegral.js';\r\nimport ShapePeakIntegration2D from './shapes/graph.shape.peakintegration2d.js';\r\nimport ShapeRect from './shapes/graph.shape.rect.js';\r\nimport ShapeCross from './shapes/graph.shape.cross.js';\r\nimport ShapePeakBoundariesCenter from './shapes/graph.shape.peakboundariescenter.js';\r\nimport ShapeHTML from './shapes/graph.shape.html.js';\r\nimport GraphPlugin from './plugins/graph.plugin.js';\r\nimport GraphPluginDrag from './plugins/graph.plugin.drag.js';\r\nimport GraphPluginShape from './plugins/graph.plugin.shape.js';\r\nimport GraphPluginSelectScatter from './plugins/graph.plugin.selectScatter.js';\r\nimport GraphPluginZoom from './plugins/graph.plugin.zoom.js';\r\nimport GraphPluginTimeSerieManager from './plugins/graph.plugin.timeseriemanager.js';\r\nimport GraphPluginSerieLineDifference from './plugins/graph.plugin.serielinedifference.js';\r\nimport GraphPluginAxisSplitting from './plugins/graph.plugin.axissplitting.js';\r\nimport GraphPluginMakeTracesDifferent from './plugins/graph.plugin.makeTracesDifferent.js';\r\nimport GraphPluginPeakPicking from './plugins/graph.plugin.peakpicking.js';\r\nimport {\r\n  Waveform\r\n} from './util/waveform.js';\r\nimport FitLM from './util/fit_lm.js';\r\n\r\n// Corrent naming is important here !\r\n\r\nGraph.registerConstructor( 'graph.position', GraphPosition );\r\n\r\nGraph.registerConstructor( 'graph.axis.x', AxisX );\r\nGraph.registerConstructor( 'graph.axis.y', AxisY );\r\nGraph.registerConstructor( 'graph.axis.x.bar', AxisXBar );\r\nGraph.registerConstructor( 'graph.axis.x.time', AxisXTime );\r\n\r\nGraph.registerConstructor( 'graph.serie.line', SerieLine );\r\nGraph.registerConstructor( 'graph.serie.line.3d', SerieLine3D );\r\nGraph.registerConstructor( 'graph.serie.line.color', SerieLineColor );\r\nGraph.registerConstructor( 'graph.serie.contour', SerieContour );\r\nGraph.registerConstructor( 'graph.serie.bar', SerieBar );\r\nGraph.registerConstructor( 'graph.serie.box', SerieBox );\r\nGraph.registerConstructor( 'graph.serie.scatter', SerieScatter );\r\nGraph.registerConstructor( 'graph.serie.zone', SerieZone );\r\nGraph.registerConstructor( 'graph.serie.zone.3d', SerieZone3D );\r\nGraph.registerConstructor( 'graph.serie.densitymap', SerieDensityMap );\r\n\r\nGraph.registerConstructor( Graph.SERIE_LINE, SerieLine );\r\nGraph.registerConstructor( Graph.SERIE_LINE_3D, SerieLine3D );\r\nGraph.registerConstructor( Graph.SERIE_LINE_COLORED, SerieLineColor );\r\nGraph.registerConstructor( Graph.SERIE_CONTOUR, SerieContour );\r\nGraph.registerConstructor( Graph.SERIE_BAR, SerieBar );\r\nGraph.registerConstructor( Graph.SERIE_BOX, SerieBox );\r\nGraph.registerConstructor( Graph.SERIE_SCATTER, SerieScatter );\r\nGraph.registerConstructor( Graph.SERIE_ZONE, SerieZone );\r\nGraph.registerConstructor( Graph.SERIE_ZONE_3D, SerieZone3D );\r\nGraph.registerConstructor( Graph.SERIE_DENSITYMAP, SerieDensityMap );\r\n\r\n//Graph.registerConstructor( \"graph.serie.line.broken\", GraphSerieLineBroken );\r\n\r\nGraph.registerConstructor( 'graph.plugin.shape', GraphPluginShape );\r\nGraph.registerConstructor( 'graph.plugin.drag', GraphPluginDrag );\r\nGraph.registerConstructor( 'graph.plugin.zoom', GraphPluginZoom );\r\nGraph.registerConstructor( 'graph.plugin.selectScatter', GraphPluginSelectScatter );\r\nGraph.registerConstructor( 'graph.plugin.timeSerieManager', GraphPluginTimeSerieManager );\r\nGraph.registerConstructor( 'graph.plugin.serielinedifference', GraphPluginSerieLineDifference );\r\nGraph.registerConstructor( 'graph.plugin.serieLineDifference', GraphPluginSerieLineDifference );\r\nGraph.registerConstructor( 'graph.plugin.axissplitting', GraphPluginAxisSplitting );\r\nGraph.registerConstructor( 'graph.plugin.makeTracesDifferent', GraphPluginMakeTracesDifferent );\r\nGraph.registerConstructor( 'graph.plugin.peakPicking', GraphPluginPeakPicking );\r\n\r\nGraph.registerConstructor( 'graph.shape', Shape );\r\nGraph.registerConstructor( 'graph.shape.areaundercurve', ShapeAreaUnderCurve );\r\nGraph.registerConstructor( 'graph.shape.arrow', ShapeArrow );\r\nGraph.registerConstructor( 'graph.shape.ellipse', ShapeEllipse );\r\nGraph.registerConstructor( 'graph.shape.label', ShapeLabel );\r\nGraph.registerConstructor( 'graph.shape.polyline', ShapePolyline );\r\nGraph.registerConstructor( 'graph.shape.line', ShapeLine );\r\nGraph.registerConstructor( 'graph.shape.nmrintegral', ShapeNMRIntegral );\r\nGraph.registerConstructor( 'graph.shape.html', ShapeHTML );\r\nGraph.registerConstructor( 'graph.shape.peakintegration2d', ShapePeakIntegration2D );\r\n//  Graph.registerConstructor( \"graph.shape.peakinterval\", GraphShapePeakInterval );\r\n//  Graph.registerConstructor( \"graph.shape.peakinterval2\", GraphShapePeakInterval2 );\r\n//  Graph.registerConstructor( \"graph.shape.rangex\", GraphShapeRangeX );\r\nGraph.registerConstructor( 'graph.shape.rect', ShapeRect );\r\nGraph.registerConstructor( 'graph.shape.rectangle', ShapeRect );\r\nGraph.registerConstructor( 'graph.shape.cross', ShapeCross );\r\n//Graph.registerConstructor( \"graph.shape.zoom2d\", GraphShapeZoom2D );\r\nGraph.registerConstructor( 'graph.shape.peakboundariescenter', ShapePeakBoundariesCenter );\r\n\r\n//   Graph.registerConstructor( \"graph.toolbar\", GraphToolbar );\r\nGraph.registerConstructor( 'graph.legend', GraphLegend );\r\nGraph.registerConstructor( 'graph.waveform', Waveform );\r\n\r\nexport default Graph;"],"names":["_parsePx","px","indexOf","parseInt","replace","isNumeric","n","isNaN","parseFloat","isFinite","Position","constructor","x","y","dx","dy","duplicate","compute","graph","xAxis","yAxis","serie","hasXAxis","hasYAxis","throw","_compute","relativeTo","_relativeTo","relativeToComputed","parsed","pos","getXAxis","getYAxis","i","axis","val","dval","undefined","console","warn","closest","getClosestPointToXY","Error","getName","getY","yClosest","error","getPx","def","yMin","_parsePercent","_getPositionPx","getRelPx","value","getDrawingWidth","getDrawingHeight","getPos","percent","getDeltaPx","v","deltaPosition","mode","delta","ref","refd","refPx","deltaPx","getValPosition","getRelVal","rel","getMaxValue","getMinValue","getMinPx","getMaxPx","getPxRel","check","callback","posObject","position","setAttributeTo","to","params","ns","setAttributeNS","setAttribute","mapEventEmission","options","source","eventName","substring","toLowerCase","on","j","apply","arguments","guid","c","r","Math","random","toString","throwError","message","obj","Array","isArray","hue2rgb","p","q","t","hslToRgb","h","s","l","g","b","round","saveDomAttributes","attributes","identification","_savedAttributesIds","restoreDomAttributes","_savedAttributes","_attributes","push","getAttribute","hasSavedAttribute","dom","attr","overwriteDomAttribute","attribute","newValue","splice","attrs","length","debounce","func","wait","immediate","timeout","context","args","later","callNow","clearTimeout","setTimeout","SVGParser","svgString","parser","DOMParser","doc","parseFromString","getOffset","el","rect","getBoundingClientRect","top","left","setCSS","element","values","style","ajaxGet","Promise","resolve","reject","request","XMLHttpRequest","open","type","url","json","setRequestHeader","onload","status","response","responseText","JSON","parse","onerror","send","hasOwn","Object","prototype","hasOwnProperty","toStr","arr","call","isPlainObject","hasOwnConstructor","hasIsPrototypeOf","key","extend","name","src","copy","copyIsArray","clone","target","deep","mix","baseClass","mixin","prop","emptyDom","firstChild","removeChild","EventEmitter","proto","indexOfListener","listeners","listener","alias","aliasClosure","getListeners","evt","events","_getEvents","RegExp","test","flattenListeners","flatListeners","getListenersAsObject","addListener","listenerIsWrapped","once","addOnceListener","defineEvent","defineEvents","evts","removeListener","index","off","addListeners","manipulateListeners","removeListeners","remove","single","multiple","removeEvent","_events","removeAllListeners","emitEvent","_getOnceReturnValue","trigger","emit","slice","setOnceReturnValue","_onceReturnValue","setMarkerStyle","showMarkers","_default","modifiers","default","setSerieStyle","Graph","jsonSerie","styles","map","line","SERIE_LINE","SERIE_BAR","color","setLineColor","width","setLineWidth","dash","setLineStyle","fill","setFillColor","fillOpacity","setFillOpacity","errorBar","setErrorBarStyle","errorBox","setErrorBoxStyle","marker","SERIE_SCATTER","processAxes","axisOptions","allAxes","forEach","constructorName","getConstructor","init","setBottomAxis","getNumAxes","setTopAxis","setLeftAxis","setRightAxis","categories","makeAxes","jsonAxes","bottom","right","makeAnnotation","axes","shape","newShape","properties","setSerie","layer","setLayer","setXAxis","setYAxis","draw","redraw","makeGraph","wrapper","setWrapper","resize","height","legend","opts","seriesHideable","isSerieHideable","seriesSelectable","isSerieSelectable","makeLegend","setAutoposition","setPosition","series","data","SERIE_BOX","newWaveformHash","errors","setData","newWaveform","xBar","setErrorBarX","xBarAbove","setErrorBarXAbove","xBarBelow","setErrorBarXBelow","yBar","setErrorBar","yBarAbove","setErrorBarAbove","yBarBelow","setErrorBarBelow","xBox","setErrorBoxX","xBoxAbove","setErrorBoxXAbove","xBoxBelow","setErrorBoxXBelow","yBox","setErrorBox","yBoxAbove","setErrorBoxAbove","yBoxBelow","setErrorBoxBelow","newSerie","autoAxis","excludeFromLegend","setWaveform","serieStyle","annotations","annotation","time","timeEnd","dataAggregator","URL","createObjectURL","Blob","Worker","aggregatorWorker","queue","string","onmessage","e","maxX","minX","maxY","minY","direction","numPoints","k","slots","dataAggregatedX","dataAggregatedY","aggregationSum","getX","slotNumber","lastAggregationX","lastAggregation","lastAggregationSum","newAggregation","newAggregationX","xdata","xScale","xOffset","aggregations","dataPerSlot","floor","slotX","min","max","slotY","sums","postMessage","aggregates","_queueId","workerUrl","id","toOptimize","requestId","Date","now","prom","resolver","FitHost","DELTAP","BIGVAL","WEIGHT","setYData","dataY","setXData","dataX","setWeight","weight","setInitialParams","subsetIndex","setSubset","setFunction","function","progress","hookIteration","parms","NPARMS","fromIndex","toIndex","_from","_to","f","_hookIteration","buildFit","_func","NPTS","getLength","arrY","getDataY","arrX","getDataX","resid","jac","fit","log","join","LM","_result","done","param","computeResiduals","sumsq","nudge","dp","buildJacobian","FACTOR","d","getResidualElement","getJacobianElement","xmin","getMin","xmax","getMax","waveformResult","waveform","gH","gnadj","gnpnts","hook","LMITER","LMBOOST","LMSHRINK","LAMBDAZERO","LAMBDAMAX","LMTOL","sos","sosprev","lambda","myH","nadj","npts","beta","alpha","amatrix","niter","bLMiter","rrise","gaussj","a","N","det","big","save","L","ik","jk","abs","Waveform","nb","bars","above","below","boxes","BELOW","ABOVE","BOX","BAR","setXWaveform","newData","_makeArray","warnNaN","nanable","isNaNAllowed","_setData","optimized","dataInUse","getScale","getShift","computeXMinMax","hasXWaveform","getXWaveform","wave","append","rescaleX","offset","scale","getTypedArrayClass","_typedArrayClass","setTypedArrayClass","isUnsigned","from","Float32Array","Float64Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","recalculateMinMaxNewPoint","prepend","unshift","monotoneous","getMonotoneousAscending","_monotoneousAscending","concat","wave2","checkMonotonicity","monoDir","Number","MAX_VALUE","_monotoneous","checkMinMaxErrorBars","hasErrorBars","getMaxError","b1","b2","getDataInUse","getIndexFromVal","useDataToUse","roundingMethod","getIndexFromMonotoneousData","dataInUseType","getIndexFromX","xval","getXShift","getXScale","getDataMinX","getDataMaxX","getData","isXMonotoneous","euclidianSearch","getIndexFromY","yval","ydata","getDataMinY","getDataMaxY","setAtIndex","getIndexFromXY","scaleX","scaleY","getIndexFromDataXY","valX","valY","valCollection","isAscending","isMonotoneous","trace","binarySearch","findWithShortestDistance","axisRef","xMaxDistance","yMaxDistance","getShortestDistanceToPoint","maxDistanceX","maxDistanceY","y2","x2","distance","shortestDistance","shortestDistanceIndex","point","POSITIVE_INFINITY","distToSegment","getReductionType","getXMin","getXMax","getYMin","getYMax","getMinX","getMaxX","getMinY","getMaxY","setShift","shift","setScale","setXShift","setXScale","getDataToUseFlat","self","rejector","FitLM","util","results","getXRaw","_integrateP","temp","sum","deltaTot","diff","integrateP","integrate","fromX","toX","average","p0","p1","getAverageP","mean","stddev","num","denom","getAverageX","_integrateX","dir","requireXMonotonicity","requireMonotonicity","invert","reverse","resampleForDisplay","inverting","dataMinMax","resampleSum","resampleMin","resampleMax","resampleNum","resample_x_start","resample_x_px_start","x_px","doing_mean","firstPointIndex","xPosition","resampleToPx","xpos","interpolate","yData","xIndex","xData","NaN","xIndexF","interpolateIndex_X","indexStart","getXMonotoneousAscending","isXMonotoneousAscending","divide","numberOrWave","_arithmetic","DIVIDE","divideBy","multiply","MULTIPLY","multiplyBy","logBase","ln","E","base","add","ADD","addBy","subtract","SUBTRACT","subtractBy","math","method","operator","_waveArithmetic","_numberArithmetic","operation","yDataThis","xSet","Set","xData2","xs","sort","ys","aggregate","_dataAggregating","_dataAggregated","_dataAggregationDirection","toUpperCase","pow2","pow2floor","aggregator","then","event","hasAggregation","selectAggregatedData","pxWidth","level","pow2ceil","alsoDuplicateXWave","xShift","subrangeX","fromP","toP","findLocalMinMax","xRef","xWithin","indexPlus","indexMinus","findLocalMinMaxIndex","tmp","curr","currI","NEGATIVE_INFINITY","text","setUnit","unit","setXUnit","xunit","getUnit","getXUnit","hasXUnit","hasUnit","findLevels","box","edge","rounding","rangeP","lastLvlIndex","lvlIndex","indices","findLevel","ceil","rangeX","increment","getIndexInterpolate","normalize","factor","total","minValue","maxValue","ratio","filterNaN","filterInfinity","xWave","checkMinMax","side","getMaxErrorType","stack","getErrorBarXBelow","getErrorX","getErrorBarXAbove","getErrorBoxXBelow","getErrorBoxXAbove","getErrorBarYBelow","getError","getErrorBarYAbove","getErrorBoxYBelow","getErrorBoxYAbove","Symbol","valueBefore","valueAfter","indexBefore","indexAfter","targetX","targetY","haystackX","haystackY","distance_i","haystack","fineCheck","seedA","seedB","seedInt","nanDirection","WaveformHash","getYFromX","xValue","errorNotImplemented","keys","dist2","w","distToSegmentSquared","l2","GraphOptionsDefault","title","paddingTop","paddingBottom","paddingLeft","paddingRight","close","closeColor","fontSize","fontFamily","plugins","pluginAction","mouseActions","keyActions","wheel","dblclick","shapesUnselectOnClick","shapesUniqueSelection","_constructors","Map","_creation","_drawn","doDom","bind","prevented","shapes","shapesLocked","plugin","selectedShapes","_axesHaveChanged","padding","currentAction","nsxlink","getTopAxis","getLeftAxis","getRightAxis","getBottomAxis","_pluginsInit","HTMLElement","document","getElementById","appendChild","outline","wrapperStyle","getComputedStyle","setSize","_resize","_registerEvents","getDom","getId","getWrapper","setOption","setTitle","domTitle","textContent","setTitleFontSize","setTitleFontColor","fontColor","setTitleFontFamily","displayTitle","hideTitle","hide","display","show","onlyIfAxesHaveChanged","force","sizeSet","executeRedrawSlaves","haveAxesChanged","hasSizeChanged","refreshDrawingZone","_pluginsExecute","drawn","updateLegend","drawSeries","delayUpdate","_lockUpdate","doUpdate","update","resumeUpdate","isDelayedUpdate","setWidth","skipResize","setHeight","getWidth","getHeight","getPaddingTop","getPaddingLeft","getPaddingBottom","getPaddingRight","useCache","innerHeight","innerWidth","cacheOffset","offsetCached","uncacheOffset","_getAxis","kill","killAxis","noRedraw","noSerieKill","isX","isY","axisGroup","group","groupPrimaryGrids","gridPrimary","groupSecondaryGrids","gridSecondary","hasTopAxis","hasBottomAxis","hasLeftAxis","hasRightAxis","hasAxis","axisList","autoscaleAxes","_applyToAxes","autoscale","autoScale","autoScaleAxes","autoScaleAxis","setMinMaxToFitSeries","gridsOff","gridsOn","setBackgroundColor","rectEvent","getAxisState","state","getCurrentMin","getCurrentMax","setAxisState","setCurrentMin","setCurrentMax","saveAxisState","savedName","savedAxisState","recallAxisState","_applyToAxis","getBoundaryAxis","minmax","usingZValues","valSeries","getBoundaryAxisFromSeries","func2use","infinity2use","Infinity","serieValue","getSeriesFromAxis","isShown","updateDataMinMaxAxes","axisvars","setMaxValueData","setMinValueData","tb","lr","ax","findAxesLinkedTo","linkedToAxis","_axisHasChanged","getSerie","makeSerie","postInit","getSeries","allSeries","types","filter","include","getType","sortSeries","drawSerie","resetSeries","removeSeries","killSeries","selectSerie","selectName","selectedSerie","selectionType","unselectSerie","triggerEvent","select","getSelectedSerie","unselect","getShapesOfSerie","makeToolbar","toolbarData","toolbar","getShapes","shapeType","shapeData","mute","shapeProperties","prevent","_id","_data","setProperties","simplified","props","setProp","GraphPosition","fillColor","strokeColor","setStrokeColor","strokeWidth","setStrokeWidth","locked","lock","movable","selectable","resizable","handles","selectOnMouseDown","selectOnClick","transforms","addTransform","highlightOnMouseOver","labelEditable","labels","label","showLabel","setLabelText","setLabelPosition","setLabelColor","setLabelSize","size","setLabelAngle","angle","setLabelBaseline","baseline","setLabelAnchor","anchor","setLabelBackgroundColor","backgroundColor","setLabelBackgroundOpacity","backgroundOpacity","createHandles","applyStyle","newPosition","varArgs","redrawShapes","removeShapes","selectShape","isSelectable","unselectShapes","_select","getSelectedShapes","unselectShape","cancelUnselectShape","_unselect","_removeShape","appendShapeToDom","isHTML","insertBefore","_dom","getLayer","removeShapeFromDom","appendSerieToDom","groupMain","removeSerieFromDom","layers","createElementNS","prevLayer","plotGroup","nextSibling","focus","elementMoving","movingElement","bypassHandleMouse","stopElementMoving","_makeClosingLines","closingLines","els","graphingZone","isActionAllowed","action","enabled","keyCode","keyCheck","backspace","enter","tab","ctrl","alt","pause","escape","up","down","meta","shiftKey","ctrlKey","metaKey","altKey","forcePlugin","forcedPlugin","unforcePlugin","funcName","_pluginExecute","which","pluginYieldActiveState","activePlugin","_serieExecute","pluginName","pluginOptions","getPlugin","hasPlugin","onlyIfRequired","getLegend","requireLegendUpdate","requireDelayedUpdate","orthogonalProjectionSetup","zAxis","maxZ","minZ","shiftX","shiftY","orthogonalProjectionUpdate","groupGrids","refAxisX","refAxisY","x0","y0","getZProj","getZPos","sa","sb","_removeSerie","contextListen","menuElements","onContextMenuListen","lockShapes","moving","resizing","unlockShapes","arg","_getXY","clientX","clientY","_sizeChanged","updateGraphingZone","transform","getDrawingSpaceWidth","drawingSpaceWidth","getDrawingSpaceHeight","drawingSpaceHeight","getDrawingSpaceMinX","drawingSpaceMinX","getDrawingSpaceMinY","drawingSpaceMinY","getDrawingSpaceMaxX","drawingSpaceMaxX","getDrawingSpaceMaxY","drawingSpaceMaxY","tracking","trackingLine","enable","seriesSet","addSerieToTrackingLine","serieOptions","noLine","trackingLineShape","stroke","trackingLineShapeOptions","serieShape","rx","getLineWidth","ry","assign","trackingShape","getLineColor","forceParentDom","setKatexRenderer","renderer","_katexRenderer","hasKatexRenderer","renderWithKatex","katexValue","katexElement","div","createElement","fromJSON","graphFromJson","exportToSchema","schema","axesPositions","axesExport","allaxes","axisPosition","forcedMin","forcedMax","flip","flipped","seriesExport","toType","SERIE_LINE_COLORED","exportData","isFlipped","linestyle","stylename","styleName","lineColor","lineWidth","lineStyle","styleObj","markers","zoom","points","getLabel","registerConstructor","has","set","softFail","get","waveformHash","getAxisLevelFromSpan","span","possible","m","levels","_painted","hideGroup","showGroup","floating","getSpan","setLevel","getAxisPosition","shiftTop","reduce","prev","shiftBottom","current","getLevel","setMinPx","setMaxPx","forcedWidth","shift2","equalizePosition","shiftLeft","shiftRight","floatingAxis","getFloatingAxis","floatingValue","getFloatingValue","floatingPx","_closeLine","clipRect","drawLines","_handleKey","checkKeyActions","parameters","methodName","keyComb","preventDefault","stopPropagation","removeSelectedShape","keepInDom","xmlns","defs","groupEvent","titleFontSize","titleFontColor","titleFontFamily","clip","markerArrow","pathArrow","markerHorizontalSplit","path","markerVerticalSplit","vertLineArrow","pathVertLine","addEventListener","coords","_handleMouseMove","_handleMouseLeave","_handleMouseDown","_handleMouseUp","_handleDblClick","_handleClick","deltaY","wheelDeltaY","wheelDelta","_handleMouseWheel","checkMouseActions","handleMouseMove","xOverwritePx","snapToSerie","getPosition","xClosest","_trackingLegend","_trackingLegendSerie","textMethod","trackingLineDefaultTextMethod","output","closestPoint","getMouseVal","withinPx","useAxis","legendType","mouseMoveData","executed","seriesOutput","posXPx","posYPx","justCreated","_makeTrackingLegend","forceTrackingLegendMode","_trackingLegendMove","txt","innerHTML","toY","skip","start","offsetHeight","startX","marginLeft","startY","marginTop","offsetWidth","next","window","requestAnimationFrame","borderRadius","boxShadow","border","pointerEvents","valueToHtml","handleMouseUp","jsGraphIsShape","inst","_availableAxes","bar","axisInstance","broken","x1","y1","isDisplayed","coordX","coordY","handleMouseLeave","SERIE_CONTOUR","SERIE_ZONE","SERIE_DENSITYMAP","SERIE_LINE_3D","SERIE_ZONE_3D","TICKS_OUTSIDE","TICKS_INSIDE","TICKS_CENTERED","legendDefaults","frame","frameWidth","frameColor","frameRounding","shapesToggleable","Legend","svg","subG","groups","rectBottom","transformX","transformY","setEvents","eyeId","eyeCrossedId","eyeClosed","eye","adoptNode","documentElement","alignToX","alignToY","setDraggable","bln","setAutoPosition","autoPosition","buildLegendBox","posX","posY","excludedFromLegend","bbox","getBBox","cursor","redrawGraph","previousHeight","previousWidth","calculatePosition","poscoords","_setPosition","_requiredUpdate","hasChildNodes","lastChild","fullWidth","getSymbolForLegend","_getSymbolForLegendContainer","getMarkerForLegend","getTextForLegend","isHideable","eyeUse","hideShapesOnHideSerie","isSelected","notHideable","hideable","isToggleShapes","mousedown","mousemove","deltaX","fixSeries","fixSeriesAdd","svgElement","defaults","lineAt","axisDataSpacing","unitModification","primaryGrid","secondaryGrid","primaryGridColor","secondaryGridColor","primaryGridWidth","secondaryGridWidth","hideWhenNoSeriesShown","shiftToZero","tickPosition","nbTicksPrimary","nbTicksSecondary","ticklabelratio","exponentialFactor","exponentialLabelFactor","logScale","marginMin","marginMax","scientificScale","scientificScaleExponent","engineeringScale","unitInTicks","unitWrapperBefore","unitWrapperAfter","splitMarks","tickLabelOffset","useKatexForLabel","highestMax","lowestMin","labelValue","Axis","overwriteoptions","unitModificationTimeTicks","hasChanged","_lines","groupTicks","groupTickLabels","labelTspan","preunit","unitTspan","expTspan","expTspanExp","setTickPosition","gridLinePath","primary","secondary","setGridLinesStyle","groupSeries","widthHeightTick","ticks","ticksLabels","tickScaling","currentTick","lastCurrentTick","totalDelta","handleMouseMoveLocal","addLabel","getVal","setDisplay","bool","accumulator","_hidden","setLineAt","atValues","adaptTo","thisValue","foreignValue","preference","adapt","foreign","currentAxisMin","currentAxisMax","_zoomed","getInterval","use","setFloating","setAxisDataSpacing","val1","val2","dataSpacing","setAxisDataSpacingMin","setAxisDataSpacingMax","minPx","setMinMaxFlipped","maxPx","minPxFlipped","maxPxFlipped","getMathMaxPx","getMathMinPx","dataMin","dataMax","getDataMax","getDataMin","setLowestMin","forceMin","noRescale","setHighestMax","forceMax","getForcedMin","getForcedMax","forceToAxis","getNbTicksPrimary","setNbTicksPrimary","getNbTicksSecondary","setNbTicksSecondary","mouseVal","handleMouseWheel","_doZoomVal","zoomLock","_zoomLocked","forceLock","_doZoom","px1","px2","cacheCurrentMin","cacheCurrentMax","cacheInterval","_hasChanged","getSerieShift","_serieShift","getSerieScale","_serieScale","getUnitPerTick","nbTick","valrange","pxPerTick","nbTicks","unitPerTick","breaked","unitPerTickCorrect","decimals","numberToNatural","pow","possibleTicks","noNotify","interval","cache","getCurrentInterval","cachedInterval","cachedCurrentMin","cachedCurrentMax","_draw","widthPx","scientificExponent","letter","unitDecade","getEngineeringExponent","getExponentGreekLetter","writeUnit","preunitTspan","hideTicks","resetTicksLength","widthHeight","drawLinkedToAxisTicksWrapper","drawLinearTicksWrapper","drawLogTicks","removeUselessTicks","removeUselessTickLabels","_drawLine","_hideLine","tickPrimaryUnit","primaryTickUnit","maxPrimaryTickUnit","minPrimaryTickUnit","drawTicks","secondaryTicks","forcePrimaryTickUnit","primaryInterval","forcePrimaryTickUnitMax","forcePrimaryTickUnitMin","getPrimaryTickUnit","incrTick","setTickLabelRatio","tickRatio","doesHideWhenNoSeriesShown","_widthLabels","secondaryIncr","subIncrTick","loop","loop2","drawTickWrapper","getMaxSizeTick","nextTick","tick","nextTickLabel","lastCurrentTickLabel","currentTickLabel","tickLabel","nextGridLine","setGridLineStyle","gridLine","getPrimaryGridColor","getSecondaryGridColor","getPrimaryGridWidth","getSecondaryGridWidth","getPrimaryGridOpacity","getSecondaryGridOpacity","dasharray","getPrimaryGridDasharray","getSecondaryGridDasharray","incr","optsMain","exponential","overwrite","drawTick","linkToAxis","scalingFunction","delta2","String","getRoundedPx","exp","valueToText","forceDecimals","toFixed","getExponentialFactor","getExponentialLabelFactor","modifyUnit","dec","noScaling","noUnits","getModifiedValue","umin","units","valueRounded","setExponentialFactor","setExponentialLabelFactor","setLabel","setLabelFont","font","labelFont","setSpan","_level","tickPx1","tickPx2","setGrids","setPrimaryGrid","setSecondaryGrid","primaryGridOn","primaryGridOff","secondaryGridOn","secondaryGridOff","turnGridsOff","turnGridsOn","setColor","axisColor","primaryTicksColor","secondaryTicksColor","ticksLabelColor","labelColor","setAxisColor","getAxisColor","setTickLabelOffset","offsetValue","setPrimaryTicksColor","getPrimaryTicksColor","setSecondaryTicksColor","getSecondaryTicksColor","setTicksLabelColor","getTicksLabelColor","setPrimaryGridColor","setSecondaryGridColor","setPrimaryGridWidth","setSecondaryGridWidth","setPrimaryGridOpacity","opacity","primaryGridOpacity","setSecondaryGridOpacity","secondaryGridOpacity","setPrimaryGridDasharray","primaryGridDasharray","setSecondaryGridDasharray","secondaryGridDasharray","getLabelColor","setTickContent","tspan","setUnitInTicks","setUnitWrapper","before","after","setUnitDecade","setScientific","setScientificScaleExponent","setEngineering","engineeringScaling","setLogScale","isZoomed","getValue","AxisX","topbottom","forceHeight","forcedHeight","forcedPos","dominantBaseline","drawLabel","tickWidth","drawSpecifics","zValue","AxisY","leftright","forceWidth","setAxisPosition","shiftPosition","getAdditionalWidth","tickMargin","longestTick","getComputedTextLength","fullwidthlabel","placeLabel","xshift","isLeft","isRight","scaleToFitAxis","excludeSerie","end","maxV","minV","AxisXBar","_barCategories","elements","autoSeries","setSeries","setCategoryConfig","_getUsedCategories","usedCategories","getUsedCategories","cat","dispatchedCategories","scategories","setDataIndices","axisFormat","threshold","increments","format","dateFormat","token","timezone","timezoneClip","pad","len","getWeek","onejan","date","mask","utc","dF","SyntaxError","masks","_","D","H","M","o","getTimezoneOffset","flags","dd","ddd","i18n","dayNames","dddd","mm","mmm","monthNames","mmmm","yy","yyyy","hh","HH","MM","ss","tt","T","TT","Z","match","pop","S","W","$0","shortDate","mediumDate","longDate","fullDate","shortTime","mediumTime","longTime","isoDate","isoTime","isoDateTime","isoUtcDateTime","getClosestIncrement","basis","roundDate","setSeconds","getSeconds","setMilliseconds","setMinutes","getMinutes","setHours","getHours","setDate","getDate","setMonth","getMonth","incrementDate","setFullYear","getFullYear","getGroup","number","line1","line2","cloneNode","hideGroups","getDateText","renderGroup","x1B","x2B","substr","GraphTimeAxis","widthTime","timePerPx","maxVal","minVal","currentFormat","xVal1","xVal2","dateFirst","currentDate","getTime","ErrorBarMixin","makeBarY","origin","makeBoxY","makeBarX","makeBoxX","errorstyle","errorbarStyle","_setErrorStyle","errorboxStyle","errorstyles","pairs","makePath","strokeOpacity","all","errorDrawInit","paths","errorAddPoint","xpx","ypx","errorAddPointBarChart","doErrorDraw","errorDraw","defaultOptions","redrawShapesAfterDraw","Serie","defaultInherited","_symbolLegendContainer","beforeDraw","afterDraw","oneDimensional","_addData","howmany","clearData","setOptions","noLegendUpdate","hideShapes","hidden","hideImpl","hidePeakPicking","showShapes","showImpl","showPeakPicking","toggleDisplay","axisCheck","selected","_checkX","_checkY","autoAxes","xaxis","yaxis","setAxes","getWaveform","getWaveforms","dataHasChanged","lineForLegend","applyLineStyle","setLegendSymbolStyle","updateStyle","textForLegend","getIndex","setFlip","getFlip","layerIndex","newLayer","setStyle","styleHasChanged","_changedStyles","hasStyleChanged","_dataHasChanged","hasDataChanged","setInfo","infos","getInfo","setAdditionalData","additionalData","getAdditionalData","enableTracking","hoverCallback","outCallback","_tracker","disableTracking","_trackerDom","allowTrackingLine","_type","_excludedFromLegend","includeInLegend","categoryIndices","nbCategories","hasErrors","markerStyles","unselected","cx","cy","SerieScatter","shapesDetails","groupMarkers","parentElement","selectMarkerOnHover","selectMarker","setDataCategory","dataCategory","empty","container","shapeLegend","_makeMarker","getMarkerStyle","isCategory","applyMarkerStyle","selection","noSetPosition","modifier","styleAll","defaultStyle","parentNode","removeAttribute","unselectMarker","setOn","selectMarkers","selectionStyle","allStyles","setMarkers","hideMarkers","withinPxX","withinPxY","xValAllowed","yValAllowed","closestPointIndex","xMax","yMax","interpolation","xBefore","xAfter","yBefore","yAfter","xExact","indexClosest","interpolatedY","trackMouse","lineToZero","selectableOnClick","overflowX","overflowY","SerieLine","shown","_isMinOrMax","groupLines","domMarker","markerLabel","markerLabelSquare","domMarkerHover","domMarkerSelect","markerHovered","groupMarkerSelected","markerPoints","lines","independantMarkers","initExtended1","extendStyles","applyLineStyles","onMouseWheel","degrade","pxPerP","degradationPx","drawInit","currentLineId","counter","currentLine","_dataToUse","numberOfPointsInTotal","promise","_xDataToUse","removeLinesGroup","_afterLinesGroup","insertLinesGroup","removeExtraLines","slotToUse","_slotToUse","lookForMaxima","lookForMinima","pos0","toggleMarker","split","lastX","lastY","xpx2","ypx2","xMin","yLeftCrossingRatio","yLeftCrossing","yRightCrossingRatio","yRightCrossing","xTopCrossingRatio","xTopCrossing","xBottomCrossingRatio","xBottomCrossing","yshift","yscale","pointOutside","lastPointOutside","pointOnAxis","_createLine","counter2","_addPoint","cloned","children","ret","_trackingCallback","_trackingOutCallback","move","allowMarker","getLineDashArray","getFillColor","getMarkerPath","family","z","doMarker","yValue","intY","trueX","start2","end2","v1","v2","initJ","maxJ","dataIndex","xBeforeIndexArr","applyToSelected","getLineStyle","getStyle","extendStyle","styleTarget","styleOrigin","xmonotoneous","dataOutput","Serie3DMixin","zpos","useZValues","getZCorrectedValue","valFinal","wf","SerieLine3D","setZPos","zPos","setz","SerieBar","pathDom","getFillOpacity","orientation","maxBoxWidth","meanLineColor","meanLineWidth","boxAboveLineWidth","boxAboveLineColor","boxAboveFillColor","boxAboveFillOpacity","boxBelowLineWidth","boxBelowLineColor","boxBelowFillColor","boxBelowFillOpacity","barAboveLineColor","barAboveLineWidth","barBelowLineColor","barBelowLineWidth","outlierLineWidth","outlierLineColor","outlierFillColor","outlierFillOpacity","SerieBox","axisref","axisval","methodref","methodval","blnX","Q2","Q3","Q1","whiskers","outliers","_style","styleValue","_set","_gstyle","setMeanLineColor","getMeanLineColor","setMeanLineWidth","getMeanLineWidth","setBoxAboveLineColor","getBoxAboveLineColor","setBoxBelowLineColor","getBoxBelowLineColor","setBoxAboveLineWidth","getBoxAboveLineWidth","setBoxBelowLineWidth","getBoxBelowLineWidth","setBoxAboveFillColor","getBoxAboveFillColor","setBoxBelowFillColor","getBoxBelowFillColor","setBoxAboveFillOpacity","getBoxAboveFillOpacity","setBoxBelowFillOpacity","getBoxBelowFillOpacity","setBarAboveLineColor","getBarAboveLineColor","setBarBelowLineColor","getBarBelowLineColor","setBarAboveLineWidth","getBarAboveLineWidth","setBarBelowLineWidth","getBarBelowLineWidth","setOutlierLineColor","getOutlierLineColor","setOutlierLineWidth","getOutlierLineWidth","setOutlierFillColor","getOutlierFillColor","setOutlierFillOpacity","getOutlierFillOpacity","axis2","boxOtherDimension","boxAbove","boxBelow","barAbove","barBelow","useCategories","_linkedToScatterSeries","scatter_serie","lineMean","applyMeanStyle","rectAbove","rectBelow","boxPos","applyBoxStyle","whiskerAbove","whiskerBelow","outliervalue","outlier","setOutlierStyle","applyWhiskerStyle","getCategoryIndex","extremity","xymode","scatter_serie_cat","linkToScatterSerie","SerieLineColor","setColors","colors","toBreak","eraseLines","incrXFlip","markersShown","getMarkerCurrentFamily","latchLines","xpxbefore","ypxbefore","xbefore","ybefore","_rgb","object","SerieZone","groupZones","lineZone","clipId","waveforms","setWaveforms","setMinMaxWaveforms","buffer","xminpx","xmaxpx","yminpx","ymaxpx","ymin","ymax","getLineOpacity","setLineOpacity","lineOpacity","SerieZone3D","SerieDensityMap","rects","recalculateBinsOnDraw","calculateDensity","numX","fromY","numY","densitymap","indexX","indexY","binMin","binMax","maxIndexX","maxIndexY","setDensityMap","calculateDensityWeighted","compX","compY","exactX","exactY","indexXLow","indexXHigh","indexYLow","indexYHigh","autoBins","setPxPerBin","pxPerBinX","pxPerBinY","weightedDensityMap","calculationDensityMap","pxPerBin","weighted","setBinsFromTo","densityMapCalculation","numBins","calculateDensityAdvanced","weighing","widthValues","axisGetter","dimension","densityMapCalculate","setColorMapBinBoundaries","_internal","colorMapMin","colorMapMax","callbackColorMapMinMax","autoColorMapBinBoundaries","onRedrawColorMapBinBoundaries","colorMapHSL","colorStops","numColors","methods","colorMap","opacities","first","slices","colorMapNum","autoColorMapHSL","getColorIndex","binValue","colorIndex","deltaXPx","deltaYPx","drawRects","SerieContour","negativeDelta","positiveDelta","negativeThreshold","positiveThreshold","datas","segments","domLine","zValues","incrYFlip","lastxpx","setColorTo","fixed","positive","hasNegative","_shapeZoom","hideHandleNeg","setHandleNeg","showHandleNeg","setHandlePos","setDynamicColor","lineColors","setNegative","hsl","fromPositive","toPositive","fromNegative","toNegative","rgb","overwriteValue","setShapeZoom","Shape","_selected","createDom","classes","masker","maskPath","maskingId","maskDomWrapper","maskDom","handleMouseOver","handleMouseOut","handleMouseDown","handleClick","handleDblClick","initImpl","keepDom","_inDom","isHidden","isVisible","addClass","className","makeClasses","removeClass","changed","setEventReceptacle","getProp","preventRedraw","appendToDom","makeLabels","applyPosition","redrawImpl","updateLabels","_applyTransforms","getRelativePosition","relativePosition","result","exec","getLabelPosition","getProperties","getProps","addProp","resetProp","setDom","noForce","setDomGroup","overwriteSavedProp","applySelectedStyle","getStrokeColor","getStrokeWidth","setStrokeDasharray","setAttributes","addAttribute","attributeName","attributeValue","added","resetTransforms","setLabelData","getLabelText","displayLabel","hideLabel","setLabelFontSize","setLabelStrokeColor","setLabelStrokeWidth","applyGenericStyle","sortPositions","sortFunction","transformString","center","computePosition","posCenter","_labels","_labelsBackground","bg","labelDblClickListener","isLabelEditable","labelIndex","_applyLabelData","visible","currAngle","labelData","_getLabelAnchor","emptyLabels","_selectStatus","hasHandles","setter","addHandles","isLocked","handlesInDom","removeHandles","hideHandles","areHandlesInDom","hasStaticHandles","setHandles","getSelectStyle","style2","selectStyle","setSelectStyle","setStaticHandles","staticHandles","_createHandles","callbackEach","handle","isResizable","handleSelected","handleMouseDownImpl","handleMouseMoveImpl","handleMouseUpImpl","handleCreateImpl","isMovable","moved","_mouseCoords","preventUnselect","highlight","unHighlight","unlock","unmovable","unresizable","unselectable","saveDomName","getHighlightAttributes","highlightImpl","unHighlightImpl","_highlightAttributes","setHighlightAttributes","getMaskingID","maskWith","maskingShape","updateMask","position2","_getPosition","shapeLabel","textAlign","previousValue","blurEvent","nextValue","removeEventListener","_forcedParentDom","ShapeSurfaceUnderCurve","resizingPosition","posXY","posXY2","v3","firstX","firstY","xBeforeIndex","ShapeLine","GraphShape","currentPos2x","currentPos2y","currentPos1x","currentPos1y","pos2","posToChange","vertical","horizontal","noX","noY","forcedCoords","forced","ShapeArrow","nbHandles","ShapeEllipse","posR","posComputed","setR","triggerChange","ShapeLabel","ShapePolyline","setPointsPx","pxPoints","ShapeNMRIntegral","_domShadow","xor","xVal","yVal","getAxis","baseLine","pos1","index1","index2","index3","firstXVal","firstYVal","lastXVal","lastYVal","condition","incrementation","normalSums","_sumVal","sumVal","py","lastPointX","lastPointY","_sum","firstPointX","firstPointY","ratioLabel","updateIntegralValue","handleCondition","forceValue","toPrecision","_ratio","selectHandles","ShapeRectangle","sides","currentX","currentY","currentW","currentH","invX","invY","pos2X","pos2Y","_staticHandles","ShapePeakIntegration2D","ShapeRect","setBindableToDom","ShapeCross","getFromData","ShapePeakBoundaries","lineHeight","line3","rectBoundary","redrawLines","posLeft","posRight","redrawY","setY","setLineHeight","lineHeihgt","ShapeHTML","setContent","content","setRenderer","_renderer","currentPosX","currentPosY","Plugin","onMouseDown","onMouseUp","onMouseMove","PluginDrag","dragX","dragY","persistanceX","persistanceY","totaltime","_draggingX","_draggingY","_lastDraggingX","_lastDraggingY","stopAnimation","dt","speedX","speedY","_pluginDragMin","_pluginDragMax","accelerationX","accelerationY","_persistanceMove","PluginShape","setShape","shapeInfo","count","onChange","currentShape","currentShapeEvent","onCreate","PluginSelectScatter","_path","findPoints","j2","selectPoint","unselectPoint","PluginZoom","_zoomingGroup","_zoomingSquare","zoomMode","_zoomingMode","_backedUpZoomMode","_zoomingXStart","_zoomingYStart","forcedY","onZoomStart","onZoomMove","removeZone","_x","_y","transition","smooth","modeX","modeY","fullX","toAxes","_pluginZoomMin","_pluginZoomMax","_pluginZoomMinFinal","_pluginZoomMaxFinal","fullY","doX","doY","onDblClick","pref","xActual","diffX","yActual","diffY","onZoom","maxTime","gradualUnzoomStart","sin","PI","isFullX","isFullY","memory","memoryHead","getFromMemory","store","head","PluginTimeSerieManager","currentSlots","requestLevels","noRecalculate","updateSerie","recalculateSeries","LRUName","intervals","maxParallelRequests","optimalPxPerPoint","nbPoints","LRU","create","requestsRunning","setURL","setAvailableIntervals","serieName","serieType","dbElements","noZoneSerie","_zoneSerie","registerPlugin","optimalInterval","getOptimalInterval","optimalIntervalIndex","cleanRegister","startSlotId","computeSlotID","endSlotId","intervalMultipliers","multiplier","firstSlotId","lastSlotId","slotId","computeTimeMin","register","processRequests","levelArray","levelElement","levelIndex","priority","noProcess","computeUniqueID","computeTimeMax","slotName","currentLevelChecking","requestToMake","getURL","requestElements","totalspan","optimalIntervalAmongAvailable","newDiff","extra","info","computeSlotTime","getZoneSerie","updateZoneSerie","recalculateSerie","lruData","recalculateSerieUpwards","setIntervalCheck","clearInterval","setInterval","downSlotId","downInterval","nextInterval","newSlotTime","newSlotTimeEnd","newSlotId","lockRedraw","unlockRedraw","isRedrawLocked","PluginSerieLineDifference","positiveStyle","negativeStyle","pathsPositive","pathsNegative","positivePolyline","negativePolyline","serieTop","serieBottom","serie1","serie2","setBoundaries","getFrom","getTo","w1","w2","wFinal","wFinal2","chunks","currentChunk","newChunk","wave1","crossing","computeCrossing","chunk","x11","y11","x12","y12","x21","y21","x22","y22","a1","a2","getPositivePolyline","getNegativePolyline","SerieLineExtended","subSeries","SerieScatterExtended","excludingMethods","addMethods","getOwnPropertyNames","subSerie","returnMethods","PluginAxisSplitting","margins","high","low","newXAxis","newBottomAxis","newYAxis","newLeftAxis","newTopAxis","getOptions","SplitXAxis","SplitYAxis","newRightAxis","preDraw","splits","splitNumber","markerFamilies","subserie","splitAxis","sserie","xSubAxis","ySubAxis","getSubAxis","subAxisIndex","newLineSerie","newScatterSerie","serieObj","defaultAxisConstructorOptions","SplitAxis","delegateMethods","cl","constructorOptions","_splitVal","_splits","fixGridIntervalBasedOnAxis","axisIndex","fixGridFor","splitSpread","autoSpread","_splitSpread","currentSplit","setChunkBoundaries","baseWidth","baseWidthIndex","_mean","_baseWidthVal","_baseWidthIndex","subAxis","spanReference","labelPosY","widthAfter","PluginMakeTracesDifferent","checkHSL","hue","saturation","lightness","buildHSLString","colorizeAll","seriesLength","serieTypes","startingColorHSL","colorHSL","endingColorHSL","affect","endS","endL","colorString","PluginPeakPicking","autoPeakPicking","autoPeakPickingNb","autoPeakPickingMinDistance","autoPeakPickingFormat","autoPeakPickingAllowAllY","picks","shapeOptions","minPosY","pick","serieRemoved","detectedPeaks","lastYPeakPicking","postDraw","peaks","passed","_hidePeakPickingLocked","killPeakPicking","AxisXTime","GraphPluginShape","GraphPluginDrag","GraphPluginZoom","GraphPluginSelectScatter","GraphPluginTimeSerieManager","GraphPluginSerieLineDifference","GraphPluginAxisSplitting","GraphPluginMakeTracesDifferent","GraphPluginPeakPicking","ShapeAreaUnderCurve","ShapePeakBoundariesCenter","GraphLegend"],"mappings":"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"}