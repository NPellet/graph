(function(A,S){'object'==typeof exports&&'object'==typeof module?module.exports=S():'function'==typeof define&&define.amd?define([],S):'object'==typeof exports?exports.Graph=S():A.Graph=S()})(this,function(){return function(u){function A(P){if(S[P])return S[P].exports;var C=S[P]={exports:{},id:P,loaded:!1};return u[P].call(C.exports,C,C.exports,A),C.loaded=!0,C.exports}var S={};return A.m=u,A.c=S,A.p='',A(0)}([function(u,A,S){var P,C,T;(function(E,Y){C=[u,S(1),S(2),S(5),S(6),S(8),S(9),S(10),S(11),S(15),S(16),S(17),S(18),S(19),S(20),S(21),S(22),S(23),S(42),S(24),S(25),S(26),S(27),S(28),S(29),S(30),S(31),S(32),S(33),S(34),S(35),S(36),S(37),S(38),S(40),S(41)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(void 0!==T&&(u.exports=T))})(this,function(E,Y,X,I,N,F,O,V,B,W,R,G,U,Z,Q,K,J,$,ee,te,ie,re,ae,se,ne,oe,le,pe,de,ge,ue,he,ce,xe,me,ye){'use strict';function fe(et){return et&&et.__esModule?et:{default:et}}var be=fe(Y),Ae=fe(X),ke=fe(I),Me=fe(N),_e=fe(F),Se=fe(O),Pe=fe(V),Ce=fe(B),ve=fe(W),Le=fe(R),we=fe(G),Te=fe(U),Ee=fe(Z),De=fe(Q),Ye=fe(K),Xe=fe(J),Ie=fe($),Ne=fe(ee),ze=fe(te),He=fe(ie),Fe=fe(re),Oe=fe(ae),je=fe(se),Ve=fe(ne),Be=fe(oe),We=fe(le),Re=fe(pe),Ge=fe(de),Ue=fe(ge),Ze=fe(ue),qe=fe(he),Qe=fe(ce),Ke=fe(xe),Je=fe(me),$e=fe(ye);be.default.registerConstructor('graph.position',Ae.default),be.default.registerConstructor('graph.axis.x',Me.default),be.default.registerConstructor('graph.axis.y',_e.default),be.default.registerConstructor('graph.axis.x.bar',Se.default),be.default.registerConstructor('graph.axis.x.time',Pe.default),be.default.registerConstructor('graph.serie.line',Ce.default),be.default.registerConstructor('graph.serie.line.color',we.default),be.default.registerConstructor('graph.serie.contour',Ye.default),be.default.registerConstructor('graph.serie.bar',ve.default),be.default.registerConstructor('graph.serie.box',Le.default),be.default.registerConstructor('graph.serie.scatter',Te.default),be.default.registerConstructor('graph.serie.zone',Ee.default),be.default.registerConstructor('graph.serie.densitymap',De.default),be.default.registerConstructor(be.default.SERIE_LINE,Ce.default),be.default.registerConstructor(be.default.SERIE_LINE_COLORED,we.default),be.default.registerConstructor(be.default.SERIE_CONTOUR,Ye.default),be.default.registerConstructor(be.default.SERIE_BAR,ve.default),be.default.registerConstructor(be.default.SERIE_BOX,Le.default),be.default.registerConstructor(be.default.SERIE_SCATTER,Te.default),be.default.registerConstructor(be.default.SERIE_ZONE,Ee.default),be.default.registerConstructor(be.default.SERIE_DENSITYMAP,De.default),be.default.registerConstructor('graph.plugin.shape',Ze.default),be.default.registerConstructor('graph.plugin.drag',Ue.default),be.default.registerConstructor('graph.plugin.zoom',Qe.default),be.default.registerConstructor('graph.plugin.selectScatter',qe.default),be.default.registerConstructor('graph.plugin.timeSerieManager',Ke.default),be.default.registerConstructor('graph.plugin.serielinedifference',Je.default),be.default.registerConstructor('graph.plugin.serieLineDifference',Je.default),be.default.registerConstructor('graph.plugin.axissplitting',$e.default),be.default.registerConstructor('graph.shape',Xe.default),be.default.registerConstructor('graph.shape.areaundercurve',Ie.default),be.default.registerConstructor('graph.shape.arrow',Ne.default),be.default.registerConstructor('graph.shape.ellipse',ze.default),be.default.registerConstructor('graph.shape.label',He.default),be.default.registerConstructor('graph.shape.polyline',Fe.default),be.default.registerConstructor('graph.shape.line',Oe.default),be.default.registerConstructor('graph.shape.nmrintegral',je.default),be.default.registerConstructor('graph.shape.peakintegration2d',Ve.default),be.default.registerConstructor('graph.shape.rect',Be.default),be.default.registerConstructor('graph.shape.rectangle',Be.default),be.default.registerConstructor('graph.shape.cross',We.default),be.default.registerConstructor('graph.shape.peakboundariescenter',Re.default),be.default.registerConstructor('graph.legend',ke.default),E.exports=be.default})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(2),S(3),S(4)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(void 0!==T&&(u.exports=T))})(this,function(E,Y,X,I){'use strict';function F(ce){return ce&&ce.__esModule?ce:{default:ce}}function O(ce,xe,me,ye){var fe=ce.getConstructor(ye,!0);if(fe||'string'!=typeof ye||(fe=ce.getConstructor('graph.serie.'+ye,!0)),fe){var be=new fe;be.init(ce,xe,me),ce.appendSerieToDom(be)}else return ne.throwError('No constructor exists for the serie type provided. Use Graph.registerConstructor( name, constructor ); first is you use your own series');return be}function V(ce,xe){for(var me=0,ye=xe.length,fe;me<ye;me++){fe=!0;for(var be=0,Ae=xe[me].length;be<Ae;be++)ce[0]<xe[me][be][0]&&ce[1]<xe[me][be][0]||ce[0]>xe[me][be][1]&&ce[1]>xe[me][be][1]||(fe=!1);if(fe)return xe[me].push(ce),me}return xe.push([ce]),xe.length-1}function B(ce){var Me={top:[],bottom:[],left:[],right:[]},_e={top:[],bottom:[],left:[],right:[]};ce._painted=!0,ce._applyToAxes(function(we,Te){if(!(we.disabled||we.floating)){var Ee=V(we.getSpan(),_e[Te]);we.setLevel(Ee),Me[Te][Ee]=Math.max(we.getAxisPosition(),Me[Te][Ee]||0)}},!1,!0,!1);var Se=Me.top.reduce(function(we,Te){return we+Te},0),Pe=Me.bottom.reduce(function(we,Te){return we+Te},0);[Me.top,Me.bottom].map(function(we){we.reduce(function(Te,Ee,De){return we[De]=Te+Ee,Te+Ee},0)}),ce._applyToAxes(function(we,Te){we.disabled||we.floating||we.setShift(Me[Te][we.getLevel()])},!1,!0,!1),ce._applyToAxes(function(we,Te){if(!we.disabled&&(we.setMinPx(Se),we.setMaxPx(ce.getDrawingHeight(!0)-Pe),!we.floating)){let Ee=we.linkedToAxis?0:we.draw();var De=V(we.getSpan(),_e[Te]);we.setLevel(De),Me[Te][De]=Math.max(Ee,Me[Te][De]||0)}},!1,!1,!0);var Ce=ne.extend(!0,{},Me);ce._applyToAxes(function(we,Te){we.disabled||we.floating||(Ce[Te][we.getLevel()]=Math.max(Me[Te][we.getLevel()],we.equalizePosition(Me[Te][we.getLevel()])))},!1,!1,!0),Me=Ce;var ve=Me.left.reduce(function(we,Te){return we+Te},0),Le=Me.right.reduce(function(we,Te){return we+Te},0);[Me.left,Me.right].map(function(we){we.reduce(function(Te,Ee,De){return we[De]=Te+Ee,Te+Ee},0)}),ce._applyToAxes((we,Te)=>{we.disabled||we.floating||we.setShift(Me[Te][we.getLevel()])},!1,!1,!0),ce._applyToAxes(function(we){we.disabled||(we.setMinPx(ve),we.setMaxPx(ce.getDrawingWidth(!0)-Le),we.floating||!we.linkedToAxis&&we.draw())},!1,!0,!1),ce._applyToAxes(function(we){if(we.floating){var Te=we.getFloatingAxis(),Ee=we.getFloatingValue(),De=Te.getPx(Ee);we.setShift(De),we.linkedToAxis||we.draw()}},!1,!0,!0),ee(ce,'right',ce.getDrawingWidth(!0),ce.getDrawingWidth(!0),Se,ce.getDrawingHeight(!0)-Pe),ee(ce,'left',0,0,Se,ce.getDrawingHeight(!0)-Pe),ee(ce,'top',ve,ce.getDrawingWidth(!0)-Le,0,0),ee(ce,'bottom',ve,ce.getDrawingWidth(!0)-Le,ce.getDrawingHeight(!0)-Pe,ce.getDrawingHeight(!0)-Pe),ce.clipRect.setAttribute('y',Se),ce.clipRect.setAttribute('x',ve),ce.clipRect.setAttribute('width',ce.getDrawingWidth()-ve-Le),ce.clipRect.setAttribute('height',ce.getDrawingHeight()-Se-Pe),ce.rectEvent.setAttribute('y',Se+ce.getPaddingTop()),ce.rectEvent.setAttribute('x',ve+ce.getPaddingLeft()),ce.drawingSpaceWidth=ce.getDrawingWidth()-ve-Le,ce.drawingSpaceHeight=ce.getDrawingHeight()-Se-Pe,ce.rectEvent.setAttribute('width',ce.drawingSpaceWidth),ce.rectEvent.setAttribute('height',ce.drawingSpaceHeight),ce.drawingSpaceMinX=ve+ce.getPaddingLeft(),ce.drawingSpaceMinY=Se+ce.getPaddingTop(),ce.drawingSpaceMaxX=ce.getDrawingWidth()-Le+ce.getPaddingLeft(),ce.drawingSpaceMaxY=ce.getDrawingHeight()-Pe+ce.getPaddingTop(),ce.shift=Me,ce.redrawShapes()}function W(ce){var xe=ce;ce._dom.addEventListener('keydown',function(me){(8==me.keyCode||127==me.keyCode)&&xe.selectedShapes&&(me.preventDefault(),me.stopPropagation(),xe.selectedShapes.map(function(ye){ye.kill()}))}),ce.groupEvent.addEventListener('mousemove',function(me){var ye=xe._getXY(me);G(xe,ye.x,ye.y,me)}),ce.dom.addEventListener('mouseleave',function(){ie(xe)}),ce.groupEvent.addEventListener('mousedown',function(me){if(xe.focus(),!(3==me.which||me.ctrlKey)){var ye=xe._getXY(me);R(xe,ye.x,ye.y,me)}}),ce.dom.addEventListener('mouseup',function(me){ce.emit('mouseUp',me);var ye=xe._getXY(me);K(xe,ye.x,ye.y,me)}),ce.dom.addEventListener('dblclick',function(me){ce.emit('dblClick',me);var ye=xe._getXY(me);Q(xe,ye.x,ye.y,me)}),ce.groupEvent.addEventListener('click',function(me){if(!(3==me.which||me.ctrlKey)){var ye=xe._getXY(me);xe.prevent(!1)||J(xe,ye.x,ye.y,me)}}),ce.groupEvent.addEventListener('mousewheel',function(me){var ye=me.wheelDeltaY||me.wheelDelta||-me.deltaY;return te(xe,ye,me),!1}),ce.groupEvent.addEventListener('wheel',function(me){var ye=me.wheelDeltaY||me.wheelDelta||-me.deltaY;return te(xe,ye,me),!1})}function R(ce,xe,me,ye){return ce.forcedPlugin?(ce.activePlugin=ce.forcedPlugin,void ce._pluginExecute(ce.activePlugin,'onMouseDown',[ce,xe,me,ye])):void U(ce,ye,[ce,xe,me,ye],'onMouseDown')}function G(ce,xe,me,ye){if(ce.bypassHandleMouse)return void ce.bypassHandleMouse.handleMouseMove(ye);if(!(ce.activePlugin&&ce._pluginExecute(ce.activePlugin,'onMouseMove',[ce,xe,me,ye]))){if(ce._applyToAxes('handleMouseMove',[xe-ce.options.paddingLeft,ye],!0,!1),ce._applyToAxes('handleMouseMove',[me-ce.options.paddingTop,ye],!1,!0),!ce.activePlugin){var fe;if(ce.options.trackingLine&&ce.options.trackingLine.snapToSerie&&'common'==ce.options.trackingLine.mode){var be=ce.options.trackingLine.snapToSerie;if(fe=be.handleMouseMove(!1,!0),!fe)ce.trackingLine.hide();else{ce.trackingLine.show();var Ae=fe.xIndexClosest;ce.trackingLine.getPosition(0).x=be.getData()[0][2*Ae],ce.trackingLine.getPosition(1).x=be.getData()[0][2*Ae],ce.trackingLine.redraw();var xe=be.getXAxis().getPx(ce.trackingLine.getPosition(0).x)+ce.options.paddingLeft}var ke=ce.options.trackingLine.series;ke||(ke=ce.getSeries().map(function(Se){return{serie:Se,withinPx:20,withinVal:-1}})),ce._trackingLegend=ge(ce,ke,xe,me,ce._trackingLegend,ce.options.trackingLine.textMethod,ce.trackingLine.getPosition(1).x)}}if(ce.options.onMouseMoveData){for(var Me={},_e=0;_e<ce.series.length;_e++)Me[ce.series[_e].getName()]=ce.series[_e].handleMouseMove(!1,!0);ce.options.onMouseMoveData.call(ce,ye,Me)}U(ce,ye,[ce,xe,me,ye],'onMouseMove')}}function U(ce,xe,me,ye){var fe=ce.options.mouseActions,be,Ae;for(be=0,Ae=fe.length;be<Ae;be++)if(!fe[be].plugin){if(fe[be].callback&&ce.isMouseActionAllowed(xe,fe[be]))return fe[be].options&&me.push(fe[be].options),fe[be].callback.apply(ce,me),!0;if(fe[be].series){var ke;'all'===fe[be].series&&(ke=ce.series),Array.isArray(fe[be].series)||(ke=[ke]),fe[be].options&&me.push(fe[be].options);for(;0<ke.length;be++)ce._serieExecute(ke[be],ye,me);return!0}}else if(ce.forcedPlugin==fe[be].plugin||ce.isMouseActionAllowed(xe,fe[be]))return fe[be].options&&me.push(fe[be].options),ce.activePlugin=fe[be].plugin,ce._pluginExecute(fe[be].plugin,ye,me),!0;return!1}function Z(ce){var xe=document.createElement('div');return xe.setAttribute('class','trackingLegend'),xe.style.position='absolute',xe.style.borderRadius='4px',xe.style.boxShadow='1px 1px 3px 0px rgba(100,100,100,0.6)',xe.style.border='2px solid #333333',xe.style.backgroundColor='rgba(255, 255, 255, 0.5 )',xe.style.pointerEvents='none',xe.style.paddingTop='5px',xe.style.paddingBottom='5px',xe.style.paddingLeft='10px',xe.style.paddingRight='10px',ce.getWrapper().insertBefore(xe,ce.getDom()),xe}function Q(ce,xe,me,ye){ce.options.dblclick;U(ce,ye,[xe,me,ye],'onDblClick')}function K(ce,xe,me,ye){return ce.bypassHandleMouse?(ce.bypassHandleMouse.handleMouseUp(ye),void(ce.activePlugin=!1)):void(ce._pluginExecute(ce.activePlugin,'onMouseUp',[ce,xe,me,ye]),ce.activePlugin=!1)}function J(ce,xe,me,ye){ce.emit('click',[ce,xe,me,ye]),ye.target.jsGraphIsShape||ce.prevent(!1)||!ce.options.shapesUnselectOnClick||ce.unselectShapes()}function $(ce,xe,me,ye){var me=me||{},be={def:{x:ce.getConstructor('graph.axis.x'),y:ce.getConstructor('graph.axis.y')},time:{x:ce.getConstructor('graph.axis.x.time')},bar:{x:ce.getConstructor('graph.axis.x.bar')}},fe;switch(me.type){case'time':var Ae=be.time;break;case'bar':var Ae=be.bar;break;case'broken':var Ae=be.broken;break;default:var Ae=be.def;}return'top'===ye||'bottom'===ye?fe=Ae.x:'left'===ye||'right'===ye?fe=Ae.y:void 0,xe=xe||0,'object'==typeof xe&&(me=xe,xe=0),ce.axis[ye][xe]||(ce.axis[ye][xe]=new fe(ce,ye,me),ce.axis[ye][xe].init(ce,me)),ce.axis[ye][xe]}function ee(ce,xe,me,ye,fe,be){if(!1!==ce.options.close){var Ae=0;ce.axis[xe].map(function(ke){ke.isDisplayed()&&!ke.floating&&Ae++}),(!0===ce.options.close||ce.options.close[xe])&&0==Ae?(ce.closingLines[xe].setAttribute('display','block'),ce.closingLines[xe].setAttribute('x1',me),ce.closingLines[xe].setAttribute('x2',ye),ce.closingLines[xe].setAttribute('y1',fe),ce.closingLines[xe].setAttribute('y2',be)):ce.closingLines[xe].setAttribute('display','none')}}function te(ce,xe,me){U(ce,me,[xe,me],'onMouseWheel')&&(me.preventDefault(),me.stopPropagation())}function ie(ce){ce.options.handleMouseLeave&&ce.options.handleMouseLeave.call(ce)}function re(ce){var xe=ce._axesHaveChanged;return ce._axesHaveChanged=!1,xe}function ae(ce){var xe=ce._sizeChanged;return ce._sizeChanged=!1,xe}Object.defineProperty(E,'__esModule',{value:!0});var se=F(Y),ne=function(ce){if(ce&&ce.__esModule)return ce;var xe={};if(null!=ce)for(var me in ce)Object.prototype.hasOwnProperty.call(ce,me)&&(xe[me]=ce[me]);return xe.default=ce,xe}(X),oe=F(I);const le={title:'',paddingTop:30,paddingBottom:5,paddingLeft:20,paddingRight:20,close:{left:!0,right:!0,top:!0,bottom:!0},fontSize:12,fontFamily:'Myriad Pro, Helvetica, Arial',plugins:{},pluginAction:{},mouseActions:[],wheel:{},dblclick:{},shapesUnselectOnClick:!0,shapesUniqueSelection:!0};var pe=new Map;class de extends oe.default{constructor(ce,xe,me){if(super(),this._creation=ne.guid(),'string'==typeof ce?ce=document.getElementById(ce):'number'==typeof ce.length&&(ce=ce[0]),!ce)throw'The wrapper DOM element was not found.';if(!ce.appendChild)throw'The wrapper appears to be an invalid HTMLElement';for(var ye in ce.style['-webkit-user-select']='none',ce.style['-moz-user-select']='none',ce.style['-o-user-select']='none',ce.style['-ms-user-select']='none',ce.style['user-select']='none',this.options=ne.extend({},le,xe),this.prevented=!1,this.axis={left:[],top:[],bottom:[],right:[]},this.shapes=[],this.shapesLocked=!1,this.plugins={},this.options.pluginAction)this.options.pluginAction.plugin=ye,this.options.mouseActions.push(this.options.pluginAction);this.selectedShapes=[],this.ns='http://www.w3.org/2000/svg',this.nsxlink='http://www.w3.org/1999/xlink',this.series=[],this._dom=ce,this._axesHaveChanged=!0,this.options.hasOwnProperty('padding')&&ne.isNumeric(this.options.padding)&&(this.options.paddingTop=this.options.paddingBottom=this.options.paddingLeft=this.options.paddingRight=this.options.padding);var fe=getComputedStyle(ce),be=parseInt(fe.width),Ae=parseInt(fe.height);if(this._doDom(),this.setSize(be,Ae),this._resize(),W(this),this.currentAction=!1,me)for(var ye in me)for(var ke=0,Me=me[ye].length;ke<Me;ke++)'top'==ye?this.getTopAxis(ke,me[ye][ke]):'bottom'==ye?this.getBottomAxis(ke,me[ye][ke]):'left'==ye?this.getLeftAxis(ke,me[ye][ke]):'right'==ye?this.getRightAxis(ke,me[ye][ke]):void 0;this._pluginsInit()}getDom(){return this.dom}getId(){return this._creation}getWrapper(){return this._dom}setOption(ce,xe){return this.options[ce]=xe,this}setTitle(ce){this.options.title=ce,this.domTitle.textContent=ce}displayTitle(){this.domTitle.setAttribute('display','inline')}hideTitle(){this.domTitle.setAttribute('display','none')}redraw(ce){if(this.width&&this.height)return this.sizeSet?!ce||re(this)||ae(this)?(this.executeRedrawSlaves(),B(this),!0):(this.executeRedrawSlaves(!0),!1):(this._resize(),this.executeRedrawSlaves(),!0)}executeRedrawSlaves(){this._pluginsExecute('preDraw')}draw(ce){this.updateLegend(!0),this.drawSeries(this.redraw(!ce))}delayUpdate(){return this._lockUpdate=!0,this}doUpdate(){return this.legend&&this.legend.update(),this.draw(),this.legend&&this.legend.update(),this}resumeUpdate(){return this._lockUpdate=!1,this}isDelayedUpdate(){return this._lockUpdate}setWidth(ce,xe){this.width=ce,xe||this._resize()}setHeight(ce,xe){this.height=ce,xe||this._resize()}resize(ce,xe){return ce&&xe&&this.setSize(ce,xe),this._resize(),this}setSize(ce,xe){this.setWidth(ce,!0),this.setHeight(xe,!0),this.getDrawingHeight(),this.getDrawingWidth()}getWidth(){return this.width}getHeight(){return this.height}getPaddingTop(){return this.options.paddingTop}getPaddingLeft(){return this.options.paddingLeft}getPaddingBottom(){return this.options.paddingBottom}getPaddingRight(){return this.options.paddingRight}getDrawingHeight(ce){return ce&&this.innerHeight?this.innerHeight:this.innerHeight=this.height-this.options.paddingTop-this.options.paddingBottom}getDrawingWidth(ce){return ce&&this.innerWidth?this.innerWidth:this.innerWidth=this.width-this.options.paddingLeft-this.options.paddingRight}cacheOffset(){this.offsetCached=ne.getOffset(this._dom)}uncacheOffset(){this.offsetCached=!1}getXAxis(ce,xe){return 0<this.axis.top.length&&0==this.axis.bottom.length?this.getTopAxis(ce,xe):this.getBottomAxis(ce,xe)}getYAxis(ce,xe){return 0<this.axis.right.length&&0==this.axis.left.length?this.getRightAxis(ce,xe):this.getLeftAxis(ce,xe)}getTopAxis(ce,xe){return $(this,ce,xe,'top')}getBottomAxis(ce,xe){return $(this,ce,xe,'bottom')}getLeftAxis(ce,xe){return $(this,ce,xe,'left')}getRightAxis(ce,xe){return $(this,ce,xe,'right')}setXAxis(ce,xe){this.setBottomAxis(ce,xe)}setYAxis(ce,xe){this.setLeftAxis(ce,xe)}setLeftAxis(ce,xe){xe=xe||0,this.axis.left[xe]&&this.axis.left[xe].kill(),this.axis.left[xe]=ce}setRightAxis(ce,xe){xe=xe||0,this.axis.right[xe]&&this.axis.right[xe].kill(),this.axis.right[xe]=ce}setTopAxis(ce,xe){xe=xe||0,this.axis.top[xe]&&this.axis.top[xe].kill(),this.axis.top[xe]=ce}setBottomAxis(ce,xe){xe=xe||0,this.axis.bottom[xe]&&this.axis.bottom[xe].kill(),this.axis.bottom[xe]=ce}killAxis(ce,xe=!1,me=!1){var ye;ce.isX()&&(-1<(ye=this.axis.bottom.indexOf(ce))&&this.axis.bottom.splice(ye,1),-1<(ye=this.axis.top.indexOf(ce))&&this.axis.top.splice(ye,1),!me&&this.series.map(fe=>{fe.getXAxis()==ce&&fe.kill()})),ce.isY()&&(-1<(ye=this.axis.left.indexOf(ce))&&this.axis.left.splice(ye,1),-1<(ye=this.axis.right.indexOf(ce))&&this.axis.right.splice(ye,1),!me&&this.series.map(fe=>{fe.getYAxis()==ce&&fe.kill()})),this.axisGroup.removeChild(ce.group),this.groupPrimaryGrids.removeChild(ce.gridPrimary),this.groupSecondaryGrids.removeChild(ce.gridSecondary),xe||this.draw(!0)}hasXAxis(ce){return this.hasTopAxis(ce)||this.hasBottomAxis(ce)}hasYAxis(ce){return this.hasLeftAxis(ce)||this.hasRightAxis(ce)}hasTopAxis(ce){return this.hasAxis(ce,this.axis.top)}hasBottomAxis(ce){return this.hasAxis(ce,this.axis.bottom)}hasLeftAxis(ce){return this.hasAxis(ce,this.axis.left)}hasRightAxis(ce){return this.hasAxis(ce,this.axis.right)}hasAxis(ce,xe){for(var me=0,ye=xe.length;me<ye;me++){if(xe[me]==ce)return!0;if(xe[me].hasAxis(ce))return!0}return!1}autoscaleAxes(){this._applyToAxes('setMinMaxToFitSeries',null,!0,!0)}setBackgroundColor(ce){return this.rectEvent.setAttribute('fill',ce),this}getAxisState(){var ce={};for(var xe in this.axis)ce[xe]=this.axis[xe].map(function(me){return[me.getCurrentMin(),me.getCurrentMax()]});return ce}setAxisState(ce){var xe,me;for(var ye in ce)if(this.axis[ye])for(xe=0,me=ce[ye].length;xe<me;xe++)this.axis[ye][xe]&&(this.axis[ye][xe].setCurrentMin(ce[ye][xe][0]),this.axis[ye][xe].setCurrentMax(ce[ye][xe][1]));this.draw()}saveAxisState(ce){return this.savedAxisState=this.savedAxisState||{},this.savedAxisState[ce]=this.getAxisState(),this}recallAxisState(){return this.savedAxisState[savedName]&&this.recallAxisState(this.savedAxisState[savedName]),this}_applyToAxis(ce){switch(ce){case'string':return function(xe,me,ye){for(var fe=0;fe<this.axis[xe].length;fe++)this.axis[xe][fe][me].apply(this.axis[xe][fe],ye)};break;case'function':return function(xe,me,ye){for(var fe=0;fe<this.axis[xe].length;fe++)me.call(this,this.axis[xe][fe],xe,ye)};}}getBoundaryAxis(ce,xe){var me=this.getBoundaryAxisFromSeries(ce,xe);return me}getBoundaryAxisFromSeries(ce,xe){var me='min'==xe,fe=ce.isX()?['getMinX','getMaxX']:['getMinY','getMaxY'],be=fe[me?0:1],Ae=me?+(1/0):-(1/0),ye,Me,_e,Se,Pe,Ce;for(ye=me?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,_e=this.getSeriesFromAxis(ce,!0),(Pe=0,Ce=_e.length);Pe<Ce;Pe++)(Me=_e[Pe],!!Me.isShown())&&(Se=Me[be](),ye=Math[xe](isNaN(ye)?Ae:ye,isNaN(Se)?Ae:Se));return ye}getSeriesFromAxis(ce){for(var xe=[],me=this.series.length-1;0<=me;me--)(this.series[me].getXAxis()==ce||this.series[me].getYAxis()==ce)&&xe.push(this.series[me]);return xe}updateDataMinMaxAxes(){var ce=['bottom','top','left','right'],xe,me,ye,fe,be;for(me=0,ye=ce.length;me<ye;me++)for(fe=this.axis[ce[me]].length-1;0<=fe;fe--)(xe=this.axis[ce[me]][fe],be=2>me?'x':'y',!xe.disabled)&&(xe.setMinValueData(this.getBoundaryAxis(this.axis[ce[me]][fe],'min')),xe.setMaxValueData(this.getBoundaryAxis(this.axis[ce[me]][fe],'max')))}_applyToAxes(ce,xe,me,ye){var fe=[],be=0,Ae;for((me||void 0==me)&&(fe.push('top'),fe.push('bottom')),(ye||void 0==ye)&&(fe.push('left'),fe.push('right')),Ae=fe.length;be<Ae;be++)this._applyToAxis(typeof ce).call(this,fe[be],ce,xe)}findAxesLinkedTo(ce){var xe=[];return this._applyToAxes(function(me){me.linkedToAxis&&me.linkedToAxis.axis==ce&&xe.push(me)},{},ce instanceof this.getConstructor('graph.axis.x'),ce instanceof this.getConstructor('graph.axis.y')),xe}_axisHasChanged(){this._axesHaveChanged=!0}newSerie(ce,xe,me){me||(me=de.SERIE_LINE);var ye;return(ye=this.getSerie(ce))?ye:(ye=O(this,ce,xe,me))?(this.series.push(ye),this.emit('newSerie',ye),ye):void 0}getSerie(ce){if('number'==typeof ce)return this.series[ce]||!1;for(var xe=0,me=this.series.length;xe<me;xe++)if(this.series[xe].getName()==ce)return this.series[xe];return!1}getSeries(){return this.series}drawSerie(ce,xe){if(!ce.draw)throw'Serie has no method draw';ce.draw(xe)}drawSeries(ce){if(this.width&&this.height)for(var xe=this.series.length-1;0<=xe;xe--)this.series[xe].isShown()&&this.drawSerie(this.series[xe],ce)}resetSeries(){this.removeSeries()}killSeries(){this.resetSeries()}removeSeries(){for(;this.series[0];)this.series[0].kill(!0);this.series=[],this.legend&&this.legend.update()}selectSerie(ce,xe){'object'==typeof ce||(ce=this.getSerie(ce));this.selectedSerie==ce&&this.selectedSerie.selectionType==xe||(this.selectedSerie!==ce&&this.unselectSerie(ce),this.selectedSerie=ce,this.triggerEvent('onSelectSerie',ce),ce.select(xe||'selected'))}getSelectedSerie(){return this.selectedSerie}unselectSerie(ce){ce.unselect(),this.selectedSerie=!1,this.triggerEvent('onUnselectSerie',ce)}getShapesOfSerie(ce){for(var xe=[],me=this.shapes.length-1;0<=me;me--)this.shapes[me].getSerie()==ce&&xe.push(this.shapes[me]);return xe}makeToolbar(ce){var xe=this.getConstructor('graph.toolbar');return xe?this.toolbar=new xe(this,ce):ne.throwError('No constructor exists for toolbar')}getShapes(){return this.shapes||[]}newShape(ce,xe,me,ye){var fe=this;if(!me&&(this.emit('beforeNewShape',xe),this.prevent(!1)))return!1;'object'==typeof ce&&(me=xe,xe=ce,ce=xe.type),xe=xe||{},xe._id=ne.guid();var Ae;if(Ae='function'==typeof ce?ce:this.getConstructor('graph.shape.'+ce),!Ae)return ne.throwError('No constructor for this shape');var ke=new Ae(this,xe);if(!ke)return ne.throwError('Failed to construct shape.');if(ke.type=ce,ke.graph=this,ke._data=xe,ke.init(this,ye),xe.position)for(var Me=0,_e=xe.position.length;Me<_e;Me++)ke.setPosition(new se.default(xe.position[Me]),Me);if(void 0!==xe.properties&&ke.setProperties(xe.properties),void 0!==xe.fillColor&&ke.setFillColor(xe.fillColor),void 0!==xe.fillOpacity&&ke.setFillOpacity(xe.fillOpacity),void 0!==xe.strokeColor&&ke.setStrokeColor(xe.strokeColor),void 0!==xe.strokeWidth&&ke.setStrokeWidth(xe.strokeWidth),void 0!==xe.layer&&ke.setLayer(xe.layer),!0==xe.locked&&ke.lock(),!0==xe.movable&&ke.movable(),!0==xe.selectable&&ke.selectable(),!0==xe.resizable&&ke.resizable(),void 0!==xe.attributes&&ke.setProp('attributes',xe.attributes),void 0!==xe.handles&&ke.setProp('handles',xe.handles),void 0!==xe.selectOnMouseDown&&ke.setProp('selectOnMouseDown',!0),void 0!==xe.selectOnClick&&ke.setProp('selectOnClick',!0),void 0!==xe.highlightOnMouseOver&&ke.setProp('highlightOnMouseOver',!0),xe.labelEditable&&ke.setProp('labelEditable',xe.labelEditable),xe.labels&&!xe.label&&(xe.label=xe.labels),void 0!==xe.label){Array.isArray(xe.label)||(xe.label=[xe.label]);for(var Me=0,_e=xe.label.length;Me<_e;Me++)ke.showLabel(Me),ke.setLabelText(xe.label[Me].text,Me),ke.setLabelPosition(xe.label[Me].position,Me),ke.setLabelColor(xe.label[Me].color||'black',Me),ke.setLabelSize(xe.label[Me].size,Me),ke.setLabelAngle(xe.label[Me].angle||0,Me),ke.setLabelBaseline(xe.label[Me].baseline||'no-change',Me),ke.setLabelAnchor(xe.label[Me].anchor||'start',Me)}return ke.createHandles(),this.shapes.push(ke),me||this.emit('newShape',ke,xe),ke}newPosition(){return new se.default(...arguments)}redrawShapes(){for(var ce=0,xe=this.shapes.length;ce<xe;ce++)this.shapes[ce].redraw()}removeShapes(){for(var ce=0,xe=this.shapes.length;ce<xe;ce++)this.shapes[ce]&&this.shapes[ce].kill&&this.shapes[ce].kill(!0);this.shapes=[]}selectShape(ce,xe){if(ce){if(-1<this.selectedShapes.indexOf(ce))return!1;if(!ce.isSelectable())return!1;xe||this.emit('beforeShapeSelect',ce),this.prevent(!1)||(0<this.selectedShapes.length&&this.options.shapesUniqueSelection&&this.unselectShapes(xe),ce._select(xe),this.selectedShapes.push(ce),!xe&&this.emit('shapeSelect',ce))}}unselectShape(ce,xe){if(-1!=this.selectedShapes.indexOf(ce))return xe||this.emit('beforeShapeUnselect',ce),this.cancelUnselectShape?void(this.cancelUnselectShape=!1):void(ce._unselect(),this.selectedShapes.splice(this.selectedShapes.indexOf(ce),1),!xe&&this.emit('shapeUnselect',ce))}unselectShapes(ce){for(;this.selectedShapes[0];)this.unselectShape(this.selectedShapes[0],ce);return this}_removeShape(ce){this.shapes.splice(this.shapes.indexOf(ce),1)}appendShapeToDom(ce){this.getLayer(ce.getLayer(),'shape').appendChild(ce.group)}removeShapeFromDom(ce){this.getLayer(ce.getLayer(),'shape').removeChild(ce.group)}appendSerieToDom(ce){this.getLayer(ce.getLayer(),'serie').appendChild(ce.groupMain)}removeSerieFromDom(ce){this.getLayer(ce.getLayer(),'serie').removeChild(ce.groupMain)}getLayer(ce,xe){if(!this.layers[ce]){this.layers[ce]=[],this.layers[ce][0]=document.createElementNS(this.ns,'g'),this.layers[ce][0].setAttribute('data-layer',ce),this.layers[ce][1]=document.createElementNS(this.ns,'g'),this.layers[ce][2]=document.createElementNS(this.ns,'g'),this.layers[ce][0].appendChild(this.layers[ce][1]),this.layers[ce][0].appendChild(this.layers[ce][2]);for(var me=1,ye;!(ye=this.layers[ce-me])&&0<=ce-me;)me++;ye?ye.nextSibling?this.plotGroup.insertBefore(this.layers[ce][0],ye.nextSibling):this.plotGroup.appendChild(this.layers[ce][0]):this.plotGroup.insertBefore(this.layers[ce][0],this.plotGroup.firstChild)}return this.layers[ce]['shape'==xe?2:1]}focus(){this._dom.focus()}elementMoving(ce){this.bypassHandleMouse=ce}stopElementMoving(ce){ce&&ce==this.bypassHandleMouse?this.bypassHandleMouse=!1:!ce&&(this.bypassHandleMouse=!1)}_makeClosingLines(){this.closingLines={};for(var ce=['top','bottom','left','right'],xe=0,ye;xe<4;xe++)ye=document.createElementNS(this.ns,'line'),ye.setAttribute('stroke','black'),ye.setAttribute('shape-rendering','crispEdges'),ye.setAttribute('stroke-linecap','square'),ye.setAttribute('display','none'),this.closingLines[ce[xe]]=ye,this.graphingZone.appendChild(ye)}isMouseActionAllowed(ce,xe){if(xe.type===ce.type||void 0===xe.type&&'mousedown'===ce.type||('wheel'===ce.type||'mousewheel'===ce.type)&&'mousewheel'==xe.type)return void 0===xe.shift&&(xe.shift=!1),void 0===xe.ctrl&&(xe.ctrl=!1),void 0===xe.meta&&(xe.meta=!1),void 0===xe.alt&&(xe.alt=!1),ce.shiftKey==xe.shift&&ce.ctrlKey==xe.ctrl&&ce.metaKey==xe.meta&&ce.altKey==xe.alt}forcePlugin(ce){this.forcedPlugin=ce}unforcePlugin(){this.forcedPlugin=!1}_pluginsExecute(ce,xe){for(var me in this.plugins)this.plugins[me]&&this.plugins[me][ce]&&this.plugins[me][ce].apply(this.plugins[me],xe)}_pluginExecute(ce,xe,me){!ce||this.plugins[ce]&&this.plugins[ce][xe]&&this.plugins[ce][xe].apply(this.plugins[ce],me)}pluginYieldActiveState(){this.activePlugin=!1}_serieExecute(ce,xe,me){'object'!=typeof serie&&(serie=this.getSerie(serie)),'function'==typeof serie[xe]&&serie.apply(serie,me)}_pluginsInit(){var ce,xe,me;for(var ye in this.options.plugins)if(xe=ye,me=this.options.plugins[ye],ce=this.getConstructor('graph.plugin.'+xe),ce){var fe=ne.extend(!0,{},ce.defaults(),me);this.plugins[xe]=new ce(fe),ne.mapEventEmission(this.plugins[xe].options,this.plugins[xe]),this.plugins[xe].init(this,me)}else ne.throwError('Plugin "'+xe+'" has not been registered')}getPlugin(ce){var xe=this.plugins[ce];return xe?xe:ne.throwError('Plugin "'+ce+'" has not been loaded or properly registered')}triggerEvent(){var ce=arguments[0],xe=Array.prototype.splice.apply(arguments,[0,1]);return'function'==typeof this.options[ce]?this.options[ce].apply(this,arguments):void 0}makeLegend(ce){if(this.legend)return this.legend;var xe=this.getConstructor('graph.legend');if(xe)this.legend=new xe(this,ce);else return ne.throwError('Graph legend is not available as it has not been registered');return this.legend}updateLegend(ce=!1){if(this.legend)return this.legend.update(ce),this}getLegend(){return this.legend?this.legend:void 0}requireLegendUpdate(){this.legend&&this.legend.requireDelayedUpdate()}kill(){this._dom.removeChild(this.dom)}_removeSerie(ce){this.series.splice(this.series.indexOf(ce),1)}contextListen(ce,xe,me){this;if(this.options.onContextMenuListen)return this.options.onContextMenuListen(ce,xe,me)}lockShapes(){this.shapesLocked=!0;for(var ce=0,xe=this.shapes.length;ce<xe;ce++)this.shapes[ce].moving=!1,this.shapes[ce].resizing=!1}unlockShapes(){this.shapesLocked=!1}prevent(ce){var xe=this.prevented;return-1!=ce&&(this.prevented=void 0==ce||ce),xe}_getXY(ce){var xe=ce.pageX,me=ce.pageY,ye=this.offsetCached||ne.getOffset(this._dom);return xe-=ye.left,me-=ye.top,{x:xe,y:me}}_resize(){this.width&&this.height&&(this.getDrawingWidth(),this.getDrawingHeight(),this.sizeSet=!0,this.dom.setAttribute('width',this.width),this.dom.setAttribute('height',this.height),this.domTitle.setAttribute('x',this.width/2),this.requireLegendUpdate(),this.draw(!0))}_doDom(){this.dom=document.createElementNS(this.ns,'svg'),this.dom.setAttributeNS('http://www.w3.org/2000/xmlns/','xmlns:xlink','http://www.w3.org/1999/xlink'),ne.setAttributeTo(this.dom,{xmlns:this.ns,'font-family':this.options.fontFamily,'font-size':this.options.fontSize}),this._dom.appendChild(this.dom),this._dom.setAttribute('tabindex',1),this._dom.style.outline='none',this.defs=document.createElementNS(this.ns,'defs'),this.dom.appendChild(this.defs),this.groupEvent=document.createElementNS(this.ns,'g'),this.rectEvent=document.createElementNS(this.ns,'rect'),ne.setAttributeTo(this.rectEvent,{'pointer-events':'fill',fill:'transparent'}),this.groupEvent.appendChild(this.rectEvent),this.dom.appendChild(this.groupEvent),this.domTitle=document.createElementNS(this.ns,'text'),this.setTitle(this.options.title),ne.setAttributeTo(this.domTitle,{'text-anchor':'middle',y:20}),this.groupEvent.appendChild(this.domTitle),this.graphingZone=document.createElementNS(this.ns,'g'),this.updateGraphingZone(),this.groupEvent.appendChild(this.graphingZone),this.axisGroup=document.createElementNS(this.ns,'g'),this.graphingZone.appendChild(this.axisGroup),this.groupGrids=document.createElementNS(this.ns,'g'),this.groupGrids.setAttribute('clip-path','url(#_clipplot'+this._creation+')'),this.groupPrimaryGrids=document.createElementNS(this.ns,'g'),this.groupSecondaryGrids=document.createElementNS(this.ns,'g'),this.axisGroup.appendChild(this.groupGrids),this.groupGrids.appendChild(this.groupSecondaryGrids),this.groupGrids.appendChild(this.groupPrimaryGrids),this.plotGroup=document.createElementNS(this.ns,'g'),this.graphingZone.appendChild(this.plotGroup),this.layers=[],this._makeClosingLines(),this.clip=document.createElementNS(this.ns,'clipPath'),this.clip.setAttribute('id','_clipplot'+this._creation),this.defs.appendChild(this.clip),this.clipRect=document.createElementNS(this.ns,'rect'),this.clip.appendChild(this.clipRect),this.clip.setAttribute('clipPathUnits','userSpaceOnUse'),this.markerArrow=document.createElementNS(this.ns,'marker'),this.markerArrow.setAttribute('viewBox','0 0 10 10'),this.markerArrow.setAttribute('id','arrow'+this._creation),this.markerArrow.setAttribute('refX','6'),this.markerArrow.setAttribute('refY','5'),this.markerArrow.setAttribute('markerUnits','strokeWidth'),this.markerArrow.setAttribute('markerWidth','8'),this.markerArrow.setAttribute('markerHeight','6'),this.markerArrow.setAttribute('orient','auto');var ce=document.createElementNS(this.ns,'path');ce.setAttribute('d','M 0 0 L 10 5 L 0 10 z'),this.markerArrow.appendChild(ce),this.defs.appendChild(this.markerArrow),this.markerHorizontalSplit=document.createElementNS(this.ns,'marker'),this.markerHorizontalSplit.setAttribute('viewBox','0 0 6 8'),this.markerHorizontalSplit.setAttribute('id','horionzalsplit_'+this.getId()),this.markerHorizontalSplit.setAttribute('refX','3'),this.markerHorizontalSplit.setAttribute('refY','4'),this.markerHorizontalSplit.setAttribute('markerUnits','strokeWidth'),this.markerHorizontalSplit.setAttribute('markerWidth','6'),this.markerHorizontalSplit.setAttribute('markerHeight','8');var xe=document.createElementNS(this.ns,'line');xe.setAttribute('x1','0'),xe.setAttribute('y1','8'),xe.setAttribute('x2','6'),xe.setAttribute('y2','0'),xe.setAttribute('stroke','black'),this.markerHorizontalSplit.appendChild(xe),this.defs.appendChild(this.markerHorizontalSplit),this.markerVerticalSplit=document.createElementNS(this.ns,'marker'),this.markerVerticalSplit.setAttribute('viewBox','0 0 8 6'),this.markerVerticalSplit.setAttribute('id','verticalsplit_'+this.getId()),this.markerVerticalSplit.setAttribute('refX','4'),this.markerVerticalSplit.setAttribute('refY','3'),this.markerVerticalSplit.setAttribute('markerUnits','strokeWidth'),this.markerVerticalSplit.setAttribute('markerWidth','8'),this.markerVerticalSplit.setAttribute('markerHeight','6');var xe=document.createElementNS(this.ns,'line');xe.setAttribute('x1','0'),xe.setAttribute('y1','0'),xe.setAttribute('x2','8'),xe.setAttribute('y2','6'),xe.setAttribute('stroke','black'),this.markerVerticalSplit.appendChild(xe),this.defs.appendChild(this.markerVerticalSplit),this.vertLineArrow=document.createElementNS(this.ns,'marker'),this.vertLineArrow.setAttribute('viewBox','0 0 10 10'),this.vertLineArrow.setAttribute('id','verticalline'+this._creation),this.vertLineArrow.setAttribute('refX','0'),this.vertLineArrow.setAttribute('refY','5'),this.vertLineArrow.setAttribute('markerUnits','strokeWidth'),this.vertLineArrow.setAttribute('markerWidth','20'),this.vertLineArrow.setAttribute('markerHeight','10'),this.vertLineArrow.setAttribute('orient','auto'),this.vertLineArrow.setAttribute('stroke-width','1px');var me=document.createElementNS(this.ns,'path');me.setAttribute('d','M 0 -10 L 0 10'),me.setAttribute('stroke','black'),this.vertLineArrow.appendChild(me),this.defs.appendChild(this.vertLineArrow),this.plotGroup.setAttribute('clip-path','url(#_clipplot'+this._creation+')'),this.bypassHandleMouse=!1}updateGraphingZone(){ne.setAttributeTo(this.graphingZone,{transform:'translate('+this.options.paddingLeft+', '+this.options.paddingTop+')'}),this._sizeChanged=!0}getDrawingSpaceWidth(){return()=>this.drawingSpaceWidth}getDrawingSpaceHeight(){return()=>this.drawingSpaceHeight}getDrawingSpaceMinX(){return()=>this.drawingSpaceMinX}getDrawingSpaceMinY(){return()=>this.drawingSpaceMinY}getDrawingSpaceMaxX(){return()=>this.drawingSpaceMaxX}getDrawingSpaceMaxY(){return()=>this.drawingSpaceMaxY}trackingLine(ce){var xe=this;return ce&&(this.options.trackingLine=ce),'individual'==ce.mode?ce.series&&ce.series.map(function(me){'object'!=typeof me.serie&&(me.serie=this.getSerie(me.serie)),xe.addSerieToTrackingLine(me.serie,me)}):ce.series.map(function(me){me.serie.disableTracking()}),this.trackingLine=this.newShape('line',ne.extend(!0,{position:[{y:'min'},{y:'max'}],stroke:'black',layer:-1},ce.trackingLineShapeOptions)),this.trackingLine.draw(),this.trackingLine}addSerieToTrackingLine(ce,xe){var me=this;this.options.trackingLine||this.trackingLine({mode:'individual'}),ce.enableTracking(function(ye,fe,be,Ae){if(fe){me.trackingLine.show();fe.xIndexClosest;me.trackingLine.getPosition(0).x=ye.getData()[0][2*fe.closestIndex],me.trackingLine.getPosition(1).x=ye.getData()[0][2*fe.closestIndex],me.trackingLine.redraw(),ye._trackingLegend=ge(me,{serie:ye},be,Ae,ye._trackingLegend,xe.textMethod?xe.textMethod:function(Me){for(var _e in Me){return Me[_e].serie.serie.getName()+': '+Me[_e].serie.serie.getYAxis().valueToHtml(Me[_e].yValue)}},me.trackingLine.getPosition(0).x),ye._trackingLegend.style.display='block'}},function(ye){me.trackingLine.hide(),ye.trackingShape&&ye.trackingShape.hide(),ye._trackingLegend&&(ye._trackingLegend.style.display='none'),ye._trackingLegend=ge(me,{serie:ye},!1,!1,ye._trackingLegend,!1,!1)})}static fromSchema(ce,xe){var ye={},fe={left:[],top:[],right:[],bottom:[]},me;return ce.title&&(ye.title=ce.title),ce.axis&&ce.axis.map(function(Ae){Ae.type||ne.throwError('Axis type is required (top, bottom, left or right)');var ke={};Ae.label&&(ke.labelValue=Ae.label),void 0!==Ae.unit&&(ke.unit=Ae.unit),void 0!==Ae.unitWrapperAfter&&(ke.unitWrapperAfter=Ae.unitWrapperAfter),void 0!==Ae.unitWrapperBefore&&(ke.unitWrapperBefore=Ae.unitWrapperBefore),void 0!==Ae.min&&(ke.forcedMin=Ae.min),void 0!==Ae.max&&(ke.forcedMax=Ae.max),void 0!==Ae.flip&&(ke.flipped=Ae.flip),fe[Ae.type].push(ke),Ae._jsGraphIndex=fe[Ae.type].length-1}),me=new de(xe,ye,fe),ce.width&&me.setWidth(ce.width),ce.height&&me.setHeight(ce.width),me._resize(),ce.data&&ce.data.map(function(Ae){var ke=Ae.type,_e={},Me,Se;switch(Ae.type){case'bar':ne.throwError('Bar charts not supported'),ke=!1;break;case'scatter':ke=de.SERIE_SCATTER;break;case'box':ke=de.SERIE_BOX,('x'==Ae.orientation||'y'==Ae.orientation)&&(_e.orientation=Ae.orientation);break;default:ke=de.SERIE_LINE;}if(!ke)return void ne.throwError('No valid serie type was found');if(Me=me.newSerie(Ae.id||Ae.label||ne.guid(),_e,ke),Ae.lineStyle&&Ae.lineStyle.map(function(Le){var we={};Le.styleName=Le.styleName||'unselected',ke===de.SERIE_LINE?(void 0!==Le.lineWidth&&(we.lineWidth=Le.lineWidth),void 0!==Le.color&&(we.lineColor=Le.color),Le.lineStyle&&(we.lineStyle=Le.lineStyle),Me.setStyle(we,Le.styleName)):void 0}),Ae.style&&Ae.style.map(function(Le){Le.styleName=Le.styleName||'unselected',Array.isArray(Le.styles)||(Le.styles=[Le.styles]);var Te=Le.styles.map(function(Ee){switch(ke){case de.SERIE_LINE:return{type:Ee.shape,zoom:Ee.zoom,strokeWidth:Ee.lineWidth,strokeColor:Ee.lineColor,fillColor:Ee.color,points:Ee.points};break;case de.SERIE_BOX:return Ee;break;case de.SERIE_SCATTER:}});ke===de.SERIE_LINE?Me.setMarkers(Te,Le.styleName):ke===de.SERIE_SCATTER?Me.setStyle(Te,{},Le.styleName):ke===de.SERIE_BOX?Me.setStyle(Te[0],Le.stylename):void 0}),Ae.errorX||Ae.errorY){var Pe=[];if(Ae.errorX)for(var Ce=0,ve=Ae.errorX.length;Ce<ve;Ce++)Pe[Ce]=Pe[Ce]||[[],[]],Pe[Ce][0][0]=Ae.errorX[Ce];if(Ae.errorY)for(var Ce=0,ve=Ae.errorY.length;Ce<ve;Ce++)Pe[Ce]=Pe[Ce]||[[]],Pe[Ce][1][0]=Ae.errorY[Ce];Me.setDataError(Pe).setErrorStyle([{type:'bar',x:{},y:{}}])}switch(ce.axis?(Se=ce.axis[Ae.xAxis],Se&&('top'===Se.type||'bottom'===Se.type)?'top'==Se.type?Me.setXAxis(me.getTopAxis(Se._jsGraphIndex)):'bottom'==Se.type&&Me.setXAxis(me.getBottomAxis(Se._jsGraphIndex)):(ne.warn('No x axis found. Setting automatically'),Me.setXAxis(me.getXAxis(0))),Se=ce.axis[Ae.yAxis],Se&&('left'===Se.type||'right'===Se.type)?'left'==Se.type?Me.setYAxis(me.getLeftAxis(Se._jsGraphIndex)):'right'==Se.type&&Me.setYAxis(me.getRightAxis(Se._jsGraphIndex)):(ne.warn('No y axis found. Setting automatically'),Me.setYAxis(me.getYAxis(0)))):(ne.warn('No axes found. Setting automatically'),Me.autoAxis()),ke){case de.SERIE_BOX:Me.setData(Ae.boxes);break;default:case de.SERIE_SCATTER:case de.SERIE_LINE:Me.setData([{x:Ae.x,y:Ae.y}]);}}),me.autoscaleAxes(),me.draw(),me}exportToSchema(){let ce={};ce.title=this.options.title,ce.width=this.getWidth(),ce.height=this.getHeight();let me=[],ye={x:[],y:[]};['top','bottom','left','right'].map(ke=>{this.axis[ke]&&(me=me.concat(this.axis[ke].map(Me=>{return{type:ke,label:Me.options.label,unit:Me.options.unit,min:Me.options.forcedMin,max:Me.options.forcedMax,flip:Me.options.flipped}})),'top'==ke||'bottom'==ke?ye.x=ye.x.concat(this.axis[ke]):ye.y=ye.y.concat(this.axis[ke]))}),ce.axis=me;let be=ke=>{switch(ke){case de.SERIE_LINE:return'line';break;case de.SERIE_BAR:return'bar';break;case de.SERIE_SCATTER:return'scatter';}},Ae=(ke,Me)=>{let _e=[];switch(ke.getType()){case de.SERIE_LINE:for(var Se=0;Se<ke.data.length;Se++)for(var Pe=0;Pe<ke.data[Se].length-1;Pe+=2)_e.push(ke.data[Se][Pe+(Me&&ke.isFlipped()||!Me&&!ke.isFlipped()?1:0)]);break;case de.SERIE_SCATTER:for(var Pe=0;Pe<ke.data.length-1;Pe+=2)_e.push(ke.data[Se+(Me&&ke.isFlipped()||!Me&&!ke.isFlipped()?1:0)]);}return _e};return ce.data=[].concat(this.series.map(ke=>{let Me=[],_e=[];if(ke.getType()==de.SERIE_LINE)for(var Se in ke.styles){_e.push({styleName:Se,color:ke.styles[Se].lineColor,lineWidth:ke.styles[Se].lineWidth,lineStyle:ke.styles[Se].lineStyle});let Pe={styleName:Se,styles:[]};Me.push(Pe),Pe.styles=Pe.styles.concat((ke.styles[Se].markers||[]).map(Ce=>{return{shape:Ce.type,zoom:Ce.zoom,lineWidth:Ce.strokeWidth,lineColor:Ce.strokeColor,color:Ce.fillColor,points:Ce.points}}))}return{label:ke.getLabel(),id:ke.getName(),type:be(ke.getType()),x:Ae(ke,!0),y:Ae(ke,!1),xAxis:ye.x.indexOf(ke.getXAxis()),yAxis:ye.y.indexOf(ke.getYAxis()),style:Me,lineStyle:_e}})),ce}static registerConstructor(ce,xe){return pe.has(ce)?ne.throwError('Constructor '+xe+' already exists.'):void pe.set(ce,xe)}static getConstructor(ce,xe){return pe.has(ce)?pe.get(ce):!xe&&ne.throwError('Constructor "'+ce+'" doesn\'t exist')}}de.prototype.getConstructor=de.getConstructor;var ge=function(ce,xe,me,ye,fe,be,Ae){var ke=!1;Array.isArray(xe)||(xe=[xe]);var Me=[];if(fe||(ke=!0,fe=Z(ce)),xe.map(function(Se){var Pe=Se.serie.handleMouseMove(Ae,!1);return Pe&&be?void(0<Se.withinPx&&1e-14<Math.abs(me-ce.options.paddingLeft-Se.serie.getXAxis().getPx(Se.serie.getData()[0][2*Pe.xIndexClosest]))-Se.withinPx||0<Se.withinVal&&Math.abs(Se.serie.getXAxis().getVal(me-ce.options.paddingLeft)-Se.serie.getData()[0][2*Pe.xIndexClosest])-Se.withinVal>Se.serie.getXAxis().getVal(me-ce.options.paddingLeft)/1e5?Se.serie.trackingShape&&Se.serie.trackingShape.hide():(Me[Se.serie.getName()]={xIndex:Pe.xIndexClosest,yValue:Se.serie.getData()[0][2*Pe.xIndexClosest+1],xValue:Se.serie.getData()[0][2*Pe.xIndexClosest],serie:Se,index:Pe},!Se.serie.trackingShape&&(Se.serie.trackingShape=ce.newShape('ellipse',{fillColor:Se.serie.getLineColor(),strokeColor:'White',strokeWidth:Se.serie.getLineWidth()}).setSerie(Se.serie).setProp('rx',3*Se.serie.getLineWidth()).setProp('ry',3*Se.serie.getLineWidth()).forceParentDom(Se.serie.groupMain).draw()),Se.serie.trackingShape.show(),Se.serie.trackingShape.getPosition(0).x=Se.serie.getData()[0][2*Pe.xIndexClosest],Se.serie.trackingShape.redraw())):(Se.serie.trackingShape&&Se.serie.trackingShape.hide(),fe)}),0==Object.keys(Me).length||!be)fe.style.display='none';else{'none'==fe.style.display||ke?ue(ce,fe,me,ye,!0):he(ce,fe,me,ye),fe.style.display='block';var _e=be(Me,Ae,me,ye);fe.innerHTML=_e}return fe},ue=function(ce,xe,me,ye,fe){function be(){var Pe=(Date.now()-ke)/200;1<Pe&&(Pe=1),xe.style.marginLeft=(me-_e)*Pe+_e+'px',xe.style.marginTop=(ye-Se)*Pe+Se+'px',1>Pe&&window.requestAnimationFrame(be)}var ke=Date.now(),Me=xe.offsetHeight,_e=parseInt(xe.style.marginLeft.replace('px','')||0),Se=parseInt(xe.style.marginTop.replace('px','')||0);return me=me>ce.getWidth()/2?me-me%10-20-xe.offsetWidth:me-me%10+30,ye=ye-ye%10+Me/2,fe?(xe.style.marginLeft=me+'px',void(xe.style.marginTop=ye+'px')):void window.requestAnimationFrame(be)},he=ne.debounce(ue,50);de.SERIE_LINE=Symbol(),de.SERIE_SCATTER=Symbol(),de.SERIE_CONTOUR=Symbol(),de.SERIE_BAR=Symbol(),de.SERIE_BOX=Symbol(),de.SERIE_ZONE=Symbol(),de.SERIE_LINE_COLORED=Symbol(),de.SERIE_ZONE=Symbol(),de.SERIE_DENSITYMAP=Symbol(),de.TICKS_OUTSIDE=Symbol(),de.TICKS_INSIDE=Symbol(),de.TICKS_CENTERED=Symbol(),E.default=de})},function(u,A){var P,C,T;(function(E,Y){C=[A],P=Y,T='function'==typeof P?P.apply(A,C):P,!(void 0!==T&&(u.exports=T))})(this,function(E){'use strict';function Y(N){return N&&N.indexOf&&-1<N.indexOf('px')&&parseInt(N.replace('px',''))}function X(N){return!isNaN(parseFloat(N))&&isFinite(N)}Object.defineProperty(E,'__esModule',{value:!0});class I{constructor(N,F,O,V){'object'==typeof N?(this.x=N.x,this.y=N.y,this.dx=N.dx,this.dy=N.dy):(this.x=N,this.y=F,this.dx=O,this.dy=V)}compute(N,F,O,V){if(N&&F&&O&&N.hasXAxis&&N.hasYAxis||N.throw(),!N.hasXAxis(F))throw'Graph does not contain the x axis that was used as a parameter';if(!N.hasYAxis(O))throw'Graph does not contain the x axis that was used as a parameter';return this._compute(N,F,O,V)}_compute(N,F,O,V){var B=this._relativeTo;if(B)var W=B._compute(N,F,O,V);var G={x:!1,y:!1},R;for(var U in F||(F=N.getXAxis()),O||(O=N.getYAxis()),G){var Z='x'==U?F:O,Q=this[U],K=this['d'+U];if(void 0!==Q||(void 0===K||void 0!==B)&&void 0!==B)void 0!==Q&&(G[U]=this.getPx(Q,Z));else if('x'==U){if(void 0===K)continue;G[U]=B?B[U]:Z.getPos(0)}else if(this.x&&V)if(!1!==Y(this.x))console.warn('You have defined x in px and not y. Makes no sense. Returning 0 for y'),G[U]=0;else{var J=V.searchClosestValue(this.x);J?G[U]=V.getY(J.yMin):(console.warn('Could not find y position for x = '+this.x+' on serie "'+V.getName()+'". Returning 0 for y.'),G[U]=0)}if(void 0!==K){var $=void 0!==Q||void 0==W||void 0==W[U]?G[U]:W[U];if('y'==U&&W&&void 0!==W.x&&void 0==W.y){if(!V){throw'Error. No serie exists. Cannot find y value'}var J=V.searchClosestValue(B.x);J&&($=V.getY(J.yMin))}!1===(R=Y(K))?(R=this._parsePercent(K))?G[U]=$+this._getPositionPx(R,!0,Z,N):Z&&(G[U]=$+Z.getRelPx(K)):G[U]=$+R}}return G}_getPositionPx(N,F,O,V){var B;if(!1!==(B=Y(N)))return B;return!1===(B=this._parsePercent(N))?O?O.getPos(N):void 0:B/100*(F?V.getDrawingWidth():V.getDrawingHeight())}_parsePercent(N){return N&&N.indexOf&&-1<N.indexOf('%')&&N}getDeltaPx(N,F){var O;return!1===(O=Y(N))?F.getRelPx(N)+'px':O+'px'}deltaPosition(N,F,O){N='y'==N?'y':'x';var V=this[N],B=this['d'+N],W,R;if(V!==void 0)!1===(W=Y(V))?(V=this.getValPosition(V,O),this[N]=!1===(R=Y(F))?V+F:V+O.getRelVal(R)):!1===(R=Y(F))?this[N]=W+O.getRelPx(F)+'px':this[N]=W+R+'px';else if(B!==void 0){if('y'==N&&V===void 0&&!this._relativeTo)return;!1===(W=Y(B))?(B=this.getValPosition(B,O),this['d'+N]=!1===(R=Y(F))?B+F:B+O.getRelVal(R)):!1===(R=Y(F))?this['d'+N]=W+O.getRelPx(F)+'px':this['d'+N]=W+R+'px'}}getValPosition(N,F){return'max'==N?F.getMaxValue():'min'==N?F.getMinValue():N}getPx(N,F,O){var V;if('function'==typeof N)return N(F,O);if(!1!==(V=Y(N)))return V;if(V=this._parsePercent(N))return V;if(F){if('min'==N)return F.getMinPx();if('max'==N)return F.getMaxPx();if(O)return F.getRelPx(N);if(X(N))return F.getPos(N)}}getPxRel(N,F){return this.getPx(N,F,!0)}relativeTo(N){return this._relativeTo=I.check(N),this}static check(N,F){if(N instanceof I)return N;var O=new I(N);if(N&&N.relativeTo){var V;(V=F(N.relativeTo))&&O.relativeTo(V)}return O}}E.default=I})},function(u,A){var P,C,T;(function(E,Y){C=[A],P=Y,T='function'==typeof P?P.apply(A,C):P,!(void 0!==T&&(u.exports=T))})(this,function(E){'use strict';function V(le,pe,de){return 0>de&&(de+=1),1<de&&(de-=1),de<1/6?le+6*(pe-le)*de:de<1/2?pe:de<2/3?le+6*((pe-le)*(2/3-de)):le}function R(le,pe){return le._savedAttributes&&le._savedAttributes[pe]!==void 0}function U(le,pe){if(le&&le._savedAttributesIds){le._savedAttributesIds.splice(le._savedAttributesIds.indexOf(pe),1),delete le._attributes[pe];var de={};for(var ge in le._savedAttributes)de[ge]=le._savedAttributes[ge];for(var ge=0,ue=le._savedAttributesIds.length;ge<ue;ge++)for(var he in le._attributes[le._savedAttributesIds[ge]])de[he]=le._attributes[le._savedAttributesIds[ge]][he];for(var he in de)le.setAttribute(he,de[he])}}function te(){var le,pe,de,ge,ue,he,ce=arguments[0],xe=1,me=arguments.length,ye=!1;for('boolean'==typeof ce?(ye=ce,ce=arguments[1]||{},xe=2):('object'!=typeof ce&&'function'!=typeof ce||null==ce)&&(ce={});xe<me;++xe)if(le=arguments[xe],null!=le)for(pe in le)de=ce[pe],ge=le[pe],ce!==ge&&(ye&&ge&&(oe(ge)||(ue=ne(ge)))?(ue?(ue=!1,he=de&&ne(de)?de:[]):he=de&&oe(de)?de:{},ce[pe]=te(ye,he,ge)):'undefined'!=typeof ge&&(ce[pe]=ge));return ce}Object.defineProperty(E,'__esModule',{value:!0}),E.setAttributeTo=function(le,pe,de){if(de)for(var ge in pe)le.setAttributeNS(de,ge,pe[ge]);else for(ge in pe)le.setAttribute(ge,pe[ge])},E.mapEventEmission=function(le,pe){pe||(pe=this);var de;for(var ge in le)0==ge.indexOf('on')&&'function'==typeof le[ge]&&(de=ge.substring(2),de=de.substring(0,1).toLowerCase()+de.substring(1),pe.on&&function(ue){pe.on(de,function(){le[ue].apply(pe,arguments)})}(ge))},E.guid=function(){return'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(le){var pe=0|16*Math.random(),de='x'==le?pe:8|3&pe;return de.toString(16)})},E.throwError=function(le){console.error(le)},E.warn=function(le){console.warn(le)},E.isNumeric=function(le){return!Array.isArray(le)&&0<=le-parseFloat(le)+1},E.hue2rgb=V,E.hslToRgb=function(le,pe,de){var ge,ue,he;if(0==pe)ge=ue=he=de;else{var ce=0.5>de?de*(1+pe):de+pe-de*pe,xe=2*de-ce;ge=V(xe,ce,le+1/3),ue=V(xe,ce,le),he=V(xe,ce,le-1/3)}return[Math.round(255*ge),Math.round(255*ue),Math.round(255*he)]},E.saveDomAttributes=function(le,pe,de){if(le)for(var ge in le._savedAttributesIds=le._savedAttributesIds||[],-1<le._savedAttributesIds.indexOf(de)&&U(le,de),le._savedAttributes=le._savedAttributes||{},le._attributes=le._attributes||{},le._attributes[de]=pe,le._savedAttributesIds.push(de),pe)le._savedAttributes[ge]||(le._savedAttributes[ge]=le.getAttribute(ge)),le.setAttribute(ge,pe[ge])},E.hasSavedAttribute=R,E.overwriteDomAttribute=function(le,pe,de){R(le,pe)&&(le._savedAttributes[pe]=de)},E.restoreDomAttributes=U,E.debounce=function(le,pe,de){var ge;return function(){var ue=this,he=arguments,xe=de&&!ge;clearTimeout(ge),ge=setTimeout(function(){ge=null,de||le.apply(ue,he)},pe),xe&&le.apply(ue,he)}},E.SVGParser=function(le){var pe=new DOMParser,de=pe.parseFromString(le,'image/svg+xml');return de},E.reverseArray=function(le){var pe=null,de=null,ge=le.length;for(pe=0,de=ge-1;pe<de;pe+=1,de-=1){var ue=le[pe];le[pe]=le[de],le[de]=ue}return le},E.getOffset=function(le){var pe=le.getBoundingClientRect();return{top:pe.top+document.body.scrollTop,left:pe.left+document.body.scrollLeft}},E.setCSS=function(le,pe){var de=le.style;for(var ge in pe)de[ge]=pe[ge]},E.ajaxGet=function(le){return new Promise(function(pe,de){var ge=new XMLHttpRequest;ge.open(le.type||'GET',le.url,!0),le.json&&ge.setRequestHeader('Accept','application/json'),ge.onload=function(){if(200===ge.status){var ue=ge.responseText;le.json&&(ue=JSON.parse(ue)),pe(ue)}else de(new Error('Request error: '+ge.status))},ge.onerror=function(){de(new Error('Network error: '+ge.status))},ge.send()})},E.extend=te,E.mix=function(le,pe){for(let de in pe)pe.hasOwnProperty(de)&&(le.prototype[de]=pe[de])},E.emptyDom=function(le){for(;le.firstChild;)le.removeChild(le.firstChild)};var ae=Object.prototype.hasOwnProperty,se=Object.prototype.toString,ne=function(pe){return'function'==typeof Array.isArray?Array.isArray(pe):'[object Array]'===se.call(pe)},oe=function(pe){if(!pe||'[object Object]'!==se.call(pe))return!1;var de=ae.call(pe,'constructor'),ge=pe.constructor&&pe.constructor.prototype&&ae.call(pe.constructor.prototype,'isPrototypeOf');if(pe.constructor&&!de&&!ge)return!1;for(var ue in pe);return'undefined'==typeof ue||ae.call(pe,ue)};E.isArray=ne,E.isPlainObject=oe})},function(u,A){var P,C,T,C,T;(function(E,Y){C=[],P=Y,T='function'==typeof P?P.apply(A,C):P,!(void 0!==T&&(u.exports=T))})(this,function(){'use strict';C=[],T=function(){'use strict';function E(){}function Y(N,F){for(var O=N.length;O--;)if(N[O].listener===F)return O;return-1}function X(N){return function(){return this[N].apply(this,arguments)}}var I=E.prototype;return I.getListeners=function(F){var O=this._getEvents(),V,B;if(F instanceof RegExp)for(B in V={},O)O.hasOwnProperty(B)&&F.test(B)&&(V[B]=O[B]);else V=O[F]||(O[F]=[]);return V},I.flattenListeners=function(F){var O=[],V;for(V=0;V<F.length;V+=1)O.push(F[V].listener);return O},I.getListenersAsObject=function(F){var O=this.getListeners(F),V;return O instanceof Array&&(V={},V[F]=O),V||O},I.addListener=function(F,O){var V=this.getListenersAsObject(F),W;for(W in V)V.hasOwnProperty(W)&&-1===Y(V[W],O)&&V[W].push('object'==typeof O?O:{listener:O,once:!1});return this},I.on=X('addListener'),I.addOnceListener=function(F,O){return this.addListener(F,{listener:O,once:!0})},I.once=X('addOnceListener'),I.defineEvent=function(F){return this.getListeners(F),this},I.defineEvents=function(F){for(var O=0;O<F.length;O+=1)this.defineEvent(F[O]);return this},I.removeListener=function(F,O){var V=this.getListenersAsObject(F),B,W;for(W in V)V.hasOwnProperty(W)&&(B=Y(V[W],O),-1!==B&&V[W].splice(B,1));return this},I.off=X('removeListener'),I.addListeners=function(F,O){return this.manipulateListeners(!1,F,O)},I.removeListeners=function(F,O){return this.manipulateListeners(!0,F,O)},I.manipulateListeners=function(F,O,V){var R=F?this.removeListener:this.addListener,G=F?this.removeListeners:this.addListeners,B,W;if('object'==typeof O&&!(O instanceof RegExp))for(B in O)O.hasOwnProperty(B)&&(W=O[B])&&('function'==typeof W?R.call(this,B,W):G.call(this,B,W));else for(B=V.length;B--;)R.call(this,O,V[B]);return this},I.removeEvent=function(F){var V=this._getEvents(),B;if('string'==typeof F)delete V[F];else if(F instanceof RegExp)for(B in V)V.hasOwnProperty(B)&&F.test(B)&&delete V[B];else delete this._events;return this},I.removeAllListeners=X('removeEvent'),I.emitEvent=function(F,O){var V=this.getListenersAsObject(F),B,W,R,G;for(R in V)if(V.hasOwnProperty(R))for(W=V[R].length;W--;)B=V[R][W],!0===B.once&&this.removeListener(F,B.listener),G=B.listener.apply(this,O||[]),G===this._getOnceReturnValue()&&this.removeListener(F,B.listener);return this},I.trigger=X('emitEvent'),I.emit=function(F){var O=Array.prototype.slice.call(arguments,1);return this.emitEvent(F,O)},I.setOnceReturnValue=function(F){return this._onceReturnValue=F,this},I._getOnceReturnValue=function(){return!this.hasOwnProperty('_onceReturnValue')||this._onceReturnValue},I._getEvents=function(){return this._events||(this._events={})},E}.apply(A,C),!(T!==void 0&&(u.exports=T))})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(2),S(3)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(void 0!==T&&(u.exports=T))})(this,function(E,Y,X){'use strict';function F(R){try{return R.getBBox()}catch(G){return{height:0,width:0,x:0,y:0}}}Object.defineProperty(E,'__esModule',{value:!0});var O=function(R){return R&&R.__esModule?R:{default:R}}(Y),V=function(R){if(R&&R.__esModule)return R;var G={};if(null!=R)for(var U in R)Object.prototype.hasOwnProperty.call(R,U)&&(G[U]=R[U]);return G.default=R,G}(X),B={backgroundColor:'rgba(255, 255, 255, 0.8)',frame:!0,frameWidth:1,frameColor:'black',paddingTop:10,paddingLeft:10,paddingBottom:10,paddingRight:10,frameRounding:0,movable:!1,shapesToggleable:!0,isSerieHideable:!0,isSerieSelectable:!0};class W{constructor(R,G){this.options=V.extend({},B,G),this.graph=R,this.svg=document.createElementNS(this.graph.ns,'g'),this.subG=document.createElementNS(this.graph.ns,'g'),this.groups=[],this.rect=document.createElementNS(this.graph.ns,'rect'),this.rectBottom=document.createElementNS(this.graph.ns,'rect'),this.rect.setAttribute('x',0),this.rect.setAttribute('y',0),this.rectBottom.setAttribute('x',0),this.rectBottom.setAttribute('y',0),this.series=!1,this.svg.setAttribute('display','none'),this.pos={x:void 0,y:void 0,transformX:0,transformY:0},this.setEvents(),this.eyeId=V.guid(),this.eyeCrossedId=V.guid();var U=V.SVGParser('<svg xmlns="http://www.w3.org/2000/svg"><symbol id="'+this.eyeCrossedId+'" viewBox="0 -256 1850 1850"><rect pointer-events="fill" fill="transparent" x="-256" y="0" width="2106" height="1850" /><g transform="matrix(1,0,0,-1,30.372881,1214.339)"><path d="m 555,201 78,141 q -87,63 -136,159 -49,96 -49,203 0,121 61,225 Q 280,812 128,576 295,318 555,201 z m 389,759 q 0,20 -14,34 -14,14 -34,14 -125,0 -214.5,-89.5 Q 592,829 592,704 q 0,-20 14,-34 14,-14 34,-14 20,0 34,14 14,14 14,34 0,86 61,147 61,61 147,61 20,0 34,14 14,14 14,34 z m 363,191 q 0,-7 -1,-9 Q 1201,954 991,576 781,198 675,9 l -49,-89 q -10,-16 -28,-16 -12,0 -134,70 -16,10 -16,28 0,12 44,87 Q 349,154 228.5,262 108,370 20,507 0,538 0,576 q 0,38 20,69 153,235 380,371 227,136 496,136 89,0 180,-17 l 54,97 q 10,16 28,16 5,0 18,-6 13,-6 31,-15.5 18,-9.5 33,-18.5 15,-9 31.5,-18.5 16.5,-9.5 19.5,-11.5 16,-10 16,-27 z m 37,-447 Q 1344,565 1265,450.5 1186,336 1056,286 l 280,502 q 8,-45 8,-84 z m 448,-128 q 0,-35 -20,-69 Q 1733,443 1663,362 1513,190 1315.5,95 1118,0 896,0 l 74,132 q 212,18 392.5,137 180.5,119 301.5,307 -115,179 -282,294 l 63,112 q 95,-64 182.5,-153 87.5,-89 144.5,-184 20,-34 20,-69 z" fill="#c0c0c0"></path></g></symbol></svg>'),Z=V.SVGParser('<svg xmlns="http://www.w3.org/2000/svg"><symbol id="'+this.eyeId+'" viewBox="0 -256 1850 1850"><rect pointer-events="fill" x="-256" y="0" fill="transparent" width="2106" height="1850" /><g transform="matrix(1,0,0,-1,30.372881,1259.8983)"><path d="m 1664,576 q -152,236 -381,353 61,-104 61,-225 0,-185 -131.5,-316.5 Q 1081,256 896,256 711,256 579.5,387.5 448,519 448,704 448,825 509,929 280,812 128,576 261,371 461.5,249.5 662,128 896,128 1130,128 1330.5,249.5 1531,371 1664,576 z M 944,960 q 0,20 -14,34 -14,14 -34,14 -125,0 -214.5,-89.5 Q 592,829 592,704 q 0,-20 14,-34 14,-14 34,-14 20,0 34,14 14,14 14,34 0,86 61,147 61,61 147,61 20,0 34,14 14,14 14,34 z m 848,-384 q 0,-34 -20,-69 Q 1632,277 1395.5,138.5 1159,0 896,0 633,0 396.5,139 160,278 20,507 0,542 0,576 q 0,34 20,69 140,229 376.5,368 236.5,139 499.5,139 263,0 499.5,-139 236.5,-139 376.5,-368 20,-35 20,-69 z" fill="#444444" /></g></symbol></svg>');this.svg.appendChild(document.adoptNode(Z.documentElement.firstChild)),this.svg.appendChild(document.adoptNode(U.documentElement.firstChild)),this.svg.appendChild(this.subG),this.applyStyle()}setPosition(R,G,U){R&&(this.position=R,this.alignToX=G||'left',this.alignToY=U||'top')}setDraggable(R){this.options.movable=R}setAutoPosition(R){return-1<['bottom','left','top','right'].indexOf(R=R.toLowerCase())?(this.autoPosition=R,this):void(this.requireDelayedUpdate(),this.autoPosition=!1)}autoPosition(){return this.setAutoPosition(...arguments)}buildLegendBox(){var R=this.series||this.graph.getSeries(),G=0,U=this.options.paddingTop;this.autoPosition?this.graph.getDom().appendChild(this.getDom()):this.graph.graphingZone.appendChild(this.getDom());for(var Z=0,Q=R.length;Z<Q;Z++)if(!R[Z].excludedFromLegend||this.series){if('bottom'==this.autoPosition||'top'==this.autoPosition){var K=F(this.groups[Z]);G+K.width>this.graph.getDrawingWidth()-this.options.paddingRight&&(U+=16,G=0)}this.groups[Z].setAttribute('transform','translate( '+G+', '+U+')'),'bottom'==this.autoPosition||'top'==this.autoPosition?(G+=K.width+10,U+=0):(G=0,U+=16)}var K=F(this.subG);switch(this.width=K.width+this.options.paddingRight+this.options.paddingLeft,this.height=K.height+this.options.paddingBottom+this.options.paddingTop,this.rect.setAttribute('width',this.width),this.rect.setAttribute('height',this.height),this.rect.setAttribute('fill','none'),this.rect.setAttribute('pointer-events','fill'),this.rect.setAttribute('display','none'),this.options.movable&&(this.rectBottom.style.cursor='move'),this.rectBottom.setAttribute('width',this.width),this.rectBottom.setAttribute('height',this.height),this.rectBottom.setAttribute('x',K.x-this.options.paddingLeft),this.rectBottom.setAttribute('y',K.y-this.options.paddingTop),this.position=this.position||{},this.autoPosition){case'bottom':this.position.y=this.graph.getHeight()+'px',this.position.x=(this.graph.getWidth()-this.width)/2+'px',this.alignToY='bottom',this.alignToX=!1;break;case'left':this.position.x='6px',this.position.y=(this.graph.getHeight()-this.height)/2+'px',this.alignToX='left',this.alignToY=!1;break;case'right':this.position.x=this.graph.getWidth()+'px',this.position.y=(this.graph.getHeight()-this.height)/2+'px',this.alignToX='right',this.alignToY=!1;break;case'top':this.position.x=(this.graph.getWidth()-this.width)/2+'px',this.position.y='10px',this.alignToY='top',this.alignToX=!1;}if(this.autoPosition){switch(this.autoPosition){case'bottom':this.graph.options.paddingBottom=this.height+10;break;case'left':this.graph.options.paddingLeft=this.width+5;break;case'right':this.graph.options.paddingRight=this.width+10;break;case'top':this.graph.options.paddingTop=this.height+14;}this.graph.updateGraphingZone(),this.graph.getDrawingHeight(),this.graph.getDrawingWidth()}this.bbox=K}calculatePosition(){var R=O.default.check(this.position);let G=R.compute(this.graph,this.graph.getXAxis(),this.graph.getYAxis());G&&('right'==this.alignToX&&(G.x-=this.width,G.x+=this.bbox.x),'bottom'==this.alignToY?(G.y-=this.height,G.y+=this.bbox.y):G.y+=this.bbox.y,this.pos.transformX=G.x,this.pos.transformY=G.y,this._setPosition())}update(R){if(!(this.graph.isDelayedUpdate()||!this._requiredUpdate&&R)){this._requiredUpdate=!1;var G=this;for(this.applyStyle();this.subG.hasChildNodes();)this.subG.removeChild(this.subG.lastChild);this.svg.insertBefore(this.rectBottom,this.svg.firstChild);var U=this.series||this.graph.getSeries();if(0<U.length)this.svg.setAttribute('display','block');else return;if('bottom'==this.autoPosition||'top'==this.autoPosition)this.graph.getDrawingWidth();for(var te=0,ie=U.length;te<ie;te++)(!U[te].excludedFromLegend||this.series)&&function(re){var ae,se,ne;if('bottom'==this.autoPosition||'top'==this.autoPosition)this.graph.getDrawingWidth();ae=document.createElementNS(G.graph.ns,'g');var pe=document.createElementNS(G.graph.ns,'rect');G.subG.appendChild(ae),ae.appendChild(pe);var se=U[re].getSymbolForLegend(),de=U[re].getMarkerForLegend(),ne=U[re].getTextForLegend(),ge=35;if(this.isHideable()){ge+=20;var ue=document.createElementNS(G.graph.ns,'use');ue.setAttributeNS('http://www.w3.org/1999/xlink','xlink:href','#'+this.eyeId),ue.setAttribute('width',15),ue.setAttribute('height',15),ue.setAttribute('x',35),ue.setAttribute('y',-8),ue.addEventListener('click',function(ce){ce.stopPropagation();var xe;U[re].isShown()?(U[re].hide(),xe=G.eyeCrossedId):(U[re].show(),xe=G.eyeId),ue.setAttributeNS('http://www.w3.org/1999/xlink','xlink:href','#'+xe)})}ne.setAttribute('transform','translate('+ge+', 3)'),se&&ae.appendChild(se),'scatter'==U[re].getType()&&se.setAttribute('transform','translate( 20, 0 )'),de&&ae.appendChild(de),ue&&ae.appendChild(ue),ae.appendChild(ne);var he=F(ae);pe.setAttribute('x',he.x),pe.setAttribute('y',he.y),pe.setAttribute('width',he.width),pe.setAttribute('height',he.height),pe.setAttribute('fill','none'),pe.setAttribute('pointer-events','fill'),G.groups[re]=ae,ae.addEventListener('click',function(ce){var xe=U[re];G.isSelectable()&&!xe.isSelected()?G.graph.selectSerie(xe):G.graph.unselectSerie(xe),ce.preventDefault(),ce.stopPropagation()})}.call(this,te);this.svg.appendChild(this.rect),this.buildLegendBox(),this.calculatePosition()}}isHideable(){return this.options.isSerieHideable}notHideable(){return this.options.isSerieHideable=!1,this}hideable(){return this.options.isSerieHideable=!0,this}set seriesHideable(R){this.options.isSerieHideable=!!R}get seriesHideable(){return this.options.isSerieHideable}isSelectable(){return this.options.isSerieSelectable}isToggleShapes(){return this.options.shapesToggleable}getDom(){return this.svg}setEvents(){var R=this,G=this.pos;this.svg.addEventListener('mousedown',function(Q){Q.stopPropagation(),console.log('down'),R.options.movable&&(G.x=Q.clientX,G.y=Q.clientY,Q.preventDefault(),R.mousedown=!0,R.graph.elementMoving(R),R.rect.setAttribute('display','block'))}),this.svg.addEventListener('click',function(Q){Q.stopPropagation()}),this.svg.addEventListener('dblclick',function(Q){Q.stopPropagation()}),this.svg.addEventListener('mousemove',function(Q){R.handleMouseMove(Q)})}handleMouseUp(R){R.stopPropagation(),R.preventDefault(),this.mousedown=!1,this.rect.setAttribute('display','none'),this.graph.elementMoving(!1)}handleMouseMove(R){if(this.mousedown){var G=this.pos,U=R.clientX-G.x,Z=R.clientY-G.y;G.transformX+=U,G.transformY+=Z,G.x=R.clientX,G.y=R.clientY,R.stopPropagation(),R.preventDefault(),this._setPosition()}}_setPosition(){var R=this.pos;isNaN(R.transformX)||isNaN(R.transformY)||!1===R.transformX||!1===R.transformY||this.svg.setAttribute('transform','translate('+R.transformX+', '+R.transformY+')')}applyStyle(){this.options.frame&&(this.rectBottom.setAttribute('stroke',this.options.frameColor),this.rectBottom.setAttribute('stroke-width',this.options.frameWidth+'px'),this.rectBottom.setAttribute('rx',this.options.frameRounding),this.rectBottom.setAttribute('ry',this.options.frameRounding)),this.rectBottom.setAttribute('fill',this.options.backgroundColor)}fixSeries(){var R=[];if(!1===arguments[0])return this.series=!1,void this.update();for(var G=0,U=arguments.length;G<U;G++)Array.isArray(arguments[G])?R=R.concat(arguments[G]):R.push(arguments[G]);this.update(),this.series=R}fixSeriesAdd(R){this.series=this.series||[],this.series.push(R)}requireDelayedUpdate(){this._requiredUpdate=!0}}E.default=W})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(7)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(void 0!==T&&(u.exports=T))})(this,function(E,Y){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var I=function(F){return F&&F.__esModule?F:{default:F}}(Y);class N extends I.default{constructor(F,O,V={}){super(F,O,V),this.top='top'==O}getAxisPosition(){if(!this.options.display)return 0;var F=(1==this.options.tickPosition?8:20)+1*this.graph.options.fontSize;return this.getLabel()&&(F+=this.graph.options.fontSize),F}isX(){return!0}isY(){return!1}setShift(F){this.shift=F;void 0!==this.getShift()&&this.graph.getDrawingHeight()&&this.group.setAttribute('transform','translate(0 '+(this.floating?this.getShift():this.top?this.shift:this.graph.getDrawingHeight()-this.shift)+')')}getMaxSizeTick(){return(this.top?-1:1)*(1==this.options.tickPosition?10:10)}drawTick(F,O,V,B){var W=this,R;if(R=B||this.getPos(F),!(void 0==R||isNaN(R))){var G=this.nextTick(O,function(Z){Z.setAttribute('y1',(W.top?1:-1)*W.tickPx1*W.tickScaling[O]),Z.setAttribute('y2',(W.top?1:-1)*W.tickPx2*W.tickScaling[O]),1==O?Z.setAttribute('stroke',W.getPrimaryTicksColor()):Z.setAttribute('stroke',W.getSecondaryTicksColor())});if(G.setAttribute('x1',R),G.setAttribute('x2',R),this.nextGridLine(1==O,R,R,0,this.graph.getDrawingHeight()),1==O){var U=this.nextTickLabel(function(Z){Z.setAttribute('y',(W.top?-1:1)*((1==W.options.tickPosition?8:20)+(W.top?10:0))),Z.setAttribute('text-anchor','middle'),'black'!==W.getTicksLabelColor()&&Z.setAttribute('fill',W.getTicksLabelColor()),Z.style.dominantBaseline='hanging'});U.setAttribute('x',R),this.setTickContent(U,F,V)}return[G,U]}}drawLabel(){this.label.setAttribute('text-anchor','middle'),this.label.setAttribute('x',Math.abs(this.getMaxPx()+this.getMinPx())/2),this.label.setAttribute('y',(this.top?-1:1)*((1==this.options.tickPosition?10:25)+this.graph.options.fontSize)),this.labelTspan.textContent=this.getLabel()}draw(){var F=super.draw(...arguments);return this.drawSpecifics(),F}drawSpecifics(){this.drawLabel(),this.line.setAttribute('x1',this.getMinPx()),this.line.setAttribute('x2',this.getMaxPx()),this.line.setAttribute('y1',0),this.line.setAttribute('y2',0),this.line.setAttribute('stroke',this.getAxisColor()),this.top||(this.labelTspan.style.dominantBaseline='hanging',this.expTspan.style.dominantBaseline='hanging',this.expTspanExp.style.dominantBaseline='hanging',this.unitTspan.style.dominantBaseline='hanging',this.preunitTspan.style.dominantBaseline='hanging');var F=this.getSpan();this.line.setAttribute('marker-start',this.options.splitMarks&&0!=F[0]?'url(#horionzalsplit_'+this.graph.getId()+')':''),this.line.setAttribute('marker-end',this.options.splitMarks&&1!=F[1]?'url(#horionzalsplit_'+this.graph.getId()+')':'')}_draw0Line(F){this._0line||(this._0line=document.createElementNS(this.graph.ns,'line')),this._0line.setAttribute('x1',F),this._0line.setAttribute('x2',F),this._0line.setAttribute('y1',0),this._0line.setAttribute('y2',this.getMaxPx()),this._0line.setAttribute('stroke','black'),this.groupGrids.appendChild(this._0line)}handleMouseMoveLocal(F){F-=this.graph.getPaddingLeft(),this.mouseVal=this.getVal(F)}setMinMaxFlipped(){var F=this.maxPx-this.minPx;if(!isNaN(F)){var O=F*this.options.span[1]+this.minPx-this.options.marginMax,V=F*this.options.span[0]+this.minPx+this.options.marginMin;this.minPxFlipped=this.isFlipped()?O:V,this.maxPxFlipped=this.isFlipped()?V:O}}}E.default=N})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(1),S(4),S(3)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(void 0!==T&&(u.exports=T))})(this,function(E,Y,X,I){'use strict';function F(G){return G&&G.__esModule?G:{default:G}}Object.defineProperty(E,'__esModule',{value:!0});var O=F(Y),V=F(X),B=function(G){if(G&&G.__esModule)return G;var U={};if(null!=G)for(var Z in G)Object.prototype.hasOwnProperty.call(G,Z)&&(U[Z]=G[Z]);return U.default=G,U}(I);const W={lineAt0:!1,display:!0,flipped:!1,axisDataSpacing:{min:0.1,max:0.1},unitModification:!1,primaryGrid:!0,secondaryGrid:!0,primaryGridColor:'#f0f0f0',secondaryGridColor:'#f0f0f0',primaryGridWidth:1,secondaryGridWidth:1,shiftToZero:!1,tickPosition:1,nbTicksPrimary:3,nbTicksSecondary:10,ticklabelratio:1,exponentialFactor:0,exponentialLabelFactor:0,logScale:!1,forcedMin:!1,forcedMax:!1,span:[0,1],marginMin:0,marginMax:0,scientificScale:!1,scientificScaleExponent:!1,engineeringScale:!1,unit:!1,unitWrapperBefore:'',unitWrapperAfter:'',splitMarks:!1};class R extends V.default{constructor(){super()}init(G,U,Z){this.unitModificationTimeTicks=[[1,[1,2,5,10,20,30]],[60,[1,2,5,10,20,30]],[3600,[1,2,6,12]],[86400,[1,2,3,4,5,10,20,40]]];var Q=this;this.graph=G,this.options=B.extend(!0,{},W,Z,U),this.group=document.createElementNS(this.graph.ns,'g'),this.hasChanged=!0,this.rectEvent=document.createElementNS(this.graph.ns,'rect'),this.rectEvent.setAttribute('pointer-events','fill'),this.rectEvent.setAttribute('fill','transparent'),this.group.appendChild(this.rectEvent),this.graph.axisGroup.appendChild(this.group),this.line=document.createElementNS(this.graph.ns,'line'),this.line.setAttribute('stroke','black'),this.line.setAttribute('shape-rendering','crispEdges'),this.line.setAttribute('stroke-linecap','square'),this.groupTicks=document.createElementNS(this.graph.ns,'g'),this.groupTickLabels=document.createElementNS(this.graph.ns,'g'),this.group.appendChild(this.groupTicks),this.group.appendChild(this.groupTickLabels),this.group.appendChild(this.line),this.labelValue,this.label=document.createElementNS(this.graph.ns,'text'),this.labelTspan=document.createElementNS(this.graph.ns,'tspan'),this.preunitTspan=document.createElementNS(this.graph.ns,'tspan'),this.unitTspan=document.createElementNS(this.graph.ns,'tspan'),this.expTspan=document.createElementNS(this.graph.ns,'tspan'),this.expTspanExp=document.createElementNS(this.graph.ns,'tspan'),this.label.appendChild(this.labelTspan),this.label.appendChild(this.preunitTspan),this.label.appendChild(this.unitTspan),this.label.appendChild(this.expTspan),this.label.appendChild(this.expTspanExp),this.preunitTspan.setAttribute('dx',6),this.expTspan.setAttribute('dx',6),this.expTspanExp.setAttribute('dy',-5),this.expTspanExp.setAttribute('font-size','0.8em'),this.label.setAttribute('text-anchor','middle'),this.setTickPosition(this.options.tickPosition),this.gridLinePath={primary:'',secondary:''},this.gridPrimary=document.createElementNS(this.graph.ns,'path'),this.gridSecondary=document.createElementNS(this.graph.ns,'path'),this.graph.groupPrimaryGrids.appendChild(this.gridPrimary),this.graph.groupSecondaryGrids.appendChild(this.gridSecondary),this.setGridLinesStyle(),this.group.appendChild(this.label),this.groupSeries=document.createElementNS(this.graph.ns,'g'),this.group.appendChild(this.groupSeries),this.widthHeightTick=0,this.ticks={},this.ticksLabels=[],this.tickScaling={1:3,2:2,3:1,4:0.5},this.currentTick={},this.lastCurrentTick={},this.series=[],this.totalDelta=0,this.currentAction=!1,this.group.addEventListener('mousemove',function(K){K.preventDefault();var J=Q.graph._getXY(K);Q.handleMouseMoveLocal(J.x,J.y,K);for(var $=0,ee=Q.series.length;$<ee;$++)Q.series[$].handleMouseMove(!1,!0)}),this.labels=[],this.group.addEventListener('click',function(K){K.preventDefault();var J=Q.graph._getXY(K);Q.addLabel(Q.getVal(J.x-Q.graph.getPaddingLeft()))}),this.axisRand=Math.random(),this.clip=document.createElementNS(this.graph.ns,'clipPath'),this.clip.setAttribute('id','_clip'+this.axisRand),this.graph.defs.appendChild(this.clip),this.clipRect=document.createElementNS(this.graph.ns,'rect'),this.clip.appendChild(this.clipRect),this.clip.setAttribute('clipPathUnits','userSpaceOnUse'),this.graph._axisHasChanged(this)}handleMouseMoveLocal(){}hide(){return this.options.display=!1,this}show(){return this.options.display=!0,this}setDisplay(G){return this.options.display=!!G,this}isDisplayed(){return this.options.display}isShown(){return this.isDisplayed(...arguments)}kill(G,U){this.graph.killAxis(this,G,U)}setLineAt0(G){this.options.lineAt0=!!G}adaptTo(G,U,Z,Q){return G?(this.options.adaptTo={axis:G,thisValue:U,foreignValue:Z,preference:Q},this.adapt(),this):(this.options.adaptTo=!1,this)}adapt(){if(this.options.adaptTo){if(!U);var U=this.options.adaptTo.axis,Z=this.options.adaptTo.thisValue,Q=this.options.adaptTo.foreignValue;if((void 0===U.currentAxisMin||void 0===U.currentAxisMax)&&U.setMinMaxToFitSeries(),!1!==this.options.forcedMin&&!1==this.options.forcedMax||'max'!==this.options.adaptTo.preference){this.currentAxisMin=!1===this.options.forcedMin?this._zoomed?this.getCurrentMin():this.getMinValue()-(Z-this.getMinValue())*(this.options.axisDataSpacing.min*(U.getCurrentMax()-U.getCurrentMin())/(Q-U.getCurrentMin())):this.options.forcedMin,this.currentAxisMin==Z&&(this.currentAxisMin-=this.options.axisDataSpacing.min*this.getInterval());var K=!1===this.options.forcedMin?this.currentAxisMin:this.options.forcedMin;this.currentAxisMax=(Z-K)*(U.getCurrentMax()-U.getCurrentMin())/(Q-U.getCurrentMin())+K}else{this.currentAxisMax=!1===this.options.forcedMax?this._zoomed?this.getCurrentMax():this.getMaxValue()+(this.getMaxValue()-Z)*(this.options.axisDataSpacing.max*(U.getCurrentMax()-U.getCurrentMin())/(U.getCurrentMax()-Q)):this.options.forcedMax,this.currentAxisMax==Z&&(this.currentAxisMax+=this.options.axisDataSpacing.max*this.getInterval());var K=!1===this.options.forcedMax?this.currentAxisMax:this.options.forcedMax;this.currentAxisMin=(Z-K)*(U.getCurrentMin()-U.getCurrentMax())/(Q-U.getCurrentMax())+K}this.graph._axisHasChanged(this)}}setFloating(G,U){return this.floating=!0,this.floatingAxis=G,this.floatingValue=U,this}getFloatingAxis(){return this.floatingAxis}getFloatingValue(){return this.floatingValue}setAxisDataSpacing(G,U){return this.options.axisDataSpacing.min=G,this.options.axisDataSpacing.max=U||G,this}dataSpacing(){return this.setAxisDataSpacing(...arguments)}setAxisDataSpacingMin(G){this.options.axisDataSpacing.min=G}setAxisDataSpacingMax(G){this.options.axisDataSpacing.max=G}setMinPx(G){this.minPx=G,this.setMinMaxFlipped()}setMaxPx(G){this.maxPx=G,this.setMinMaxFlipped()}getMinPx(){return this.minPxFlipped}getMaxPx(){return this.maxPxFlipped}getMathMaxPx(){return this.maxPx}getMathMinPx(){return this.minPx}getMinValue(){return!1===this.options.forcedMin?this.dataMin:this.options.forcedMin}getMaxValue(){return!1===this.options.forcedMax?this.dataMax:this.options.forcedMax}setMinValueData(G){this.dataMin=G}setMaxValueData(G){this.dataMax=G}forceMin(G,U){return this.options.forcedMin=G,this.setCurrentMin(U?this.getCurrentMin():void 0),this.graph._axisHasChanged(this),this}forceMax(G,U){return this.options.forcedMax=G,this.setCurrentMax(U?this.getCurrentMax():void 0),this.graph._axisHasChanged(this),this}getForcedMin(){return this.options.forcedMin}getForcedMax(){return this.options.forcedMax}forceToAxis(G){return G.getMaxValue&&G.getMinValue&&(this.options.forcedMin=G.getMinValue(),this.options.forcedMax=G.getMaxValue()),this}getNbTicksPrimary(){return this.options.nbTicksPrimary}setNbTicksPrimary(G){this.options.nbTicksPrimary=G}getNbTicksSecondary(){return this.options.nbTicksSecondary}handleMouseMove(G){this.mouseVal=this.getVal(G)}handleMouseWheel(G,U,Z){G=Math.min(0.2,Math.max(-0.2,G)),'min'==Z?Z=this.getMinValue():'max'==Z?Z=this.getMaxValue():!Z&&(Z=0),this._doZoomVal((this.getCurrentMax()-Z)*(1+G)+Z,(this.getCurrentMin()-Z)*(1+G)+Z),this.graph.draw()}set zoomLock(G){this._zoomLocked=G}get zoomLock(){return this._zoomLocked||!1}zoom(G,U,Z){return!Z&&this.zoomLock?void 0:this._doZoomVal(G,U,!0)}_doZoomVal(G,U,Z){return this._doZoom(this.getPx(G),this.getPx(U),G,U,Z)}_doZoom(G,U,Z,Q,K){var Z=void 0===Z?this.getVal(G):Z,Q=void 0===Q?this.getVal(U):Q;return this.setCurrentMin(Math.min(Z,Q)),this.setCurrentMax(Math.max(Z,Q)),this.cacheCurrentMin(),this.cacheCurrentMax(),this.cacheInterval(),this._zoomed=!0,this.adapt(),this._hasChanged=!0,K||this.emit('zoom',[this.currentAxisMin,this.currentAxisMax,this]),this}getSerieShift(){return this._serieShift}getSerieScale(){return this._serieScale}getMouseVal(){return this.mouseVal}getUnitPerTick(G,U,Z){var K=G/ge;U=U?Math.min(U,G/10):G/10;var J=Z/U;switch(this.options.unitModification){case'time':case'time:min.sec':var $=this.getModifiedValue(this.getMaxValue());3600>$?0:86400>$?1:2;for(var te=!1,ie=0,re=this.unitModificationTimeTicks.length;ie<re;ie++){for(var ae=0,se=this.unitModificationTimeTicks[ie][1].length;ae<se;ae++)if(J<this.unitModificationTimeTicks[ie][0]*this.unitModificationTimeTicks[ie][1][ae]){te=!0;break}if(te)break}de=ie===this.unitModificationTimeTicks.length?1:this.unitModificationTimeTicks[ie][0]*this.unitModificationTimeTicks[ie][1][ae];break;default:var ne=Math.floor(Math.log(J)/Math.log(10)),oe=J*Math.pow(10,-ne);this.decimals=-ne;for(var le=[1,2,5,10],pe=!1,ie=le.length-1;0<=ie;ie--)(!pe||Math.abs(le[ie]-oe)<Math.abs(pe-oe))&&(pe=le[ie]);var de=pe*Math.pow(10,ne);}var ge=Z/de,K=G/U;return[de,ge,K]}setMinMaxToFitSeries(G){var U=this.getInterval();return this.options.logScale?(this.currentAxisMin=Math.max(1e-50,0.9*this.getMinValue()),this.currentAxisMax=Math.max(1e-50,1.1*this.getMaxValue())):(this.currentAxisMin=this.getMinValue(),this.currentAxisMax=this.getMaxValue(),!1===this.getForcedMin()&&(this.currentAxisMin-=this.options.axisDataSpacing.min*U),!1===this.getForcedMax()&&(this.currentAxisMax+=this.options.axisDataSpacing.max*U)),(isNaN(this.currentAxisMin)||isNaN(this.currentAxisMax))&&(this.currentAxisMax=void 0,this.currentAxisMin=void 0),this.cacheCurrentMin(),this.cacheCurrentMax(),this.cacheInterval(),this._zoomed=!1,this.adapt(),G||this.graph._axisHasChanged(this),this.emit('zoomOutFull',[this.currentAxisMin,this.currentAxisMax,this]),this}getInterval(){return this.getMaxValue()-this.getMinValue()}getCurrentInterval(){return this.cachedInterval}getCurrentMin(){return this.cachedCurrentMin}getCurrentMax(){return this.cachedCurrentMax}cacheCurrentMin(){this.cachedCurrentMin=this.currentAxisMin==this.currentAxisMax?this.options.logScale?this.currentAxisMin/10:this.currentAxisMin-1:this.currentAxisMin}cacheCurrentMax(){this.cachedCurrentMax=this.currentAxisMax==this.currentAxisMin?this.options.logScale?10*this.currentAxisMax:this.currentAxisMax+1:this.currentAxisMax}cacheInterval(){this.cachedInterval=this.cachedCurrentMax-this.cachedCurrentMin}setCurrentMin(G){return(void 0===G||!1!==this.getForcedMin()&&G<this.getForcedMin())&&(G=this.getMinValue()),this.currentAxisMin=G,this.options.logScale&&(this.currentAxisMin=Math.max(1e-50,G)),this.graph._axisHasChanged(this),this}setCurrentMax(G){(G===void 0||!1!==this.getForcedMax()&&G>this.getForcedMax())&&(G=this.getMaxValue()),this.currentAxisMax=G,this.options.logScale&&(this.currentAxisMax=Math.max(1e-50,G)),this.graph._axisHasChanged(this)}flip(G){return this.options.flipped=G,this.setMinMaxFlipped(),this}isFlipped(){return this.options.flipped}_draw(){var G=this;this.cacheCurrentMax(),this.cacheCurrentMin(),this.cacheInterval(),(void 0==this.currentAxisMin||void 0==this.currentAxisMax)&&this.setMinMaxToFitSeries(!0);var Z=Math.abs(this.getMaxPx()-this.getMinPx()),Q=this.getCurrentInterval();if(!this.options.display)return this.line.setAttribute('display','none'),0;this.line.setAttribute('display','block'),this.scientificExponent=!0==this.options.scientificScale?this.options.scientificScaleExponent?this.options.scientificScaleExponent:Math.floor(Math.log(Math.max(Math.abs(this.getCurrentMax()),Math.abs(this.getCurrentMin())))/Math.log(10)):0,this.gridLinePath.primary='',this.gridLinePath.secondary='',this.writeUnit();var K;if(this.options.unitDecade&&this.options.unit&&0!==this.scientificExponent&&(this.scientificExponent=this.getEngineeringExponent(this.scientificExponent))&&(K=this.getExponentGreekLetter(this.scientificExponent))?(this.preunitTspan.innerHTML=K,this.preunitTspan.setAttribute('display','visible'),this.unitTspan.setAttribute('dx',0)):0===this.scientificExponent||isNaN(this.scientificExponent)?(!this.options.unit&&this.unitTspan.setAttribute('display','none'),this.preunitTspan.setAttribute('display','none'),this.expTspan.setAttribute('display','none'),this.expTspanExp.setAttribute('display','none')):(this.options.engineeringScale&&(this.scientificExponent=this.getEngineeringExponent(this.scientificExponent)),this.preunitTspan.textContent='',this.preunitTspan.setAttribute('display','none'),this.expTspan.setAttribute('display','visible'),this.expTspanExp.setAttribute('display','visible'),this.expTspan.textContent='x10',this.expTspanExp.textContent=this.scientificExponent),!!this.options.hideTicks)var J=0;else if(this.resetTicksLength(),this.linkedToAxis){this.linkedToAxis.deltaPx=10;var J=this.drawLinkedToAxisTicksWrapper(Z,Q)}else if(!this.options.logScale)var J=this.drawLinearTicksWrapper(Z,Q);else var J=this.drawLogTicks();this.removeUselessTicks(),this.removeUselessTickLabels(),this.gridPrimary.setAttribute('d',this.gridLinePath.primary),this.gridSecondary.setAttribute('d',this.gridLinePath.secondary);var $=this.graph.findAxesLinkedTo(this);return $.map(function(ee){ee.linkedToAxis&&(ee.setMinPx(G.getMinPx()),ee.setMaxPx(G.getMaxPx()),ee.draw())}),this.options.lineAt0&&0>this.getCurrentMin()&&0<this.getCurrentMax()&&this._draw0Line(this.getPx(0)),J}writeUnit(){this.options.unit?(this.unitTspan.setAttribute('display','visible'),this.unitTspan.setAttribute('dx',5),this.expTspan.setAttribute('display','none'),this.expTspanExp.setAttribute('display','none'),this.unitTspan.innerHTML=this.options.unitWrapperBefore+this.options.unit.replace(/\^([-+0-9]*)/g,'<tspan dy=\'-5\' font-size=\'0.7em\'>$1</tspan>')+this.options.unitWrapperAfter):this.unitTspan.setAttribute('display','none')}getExponentGreekLetter(G){switch(G){case 3:return'k';break;case 6:return'M';break;case 9:return'G';break;case 12:return'T';break;case 15:return'E';break;case-3:return'm';break;case-6:return'&mu;';break;case-9:return'n';break;case-12:return'p';break;case-15:return'f';}}drawLinearTicksWrapper(G,U){let Z;return this.options.primaryTickUnit?Z=this.options.primaryTickUnit:(Z=this.getUnitPerTick(G,this.getNbTicksPrimary(),U)[0],this.options.maxPrimaryTickUnit&&this.options.maxPrimaryTickUnit<Z?Z=this.options.maxPrimaryTickUnit:this.options.minPrimaryTickUnit&&this.options.minPrimaryTickUnit>Z&&(Z=this.options.minPrimaryTickUnit)),this.drawTicks(Z,this.secondaryTicks())}forcePrimaryTickUnit(G){this.options.primaryTickUnit=G}forcePrimaryTickUnitMax(G){this.options.maxPrimaryTickUnit=G}forcePrimaryTickUnitMin(G){this.options.minPrimaryTickUnit=G}getPrimaryTickUnit(){return this.incrTick}setTickLabelRatio(G){this.options.ticklabelratio=G}draw(){this._widthLabels=0;var G=this._draw();return this._widthLabels+=G,G}drawTicks(G,U){var Z=G,Q=this.getCurrentMin(),K=this.getCurrentMax(),ie=0,$,ee,te;for(U&&($=Z/U),ee=this.options.shiftToZero?this.dataMin-Math.ceil((this.dataMin-Q)/Z)*Z:Math.floor(Q/Z)*Z,this.incrTick=G;ee<=K&&(ie++,!(200<ie));){if(U){te=ee+$,this.subIncrTick=te;for(var re=0;te<ee+Z&&(re++,!(100<re));){if(te<Q||te>K){te+=$;continue}this.drawTickWrapper(te,!1,1e-4>Math.abs(te-ee-Z/2)?2:3),te+=$}}if(ee<Q||ee>K){ee+=G;continue}this.drawTickWrapper(ee,!0,1),ee+=G}return this.widthHeightTick=this.getMaxSizeTick(),this.widthHeightTick}nextTick(G,U){if(this.ticks[G]=this.ticks[G]||[],this.lastCurrentTick[G]=this.lastCurrentTick[G]||0,this.currentTick[G]=this.currentTick[G]||0,this.currentTick[G]>=this.ticks[G].length){var Z=document.createElementNS(this.graph.ns,'line');this.groupTicks.appendChild(Z),this.ticks[G].push(Z),U(Z)}var Z=this.ticks[G][this.currentTick[G]];return this.currentTick[G]>=this.lastCurrentTick[G]&&Z.setAttribute('display','visible'),this.currentTick[G]++,Z}nextTickLabel(G){if(this.ticksLabels=this.ticksLabels||[],this.lastCurrentTickLabel=this.lastCurrentTickLabel||0,this.currentTickLabel=this.currentTickLabel||0,this.currentTickLabel>=this.ticksLabels.length){var U=document.createElementNS(this.graph.ns,'text');this.groupTickLabels.appendChild(U),this.ticksLabels.push(U),G(U)}var U=this.ticksLabels[this.currentTickLabel];return this.currentTickLabel>=this.lastCurrentTickLabel&&U.setAttribute('display','visible'),this.currentTickLabel++,U}removeUselessTicks(){for(var G in this.currentTick){for(var U=this.currentTick[G];U<this.ticks[G].length;U++)this.ticks[G][U].setAttribute('display','none');this.lastCurrentTick[G]=this.currentTick[G],this.currentTick[G]=0}}removeUselessTickLabels(){for(var G=this.currentTickLabel;G<this.ticksLabels.length;G++)this.ticksLabels[G].setAttribute('display','none');this.lastCurrentTickLabel=this.currentTickLabel,this.currentTickLabel=0}nextGridLine(G,U,Z,Q,K){(G&&this.options.primaryGrid||!G&&this.options.secondaryGrid)&&(this.gridLinePath[G?'primary':'secondary']+='M '+U+' '+Q+' L '+Z+' '+K)}setGridLineStyle(G,U){G.setAttribute('shape-rendering','crispEdges'),G.setAttribute('stroke',U?this.getPrimaryGridColor():this.getSecondaryGridColor()),G.setAttribute('stroke-width',U?this.getPrimaryGridWidth():this.getSecondaryGridWidth()),G.setAttribute('stroke-opacity',U?this.getPrimaryGridOpacity():this.getSecondaryGridOpacity());var Z;(Z=U?this.getPrimaryGridDasharray():this.getSecondaryGridDasharray())&&G.setAttribute('stroke-dasharray',Z)}setGridLinesStyle(){return this.setGridLineStyle(this.gridPrimary,!0),this.setGridLineStyle(this.gridSecondary,!1),this}resetTicksLength(){}secondaryTicks(){return this.options.nbTicksSecondary}drawLogTicks(){var G=this.getCurrentMin(),U=this.getCurrentMax(),Z=Math.min(G,U),U=Math.max(G,U);1e-50>Z&&(Z=1e-50),20<Math.log(Z)-Math.log(U)&&(U=Math.pow(10,20*Math.log(Z)));var Q={fontSize:'1.0em',exponential:!0,overwrite:!1};0>Z&&(Z=0);for(var K=0==Z?0:Math.floor(Math.log(Z)/Math.log(10)),Z=1,$;($=Z*Math.pow(10,K))<U;)1==Z&&$>G&&this.drawTickWrapper($,!0,1,Q),10==Z?(Z=1,K++):(1!=Z&&$>G&&this.drawTickWrapper($,!1,2,{overwrite:'',fontSize:'0.6em'}),Z++);return this.widthHeightTick=this.getMaxSizeTick(),this.widthHeightTick}drawTickWrapper(G,U,Z,Q){this.drawTick(G,Z,Q)}linkToAxis(G,U,Z){this.linkedToAxis={axis:G,scalingFunction:U,decimals:Z||1}}drawLinkedToAxisTicksWrapper(G,U){var Z=this.linkedToAxis,Q=0,$=0,K,J,ee,te;Z.deltaPx||(Z.deltaPx=10);do{if(K=Z.scalingFunction(Z.axis.getVal(Q+this.getMinPx())),Z.decimals&&(this.decimals=Z.decimals),J=this.drawTick(K,1,{},Q+this.getMinPx()),!J){console.log(K,Q,this.getMinPx()),console.error('Problem here');break}if(ee=8*(J[1].textContent+'').length,te=5*Math.round(ee/5),te>Z.deltaPx)return Z.deltaPx=te,void this.drawLinkedToAxisTicksWrapper(G,U);$++,Q+=Z.deltaPx}while(Q<G)}getPos(G){return this.getPx(G)}getPx(G){if(!this.options.logScale)return(G-this.getCurrentMin())/this.getCurrentInterval()*(this.getMaxPx()-this.getMinPx())+this.getMinPx();if(!(0>G)){var G=(Math.log(G)-Math.log(this.getCurrentMin()))/(Math.log(this.getCurrentMax())-Math.log(this.getCurrentMin()))*(this.getMaxPx()-this.getMinPx())+this.getMinPx();return G}}getRoundedPx(G){return Math.round(10*this.getPx(G))/10}getVal(G){return this.options.logScale?Math.exp((G-this.getMinPx())/(this.getMaxPx()-this.getMinPx())*(Math.log(this.getCurrentMax())-Math.log(this.getCurrentMin()))+Math.log(this.getCurrentMin())):(G-this.getMinPx())/(this.getMaxPx()-this.getMinPx())*this.getCurrentInterval()+this.getCurrentMin()}getRelPx(G){return G/this.getCurrentInterval()*(this.getMaxPx()-this.getMinPx())}getRelVal(G){return G/(this.getMaxPx()-this.getMinPx())*this.getCurrentInterval()}valueToText(G){if(this.scientificExponent)return G/=Math.pow(10,this.scientificExponent),G.toFixed(1);if(G=G*Math.pow(10,this.getExponentialFactor())*Math.pow(10,this.getExponentialLabelFactor()),this.options.shiftToZero&&(G-=this.dataMin),this.options.ticklabelratio&&(G*=this.options.ticklabelratio),this.options.unitModification)return G=this.modifyUnit(G,this.options.unitModification),G;var U=this.decimals-this.getExponentialFactor()-this.getExponentialLabelFactor();return isNaN(G)?'':0<U?G.toFixed(U):G.toFixed(0)}valueToHtml(G,U,Z){var Q=this.valueToText(G),K;return this.options.unitDecade&&this.options.unit&&0!==this.scientificExponent&&(this.scientificExponent=this.getEngineeringExponent(this.scientificExponent))&&(K=this.getExponentGreekLetter(this.scientificExponent))?Q+=K:0!==this.scientificExponent&&!isNaN(this.scientificExponent)&&!U&&(Q+='x10',Q+='<sup>'+this.scientificExponent+'</sup>'),this.options.unit&&!Z&&(Q+=this.options.unit.replace(/\^([-+0-9]*)/g,'<sup>$1</sup>')),Q}getModifiedValue(G){return this.options.ticklabelratio&&(G*=this.options.ticklabelratio),this.options.shiftToZero&&(G-=this.getMinValue()*(this.options.ticklabelratio||1)),G}modifyUnit(G,U){var Z='',Q=this.incrTick;switch(U){case'time':var K=this.getModifiedValue(this.getMaxValue()),$=[[60,'min'],[3600,'h'],[86400,'d']],J,ee;if(3600>K?ee=0:86400>K?ee=1:2592000>K&&(ee=2),!$[ee])return!1;G=G/$[ee][0];var te=Math.floor(G);for(Z=te+$[ee][1],ee--;Q<1*$[ee+1][0]&&-1<ee;)J=!1,G=(G-te)*$[ee+1][0]/$[ee][0],te=Math.round(G),Z+=' '+te+$[ee][1],ee--;break;case'time:min.sec':G=G/60;var te=Math.floor(G),ie=Math.round(60*(G-te))+'';ie=1==ie.length?'0'+ie:ie,Z=te+'.'+ie;}return Z}getExponentialFactor(){return this.options.exponentialFactor}setExponentialFactor(G){this.options.exponentialFactor=G}setExponentialLabelFactor(G){this.options.exponentialLabelFactor=G}getExponentialLabelFactor(){return this.options.exponentialLabelFactor}setLabel(G){return this.options.labelValue=G,this}getLabel(){return this.options.labelValue}setSpan(G,U){return this.options.span=[G,U],this}getSpan(){return this.options.span}setLevel(G){return this._level=G,this}getLevel(){return this._level}setShift(G){this.shift=G}getShift(){return this.shift}setTickPosition(G){switch(G){case 3:case'outside':case O.default.TICKS_OUTSIDE:G=3;break;case 2:case'centered':case O.default.TICKS_CENTERED:G=2;break;default:case 1:case'inside':case O.default.TICKS_INSIDE:G=1;}switch(this.options.tickPosition=G,this.options.tickPosition){case 3:this.tickPx1=-2,this.tickPx2=0;break;case 2:this.tickPx1=-1,this.tickPx2=1;break;case 1:this.tickPx1=0,this.tickPx2=2;}return this}setGrids(G){return this.options.primaryGrid=G,this.options.secondaryGrid=G,this}setPrimaryGrid(G){return this.options.primaryGrid=G,this}setSecondaryGrid(G){return this.options.secondaryGrid=G,this}primaryGridOn(){return this.setPrimaryGrid(!0)}primaryGridOff(){return this.setPrimaryGrid(!1)}secondaryGridOn(){return this.setSecondaryGrid(!0)}secondaryGridOff(){return this.setSecondaryGrid(!1)}gridsOn(){return this.setGrids(!0)}gridsOff(){return this.setGrids(!1)}turnGridsOff(){return this.gridsOff(...arguments)}turnGridsOn(){return this.gridsOn(...arguments)}setAxisColor(G){return this.options.axisColor=G,this}getAxisColor(){return this.options.axisColor||'black'}setPrimaryTicksColor(G){return this.options.primaryTicksColor=G,this}getPrimaryTicksColor(){return this.options.primaryTicksColor||'black'}setSecondaryTicksColor(G){return this.options.secondaryTicksColor=G,this}getSecondaryTicksColor(){return this.options.secondaryTicksColor||'black'}setTicksLabelColor(G){return this.options.ticksLabelColor=G,this}getTicksLabelColor(){return this.options.ticksLabelColor||'black'}setPrimaryGridColor(G){return this.options.primaryGridColor=G,this}getPrimaryGridColor(){return this.options.primaryGridColor}setSecondaryGridColor(G){return this.options.secondaryGridColor=G,this}getSecondaryGridColor(){return this.options.secondaryGridColor}setPrimaryGridWidth(G){return this.options.primaryGridWidth=G,this}getPrimaryGridWidth(){return this.options.primaryGridWidth}setSecondaryGridWidth(G){return this.options.secondaryGridWidth=G,this}getSecondaryGridWidth(){return this.options.secondaryGridWidth}setPrimaryGridOpacity(G){return this.options.primaryGridOpacity=G,this}getPrimaryGridOpacity(){return this.options.primaryGridOpacity}setSecondaryGridOpacity(G){return this.options.secondaryGridOpacity=G,this}getSecondaryGridOpacity(){return this.options.secondaryGridOpacity}setPrimaryGridDasharray(G){return this.options.primaryGridDasharray=G,this}getPrimaryGridDasharray(){return this.options.primaryGridDasharray}setSecondaryGridDasharray(G){return this.options.secondaryGridDasharray=G,this}getSecondaryGridDasharray(){return this.options.secondaryGridDasharray}setLabelColor(G){this.options.labelColor=G}getLabelColor(){return this.options.labelColor}setTickContent(G,U,Z){if(Z||(Z={}),Z.overwrite||!Z.exponential)G.textContent=Z.overwrite||this.valueToText(U);else{var Q=Math.round(Math.log(U)/Math.log(10)),K=Math.floor(U*Math.pow(10,-Q));G.textContent=1==K?'10':K+'x10';var J=document.createElementNS(this.graph.ns,'tspan');J.textContent=Q,J.setAttribute('font-size','0.7em'),J.setAttribute('dy',-5),G.appendChild(J)}Z.fontSize&&G.setAttribute('font-size',Z.fontSize)}isX(){return!1}isY(){return!1}setUnit(G){return this.options.unit=G,this}setUnitWrapper(G,U){return this.options.unitWrapperBefore=G,this.options.unitWrapperAfter=U,this}setUnitDecade(G){return this.options.unitDecade=G,this}setScientific(G){return this.options.scientificScale=G,this}setScientificScaleExponent(G){return this.options.scientificScaleExponent=G,this}setEngineering(G){return this.options.scientificScale=G,this.options.engineeringScale=G,this}getEngineeringExponent(G){return G-=0<G?G%3:(3- -G%3)%3,G}setLogScale(G){return this.options.logScale=G,this}isZoomed(){return this.currentAxisMin!=this.getMinValue()&&this.currentAxisMax!=this.getMaxValue()}hasAxis(){return!1}getType(){return null}}R.prototype.getValue=R.prototype.getVal,R.prototype.getDeltaPx=R.prototype.getRelPx,E.default=R})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(7)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(void 0!==T&&(u.exports=T))})(this,function(E,Y){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var I=function(F){return F&&F.__esModule?F:{default:F}}(Y);class N extends I.default{constructor(F,O,V){super(F,O,V),this.leftright=O,this.left='left'==O}setAxisPosition(F){this.shiftPosition=F}getAxisPosition(){return this.shiftPosition||0}getAdditionalWidth(){let F=0;return this.getLabel()&&(F+=this.graph.options.fontSize),this.isShown()&&(F+=Math.abs(this.tickMargin)),F}isX(){return!1}isY(){return!0}resetTicksLength(){this.longestTick=[!1,0]}getMaxSizeTick(){return this.longestTick&&this.longestTick[0]?this.longestTick[0].getComputedTextLength()+5:0}draw(){this.tickMargin=this.left?-5-this.tickPx1*this.tickScaling[1]:5+this.tickPx1*this.tickScaling[1];var F=super.draw(...arguments);return F+=this.getAdditionalWidth(),this.drawSpecifics(F),this.fullwidthlabel=F,F}equalizePosition(F){return this.placeLabel(this.left?-F:F),this.getLabel()?F+this.graph.options.fontSize:0}drawTick(F,O,V,B){var R=this,G=this.groupTicks,W,U;if(W=B||this.getPos(F),!(void 0==W||isNaN(W))){var Z=this.nextTick(O,Q=>{Q.setAttribute('x1',(this.left?1:-1)*this.tickPx1*this.tickScaling[O]),Q.setAttribute('x2',(this.left?1:-1)*this.tickPx2*this.tickScaling[O]),1==O?Q.setAttribute('stroke',this.getPrimaryTicksColor()):Q.setAttribute('stroke',this.getSecondaryTicksColor())});if(Z.setAttribute('y1',W),Z.setAttribute('y2',W),this.nextGridLine(1==O,0,this.graph.getDrawingWidth(),W,W),1==O){var U=this.nextTickLabel(Q=>{Q.setAttribute('x',this.tickMargin),'black'!==this.getTicksLabelColor()&&Q.setAttribute('fill',this.getTicksLabelColor()),this.left?Q.setAttribute('text-anchor','end'):Q.setAttribute('text-anchor','start'),Q.style.dominantBaseline='central'});U.setAttribute('y',W),this.setTickContent(U,F,V),(U.textContent+'').length>=this.longestTick[1]&&(this.longestTick[0]=U,this.longestTick[1]=(U.textContent+'').length)}}}drawLabel(){'black'!==this.getLabelColor()&&this.label.setAttribute('fill',this.getLabelColor()),this.label.setAttribute('dominant-baseline',this.left?'auto':'hanging'),this.labelTspan.textContent=this.getLabel()}placeLabel(F){this.label.setAttribute('transform','translate('+F+', '+Math.abs(this.getMaxPx()+this.getMinPx())/2+') rotate(-90)')}drawSpecifics(){this.line.setAttribute('y1',this.getMinPx()),this.line.setAttribute('y2',this.getMaxPx()),this.line.setAttribute('x1',0),this.line.setAttribute('x2',0),this.line.setAttribute('stroke',this.getAxisColor());var F=this.getSpan();this.line.setAttribute('marker-start',this.options.splitMarks&&0!=F[0]?'url(#verticalsplit_'+this.graph.getId()+')':''),this.line.setAttribute('marker-end',this.options.splitMarks&&1!=F[1]?'url(#verticalsplit_'+this.graph.getId()+')':'')}setShift(F){if(this.shift=F,this.shift&&this.graph.getWidth()){let O=this.shift;O=this.floating?O:this.isLeft()?O:this.graph.getWidth()-this.graph.getPaddingRight()-this.graph.getPaddingLeft()-O,this.group.setAttribute('transform','translate( '+O+' 0 )'),this.drawLabel()}}isLeft(){return this.left}isRight(){return!this.left}isFlipped(){return!this.options.flipped}_draw0Line(F){this._0line||(this._0line=document.createElementNS(this.graph.ns,'line')),this._0line.setAttribute('y1',F),this._0line.setAttribute('y2',F),this._0line.setAttribute('x1',0),this._0line.setAttribute('x2',this.graph.getDrawingWidth()),this._0line.setAttribute('stroke','black'),this.groupGrids.appendChild(this._0line)}handleMouseMoveLocal(F,O){O-=this.graph.getPaddingTop(),this.mouseVal=this.getVal(O)}scaleToFitAxis(F,O,V,B,W,R){F&&F.isX()||(F=this.graph.getXAxis()),isNaN(V)&&(V=F.getCurrentMin()),isNaN(B)&&(B=F.getCurrentMax()),W===void 0&&(W=!0),R===void 0&&(R=!0),'number'==typeof O&&(B=V,V=O,O=!1);for(var G=-(1/0),U=1/0,Z=0,Q=0,K=this.graph.series.length;Q<K;Q++)this.graph.series[Q].isShown()&&this.graph.series[Q]!=O&&this.graph.series[Q].getXAxis()==F&&this.graph.series[Q].getYAxis()===this&&(Z++,G=R?Math.max(G,this.graph.series[Q].getMax(V,B)):0,U=W?Math.min(U,this.graph.series[Q].getMin(V,B)):0);if(0==Z)this.setMinMaxToFitSeries();else{U=W?U:this.getCurrentMin(),G=R?G:this.getCurrentMax();var J=G-U;U-=this.options.axisDataSpacing.min*J,G+=this.options.axisDataSpacing.max*J,this._doZoomVal(U,G)}return this}setMinMaxFlipped(){var F=this.maxPx-this.minPx;if(!isNaN(F)){var O=this.maxPx-F*this.options.span[0]-this.options.marginMin,V=this.maxPx-F*this.options.span[1]+this.options.marginMax;this.minPxFlipped=this.isFlipped()?O:V,this.maxPxFlipped=this.isFlipped()?V:O}}}E.default=N})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(6)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(void 0!==T&&(u.exports=T))})(this,function(E,Y){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var I=function(F){return F&&F.__esModule?F:{default:F}}(Y);class N extends I.default{constructor(F,O,V={}){super(F,O,V)}set categories(F){return this._barCategories=F,this}draw(){var F=this,V=this.graph.drawingSpaceWidth,B=this._barCategories,O;if(this.forceMin(0),this.forceMax(1),this.cacheCurrentMin(),this.cacheCurrentMax(),this.cacheInterval(),!!B){Array.isArray(B)||(B=[B]);for(var W=0;W<=B.length;W++)this.drawTick(W/B.length,2),W<B.length&&(O=this.nextTickLabel(function(R){R.setAttribute('y',(F.top?-1:1)*((1==F.options.tickPosition?8:20)+(F.top?10:0))),R.setAttribute('text-anchor','middle'),'black'!==F.getTicksLabelColor()&&R.setAttribute('fill',F.getTicksLabelColor()),R.style.dominantBaseline='hanging'}),O.setAttribute('x',this.getPos((W+0.5)/B.length)),O.textContent=B[W].title);return this.drawSpecifics(),this}}autoSeries(){let F=[];for(let O of this.graph.series)O.getXAxis()==this&&F.push(O);return this.setSeries(...F),this}setSeries(){var F=this;return this.series=arguments,Array.prototype.map.call(this.series,function(O,V){'object'==typeof O||(O=F.graph.getSerie(O)),O.setCategoryConfig&&O.setCategoryConfig(V,F._barCategories,F.series.length)}),this._getUsedCategories(),this}_getUsedCategories(){let F={},O=0;Array.prototype.map.call(this.series,R=>{let G=R.getUsedCategories();for(let U of G)F.hasOwnProperty(U)||(F[U]=1,O+=1),F[U]++,O++});let V=0;for(let R in F){let G=F[R];F[R]=V,V+=G}let B={},W=0;Array.prototype.map.call(this.series,R=>{let G=R.getUsedCategories(),U={};G.map(Z=>{B[Z]=B[Z]||0.5,U[Z]=(F[Z]+B[Z])/O,B[Z]++}),R.setDataIndices(U,O),W++})}getType(){return'category'}}E.default=N})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(7),S(3)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(void 0!==T&&(u.exports=T))})(this,function(E,Y,X){'use strict';function F(ee,te){return Math.round(ee/te)*te}function O(ee,te){switch(te.unit){case's':ee.setSeconds(F(ee.getSeconds(),te.increment)),ee.setMilliseconds(0);break;case'i':ee.setMinutes(F(ee.getMinutes(),te.increment)),ee.setSeconds(0),ee.setMilliseconds(0);break;case'h':ee.setHours(F(ee.getHours(),te.increment)),ee.setMinutes(0),ee.setSeconds(0),ee.setMilliseconds(0);break;case'd':ee.setMinutes(0),ee.setSeconds(0),ee.setMilliseconds(0),ee.setHours(0),ee.setDate(F(ee.getDate(),te.increment));break;case'm':ee.setMinutes(0),ee.setSeconds(0),ee.setMilliseconds(0),ee.setHours(0),ee.setDate(1),ee.setMonth(F(ee.getMonth(),te.increment));break;case'y':ee.setMinutes(0),ee.setSeconds(0),ee.setMilliseconds(0),ee.setHours(0),ee.setDate(1),ee.setMonth(0);break;default:throw'Date format not recognized';}return ee}function V(ee,te){switch(te.unit){case's':ee.setSeconds(ee.getSeconds()+te.increment),ee.setMilliseconds(0);break;case'i':ee.setMinutes(ee.getMinutes()+te.increment),ee.setSeconds(0),ee.setMilliseconds(0);break;case'h':ee.setHours(ee.getHours()+te.increment),ee.setMinutes(0),ee.setSeconds(0),ee.setMilliseconds(0);break;case'd':ee.setDate(ee.getDate()+te.increment),ee.setMinutes(0),ee.setSeconds(0),ee.setMilliseconds(0),ee.setHours(0);break;case'm':ee.setMonth(ee.getMonth()+te.increment),ee.setMinutes(0),ee.setSeconds(0),ee.setMilliseconds(0),ee.setHours(0),ee.setDate(1);break;case'y':ee.setFullYear(ee.getFullYear()+te.increment),ee.setMinutes(0),ee.setSeconds(0),ee.setMilliseconds(0),ee.setHours(0),ee.setDate(1),ee.setMonth(0);break;default:throw'Date format not recognized';}return ee}function B(ee,te,ie){if(ee.groups[te][ie])return ee.groups[te][ie].group.setAttribute('display','block'),ee.groups[te][ie];var re={group:document.createElementNS(ee.graph.ns,'g'),text:document.createElementNS(ee.graph.ns,'text')},ae=document.createElementNS(ee.graph.ns,'line');return ae.setAttribute('stroke','black'),ae.setAttribute('y1',0),2===te?(ae.setAttribute('y2',6),re.text.setAttribute('y',15),re.line=ae,re.group.appendChild(re.line)):1===te?(ae.setAttribute('y2',20),re.text.setAttribute('y',10),re.line1=ae,re.line2=ae.cloneNode(),re.group.appendChild(re.line1),re.group.appendChild(re.line2)):void 0,(re.text.setAttribute('text-anchor','middle'),re.text.setAttribute('dominant-baseline','middle'),re.group.appendChild(re.text),ee.getWrapper(te).appendChild(re.group),ee.groups[te][ie]=re)}function W(ee,te,ie){for(;ie<ee.groups[te].length;ie++)R(ee.groups[te][ie])}function R(ee){ee.group.setAttribute('display','none')}function G(ee,te){return J(ee,te)}function U(ee,te,ie,re,ae,se,ne){switch(ee){case 1:var oe=Math.max(re,Math.min(ae,se)),le=Math.max(re,Math.min(ae,ne));if(isNaN(le)||isNaN(oe))return;for(te.line1.setAttribute('x1',oe),te.line2.setAttribute('x1',le),te.line1.setAttribute('x2',oe),te.line2.setAttribute('x2',le),te.text.setAttribute('x',(oe+le)/2);8*ie.length>le-oe;)if(ie=ie.substr(0,ie.length-2)+'.',1==ie.length){ie='';break}te.text.textContent=ie;break;case 2:if(se<re||se>ae)return void R(te);te.line.setAttribute('x1',se),te.line.setAttribute('x2',se),te.text.setAttribute('x',se),te.text.textContent=ie;}}Object.defineProperty(E,'__esModule',{value:!0});var Z=function(ee){return ee&&ee.__esModule?ee:{default:ee}}(Y),Q=function(ee){if(ee&&ee.__esModule)return ee;var te={};if(null!=ee)for(var ie in ee)Object.prototype.hasOwnProperty.call(ee,ie)&&(te[ie]=ee[ie]);return te.default=ee,te}(X),K=[{threshold:20,increments:{1:{increment:1,unit:'i',format:'HH"h"MM (dd/mm/yy)'},2:{increment:1,unit:'s',format:'MM:ss"s"'}}},{threshold:50,increments:{1:{increment:1,unit:'i',format:'HH"h"MM (dd/mm/yy)'},2:{increment:2,unit:'s',format:'MM:ss"s"'}}},{threshold:100,increments:{1:{increment:1,unit:'i',format:'HH"h"MM (dd/mm/yy)'},2:{increment:5,unit:'s',format:'MM:ss"s"'}}},{threshold:600,increments:{1:{increment:10,unit:'i',format:'HH"h"MM (dd/mm/yy)'},2:{increment:30,unit:'s',format:'MM:ss"s"'}}},{threshold:1e3,increments:{1:{increment:1,unit:'h',format:'HH"h"MM (dd/mm/yy)'},2:{increment:10,unit:'i',format:'MM"min"'}}},{threshold:1500,increments:{1:{increment:1,unit:'d',format:'dd/mm/yyyy'},2:{increment:1,unit:'i',format:'H"h"MM'}}},{threshold:3e3,increments:{1:{increment:1,unit:'d',format:'dd/mm/yyyy'},2:{increment:2,unit:'i',format:'H"h"MM'}}},{threshold:8e3,increments:{1:{increment:1,unit:'d',format:'dd/mm/yyyy'},2:{increment:10,unit:'i',format:'H"h"MM'}}},{threshold:26400,increments:{1:{increment:1,unit:'d',format:'dd/mm/yyyy'},2:{increment:20,unit:'i',format:'H"h"MM'}}},{threshold:86400,increments:{1:{increment:1,unit:'d',format:'dd/mm/yyyy'},2:{increment:1,unit:'h',format:'H"h"MM'}}},{threshold:2e5,increments:{1:{increment:1,unit:'d',format:'dd/mm/yyyy'},2:{increment:2,unit:'h',format:'H"h"MM'}}},{threshold:4e5,increments:{1:{increment:1,unit:'d',format:'dd/mm/yyyy'},2:{increment:6,unit:'h',format:'H"h"MM'}}},{threshold:1.4e6,increments:{1:{increment:1,unit:'d',format:'dd/mm/yyyy'},2:{increment:12,unit:'h',format:'HH"h"MM'}}},{threshold:6.4e6,increments:{1:{increment:1,unit:'m',format:'mmmm yyyy'},2:{increment:1,unit:'d',format:'dd'}}},{threshold:1.24e7,increments:{1:{increment:1,unit:'m',format:'mmmm yyyy'},2:{increment:2,unit:'d',format:'dd'}}},{threshold:43200000,increments:{1:{increment:1,unit:'m',format:'mmmm yyyy'},2:{increment:7,unit:'d',format:'dd'}}},{threshold:69120000,increments:{1:{increment:1,unit:'m',format:'mmmm yyyy'},2:{increment:15,unit:'d',format:'dd'}}},{threshold:86400000,increments:{1:{increment:1,unit:'y',format:'yyyy'},2:{increment:3,unit:'m',format:'mm/yyyy'}}},{threshold:172800000,increments:{1:{increment:1,unit:'y',format:'yyyy'},2:{increment:4,unit:'m',format:'mm/yyyy'}}},{threshold:864000000,increments:{1:{increment:1,unit:'y',format:'yyyy'},2:{increment:6,unit:'m',format:'mm/yyyy'}}},{threshold:1036800000,increments:{1:{increment:1,unit:'y',format:'yyyy'},2:{increment:1,unit:'y',format:'yyyy'}}}],J=function(){var ee=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[WLloSZ]|"[^"]*"|'[^']*'/g,te=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,ie=/[^-+\dA-Z]/g,re=function(se,ne){for(se=se+'',ne=ne||2;se.length<ne;)se='0'+se;return se},ae=function(se,ne){var oe=new Date(se[ne+'FullYear'](),0,1);return Math.ceil(((se-oe)/8.64e7+oe[ne+'Day']()+1)/7)};return function(se,ne,oe){var le=J;if(1!=arguments.length||'[object String]'!=Object.prototype.toString.call(se)||/\d/.test(se)||(ne=se,se=void 0),se=se?new Date(se):new Date,isNaN(se))throw SyntaxError('invalid date:'+se);ne=(le.masks[ne]||ne||le.masks['default'])+'','UTC:'==ne.slice(0,4)&&(ne=ne.slice(4),oe=!0);var pe=oe?'getUTC':'get',de=se[pe+'Date'](),ge=se[pe+'Day'](),ue=se[pe+'Month'](),he=se[pe+'FullYear'](),ce=se[pe+'Hours'](),xe=se[pe+'Minutes'](),me=se[pe+'Seconds'](),ye=se[pe+'Milliseconds'](),fe=oe?0:se.getTimezoneOffset(),be={d:de,dd:re(de),ddd:le.i18n.dayNames[ge],dddd:le.i18n.dayNames[ge+7],m:ue+1,mm:re(ue+1),mmm:le.i18n.monthNames[ue],mmmm:le.i18n.monthNames[ue+12],yy:(he+'').slice(2),yyyy:he,h:ce%12||12,hh:re(ce%12||12),H:ce,HH:re(ce),M:xe,MM:re(xe),s:me,ss:re(me),l:re(ye,3),L:re(99<ye?Math.round(ye/10):ye),t:12>ce?'a':'p',tt:12>ce?'am':'pm',T:12>ce?'A':'P',TT:12>ce?'AM':'PM',Z:oe?'UTC':((se+'').match(te)||['']).pop().replace(ie,''),o:(0<fe?'-':'+')+re(100*Math.floor(Math.abs(fe)/60)+Math.abs(fe)%60,4),S:['th','st','nd','rd'][3<de%10?0:(10!=de%100-de%10)*de%10],W:ae(se,pe)};return ne.replace(ee,function(Ae){return Ae in be?be[Ae]:Ae.slice(1,Ae.length-1)})}}();J.masks={'default':'ddd mmm dd yyyy HH:MM:ss',shortDate:'m/d/yy',mediumDate:'mmm d, yyyy',longDate:'mmmm d, yyyy',fullDate:'dddd, mmmm d, yyyy',shortTime:'h:MM TT',mediumTime:'h:MM:ss TT',longTime:'h:MM:ss TT Z',isoDate:'yyyy-mm-dd',isoTime:'HH:MM:ss',isoDateTime:'yyyy-mm-dd\'T\'HH:MM:ss',isoUtcDateTime:'UTC:yyyy-mm-dd\'T\'HH:MM:ss\'Z\''},J.i18n={dayNames:['Sun','Mon','Tue','Wed','Thu','Fri','Sat','Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],monthNames:['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec','January','February','March','April','May','June','July','August','September','October','November','December']};class $ extends Z.default{constructor(){super(...arguments)}init(ee,te){super.init(ee,te),this.wrapper={1:document.createElementNS(ee.ns,'g'),2:document.createElementNS(ee.ns,'g')},this.groups={1:[],2:[]};var ie=document.createElementNS(ee.ns,'rect');ie.setAttribute('fill','#c0c0c0'),ie.setAttribute('stroke','#808080'),ie.setAttribute('height','20'),ie.setAttribute('x','0'),ie.setAttribute('y','0'),this.rect=ie,this.wrapper[1].appendChild(this.rect),this.group.appendChild(this.wrapper[1]),this.group.appendChild(this.wrapper[2]),this.wrapper[1].setAttribute('transform','translate( 0, 25 )'),this.wrapper[2].setAttribute('transform','translate( 0, 00 )')}draw(){this.cacheCurrentMax(),this.cacheCurrentMin(),(void 0==this.currentAxisMin||void 0==this.currentAxisMax)&&this.setMinMaxToFitSeries(!0),this.line.setAttribute('x1',this.getMinPx()),this.line.setAttribute('x2',this.getMaxPx()),this.line.setAttribute('y1',0),this.line.setAttribute('y2',0);var te=this.maxPx-this.minPx,ie=this.getCurrentInterval(),ae=this.getCurrentMax(),se=this.getCurrentMin();if(this.rect.setAttribute('width',te),this.rect.setAttribute('x',this.minPx),!ae||!se)return 0;var ne;for(ce=0;ce<K.length;ce++)if(K[ce].threshold>ie/te){ne=K[ce];break}ne||(ne=K[K.length-1]);var pe=0,oe,le,de,ge,ue,he,ce;for(pe=1;2>=pe;pe++){if(!Q.isNumeric(se)){W(this,pe,0);break}de=new Date(se),ge=O(de,ne.increments[pe]),ce=0;do if(ue=G(ge,ne.increments[pe].format),he=B(this,pe,ce),oe=this.getPx(ge.getTime()),ge=V(ge,ne.increments[pe]),le=this.getPx(ge.getTime()),U(pe,he,ue,this.getMinPx(),this.getMaxPx(),oe,le),ce++,100<ce)break;while(ge.getTime()<ae);W(this,pe,ce)}}isX(){return!0}getWrapper(ee){return this.wrapper[ee]}setShift(ee){this.shift=ee,this.group.setAttribute('transform','translate(0 '+(this.top?this.shift:this.graph.getDrawingHeight()-this.shift)+')')}getAxisPosition(){return 60}setMinMaxFlipped(){var ee=this.maxPx-this.minPx,te=ee*this.options.span[1]+this.minPx,ie=ee*this.options.span[0]+this.minPx;this.minPxFlipped=this.isFlipped()?te:ie,this.maxPxFlipped=this.isFlipped()?ie:te}}E.default=$})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(1),S(12),S(13),S(3),S(14)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(void 0!==T&&(u.exports=T))})(this,function(E,Y,X,I,N,F){'use strict';function V(te){return te&&te.__esModule?te:{default:te}}function B(te,ie,re,ae,se){if(ie){if(te.options.markersIndependant){var ne=te.getMarkerDomIndependant(te.counter1,te.counter2,ie),oe='M '+re+' '+ae+' ';oe+=ie.markerPath+' ',ne.setAttribute('d',oe)}se.path=se.path||'',se.path+='M '+re+' '+ae+' ',se.path+=ie.markerPath+' '}}function W(te){var oe=0,le=te.data.length,pe=0,ye=[],fe=0,be=1,Me=te.isXMonotoneous(),_e=te.getXAxis().getMathMaxPx(),re,ae,se,ne,de,ge,ue,he,ce,xe,Ae,ke,Se,Pe;te.isFlipped()&&(fe=1,be=0);var Ce=[],ve=[],Le=[],we=0;if('x_equally_separated'==te.mode){if(te.isFlipped())return[te.data,te.xData];for(Le=[];oe<le;oe++){pe=0,de=0,ge=te.data[oe].length;var Te=Math.round(te.degradationPx/te.getXAxis().getRelPx(te.xData[oe].dx));for(1==Te&&(ve.push(te.xData[oe]),Ce.push(te.data[oe])),ue=1/0,he=-(1/0);pe<ge;pe+=1){if(re=te.xData[oe].x+pe*te.xData[oe].dx,Me&&0>re){Pe=[re,ae,te.data[oe][pe]];continue}if(Me&&Pe&&(we+=Pe[2],ue=Math.min(ue,Pe[2]),he=Math.max(he,Pe[2]),Pe=!1,de++),we+=te.data[oe][pe],ue=Math.min(ue,te.data[oe][pe]),he=Math.max(he,te.data[oe][pe]),(0==pe%Te&&0<pe||Se)&&(Le.push(we/Te),ye.push(te.xData[oe].x+pe*te.xData[oe].dx-Te/2*te.xData[oe].dx,ue,he),ue=1/0,he=-(1/0),we=0),Me&&re>_e){Se=!0;break}de++}Ce.push(Le),ve.push({dx:Te*te.xData[oe].dx,x:te.xData[oe].x+Te*te.xData[oe].dx/2})}return te.degradationSerie&&(te.degradationSerie.setData(ye),te.degradationSerie.draw()),[Ce,ve]}for(;oe<le;oe++){pe=0,de=0,ge=te.data[oe].length,ce=0,xe=0,ue=1/0,he=-(1/0);for(var Ee=[];pe<ge;pe+=2){if(se=te.getX(te.data[oe][pe+fe]),Me&&0>se){Pe=[se,te.getY(te.data[oe][pe+be]),te.data[oe][pe+fe],te.data[oe][pe+be]];continue}if(Me&&Pe?(xe+=Pe[3],ce++,ue=Math.min(ue,Pe[3]),he=Math.max(he,Pe[3]),Ae=Pe[2],ke=Pe[0],Pe=!1,de++):void 0==Ae&&(Ae=te.data[oe][pe+fe],ke=se),Math.abs(se-ke)>te.degradationPx&&pe<ge){if(Ee.push((Ae+te.data[oe][pe+fe])/2,xe/ce),ye.push((te.data[oe][pe+fe]+Ae)/2,ue,he),ke>_e)break;Ae=void 0,ce=0,xe=0,ue=1/0,he=-(1/0),de++}xe+=te.data[oe][pe+be],ce++,ue=Math.min(ue,te.data[oe][pe+be]),he=Math.max(he,te.data[oe][pe+be]),Me&&se>_e&&(Se=!0),re=se,ae=ne}if(Ce.push(Ee),Se)break}return te.degradationSerie&&(te.degradationSerie.setData(ye),te.degradationSerie.draw()),[Ce]}function R(te){if(te.picks)for(var ie=0;ie<te.picks.length;ie++)te.picks[ie].hide()}function G(te){if(te.picks)for(var ie=0;ie<te.picks.length;ie++)te.picks[ie].show()}Object.defineProperty(E,'__esModule',{value:!0});var U=V(Y),Z=V(X),Q=V(I),K=function(te){if(te&&te.__esModule)return te;var ie={};if(null!=te)for(var re in te)Object.prototype.hasOwnProperty.call(te,re)&&(ie[re]=te[re]);return ie.default=te,ie}(N),J=V(F);const $={lineColor:'black',lineStyle:1,flip:!1,label:'',lineWidth:1,markers:!1,trackMouse:!1,trackMouseLabel:!1,trackMouseLabelRouding:1,lineToZero:!1,autoPeakPicking:!1,autoPeakPickingNb:4,autoPeakPickingMinDistance:10,autoPeakPickingFormat:!1,autoPeakPickingAllowAllY:!1,selectableOnClick:!0,markersIndependant:!1};class ee extends Z.default{constructor(){super(...arguments)}init(te,ie,re){var ae=this;if(this.selectionType='unselected',this.markerFamilies={},this.graph=te,this.name=ie,this.options=K.extend(!0,{},$,re||{}),K.mapEventEmission(this.options,this),this.styles={},this.styles.unselected={lineColor:this.options.lineColor,lineStyle:this.options.lineStyle,lineWidth:this.options.lineWidth,markers:this.options.markers},this.styles.selected={lineWidth:3},this.extendStyles(),this.markersDom=new Map,this.shown=!0,this.data=[],this._isMinOrMax={x:{min:!1,max:!1},y:{min:!1,max:!1}},this.groupLines=document.createElementNS(this.graph.ns,'g'),this.domMarker=document.createElementNS(this.graph.ns,'path'),this.domMarker.style.cursor='pointer',this.groupMain=document.createElementNS(this.graph.ns,'g'),this.additionalData={},this.marker=document.createElementNS(this.graph.ns,'circle'),this.marker.setAttribute('fill','black'),this.marker.setAttribute('r',3),this.marker.setAttribute('display','none'),this.markerLabel=document.createElementNS(this.graph.ns,'text'),this.markerLabelSquare=document.createElementNS(this.graph.ns,'rect'),this.markerLabelSquare.setAttribute('fill','white'),this.domMarkerHover={},this.domMarkerSelect={},this.markerHovered=0,this.groupMarkerSelected=document.createElementNS(this.graph.ns,'g'),this.markerPoints={},this.lines=[],this.groupMain.appendChild(this.groupLines),this.groupMain.appendChild(this.marker),this.groupMain.appendChild(this.groupMarkerSelected),this.groupMain.appendChild(this.markerLabelSquare),this.groupMain.appendChild(this.markerLabel),this.groupMarkers=document.createElementNS(this.graph.ns,'g'),this.groupMain.appendChild(this.groupMarkers),this.independantMarkers=[],this.initExtended1&&this.initExtended1(),this.options.autoPeakPicking){this.picks=this.picks||[];for(var se=0,ne=this.options.autoPeakPickingNb,oe;se<ne;se++)oe=this.graph.newShape({type:'label',label:{text:'',position:{x:0},anchor:'middle'},selectable:!0,shapeOptions:{minPosY:15}}),oe.draw(),oe.setSerie(ae),ae.picks.push(oe)}this.groupLines.addEventListener('click',function(){ae.options.selectableOnClick&&(ae.isSelected()?ae.graph.unselectSerie(ae):ae.graph.selectSerie(ae))}),this.options.markers&&this.setMarkers(this.options.markers,'unselected')}setOptions(te){return this.options=K.extend(!0,{},ee.prototype.defaults,te||{}),this.styles.unselected={lineColor:this.options.lineColor,lineStyle:this.options.lineStyle,markers:this.options.markers},this.applyLineStyles(),this}calculateSlots(){this;this.slotsData={};for(var ie=0,re=this.slots.length;ie<re;ie++)this.calculateSlot(this.slots[ie],ie)}slotCalculator(te,ie){return(0,Q.default)({min:this.minX,max:this.maxX,data:this.data,slot:te,slotNumber:ie,flip:this.getFlip()})}calculateSlot(te,ie){var re=this;this.slotsData[te]=this.slotCalculator(te,ie),this.slotsData[te].then(function(ae){return re.slotsData[te]=ae,ae})}onMouseOverMarker(te,ie){this.toggleMarker(ie,!0,!0);this.options.onMouseOverMarker&&this.options.onMouseOverMarker(ie,!!this.infos&&(this.infos[ie[0]]||!1),[this.data[ie[1]][2*ie[0]],this.data[ie[1]][2*ie[0]+1]])}onMouseOutMarker(te,ie){this.markersOffHover(),this.options.onMouseOutMarker&&this.options.onMouseOutMarker(ie,!!this.infos&&(this.infos[ie[0]]||!1),[this.data[ie[1]][2*ie[0]],this.data[ie[1]][2*ie[0]+1]])}toggleMarker(te,ie,re){var ae=te[0],se=te[1]||0;te=te.join();var ne;'undefined'==typeof ie&&(ne=re?!this.domMarkerHover[te]:!this.domMarkerSelect[te]);var oe=this['domMarker'+(re?'Hover':'Select')];if(ne||!0===ie){if(!oe[te]){var le=document.createElementNS(this.graph.ns,'path');this.setMarkerStyleTo(le,this.markerFamilies[this.selectionType][this.getMarkerCurrentFamily(ae)]),this['domMarker'+(re?'Hover':'Select')][te]=le,this.groupMarkerSelected.appendChild(le)}else le=oe[te];var pe,de;'x_equally_separated'==this.mode?(pe=this._xDataToUse[se].x+ae*this._xDataToUse[se].dx,de=this.data[se][ae]):(pe=this.data[se][2*ae],de=this.data[se][2*ae+1]),pe=this.getX(pe),de=this.getY(de),le.setAttribute('d','M '+pe+' '+de+' '+this.getMarkerPath(this.markerFamilies[this.selectionType][this.getMarkerCurrentFamily(ae)],1)),re&&this.markerHovered++}else if((!ne||!1===ie)&&(re&&this.domMarkerHover[te]&&!this.domMarkerSelect[te]||this.domMarkerSelect[te])){if(!oe[te])return;this.groupMarkerSelected.removeChild(oe[te]),delete oe[te],re&&this.markerHovered--}return ne}markersOffHover(){for(var te in this.domMarkerHover)this.toggleMarker(te.split(','),!1,!0);return this}markersOffSelect(){for(var te in this.domMarkerSelect)this.toggleMarker(te.split(','),!1,!1);return this}onClickOnMarker(te,ie){var re=this.toggleMarker(ie);re&&this.options.onSelectMarker&&this.options.onSelectMarker(ie,!!this.infos&&(this.infos[ie[0]]||!1)),!re&&this.options.onUnselectMarker&&this.options.onUnselectMarker(ie,!!this.infos&&(this.infos[ie[0]]||!1)),this.options.onToggleMarker&&this.options.onToggleMarker(ie,!!this.infos&&(this.infos[ie[0]]||!1),re)}_getMarkerIndexFromEvent(te){var ie=this.graph._getXY(te);return this.searchIndexByPxXY(ie.x-this.graph.getPaddingLeft(),ie.y-this.graph.getPaddingTop())}onMouseWheel(){}empty(){for(var te=0,ie=this.lines.length;te<ie;te++)this.groupLines.removeChild(this.lines[te]);return this.lines=[],this}select(te){return te=te||'selected',this.selected='unselected'!==te,this.areMarkersShown()||this.areMarkersShown(te)?(this.selectionType=te,this.draw(!0),this.applyLineStyles()):(this.selectionType=te,this.applyLineStyles()),this.applyLineStyle(this.getSymbolForLegend()),this}unselect(){return this.selected=!1,this.select('unselected')}degrade(te,ie){var re=this.graph.newSerie(this.name+'_degraded',ie,U.default.SERIE_ZONE);if(this.degradationPx=te,!!re)return re.setData([]),re.setXAxis(this.getXAxis()),re.setYAxis(this.getYAxis()),this.degradationSerie=re,re}drawInit(){var te,ie;if(this.currentLineId=0,this.counter=0,this._drawn=!0,this.currentLine='',this.degradationPx?(te=W(this),ie=te[1],te=te[0],this._dataToUse=te,this._xDataToUse=ie):(this._dataToUse=this.data,this._xDataToUse=this.xData),this._optimizeMonotoneous=this.isXMonotoneous(),this.optimizeMonotoneousDirection=this.XMonotoneousDirection()&&!this.getXAxis().isFlipped()||!this.XMonotoneousDirection()&&this.getXAxis().isFlipped(),this._optimizeBreak,this._optimizeBuffer,this._slotToUse=!1,this.options.useSlots&&this.slots&&0<this.slots.length){if(this.isFlipped())var re=this.graph.getDrawingHeight()*(this.maxY-this.minY)/(this.getYAxis().getCurrentMax()-this.getYAxis().getCurrentMin());else var re=this.graph.getDrawingWidth()*(this.maxX-this.minX)/(this.getXAxis().getCurrentMax()-this.getXAxis().getCurrentMin());for(var ae=0,se=this.slots.length;ae<se;ae++)if(re<this.slots[ae]){this._slotToUse=this.slotsData[this.slots[ae]],this._slotId=ae;break}}this.detectedPeaks=[],this.lastYPeakPicking=!1}removeLinesGroup(){this._afterLinesGroup=this.groupLines.nextSibling,this.groupMain.removeChild(this.groupLines)}insertLinesGroup(){if(!this._afterLinesGroup)throw'Could not find group after lines to insertion.';this.groupMain.insertBefore(this.groupLines,this._afterLinesGroup),this._afterLinesGroup=!1}removeExtraLines(){for(var te=this.currentLineId,ie=this.lines.length;te<ie;te++)this.groupLines.removeChild(this.lines[te]);this.lines.splice(this.currentLineId,ie-this.currentLineId),this.currentLineId=0}detectPeaks(te,ie){this.options.autoPeakPicking&&(this.options.lineToZero?this.detectedPeaks.push([ie,te]):this.lastYPeakPicking?ie>=this.lastYPeakPicking[0]&&this.lookForMaxima||ie<=this.lastYPeakPicking[0]&&this.lookForMinima?this.lastYPeakPicking=[ie,te]:(ie<this.lastYPeakPicking[0]&&this.lookForMaxima||ie>this.lastYPeakPicking[0]&&this.lookForMinima)&&(this.lookForMinima?(this.lookForMinima=!1,this.lookForMaxima=!0):(this.lookForMinima=!0,this.lookForMaxima=!1,this.detectedPeaks.push(this.lastYPeakPicking),this.lastYPeakPicking=!1),this.lastYPeakPicking=[ie,te]):this.lastYPeakPicking=[ie,te])}draw(te){if(te||this.hasDataChanged()){this.drawInit();var ie=this._dataToUse,re=this._xDataToUse,ae=this._slotToUse;this.removeLinesGroup(),this.eraseMarkers(),this.lookForMaxima=!0,this.lookForMinima=!1,this.error&&this.errorDrawInit(),this._draw_slot()||('x_equally_separated'==this.mode?this._draw_equally_separated():this._draw_standard()),this.error&&this.errorDraw(),this.makePeakPicking(),this.removeExtraLines(),this.insertMarkers(),this.insertLinesGroup()}for(var se in this.domMarkerHover)this.toggleMarker(se.split(','),!1,!0);for(var se in this.domMarkerSelect)this.toggleMarker(se.split(','),!1,!1);this.applyLineStyle(this.getSymbolForLegend()),this.hasStyleChanged(this.selectionType)&&this.updateStyle(),this.dataHasChanged(!1)}_draw_standard(){var te=this,ie=this._dataToUse,ae=0,se=ie.length,ue=!1,he=!1,fe=this.getXAxis(),be=this.getYAxis(),Ae=fe.getCurrentMin(),ke=be.getCurrentMin(),Me=fe.getCurrentMax(),_e=be.getCurrentMax(),re,ne,oe,le,pe,de,oe,ce,xe,me,ye,Se,Pe,Ce,ve,Le,we,Te,Ee,De=0,Ye=1,Xe=!1,Ie=!1,Ne;for(this.isFlipped()&&(De=1,Ye=0),ae=0;ae<se;ae++){for(re=!1,this.counter1=ae,this.currentLine='',ne=0,oe=0,le=ie[ae].length,ne=0;ne<le;ne+=2){if(pe=ie[ae][ne+De],de=ie[ae][ne+Ye],pe<Ae&&ue<Ae||pe>Me&&ue>Me||(de<ke&&he<ke||de>_e&&he>_e)&&!this.options.lineToZero){ue=pe,he=de,Ie=!0;continue}if(this.counter2=ne/2,this.markersShown()&&this.getMarkerCurrentFamily(this.counter2),me=this.getX(pe),ye=this.getY(de),me!=ce||ye!=xe){if(Xe=pe<Ae||de<ke||pe>Me||de>_e,this.options.lineToZero){if(Xe=pe<Ae||pe>Me,Xe)continue;}else if(Xe||Ie){!1!==ue&&!1!==he||Ie?(Ne=[],Se=(pe-Ae)/(pe-ue),Pe=de-Se*(de-he),Ce=(pe-Me)/(pe-ue),ve=de-Ce*(de-he),Le=(de-ke)/(de-he),we=pe-Le*(pe-ue),Te=(de-_e)/(de-he),Ee=pe-Te*(pe-ue),1>Se&&0<Se&&!1!==Pe&&Pe<_e&&Pe>ke&&Ne.push([Ae,Pe]),1>Ce&&0<Ce&&!1!==ve&&ve<_e&&ve>ke&&Ne.push([Me,ve]),1>Le&&0<Le&&!1!==we&&we<Me&&we>Ae&&Ne.push([we,ke]),1>Te&&0<Te&&!1!==Ee&&Ee<Me&&Ee>Ae&&Ne.push([Ee,_e]),0<Ne.length?Xe?Ie?2==Ne.length&&(this._createLine(),this._addPoint(this.getX(Ne[0][0]),this.getY(Ne[0][1]),Ne[0][0],Ne[0][1],!1,!1,!1),this._addPoint(this.getX(Ne[1][0]),this.getY(Ne[1][1]),Ne[0][0],Ne[0][1],!1,!1,!1)):(1<Ne.length&&(console.error('Programmation error. Please e-mail me.'),console.log(Ne,Ee,we,ve,Pe,de,ke,_e,he)),this._addPoint(this.getX(Ne[0][0]),this.getY(Ne[0][1]),Ne[0][0],Ne[0][1],!1,!1,!1)):(1<Ne.length&&(console.error('Programmation error. Please e-mail me.'),console.log(Ne,Ee,we,ve,Pe,de,ke,_e,he)),this._createLine(),this._addPoint(this.getX(Ne[0][0]),this.getY(Ne[0][1]),Ne[0][0],Ne[0][1],!1,!1,!1),this._addPoint(me,ye,ue,he,!1,!1,!0)):!Xe&&this._addPoint(me,ye,ue,he,ne,!1,!1)):(ce=me,xe=ye,ue=pe,he=de),ce=me,xe=ye,ue=pe,he=de,Ie=Xe;continue}if(isNaN(me)||isNaN(ye)){0<this.counter&&this._createLine();continue}if(this._optimize_before(me,ye)){if(this._addPoint(me,ye,pe,de,ne,!1,!0),this.detectPeaks(pe,de),!this._optimize_after(me,ye)){re=!0;break}ce=me,xe=ye,ue=pe,he=de}}}if(this._createLine(),re)break}if(this._tracker){this._trackerDom&&this._trackerDom.remove();var ze=this.groupLines.cloneNode(!0);this.groupMain.appendChild(ze);for(var ae=0,se=ze.children.length;ae<se;ae++)ze.children[ae].setAttribute('stroke','transparent'),ze.children[ae].setAttribute('stroke-width','25px'),ze.children[ae].setAttribute('pointer-events','stroke');te._trackerDom=ze,te.groupMain.addEventListener('mousemove',function(He){var Fe=te.graph._getXY(He),Oe=te.handleMouseMove(!1,!1);te._trackingCallback(te,Oe,Fe.x,Fe.y)}),te.groupMain.addEventListener('mouseleave',function(){te._trackingOutCallback(te)})}return this}_draw_slot(){var te=this;return!!this._slotToUse&&(this._slotToUse.done?this._slotToUse.done(function(ie){te.drawSlot(ie,te._slotId)}):this.drawSlot(this._slotToUse,te._slotId),!0)}_draw_equally_separated(){for(var te=0,ie=this._dataToUse,re=this._xDataToUse,ae=ie.length,se,ne,oe,le,pe,de,ge,ue,he;te<ae;te++){for(he='M ',se=0,ne=0,oe=ie[te].length,this.counter1=te;se<oe;se+=1)if((this.counter2=se,this.markersShown()&&this.getMarkerCurrentFamily(ne),this.isFlipped()?(pe=re[te].x+se*re[te].dx,le=ie[te][se],ge=this.getX(pe),de=this.getY(le)):(le=re[te].x+se*re[te].dx,pe=ie[te][se],de=this.getX(le),ge=this.getY(pe)),!!this._optimize_before(de,ge))&&(this._addPoint(de,ge,le,pe,se,!1,!1),!this._optimize_after(de,ge))){ue=!0;break}if(this._createLine(),ue)break}}_optimize_before(te,ie){return!this._optimizeMonotoneous||(this.optimizeMonotoneousDirection&&te<this.getXAxis().getMathMinPx()||!this.optimizeMonotoneousDirection&&te>this.getXAxis().getMathMaxPx()?(this._optimizeBuffer=[te,ie],!1):(this._optimizeBuffer&&(this._addPoint(this._optimizeBuffer[0],this._optimizeBuffer[1],!1,!1,!1,!1,!1),this._optimizeBuffer=!1),!0))}_optimize_after(te){return!this._optimizeMonotoneous||(this.optimizeMonotoneousDirection&&te>this.getXAxis().getMathMaxPx()||!this.optimizeMonotoneousDirection&&te<this.getXAxis().getMathMinPx()?!1:!0)}hidePeakPicking(te){this._hidePeakPickingLocked||(this._hidePeakPickingLocked=te),R(this)}showPeakPicking(te){this._hidePeakPickingLocked&&!te||G(this)}killPeakPicking(){if(this.picks)for(var te=0,ie=this.picks.length;te<ie;te++)this.picks[te].kill()}kill(){super.kill(),this.killPeakPicking()}getMarkerCurrentFamily(te){if(this.markerPoints&&this.markerPoints[this.selectionType]){for(var re=0,ie;re<this.markerPoints[this.selectionType].length&&this.markerPoints[this.selectionType][re][0]<=te;re++)this.markerPoints[this.selectionType][re][1]>=te&&(this.markerCurrentFamily=this.markerPoints[this.selectionType][re][2],ie=this.markerFamilies[this.selectionType][this.markerCurrentFamily]);return!!ie&&(this.getMarkerDom(ie),this.markerCurrentFamily)}}drawSlot(te,ie){var ae=0,se,ne,oe,le;if(this.isFlipped())var pe=this.slots[ie]/(this.maxY-this.minY),de=Math.floor((this.getYAxis().getCurrentMin()-this.minY)*pe),ge=Math.ceil((this.getYAxis().getCurrentMax()-this.minY)*pe);else var pe=this.slots[ie]/(this.maxX-this.minX),de=Math.floor((this.getXAxis().getCurrentMin()-this.minX)*pe),ge=Math.ceil((this.getXAxis().getCurrentMax()-this.minX)*pe);for(le=de;le<=ge;le++)te[le]&&(this.isFlipped()?(ne=Math.floor(this.getY(te[le].x)),oe=this.getX(te[le].max),this._addPoint(this.getX(te[le].start),ne,!1,!1,!1,!1,!1),this._addPoint(oe,ne,!1,!1,!1,!0,!1),this._addPoint(this.getX(te[le].min),ne,!1,!1,!1,!1,!1),this._addPoint(this.getX(te[le].stop),ne,!1,!1,!1,!0,!1)):(se=Math.floor(this.getX(te[le].x)),oe=this.getY(te[le].max),this.options.autoPeakPicking&&allY.push([te[le].max,te[le].x]),this._addPoint(se,this.getY(te[le].start),!1,!1,!1,!1,!1),this._addPoint(se,oe,!1,!1,!1,!0,!1),this._addPoint(se,this.getY(te[le].min),!1,!1,!1,!1,!1),this._addPoint(se,this.getY(te[le].stop),!1,!1,!1,!0,!1)));this._createLine(),ae++}setMarkerStyleTo(te,ie){if(!te||!ie)throw console.trace(),'Cannot set marker style. DOM does not exist.';te.setAttribute('fill',ie.fillColor||'transparent'),te.setAttribute('stroke',ie.strokeColor||this.getLineColor()),te.setAttribute('stroke-width',ie.strokeWidth||1)}hideTrackingMarker(){this.marker.setAttribute('display','none'),this.markerLabel.setAttribute('display','none'),this.markerLabelSquare.setAttribute('display','none')}_addPoint(te,ie,re,ae,se,ne,oe){var le;if(!(isNaN(te)||isNaN(ie))){if(0==this.counter?this.currentLine='M ':this.options.lineToZero||ne?this.currentLine+='M ':this.currentLine+='L ',this.currentLine+=te,this.currentLine+=' ',this.currentLine+=ie,this.currentLine+=' ',this.options.lineToZero&&void 0!==(le=this.getYAxis().getPos(0))&&(this.currentLine+='L ',this.currentLine+=te,this.currentLine+=' ',this.currentLine+=le,this.currentLine+=' '),this.error&&this.errorAddPoint(se,re,ae,te,ie),!this.markerPoints)return void this.counter++;let pe;this.markersShown()&&!1!==oe&&(pe=this.markerFamilies[this.selectionType||'unselected'])&&B(this,pe[this.markerCurrentFamily],te,ie,this.markersDom.get(pe[this.markerCurrentFamily])),this.counter++}}_createLine(){var te=this.currentLineId++,ie;return this.lines[te]?ie=this.lines[te]:(ie=document.createElementNS(this.graph.ns,'path'),this.applyLineStyle(ie),this.groupLines.appendChild(ie),this.lines[te]=ie),0==this.counter?ie.setAttribute('d',''):ie.setAttribute('d',this.currentLine),this.currentLine='M ',this.counter=0,ie}applyLineStyles(){for(var te=0;te<this.lines.length;te++)this.applyLineStyle(this.lines[te])}applyLineStyle(te){te.setAttribute('stroke',this.getLineColor()),te.setAttribute('stroke-width',this.getLineWidth()),this.getLineDashArray()?te.setAttribute('stroke-dasharray',this.getLineDashArray()):te.removeAttribute('stroke-dasharray'),te.setAttribute('fill','none')}updateStyle(){this.applyLineStyles(),this.setLegendSymbolStyle(),this.styleHasChanged(!1)}getMarkerPath(te,ie){var re=te.zoom||1,ie=ie||0,ae=[];switch(te.type){case 2:ae=['m',-2,-2,'l',4,4,'m',-4,0,'l',4,-4];break;case 3:ae=['m',-2,0,'l',4,0,'m',-2,-2,'l',0,4];break;case 4:ae=['m',-1,-1,'l',2,0,'l',-1,2,'z'];break;default:case 1:ae=['m',-2,-2,'l',4,0,'l',0,4,'l',-4,0,'z'];}if((1==re||!re)&&!ie)return ae.join(' ');if(ae){for(var ne=0,oe=ae.length;ne<oe;ne++)typeof ae[ne]=='number'&&(ae[ne]*=re+ie);return ae.join(' ')}}getMarkerDom(te){var ie=this;if(!this.markersDom.has(te)){var re=document.createElementNS(this.graph.ns,'path');this.setMarkerStyleTo(re,te),this.markersDom.set(te,{dom:re,path:''}),re.addEventListener('mouseover',function(ae){var se=ie._getMarkerIndexFromEvent(ae);ie.onMouseOverMarker(ae,se)}),re.addEventListener('mouseout',function(ae){var se=ie._getMarkerIndexFromEvent(ae);ie.onMouseOutMarker(ae,se)}),re.addEventListener('click',function(ae){var se=ie._getMarkerIndexFromEvent(ae);ie.onClickOnMarker(ae,se)})}return te.dom}getMarkerDomIndependant(te,ie,re){var ae=this,se=te+','+ie;if(!this.independantMarkers[se]){var ne=document.createElementNS(this.graph.ns,'path');this.setMarkerStyleTo(ne,re),ne.addEventListener('mouseover',function(oe){ae.onMouseOverMarker(oe,[ie,te])}),ne.addEventListener('mouseout',function(oe){ae.onMouseOutMarker(oe,[ie,te])}),ne.addEventListener('click',function(oe){ae.onClickOnMarker(oe,[ie,te])}),this.independantMarkers[se]=ne}return this.groupMarkers.appendChild(this.independantMarkers[se]),this.independantMarkers[se]}searchIndexByPxXY(te,ie){var re=!1,ae=!1,se,ne=this._xDataToUse,oe,le;if('x_equally_separated'==this.mode)for(var pe=0,de=this.data.length;pe<de;pe++)for(var ge=0,ue=this.data[pe].length;ge<ue;ge+=1)oe=ne[pe].x+ge*ne[pe].dx,le=this.data[pe][ge],se=Math.pow(this.getX(oe)-te,2)+Math.pow(this.getY(le)-ie,2),(!re||se<re)&&(re=se,ae=[ge,pe]);else for(var pe=0,de=this.data.length;pe<de;pe++)for(var ge=0,ue=this.data[pe].length;ge<ue;ge+=2)oe=this.data[pe][ge],le=this.data[pe][ge+1],se=Math.pow(this.getX(oe)-te,2)+Math.pow(this.getY(le)-ie,2),(!re||se<re)&&(re=se,ae=[ge/2,pe]);return ae}searchClosestValue(te){for(var re=0,ie;re<this.data.length;re++){if(te<=this.data[re][this.data[re].length-2]&&te>=this.data[re][0])ie=this._searchBinary(te,this.data[re],!1);else if(te>=this.data[re][this.data[re].length-2]&&te<=this.data[re][0])ie=this._searchBinary(te,this.data[re],!0);else continue;return{dataIndex:re,xMin:this.data[re][ie],xMax:this.data[re][ie+2],yMin:this.data[re][ie+1],yMax:this.data[re][ie+3],xBeforeIndex:ie/2,xAfterIndex:ie/2+1,xBeforeIndexArr:ie,xClosest:(Math.abs(this.data[re][ie+2]-te)<Math.abs(this.data[re][ie]-te)?ie+2:ie)/2}}}handleMouseMove(te,ie){var re=te||this.getXAxis().getMouseVal(),pe=this.searchClosestValue(re);if(pe){var de=(re-pe.xMin)/(pe.xMax-pe.xMin),ge=(1-de)*pe.yMin+de*pe.yMax;if(ie&&this.options.trackMouse){if(void 0==pe.xMin)return!1;var ue=this.getX(this.getFlip()?ge:re),he=this.getY(this.getFlip()?re:ge);switch(this.marker.setAttribute('display','block'),this.marker.setAttribute('cx',ue),this.marker.setAttribute('cy',he),this.markerLabel.setAttribute('display','block'),this.markerLabelSquare.setAttribute('display','block'),this.options.trackMouseLabel){case!1:break;default:this.markerLabel.textContent=this.options.trackMouseLabel.replace('<x>',re.toFixed(this.options.trackMouseLabelRouding)).replace('<y>',ge.toFixed(this.options.trackMouseLabelRouding));}this.markerLabel.setAttribute('x',ue+5),this.markerLabel.setAttribute('y',he-5),this.markerLabelSquare.setAttribute('x',ue+5),this.markerLabelSquare.setAttribute('y',he-5-this.graph.options.fontSize),this.markerLabelSquare.setAttribute('width',this.markerLabel.getComputedTextLength()+2),this.markerLabelSquare.setAttribute('height',this.graph.options.fontSize+2)}return{xBefore:pe.xMin,xAfter:pe.xMax,yBefore:pe.yMin,yAfter:pe.yMax,trueX:re,interpolatedY:ge,xBeforeIndex:pe.xBeforeIndex,xIndexClosest:pe.xClosest}}}_searchBinary(te,ie,re){var ae=0,se=ie.length,ne=se-2;if(ie[ae]==te)return ae;if(ie[ne]==te)return ne;for(var le=0,oe;;){if(le++,100<le)throw'Error loop';if(oe=(ae+ne)/2,oe-=oe%2,oe==ae||ie[oe]==te)return oe;ie[oe]<=te?re?ne=oe:ae=oe:ie[oe]>te&&(re?ae=oe:ne=oe)}}getMax(te,ie){var re=Math.min(te,ie),ae=Math.max(te,ie),se=this.searchClosestValue(re),ne=this.searchClosestValue(ae),pe=-(1/0),oe,le,de,ge;if(se||(re=this.minX,se=this.searchClosestValue(re)),ne||(ae=this.maxX,ne=this.searchClosestValue(ae)),!se||!ne)return-(1/0);for(oe=se.dataIndex;oe<=ne.dataIndex;oe++)for(de=oe==se.dataIndex?se.xBeforeIndexArr:0,ge=oe==ne.dataIndex?ne.xBeforeIndexArr:this.data[oe].length,le=de;le<=ge;le+=2)pe=Math.max(pe,this.data[oe][le+1]);return pe}getMin(te,ie){var re=Math.min(te,ie),ae=Math.max(te,ie),se=this.searchClosestValue(re),ne=this.searchClosestValue(ae),pe=1/0,oe,le,de,ge;if(se||(re=this.minX,se=this.searchClosestValue(re)),ne||(ae=this.maxX,ne=this.searchClosestValue(ae)),!se||!ne)return 1/0;for(oe=se.dataIndex;oe<=ne.dataIndex;oe++)for(de=oe==se.dataIndex?se.xBeforeIndexArr:0,ge=oe==ne.dataIndex?ne.xBeforeIndexArr:this.data[oe].length,le=de;le<=ge;le+=2)pe=Math.min(pe,this.data[oe][le+1]);return pe}setStyle(te,ie='unselected'){this.styles[ie]=te,this.styleHasChanged(ie)}setLineStyle(te,ie='unselected',re){return ie=ie,this.styles[ie]=this.styles[ie]||{},this.styles[ie].lineStyle=te,re&&this.setLineStyle(te,'selected'),this.styleHasChanged(ie),this}getLineStyle(te){return this.getStyle(te).lineStyle}getLineDashArray(te=this.selectionType||'unselected'){switch(this.getStyle(te).lineStyle){case 2:return'1, 1';break;case 3:return'2, 2';break;case 3:return'3, 3';break;case 4:return'4, 4';break;case 5:return'5, 5';break;case 6:return'5 2';break;case 7:return'2 5';break;case 8:return'4 2 4 4';break;case 9:return'1,3,1';break;case 10:return'9 2';break;case 11:return'2 9';break;case!1:case 1:return!1;break;default:return this.styles[te].lineStyle;}this.styleHasChanged(te)}getStyle(te=this.selectionType||'unselected'){return this.styles[te]}extendStyles(){for(var te in this.styles){var ie=this.styles[te];ie&&(this.styles[te]=K.extend(!0,{},this.styles.unselected,ie))}}extendStyle(te,ie){var re=this.styles[te];this.styles[te]=K.extend(!0,{},this.styles[ie||'unselected'],re||{}),this.styles[te].markers.map(function(ae){ae.dom&&(ae.dom='')}),this._recalculateMarkerPoints(te,this.styles[te].markers),this.styleHasChanged(te)}setLineWidth(te,ie,re){return ie=ie||'unselected',this.styles[ie]=this.styles[ie]||{},this.styles[ie].lineWidth=te,re&&this.setLineWidth(te,'selected'),this.styleHasChanged(ie),this}getLineWidth(te){return this.getStyle(te).lineWidth||1}setLineColor(te,ie,re){return ie=ie||'unselected',this.styles[ie]=this.styles[ie]||{},this.styles[ie].lineColor=te,re&&this.setLineColor(te,'selected'),this.styleHasChanged(ie),this}getLineColor(te){return this.getStyle(te).lineColor||'black'}showMarkers(te,ie){return te=te||'unselected',this.styles[te]=this.styles[te]||{},this.styles[te].showMarkers=!0,ie&&this._drawn?this.draw(!0):this.styleHasChanged(te),this}hideMarkers(te,ie){return te=te||'unselected',this.styles[te].showMarkers=!1,ie&&this._drawn?this.draw(!0):this.styleHasChanged(te),this}markersShown(te){return!1!==this.getStyle(te).showMarkers}areMarkersShown(){return this.markersShown.apply(this,arguments)}isMarkersShown(){return this.markersShown.apply(this,arguments)}setMarkers(te,ie,re){return this.styles[ie||'unselected']=this.styles[ie||'unselected']||{},this.showMarkers(ie,!1),Array.isArray(te)||'object'!=typeof te?!te&&(te=[{type:1,zoom:1,points:'all'}]):te=[te],this.styles[ie||'unselected'].markers=te,re&&(this.styles.selected.markers=K.extend(!0,{},te)),this._recalculateMarkerPoints(ie,te),this.styleHasChanged(ie),this.dataHasChanged(!0),this}setMarkersPoints(te,ie,re){this._extendMarkers('points',te,ie,re,!0)}setMarkersColor(te,ie,re){this._extendMarkers('color',te,ie,re)}setMarkersType(te,ie,re){this._extendMarkers('type',te,ie,re)}setMarkersZoom(te,ie,re){this._extendMarkers('zoom',te,ie,re)}setMarkersStrokeColor(te,ie,re){this._extendMarkers('strokeColor',te,ie,re)}setMarkersStrokeWidth(te,ie,re){this._extendMarkers('strokeWidth',te,ie,re)}setMarkersFillColor(te,ie,re){this._extendMarkers('fillColor',te,ie,re)}_extendMarkers(te,ie,re,ae,se){(re=re||0,ae=ae||'unselected',this.styles[ae]&&this.styles[ae].markers)&&(this.styles[ae].markers[re][te]=ie,se&&this._recalculateMarkerPoints(ae,this.styles[ae].markers),this.markersDom[this.styles[ae].markers[re]]&&this.setMarkerStyleTo(this.markersDom[this.styles[ae].markers[re]].dom,this.styles[ae].markers[re]))}_recalculateMarkerPoints(te,ie){var re=[];re.push([0,1/0,null]);for(var ae=0,se=ie.length;ae<se;ae++){ie[ae].markerPath=this.getMarkerPath(ie[ae]),ie[ae].points||(ie[ae].points='all'),Array.isArray(ie[ae].points)||(ie[ae].points=[ie[ae].points]);for(var ne=0,oe=ie[ae].points.length;ne<oe;ne++)'all'==ie[ae].points[ne]?re.push([0,1/0,ae]):Array.isArray(ie[ae].points[ne])?re.push([ie[ae].points[ne][0],ie[ae].points[ne][1],ae]):re.push([ie[ae].points[ne],ie[ae].points[ne],ae])}this.markerFamilies[te||'unselected']=ie,re.sort(function(le,pe){return le[0]-pe[0]||(null==le[2]?-1:1)}),this.markerPoints[te||'unselected']=re}insertMarkers(te){if(this.markerFamilies&&this.markerFamilies[te||this.selectionType]&&!this.options.markersIndependant)for(var ie=0,re=this.markerFamilies[te||this.selectionType].length;ie<re;ie++)if(this.markersDom.has(this.markerFamilies[te||this.selectionType][ie])){let ae=this.markersDom.get(this.markerFamilies[te||this.selectionType][ie]);ae.dom.setAttribute('d',ae.path),this.groupMarkers.appendChild(ae.dom),this.currentMarkersSelectionType=this.selectionType}}getMarkerForLegend(){if(this.markerPoints&&this.markerPoints[this.selectionType]){if(!this.markerForLegend){var te=document.createElementNS(this.graph.ns,'path');this.setMarkerStyleTo(te,this.markerFamilies[this.selectionType][0]),te.setAttribute('d','M 14 0 '+this.getMarkerPath(this.markerFamilies[this.selectionType][0])),this.markerForLegend=te}return this.markerForLegend}}eraseMarkers(){var te=this;if(this.options.markersIndependant){for(var ie in this.independantMarkers)te.groupMarkers.removeChild(this.independantMarkers[ie]);this.independantMarkers={}}else this.currentMarkersSelectionType&&(this.markersDom.forEach(function(re){re.dom&&re.dom.parentNode===te.groupMarkers&&(te.groupMarkers.removeChild(re.dom),re.path='')}),this.currentMarkersSelectionType=!1)}showImpl(){this.showPeakPicking()}hideImpl(){this.hidePeakPicking()}XIsMonotoneous(){return this.xmonotoneous=!0,this}isXMonotoneous(){return this.xmonotoneous||!1}XMonotoneousDirection(){return this.data&&this.data[0]&&0<this.data[0][2]-this.data[0][0]}makePeakPicking(){var te=this,ie=this.detectedPeaks,re,ae,se=[],ae,ne=0,oe=ie.length,le,pe,de,ge,ue=te.graph.selectedShapes.map(function(he){return he.getProp('xval')});for(ie.sort(function(he,ce){return ce[0]-he[0]}),pe=0;ne<oe;ne++)if((re=ie[ne][1],ae=te.getX(re),le=0,de=te.getY(ie[ne][0]),!(ae<te.getXAxis().getMinPx()||ae>te.getXAxis().getMaxPx()))&&!(!te.options.autoPeakPickingAllowAllY&&(de>te.getYAxis().getMinPx()||de<te.getYAxis().getMaxPx()))){for(;le<se.length&&!(Math.abs(se[le]-ae)<te.options.autoPeakPickingMinDistance);le++);if(!(le<se.length)){if(-1<(ge=ue.indexOf(re))){se.push(ae);continue}if(!te.picks[pe])return;for(0>this.getYAxis().getPx(ie[ne][0])-20?(te.picks[pe].setLabelPosition({x:re,y:'5px'}),te.picks[pe].setLabelBaseline('hanging')):(te.picks[pe].setLabelBaseline('no-change'),te.picks[pe].setLabelPosition({x:re,y:ie[ne][0],dy:'-15px'})),te.picks[pe].setProp('xval',re),te.options.autoPeakPickingFormat?te.picks[pe].setLabelText(te.options.autoPeakPickingFormat.call(te.picks[pe],re,pe)):te.picks[pe].setLabelText(Math.round(1e3*re)/1e3+''),te.picks[pe].makeLabels(),pe++;te.picks[pe]&&te.picks[pe].isSelected();)pe++;if(se.length==te.options.autoPeakPickingNb)break}}}}K.mix(ee,J.default),E.default=ee})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(4),S(3)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(void 0!==T&&(u.exports=T))})(this,function(E,Y,X){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var F=function(B){return B&&B.__esModule?B:{default:B}}(Y),O=function(B){if(B&&B.__esModule)return B;var W={};if(null!=B)for(var R in B)Object.prototype.hasOwnProperty.call(B,R)&&(W[R]=B[R]);return W.default=B,W}(X);class V extends F.default{constructor(){super(...arguments)}setData(B,W,R){function G(Ae){var ke=Object.prototype.toString.call(Ae);return'[object Array]'===ke||'[object Int16Array]'===ke||'[object Int32Array]'===ke||'[object Float32Array]'===ke||'[object Float64Array]'===ke||'[object Uint8Array]'===ke||'[object Uint16Array]'===ke||'[object Uint32Array]'===ke||'[object Int8Array]'===ke}var U=0,W=W||!1,R=R||'float',J=0,Z,Q,K,$;this.minX=Number.MAX_SAFE_INTEGER,this.maxX=Number.MIN_SAFE_INTEGER,this.minY=Number.MAX_SAFE_INTEGER,this.maxY=Number.MIN_SAFE_INTEGER;var ee=G(B),te=[];if(!ee&&'object'==typeof B)B=[B];else if(ee&&!G(B[0])&&'object'!=typeof B[0])B=[B],W=!0;else if(ee&&G(B[0])&&2<B[0].length)W=!0;else if(!ee)return void O.throwError('Data is not an array');var ie=G(B[0]),re=G(B[0][0]);if(!ie||W||re||(B=[B]),ie)for(var ae=0,se=B.length;ae<se;ae++){K=this._addData(R,W?B[ae].length:2*B[ae].length),te.push(K),U=0;for(var ne=0,oe=B[ae].length;ne<oe;ne++)W?(K[U]=B[ae][ne],this[0==ne%2?'_checkX':'_checkY'](K[U]),U++,J+=ne%2?1:0):(K[U]=B[ae][ne][0],this._checkX(K[U]),U++,K[U]=B[ae][ne][1],this._checkY(K[U]),U++,J++)}else if('object'==typeof B[0])if(B[0].x)for(var ae=0,oe=B.length,K;ae<oe;ae++){K=this._addData(R,2*B[ae].x.length),te.push(K),U=0;for(var ne=0,le=B[0].x.length;ne<le;ne++)K[U]=B[ae].x[ne],U++,K[U]=B[ae].y[ne],U++,this._checkX(B[ae].x[ne]),this._checkY(B[ae].y[ne]),J++}else{this.mode='x_equally_separated';var pe=0,de=[],te=[],se=0,ge;if(!B[0].y)return console.log(B),void O.throwError('No y data');for(var ae=0,oe=B.length;ae<oe;ae++)pe+=B[ae].y.length,$=0!=ae&&(!B[ae+1]||B[ae].x+B[ae].dx*B[ae].y.length==B[ae+1].x),$||(te.push(this._addData(R,pe)),de.push(pe),pe=0);this.xData=[],pe=0,se=0,U=0;for(var ae=0,oe=B.length;ae<oe;ae++){Z=B[ae].x,Q=B[ae].dx,this.xData.push({x:Z,dx:Q}),ge=B[ae].y.length,this._checkX(Z),this._checkX(Z+Q*ge);for(var ne=0;ne<ge;ne++)te[se][U]=B[ae].y[ne],this._checkY(te[se][U]),U++,J++;pe+=B[ae].y.length,de[se]==pe&&(se++,pe=0,U=0)}}var ue=(this.maxX-this.minX)/this.graph.getDrawingWidth(),he=[],ce=4*this.graph.getDrawingWidth(),xe=J/4,ce=this.graph.getDrawingWidth(),xe=J;if(this.data=te,0<ce){for(;ce<xe;)he.push(ce),ce*=4;this.slots=he,this.options.useSlots&&this.calculateSlots()}if(this.isFlipped()){var me=this.maxX,ye=this.maxY,fe=this.minX,be=this.minY;this.maxX=ye,this.maxY=me,this.minX=be,this.minY=fe}return this.dataHasChanged(),this.graph.updateDataMinMaxAxes(),this}_addData(B,W){switch(B){case'int':var R=4*W;break;case'float':var R=8*W;}var G=new ArrayBuffer(R);switch(B){case'int':return new Int32Array(G);break;default:case'float':return new Float64Array(G);}}clearData(){return this.setData([]),this}getData(){return this.data}setOptions(B){this.options=B||{}}setOption(B,W){this.options[B]=W}kill(B){return this.graph.removeSerieFromDom(this),this.graph._removeSerie(this),this.graph.legend&&!B&&this.graph.legend.update(),this.graph=void 0,this}hide(B){if(this.hidden=!0,this.groupMain.setAttribute('display','none'),this.getSymbolForLegend().setAttribute('opacity',0.5),this.getTextForLegend().setAttribute('opacity',0.5),this.hideImpl(),B)for(var W=this.graph.getShapesOfSerie(this),R=0,G=W.length;R<G;R++)W[R].hide();return this.emit('hide'),this}show(B){if(this.hidden=!1,this.groupMain.setAttribute('display','block'),this.getSymbolForLegend().setAttribute('opacity',1),this.getTextForLegend().setAttribute('opacity',1),this.showImpl(),this.draw(!0),B)for(var W=this.graph.getShapesOfSerie(this),R=0,G=W.length;R<G;R++)W[R].show();return this.emit('show'),this}hideImpl(){}showImpl(){}toggleDisplay(){return this.isShown()?this.hide():this.show(),this}isShown(){return!this.hidden}getX(B){return(B=this.getXAxis().getPx(B))-B%0.2}getY(B){return(B=this.getYAxis().getPx(B))-B%0.2}isSelected(){return this.selected||'unselected'!==this.selectionType}_checkX(B){this.minX=Math.min(this.minX,B),this.maxX=Math.max(this.maxX,B)}_checkY(B){this.minY=Math.min(this.minY,B),this.maxY=Math.max(this.maxY,B)}getName(){return this.name}autoAxis(){return this.isFlipped()?(this.setXAxis(this.graph.getYAxis()),this.setYAxis(this.graph.getXAxis())):(this.setXAxis(this.graph.getXAxis()),this.setYAxis(this.graph.getYAxis())),this.graph.updateDataMinMaxAxes(),this}setXAxis(B){return this.xaxis='number'==typeof B?this.isFlipped()?this.graph.getYAxis(B):this.graph.getXAxis(B):B,this.graph.updateDataMinMaxAxes(),this}setYAxis(B){return'number'==typeof B?this.xaxis=this.isFlipped()?this.graph.getXAxis(B):this.graph.getYAxis(B):this.yaxis=B,this.graph.updateDataMinMaxAxes(),this}setAxes(){for(var B=0;2>B;B++)arguments[B]&&this[arguments[B].isX()?'setXAxis':'setYAxis'](arguments[B]);return this}getXAxis(){return this.xaxis}getYAxis(){return this.yaxis}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getSymbolForLegend(){if(!this.lineForLegend){var B=document.createElementNS(this.graph.ns,'line');this.applyLineStyle(B),B.setAttribute('x1',5),B.setAttribute('x2',25),B.setAttribute('y1',0),B.setAttribute('y2',0),B.setAttribute('cursor','pointer'),this.lineForLegend=B}return this.lineForLegend}setLegendSymbolStyle(){this.applyLineStyle(this.getSymbolForLegend())}updateStyle(){this.setLegendSymbolStyle(),this.graph.updateLegend()}getTextForLegend(){if(!this.textForLegend){var B=document.createElementNS(this.graph.ns,'text');B.setAttribute('cursor','pointer'),B.textContent=this.getLabel(),this.textForLegend=B}return this.textForLegend}getIndex(){return this.graph.series.indexOf(this)}getLabel(){return this.options.label||this.name}setLabel(B){return this.options.label=B,this.textForLegend&&(this.textForLegend.textContent=B),this.graph.requireLegendUpdate(),this}setFlip(B){return this.options.flip=B,this}getFlip(){return this.options.flip}isFlipped(){return this.options.flip}setLayer(B){return this.options.layer=parseInt(B)||1,this}getLayer(){return this.options.layer||1}setStyle(B,W='unselected'){this.styles[W]=B,this.styleHasChanged(W)}styleHasChanged(B='unselected'){if(this._changedStyles=this._changedStyles||{},!1===B)for(var W in this._changedStyles)this._changedStyles[W]=!1;else this._changedStyles[B||'unselected']=!0;return this.graph.requireLegendUpdate(),this}hasStyleChanged(B){return this._changedStyles=this._changedStyles||{},this._changedStyles[B||'unselected']}dataHasChanged(B){return this._dataHasChanged=void 0===B||B,this}hasDataChanged(){return this._dataHasChanged}setInfo(B,W){return this.infos=this.infos||{},this.infos[B]=W,this}getInfo(B){return(this.infos||{})[B]}setAdditionalData(B){return this.additionalData=B,this}getAdditionalData(){return this.additionalData}select(){return this.selected=!0,this}unselect(){return this.selected=!1,this}enableTracking(B,W){return this._tracker=!0,this._trackingCallback=B,this._trackingOutCallback=W,this}disableTracking(){return this._trackerDom&&(this._trackerDom.remove(),this._trackerDom=null),this._tracker=!1,this._trackingCallback=null,this}allowTrackingLine(B){B=B||{},this.graph.addSerieToTrackingLine(this,B)}getMarkerForLegend(){return!1}get type(){return this._type}getType(){return this._type}set excludedFromLegend(B=!0){this._excludedFromLegend=B}get excludedFromLegend(){return!!this._excludedFromLegend}setDataIndices(B,W){this.categoryIndices=B,this.nbCategories=W}}E.default=V})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(3)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(void 0!==T&&(u.exports=T))})(this,function(E,Y){'use strict';function I(){var V=URL.createObjectURL(new Blob([' ( '+function(){onmessage=function(B){for(var W=B.data.data,R=B.data.slotNumber,G=B.data.slot,U=B.data.flip,Z=B.data.max,Q=B.data.min,$=[],ee=0,te=W.length,K;ee<te;ee++)for(var ie=0,re=W[ee].length;ie<re;ie+=2)K=Math.floor((W[ee][ie]-Q)*(G/(Z-Q))),$[K]=$[K]||{min:W[ee][ie+1],max:W[ee][ie+1],start:W[ee][ie+1],stop:!1,x:W[ee][ie]},$[K].stop=W[ee][ie+1],$[K].min=Math.min(W[ee][ie+1],$[K].min),$[K].max=Math.max(W[ee][ie+1],$[K].max);postMessage({slotNumber:R,slot:G,data:$,_queueId:B.data._queueId})}}.toString()+')()'],{type:'application/javascript'}));F=new Worker(V),F.onmessage=function(B){var W=B.data._queueId;delete B.data._queueId,O[W].resolve(B.data.data),delete O[W]}}Object.defineProperty(E,'__esModule',{value:!0}),E.default=function(V){F||I();var B=N.guid();V._queueId=B;var R=new Promise(function(G){W=G}),W;return O[B]={promise:R,resolve:W},F.postMessage(V),O[B].promise};var N=function(V){if(V&&V.__esModule)return V;var B={};if(null!=V)for(var W in V)Object.prototype.hasOwnProperty.call(V,W)&&(B[W]=V[W]);return B.default=V,B}(Y),F,O={}})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(3)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(void 0!==T&&(u.exports=T))})(this,function(E,Y){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var I=function(F){if(F&&F.__esModule)return F;var O={};if(null!=F)for(var V in F)Object.prototype.hasOwnProperty.call(F,V)&&(O[V]=F[V]);return O.default=F,O}(Y);E.default={doErrorDraw:function(F,O,V,B,W,R){O instanceof Array||(O=[O]);var G='y'==F?'getY':'getX',U='y'==F?['top','bottom']:['left','right'],Z;if(!(isNaN(W)||isNaN(R)))for(var Q=0,K=O.length;Q<K;Q++)O[Q]instanceof Array?(Z=U[0],this.errorstyles[Q].paths[Z]+=' M '+W+' '+R,this.errorstyles[Q].paths[Z]+=this.makeError(F,Q,this[G](V+O[Q][0]),B,Z),Z=U[1],this.errorstyles[Q].paths[Z]+=' M '+W+' '+R,this.errorstyles[Q].paths[Z]+=this.makeError(F,Q,this[G](V-O[Q][1]),B,Z)):(Z=U[0],this.errorstyles[Q].paths[Z]+=' M '+W+' '+R,this.errorstyles[Q].paths[Z]+=this.makeError(F,Q,this[G](V+O[Q]),B,Z),Z=U[1],this.errorstyles[Q].paths[Z]+=' M '+W+' '+R,this.errorstyles[Q].paths[Z]+=this.makeError(F,Q,this[G](V-O[Q]),B,Z))},makeError:function(F,O,V,B,W){var R;switch(this.errorstyles[O].type){case'bar':R='makeBar';break;case'box':R='makeBox';}return this[R+F.toUpperCase()](V,B,this.errorstyles[O][W])},makeBarY:function(F,O,V){if(F&&V){var B=I.isNumeric(V.width)?V.width:10;return' V '+F+' m -'+B/2+' 0 h '+B+' m -'+B/2+' 0 V '+O+' '}},makeBoxY:function(F,O,V){return F&&V?' m 5 0 V '+F+' h -10 V '+O+' m 5 0 ':void 0},makeBarX:function(F,O,V){if(F&&V){var B=I.isNumeric(V.width)?V.width:10;return' H '+F+' m 0 -'+B/2+' v '+B+' m 0 -'+B/2+' H '+O+' '}},makeBoxX:function(F,O,V){return F&&V?' v 5 H '+F+' v -10 H '+O+' v 5 ':void 0},check:function(F,O,V){var B,W;if((this.getType()!=Graph.SERIE_LINE&&this.getType()!=Graph.SERIE_SCATTER||(B=this.data[2*F])&&(W=this.data[2*F+1]))&&void 0!==B){for(var R=0,G=O.length;R<G;R++)Array.isArray(O[R])?(isNaN(O[R][0])||this._checkY(W+O[R][0]),isNaN(O[R][1])||this._checkY(W-O[R][1])):isNaN(O[R])||(this._checkY(W+O[R]),this._checkY(W-O[R]));for(var R=0,G=V.length;R<G;R++)Array.isArray(V[R])?(isNaN(V[R][0])||this._checkX(B-V[R][0]),isNaN(V[R][1])||this._checkX(B+V[R][1])):isNaN(O[R])||(this._checkX(B-V[R]),this._checkX(B+V[R]))}},setDataError:function(F,O){if(this.error=F,!O)for(let V=0,B=this.error.length;V<B;V++)this.error[V]&&this.check(V,this.error[V][0],this.error[V][1]);return this.dataHasChanged(),this.graph.updateDataMinMaxAxes(),this},setErrorStyle:function(F){function O(Q){Q.dom=document.createElementNS(V.graph.ns,'path'),Q.dom.setAttribute('fill',Q.fillColor||'none'),Q.dom.setAttribute('stroke',Q.strokeColor||'black'),Q.dom.setAttribute('stroke-opacity',Q.strokeOpacity||1),Q.dom.setAttribute('fill-opacity',Q.fillOpacity||1),Q.dom.setAttribute('stroke-width',Q.strokeWidth||1),V.groupMain.appendChild(Q.dom)}var V=this;F=F||['box','bar'],Array.isArray(F)||(F=[F]);for(var B=[],W=[['y','top','bottom'],['x','left','right']],R=0;R<F.length;R++){B[R]={},'string'==typeof F[R]&&(F[R]={type:F[R],y:{}}),B[R].type=F[R].type;for(var G=0,U=W.length;G<U;G++){F[R].all&&(F[R][W[G][1]]=I.extend(!0,{},F[R].all),F[R][W[G][2]]=I.extend(!0,{},F[R].all)),F[R][W[G][0]]&&(F[R][W[G][1]]=I.extend(!0,{},F[R][W[G][0]]),F[R][W[G][2]]=I.extend(!0,{},F[R][W[G][0]]));for(var Z=1;2>=Z;Z++)F[R][W[G][Z]]&&(B[R][W[G][Z]]=F[R][W[G][Z]],O(B[R][W[G][Z]]))}}return this.errorstyles=B,this},errorDrawInit:function(){if(this.errorstyles)for(var O=0,V=this.errorstyles.length;O<V;O++)this.errorstyles[O].paths={top:'',bottom:'',left:'',right:''}},errorAddPoint:function(F,O,V,B,W){var R;this.error&&(R=this.error[F/2])&&(R[0]&&this.doErrorDraw('y',R[0],V,W,B,W),R[1]&&this.doErrorDraw('x',R[1],O,B,B,W))},errorAddPointBarChart:function(F,O,V,B){var W;this.error&&(W=this.error[F])&&this.doErrorDraw('y',W,O,B,V,B)},errorDraw:function(){if(this.error&&this.errorstyles)for(var F=0,O=this.errorstyles.length;F<O;F++)for(var V in this.errorstyles[F].paths)this.errorstyles[F][V]&&this.errorstyles[F][V].dom&&this.errorstyles[F][V].dom.setAttribute('d',this.errorstyles[F].paths[V])}}})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(3),S(11),S(14)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(void 0!==T&&(u.exports=T))})(this,function(E,Y,X,I){'use strict';function N(R){return R&&R.__esModule?R:{default:R}}Object.defineProperty(E,'__esModule',{value:!0});var O=function(R){if(R&&R.__esModule)return R;var G={};if(null!=R)for(var U in R)Object.prototype.hasOwnProperty.call(R,U)&&(G[U]=R[U]);return G.default=R,G}(Y),V=N(X),B=N(I);class W extends V.default{constructor(){super()}init(R,G,U){this.graph=R,this.name=G,this.options=U||{},this.groupMain=document.createElementNS(this.graph.ns,'g'),this.pathDom=document.createElementNS(this.graph.ns,'path'),this.groupMain.appendChild(this.pathDom),this.styles={},this.styles.unselected={lineColor:this.options.lineColor,lineStyle:this.options.lineStyle,lineWidth:this.options.lineWidth,fillColor:this.options.fillColor,fillOpacity:this.options.fillOpacity,markers:this.options.markers}}setData(R){for(var G in this.data=R,this.minY=Number.MAX_SAFE_INTEGER,this.maxY=Number.MIN_SAFE_INTEGER,this.data)this._checkY(this.data[G]);return this}setFillColor(R,G,U){return G=G||'unselected',this.styles[G]=this.styles[G]||{},this.styles[G].fillColor=R,U&&this.setFillColor(R,'selected'),this.styleHasChanged(G),this}getFillColor(R){return this.getStyle(R).fillColor}setFillOpacity(R,G,U){return G=G||'unselected',this.styles[G]=this.styles[G]||{},this.styles[G].fillOpacity=R,U&&this.setLineWidth(R,'selected'),this.styleHasChanged(G),this}getFillOpacity(R){return this.getStyle(R).fillOpacity||1}applyLineStyles(){this.applyLineStyle(this.pathDom)}applyLineStyle(R){R.setAttribute('stroke',this.getLineColor()),R.setAttribute('stroke-width',this.getLineWidth()),this.getLineDashArray()?R.setAttribute('stroke-dasharray',this.getLineDashArray()):R.removeAttribute('stroke-dasharray'),R.setAttribute('fill',this.getFillColor()),R.setAttribute('fill-opacity',this.getFillOpacity()||1)}draw(){var R='';for(var Z in this.error&&this.errorDrawInit(),this.data)this.categoryIndices[Z]&&(R+='M '+this.getXAxis().getPos(this.categoryIndices[Z])+' '+this.getYAxis().getPos(0)+' V '+this.getYAxis().getPos(this.data[Z])+' h '+this.getXAxis().getDeltaPx(1/this.nbCategories)+' V '+this.getYAxis().getPos(0),this.error&&this.errorAddPointBarChart(Z,this.data[Z],this.getXAxis().getPos(this.categoryIndices[Z]+0.5/this.nbCategories),this.getYAxis().getPos(this.data[Z])));this.error&&this.errorDraw(),this.pathDom.setAttribute('d',R),this.applyLineStyles()}setMarkers(){}getUsedCategories(){return Object.keys(this.data)}}E.default=W})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(12),S(3)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(void 0!==T&&(u.exports=T))})(this,function(E,Y,X){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var N=function(V){return V&&V.__esModule?V:{default:V}}(Y);const F={orientation:'y',maxBoxWidth:20,defaultStyle:{meanLineColor:'rgb( 100, 0, 0 )',meanLineWidth:2,boxAboveLineWidth:1,boxAboveLineColor:'rgb( 0, 0, 0 )',boxAboveFillColor:'transparent',boxAboveFillOpacity:1,boxBelowLineWidth:1,boxBelowLineColor:'rgb( 0, 0, 0 )',boxBelowFillColor:'transparent',boxBelowFillOpacity:1,barAboveLineColor:'rgba( 0, 0, 0, 1 )',barAboveLineWidth:1,barBelowLineColor:'rgba( 0, 0, 0, 1 )',barBelowLineWidth:1,outlierLineWidth:1,outlierLineColor:'rgb( 255, 255, 255 )',outlierFillColor:'rgb( 0, 0, 0 )',outlierFillOpacity:1}};class O extends N.default{constructor(){super()}init(V,B,W){this.graph=V,this.name=B,this.options=(0,X.extend)(!0,{},F,W||{}),this.groupMain=document.createElementNS(this.graph.ns,'g'),this.pathDom=document.createElementNS(this.graph.ns,'path'),this.groupMain.appendChild(this.pathDom),this.styles={},this.styles.unselected=this.options.defaultStyle}setData(V,B){if(this.data=V,!!Array.isArray(V)){let W,R,G,U,Z;for(var Q in'y'==this.options.orientation?(W=this.getXAxis(),R=this.getYAxis(),G=this._checkX.bind(this),U=this._checkY.bind(this),Z=!0,this.minY=V[0].Q2,this.maxY=V[0].Q2,this.maxX=V[0].x,this.minX=V[0].x):(W=this.getYAxis(),R=this.getXAxis(),G=this._checkY.bind(this),U=this._checkX.bind(this),Z=!1,this.minX=V[0].Q2,this.maxX=V[0].Q2,this.maxY=V[0].y,this.minY=V[0].y),B&&(G=function(){},U=function(){}),W&&R||(0,X.throwError)('Error in setting data of the box serie. The X and Y axes must be set beforehand'),this.data)Z?(G(this.data[Q].x),this.data[Q].pos=this.data[Q].x):(G(this.data[Q].y),this.data[Q].pos=this.data[Q].y),this.data[Q].Q3&&U(this.data[Q].Q3),this.data[Q].Q1&&U(this.data[Q].Q1),this.data[Q].whiskers?Array.isArray(this.data[Q].whiskers)?(0<this.data[Q].whiskers.length&&U(this.data[Q].whiskers[0]),1<this.data[Q].whiskers.length&&U(this.data[Q].whiskers[1])):(U(this.data[Q].whiskers),this.data[Q].whiskers=[this.data[Q].whiskers]):this.data[Q].whiskers=[],Array.isArray(this.data[Q].outliers)?this.data[Q].outliers.map(K=>U(K)):this.data[Q].outliers=[];return this.dataHasChanged(),this.graph.updateDataMinMaxAxes(),this}}_style(V,B,W='unselected',R=!1){return this.styles[W]=this.styles[W]||{},this.styles[W][V]=B,R&&this._set(V,B,'selected'),this.styleHasChanged(W),this}_gstyle(V,B){return this.getStyle(B)[V]}getStyle(V='unselected'){return this.styles[V]||{}}setMeanLineColor(){return this._style('meanLineColor',...arguments)}getMeanLineColor(){return this._gstyle('meanLineColor',...arguments)}setStyle(V,B='unselected'){this.styles[B]=(0,X.extend)({},F.defaultStyle,this.styles.unselected,V),this.styleHasChanged(B)}setMeanLineWidth(){return this._style('meanLineWidth',...arguments)}getMeanLineWidth(){return this._gstyle('meanLineWidth',...arguments)}setBoxAboveLineColor(){return this._style('boxAboveLineColor',...arguments)}getBoxAboveLineColor(){return this._gstyle('boxAboveLineColor',...arguments)}setBoxBelowLineColor(){return this._style('boxBelowLineColor',...arguments)}getBoxBelowLineColor(){return this._gstyle('boxBelowLineColor',...arguments)}setBoxAboveLineWidth(){return this._style('boxAboveLineWidth',...arguments)}getBoxAboveLineWidth(){return this._gstyle('boxAboveLineWidth',...arguments)}setBoxBelowLineWidth(){return this._style('boxBelowLineWidth',...arguments)}getBoxBelowLineWidth(){return this._gstyle('boxBelowLineWidth',...arguments)}setBoxAboveFillColor(){return this._style('boxAboveFillColor',...arguments)}getBoxAboveFillColor(){return this._gstyle('boxAboveFillColor',...arguments)}setBoxBelowFillColor(){return this._style('boxBelowFillColor',...arguments)}getBoxBelowFillColor(){return this._gstyle('boxBelowFillColor',...arguments)}setBoxAboveFillOpacity(){return this._style('boxAboveFillOpacity',...arguments)}getBoxAboveFillOpacity(){return this._gstyle('boxAboveFillOpacity',...arguments)}setBoxBelowFillOpacity(){return this._style('boxBelowFillOpacity',...arguments)}getBoxBelowFillOpacity(){return this._gstyle('boxBelowFillOpacity',...arguments)}setBarAboveLineColor(){return this._style('barAboveLineColor',...arguments)}getBarAboveLineColor(){return this._gstyle('barAboveLineColor',...arguments)}setBarBelowLineColor(){return this._style('barBelowLineColor',...arguments)}getBarBelowLineColor(){return this._gstyle('barBelowLineColor',...arguments)}setBarAboveLineWidth(){return this._style('barAboveLineWidth',...arguments)}getBarAboveLineWidth(){return this._gstyle('barAboveLineWidth',...arguments)}setBarBelowLineWidth(){return this._style('barBelowLineWidth',...arguments)}getBarBelowLineWidth(){return this._gstyle('barBelowLineWidth',...arguments)}setOutlierLineColor(){return this._style('outlierLineColor',...arguments)}getOutlierLineColor(){return this._gstyle('outlierLineColor',...arguments)}setOutlierLineWidth(){return this._style('outlierLineWidth',...arguments)}getOutlierLineWidth(){return this._gstyle('outlierLineWidth',...arguments)}setOutlierFillColor(){return this._style('outlierFillColor',...arguments)}getOutlierFillColor(){return this._gstyle('outlierFillColor',...arguments)}setOutlierFillOpacity(){return this._style('outlierFillOpacity',...arguments)}getOutlierFillOpacity(){return this._gstyle('outlierFillOpacity',...arguments)}applyLineStyles(){this.applyLineStyle(this.pathDom)}applyLineStyle(V){V.setAttribute('stroke',this.getLineColor()),V.setAttribute('stroke-width',this.getLineWidth()),V.removeAttribute('stroke-dasharray'),V.setAttribute('fill',this.getFillColor()),V.setAttribute('fill-opacity',this.getFillOpacity()||1)}draw(){if(this.data){let B='y'==this.options.orientation?this.getYAxis():this.getXAxis(),W='y'==this.options.orientation?this.getXAxis():this.getYAxis(),G=!1,V,R,U,Z,Q,K,J,$;if((0,X.emptyDom)(this.groupMain),'category'==W.getType())R=W.getRelPx(0.8/this.nbCategories),G=!0;else{R=this.options.maxBoxWidth;for(var re=0,ae=this.data.length;re<ae-1;re++)R=Math.min(R,Math.abs(W.getPx(this.data[re+1].pos)-W.getPx(this.data[re].pos)))}for(var re=0,ae=this.data.length;re<ae;re++){if('category'==W.getType()){let de='y'==this.options.orientation?this.data[re].x:this.data[re].y;if(!!this.categoryIndices.hasOwnProperty(de))V=[W.getPos(this.categoryIndices[de])+1.2*R/2];else if(Array.isArray(this._linkedToScatterSeries))for(let ge of this._linkedToScatterSeries)if(ge.categoryIndices.hasOwnProperty(de)){V=[W.getPos(ge.categoryIndices[de])+1.2*R/2],B='y'==this.options.orientation?ge.getYAxis():ge.getXAxis();break}}else V=[W.getPos('y'==this.options.orientation?this.data[re].x:this.data[re].y),R];U=B.getPos(this.data[re].Q2),Z=B.getPos(this.data[re].Q3),Q=B.getPos(this.data[re].Q1),this.data[re].whiskers.map(de=>{de<this.data[re].Q1?J=B.getPos(de):K=B.getPos(de)}),$=this.data[re].outliers.map(de=>B.getPos(de));var se=document.createElementNS(this.graph.ns,'line');this.applyMeanStyle(se);var ne=document.createElementNS(this.graph.ns,'rect'),oe=document.createElementNS(this.graph.ns,'rect');'y'==this.options.orientation?(ne.setAttribute('width',R),ne.setAttribute('x',V[0]-R/2),oe.setAttribute('width',R),oe.setAttribute('x',V[0]-R/2),se.setAttribute('x1',V[0]-R/2),se.setAttribute('x2',V[0]+R/2),se.setAttribute('y1',U),se.setAttribute('y2',U)):(ne.setAttribute('height',R),ne.setAttribute('y',V[0]-R/2),oe.setAttribute('height',R),oe.setAttribute('y',V[0]-R/2),se.setAttribute('y1',V[0]-R/2),se.setAttribute('y2',V[0]+R/2),se.setAttribute('x1',U),se.setAttribute('x2',U)),this.boxPos(ne,U,Z,'x'==this.options.orientation),this.boxPos(oe,U,Q,'x'==this.options.orientation),this.applyBoxStyle(ne,oe);var le=document.createElementNS(this.graph.ns,'line'),pe=document.createElementNS(this.graph.ns,'line');'y'==this.options.orientation?(void 0!==K&&(le.setAttribute('y1',Z),le.setAttribute('y2',K),le.setAttribute('x1',V[0]),le.setAttribute('x2',V[0])),void 0!==J&&(pe.setAttribute('y1',Q),pe.setAttribute('y2',J),pe.setAttribute('x1',V[0]),pe.setAttribute('x2',V[0]))):(void 0!==K&&(le.setAttribute('x1',Z),le.setAttribute('x2',K),le.setAttribute('y1',V[0]),le.setAttribute('y2',V[0])),void 0!==J&&(pe.setAttribute('x1',Q),pe.setAttribute('x2',J),pe.setAttribute('y1',V[0]),pe.setAttribute('y2',V[0]))),$.map(de=>{let ge=document.createElementNS(this.graph.ns,'circle');ge.setAttribute('r',2),'y'==this.options.orientation?(ge.setAttribute('cx',V[0]),ge.setAttribute('cy',de)):(ge.setAttribute('cy',V[0]),ge.setAttribute('cx',de)),this.setOutlierStyle(ge),this.groupMain.appendChild(ge)}),void 0!==K&&this.groupMain.appendChild(le),void 0!==J&&this.groupMain.appendChild(pe),void 0!=Z&&this.groupMain.appendChild(ne),void 0!=Q&&this.groupMain.appendChild(oe),this.groupMain.appendChild(se),this.applyWhiskerStyle(le,pe)}}}applyBoxStyle(V,B){V.setAttribute('stroke',this.getBoxAboveLineColor()),V.setAttribute('stroke-width',this.getBoxAboveLineWidth()),this.getBoxAboveFillColor()!==void 0&&V.setAttribute('fill',this.getBoxAboveFillColor()),this.getBoxAboveFillOpacity()!==void 0&&V.setAttribute('fill-opacity',this.getBoxAboveFillOpacity()),B.setAttribute('stroke',this.getBoxBelowLineColor()),B.setAttribute('stroke-width',this.getBoxBelowLineWidth()),this.getBoxBelowFillColor()!==void 0&&B.setAttribute('fill',this.getBoxBelowFillColor()),this.getBoxAboveFillOpacity()!==void 0&&B.setAttribute('fill-opacity',this.getBoxBelowFillOpacity())}applyWhiskerStyle(V,B){V.setAttribute('stroke',this.getBarAboveLineColor()),V.setAttribute('stroke-width',this.getBarAboveLineWidth()),B.setAttribute('stroke',this.getBarBelowLineColor()),B.setAttribute('stroke-width',this.getBarBelowLineWidth())}applyMeanStyle(V){V.setAttribute('stroke',this.getMeanLineColor()),V.setAttribute('stroke-width',this.getMeanLineWidth())}setOutlierStyle(V){V.setAttribute('stroke',this.getOutlierLineColor()),V.setAttribute('stroke-width',this.getOutlierLineWidth()),this.getBoxBelowFillColor()!==void 0&&V.setAttribute('fill',this.getOutlierFillColor()),this.getBoxAboveFillOpacity()!==void 0&&V.setAttribute('fill-opacity',this.getOutlierFillOpacity())}getCategoryIndex(V){if(!this.categories)throw new Error('No categories were defined. Probably axis.setSeries was not called');for(var B=0;B<this.categories.length;B++)if(this.categories[B].name==V)return B;return!1}setMarkers(){}boxPos(V,B,W,R){B>W?(V.setAttribute(R?'x':'y',W),V.setAttribute(R?'width':'height',B-W)):(V.setAttribute(R?'x':'y',B),V.setAttribute(R?'width':'height',W-B))}getUsedCategories(){let V='y'==this.options.orientation?'x':'y',B=this.data.map(W=>W[V]);return Array.isArray(this._linkedToScatterSeries)&&this._linkedToScatterSeries.map(W=>{W.getUsedCategories().map(R=>{let G;-1<(G=B.indexOf(R))&&B.splice(G,1)})}),B}linkToScatterSerie(...V){this._linkedToScatterSeries=V}}E.default=O})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(11),S(3),S(14)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(void 0!==T&&(u.exports=T))})(this,function(E,Y,X,I){'use strict';function F(R){return R&&R.__esModule?R:{default:R}}Object.defineProperty(E,'__esModule',{value:!0});var O=F(Y),V=function(R){if(R&&R.__esModule)return R;var G={};if(null!=R)for(var U in R)Object.prototype.hasOwnProperty.call(R,U)&&(G[U]=R[U]);return G.default=R,G}(X),B=F(I);class W extends O.default{constructor(){super(...arguments)}initExtended1(){this.lines=this.lines||{},this.initExtended2&&this.initExtended2()}setColors(R){this.colors=R}_draw_standard(){var R=this,G=this._dataToUse,Z=0,Q=G.length,re=!1,ae=!1,pe=this.getXAxis(),de=this.getYAxis(),ge=pe.getCurrentMin(),ue=de.getCurrentMin(),he=pe.getCurrentMax(),ce=de.getCurrentMax(),_e=0,Se=1,Pe=!1,Ce=!1,U,K,J,$,ee,te,J,se,ne,oe,le;for(this.eraseLines(),this.isFlipped()&&(_e=1,Se=0),Z=0;Z<Q;Z++){for(U=!1,this.counter1=Z,this.currentLine='',K=0,J=0,$=G[Z].length,K=0;K<$;K+=2){if(ee=G[Z][K+_e],te=G[Z][K+Se],ee<ge&&re<ge||ee>he&&re>he||(te<ue&&ae<ue||te>ce&&ae>ce)&&!this.options.lineToZero){re=ee,ae=te,Ce=!0;continue}if(this.counter2=K/2,this.markersShown()&&this.getMarkerCurrentFamily(this.counter2),oe=this.getX(ee),le=this.getY(te),oe!=se||le!=ne){if(Pe=ee<ge||te<ue||ee>he||te>ce,isNaN(oe)||isNaN(le)){0<this.counter;continue}if(this._optimize_before(oe,le)){var Le=this.colors[Z][K/2];if(this._addPoint(oe,le,ee,te,se,ne,re,ae,K,Le,!1,!0),this.detectPeaks(ee,te),!this._optimize_after(oe,le)){U=!0;break}se=oe,ne=le,re=ee,ae=te}}}if(U)break}if(this.latchLines(),this._tracker){this._trackerDom&&this._trackerDom.remove();var we=this.groupLines.cloneNode(!0);this.groupMain.appendChild(we);for(var Z=0,Q=we.children.length;Z<Q;Z++)we.children[Z].setAttribute('stroke','transparent'),we.children[Z].setAttribute('stroke-width','25px'),we.children[Z].setAttribute('pointer-events','stroke');R._trackerDom=we,R.groupMain.addEventListener('mousemove',function(Te){var Ee=R.graph._getXY(Te),De=R.handleMouseMove(!1,!1);R._trackingCallback(R,De,Ee.x,Ee.y)}),R.groupMain.addEventListener('mouseleave',function(){R._trackingOutCallback(R)})}return this}_addPoint(R,G,U,Z,Q,K,J,$,ee,te){if(void 0!==Q&&void 0!==K&&!(isNaN(R)||isNaN(G))){var ae=this.lines[te];ae||(ae=this.lines[te]={object:document.createElementNS(this.graph.ns,'path'),path:'',color:te},ae.object.setAttribute('stroke',te),ae.color=te,this.groupLines.appendChild(ae.object)),ae.path+='M '+Q+' '+K+' L '+R+' '+G,this.error&&this.errorAddPoint(ee,U,Z,R,G)}}removeExtraLines(){}latchLines(){for(var R in this.lines)this.lines[R].object.setAttribute('d',this.lines[R].path)}eraseLines(){for(var R in this.lines)this.lines[R].path='',this.lines[R].object.setAttribute('d','')}applyLineStyle(R){R.setAttribute('stroke-width',this.getLineWidth()),this.getLineDashArray()?R.setAttribute('stroke-dasharray',this.getLineDashArray()):R.removeAttribute('stroke-dasharray'),R.setAttribute('fill','none')}}E.default=W})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(12),S(3),S(14)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(void 0!==T&&(u.exports=T))})(this,function(E,Y,X,I){'use strict';function F(U){return U&&U.__esModule?U:{default:U}}Object.defineProperty(E,'__esModule',{value:!0});var O=F(Y),V=function(U){if(U&&U.__esModule)return U;var Z={};if(null!=U)for(var Q in U)Object.prototype.hasOwnProperty.call(U,Q)&&(Z[Q]=U[Q]);return Z.default=U,Z}(X),B=F(I);const W={};class G extends O.default{constructor(){super(...arguments)}init(U,Z,Q){var K=this;this.graph=U,this.name=Z,this.id=Math.random()+Date.now(),this.shapes=[],this.shown=!0,this.options=V.extend(!0,{},W,Q),this.data=[],this.shapesDetails=[],this.shapes=[],this._type='scatter',V.mapEventEmission(this.options,this),this._isMinOrMax={x:{min:!1,max:!1},y:{min:!1,max:!1}},this.groupPoints=document.createElementNS(this.graph.ns,'g'),this.groupMain=document.createElementNS(this.graph.ns,'g'),this.additionalData={},this.selectedStyleGeneral={},this.selectedStyleModifiers={},this.groupPoints.addEventListener('mouseover',function(J){var $=parseInt(J.target.parentElement.getAttribute('data-shapeid'));K.emit('mouseover',$,K.data[2*$],K.data[2*$+1])}),this.groupPoints.addEventListener('mouseout',function(J){var $=parseInt(J.target.parentElement.getAttribute('data-shapeid'));K.emit('mouseout',$,K.data[2*$],K.data[2*$+1])}),this.minX=Number.MAX_VALUE,this.minY=Number.MAX_VALUE,this.maxX=Number.MIN_VALUE,this.maxY=Number.MIN_VALUE,this.groupMain.appendChild(this.groupPoints),this.currentAction=!1,this.initExtended1&&this.initExtended1(),this.styles={},this.styles.unselected={},this.styles.selected={},this.styles.unselected.default={shape:'circle',cx:0,cy:0,r:3,stroke:'transparent',fill:'black'},this.styles.selected.default={shape:'circle',cx:0,cy:0,r:4,stroke:'transparent',fill:'black'}}setData(U,Z,Q){var K=0,Z=Z||'2D',Q=Q||'float',te=0,ee;if(this.empty(),this.shapesDetails=[],this.shapes=[],!U instanceof Array)return this;U instanceof Array&&!(U[0]instanceof Array)&&'object'!=typeof U[0]&&(Z='1D');var re='2D'==Z;ee=this._addData(Q,re?2*U.length:U.length),K=0;for(var ae=0,se=U.length;ae<se;ae++)re?(ee[K]=U[ae][0],this._checkX(ee[K]),K++,ee[K]=U[ae][1],this._checkY(ee[K]),K++,te++):(ee[K]=U[ae],this[0==ae%2?'_checkX':'_checkY'](ee[K]),K++,te+=ae%2?1:0);return this.dataHasChanged(),this.graph.updateDataMinMaxAxes(),this.data=ee,this}setDataCategory(U){for(var Z in U)if(Array.isArray(U[Z].y))for(let Q of U[Z].y)this._checkY(Q);return this.dataHasChanged(),this.graph.updateDataMinMaxAxes(),this.data=U,this}empty(){for(;this.groupPoints.firstChild;)this.groupPoints.removeChild(this.groupPoints.firstChild)}getSymbolForLegend(){if(this.symbol)return this.symbol;var U=document.createElementNS(this.graph.ns,'g');U.setAttribute('data-shapeid',-1);var Z=this.doShape(U,this.styles.unselected.default),Q=this.getStyle('unselected',-1,!0);for(var K in Q[-1])'shape'!=K&&Z.setAttribute(K,Q[-1][K]);return U}setStyle(U,Z,Q){return'string'==typeof Z&&(Q=Z,Z=!1),void 0===Q&&(Q='unselected'),this.styles[Q]=this.styles[Q]||{},this.styles[Q].all=U,this.styles[Q].modifiers=Z,this.styleHasChanged(Q),this}draw(U){if(U||this.hasDataChanged()||this.hasStyleChanged('unselected')){var $=0,ae=this,se='category'==this.getXAxis().getType(),K,J,ee,te;this._drawn=!0,this.dataHasChanged(!1),this.styleHasChanged(!1),this.groupMain.removeChild(this.groupPoints);var ne=0,oe=1;this.getFlip()&&(ne=1,oe=0);var le=this.data.length/2,pe=[];if($=0,ee=0,te=this.data.length,this.error&&this.errorDrawInit(),se){for(let de=0;$<te;$+=1)if(this.categoryIndices.hasOwnProperty(this.data[$].x)){let ge=this.data[$].y,ue=ge.length,he=0;this.error;for(let ce of this.data[$].y){let xe=he/(ue-1)*(0.8/this.nbCategories)+this.categoryIndices[this.data[$].x]+0.1/this.nbCategories;J=this.getY(ce),K=this.getX(xe),he++,this.shapesDetails[de]=this.shapesDetails[de]||[],this.shapesDetails[de][0]=K,this.shapesDetails[de][1]=J,pe.push(de),de++}}}else for(;$<te;$+=2)this.data[$+ne]<this.getXAxis().getCurrentMin()||this.data[$+ne]>this.getXAxis().getCurrentMax()||this.data[$+oe]<this.getYAxis().getCurrentMin()||this.data[$+oe]>this.getYAxis().getCurrentMax()||(K=this.getX(this.data[$+ne]),J=this.getY(this.data[$+oe]),this.error&&this.errorAddPoint($,this.data[$+ne],this.data[$+oe],K,J),this.shapesDetails[$/2]=this.shapesDetails[$/2]||[],this.shapesDetails[$/2][0]=K,this.shapesDetails[$/2][1]=J,pe.push($/2));this.error&&this.errorDraw(),this.applyStyle('unselected',pe),this.groupMain.appendChild(this.groupPoints)}}_addPoint(U,Z,Q){var K=document.createElementNS(this.graph.ns,'g');K.setAttribute('transform','translate('+U+', '+Z+')'),K.setAttribute('data-shapeid',Q),shape=this.extraStyle&&this.extraStyle[Q]?this.doShape(K,this.extraStyle[Q]):this.stdStylePerso?this.doShape(K,this.stdStylePerso):this.doShape(K,this.stdStyle),this.shapes[Q]=shape,this.groupPoints.appendChild(K)}doShape(U,Z){var Q=document.createElementNS(this.graph.ns,Z.shape);return U.appendChild(Q),Q}getStyle(U,Z,Q){var U=U||'unselected',K,J={};'number'==typeof Z?K=[Z]:Array.isArray(Z)&&(K=Z);var $,Z,ee,te,re;this.styles[U].all!==void 0&&(re=this.styles[U].all,'function'==typeof re?re=re():!1===re&&(re={}));for(var ae=0,se=K.length;ae<se;ae++){if(Z=K[ae],$=this.shapes[Z],(ee=this.styles[U].modifiers)&&('function'==typeof ee||ee[Z])){'function'==typeof ee?te=ee(Z,$):ee[Z]&&(te=ee[Z]);var ne=V.extend({},re,te);te=V.extend(te,ne)}else te=void 0==re?this.styles[U].default:re;if(!$){var oe=document.createElementNS(this.graph.ns,'g');oe.setAttribute('data-shapeid',Z),this.shapes[Z]=this.doShape(oe,te),this.groupPoints.appendChild(oe),$=this.shapes[Z]}Q||$.parentNode.setAttribute('transform','translate('+this.shapesDetails[Z][0]+', '+this.shapesDetails[Z][1]+')'),J[Z]=te}return J}applyStyle(U,Z,Q){var K,J,$=this.getStyle(U,Z,Q);for(K in $)for(J in $[K])'shape'!==J&&($[K][J]?this.shapes[K].setAttribute(J,$[K][J]):this.shapes[K].removeAttribute(J))}unselectPoint(U){this.selectPoint(U,!1)}selectPoint(U,Z,Q){if(!(this.shapesDetails[U][2]&&this.shapesDetails[U][2]==Q)){if('string'==typeof Z&&(Q=Z,Z=void 0),Array.isArray(U))return this.selectPoints(U);if(this.shapes[U]&&this.shapesDetails[U])if((this.shapesDetails[U][2]||!1===Z)&&!0!==Z){var K=this.shapesDetails[U][2];this.shapesDetails[U][2]=!1;var J=this.getStyle(K,U,!0);for(var $ in J[U])this.shapes[U].removeAttribute($);this.applyStyle('unselected',U,!0)}else Q=Q||'selected',this.shapesDetails[U][2]=Q,this.applyStyle(Q,U,!0)}}getUsedCategories(){return'object'==typeof this.data[0]?this.data.map(U=>U.x):[]}}V.mix(G,B.default),E.default=G})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(12),S(3)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(void 0!==T&&(u.exports=T))})(this,function(E,Y,X){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var N=function(V){return V&&V.__esModule?V:{default:V}}(Y);const F={fillColor:'rgba( 0, 0, 0, 0.1 )',lineColor:'rgba( 0, 0, 0, 1 )',lineWidth:'1px'};class O extends N.default{constructor(){super(...arguments)}init(V,B,W){this;this.graph=V,this.name=B,this.selectionType='unselected',this.id=Math.random()+Date.now(),this.shown=!0,this.options=(0,X.extend)(!0,{},F,W),this.data=[],this.groupZones=document.createElementNS(this.graph.ns,'g'),this.groupMain=document.createElementNS(this.graph.ns,'g'),this.lineZone=document.createElementNS(this.graph.ns,'path'),this.lineZone.setAttribute('stroke','black'),this.lineZone.setAttribute('stroke-width','1px'),this.additionalData={},this.minX=Number.MAX_VALUE,this.minY=Number.MAX_VALUE,this.maxX=Number.MIN_VALUE,this.maxY=Number.MIN_VALUE,this.groupMain.appendChild(this.groupZones),this.groupZones.appendChild(this.lineZone),this.currentAction=!1,this.applyLineStyle(this.lineZone),this.styleHasChanged(),this.clip=document.createElementNS(this.graph.ns,'clipPath'),this.clipId=(0,X.guid)(),this.clip.setAttribute('id',this.clipId),this.graph.defs.appendChild(this.clip),this.clipRect=document.createElementNS(this.graph.ns,'rect'),this.clip.appendChild(this.clipRect),this.clip.setAttribute('clipPathUnits','userSpaceOnUse'),this.groupMain.setAttribute('clip-path','url(#'+this.clipId+')')}setData(V,B,W){var R=0,B=B||'2D',W=W||'float',Q=0,Z;if(this.data=[],this.dataHasChanged(),!(!V instanceof Array)){var J;V instanceof Array&&!(V[0]instanceof Array)?(B='1D',J=1.5*V.length,!(V[1]instanceof Array)&&(B='1D_flat',J=1*V.length)):V instanceof Array&&!(V[0][1]instanceof Array)?(B='2D_flat',J=3*V.length):(B='2D',J=3*V.length),Z=this._addData(W,J),R=0;for(var $=0,ee=V.length;$<ee;$++)if('2D'==B||'2D_flat'==B)Z[R]=V[$][0],this._checkX(Z[R]),R++,'2D'==B?(Z[R]=V[$][1][0],this._checkY(Z[R]),R++,Q++,Z[R]=V[$][1][1],this._checkY(Z[R]),R++,Q++):(Z[R]=V[$][1],this._checkY(Z[R]),R++,Q++,Z[R]=V[$][2],this._checkY(Z[R]),R++,Q++);else if('1D_flat'==B){if(0==$%3){Z[R]=V[$],this._checkX(Z[R]),R++,Q++;continue}Z[R]=V[$],this._checkY(Z[R]),R++,Q++}else{if(0==$%2){Z[R]=V[$],this._checkX(Z[R]),R++,Q++;continue}Z[R]=V[$][0],this_checkY(Z[R]),R++,Q++,Z[R]=V[$][1],this_checkY(Z[R]),R++,Q++}return this.graph.updateDataMinMaxAxes(),this.data=Z,this.dataHasChanged(),this}}_addData(V,B){switch(V){case'int':var W=4*B;break;case'float':var W=8*B;}var R=new ArrayBuffer(W);switch(V){case'int':return new Int32Array(R);break;default:case'float':return new Float64Array(R);}}empty(){for(;this.group.firstChild;)this.group.removeChild(this.group.firstChild)}draw(V){if(V||this.hasDataChanged()){var Z=0,ee=this,R,G,U,Q,K,te=this.getXAxis().getMinPx(),ie=this.getXAxis().getMaxPx(),re=this.getYAxis().getMinPx(),ae=this.getYAxis().getMaxPx();this.clipRect.setAttribute('x',Math.min(te,ie)),this.clipRect.setAttribute('y',Math.min(re,ae)),this.clipRect.setAttribute('width',Math.abs(ie-te)),this.clipRect.setAttribute('height',Math.abs(ae-re)),this._drawn=!0,this.groupMain.removeChild(this.groupZones);this.data.length/2;Z=0,Q=0,K=this.data.length;for(var oe='',le='',pe;Z<K;Z+=3){if(R=this.getX(this.data[Z]),G=this.getY(this.data[Z+1]),U=this.getY(this.data[Z+2]),0>R){pe=[R,G,U];continue}if(pe&&(''!=le&&(le=' L '+le),oe+=pe[0]+','+Math.max(pe[1],pe[2])+' L ',le=R+','+Math.min(pe[1],pe[2])+le,pe=!1,Q++),''!=le&&(le=' L '+le),U>G?(oe+=R+','+G+' L ',le=R+','+U+le):(oe+=R+','+U+' L ',le=R+','+G+le),R>this.getXAxis().getMaxPx())break}0<oe.length&&0<le.length?this.lineZone.setAttribute('d','M '+oe+le+' z'):this.lineZone.setAttribute('d',''),this.groupMain.appendChild(this.groupZones)}this.hasStyleChanged(this.selectionType)&&(this.applyLineStyle(this.lineZone),this.styleHasChanged(!1))}applyLineStyle(V){V.setAttribute('stroke',this.getLineColor()),V.setAttribute('stroke-width',this.getLineWidth()),V.setAttribute('fill',this.getFillColor()),V.setAttribute('fill-opacity',this.getFillOpacity()),V.setAttribute('stroke-opacity',this.getLineOpacity())}setLineWidth(V){return this.options.lineWidth=V,this.styleHasChanged(),this}getLineWidth(){return this.options.lineWidth}setLineOpacity(V){return this.options.lineOpacity=V,this.styleHasChanged(),this}getLineOpacity(){return this.options.lineOpacity}setLineColor(V){return this.options.lineColor=V,this.styleHasChanged(),this}getLineColor(){return this.options.lineColor}setFillOpacity(V){return this.options.fillOpacity=V,this.styleHasChanged(),this}getFillOpacity(){return this.options.fillOpacity}setFillColor(V){return this.options.fillColor=V,this.styleHasChanged(),this}getFillColor(){return this.options.fillColor}getMax(V,B){var W=Math.min(V,B),R=Math.max(V,B),G=this.searchClosestValue(W),U=this.searchClosestValue(R),K=-(1/0),Z,Q,J,$;if(G||(W=this.minX,G=this.searchClosestValue(W)),U||(R=this.maxX,U=this.searchClosestValue(R)),!G||!U)return-(1/0);for(Z=G.dataIndex;Z<=U.dataIndex;Z++)for(J=Z==G.dataIndex?G.xBeforeIndexArr:0,$=Z==U.dataIndex?U.xBeforeIndexArr:this.data[Z].length,Q=J;Q<=$;Q+=3)K=Math.max(K,this.data[Z][Q+1],this.data[Z][Q+2]);return K}getMin(V,B){var W=Math.min(V,B),R=Math.max(V,B),G=this.searchClosestValue(W),U=this.searchClosestValue(R),K=1/0,Z,Q,J,$;if(G||(W=this.minX,G=this.searchClosestValue(W)),U||(R=this.maxX,U=this.searchClosestValue(R)),!G||!U)return 1/0;for(Z=G.dataIndex;Z<=U.dataIndex;Z++)for(J=Z==G.dataIndex?G.xBeforeIndexArr:0,$=Z==U.dataIndex?U.xBeforeIndexArr:this.data[Z].length,Q=J;Q<=$;Q+=3)K=Math.min(K,this.data[Z][Q+1],this.data[Z][Q+2]);return K}searchClosestValue(V){for(var W=0,B;W<this.data.length;W++){if(V<=this.data[W][this.data[W].length-3]&&V>=this.data[W][0])B=this._searchBinary(V,this.data[W],!1);else if(V>=this.data[W][this.data[W].length-3]&&V<=this.data[W][0])B=this._searchBinary(V,this.data[W],!0);else continue;return{dataIndex:W,xMin:this.data[W][B],xMax:this.data[W][B+3],yMin:this.data[W][B+1],yMax:this.data[W][B+4],xBeforeIndex:B/3,xAfterIndex:B/3+1,xBeforeIndexArr:B,xClosest:(Math.abs(this.data[W][B+3]-V)<Math.abs(this.data[W][B]-V)?B+3:B)/2}}}_searchBinary(V,B,W){var R=0,G=B.length,U=G-3;if(B[R]==V)return R;if(B[U]==V)return U;for(var Q=0,Z;;){if(Q++,100<Q)throw'Error loop';if(Z=(R+U)/3,Z-=Z%3,Z==R||B[Z]==V)return Z;B[Z]<=V?W?U=Z:R=Z:B[Z]>V&&(W?R=Z:U=Z)}}}E.default=O})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(12),S(3)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(void 0!==T&&(u.exports=T))})(this,function(E,Y,X){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var F=function(W){return W&&W.__esModule?W:{default:W}}(Y),O=function(W){if(W&&W.__esModule)return W;var R={};if(null!=W)for(var G in W)Object.prototype.hasOwnProperty.call(W,G)&&(R[G]=W[G]);return R.default=W,R}(X);const V={};class B extends F.default{init(W,R,G){this.options=O.extend(!0,{},V,G||{}),O.mapEventEmission(this.options,this),this.graph=W,this.groupMain=document.createElementNS(this.graph.ns,'g'),this.rects=[],this.paths=[],this.recalculateBinsOnDraw=!1}setData(W){this.minX=this.maxX=this.minY=this.maxY=0;var R=0,G=W.length;for(this.data=W,this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY,R=0;R<G;R++)this._checkX(W[R][0]),this._checkY(W[R][1]);return this.dataHasChanged(),this.graph.updateDataMinMaxAxes(),this}calculateDensity(W,R,G,U,Z,Q){var K=[],$=this.data.length,ie=Number.POSITIVE_INFINITY,re=Number.NEGATIVE_INFINITY,J,ee,te;for(J=0;J<$;J++)(ee=~~((this.data[J][0]-W)/R),te=~~((this.data[J][1]-U)/Z),!(ee>G||te>Q||0>ee||0>te))&&(K[ee]=K[ee]||[],K[ee][te]=K[ee][te]+1||1,ie=K[ee][te]<ie?K[ee][te]:ie,re=K[ee][te]>re?K[ee][te]:re);return this.maxIndexX=G,this.maxIndexY=Q,this.binMin=ie,this.binMax=re,this.deltaX=R,this.deltaY=Z,this.fromX=W,this.fromY=U,this.numX=G,this.numY=Q,this.densitymap=K,K}calculateDensityWeighted(W,R,G,U,Z,Q){var K=[],$=this.data.length,ie=Number.POSITIVE_INFINITY,re=Number.NEGATIVE_INFINITY,J,ee,te,ae,se,ne,oe,le,pe,de,ge;for(J=0;J<$;J++)(ne=(this.data[J][0]-W)/R-0.5,oe=(this.data[J][1]-U)/Z-0.5,ee=Math.floor(ne),te=Math.floor(oe),le=ee,de=te,pe=ee+1,ge=te+1,ae=1-(ne-ee),se=1-(oe-te),!(ee>G||te>Q||0>ee||0>te))&&(K[le]=K[le]||[],K[pe]=K[pe]||[],K[le][de]=K[le][de]||0,K[pe][de]=K[pe][de]||0,K[le][ge]=K[le][ge]||0,K[pe][ge]=K[pe][ge]||0,K[le][de]+=ae*se,K[pe][de]+=(1-ae)*se,K[le][ge]+=ae*(1-se),K[pe][ge]+=(1-ae)*(1-se),ie=K[le][de]<ie?K[le][de]:ie,re=K[le][de]>re?K[le][de]:re,ie=K[pe][de]<ie?K[pe][de]:ie,re=K[pe][de]>re?K[pe][de]:re,ie=K[le][ge]<ie?K[le][ge]:ie,re=K[le][ge]>re?K[le][ge]:re,ie=K[pe][ge]<ie?K[pe][ge]:ie,re=K[pe][ge]>re?K[pe][ge]:re);return this.maxIndexX=G,this.maxIndexY=Q,this.binMin=ie,this.binMax=re,this.deltaX=R,this.deltaY=Z,this.fromX=W,this.fromY=U,this.numX=G,this.numY=Q,this.densitymap=K,K}autoBins(W,R){return this.numX=W||400,this.numY=R||this.numX,this.calculateDensity(this.minX,(this.maxX-this.minX)/W,W,this.minY,(this.maxY-this.minY)/R,R),this.recalculateBinsOnDraw=!1,this}setPxPerBin(W,R,G){return W&&this.calculationDensityMap({from:'min',to:'max',pxPerBin:W,weighted:G}),R&&this.calculationDensityMap(!1,{from:'min',to:'max',pxPerBin:R,weighted:G}),this}setBinsFromTo(W,R,G,U){return this.densityMapCalculation=this.densityMapCalculation||{},this.densityMapCalculation[W]={from:R,to:G,numBins:U},this.calculationDensityMap(),this}calculationDensityMap(W,R){this.method=this.calculateDensityAdvanced,this.densityMapCalculation=this.densityMapCalculation||{},W&&(this.densityMapCalculation.x=W),R&&(this.densityMapCalculation.y=R)}calculateDensityAdvanced(){var W={x:{from:0,num:0,delta:0,weighing:!1},y:{from:0,num:0,delta:0,weighing:!1}},R={x:this.graph.drawingSpaceWidth,y:this.graph.drawingSpaceHeight},G={x:this.getXAxis,y:this.getYAxis},U=!1;for(var Z in this.densityMapCalculation)if(this.densityMapCalculation[Z].weighted&&(U=!0,W[Z].weighing=!0),this.densityMapCalculation[Z].pxPerBin){var Q='min'==this.densityMapCalculation[Z].from?G[Z].call(this).getCurrentMin():this.densityMapCalculation[Z].from,K='max'==this.densityMapCalculation[Z].to?G[Z].call(this).getCurrentMax():this.densityMapCalculation[Z].to,J=Math.abs(G[Z].call(this).getRelPx(K-Q));W[Z].num=Math.ceil(R[Z]/this.densityMapCalculation[Z].pxPerBin),W[Z].from=Q-Math.abs(G[Z].call(this).getRelVal((W[Z].num*this.densityMapCalculation[Z].pxPerBin-J)/2)),W[Z].delta=Math.abs(G[Z].call(this).getRelVal(this.densityMapCalculation[Z].pxPerBin))}else W[Z].num=this.densityMapCalculation[Z].numBins||400,W[Z].from='min'==this.densityMapCalculation[Z].from?G[Z].call(this).getCurrentMin():this.densityMapCalculation[Z].from,W[Z].delta=this.densityMapCalculation[Z].to?(('max'==this.densityMapCalculation[Z].to?G[Z].call(this).getCurrentMax():this.densityMapCalculation[Z].to)-W[Z].from)/W[Z].num:this.densityMapCalculate[Z].delta;(U?this.calculateDensityWeighted:this.calculateDensity).call(this,W.x.from,W.x.delta,W.x.num,W.y.from,W.y.delta,W.y.num)}setColorMapBinBoundaries(W,R){return this.colorMapMin=W,this.colorMapMax=R,this}autoColorMapBinBoundaries(){return this.colorMapMin=this.binMin,this.colorMapMax=this.binMax,this}onRedrawColorMapBinBoundaries(W){return this.callbackColorMapMinMax=W,this}colorMapHSL(W,R,G){G=G||'linear';for(var U={exp:function(ae){return(Math.exp(1*(ae/R))-Math.exp(0))/(Math.exp(1)-Math.exp(0))},log:function(ae){return(Math.log(ae+1)-Math.log(1))/(Math.log(R+1)-Math.log(1))},linear:function(ae){return(ae-0)/(R-0)}},Z=0,Q=[],K=[],J={h:null,s:null,l:null,a:null},te=W.length-1,ie=0,$,ee;ie<=R;ie++){for(var re in $=U[G](ie),ee=Math.floor($*te),ee==W.length-1&&(ee=te-1),$=($-ee/te)/(1/te),J)J[re]=(W[ee+1][re]-W[ee][re])*$+W[ee][re];Q[Z]='hsl('+J.h+', '+Math.round(100*J.s)+'%, '+Math.round(100*J.l)+'%)',K[Z]=J.a,Z++}return this.opacities=K,this.colorMap=Q,this.colorMapNum=R,this}autoColorMapHSL(W,R){return this.colorMapHSV(W,100,R||'linear'),this}getColorIndex(W){return Math.max(0,Math.min(this.colorMapNum,Math.floor((W-this.colorMapMin)/(this.colorMapMax-this.colorMapMin)*this.colorMapNum)))}draw(){var W;if(this.method&&this.method(),!this.callbackColorMapMinMax||void 0==this.colorMapMin||void 0==this.colorMapMax||'auto'==this.callbackColorMapMinMax)this.autoColorMapBinBoundaries();else{var R=this.callbackColorMapMinMax(this.binMin,this.binMax);this.setColorMapBinBoundaries(R[0],R[1])}for(var G=this.getXAxis().getRelPx(this.deltaX),U=this.getYAxis().getRelPx(this.deltaY),Z=0;Z<this.paths.length;Z++)this.paths[Z]='';for(var Z=0;Z<this.maxIndexX;Z++)for(var Q=0;Q<this.maxIndexY;Q++)void 0!=this.densitymap[Z]&&void 0!=this.densitymap[Z][Q]&&(W=this.getColorIndex(this.densitymap[Z][Q]),this.paths[W]||(this.paths[W]=''),this.paths[W]+=' M '+this.getXAxis().getPx(Z*this.deltaX+this.fromX)+' '+this.getYAxis().getPx(Q*this.deltaY+this.fromY)+' h '+G+' v '+U+' h -'+G+' z');this.drawRects()}drawRects(){for(var W=0;W<this.paths.length;W++)this.rects[W]||(this.rects[W]=document.createElementNS(this.graph.ns,'path'),this.rects[W].setAttribute('shape-rendering','crispEdges')),void 0!==this.paths[W]&&(this.rects[W].setAttribute('d',this.paths[W]),this.rects[W].setAttribute('fill',this.colorMap[W]),this.rects[W].setAttribute('fill-opacity',this.opacities[W])),this.groupMain.appendChild(this.rects[W])}setOptions(W){return this.options=O.extend(!0,{},V,W||{}),this}}E.default=B})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(11),S(3)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(void 0!==T&&(u.exports=T))})(this,function(E,Y,X){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var F=function(B){return B&&B.__esModule?B:{default:B}}(Y),O=function(B){if(B&&B.__esModule)return B;var W={};if(null!=B)for(var R in B)Object.prototype.hasOwnProperty.call(B,R)&&(W[R]=B[R]);return W.default=B,W}(X);class V extends F.default{constructor(){super(...arguments),this.negativeDelta=0,this.positiveDelta=0,this.negativeThreshold=0,this.positiveThreshold=0}setData(B,W,R){var W=W||'2D',R=R||'float',K=B.length,te=[],Q,J,$,ee;for(B instanceof Array||'object'!=typeof B||(this.minX=B.minX,this.minY=B.minY,this.maxX=B.maxX,this.maxY=B.maxY,B=B.segments,K=B.length),Q=0;Q<K;Q++){for($=B[Q].lines.length,ee=this._addData(R,$),J=0;J<$;J+=2)ee[J]=B[Q].lines[J],this._checkX(ee[J]),ee[J+1]=B[Q].lines[J+1],this._checkY(ee[J+1]);te.push({lines:ee,zValue:B[Q].zValue})}return this.data=te,this.graph.updateDataMinMaxAxes(),this.dataHasChanged(!0),this}draw(B){if(B||this.hasDataChanged()){this.currentLine=0;var K=0,J=this.data.length,$=0,G,U,Z,Q,ee,te,re,ae;this.minZ=1/0,this.maxZ=-(1/0);var se=this.groupLines.nextSibling;this.groupMain.removeChild(this.groupLines),this.zValues={};var ne=0,oe=1;this.getFlip()&&(ne=0,oe=1);var le=this.getYAxis().getCurrentMin(),pe=this.getXAxis().getCurrentMin(),de=this.getXAxis().getCurrentMax(),ge=this.getYAxis().getCurrentMax();for(this.counter=0,this.currentLineId=0;K<J;K++){for(this.currentLine='',$=0,ee=0,(ae=this.data[K].lines,te=ae.length);$<te;$+=4){var ue,he;ae[$+ne]<pe&&ae[$+2+ne]<pe||ae[$+oe]<le&&ae[$+2+oe]<le||ae[$+oe]>ge&&ae[$+2+oe]>ge||ae[$+ne]>de&&ae[$+2+ne]>de||(Z=this.getX(ae[$+ne]),Q=this.getY(ae[$+oe]),G=this.getX(ae[$+2+ne]),U=this.getY(ae[$+2+oe]),G!=Z||U!=Q)&&(this.currentLine+='M ',this.currentLine+=Z,this.currentLine+=' ',this.currentLine+=Q,this.currentLine+='L ',this.currentLine+=G,this.currentLine+=' ',this.currentLine+=U,this.counter++,ue=G,he=U,ee++)}this.currentLine+=' z',re=this._createLine(),re.setAttribute('data-zvalue',this.data[K].zValue),this.zValues[this.data[K].zValue]={dom:re},this.minZ=Math.min(this.minZ,this.data[K].zValue),this.maxZ=Math.max(this.maxZ,this.data[K].zValue)}for(K++,K=this.currentLine+1;K<this.lines.length;K++)this.groupLines.removeChild(this.lines[K]),this.lines.splice(K,1);for(K=0;K<J;K++)this.setColorTo(this.lines[K],this.data[K].zValue,this.minZ,this.maxZ);this.onMouseWheel(0,{shiftKey:!1}),this.groupMain.insertBefore(this.groupLines,se)}else if(this.hasStyleChanged(this.selectionType))for(;K<J;K++)this.setColorTo(this.lines[K],this.data[K].zValue,this.minZ,this.maxZ)}onMouseWheel(B,W,R,G){for(var U in B/=250,void 0===R?W.shiftKey&&this.options.hasNegative?(this.negativeDelta=Math.min(0,Math.max(-1,this.negativeDelta+Math.min(0.1,Math.max(-0.1,B)))),this.negativeThreshold=-this.minZ*Math.pow(this.negativeDelta,3)):(this.positiveDelta=Math.min(1,Math.max(0,this.positiveDelta+Math.min(0.1,Math.max(-0.1,B)))),this.positiveThreshold=this.maxZ*Math.pow(this.positiveDelta,3)):(!G&&(this.negativeThreshold=-R*this.minZ,this.negativeDelta=-Math.pow(Math.abs(this.negativeThreshold/-this.minZ),1/3)),G&&(this.positiveThreshold=R*this.maxZ,this.positiveDelta=Math.pow(this.positiveThreshold/this.maxZ,1/3))),isNaN(this.positiveDelta)&&(this.positiveDelta=0),isNaN(this.negativeDelta)&&(this.negativeDelta=0),this.zValues)this.zValues[U].dom.setAttribute('display',0<=U&&U>=this.positiveThreshold||0>=U&&U<=this.negativeThreshold?'block':'none');this._shapeZoom&&(this.options.hasNegative?(this._shapeZoom.setHandleNeg(-Math.pow(this.negativeDelta,3),this.minZ),this._shapeZoom.showHandleNeg()):this._shapeZoom.hideHandleNeg(),this._shapeZoom.setHandlePos(Math.pow(this.positiveDelta,3),this.maxZ))}setDynamicColor(B){this.lineColors=B,this.styleHasChanged()}setNegative(B){this.options.hasNegative=B,B&&(this.negativeThreshold=0)}setColorTo(B,W,R,G){if(this.lineColors){var U={h:0,s:0,l:0};for(var Z in U)U[Z]=0<W?this.lineColors.fromPositive[Z]+(this.lineColors.toPositive[Z]-this.lineColors.fromPositive[Z])*(W/G):this.lineColors.fromNegative[Z]+(this.lineColors.toNegative[Z]-this.lineColors.fromNegative[Z])*(W/R);U.h/=360;var Q=O.hslToRgb(U.h,U.s,U.l);B.setAttribute('stroke','rgb('+Q.join()+')')}}getSymbolForLegend(){if(!this.lineForLegend){var B=document.createElementNS(this.graph.ns,'ellipse');B.setAttribute('cx',7),B.setAttribute('cy',0),B.setAttribute('rx',8),B.setAttribute('ry',3),B.setAttribute('cursor','pointer'),this.lineForLegend=B}return this.applyLineStyle(this.lineForLegend,this.maxZ),this.lineForLegend}applyLineStyle(B,W){B.setAttribute('stroke',this.getLineColor()),B.setAttribute('stroke-width',this.getLineWidth()+(this.isSelected()?2:0)),this.getLineDashArray()&&B.setAttribute('stroke-dasharray',this.getLineDashArray()),B.setAttribute('fill','none'),this.setColorTo(B,W===void 0?B.getAttribute('data-zvalue'):W,this.minZ,this.maxZ),this.hasStyleChanged(!1)}setShapeZoom(B){this._shapeZoom=B}}E.default=V})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(2),S(3),S(4)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(void 0!==T&&(u.exports=T))})(this,function(E,Y,X,I){'use strict';function F(R){return R&&R.__esModule?R:{default:R}}Object.defineProperty(E,'__esModule',{value:!0});var O=F(Y),V=function(R){if(R&&R.__esModule)return R;var G={};if(null!=R)for(var U in R)Object.prototype.hasOwnProperty.call(R,U)&&(G[U]=R[U]);return G.default=R,G}(X),B=F(I);class W extends B.default{constructor(){super()}init(R,G){var U=this;if(this.graph=R,this.properties=G||{},this.handles=[],this.options=this.options||{},this.group=document.createElementNS(this.graph.ns,'g'),this._selected=!1,this.createDom(),this._dom&&(this._dom.jsGraphIsShape=this),this.group.jsGraphIsShape=this,this.classes=[],this.transforms=[],this._data.masker){var Z=document.createElementNS(this.graph.ns,'mask');this.maskingId=Math.random(),Z.setAttribute('id',this.maskingId),this.maskDomWrapper=document.createElementNS(this.graph.ns,'rect'),this.maskDomWrapper.setAttribute('fill','white'),Z.appendChild(this.maskDomWrapper);var Q=this._dom.cloneNode();Z.appendChild(Q),this.maskDom=Q,this.graph.defs.appendChild(Z)}return this.group&&(this._dom&&this.group.appendChild(this._dom),this.group.addEventListener('mouseover',function(K){U.handleMouseOver(K)}),this.group.addEventListener('mouseout',function(K){U.handleMouseOut(K)}),this.group.addEventListener('mousedown',function(K){U.graph.focus(),U.handleMouseDown(K)}),this.group.addEventListener('click',function(K){U.handleClick(K)}),this.group.addEventListener('dblclick',function(K){U.handleDblClick(K)})),this.initImpl(),this.graph.emit('shapeNew',this),this}initImpl(){}getData(){return this._data}getType(){return this.type}kill(R){this.graph.removeShapeFromDom(this),R||this.graph._removeShape(this),this.graph.stopElementMoving(this),this.graph.emit('shapeRemoved',this),this._inDom=!1}hide(){if(!this.hidden)return this.hidden=!0,this.group.style.display='none',this}show(){if(this.hidden)return this.hidden=!1,this.group.style.display='block',this.redraw(),this}addClass(R){return this.classes=this.classes||[],-1==this.classes.indexOf(R)&&this.classes.push(R),this.makeClasses(),this}removeClass(R){return this.classes.splice(this.classes.indexOf(R),1),this.makeClasses(),this}makeClasses(){return this._dom&&this._dom.setAttribute('class',this.classes.join(' ')),this}changed(R){return R&&this.graph.emit(R,this),this.graph.emit('shapeChanged',this),this}setEventReceptacle(){this.rectEvent||(this.rectEvent=document.createElementNS(this.graph.ns,'rect'),this.rectEvent.setAttribute('pointer-events','fill'),this.rectEvent.setAttribute('fill','transparent'),this.group.appendChild(this.rectEvent),this.rectEvent.jsGraphIsShape=this);var R=this.group.getBBox();this.rectEvent.setAttribute('x',R.x),this.rectEvent.setAttribute('y',R.y-10),this.rectEvent.setAttribute('width',R.width),this.rectEvent.setAttribute('height',R.height+20)}setSerie(R){return this.serie=R,this.xAxis=R.getXAxis(),this.yAxis=R.getYAxis(),this}getSerie(){return this.serie}autoAxes(){return this.xAxis||(this.xAxis=this.graph.getXAxis()),this.yAxis||(this.yAxis=this.graph.getYAxis()),this}setXAxis(R){return this.xAxis=R,this}setYAxis(R){this.yAxis=R}getXAxis(){return this.xAxis||this.autoAxes(),this.xAxis}getYAxis(){return this.yAxis||this.autoAxes(),this.yAxis}setLayer(R){return this.setProp('layer',R),this}getLayer(){var R=this.getProp('layer');return void 0===R?1:R}draw(R){return(!this._inDom||R)&&(this.appendToDom(),this._inDom=!0),this.makeLabels(),this.redraw(),this.applyStyle(),this}redraw(){return this.hidden?this:(this.position=this.applyPosition(),this.redrawImpl(),!this.position)?this:(this.updateLabels(),this._applyTransforms(),this)}redrawImpl(){}setProperties(R){this.properties=R,Array.isArray(this.properties.position)||(this.properties.position=[this.properties.position]);for(var G=this,U=0,Z=this.properties.position.length,Q;U<Z;U++)Q=O.default.check(this.properties.position[U],function(K){return G.getRelativePosition(K)}),this.properties.position[U]=Q;return this.emit('propertiesChanged'),this}getRelativePosition(R){var G;if(null!==(G=/position([0-9]*)/.exec(R)))return this.getPosition(G[1]);return null===(G=/labelPosition([0-9]*)/.exec(R))?void 0:this.getLabelPosition(G[1])}getProperties(){return this.properties}setProp(R,G,U){return this.properties=this.properties||{},this.properties[R]=this.properties[R]||[],this.properties[R][U||0]=G,this.emit('propertyChanged',R),this}getProp(R,G){return(this.properties[R]||[])[G||0]}getProps(R){return this.properties[R]||[]}addProp(R,G){this.properties[R]=this.properties[R]||[],this.properties[R].push(G)}resetProp(R){this.properties[R]=[]}setDom(R,G,U){!this._dom||U&&V.hasSavedAttribute(this._dom,R)||this._dom.setAttribute(R,G)}setDomGroup(R,G){this.group&&this.group.setAttribute(R,G)}setStrokeColor(R){return this.setProp('strokeColor',R),this.overwriteSavedProp('stroke',R),this.applySelectedStyle(),this}getStrokeColor(){return this.getProp('strokeColor')}setFillColor(R){return this.setProp('fillColor',R),this.overwriteSavedProp('fill',R),this.applySelectedStyle(),this}getFillColor(){return this.getProp('fillColor')}setFillOpacity(R){return this.setProp('fillOpacity',R),this.overwriteSavedProp('fill-opacity',R),this.applySelectedStyle(),this}setStrokeWidth(R){return this.setProp('strokeWidth',R),this.overwriteSavedProp('stroke-width',R),this.applySelectedStyle(),this}getStrokeWidth(){return this.getProp('strokeWidth')}setStrokeDasharray(R){return this.setProp('strokeDasharray',R),this.overwriteSavedProp('stroke-dasharray',R),this.applySelectedStyle(),this}setAttributes(R){return this.setProp('attributes',R),this}overwriteSavedProp(R,G){V.overwriteDomAttribute(this._dom,R,G)}addAttribute(R,G){var U={};return U[R]=G,this.addProp('attributes',U),this}addTransform(R,G){return this.addProp('transforms',{type:R,arguments:Array.isArray(G)?G:[G]}),this}resetTransforms(){return this.resetProp('transforms'),this}setLabelText(R,G){return this.setProp('labelText',R,G||0),this}getLabelText(R,G){return this.getProp('labelText',G||0)}displayLabel(R){return this.setProp('labelVisible',!0,R||0),this}hideLabel(R){return this.setProp('labelVisible',!1,R||0),this}setLabelColor(R,G){return this.setProp('labelColor',R,G||0),this}setLabelFontSize(R,G){return this.setProp('labelFontSize',R,G||0),this}getLabelPosition(R){return this.getProp('labelPosition',R||0)}setLabelPosition(R,G){var Z=O.default.check(R,function(Q){return U.getRelativePosition(Q)}),U;return this.setProp('labelPosition',Z,G||0),this}setLabelAngle(R,G){return this.setProp('labelAngle',R,G||0),this}setLabelBaseline(R,G){return this.setProp('labelBaseline',R,G||0),this}setLabelAnchor(R,G){return this.setProp('labelAnchor',R,G||0),this}setLabelSize(R,G){return this.setProp('labelSize',R,G||0),this}setLabelStrokeColor(R,G){return this.setProp('labelStrokeColor',R,G||0),this}setLabelStrokeWidth(R,G){return this.setProp('labelStrokeWidth',R,G||0),this}applyGenericStyle(){this.setDom('fill',this.getProp('fillColor'),!0),this.setDom('fill-opacity',this.getProp('fillOpacity'),!0),this.setDom('stroke',this.getProp('strokeColor'),!0),this.setDom('stroke-width',this.getProp('strokeWidth'),!0),this.setDom('stroke-dasharray',this.getProp('strokeDasharray'),!0);for(var R=this.getProps('attributes'),G=0,U=R.length;G<U;G++)for(var Z in R[G])this.setDom(Z,'function'==typeof R[G][Z]?R[G][Z].call(this,Z):R[G][Z],!0);return this._applyTransforms(),this}applyStyle(){return this.applyGenericStyle()}calculatePosition(R){var G;return G=R instanceof O.default?R:this.getPosition(R),G?G&&G.compute?G.compute(this.graph,this.getXAxis(),this.getYAxis(),this.getSerie()):void this.graph.throw():void 0}getPosition(R){var G=this.getProp('position',R||0);return this.setProp('position',G=O.default.check(G),R),G}setPosition(R,G){var U=this,Z=O.default.check(R,function(Q){return U.getRelativePosition(Q)});return this.setProp('position',Z,G||0)}_applyTransforms(){var R=this.getProp('transforms'),G='';if(R&&(R=Array.isArray(R)?R:[R],0!=R.length)){for(var U=0;U<R.length;U++){switch(G+=R[U].type+'(',R[U].type){case'translate':G+=O.default.getDeltaPx(R[U].arguments[0],this.getXAxis()).replace('px',''),G+=', ',G+=O.default.getDeltaPx(R[U].arguments[1],this.getYAxis()).replace('px','');break;case'rotate':if(G+=R[U].arguments[0],G+=', ',1==this.transforms[U].arguments.length){var Z=this.getPosition(0);G+=Z.x+', '+Z.y}else G+=O.default.getDeltaPx(R[U].arguments[1],this.getXAxis()).replace('px',''),G+=', ',G+=O.default.getDeltaPx(R[U].arguments[2],this.getYAxis()).replace('px','');}G+=') '}return this.setDomGroup('transform',G),this}}makeLabels(){var R=this;this._labels=this._labels||[],this._labels.map(function(U){R.group.removeChild(U)}),this._labels=[];for(var G=0;this.getProp('labelText',G);)R._labels[G]||(R._labels[G]=document.createElementNS(R.graph.ns,'text'),R._labels[G].setAttribute('data-label-i',G),R._labels[G].jsGraphIsShape=R,R.group.appendChild(this._labels[G]),R._labels[G].addEventListener('dblclick',function(U){U.stopPropagation(),R.labelDblClickListener(U)})),G++;return this.updateLabels(),this}isLabelEditable(R){return this.getProp('labelEditable',R||0)}updateLabels(){this;this._labels=this._labels||[];for(var G=0,U=this._labels.length;G<U;G++)this._applyLabelData(G)}_applyLabelData(R){R=R||0;var G=this.getProp('labelVisible',R);if(!1===G)return void this._labels[R].setAttribute('display','none');this._labels[R].setAttribute('display','initial');var U=this.calculatePosition(O.default.check(this.getProp('labelPosition',R)));if(!(isNaN(U.x)||isNaN(U.y))){'NaNpx'==U.x||isNaN(U.x)||'NaN'===U.x||!1===U.x||(this._labels[R].setAttribute('x',U.x),this._labels[R].setAttribute('y',U.y));var Z=this.getProp('labelAngle',R)||0;if(0!=Z){var Q=this._labels[R].getAttribute('x'),K=this._labels[R].getAttribute('y');this._labels[R].setAttribute('transform','rotate('+Z+' '+Q+' '+K+')')}return this._labels[R].setAttribute('dominant-baseline',this.getProp('labelBaseline',R)||'no-change'),this._labels[R].textContent=this.getProp('labelText',R),this._labels[R].setAttribute('fill',this.getProp('labelColor',R)||'black'),this._labels[R].setAttribute('font-size',this.getProp('labelSize',R)+'px'||'12px'),this._labels[R].setAttribute('text-anchor',this._getLabelAnchor(R)),this._labels[R].setAttribute('stroke',this.getProp('labelStrokeColor',R)),this._labels[R].setAttribute('stroke-width',this.getProp('labelStrokeWidth',R)+'px'),this._labels[R].setAttribute('stroke-location','outside'),this}}_getLabelAnchor(R){var G=this.getProp('labelAnchor',R);switch(G){case'middle':case'start':case'end':return G;break;case'right':return'end';break;case'left':return'start';break;default:return'start';}}isSelected(){return this._selectStatus||!1}hasHandles(R){return void 0!==R&&this.setProp('handles',R),!!this.getProp('handles')||!!this.getProp('statichandles')}addHandles(){if(!this.isLocked()){if(!this.handlesInDom){this.handlesInDom=!0;for(var R=1;R<this.handles.length;R++)this.handles[R]&&this.group.appendChild(this.handles[R])}return this}}removeHandles(){this.hideHandles(),this.handles=[]}hideHandles(){if(!this.handlesInDom)return this;for(var R=1;R<this.handles.length;R++)this.group.removeChild(this.handles[R]);return this.handlesInDom=!1,this}areHandlesInDom(){return this.handlesInDom}_select(R){return!!this.isSelectable()&&void(this.appendToDom(),this._selectStatus=!0,this.applySelectedStyle(),this.hasHandles()&&!this.hasStaticHandles()&&(this.addHandles(),this.setHandles()),!R&&this.graph.emit('shapeSelected',this))}applySelectedStyle(){if(this._selectStatus){var R=this.getSelectStyle(),G={};for(var U in R)G[U]='function'==typeof R[U]?R[U].call(this):R[U];V.saveDomAttributes(this._dom,G,'select')}}_unselect(R){this._selectStatus=!1,V.restoreDomAttributes(this._dom,'select'),this.hasHandles()&&!this.hasStaticHandles()&&this.hideHandles(),R||this.graph.emit('shapeUnselected',this)}getSelectStyle(){return this.selectStyle}setSelectStyle(R){return this.selectStyle=R,this.applySelectedStyle(),this}setStaticHandles(R){this.setProp('staticHandles',R)}hasStaticHandles(){return!!this.getProp('staticHandles')}_createHandles(R,G,U,Z){if(!(this.handles&&0<this.handles.length)){for(var Q=this,K=1;K<=R;K++)(function($){var ee=this,te=document.createElementNS(ee.graph.ns,G);if(te.jsGraphIsShape=!0,U)for(var ie in U)te.setAttribute(ie,U[ie]);te.addEventListener('mousedown',function(re){ee.isResizable()&&(re.preventDefault(),re.stopPropagation(),ee.graph.emit('beforeShapeResize',ee),!ee.graph.prevent(!1)&&(ee.resizing=!0,ee.handleSelected=$,ee.handleMouseDown(re)))}),Z&&Z(ee.handles[$]),ee.handles[$]=te}).call(this,K);return this.handles}}createHandles(){}handleMouseDownImpl(){}handleMouseMoveImpl(){}handleMouseUpImpl(){}handleCreateImpl(){}handleMouseDown(R){if(!this.isLocked())return(this.isMovable()||this.isResizable())&&this.graph.elementMoving(this),this.getProp('selectOnMouseDown')&&this.graph.selectShape(this),this.isMovable()&&!this.resizing&&(this.graph.emit('beforeShapeMove',self),!this.graph.prevent(!1)&&(this.moving=!0)),this._mouseCoords=this.graph._getXY(R),this.handleMouseDownImpl(R,this._mouseCoords)}handleClick(R){return this.getProp('selectOnClick')&&this.graph.selectShape(this),!!this.isSelectable()&&void(!R.shiftKey&&this.graph.unselectShapes(),this.graph.selectShape(this))}handleMouseMove(R){if((this.resizing||this.moving)&&!this.isSelected()&&this.graph.selectShape(this),this.graph.emit('beforeShapeMouseMove',this),this.graph.prevent(!1)||!this._mouseCoords)return!1;var G=this.graph._getXY(R),U=this.getXAxis().getRelVal(G.x-this._mouseCoords.x),Z=this.getYAxis().getRelVal(G.y-this._mouseCoords.y);(0!=U||0!==Z)&&(this.preventUnselect=!0),this._mouseCoords=G;var Q=this.handleMouseMoveImpl(R,U,Z,G.x-this._mouseCoords.x,G.y-this._mouseCoords.y);return Q}handleMouseUp(R){return this.moving&&this.graph.emit('shapeMoved',this),(this.handleSelected||this.resize)&&this.graph.emit('shapeResized',this),this.moving=!1,this.resizing=!1,this.handleSelected=!1,this.graph.elementMoving(!1),this.handleMouseUpImpl(R)}handleDblClick(){}handleMouseOver(){!this.getProp('highlightOnMouseOver')||this.moving||this.resizing||this.highlight(),this.graph.emit('shapeMouseOver',this)}handleMouseOut(){this.getProp('highlightOnMouseOver')&&this.unHighlight(),this.graph.emit('shapeMouseOut',this)}lock(){return this.setProp('locked',!0),this}unlock(){return this.setProp('locked',!1),this}isLocked(){return this.getProp('locked')||this.graph.shapesLocked}movable(){this.setProp('movable',!0)}unmovable(){return this.setProp('movable',!1),!1}isMovable(){return this.getProp('movable')}resizable(){this.setProp('resizable',!0)}unresizable(){this.setProp('resizable',!1)}isResizable(){return this.getProp('resizable')}selectable(){this.setProp('selectable',!0)}unselectable(){this.graph.unselectShape(this),this.setProp('selectable',!1)}isSelectable(){return this.getProp('selectable')}highlight(R,G){return R||(R=this.getHighlightAttributes()),G||(G='highlight'),V.saveDomAttributes(this._dom,R,G),this.highlightImpl(),this}unHighlight(R){return R||(R='highlight'),V.restoreDomAttributes(this._dom,R),this.unHighlightImpl(),this}highlightImpl(){}unHighlightImpl(){}getHighlightAttributes(){return this._highlightAttributes}setHighlightAttributes(R){return this._highlightAttributes=R,this}getMaskingID(){return this.maskingId}maskWith(R){var G;(G=R.getMaskingID())?this._dom.setAttribute('mask','url(#'+G+')'):this._dom.removeAttribute('mask')}updateMask(){}labelDblClickListener(R){var G=parseInt(R.target.getAttribute('data-label-i')),U=this;if(!isNaN(G)&&this.isLabelEditable(G)){R.preventDefault(),R.stopPropagation();var Z=document.createElement('input');Z.setAttribute('type','text'),Z.setAttribute('value',U.getProp('labelText',G)),U.graph._dom.prepend(Z),V.setCSS(Z,{position:'absolute',marginTop:parseInt(R.target.getAttribute('y').replace('px',''))-10+'px',marginLeft:parseInt(R.target.getAttribute('x').replace('px',''))-50+'px',textAlign:'center',width:'100px'}),Z.addEventListener('blur',function(){U.setLabelText(Z.getAttribute('value'),G),U._labels[G].textContent=Z.getAttribute('value'),Z.remove(),U.changed('shapeLabelChanged')}),Z.addEventListener('keyup',function(Q){Q.stopPropagation(),Q.preventDefault(),13===Q.keyCode&&Z.dispatchEvent(new Event('blur'))}),Z.addEventListener('keypress',function(Q){Q.stopPropagation()}),Z.addEventListener('keydown',function(Q){Q.stopPropagation()}),Z.focus()}}appendToDom(){return this._forcedParentDom?this._forcedParentDom.appendChild(this.group):this.graph.appendShapeToDom(this),this}forceParentDom(R){return this._forcedParentDom=R,this}}W.prototype.computePosition=W.prototype.calculatePosition,W.prototype.showLabel=W.prototype.displayLabel,W.prototype.remove=W.prototype.kill,E.default=W})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(22)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(void 0!==T&&(u.exports=T))})(this,function(E,Y){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var I=function(F){return F&&F.__esModule?F:{default:F}}(Y);class N extends I.default{createDom(){this._dom=document.createElementNS(this.graph.ns,'path')}createHandles(){this._createHandles(2,'line',{'stroke-width':'3',stroke:'transparent','pointer-events':'stroke',cursor:'ew-resize'})}handleMouseMoveImpl(F,O){if(!this.isLocked()){if(this.moving)this.getPosition(0).deltaPosition('x',O,this.getXAxis()),this.getPosition(1).deltaPosition('x',O,this.getXAxis());else if(this.serie&&this.handleSelected){this.resizingPosition=1==this.handleSelected?this.getPosition(0):this.getPosition(1);var B=this.serie.searchClosestValue(this.getXAxis().getVal(this.graph._getXY(F).x-this.graph.getPaddingLeft()));if(!B)return;this.resizingPosition.x!=B.xMin&&(this.preventUnselect=!0),this.resizingPosition.x=B.xMin}else this.handleSelected&&(this.resizingPosition=1==this.handleSelected?this.getPosition(0):this.getPosition(1),this.resizingPosition.deltaPosition('x',O,this.getXAxis()));this.applyPosition()}}applyPosition(){if(this.serie){var F=this.computePosition(0),O=this.computePosition(1),V=Math.abs(F.x-O.x),B=Math.min(F.x,O.x);if(2>V||0>B+V||B>this.graph.getDrawingWidth())return this.setDom('d',''),!1;var W=this.serie.searchClosestValue(this.getPosition(0).x),R=this.serie.searchClosestValue(this.getPosition(1).x),re=0,ae=Number.MAX_VALUE,G,U,Z,Q,K,J,B,$;if(!W||!R)return!1;for(W.xBeforeIndex>R.xBeforeIndex&&(G=W,W=R,R=G),this.counter=0,U=W.dataIndex;U<=R.dataIndex;U++){for(this.currentLine='',Q=U==W.dataIndex?W.xBeforeIndexArr:0,K=U==R.dataIndex?R.xBeforeIndexArr:this.serie.data[U].length,J=0,Q==K&&K++,Z=Q;Z<=K;Z+=2)B=this.serie.getX(this.serie.data[U][Z+0]),$=this.serie.getY(this.serie.data[U][Z+1]),re=Math.max(this.serie.data[U][Z+1],re),ae=Math.min(this.serie.data[U][Z+1],ae),Z==Q&&(this.firstX=B,this.firstY=$),this.currentLine+=0<J?' L '+B+' '+$+' ':' M '+B+' '+$+' ',J++;if(this.lastX=B,this.lastY=$,!this.firstX||!this.firstY||!this.lastX||!this.lastY)return;this.currentLine+=' V '+this.getYAxis().getPx(0)+' H '+this.firstX+' z',this.setDom('d',this.currentLine)}return this.maxY=this.serie.getY(re),this.setHandles(),this.changed(),!0}}setHandles(){if(this.firstX){var F=this.computePosition(0),O=this.computePosition(1);F.x<O.x?(this.handles[1].setAttribute('x1',this.firstX),this.handles[1].setAttribute('x2',this.firstX),this.handles[2].setAttribute('x1',this.lastX),this.handles[2].setAttribute('x2',this.lastX)):(this.handles[1].setAttribute('x1',this.lastX),this.handles[1].setAttribute('x2',this.lastX),this.handles[2].setAttribute('x1',this.firstX),this.handles[2].setAttribute('x2',this.firstX)),this.handles[1].setAttribute('y1',this.getYAxis().getMaxPx()),this.handles[1].setAttribute('y2',this.serie.getY(0)),this.handles[2].setAttribute('y1',this.getYAxis().getMaxPx()),this.handles[2].setAttribute('y2',this.serie.getY(0))}}}E.default=N})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(3),S(22)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(void 0!==T&&(u.exports=T))})(this,function(E,Y,X){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var F=function(B){if(B&&B.__esModule)return B;var W={};if(null!=B)for(var R in B)Object.prototype.hasOwnProperty.call(B,R)&&(W[R]=B[R]);return W.default=B,W}(Y),O=function(B){return B&&B.__esModule?B:{default:B}}(X);class V extends O.default{constructor(B,W){super(B,W)}createDom(){this._dom=document.createElementNS(this.graph.ns,'ellipse')}applyPosition(){var B=this.computePosition(0);return this.setDom('cx',B.x||0),this.setDom('cy',B.y||0),this.setDom('rx',this.getProp('rx')||0),this.setDom('ry',this.getProp('ry')||0),!0}handleMouseUpImpl(){this.triggerChange()}handleMouseMoveImpl(){}}E.default=V})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(22)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(void 0!==T&&(u.exports=T))})(this,function(E,Y){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var I=function(F){return F&&F.__esModule?F:{default:F}}(Y);class N extends I.default{constructor(F,O){super(F,O)}createDom(){return!1}applyPosition(){return!0}}E.default=N})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(22)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(void 0!==T&&(u.exports=T))})(this,function(E,Y){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var I=function(F){return F&&F.__esModule?F:{default:F}}(Y);class N extends I.default{constructor(F,O){super(F,O)}createDom(){this._dom=document.createElementNS(this.graph.ns,'path'),this.setStrokeColor('black'),this.setStrokeWidth(1)}createHandles(){}setPointsPx(F){return this.pxPoints=F,this}applyPosition(){if(this.pxPoints)this.setDom('d',this.pxPoints);else if(this.points){var F,O;this.serie?(F=this.serie.getXAxis(),O=this.serie.getYAxis()):this.xAxis&&this.yAxis&&(F=this.xAxis,O=this.yAxis),this.setDom('d','M '+this.points.map(function(V){return F.getPx(V[0])+', '+O.getPx(V[1])}).join(' L '))}return!0}}E.default=N})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(22)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(void 0!==T&&(u.exports=T))})(this,function(E,Y){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var I=function(F){return F&&F.__esModule?F:{default:F}}(Y);class N extends I.default{constructor(F,O){super(F,O)}createDom(){this._dom=document.createElementNS(this.graph.ns,'line'),this.setStrokeColor('black'),this.setStrokeWidth(1)}createHandles(){this._createHandles(2,'rect',{transform:'translate(-3 -3)',width:6,height:6,stroke:'black',fill:'white',cursor:'nwse-resize'})}applyPosition(){var F=this.calculatePosition(0),O=this.calculatePosition(1);if(F&&F.x&&F.y)return this.setDom('x2',F.x),this.setDom('y2',F.y),this.setDom('y1',O.y),this.setDom('x1',O.x),this.currentPos2x=O.x,this.currentPos2y=O.y,this.currentPos1x=F.x,this.currentPos1y=F.y,!0}handleMouseMoveImpl(F,O,V){if(!this.isLocked()){var R=this.getPosition(0),G=this.getPosition(1),U;if(1==this.handleSelected?U=R:2==this.handleSelected&&(U=G),U&&(!this._data.vertical&&U.deltaPosition('x',O,this.getXAxis()),!this._data.horizontal&&U.deltaPosition('y',V,this.getYAxis())),this.moving&&(R.x&&R.deltaPosition('x',O,this.getXAxis()),R.y&&R.deltaPosition('y',V,this.getYAxis()),G.x&&G.deltaPosition('x',O,this.getXAxis()),G.y&&G.deltaPosition('y',V,this.getYAxis())),this._data.forcedCoords){var Z=this._data.forcedCoords;void 0!==Z.y&&('function'==typeof Z.y?G.y=R.y=Z.y(this):(G.y=Z.y,R.y=Z.y)),void 0!==Z.x&&('function'==typeof Z.x?G.x=R.x=Z.x(this):(G.x=Z.x,R.x=Z.x))}return this.rectEvent&&this.setEventReceptacle(),this.redraw(),this.changed(),this.setHandles(),!0}}setHandles(){!this.areHandlesInDom()||isNaN(this.currentPos1x)||(this.handles[1].setAttribute('x',this.currentPos1x),this.handles[1].setAttribute('y',this.currentPos1y),this.handles[2].setAttribute('x',this.currentPos2x),this.handles[2].setAttribute('y',this.currentPos2y))}setEventReceptacle(){this.currentPos1x&&(!this.rectEvent&&(this.rectEvent=document.createElementNS(this.graph.ns,'line'),this.rectEvent.setAttribute('pointer-events','stroke'),this.rectEvent.setAttribute('stroke','transparent'),this.rectEvent.jsGraphIsShape=this,this.group.appendChild(this.rectEvent)),this.rectEvent.setAttribute('x1',this.currentPos1x),this.rectEvent.setAttribute('y1',this.currentPos1y),this.rectEvent.setAttribute('x2',this.currentPos2x),this.rectEvent.setAttribute('y2',this.currentPos2y),this.rectEvent.setAttribute('stroke-width',this.getProp('strokeWidth')+2))}}E.default=N})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(23),S(2)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(void 0!==T&&(u.exports=T))})(this,function(E,Y,X){'use strict';function I(V){return V&&V.__esModule?V:{default:V}}Object.defineProperty(E,'__esModule',{value:!0});var N=I(Y),F=I(X);class O extends N.default{constructor(V,B){super(V,B),this.nbHandles=2}createHandles(){this._createHandles(2,'rect',{transform:'translate(-3 -3)',width:6,height:6,stroke:'black',fill:'white'})}applyPosition(){var V=this.calculatePosition(0),B=this.calculatePosition(1),G=this.getAxis(),U=[],W,R;let Z=this.yBaseline;if(V&&B){this.serie.isFlipped()?(Z=this.getXAxis().getPx(0)-Z,W=Math.abs(V.y-B.y),R=Math.min(V.y,B.y)):(Z=this.getYAxis().getPx(0)-Z,W=Math.abs(V.x-B.x),R=Math.min(V.x,B.x)),this.computedBaseline=Z,this.reversed=R==B.x;var Q=this.getPosition(0),K=this.getPosition(1);if('x'==G&&(2>W||0>R+W||R>this.graph.getDrawingWidth())||'y'==G&&(2>W||0>R+W||R>this.graph.getDrawingHeight()))U=[[0,0]],this.hideLabel(0),this.setDom('d',''),this.hideHandles();else{this.showLabel(0);var J=this.serie.searchClosestValue(Q[G]),$=this.serie.searchClosestValue(K[G]),pe='',ge=1,ue=0,he=Number.MAX_VALUE,ee,te,ie,re,ae,se,R,ne,oe,le;if(!J||!$)return!1;V.y=J.yMin,B.y=$.yMin,J.xBeforeIndex>$.xBeforeIndex&&(ee=J,J=$,$=ee);var Ae=0,Me=this.scaling,oe,le,ce,xe,me,ye,fe,be,ke;for(this.serie.isFlipped()&&(ge=0,ue=1),te=J.dataIndex;te<=$.dataIndex;te++){for(re=te==J.dataIndex?J.xBeforeIndexArr:0,ae=te==$.dataIndex?$.xBeforeIndexArr:this.serie.data[te].length,se=0,ie=re;ie<=ae;ie+=2){if(R=this.serie.getX(this.serie.data[te][ie+ue]),ne=this.serie.getY(this.serie.data[te][ie+ge]),this.serie.isFlipped()){var _e=R;R=ne,ne=_e}if(oe||(oe=R,le=ne,me=this.serie.data[te][ie+ue],ye=this.serie.data[te][ie+ge]),void 0==ce){ce=R,xe=ne,fe=this.serie.data[te][ie+ue],be=this.serie.data[te][ie+ge];continue}(Ae+=0.5*((this.serie.data[te][ie+ue]-fe)*this.serie.data[te][ie+ge]),fe=this.serie.data[te][ie+ue],R!=ce||ne!=xe)&&(ce=R,xe=ne,U.push([R,Ae]),se++)}if(this.lastX=R,this.lastY=ne,!oe||!le||!this.lastX||!this.lastY)return}0==Ae&&(Ae=1);var Me=this._ratio?this._ratio:150/Ae;for(var te=0,Se=U.length;te<Se;te++)U[te][1]=Z-U[te][1]*Me,0==te&&(this.firstPointX=U[te][0],this.firstPointY=U[te][1]),pe+=' L '+U[te][ue]+', '+U[te][ge]+' ',this.lastPointX=U[te][0],this.lastPointY=U[te][1];this.points=U,this.sum=Ae;var xe=le,ce=this.lastX;ke=Math.min(20,ce-oe),pe=this.serie.isFlipped()?' M '+Z+', '+oe+' '+pe:' M '+oe+', '+Z+' '+pe,this.setDom('d',pe),this.firstX=oe,this.firstY=le,this.maxY=this.serie.getY(0),this._selected&&this.select(),this.setHandles()}return this.setLabelPosition(new F.default({x:(Q.x+K.x)/2,y:(this.firstPointY+this.lastPointY)/2+'px'})),this.updateLabels(),this.changed(),!0}}getAxis(){return this._data.axis||'x'}set ratio(V=1){this._ratio=V}get ratio(){return this._ratio}set yBaseline(V=30){this._yBaseline=V}get yBaseline(){return this._yBaseline||30}selectStyle(){this.setDom('stroke-width','2px')}selectHandles(){}setHandles(){if(void 0!=this.points&&this.isSelected()){this.addHandles();var V=this.computePosition(0),B=this.computePosition(1);V.x<B.x?(this.handles[1].setAttribute('x',this.firstPointX),this.handles[1].setAttribute('y',this.firstPointY),this.handles[2].setAttribute('x',this.lastPointX),this.handles[2].setAttribute('y',this.lastPointY)):(this.handles[2].setAttribute('x',this.firstPointX),this.handles[2].setAttribute('y',this.firstPointY),this.handles[1].setAttribute('x',this.lastPointX),this.handles[1].setAttribute('y',this.lastPointY))}}}E.default=O})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(30)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(void 0!==T&&(u.exports=T))})(this,function(E,Y){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var I=function(F){return F&&F.__esModule?F:{default:F}}(Y);class N extends I.default{constructor(F,O){super(F,O),this.nbHandles=4}createDom(){this._dom=document.createElementNS(this.graph.ns,'rect'),this._dom.element=this,this.createHandles(this.nbHandles,'rect',{transform:'translate(-3 -3)',width:6,height:6,stroke:'black',fill:'white',cursor:'nwse-resize'})}redrawImpl(){this.setPosition(),this.setHandles(),this.setBindableToDom(this._dom)}}E.default=N})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(22),S(3)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(void 0!==T&&(u.exports=T))})(this,function(E,Y,X){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var F=function(B){return B&&B.__esModule?B:{default:B}}(Y),O=function(B){if(B&&B.__esModule)return B;var W={};if(null!=B)for(var R in B)Object.prototype.hasOwnProperty.call(B,R)&&(W[R]=B[R]);return W.default=B,W}(X);class V extends F.default{constructor(B,W){super(B,W)}createDom(){this;return this._dom=document.createElementNS(this.graph.ns,'rect'),this.setStrokeColor('black'),this.setStrokeWidth(1),this.setFillColor('transparent'),this}createHandles(){if(this.hasHandles()){var B=this.getProp('handles');switch('object'!=typeof B&&(B={}),B.type||(B.type='corners'),B.type){case'sides':O.extend(B,{sides:{top:!0,bottom:!0,left:!0,right:!0}});var W=0;for(var R in B.sides)B.sides[R]&&W++;this._createHandles(W,'g').map(function(G){var U=document.createElementNS(self.graph.ns,'rect');U.setAttribute('x','-3'),U.setAttribute('width','6'),U.setAttribute('y','-6'),U.setAttribute('height','12'),U.setAttribute('stroke','black'),U.setAttribute('fill','white'),U.setAttribute('cursor','pointer'),G.appendChild(U)});var W=1;for(var R in B.sides)B.sides[R]&&(this.handles[R]=this['handle'+W],this.sides[W]=R,W++);break;case'corners':this._createHandles(4,'rect',{transform:'translate(-3 -3)',width:6,height:6,stroke:'black',fill:'white'}),this.handles&&(this.handles[2].setAttribute('cursor','nesw-resize'),this.handles[4].setAttribute('cursor','nesw-resize'),this.handles[1].setAttribute('cursor','nwse-resize'),this.handles[3].setAttribute('cursor','nwse-resize'));}return this}}applyPosition(){var B=this.computePosition(0),W=this.computePosition(1),R,G,U,Z;return B.x<W.x?(R=B.x,U=W.x-B.x):(R=W.x,U=B.x-W.x),B.y<W.y?(G=B.y,Z=W.y-B.y):(G=W.y,Z=B.y-W.y),this.currentX=R,this.currentY=G,this.currentW=U,this.currentH=Z,isNaN(R)||isNaN(G)||!1===R||!1===G?!1:(this.setDom('width',U),this.setDom('height',Z),this.setDom('x',R),this.setDom('y',G),this.setHandles(),this.updateMask(),!0)}handleMouseMoveImpl(B,W,R){var Z=this.getProp('handles');if(this.moving||this.handleSelected){var Q=this.getPosition(0),K=this.getPosition(1),J=this.getXAxis().isFlipped(),$=this.getYAxis().isFlipped(),ee=Q.x,te=Q.y,ie=K.x,re=K.y;if(this.moving)Q.deltaPosition('x',W,this.getXAxis()),Q.deltaPosition('y',R,this.getYAxis()),K.deltaPosition('x',W,this.getXAxis()),K.deltaPosition('y',R,this.getYAxis());else switch(Z.type){case'sides':switch(this.sides[this.handleSelected]){case'left':Q.deltaPosition('x',W,this.getXAxis());break;case'right':K.deltaPosition('x',W,this.getXAxis());break;case'top':Q.deltaPosition('y',R,this.getYAxis());break;case'bottom':K.deltaPosition('y',R,this.getYAxis());}break;case'corners':default:1==this.handleSelected?(Q.deltaPosition('x',W,this.getXAxis()),Q.deltaPosition('y',R,this.getYAxis())):2==this.handleSelected?(K.deltaPosition('x',W,this.getXAxis()),Q.deltaPosition('y',R,this.getYAxis())):3==this.handleSelected?(K.deltaPosition('y',R,this.getYAxis()),K.deltaPosition('x',W,this.getXAxis())):4==this.handleSelected&&(Q.deltaPosition('x',W,this.getXAxis()),K.deltaPosition('y',R,this.getYAxis()));}return this.redraw(),this.changed(),this.setHandles(),!0}}setHandles(){if(!this.isLocked()&&(this.isSelectable()||this._staticHandles)&&this.handlesInDom){var B=this.computePosition(0),W=this.computePosition(1),R=this.getProp('handles');switch(R.type){case'sides':this.handles.left&&this.handles.left.setAttribute('transform','translate('+this.currentX+' '+(this.currentY+this.currentH/2)+')'),this.handles.right&&this.handles.right.setAttribute('transform','translate( '+(this.currentX+this.currentW)+' '+(this.currentY+this.currentH/2)+')'),this.handles.top&&this.handles.top.setAttribute('transform','translate( '+(this.currentX+this.currentW/2)+' '+this.currentY+')'),this.handles.bottom&&this.handles.bottom.setAttribute('transform','translate( '+(this.currentX+this.currentW/2)+' '+(this.currentY+this.currentH)+')');break;case'corners':default:this.handles[1].setAttribute('x',B.x),this.handles[1].setAttribute('y',B.y),this.handles[2].setAttribute('x',W.x),this.handles[2].setAttribute('y',B.y),this.handles[3].setAttribute('x',W.x),this.handles[3].setAttribute('y',W.y),this.handles[4].setAttribute('x',B.x),this.handles[4].setAttribute('y',W.y);}}}}E.default=V})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(22)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(void 0!==T&&(u.exports=T))})(this,function(E,Y){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var I=function(F){return F&&F.__esModule?F:{default:F}}(Y);class N extends I.default{constructor(F,O){super(F,O),this.nbHandles=1}get width(){return this.options.width||10}set width(F=10){this.options.width=F}createDom(){this._dom=document.createElementNS(this.graph.ns,'path'),this._dom.setAttribute('d','M -'+this.width/2+' 0 h '+this.width+' m -'+this.width/2+' -'+this.width/2+' v '+this.width+'')}createHandles(){this._createHandles(this.nbHandles,'rect',{transform:'translate(-3 -3)',width:6,height:6,stroke:'black',fill:'white',cursor:'nwse-resize'})}applyPosition(){var F=this.calculatePosition(0);if(F&&F.x&&F.y)return this.setDom('transform','translate( '+F.x+', '+F.y+')'),this.currentPos1x=F.x,this.currentPos1y=F.y,!0}redrawImpl(){this.setHandles()}handleCreateImpl(){}handleMouseDownImpl(){return this.moving=!0,!0}handleMouseUpImpl(){return this.triggerChange(),!0}handleMouseMoveImpl(F,O,V){if(!this.isLocked()){var R=this.getFromData('pos');return this.moving&&(R.x=this.graph.deltaPosition(R.x,O,this.getXAxis()),R.y=this.graph.deltaPosition(R.y,V,this.getYAxis())),this.redrawImpl(),!0}}createHandles(){this._createHandles(1,'rect',{transform:'translate(-3 -3)',width:6,height:6,stroke:'black',fill:'white',cursor:'nwse-resize'})}setHandles(){!this.areHandlesInDom()||isNaN(this.currentPos1x)||(this.handles[1].setAttribute('x',this.currentPos1x),this.handles[1].setAttribute('y',this.currentPos1y))}selectStyle(){this.setDom('stroke','red'),this.setDom('stroke-width','2')}}E.default=N})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(27)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(void 0!==T&&(u.exports=T))})(this,function(E,Y){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var I=function(F){return F&&F.__esModule?F:{default:F}}(Y);class N extends I.default{constructor(F){super(F),this.lineHeight=6}createDom(){this._dom=document.createElementNS(this.graph.ns,'line'),this.line1=document.createElementNS(this.graph.ns,'line'),this.line2=document.createElementNS(this.graph.ns,'line'),this.line3=document.createElementNS(this.graph.ns,'line'),this.rectBoundary=document.createElementNS(this.graph.ns,'path'),this.rectBoundary.setAttribute('fill','transparent'),this.rectBoundary.setAttribute('stroke','none'),this.rectBoundary.setAttribute('pointer-events','fill'),this.rectBoundary.jsGraphIsShape=!0,this.group.appendChild(this.rectBoundary),this.group.appendChild(this.line1),this.group.appendChild(this.line2),this.group.appendChild(this.line3),this._dom.element=this}createHandles(){this._createHandles(3,'rect',{transform:'translate(-3 -3)',width:6,height:6,stroke:'black',fill:'white',cursor:'nwse-resize'})}redrawImpl(){this.line1.setAttribute('stroke',this.getStrokeColor()),this.line2.setAttribute('stroke',this.getStrokeColor()),this.line3.setAttribute('stroke',this.getStrokeColor()),this.line1.setAttribute('stroke-width',this.getStrokeWidth()),this.line2.setAttribute('stroke-width',this.getStrokeWidth()),this.line3.setAttribute('stroke-width',this.getStrokeWidth()),this.setHandles(),this.redrawLines()}redrawLines(){var F=this.computePosition(0),O=this.computePosition(1),V=this.computePosition(2);if(F.x&&O.x&&V.x&&this.posYPx){var B=this.lineHeight;this.rectBoundary.setAttribute('d','M '+F.x+' '+(this.posYPx-B)+' v '+2*B+' H '+O.x+' v '+-2*B+'z'),this.line1.setAttribute('x1',F.x),this.line1.setAttribute('x2',F.x),this.line2.setAttribute('x1',O.x),this.line2.setAttribute('x2',O.x),this.line3.setAttribute('x1',V.x),this.line3.setAttribute('x2',V.x),this._dom.setAttribute('x1',F.x),this._dom.setAttribute('x2',O.x),this.redrawY(B)}return this}redrawY(){if(!this.posYPx)return this;var F=this.lineHeight;return this.line1.setAttribute('y1',this.posYPx-F),this.line1.setAttribute('y2',this.posYPx+F),this.line2.setAttribute('y1',this.posYPx-F),this.line2.setAttribute('y2',this.posYPx+F),this.line3.setAttribute('y1',this.posYPx-F),this.line3.setAttribute('y2',this.posYPx+F),this._dom.setAttribute('y1',this.posYPx),this._dom.setAttribute('y2',this.posYPx),this}setHandles(){if(this.posYPx){var F=this.computePosition(0),O=this.computePosition(1),V=this.computePosition(2);F.x&&O.x&&V.x&&(this.handles[1].setAttribute('x',F.x),this.handles[1].setAttribute('y',this.posYPx),this.handles[2].setAttribute('x',O.x),this.handles[2].setAttribute('y',this.posYPx),this.handles[3].setAttribute('x',V.x),this.handles[3].setAttribute('y',this.posYPx))}}setY(F){return this.posYPx=F,this}setLineHeight(F){this.lineHeihgt=F}handleMouseMoveImpl(F,O){if(!this.isLocked()){var B=this.getPosition(0),W=this.getPosition(1),R=this.getPosition(2);switch(this.handleSelected){case 1:B.deltaPosition('x',O,this.getXAxis()),(Math.abs(R.x-W.x)>Math.abs(W.x-B.x)||Math.abs(R.x-B.x)>Math.abs(W.x-B.x))&&(R.x=B.x+0.1*(W.x-B.x));break;case 2:W.deltaPosition('x',O,this.getXAxis()),(Math.abs(R.x-W.x)>Math.abs(W.x-B.x)||Math.abs(R.x-B.x)>Math.abs(W.x-B.x))&&(R.x=W.x+0.1*(B.x-W.x));break;case 3:if(R.deltaPosition('x',O,this.getXAxis()),Math.abs(R.x-W.x)>Math.abs(W.x-B.x)||Math.abs(R.x-B.x)>Math.abs(W.x-B.x))return;;}this.setLabelPosition({y:this.getLabelPosition(0).y,x:R.x}),this.updateLabels(),this.redrawLines(),this.setHandles()}}applyPosition(){return this.redrawLines(),!0}}E.default=N})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(4)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(void 0!==T&&(u.exports=T))})(this,function(E,Y){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var I=function(F){return F&&F.__esModule?F:{default:F}}(Y);class N extends I.default{static defaults(){return{}}constructor(F){super(...arguments),this.options=F}init(){}onMouseDown(){}onMouseUp(){}onMouseMove(){}}E.default=N})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(33)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(void 0!==T&&(u.exports=T))})(this,function(E,Y){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var I=function(F){return F&&F.__esModule?F:{default:F}}(Y);class N extends I.default{static defaults(){return{dragX:!0,dragY:!0,persistanceX:!1,persistanceY:!1}}init(F){this.graph=F,this.time=null,this.totaltime=2e3}onMouseDown(F,O,V){return this._draggingX=O,this._draggingY=V,this._lastDraggingX=this._draggingX,this._lastDraggingY=this._draggingY,this.stopAnimation=!0,this.moved=!1,!0}onMouseMove(F,O,V){var R=O-this._draggingX,G=V-this._draggingY;this.options.dragX&&F._applyToAxes(function(U){U.setCurrentMin(U.getVal(U.getMinPx()-R)),U.setCurrentMax(U.getVal(U.getMaxPx()-R))},!1,!0,!1),this.options.dragY&&F._applyToAxes(function(U){U.setCurrentMin(U.getVal(U.getMinPx()-G)),U.setCurrentMax(U.getVal(U.getMaxPx()-G))},!1,!1,!0),this._lastDraggingX=this._draggingX,this._lastDraggingY=this._draggingY,this._draggingX=O,this._draggingY=V,this.moved=!0,this.time=Date.now(),this.emit('dragging'),F.draw(!0)}onMouseUp(F,O,V){var R=Date.now()-this.time;return O==this._lastDraggingX||V==this._lastDraggingY?void(this.moved&&this.emit('dragged')):(this.speedX=(O-this._lastDraggingX)/R,this.speedY=(V-this._lastDraggingY)/R,isNaN(this.speedX)||isNaN(this.speedY)?void this.emit('dragged'):void(F._applyToAxes(function(G){G._pluginDragMin=G.getCurrentMin(),G._pluginDragMax=G.getCurrentMax()},!1,!0,!0),this.stopAnimation=!1,this.accelerationX=-this.speedX/this.totaltime,this.accelerationY=-this.speedY/this.totaltime,this.options.persistanceX||this.options.persistanceY?this._persistanceMove(F):this.emit('dragged')))}_persistanceMove(F){var O=this;return O.stopAnimation?void O.emit('dragged'):void window.requestAnimationFrame(function(){var V=Date.now()-O.time,B=(0.5*O.accelerationX*V+O.speedX)*V,W=(0.5*O.accelerationY*V+O.speedY)*V;O.options.persistanceX&&F._applyToAxes(function(R){R.setCurrentMin(-R.getRelVal(B)+R._pluginDragMin),R.setCurrentMax(-R.getRelVal(B)+R._pluginDragMax),R.cacheCurrentMin(),R.cacheCurrentMax(),R.cacheInterval()},!1,!0,!1),O.options.persistanceY&&F._applyToAxes(function(R){R.setCurrentMin(-R.getRelVal(W)+R._pluginDragMin),R.setCurrentMax(-R.getRelVal(W)+R._pluginDragMax),R.cacheCurrentMin(),R.cacheCurrentMax(),R.cacheInterval()},!1,!1,!0),F.draw(),V<O.totaltime?(O.emit('dragging'),O._persistanceMove(F)):O.emit('dragged')})}}E.default=N})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(33),S(3)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(void 0!==T&&(u.exports=T))})(this,function(E,Y,X){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var F=function(B){return B&&B.__esModule?B:{default:B}}(Y),O=function(B){if(B&&B.__esModule)return B;var W={};if(null!=B)for(var R in B)Object.prototype.hasOwnProperty.call(B,R)&&(W[R]=B[R]);return W.default=B,W}(X);class V extends F.default{constructor(){super(...arguments)}init(B,W){this.graph=B,this.shapeType=W.type}setShape(B){this.shapeInfo.shapeType=B}onMouseDown(B,W,R,G){if(this.shapeType||this.options.url){var Z=this,Q=this,K,J;this.count=this.count||0,W-=B.getPaddingLeft(),R-=B.getPaddingTop(),K=B.getXAxis().getVal(W),J=B.getYAxis().getVal(R);var $={position:[{x:K,y:J},{x:K,y:J}],onChange:function(te){B.triggerEvent('onAnnotationChange',te)},locked:!1,selectable:!0,resizable:!0,movable:!0};if(O.extend(!0,$,this.options),this.emit('beforeNewShape',$,G),!this.graph.prevent(!1)){var ee=B.newShape($.type,$);this.emit('createdShape',ee,G),ee&&(Z.currentShape=ee,Z.currentShapeEvent=G),B.once('mouseUp',function(){Z.emit('newShape',ee)})}}}onMouseMove(B,W,R,G){var U=this;if(U.currentShape){U.count++;var Z=U.currentShape;U.currentShape=!1,B.selectedSerie&&Z.setSerie(B.selectedSerie),Z.resizing=!0,Z.options&&Z.options.onCreate&&Z.options.onCreate.call(Z),Z.draw(),B.selectShape(Z),Z.handleMouseDown(U.currentShapeEvent,!0),Z.handleSelected=1,Z.handleMouseMove(G,!0)}}onMouseUp(){var B=this;B.currentShape&&(B.currentShape=!1)}}E.default=V})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(3),S(33)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(void 0!==T&&(u.exports=T))})(this,function(E,Y,X){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var F=function(B){if(B&&B.__esModule)return B;var W={};if(null!=B)for(var R in B)Object.prototype.hasOwnProperty.call(B,R)&&(W[R]=B[R]);return W.default=B,W}(Y),O=function(B){return B&&B.__esModule?B:{default:B}}(X);class V extends O.default{constructor(){super(...arguments)}init(B){this._path=document.createElementNS(B.ns,'path'),F.setAttributeTo(this._path,{display:'none',fill:'rgba(0,0,0,0.1)',stroke:'rgba(0,0,0,1)','shape-rendering':'crispEdges',x:0,y:0,height:0,width:0,d:''}),this.graph=B,B.dom.appendChild(this._path)}setSerie(B){this.serie=B}onMouseDown(B,W,R){this.serie&&(this.path='M '+W+' '+R+' ',this.currentX=W,this.currentY=R,this.xs=[this.serie.getXAxis().getVal(W-B.getPaddingLeft())],this.ys=[this.serie.getYAxis().getVal(R-B.getPaddingTop())],this._path.setAttribute('d',''),this._path.setAttribute('display','block'))}onMouseMove(B,W,R){25<Math.pow(W-this.currentX,2)+Math.pow(R-this.currentY,2)&&(this.path+=' L '+W+' '+R+' ',this.currentX=W,this.currentY=R,this.xs.push(this.serie.getXAxis().getVal(W-B.getPaddingLeft())),this.ys.push(this.serie.getYAxis().getVal(R-B.getPaddingTop())),this._path.setAttribute('d',this.path+' z'),this.findPoints())}findPoints(){for(var B=this.serie.data,W=[],R=0,U=0,Z=B.length,G;U<Z;U+=2){R=0;for(var Q=0,K=this.xs.length;Q<K;Q+=1)G=Q==K-1?0:Q+1,(this.ys[Q]<B[U+1]&&this.ys[G]>B[U+1]||this.ys[Q]>B[U+1]&&this.ys[G]<B[U+1])&&B[U]>(B[U+1]-this.ys[Q])/(this.ys[G]-this.ys[Q])*(this.xs[G]-this.xs[Q])+this.xs[Q]&&R++;1==R%2?(W.push(U/2),this.serie.selectPoint(U/2,!0,'selected')):this.serie.unselectPoint(U/2)}this.selected=W,this.emit('selectionProcess',W)}onMouseUp(){this._path.setAttribute('display','none'),this.emit('selectionEnd',this.selected)}}E.default=V})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(3),S(33)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(void 0!==T&&(u.exports=T))})(this,function(E,Y,X){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var F=function(B){if(B&&B.__esModule)return B;var W={};if(null!=B)for(var R in B)Object.prototype.hasOwnProperty.call(B,R)&&(W[R]=B[R]);return W.default=B,W}(Y),O=function(B){return B&&B.__esModule?B:{default:B}}(X);class V extends O.default{constructor(){super(...arguments)}static defaults(){return{axes:'all'}}init(B){this._zoomingGroup=document.createElementNS(B.ns,'g'),this._zoomingSquare=document.createElementNS(B.ns,'rect'),this._zoomingSquare.setAttribute('display','none'),F.setAttributeTo(this._zoomingSquare,{display:'none',fill:'rgba(171,12,12,0.2)',stroke:'rgba(171,12,12,1)','shape-rendering':'crispEdges',x:0,y:0,height:0,width:0,'pointer-events':'none'}),this.graph=B,B.groupEvent.appendChild(this._zoomingGroup),this._zoomingGroup.appendChild(this._zoomingSquare)}onMouseDown(B,W,R,G,U){var Z=this.options.zoomMode;if(Z){switch(this._zoomingMode=Z,void 0===W&&(this._backedUpZoomMode=this._zoomingMode,this._zoomingMode='y',W=0),void 0===R&&(this._backedUpZoomMode=this._zoomingMode,this._zoomingMode='x',R=0),this._zoomingXStart=W,this._zoomingYStart=R,this.x1=W-B.getPaddingLeft(),this.y1=R-B.getPaddingTop(),this._zoomingSquare.setAttribute('width',0),this._zoomingSquare.setAttribute('height',0),this._zoomingSquare.setAttribute('display','block'),this._zoomingMode){case'x':this._zoomingSquare.setAttribute('y',B.options.paddingTop),this._zoomingSquare.setAttribute('height',B.getDrawingHeight()-B.shift.bottom);break;case'y':this._zoomingSquare.setAttribute('x',B.options.paddingLeft),this._zoomingSquare.setAttribute('width',B.getDrawingWidth());break;case'forceY2':this.y2=B.getYAxis().getPx(this.options.forcedY)+B.options.paddingTop;}this.options.onZoomStart&&!U&&this.options.onZoomStart(B,W,R,G,U)}}onMouseMove(B,W,R,G,U){switch(this._zoomingMode){case'xy':this._zoomingSquare.setAttribute('x',Math.min(this._zoomingXStart,W)),this._zoomingSquare.setAttribute('y',Math.min(this._zoomingYStart,R)),this._zoomingSquare.setAttribute('width',Math.abs(this._zoomingXStart-W)),this._zoomingSquare.setAttribute('height',Math.abs(this._zoomingYStart-R));break;case'forceY2':this._zoomingSquare.setAttribute('y',Math.min(this._zoomingYStart,this.y2)),this._zoomingSquare.setAttribute('height',Math.abs(this._zoomingYStart-this.y2)),this._zoomingSquare.setAttribute('x',Math.min(this._zoomingXStart,W)),this._zoomingSquare.setAttribute('width',Math.abs(this._zoomingXStart-W));break;case'x':this._zoomingSquare.setAttribute('x',Math.min(this._zoomingXStart,W)),this._zoomingSquare.setAttribute('width',Math.abs(this._zoomingXStart-W));break;case'y':this._zoomingSquare.setAttribute('y',Math.min(this._zoomingYStart,R)),this._zoomingSquare.setAttribute('height',Math.abs(this._zoomingYStart-R));}this.options.onZoomMove&&!U&&this.options.onZoomMove(B,W,R,G,U)}onMouseUp(B,W,R){var Z=this;this.removeZone();var Q=W-B.options.paddingLeft,K=R-B.options.paddingTop;if((0!=W-this._zoomingXStart||'y'==this._zoomingMode)&&(0!=R-this._zoomingYStart||'x'==this._zoomingMode))if(B.cancelClick=!0,this.options.transition||this.options.smooth){let J=!1,$=!1;('x'==this._zoomingMode||'xy'==this._zoomingMode||'forceY2'==this._zoomingMode)&&(this.fullX=!1,this.toAxes(function(ee){ee._pluginZoomMin=ee.getCurrentMin(),ee._pluginZoomMax=ee.getCurrentMax(),ee._pluginZoomMinFinal=Math.min(ee.getVal(Q),ee.getVal(Z.x1)),ee._pluginZoomMaxFinal=Math.max(ee.getVal(Q),ee.getVal(Z.x1))},!1,!0,!1),J=!0),('y'==this._zoomingMode||'xy'==this._zoomingMode)&&(this.fullY=!1,this.toAxes(function(ee){ee._pluginZoomMin=ee.getCurrentMin(),ee._pluginZoomMax=ee.getCurrentMax(),ee._pluginZoomMinFinal=Math.min(ee.getVal(K),ee.getVal(Z.y1)),ee._pluginZoomMaxFinal=Math.max(ee.getVal(K),ee.getVal(Z.y1))},!1,!1,!0),$=!0),'forceY2'==this._zoomingMode&&(this.fullY=!1,this.toAxes(function(ee){ee._pluginZoomMin=ee.getCurrentMin(),ee._pluginZoomMax=ee.getCurrentMax(),ee._pluginZoomMinFinal=Math.min(ee.getVal(Z.y2),ee.getVal(Z.y1)),ee._pluginZoomMaxFinal=Math.max(ee.getVal(Z.y2),ee.getVal(Z.y1))},!1,!1,!0),$=!0),this.transition(J,$,'zoomEnd')}else{switch(this._zoomingMode){case'x':this.fullX=!1,this.toAxes('_doZoom',[Q,this.x1],!0,!1);break;case'y':this.fullY=!1,this.toAxes('_doZoom',[K,this.y1],!1,!0);break;case'xy':this.fullX=!1,this.fullY=!1,this.toAxes('_doZoom',[Q,this.x1],!0,!1),this.toAxes('_doZoom',[K,this.y1],!1,!0);break;case'forceY2':this.fullX=!1,this.fullY=!1,this.toAxes('_doZoom',[Q,this.x1],!0,!1),this.toAxes('_doZoom',[this.y1,this.y2],!1,!0);}B.prevent(!0),B.draw(),this._backedUpZoomMode&&(this._zoomingMode=this._backedUpZoomMode),this.emit('zoomed'),B.pluginYieldActiveState()}}removeZone(){this._zoomingSquare.setAttribute('display','none')}onMouseWheel(B,W,R){R||(R={}),R.baseline||(R.baseline=0);var G='x'==R.direction,U='y'===R.direction;this.toAxes('handleMouseWheel',[B,W,R.baseline],G,U),this.graph.drawSeries()}onDblClick(B,W,R,G,U){var Z=this.graph;if(this.emit('beforeDblClick',{graph:Z,x:B,y:W,pref:G,e:R,mute:U}),!Z.prevent(!1)){if(this.options.transition||this.options.smooth){var Q=!1,K=!1;if(('xtotal'==G.mode||'total'==G.mode)&&(this.toAxes(function(pe){pe._pluginZoomMin=pe.getCurrentMin(),pe._pluginZoomMax=pe.getCurrentMax(),pe._pluginZoomMinFinal=pe.getMinValue(),pe._pluginZoomMaxFinal=pe.getMaxValue()},!1,!0,!1),Q=!0),('ytotal'==G.mode||'total'==G.mode)&&(this.toAxes(function(pe){pe._pluginZoomMin=pe.getCurrentMin(),pe._pluginZoomMax=pe.getCurrentMax(),pe._pluginZoomMinFinal=pe.getMinValue(),pe._pluginZoomMaxFinal=pe.getMaxValue()},!1,!1,!0),K=!0),'gradualX'==G.mode||'gradualY'==G.mode||'gradual'==G.mode||'gradualXY'==G.mode){var B=!1,W=!1;('gradualX'==G.mode||'gradual'==G.mode||'gradualXY'==G.mode)&&(B=!0,Q=!0),('gradualY'==G.mode||'gradual'==G.mode||'gradualXY'==G.mode)&&(W=!0,K=!0),this.toAxes(function(pe){pe._pluginZoomMin=pe.getCurrentMin(),pe._pluginZoomMax=pe.getCurrentMax(),pe._pluginZoomMinFinal=pe.getCurrentMin()-(pe.getCurrentMax()-pe.getCurrentMin()),pe._pluginZoomMaxFinal=pe.getCurrentMax()+(pe.getCurrentMax()-pe.getCurrentMin())},!1,B,W)}return void this.transition(Q,K,'dblClick')}var J=this.graph.getXAxis(),$=this.graph.getYAxis();if('xtotal'==G.mode)this.toAxes('setMinMaxToFitSeries',null,!0,!1),this.fullX=!0,this.fullY=!1;else if('ytotal'==G.mode)this.toAxes('setMinMaxToFitSeries',null,!1,!0),this.fullX=!1,this.fullY=!0;else if('total'==G.mode)this.toAxes('setMinMaxToFitSeries',null,!0,!0),this.fullX=!0,this.fullY=!0;else{B-=this.graph.options.paddingLeft,W-=this.graph.options.paddingTop;var ee=J.getCurrentMin(),te=J.getCurrentMax(),ie=J.getVal(B),re=te-ee,ae=$.getCurrentMin(),se=$.getCurrentMax(),ne=$.getVal(W),oe=se-ae;if('gradualXY'==G.mode||'gradualX'==G.mode){var le=(ie-ee)/(te-ee);ee=Math.max(J.getMinValue(),ee-re*le),te=Math.min(J.getMaxValue(),te+re*(1-le)),J.setCurrentMin(ee),J.setCurrentMax(te),J.options.onZoom&&J.options.onZoom(ee,te),J.cacheCurrentMin(),J.cacheCurrentMax(),J.cacheInterval()}if('gradualXY'==G.mode||'gradualY'==G.mode){var le=(ne-ae)/(se-ae);ae=Math.max($.getMinValue(),ae-oe*le),se=Math.min($.getMaxValue(),se+oe*(1-le)),$.setCurrentMin(ae),$.setCurrentMax(se),$.options.onZoom&&$.options.onZoom(ae,se),$.cacheCurrentMin(),$.cacheCurrentMax(),$.cacheInterval()}}Z.pluginYieldActiveState(),this.graph.draw()}}transition(B,W,R){var G=this,U=500;G.gradualUnzoomStart||(G.gradualUnzoomStart=Date.now()),window.requestAnimationFrame(function(){var Z=Date.now()-G.gradualUnzoomStart;Z>U&&(Z=U);var Q=Math.sin(Z/U*Math.PI/2);G.toAxes(function(K){K.setCurrentMin(K._pluginZoomMin+(K._pluginZoomMinFinal-K._pluginZoomMin)*Q),K.setCurrentMax(K._pluginZoomMax+(K._pluginZoomMaxFinal-K._pluginZoomMax)*Q),K.cacheCurrentMin(),K.cacheCurrentMax(),K.cacheInterval()},!1,B,W),G.graph.draw(),Z<U?(G.transition(B,W,R),G.emit('zooming')):(G.emit('zoomed'),G.graph.pluginYieldActiveState(),R&&G.emit(R),G.gradualUnzoomStart=0)})}isFullX(){return this.fullX}isFullY(){return this.fullY}toAxes(B,W,R,G){var U=this.options.axes;switch(U&&('serieSelected'!=U||this.graph.getSelectedSerie())||(U='all'),U){case'all':this.graph._applyToAxes.apply(this.graph,arguments);break;case'serieSelected':var Z=this.graph.getSelectedSerie();Z&&(R&&('string'==typeof B?Z.getXAxis()[B].apply(Z.getXAxis(),W):B.apply(Z.getXAxis(),W)),G&&('string'==typeof B?Z.getYAxis()[B].apply(Z.getYAxis(),W):B.apply(Z.getYAxis(),W)));break;default:Array.isArray(U)||(U=[U]);for(let Q of U)Q.isX()&&R?'string'==typeof B?Q[B].apply(Q,W):B.apply(Q,W):Q.isY()&&G&&('string'==typeof B?Q[B].apply(Q,W):B.apply(Q,W));}}}E.default=V})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(1),S(39),S(33),S(3)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(void 0!==T&&(u.exports=T))})(this,function(E,Y,X,I,N){'use strict';function O(U){return U&&U.__esModule?U:{default:U}}Object.defineProperty(E,'__esModule',{value:!0});var V=O(Y),B=O(X),W=O(I),R=function(U){if(U&&U.__esModule)return U;var Z={};if(null!=U)for(var Q in U)Object.prototype.hasOwnProperty.call(U,Q)&&(Z[Q]=U[Q]);return Z.default=U,Z}(N);class G extends W.default{constructor(){super(...arguments),this.series=[],this.plugins=[],this.currentSlots={},this.requestLevels={},this.update=(U,Z)=>{this.series.forEach(function(Q){this.updateSerie(Q,U)}),U||this.recalculateSeries(Z)}}static defaults(){return{LRUName:'PluginTimeSerieManager',intervals:[1000,15000,60000,900000,3600000,8640000],maxParallelRequests:3,optimalPxPerPoint:2,nbPoints:1e3,url:''}}init(U){this.graph=U,B.default.create(this.options.LRUName,200),this.requestsRunning=0}setURL(U){return this.options.url=U,this}setAvailableIntervals(){this.options.intervals=arguments}newSerie(U,Z,Q,K,J){var $=this.graph.newSerie(U,Z,Q);return this.currentSlots[U]={min:0,max:0,interval:0},$.on('hide',function(){$._zoneSerie&&$._zoneSerie.hide()}),$.on('show',function(){$._zoneSerie&&$._zoneSerie.show()}),$.setInfo('timeSerieManagerDBElements',K),J||($._zoneSerie=this.graph.newSerie(U+'_zone',{},V.default.SERIE_ZONE)),this.series.push($),$}registerPlugin(U){var Q;if(-1<(Q=this.plugins.indexOf(U)))for(var K=1;K<arguments.length;K++)U.removeListener(arguments[K],this.update);for(var K=1;K<arguments.length;K++)U.on(arguments[K],this.update)}updateSerie(U,Z){for(var Q=this,K=U.getXAxis().getCurrentMin(),J=U.getXAxis().getCurrentMax(),ee=this.getOptimalInterval(J-K),te=this.options.intervals.indexOf(ee),re=te-1,ie;re<=te+1;re++){ie=this.options.intervals[re];var ae=Q.computeSlotID(K,ie),se=Q.computeSlotID(J,ie);[[2,5,6],[1,2,4],[0,1,3]].forEach(function(oe){for(var le=ae-oe[0]*(se-ae),pe=se+oe[0]*(se-ae),de=le;de<=pe&&!(Q.computeTimeMin(de,ie)>Date.now());)Q.register(U,de,ie,ie==ee?oe[1]:oe[2],!0,Z),de++})}this.processRequests()}register(U,Z,Q,K,J,$){var ee=this.computeUniqueID(U,Z,Q),te=B.default.get(this.options.LRUName,ee);(!te||this.computeTimeMax(Z,Q)>Date.now()&&te.timeout<Date.now()-($?5e3:1e5)&&1==K)&&this.request(U,Z,Q,K,ee,J)}request(U,Z,Q,K,J,$){for(var ee in this.requestLevels)ee!=K&&this.requestLevels[ee][J]&&(1===this.requestLevels[ee][J][0]?this.requestLevels[ee][J][5]=K:delete this.requestLevels[ee][J]);this.requestLevels[K]&&this.requestLevels[K][J]||(this.requestLevels[K]=this.requestLevels[K]||{},this.requestLevels[K][J]=[0,J,U.getName(),Z,Q,K,U.getInfo('timeSerieManagerDBElements')],!$&&this.processRequests())}processRequests(){if(!(this.requestsRunning>=this.options.maxParallelRequests)){for(var U=this,Z=1,Q;;){for(var K in this.requestLevels[Z])if(1!=this.requestLevels[Z][K][0]){Q=this.requestLevels[Z][K];break}if(Q)break;if(Z++,10<Z)return}this.requestsRunning++,Q&&(Q[0]=1,R.ajaxGet({url:this.getURL(Q),method:'GET',json:!0}).done(function(J){1==J.status&&(U.requestsRunning--,delete U.requestLevels[Z][K],B.default.store(U.options.LRUName,Q[1],J.data),U.processRequests(),1==Q[5]&&0==Object.keys(U.requestLevels[1]).length&&U.recalculateSeries(!0))}))}}computeTimeMax(U,Z){return(U+1)*(Z*this.options.nbPoints)}computeTimeMin(U,Z){return U*(Z*this.options.nbPoints)}getURL(U){var Z=this.options.url.replace('<measurementid>',U[2]).replace('<from>',this.computeTimeMin(U[3],U[4])).replace('<to>',this.computeTimeMax(U[3],U[4])).replace('<interval>',U[4]),Q=U[6]||{};for(var K in Q)Z=Z.replace('<'+K+'>',Q[K]);return Z}getOptimalInterval(U){var Z=(this.options.optimalPxPerPoint||1)*U/this.graph.getDrawingWidth(),Q=1/0,K;return this.options.intervals.forEach(function(J){var $=Math.min(Q,Math.abs(J-Z));Q!==$&&(K=J,Q=$)}),K||1e3}computeUniqueID(U,Z,Q){var K='',J=U.getInfo('timeSerieManagerDBElements');for(var $ in J)K+=';'+$+':'+J[$];return U.getName()+';'+Z+';'+Q+K}computeSlotID(U,Z){return Math.floor(U/(Z*this.options.nbPoints))}computeSlotTime(U,Z){return U*(Z*this.options.nbPoints)}getZoneSerie(U){return U._zoneSerie}updateZoneSerie(U){var Z=this.graph.getSerie(U);Z&&Z._zoneSerie&&(Z._zoneSerie.setXAxis(Z.getXAxis()),Z._zoneSerie.setYAxis(Z.getYAxis()),Z._zoneSerie.setFillColor(Z.getLineColor()),Z._zoneSerie.setLineColor(Z.getLineColor()),Z._zoneSerie.setFillOpacity(0.2),Z._zoneSerie.setLineOpacity(0.3))}recalculateSeries(U){var Z=this;this.locked||(this.changed=!1,this.series.map(function(Q){Z.recalculateSerie(Q,U)}),this.changed=!1,Z.graph.draw())}recalculateSerie(U,Z){var Q=U.getXAxis().getCurrentMin(),K=U.getXAxis().getCurrentMax(),J=this.getOptimalInterval(K-Q),$=this.computeSlotID(Q,J),ee=this.computeSlotID(K,J),te=[],ie=[],re;if(!(!Z&&J==this.currentSlots[U.getName()].interval&&this.currentSlots[U.getName()].min<=$&&this.currentSlots[U.getName()].max>=ee)){$-=2,ee+=2,this.currentSlots[U.getName()].min=$,this.currentSlots[U.getName()].max=ee,this.currentSlots[U.getName()].interval=J;for(var ae=$;ae<=ee;)(re=B.default.get(this.options.LRUName,this.computeUniqueID(U,ae,J)))?(te=te.concat(re.data.mean),ie=ie.concat(re.data.minmax)):this.recalculateSerieUpwards(U,ae,J,te,ie),ae++;this.changed=!0,U.setData(te),U._zoneSerie&&U._zoneSerie.setData(ie)}}setIntervalCheck(U){this.interval&&clearInterval(this.interval);var Z=this;this.interval=setInterval(function(){Z.update(!0,!1)},U)}recalculateSerieUpwards(U,Z,Q,K,J){var $=this.options.intervals.slice(0);$.sort();var ee=$[$.indexOf(Q)+1]||-1,te;if(0>ee)return[];var ie=this.computeSlotTime(Z,Q),re=this.computeSlotTime(Z+1,Q),ae=this.computeSlotID(ie,ee),se=!1;if(te=B.default.get(this.options.LRUName,this.computeUniqueID(U,ae,ee)))for(var ne=0,oe=te.data.mean.length;ne<oe;ne+=2){if(te.data.mean[ne]<ie)continue;else!1==se&&(se=ne);if(te.data.mean[ne]>=re)return K=K.concat(te.data.mean.slice(se,ne)),void(J=K.concat(te.data.minmax.slice(se,ne)))}return this.recalculateSerieUpwards(U,ae,ee,K,J)}lockRedraw(){this.locked=!0}unlockRedraw(){this.locked=!1}isRedrawLocked(){return!!this.locked}}E.default=G})},function(u,A){var P,C,T;(function(E,Y){C=[A],P=Y,T='function'==typeof P?P.apply(A,C):P,!(void 0!==T&&(u.exports=T))})(this,function(E){'use strict';function Y(Z,Q){Q=Q||50,W[Z]||(W[Z]={},G[Z]=0),U[Z]=Q}function X(Z,Q){var K,J;if(W[Z]&&W[Z][Q])return J=R[Z],K=W[Z][Q],K.prev=J,K.next=J.next,J.next.prev=K,J.next=K,R[Z]=K,K.data}function I(Z,Q,K){var J,$,ee;if(W[Z]&&void 0!==G[Z]&&U[Z])return ee=R[Z],W[Z][Q]?(X(Z,Q),W[Z][Q].data.data=K,W[Z][Q].data.timeout=Date.now()):(J={data:{data:K,timeout:Date.now()}},'undefined'==typeof ee?(J.prev=J,J.next=J):(J.prev=ee.prev,J.next=ee.next,ee.next.prev=J,ee.next=J),R[Z]=J,W[Z][Q]=J,G[Z]++),G[Z]>U[Z]&&ee&&($=ee.next,ee.next.next.prev=ee,ee.next=ee.next.next,$.next.next=void 0,$.next.prev=void 0,G[Z]--),K}Object.defineProperty(E,'__esModule',{value:!0}),E.create=function(Z,Q){Y(Z,Q)},E.get=function(Z,Q){var K;if((K=X(Z,Q))!=void 0)return K},E.store=function(Z,Q,K){return I(Z,Q,K),K},E.empty=function(Z){emptyMemory(Z)},E.exist=function(Z){return W[Z]};var W={},R={},G={},U={}})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(33)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(void 0!==T&&(u.exports=T))})(this,function(E,Y){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var I=function(F){return F&&F.__esModule?F:{default:F}}(Y);class N extends I.default{constructor(){super(...arguments)}static defaults(){return{positiveStyle:{fillColor:'green',fillOpacity:0.2,strokeWidth:0},negativeStyle:{fillColor:'red',fillOpacity:0.2,strokeWidth:0},from:0,to:0}}init(F){this.graph=F,this.pathsPositive=[],this.pathsNegative=[],this.positivePolyline=this.graph.newShape('polyline').draw(),this.positivePolyline.setFillColor(this.options.positiveStyle.fillColor).setFillOpacity(this.options.positiveStyle.fillOpacity).setStrokeWidth(this.options.positiveStyle.strokeWidth).applyStyle(),this.negativePolyline=this.graph.newShape('polyline').draw(),this.negativePolyline.setFillColor(this.options.negativeStyle.fillColor).setFillOpacity(this.options.negativeStyle.fillOpacity).setStrokeWidth(this.options.negativeStyle.strokeWidth).applyStyle()}setSeries(F,O){this.serie1=F,this.serie2=O}setBoundaries(F,O){this.options.from=F,this.options.to=O}getFrom(){return this.options.from}getTo(){return this.options.to}draw(){function F(){!0===ie?V.pathsPositive.push([J,$]):!1==ie&&V.pathsNegative.push([J,$]),J=[],$=[],ie=void 0}function O(se,ne){for(var oe=0;oe<ne[0].length;oe+=2)0==oe&&(se+='M '),se+=' '+Math.round(V.serie1.getXAxis().getPx(ne[0][oe]))+', '+Math.round(V.serie1.getYAxis().getPx(ne[0][oe+1])),oe<ne[0].length-2&&(se+=' L ');for(var oe=ne[1].length-2;0<=oe;oe-=2)se+=' L '+Math.round(V.serie2.getXAxis().getPx(ne[1][oe]))+', '+Math.round(V.serie2.getYAxis().getPx(ne[1][oe+1])),0==oe&&(se+=' z ');return se}var V=this,B=this.serie1.searchClosestValue(this.getFrom()),W,R,G,U,Z,Q,K,J=[],$=[],ee;B?(W=B.dataIndex,R=2*B.xAfterIndex):(W=0,R=0),Z=this.interpolate(this.serie1,this.getFrom()),J.push(this.getFrom()),J.push(Z),Z=this.interpolate(this.serie2,this.getFrom()),$.push(this.getFrom()),$.push(Z);for(var te,ie,re;W<this.serie1.data.length;W++){for(;R<this.serie1.data[W].length;R+=2){if(this.serie1.data[W][R]>this.getTo()){Z=this.interpolate(this.serie1,this.getTo()),Q=this.interpolate(this.serie2,this.getTo()),K=this.computeCrossing(J[J.length-2],J[J.length-1],this.getTo(),Z,$[$.length-2],$[$.length-1],this.getTo(),Q),K&&(J.push(K.x),J.push(K.y),$.push(K.x),$.push(K.y),F(),J.push(K.x),J.push(K.y),$.push(K.x),$.push(K.y),ie=this.serie1.data[W][R+1]>this.serie2.data[G][U+1]),J.push(this.getTo()),J.push(Z),$.push(this.getTo()),$.push(Q),re=!0;break}if(!te)if(te=this.serie2.searchClosestValue(this.serie1.data[W][R]),te)G=te.dataIndex,U=2*te.xBeforeIndex,Z=this.interpolate(this.serie2,this.serie1.data[W][R]),J.push(this.serie1.data[W][R]),J.push(this.serie1.data[W][R+1]),$.push(this.serie1.data[W][R]),$.push(Z),ie=this.serie1.data[W][R+1]>Z;else continue;for(ee=!1,K=this.computeCrossing(J[J.length-2],J[J.length-1],this.serie1.data[W][R],this.serie1.data[W][R+1],$[$.length-2],$[$.length-1],this.serie2.data[G][U],this.serie2.data[G][U+1]),K&&(J.push(K.x),J.push(K.y),$.push(K.x),$.push(K.y),F(),J.push(K.x),J.push(K.y),$.push(K.x),$.push(K.y),ie=this.serie1.data[W][R+1]>this.serie2.data[G][U+1]);this.serie2.data[G][U]<this.serie1.data[W][R];){if($.push(this.serie2.data[G][U]),$.push(this.serie2.data[G][U+1]),U+=2,U==this.serie2.data[G].length){ee=this.serie2.data[G][U-2],G++,U=0;break}K=this.computeCrossing(J[J.length-2],J[J.length-1],this.serie1.data[W][R],this.serie1.data[W][R+1],$[$.length-2],$[$.length-1],this.serie2.data[G][U],this.serie2.data[G][U+1]),K&&(J.push(K.x),J.push(K.y),$.push(K.x),$.push(K.y),F(),J.push(K.x),J.push(K.y),$.push(K.x),$.push(K.y),ie=this.serie1.data[W][R+1]>this.serie2.data[G][U+1])}!1===ee?(J.push(this.serie1.data[W][R]),J.push(this.serie1.data[W][R+1])):(J.push(ee),J.push(this.interpolate(this.serie1,ee)),te=!1,R-=2,F())}if(re){F();break}(Z=this.interpolate(this.serie2,J[J.length-2]))&&($.push(J[J.length-2]),$.push(Z)),F(),R=0,te=!1}var ae=this.pathsPositive.reduce(O,'');this.positivePolyline.setPointsPx(ae).redraw();var ae=this.pathsNegative.reduce(O,'');this.negativePolyline.setPointsPx(ae).redraw()}interpolate(F,O){var V=F.searchClosestValue(O);if(!V)return!1;if(void 0==V.xMax)return V.yMin;if(void 0==V.xMin)return V.yMax;var B=(O-V.xMin)/(V.xMax-V.xMin);return(1-B)*V.yMin+B*V.yMax}computeCrossing(F,O,V,B,W,R,G,U){var Z=(B-O)/(V-F),Q=(U-R)/(G-W),K=B-Z*V;if(F==V||W==G)return!1;if(Z==Q)return{x:F,y1:O,y2:O};var $=(K-(U-Q*G))/(Q-Z);return $>V||$<F||$<W||$>G?!1:{x:$,y:Z*$+K}}getPositivePolyline(){return this.positivePolyline}getNegativePolyline(){return this.negativePolyline}}E.default=N})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(1),S(6),S(8),S(3),S(11),S(18),S(33),S(7)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(void 0!==T&&(u.exports=T))})(this,function(E,Y,X,I,N,F,O,V,B){'use strict';function R(de){return de&&de.__esModule?de:{default:de}}Object.defineProperty(E,'__esModule',{value:!0});var G=R(Y),U=R(X),Z=R(I),Q=function(de){if(de&&de.__esModule)return de;var ge={};if(null!=de)for(var ue in de)Object.prototype.hasOwnProperty.call(de,ue)&&(ge[ue]=de[ue]);return ge.default=de,ge}(N),K=R(F),J=R(O),$=R(V),ee=R(B);class te extends K.default{constructor(){super(...arguments),this.subSeries=[]}setData(){return super.setData(...arguments),this.subSeries.map(de=>{de.data=this.data}),this}draw(){return this.eraseMarkers(),this}getSymbolForLegend(){return!!this.subSeries[0]&&this.subSeries[0].getSymbolForLegend()}getMarkerForLegend(){return!!this.subSeries[0]&&this.subSeries[0].getMarkerForLegend()}}class ie extends J.default{constructor(){super(...arguments),this.subSeries=[]}setData(){return super.setData(...arguments),this.subSeries.map(de=>{de.data=this.data}),this}draw(){return this}getSymbolForLegend(){return!!this.subSeries[0]&&this.subSeries[0].getSymbolForLegend()}getMarkerForLegend(){return!!this.subSeries[0]&&this.subSeries[0].getMarkerForLegend()}}var re=['constructor','init','draw','setLineColor','setLineWidth','setLineStyle','getLineColor','getLineWidth','getLineStyle','setMarkers','showMarkers','hideMarkers','getMarkerDom','getMarkerDomIndependant','getMarkerPath','eraseMarkers','_recalculateMarkerPoints'];Object.getOwnPropertyNames(K.default.prototype).concat([]).map(function(de){-1<re.indexOf(de)||(te.prototype[de]=function(ge){return function(){var ue=arguments;this.subSeries.map(he=>{he[ge](...ue)})}}(de))});class se extends $.default{constructor(){super(...arguments),this.series=new Map}static defaults(){return{axes:{margins:{high:5,low:5}}}}init(de){this.graph=de}newXAxis(de){return newBottomAxis(de)}newYAxis(de){return newLeftAxis(de)}newTopAxis(de){return de=this.getOptions(de),new le(this.graph,'top',de)}newBottomAxis(de){return de=this.getOptions(de),new le(this.graph,'bottom',de)}newLeftAxis(de){return de=this.getOptions(de),new pe(this.graph,'left',de)}newRightAxis(de){return de=this.getOptions(de),new pe(this.graph,'right',de)}getOptions(de){var ge={marginMin:this.options.axes.margins.low,marginMax:this.options.axes.margins.high};return Q.extend(!0,ge,de)}preDraw(){var de,ge;this.series.forEach(({serie:ue})=>{de=ue.getXAxis(),ge=ue.getYAxis();let he=1;for(de.splitNumber&&(he*=de.splitNumber),ge.splitNumber&&(he*=ge.splitNumber);ue.subSeries.length<he;){const ce=ue.getName()+'_'+ue.subSeries.length,xe=this.graph.newSerie(ce,{},ue.getType()||G.default.SERIE_LINE);xe.excludedFromLegend=!0,xe.styles=ue.styles,xe.data=ue.data,ue.getType()==G.default.SERIE_LINE&&(xe.markerPoints=ue.markerPoints,xe.markerFamilies=ue.markerFamilies),ue.subSeries.push(xe)}for(;ue.subSeries.length>he;){let ce=this.graph.getSerie(ue.getName()+'_'+(ue.subSeries.length-1));ce&&ce.kill&&ce.kill(),ue.subSeries.pop()}!ue.getXAxis().splitNumber&&ue.getXAxis().splitAxis&&ue.getXAxis().splitAxis(),!ue.getYAxis().splitNumber&&ue.getYAxis().splitAxis&&ue.getYAxis().splitAxis(),ue.subSeries.map((ce,xe)=>{var me,ye;if(ue.getXAxis().getSubAxis){let fe=xe%(de.splitNumber||1);me=ue.getXAxis().getSubAxis(fe)}else me=ue.getXAxis();if(ce.setXAxis(me),ue.getYAxis().getSubAxis){let fe=Math.floor(xe/(de.splitNumber||1));ye=ue.getYAxis().getSubAxis(fe)}else ye=ue.getYAxis();ce.setYAxis(ye),ce.draw(!0)})})}newSerie(de,ge={},ue){switch(ue){case'line':return newLineSerie(de,ge);break;case'scatter':return newScatterSerie(de,ge);}throw'Cannot create a split serie of type '+ue}newLineSerie(de,ge){var ue={type:'lineSerie',serie:new te(de,ge,'line')};return this.series.set(de,ue),ue.serie.init(this.graph,de,ge),this.graph.series.push(ue.serie),ue.serie}newScatterSerie(de,ge){var ue={type:'scatterSerie',serie:new ie(de,ge,'scatter')};return this.series.set(de,ue),ue.serie.init(this.graph,ge),this.graph.series.push(ue.serie),ue.serie}}var ne={splitMarks:!0},oe=function(de){var ue=class extends de{constructor(ce,xe,me={}){super(ce,xe,me),this.axes=[],this.position=xe,this.constructorOptions=Q.extend(!0,{},ne,me),this._splitVal=[]}all(ce){if('function'==typeof ce)return this.axes.map(ce),this}splitAxis(...ce){ce.push(1);let xe=ce.length;for(;this.axes.length>xe;)this.axes.pop().kill(!0,!0);for(;this.axes.length<xe;){let fe=new(this.getConstructor())(this.graph,this.position,this.constructorOptions);this.axes.push(fe),fe.zoomLock=!0,fe.init(this.graph,this.constructorOptions)}let me=0,ye=0;for(let fe of this.axes)fe.options.marginMin=10,fe.options.marginMax=10,0==ye&&(fe.options.marginMin=0),ye==this.axes.length-1&&(fe.options.marginMax=0),fe.setSpan(me,me=ce[ye]),fe.setMinMaxFlipped(),ye++;return this._splits=ce,this}fixGridIntervalBasedOnAxis(ce){return this.fixGridFor=ce,this.graph._axisHasChanged(),this}splitSpread(ce){return this.autoSpread=!!ce,this}hasAxis(ce){return-1<this.axes.indexOf(ce)}_splitSpread(){let ce=[],xe=0,me=0;for(let ye of this._splitVal)xe+=ye[1]-ye[0];for(let ye of this._splitVal)ce.push(me+=(ye[1]-ye[0])/xe);ce.pop(),this.splitAxis(...ce)}setChunkBoundaries(ce){let xe=0,me,ye;for(let fe of this.axes)Array.isArray(ce[xe])&&1<ce[xe].length&&!me&&(me=ce[xe][1]-ce[xe][0],ye=xe),1!=ce[xe].length&&Array.isArray(ce[xe])?fe.forceMin(ce[xe][0]).forceMax(ce[xe][1]):(fe._mean=ce[xe],Array.isArray(fe._mean)&&(fe._mean=fe._mean[0])),xe++;return this._baseWidthVal=me,this._baseWidthIndex=ye,this._splitVal=ce,this.graph._axisHasChanged(),this}setMinMaxToFitSeries(){(!this._splitVal||1>this._splitVal.length)&&(super.setMinMaxToFitSeries(...arguments),this._splitVal[0]=this._splitVal[0]||[],this._splitVal[this._splitVal.length-1]=this._splitVal[this._splitVal.length-1]||[],this._splitVal[0][0]=this.getCurrentMin(),this._splitVal[this._splitVal.length-1][1]=this.getCurrentMax(),this.setChunkBoundaries(this._splitVal))}draw(){this.autoSpread&&this._splitSpread();let ce=0,xe,me,ye;if(0<=this._baseWidthIndex&&(me=this.getSubAxis(this._baseWidthIndex))&&(ye=me.getSpan()),me=void 0,0<=this.fixGridFor&&(me=this.getSubAxis(this.fixGridFor))){if(void 0!==me._mean){let fe=(me.getSpan()[1]-me.getSpan()[0])/(ye[1]-ye[0])*this._baseWidthVal;me.forceMin(me._mean-fe/2),me.forceMax(me._mean+fe/2)}ce=me.draw(),xe=me.getPrimaryTickUnit()}return this.axes.map(fe=>{if(me!==fe){if(void 0!==fe._mean){let be=(fe.getSpan()[1]-fe.getSpan()[0])/(ye[1]-ye[0])*this._baseWidthVal;fe.forceMin(fe._mean-be/2),fe.forceMax(fe._mean+be/2)}xe&&fe.forcePrimaryTickUnit(xe),ce=Math.max(ce,fe.draw())}}),this.writeUnit(),ce}setMinPx(ce){super.setMinPx(ce);for(let xe of this.axes)xe.setMinPx(ce)}setMaxPx(ce){super.setMaxPx(ce);for(let xe of this.axes)xe.setMaxPx(ce)}setShift(){super.setShift(...arguments);for(let ce of this.axes)ce.setShift(...arguments)}init(){super.init(...arguments),this.splitAxis()}getAxisPosition(){var ce=0;return this.axes.map(xe=>{ce=Math.max(ce,xe.getAxisPosition())}),ce}getSubAxis(ce){if(this.axes.length<=ce)throw'Impossible to reach axis. Index '+ce+' is out of range';return this.axes[ce]}get splitNumber(){return this._splits.length}};return['turnGridsOff','turnGridsOn','gridsOff','gridsOn','setEngineering','setScientificScaleExponent','setScientific','setLabelColor','setSecondaryGridDasharray','setPrimaryGridDasharray','setSecondaryGridsOpacity','setPrimaryGridOpacity','setSecondaryGridWidth','setPrimaryGridWidth','setSecondaryGridColor','setPrimaryGridColor','setTicksLabelColor','setSecondaryTicksColor','setPrimaryTicksColor','setAxisColor','secondaryGridOn','secondaryGridOff','primaryGridOff','primaryGridOn','setSecondaryGrid','setPrimaryGrid','setGrids','setTickPosition','setExponentialFactor','setExponentialLabelFactor','setGridLinesStyle','forcePrimaryTickUnitMin','forcePrimaryTickUnitMax','forcePrimaryTickUnit','flip','show','hide','setDisplay'].map(he=>{ue.prototype[he]=function(ce){return function(){return this.axes.map(xe=>{xe[ce](...arguments)}),this}}(he)}),ue};class le extends oe(U.default){constructor(de,ge){super(...arguments),this.topbottom=ge}getConstructor(){return U.default}getAxisPosition(){var de=super.getAxisPosition(...arguments);return this.labelPosY=de,this.getLabel()&&(de+=this.graph.options.fontSize),de}drawLabel(){super.drawLabel(),this.label.setAttribute('y',(this.top?-1:1)*(this.graph.options.fontSize+this.labelPosY))}draw(){var de=super.draw(...arguments);return this.drawLabel(),de}}class pe extends oe(Z.default){constructor(){super(...arguments)}getConstructor(){return Z.default}drawLabel(){super.drawLabel()}equalizePosition(de){var ge=de;if(this.getLabel()&&this.axes.map(ue=>{ge=Math.max(ue.equalizePosition(de),ge)}),this.getLabel())return this.placeLabel(this.left?-ge:ge),ge+this.graph.options.fontSize}}Q.mix(le,new U.default),Q.mix(pe,new Z.default),E.default=se})},function(u,A,S){var P,C,T;(function(E,Y){C=[A,S(27)],P=Y,T='function'==typeof P?P.apply(A,C):P,!(void 0!==T&&(u.exports=T))})(this,function(E,Y){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var I=function(F){return F&&F.__esModule?F:{default:F}}(Y);class N extends I.default{constructor(F){super(F)}createDom(){this._dom=document.createElementNS(this.graph.ns,'line'),this._dom.setAttribute('marker-end','url(#arrow'+this.graph._creation+')'),this.createHandles(this.nbHandles,'rect',{transform:'translate(-3 -3)',width:6,height:6,stroke:'black',fill:'white',cursor:'nwse-resize'}),this.setStrokeColor('black'),this.setStrokeWidth(1)}}E.default=N})}])});
//# sourceMappingURL=jsgraph-es6.min.js.map
