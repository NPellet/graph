(function(A,S){'object'==typeof exports&&'object'==typeof module?module.exports=S():'function'==typeof define&&define.amd?define([],S):'object'==typeof exports?exports.Graph=S():A.Graph=S()})(this,function(){return function(u){function A(C){if(S[C])return S[C].exports;var P=S[C]={exports:{},id:C,loaded:!1};return u[C].call(P.exports,P,P.exports,A),P.loaded=!0,P.exports}var S={};return A.m=u,A.c=S,A.p='',A(0)}([function(u,A,S){var C,P,T;(function(E,X){P=[u,S(1),S(2),S(8),S(9),S(11),S(12),S(13),S(14),S(17),S(19),S(20),S(21),S(22),S(23),S(24),S(25),S(26),S(27),S(28),S(29),S(49),S(31),S(32),S(30),S(33),S(34),S(35),S(36),S(37),S(38),S(39),S(40),S(41),S(42),S(43),S(44),S(46),S(47),S(48),S(5),S(6)],C=X,T='function'==typeof C?C.apply(A,P):C,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X,Y,I,O,F,W,V,B,R,G,U,Z,K,Q,J,$,ee,te,ie,ae,re,se,ne,oe,le,de,pe,ge,ue,ce,he,xe,me,fe,ye,be,Ae,Me,ke,Se,_e){'use strict';function Ce(ut){return ut&&ut.__esModule?ut:{default:ut}}var Pe=Ce(X),ve=Ce(Y),Le=Ce(I),we=Ce(O),Te=Ce(F),Ee=Ce(W),Xe=Ce(V),De=Ce(B),Ye=Ce(R),Ie=Ce(G),Ne=Ce(U),He=Ce(Z),je=Ce(K),Oe=Ce(Q),Fe=Ce(J),ze=Ce($),We=Ce(ee),Ve=Ce(te),Be=Ce(ie),Re=Ce(ae),Ge=Ce(re),Ue=Ce(se),Ze=Ce(ne),qe=Ce(oe),Ke=Ce(le),Qe=Ce(de),Je=Ce(pe),$e=Ce(ge),et=Ce(ue),tt=Ce(ce);Ce(he);var it=Ce(xe),at=Ce(me),rt=Ce(fe),st=Ce(ye),nt=Ce(be),ot=Ce(Ae),lt=Ce(Me),pt=Ce(ke),gt=Ce(Se);Ce(_e),Pe.default.registerConstructor('graph.position',ve.default),Pe.default.registerConstructor('graph.axis.x',we.default),Pe.default.registerConstructor('graph.axis.y',Te.default),Pe.default.registerConstructor('graph.axis.x.bar',Ee.default),Pe.default.registerConstructor('graph.axis.x.time',Xe.default),Pe.default.registerConstructor('graph.serie.line',De.default),Pe.default.registerConstructor('graph.serie.line.3d',Ye.default),Pe.default.registerConstructor('graph.serie.line.color',He.default),Pe.default.registerConstructor('graph.serie.contour',We.default),Pe.default.registerConstructor('graph.serie.bar',Ie.default),Pe.default.registerConstructor('graph.serie.box',Ne.default),Pe.default.registerConstructor('graph.serie.scatter',je.default),Pe.default.registerConstructor('graph.serie.zone',Oe.default),Pe.default.registerConstructor('graph.serie.zone.3d',Fe.default),Pe.default.registerConstructor('graph.serie.densitymap',ze.default),Pe.default.registerConstructor(Pe.default.SERIE_LINE,De.default),Pe.default.registerConstructor(Pe.default.SERIE_LINE_3D,Ye.default),Pe.default.registerConstructor(Pe.default.SERIE_LINE_COLORED,He.default),Pe.default.registerConstructor(Pe.default.SERIE_CONTOUR,We.default),Pe.default.registerConstructor(Pe.default.SERIE_BAR,Ie.default),Pe.default.registerConstructor(Pe.default.SERIE_BOX,Ne.default),Pe.default.registerConstructor(Pe.default.SERIE_SCATTER,je.default),Pe.default.registerConstructor(Pe.default.SERIE_ZONE,Oe.default),Pe.default.registerConstructor(Pe.default.SERIE_ZONE_3D,Fe.default),Pe.default.registerConstructor(Pe.default.SERIE_DENSITYMAP,ze.default),Pe.default.registerConstructor('graph.plugin.shape',at.default),Pe.default.registerConstructor('graph.plugin.drag',it.default),Pe.default.registerConstructor('graph.plugin.zoom',st.default),Pe.default.registerConstructor('graph.plugin.selectScatter',rt.default),Pe.default.registerConstructor('graph.plugin.timeSerieManager',nt.default),Pe.default.registerConstructor('graph.plugin.serielinedifference',ot.default),Pe.default.registerConstructor('graph.plugin.serieLineDifference',ot.default),Pe.default.registerConstructor('graph.plugin.axissplitting',lt.default),Pe.default.registerConstructor('graph.plugin.makeTracesDifferent',pt.default),Pe.default.registerConstructor('graph.shape',Ve.default),Pe.default.registerConstructor('graph.shape.areaundercurve',Be.default),Pe.default.registerConstructor('graph.shape.arrow',Re.default),Pe.default.registerConstructor('graph.shape.ellipse',Ge.default),Pe.default.registerConstructor('graph.shape.label',Ue.default),Pe.default.registerConstructor('graph.shape.polyline',Ze.default),Pe.default.registerConstructor('graph.shape.line',qe.default),Pe.default.registerConstructor('graph.shape.nmrintegral',Ke.default),Pe.default.registerConstructor('graph.shape.html',tt.default),Pe.default.registerConstructor('graph.shape.peakintegration2d',Qe.default),Pe.default.registerConstructor('graph.shape.rect',Je.default),Pe.default.registerConstructor('graph.shape.rectangle',Je.default),Pe.default.registerConstructor('graph.shape.cross',$e.default),Pe.default.registerConstructor('graph.shape.peakboundariescenter',et.default),Pe.default.registerConstructor('graph.legend',Le.default),Pe.default.registerConstructor('graph.waveform',gt.default),E.exports=Pe.default})},function(u,A,S){var C,P,T;(function(E,X){P=[A,S(2),S(3),S(4),S(5)],C=X,T='function'==typeof C?C.apply(A,P):C,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X,Y,I,O){'use strict';function F(be){return be&&be.__esModule?be:{default:be}}function W(be,Ae,Me,ke){var Se=be.getConstructor(ke,!0);if(Se||'string'!=typeof ke||(Se=be.getConstructor('graph.serie.'+ke,!0)),Se){var _e=new Se(be,Ae,Me);be.appendSerieToDom(_e)}else return pe.throwError('No constructor exists for the serie type provided. Use Graph.registerConstructor( name, constructor ) first is you use your own series');return _e}function V(be,Ae){for(var Me=0,ke=Ae.length;Me<ke;Me++){var Se=!0;for(var _e=0,Ce=Ae[Me].length;_e<Ce;_e++)be[0]<Ae[Me][_e][0]&&be[1]<Ae[Me][_e][0]||be[0]>Ae[Me][_e][1]&&be[1]>Ae[Me][_e][1]||(Se=!1);if(Se)return Ae[Me].push(be),Me}return Ae.push([be]),Ae.length-1}function B(be){var Ae={top:[],bottom:[],left:[],right:[]},Me={top:[],bottom:[],left:[],right:[]};be._painted=!0,be._applyToAxes(function(ve,Le){if(!(ve.disabled||ve.floating)){var we=V(ve.getSpan(),Me[Le]);ve.setLevel(we),Ae[Le][we]=Math.max(ve.getAxisPosition(),Ae[Le][we]||0)}},!1,!0,!1);var ke=Ae.top.reduce(function(ve,Le){return ve+Le},0),Se=Ae.bottom.reduce(function(ve,Le){return ve+Le},0);[Ae.top,Ae.bottom].map(function(ve){ve.reduce(function(Le,we,Te){return ve[Te]=Le+we,Le+we},0)}),be._applyToAxes(function(ve,Le){ve.disabled||ve.floating||ve.setShift(Ae[Le][ve.getLevel()])},!1,!0,!1),be._applyToAxes(function(ve,Le){if(!ve.disabled&&(ve.setMinPx(ke),ve.setMaxPx(be.getDrawingHeight(!0)-Se),!ve.floating)){let we=ve.linkedToAxis?0:ve.draw();var Te=V(ve.getSpan(),Me[Le]);ve.setLevel(Te),Ae[Le][Te]=Math.max(we,Ae[Le][Te]||0)}},!1,!1,!0);var _e=pe.extend(!0,{},Ae);be._applyToAxes(function(ve,Le){ve.disabled||ve.floating||(_e[Le][ve.getLevel()]=Math.max(Ae[Le][ve.getLevel()],ve.equalizePosition(Ae[Le][ve.getLevel()])))},!1,!1,!0),Ae=_e;var Ce=Ae.left.reduce(function(ve,Le){return ve+Le},0),Pe=Ae.right.reduce(function(ve,Le){return ve+Le},0);[Ae.left,Ae.right].map(function(ve){ve.reduce(function(Le,we,Te){return ve[Te]=Le+we,Le+we},0)}),be._applyToAxes((ve,Le)=>{ve.disabled||ve.floating||ve.setShift(Ae[Le][ve.getLevel()])},!1,!1,!0),be._applyToAxes(function(ve){ve.disabled||(ve.setMinPx(Ce),ve.setMaxPx(be.getDrawingWidth(!0)-Pe),ve.floating||!ve.linkedToAxis&&ve.draw())},!1,!0,!1),be._applyToAxes(function(ve){if(ve.floating){var Le=ve.getFloatingAxis(),we=ve.getFloatingValue(),Te=Le.getPx(we);ve.setShift(Te),ve.linkedToAxis||ve.draw()}},!1,!0,!0),re(be,'right',be.getDrawingWidth(!0),be.getDrawingWidth(!0),ke,be.getDrawingHeight(!0)-Se),re(be,'left',0,0,ke,be.getDrawingHeight(!0)-Se),re(be,'top',Ce,be.getDrawingWidth(!0)-Pe,0,0),re(be,'bottom',Ce,be.getDrawingWidth(!0)-Pe,be.getDrawingHeight(!0)-Se,be.getDrawingHeight(!0)-Se),be.clipRect.setAttribute('y',ke),be.clipRect.setAttribute('x',Ce),be.clipRect.setAttribute('width',be.getDrawingWidth()-Ce-Pe),be.clipRect.setAttribute('height',be.getDrawingHeight()-ke-Se),be.rectEvent.setAttribute('y',ke+be.getPaddingTop()),be.rectEvent.setAttribute('x',Ce+be.getPaddingLeft()),be.drawingSpaceWidth=be.getDrawingWidth()-Ce-Pe,be.drawingSpaceHeight=be.getDrawingHeight()-ke-Se,be.rectEvent.setAttribute('width',be.drawingSpaceWidth),be.rectEvent.setAttribute('height',be.drawingSpaceHeight),be.drawingSpaceMinX=Ce+be.getPaddingLeft(),be.drawingSpaceMinY=ke+be.getPaddingTop(),be.drawingSpaceMaxX=be.getDrawingWidth()-Pe+be.getPaddingLeft(),be.drawingSpaceMaxY=be.getDrawingHeight()-Se+be.getPaddingTop(),be.shift=Ae,be.redrawShapes()}function R(be,Ae,Me){return be.forcedPlugin?(be.activePlugin=be.forcedPlugin,void be._pluginExecute(be.activePlugin,Me,[be,e])):void G(be,Ae,[be,Ae],Me)}function G(be,Ae,Me,ke){var Se=be.options.keyActions,_e,Ce;for(_e=0,Ce=Se.length;_e<Ce;_e++){if(Se[_e].plugin){if(be.forcedPlugin==Se[_e].plugin||be.isActionAllowed(Ae,Se[_e]))return Se[_e].options&&Me.push(Se[_e].options),be.activePlugin=Se[_e].plugin,be._pluginExecute(Se[_e].plugin,ke,Me),Ae.preventDefault(),Ae.stopPropagation(),!0;}else if(Se[_e].callback&&be.isActionAllowed(Ae,Se[_e]))return Se[_e].options&&Me.push(Se[_e].options),Ae.preventDefault(),Ae.stopPropagation(),Se[_e].callback.apply(be,Me),!0;Se[_e].removeSelectedShape&&be.isActionAllowed(Ae,Se[_e])&&(Ae.preventDefault(),Ae.stopPropagation(),be.selectedShapes.map(Pe=>{Pe.kill()}))}return!1}function U(){this.dom=document.createElementNS(xe.ns,'svg'),this.dom.setAttributeNS('http://www.w3.org/2000/xmlns/','xmlns:xlink','http://www.w3.org/1999/xlink'),pe.setAttributeTo(this.dom,{xmlns:xe.ns,'font-family':this.options.fontFamily,'font-size':this.options.fontSize}),this.defs=document.createElementNS(xe.ns,'defs'),this.dom.appendChild(this.defs),this.groupEvent=document.createElementNS(xe.ns,'g'),this.rectEvent=document.createElementNS(xe.ns,'rect'),pe.setAttributeTo(this.rectEvent,{'pointer-events':'fill',fill:'transparent'}),this.groupEvent.appendChild(this.rectEvent),this.dom.appendChild(this.groupEvent),this.domTitle=document.createElementNS(xe.ns,'text'),this.setTitle(this.options.title),pe.setAttributeTo(this.domTitle,{'text-anchor':'middle',y:20}),this.groupEvent.appendChild(this.domTitle),this.graphingZone=document.createElementNS(xe.ns,'g'),this.updateGraphingZone(),this.groupEvent.appendChild(this.graphingZone),this.axisGroup=document.createElementNS(xe.ns,'g'),this.graphingZone.appendChild(this.axisGroup),this.groupGrids=document.createElementNS(xe.ns,'g'),this.groupPrimaryGrids=document.createElementNS(xe.ns,'g'),this.groupSecondaryGrids=document.createElementNS(xe.ns,'g'),this.axisGroup.appendChild(this.groupGrids),this.groupGrids.appendChild(this.groupSecondaryGrids),this.groupGrids.appendChild(this.groupPrimaryGrids),this.plotGroup=document.createElementNS(xe.ns,'g'),this.graphingZone.appendChild(this.plotGroup),this.layers=[],this._makeClosingLines(),this.clip=document.createElementNS(xe.ns,'clipPath'),this.clip.setAttribute('id','_clipplot'+this._creation),this.defs.appendChild(this.clip),this.clipRect=document.createElementNS(xe.ns,'rect'),this.clip.appendChild(this.clipRect),this.clip.setAttribute('clipPathUnits','userSpaceOnUse'),this.markerArrow=document.createElementNS(this.ns,'marker'),this.markerArrow.setAttribute('viewBox','0 0 10 10'),this.markerArrow.setAttribute('id','arrow'+this._creation),this.markerArrow.setAttribute('refX','6'),this.markerArrow.setAttribute('refY','5'),this.markerArrow.setAttribute('markerUnits','strokeWidth'),this.markerArrow.setAttribute('markerWidth','8'),this.markerArrow.setAttribute('markerHeight','6'),this.markerArrow.setAttribute('orient','auto');var be=document.createElementNS(xe.ns,'path');be.setAttribute('d','M 0 0 L 10 5 L 0 10 z'),this.markerArrow.appendChild(be),this.defs.appendChild(this.markerArrow),this.markerHorizontalSplit=document.createElementNS(xe.ns,'marker'),this.markerHorizontalSplit.setAttribute('viewBox','0 0 6 8'),this.markerHorizontalSplit.setAttribute('id','horionzalsplit_'+this.getId()),this.markerHorizontalSplit.setAttribute('refX','3'),this.markerHorizontalSplit.setAttribute('refY','4'),this.markerHorizontalSplit.setAttribute('markerUnits','strokeWidth'),this.markerHorizontalSplit.setAttribute('markerWidth','6'),this.markerHorizontalSplit.setAttribute('markerHeight','8');var Ae=document.createElementNS(xe.ns,'line');Ae.setAttribute('x1','0'),Ae.setAttribute('y1','8'),Ae.setAttribute('x2','6'),Ae.setAttribute('y2','0'),Ae.setAttribute('stroke','black'),this.markerHorizontalSplit.appendChild(Ae),this.defs.appendChild(this.markerHorizontalSplit),this.markerVerticalSplit=document.createElementNS(xe.ns,'marker'),this.markerVerticalSplit.setAttribute('viewBox','0 0 8 6'),this.markerVerticalSplit.setAttribute('id','verticalsplit_'+this.getId()),this.markerVerticalSplit.setAttribute('refX','4'),this.markerVerticalSplit.setAttribute('refY','3'),this.markerVerticalSplit.setAttribute('markerUnits','strokeWidth'),this.markerVerticalSplit.setAttribute('markerWidth','8'),this.markerVerticalSplit.setAttribute('markerHeight','6');var Ae=document.createElementNS(xe.ns,'line');Ae.setAttribute('x1','0'),Ae.setAttribute('y1','0'),Ae.setAttribute('x2','8'),Ae.setAttribute('y2','6'),Ae.setAttribute('stroke','black'),this.markerVerticalSplit.appendChild(Ae),this.defs.appendChild(this.markerVerticalSplit),this.vertLineArrow=document.createElementNS(xe.ns,'marker'),this.vertLineArrow.setAttribute('viewBox','0 0 10 10'),this.vertLineArrow.setAttribute('id','verticalline'+this._creation),this.vertLineArrow.setAttribute('refX','0'),this.vertLineArrow.setAttribute('refY','5'),this.vertLineArrow.setAttribute('markerUnits','strokeWidth'),this.vertLineArrow.setAttribute('markerWidth','20'),this.vertLineArrow.setAttribute('markerHeight','10'),this.vertLineArrow.setAttribute('orient','auto'),this.vertLineArrow.setAttribute('stroke-width','1px');var Me=document.createElementNS(xe.ns,'path');Me.setAttribute('d','M 0 -10 L 0 10'),Me.setAttribute('stroke','black'),this.vertLineArrow.appendChild(Me),this.defs.appendChild(this.vertLineArrow),this.bypassHandleMouse=!1}function Z(be){if(!be.wrapper)throw'No wrapper exists. Cannot register the events.';be.wrapper.addEventListener('keydown',Ae=>{R(be,Ae,'keydown')}),be.wrapper.addEventListener('keypress',Ae=>{R(be,Ae,'keypress')}),be.wrapper.addEventListener('keyup',Ae=>{R(be,Ae,'keyup')}),be.groupEvent.addEventListener('mousemove',function(Ae){var Me=be._getXY(Ae);Q(be,Me.x,Me.y,Ae)}),be.dom.addEventListener('mouseleave',function(){ne(be)}),be.groupEvent.addEventListener('mousedown',function(Ae){if(be.focus(),!(3==Ae.which||Ae.ctrlKey)){var Me=be._getXY(Ae);K(be,Me.x,Me.y,Ae)}}),be.dom.addEventListener('mouseup',function(Ae){be.emit('mouseUp',Ae);var Me=be._getXY(Ae);te(be,Me.x,Me.y,Ae)}),be.dom.addEventListener('dblclick',function(Ae){be.emit('dblClick',Ae);var Me=be._getXY(Ae);ee(be,Me.x,Me.y,Ae)}),be.groupEvent.addEventListener('click',function(Ae){if(!(3==Ae.which||Ae.ctrlKey)){var Me=be._getXY(Ae);be.prevent(!1)||ie(be,Me.x,Me.y,Ae)}}),be.groupEvent.addEventListener('mousewheel',function(Ae){var Me=Ae.wheelDeltaY||Ae.wheelDelta||-Ae.deltaY;return se(be,Me,Ae),!1}),be.groupEvent.addEventListener('wheel',function(Ae){var Me=Ae.wheelDeltaY||Ae.wheelDelta||-Ae.deltaY;return se(be,Me,Ae),!1})}function K(be,Ae,Me,ke){return be.forcedPlugin?(be.activePlugin=be.forcedPlugin,void be._pluginExecute(be.activePlugin,'onMouseDown',[be,Ae,Me,ke])):void J(be,ke,[be,Ae,Me,ke],'onMouseDown')}function Q(be,Ae,Me,ke){if(be.bypassHandleMouse)return void be.bypassHandleMouse.handleMouseMove(ke);if(!(be.activePlugin&&be._pluginExecute(be.activePlugin,'onMouseMove',[be,Ae,Me,ke]))){;if(be._applyToAxes('handleMouseMove',[Ae-be.options.paddingLeft,ke],!0,!1),be._applyToAxes('handleMouseMove',[Me-be.options.paddingTop,ke],!1,!0),!be.activePlugin){var Se;if(be.options.trackingLine&&be.options.trackingLine.enable&&be.options.trackingLine.snapToSerie&&'common'==be.options.trackingLine.mode){var _e=be.options.trackingLine.snapToSerie;if(Se=_e.handleMouseMove(!1,!0),this.trackingObject)if(!Se)be.trackingObject.hide();else{be.trackingObject.show(),be.trackingObject.getPosition(0).x=Se.xClosest,be.trackingObject.getPosition(1).x=Se.xClosest,be.trackingObject.redraw();var Ae=_e.getXAxis().getPx(Se.xClosest)+be.options.paddingLeft}var Ce=be.options.trackingLine.series;Ce||(Ce=be.getSeries().map(function(Le){return{serie:Le,withinPx:20,withinVal:-1}})),be._trackingLegend=me(be,Ce,Ae,Me,be._trackingLegend,be.options.trackingLine.textMethod,Se.xClosest)}}if(be.options.onMouseMoveData){var Pe={};for(var ve=0;ve<be.series.length;ve++)Pe[be.series[ve].getName()]=be.series[ve].handleMouseMove(!1,!0);be.options.onMouseMoveData.call(be,ke,Pe)}J(be,ke,[be,Ae,Me,ke],'onMouseMove')}}function J(be,Ae,Me,ke){var Se=be.options.mouseActions,Pe=!1,_e,Ce;for(_e=0,Ce=Se.length;_e<Ce;_e++)if(Se[_e].plugin){if(be.forcedPlugin==Se[_e].plugin||be.isActionAllowed(Ae,Se[_e])){Se[_e].options&&Me.push(Se[_e].options),be.activePlugin=Se[_e].plugin,be._pluginExecute(Se[_e].plugin,ke,Me),Pe=!0;continue}}else if(Se[_e].callback&&be.isActionAllowed(Ae,Se[_e])){Se[_e].options&&Me.push(Se[_e].options),Se[_e].callback.apply(be,Me),Pe=!0;continue}else if(Se[_e].series){var ve;for('all'===Se[_e].series&&(ve=be.series),Array.isArray(Se[_e].series)||(ve=[ve]),Se[_e].options&&Me.push(Se[_e].options);0<ve.length;_e++)be._serieExecute(ve[_e],ke,Me);Pe=!0;continue}return Pe}function $(be){var Ae=document.createElement('div');return Ae.setAttribute('class','trackingLegend'),Ae.style.position='absolute',Ae.style.borderRadius='4px',Ae.style.boxShadow='1px 1px 3px 0px rgba(100,100,100,0.6)',Ae.style.border='2px solid #333333',Ae.style.backgroundColor='rgba(255, 255, 255, 0.5 )',Ae.style.pointerEvents='none',Ae.style.paddingTop='5px',Ae.style.paddingBottom='5px',Ae.style.paddingLeft='10px',Ae.style.paddingRight='10px',be.getWrapper().insertBefore(Ae,be.getDom()),Ae}function ee(be,Ae,Me,ke){be.options.dblclick,J(be,ke,[Ae,Me,ke],'onDblClick')}function te(be,Ae,Me,ke){return be.bypassHandleMouse?(be.bypassHandleMouse.handleMouseUp(ke),void(be.activePlugin=!1)):void(be._pluginExecute(be.activePlugin,'onMouseUp',[be,Ae,Me,ke]),be.activePlugin=!1)}function ie(be,Ae,Me,ke){be.emit('click',[be,Ae,Me,ke]),J(be,ke,[Ae,Me,ke],'onClick'),ke.target.jsGraphIsShape||be.prevent(!1)||!be.options.shapesUnselectOnClick||be.unselectShapes()}function ae(be,Ae,Me,ke){var Me=Me||{},_e={def:{x:be.getConstructor('graph.axis.x'),y:be.getConstructor('graph.axis.y')},time:{x:be.getConstructor('graph.axis.x.time')},bar:{x:be.getConstructor('graph.axis.x.bar')}},Se;switch(Me.type){case'time':var Ce=_e.time;break;case'bar':var Ce=_e.bar;break;case'broken':var Ce=_e.broken;break;default:var Ce=_e.def;}return'top'===ke||'bottom'===ke?Se=Ce.x:'left'===ke||'right'===ke?Se=Ce.y:void 0,Ae=Ae||0,'object'==typeof Ae&&(Me=Ae,Ae=0),be.axis[ke][Ae]||(be.axis[ke][Ae]=new Se(be,ke,Me),be.axis[ke][Ae].init(be,Me)),be.axis[ke][Ae]}function re(be,Ae,Me,ke,Se,_e){if(!1!==be.options.close){var Ce=0;be.axis[Ae].map(function(Pe){Pe.isDisplayed()&&!Pe.floating&&Ce++}),(!0===be.options.close||be.options.close[Ae])&&0==Ce?(be.closingLines[Ae].setAttribute('display','block'),be.closingLines[Ae].setAttribute('x1',Me),be.closingLines[Ae].setAttribute('x2',ke),be.closingLines[Ae].setAttribute('y1',Se),be.closingLines[Ae].setAttribute('y2',_e)):be.closingLines[Ae].setAttribute('display','none')}}function se(be,Ae,Me){J(be,Me,[Ae,Me],'onMouseWheel')&&(Me.preventDefault(),Me.stopPropagation())}function ne(be){be.options.handleMouseLeave&&be.options.handleMouseLeave.call(be)}function oe(be){var Ae=be._axesHaveChanged;return be._axesHaveChanged=!1,Ae}function le(be){var Ae=be._sizeChanged;return be._sizeChanged=!1,Ae}Object.defineProperty(E,'__esModule',{value:!0});var de=F(X),pe=function(Ae){if(Ae&&Ae.__esModule)return Ae;var Me={};if(null!=Ae)for(var ke in Ae)Object.prototype.hasOwnProperty.call(Ae,ke)&&(Me[ke]=Ae[ke]);return Me.default=Ae,Me}(Y),ge=F(I),ue=F(O);const ce={title:'',paddingTop:30,paddingBottom:5,paddingLeft:20,paddingRight:20,close:{left:!0,right:!0,top:!0,bottom:!0},closeColor:'black',fontSize:12,fontFamily:'Myriad Pro, Helvetica, Arial',plugins:{},pluginAction:{},mouseActions:[],keyActions:[],wheel:{},dblclick:{},shapesUnselectOnClick:!0,shapesUniqueSelection:!0};var he=new Map;class xe extends ge.default{constructor(be,Ae,Me){for(var ke in super(),this._creation=pe.guid(),this._drawn=!1,be!==Object(be)||be instanceof HTMLElement?'string'==typeof be?be=document.getElementById(be):'number'==typeof be.length&&(be=be[0]):(Me=Ae,Ae=be,be=null),this.options=pe.extend({},ce,Ae),U.bind(this)(),be&&this.setWrapper(be),this.prevented=!1,this.axis={left:[],top:[],bottom:[],right:[]},this.shapes=[],this.shapesLocked=!1,this.plugins={},this.options.pluginAction)this.options.pluginAction.plugin=ke,this.options.mouseActions.push(this.options.pluginAction);if(this.selectedShapes=[],this.series=[],this._axesHaveChanged=!0,this.options.hasOwnProperty('padding')&&pe.isNumeric(this.options.padding)&&(this.options.paddingTop=this.options.paddingBottom=this.options.paddingLeft=this.options.paddingRight=this.options.padding),this.currentAction=!1,this.ns=xe.ns,this.nsxlink=xe.nsxlink,Me)for(var ke in Me)for(var Se=0,_e=Me[ke].length;Se<_e;Se++)'top'==ke?this.getTopAxis(Se,Me[ke][Se]):'bottom'==ke?this.getBottomAxis(Se,Me[ke][Se]):'left'==ke?this.getLeftAxis(Se,Me[ke][Se]):'right'==ke?this.getRightAxis(Se,Me[ke][Se]):void 0;this._pluginsInit()}setWrapper(be){if(!be)throw'The wrapper DOM element was not found.';if(!be.appendChild)throw'The wrapper appears to be an invalid HTMLElement';if(be.style['-webkit-user-select']='none',be.style['-moz-user-select']='none',be.style['-o-user-select']='none',be.style['-ms-user-select']='none',be.style['user-select']='none',be.style.position='relative',be.style.outline='none',be.setAttribute('tabindex',1),this.wrapper=be,!this.height||!this.width){var Ae=getComputedStyle(be),Me=parseInt(Ae.width),ke=parseInt(Ae.height);this.setSize(Me,ke),this._resize()}be.appendChild(this.dom),Z(this)}getDom(){return this.dom}getId(){return this._creation}getWrapper(){return this.wrapper}setOption(be,Ae){return this.options[be]=Ae,this}setTitle(be){this.options.title=be,this.domTitle.textContent=be}displayTitle(){this.domTitle.setAttribute('display','inline')}hideTitle(){this.domTitle.setAttribute('display','none')}hide(){'none'!==this.dom.style.display&&(this.dom.style.display='none')}show(){'none'==this.dom.style.display&&(this.dom.style.display='initial')}redraw(be){if(this.width&&this.height)return this.sizeSet?!be||oe(this)||le(this)?(this.executeRedrawSlaves(),B(this),!0):(this.executeRedrawSlaves(!0),!1):(this._resize(),this.executeRedrawSlaves(),!0)}executeRedrawSlaves(){this._pluginsExecute('preDraw')}draw(be){this.drawn=!0,this.updateLegend(!0),this.drawSeries(this.redraw(!be))}delayUpdate(){return this._lockUpdate=!0,this}doUpdate(){return this.legend&&this.legend.update(),this.draw(),this.legend&&this.legend.update(),this}resumeUpdate(){return this._lockUpdate=!1,this}isDelayedUpdate(){return this._lockUpdate}setWidth(be,Ae){this.width=be,Ae||this._resize()}setHeight(be,Ae){this.height=be,Ae||this._resize()}resize(be,Ae){return be&&Ae&&this.setSize(be,Ae),this._resize(),this}setSize(be,Ae){this.setWidth(be,!0),this.setHeight(Ae,!0),this.getDrawingHeight(),this.getDrawingWidth()}getWidth(){return this.width}getHeight(){return this.height}getPaddingTop(){return this.options.paddingTop}getPaddingLeft(){return this.options.paddingLeft}getPaddingBottom(){return this.options.paddingBottom}getPaddingRight(){return this.options.paddingRight}getDrawingHeight(be){return be&&this.innerHeight?this.innerHeight:this.innerHeight=this.height-this.options.paddingTop-this.options.paddingBottom}getDrawingWidth(be){return be&&this.innerWidth?this.innerWidth:this.innerWidth=this.width-this.options.paddingLeft-this.options.paddingRight}cacheOffset(){this.offsetCached=pe.getOffset(this.wrapper)}uncacheOffset(){this.offsetCached=!1}getXAxis(be,Ae){return 0<this.axis.top.length&&0==this.axis.bottom.length?this.getTopAxis(be,Ae):this.getBottomAxis(be,Ae)}getYAxis(be,Ae){return 0<this.axis.right.length&&0==this.axis.left.length?this.getRightAxis(be,Ae):this.getLeftAxis(be,Ae)}getTopAxis(be,Ae){return ae(this,be,Ae,'top')}getBottomAxis(be,Ae){return ae(this,be,Ae,'bottom')}getLeftAxis(be,Ae){return ae(this,be,Ae,'left')}getRightAxis(be,Ae){return ae(this,be,Ae,'right')}setXAxis(be,Ae){this.setBottomAxis(be,Ae)}setYAxis(be,Ae){this.setLeftAxis(be,Ae)}setLeftAxis(be,Ae){Ae=Ae||0,this.axis.left[Ae]&&this.axis.left[Ae].kill(),this.axis.left[Ae]=be}setRightAxis(be,Ae){Ae=Ae||0,this.axis.right[Ae]&&this.axis.right[Ae].kill(),this.axis.right[Ae]=be}setTopAxis(be,Ae){Ae=Ae||0,this.axis.top[Ae]&&this.axis.top[Ae].kill(),this.axis.top[Ae]=be}setBottomAxis(be,Ae){Ae=Ae||0,this.axis.bottom[Ae]&&this.axis.bottom[Ae].kill(),this.axis.bottom[Ae]=be}killAxis(be,Ae=!1,Me=!1){var ke;be.isX()&&(-1<(ke=this.axis.bottom.indexOf(be))&&this.axis.bottom.splice(ke,1),-1<(ke=this.axis.top.indexOf(be))&&this.axis.top.splice(ke,1),!Me&&this.series.map(Se=>{Se.getXAxis()==be&&Se.kill()})),be.isY()&&(-1<(ke=this.axis.left.indexOf(be))&&this.axis.left.splice(ke,1),-1<(ke=this.axis.right.indexOf(be))&&this.axis.right.splice(ke,1),!Me&&this.series.map(Se=>{Se.getYAxis()==be&&Se.kill()})),this.axisGroup.removeChild(be.group),this.groupPrimaryGrids.removeChild(be.gridPrimary),this.groupSecondaryGrids.removeChild(be.gridSecondary),Ae||this.draw(!0)}hasXAxis(be){return this.hasTopAxis(be)||this.hasBottomAxis(be)}hasYAxis(be){return this.hasLeftAxis(be)||this.hasRightAxis(be)}hasTopAxis(be){return this.hasAxis(be,this.axis.top)}hasBottomAxis(be){return this.hasAxis(be,this.axis.bottom)}hasLeftAxis(be){return this.hasAxis(be,this.axis.left)}hasRightAxis(be){return this.hasAxis(be,this.axis.right)}hasAxis(be,Ae){for(var Me=0,ke=Ae.length;Me<ke;Me++){if(Ae[Me]==be)return!0;if(Ae[Me].hasAxis(be))return!0}return!1}autoscaleAxes(){return this._applyToAxes('setMinMaxToFitSeries',null,!0,!0),this}autoscale(){return this.autoscaleAxes(...arguments)}autoScale(){return this.autoscaleAxes(...arguments)}autoScaleAxes(){return this.autoscaleAxes(...arguments)}autoScaleAxis(be){return be?(be.setMinMaxToFitSeries(),this):this}setBackgroundColor(be){return this.rectEvent.setAttribute('fill',be),this}getAxisState(){var be={};for(var Ae in this.axis)be[Ae]=this.axis[Ae].map(function(Me){return[Me.getCurrentMin(),Me.getCurrentMax()]});return be}setAxisState(be){var Ae,Me;for(var ke in be)if(this.axis[ke])for(Ae=0,Me=be[ke].length;Ae<Me;Ae++)this.axis[ke][Ae]&&(this.axis[ke][Ae].setCurrentMin(be[ke][Ae][0]),this.axis[ke][Ae].setCurrentMax(be[ke][Ae][1]));this.draw()}saveAxisState(be){return this.savedAxisState=this.savedAxisState||{},this.savedAxisState[be]=this.getAxisState(),this}recallAxisState(){return this.savedAxisState[savedName]&&this.recallAxisState(this.savedAxisState[savedName]),this}_applyToAxis(be){switch(be){case'string':return function(Ae,Me,ke){for(var Se=0;Se<this.axis[Ae].length;Se++)this.axis[Ae][Se][Me].apply(this.axis[Ae][Se],ke)};break;case'function':return function(Ae,Me,ke){for(var Se=0;Se<this.axis[Ae].length;Se++)Me.call(this,this.axis[Ae][Se],Ae,ke)};}}getBoundaryAxis(be,Ae,Me){var ke=this.getBoundaryAxisFromSeries(be,Ae,Me);return ke}getBoundaryAxisFromSeries(be,Ae,Me){var ke='min'==Ae,_e=be.isX()?['getMinX','getMaxX']:['getMinY','getMaxY'],Ce=_e[ke?0:1],Pe=ke?+(1/0):-(1/0),Se,ve,Le,we,Te,Ee;for(Se=ke?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,Le=this.getSeriesFromAxis(be,!0),(Te=0,Ee=Le.length);Te<Ee;Te++)(ve=Le[Te],!!ve.isShown())&&(we=ve[Ce](Me),Se=Math[Ae](isNaN(Se)?Pe:Se,isNaN(we)?Pe:we));return Se}getSeriesFromAxis(be){for(var Ae=[],Me=this.series.length-1;0<=Me;Me--)(this.series[Me].getXAxis()==be||this.series[Me].getYAxis()==be)&&Ae.push(this.series[Me]);return Ae}updateDataMinMaxAxes(be){var Ae=['bottom','top','left','right'],Me,ke,Se,_e;for(ke=0,Se=Ae.length;ke<Se;ke++)for(_e=this.axis[Ae[ke]].length-1;0<=_e;_e--)(Me=this.axis[Ae[ke]][_e],2>ke?'x':'y',!Me.disabled)&&(Me.setMinValueData(this.getBoundaryAxis(this.axis[Ae[ke]][_e],'min',be)),Me.setMaxValueData(this.getBoundaryAxis(this.axis[Ae[ke]][_e],'max',be)))}_applyToAxes(be,Ae,Me,ke){var Se=[],_e=0,Ce;for((Me||void 0==Me)&&(Se.push('top'),Se.push('bottom')),(ke||void 0==ke)&&(Se.push('left'),Se.push('right')),Ce=Se.length;_e<Ce;_e++)this._applyToAxis(typeof be).call(this,Se[_e],be,Ae)}findAxesLinkedTo(be){var Ae=[];return this._applyToAxes(function(Me){Me.linkedToAxis&&Me.linkedToAxis.axis==be&&Ae.push(Me)},{},be instanceof this.getConstructor('graph.axis.x'),be instanceof this.getConstructor('graph.axis.y')),Ae}_axisHasChanged(){this._axesHaveChanged=!0}newSerie(be,Ae,Me){let ke;return('object'==typeof Ae||Me||(Me=Ae,Ae={}),Me||(Me=xe.SERIE_LINE),ke=this.getSerie(be))?ke:(ke=W(this,be,Ae,Me))?(this.series.push(ke),this.emit('newSerie',ke),ke):void 0}getSerie(be){if('number'==typeof be)return this.series[be]||!1;'function'==typeof be&&(be=be());for(var Ae=0,Me=this.series.length;Ae<Me;Ae++)if(this.series[Ae].getName()==be||this.series[Ae]==be)return this.series[Ae];return!1}getSeries(){return this.series}allSeries(...be){return this.series.filter(Ae=>{return be.include(Ae.getType())})}drawSerie(be,Ae){if(!be.draw)throw'Serie has no method draw';be.draw(Ae)}drawSeries(be){if(this.width&&this.height)for(var Ae=this.series.length-1;0<=Ae;Ae--)this.series[Ae].isShown()&&this.drawSerie(this.series[Ae],be)}resetSeries(){this.removeSeries()}killSeries(){this.resetSeries()}removeSeries(){for(;this.series[0];)this.series[0].kill(!0);this.series=[],this.legend&&this.legend.update()}selectSerie(be,Ae){'object'==typeof be||(be=this.getSerie(be));this.selectedSerie==be&&this.selectedSerie.selectionType==Ae||(this.selectedSerie!==be&&this.selectedSerie&&this.unselectSerie(this.selectedSerie),this.selectedSerie=be,this.triggerEvent('onSelectSerie',be),be.select(Ae||'selected'))}getSelectedSerie(){return this.selectedSerie}unselectSerie(be){be.unselect&&(be.unselect(),this.selectedSerie=!1,this.triggerEvent('onUnselectSerie',be))}getShapesOfSerie(be){for(var Ae=[],Me=this.shapes.length-1;0<=Me;Me--)this.shapes[Me].getSerie()==be&&Ae.push(this.shapes[Me]);return Ae}makeToolbar(be){var Ae=this.getConstructor('graph.toolbar');return Ae?this.toolbar=new Ae(this,be):pe.throwError('No constructor exists for toolbar')}getShapes(){return this.shapes||[]}newShape(be,Ae,Me,ke){var Se=this;if(this.prevent(!1),!Me&&(this.emit('beforeNewShape',Ae),this.prevent(!1)))return!1;'object'==typeof be&&(Me=Ae,Ae=be,be=Ae.type),Ae=Ae||{},Ae._id=pe.guid();var _e;if(_e='function'==typeof be?be:this.getConstructor('graph.shape.'+be),!_e)return pe.throwError('No constructor for this shape');var Ce=new _e(this,Ae);if(!Ce)return pe.throwError('Failed to construct shape.');if(Ce.type=be,Ce.graph=this,Ce._data=Ae,void 0!==Ae.properties&&Ce.setProperties(Ae.properties),Ce.init(this,ke),Ae.position)for(var Pe=0,ve=Ae.position.length;Pe<ve;Pe++)Ce.setPosition(new de.default(Ae.position[Pe]),Pe);if(void 0!==Ae.fillColor&&Ce.setFillColor(Ae.fillColor),void 0!==Ae.fillOpacity&&Ce.setFillOpacity(Ae.fillOpacity),void 0!==Ae.strokeColor&&Ce.setStrokeColor(Ae.strokeColor),void 0!==Ae.strokeWidth&&Ce.setStrokeWidth(Ae.strokeWidth),void 0!==Ae.layer&&Ce.setLayer(Ae.layer),!0==Ae.locked&&Ce.lock(),!0==Ae.movable&&Ce.movable(),!0==Ae.selectable&&Ce.selectable(),!0==Ae.resizable&&Ce.resizable(),void 0!==Ae.attributes&&Ce.setProp('attributes',Ae.attributes),void 0!==Ae.handles&&Ce.setProp('handles',Ae.handles),void 0!==Ae.selectOnMouseDown&&Ce.setProp('selectOnMouseDown',!0),void 0!==Ae.selectOnClick&&Ce.setProp('selectOnClick',!0),void 0!==Ae.highlightOnMouseOver&&Ce.setProp('highlightOnMouseOver',!0),Ae.labelEditable&&Ce.setProp('labelEditable',Ae.labelEditable),Ae.labels&&!Ae.label&&(Ae.label=Ae.labels),void 0!==Ae.label){Array.isArray(Ae.label)||(Ae.label=[Ae.label]);for(var Pe=0,ve=Ae.label.length;Pe<ve;Pe++)Ce.showLabel(Pe),Ce.setLabelText(Ae.label[Pe].text,Pe),Ce.setLabelPosition(Ae.label[Pe].position,Pe),Ce.setLabelColor(Ae.label[Pe].color||'black',Pe),Ce.setLabelSize(Ae.label[Pe].size,Pe),Ce.setLabelAngle(Ae.label[Pe].angle||0,Pe),Ce.setLabelBaseline(Ae.label[Pe].baseline||'no-change',Pe),Ce.setLabelAnchor(Ae.label[Pe].anchor||'start',Pe),Ce.setLabelBackgroundColor(Ae.label[Pe].backgroundColor||'transparent',Pe),Ce.setLabelBackgroundOpacity(Ae.label[Pe].backgroundOpacity||1,Pe)}return Ae.serie&&Ce.setSerie(this.getSerie(Ae.serie)),Ce.createHandles(),this.shapes.push(Ce),Me||this.emit('newShape',Ce,Ae),Ce}newPosition(){return new de.default(...arguments)}redrawShapes(){for(var be=0,Ae=this.shapes.length;be<Ae;be++)this.shapes[be].redraw()}removeShapes(){for(var be=0,Ae=this.shapes.length;be<Ae;be++)this.shapes[be]&&this.shapes[be].kill&&this.shapes[be].kill(!0);this.shapes=[]}selectShape(be,Ae){if(be){if(-1<this.selectedShapes.indexOf(be))return!1;if(!be.isSelectable())return!1;Ae||this.emit('beforeShapeSelect',be),this.prevent(!1)||(0<this.selectedShapes.length&&this.options.shapesUniqueSelection&&this.unselectShapes(Ae),be._select(Ae),this.selectedShapes.push(be),!Ae&&this.emit('shapeSelect',be))}}getSelectedShapes(){return this.selectedShapes}unselectShape(be,Ae){if(-1!=this.selectedShapes.indexOf(be))return Ae||this.emit('beforeShapeUnselect',be),this.cancelUnselectShape?void(this.cancelUnselectShape=!1):void(be._unselect(),this.selectedShapes.splice(this.selectedShapes.indexOf(be),1),!Ae&&this.emit('shapeUnselect',be))}unselectShapes(be){for(;this.selectedShapes[0];)this.unselectShape(this.selectedShapes[0],be);return this}_removeShape(be){this.shapes.splice(this.shapes.indexOf(be),1)}appendShapeToDom(be){be.isHTML()&&this.wrapper.insertBefore(be._dom,this.dom),this.getLayer(be.getLayer(),'shape').appendChild(be.group)}removeShapeFromDom(be){be.isHTML()&&this.wrapper.removeChild(be._dom),this.getLayer(be.getLayer(),'shape').removeChild(be.group)}appendSerieToDom(be){this.getLayer(be.getLayer(),'serie').appendChild(be.groupMain)}removeSerieFromDom(be){this.getLayer(be.getLayer(),'serie').removeChild(be.groupMain)}getLayer(be,Ae){if(!this.layers[be]){this.layers[be]=[],this.layers[be][0]=document.createElementNS(xe.ns,'g'),this.layers[be][0].setAttribute('data-layer',be),this.layers[be][1]=document.createElementNS(xe.ns,'g'),this.layers[be][2]=document.createElementNS(xe.ns,'g'),this.layers[be][0].appendChild(this.layers[be][1]),this.layers[be][0].appendChild(this.layers[be][2]);for(var Me=1,ke;!(ke=this.layers[be-Me])&&0<=be-Me;)Me++;ke?ke.nextSibling?this.plotGroup.insertBefore(this.layers[be][0],ke.nextSibling):this.plotGroup.appendChild(this.layers[be][0]):this.plotGroup.insertBefore(this.layers[be][0],this.plotGroup.firstChild)}return this.layers[be]['shape'==Ae?2:1]}focus(){this.wrapper.focus()}elementMoving(be){this.bypassHandleMouse=be}stopElementMoving(be){be&&be==this.bypassHandleMouse?this.bypassHandleMouse=!1:!be&&(this.bypassHandleMouse=!1)}_makeClosingLines(){this.closingLines={};for(var be=['top','bottom','left','right'],Ae=0;4>Ae;Ae++){var Me=document.createElementNS(xe.ns,'line');Me.setAttribute('stroke',this.options.closeColor),Me.setAttribute('shape-rendering','crispEdges'),Me.setAttribute('stroke-linecap','square'),Me.setAttribute('display','none'),this.closingLines[be[Ae]]=Me,this.graphingZone.appendChild(Me)}}isActionAllowed(be,Ae){if(Ae.type===be.type||void 0===Ae.type&&'mousedown'===be.type||('wheel'===be.type||'mousewheel'===be.type)&&'mousewheel'==Ae.type)return Ae.enabled&&('function'==typeof Ae.enabled?!Ae.enabled(this):!actions.enabled)||Ae.key&&Ae.key!==be.keyCode&&{backspace:8,enter:13,tab:9,shift:16,ctrl:17,alt:18,pause:19,escape:27,up:33,down:34,left:37,right:39}[Ae.key]!==be.keyCode?void 0:(void 0===Ae.shift&&(Ae.shift=!1),void 0===Ae.ctrl&&(Ae.ctrl=!1),void 0===Ae.meta&&(Ae.meta=!1),void 0===Ae.alt&&(Ae.alt=!1),be.shiftKey==Ae.shift&&be.ctrlKey==Ae.ctrl&&be.metaKey==Ae.meta&&be.altKey==Ae.alt)}forcePlugin(be){this.forcedPlugin=be}unforcePlugin(){this.forcedPlugin=!1}_pluginsExecute(be,Ae){for(var Me in this.plugins)this.plugins[Me]&&this.plugins[Me][be]&&this.plugins[Me][be].apply(this.plugins[Me],Ae)}_pluginExecute(be,Ae,Me){!be||this.plugins[be]&&this.plugins[be][Ae]&&this.plugins[be][Ae].apply(this.plugins[be],Me)}pluginYieldActiveState(){this.activePlugin=!1}_serieExecute(be,Ae,Me){'object'!=typeof serie&&(serie=this.getSerie(serie)),'function'==typeof serie[Ae]&&serie.apply(serie,Me)}_pluginsInit(){var be,Ae,Me;for(var ke in this.options.plugins)if(Ae=ke,Me=this.options.plugins[ke],be=this.getConstructor('graph.plugin.'+Ae),be){var Se=pe.extend(!0,{},be.defaults(),Me);this.plugins[Ae]=new be(Se),pe.mapEventEmission(this.plugins[Ae].options,this.plugins[Ae]),this.plugins[Ae].init(this,Me)}else pe.throwError('Plugin "'+Ae+'" has not been registered')}getPlugin(be){var Ae=this.plugins[be];return Ae?Ae:pe.throwError('Plugin "'+be+'" has not been loaded or properly registered')}triggerEvent(){var be=arguments[0],Ae=Array.prototype.splice.apply(arguments,[0,1]);if('function'==typeof this.options[be])return this.options[be].apply(this,arguments)}makeLegend(be){if(this.legend)return this.legend;var Ae=this.getConstructor('graph.legend');if(Ae)this.legend=new Ae(this,be);else return pe.throwError('Graph legend is not available as it has not been registered');return this.legend}updateLegend(be=!1){if(this.legend)return this.legend.update(be),this}getLegend(){return this.legend?this.legend:void 0}requireLegendUpdate(){this.legend&&this.legend.requireDelayedUpdate()}orthogonalProjectionSetup(){this.options.zAxis=pe.extend(!0,{maxZ:10,minZ:0,shiftX:-25,shiftY:-15,xAxis:this.getXAxis(),yAxis:this.getYAxis()})}orthogonalProjectionUpdate(){this.zAxis||(this.zAxis={g:document.createElementNS(xe.ns,'g'),l:document.createElementNS(xe.ns,'line')},this.zAxis.g.appendChild(this.zAxis.l),this.groupGrids.appendChild(this.zAxis.g));let be=this.options.zAxis.xAxis,Ae=this.options.zAxis.yAxis;var Me=be.getMinPx(),ke=Ae.getMinPx(),Se=be.getZProj(this.options.zAxis.maxZ),_e=Ae.getZProj(this.options.zAxis.maxZ);this.zAxis.l.setAttribute('stroke','black'),this.zAxis.l.setAttribute('x1',Me),this.zAxis.l.setAttribute('x2',Me+Se),this.zAxis.l.setAttribute('y1',ke),this.zAxis.l.setAttribute('y2',ke+_e),this.updateDataMinMaxAxes(!0);var Ce=this.series.map(ve=>{return[ve.getZPos(),ve]});Ce.sort((ve,Le)=>{return Le[0]-ve[0]});let Pe=0;Ce.forEach(ve=>{ve[1].setLayer(Pe),this.appendSerieToDom(ve[1]),Pe++}),this.drawSeries(!0)}kill(){this.wrapper.removeChild(this.dom)}_removeSerie(be){this.series.splice(this.series.indexOf(be),1)}contextListen(be,Ae,Me){if(this,this.options.onContextMenuListen)return this.options.onContextMenuListen(be,Ae,Me)}lockShapes(){this.shapesLocked=!0;for(var be=0,Ae=this.shapes.length;be<Ae;be++)this.shapes[be].moving=!1,this.shapes[be].resizing=!1}unlockShapes(){this.shapesLocked=!1}prevent(be){var Ae=this.prevented;return-1!=be&&(this.prevented=void 0==be||be),Ae}_getXY(be){var Ae=be.pageX,Me=be.pageY,ke=this.offsetCached||pe.getOffset(this.wrapper);return Ae-=ke.left,Me-=ke.top,{x:Ae,y:Me}}_resize(){this.width&&this.height&&(this.getDrawingWidth(),this.getDrawingHeight(),this.sizeSet=!0,this.dom.setAttribute('width',this.width),this.dom.setAttribute('height',this.height),this.domTitle.setAttribute('x',this.width/2),this._sizeChanged=!0,this.drawn&&(this.requireLegendUpdate(),this.draw(!0)))}updateGraphingZone(){pe.setAttributeTo(this.graphingZone,{transform:'translate('+this.options.paddingLeft+', '+this.options.paddingTop+')'}),this._sizeChanged=!0}getDrawingSpaceWidth(){return()=>this.drawingSpaceWidth}getDrawingSpaceHeight(){return()=>this.drawingSpaceHeight}getDrawingSpaceMinX(){return()=>this.drawingSpaceMinX}getDrawingSpaceMinY(){return()=>this.drawingSpaceMinY}getDrawingSpaceMaxX(){return()=>this.drawingSpaceMaxX}getDrawingSpaceMaxY(){return()=>this.drawingSpaceMaxY}trackingLine(be){var Ae=this;return'boolean'==typeof be?void(this.options.trackingLine&&(this.options.trackingLine.enable=be)):(be&&(this.options.trackingLine=be),be.series=be.series||[],be.enable=void 0===be.enable||!!be.enable,'individual'==be.mode?be.series&&(!Array.isArray(be.series)&&('all'==be.series?be.series=this.series.map(Me=>{serie:;}):be.series=[be.series]),be.series.forEach(Me=>{if('object'!=typeof Me.serie){if('object'!=typeof Me)throw'Misuse of the trackingLine() method. Each serie must be an object with the serie property: { series: [ { serie: jsGraphSerie, options: { ... someOptions } } ] }';Me.serie=this.getSerie(Me.serie)}Me.serie&&Ae.addSerieToTrackingLine(Me.serie,Me)})):be.series.map(Me=>{Me.serie.disableTracking()}),!be.noLine)?(this.trackingObject||(this.trackingObject=this.newShape('line',pe.extend(!0,{position:[{y:'min'},{y:'max'}],stroke:'black',layer:-1},be.trackingLineShapeOptions))),this.trackingObject.draw(),this.trackingObject):void 0}addSerieToTrackingLine(be,Ae){this.options.trackingLine||this.trackingLine({mode:'individual'}),this.options.trackingLine.series.push(Object.assign({serie:be},Ae)),be.enableTracking((Me,ke,Se,_e)=>{this.options.trackingLine.enable&&ke&&(this.trackingObject&&(this.trackingObject.show(),this.trackingObject.getPosition(0).x=ke.trueX,this.trackingObject.getPosition(1).x=ke.trueX,this.trackingObject.redraw()),Me._trackingLegend=me(this,{serie:Me},Se,_e,Me._trackingLegend,Ae.textMethod?Ae.textMethod:Ce=>{for(var Pe in Ce)return Ce[Pe].serie.serie.getName()+': '+Ce[Pe].serie.serie.getYAxis().valueToHtml(Ce[Pe].yValue)},ke.trueX),Me._trackingLegend&&(Me._trackingLegend.style.display='block'))},Me=>{this.trackingObject&&this.trackingObject.hide(),Me.trackingShape&&Me.trackingShape.hide(),Me._trackingLegend&&(Me._trackingLegend.style.display='none'),Me._trackingLegend=me(this,{serie:Me},!1,!1,Me._trackingLegend,!1,!1)})}setKatexRenderer(be){this._katexRenderer=be}hasKatexRenderer(){return!!this._katexRenderer}renderWithKatex(be,Ae){if(this._katexRenderer){Ae?Ae.removeChild(Ae.firstChild):Ae=document.createElementNS(xe.ns,'foreignObject');let Me=document.createElement('div');return Ae.appendChild(Me),this._katexRenderer(be,Me),Ae}return!1}static fromSchema(be,Ae){var ke={},Se={left:[],top:[],right:[],bottom:[]},Me;return be.title&&(ke.title=be.title),be.axis&&be.axis.map(function(_e){_e.type||pe.throwError('Axis type is required (top, bottom, left or right)');var Ce={};_e.label&&(Ce.labelValue=_e.label),void 0!==_e.unit&&(Ce.unit=_e.unit),void 0!==_e.unitWrapperAfter&&(Ce.unitWrapperAfter=_e.unitWrapperAfter),void 0!==_e.unitWrapperBefore&&(Ce.unitWrapperBefore=_e.unitWrapperBefore),void 0!==_e.min&&(Ce.forcedMin=_e.min),void 0!==_e.max&&(Ce.forcedMax=_e.max),void 0!==_e.flip&&(Ce.flipped=_e.flip),Se[_e.type].push(Ce),_e._jsGraphIndex=Se[_e.type].length-1}),Me=new xe(Ae,ke,Se),be.width&&Me.setWidth(be.width),be.height&&Me.setHeight(be.width),Me._resize(),be.data&&be.data.map(function(_e){var Ce=_e.type,ve={},Pe,Le;switch(_e.type){case'bar':pe.throwError('Bar charts not supported'),Ce=!1;break;case'scatter':Ce=xe.SERIE_SCATTER;break;case'box':Ce=xe.SERIE_BOX,('x'==_e.orientation||'y'==_e.orientation)&&(ve.orientation=_e.orientation);break;default:Ce=xe.SERIE_LINE;}if(!Ce)return void pe.throwError('No valid serie type was found');if(Pe=Me.newSerie(_e.id||_e.label||pe.guid(),ve,Ce),_e.lineStyle&&_e.lineStyle.map(function(Xe){var De={};Xe.styleName=Xe.styleName||'unselected',Ce===xe.SERIE_LINE?(void 0!==Xe.lineWidth&&(De.lineWidth=Xe.lineWidth),void 0!==Xe.color&&(De.lineColor=Xe.color),Xe.lineStyle&&(De.lineStyle=Xe.lineStyle),Pe.setStyle(De,Xe.styleName)):void 0}),_e.style&&_e.style.map(function(Xe){Xe.styleName=Xe.styleName||'unselected',Array.isArray(Xe.styles)||(Xe.styles=[Xe.styles]);var De=Xe.styles.map(function(Ye){switch(Ce){case xe.SERIE_LINE:return{type:Ye.shape,zoom:Ye.zoom,strokeWidth:Ye.lineWidth,strokeColor:Ye.lineColor,fillColor:Ye.color,points:Ye.points};break;case xe.SERIE_BOX:return Ye;break;case xe.SERIE_SCATTER:}});Ce===xe.SERIE_LINE?Pe.setMarkers(De,Xe.styleName):Ce===xe.SERIE_SCATTER?Pe.setStyle(De,{},Xe.styleName):Ce===xe.SERIE_BOX?Pe.setStyle(De[0],Xe.stylename):void 0}),_e.errorX||_e.errorY){var we=[];if(_e.errorX)for(var Te=0,Ee=_e.errorX.length;Te<Ee;Te++)we[Te]=we[Te]||[[],[]],we[Te][0][0]=_e.errorX[Te];if(_e.errorY)for(var Te=0,Ee=_e.errorY.length;Te<Ee;Te++)we[Te]=we[Te]||[[]],we[Te][1][0]=_e.errorY[Te];Pe.setDataError(we).setErrorStyle([{type:'bar',x:{},y:{}}])}switch(be.axis?(Le=be.axis[_e.xAxis],Le&&('top'===Le.type||'bottom'===Le.type)?'top'==Le.type?Pe.setXAxis(Me.getTopAxis(Le._jsGraphIndex)):'bottom'==Le.type&&Pe.setXAxis(Me.getBottomAxis(Le._jsGraphIndex)):(pe.warn('No x axis found. Setting automatically'),Pe.setXAxis(Me.getXAxis(0))),Le=be.axis[_e.yAxis],Le&&('left'===Le.type||'right'===Le.type)?'left'==Le.type?Pe.setYAxis(Me.getLeftAxis(Le._jsGraphIndex)):'right'==Le.type&&Pe.setYAxis(Me.getRightAxis(Le._jsGraphIndex)):(pe.warn('No y axis found. Setting automatically'),Pe.setYAxis(Me.getYAxis(0)))):(pe.warn('No axes found. Setting automatically'),Pe.autoAxis()),Ce){case xe.SERIE_BOX:Pe.setData(_e.boxes);break;default:case xe.SERIE_SCATTER:case xe.SERIE_LINE:Pe.setData([{x:_e.x,y:_e.y}]);}}),Me.autoscaleAxes(),Me.draw(),Me}exportToSchema(){let be={};be.title=this.options.title,be.width=this.getWidth(),be.height=this.getHeight();let Ae=[],Me={x:[],y:[]};['top','bottom','left','right'].map(_e=>{this.axis[_e]&&(Ae=Ae.concat(this.axis[_e].map(Ce=>{return{type:_e,label:Ce.options.label,unit:Ce.options.unit,min:Ce.options.forcedMin,max:Ce.options.forcedMax,flip:Ce.options.flipped}})),'top'==_e||'bottom'==_e?Me.x=Me.x.concat(this.axis[_e]):Me.y=Me.y.concat(this.axis[_e]))}),be.axis=Ae;let ke=_e=>{switch(_e){case xe.SERIE_LINE:return'line';break;case xe.SERIE_BAR:return'bar';break;case xe.SERIE_SCATTER:return'scatter';}},Se=(_e,Ce)=>{let Pe=[];switch(_e.getType()){case xe.SERIE_LINE:for(var ve=0;ve<_e.data.length;ve++)for(var Le=0;Le<_e.data[ve].length-1;Le+=2)Pe.push(_e.data[ve][Le+(Ce&&_e.isFlipped()||!Ce&&!_e.isFlipped()?1:0)]);break;case xe.SERIE_SCATTER:for(var Le=0;Le<_e.data.length-1;Le+=2)Pe.push(_e.data[ve+(Ce&&_e.isFlipped()||!Ce&&!_e.isFlipped()?1:0)]);}return Pe};return be.data=[].concat(this.series.map(_e=>{let Ce=[],Pe=[];if(_e.getType()==xe.SERIE_LINE)for(var ve in _e.styles){Pe.push({styleName:ve,color:_e.styles[ve].lineColor,lineWidth:_e.styles[ve].lineWidth,lineStyle:_e.styles[ve].lineStyle});let Le={styleName:ve,styles:[]};Ce.push(Le),Le.styles=Le.styles.concat((_e.styles[ve].markers||[]).map(we=>{return{shape:we.type,zoom:we.zoom,lineWidth:we.strokeWidth,lineColor:we.strokeColor,color:we.fillColor,points:we.points}}))}return{label:_e.getLabel(),id:_e.getName(),type:ke(_e.getType()),x:Se(_e,!0),y:Se(_e,!1),xAxis:Me.x.indexOf(_e.getXAxis()),yAxis:Me.y.indexOf(_e.getYAxis()),style:Ce,lineStyle:Pe}})),be}static registerConstructor(be,Ae){return he.has(be)?pe.throwError('Constructor '+Ae+' already exists.'):void he.set(be,Ae)}static getConstructor(be,Ae=!1){return he.has(be)?he.get(be):!Ae&&pe.throwError('Constructor "'+be+'" doesn\'t exist')}static newWaveform(){return new ue.default(...arguments)}static waveform(){return new ue.default(...arguments)}}xe.prototype.getConstructor=xe.getConstructor;;;;var me=function(be,Ae,Me,ke,Se,_e,Ce){var Pe=!1;Array.isArray(Ae)||(Ae=[Ae]);var ve=[];if(!Se&&be.options.trackingLine.legend&&(Pe=!0,Se=$(be)),Ae.map(we=>{var Te=we.serie.handleMouseMove(Ce,!1);if(!Te||!_e)return we.serie.trackingShape&&we.serie.trackingShape.hide(),Se;if(0<we.withinPx&&1e-14<Math.abs(Me-be.options.paddingLeft-we.serie.getXAxis().getPx(Te.xClosest))-we.withinPx||0<we.withinVal&&Math.abs(we.serie.getXAxis().getVal(Me-be.options.paddingLeft)-Te.xClosest)-we.withinVal>we.serie.getXAxis().getVal(Me-be.options.paddingLeft)/100000)we.serie.trackingShape&&we.serie.trackingShape.hide();else{if(ve[we.serie.getName()]={yValue:Te.xClosest,xValue:Te.yClosest,serie:we,index:Te},we.serie.trackingShape||(we.serie.trackingShape=be.newShape(be.options.trackingLine.serieShape.shape||'ellipse',{fillColor:we.serie.getLineColor(),strokeColor:'White',strokeWidth:we.serie.getLineWidth()},!0,be.options.trackingLine.serieShape.properties||{rx:[3*we.serie.getLineWidth()],ry:[3*we.serie.getLineWidth()]}).setSerie(we.serie).forceParentDom(we.serie.groupMain).draw(),be.options.trackingLine.serieShape.onCreated&&be.options.trackingLine.serieShape.onCreated(we.serie.trackingShape),we.serie.trackingShape.on('changed',()=>{be.options.trackingLine.serieShape.onChanged&&be.options.trackingLine.serieShape.onChanged(we.serie.trackingShape)})),we.serie.trackingShape.show(),we.serie.trackingShape.getPosition(0).x=Te.xClosest,be.options.trackingLine.serieShape.magnet){let Ee=be.options.trackingLine.serieShape.magnet,Xe=Ee.within,De;Ee.withinPx&&(Xe=we.serie.getXAxis().getRelVal(Ee.withinPx)),(De=we.serie.findLocalMinMax(Te.xClosest,Xe,Ee.mode))&&(we.serie.trackingShape.getPosition(0).x=De)}we.serie.trackingShape.redraw()}}),!!be.options.trackingLine.legend){if(0==Object.keys(ve).length||!_e)Se.style.display='none';else{'none'==Se.style.display||Pe?fe(be,Se,Me,ke,!0):ye(be,Se,Me,ke),Se.style.display='block';var Le=_e(ve,Ce,Me,ke);Se.innerHTML=Le}return Se}},fe=function(be,Ae,Me,ke,Se){function _e(){var we=(Date.now()-Ce)/200;1<we&&(we=1),Ae.style.marginLeft=(Me-ve)*we+ve+'px',Ae.style.marginTop=(ke-Le)*we+Le+'px',1>we&&window.requestAnimationFrame(_e)}var Ce=Date.now(),Pe=Ae.offsetHeight,ve=parseInt(Ae.style.marginLeft.replace('px','')||0),Le=parseInt(Ae.style.marginTop.replace('px','')||0);return Me=Me>be.getWidth()/2?Me-Me%10-20-Ae.offsetWidth:Me-Me%10+30,ke=ke-ke%10+Pe/2,Se?(Ae.style.marginLeft=Me+'px',void(Ae.style.marginTop=ke+'px')):void window.requestAnimationFrame(_e)},ye=pe.debounce(fe,50);xe.SERIE_LINE=Symbol(),xe.SERIE_SCATTER=Symbol(),xe.SERIE_CONTOUR=Symbol(),xe.SERIE_BAR=Symbol(),xe.SERIE_BOX=Symbol(),xe.SERIE_ZONE=Symbol(),xe.SERIE_LINE_COLORED=Symbol(),xe.SERIE_ZONE=Symbol(),xe.SERIE_DENSITYMAP=Symbol(),xe.SERIE_LINE_3D=Symbol(),xe.SERIE_ZONE_3D=Symbol(),xe.TICKS_OUTSIDE=Symbol(),xe.TICKS_INSIDE=Symbol(),xe.TICKS_CENTERED=Symbol(),xe.ns='http://www.w3.org/2000/svg',xe.nsxlink='http://www.w3.org/1999/xlink',E.default=xe})},function(u,A){var S,C,P;(function(T,E){C=[A],S=E,P='function'==typeof S?S.apply(A,C):S,!(P!==void 0&&(u.exports=P));var X})(this,function(T){'use strict';function E(I){return I&&I.indexOf&&-1<I.indexOf('px')&&parseInt(I.replace('px',''))}function X(I){return!isNaN(parseFloat(I))&&isFinite(I)}Object.defineProperty(T,'__esModule',{value:!0});;class Y{constructor(I,O,F,W){'object'==typeof I?(this.x=I.x,this.y=I.y,this.dx=I.dx,this.dy=I.dy):(this.x=I,this.y=O,this.dx=F,this.dy=W)}duplicate(){return new Y(this.x,this.y,this.dx,this.dy)}compute(I,O,F,W){if(I&&O&&F&&I.hasXAxis&&I.hasYAxis||I.throw(),!I.hasXAxis(O))throw'Graph does not contain the x axis that was used as a parameter';if(!I.hasYAxis(F))throw'Graph does not contain the x axis that was used as a parameter';return this._compute(I,O,F,W)}_compute(I,O,F,W){var V=this._relativeTo;if(V)var B=V._compute(I,O,F,W);var G={x:!1,y:!1},R;for(var U in O||(O=I.getXAxis()),F||(F=I.getYAxis()),G){var Z='x'==U?O:F,K=this[U],Q=this['d'+U];if(void 0!==K||(void 0===Q||void 0!==V)&&void 0!==V)void 0!==K&&(G[U]=this.getPx(K,Z));else if('x'==U){if(void 0===Q)continue;G[U]=V?V[U]:Z.getPos(0)}else if(void 0!==this.x&&W)if(!1!==E(this.x))console.warn('You have defined x in px and not y. Makes no sense. Returning 0 for y'),G[U]=0;else{var J=W.searchClosestValue(this.x);J?G[U]=W.getY(J.yMin):(console.warn('Could not find y position for x = '+this.x+' on serie "'+W.getName()+'". Returning 0 for y.'),G[U]=0)}if(void 0!==Q){var $=void 0!==K||void 0==B||void 0==B[U]?G[U]:B[U];if('y'==U&&B&&void 0!==B.x&&void 0==B.y){if(!W)throw'Error. No serie exists. Cannot find y value';var J=W.searchClosestValue(V.x);J&&($=W.getY(J.yMin))}!1===(R=E(Q))?!1===(R=this._parsePercent(Q))?Z&&(G[U]=$+Z.getRelPx(Q)):G[U]=$+this._getPositionPx(R,!0,Z,I):G[U]=$+R}}return G}_getPositionPx(I,O,F,W){var V;if(!1!==(V=E(I)))return V;return!1===(V=this._parsePercent(I))?F?F.getPos(I):void 0:V/100*(O?W.getDrawingWidth():W.getDrawingHeight())}_parsePercent(I){return I&&I.indexOf&&-1<I.indexOf('%')&&I}getDeltaPx(I,O){var F;return!1===(F=E(I))?O.getRelPx(I)+'px':F+'px'}deltaPosition(I,O,F){I='y'==I?'y':'x';var W=this[I],V=this['d'+I],B,R;if(W!==void 0)!1===(B=E(W))?(W=this.getValPosition(W,F),this[I]=!1===(R=E(O))?W+O:W+F.getRelVal(R)):!1===(R=E(O))?this[I]=B+F.getRelPx(O)+'px':this[I]=B+R+'px';else if(V!==void 0){if('y'==I&&W===void 0&&!this._relativeTo)return;!1===(B=E(V))?(V=this.getValPosition(V,F),this['d'+I]=!1===(R=E(O))?V+O:V+F.getRelVal(R)):!1===(R=E(O))?this['d'+I]=B+F.getRelPx(O)+'px':this['d'+I]=B+R+'px'}}getValPosition(I,O){return'max'==I?O.getMaxValue():'min'==I?O.getMinValue():I}getPx(I,O,F){var W;if('function'==typeof I)return I(O,F);if(!1!==(W=E(I)))return W;if(!1!==(W=this._parsePercent(I)))return W;if(O){if('min'==I)return O.getMinPx();if('max'==I)return O.getMaxPx();if(F)return O.getRelPx(I);if(X(I))return O.getPos(I)}}getPxRel(I,O){return this.getPx(I,O,!0)}relativeTo(I){return this._relativeTo=Y.check(I),this}static check(I,O){if(I instanceof Y)return I;var F=new Y(I);if(I&&I.relativeTo){const W=O(I.relativeTo);W&&F.relativeTo(W)}return F}}T.default=Y})},function(u,A){var S,C,P;(function(T,E){C=[A],S=E,P='function'==typeof S?S.apply(A,C):S,!(P!==void 0&&(u.exports=P));var X})(this,function(T){'use strict';function E(B,R,G){return 0>G&&(G+=1),1<G&&(G-=1),G<1/6?B+6*(R-B)*G:G<1/2?R:G<2/3?B+6*((R-B)*(2/3-G)):B}function X(B,R){return B._savedAttributes&&B._savedAttributes[R]!==void 0}function Y(B,R){if(B&&B._savedAttributesIds){B._savedAttributesIds.splice(B._savedAttributesIds.indexOf(R),1),delete B._attributes[R];var G={};for(var U in B._savedAttributes)G[U]=B._savedAttributes[U];;for(var U=0,Z=B._savedAttributesIds.length;U<Z;U++)for(var K in B._attributes[B._savedAttributesIds[U]])G[K]=B._attributes[B._savedAttributesIds[U]][K];for(var K in G)B.setAttribute(K,G[K])}}function I(){var B,R,G,U,Z,K,Q=arguments[0],J=1,$=arguments.length,ee=!1;for('boolean'==typeof Q?(ee=Q,Q=arguments[1]||{},J=2):('object'!=typeof Q&&'function'!=typeof Q||null==Q)&&(Q={});J<$;++J)if(B=arguments[J],null!=B)for(R in B)G=Q[R],U=B[R],Q!==U&&(ee&&U&&(V(U)||(Z=W(U)))?(Z?(Z=!1,K=G&&W(G)?G:[]):K=G&&V(G)?G:{},Q[R]=I(ee,K,U)):'undefined'!=typeof U&&(Q[R]=U));return Q}Object.defineProperty(T,'__esModule',{value:!0}),T.setAttributeTo=function(R,G,U){if(U)for(var Z in G)R.setAttributeNS(U,Z,G[Z]);else for(Z in G)R.setAttribute(Z,G[Z])},T.mapEventEmission=function(R,G){G||(G=this);var U;for(var Z in R)0==Z.indexOf('on')&&'function'==typeof R[Z]&&(U=Z.substring(2),U=U.substring(0,1).toLowerCase()+U.substring(1),G.on&&function(K){G.on(U,function(){R[K].apply(G,arguments)})}(Z))},T.guid=function(){return'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(R){var G=0|16*Math.random(),U='x'==R?G:8|3&G;return U.toString(16)})},T.throwError=function(R){console.error(R)},T.warn=function(R){console.warn(R)},T.isNumeric=function(R){return!Array.isArray(R)&&0<=R-parseFloat(R)+1},T.hue2rgb=E,T.hslToRgb=function(R,G,U){var Z,K,Q;if(0==G)Z=K=Q=U;else{var J=0.5>U?U*(1+G):U+G-U*G,$=2*U-J;Z=E($,J,R+1/3),K=E($,J,R),Q=E($,J,R-1/3)}return[Math.round(255*Z),Math.round(255*K),Math.round(255*Q)]},T.saveDomAttributes=function(R,G,U){if(R)for(var Z in R._savedAttributesIds=R._savedAttributesIds||[],-1<R._savedAttributesIds.indexOf(U)&&Y(R,U),R._savedAttributes=R._savedAttributes||{},R._attributes=R._attributes||{},R._attributes[U]=G,R._savedAttributesIds.push(U),G)R._savedAttributes[Z]||(R._savedAttributes[Z]=R.getAttribute(Z)),R.setAttribute(Z,G[Z])},T.hasSavedAttribute=X,T.overwriteDomAttribute=function(R,G,U){X(R,G)&&(R._savedAttributes[G]=U)},T.restoreDomAttributes=Y,T.debounce=function(R,G,U){var Z;return function(){var K=this,Q=arguments,J=U&&!Z;clearTimeout(Z),Z=setTimeout(function(){Z=null,U||R.apply(K,Q)},G),J&&R.apply(K,Q)}},T.SVGParser=function(R){var G=new DOMParser,U=G.parseFromString(R,'image/svg+xml');return U},T.reverseArray=function(R){var G=null,U=null,Z=R.length;for(G=0,U=Z-1;G<U;G+=1,U-=1){var K=R[G];R[G]=R[U],R[U]=K}return R},T.getOffset=function(R){var G=R.getBoundingClientRect();return{top:G.top+document.body.scrollTop,left:G.left+document.body.scrollLeft}},T.setCSS=function(R,G){var U=R.style;for(var Z in G)U[Z]=G[Z]},T.ajaxGet=function(R){return new Promise(function(G,U){var Z=new XMLHttpRequest;Z.open(R.type||'GET',R.url,!0),R.json&&Z.setRequestHeader('Accept','application/json'),Z.onload=function(){if(200===Z.status){var K=Z.responseText;R.json&&(K=JSON.parse(K)),G(K)}else U(new Error('Request error: '+Z.status))},Z.onerror=function(){U(new Error('Network error: '+Z.status))},Z.send()})},T.extend=I,T.mix=function(R,G){for(let U in G)G.hasOwnProperty(U)&&(R.prototype[U]=G[U])},T.emptyDom=function(R){for(;R.firstChild;)R.removeChild(R.firstChild)};;;;;;;;;;;;;;;;;var O=Object.prototype.hasOwnProperty,F=Object.prototype.toString,W=function(R){return'function'==typeof Array.isArray?Array.isArray(R):'[object Array]'===F.call(R)},V=function(R){if(!R||'[object Object]'!==F.call(R))return!1;var G=O.call(R,'constructor'),U=R.constructor&&R.constructor.prototype&&O.call(R.constructor.prototype,'isPrototypeOf');if(R.constructor&&!G&&!U)return!1;for(var Z in R);return'undefined'==typeof Z||O.call(R,Z)};;T.isArray=W,T.isPlainObject=V})},function(u,A){var S,C,P,C,P;(function(T,E){C=[],S=E,P='function'==typeof S?S.apply(A,C):S,!(P!==void 0&&(u.exports=P))})(this,function(){'use strict';C=[],P=function(){'use strict';function T(){}function E(I,O){for(var F=I.length;F--;)if(I[F].listener===O)return F;return-1}function X(I){return function(){return this[I].apply(this,arguments)}}var Y=T.prototype;return Y.getListeners=function(O){var F=this._getEvents(),W;if(O instanceof RegExp)for(var V in W={},F)F.hasOwnProperty(V)&&O.test(V)&&(W[V]=F[V]);else W=F[O]||(F[O]=[]);return W},Y.flattenListeners=function(O){var F=[],W;for(W=0;W<O.length;W+=1)F.push(O[W].listener);return F},Y.getListenersAsObject=function(O){var F=this.getListeners(O),W;return F instanceof Array&&(W={},W[O]=F),W||F},Y.addListener=function(O,F){var W=this.getListenersAsObject(O);for(var V in W)W.hasOwnProperty(V)&&-1===E(W[V],F)&&W[V].push('object'==typeof F?F:{listener:F,once:!1});return this},Y.on=X('addListener'),Y.addOnceListener=function(O,F){return this.addListener(O,{listener:F,once:!0})},Y.once=X('addOnceListener'),Y.defineEvent=function(O){return this.getListeners(O),this},Y.defineEvents=function(O){for(var F=0;F<O.length;F+=1)this.defineEvent(O[F]);return this},Y.removeListener=function(O,F){var W=this.getListenersAsObject(O),V;for(var B in W)W.hasOwnProperty(B)&&(V=E(W[B],F),-1!==V&&W[B].splice(V,1));return this},Y.off=X('removeListener'),Y.addListeners=function(O,F){return this.manipulateListeners(!1,O,F)},Y.removeListeners=function(O,F){return this.manipulateListeners(!0,O,F)},Y.manipulateListeners=function(O,F,W){var R=O?this.removeListener:this.addListener,G=O?this.removeListeners:this.addListeners,B;if('object'==typeof F&&!(F instanceof RegExp))for(var V in F)F.hasOwnProperty(V)&&(B=F[V])&&('function'==typeof B?R.call(this,V,B):G.call(this,V,B));else for(V=W.length;V--;)R.call(this,F,W[V]);return this},Y.removeEvent=function(O){var F=this._getEvents();if('string'==typeof O)delete F[O];else if(O instanceof RegExp)for(var W in F)F.hasOwnProperty(W)&&O.test(W)&&delete F[W];else delete this._events;return this},Y.removeAllListeners=X('removeEvent'),Y.emitEvent=function(O,F){var W=this.getListenersAsObject(O),V,B,G;for(var R in W)if(W.hasOwnProperty(R))for(B=W[R].length;B--;)V=W[R][B],!0===V.once&&this.removeListener(O,V.listener),G=V.listener.apply(this,F||[]),G===this._getOnceReturnValue()&&this.removeListener(O,V.listener);return this},Y.trigger=X('emitEvent'),Y.emit=function(O){var F=Array.prototype.slice.call(arguments,1);return this.emitEvent(O,F)},Y.setOnceReturnValue=function(O){return this._onceReturnValue=O,this},Y._getOnceReturnValue=function(){return!this.hasOwnProperty('_onceReturnValue')||this._onceReturnValue},Y._getEvents=function(){return this._events||(this._events={})},T}.apply(A,C),!(P!==void 0&&(u.exports=P))})},function(u,A,S){var C,P,T;(function(E,X){P=[A,S(6),S(3),S(7)],C=X,T='function'==typeof C?C.apply(A,P):C,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X,Y,I){'use strict';function O($){return $&&$.__esModule?$:{default:$}}function F($){$--;for(var ee=2;$>>=1;)ee<<=1;return ee}function W($){for(var ee=1;$>>=1;)ee<<=1;return ee}function V($,ee,te,ie,ae){return($-ee)/(te-ee)*(ae-ie)+ie}function B($,ee,te){let ie=0,ae=ee.length,re=ae-1,ne=0,oe=1,se;if(ee[ie]==$)return ie;if(ee[re]==$)return re;for(;!0;){if(ne++,100<ne)throw'Error loop';for(se=Math.floor((ie+re)/2);isNaN(ee[se]);)se+=oe;if(se==ie||ee[se]==$||se==re)return se;if(ee[se]<=$)te?re=se:ie=se;else if(ee[se]>$)te?ie=se:re=se;else return!1;oe*=-1}}Object.defineProperty(E,'__esModule',{value:!0});var R=O(X),G=O(I);class U{constructor($=[],ee=0,te=1){this.xOffset=ee,this.xScale=te,this.setData($)}setData($,ee=null){if(Array.isArray($[0])){let re=[],se=[];$.forEach(ne=>{re.push(ne[0]),se.push(ne[1])}),this.setXWaveform(re),$=se}let te=this._makeArray($.length),ie=!1;const ae=this.isNaNAllowed();return $.map((re,se)=>{ae||re[0]===re[0]&&re[1]===re[1]||(ie=!0),te[se]=re}),ie&&this.warn('Trying to assign NaN values to a typed array that does not support NaNs. 0\'s will be used instead'),this._setData(te),ee&&this.setXWaveform(ee),this}getY($,ee){return ee&&this.dataInUse?this.dataInUse.y[$]*this.getScale()+this.getShift():this.data[$]*this.getScale()+this.getShift()}setXWaveform($){if(!($ instanceof U))if(Array.isArray($))$=new U($);else throw'Cannot set X waveform. Data is not a valid array.';return this.xdata=$,this.computeXMinMax(),this}hasXWaveform(){return!!this.xdata}getXWaveform(){if(this.xdata)return this.xdata;var $=new U;for(var ee=0;ee<this.getLength();ee+=1)$.append(this.getX(ee));return $}rescaleX($,ee){return this.xScale=ee,this.xOffset=$,this.computeXMinMax(),this}getTypedArrayClass(){return this._typedArrayClass||!1}setTypedArrayClass($){this.getTypedArrayClass()&&this.isNaNAllowed()&&!this.isNaNAllowed($)&&this.warn('NaN values are not allowed by the new constructor ('+$.name+') while it was allowed by the previous one ('+this._typedArrayClass.name+')'),this.getTypedArrayClass()&&this.isUnsigned()&&!this.isUnsigned($)&&this.warn('You are switching from signed values to unsigned values. You may experience data corruption if there were some negative values.'),this._typedArrayClass=$,this.data&&this._setData($.from(this.data)),this.hasXWaveform()&&this.getXWaveform().setTypedArrayClass($)}isNaNAllowed($=this._typedArrayClass){return $==Array||$==Float32Array||$==Float64Array}isUnsigned($=this._typedArrayClass){return $==Uint8Array||$==Uint8ClampedArray||$==Uint16Array||$==Uint32Array}recalculateMinMaxNewPoint($,ee){($<this.minX||this.minX===void 0)&&(this.minX=$),($>this.maxX||this.maxX===void 0)&&(this.maxX=$),(ee<this.minY||this.minY===void 0)&&(this.minY=ee),(ee>this.maxY||this.maxY===void 0)&&(this.maxY=ee)}prepend($,ee){return'function'==typeof $&&($=$(this)),'function'==typeof ee&&(ee=ee(this)),this.xdata?this.xdata.prepend(null,$):null===$?this.xOffset-=this.xScale:(this.xdata=this.getXWaveform(),this.xdata.prepend(null,$)),this.data.unshift(ee),this.recalculateMinMaxNewPoint($,ee),this}append($,ee){return'function'==typeof $&&($=$(this)),'function'==typeof ee&&(ee=ee(this)),this.xdata?this.xdata.append(null,$):null!==$&&(this.xdata=this.getXWaveform(),this.xdata.append(null,$)),this.monotoneous&&(ee>this.data[this.data.y]&&!1===this.getMonotoneousAscending()?this.monotoneous=!1:ee<this.data[this.data.y]&&!0===this.getMonotoneousAscending()&&(this.monotoneous=!1)),(1==this.data.length||void 0===this._monotoneousAscending)&&(this.monotoneous=!0,this._monotoneousAscending=ee==this.data[0]?void 0:ee>this.data[0]),this.data.push(ee),this.recalculateMinMaxNewPoint($,ee),this}_makeArray($){const ee=this.getTypedArrayClass();return ee?new ee($):Array($)}_setData($){const ee=$.length;let te=1,ie=$[1]>$[0],ae=$[0],re=$[0];for(this._monotoneous=!0;te<ee;te++)$[te]!==$[te-1]&&ie!=$[te]>$[te-1]&&(this._monotoneous=!1),$[te]===$[te]&&(ae=Math.min($[te],ae),re=Math.max($[te],re));this._monotoneous&&(this._monotoneousAscending=$[1]>$[0]),this.minY=ae,this.maxY=re,this.data=$,this.computeXMinMax()}computeXMinMax(){if(this.data)if(this.xdata)this.minX=this.xdata.getMin(),this.maxX=this.xdata.getMax();else{const $=this.xOffset+this.xScale*this.getLength(),ee=this.xOffset;this.minX=Math.min($,ee),this.maxX=Math.max($,ee)}}getDataInUse(){return this.dataInUse||this.data}getIndexFromVal($,ee=!1,te=Math.round){let ie;ie=ee&&this.dataInUse?this.dataInUse.y:this.data;let ae=this.getIndexFromData($,ie,this.data.getMonotoneousAscending(),te);return ee&&this.dataInUse&&'aggregateY'==this.dataInUseType?ae-ae%4:ae}getIndexFromX($,ee=!1,te=Math.round){let ie;ee&&this.dataInUse?ie=this.dataInUse.x:this.xdata&&(ie=this.xdata.getData());let ae;return ae=this.hasXWaveform()?this.xdata.getIndexFromData($,ie,this.xdata.getMonotoneousAscending(),te):Math.max(0,Math.min(this.getLength()-1,te(($-this.xOffset)/this.xScale))),ee&&this.dataInUse&&'aggregateX'==this.dataInUseType?ae-ae%4:ae}getIndexFromData($,ee,te){if(!this.isMonotoneous())throw console.trace(),'Impossible to get the index from a non-monotoneous wave !';return $-=this.getShift(),$/=this.getScale(),B($,ee,!te)}getReductionType(){return this.dataInUseType}getXMin(){return this.minX*this.getXScale()+this.getXShift()}getXMax(){return this.maxX*this.getXScale()+this.getXShift()}getYMin(){return this.minY*this.getScale()+this.getShift()}getYMax(){return this.maxY*this.getScale()+this.getShift()}getMin(){return this.minY*this.getScale()+this.getShift()}getMax(){return this.maxY*this.getScale()+this.getShift()}getMinX(){return this.minX*this.getXScale()+this.getXShift()}getMaxX(){return this.maxX*this.getXScale()+this.getXShift()}getMinY(){return this.minY*this.getScale()+this.getShift()}getMaxY(){return this.maxY*this.getScale()+this.getShift()}getDataY(){return this.data}getData($){return $&&this.dataInUse?this.dataInUse.y:this.data}setShift($=0){return this.shift=$,this}getShift(){return this.shift||0}getScale(){return this.scale||1}setScale($=1){this.scale=$}setXShift($=0){return this.hasXWaveform?(this.getXWaveform().setShift($),this):this}getXShift($=0){return this.hasXWaveform?this.getXWaveform().getShift():0}setXScale($=1){return this.hasXWaveform?(this.getXWaveform().setScale($),this):this}getXScale(){return this.hasXWaveform?this.getXWaveform().getScale():1}getLength(){return this.data.length}getDataToUseFlat(){let $,ee=0,te;if(this.dataInUse){$=this.dataInUse.x.length,te=Array(2*$).fill(0);for(var ie=0;ie<$;ie+=1)te[ee]=this.dataInUse.x[ie],te[ee+1]=this.dataInUse.y[ie],ee+=2}else{$=this.getLength(),te=Array(2*$).fill(0);for(var ie=0;ie<$;ie+=1)te[ee+1]=this.data[ie],te[ee]=this.getX(ie),ee+=2}return te}fit($){var ee=this;return new Promise(function(te){var ie=new R.default((0,Y.extend)({},{dataY:ee,dataX:ee.getXWaveform(),done:function(ae){te(ae)},waveform:new U},$));ie.init(),ie.fit()})}getX($,ee){return ee&&this.dataInUse?this.dataInUse.x[$]*this.getXScale()+this.getXShift():this.xdata?this.xdata.data[$]*this.getXScale()+this.getXShift():this.xOffset+$*this.xScale}getXRaw($,ee){return ee&&this.dataInUse?this.dataInUse.x[$]:this.xdata?this.xdata.data[$]:$}_integrateP($=0,ee=this.getLength()-1){if($=Math.round($),ee=Math.round(ee),$>ee){let ne=$;$=ee,ee=ne}var te=ee-$+1,ie=0;let ae=0,re;for(var se=this.getData();$<=ee;$++)se.length-1>$&&(re=this.getX($+1)-this.getX($),ae+=re,ie+=se[$]*re);return[ie,te,ae]}integrateP($,ee){var te=this._integrateP($,ee);return te[0]}integrate($,ee){return this.integrateP(this.getIndexFromX($),this.getIndexFromX(ee))}average($=0,ee=this.getLength()-1){return this.getAverageP($,ee)}mean(){return this.average()}getAverageP($,ee){var te=this._integrateP($,ee);return te[0]/te[2]}getAverageX($,ee){var te=this._integrateX($,ee);return te[0]/te[2]}checkMonotonicity(){let $=1,ee=this.getData();const te=this.data.length;for(let ie=ee[1]>ee[0];$<te;$++)if(ee[$]!==ee[$-1]&&ie!==ee[$]>ee[$-1])return this._monotoneous=!1;return this._monotoneousAscending=ee[1]>ee[0],this._monotoneous=!0}requireXMonotonicity(){this.xdata&&this.xdata.requireMonotonicity()}requireMonotonicity(){if(!this.isMonotoneous())throw'The wave must be monotonic'}isMonotoneous(){return!!this._monotoneous}isXMonotoneous(){return!this.xdata||this.xdata.isMonotoneous()}invert(){let $=dataY||this.data;return $.reverse(),this.isMonotoneous()&&(this._monotoneousAscending=!this._monotoneousAscending),$}resampleForDisplay($){let ee=0;this.requireXMonotonicity();let te=!1,ie=this.getDataY(),ae={x:[],y:[]},re=[],ue=!1,ce=0,se,ne,oe,le,de,pe,ge,he;const xe=this.getLength();if(!$.xPosition)throw'No position calculation method provided';if(!$.resampleToPx)throw'No "resampleToPx" method was provided. Unit: px per point';if($.minX>$.maxX){let me=$.minX;$.minX=$.maxX,$.maxX=me}for((this.xdata&&!this.xdata.getMonotoneousAscending()||!this.xdata&&-0>this.xScale)&&(te=!0,ee=xe);te?0<ee:ee<xe;te?ee--:ee++){if(he=this.getX(ee),$.minX>he){ce=ee;continue}if(ge=$.xPosition(he),!ue){for(ce?(ae.x.push(he),ae.y.push(ie[ce])):ce=ee;isNaN(ie[ee]);)te?ee--:ee++;se=ne=oe=ie[ce],le=1,pe=ge,de=he,ce=0,ue=!0;continue}if(Math.abs(ge-pe)>$.resampleToPx||ee==xe||0==ee||isNaN(ie[ee])){let me=(de+he)/2;if(ae.x.push(me),ae.y.push(se/le),re.push(me,ne,oe),void 0!==$.maxX&&he>$.maxX)break;ue=!1;continue}se+=ie[ee],le++,ne=Math.min(ne,ie[ee]),oe=Math.max(oe,ie[ee])}return this.dataInUseType='resampled',this.dataInUse=ae,re}interpolate($){let ee,te=this.getDataY();if(this.xdata){let ie=this.xdata.getData(),ae=B($,ie,!this.xdata.getMonotoneousAscending());return ie[ae]==$?te[ae]:($-ie[ae])/(ie[ae+1]-ie[ae])*(te[ae+1]-te[ae])+te[ae]}ee=($-this.xOffset)/this.xScale;let ie=Math.floor(ee);return(ee-ie)*(te[ie+1]-te[ie])+te[ie]}getMonotoneousAscending(){return this.isMonotoneous()?this._monotoneousAscending:'The waveform is not monotoneous'}getXMonotoneousAscending(){return this.xdata?this.xdata.getMonotoneousAscending():0<this.xScale}isXMonotoneousAscending(){return this.getXMonotoneousAscending(...arguments)}divide($){return this._arithmetic($,J)}divideBy(){return this.divide(...arguments)}multiply($){return this._arithmetic($,Z)}multiplyBy(){return this.multiply(...arguments)}log(){return this.logBase(10)}ln(){return this.logBase(Math.E)}logBase($){let ee=Math.log($);this.data.map(te=>{return Math.log(te)/ee})}add($){return this._arithmetic($,K)}addBy(){return this.add(...arguments)}subtract($){return this._arithmetic($,Q)}subtractBy(){return this.subtract(...arguments)}math($){for(var ee=0;ee<this.getLength();ee++)this.data[ee]=$(this.getY(ee),this.getX(ee));return this._setData(this.data),this}_arithmetic($,ee){if($ instanceof U)return this._waveArithmetic($,ee);return'number'==typeof $?this._numberArithmetic($,ee):void 0}_numberArithmetic($,ee){let te=0,ie=this.getLength();if(ee==Z){for(;te<ie;te++)this.data[te]*=$;this.minY*=$,this.maxY*=$}else if(ee==J){for(;te<ie;te++)this.data[te]/=$;this.minY/=$,this.maxY/=$}else if(ee==K){for(;te<ie;te++)this.data[te]+=$;this.minY+=$,this.maxY+=$}else if(ee==Q){for(;te<ie;te++)this.data[te]-=$;this.minY-=$,this.maxY-=$}return this}_waveArithmetic($,ee){let te=this.getDataY(),ie=0;const ae=this.getLength();if(this.requireXMonotonicity(),$.requireXMonotonicity(),ee==Z)for(;ie<ae;ie++)te[ie]*=$.interpolate(this.getX(ie));else if(ee==J)for(;ie<ae;ie++)te[ie]/=$.interpolate(this.getX(ie));else if(ee==K)for(;ie<ae;ie++)te[ie]+=$.interpolate(this.getX(ie));else if(ee==Q)for(;ie<ae;ie++)te[ie]-=$.interpolate(this.getX(ie));return this._setData(te),this}aggregate($='x'){this._dataAggregating={},this._dataAggregated={},this._dataAggregationDirection=$.toUpperCase();var ee=W(this.getLength());this._dataAggregating=(0,G.default)({minX:this.minX,maxX:this.maxX,minY:this.minY,maxY:this.maxY,data:this.data,xdata:this.xdata?this.xdata.getData():void 0,xScale:this.xScale,xOffset:this.xOffset,numPoints:ee,direction:$}).then(te=>{this._dataAggregated=te.aggregates,this._dataAggregating=!1})}hasAggregation(){return!!this._dataAggregated}selectAggregatedData($){if(2>$)return!1;var ee=F($);return this._dataAggregated[ee]?(this.dataInUseType='aggregate'+this._dataAggregationDirection,void(this.dataInUse=this._dataAggregated[ee])):this._dataAggregating?this._dataAggregating:void(this.dataInUseType='none',this.dataInUse={y:this.data,x:this.getXWaveform().data})}duplicate($){var ee=new U;return ee._setData(this.getDataY().slice()),ee.rescaleX(this.xOffset,this.xShift),ee.setShift(this.getShift()),ee.setScale(this.getScale()),this.xdata?($?ee.setXWaveform(this.xdata.duplicate()):ee.setXWaveform(this.xdata),ee.setXShift(this.getXShift()),ee.setXScale(this.getXScale())):(ee.xOffset=this.xOffset,ee.xScale=this.xScale),ee}subrangeX($,ee){if(!this.xdata){let re=this.getIndexFromX($),se=this.getIndexFromX(se);return new U().setData(this.data.slice(re,se)).rescaleX(this.xOffset,this.xScale)}var te=new U;for(var ie=0,ae=this.data.length;ie<ae;ie++)this.data[ie]>=$&&this.data[ie]<ee&&te.append(this.dataX[ie],this.data[ie]);return te}findLocalMinMax($,ee,te){let ie=this.getIndexFromX($),ae=this.getIndexFromX($+ee),re=this.getIndexFromX($-ee);return this.findLocalMinMaxIndex(re,ae,te)}findLocalMinMaxIndex($,ee,te){let ie;ee<$&&(ie=ee,ee=$,$=ie);let ae,re;if('max'==te){ae=Number.NEGATIVE_INFINITY;for(var se=$;se<=ee;se++)this.getY(se)>ae&&(ae=this.getY(se),re=se)}else{ae=Number.POSITIVE_INFINITY;for(var se=$;se<=ee;se++)this.getY(se)<ae&&(ae=this.getY(se),re=se)}return re==$||re==ee?!1:this.getX(re)}warn($){console&&console.warn($)}setUnit($){return this.unit=$,this}setXUnit($){return this.hasXWaveform()&&this.xdata.setUnit($),this.xunit=$,this}getUnit(){return this.unit||''}getXUnit(){return this.hasXWaveform()?this.xdata.getUnit():''|this.xunit}hasXUnit(){return 0<this.getXUnit().length}hasUnit(){return 0<this.getUnit().length}findLevels($,ee){ee=(0,Y.extend)({box:1,edge:'both',rounding:'before',rangeP:[0,this.getLength()]},ee);for(var te=ee.rangeP[0],ae=[],re=0,ie;ie=this.findLevel($,(0,Y.extend)(!0,{},ee,{rangeP:[te,ee.rangeP[1]]}));)if(ae.push(ie),te=Math.ceil(ie),re++,1000<re)return;return ae}findLevel($,ee){ee=(0,Y.extend)({box:1,edge:'both',direction:'ascending',rounding:'before',rangeP:[0,this.getLength()]},ee),ee.rangeX&&(ee.rangeP=ee.rangeX.map(this.getIndexFromX));var te,ie,ae,re,se,ne,oe=ee.box;for(0==oe%2&&oe++,'descending'==ee.direction?(ae=ee.rangeP[1],se=ee.rangeP[0],ne=-1):(ae=ee.rangeP[0],se=ee.rangeP[1],ne=1);;ae+=ne){if('descending'==ee.direction){if(ae<se)break;}else if(ae>se)break;if(!(ae<ee.rangeP[0]+(oe-1)/2)){if(ae>ee.rangeP[1]-(oe-1)/2)break;if(te=this.getAverageP(ae-(oe-1)/2,ae+(oe-1)/2),void 0==ie){ie=te<$;continue}if(te>$&&ie){if(ie=!1,'ascending'==ee.edge||'both'==ee.edge)for(re=ae+(oe-1)/2;re>=ae-(oe-1)/2;re--)if(this.data[re]>$&&this.data[re-1]<=$)switch(ee.rounding){case'before':return re-1;break;case'after':return re;break;case'interpolate':return V($,this.data[re],this.data[re-1],re,re-1);}}else if(te<$&&!ie&&(ie=!0,'descending'==ee.edge||'both'==ee.edge))for(re=ae+(oe-1)/2;re>=ae-(oe-1)/2;re--)if(this.data[re]<$&&this.data[re-1]>=$)switch(ee.rounding){case'before':return re-1;break;case'after':return re;break;case'interpolate':return V($,this.data[re],this.data[re-1],re,re-1);}}}}};const Z=Symbol(),K=Symbol(),Q=Symbol(),J=Symbol();E.default=U})},function(u,A){var S,C,P;(function(T,E){C=[A],S=E,P='function'==typeof S?S.apply(A,C):S,!(P!==void 0&&(u.exports=P));var X})(this,function(T){'use strict';Object.defineProperty(T,'__esModule',{value:!0});class E{constructor(X,Y,I,O){this.LMITER=100,this.LMBOOST=2,this.LMSHRINK=0.1,this.LAMBDAZERO=0.001,this.LAMBDAMAX=1000000000,this.LMTOL=1e-12,this.BIGVAL=9e+99,this.sos,this.sosprev,this.lambda,this.myH=null,this.nadj=0,this.npts=0,this.delta,this.beta,this.alpha,this.amatrix,this.myH=X,this.nadj=Y,this.npts=I,this.delta=Array(this.nadj).fill(0),this.beta=Array(this.nadj).fill(0),this.alpha=Array(this.nadj).fill(0),this.amatrix=Array(this.nadj).fill(0),this.alpha=this.alpha.map(()=>Array(this.nadj)),this.amatrix=this.amatrix.map(()=>Array(this.nadj)),this.lambda=this.LAMBDAZERO;var F=0,W=!1;do W=this.bLMiter(),O&&O(this.myH.params),F++;while(!W&&F<this.LMITER)}bLMiter(){for(var X=0;X<this.nadj;X++)this.delta[X]=0;if(this.sos=this.myH.nudge(this.delta),this.sos==this.BIGVAL)return console.error('  bLMiter finds faulty initial nudge()'),!1;if(this.sosprev=this.sos,console.log('  bLMiter..SumOfSquares= '+this.sos),!this.myH.buildJacobian())return console.error('  bLMiter finds buildJacobian()=false'),!1;for(var X=0;X<this.nadj;X++){this.beta[X]=0;for(var Y=0;Y<this.npts;Y++)this.beta[X]-=this.myH.getResidualElement(Y)*this.myH.getJacobianElement(Y,X)}for(var X=0;X<this.nadj;X++)for(var I=0;I<this.nadj;I++){this.alpha[I][X]=0;for(var Y=0;Y<this.npts;Y++)this.alpha[I][X]+=this.myH.getJacobianElement(Y,I)*this.myH.getJacobianElement(Y,X)}var O=0;do{for(var X=0;X<this.nadj;X++)for(var I=0;I<this.nadj;I++)this.amatrix[I][X]=this.alpha[I][X]+(I==X?this.lambda:0);this.gaussj(this.amatrix,this.nadj);for(var X=0;X<this.nadj;X++){this.delta[X]=0;for(var I=0;I<this.nadj;I++)this.delta[X]+=this.amatrix[I][X]*this.beta[I]}if(this.sos=this.myH.nudge(this.delta),this.sos==this.BIGVAL)return console.error('  LMinner failed SOS step'),!1;if(O=(this.sos-this.sosprev)/(1+this.sos),0>=O){this.lambda*=this.LMSHRINK;break}for(var F=0;F<this.nadj;F++)this.delta[F]*=-1;if(this.myH.nudge(this.delta),O<this.LMTOL)break;this.lambda*=this.LMBOOST}while(this.lambda<this.LAMBDAMAX);return O>-this.LMTOL||this.lambda>this.LAMBDAMAX}gaussj(X,Y){var I=1,O,F,W,V,B,R,G=Array(100),U=Array(100);for(B=0;B<Y;B++){for(O=0,W=B;W<Y;W++)for(V=B;V<Y;V++)Math.abs(O)<=Math.abs(X[W][V])&&(O=X[W][V],G[B]=W,U[B]=V);if(0==O)return 0;if(W=G[B],W>B)for(V=0;V<Y;V++)F=X[B][V],X[B][V]=X[W][V],X[W][V]=-F;if(V=U[B],V>B)for(W=0;W<Y;W++)F=X[W][B],X[W][B]=X[W][V],X[W][V]=-F;for(W=0;W<Y;W++)W!=B&&(X[W][B]=-X[W][B]/O);for(W=0;W<Y;W++)for(V=0;V<Y;V++)W!=B&&V!=B&&(X[W][V]+=X[W][B]*X[B][V]);for(V=0;V<Y;V++)V!=B&&(X[B][V]/=O);X[B][B]=1/O,I*=O}for(R=0;R<Y;R++){if(B=Y-R-1,V=G[B],V>B)for(W=0;W<Y;W++)F=X[W][B],X[W][B]=-X[W][V],X[W][V]=F;if(W=U[B],W>B)for(V=0;V<Y;V++)F=X[B][V],X[B][V]=-X[W][V],X[W][V]=F}return I}}T.default=class{constructor(Y){this.DELTAP=0.000001,this.BIGVAL=9e+99,this.WEIGHT=1,console.log(Y),this.setYData(Y.dataY),this.setXData(Y.dataX),this.setWeight(Y.weight),this.setInitialParams(Y.params),Y.subsetIndex&&this.setSubset(...Y.subsetIndex),this.setFunction(Y.function),Y.progress&&this.hookIteration(Y.progress),this.options=Y}setYData(Y){this.data=Y}setXData(Y){this.dataX=Y}setWeight(Y){this.weight=Y}setInitialParams(Y){this.parms=Y,this.parms=this.parms.map(I=>{return'function'==typeof I?I(this.data,this.dataX):I}),this.NPARMS=Y.length}setSubset(Y,I){Y!==void 0&&I!==void 0&&(this._from=Y,this._to=I)}hookIteration(Y){this._hookIteration=I=>{let O=this.buildFit(I,200);Y(O)}}setFunction(Y){this._func=Y}init(){if(void 0!==this._from&&void 0!==this._to){if(this._from>=this._to)throw'Impossible to fit negative subranges. The starting index must be lower than the ending index';if(this.NPTS=this._to-this._from+1,this.data&&this.data.getLength()<=this._to)throw'Wave Y has not enough point to be fitted to subrange ['+this._from+', '+this._to+']';if(0>this._from)throw'Impossible to fit a subrange with negative indices'}else this.NPTS=this.data.getLength(),this._from=0,this._to=this.data.getLength()-1;if(this.dataX&&this.dataX.getLength()<=this._to)throw'Wave X has not enough point to be fitted to subrange ['+this._from+', '+this._to+']';this.arrY=this.data.getDataY(),this.arrX=this.dataX?this.dataX.getDataY():this.data.getDataX(),this.resid=Array(this.NPTS).fill(0),this.jac=Array(this.NPTS).fill(0),this.jac=this.jac.map(()=>Array(this.NPARMS))}fit(){return this.log('Starting the fit with initial parameter list {'+this.parms.join()+'};'),new E(this,this.NPARMS,this.NPTS,this._hookIteration),this.log('Fit successful. Output parameters {'+this.parms.join()+'};'),this._result=this.buildFit(this.parms,200),this.options.done&&this.options.done(this.parms,this._result),this._result}func(Y,I){return this._func(Y,I)}computeResiduals(){var Y=0;for(var I=0;I<this.NPTS;I++)this.resid[I]=(this.func(this.arrX[I+this._from],this.parms)-this.arrY[I+this._from])*this.WEIGHT,Y+=this.resid[I]*this.resid[I];return Y}log(Y){console.log(Y)}nudge(Y){for(var I=0;I<this.NPARMS;I++)this.parms[I]+=Y[I];return this.computeResiduals()}buildJacobian(){var Y=Array(this.NPARMS),I=0.5/this.DELTAP,O=0;for(var F=0;F<this.NPARMS;F++){for(var W=0;W<this.NPARMS;W++)Y[W]=W==F?this.DELTAP:0;if(O=this.nudge(Y),O==this.BIGVAL)throw'Bad dBuildJacobian() exit 2';for(var V=0;V<this.NPTS;V++)this.jac[V][F]=this.getResidualElement(V);for(var W=0;W<this.NPARMS;W++)Y[W]=W==F?-2*this.DELTAP:0;if(O=this.nudge(Y),O==this.BIGVAL)throw'Bad dBuildJacobian(). exit 3';for(var V=0;V<this.NPTS;V++)this.jac[V][F]-=this.getResidualElement(V);for(var V=0;V<this.NPTS;V++)this.jac[V][F]*=I;for(var W=0;W<this.NPARMS;W++)Y[W]=W==F?this.DELTAP:0;if(O=this.nudge(Y),O==this.BIGVAL)throw'Bad dBuildJacobian(). exit 4'}return!0}getResidualElement(Y){return this.resid[Y]}getJacobianElement(Y,I){return this.jac[Y][I]}buildFit(Y,I){let O;if(!I)O=this.arrX;else{const R=this.dataX.getMin(this._from,this._to),G=this.dataX.getMax(this._from,this._to);O=Array(I).fill(0).map((U,Z)=>Z*(G-R)/(I-1)+R)}var F=Array(O.length);for(var W=0,V=O.length;W<V;W++)F[W]=this.func(O[W],this.parms);let B=this.options.waveform;return B.setData(F,O),B}}})},function(u,A,S){var C,P,T;(function(E,X){P=[A,S(3)],C=X,T='function'==typeof C?C.apply(A,P):C,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X){'use strict';Object.defineProperty(E,'__esModule',{value:!0}),E.default=function(V){var B=Y.guid();V._queueId=B;var R=new Promise(G=>{O[B]=G});return I.postMessage(V),R};var Y=function(B){if(B&&B.__esModule)return B;var R={};if(null!=B)for(var G in B)Object.prototype.hasOwnProperty.call(B,G)&&(R[G]=B[G]);return R.default=B,R}(X),I,O={};let F=function(){onmessage=function(V){const B=V.data.data,R=V.data.maxX,G=V.data.minX,U=V.data.maxY,Z=V.data.minY,K=V.data.direction;let Q=V.data.numPoints,J=B.length,$=0,ee=-4,te=[],ie=[],ae=[],re=[],se;se=V.data.xdata?function(le){return V.data.xdata[le]}:function(le){return le*V.data.xScale+V.data.xOffset};let ne={};if('x'==K)for(const oe=Q/(R-G);$<J;$++){if(slotNumber=Math.floor((se($)-G)*oe),te[ee]!==slotNumber){ee+=4,te[ee]=slotNumber;let le=(slotNumber+0.5)/oe+G;ie[ee]=le,ie[ee+1]=le,ie[ee+2]=le,ie[ee+3]=le,ae[ee]=B[$],ae[ee+1]=B[$],ae[ee+2]=B[$],ae[ee+3]=B[$],re[ee]=0}ae[ee+1]=Math.min(B[$],ae[ee+1]),ae[ee+2]=Math.max(B[$],ae[ee+2]),ae[ee+3]=B[$],re[ee]+=B[$]}else for(const oe=Q/(U-Z);$<J;$++){if(slotNumber=Math.floor((B[$]-Z)*oe),te[ee]!==slotNumber){ee+=4,te[ee]=slotNumber;let le=(slotNumber+0.5)/oe+Z;ae[ee]=le,ae[ee+1]=le,ae[ee+2]=le,ae[ee+3]=le,ie[ee]=B[$],ie[ee+1]=B[$],ie[ee+2]=B[$],ie[ee+3]=B[$],re[ee]=0}ie[ee+1]=Math.min(se($),ie[ee+1]),ie[ee+2]=Math.max(se($),ie[ee+2]),ie[ee+3]=se($),re[ee]+=se($)}for(ne[Q]={x:ie,y:ae,sums:re},lastAggregation=ae,lastAggregationX=ie,lastAggregationSum=re;256<Q;){if(Q/=2,newAggregation=[],newAggregationX=[],ee=0,'x'==K)for($=0,J=lastAggregation.length;$<J;$+=8)newAggregationX[ee]=(lastAggregationX[$]+lastAggregationX[$+4])/2,newAggregationX[ee+1]=newAggregationX[ee],newAggregationX[ee+2]=newAggregationX[ee],newAggregationX[ee+3]=newAggregationX[ee],newAggregation[ee]=lastAggregation[$],newAggregation[ee+1]=Math.min(lastAggregation[$+1],lastAggregation[$+5]),newAggregation[ee+2]=Math.max(lastAggregation[$+2],lastAggregation[$+6]),newAggregation[ee+3]=lastAggregation[$+7],re[ee]=(lastAggregationSum[$]+lastAggregationSum[$+4])/2,ee+=4;else for($=0,J=lastAggregation.length;$<J;$+=8)newAggregation[ee]=(lastAggregation[$]+lastAggregation[$+4])/2,newAggregation[ee+1]=newAggregation[ee],newAggregation[ee+2]=newAggregation[ee],newAggregation[ee+3]=newAggregation[ee],newAggregationX[ee]=lastAggregationX[$],newAggregationX[ee+1]=Math.min(lastAggregationX[$+1],lastAggregationX[$+5]),newAggregationX[ee+2]=Math.max(lastAggregationX[$+2],lastAggregationX[$+6]),newAggregationX[ee+3]=lastAggregationX[$+7],re[ee]=(lastAggregationSum[$]+lastAggregationSum[$+4])/2,ee+=4;ne[Q]={x:newAggregationX,y:newAggregation,sums:re},lastAggregation=newAggregation,lastAggregationX=newAggregationX,lastAggregationSum=re,re=[]}postMessage({aggregates:ne,_queueId:V.data._queueId})}}.toString();F=F.split('\n'),F.pop(),F.shift();var W=URL.createObjectURL(new Blob([F.join('\n')],{type:'application/javascript'}));I=new Worker(W),I.onmessage=function(V){var B=V.data._queueId;delete V.data._queueId,O[B](V.data),delete O[B]}})},function(u,A,S){var C,P,T;(function(E,X){P=[A,S(2),S(3)],C=X,T='function'==typeof C?C.apply(A,P):C,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X,Y){'use strict';function I(B){try{return B.getBBox()}catch(R){return{height:0,width:0,x:0,y:0}}}Object.defineProperty(E,'__esModule',{value:!0});var O=function(R){return R&&R.__esModule?R:{default:R}}(X),F=function(R){if(R&&R.__esModule)return R;var G={};if(null!=R)for(var U in R)Object.prototype.hasOwnProperty.call(R,U)&&(G[U]=R[U]);return G.default=R,G}(Y),W={backgroundColor:'rgba(255, 255, 255, 0.8)',frame:!0,frameWidth:1,frameColor:'black',paddingTop:10,paddingLeft:10,paddingBottom:10,paddingRight:10,frameRounding:0,movable:!1,shapesToggleable:!0,isSerieHideable:!0,isSerieSelectable:!0};class V{constructor(B,R){this.options=F.extend({},W,R),this.graph=B,this.svg=document.createElementNS(this.graph.ns,'g'),this.subG=document.createElementNS(this.graph.ns,'g'),this.groups=[],this.rect=document.createElementNS(this.graph.ns,'rect'),this.rectBottom=document.createElementNS(this.graph.ns,'rect'),this.rect.setAttribute('x',0),this.rect.setAttribute('y',0),this.rectBottom.setAttribute('x',0),this.rectBottom.setAttribute('y',0),this.series=!1,this.svg.setAttribute('display','none'),this.pos={x:void 0,y:void 0,transformX:0,transformY:0},this.setEvents(),this.eyeId=F.guid(),this.eyeCrossedId=F.guid();var G=F.SVGParser('<svg xmlns="http://www.w3.org/2000/svg"><symbol id="'+this.eyeCrossedId+'" viewBox="0 -256 1850 1850"><rect pointer-events="fill" fill="transparent" x="-256" y="0" width="2106" height="1850" /><g transform="matrix(1,0,0,-1,30.372881,1214.339)"><path d="m 555,201 78,141 q -87,63 -136,159 -49,96 -49,203 0,121 61,225 Q 280,812 128,576 295,318 555,201 z m 389,759 q 0,20 -14,34 -14,14 -34,14 -125,0 -214.5,-89.5 Q 592,829 592,704 q 0,-20 14,-34 14,-14 34,-14 20,0 34,14 14,14 14,34 0,86 61,147 61,61 147,61 20,0 34,14 14,14 14,34 z m 363,191 q 0,-7 -1,-9 Q 1201,954 991,576 781,198 675,9 l -49,-89 q -10,-16 -28,-16 -12,0 -134,70 -16,10 -16,28 0,12 44,87 Q 349,154 228.5,262 108,370 20,507 0,538 0,576 q 0,38 20,69 153,235 380,371 227,136 496,136 89,0 180,-17 l 54,97 q 10,16 28,16 5,0 18,-6 13,-6 31,-15.5 18,-9.5 33,-18.5 15,-9 31.5,-18.5 16.5,-9.5 19.5,-11.5 16,-10 16,-27 z m 37,-447 Q 1344,565 1265,450.5 1186,336 1056,286 l 280,502 q 8,-45 8,-84 z m 448,-128 q 0,-35 -20,-69 Q 1733,443 1663,362 1513,190 1315.5,95 1118,0 896,0 l 74,132 q 212,18 392.5,137 180.5,119 301.5,307 -115,179 -282,294 l 63,112 q 95,-64 182.5,-153 87.5,-89 144.5,-184 20,-34 20,-69 z" fill="#c0c0c0"></path></g></symbol></svg>'),U=F.SVGParser('<svg xmlns="http://www.w3.org/2000/svg"><symbol id="'+this.eyeId+'" viewBox="0 -256 1850 1850"><rect pointer-events="fill" x="-256" y="0" fill="transparent" width="2106" height="1850" /><g transform="matrix(1,0,0,-1,30.372881,1259.8983)"><path d="m 1664,576 q -152,236 -381,353 61,-104 61,-225 0,-185 -131.5,-316.5 Q 1081,256 896,256 711,256 579.5,387.5 448,519 448,704 448,825 509,929 280,812 128,576 261,371 461.5,249.5 662,128 896,128 1130,128 1330.5,249.5 1531,371 1664,576 z M 944,960 q 0,20 -14,34 -14,14 -34,14 -125,0 -214.5,-89.5 Q 592,829 592,704 q 0,-20 14,-34 14,-14 34,-14 20,0 34,14 14,14 14,34 0,86 61,147 61,61 147,61 20,0 34,14 14,14 14,34 z m 848,-384 q 0,-34 -20,-69 Q 1632,277 1395.5,138.5 1159,0 896,0 633,0 396.5,139 160,278 20,507 0,542 0,576 q 0,34 20,69 140,229 376.5,368 236.5,139 499.5,139 263,0 499.5,-139 236.5,-139 376.5,-368 20,-35 20,-69 z" fill="#444444" /></g></symbol></svg>');this.svg.appendChild(document.adoptNode(U.documentElement.firstChild)),this.svg.appendChild(document.adoptNode(G.documentElement.firstChild)),this.svg.appendChild(this.subG),this.applyStyle()}setPosition(B,R,G){B&&(this.position=B,this.alignToX=R||'left',this.alignToY=G||'top')}setDraggable(B){this.options.movable=B}setAutoPosition(B){return-1<['bottom','left','top','right'].indexOf(B=B.toLowerCase())?(this.autoPosition=B,this):void(this.requireDelayedUpdate(),this.autoPosition=!1)}autoPosition(){return this.setAutoPosition(...arguments)}buildLegendBox(){var B=this.series||this.graph.getSeries(),R=0,G=this.options.paddingTop;this.autoPosition?this.graph.getDom().appendChild(this.getDom()):this.graph.graphingZone.appendChild(this.getDom());for(var U=0,Z=B.length;U<Z;U++)if(!B[U].excludedFromLegend||this.series){if('bottom'==this.autoPosition||'top'==this.autoPosition){var K=I(this.groups[U]);R+K.width>this.graph.getDrawingWidth()-this.options.paddingRight&&(G+=16,R=0)}this.groups[U].setAttribute('transform','translate( '+R+', '+G+')'),'bottom'==this.autoPosition||'top'==this.autoPosition?(R+=K.width+10,G+=0):(R=0,G+=16)}var K=I(this.subG);switch(this.width=K.width+this.options.paddingRight+this.options.paddingLeft,this.height=K.height+this.options.paddingBottom+this.options.paddingTop,this.rect.setAttribute('width',this.width),this.rect.setAttribute('height',this.height),this.rect.setAttribute('fill','none'),this.rect.setAttribute('pointer-events','fill'),this.rect.setAttribute('display','none'),this.options.movable&&(this.rectBottom.style.cursor='move'),this.rectBottom.setAttribute('width',this.width),this.rectBottom.setAttribute('height',this.height),this.rectBottom.setAttribute('x',K.x-this.options.paddingLeft),this.rectBottom.setAttribute('y',K.y-this.options.paddingTop),this.position=this.position||{},this.autoPosition){case'bottom':this.position.y=this.graph.getHeight()+'px',this.position.x=(this.graph.getWidth()-this.width)/2+'px',this.alignToY='bottom',this.alignToX=!1;break;case'left':this.position.x='6px',this.position.y=(this.graph.getHeight()-this.height)/2+'px',this.alignToX='left',this.alignToY=!1;break;case'right':this.position.x=this.graph.getWidth()+'px',this.position.y=(this.graph.getHeight()-this.height)/2+'px',this.alignToX='right',this.alignToY=!1;break;case'top':this.position.x=(this.graph.getWidth()-this.width)/2+'px',this.position.y='10px',this.alignToY='top',this.alignToX=!1;}if(this.autoPosition){switch(this.autoPosition){case'bottom':this.graph.options.paddingBottom=this.height+10;break;case'left':this.graph.options.paddingLeft=this.width+5;break;case'right':this.graph.options.paddingRight=this.width+10;break;case'top':this.graph.options.paddingTop=this.height+14;}this.graph.updateGraphingZone(),this.graph.getDrawingHeight(),this.graph.getDrawingWidth()}this.bbox=K}calculatePosition(){var B=O.default.check(this.position);let R=B.compute(this.graph,this.graph.getXAxis(),this.graph.getYAxis());R&&('right'==this.alignToX&&(R.x-=this.width,R.x+=this.bbox.x),'bottom'==this.alignToY?(R.y-=this.height,R.y+=this.bbox.y):R.y+=this.bbox.y,this.pos.transformX=R.x,this.pos.transformY=R.y,this._setPosition())}update(B){if(!(this.graph.isDelayedUpdate()||!this._requiredUpdate&&B)){this._requiredUpdate=!1;var R=this;for(this.applyStyle();this.subG.hasChildNodes();)this.subG.removeChild(this.subG.lastChild);this.svg.insertBefore(this.rectBottom,this.svg.firstChild);var G=this.series||this.graph.getSeries();if(0<G.length)this.svg.setAttribute('display','block');else return;('bottom'==this.autoPosition||'top'==this.autoPosition)&&this.graph.getDrawingWidth();for(var U=0,Z=G.length;U<Z;U++)(!G[U].excludedFromLegend||this.series)&&function(K){var Q,J,$;('bottom'==this.autoPosition||'top'==this.autoPosition)&&this.graph.getDrawingWidth(),Q=document.createElementNS(R.graph.ns,'g');var ee=document.createElementNS(R.graph.ns,'rect');R.subG.appendChild(Q),Q.appendChild(ee);var J=G[K].getSymbolForLegend(),te=G[K].getMarkerForLegend(),$=G[K].getTextForLegend(),ie=35;if(this.isHideable()){ie+=20;var ae=document.createElementNS(R.graph.ns,'use');ae.setAttributeNS('http://www.w3.org/1999/xlink','xlink:href','#'+(G[U].isShown()?this.eyeId:this.eyeCrossedId)),ae.setAttribute('width',15),ae.setAttribute('height',15),ae.setAttribute('x',35),ae.setAttribute('y',-8),ae.addEventListener('click',function(se){se.stopPropagation();var ne;G[K].isShown()?(G[K].hide(R.options.hideShapesOnHideSerie),ne=R.eyeCrossedId):(G[K].show(R.options.hideShapesOnHideSerie),ne=R.eyeId),ae.setAttributeNS('http://www.w3.org/1999/xlink','xlink:href','#'+ne)})}$.setAttribute('transform','translate('+ie+', 3)'),J&&Q.appendChild(J),'scatter'==G[K].getType()&&J.setAttribute('transform','translate( 20, 0 )'),te&&Q.appendChild(te),ae&&Q.appendChild(ae),Q.appendChild($);var re=I(Q);ee.setAttribute('x',re.x),ee.setAttribute('y',re.y),ee.setAttribute('width',re.width),ee.setAttribute('height',re.height),ee.setAttribute('fill','none'),ee.setAttribute('pointer-events','fill'),R.groups[K]=Q,Q.addEventListener('click',function(se){var ne=G[K];ne.isShown()&&(R.isSelectable()&&!ne.isSelected()?R.graph.selectSerie(ne):R.graph.unselectSerie(ne),se.preventDefault(),se.stopPropagation())})}.call(this,U);this.svg.appendChild(this.rect),this.buildLegendBox(),this.calculatePosition()}}isHideable(){return this.options.isSerieHideable}notHideable(){return this.options.isSerieHideable=!1,this}hideable(){return this.options.isSerieHideable=!0,this}set seriesHideable(B){this.options.isSerieHideable=!!B}get seriesHideable(){return this.options.isSerieHideable}isSelectable(){return this.options.isSerieSelectable}isToggleShapes(){return this.options.shapesToggleable}getDom(){return this.svg}setEvents(){var B=this,R=this.pos;this.svg.addEventListener('mousedown',function(G){G.stopPropagation(),console.log('down'),B.options.movable&&(R.x=G.clientX,R.y=G.clientY,G.preventDefault(),B.mousedown=!0,B.graph.elementMoving(B),B.rect.setAttribute('display','block'))}),this.svg.addEventListener('click',function(G){G.stopPropagation()}),this.svg.addEventListener('dblclick',function(G){G.stopPropagation()}),this.svg.addEventListener('mousemove',function(G){B.handleMouseMove(G)})}handleMouseUp(B){B.stopPropagation(),B.preventDefault(),this.mousedown=!1,this.rect.setAttribute('display','none'),this.graph.elementMoving(!1)}handleMouseMove(B){if(this.mousedown){var R=this.pos,G=B.clientX-R.x,U=B.clientY-R.y;R.transformX+=G,R.transformY+=U,R.x=B.clientX,R.y=B.clientY,B.stopPropagation(),B.preventDefault(),this._setPosition()}}_setPosition(){var B=this.pos;isNaN(B.transformX)||isNaN(B.transformY)||!1===B.transformX||!1===B.transformY||this.svg.setAttribute('transform','translate('+B.transformX+', '+B.transformY+')')}applyStyle(){this.options.frame&&(this.rectBottom.setAttribute('stroke',this.options.frameColor),this.rectBottom.setAttribute('stroke-width',this.options.frameWidth+'px'),this.rectBottom.setAttribute('rx',this.options.frameRounding),this.rectBottom.setAttribute('ry',this.options.frameRounding)),this.rectBottom.setAttribute('fill',this.options.backgroundColor)}fixSeries(){var B=[];if(!1===arguments[0])return this.series=!1,void this.update();for(var R=0,G=arguments.length;R<G;R++)Array.isArray(arguments[R])?B=B.concat(arguments[R]):B.push(arguments[R]);this.update(),this.series=B}fixSeriesAdd(B){this.series=this.series||[],this.series.push(B)}requireDelayedUpdate(){this._requiredUpdate=!0}}E.default=V})},function(u,A,S){var C,P,T;(function(E,X){P=[A,S(10)],C=X,T='function'==typeof C?C.apply(A,P):C,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var Y=function(F){return F&&F.__esModule?F:{default:F}}(X);class I extends Y.default{constructor(O,F,W={}){super(O,F,W),this.top='top'==F}getAxisPosition(){if(!this.options.display)return 0;var O=(1==this.options.tickPosition?8:20)+1*this.graph.options.fontSize;return this.getLabel()&&(O+=this.graph.options.fontSize),O}isX(){return!0}isY(){return!1}setShift(O){this.shift=O;void 0!==this.getShift()&&this.graph.getDrawingHeight()&&this.group.setAttribute('transform','translate(0 '+(this.floating?this.getShift():this.top?this.shift:this.graph.getDrawingHeight()-this.shift)+')')}getMaxSizeTick(){return(this.top?-1:1)*(1==this.options.tickPosition?10:10)}drawTick(O,F,W,V){var B=this,R;if(R=V||this.getPos(O),!(void 0==R||isNaN(R))){var G=this.nextTick(F,function(Z){Z.setAttribute('y1',(B.top?1:-1)*B.tickPx1*B.tickScaling[F]),Z.setAttribute('y2',(B.top?1:-1)*B.tickPx2*B.tickScaling[F]),1==F?Z.setAttribute('stroke',B.getPrimaryTicksColor()):Z.setAttribute('stroke',B.getSecondaryTicksColor())});if(G.setAttribute('x1',R),G.setAttribute('x2',R),this.nextGridLine(1==F,R,R,0,this.graph.getDrawingHeight()),1==F){var U=this.nextTickLabel(function(Z){Z.setAttribute('y',(B.top?-1:1)*((1==B.options.tickPosition?8:20)+(B.top?10:0))),Z.setAttribute('text-anchor','middle'),'black'!==B.getTicksLabelColor()&&Z.setAttribute('fill',B.getTicksLabelColor()),Z.style.dominantBaseline='hanging'});U.setAttribute('x',R),this.setTickContent(U,O,W)}return[G,U]}}drawLabel(){'black'!==this.getLabelColor()&&this.label.setAttribute('fill',this.getLabelColor()),this.katexElement?(this.label.setAttribute('style','display: none;'),this.katexElement.setAttribute('x',Math.abs(this.getMaxPx()+this.getMinPx())/2),this.katexElement.setAttribute('y',(this.top?-1:1)*((1==this.options.tickPosition?10:25)+this.graph.options.fontSize)),this.group.appendChild(this.katexElement)):(this.options.labelFont&&this.label.setAttribute('font-family',this.options.labelFont),this.label.setAttribute('text-anchor','middle'),this.label.setAttribute('style','display: initial;'),this.label.setAttribute('x',Math.abs(this.getMaxPx()+this.getMinPx())/2),this.label.setAttribute('y',(this.top?-1:1)*((1==this.options.tickPosition?10:25)+this.graph.options.fontSize)),this.labelTspan.textContent=this.getLabel())}draw(){var O=super.draw(...arguments);return this.drawSpecifics(),O}drawSpecifics(){this.drawLabel(),this.line.setAttribute('x1',this.getMinPx()),this.line.setAttribute('x2',this.getMaxPx()),this.line.setAttribute('y1',0),this.line.setAttribute('y2',0),this.line.setAttribute('stroke',this.getAxisColor()),this.top||(this.labelTspan.style.dominantBaseline='hanging',this.expTspan.style.dominantBaseline='hanging',this.expTspanExp.style.dominantBaseline='hanging',this.unitTspan.style.dominantBaseline='hanging');var O=this.getSpan();this.line.setAttribute('marker-start',this.options.splitMarks&&0!=O[0]?'url(#horionzalsplit_'+this.graph.getId()+')':''),this.line.setAttribute('marker-end',this.options.splitMarks&&1!=O[1]?'url(#horionzalsplit_'+this.graph.getId()+')':'')}_draw0Line(O){this._0line||(this._0line=document.createElementNS(this.graph.ns,'line')),this._0line.setAttribute('x1',O),this._0line.setAttribute('x2',O),this._0line.setAttribute('y1',0),this._0line.setAttribute('y2',this.getMaxPx()),this._0line.setAttribute('stroke','black'),this.groupGrids.appendChild(this._0line)}handleMouseMoveLocal(O){O-=this.graph.getPaddingLeft(),this.mouseVal=this.getVal(O)}setMinMaxFlipped(){var O=this.maxPx-this.minPx;if(!isNaN(O)){var F=O*this.options.span[1]+this.minPx-this.options.marginMax,W=O*this.options.span[0]+this.minPx+this.options.marginMin;this.minPxFlipped=this.isFlipped()?F:W,this.maxPxFlipped=this.isFlipped()?W:F}}getZProj(O){return O*this.graph.options.zAxis.shiftX}}E.default=I})},function(u,A,S){var C,P,T;(function(E,X){P=[A,S(1),S(4),S(3)],C=X,T='function'==typeof C?C.apply(A,P):C,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X,Y,I){'use strict';function O(G){return G&&G.__esModule?G:{default:G}}Object.defineProperty(E,'__esModule',{value:!0});var F=O(X),W=O(Y),V=function(U){if(U&&U.__esModule)return U;var Z={};if(null!=U)for(var K in U)Object.prototype.hasOwnProperty.call(U,K)&&(Z[K]=U[K]);return Z.default=U,Z}(I);const B={lineAt0:!1,display:!0,flipped:!1,axisDataSpacing:{min:0.1,max:0.1},unitModification:!1,primaryGrid:!0,secondaryGrid:!0,primaryGridColor:'#f0f0f0',secondaryGridColor:'#f0f0f0',primaryGridWidth:1,secondaryGridWidth:1,shiftToZero:!1,tickPosition:1,nbTicksPrimary:3,nbTicksSecondary:10,ticklabelratio:1,exponentialFactor:0,exponentialLabelFactor:0,logScale:!1,forcedMin:!1,forcedMax:!1,span:[0,1],marginMin:0,marginMax:0,scientificScale:!1,scientificScaleExponent:!1,engineeringScale:!1,unit:!1,unitWrapperBefore:'',unitWrapperAfter:'',splitMarks:!1,useKatexForLabel:!1};class R extends W.default{constructor(){super()}init(G,U,Z){this.unitModificationTimeTicks=[[1,[1,2,5,10,20,30]],[60,[1,2,5,10,20,30]],[3600,[1,2,6,12]],[86400,[1,2,3,4,5,10,20,40]]],this.graph=G,this.options=V.extend(!0,{},B,Z,U),this.group=document.createElementNS(this.graph.ns,'g'),this.hasChanged=!0,this.rectEvent=document.createElementNS(this.graph.ns,'rect'),this.rectEvent.setAttribute('pointer-events','fill'),this.rectEvent.setAttribute('fill','transparent'),this.group.appendChild(this.rectEvent),this.graph.axisGroup.appendChild(this.group),this.line=document.createElementNS(this.graph.ns,'line'),this.line.setAttribute('stroke','black'),this.line.setAttribute('shape-rendering','crispEdges'),this.line.setAttribute('stroke-linecap','square'),this.groupTicks=document.createElementNS(this.graph.ns,'g'),this.groupTickLabels=document.createElementNS(this.graph.ns,'g'),this.group.appendChild(this.groupTicks),this.group.appendChild(this.groupTickLabels),this.group.appendChild(this.line),this.labelValue,this.label=document.createElementNS(this.graph.ns,'text'),this.labelTspan=document.createElementNS(this.graph.ns,'tspan'),this.preunit='',this.unitTspan=document.createElementNS(this.graph.ns,'tspan'),this.expTspan=document.createElementNS(this.graph.ns,'tspan'),this.expTspanExp=document.createElementNS(this.graph.ns,'tspan'),this.label.appendChild(this.labelTspan),this.label.appendChild(this.unitTspan),this.label.appendChild(this.expTspan),this.label.appendChild(this.expTspanExp),this.expTspan.setAttribute('dx',6),this.expTspanExp.setAttribute('dy',-5),this.expTspanExp.setAttribute('font-size','0.8em'),this.label.setAttribute('text-anchor','middle'),this.setTickPosition(this.options.tickPosition),this.gridLinePath={primary:'',secondary:''},this.gridPrimary=document.createElementNS(this.graph.ns,'path'),this.gridSecondary=document.createElementNS(this.graph.ns,'path'),this.graph.groupPrimaryGrids.appendChild(this.gridPrimary),this.graph.groupSecondaryGrids.appendChild(this.gridSecondary),this.setGridLinesStyle(),this.group.appendChild(this.label),this.groupSeries=document.createElementNS(this.graph.ns,'g'),this.group.appendChild(this.groupSeries),this.widthHeightTick=0,this.ticks={},this.ticksLabels=[],this.tickScaling={'1':3,'2':2,'3':1,'4':0.5},this.currentTick={},this.lastCurrentTick={},this.series=[],this.totalDelta=0,this.currentAction=!1,this.group.addEventListener('mousemove',K=>{K.preventDefault();var Q=this.graph._getXY(K);this.handleMouseMoveLocal(Q.x,Q.y,K);for(var J=0,$=this.series.length;J<$;J++)this.series[J].handleMouseMove(!1,!0)}),this.labels=[],this.group.addEventListener('click',K=>{K.preventDefault();var Q=this.graph._getXY(K);this.addLabel(this.getVal(Q.x-this.graph.getPaddingLeft()))}),this.gridPrimary.setAttribute('clip-path','url(#_clipplot'+this.graph._creation+')'),this.gridSecondary.setAttribute('clip-path','url(#_clipplot'+this.graph._creation+')'),this.graph._axisHasChanged(this)}handleMouseMoveLocal(){}hide(){return this.options.display=!1,this}show(){return this.options.display=!0,this}setDisplay(G){return this.options.display=!!G,this}isDisplayed(){return this.options.display}isShown(){return this.isDisplayed(...arguments)}kill(G,U){this.graph.killAxis(this,G,U)}setLineAt0(G){this.options.lineAt0=!!G}adaptTo(G,U,Z,K){return G?(this.options.adaptTo={axis:G,thisValue:U,foreignValue:Z,preference:K},this.adapt(),this):(this.options.adaptTo=!1,this)}adapt(){if(this.options.adaptTo){if(!G);var G=this.options.adaptTo.axis,U=this.options.adaptTo.thisValue,Z=this.options.adaptTo.foreignValue;if((void 0===G.currentAxisMin||void 0===G.currentAxisMax)&&G.setMinMaxToFitSeries(),!1!==this.options.forcedMin&&!1==this.options.forcedMax||'max'!==this.options.adaptTo.preference){this.currentAxisMin=!1===this.options.forcedMin?this._zoomed?this.getCurrentMin():this.getMinValue()-(U-this.getMinValue())*(this.options.axisDataSpacing.min*(G.getCurrentMax()-G.getCurrentMin())/(Z-G.getCurrentMin())):this.options.forcedMin,this.currentAxisMin==U&&(this.currentAxisMin-=this.options.axisDataSpacing.min*this.getInterval());var K=!1===this.options.forcedMin?this.currentAxisMin:this.options.forcedMin;this.currentAxisMax=(U-K)*(G.getCurrentMax()-G.getCurrentMin())/(Z-G.getCurrentMin())+K}else{this.currentAxisMax=!1===this.options.forcedMax?this._zoomed?this.getCurrentMax():this.getMaxValue()+(this.getMaxValue()-U)*(this.options.axisDataSpacing.max*(G.getCurrentMax()-G.getCurrentMin())/(G.getCurrentMax()-Z)):this.options.forcedMax,this.currentAxisMax==U&&(this.currentAxisMax+=this.options.axisDataSpacing.max*this.getInterval());var K=!1===this.options.forcedMax?this.currentAxisMax:this.options.forcedMax;this.currentAxisMin=(U-K)*(G.getCurrentMin()-G.getCurrentMax())/(Z-G.getCurrentMax())+K}this.graph._axisHasChanged(this)}}setFloating(G,U){return this.floating=!0,this.floatingAxis=G,this.floatingValue=U,this}getFloatingAxis(){return this.floatingAxis}getFloatingValue(){return this.floatingValue}setAxisDataSpacing(G,U){return this.options.axisDataSpacing.min=G,this.options.axisDataSpacing.max=U||G,this}dataSpacing(){return this.setAxisDataSpacing(...arguments)}setAxisDataSpacingMin(G){this.options.axisDataSpacing.min=G}setAxisDataSpacingMax(G){this.options.axisDataSpacing.max=G}setMinPx(G){this.minPx=G,this.setMinMaxFlipped()}setMaxPx(G){this.maxPx=G,this.setMinMaxFlipped()}getMinPx(){return this.minPxFlipped}getMaxPx(){return this.maxPxFlipped}getMathMaxPx(){return this.maxPx}getMathMinPx(){return this.minPx}getMinValue(){return!1===this.options.forcedMin?this.dataMin:this.options.forcedMin}getMaxValue(){return!1===this.options.forcedMax?this.dataMax:this.options.forcedMax}setMinValueData(G){this.dataMin=G}setMaxValueData(G){this.dataMax=G}getDataMax(){return this.dataMax}getDataMin(){return this.dataMin}forceMin(G,U){return this.options.forcedMin=G,this.setCurrentMin(U?this.getCurrentMin():void 0),this.graph._axisHasChanged(this),this}forceMax(G,U){return this.options.forcedMax=G,this.setCurrentMax(U?this.getCurrentMax():void 0),this.graph._axisHasChanged(this),this}getForcedMin(){return this.options.forcedMin}getForcedMax(){return this.options.forcedMax}forceToAxis(G){return G.getMaxValue&&G.getMinValue&&(this.options.forcedMin=G.getMinValue(),this.options.forcedMax=G.getMaxValue()),this}getNbTicksPrimary(){return this.options.nbTicksPrimary}setNbTicksPrimary(G){this.options.nbTicksPrimary=G}getNbTicksSecondary(){return this.options.nbTicksSecondary}handleMouseMove(G){this.mouseVal=this.getVal(G)}handleMouseWheel(G,U,Z){G=Math.min(0.2,Math.max(-0.2,G)),'min'==Z?Z=this.getMinValue():'max'==Z?Z=this.getMaxValue():!Z&&(Z=0),this._doZoomVal((this.getCurrentMax()-Z)*(1+G)+Z,(this.getCurrentMin()-Z)*(1+G)+Z),this.graph.draw()}set zoomLock(G){this._zoomLocked=G}get zoomLock(){return this._zoomLocked||!1}zoom(G,U,Z){return!Z&&this.zoomLock?void 0:this._doZoomVal(G,U,!0)}_doZoomVal(G,U,Z){return this._doZoom(this.getPx(G),this.getPx(U),G,U,Z)}_doZoom(G,U,Z,K,Q){var Z=void 0===Z?this.getVal(G):Z,K=void 0===K?this.getVal(U):K;return this.setCurrentMin(Math.min(Z,K)),this.setCurrentMax(Math.max(Z,K)),this.cacheCurrentMin(),this.cacheCurrentMax(),this.cacheInterval(),this._zoomed=!0,this.adapt(),this._hasChanged=!0,Q||this.emit('zoom',[this.currentAxisMin,this.currentAxisMax,this]),this}getSerieShift(){return this._serieShift}getSerieScale(){return this._serieScale}getMouseVal(){return this.mouseVal}getUnitPerTick(G,U,Z){var K=G/de;U=U?Math.min(U,G/10):G/10;var Q=Z/U;switch(this.options.unitModification){case'time':case'time:min.sec':var J=this.getModifiedValue(this.getMaxValue());3600>J||J<86400;var $=!1;for(var ee=0,te=this.unitModificationTimeTicks.length;ee<te;ee++){for(var ie=0,ae=this.unitModificationTimeTicks[ee][1].length;ie<ae;ie++)if(Q<this.unitModificationTimeTicks[ee][0]*this.unitModificationTimeTicks[ee][1][ie]){$=!0;break}if($)break}le=ee===this.unitModificationTimeTicks.length?1:this.unitModificationTimeTicks[ee][0]*this.unitModificationTimeTicks[ee][1][ie];break;default:var re=Math.floor(Math.log(Q)/Math.log(10)),se=Q*Math.pow(10,-re);this.decimals=-re;var ne=[1,2,5,10],oe=!1;for(var ee=ne.length-1;0<=ee;ee--)(!oe||Math.abs(ne[ee]-se)<Math.abs(oe-se))&&(oe=ne[ee]);var le=oe*Math.pow(10,re);}var de=Z/le,K=G/U;return[le,de,K]}setMinMaxToFitSeries(G){var U=this.getInterval();return this.options.logScale?(this.currentAxisMin=Math.max(1e-50,0.9*this.getMinValue()),this.currentAxisMax=Math.max(1e-50,1.1*this.getMaxValue())):(this.currentAxisMin=this.getMinValue(),this.currentAxisMax=this.getMaxValue(),!1===this.getForcedMin()&&(this.currentAxisMin-=this.options.axisDataSpacing.min*U),!1===this.getForcedMax()&&(this.currentAxisMax+=this.options.axisDataSpacing.max*U)),(isNaN(this.currentAxisMin)||isNaN(this.currentAxisMax))&&(this.currentAxisMax=void 0,this.currentAxisMin=void 0),this.cacheCurrentMin(),this.cacheCurrentMax(),this.cacheInterval(),this._zoomed=!1,this.adapt(),G||this.graph._axisHasChanged(this),this.emit('zoomOutFull',[this.currentAxisMin,this.currentAxisMax,this]),this}getInterval(){return this.getMaxValue()-this.getMinValue()}getCurrentInterval(){return this.cachedInterval}getCurrentMin(){return this.cachedCurrentMin}getCurrentMax(){return this.cachedCurrentMax}cacheCurrentMin(){this.cachedCurrentMin=this.currentAxisMin==this.currentAxisMax?this.options.logScale?this.currentAxisMin/10:this.currentAxisMin-1:this.currentAxisMin}cacheCurrentMax(){this.cachedCurrentMax=this.currentAxisMax==this.currentAxisMin?this.options.logScale?10*this.currentAxisMax:this.currentAxisMax+1:this.currentAxisMax}cacheInterval(){this.cachedInterval=this.cachedCurrentMax-this.cachedCurrentMin}setCurrentMin(G){return(void 0===G||!1!==this.getForcedMin()&&G<this.getForcedMin())&&(G=this.getMinValue()),this.currentAxisMin=G,this.options.logScale&&(this.currentAxisMin=Math.max(1e-50,G)),this.graph._axisHasChanged(this),this}setCurrentMax(G){(G===void 0||!1!==this.getForcedMax()&&G>this.getForcedMax())&&(G=this.getMaxValue()),this.currentAxisMax=G,this.options.logScale&&(this.currentAxisMax=Math.max(1e-50,G)),this.graph._axisHasChanged(this)}flip(G){return this.options.flipped=G,this.setMinMaxFlipped(),this}isFlipped(){return this.options.flipped}_draw(){var G=this;this.cacheCurrentMax(),this.cacheCurrentMin(),this.cacheInterval(),(void 0==this.currentAxisMin||void 0==this.currentAxisMax)&&this.setMinMaxToFitSeries(!0);var U=Math.abs(this.getMaxPx()-this.getMinPx()),Z=this.getCurrentInterval();if(!this.options.display)return this.line.setAttribute('display','none'),0;this.line.setAttribute('display','block'),this.scientificExponent=!0==this.options.scientificScale?this.options.scientificScaleExponent?this.options.scientificScaleExponent:Math.floor(Math.log(Math.max(Math.abs(this.getCurrentMax()),Math.abs(this.getCurrentMin())))/Math.log(10)):0,this.gridLinePath.primary='',this.gridLinePath.secondary='';let K;if(!this.options.useKatexForLabel||!this.graph.hasKatexRenderer())this.options.unitDecade&&this.options.unit&&0!==this.scientificExponent&&(this.scientificExponent=this.getEngineeringExponent(this.scientificExponent))&&(K=this.getExponentGreekLetter(this.scientificExponent))?(this.preunit=K,this.unitTspan.setAttribute('dx',0)):0===this.scientificExponent||isNaN(this.scientificExponent)?(!this.options.unit&&this.unitTspan.setAttribute('display','none'),this.preunit='',this.expTspan.setAttribute('display','none'),this.expTspanExp.setAttribute('display','none')):(this.options.engineeringScale&&(this.scientificExponent=this.getEngineeringExponent(this.scientificExponent)),this.preunit='',this.expTspan.setAttribute('display','visible'),this.expTspanExp.setAttribute('display','visible'),this.expTspan.textContent='x10',this.expTspanExp.textContent=this.scientificExponent),this.writeUnit();else{let $=this.getLabel();this.options.unitDecade&&this.options.unit&&0!==this.scientificExponent&&(this.scientificExponent=this.getEngineeringExponent(this.scientificExponent))&&(K=this.getExponentGreekLetter(this.scientificExponent))?($+=K,this.preunitTspan.innerHTML=K,this.preunitTspan.setAttribute('display','visible'),this.unitTspan.setAttribute('dx',0),$+=' '+K+' '+this.options.unit):0!==this.scientificExponent&&!isNaN(this.scientificExponent)&&(this.options.engineeringScale&&(this.scientificExponent=this.getEngineeringExponent(this.scientificExponent)),$+=' \\cdot 10^'+this.scientificExponent+' '+this.options.unit),this.katexElement=this.graph.renderWithKatex($,this.katexElement)}if(!!this.options.hideTicks)var Q=0;else if(this.resetTicksLength(),this.linkedToAxis){this.linkedToAxis.deltaPx=10;var Q=this.drawLinkedToAxisTicksWrapper(U,Z)}else if(!this.options.logScale)var Q=this.drawLinearTicksWrapper(U,Z);else var Q=this.drawLogTicks();this.removeUselessTicks(),this.removeUselessTickLabels(),this.gridPrimary.setAttribute('d',this.gridLinePath.primary),this.gridSecondary.setAttribute('d',this.gridLinePath.secondary);var J=this.graph.findAxesLinkedTo(this);return J.map(function($){$.linkedToAxis&&($.setMinPx(G.getMinPx()),$.setMaxPx(G.getMaxPx()),$.draw())}),this.options.lineAt0&&0>this.getCurrentMin()&&0<this.getCurrentMax()&&this._draw0Line(this.getPx(0)),Q}writeUnit(){this.options.unit?(this.unitTspan.setAttribute('display','visible'),this.unitTspan.setAttribute('dx',5),this.expTspan.setAttribute('display','none'),this.expTspanExp.setAttribute('display','none'),this.unitTspan.innerHTML=(this.options.unitWrapperBefore+this.preunit+this.options.unit+this.options.unitWrapperAfter).replace(/\^([-+0-9]*)(.*)/g,'<tspan dy=\'-5\' font-size=\'0.7em\'>$1</tspan><tspan dy=\'5\' font-size=\'1em\'>$2</tspan>')):this.unitTspan.setAttribute('display','none')}getExponentGreekLetter(G){switch(G){case 3:return'k';break;case 6:return'M';break;case 9:return'G';break;case 12:return'T';break;case 15:return'E';break;case-3:return'm';break;case-6:return'&mu;';break;case-9:return'n';break;case-12:return'p';break;case-15:return'f';}}drawLinearTicksWrapper(G,U){let Z;return this.options.primaryTickUnit?Z=this.options.primaryTickUnit:(Z=this.getUnitPerTick(G,this.getNbTicksPrimary(),U)[0],this.options.maxPrimaryTickUnit&&this.options.maxPrimaryTickUnit<Z?Z=this.options.maxPrimaryTickUnit:this.options.minPrimaryTickUnit&&this.options.minPrimaryTickUnit>Z&&(Z=this.options.minPrimaryTickUnit)),this.drawTicks(Z,this.secondaryTicks())}forcePrimaryTickUnit(G){this.options.primaryTickUnit=G}forcePrimaryTickUnitMax(G){this.options.maxPrimaryTickUnit=G}forcePrimaryTickUnitMin(G){this.options.minPrimaryTickUnit=G}getPrimaryTickUnit(){return this.incrTick}setTickLabelRatio(G){this.options.ticklabelratio=G}draw(){this._widthLabels=0;var G=this._draw();return this._widthLabels+=G,G}drawTicks(G,U){var Z=G,K=this.getCurrentMin(),Q=this.getCurrentMax(),te=0,J,$,ee;for(U&&(J=Z/U),$=this.options.shiftToZero?this.dataMin-Math.ceil((this.dataMin-K)/Z)*Z:Math.floor(K/Z)*Z,this.incrTick=G;$<=Q&&(te++,!(200<te));){if(U){ee=$+J,this.subIncrTick=ee;for(var ie=0;ee<$+Z&&(ie++,!(100<ie));){if(ee<K||ee>Q){ee+=J;continue}this.drawTickWrapper(ee,!1,0.0001>Math.abs(ee-$-Z/2)?2:3),ee+=J}}if($<K||$>Q){$+=G;continue}this.drawTickWrapper($,!0,1),$+=G}return this.widthHeightTick=this.getMaxSizeTick(),this.widthHeightTick}nextTick(G,U){if(this.ticks[G]=this.ticks[G]||[],this.lastCurrentTick[G]=this.lastCurrentTick[G]||0,this.currentTick[G]=this.currentTick[G]||0,this.currentTick[G]>=this.ticks[G].length){var Z=document.createElementNS(this.graph.ns,'line');this.groupTicks.appendChild(Z),this.ticks[G].push(Z),U(Z)}var Z=this.ticks[G][this.currentTick[G]];return this.currentTick[G]>=this.lastCurrentTick[G]&&Z.setAttribute('display','visible'),this.currentTick[G]++,Z}nextTickLabel(G){if(this.ticksLabels=this.ticksLabels||[],this.lastCurrentTickLabel=this.lastCurrentTickLabel||0,this.currentTickLabel=this.currentTickLabel||0,this.currentTickLabel>=this.ticksLabels.length){var U=document.createElementNS(this.graph.ns,'text');this.groupTickLabels.appendChild(U),this.ticksLabels.push(U),G(U)}var U=this.ticksLabels[this.currentTickLabel];return this.currentTickLabel>=this.lastCurrentTickLabel&&U.setAttribute('display','visible'),this.currentTickLabel++,U}removeUselessTicks(){for(var G in this.currentTick){for(var U=this.currentTick[G];U<this.ticks[G].length;U++)this.ticks[G][U].setAttribute('display','none');this.lastCurrentTick[G]=this.currentTick[G],this.currentTick[G]=0}}removeUselessTickLabels(){for(var G=this.currentTickLabel;G<this.ticksLabels.length;G++)this.ticksLabels[G].setAttribute('display','none');this.lastCurrentTickLabel=this.currentTickLabel,this.currentTickLabel=0}nextGridLine(G,U,Z,K,Q){(G&&this.options.primaryGrid||!G&&this.options.secondaryGrid)&&(this.gridLinePath[G?'primary':'secondary']+='M '+U+' '+K+' L '+Z+' '+Q)}setGridLineStyle(G,U){G.setAttribute('shape-rendering','crispEdges'),G.setAttribute('stroke',U?this.getPrimaryGridColor():this.getSecondaryGridColor()),G.setAttribute('stroke-width',U?this.getPrimaryGridWidth():this.getSecondaryGridWidth()),G.setAttribute('stroke-opacity',U?this.getPrimaryGridOpacity():this.getSecondaryGridOpacity());var Z;(Z=U?this.getPrimaryGridDasharray():this.getSecondaryGridDasharray())&&G.setAttribute('stroke-dasharray',Z)}setGridLinesStyle(){return this.setGridLineStyle(this.gridPrimary,!0),this.setGridLineStyle(this.gridSecondary,!1),this}resetTicksLength(){}secondaryTicks(){return this.options.nbTicksSecondary}drawLogTicks(){var G=this.getCurrentMin(),U=this.getCurrentMax(),Z=Math.min(G,U),U=Math.max(G,U);1e-50>Z&&(Z=1e-50),20<Math.log(Z)-Math.log(U)&&(U=Math.pow(10,20*Math.log(Z)));var K={fontSize:'1.0em',exponential:!0,overwrite:!1};0>Z&&(Z=0);for(var Q=0==Z?0:Math.floor(Math.log(Z)/Math.log(10)),Z=1,J;(J=Z*Math.pow(10,Q))<U;)1==Z&&J>G&&this.drawTickWrapper(J,!0,1,K),10==Z?(Z=1,Q++):(1!=Z&&J>G&&this.drawTickWrapper(J,!1,2,{overwrite:'',fontSize:'0.6em'}),Z++);return this.widthHeightTick=this.getMaxSizeTick(),this.widthHeightTick}drawTickWrapper(G,U,Z,K){this.drawTick(G,Z,K)}linkToAxis(G,U,Z){this.linkedToAxis={axis:G,scalingFunction:U,decimals:Z||1}}drawLinkedToAxisTicksWrapper(G,U){var Z=this.linkedToAxis,K=0,$=0,Q,J,ee,te;Z.deltaPx||(Z.deltaPx=10);do{if(Q=Z.scalingFunction(Z.axis.getVal(K+this.getMinPx())),Z.decimals&&(this.decimals=Z.decimals),J=this.drawTick(Q,1,{},K+this.getMinPx()),!J)throw console.log(Q,K,this.getMinPx()),'Unable to draw tick. Please report the test-case';if(ee=8*(J[1].textContent+'').length,te=5*Math.round(ee/5),te>Z.deltaPx)return Z.deltaPx=te,void this.drawLinkedToAxisTicksWrapper(G,U);$++,K+=Z.deltaPx}while(K<G)}getPos(G){return this.getPx(G)}getPx(G){if(!this.options.logScale)return(G-this.getCurrentMin())/this.getCurrentInterval()*(this.getMaxPx()-this.getMinPx())+this.getMinPx();if(!(0>G)){var G=(Math.log(G)-Math.log(this.getCurrentMin()))/(Math.log(this.getCurrentMax())-Math.log(this.getCurrentMin()))*(this.getMaxPx()-this.getMinPx())+this.getMinPx();return G}}getRoundedPx(G){return Math.round(10*this.getPx(G))/10}getVal(G){return this.options.logScale?Math.exp((G-this.getMinPx())/(this.getMaxPx()-this.getMinPx())*(Math.log(this.getCurrentMax())-Math.log(this.getCurrentMin()))+Math.log(this.getCurrentMin())):(G-this.getMinPx())/(this.getMaxPx()-this.getMinPx())*this.getCurrentInterval()+this.getCurrentMin()}getRelPx(G){return G/this.getCurrentInterval()*(this.getMaxPx()-this.getMinPx())}getRelVal(G){return G/(this.getMaxPx()-this.getMinPx())*this.getCurrentInterval()}valueToText(G){if(this.scientificExponent)return G/=Math.pow(10,this.scientificExponent),G.toFixed(1);if(G=G*Math.pow(10,this.getExponentialFactor())*Math.pow(10,this.getExponentialLabelFactor()),this.options.shiftToZero&&(G-=this.dataMin),this.options.ticklabelratio&&(G*=this.options.ticklabelratio),this.options.unitModification)return G=this.modifyUnit(G,this.options.unitModification),G;var U=this.decimals-this.getExponentialFactor()-this.getExponentialLabelFactor();return isNaN(G)?'':0<U?G.toFixed(U):G.toFixed(0)}valueToHtml(G,U,Z){var K=this.valueToText(G),Q;return this.options.unitDecade&&this.options.unit&&0!==this.scientificExponent&&(this.scientificExponent=this.getEngineeringExponent(this.scientificExponent))&&(Q=this.getExponentGreekLetter(this.scientificExponent))?K+=Q:0!==this.scientificExponent&&!isNaN(this.scientificExponent)&&!U&&(K+='x10',K+='<sup>'+this.scientificExponent+'</sup>'),this.options.unit&&!Z&&(K+=this.options.unit.replace(/\^([-+0-9]*)/g,'<sup>$1</sup>')),K}getModifiedValue(G){return this.options.ticklabelratio&&(G*=this.options.ticklabelratio),this.options.shiftToZero&&(G-=this.getMinValue()*(this.options.ticklabelratio||1)),G}modifyUnit(G,U){var Z='',K=this.incrTick;switch(U){case'time':var Q=this.getModifiedValue(this.getMaxValue()),J=[[60,'min'],[3600,'h'],[86400,'d']],$;if(3600>Q?$=0:86400>Q?$=1:2592000>Q&&($=2),!J[$])return!1;G=G/J[$][0];var ee=Math.floor(G);for(Z=ee+J[$][1],$--;K<1*J[$+1][0]&&-1<$;)G=(G-ee)*J[$+1][0]/J[$][0],ee=Math.round(G),Z+=' '+ee+J[$][1],$--;break;case'time:min.sec':G=G/60;var ee=Math.floor(G),te=Math.round(60*(G-ee))+'';te=1==te.length?'0'+te:te,Z=ee+'.'+te;}return Z}getExponentialFactor(){return this.options.exponentialFactor}setExponentialFactor(G){this.options.exponentialFactor=G}setExponentialLabelFactor(G){this.options.exponentialLabelFactor=G}getExponentialLabelFactor(){return this.options.exponentialLabelFactor}setLabel(G){return this.options.labelValue=G,this}setLabelFont(G){return this.options.labelFont=G,this}getLabel(){return this.options.labelValue}setSpan(G,U){return this.options.span=[G,U],this}getSpan(){return this.options.span}setLevel(G){return this._level=G,this}getLevel(){return this._level}setShift(G){this.shift=G}getShift(){return this.shift}setTickPosition(G){switch(G){case 3:case'outside':case F.default.TICKS_OUTSIDE:G=3;break;case 2:case'centered':case F.default.TICKS_CENTERED:G=2;break;default:case 1:case'inside':case F.default.TICKS_INSIDE:G=1;}switch(this.options.tickPosition=G,this.options.tickPosition){case 3:this.tickPx1=-2,this.tickPx2=0;break;case 2:this.tickPx1=-1,this.tickPx2=1;break;case 1:this.tickPx1=0,this.tickPx2=2;}return this}setGrids(G){return this.options.primaryGrid=G,this.options.secondaryGrid=G,this}setPrimaryGrid(G){return this.options.primaryGrid=G,this}setSecondaryGrid(G){return this.options.secondaryGrid=G,this}primaryGridOn(){return this.setPrimaryGrid(!0)}primaryGridOff(){return this.setPrimaryGrid(!1)}secondaryGridOn(){return this.setSecondaryGrid(!0)}secondaryGridOff(){return this.setSecondaryGrid(!1)}gridsOn(){return this.setGrids(!0)}gridsOff(){return this.setGrids(!1)}turnGridsOff(){return this.gridsOff(...arguments)}turnGridsOn(){return this.gridsOn(...arguments)}setAxisColor(G){return this.options.axisColor=G,this}getAxisColor(){return this.options.axisColor||'black'}setPrimaryTicksColor(G){return this.options.primaryTicksColor=G,this}getPrimaryTicksColor(){return this.options.primaryTicksColor||'black'}setSecondaryTicksColor(G){return this.options.secondaryTicksColor=G,this}getSecondaryTicksColor(){return this.options.secondaryTicksColor||'black'}setTicksLabelColor(G){return this.options.ticksLabelColor=G,Array.isArray(this.ticksLabels)&&this.ticksLabels.forEach(U=>{U.setAttribute('fill',G)}),this}getTicksLabelColor(){return this.options.ticksLabelColor||'black'}setPrimaryGridColor(G){return this.options.primaryGridColor=G,this}getPrimaryGridColor(){return this.options.primaryGridColor}setSecondaryGridColor(G){return this.options.secondaryGridColor=G,this}getSecondaryGridColor(){return this.options.secondaryGridColor}setPrimaryGridWidth(G){return this.options.primaryGridWidth=G,this}getPrimaryGridWidth(){return this.options.primaryGridWidth}setSecondaryGridWidth(G){return this.options.secondaryGridWidth=G,this}getSecondaryGridWidth(){return this.options.secondaryGridWidth}setPrimaryGridOpacity(G){return this.options.primaryGridOpacity=G,this}getPrimaryGridOpacity(){return this.options.primaryGridOpacity}setSecondaryGridOpacity(G){return this.options.secondaryGridOpacity=G,this}getSecondaryGridOpacity(){return this.options.secondaryGridOpacity}setPrimaryGridDasharray(G){return this.options.primaryGridDasharray=G,this}getPrimaryGridDasharray(){return this.options.primaryGridDasharray}setSecondaryGridDasharray(G){return this.options.secondaryGridDasharray=G,this}getSecondaryGridDasharray(){return this.options.secondaryGridDasharray}setLabelColor(G){return this.options.labelColor=G,this}getLabelColor(){return this.options.labelColor}setTickContent(G,U,Z){if(Z||(Z={}),Z.overwrite||!Z.exponential)G.textContent=Z.overwrite||this.valueToText(U);else{var K=Math.round(Math.log(U)/Math.log(10)),Q=Math.floor(U*Math.pow(10,-K));G.textContent=1==Q?'10':Q+'x10';var J=document.createElementNS(this.graph.ns,'tspan');J.textContent=K,J.setAttribute('font-size','0.7em'),J.setAttribute('dy',-5),G.appendChild(J)}Z.fontSize&&G.setAttribute('font-size',Z.fontSize)}isX(){return!1}isY(){return!1}setUnit(G){return this.options.unit=G,this}setUnitWrapper(G,U){return this.options.unitWrapperBefore=G,this.options.unitWrapperAfter=U,this}setUnitDecade(G){return this.options.unitDecade=G,this}setScientific(G){return this.options.scientificScale=G,this}setScientificScaleExponent(G){return this.options.scientificScaleExponent=G,this}setEngineering(G){return this.options.scientificScale=G,this.options.engineeringScale=G,this}getEngineeringExponent(G){return G-=0<G?G%3:(3- -G%3)%3,G}setLogScale(G){return this.options.logScale=G,this}isZoomed(){return this.currentAxisMin!=this.getMinValue()&&this.currentAxisMax!=this.getMaxValue()}hasAxis(){return!1}getType(){return null}useKatexForLabel(G=!0){return this.options.useKatexForLabel=G,this}}R.prototype.getValue=R.prototype.getVal,R.prototype.getDeltaPx=R.prototype.getRelPx,E.default=R})},function(u,A,S){var C,P,T;(function(E,X){P=[A,S(10)],C=X,T='function'==typeof C?C.apply(A,P):C,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var Y=function(F){return F&&F.__esModule?F:{default:F}}(X);class I extends Y.default{constructor(O,F,W){super(O,F,W),this.leftright=F,this.left='left'==F}setAxisPosition(O){this.shiftPosition=O}getAxisPosition(){return this.shiftPosition||0}getAdditionalWidth(){let O=0;return this.getLabel()&&(O+=this.graph.options.fontSize),this.isShown()&&(O+=Math.abs(this.tickMargin)),O}isX(){return!1}isY(){return!0}resetTicksLength(){this.longestTick=[!1,0]}getMaxSizeTick(){return this.longestTick&&this.longestTick[0]?this.longestTick[0].getComputedTextLength()+5:0}draw(){this.tickMargin=this.left?-5-this.tickPx1*this.tickScaling[1]:5+this.tickPx1*this.tickScaling[1];var O=super.draw(...arguments);return O+=this.getAdditionalWidth(),this.drawSpecifics(O),this.fullwidthlabel=O,O}equalizePosition(O){return this.placeLabel(this.left?-O:O),this.getLabel()?O+this.graph.options.fontSize:0}drawTick(O,F,W,V){var R=this,G=this.groupTicks,B,U;if(B=V||this.getPos(O),!(void 0==B||isNaN(B))){var Z=this.nextTick(F,K=>{K.setAttribute('x1',(this.left?1:-1)*this.tickPx1*this.tickScaling[F]),K.setAttribute('x2',(this.left?1:-1)*this.tickPx2*this.tickScaling[F]),1==F?K.setAttribute('stroke',this.getPrimaryTicksColor()):K.setAttribute('stroke',this.getSecondaryTicksColor())});if(Z.setAttribute('y1',B),Z.setAttribute('y2',B),this.nextGridLine(1==F,0,this.graph.getDrawingWidth(),B,B),1==F){var U=this.nextTickLabel(K=>{K.setAttribute('x',this.tickMargin),'black'!==this.getTicksLabelColor()&&K.setAttribute('fill',this.getTicksLabelColor()),this.left?K.setAttribute('text-anchor','end'):K.setAttribute('text-anchor','start'),K.style.dominantBaseline='central'});U.setAttribute('y',B),this.setTickContent(U,O,W),(U.textContent+'').length>=this.longestTick[1]&&(this.longestTick[0]=U,this.longestTick[1]=(U.textContent+'').length)}}}drawLabel(){'black'!==this.getLabelColor()&&this.label.setAttribute('fill',this.getLabelColor()),this.label.setAttribute('dominant-baseline',this.left?'auto':'hanging'),this.labelTspan.textContent=this.getLabel()}placeLabel(O){this.label.setAttribute('transform','translate('+O+', '+Math.abs(this.getMaxPx()+this.getMinPx())/2+') rotate(-90)')}drawSpecifics(){this.line.setAttribute('y1',this.getMinPx()),this.line.setAttribute('y2',this.getMaxPx()),this.line.setAttribute('x1',0),this.line.setAttribute('x2',0),this.line.setAttribute('stroke',this.getAxisColor());var O=this.getSpan();this.line.setAttribute('marker-start',this.options.splitMarks&&0!=O[0]?'url(#verticalsplit_'+this.graph.getId()+')':''),this.line.setAttribute('marker-end',this.options.splitMarks&&1!=O[1]?'url(#verticalsplit_'+this.graph.getId()+')':'')}setShift(O){if(this.shift=O,this.shift&&this.graph.getWidth()){let F=this.shift;F=this.floating?F:this.isLeft()?F:this.graph.getWidth()-this.graph.getPaddingRight()-this.graph.getPaddingLeft()-F,this.group.setAttribute('transform','translate( '+F+' 0 )'),this.drawLabel()}}isLeft(){return this.left}isRight(){return!this.left}isFlipped(){return!this.options.flipped}_draw0Line(O){this._0line||(this._0line=document.createElementNS(this.graph.ns,'line')),this._0line.setAttribute('y1',O),this._0line.setAttribute('y2',O),this._0line.setAttribute('x1',0),this._0line.setAttribute('x2',this.graph.getDrawingWidth()),this._0line.setAttribute('stroke','black'),this.groupGrids.appendChild(this._0line)}handleMouseMoveLocal(O,F){F-=this.graph.getPaddingTop(),this.mouseVal=this.getVal(F)}scaleToFitAxis(O,F,W,V,B,R){O&&O.isX()||(O=this.graph.getXAxis()),isNaN(W)&&(W=O.getCurrentMin()),isNaN(V)&&(V=O.getCurrentMax()),B===void 0&&(B=!0),R===void 0&&(R=!0),'number'==typeof F&&(V=W,W=F,F=!1);var G=-(1/0),U=1/0,Z=0;for(var K=0,Q=this.graph.series.length;K<Q;K++)this.graph.series[K].isShown()&&this.graph.series[K]!=F&&this.graph.series[K].getXAxis()==O&&this.graph.series[K].getYAxis()===this&&(Z++,G=R?Math.max(G,this.graph.series[K].getMax(W,V)):0,U=B?Math.min(U,this.graph.series[K].getMin(W,V)):0);if(0==Z)this.setMinMaxToFitSeries();else{U=B?U:this.getCurrentMin(),G=R?G:this.getCurrentMax();var J=G-U;U-=this.options.axisDataSpacing.min*J,G+=this.options.axisDataSpacing.max*J,this._doZoomVal(U,G)}return this}setMinMaxFlipped(){var O=this.maxPx-this.minPx;if(!isNaN(O)){var F=this.maxPx-O*this.options.span[0]-this.options.marginMin,W=this.maxPx-O*this.options.span[1]+this.options.marginMax;this.minPxFlipped=this.isFlipped()?F:W,this.maxPxFlipped=this.isFlipped()?W:F}}getZProj(O){return O*this.graph.options.zAxis.shiftY}}E.default=I})},function(u,A,S){var C,P,T;(function(E,X){P=[A,S(9)],C=X,T='function'==typeof C?C.apply(A,P):C,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var Y=function(F){return F&&F.__esModule?F:{default:F}}(X);class I extends Y.default{constructor(O,F,W={}){super(O,F,W)}set categories(O){return this._barCategories=O,this}draw(){var O=this,W=this.graph.drawingSpaceWidth,V=this._barCategories,F;if(this.forceMin(0),this.forceMax(1),this.cacheCurrentMin(),this.cacheCurrentMax(),this.cacheInterval(),!!V){Array.isArray(V)||(V=[V]);for(var B=0;B<=V.length;B++)this.drawTick(B/V.length,2),B<V.length&&(F=this.nextTickLabel(function(R){R.setAttribute('y',(O.top?-1:1)*((1==O.options.tickPosition?8:20)+(O.top?10:0))),R.setAttribute('text-anchor','middle'),'black'!==O.getTicksLabelColor()&&R.setAttribute('fill',O.getTicksLabelColor()),R.style.dominantBaseline='hanging'}),F.setAttribute('x',this.getPos((B+0.5)/V.length)),F.textContent=V[B].title);return this.drawSpecifics(),this}}autoSeries(){let O=[];for(let F of this.graph.series)F.getXAxis()==this&&O.push(F);return this.setSeries(...O),this}setSeries(){var O=this;return this.series=arguments,Array.prototype.map.call(this.series,function(F,W){'object'==typeof F||(F=O.graph.getSerie(F)),F.setCategoryConfig&&F.setCategoryConfig(W,O._barCategories,O.series.length)}),this._getUsedCategories(),this}_getUsedCategories(){let O={},F=0;Array.prototype.map.call(this.series,R=>{let G=R.getUsedCategories();for(let U of G)O.hasOwnProperty(U)||(O[U]=1,F+=1),O[U]++,F++});let W=0;for(let R in O){let G=O[R];O[R]=W,W+=G}let V={},B=0;Array.prototype.map.call(this.series,R=>{let G=R.getUsedCategories(),U={};G.map(Z=>{V[Z]=V[Z]||0.5,U[Z]=(O[Z]+V[Z])/F,V[Z]++}),R.setDataIndices(U,F),B++})}getType(){return'category'}}E.default=I})},function(u,A,S){var C,P,T;(function(E,X){P=[A,S(10),S(3)],C=X,T='function'==typeof C?C.apply(A,P):C,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X,Y){'use strict';function I($,ee){return Math.round($/ee)*ee}function O($,ee){switch(ee.unit){case's':$.setSeconds(I($.getSeconds(),ee.increment)),$.setMilliseconds(0);break;case'i':$.setMinutes(I($.getMinutes(),ee.increment)),$.setSeconds(0),$.setMilliseconds(0);break;case'h':$.setHours(I($.getHours(),ee.increment)),$.setMinutes(0),$.setSeconds(0),$.setMilliseconds(0);break;case'd':$.setMinutes(0),$.setSeconds(0),$.setMilliseconds(0),$.setHours(0),$.setDate(I($.getDate(),ee.increment));break;case'm':$.setMinutes(0),$.setSeconds(0),$.setMilliseconds(0),$.setHours(0),$.setDate(1),$.setMonth(I($.getMonth(),ee.increment));break;case'y':$.setMinutes(0),$.setSeconds(0),$.setMilliseconds(0),$.setHours(0),$.setDate(1),$.setMonth(0);break;default:throw'Date format not recognized';}return $}function F($,ee){switch(ee.unit){case's':$.setSeconds($.getSeconds()+ee.increment),$.setMilliseconds(0);break;case'i':$.setMinutes($.getMinutes()+ee.increment),$.setSeconds(0),$.setMilliseconds(0);break;case'h':$.setHours($.getHours()+ee.increment),$.setMinutes(0),$.setSeconds(0),$.setMilliseconds(0);break;case'd':$.setDate($.getDate()+ee.increment),$.setMinutes(0),$.setSeconds(0),$.setMilliseconds(0),$.setHours(0);break;case'm':$.setMonth($.getMonth()+ee.increment),$.setMinutes(0),$.setSeconds(0),$.setMilliseconds(0),$.setHours(0),$.setDate(1);break;case'y':$.setFullYear($.getFullYear()+ee.increment),$.setMinutes(0),$.setSeconds(0),$.setMilliseconds(0),$.setHours(0),$.setDate(1),$.setMonth(0);break;default:throw'Date format not recognized';}return $}function W($,ee,te){if($.groups[ee][te])return $.groups[ee][te].group.setAttribute('display','block'),$.groups[ee][te];var ie={group:document.createElementNS($.graph.ns,'g'),text:document.createElementNS($.graph.ns,'text')},ae=document.createElementNS($.graph.ns,'line');return ae.setAttribute('stroke','black'),ae.setAttribute('y1',0),2===ee?(ae.setAttribute('y2',6),ie.text.setAttribute('y',15),ie.line=ae,ie.group.appendChild(ie.line)):1===ee?(ae.setAttribute('y2',20),ie.text.setAttribute('y',10),ie.line1=ae,ie.line2=ae.cloneNode(),ie.group.appendChild(ie.line1),ie.group.appendChild(ie.line2)):void 0,(ie.text.setAttribute('text-anchor','middle'),ie.text.setAttribute('dominant-baseline','middle'),ie.group.appendChild(ie.text),$.getWrapper(ee).appendChild(ie.group),$.groups[ee][te]=ie)}function V($,ee,te){for(;te<$.groups[ee].length;te++)B($.groups[ee][te])}function B($){$.group.setAttribute('display','none')}function R($,ee){return Q($,ee)}function G($,ee,te,ie,ae,re,se){switch($){case 1:var ne=Math.max(ie,Math.min(ae,re)),oe=Math.max(ie,Math.min(ae,se));if(isNaN(oe)||isNaN(ne))return;for(ee.line1.setAttribute('x1',ne),ee.line2.setAttribute('x1',oe),ee.line1.setAttribute('x2',ne),ee.line2.setAttribute('x2',oe),ee.text.setAttribute('x',(ne+oe)/2);8*te.length>oe-ne;)if(te=te.substr(0,te.length-2)+'.',1==te.length){te='';break}ee.text.textContent=te;break;case 2:if(re<ie||re>ae)return void B(ee);ee.line.setAttribute('x1',re),ee.line.setAttribute('x2',re),ee.text.setAttribute('x',re),ee.text.textContent=te;}}Object.defineProperty(E,'__esModule',{value:!0});var U=function(ee){return ee&&ee.__esModule?ee:{default:ee}}(X),Z=function(ee){if(ee&&ee.__esModule)return ee;var te={};if(null!=ee)for(var ie in ee)Object.prototype.hasOwnProperty.call(ee,ie)&&(te[ie]=ee[ie]);return te.default=ee,te}(Y),K=[{threshold:20,increments:{1:{increment:1,unit:'i',format:'HH"h"MM (dd/mm/yy)'},2:{increment:1,unit:'s',format:'MM:ss"s"'}}},{threshold:50,increments:{1:{increment:1,unit:'i',format:'HH"h"MM (dd/mm/yy)'},2:{increment:2,unit:'s',format:'MM:ss"s"'}}},{threshold:100,increments:{1:{increment:1,unit:'i',format:'HH"h"MM (dd/mm/yy)'},2:{increment:5,unit:'s',format:'MM:ss"s"'}}},{threshold:600,increments:{1:{increment:10,unit:'i',format:'HH"h"MM (dd/mm/yy)'},2:{increment:30,unit:'s',format:'MM:ss"s"'}}},{threshold:1000,increments:{1:{increment:1,unit:'h',format:'HH"h"MM (dd/mm/yy)'},2:{increment:10,unit:'i',format:'MM"min"'}}},{threshold:1500,increments:{1:{increment:1,unit:'d',format:'dd/mm/yyyy'},2:{increment:1,unit:'i',format:'H"h"MM'}}},{threshold:3000,increments:{1:{increment:1,unit:'d',format:'dd/mm/yyyy'},2:{increment:2,unit:'i',format:'H"h"MM'}}},{threshold:8000,increments:{1:{increment:1,unit:'d',format:'dd/mm/yyyy'},2:{increment:10,unit:'i',format:'H"h"MM'}}},{threshold:26400,increments:{1:{increment:1,unit:'d',format:'dd/mm/yyyy'},2:{increment:20,unit:'i',format:'H"h"MM'}}},{threshold:86400,increments:{1:{increment:1,unit:'d',format:'dd/mm/yyyy'},2:{increment:1,unit:'h',format:'H"h"MM'}}},{threshold:200000,increments:{1:{increment:1,unit:'d',format:'dd/mm/yyyy'},2:{increment:2,unit:'h',format:'H"h"MM'}}},{threshold:400000,increments:{1:{increment:1,unit:'d',format:'dd/mm/yyyy'},2:{increment:6,unit:'h',format:'H"h"MM'}}},{threshold:1400000,increments:{1:{increment:1,unit:'d',format:'dd/mm/yyyy'},2:{increment:12,unit:'h',format:'HH"h"MM'}}},{threshold:6400000,increments:{1:{increment:1,unit:'m',format:'mmmm yyyy'},2:{increment:1,unit:'d',format:'dd'}}},{threshold:12400000,increments:{1:{increment:1,unit:'m',format:'mmmm yyyy'},2:{increment:2,unit:'d',format:'dd'}}},{threshold:43200000,increments:{1:{increment:1,unit:'m',format:'mmmm yyyy'},2:{increment:7,unit:'d',format:'dd'}}},{threshold:69120000,increments:{1:{increment:1,unit:'m',format:'mmmm yyyy'},2:{increment:15,unit:'d',format:'dd'}}},{threshold:86400000,increments:{1:{increment:1,unit:'y',format:'yyyy'},2:{increment:3,unit:'m',format:'mm/yyyy'}}},{threshold:172800000,increments:{1:{increment:1,unit:'y',format:'yyyy'},2:{increment:4,unit:'m',format:'mm/yyyy'}}},{threshold:864000000,increments:{1:{increment:1,unit:'y',format:'yyyy'},2:{increment:6,unit:'m',format:'mm/yyyy'}}},{threshold:1036800000,increments:{1:{increment:1,unit:'y',format:'yyyy'},2:{increment:1,unit:'y',format:'yyyy'}}}],Q=function(){var $=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[WLloSZ]|"[^"]*"|'[^']*'/g,ee=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,te=/[^-+\dA-Z]/g,ie=function(re,se){for(re=re+'',se=se||2;re.length<se;)re='0'+re;return re},ae=function(re,se){var ne=new Date(re[se+'FullYear'](),0,1);return Math.ceil(((re-ne)/86400000+ne[se+'Day']()+1)/7)};return function(re,se,ne){var oe=Q;if(1!=arguments.length||'[object String]'!=Object.prototype.toString.call(re)||/\d/.test(re)||(se=re,re=void 0),re=re?new Date(re):new Date,isNaN(re))throw SyntaxError('invalid date:'+re);se=(oe.masks[se]||se||oe.masks['default'])+'','UTC:'==se.slice(0,4)&&(se=se.slice(4),ne=!0);var le=ne?'getUTC':'get',de=re[le+'Date'](),pe=re[le+'Day'](),ge=re[le+'Month'](),ue=re[le+'FullYear'](),ce=re[le+'Hours'](),he=re[le+'Minutes'](),xe=re[le+'Seconds'](),me=re[le+'Milliseconds'](),fe=ne?0:re.getTimezoneOffset(),ye={d:de,dd:ie(de),ddd:oe.i18n.dayNames[pe],dddd:oe.i18n.dayNames[pe+7],m:ge+1,mm:ie(ge+1),mmm:oe.i18n.monthNames[ge],mmmm:oe.i18n.monthNames[ge+12],yy:(ue+'').slice(2),yyyy:ue,h:ce%12||12,hh:ie(ce%12||12),H:ce,HH:ie(ce),M:he,MM:ie(he),s:xe,ss:ie(xe),l:ie(me,3),L:ie(99<me?Math.round(me/10):me),t:12>ce?'a':'p',tt:12>ce?'am':'pm',T:12>ce?'A':'P',TT:12>ce?'AM':'PM',Z:ne?'UTC':((re+'').match(ee)||['']).pop().replace(te,''),o:(0<fe?'-':'+')+ie(100*Math.floor(Math.abs(fe)/60)+Math.abs(fe)%60,4),S:['th','st','nd','rd'][3<de%10?0:(10!=de%100-de%10)*de%10],W:ae(re,le)};return se.replace($,function(be){return be in ye?ye[be]:be.slice(1,be.length-1)})}}();Q.masks={'default':'ddd mmm dd yyyy HH:MM:ss',shortDate:'m/d/yy',mediumDate:'mmm d, yyyy',longDate:'mmmm d, yyyy',fullDate:'dddd, mmmm d, yyyy',shortTime:'h:MM TT',mediumTime:'h:MM:ss TT',longTime:'h:MM:ss TT Z',isoDate:'yyyy-mm-dd',isoTime:'HH:MM:ss',isoDateTime:'yyyy-mm-dd\'T\'HH:MM:ss',isoUtcDateTime:'UTC:yyyy-mm-dd\'T\'HH:MM:ss\'Z\''},Q.i18n={dayNames:['Sun','Mon','Tue','Wed','Thu','Fri','Sat','Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],monthNames:['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec','January','February','March','April','May','June','July','August','September','October','November','December']};class J extends U.default{constructor(){super(...arguments)}init($,ee){super.init($,ee),this.wrapper={1:document.createElementNS($.ns,'g'),2:document.createElementNS($.ns,'g')},this.groups={'1':[],'2':[]};var te=document.createElementNS($.ns,'rect');te.setAttribute('fill','#c0c0c0'),te.setAttribute('stroke','#808080'),te.setAttribute('height','20'),te.setAttribute('x','0'),te.setAttribute('y','0'),this.rect=te,this.wrapper[1].appendChild(this.rect),this.group.appendChild(this.wrapper[1]),this.group.appendChild(this.wrapper[2]),this.wrapper[1].setAttribute('transform','translate( 0, 25 )'),this.wrapper[2].setAttribute('transform','translate( 0, 00 )')}draw(){this.cacheCurrentMax(),this.cacheCurrentMin(),(void 0==this.currentAxisMin||void 0==this.currentAxisMax)&&this.setMinMaxToFitSeries(!0),this.line.setAttribute('x1',this.getMinPx()),this.line.setAttribute('x2',this.getMaxPx()),this.line.setAttribute('y1',0),this.line.setAttribute('y2',0);var $=this.maxPx-this.minPx,ee=this.getCurrentInterval(),te=this.getCurrentMax(),ie=this.getCurrentMin();if(this.rect.setAttribute('width',$),this.rect.setAttribute('x',this.minPx),!te||!ie)return 0;var ae;for(ge=0;ge<K.length;ge++)if(K[ge].threshold>ee/$){ae=K[ge];break}ae||(ae=K[K.length-1]);var ne=0,re,se,oe,le,de,pe,ge;for(ne=1;2>=ne;ne++){if(!Z.isNumeric(ie)){V(this,ne,0);break}oe=new Date(ie),le=O(oe,ae.increments[ne]),ge=0;do if(de=R(le,ae.increments[ne].format),pe=W(this,ne,ge),re=this.getPx(le.getTime()),le=F(le,ae.increments[ne]),se=this.getPx(le.getTime()),G(ne,pe,de,this.getMinPx(),this.getMaxPx(),re,se),ge++,100<ge)break;while(le.getTime()<te);V(this,ne,ge)}}isX(){return!0}getWrapper($){return this.wrapper[$]}setShift($){this.shift=$,this.group.setAttribute('transform','translate(0 '+(this.top?this.shift:this.graph.getDrawingHeight()-this.shift)+')')}getAxisPosition(){return 60}setMinMaxFlipped(){var $=this.maxPx-this.minPx,ee=$*this.options.span[1]+this.minPx,te=$*this.options.span[0]+this.minPx;this.minPxFlipped=this.isFlipped()?ee:te,this.maxPxFlipped=this.isFlipped()?te:ee}}E.default=J})},function(u,A,S){var C,P,T;(function(E,X){P=[A,S(1),S(15),S(3),S(16),S(5)],C=X,T='function'==typeof C?C.apply(A,P):C,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X,Y,I,O,F){'use strict';function W(K){return K&&K.__esModule?K:{default:K}}function V(K,Q,J,$,ee){if(Q){if(K.options.markersIndependant){var te=K.getMarkerDomIndependent(K.counter2,Q),ie='M '+J+' '+$+' ';ie+=Q.markerPath+' ',te.setAttribute('d',ie)}ee.path=ee.path||'',ee.path+='M '+J+' '+$+' ',ee.path+=Q.markerPath+' '}}Object.defineProperty(E,'__esModule',{value:!0}),W(X);var B=W(Y),R=function(Q){if(Q&&Q.__esModule)return Q;var J={};if(null!=Q)for(var $ in Q)Object.prototype.hasOwnProperty.call(Q,$)&&(J[$]=Q[$]);return J.default=Q,J}(I),G=W(O),U=W(F);class Z extends B.default{static default(){return{lineColor:'black',lineStyle:1,flip:!1,label:'',lineWidth:1,markers:!1,trackMouse:!1,trackMouseLabel:!1,trackMouseLabelRouding:1,lineToZero:!1,selectableOnClick:!1,markersIndependant:!1}}constructor(){super(...arguments),this.selectionType='unselected',this.markerFamilies={},R.mapEventEmission(this.options,this),this.styles={},this.styles.unselected={lineColor:this.options.lineColor,lineStyle:this.options.lineStyle,lineWidth:this.options.lineWidth,markers:this.options.markers},this.styles.selected={lineWidth:3},this.extendStyles(),this.markersDom=new Map,this.shown=!0,this.data=[],this._isMinOrMax={x:{min:!1,max:!1},y:{min:!1,max:!1}},this.groupLines=document.createElementNS(this.graph.ns,'g'),this.domMarker=document.createElementNS(this.graph.ns,'path'),this.domMarker.style.cursor='pointer',this.groupMain=document.createElementNS(this.graph.ns,'g'),this.additionalData={},this.marker=document.createElementNS(this.graph.ns,'circle'),this.marker.setAttribute('fill','black'),this.marker.setAttribute('r',3),this.marker.setAttribute('display','none'),this.markerLabel=document.createElementNS(this.graph.ns,'text'),this.markerLabelSquare=document.createElementNS(this.graph.ns,'rect'),this.markerLabelSquare.setAttribute('fill','white'),this.domMarkerHover={},this.domMarkerSelect={},this.markerHovered=0,this.groupMarkerSelected=document.createElementNS(this.graph.ns,'g'),this.markerPoints={},this.lines=[],this.groupMain.appendChild(this.groupLines),this.groupMain.appendChild(this.marker),this.groupMain.appendChild(this.groupMarkerSelected),this.groupMain.appendChild(this.markerLabelSquare),this.groupMain.appendChild(this.markerLabel),this.groupMarkers=document.createElementNS(this.graph.ns,'g'),this.groupMain.appendChild(this.groupMarkers),this.independantMarkers=[],this.initExtended1&&this.initExtended1(),this.groupLines.addEventListener('click',()=>{this.options.selectableOnClick&&(this.isSelected()?this.graph.unselectSerie(this):this.graph.selectSerie(this))}),this.options.markers&&this.setMarkers(this.options.markers,'unselected')}setWaveform(K){if(!(K instanceof U.default))throw'Cannot assign waveform to serie. Waveform is not of the proper Waveform instance';return this.waveform=K,this.minX=this.waveform.getXMin(),this.maxX=this.waveform.getXMax(),this.minY=this.waveform.getMin(),this.maxY=this.waveform.getMax(),this.graph.updateDataMinMaxAxes(),this.dataHasChanged(),this}setOptions(K){return this.options=R.extend(!0,{},Z.prototype.defaults,K||{}),this.styles.unselected={lineColor:this.options.lineColor,lineStyle:this.options.lineStyle,markers:this.options.markers},this.applyLineStyles(),this}onMouseOverMarker(K,Q){this.toggleMarker(Q,!0,!0),this.options.onMouseOverMarker&&this.options.onMouseOverMarker(Q,!!this.infos&&(this.infos[Q]||!1),[this.waveform.getX(Q),this.waveform.getY(Q)])}onMouseOutMarker(K,Q){this.markersOffHover(),this.options.onMouseOutMarker&&this.options.onMouseOutMarker(Q,!!this.infos&&(this.infos[Q]||!1),[this.waveform.getX(Q),this.waveform.getY(Q)])}toggleMarker(K,Q,J){let $=K;var ee;'undefined'==typeof Q&&(ee=J?!this.domMarkerHover[K]:!this.domMarkerSelect[K]);var te=this['domMarker'+(J?'Hover':'Select')];if(ee||!0===Q){if(!te[K]){var ie=document.createElementNS(this.graph.ns,'path');this.setMarkerStyleTo(ie,this.markerFamilies[this.selectionType][this.getMarkerCurrentFamily($)]),this['domMarker'+(J?'Hover':'Select')][K]=ie,this.groupMarkerSelected.appendChild(ie)}else ie=te[K];let ae=this.getX(this.waveform.getX($)),re=this.getY(this.waveform.getY($));ie.setAttribute('d','M '+ae+' '+re+' '+this.getMarkerPath(this.markerFamilies[this.selectionType][this.getMarkerCurrentFamily($)],1)),J&&this.markerHovered++}else if((!ee||!1===Q)&&(J&&this.domMarkerHover[K]&&!this.domMarkerSelect[K]||this.domMarkerSelect[K])){if(!te[K])return;this.groupMarkerSelected.removeChild(te[K]),delete te[K],J&&this.markerHovered--}return ee}markersOffHover(){for(var K in this.domMarkerHover)this.toggleMarker(K.split(','),!1,!0);return this}markersOffSelect(){for(var K in this.domMarkerSelect)this.toggleMarker(K.split(','),!1,!1);return this}onClickOnMarker(K,Q){var J=this.toggleMarker(Q);J&&this.options.onSelectMarker&&this.options.onSelectMarker(Q,!!this.infos&&(this.infos[Q[0]]||!1)),!J&&this.options.onUnselectMarker&&this.options.onUnselectMarker(Q,!!this.infos&&(this.infos[Q[0]]||!1)),this.options.onToggleMarker&&this.options.onToggleMarker(Q,!!this.infos&&(this.infos[Q[0]]||!1),J)}_getMarkerIndexFromEvent(K){var Q=this.graph._getXY(K);return this.searchIndexByPxXY(Q.x-this.graph.getPaddingLeft(),Q.y-this.graph.getPaddingTop())}onMouseWheel(){}empty(){for(var K=0,Q=this.lines.length;K<Q;K++)this.groupLines.removeChild(this.lines[K]);return this.lines=[],this}select(K){return K=K||'selected',this.selected='unselected'!==K,this.areMarkersShown()||this.areMarkersShown(K)?(this.selectionType=K,this.draw(!0),this.applyLineStyles()):(this.selectionType=K,this.applyLineStyles()),this.applyLineStyle(this.getSymbolForLegend()),this}unselect(){return this.selected=!1,this.select('unselected')}degrade(K){return this.degradationPx=K,this}drawInit(K){if(this.currentLineId=0,this.counter=0,this._drawn=!0,this.currentLine='',!this.waveform)this._dataToUse=this.data,this._xDataToUse=this.xData;else if(this.degradationPx)this.waveform.resampleForDisplay({resampleToPx:this.degradationPx,xPosition:this.getXAxis().getPx.bind(this.getXAxis()),minX:this.getXAxis().getCurrentMin(),maxX:this.getXAxis().getCurrentMax()}),this._dataToUse=[this.waveform.getDataToUseFlat()];else if(this.waveform.hasAggregation()){let Q=this.getXAxis(),J=this.graph.getDrawingWidth()*(Q.getDataMax()-Q.getDataMin())/(Q.getCurrentMax()-Q.getCurrentMin()),$=this.waveform.selectAggregatedData(J);if($ instanceof Promise)return $.then(()=>{this.draw(K)}),!1;if(!1===$)return!1;this._dataToUse=this.waveform.getDataToUseFlat()}return!0}removeLinesGroup(){this._afterLinesGroup=this.groupLines.nextSibling,this.groupMain.removeChild(this.groupLines)}insertLinesGroup(){if(!this._afterLinesGroup)throw'Could not find group after lines to insertion.';this.groupMain.insertBefore(this.groupLines,this._afterLinesGroup),this._afterLinesGroup=!1}removeExtraLines(){for(var K=this.currentLineId,Q=this.lines.length;K<Q;K++)this.groupLines.removeChild(this.lines[K]);this.lines.splice(this.currentLineId,Q-this.currentLineId),this.currentLineId=0}draw(K){if(super.draw(...arguments),!this.getXAxis()||!this.getYAxis())throw'No axes were defined for this serie';if(K||this.hasDataChanged()){if(!this.drawInit(K))return;var Q=this._dataToUse,J=this._xDataToUse,$=this._slotToUse;this.removeLinesGroup(),this.eraseMarkers(),this.lookForMaxima=!0,this.lookForMinima=!1,this.markerFamily=this.markerFamilies[this.selectionType||'unselected'],this.pos0=this.getYAxis().getPos(0),this.error&&this.errorDrawInit(),this._draw(),this.error&&this.errorDraw(),this.removeExtraLines(),this.insertMarkers(),this.insertLinesGroup()}for(var ee in this.domMarkerHover)this.toggleMarker(ee.split(','),!1,!0);for(var ee in this.domMarkerSelect)this.toggleMarker(ee.split(','),!1,!1);this.applyLineStyle(this.getSymbolForLegend()),this.hasStyleChanged(this.selectionType)&&this.updateStyle(),this.dataHasChanged(!1),super.afterDraw()}_draw(){let K=this,Q=this.waveform,te=!1,ie=!1,oe=this.getXAxis(),le=this.getYAxis(),de=oe.getCurrentMin(),pe=le.getCurrentMin(),ge=oe.getCurrentMax(),ue=le.getCurrentMax(),J,$,ee,ae,re,se,ne;if(Q){J=Q.getData(!0);let Me=Q.getShift(),ke=Q.getScale(),Se=!1,_e=!1,Pe=this.isMonotoneous(),ve=this.markersShown(),Le=0,we=Q.getLength(),ce,he,xe,me,fe,ye,be,Ae,Ce;for(this.currentLine='',Q.isXMonotoneous()&&(Q.isXMonotoneousAscending()?(Le=Q.getIndexFromX(de,!0)||0,we=Q.getIndexFromX(ge,!0),!1===we&&(we=Q.getLength())):(Le=Q.getIndexFromX(ge,!0)||0,we=Q.getIndexFromX(de,!0),!1===we&&(we=J.length)),we+=2,we>J.length&&(we=J.length));Le<we;Le+=1){if($=Q.getX(Le,!0),ee=J[Le]*ke+Me,$!=$||ee!=ee){this._createLine();continue}if($<de&&te<de||$>ge&&te>ge||(ee<pe&&ie<pe||ee>ue&&ie>ue)&&!this.options.lineToZero){te=$,ie=ee,_e=!0;continue}if(this.counter2=Le,ve&&this.getMarkerCurrentFamily(this.counter2),se=this.getX($),ne=this.getY(ee),se!=ae||ne!=re){if(Se=Pe?ee<pe||ee>ue:$<de||ee<pe||$>ge||ee>ue,this.options.lineToZero){if(Se=$<de||$>ge,Se)continue;}else if(Se||_e){!1!==te&&!1!==ie||_e?(Ce=[],ce=($-de)/($-te),he=ee-ce*(ee-ie),xe=($-ge)/($-te),me=ee-xe*(ee-ie),fe=(ee-pe)/(ee-ie),ye=$-fe*($-te),be=(ee-ue)/(ee-ie),Ae=$-be*($-te),1>ce&&0<ce&&!1!==he&&he<ue&&he>pe&&Ce.push([de,he]),1>xe&&0<xe&&!1!==me&&me<ue&&me>pe&&Ce.push([ge,me]),1>fe&&0<fe&&!1!==ye&&ye<ge&&ye>de&&Ce.push([ye,pe]),1>be&&0<be&&!1!==Ae&&Ae<ge&&Ae>de&&Ce.push([Ae,ue]),0<Ce.length?Se?_e?2==Ce.length&&(this._createLine(),this._addPoint(this.getX(Ce[0][0]),this.getY(Ce[0][1]),Ce[0][0],Ce[0][1],!1,!1,!1),this._addPoint(this.getX(Ce[1][0]),this.getY(Ce[1][1]),Ce[0][0],Ce[0][1],!1,!1,!1)):(1<Ce.length&&(console.error('Programmation error. Please e-mail me.'),console.log(Ce,Ae,ye,me,he,ee,pe,ue,ie)),this._addPoint(this.getX(Ce[0][0]),this.getY(Ce[0][1]),Ce[0][0],Ce[0][1],!1,!1,!1)):(1<Ce.length&&(console.error('Programmation error. Please e-mail me.'),console.log(Ce,Ae,ye,me,he,ee,pe,ue,ie)),this._createLine(),this._addPoint(this.getX(Ce[0][0]),this.getY(Ce[0][1]),Ce[0][0],Ce[0][1],!1,!1,!1),this._addPoint(se,ne,te,ie,!1,!1,!0)):!Se&&this._addPoint(se,ne,te,ie,Le,!1,!1)):(ae=se,re=ne,te=$,ie=ee),ae=se,re=ne,te=$,ie=ee,_e=Se;continue}if(se!=se||ne!=ne){0<this.counter&&this._createLine();continue}this._addPoint(se,ne,$,ee,Le,!1,!0),ae=se,re=ne,te=$,ie=ee}}if(this._createLine(),this._tracker){this._trackerDom&&this._trackerDom.remove();var Te=this.groupLines.cloneNode(!0);for(this.groupMain.appendChild(Te),Le=0,we=Te.children.length;Le<we;Le++)Te.children[Le].setAttribute('stroke','transparent'),Te.children[Le].setAttribute('stroke-width','25px'),Te.children[Le].setAttribute('pointer-events','stroke');this._trackerDom=Te,this.groupMain.addEventListener('mousemove',Ee=>{var Xe=this.graph._getXY(Ee),De=this.handleMouseMove(!1,!1);this._trackingCallback(this,De,Xe.x,Xe.y)}),this.groupMain.addEventListener('mouseleave',()=>{this._trackingOutCallback(this)})}return this}}kill(){super.kill()}getMarkerCurrentFamily(K){if(this.markerPoints&&this.markerPoints[this.selectionType]){var Q;for(var J=0;J<this.markerPoints[this.selectionType].length&&this.markerPoints[this.selectionType][J][0]<=K;J++)this.markerPoints[this.selectionType][J][1]>=K&&(this.markerCurrentFamily=this.markerPoints[this.selectionType][J][2],Q=this.markerFamilies[this.selectionType][this.markerCurrentFamily]);return!!Q&&(this.getMarkerDom(Q),this.markerCurrentFamily)}}drawSlot(K,Q){var J=0,$,ee,te,ie;if(this.isFlipped())var ae=this.slots[Q]/(this.maxY-this.minY),re=Math.floor((this.getYAxis().getCurrentMin()-this.minY)*ae),se=Math.ceil((this.getYAxis().getCurrentMax()-this.minY)*ae);else var ae=this.slots[Q]/(this.maxX-this.minX),re=Math.floor((this.getXAxis().getCurrentMin()-this.minX)*ae),se=Math.ceil((this.getXAxis().getCurrentMax()-this.minX)*ae);for(ie=re;ie<=se;ie++)K[ie]&&(this.isFlipped()?(ee=Math.floor(this.getY(K[ie].x)),te=this.getX(K[ie].max),this._addPoint(this.getX(K[ie].start),ee,!1,!1,!1,!1,!1),this._addPoint(te,ee,!1,!1,!1,!0,!1),this._addPoint(this.getX(K[ie].min),ee,!1,!1,!1,!1,!1),this._addPoint(this.getX(K[ie].stop),ee,!1,!1,!1,!0,!1)):($=Math.floor(this.getX(K[ie].x)),te=this.getY(K[ie].max),this._addPoint($,this.getY(K[ie].start),!1,!1,!1,!1,!1),this._addPoint($,te,!1,!1,!1,!0,!1),this._addPoint($,this.getY(K[ie].min),!1,!1,!1,!1,!1),this._addPoint($,this.getY(K[ie].stop),!1,!1,!1,!0,!1)));this._createLine(),J++}setMarkerStyleTo(K,Q){if(!K||!Q)throw console.trace(),'Cannot set marker style. DOM does not exist.';K.setAttribute('fill',Q.fillColor||'transparent'),K.setAttribute('stroke',Q.strokeColor||this.getLineColor()),K.setAttribute('stroke-width',Q.strokeWidth||1)}hideTrackingMarker(){this.marker.setAttribute('display','none'),this.markerLabel.setAttribute('display','none'),this.markerLabelSquare.setAttribute('display','none')}_addPoint(K,Q,J,$,ee,te,ie){if(K===K&&Q===Q)return 0==this.counter?this.currentLine='M ':this.options.lineToZero||te?this.currentLine+='M ':this.currentLine+='L ',this.currentLine+=K,this.currentLine+=' ',this.currentLine+=Q,this.currentLine+=' ',this.options.lineToZero&&void 0!==this.pos0&&(this.currentLine+='L ',this.currentLine+=K,this.currentLine+=' ',this.currentLine+=this.pos0,this.currentLine+=' '),this.error&&this.errorAddPoint(ee,J,$,K,Q),this.markerPoints?void(this.markersShown()&&!1!==ie&&this.markerFamily&&V(this,this.markerFamily[this.markerCurrentFamily],K,Q,this.markersDom.get(this.markerFamily[this.markerCurrentFamily])),this.counter++):void this.counter++}_createLine(){var K=this.currentLineId++,Q;return this.lines[K]?Q=this.lines[K]:(Q=document.createElementNS(this.graph.ns,'path'),this.applyLineStyle(Q),this.groupLines.appendChild(Q),this.lines[K]=Q),0==this.counter?Q.setAttribute('d',''):Q.setAttribute('d',this.currentLine),this.currentLine='M ',this.counter=0,Q}applyLineStyles(){for(var K=0;K<this.lines.length;K++)this.applyLineStyle(this.lines[K])}applyLineStyle(K){K.setAttribute('stroke',this.getLineColor()),K.setAttribute('stroke-width',this.getLineWidth()),this.getLineDashArray()?K.setAttribute('stroke-dasharray',this.getLineDashArray()):K.removeAttribute('stroke-dasharray'),K.setAttribute('fill','none')}updateStyle(){this.applyLineStyles(),this.setLegendSymbolStyle(),this.styleHasChanged(!1)}getMarkerPath(K,Q){var J=K.zoom||1,Q=Q||0,$=[];switch(K.type){case 2:$=['m',-2,-2,'l',4,4,'m',-4,0,'l',4,-4];break;case 3:$=['m',-2,0,'l',4,0,'m',-2,-2,'l',0,4];break;case 4:$=['m',-1,-1,'l',2,0,'l',-1,2,'z'];break;default:case 1:$=['m',-2,-2,'l',4,0,'l',0,4,'l',-4,0,'z'];}if((1==J||!J)&&!Q)return $.join(' ');if($){for(var ee=0,te=$.length;ee<te;ee++)'number'==typeof $[ee]&&($[ee]*=J+Q);return $.join(' ')}}getMarkerDom(K){var Q=this;if(!this.markersDom.has(K)){var J=document.createElementNS(this.graph.ns,'path');this.setMarkerStyleTo(J,K),this.markersDom.set(K,{dom:J,path:''}),J.addEventListener('mouseover',function($){var ee=Q._getMarkerIndexFromEvent($);Q.onMouseOverMarker($,ee)}),J.addEventListener('mouseout',function($){var ee=Q._getMarkerIndexFromEvent($);Q.onMouseOutMarker($,ee)}),J.addEventListener('click',function($){var ee=Q._getMarkerIndexFromEvent($);Q.onClickOnMarker($,ee)})}return K.dom}getMarkerDomIndependent(K,Q){if(!this.independantMarkers[K]){var J=document.createElementNS(this.graph.ns,'path');this.setMarkerStyleTo(J,Q),J.addEventListener('mouseover',$=>{this.onMouseOverMarker($,K)}),J.addEventListener('mouseout',$=>{this.onMouseOutMarker($,K)}),J.addEventListener('click',$=>{this.onClickOnMarker($,K)}),this.independantMarkers[K]=J}return this.groupMarkers.appendChild(this.independantMarkers[K]),this.independantMarkers[K]}searchIndexByPxXY(K,Q){var J=!1,$=!1,ee,te=this._xDataToUse,ie,ae;for(var re=0,se=this.waveform.getLength();re<se;re+=1)ie=this.waveform.getX(re),ae=this.waveform.getY(re),ee=Math.pow(this.getX(ie)-K,2)+Math.pow(this.getY(ae)-Q,2),(!J||ee<J)&&(J=ee,$=re);return $}searchClosestValue(K){if(this.waveform){const Q=this.waveform.getIndexFromX(K);let J={xMin:this.waveform.getX(Q),xMax:this.waveform.getX(Q+1),yMin:this.waveform.getY(Q),yMax:this.waveform.getY(Q+1)};return Math.abs(J.xMin-K)<Math.abs(J.xMax-K)?(J.xClosest=J.xMin,J.yClosest=J.yMin):(J.xClosest=J.xMax,J.yClosest=J.yMax),J}}handleMouseMove(K,Q){var J=K||this.getXAxis().getMouseVal(),$=this.searchClosestValue(J);if($){var ee=(J-$.xMin)/($.xMax-$.xMin),te=(1-ee)*$.yMin+ee*$.yMax;if(Q&&this.options.trackMouse){if(void 0==$.xMin)return!1;var ie=this.getX(this.getFlip()?te:J),ae=this.getY(this.getFlip()?J:te);switch(this.marker.setAttribute('display','block'),this.marker.setAttribute('cx',ie),this.marker.setAttribute('cy',ae),this.markerLabel.setAttribute('display','block'),this.markerLabelSquare.setAttribute('display','block'),this.options.trackMouseLabel){case!1:break;default:this.markerLabel.textContent=this.options.trackMouseLabel.replace('<x>',J.toFixed(this.options.trackMouseLabelRouding)).replace('<y>',te.toFixed(this.options.trackMouseLabelRouding));}this.markerLabel.setAttribute('x',ie+5),this.markerLabel.setAttribute('y',ae-5),this.markerLabelSquare.setAttribute('x',ie+5),this.markerLabelSquare.setAttribute('y',ae-5-this.graph.options.fontSize),this.markerLabelSquare.setAttribute('width',this.markerLabel.getComputedTextLength()+2),this.markerLabelSquare.setAttribute('height',this.graph.options.fontSize+2)}return{xBefore:$.xMin,xAfter:$.xMax,yBefore:$.yMin,yAfter:$.yMax,trueX:J,interpolatedY:te,xClosest:$.xClosest,yClosest:$.yClosest}}}getMax(K,Q){var J=Math.min(K,Q),$=Math.max(K,Q),ee=this.searchClosestValue(J),te=this.searchClosestValue($),re=-(1/0),ie,ae,se,ne;if(ee||(J=this.minX,ee=this.searchClosestValue(J)),te||($=this.maxX,te=this.searchClosestValue($)),!ee||!te)return-(1/0);for(ie=ee.dataIndex;ie<=te.dataIndex;ie++)for(se=ie==ee.dataIndex?ee.xBeforeIndexArr:0,ne=ie==te.dataIndex?te.xBeforeIndexArr:this.data[ie].length,ae=se;ae<=ne;ae+=2)re=Math.max(re,this.data[ie][ae+1]);return re}getMin(K,Q){var J=Math.min(K,Q),$=Math.max(K,Q),ee=this.searchClosestValue(J),te=this.searchClosestValue($),re=1/0,ie,ae,se,ne;if(ee||(J=this.minX,ee=this.searchClosestValue(J)),te||($=this.maxX,te=this.searchClosestValue($)),!ee||!te)return 1/0;for(ie=ee.dataIndex;ie<=te.dataIndex;ie++)for(se=ie==ee.dataIndex?ee.xBeforeIndexArr:0,ne=ie==te.dataIndex?te.xBeforeIndexArr:this.data[ie].length,ae=se;ae<=ne;ae+=2)re=Math.min(re,this.data[ie][ae+1]);return re}setStyle(K,Q='unselected'){this.styles[Q]=K,this.styleHasChanged(Q)}setLineStyle(K,Q='unselected',J){return this.styles[Q]=this.styles[Q]||{},this.styles[Q].lineStyle=K,J&&this.setLineStyle(K,'selected'),this.styleHasChanged(Q),this}getLineStyle(K){return this.getStyle(K).lineStyle}getLineDashArray(K=this.selectionType||'unselected'){switch(this.getStyle(K).lineStyle){case 2:return'1, 1';break;case 3:return'2, 2';break;case 4:return'3, 3';break;case 5:return'4, 4';break;case 6:return'5, 5';break;case 7:return'5 2';break;case 8:return'2 5';break;case 9:return'4 2 4 4';break;case 10:return'1,3,1';break;case 11:return'9 2';break;case 12:return'2 9';break;case 1:case!1:return!1;break;default:return this.styles[K].lineStyle;}this.styleHasChanged(K)}getStyle(K=this.selectionType||'unselected'){return this.styles[K]}extendStyles(){for(var K in this.styles){var Q=this.styles[K];Q&&(this.styles[K]=R.extend(!0,{},this.styles.unselected,Q))}}extendStyle(K,Q){var J=this.styles[K];this.styles[K]=R.extend(!0,{},this.styles[Q||'unselected'],J||{}),this.styles[K].markers.map(function($){$.dom&&($.dom='')}),this._recalculateMarkerPoints(K,this.styles[K].markers),this.styleHasChanged(K)}setLineWidth(K,Q,J){return Q=Q||'unselected',this.styles[Q]=this.styles[Q]||{},this.styles[Q].lineWidth=K,J&&this.setLineWidth(K,'selected'),this.styleHasChanged(Q),this}getLineWidth(K){return this.getStyle(K).lineWidth||1}setLineColor(K,Q,J){return Q=Q||'unselected',this.styles[Q]=this.styles[Q]||{},this.styles[Q].lineColor=K,J&&this.setLineColor(K,'selected'),this.styleHasChanged(Q),this}getLineColor(K){return this.getStyle(K).lineColor||'black'}showMarkers(K,Q){return K=K||'unselected',this.styles[K]=this.styles[K]||{},this.styles[K].showMarkers=!0,Q&&this._drawn?this.draw(!0):this.styleHasChanged(K),this}hideMarkers(K,Q){return K=K||'unselected',this.styles[K].showMarkers=!1,Q&&this._drawn?this.draw(!0):this.styleHasChanged(K),this}markersShown(K){return!1!==this.getStyle(K).showMarkers}areMarkersShown(){return this.markersShown.apply(this,arguments)}isMarkersShown(){return this.markersShown.apply(this,arguments)}setMarkers(K,Q,J){return this.styles[Q||'unselected']=this.styles[Q||'unselected']||{},this.showMarkers(Q,!1),Array.isArray(K)||'object'!=typeof K?!K&&(K=[{type:1,zoom:1,points:'all'}]):K=[K],this.styles[Q||'unselected'].markers=K,J&&(this.styles.selected.markers=R.extend(!0,{},K)),this._recalculateMarkerPoints(Q,K),this.styleHasChanged(Q),this.dataHasChanged(!0),this}setMarkersPoints(K,Q,J){this._extendMarkers('points',K,Q,J,!0)}setMarkersColor(K,Q,J){this._extendMarkers('color',K,Q,J)}setMarkersType(K,Q,J){this._extendMarkers('type',K,Q,J)}setMarkersZoom(K,Q,J){this._extendMarkers('zoom',K,Q,J)}setMarkersStrokeColor(K,Q,J){this._extendMarkers('strokeColor',K,Q,J)}setMarkersStrokeWidth(K,Q,J){this._extendMarkers('strokeWidth',K,Q,J)}setMarkersFillColor(K,Q,J){this._extendMarkers('fillColor',K,Q,J)}_extendMarkers(K,Q,J,$,ee){(J=J||0,$=$||'unselected',this.styles[$]&&this.styles[$].markers)&&(this.styles[$].markers[J][K]=Q,ee&&this._recalculateMarkerPoints($,this.styles[$].markers),this.markersDom[this.styles[$].markers[J]]&&this.setMarkerStyleTo(this.markersDom[this.styles[$].markers[J]].dom,this.styles[$].markers[J]))}_recalculateMarkerPoints(K,Q){var J=[];J.push([0,1/0,null]);for(var $=0,ee=Q.length;$<ee;$++){Q[$].markerPath=this.getMarkerPath(Q[$]),Q[$].points||(Q[$].points='all'),Array.isArray(Q[$].points)||(Q[$].points=[Q[$].points]);for(var te=0,ie=Q[$].points.length;te<ie;te++)'all'==Q[$].points[te]?J.push([0,1/0,$]):Array.isArray(Q[$].points[te])?J.push([Q[$].points[te][0],Q[$].points[te][1],$]):J.push([Q[$].points[te],Q[$].points[te],$])}this.markerFamilies[K||'unselected']=Q,J.sort(function(ae,re){return ae[0]-re[0]||(null==ae[2]?-1:1)}),this.markerPoints[K||'unselected']=J}insertMarkers(K){if(this.markerFamilies&&this.markerFamilies[K||this.selectionType]&&!this.options.markersIndependant)for(var Q=0,J=this.markerFamilies[K||this.selectionType].length;Q<J;Q++)if(this.markersDom.has(this.markerFamilies[K||this.selectionType][Q])){let $=this.markersDom.get(this.markerFamilies[K||this.selectionType][Q]);$.dom.setAttribute('d',$.path),this.groupMarkers.appendChild($.dom),this.currentMarkersSelectionType=this.selectionType}}getMarkerForLegend(){if(this.markerPoints&&this.markerPoints[this.selectionType]){if(!this.markerForLegend){var K=document.createElementNS(this.graph.ns,'path');this.setMarkerStyleTo(K,this.markerFamilies[this.selectionType][0]),K.setAttribute('d','M 14 0 '+this.getMarkerPath(this.markerFamilies[this.selectionType][0])),this.markerForLegend=K}return this.markerForLegend}}eraseMarkers(){var K=this;if(this.options.markersIndependant){for(var Q in this.independantMarkers)K.groupMarkers.removeChild(this.independantMarkers[Q]);this.independantMarkers={}}else this.currentMarkersSelectionType&&(this.markersDom.forEach(function(J){J.dom&&J.dom.parentNode===K.groupMarkers&&(K.groupMarkers.removeChild(J.dom),J.path='')}),this.currentMarkersSelectionType=!1)}isMonotoneous(){return this.waveform?this.waveform.isMonotoneous():!!this.xmonotoneous}findLocalMinMax(K,Q,J){return!!this.waveform&&this.waveform.findLocalMinMax(K,Q,J)}}R.mix(Z,G.default),E.default=Z})},function(u,A,S){var C,P,T;(function(E,X){P=[A,S(4),S(3),S(5)],C=X,T='function'==typeof C?C.apply(A,P):C,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X,Y,I){'use strict';function O(R){return R&&R.__esModule?R:{default:R}}Object.defineProperty(E,'__esModule',{value:!0});var F=O(X),W=function(G){if(G&&G.__esModule)return G;var U={};if(null!=G)for(var Z in G)Object.prototype.hasOwnProperty.call(G,Z)&&(U[Z]=G[Z]);return U.default=G,U}(Y),V=O(I);class B extends F.default{static default(){return{redrawShapesAfterDraw:!1}}constructor(R,G,U){super(...arguments),this.graph=R,this.name=G,this.options=Object.assign({},B.default(),this.constructor.default(),U)}draw(){}beforeDraw(){}afterDraw(){this.options.redrawShapesAfterDraw&&this.graph.getShapesOfSerie(this).forEach(R=>{R.redraw()}),this.emit('draw')}setData(R,G,U){function Z(ye){var be=Object.prototype.toString.call(ye);return'[object Array]'===be||'[object Int16Array]'===be||'[object Int32Array]'===be||'[object Float32Array]'===be||'[object Float64Array]'===be||'[object Uint8Array]'===be||'[object Uint16Array]'===be||'[object Uint32Array]'===be||'[object Int8Array]'===be}if(R instanceof V.default)return this.setWaveform(R);var K=0,G=G||!1,U=U||'float',ee=0,Q,J,$,te;this.minX=Number.MAX_SAFE_INTEGER,this.maxX=Number.MIN_SAFE_INTEGER,this.minY=Number.MAX_SAFE_INTEGER,this.maxY=Number.MIN_SAFE_INTEGER;let ie=[];var ae=Z(R);if(!ae&&'object'==typeof R)R=[R];else if(ae&&!Z(R[0])&&'object'!=typeof R[0])R=[R],G=!0;else if(ae&&Z(R[0])&&2<R[0].length)G=!0;else if(!ae)return void W.throwError('Data is not an array');var re=Z(R[0]),se=Z(R[0][0]);if(!re||G||se||(R=[R]),re)for(var ne=0,oe=R.length;ne<oe;ne++){$=this._addData(U,G?R.length:2*R.length),ie.push($),K=0;for(var le=0,de=R[ne].length;le<de;le++)G?($[K]=[R[ne][le],R[ne][le+1]],K++,ee+=le%2?1:0):($[K]=[R[ne][le][0],R[ne][le][1]],ee++,K++)}else if('object'==typeof R[0])if(R[0].x)for(var ne=0,de=R.length;ne<de;ne++){var $=this._addData(U,2*R[ne].x.length);ie.push($),K=0;for(var le=0,pe=R[0].x.length;le<pe;le++)$[K]=[R[ne].x[le],R[ne].y[le]],ee++,K++}else{this.mode='x_equally_separated';var ge=0,ue=[],oe=0,ce;if(!R[0].y)return console.log(R),void W.throwError('No y data');for(var ne=0,de=R.length;ne<de;ne++)ge+=R[ne].y.length,te=0!=ne&&(!R[ne+1]||R[ne].x+R[ne].dx*R[ne].y.length==R[ne+1].x),te||(ie.push(this._addData(U,ge)),ue.push(ge),ge=0);this.xData=[],ge=0,oe=0,K=0;for(var ne=0,de=R.length;ne<de;ne++){Q=R[ne].x,J=R[ne].dx;for(var le=0;le<ce;le++)ie[oe][K]=[Q+le*J,R[ne].y[le]],K++,ee++;ge+=R[ne].y.length,ue[oe]==ge&&(oe++,ge=0,K=0)}}var he=(this.maxX-this.minX)/this.graph.getDrawingWidth(),xe=4*this.graph.getDrawingWidth(),me=ee/4,xe=this.graph.getDrawingWidth(),me=ee;ie=ie.reduce(function(ye,be,Ae){return 0<Ae&&ye.push([NaN,NaN]),ye.concat(be)},[]);var fe=new V.default;return fe.setData(ie),this.setWaveform(fe),this}_addData(){return[]}clearData(){return this.setData([]),this}getData(){return this.data}setOptions(R){this.options=R||{}}setOption(R,G){this.options[R]=G}kill(R){return this.graph.removeSerieFromDom(this),this.graph._removeSerie(this),this.graph.legend&&!R&&this.graph.legend.update(),this.graph=void 0,this}hide(R){if(this.hidden=!0,this.groupMain.setAttribute('display','none'),this.getSymbolForLegend().setAttribute('opacity',0.5),this.getTextForLegend().setAttribute('opacity',0.5),this.hideImpl(),R){var G=this.graph.getShapesOfSerie(this);for(var U=0,Z=G.length;U<Z;U++)G[U].hide()}return this.emit('hide'),this}show(R){if(this.hidden=!1,this.groupMain.setAttribute('display','block'),this.getSymbolForLegend().setAttribute('opacity',1),this.getTextForLegend().setAttribute('opacity',1),this.showImpl(),this.draw(!0),R){var G=this.graph.getShapesOfSerie(this);for(var U=0,Z=G.length;U<Z;U++)G[U].show()}return this.emit('show'),this}hideImpl(){}showImpl(){}toggleDisplay(){return this.isShown()?this.hide():this.show(),this}isShown(){return!this.hidden}getX(R){return(R=this.getXAxis().getPx(R))-R%0.2}getY(R){return(R=this.getYAxis().getPx(R))-R%0.2}isSelected(){return this.selected||'unselected'!==this.selectionType}_checkX(R){this.minX=Math.min(this.minX,R),this.maxX=Math.max(this.maxX,R)}_checkY(R){this.minY=Math.min(this.minY,R),this.maxY=Math.max(this.maxY,R)}getName(){return this.name}autoAxis(){return this.isFlipped()?(this.setXAxis(this.graph.getYAxis()),this.setYAxis(this.graph.getXAxis())):(this.setXAxis(this.graph.getXAxis()),this.setYAxis(this.graph.getYAxis())),this.graph.updateDataMinMaxAxes(),this}autoAxes(){return this.autoAxis(...arguments)}setXAxis(R){return this.xaxis='number'==typeof R?this.isFlipped()?this.graph.getYAxis(R):this.graph.getXAxis(R):R,this.graph.updateDataMinMaxAxes(),this}setYAxis(R){return'number'==typeof R?this.xaxis=this.isFlipped()?this.graph.getXAxis(R):this.graph.getYAxis(R):this.yaxis=R,this.graph.updateDataMinMaxAxes(),this}setAxes(){for(var R=0;2>R;R++)arguments[R]&&this[arguments[R].isX()?'setXAxis':'setYAxis'](arguments[R]);return this}getXAxis(){return this.xaxis}getYAxis(){return this.yaxis}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getWaveform(){return this.waveform}getWaveforms(){return[this.waveform]}getSymbolForLegend(){if(!this.lineForLegend){var R=document.createElementNS(this.graph.ns,'line');this.applyLineStyle(R),R.setAttribute('x1',5),R.setAttribute('x2',25),R.setAttribute('y1',0),R.setAttribute('y2',0),R.setAttribute('cursor','pointer'),this.lineForLegend=R}return this.lineForLegend}setLegendSymbolStyle(){this.applyLineStyle(this.getSymbolForLegend())}updateStyle(){this.setLegendSymbolStyle(),this.graph.updateLegend()}getTextForLegend(){if(!this.textForLegend){var R=document.createElementNS(this.graph.ns,'text');R.setAttribute('cursor','pointer'),R.textContent=this.getLabel(),this.textForLegend=R}return this.textForLegend}getIndex(){return this.graph.series.indexOf(this)}getLabel(){return this.options.label||this.name}setLabel(R){return this.options.label=R,this.textForLegend&&(this.textForLegend.textContent=R),this.graph.requireLegendUpdate(),this}setFlip(R){return this.options.flip=R,this}getFlip(){return this.options.flip}isFlipped(){return this.options.flip}setLayer(R){let G=parseInt(R)||1;return G!==this.options.layer&&(this.options.layer=G,this.graph.appendSerieToDom(this)),this}getLayer(){return this.options.layer||1}setStyle(R,G='unselected'){this.styles[G]=R,this.styleHasChanged(G)}styleHasChanged(R='unselected'){if(this._changedStyles=this._changedStyles||{},!1===R)for(var G in this._changedStyles)this._changedStyles[G]=!1;else this._changedStyles[R||'unselected']=!0;return this.graph.requireLegendUpdate(),this}hasStyleChanged(R){return this._changedStyles=this._changedStyles||{},this._changedStyles[R||'unselected']}dataHasChanged(R){return this._dataHasChanged=void 0===R||R,this}hasDataChanged(){return this._dataHasChanged}setInfo(R,G){return this.infos=this.infos||{},this.infos[R]=G,this}getInfo(R){return(this.infos||{})[R]}setAdditionalData(R){return this.additionalData=R,this}getAdditionalData(){return this.additionalData}select(){return this.selected=!0,this}unselect(){return this.selected=!1,this}enableTracking(R,G){return this._tracker=!0,this._trackingCallback=R,this._trackingOutCallback=G,this}disableTracking(){return this._trackerDom&&(this._trackerDom.remove(),this._trackerDom=null),this._tracker=!1,this._trackingCallback=null,this}allowTrackingLine(R){R=R||{},this.graph.addSerieToTrackingLine(this,R)}getMarkerForLegend(){return!1}get type(){return this._type}getType(){return this._type}set excludedFromLegend(R=!0){this._excludedFromLegend=R}get excludedFromLegend(){return!!this._excludedFromLegend}setDataIndices(R,G){this.categoryIndices=R,this.nbCategories=G}}E.default=B})},function(u,A,S){var C,P,T;(function(E,X){P=[A,S(3)],C=X,T='function'==typeof C?C.apply(A,P):C,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var Y=function(O){if(O&&O.__esModule)return O;var F={};if(null!=O)for(var W in O)Object.prototype.hasOwnProperty.call(O,W)&&(F[W]=O[W]);return F.default=O,F}(X);E.default={doErrorDraw:function(I,O,F,W,V,B){O instanceof Array||(O=[O]);var R='y'==I?'getY':'getX',G='y'==I?['top','bottom']:['left','right'],U;if(!(isNaN(V)||isNaN(B)))for(var Z=0,K=O.length;Z<K;Z++)O[Z]instanceof Array?(U=G[0],this.errorstyles[Z].paths[U]+=' M '+V+' '+B,this.errorstyles[Z].paths[U]+=this.makeError(I,Z,this[R](F+O[Z][0]),W,U),U=G[1],this.errorstyles[Z].paths[U]+=' M '+V+' '+B,this.errorstyles[Z].paths[U]+=this.makeError(I,Z,this[R](F-O[Z][1]),W,U)):(U=G[0],this.errorstyles[Z].paths[U]+=' M '+V+' '+B,this.errorstyles[Z].paths[U]+=this.makeError(I,Z,this[R](F+O[Z]),W,U),U=G[1],this.errorstyles[Z].paths[U]+=' M '+V+' '+B,this.errorstyles[Z].paths[U]+=this.makeError(I,Z,this[R](F-O[Z]),W,U))},makeError:function(I,O,F,W,V){var B;switch(this.errorstyles[O].type){case'bar':B='makeBar';break;case'box':B='makeBox';}return this[B+I.toUpperCase()](F,W,this.errorstyles[O][V])},makeBarY:function(I,O,F){if(I&&F){var W=Y.isNumeric(F.width)?F.width:10;return' V '+I+' m -'+W/2+' 0 h '+W+' m -'+W/2+' 0 V '+O+' '}},makeBoxY:function(I,O,F){return I&&F?' m 5 0 V '+I+' h -10 V '+O+' m 5 0 ':void 0},makeBarX:function(I,O,F){if(I&&F){var W=Y.isNumeric(F.width)?F.width:10;return' H '+I+' m 0 -'+W/2+' v '+W+' m 0 -'+W/2+' H '+O+' '}},makeBoxX:function(I,O,F){return I&&F?' v 5 H '+I+' v -10 H '+O+' v 5 ':void 0},check:function(I,O,F){var W,V;if((this.getType()!=Graph.SERIE_LINE&&this.getType()!=Graph.SERIE_SCATTER||(W=this.data[2*I])&&(V=this.data[2*I+1]))&&void 0!==W){for(var B=0,R=O.length;B<R;B++)Array.isArray(O[B])?(isNaN(O[B][0])||this._checkY(V+O[B][0]),isNaN(O[B][1])||this._checkY(V-O[B][1])):isNaN(O[B])||(this._checkY(V+O[B]),this._checkY(V-O[B]));for(var B=0,R=F.length;B<R;B++)Array.isArray(F[B])?(isNaN(F[B][0])||this._checkX(W-F[B][0]),isNaN(F[B][1])||this._checkX(W+F[B][1])):isNaN(O[B])||(this._checkX(W-F[B]),this._checkX(W+F[B]))}},setDataError:function(I,O){if(this.error=I,!O)for(let F=0,W=this.error.length;F<W;F++)this.error[F]&&this.check(F,this.error[F][0],this.error[F][1]);return this.dataHasChanged(),this.graph.updateDataMinMaxAxes(),this},setErrorStyle:function(I){function O(Z){Z.dom=document.createElementNS(F.graph.ns,'path'),Z.dom.setAttribute('fill',Z.fillColor||'none'),Z.dom.setAttribute('stroke',Z.strokeColor||'black'),Z.dom.setAttribute('stroke-opacity',Z.strokeOpacity||1),Z.dom.setAttribute('fill-opacity',Z.fillOpacity||1),Z.dom.setAttribute('stroke-width',Z.strokeWidth||1),F.groupMain.appendChild(Z.dom)}var F=this;I=I||['box','bar'],Array.isArray(I)||(I=[I]);var W=[],V=[['y','top','bottom'],['x','left','right']];for(var B=0;B<I.length;B++){W[B]={},'string'==typeof I[B]&&(I[B]={type:I[B],y:{}}),W[B].type=I[B].type;for(var R=0,G=V.length;R<G;R++){I[B].all&&(I[B][V[R][1]]=Y.extend(!0,{},I[B].all),I[B][V[R][2]]=Y.extend(!0,{},I[B].all)),I[B][V[R][0]]&&(I[B][V[R][1]]=Y.extend(!0,{},I[B][V[R][0]]),I[B][V[R][2]]=Y.extend(!0,{},I[B][V[R][0]]));for(var U=1;2>=U;U++)I[B][V[R][U]]&&(W[B][V[R][U]]=I[B][V[R][U]],O(W[B][V[R][U]]))}}return this.errorstyles=W,this},errorDrawInit:function(){if(this.errorstyles)for(var I=0,O=this.errorstyles.length;I<O;I++)this.errorstyles[I].paths={top:'',bottom:'',left:'',right:''}},errorAddPoint:function(I,O,F,W,V){var B;this.error&&(B=this.error[I/2])&&(B[0]&&this.doErrorDraw('y',B[0],F,V,W,V),B[1]&&this.doErrorDraw('x',B[1],O,W,W,V))},errorAddPointBarChart:function(I,O,F,W){var V;this.error&&(V=this.error[I])&&this.doErrorDraw('y',V,O,W,F,W)},errorDraw:function(){if(this.error&&this.errorstyles)for(var I=0,O=this.errorstyles.length;I<O;I++)for(var F in this.errorstyles[I].paths)this.errorstyles[I][F]&&this.errorstyles[I][F].dom&&this.errorstyles[I][F].dom.setAttribute('d',this.errorstyles[I].paths[F])}}})},function(u,A,S){var C,P,T;(function(E,X){P=[A,S(1),S(14),S(5),S(18),S(3)],C=X,T='function'==typeof C?C.apply(A,P):C,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X,Y,I,O,F){'use strict';function W(U){return U&&U.__esModule?U:{default:U}}Object.defineProperty(E,'__esModule',{value:!0}),W(X);var V=W(Y);W(I);var B=W(O),R=function(Z){if(Z&&Z.__esModule)return Z;var K={};if(null!=Z)for(var Q in Z)Object.prototype.hasOwnProperty.call(Z,Q)&&(K[Q]=Z[Q]);return K.default=Z,K}(F);class G extends V.default{static defaults(){return{zpos:0}}constructor(){super(...arguments)}setZPos(U){return this.options.zpos=U,this}setz(){return this.setZPos(...arguments)}}R.mix(G,B.default),E.default=G})},function(u,A){var S,C,P;(function(T,E){C=[A],S=E,P='function'==typeof S?S.apply(A,C):S,!(P!==void 0&&(u.exports=P));var X})(this,function(T){'use strict';function E(X,Y,I){let O,F,W,V,B,R=X.getWaveforms();for(let G of R)for(O=0,F=G.getLength(),W=G.getData();O<F;O+=1)V=Y?X.getXAxis().getVal(X.getX(G.getX(O,!0))):X.getYAxis().getVal(X.getY(W[O])),B=0==O?V:I?Math.min(B,V):Math.max(B,V);return B}Object.defineProperty(T,'__esModule',{value:!0}),T.default={getX:function(X){return(X=this.getXAxis().getPx(X))-X%0.2+this.getXAxis().getZProj(this.options.zpos)},getY:function(X){return(X=this.getYAxis().getPx(X))-X%0.2+this.getYAxis().getZProj(this.options.zpos)},getZPos:function(){return this.options.zpos},getMinX:function(X){return X?E(this,!0,!0):this.minX},getMaxX:function(X){return X?E(this,!0,!1):this.maxX},getMinY:function(X){return X?E(this,!1,!0):this.minY},getMaxY:function(X){return X?E(this,!1,!1):this.maxY}}})},function(u,A,S){var C,P,T;(function(E,X){P=[A,S(3),S(14),S(16)],C=X,T='function'==typeof C?C.apply(A,P):C,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X,Y,I){'use strict';function O(V){return V&&V.__esModule?V:{default:V}}Object.defineProperty(E,'__esModule',{value:!0}),function(B){if(B&&B.__esModule)return B;var R={};if(null!=B)for(var G in B)Object.prototype.hasOwnProperty.call(B,G)&&(R[G]=B[G]);return R.default=B,R}(X);var F=O(Y);O(I);class W extends F.default{constructor(){super(...arguments),this.groupMain=document.createElementNS(this.graph.ns,'g'),this.pathDom=document.createElementNS(this.graph.ns,'path'),this.groupMain.appendChild(this.pathDom),this.styles={},this.styles.unselected={lineColor:this.options.lineColor,lineStyle:this.options.lineStyle,lineWidth:this.options.lineWidth,fillColor:this.options.fillColor,fillOpacity:this.options.fillOpacity,markers:this.options.markers}}setData(V){for(var B in this.data=V,this.minY=Number.MAX_SAFE_INTEGER,this.maxY=Number.MIN_SAFE_INTEGER,this.data)this._checkY(this.data[B]);return this}setFillColor(V,B,R){return B=B||'unselected',this.styles[B]=this.styles[B]||{},this.styles[B].fillColor=V,R&&this.setFillColor(V,'selected'),this.styleHasChanged(B),this}getFillColor(V){return this.getStyle(V).fillColor}setFillOpacity(V,B,R){return B=B||'unselected',this.styles[B]=this.styles[B]||{},this.styles[B].fillOpacity=V,R&&this.setLineWidth(V,'selected'),this.styleHasChanged(B),this}getFillOpacity(V){return this.getStyle(V).fillOpacity||1}applyLineStyles(){this.applyLineStyle(this.pathDom)}applyLineStyle(V){V.setAttribute('stroke',this.getLineColor()),V.setAttribute('stroke-width',this.getLineWidth()),this.getLineDashArray()?V.setAttribute('stroke-dasharray',this.getLineDashArray()):V.removeAttribute('stroke-dasharray'),V.setAttribute('fill',this.getFillColor()),V.setAttribute('fill-opacity',this.getFillOpacity()||1)}draw(){var V='';for(var B in this.error&&this.errorDrawInit(),this.data)this.categoryIndices[B]&&(V+='M '+this.getXAxis().getPos(this.categoryIndices[B])+' '+this.getYAxis().getPos(0)+' V '+this.getYAxis().getPos(this.data[B])+' h '+this.getXAxis().getDeltaPx(1/this.nbCategories)+' V '+this.getYAxis().getPos(0),this.error&&this.errorAddPointBarChart(B,this.data[B],this.getXAxis().getPos(this.categoryIndices[B]+0.5/this.nbCategories),this.getYAxis().getPos(this.data[B])));this.error&&this.errorDraw(),this.pathDom.setAttribute('d',V),this.applyLineStyles()}setMarkers(){}getUsedCategories(){return Object.keys(this.data)}}E.default=W})},function(u,A,S){var C,P,T;(function(E,X){P=[A,S(15),S(3)],C=X,T='function'==typeof C?C.apply(A,P):C,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X,Y){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var I=function(W){return W&&W.__esModule?W:{default:W}}(X);class O extends I.default{static default(){return{orientation:'y',maxBoxWidth:20,defaultStyle:{meanLineColor:'rgb( 100, 0, 0 )',meanLineWidth:2,boxAboveLineWidth:1,boxAboveLineColor:'rgb( 0, 0, 0 )',boxAboveFillColor:'transparent',boxAboveFillOpacity:1,boxBelowLineWidth:1,boxBelowLineColor:'rgb( 0, 0, 0 )',boxBelowFillColor:'transparent',boxBelowFillOpacity:1,barAboveLineColor:'rgba( 0, 0, 0, 1 )',barAboveLineWidth:1,barBelowLineColor:'rgba( 0, 0, 0, 1 )',barBelowLineWidth:1,outlierLineWidth:1,outlierLineColor:'rgb( 255, 255, 255 )',outlierFillColor:'rgb( 0, 0, 0 )',outlierFillOpacity:1}}}constructor(){super(...arguments),this.groupMain=document.createElementNS(this.graph.ns,'g'),this.pathDom=document.createElementNS(this.graph.ns,'path'),this.groupMain.appendChild(this.pathDom),this.styles={},this.styles.unselected=this.options.defaultStyle}setData(F,W){if(this.data=F,!!Array.isArray(F)){let V,B,R,G,U;for(var Z in'y'==this.options.orientation?(V=this.getXAxis(),B=this.getYAxis(),R=this._checkX.bind(this),G=this._checkY.bind(this),U=!0,this.minY=F[0].Q2,this.maxY=F[0].Q2,this.maxX=F[0].x,this.minX=F[0].x):(V=this.getYAxis(),B=this.getXAxis(),R=this._checkY.bind(this),G=this._checkX.bind(this),U=!1,this.minX=F[0].Q2,this.maxX=F[0].Q2,this.maxY=F[0].y,this.minY=F[0].y),W&&(R=function(){},G=function(){}),V&&B||(0,Y.throwError)('Error in setting data of the box serie. The X and Y axes must be set beforehand'),this.data)U?(R(this.data[Z].x),this.data[Z].pos=this.data[Z].x):(R(this.data[Z].y),this.data[Z].pos=this.data[Z].y),this.data[Z].Q3&&G(this.data[Z].Q3),this.data[Z].Q1&&G(this.data[Z].Q1),this.data[Z].whiskers?Array.isArray(this.data[Z].whiskers)?(0<this.data[Z].whiskers.length&&G(this.data[Z].whiskers[0]),1<this.data[Z].whiskers.length&&G(this.data[Z].whiskers[1])):(G(this.data[Z].whiskers),this.data[Z].whiskers=[this.data[Z].whiskers]):this.data[Z].whiskers=[],Array.isArray(this.data[Z].outliers)?this.data[Z].outliers.map(K=>G(K)):this.data[Z].outliers=[];return this.dataHasChanged(),this.graph.updateDataMinMaxAxes(),this}}_style(F,W,V='unselected',B=!1){return this.styles[V]=this.styles[V]||{},this.styles[V][F]=W,B&&this._set(F,W,'selected'),this.styleHasChanged(V),this}_gstyle(F,W){return this.getStyle(W)[F]}getStyle(F='unselected'){return this.styles[F]||{}}setMeanLineColor(){return this._style('meanLineColor',...arguments)}getMeanLineColor(){return this._gstyle('meanLineColor',...arguments)}setStyle(F,W='unselected'){this.styles[W]=(0,Y.extend)({},defaults.defaultStyle,this.styles.unselected,F),this.styleHasChanged(W)}setMeanLineWidth(){return this._style('meanLineWidth',...arguments)}getMeanLineWidth(){return this._gstyle('meanLineWidth',...arguments)}setBoxAboveLineColor(){return this._style('boxAboveLineColor',...arguments)}getBoxAboveLineColor(){return this._gstyle('boxAboveLineColor',...arguments)}setBoxBelowLineColor(){return this._style('boxBelowLineColor',...arguments)}getBoxBelowLineColor(){return this._gstyle('boxBelowLineColor',...arguments)}setBoxAboveLineWidth(){return this._style('boxAboveLineWidth',...arguments)}getBoxAboveLineWidth(){return this._gstyle('boxAboveLineWidth',...arguments)}setBoxBelowLineWidth(){return this._style('boxBelowLineWidth',...arguments)}getBoxBelowLineWidth(){return this._gstyle('boxBelowLineWidth',...arguments)}setBoxAboveFillColor(){return this._style('boxAboveFillColor',...arguments)}getBoxAboveFillColor(){return this._gstyle('boxAboveFillColor',...arguments)}setBoxBelowFillColor(){return this._style('boxBelowFillColor',...arguments)}getBoxBelowFillColor(){return this._gstyle('boxBelowFillColor',...arguments)}setBoxAboveFillOpacity(){return this._style('boxAboveFillOpacity',...arguments)}getBoxAboveFillOpacity(){return this._gstyle('boxAboveFillOpacity',...arguments)}setBoxBelowFillOpacity(){return this._style('boxBelowFillOpacity',...arguments)}getBoxBelowFillOpacity(){return this._gstyle('boxBelowFillOpacity',...arguments)}setBarAboveLineColor(){return this._style('barAboveLineColor',...arguments)}getBarAboveLineColor(){return this._gstyle('barAboveLineColor',...arguments)}setBarBelowLineColor(){return this._style('barBelowLineColor',...arguments)}getBarBelowLineColor(){return this._gstyle('barBelowLineColor',...arguments)}setBarAboveLineWidth(){return this._style('barAboveLineWidth',...arguments)}getBarAboveLineWidth(){return this._gstyle('barAboveLineWidth',...arguments)}setBarBelowLineWidth(){return this._style('barBelowLineWidth',...arguments)}getBarBelowLineWidth(){return this._gstyle('barBelowLineWidth',...arguments)}setOutlierLineColor(){return this._style('outlierLineColor',...arguments)}getOutlierLineColor(){return this._gstyle('outlierLineColor',...arguments)}setOutlierLineWidth(){return this._style('outlierLineWidth',...arguments)}getOutlierLineWidth(){return this._gstyle('outlierLineWidth',...arguments)}setOutlierFillColor(){return this._style('outlierFillColor',...arguments)}getOutlierFillColor(){return this._gstyle('outlierFillColor',...arguments)}setOutlierFillOpacity(){return this._style('outlierFillOpacity',...arguments)}getOutlierFillOpacity(){return this._gstyle('outlierFillOpacity',...arguments)}applyLineStyles(){this.applyLineStyle(this.pathDom)}applyLineStyle(F){F.setAttribute('stroke',this.getLineColor()),F.setAttribute('stroke-width',this.getLineWidth()),F.removeAttribute('stroke-dasharray'),F.setAttribute('fill',this.getFillColor()),F.setAttribute('fill-opacity',this.getFillOpacity()||1)}draw(){if(this.data){let W='y'==this.options.orientation?this.getYAxis():this.getXAxis(),V='y'==this.options.orientation?this.getXAxis():this.getYAxis(),F,B,R,G,U,Z,K,Q;if((0,Y.emptyDom)(this.groupMain),'category'==V.getType())B=V.getRelPx(0.8/this.nbCategories);else{B=this.options.maxBoxWidth;for(var J=0,$=this.data.length;J<$-1;J++)B=Math.min(B,Math.abs(V.getPx(this.data[J+1].pos)-V.getPx(this.data[J].pos)))}for(var J=0,$=this.data.length;J<$;J++){if('category'==V.getType()){let se='y'==this.options.orientation?this.data[J].x:this.data[J].y;if(!!this.categoryIndices.hasOwnProperty(se))F=[V.getPos(this.categoryIndices[se])+1.2*B/2];else if(Array.isArray(this._linkedToScatterSeries))for(let ne of this._linkedToScatterSeries)if(ne.categoryIndices.hasOwnProperty(se)){F=[V.getPos(ne.categoryIndices[se])+1.2*B/2],W='y'==this.options.orientation?ne.getYAxis():ne.getXAxis();break}}else F=[V.getPos('y'==this.options.orientation?this.data[J].x:this.data[J].y),B];R=W.getPos(this.data[J].Q2),G=W.getPos(this.data[J].Q3),U=W.getPos(this.data[J].Q1),this.data[J].whiskers.map(se=>{se<this.data[J].Q1?K=W.getPos(se):Z=W.getPos(se)}),Q=this.data[J].outliers.map(se=>W.getPos(se));var ee=document.createElementNS(this.graph.ns,'line');this.applyMeanStyle(ee);var te=document.createElementNS(this.graph.ns,'rect'),ie=document.createElementNS(this.graph.ns,'rect');'y'==this.options.orientation?(te.setAttribute('width',B),te.setAttribute('x',F[0]-B/2),ie.setAttribute('width',B),ie.setAttribute('x',F[0]-B/2),ee.setAttribute('x1',F[0]-B/2),ee.setAttribute('x2',F[0]+B/2),ee.setAttribute('y1',R),ee.setAttribute('y2',R)):(te.setAttribute('height',B),te.setAttribute('y',F[0]-B/2),ie.setAttribute('height',B),ie.setAttribute('y',F[0]-B/2),ee.setAttribute('y1',F[0]-B/2),ee.setAttribute('y2',F[0]+B/2),ee.setAttribute('x1',R),ee.setAttribute('x2',R)),this.boxPos(te,R,G,'x'==this.options.orientation),this.boxPos(ie,R,U,'x'==this.options.orientation),this.applyBoxStyle(te,ie);var ae=document.createElementNS(this.graph.ns,'line'),re=document.createElementNS(this.graph.ns,'line');'y'==this.options.orientation?(void 0!==Z&&(ae.setAttribute('y1',G),ae.setAttribute('y2',Z),ae.setAttribute('x1',F[0]),ae.setAttribute('x2',F[0])),void 0!==K&&(re.setAttribute('y1',U),re.setAttribute('y2',K),re.setAttribute('x1',F[0]),re.setAttribute('x2',F[0]))):(void 0!==Z&&(ae.setAttribute('x1',G),ae.setAttribute('x2',Z),ae.setAttribute('y1',F[0]),ae.setAttribute('y2',F[0])),void 0!==K&&(re.setAttribute('x1',U),re.setAttribute('x2',K),re.setAttribute('y1',F[0]),re.setAttribute('y2',F[0]))),Q.map(se=>{let ne=document.createElementNS(this.graph.ns,'circle');ne.setAttribute('r',2),'y'==this.options.orientation?(ne.setAttribute('cx',F[0]),ne.setAttribute('cy',se)):(ne.setAttribute('cy',F[0]),ne.setAttribute('cx',se)),this.setOutlierStyle(ne),this.groupMain.appendChild(ne)}),void 0!==Z&&this.groupMain.appendChild(ae),void 0!==K&&this.groupMain.appendChild(re),void 0!=G&&this.groupMain.appendChild(te),void 0!=U&&this.groupMain.appendChild(ie),this.groupMain.appendChild(ee),this.applyWhiskerStyle(ae,re)}}}applyBoxStyle(F,W){F.setAttribute('stroke',this.getBoxAboveLineColor()),F.setAttribute('stroke-width',this.getBoxAboveLineWidth()),this.getBoxAboveFillColor()!==void 0&&F.setAttribute('fill',this.getBoxAboveFillColor()),this.getBoxAboveFillOpacity()!==void 0&&F.setAttribute('fill-opacity',this.getBoxAboveFillOpacity()),W.setAttribute('stroke',this.getBoxBelowLineColor()),W.setAttribute('stroke-width',this.getBoxBelowLineWidth()),this.getBoxBelowFillColor()!==void 0&&W.setAttribute('fill',this.getBoxBelowFillColor()),this.getBoxAboveFillOpacity()!==void 0&&W.setAttribute('fill-opacity',this.getBoxBelowFillOpacity())}applyWhiskerStyle(F,W){F.setAttribute('stroke',this.getBarAboveLineColor()),F.setAttribute('stroke-width',this.getBarAboveLineWidth()),W.setAttribute('stroke',this.getBarBelowLineColor()),W.setAttribute('stroke-width',this.getBarBelowLineWidth())}applyMeanStyle(F){F.setAttribute('stroke',this.getMeanLineColor()),F.setAttribute('stroke-width',this.getMeanLineWidth())}setOutlierStyle(F){F.setAttribute('stroke',this.getOutlierLineColor()),F.setAttribute('stroke-width',this.getOutlierLineWidth()),this.getBoxBelowFillColor()!==void 0&&F.setAttribute('fill',this.getOutlierFillColor()),this.getBoxAboveFillOpacity()!==void 0&&F.setAttribute('fill-opacity',this.getOutlierFillOpacity())}getCategoryIndex(F){if(!this.categories)throw new Error('No categories were defined. Probably axis.setSeries was not called');for(var W=0;W<this.categories.length;W++)if(this.categories[W].name==F)return W;return!1}setMarkers(){}boxPos(F,W,V,B){W>V?(F.setAttribute(B?'x':'y',V),F.setAttribute(B?'width':'height',W-V)):(F.setAttribute(B?'x':'y',W),F.setAttribute(B?'width':'height',V-W))}getUsedCategories(){let F='y'==this.options.orientation?'x':'y',W=this.data.map(V=>V[F]);return Array.isArray(this._linkedToScatterSeries)&&this._linkedToScatterSeries.map(V=>{V.getUsedCategories().map(B=>{let R;-1<(R=W.indexOf(B))&&W.splice(R,1)})}),W}linkToScatterSerie(...F){this._linkedToScatterSeries=F}}E.default=O})},function(u,A,S){var C,P,T;(function(E,X){P=[A,S(14),S(3),S(16)],C=X,T='function'==typeof C?C.apply(A,P):C,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X,Y,I){'use strict';function O(V){return V&&V.__esModule?V:{default:V}}Object.defineProperty(E,'__esModule',{value:!0});var F=O(X);(function(B){if(B&&B.__esModule)return B;var R={};if(null!=B)for(var G in B)Object.prototype.hasOwnProperty.call(B,G)&&(R[G]=B[G]);return R.default=B,R})(Y),O(I);class W extends F.default{constructor(){super(...arguments),this.lines=this.lines||{}}setColors(V){this.colors=V}_draw_standard(){var V=this,B=this._dataToUse,G=0,U=B.length,ee=!1,te=!1,ne=this.getXAxis(),oe=this.getYAxis(),le=ne.getCurrentMin(),de=oe.getCurrentMin(),pe=ne.getCurrentMax(),ge=oe.getCurrentMax(),ue=0,ce=1,R,Z,K,Q,J,$,K,ie,ae,re,se;for(this.eraseLines(),this.isFlipped()&&(ue=1,ce=0),G=0;G<U;G++){for(R=!1,this.counter1=G,this.currentLine='',Z=0,K=0,Q=B[G].length,Z=0;Z<Q;Z+=2){if(J=B[G][Z+ue],$=B[G][Z+ce],J<le&&ee<le||J>pe&&ee>pe||($<de&&te<de||$>ge&&te>ge)&&!this.options.lineToZero){ee=J,te=$;continue}if(this.counter2=Z/2,this.markersShown()&&this.getMarkerCurrentFamily(this.counter2),re=this.getX(J),se=this.getY($),re!=ie||se!=ae){if(isNaN(re)||isNaN(se)){0<this.counter;continue}if(this._optimize_before(re,se)){var he=this.colors[G][Z/2];if(this._addPoint(re,se,J,$,ie,ae,ee,te,Z,he,!1,!0),this.detectPeaks(J,$),!this._optimize_after(re,se)){R=!0;break}ie=re,ae=se,ee=J,te=$}}}if(R)break}if(this.latchLines(),this._tracker){this._trackerDom&&this._trackerDom.remove();var xe=this.groupLines.cloneNode(!0);this.groupMain.appendChild(xe);for(var G=0,U=xe.children.length;G<U;G++)xe.children[G].setAttribute('stroke','transparent'),xe.children[G].setAttribute('stroke-width','25px'),xe.children[G].setAttribute('pointer-events','stroke');V._trackerDom=xe,V.groupMain.addEventListener('mousemove',function(me){var fe=V.graph._getXY(me),ye=V.handleMouseMove(!1,!1);V._trackingCallback(V,ye,fe.x,fe.y)}),V.groupMain.addEventListener('mouseleave',function(){V._trackingOutCallback(V)})}return this}_addPoint(V,B,R,G,U,Z,K,Q,J,$){if(void 0!==U&&void 0!==Z&&!(isNaN(V)||isNaN(B))){var ee=this.lines[$];ee||(ee=this.lines[$]={object:document.createElementNS(this.graph.ns,'path'),path:'',color:$},ee.object.setAttribute('stroke',$),ee.color=$,this.groupLines.appendChild(ee.object)),ee.path+='M '+U+' '+Z+' L '+V+' '+B,this.error&&this.errorAddPoint(J,R,G,V,B)}}removeExtraLines(){}latchLines(){for(var V in this.lines)this.lines[V].object.setAttribute('d',this.lines[V].path)}eraseLines(){for(var V in this.lines)this.lines[V].path='',this.lines[V].object.setAttribute('d','')}applyLineStyle(V){V.setAttribute('stroke-width',this.getLineWidth()),this.getLineDashArray()?V.setAttribute('stroke-dasharray',this.getLineDashArray()):V.removeAttribute('stroke-dasharray'),V.setAttribute('fill','none')}}E.default=W})},function(u,A,S){var C,P,T;(function(E,X){P=[A,S(15),S(3),S(16)],C=X,T='function'==typeof C?C.apply(A,P):C,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X,Y,I){'use strict';function O(R){return R&&R.__esModule?R:{default:R}}Object.defineProperty(E,'__esModule',{value:!0});var F=O(X),W=function(G){if(G&&G.__esModule)return G;var U={};if(null!=G)for(var Z in G)Object.prototype.hasOwnProperty.call(G,Z)&&(U[Z]=G[Z]);return U.default=G,U}(Y),V=O(I);class B extends F.default{constructor(){super(...arguments),this.id=Math.random()+Date.now(),this.shapes=[],this.shown=!0,this.data=[],this.shapesDetails=[],this.shapes=[],this._type='scatter',W.mapEventEmission(this.options,this),this._isMinOrMax={x:{min:!1,max:!1},y:{min:!1,max:!1}},this.groupPoints=document.createElementNS(this.graph.ns,'g'),this.groupMain=document.createElementNS(this.graph.ns,'g'),this.additionalData={},this.selectedStyleGeneral={},this.selectedStyleModifiers={},this.groupPoints.addEventListener('mouseover',R=>{var G=parseInt(R.target.parentElement.getAttribute('data-shapeid'));this.emit('mouseover',G,this.data[2*G],this.data[2*G+1])}),this.groupPoints.addEventListener('mouseout',R=>{var G=parseInt(R.target.parentElement.getAttribute('data-shapeid'));this.emit('mouseout',G,this.data[2*G],this.data[2*G+1])}),this.minX=Number.MAX_VALUE,this.minY=Number.MAX_VALUE,this.maxX=Number.MIN_VALUE,this.maxY=Number.MIN_VALUE,this.groupMain.appendChild(this.groupPoints),this.currentAction=!1,this.initExtended1&&this.initExtended1(),this.styles={},this.styles.unselected={},this.styles.selected={},this.styles.unselected.default={shape:'circle',cx:0,cy:0,r:3,stroke:'transparent',fill:'black'},this.styles.selected.default={shape:'circle',cx:0,cy:0,r:4,stroke:'transparent',fill:'black'}}setData(R,G,U){var Z=0,G=G||'2D',U=U||'float',Q=0,K;if(this.empty(),this.shapesDetails=[],this.shapes=[],!R instanceof Array)return this;R instanceof Array&&!(R[0]instanceof Array)&&'object'!=typeof R[0]&&(G='1D');var J='2D'==G;K=this._addData(U,J?2*R.length:R.length),Z=0;for(var $=0,ee=R.length;$<ee;$++)J?(K[Z]=R[$][0],this._checkX(K[Z]),Z++,K[Z]=R[$][1],this._checkY(K[Z]),Z++,Q++):(K[Z]=R[$],this[0==$%2?'_checkX':'_checkY'](K[Z]),Z++,Q+=$%2?1:0);return this.dataHasChanged(),this.graph.updateDataMinMaxAxes(),this.data=K,this}setDataCategory(R){for(var G in R)if(Array.isArray(R[G].y))for(let U of R[G].y)this._checkY(U);return this.dataHasChanged(),this.graph.updateDataMinMaxAxes(),this.data=R,this}empty(){for(;this.groupPoints.firstChild;)this.groupPoints.removeChild(this.groupPoints.firstChild)}getSymbolForLegend(){if(this.symbol)return this.symbol;var R=document.createElementNS(this.graph.ns,'g');R.setAttribute('data-shapeid',-1);var G=this.doShape(R,this.styles.unselected.default),U=this.getStyle('unselected',-1,!0);for(var Z in U[-1])'shape'!=Z&&G.setAttribute(Z,U[-1][Z]);return R}setStyle(R,G,U){return'string'==typeof G&&(U=G,G=!1),void 0===U&&(U='unselected'),this.styles[U]=this.styles[U]||{},this.styles[U].all=R,this.styles[U].modifiers=G,this.styleHasChanged(U),this}draw(R){if(R||this.hasDataChanged()||this.hasStyleChanged('unselected')){var Z=0,Q='category'==this.getXAxis().getType(),G,U,K;this._drawn=!0,this.dataHasChanged(!1),this.styleHasChanged(!1),this.groupMain.removeChild(this.groupPoints);var J=0,$=1;this.getFlip()&&(J=1,$=0),this.data.length/2;var ee=[];if(Z=0,K=this.data.length,this.error&&this.errorDrawInit(),Q){for(let te=0;Z<K;Z+=1)if(this.categoryIndices.hasOwnProperty(this.data[Z].x)){let ie=this.data[Z].y,ae=ie.length,re=0;this.error;for(let se of this.data[Z].y){let ne=re/(ae-1)*(0.8/this.nbCategories)+this.categoryIndices[this.data[Z].x]+0.1/this.nbCategories;U=this.getY(se),G=this.getX(ne),re++,this.shapesDetails[te]=this.shapesDetails[te]||[],this.shapesDetails[te][0]=G,this.shapesDetails[te][1]=U,ee.push(te),te++}}}else for(;Z<K;Z+=2)this.data[Z+J]<this.getXAxis().getCurrentMin()||this.data[Z+J]>this.getXAxis().getCurrentMax()||this.data[Z+$]<this.getYAxis().getCurrentMin()||this.data[Z+$]>this.getYAxis().getCurrentMax()||(G=this.getX(this.data[Z+J]),U=this.getY(this.data[Z+$]),this.error&&this.errorAddPoint(Z,this.data[Z+J],this.data[Z+$],G,U),this.shapesDetails[Z/2]=this.shapesDetails[Z/2]||[],this.shapesDetails[Z/2][0]=G,this.shapesDetails[Z/2][1]=U,ee.push(Z/2));this.error&&this.errorDraw(),this.applyStyle('unselected',ee),this.groupMain.appendChild(this.groupPoints)}}_addPoint(R,G,U){var Z=document.createElementNS(this.graph.ns,'g');Z.setAttribute('transform','translate('+R+', '+G+')'),Z.setAttribute('data-shapeid',U),shape=this.extraStyle&&this.extraStyle[U]?this.doShape(Z,this.extraStyle[U]):this.stdStylePerso?this.doShape(Z,this.stdStylePerso):this.doShape(Z,this.stdStyle),this.shapes[U]=shape,this.groupPoints.appendChild(Z)}doShape(R,G){var U=document.createElementNS(this.graph.ns,G.shape);return R.appendChild(U),U}getStyle(R,G,U){var R=R||'unselected',Z,K={};'number'==typeof G?Z=[G]:Array.isArray(G)&&(Z=G);var Q,G,J,$,ee;this.styles[R].all!==void 0&&(ee=this.styles[R].all,'function'==typeof ee?ee=ee():!1===ee&&(ee={}));for(var te=0,ie=Z.length;te<ie;te++){if(G=Z[te],Q=this.shapes[G],(J=this.styles[R].modifiers)&&('function'==typeof J||J[G])){'function'==typeof J?$=J(G,Q):J[G]&&($=J[G]);var ae=W.extend({},ee,$);$=W.extend($,ae)}else $=void 0==ee?this.styles[R].default:ee;if(!Q){var re=document.createElementNS(this.graph.ns,'g');re.setAttribute('data-shapeid',G),this.shapes[G]=this.doShape(re,$),this.groupPoints.appendChild(re),Q=this.shapes[G]}U||Q.parentNode.setAttribute('transform','translate('+this.shapesDetails[G][0]+', '+this.shapesDetails[G][1]+')'),K[G]=$}return K}applyStyle(R,G,U){var Z,K,Q=this.getStyle(R,G,U);for(Z in Q)for(K in Q[Z])'shape'!==K&&(Q[Z][K]?this.shapes[Z].setAttribute(K,Q[Z][K]):this.shapes[Z].removeAttribute(K))}unselectPoint(R){this.selectPoint(R,!1)}selectPoint(R,G,U){if(!(this.shapesDetails[R][2]&&this.shapesDetails[R][2]==U)){if('string'==typeof G&&(U=G,G=void 0),Array.isArray(R))return this.selectPoints(R);if(this.shapes[R]&&this.shapesDetails[R])if((this.shapesDetails[R][2]||!1===G)&&!0!==G){var Z=this.shapesDetails[R][2];this.shapesDetails[R][2]=!1;var K=this.getStyle(Z,R,!0);for(var Q in K[R])this.shapes[R].removeAttribute(Q);this.applyStyle('unselected',R,!0)}else U=U||'selected',this.shapesDetails[R][2]=U,this.applyStyle(U,R,!0)}}getUsedCategories(){return'object'==typeof this.data[0]?this.data.map(R=>R.x):[]}}W.mix(B,V.default),E.default=B})},function(u,A,S){var C,P,T;(function(E,X){P=[A,S(15),S(5),S(3)],C=X,T='function'==typeof C?C.apply(A,P):C,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X,Y,I){'use strict';function O(B){return B&&B.__esModule?B:{default:B}}Object.defineProperty(E,'__esModule',{value:!0});var F=O(X),W=O(Y);class V extends F.default{static default(){return{fillColor:'rgba( 0, 0, 0, 0.1 )',lineColor:'rgba( 0, 0, 0, 1 )',lineWidth:'1px'}}constructor(){super(...arguments),this.selectionType='unselected',this.id=(0,I.guid)(),this.groupZones=document.createElementNS(this.graph.ns,'g'),this.groupMain=document.createElementNS(this.graph.ns,'g'),this.lineZone=document.createElementNS(this.graph.ns,'path'),this.lineZone.setAttribute('stroke','black'),this.lineZone.setAttribute('stroke-width','1px'),this.groupMain.appendChild(this.groupZones),this.groupZones.appendChild(this.lineZone),this.applyLineStyle(this.lineZone),this.styleHasChanged(),this.clip=document.createElementNS(this.graph.ns,'clipPath'),this.clipId=(0,I.guid)(),this.clip.setAttribute('id',this.clipId),this.graph.defs.appendChild(this.clip)}setWaveform(...B){return this.waveforms=B,this.waveforms=this.waveforms.map(R=>{return R instanceof W.default?R:new W.default(R)}),this.minX=this.waveforms[0].getXMin(),this.maxX=this.waveforms[0].getXMax(),this.minY=this.waveforms[0].getMin(),this.maxY=this.waveforms[0].getMax(),this.waveforms.map(R=>{this.minX=Math.min(R.getXMin(),this.minX),this.maxX=Math.max(R.getXMin(),this.maxX),this.minY=Math.min(R.getMin(),this.minY),this.maxY=Math.max(R.getMax(),this.maxY)}),this.graph.updateDataMinMaxAxes(),this.dataHasChanged(),this}setWaveforms(){return this.setWaveform(...arguments)}getWaveforms(){return this.waveforms}setMinMaxWaveforms(B,R){return this.waveforms=[B,R.reverse()],this}empty(){for(;this.group.firstChild;)this.group.removeChild(this.group.firstChild)}draw(B){if(B||this.hasDataChanged()){if(!this.waveforms)return;let R=0,G=0,U=0,Z=0,K=0,Q='',J;const $=this.getXAxis().getMinPx(),ee=this.getXAxis().getMaxPx(),te=this.getYAxis().getMinPx(),ie=this.getYAxis().getMaxPx(),ae=this.getXAxis().getCurrentMin(),re=this.getXAxis().getCurrentMax(),se=this.getYAxis().getCurrentMin(),ne=this.getYAxis().getCurrentMax();this.groupMain.removeChild(this.groupZones);for(let oe of this.waveforms)for(G=oe.getData(!0),K=0;K<G.length;K+=1){if(R=oe.getX(K,!0),Z=this.getY(G[K]),U=this.getX(R),R<ae||R>re){J=[R,G[K],U,Z];continue}G[K]<se?Z=this.getY(se):G[K]>ne&&(Z=this.getY(ne)),0<Q.length&&(Q+=' L '),J?(Q+=J[2]+','+J[3]+' ',J=!1):Q+=U+','+Z+' '}this.lineZone.setAttribute('d','M '+Q+' z'),this.groupMain.appendChild(this.groupZones)}this.hasStyleChanged(this.selectionType)&&(this.applyLineStyle(this.lineZone),this.styleHasChanged(!1))}applyLineStyle(B){B.setAttribute('stroke',this.getLineColor()),B.setAttribute('stroke-width',this.getLineWidth()),B.setAttribute('fill',this.getFillColor()),B.setAttribute('fill-opacity',this.getFillOpacity()),B.setAttribute('stroke-opacity',this.getLineOpacity())}setLineWidth(B){return this.options.lineWidth=B,this.styleHasChanged(),this}getLineWidth(){return this.options.lineWidth}setLineOpacity(B){return this.options.lineOpacity=B,this.styleHasChanged(),this}getLineOpacity(){return this.options.lineOpacity}setLineColor(B){return this.options.lineColor=B,this.styleHasChanged(),this}getLineColor(){return this.options.lineColor}setFillOpacity(B){return this.options.fillOpacity=B,this.styleHasChanged(),this}getFillOpacity(){return this.options.fillOpacity}setFillColor(B){return this.options.fillColor=B,this.styleHasChanged(),this}getFillColor(){return this.options.fillColor}}E.default=V})},function(u,A,S){var C,P,T;(function(E,X){P=[A,S(1),S(23),S(5),S(18),S(3)],C=X,T='function'==typeof C?C.apply(A,P):C,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X,Y,I,O,F){'use strict';function W(U){return U&&U.__esModule?U:{default:U}}Object.defineProperty(E,'__esModule',{value:!0}),W(X);var V=W(Y);W(I);var B=W(O),R=function(Z){if(Z&&Z.__esModule)return Z;var K={};if(null!=Z)for(var Q in Z)Object.prototype.hasOwnProperty.call(Z,Q)&&(K[Q]=Z[Q]);return K.default=Z,K}(F);class G extends V.default{static default(){return{zpos:0}}constructor(){super(...arguments)}setZPos(U){return this.options.zpos=U,this}setz(){return this.setZPos(...arguments)}}R.mix(G,B.default),E.default=G})},function(u,A,S){var C,P,T;(function(E,X){P=[A,S(15),S(3)],C=X,T='function'==typeof C?C.apply(A,P):C,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X,Y){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var I=function(V){return V&&V.__esModule?V:{default:V}}(X),O=function(V){if(V&&V.__esModule)return V;var B={};if(null!=V)for(var R in V)Object.prototype.hasOwnProperty.call(V,R)&&(B[R]=V[R]);return B.default=V,B}(Y);class F extends I.default{constructor(){super(...arguments),O.mapEventEmission(this.options,this),this.groupMain=document.createElementNS(this.graph.ns,'g'),this.rects=[],this.paths=[],this.recalculateBinsOnDraw=!1}setData(W){this.minX=this.maxX=this.minY=this.maxY=0;var V=0,B=W.length;for(this.data=W,this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY,V=0;V<B;V++)this._checkX(W[V][0]),this._checkY(W[V][1]);return this.dataHasChanged(),this.graph.updateDataMinMaxAxes(),this}calculateDensity(W,V,B,R,G,U){var Z=[],Q=this.data.length,ee=Number.POSITIVE_INFINITY,te=Number.NEGATIVE_INFINITY,K,J,$;for(K=0;K<Q;K++)(J=~~((this.data[K][0]-W)/V),$=~~((this.data[K][1]-R)/G),!(J>B||$>U||0>J||0>$))&&(Z[J]=Z[J]||[],Z[J][$]=Z[J][$]+1||1,ee=Z[J][$]<ee?Z[J][$]:ee,te=Z[J][$]>te?Z[J][$]:te);return this.maxIndexX=B,this.maxIndexY=U,this.binMin=ee,this.binMax=te,this.deltaX=V,this.deltaY=G,this.fromX=W,this.fromY=R,this.numX=B,this.numY=U,this.densitymap=Z,Z}calculateDensityWeighted(W,V,B,R,G,U){var Z=[],Q=this.data.length,ee=Number.POSITIVE_INFINITY,te=Number.NEGATIVE_INFINITY,K,J,$,ie,ae,re,se,ne,oe,le,de;for(K=0;K<Q;K++)(re=(this.data[K][0]-W)/V-0.5,se=(this.data[K][1]-R)/G-0.5,J=Math.floor(re),$=Math.floor(se),ne=J,le=$,oe=J+1,de=$+1,ie=1-(re-J),ae=1-(se-$),!(J>B||$>U||0>J||0>$))&&(Z[ne]=Z[ne]||[],Z[oe]=Z[oe]||[],Z[ne][le]=Z[ne][le]||0,Z[oe][le]=Z[oe][le]||0,Z[ne][de]=Z[ne][de]||0,Z[oe][de]=Z[oe][de]||0,Z[ne][le]+=ie*ae,Z[oe][le]+=(1-ie)*ae,Z[ne][de]+=ie*(1-ae),Z[oe][de]+=(1-ie)*(1-ae),ee=Z[ne][le]<ee?Z[ne][le]:ee,te=Z[ne][le]>te?Z[ne][le]:te,ee=Z[oe][le]<ee?Z[oe][le]:ee,te=Z[oe][le]>te?Z[oe][le]:te,ee=Z[ne][de]<ee?Z[ne][de]:ee,te=Z[ne][de]>te?Z[ne][de]:te,ee=Z[oe][de]<ee?Z[oe][de]:ee,te=Z[oe][de]>te?Z[oe][de]:te);return this.maxIndexX=B,this.maxIndexY=U,this.binMin=ee,this.binMax=te,this.deltaX=V,this.deltaY=G,this.fromX=W,this.fromY=R,this.numX=B,this.numY=U,this.densitymap=Z,Z}autoBins(W,V){return this.numX=W||400,this.numY=V||this.numX,this.calculateDensity(this.minX,(this.maxX-this.minX)/W,W,this.minY,(this.maxY-this.minY)/V,V),this.recalculateBinsOnDraw=!1,this}setPxPerBin(W,V,B){return W&&this.calculationDensityMap({from:'min',to:'max',pxPerBin:W,weighted:B}),V&&this.calculationDensityMap(!1,{from:'min',to:'max',pxPerBin:V,weighted:B}),this}setBinsFromTo(W,V,B,R){return this.densityMapCalculation=this.densityMapCalculation||{},this.densityMapCalculation[W]={from:V,to:B,numBins:R},this.calculationDensityMap(),this}calculationDensityMap(W,V){this.method=this.calculateDensityAdvanced,this.densityMapCalculation=this.densityMapCalculation||{},W&&(this.densityMapCalculation.x=W),V&&(this.densityMapCalculation.y=V)}calculateDensityAdvanced(){var W={x:{from:0,num:0,delta:0,weighing:!1},y:{from:0,num:0,delta:0,weighing:!1}},V={x:this.graph.drawingSpaceWidth,y:this.graph.drawingSpaceHeight},B={x:this.getXAxis,y:this.getYAxis},R=!1;for(var G in this.densityMapCalculation)if(this.densityMapCalculation[G].weighted&&(R=!0,W[G].weighing=!0),this.densityMapCalculation[G].pxPerBin){var U='min'==this.densityMapCalculation[G].from?B[G].call(this).getCurrentMin():this.densityMapCalculation[G].from,Z='max'==this.densityMapCalculation[G].to?B[G].call(this).getCurrentMax():this.densityMapCalculation[G].to,K=Math.abs(B[G].call(this).getRelPx(Z-U));W[G].num=Math.ceil(V[G]/this.densityMapCalculation[G].pxPerBin),W[G].from=U-Math.abs(B[G].call(this).getRelVal((W[G].num*this.densityMapCalculation[G].pxPerBin-K)/2)),W[G].delta=Math.abs(B[G].call(this).getRelVal(this.densityMapCalculation[G].pxPerBin))}else W[G].num=this.densityMapCalculation[G].numBins||400,W[G].from='min'==this.densityMapCalculation[G].from?B[G].call(this).getCurrentMin():this.densityMapCalculation[G].from,W[G].delta=this.densityMapCalculation[G].to?(('max'==this.densityMapCalculation[G].to?B[G].call(this).getCurrentMax():this.densityMapCalculation[G].to)-W[G].from)/W[G].num:this.densityMapCalculate[G].delta;(R?this.calculateDensityWeighted:this.calculateDensity).call(this,W.x.from,W.x.delta,W.x.num,W.y.from,W.y.delta,W.y.num)}setColorMapBinBoundaries(W,V){return this.colorMapMin=W,this.colorMapMax=V,this}autoColorMapBinBoundaries(){return this.colorMapMin=this.binMin,this.colorMapMax=this.binMax,this}onRedrawColorMapBinBoundaries(W){return this.callbackColorMapMinMax=W,this}colorMapHSL(W,V,B){B=B||'linear';var R={exp:function(ie){return(Math.exp(1*(ie/V))-Math.exp(0))/(Math.exp(1)-Math.exp(0))},log:function(ie){return(Math.log(ie+1)-Math.log(1))/(Math.log(V+1)-Math.log(1))},linear:function(ie){return(ie-0)/(V-0)}},G=0,U=[],Z=[],K={h:null,s:null,l:null,a:null},$=W.length-1,Q,J;for(var ee=0;ee<=V;ee++){for(var te in Q=R[B](ee),J=Math.floor(Q*$),J==W.length-1&&(J=$-1),Q=(Q-J/$)/(1/$),K)K[te]=(W[J+1][te]-W[J][te])*Q+W[J][te];U[G]='hsl('+K.h+', '+Math.round(100*K.s)+'%, '+Math.round(100*K.l)+'%)',Z[G]=K.a,G++}return this.opacities=Z,this.colorMap=U,this.colorMapNum=V,this}autoColorMapHSL(W,V){return this.colorMapHSV(W,100,V||'linear'),this}getColorIndex(W){return Math.max(0,Math.min(this.colorMapNum,Math.floor((W-this.colorMapMin)/(this.colorMapMax-this.colorMapMin)*this.colorMapNum)))}draw(){var W;if(this.method&&this.method(),!this.callbackColorMapMinMax||void 0==this.colorMapMin||void 0==this.colorMapMax||'auto'==this.callbackColorMapMinMax)this.autoColorMapBinBoundaries();else{var V=this.callbackColorMapMinMax(this.binMin,this.binMax);this.setColorMapBinBoundaries(V[0],V[1])}var B=this.getXAxis().getRelPx(this.deltaX),R=this.getYAxis().getRelPx(this.deltaY);for(var G=0;G<this.paths.length;G++)this.paths[G]='';for(var G=0;G<this.maxIndexX;G++)for(var U=0;U<this.maxIndexY;U++)if(void 0!=this.densitymap[G]&&void 0!=this.densitymap[G][U]){W=this.getColorIndex(this.densitymap[G][U]),this.paths[W]||(this.paths[W]=''),this.paths[W]+=' M '+this.getXAxis().getPx(G*this.deltaX+this.fromX)+' '+this.getYAxis().getPx(U*this.deltaY+this.fromY)+' h '+B+' v '+R+' h -'+B+' z';;}this.drawRects()}drawRects(){for(var W=0;W<this.paths.length;W++)this.rects[W]||(this.rects[W]=document.createElementNS(this.graph.ns,'path'),this.rects[W].setAttribute('shape-rendering','crispEdges')),void 0!==this.paths[W]&&(this.rects[W].setAttribute('d',this.paths[W]),this.rects[W].setAttribute('fill',this.colorMap[W]),this.rects[W].setAttribute('fill-opacity',this.opacities[W])),this.groupMain.appendChild(this.rects[W])}setOptions(W){return this.options=O.extend(!0,{},defaults,W||{}),this}}E.default=F})},function(u,A,S){var C,P,T;(function(E,X){P=[A,S(14),S(3)],C=X,T='function'==typeof C?C.apply(A,P):C,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X,Y){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var I=function(V){return V&&V.__esModule?V:{default:V}}(X),O=function(V){if(V&&V.__esModule)return V;var B={};if(null!=V)for(var R in V)Object.prototype.hasOwnProperty.call(V,R)&&(B[R]=V[R]);return B.default=V,B}(Y);class F extends I.default{constructor(){super(...arguments),this.negativeDelta=0,this.positiveDelta=0,this.negativeThreshold=0,this.positiveThreshold=0}setData(W,V,B){var V=V||'2D',B=B||'float',G=W.length,Q=[],R,U,Z,K;for(W instanceof Array||'object'!=typeof W||(this.minX=W.minX,this.minY=W.minY,this.maxX=W.maxX,this.maxY=W.maxY,W=W.segments,G=W.length),R=0;R<G;R++){for(Z=W[R].lines.length,K=this._addData(B,Z),U=0;U<Z;U+=2)K[U]=W[R].lines[U],this._checkX(K[U]),K[U+1]=W[R].lines[U+1],this._checkY(K[U+1]);Q.push({lines:K,zValue:W[R].zValue})}return this.data=Q,this.graph.updateDataMinMaxAxes(),this.dataHasChanged(!0),this}draw(W){if(W||this.hasDataChanged()){this.currentLine=0;var U=0,Z=this.data.length,K=0,V,B,R,G,Q,J,$,ee;this.minZ=1/0,this.maxZ=-(1/0);var te=this.groupLines.nextSibling;this.groupMain.removeChild(this.groupLines),this.zValues={};var ie=0,ae=1;this.getFlip()&&(ie=0,ae=1);var re=this.getYAxis().getCurrentMin(),se=this.getXAxis().getCurrentMin(),ne=this.getXAxis().getCurrentMax(),oe=this.getYAxis().getCurrentMax();for(this.counter=0,this.currentLineId=0;U<Z;U++){for(this.currentLine='',K=0,Q=0,(ee=this.data[U].lines,J=ee.length);K<J;K+=4)ee[K+ie]<se&&ee[K+2+ie]<se||ee[K+ae]<re&&ee[K+2+ae]<re||ee[K+ae]>oe&&ee[K+2+ae]>oe||ee[K+ie]>ne&&ee[K+2+ie]>ne||(R=this.getX(ee[K+ie]),G=this.getY(ee[K+ae]),V=this.getX(ee[K+2+ie]),B=this.getY(ee[K+2+ae]),V!=R||B!=G)&&(this.currentLine+='M ',this.currentLine+=R,this.currentLine+=' ',this.currentLine+=G,this.currentLine+='L ',this.currentLine+=V,this.currentLine+=' ',this.currentLine+=B,this.counter++,Q++);this.currentLine+=' z',$=this._createLine(),$.setAttribute('data-zvalue',this.data[U].zValue),this.zValues[this.data[U].zValue]={dom:$},this.minZ=Math.min(this.minZ,this.data[U].zValue),this.maxZ=Math.max(this.maxZ,this.data[U].zValue)}for(U++,U=this.currentLine+1;U<this.lines.length;U++)this.groupLines.removeChild(this.lines[U]),this.lines.splice(U,1);for(U=0;U<Z;U++)this.setColorTo(this.lines[U],this.data[U].zValue,this.minZ,this.maxZ);this.onMouseWheel(0,{shiftKey:!1}),this.groupMain.insertBefore(this.groupLines,te)}else if(this.hasStyleChanged(this.selectionType))for(;U<Z;U++)this.setColorTo(this.lines[U],this.data[U].zValue,this.minZ,this.maxZ)}onMouseWheel(W,V,B,R){for(var G in W/=250,void 0===B?V.shiftKey&&this.options.hasNegative?(this.negativeDelta=Math.min(0,Math.max(-1,this.negativeDelta+Math.min(0.1,Math.max(-0.1,W)))),this.negativeThreshold=-this.minZ*Math.pow(this.negativeDelta,3)):(this.positiveDelta=Math.min(1,Math.max(0,this.positiveDelta+Math.min(0.1,Math.max(-0.1,W)))),this.positiveThreshold=this.maxZ*Math.pow(this.positiveDelta,3)):(!R&&(this.negativeThreshold=-B*this.minZ,this.negativeDelta=-Math.pow(Math.abs(this.negativeThreshold/-this.minZ),1/3)),R&&(this.positiveThreshold=B*this.maxZ,this.positiveDelta=Math.pow(this.positiveThreshold/this.maxZ,1/3))),isNaN(this.positiveDelta)&&(this.positiveDelta=0),isNaN(this.negativeDelta)&&(this.negativeDelta=0),this.zValues)this.zValues[G].dom.setAttribute('display',0<=G&&G>=this.positiveThreshold||0>=G&&G<=this.negativeThreshold?'block':'none');this._shapeZoom&&(this.options.hasNegative?(this._shapeZoom.setHandleNeg(-Math.pow(this.negativeDelta,3),this.minZ),this._shapeZoom.showHandleNeg()):this._shapeZoom.hideHandleNeg(),this._shapeZoom.setHandlePos(Math.pow(this.positiveDelta,3),this.maxZ))}setDynamicColor(W){this.lineColors=W,this.styleHasChanged()}setNegative(W){this.options.hasNegative=W,W&&(this.negativeThreshold=0)}setColorTo(W,V,B,R){if(this.lineColors){var G={h:0,s:0,l:0};for(var U in G)G[U]=0<V?this.lineColors.fromPositive[U]+(this.lineColors.toPositive[U]-this.lineColors.fromPositive[U])*(V/R):this.lineColors.fromNegative[U]+(this.lineColors.toNegative[U]-this.lineColors.fromNegative[U])*(V/B);G.h/=360;var Z=O.hslToRgb(G.h,G.s,G.l);W.setAttribute('stroke','rgb('+Z.join()+')')}}getSymbolForLegend(){if(!this.lineForLegend){var W=document.createElementNS(this.graph.ns,'ellipse');W.setAttribute('cx',7),W.setAttribute('cy',0),W.setAttribute('rx',8),W.setAttribute('ry',3),W.setAttribute('cursor','pointer'),this.lineForLegend=W}return this.applyLineStyle(this.lineForLegend,this.maxZ),this.lineForLegend}applyLineStyle(W,V){W.setAttribute('stroke',this.getLineColor()),W.setAttribute('stroke-width',this.getLineWidth()+(this.isSelected()?2:0)),this.getLineDashArray()&&W.setAttribute('stroke-dasharray',this.getLineDashArray()),W.setAttribute('fill','none'),this.setColorTo(W,V===void 0?W.getAttribute('data-zvalue'):V,this.minZ,this.maxZ),this.hasStyleChanged(!1)}setShapeZoom(W){this._shapeZoom=W}}E.default=F})},function(u,A,S){var C,P,T;(function(E,X){P=[A,S(2),S(3),S(4)],C=X,T='function'==typeof C?C.apply(A,P):C,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X,Y,I){'use strict';function O(R){return R&&R.__esModule?R:{default:R}}Object.defineProperty(E,'__esModule',{value:!0});var F=O(X),W=function(G){if(G&&G.__esModule)return G;var U={};if(null!=G)for(var Z in G)Object.prototype.hasOwnProperty.call(G,Z)&&(U[Z]=G[Z]);return U.default=G,U}(Y),V=O(I);class B extends V.default{constructor(){super()}init(R,G){var U=this;if(this.graph=R,this.properties=G||{},this.handles=[],this.options=this.options||{},this.group=document.createElementNS(this.graph.ns,'g'),this._selected=!1,this.createDom(),this._dom&&(this._dom.jsGraphIsShape=this),this.group.jsGraphIsShape=this,this.classes=[],this.transforms=[],this._data.masker){var Z=document.createElementNS(this.graph.ns,'mask');this.maskingId=Math.random(),Z.setAttribute('id',this.maskingId),this.maskDomWrapper=document.createElementNS(this.graph.ns,'rect'),this.maskDomWrapper.setAttribute('fill','white'),Z.appendChild(this.maskDomWrapper);var K=this._dom.cloneNode();Z.appendChild(K),this.maskDom=K,this.graph.defs.appendChild(Z)}return this.group&&(this._dom&&!this.isHTML()&&this.group.appendChild(this._dom),this.group.addEventListener('mouseover',function(Q){U.handleMouseOver(Q)}),this.group.addEventListener('mouseout',function(Q){U.handleMouseOut(Q)}),this.group.addEventListener('mousedown',function(Q){U.graph.focus(),U.handleMouseDown(Q)}),this.group.addEventListener('click',function(Q){U.handleClick(Q)}),this.group.addEventListener('dblclick',function(Q){U.handleDblClick(Q)})),this.initImpl(),this.graph.emit('shapeNew',this),this}initImpl(){}getData(){return this._data}getType(){return this.type}kill(R){this._inDom&&this.graph.removeShapeFromDom(this),R||this.graph._removeShape(this),this.graph.stopElementMoving(this),this.graph.emit('shapeRemoved',this),this.emit('removed',this),this._inDom=!1}hide(){return this.hidden?this:(this.hidden=!0,this.isHTML()?this._dom.style.display='none':this.group.style.display='none',this)}isHidden(){return this.hidden}isVisible(){return!this.hidden}show(){return this.hidden?(this.hidden=!1,this.isHTML()?this._dom.style.display='initial':this.group.style.display='initial',this.redraw(),this):this}addClass(R){return this.classes=this.classes||[],-1==this.classes.indexOf(R)&&this.classes.push(R),this.makeClasses(),this}removeClass(R){return this.classes.splice(this.classes.indexOf(R),1),this.makeClasses(),this}makeClasses(){return this._dom&&this._dom.setAttribute('class',this.classes.join(' ')),this}changed(R,G){return R&&(this.graph.emit(R,this,G),this.emit(R,this,G)),this.emit('changed',this,G),this.graph.emit('shapeChanged',this,G),this}setEventReceptacle(){this.rectEvent||(this.rectEvent=document.createElementNS(this.graph.ns,'rect'),this.rectEvent.setAttribute('pointer-events','fill'),this.rectEvent.setAttribute('fill','transparent'),this.group.appendChild(this.rectEvent),this.rectEvent.jsGraphIsShape=this);var R=this.group.getBBox();this.rectEvent.setAttribute('x',R.x),this.rectEvent.setAttribute('y',R.y-10),this.rectEvent.setAttribute('width',R.width),this.rectEvent.setAttribute('height',R.height+20)}setSerie(R){return this.serie=R,this.xAxis=R.getXAxis(),this.yAxis=R.getYAxis(),this}getSerie(){return this.serie}autoAxes(){return this.xAxis||(this.xAxis=this.graph.getXAxis()),this.yAxis||(this.yAxis=this.graph.getYAxis()),this}setXAxis(R){return this.xAxis=R,this}setYAxis(R){this.yAxis=R}getXAxis(){return this.xAxis||this.autoAxes(),this.xAxis}getYAxis(){return this.yAxis||this.autoAxes(),this.yAxis}setLayer(R){return this.setProp('layer',R),this}getLayer(){var R=this.getProp('layer');return void 0===R?1:R}draw(R,G){return(!this._inDom||R)&&(this.appendToDom(),this._inDom=!0),this.makeLabels(),G||this.redraw(),this.applyStyle(),this}redraw(){return this.hidden?this:(this.position=this.applyPosition(),this.redrawImpl(),!this.position)?this:(this.updateLabels(),this._applyTransforms(),this)}redrawImpl(){}setProperties(R){this.properties=R,Array.isArray(this.properties.position)||(this.properties.position=[this.properties.position]);var G=this;for(var U=0,Z=this.properties.position.length;U<Z;U++){var K=F.default.check(this.properties.position[U],function(Q){return G.getRelativePosition(Q)});this.properties.position[U]=K}return this.emit('propertiesChanged'),this}getRelativePosition(R){var G;if(null!==(G=/position([0-9]*)/.exec(R)))return this.getPosition(G[1]);return null===(G=/labelPosition([0-9]*)/.exec(R))?void 0:this.getLabelPosition(G[1])}getProperties(){return this.properties}setProp(R,G,U){return this.properties=this.properties||{},this.properties[R]=this.properties[R]||[],this.properties[R][U||0]=G,this.emit('propertyChanged',R),this}getProp(R,G){return(this.properties[R]||[])[G||0]}getProps(R){return this.properties[R]||[]}addProp(R,G){this.properties[R]=this.properties[R]||[],this.properties[R].push(G)}resetProp(R){this.properties[R]=[]}setDom(R,G,U){!this._dom||U&&W.hasSavedAttribute(this._dom,R)||this._dom.setAttribute(R,G)}setDomGroup(R,G){this.group&&this.group.setAttribute(R,G)}setStrokeColor(R){return this.setProp('strokeColor',R),this.overwriteSavedProp('stroke',R),this.applySelectedStyle(),this}getStrokeColor(){return this.getProp('strokeColor')}setFillColor(R){return this.setProp('fillColor',R),this.overwriteSavedProp('fill',R),this.applySelectedStyle(),this}getFillColor(){return this.getProp('fillColor')}setFillOpacity(R){return this.setProp('fillOpacity',R),this.overwriteSavedProp('fill-opacity',R),this.applySelectedStyle(),this}setStrokeWidth(R){return this.setProp('strokeWidth',R),this.overwriteSavedProp('stroke-width',R),this.applySelectedStyle(),this}getStrokeWidth(){return this.getProp('strokeWidth')}setStrokeDasharray(R){return this.setProp('strokeDasharray',R),this.overwriteSavedProp('stroke-dasharray',R),this.applySelectedStyle(),this}setAttributes(R){return this.setProp('attributes',R),this}overwriteSavedProp(R,G){W.overwriteDomAttribute(this._dom,R,G)}addAttribute(R,G){var U={};return U[R]=G,this.addProp('attributes',U),this}addTransform(R,G){return this.addProp('transforms',{type:R,arguments:Array.isArray(G)?G:[G]}),this}resetTransforms(){return this.resetProp('transforms'),this}setLabelText(R,G){return this.setProp('labelText',R,G||0),this}setLabelData(R,G){return this.setProp('labelData',text,G||0),this}getLabelText(R,G){return this.getProp('labelText',G||0)}displayLabel(R){return this.setProp('labelVisible',!0,R||0),this}hideLabel(R){return this.setProp('labelVisible',!1,R||0),this}setLabelColor(R,G){return this.setProp('labelColor',R,G||0),this}setLabelFontSize(R,G){return this.setProp('labelFontSize',R,G||0),this}getLabelPosition(R){return this.getProp('labelPosition',R||0)}setLabelPosition(R,G){var Z=F.default.check(R,function(K){return U.getRelativePosition(K)}),U;return this.setProp('labelPosition',Z,G||0),this}setLabelAngle(R,G){return this.setProp('labelAngle',R,G||0),this}setLabelBaseline(R,G){return this.setProp('labelBaseline',R,G||0),this}setLabelAnchor(R,G){return this.setProp('labelAnchor',R,G||0),this}setLabelSize(R,G){return this.setProp('labelSize',R,G||0),this}setLabelStrokeColor(R,G){return this.setProp('labelStrokeColor',R,G||0),this}setLabelStrokeWidth(R,G){return this.setProp('labelStrokeWidth',R,G||0),this}setLabelBackgroundColor(R,G){return this.setProp('labelBackgroundColor',R,G||0),this}setLabelBackgroundOpacity(R,G){return this.setProp('labelBackgroundOpacity',R,G||0),this}applyGenericStyle(){this.setDom('fill',this.getProp('fillColor'),!0),this.setDom('fill-opacity',this.getProp('fillOpacity'),!0),this.setDom('stroke',this.getProp('strokeColor'),!0),this.setDom('stroke-width',this.getProp('strokeWidth'),!0),this.setDom('stroke-dasharray',this.getProp('strokeDasharray'),!0);var R=this.getProps('attributes');for(var G=0,U=R.length;G<U;G++)for(var Z in R[G])this.setDom(Z,'function'==typeof R[G][Z]?R[G][Z].call(this,Z):R[G][Z],!0);return this._applyTransforms(),this}applyStyle(){return this.applyGenericStyle()}calculatePosition(R){var G=R instanceof F.default?R:this.getPosition(R);return G?G&&G.compute?G.compute(this.graph,this.getXAxis(),this.getYAxis(),this.getSerie()):void this.graph.throw():void 0}getPosition(R){var G=this.getProp('position',R||0);return this.setProp('position',G=F.default.check(G),R),G}setPosition(R,G){var U=this,Z=F.default.check(R,function(K){return U.getRelativePosition(K)});return this.setProp('position',Z,G||0)}sortPositions(R){return this.getProps('position').sort(R),this}_applyTransforms(){var R=this.getProp('transforms'),G='';if(R&&(R=Array.isArray(R)?R:[R],0!=R.length)){for(var U=0;U<R.length;U++){switch(G+=R[U].type+'(',R[U].type){case'translate':let K=R[U].arguments[0].compute(this.graph,this.getXAxis(),this.getYAxis(),this.getSerie());G+=K.x,G+=', ',G+=K.y;break;case'rotate':if(G+=R[U].arguments[0],G+=', ',1==this.transforms[U].arguments.length){var Z=this.getPosition(0);G+=Z.x+', '+Z.y}else G+=F.default.getDeltaPx(R[U].arguments[1],this.getXAxis()).replace('px',''),G+=', ',G+=F.default.getDeltaPx(R[U].arguments[2],this.getYAxis()).replace('px','');}G+=') '}return this.setDomGroup('transform',G),this}}makeLabels(){this._labels=this._labels||[],this._labelsBackground=this._labelsBackground||[],this._labels.map(G=>{this.group.removeChild(G)}),this._labelsBackground.map(G=>{this.group.removeChild(G)}),this._labels=[],this._labelsBackground[R]=[];for(var R=0;void 0!==this.getProp('labelText',R);)this._labels[R]||(this._labels[R]=document.createElementNS(this.graph.ns,'text'),this._labels[R].setAttribute('data-label-i',R),this._labels[R].jsGraphIsShape=this,this._labelsBackground[R]=document.createElementNS(this.graph.ns,'rect'),this._labelsBackground[R].setAttribute('data-label-i',R),this._labelsBackground[R].jsGraphIsShape=this,this.group.appendChild(this._labelsBackground[R]),this.group.appendChild(this._labels[R]),this._labels[R].addEventListener('dblclick',G=>{G.stopPropagation(),this.labelDblClickListener(G)}),this._labelsBackground[R].addEventListener('dblclick',G=>{G.stopPropagation(),this.labelDblClickListener(G)})),R++;return this.updateLabels(),this}isLabelEditable(R){return this.getProp('labelEditable',R||0)}updateLabels(){this,this._labels=this._labels||[];for(var R=0,G=this._labels.length;R<G;R++)this._applyLabelData(R)}_applyLabelData(R){R=R||0;var G=this.getProp('labelVisible',R);if(!1===G)return this._labels[R].setAttribute('display','none'),void this._labelsBackground[R].setAttribute('display','none');this._labels[R].setAttribute('display','initial'),this._labelsBackground[R].setAttribute('display','initial');var U=this.calculatePosition(F.default.check(this.getProp('labelPosition',R)));if(!(isNaN(U.x)||isNaN(U.y))){'NaNpx'==U.x||isNaN(U.x)||'NaN'===U.x||!1===U.x||(this._labels[R].setAttribute('x',U.x),this._labels[R].setAttribute('y',U.y));var Z=this.getProp('labelAngle',R)||0;if(0!=Z){var K=this._labels[R].getAttribute('x'),Q=this._labels[R].getAttribute('y');this._labels[R].setAttribute('transform','rotate('+Z+' '+K+' '+Q+')')}let J=this.getProp('labelHTMLData',R)||{};for(var $ in console.log(J),J)this._labels[R].setAttribute($,J[$]),this._labelsBackground[R].setAttribute($,J[$]);this._labels[R].setAttribute('dominant-baseline',this.getProp('labelBaseline',R)||'no-change'),this._labels[R].textContent=this.getProp('labelText',R),this._labels[R].setAttribute('fill',this.getProp('labelColor',R)||'black'),this._labels[R].setAttribute('font-size',this.getProp('labelSize',R)+'px'||'12px'),this._labels[R].setAttribute('text-anchor',this._getLabelAnchor(R)),this._labels[R].setAttribute('stroke',this.getProp('labelStrokeColor',R)||'black'),this._labels[R].setAttribute('stroke-width',this.getProp('labelStrokeWidth',R)||'0px'),this._labels[R].setAttribute('stroke-location','outside');let ee=this._labels[R].getBBox();return this._labelsBackground[R].setAttribute('x',ee.x),this._labelsBackground[R].setAttribute('y',ee.y),this._labelsBackground[R].setAttribute('width',ee.width),this._labelsBackground[R].setAttribute('height',ee.height),this._labelsBackground[R].setAttribute('fill',this.getProp('labelBackgroundColor')||'transparent'),this._labelsBackground[R].setAttribute('fill-opacity',this.getProp('labelBackgroundOpacity')||1),this}}emptyLabels(){for(var R=0,G=this._labels.length;R<G;R++)this._labels[R].textContent='';return this}_getLabelAnchor(R){var G=this.getProp('labelAnchor',R);switch(G){case'middle':case'start':case'end':return G;break;case'right':return'end';break;case'left':return'start';break;default:return'start';}}isSelected(){return this._selectStatus||!1}hasHandles(R){return void 0!==R&&this.setProp('handles',R),!!this.getProp('handles')||!!this.getProp('statichandles')}addHandles(){if(!this.isLocked()){if(!this.handlesInDom){this.handlesInDom=!0;for(var R=1;R<this.handles.length;R++)this.handles[R]&&this.group.appendChild(this.handles[R])}return this}}removeHandles(){this.hideHandles(),this.handles=[]}hideHandles(){if(!this.handlesInDom)return this;for(var R=1;R<this.handles.length;R++)this.group.removeChild(this.handles[R]);return this.handlesInDom=!1,this}areHandlesInDom(){return this.handlesInDom}_select(R){return!!this.isSelectable()&&void(this.appendToDom(),this._selectStatus=!0,this.applySelectedStyle(),this.hasHandles()&&!this.hasStaticHandles()&&(this.addHandles(),this.setHandles()),!R&&this.graph.emit('shapeSelected',this))}applySelectedStyle(){if(this._selectStatus){var R=this.getSelectStyle(),G={};for(var U in R)G[U]='function'==typeof R[U]?R[U].call(this):R[U];W.saveDomAttributes(this._dom,G,'select')}}_unselect(R){this._selectStatus=!1,W.restoreDomAttributes(this._dom,'select'),this.hasHandles()&&!this.hasStaticHandles()&&this.hideHandles(),R||this.graph.emit('shapeUnselected',this)}getSelectStyle(){return this.selectStyle}setSelectStyle(R){return this.selectStyle=R,this.applySelectedStyle(),this}setStaticHandles(R){this.setProp('staticHandles',R)}hasStaticHandles(){return!!this.getProp('staticHandles')}_createHandles(R,G,U,Z){if(!(this.handles&&0<this.handles.length)){this;for(var K=1;K<=R;K++)(Q=>{var J=this,$=document.createElementNS(J.graph.ns,G);if($.jsGraphIsShape=!0,U)for(var ee in U)$.setAttribute(ee,U[ee]);$.addEventListener('mousedown',te=>{J.isResizable()&&(te.preventDefault(),te.stopPropagation(),J.graph.emit('beforeShapeResize',J),this.emit('beforeShapeResize'),!J.graph.prevent(!1)&&(J.resizing=!0,J.handleSelected=Q,J.handleMouseDown(te)))}),Z&&Z(J.handles[Q]),J.handles[Q]=$}).call(this,K);return this.handles}}createHandles(){}handleMouseDownImpl(){}handleMouseMoveImpl(){}handleMouseUpImpl(){}handleCreateImpl(){}handleMouseDown(R){if(!this.isLocked())return(this.isMovable()||this.isResizable())&&this.graph.elementMoving(this),this.getProp('selectOnMouseDown')&&this.graph.selectShape(this),this.isMovable()&&!this.resizing&&(this.graph.emit('beforeShapeMove',self),!this.graph.prevent(!1)&&(this.moving=!0)),this._mouseCoords=this.graph._getXY(R),this.handleMouseDownImpl(R,this._mouseCoords)}handleClick(R){return!!this.isSelectable()&&void(!R.shiftKey&&this.graph.unselectShapes(),this.getProp('selectOnClick')&&(console.log('sel'),this.graph.selectShape(this)))}handleMouseMove(R){if((this.resizing||this.moving)&&!this.isSelected()&&this.graph.selectShape(this),this.graph.emit('beforeShapeMouseMove',this),this.emit('beforeShapeMouseMove'),this.graph.prevent(!1)||!this._mouseCoords)return!1;var G=this.graph._getXY(R),U=this.getXAxis().getRelVal(G.x-this._mouseCoords.x),Z=this.getYAxis().getRelVal(G.y-this._mouseCoords.y);(0!=U||0!==Z)&&(this.preventUnselect=!0),this._mouseCoords=G;var K=this.handleMouseMoveImpl(R,U,Z,G.x-this._mouseCoords.x,G.y-this._mouseCoords.y);return K}handleMouseUp(R){return this.moving&&(this.graph.emit('shapeMoved',this),this.emit('shapeMoved')),(this.handleSelected||this.resize)&&(this.graph.emit('shapeResized',this),this.emit('shapeResized')),this.moving=!1,this.resizing=!1,this.handleSelected=!1,this.graph.elementMoving(!1),this.handleMouseUpImpl(R)}handleDblClick(){}handleMouseOver(){!this.getProp('highlightOnMouseOver')||this.moving||this.resizing||this.highlight(),this.graph.emit('shapeMouseOver',this)}handleMouseOut(){this.getProp('highlightOnMouseOver')&&this.unHighlight(),this.graph.emit('shapeMouseOut',this)}lock(){return this.setProp('locked',!0),this}unlock(){return this.setProp('locked',!1),this}isLocked(){return this.getProp('locked')||this.graph.shapesLocked}movable(){this.setProp('movable',!0)}unmovable(){return this.setProp('movable',!1),!1}isMovable(){return this.getProp('movable')}resizable(){this.setProp('resizable',!0)}unresizable(){this.setProp('resizable',!1)}isResizable(){return this.getProp('resizable')}selectable(){this.setProp('selectable',!0)}unselectable(){this.graph.unselectShape(this),this.setProp('selectable',!1)}isSelectable(){return this.getProp('selectable')}highlight(R,G){return R||(R=this.getHighlightAttributes()),G||(G='highlight'),W.saveDomAttributes(this._dom,R,G),this.highlightImpl(),this}unHighlight(R){return R||(R='highlight'),W.restoreDomAttributes(this._dom,R),this.unHighlightImpl(),this}highlightImpl(){}unHighlightImpl(){}getHighlightAttributes(){return this._highlightAttributes}setHighlightAttributes(R){return this._highlightAttributes=R,this}getMaskingID(){return this.maskingId}maskWith(R){const G=R.getMaskingID();G?this._dom.setAttribute('mask','url(#'+G+')'):this._dom.removeAttribute('mask')}updateMask(){var R={x:'min',y:'min'},G={x:'max',y:'max'}}labelDblClickListener(R){var G=parseInt(R.target.getAttribute('data-label-i')),U=this;if(!isNaN(G)&&this.isLabelEditable(G)){R.preventDefault(),R.stopPropagation();var Z=document.createElement('input');Z.setAttribute('type','text'),Z.setAttribute('value',U.getProp('labelText',G)),U.graph.wrapper.prepend(Z),Z.select(),W.setCSS(Z,{position:'absolute',marginTop:parseInt(R.target.getAttribute('y').replace('px',''))+this.graph.getPaddingTop()-10+'px',marginLeft:parseInt(R.target.getAttribute('x').replace('px',''))+this.graph.getPaddingLeft()-50+'px',textAlign:'center',width:'100px'});const K=U.getLabelText(G),Q=function(){U.setLabelText(Z.value,G),U._labels[G].textContent=Z.value;const J=Z.value;Z.remove(),Z.removeEventListener('blur',Q),Z=!1,U.changed('shapeLabelChanged',{previousValue:K,nextValue:J})};Z.addEventListener('blur',Q),Z.addEventListener('keyup',function(J){13===J.keyCode&&Q()}),Z.addEventListener('keypress',function(J){J.stopPropagation()}),Z.addEventListener('keydown',function(J){J.stopPropagation()}),Z.focus()}}appendToDom(){return this._forcedParentDom?this._forcedParentDom.appendChild(this.group):this.graph.appendShapeToDom(this),this}forceParentDom(R){return this._forcedParentDom=R,this}isHTML(){return!1}}B.prototype.computePosition=B.prototype.calculatePosition,B.prototype.showLabel=B.prototype.displayLabel,B.prototype.remove=B.prototype.kill,E.default=B})},function(u,A,S){var C,P,T;(function(E,X){P=[A,S(27)],C=X,T='function'==typeof C?C.apply(A,P):C,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var Y=function(F){return F&&F.__esModule?F:{default:F}}(X);class I extends Y.default{createDom(){this._dom=document.createElementNS(this.graph.ns,'path')}createHandles(){this._createHandles(2,'line',{'stroke-width':'3',stroke:'transparent','pointer-events':'stroke',cursor:'ew-resize'})}handleMouseMoveImpl(O,F){if(!this.isLocked()){if(this.moving)this.getPosition(0).deltaPosition('x',F,this.getXAxis()),this.getPosition(1).deltaPosition('x',F,this.getXAxis());else if(this.serie&&this.handleSelected){this.resizingPosition=1==this.handleSelected?this.getPosition(0):this.getPosition(1);var W=this.serie.searchClosestValue(this.getXAxis().getVal(this.graph._getXY(O).x-this.graph.getPaddingLeft()));if(!W)return;this.resizingPosition.x!=W.xMin&&(this.preventUnselect=!0),this.resizingPosition.x=W.xMin}else this.handleSelected&&(this.resizingPosition=1==this.handleSelected?this.getPosition(0):this.getPosition(1),this.resizingPosition.deltaPosition('x',F,this.getXAxis()));this.applyPosition()}}applyPosition(){if(this.serie){var O=this.computePosition(0),F=this.computePosition(1),W=Math.abs(O.x-F.x),V=Math.min(O.x,F.x);if(2>W||0>V+W||V>this.graph.getDrawingWidth())return this.setDom('d',''),!1;var B=this.serie.searchClosestValue(this.getPosition(0).x),R=this.serie.searchClosestValue(this.getPosition(1).x),ee=0,te=Number.MAX_VALUE,G,U,Z,K,Q,J,V,$;if(!B||!R)return!1;for(B.xBeforeIndex>R.xBeforeIndex&&(G=B,B=R,R=G),this.counter=0,U=B.dataIndex;U<=R.dataIndex;U++){for(this.currentLine='',K=U==B.dataIndex?B.xBeforeIndexArr:0,Q=U==R.dataIndex?R.xBeforeIndexArr:this.serie.data[U].length,J=0,K==Q&&Q++,Z=K;Z<=Q;Z+=2)V=this.serie.getX(this.serie.data[U][Z+0]),$=this.serie.getY(this.serie.data[U][Z+1]),ee=Math.max(this.serie.data[U][Z+1],ee),te=Math.min(this.serie.data[U][Z+1],te),Z==K&&(this.firstX=V,this.firstY=$),this.currentLine+=0<J?' L '+V+' '+$+' ':' M '+V+' '+$+' ',J++;if(this.lastX=V,this.lastY=$,!this.firstX||!this.firstY||!this.lastX||!this.lastY)return;this.currentLine+=' V '+this.getYAxis().getPx(0)+' H '+this.firstX+' z',this.setDom('d',this.currentLine)}return this.maxY=this.serie.getY(ee),this.setHandles(),this.changed(),!0}}setHandles(){if(this.firstX){var O=this.computePosition(0),F=this.computePosition(1);O.x<F.x?(this.handles[1].setAttribute('x1',this.firstX),this.handles[1].setAttribute('x2',this.firstX),this.handles[2].setAttribute('x1',this.lastX),this.handles[2].setAttribute('x2',this.lastX)):(this.handles[1].setAttribute('x1',this.lastX),this.handles[1].setAttribute('x2',this.lastX),this.handles[2].setAttribute('x1',this.firstX),this.handles[2].setAttribute('x2',this.firstX)),this.handles[1].setAttribute('y1',this.getYAxis().getMaxPx()),this.handles[1].setAttribute('y2',this.serie.getY(0)),this.handles[2].setAttribute('y1',this.getYAxis().getMaxPx()),this.handles[2].setAttribute('y2',this.serie.getY(0))}}}E.default=I})},function(u,A,S){var C,P,T;(function(E,X){P=[A,S(30)],C=X,T='function'==typeof C?C.apply(A,P):C,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var Y=function(F){return F&&F.__esModule?F:{default:F}}(X);class I extends Y.default{constructor(O){super(O)}createDom(){this._dom=document.createElementNS(this.graph.ns,'line'),this._dom.setAttribute('marker-end','url(#arrow'+this.graph._creation+')'),this.createHandles(this.nbHandles,'rect',{transform:'translate(-3 -3)',width:6,height:6,stroke:'black',fill:'white',cursor:'nwse-resize'}),this.setStrokeColor('black'),this.setStrokeWidth(1)}}E.default=I})},function(u,A,S){var C,P,T;(function(E,X){P=[A,S(27)],C=X,T='function'==typeof C?C.apply(A,P):C,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var Y=function(F){return F&&F.__esModule?F:{default:F}}(X);class I extends Y.default{constructor(O,F){super(O,F)}createDom(){this._dom=document.createElementNS(this.graph.ns,'line'),this.setStrokeColor('black'),this.setStrokeWidth(1)}createHandles(){this._createHandles(2,'rect',{transform:'translate(-3 -3)',width:6,height:6,stroke:'black',fill:'white',cursor:'nwse-resize'})}applyPosition(){var O=this.calculatePosition(0),F=this.calculatePosition(1);if(O&&O.x&&O.y)return this.setDom('x2',O.x),this.setDom('y2',O.y),this.setDom('y1',F.y),this.setDom('x1',F.x),this.currentPos2x=F.x,this.currentPos2y=F.y,this.currentPos1x=O.x,this.currentPos1y=O.y,!0}handleMouseMoveImpl(O,F,W){if(!this.isLocked()){var V=this.getPosition(0),B=this.getPosition(1),R;if(1==this.handleSelected?R=V:2==this.handleSelected&&(R=B),R&&(!this._data.vertical&&R.deltaPosition('x',F,this.getXAxis()),!this._data.horizontal&&R.deltaPosition('y',W,this.getYAxis())),this.moving&&(V.x&&V.deltaPosition('x',F,this.getXAxis()),V.y&&V.deltaPosition('y',W,this.getYAxis()),B.x&&B.deltaPosition('x',F,this.getXAxis()),B.y&&B.deltaPosition('y',W,this.getYAxis())),this._data.forcedCoords){var G=this._data.forcedCoords;void 0!==G.y&&('function'==typeof G.y?B.y=V.y=G.y(this):(B.y=G.y,V.y=G.y)),void 0!==G.x&&('function'==typeof G.x?B.x=V.x=G.x(this):(B.x=G.x,V.x=G.x))}return this.rectEvent&&this.setEventReceptacle(),this.redraw(),this.changed(),this.setHandles(),!0}}setHandles(){!this.areHandlesInDom()||isNaN(this.currentPos1x)||(this.handles[1].setAttribute('x',this.currentPos1x),this.handles[1].setAttribute('y',this.currentPos1y),this.handles[2].setAttribute('x',this.currentPos2x),this.handles[2].setAttribute('y',this.currentPos2y))}setEventReceptacle(){this.currentPos1x&&(!this.rectEvent&&(this.rectEvent=document.createElementNS(this.graph.ns,'line'),this.rectEvent.setAttribute('pointer-events','stroke'),this.rectEvent.setAttribute('stroke','transparent'),this.rectEvent.jsGraphIsShape=this,this.group.appendChild(this.rectEvent)),this.rectEvent.setAttribute('x1',this.currentPos1x),this.rectEvent.setAttribute('y1',this.currentPos1y),this.rectEvent.setAttribute('x2',this.currentPos2x),this.rectEvent.setAttribute('y2',this.currentPos2y),this.rectEvent.setAttribute('stroke-width',this.getProp('strokeWidth')+2))}}E.default=I})},function(u,A,S){var C,P,T;(function(E,X){P=[A,S(27)],C=X,T='function'==typeof C?C.apply(A,P):C,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var Y=function(F){return F&&F.__esModule?F:{default:F}}(X);class I extends Y.default{constructor(O,F){super(O,F)}createDom(){return!1}applyPosition(){return!0}}E.default=I})},function(u,A,S){var C,P,T;(function(E,X){P=[A,S(27)],C=X,T='function'==typeof C?C.apply(A,P):C,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var Y=function(F){return F&&F.__esModule?F:{default:F}}(X);class I extends Y.default{constructor(O,F){super(O,F)}createDom(){this._dom=document.createElementNS(this.graph.ns,'path'),this.getStrokeColor()||this.setStrokeColor('black'),this.getStrokeWidth()==void 0&&this.setStrokeWidth(1)}createHandles(){}setPointsPx(O){return this.setProp('pxPoints',O),this}applyPosition(){let F=this.computePosition(0),O;if(O=this.getProp('pxPoints'))O=' M '+F.x+' '+F.y+' '+O,this.setDom('d',O);else if(this.points){var W,V;this.serie?(W=this.serie.getXAxis(),V=this.serie.getYAxis()):this.xAxis&&this.yAxis&&(W=this.xAxis,V=this.yAxis),this.setDom('d','M '+this.points.map(function(B){return W.getPx(B[0])+', '+V.getPx(B[1])}).join(' L '))}return this.changed(),!0}}E.default=I})},function(u,A,S){var C,P,T;(function(E,X){P=[A,S(27),S(2)],C=X,T='function'==typeof C?C.apply(A,P):C,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X,Y){'use strict';function I(W){return W&&W.__esModule?W:{default:W}}Object.defineProperty(E,'__esModule',{value:!0});var O=I(X);I(Y);class F extends O.default{constructor(W,V){super(W,V),this.nbHandles=2}createDom(){this._dom=document.createElementNS(this.graph.ns,'path'),this._dom.setAttribute('pointer-events','stroke')}initImpl(){this.setFillColor('transparent'),this.setStrokeColor('black')}createHandles(){this._createHandles(2,'rect',{transform:'translate(-3 -3)',width:6,height:6,stroke:'black',fill:'white'}),this.handles[1].setAttribute('fill','red')}xor(W,V){return W&&!V||!W&&V}applyPosition(){let G=this.getAxis(),U=[],Z='',K=this.getProp('baseLine',0)||300,W,V,B,R,Q;if(!this.serie)throw'No serie exists for this shape';;let J=this.getPosition(0),$=this.getPosition(1);if(J.x<this.serie.getXAxis().getCurrentMin()&&$.x<this.serie.getXAxis().getCurrentMin()||J.x>this.serie.getXAxis().getCurrentMax()&&$.x>this.serie.getXAxis().getCurrentMax())return this.setDom('d',''),this.emptyLabels(),!1;this.showLabel(0);let ee=0,ie=this.serie.getWaveform(),te;if(ie){let ae=ie.getIndexFromX(J[G],!0,Math.floor),re=ie.getIndexFromX($[G],!0,Math.ceil),ne=!1,se;ae==re&&('aggregate'==ie.getReductionType()?re+=4:re++),re<ae&&(se=ae,ae=re,re=se,ne=!0);let oe,le,de,pe;ie.getDataInUse();let ge,ue;for('aggregate'==ie.getReductionType(),(!ie.getXMonotoneousAscending()||0)&&(ie.getXMonotoneousAscending()||1)?(te=ae,ge=!1,ue=1):(te=re,ge=!0,ue=-1),console.log(ae,re);ge?te>=ae:te<=re;te+=ue){if(B=ie.getX(te,!0),R=ie.getY(te,!0),W=this.serie.getX(B),V=this.serie.getY(R),ee+=ie.getY(te,!0),oe||(oe=W,le=V,ie.getX(te),ie.getY(te)),void 0==de){de=W,pe=V,ie.getX(te),ie.getY(te);continue}W!=de||V!=pe,de=W,pe=V,U.push([W,V,ee])}de=!1,pe=!1,0==ee&&(ee=1),this._sumVal=ie.integrate(J.x,$.x),Q=this.ratio?this.ratio*(this.sumVal/ee):200/ee;let ce;if(0!=U.length){for(var he=0,xe=U.length;he<xe;he++){if(ce=K-U[he][2]*Q,0<he&&(U[he-1][2]>ee/2&&U[he][2]<=ee/2||U[he-1][2]<ee/2&&U[he][2]>=ee/2)){let me=K-(U[he-1][2]+U[he][2])/2*Q;this.setPosition({x:U[he][0]+'px',y:me+'px'},3),this.setLabelPosition(this.getPosition(3),0)}Z+=' L '+U[he][0]+', '+ce+' ',this.lastPointX=U[he][0],this.lastPointY=ce}return this.points=U,this._sum=ee,Z=this.serie.isFlipped()?' M '+K+', '+oe+' '+Z:' M '+oe+', '+K+' '+Z,this.firstPointX=oe,this.firstPointY=K,this.setDom('d',Z),this.firstX=oe,this.firstY=le,this.ratioLabel&&this.updateIntegralValue(this.ratioLabel)||this.updateLabels(),this.changed(),this.handleCondition=!this.xor(-1==ue,ne),this.setHandles(),this.updateIntegralValue(),!0}}}updateIntegralValue(W=this.ratioLabel){W&&(this.ratioLabel=W),this.setLabelText(W?(Math.round(100*this.sumVal*W)/100).toPrecision(3):'N/A',0),this.updateLabels()}getAxis(){return this._data.axis||'x'}set ratio(W){this._ratio=W}get ratio(){return this._ratio}get sum(){return this._sum}get sumVal(){return this._sumVal}selectStyle(){this.setDom('stroke-width','2px')}selectHandles(){}setHandles(){void 0!=this.points&&this.isSelected()&&(this.addHandles(),this.handleCondition?(this.handles[1].setAttribute('x',this.firstPointX),this.handles[1].setAttribute('y',this.firstPointY),this.handles[2].setAttribute('x',this.lastPointX),this.handles[2].setAttribute('y',this.lastPointY)):(this.handles[2].setAttribute('x',this.firstPointX),this.handles[2].setAttribute('y',this.firstPointY),this.handles[1].setAttribute('x',this.lastPointX),this.handles[1].setAttribute('y',this.lastPointY)))}handleMouseMoveImpl(W,V){if(!this.isLocked()){var B=this.getPosition(0),R=this.getPosition(1),G;return 1==this.handleSelected?G=B:2==this.handleSelected&&(G=R),G&&!this._data.vertical&&G.deltaPosition('x',V,this.getXAxis()),this.moving&&(B.x&&B.deltaPosition('x',V,this.getXAxis()),R.x&&R.deltaPosition('x',V,this.getXAxis())),this.rectEvent&&this.setEventReceptacle(),this.redraw(),this.changed(),!0}}}E.default=F})},function(u,A,S){var C,P,T;(function(E,X){P=[A,S(35)],C=X,T='function'==typeof C?C.apply(A,P):C,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var Y=function(F){return F&&F.__esModule?F:{default:F}}(X);class I extends Y.default{constructor(O,F){super(O,F),this.nbHandles=4}createDom(){this._dom=document.createElementNS(this.graph.ns,'rect'),this._dom.element=this,this.createHandles(this.nbHandles,'rect',{transform:'translate(-3 -3)',width:6,height:6,stroke:'black',fill:'white',cursor:'nwse-resize'})}redrawImpl(){this.setPosition(),this.setHandles(),this.setBindableToDom(this._dom)}}E.default=I})},function(u,A,S){var C,P,T;(function(E,X){P=[A,S(27),S(3)],C=X,T='function'==typeof C?C.apply(A,P):C,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X,Y){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var I=function(V){return V&&V.__esModule?V:{default:V}}(X),O=function(V){if(V&&V.__esModule)return V;var B={};if(null!=V)for(var R in V)Object.prototype.hasOwnProperty.call(V,R)&&(B[R]=V[R]);return B.default=V,B}(Y);class F extends I.default{constructor(W,V){super(W,V)}createDom(){return this,this._dom=document.createElementNS(this.graph.ns,'rect'),this.setStrokeColor('black'),this.setStrokeWidth(1),this.setFillColor('transparent'),this}createHandles(){if(this.hasHandles()){var W=this.getProp('handles');switch('object'!=typeof W&&(W={}),W.type||(W.type='corners'),W.type){case'sides':O.extend(W,{sides:{top:!0,bottom:!0,left:!0,right:!0}});var V=0;for(var B in W.sides)W.sides[B]&&V++;this._createHandles(V,'g').map(function(R){var G=document.createElementNS(self.graph.ns,'rect');G.setAttribute('x','-3'),G.setAttribute('width','6'),G.setAttribute('y','-6'),G.setAttribute('height','12'),G.setAttribute('stroke','black'),G.setAttribute('fill','white'),G.setAttribute('cursor','pointer'),R.appendChild(G)});var V=1;for(var B in W.sides)W.sides[B]&&(this.handles[B]=this['handle'+V],this.sides[V]=B,V++);break;case'corners':this._createHandles(4,'rect',{transform:'translate(-3 -3)',width:6,height:6,stroke:'black',fill:'white'}),this.handles&&(this.handles[2].setAttribute('cursor','nesw-resize'),this.handles[4].setAttribute('cursor','nesw-resize'),this.handles[1].setAttribute('cursor','nwse-resize'),this.handles[3].setAttribute('cursor','nwse-resize'));}return this}}applyPosition(){var W=this.computePosition(0),V=this.computePosition(1),B,R,G,U;return W.x<V.x?(B=W.x,G=V.x-W.x):(B=V.x,G=W.x-V.x),W.y<V.y?(R=W.y,U=V.y-W.y):(R=V.y,U=W.y-V.y),this.currentX=B,this.currentY=R,this.currentW=G,this.currentH=U,isNaN(B)||isNaN(R)||!1===B||!1===R?!1:(this.setDom('width',G),this.setDom('height',U),this.setDom('x',B),this.setDom('y',R),this.setHandles(),this.updateMask(),!0)}handleMouseMoveImpl(W,V,B){var R=this.getProp('handles');if(this.moving||this.handleSelected){var G=this.getPosition(0),U=this.getPosition(1),Z=this.getXAxis().isFlipped(),K=this.getYAxis().isFlipped(),Q=G.x,J=G.y,$=U.x,ee=U.y;if(this.moving)G.deltaPosition('x',V,this.getXAxis()),G.deltaPosition('y',B,this.getYAxis()),U.deltaPosition('x',V,this.getXAxis()),U.deltaPosition('y',B,this.getYAxis());else switch(R.type){case'sides':switch(this.sides[this.handleSelected]){case'left':G.deltaPosition('x',V,this.getXAxis());break;case'right':U.deltaPosition('x',V,this.getXAxis());break;case'top':G.deltaPosition('y',B,this.getYAxis());break;case'bottom':U.deltaPosition('y',B,this.getYAxis());}break;case'corners':default:1==this.handleSelected?(G.deltaPosition('x',V,this.getXAxis()),G.deltaPosition('y',B,this.getYAxis())):2==this.handleSelected?(U.deltaPosition('x',V,this.getXAxis()),G.deltaPosition('y',B,this.getYAxis())):3==this.handleSelected?(U.deltaPosition('y',B,this.getYAxis()),U.deltaPosition('x',V,this.getXAxis())):4==this.handleSelected&&(G.deltaPosition('x',V,this.getXAxis()),U.deltaPosition('y',B,this.getYAxis()));}return this.redraw(),this.changed(),this.setHandles(),!0}}setHandles(){if(!this.isLocked()&&(this.isSelectable()||this._staticHandles)&&this.handlesInDom){var W=this.computePosition(0),V=this.computePosition(1),B=this.getProp('handles');switch(B.type){case'sides':this.handles.left&&this.handles.left.setAttribute('transform','translate('+this.currentX+' '+(this.currentY+this.currentH/2)+')'),this.handles.right&&this.handles.right.setAttribute('transform','translate( '+(this.currentX+this.currentW)+' '+(this.currentY+this.currentH/2)+')'),this.handles.top&&this.handles.top.setAttribute('transform','translate( '+(this.currentX+this.currentW/2)+' '+this.currentY+')'),this.handles.bottom&&this.handles.bottom.setAttribute('transform','translate( '+(this.currentX+this.currentW/2)+' '+(this.currentY+this.currentH)+')');break;case'corners':default:this.handles[1].setAttribute('x',W.x),this.handles[1].setAttribute('y',W.y),this.handles[2].setAttribute('x',V.x),this.handles[2].setAttribute('y',W.y),this.handles[3].setAttribute('x',V.x),this.handles[3].setAttribute('y',V.y),this.handles[4].setAttribute('x',W.x),this.handles[4].setAttribute('y',V.y);}}}}E.default=F})},function(u,A,S){var C,P,T;(function(E,X){P=[A,S(27)],C=X,T='function'==typeof C?C.apply(A,P):C,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var Y=function(F){return F&&F.__esModule?F:{default:F}}(X);class I extends Y.default{constructor(O,F){super(O,F),this.nbHandles=1}get width(){return this.options.width||10}set width(O=10){this.options.width=O}createDom(){this._dom=document.createElementNS(this.graph.ns,'path'),this._dom.setAttribute('d','M -'+this.width/2+' 0 h '+this.width+' m -'+this.width/2+' -'+this.width/2+' v '+this.width+'')}createHandles(){this._createHandles(this.nbHandles,'rect',{transform:'translate(-3 -3)',width:6,height:6,stroke:'black',fill:'white',cursor:'nwse-resize'})}applyPosition(){var O=this.calculatePosition(0);if(O&&O.x&&O.y)return this.setDom('transform','translate( '+O.x+', '+O.y+')'),this.currentPos1x=O.x,this.currentPos1y=O.y,!0}redrawImpl(){this.setHandles()}handleCreateImpl(){}handleMouseDownImpl(){return this.moving=!0,!0}handleMouseUpImpl(){return this.triggerChange(),!0}handleMouseMoveImpl(O,F,W){if(!this.isLocked()){var V=this.getFromData('pos');return this.moving&&(V.x=this.graph.deltaPosition(V.x,F,this.getXAxis()),V.y=this.graph.deltaPosition(V.y,W,this.getYAxis())),this.redrawImpl(),!0}}createHandles(){this._createHandles(1,'rect',{transform:'translate(-3 -3)',width:6,height:6,stroke:'black',fill:'white',cursor:'nwse-resize'})}setHandles(){!this.areHandlesInDom()||isNaN(this.currentPos1x)||(this.handles[1].setAttribute('x',this.currentPos1x),this.handles[1].setAttribute('y',this.currentPos1y))}selectStyle(){this.setDom('stroke','red'),this.setDom('stroke-width','2')}}E.default=I})},function(u,A,S){var C,P,T;(function(E,X){P=[A,S(30)],C=X,T='function'==typeof C?C.apply(A,P):C,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var Y=function(F){return F&&F.__esModule?F:{default:F}}(X);class I extends Y.default{constructor(O){super(O),this.lineHeight=6}createDom(){this._dom=document.createElementNS(this.graph.ns,'line'),this.line1=document.createElementNS(this.graph.ns,'line'),this.line2=document.createElementNS(this.graph.ns,'line'),this.line3=document.createElementNS(this.graph.ns,'line'),this.rectBoundary=document.createElementNS(this.graph.ns,'path'),this.rectBoundary.setAttribute('fill','transparent'),this.rectBoundary.setAttribute('stroke','none'),this.rectBoundary.setAttribute('pointer-events','fill'),this.rectBoundary.jsGraphIsShape=!0,this.group.appendChild(this.rectBoundary),this.group.appendChild(this.line1),this.group.appendChild(this.line2),this.group.appendChild(this.line3),this._dom.element=this}createHandles(){this._createHandles(3,'rect',{transform:'translate(-3 -3)',width:6,height:6,stroke:'black',fill:'white',cursor:'nwse-resize'})}redrawImpl(){this.line1.setAttribute('stroke',this.getStrokeColor()),this.line2.setAttribute('stroke',this.getStrokeColor()),this.line3.setAttribute('stroke',this.getStrokeColor()),this.line1.setAttribute('stroke-width',this.getStrokeWidth()),this.line2.setAttribute('stroke-width',this.getStrokeWidth()),this.line3.setAttribute('stroke-width',this.getStrokeWidth()),this.setHandles(),this.redrawLines()}redrawLines(){var O=this.computePosition(0),F=this.computePosition(1),W=this.computePosition(2);if(O.x&&F.x&&W.x&&this.posYPx){var V=this.lineHeight;this.rectBoundary.setAttribute('d','M '+O.x+' '+(this.posYPx-V)+' v '+2*V+' H '+F.x+' v '+-2*V+'z'),this.line1.setAttribute('x1',O.x),this.line1.setAttribute('x2',O.x),this.line2.setAttribute('x1',F.x),this.line2.setAttribute('x2',F.x),this.line3.setAttribute('x1',W.x),this.line3.setAttribute('x2',W.x),this._dom.setAttribute('x1',O.x),this._dom.setAttribute('x2',F.x),this.redrawY(V)}return this}redrawY(){if(!this.posYPx)return this;var O=this.lineHeight;return this.line1.setAttribute('y1',this.posYPx-O),this.line1.setAttribute('y2',this.posYPx+O),this.line2.setAttribute('y1',this.posYPx-O),this.line2.setAttribute('y2',this.posYPx+O),this.line3.setAttribute('y1',this.posYPx-O),this.line3.setAttribute('y2',this.posYPx+O),this._dom.setAttribute('y1',this.posYPx),this._dom.setAttribute('y2',this.posYPx),this}setHandles(){if(this.posYPx){var O=this.computePosition(0),F=this.computePosition(1),W=this.computePosition(2);O.x&&F.x&&W.x&&(this.handles[1].setAttribute('x',O.x),this.handles[1].setAttribute('y',this.posYPx),this.handles[2].setAttribute('x',F.x),this.handles[2].setAttribute('y',this.posYPx),this.handles[3].setAttribute('x',W.x),this.handles[3].setAttribute('y',this.posYPx))}}setY(O){return this.posYPx=O,this}setLineHeight(O){this.lineHeihgt=O}handleMouseMoveImpl(O,F){if(!this.isLocked()){var W=this.getPosition(0),V=this.getPosition(1),B=this.getPosition(2);switch(this.handleSelected){case 1:W.deltaPosition('x',F,this.getXAxis()),(Math.abs(B.x-V.x)>Math.abs(V.x-W.x)||Math.abs(B.x-W.x)>Math.abs(V.x-W.x))&&(B.x=W.x+0.1*(V.x-W.x));break;case 2:V.deltaPosition('x',F,this.getXAxis()),(Math.abs(B.x-V.x)>Math.abs(V.x-W.x)||Math.abs(B.x-W.x)>Math.abs(V.x-W.x))&&(B.x=V.x+0.1*(W.x-V.x));break;case 3:if(B.deltaPosition('x',F,this.getXAxis()),Math.abs(B.x-V.x)>Math.abs(V.x-W.x)||Math.abs(B.x-W.x)>Math.abs(V.x-W.x))return;}this.setLabelPosition({y:this.getLabelPosition(0).y,x:B.x}),this.updateLabels(),this.redrawLines(),this.setHandles()}}applyPosition(){return this.redrawLines(),!0}}E.default=I})},function(u,A,S){var C,P,T;(function(E,X){P=[A,S(3),S(27)],C=X,T='function'==typeof C?C.apply(A,P):C,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X,Y){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var I=function(W){return W&&W.__esModule?W:{default:W}}(Y);class O extends I.default{constructor(F,W){super(F,W)}createDom(){this._dom=document.createElement('div'),this._dom.setAttribute('style','position: absolute');let F=document.createElement('div');this._dom.appendChild(F),this.div=F}createHandles(){}setHeight(F){this.setProp('height',F)}setWidth(F){this.setProp('width',F)}setContent(F){this.setProp('content',F)}setRenderer(F){this._renderer=F}redraw(){this._renderer?this._renderer(this.div):this.div.innerHTML=this.getProp('content'),super.redraw(...arguments)}applyPosition(){var F=this.calculatePosition(0);if(F&&(0,X.isNumeric)(F.x)&&(0,X.isNumeric)(F.y))return this._dom.style.left=F.x+'px',this._dom.style.top=F.y+'px',this.currentPosX=F.x,this.currentPosY=F.y,!0}handleMouseMoveImpl(){return!0}setHandles(){this.areHandlesInDom()&&isNaN(this.currentPos1x)}isHTML(){return!0}}E.default=O})},function(u,A,S){var C,P,T;(function(E,X){P=[A,S(4)],C=X,T='function'==typeof C?C.apply(A,P):C,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var Y=function(F){return F&&F.__esModule?F:{default:F}}(X);class I extends Y.default{static defaults(){return{}}constructor(O){super(...arguments),this.options=O}init(O){this.graph=O}onMouseDown(){}onMouseUp(){}onMouseMove(){}}E.default=I})},function(u,A,S){var C,P,T;(function(E,X){P=[A,S(39)],C=X,T='function'==typeof C?C.apply(A,P):C,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var Y=function(F){return F&&F.__esModule?F:{default:F}}(X);class I extends Y.default{static defaults(){return{dragX:!0,dragY:!0,persistanceX:!1,persistanceY:!1}}init(O){this.graph=O,this.time=null,this.totaltime=2000}onMouseDown(O,F,W){return this._draggingX=F,this._draggingY=W,this._lastDraggingX=this._draggingX,this._lastDraggingY=this._draggingY,this.stopAnimation=!0,this.moved=!1,!0}onMouseMove(O,F,W){var V=F-this._draggingX,B=W-this._draggingY;this.options.dragX&&O._applyToAxes(function(R){R.setCurrentMin(R.getVal(R.getMinPx()-V)),R.setCurrentMax(R.getVal(R.getMaxPx()-V))},!1,!0,!1),this.options.dragY&&O._applyToAxes(function(R){R.setCurrentMin(R.getVal(R.getMinPx()-B)),R.setCurrentMax(R.getVal(R.getMaxPx()-B))},!1,!1,!0),this._lastDraggingX=this._draggingX,this._lastDraggingY=this._draggingY,this._draggingX=F,this._draggingY=W,this.moved=!0,this.time=Date.now(),this.emit('dragging'),O.draw(!0)}onMouseUp(O,F,W){var V=Date.now()-this.time;return F==this._lastDraggingX||W==this._lastDraggingY?void(this.moved&&this.emit('dragged')):(this.speedX=(F-this._lastDraggingX)/V,this.speedY=(W-this._lastDraggingY)/V,isNaN(this.speedX)||isNaN(this.speedY)?void this.emit('dragged'):void(O._applyToAxes(function(B){B._pluginDragMin=B.getCurrentMin(),B._pluginDragMax=B.getCurrentMax()},!1,!0,!0),this.stopAnimation=!1,this.accelerationX=-this.speedX/this.totaltime,this.accelerationY=-this.speedY/this.totaltime,this.options.persistanceX||this.options.persistanceY?this._persistanceMove(O):this.emit('dragged')))}_persistanceMove(O){var F=this;return F.stopAnimation?void F.emit('dragged'):void window.requestAnimationFrame(function(){var W=Date.now()-F.time,V=(0.5*F.accelerationX*W+F.speedX)*W,B=(0.5*F.accelerationY*W+F.speedY)*W;F.options.persistanceX&&O._applyToAxes(function(R){R.setCurrentMin(-R.getRelVal(V)+R._pluginDragMin),R.setCurrentMax(-R.getRelVal(V)+R._pluginDragMax),R.cacheCurrentMin(),R.cacheCurrentMax(),R.cacheInterval()},!1,!0,!1),F.options.persistanceY&&O._applyToAxes(function(R){R.setCurrentMin(-R.getRelVal(B)+R._pluginDragMin),R.setCurrentMax(-R.getRelVal(B)+R._pluginDragMax),R.cacheCurrentMin(),R.cacheCurrentMax(),R.cacheInterval()},!1,!1,!0),O.draw(),W<F.totaltime?(F.emit('dragging'),F._persistanceMove(O)):F.emit('dragged')})}}E.default=I})},function(u,A,S){var C,P,T;(function(E,X){P=[A,S(39),S(3)],C=X,T='function'==typeof C?C.apply(A,P):C,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X,Y){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var I=function(V){return V&&V.__esModule?V:{default:V}}(X),O=function(V){if(V&&V.__esModule)return V;var B={};if(null!=V)for(var R in V)Object.prototype.hasOwnProperty.call(V,R)&&(B[R]=V[R]);return B.default=V,B}(Y);class F extends I.default{constructor(){super(...arguments)}init(W,V){super.init(W,V),this.shapeType=V.type}setShape(W){this.shapeInfo.shapeType=W}onMouseDown(W,V,B,R){if(this.shapeType||this.options.url){console.log('down');var G=this,U=this,Z,K;this.count=this.count||0,V-=W.getPaddingLeft(),B-=W.getPaddingTop(),Z=W.getXAxis().getVal(V),K=W.getYAxis().getVal(B);var Q={position:[{x:Z,y:K},{x:Z,y:K}],onChange:function(ee){W.triggerEvent('onAnnotationChange',ee)},locked:!1,selectable:!0,resizable:!0,movable:!0};let J=this.options.properties;if(O.extend(!0,Q,this.options),this.emit('beforeNewShape',R,Q),!this.graph.prevent(!1)){var $=W.newShape(Q.type,Q,!1,J);this.emit('createdShape',R,$),$&&(G.currentShape=$,G.currentShapeEvent=R),W.once('mouseUp',()=>{console.log(this.currentShape),this.currentShape||G.emit('newShape',R,$)})}}}onMouseMove(W,V,B,R){if(this.currentShape){console.log('mv'),this.count++;var G=this.currentShape;this.currentShape=!1,W.selectedSerie&&!G.serie&&G.setSerie(W.selectedSerie),G.resizing=!0,G.options&&G.options.onCreate&&G.options.onCreate.call(G),G.draw(),W.selectShape(G),G.handleMouseDown(this.currentShapeEvent,!0),G.handleSelected=this.options.handleSelected||1,G.handleMouseMove(R,!0)}}onMouseUp(){this.currentShape&&(this.currentShape.kill(),this.currentShape=!1)}}E.default=F})},function(u,A,S){var C,P,T;(function(E,X){P=[A,S(3),S(39)],C=X,T='function'==typeof C?C.apply(A,P):C,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X,Y){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var I=function(V){if(V&&V.__esModule)return V;var B={};if(null!=V)for(var R in V)Object.prototype.hasOwnProperty.call(V,R)&&(B[R]=V[R]);return B.default=V,B}(X),O=function(V){return V&&V.__esModule?V:{default:V}}(Y);class F extends O.default{constructor(){super(...arguments)}init(W){this._path=document.createElementNS(W.ns,'path'),I.setAttributeTo(this._path,{display:'none',fill:'rgba(0,0,0,0.1)',stroke:'rgba(0,0,0,1)','shape-rendering':'crispEdges',x:0,y:0,height:0,width:0,d:''}),this.graph=W,W.dom.appendChild(this._path)}setSerie(W){this.serie=W}onMouseDown(W,V,B){this.serie&&(this.path='M '+V+' '+B+' ',this.currentX=V,this.currentY=B,this.xs=[this.serie.getXAxis().getVal(V-W.getPaddingLeft())],this.ys=[this.serie.getYAxis().getVal(B-W.getPaddingTop())],this._path.setAttribute('d',''),this._path.setAttribute('display','block'))}onMouseMove(W,V,B){25<Math.pow(V-this.currentX,2)+Math.pow(B-this.currentY,2)&&(this.path+=' L '+V+' '+B+' ',this.currentX=V,this.currentY=B,this.xs.push(this.serie.getXAxis().getVal(V-W.getPaddingLeft())),this.ys.push(this.serie.getYAxis().getVal(B-W.getPaddingTop())),this._path.setAttribute('d',this.path+' z'),this.findPoints())}findPoints(){var W=this.serie.data,V=[],B=0,R;for(var G=0,U=W.length;G<U;G+=2){B=0;for(var Z=0,K=this.xs.length;Z<K;Z+=1)R=Z==K-1?0:Z+1,(this.ys[Z]<W[G+1]&&this.ys[R]>W[G+1]||this.ys[Z]>W[G+1]&&this.ys[R]<W[G+1])&&W[G]>(W[G+1]-this.ys[Z])/(this.ys[R]-this.ys[Z])*(this.xs[R]-this.xs[Z])+this.xs[Z]&&B++;1==B%2?(V.push(G/2),this.serie.selectPoint(G/2,!0,'selected')):this.serie.unselectPoint(G/2)}this.selected=V,this.emit('selectionProcess',V)}onMouseUp(){this._path.setAttribute('display','none'),this.emit('selectionEnd',this.selected)}}E.default=F})},function(u,A,S){var C,P,T;(function(E,X){P=[A,S(3),S(39)],C=X,T='function'==typeof C?C.apply(A,P):C,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X,Y){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var I=function(V){if(V&&V.__esModule)return V;var B={};if(null!=V)for(var R in V)Object.prototype.hasOwnProperty.call(V,R)&&(B[R]=V[R]);return B.default=V,B}(X),O=function(V){return V&&V.__esModule?V:{default:V}}(Y);class F extends O.default{constructor(){super(...arguments)}static defaults(){return{axes:'all'}}init(W){this._zoomingGroup=document.createElementNS(W.ns,'g'),this._zoomingSquare=document.createElementNS(W.ns,'rect'),this._zoomingSquare.setAttribute('display','none'),I.setAttributeTo(this._zoomingSquare,{display:'none',fill:'rgba(171,12,12,0.2)',stroke:'rgba(171,12,12,1)','shape-rendering':'crispEdges',x:0,y:0,height:0,width:0,'pointer-events':'none'}),this.graph=W,W.groupEvent.appendChild(this._zoomingGroup),this._zoomingGroup.appendChild(this._zoomingSquare)}onMouseDown(W,V,B,R,G){var U=this.options.zoomMode;if(U){switch(this._zoomingMode=U,void 0===V&&(this._backedUpZoomMode=this._zoomingMode,this._zoomingMode='y',V=0),void 0===B&&(this._backedUpZoomMode=this._zoomingMode,this._zoomingMode='x',B=0),this._zoomingXStart=V,this._zoomingYStart=B,this.x1=V-W.getPaddingLeft(),this.y1=B-W.getPaddingTop(),this._zoomingSquare.setAttribute('width',0),this._zoomingSquare.setAttribute('height',0),this._zoomingSquare.setAttribute('display','block'),this._zoomingMode){case'x':this._zoomingSquare.setAttribute('y',W.options.paddingTop),this._zoomingSquare.setAttribute('height',W.getDrawingHeight()-W.shift.bottom);break;case'y':this._zoomingSquare.setAttribute('x',W.options.paddingLeft),this._zoomingSquare.setAttribute('width',W.getDrawingWidth());break;case'forceY2':this.y2=W.getYAxis().getPx(this.options.forcedY)+W.options.paddingTop;}this.options.onZoomStart&&!G&&this.options.onZoomStart(W,V,B,R,G)}}onMouseMove(W,V,B,R,G){switch(this._zoomingMode){case'xy':this._zoomingSquare.setAttribute('x',Math.min(this._zoomingXStart,V)),this._zoomingSquare.setAttribute('y',Math.min(this._zoomingYStart,B)),this._zoomingSquare.setAttribute('width',Math.abs(this._zoomingXStart-V)),this._zoomingSquare.setAttribute('height',Math.abs(this._zoomingYStart-B));break;case'forceY2':this._zoomingSquare.setAttribute('y',Math.min(this._zoomingYStart,this.y2)),this._zoomingSquare.setAttribute('height',Math.abs(this._zoomingYStart-this.y2)),this._zoomingSquare.setAttribute('x',Math.min(this._zoomingXStart,V)),this._zoomingSquare.setAttribute('width',Math.abs(this._zoomingXStart-V));break;case'x':this._zoomingSquare.setAttribute('x',Math.min(this._zoomingXStart,V)),this._zoomingSquare.setAttribute('width',Math.abs(this._zoomingXStart-V));break;case'y':this._zoomingSquare.setAttribute('y',Math.min(this._zoomingYStart,B)),this._zoomingSquare.setAttribute('height',Math.abs(this._zoomingYStart-B));}this.options.onZoomMove&&!G&&this.options.onZoomMove(W,V,B,R,G)}onMouseUp(W,V,B,R,G){var U=this;this.removeZone();var Z=V-W.options.paddingLeft,K=B-W.options.paddingTop;if((this.emit('beforeZoom',{graph:W,x:V,y:B,e:R,mute:G}),!W.prevent(!1))&&(0!=V-this._zoomingXStart||'y'==this._zoomingMode)&&(0!=B-this._zoomingYStart||'x'==this._zoomingMode))if(this.options.transition||this.options.smooth){let Q=!1,J=!1;('x'==this._zoomingMode||'xy'==this._zoomingMode||'forceY2'==this._zoomingMode)&&(this.fullX=!1,this.toAxes(function($){$._pluginZoomMin=$.getCurrentMin(),$._pluginZoomMax=$.getCurrentMax(),$._pluginZoomMinFinal=Math.min($.getVal(Z),$.getVal(U.x1)),$._pluginZoomMaxFinal=Math.max($.getVal(Z),$.getVal(U.x1))},!1,!0,!1),Q=!0),('y'==this._zoomingMode||'xy'==this._zoomingMode)&&(this.fullY=!1,this.toAxes(function($){$._pluginZoomMin=$.getCurrentMin(),$._pluginZoomMax=$.getCurrentMax(),$._pluginZoomMinFinal=Math.min($.getVal(K),$.getVal(U.y1)),$._pluginZoomMaxFinal=Math.max($.getVal(K),$.getVal(U.y1))},!1,!1,!0),J=!0),'forceY2'==this._zoomingMode&&(this.fullY=!1,this.toAxes(function($){$._pluginZoomMin=$.getCurrentMin(),$._pluginZoomMax=$.getCurrentMax(),$._pluginZoomMinFinal=Math.min($.getVal(U.y2),$.getVal(U.y1)),$._pluginZoomMaxFinal=Math.max($.getVal(U.y2),$.getVal(U.y1))},!1,!1,!0),J=!0),this.transition(Q,J,'zoomEnd')}else{switch(this._zoomingMode){case'x':this.fullX=!1,this.toAxes('_doZoom',[Z,this.x1],!0,!1);break;case'y':this.fullY=!1,this.toAxes('_doZoom',[K,this.y1],!1,!0);break;case'xy':this.fullX=!1,this.fullY=!1,this.toAxes('_doZoom',[Z,this.x1],!0,!1),this.toAxes('_doZoom',[K,this.y1],!1,!0);break;case'forceY2':this.fullX=!1,this.fullY=!1,this.toAxes('_doZoom',[Z,this.x1],!0,!1),this.toAxes('_doZoom',[this.y1,this.y2],!1,!0);}W.draw(),this._backedUpZoomMode&&(this._zoomingMode=this._backedUpZoomMode),this.emit('zoomed'),W.pluginYieldActiveState()}}removeZone(){this._zoomingSquare.setAttribute('display','none')}onMouseWheel(W,V,B){B||(B={}),B.baseline||(B.baseline=0);var R='x'==B.direction,G='y'===B.direction;this.toAxes('handleMouseWheel',[W,V,B.baseline],R,G),this.graph.drawSeries()}onDblClick(W,V,B,R,G){var U=this.graph;if(this.emit('beforeDblClick',{graph:U,x:W,y:V,pref:R,e:B,mute:G}),!U.prevent(!1)){if(this.options.transition||this.options.smooth){var Z=!1,K=!1;if(('xtotal'==R.mode||'total'==R.mode)&&(this.toAxes(function(le){le._pluginZoomMin=le.getCurrentMin(),le._pluginZoomMax=le.getCurrentMax(),le._pluginZoomMinFinal=le.getMinValue()-le.options.axisDataSpacing.min*le.getInterval(),le._pluginZoomMaxFinal=le.getMaxValue()+le.options.axisDataSpacing.max*le.getInterval()},!1,!0,!1),Z=!0),('ytotal'==R.mode||'total'==R.mode)&&(this.toAxes(function(le){le._pluginZoomMin=le.getCurrentMin(),le._pluginZoomMax=le.getCurrentMax(),le._pluginZoomMinFinal=le.getMinValue()-le.options.axisDataSpacing.min*le.getInterval(),le._pluginZoomMaxFinal=le.getMaxValue()+le.options.axisDataSpacing.max*le.getInterval()},!1,!1,!0),K=!0),'gradualX'==R.mode||'gradualY'==R.mode||'gradual'==R.mode||'gradualXY'==R.mode){var W=!1,V=!1;('gradualX'==R.mode||'gradual'==R.mode||'gradualXY'==R.mode)&&(W=!0,Z=!0),('gradualY'==R.mode||'gradual'==R.mode||'gradualXY'==R.mode)&&(V=!0,K=!0),this.toAxes(function(le){le._pluginZoomMin=le.getCurrentMin(),le._pluginZoomMax=le.getCurrentMax(),le._pluginZoomMinFinal=le.getCurrentMin()-(le.getCurrentMax()-le.getCurrentMin()),le._pluginZoomMaxFinal=le.getCurrentMax()+(le.getCurrentMax()-le.getCurrentMin())},!1,W,V)}return void this.transition(Z,K,'dblClick')}var Q=this.graph.getXAxis(),J=this.graph.getYAxis();if('xtotal'==R.mode)this.toAxes('setMinMaxToFitSeries',null,!0,!1),this.fullX=!0,this.fullY=!1;else if('ytotal'==R.mode)this.toAxes('setMinMaxToFitSeries',null,!1,!0),this.fullX=!1,this.fullY=!0;else if('total'==R.mode)this.toAxes('setMinMaxToFitSeries',null,!0,!0),this.fullX=!0,this.fullY=!0;else{W-=this.graph.options.paddingLeft,V-=this.graph.options.paddingTop;var $=Q.getCurrentMin(),ee=Q.getCurrentMax(),te=Q.getVal(W),ie=ee-$,ae=J.getCurrentMin(),re=J.getCurrentMax(),se=J.getVal(V),ne=re-ae;if('gradualXY'==R.mode||'gradualX'==R.mode){var oe=(te-$)/(ee-$);$=Math.max(Q.getMinValue(),$-ie*oe),ee=Math.min(Q.getMaxValue(),ee+ie*(1-oe)),Q.setCurrentMin($),Q.setCurrentMax(ee),Q.options.onZoom&&Q.options.onZoom($,ee),Q.cacheCurrentMin(),Q.cacheCurrentMax(),Q.cacheInterval()}if('gradualXY'==R.mode||'gradualY'==R.mode){var oe=(se-ae)/(re-ae);ae=Math.max(J.getMinValue(),ae-ne*oe),re=Math.min(J.getMaxValue(),re+ne*(1-oe)),J.setCurrentMin(ae),J.setCurrentMax(re),J.options.onZoom&&J.options.onZoom(ae,re),J.cacheCurrentMin(),J.cacheCurrentMax(),J.cacheInterval()}}U.pluginYieldActiveState(),this.graph.draw()}}transition(W,V,B){var R=this,G=500;R.gradualUnzoomStart||(R.gradualUnzoomStart=Date.now()),window.requestAnimationFrame(function(){var U=Date.now()-R.gradualUnzoomStart;U>G&&(U=G);var Z=Math.sin(U/G*Math.PI/2);R.toAxes(function(K){K.setCurrentMin(K._pluginZoomMin+(K._pluginZoomMinFinal-K._pluginZoomMin)*Z),K.setCurrentMax(K._pluginZoomMax+(K._pluginZoomMaxFinal-K._pluginZoomMax)*Z),K.cacheCurrentMin(),K.cacheCurrentMax(),K.cacheInterval()},!1,W,V),R.graph.draw(),U<G?(R.transition(W,V,B),R.emit('zooming')):(R.emit('zoomed'),R.graph.pluginYieldActiveState(),B&&R.emit(B),R.gradualUnzoomStart=0)})}isFullX(){return this.fullX}isFullY(){return this.fullY}toAxes(W,V,B,R){var G=this.options.axes;switch(G&&('serieSelected'!=G||this.graph.getSelectedSerie())||(G='all'),G){case'all':this.graph._applyToAxes.apply(this.graph,arguments);break;case'serieSelected':var U=this.graph.getSelectedSerie();U&&(B&&('string'==typeof W?U.getXAxis()[W].apply(U.getXAxis(),V):W.apply(U.getXAxis(),V)),R&&('string'==typeof W?U.getYAxis()[W].apply(U.getYAxis(),V):W.apply(U.getYAxis(),V)));break;default:Array.isArray(G)||(G=[G]);for(let Z of G)Z.isX()&&B?'string'==typeof W?Z[W].apply(Z,V):W.apply(Z,V):Z.isY()&&R&&('string'==typeof W?Z[W].apply(Z,V):W.apply(Z,V));}}}E.default=F})},function(u,A,S){var C,P,T;(function(E,X){P=[A,S(1),S(45),S(39),S(3)],C=X,T='function'==typeof C?C.apply(A,P):C,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X,Y,I,O){'use strict';function F(U){return U&&U.__esModule?U:{default:U}}Object.defineProperty(E,'__esModule',{value:!0});var W=F(X),V=F(Y),B=F(I),R=function(Z){if(Z&&Z.__esModule)return Z;var K={};if(null!=Z)for(var Q in Z)Object.prototype.hasOwnProperty.call(Z,Q)&&(K[Q]=Z[Q]);return K.default=Z,K}(O);class G extends B.default{constructor(){super(...arguments),this.series=[],this.plugins=[],this.currentSlots={},this.requestLevels=new Map,this.update=(U,Z)=>{this.series.forEach(function(K){this.updateSerie(K,U)}),U||this.recalculateSeries(Z)}}static defaults(){return{LRUName:'PluginTimeSerieManager',intervals:[1000,15000,60000,900000,3600000,8640000],maxParallelRequests:3,optimalPxPerPoint:2,nbPoints:1000,url:''}}init(U){this.graph=U,V.default.create(this.options.LRUName,200),this.requestsRunning=0}setURL(U){return this.options.url=U,this}setAvailableIntervals(){this.options.intervals=arguments}newSerie(U,Z,K,Q,J){var $=this.graph.newSerie(U,Z,K);return this.currentSlots[U]={min:0,max:0,interval:0},$.on('hide',function(){$._zoneSerie&&$._zoneSerie.hide()}),$.on('show',function(){$._zoneSerie&&$._zoneSerie.show()}),$.setInfo('timeSerieManagerDBElements',Q),J||($._zoneSerie=this.graph.newSerie(U+'_zone',{},W.default.SERIE_ZONE)),this.series.push($),$}registerPlugin(U){var Z;if(-1<(Z=this.plugins.indexOf(U)))for(var K=1;K<arguments.length;K++)U.removeListener(arguments[K],this.update);for(var K=1;K<arguments.length;K++)U.on(arguments[K],this.update)}updateSerie(U,Z){var K=this,Q=U.getXAxis().getCurrentMin(),J=U.getXAxis().getCurrentMax(),$=this.getOptimalInterval(J-Q),ee=this.options.intervals.indexOf($),te;this.cleanRegister(ee);for(var ie=ee;ie<=ee+1;ie++){te=this.options.intervals[ie];var ae=K.computeSlotID(Q,te),re=K.computeSlotID(J,te);[[2,5,6],[1,2,4],[0,1,3]].forEach(function(se){for(var ne=ae-se[0]*(re-ae),oe=re+se[0]*(re-ae),le=ne;le<=oe&&!(K.computeTimeMin(le,te)>Date.now());)K.register(U,le,te,te==$?se[1]:se[2],!0,Z),le++})}this.processRequests()}cleanRegister(U){this.requestLevels&&this.requestLevels.forEach(Z=>{Z.forEach((K,Q)=>{K[4]<U&&Z.splice(Q,1)})})}register(U,Z,K,Q,J,$){var ee=this.computeUniqueID(U,Z,K),te=V.default.get(this.options.LRUName,ee);(!te||this.computeTimeMax(Z,K)>Date.now()&&te.timeout<Date.now()-($?5000:100000)&&1==Q)&&this.request(U,Z,K,Q,ee,J)}request(U,Z,K,Q,J,$){for(var ee in this.requestLevels)ee!=Q&&this.requestLevels[ee][J]&&(1===this.requestLevels[ee][J][0]?this.requestLevels[ee][J][5]=Q:delete this.requestLevels[ee][J]);this.requestLevels[Q]&&this.requestLevels[Q][J]||(this.requestLevels[Q]=this.requestLevels[Q]||{},this.requestLevels[Q][J]=[0,J,U.getName(),Z,K,Q,U.getInfo('timeSerieManagerDBElements')],!$&&this.processRequests())}processRequests(){if(!(this.requestsRunning>=this.options.maxParallelRequests)){for(var U=this,Z=1,K;!0;){for(var Q in this.requestLevels[Z])if(1!=this.requestLevels[Z][Q][0]){K=this.requestLevels[Z][Q];break}if(K)break;if(Z++,10<Z)return}this.requestsRunning++,K&&(K[0]=1,R.ajaxGet({url:this.getURL(K),method:'GET',json:!0}).done(function(J){1==J.status&&(U.requestsRunning--,delete U.requestLevels[Z][Q],V.default.store(U.options.LRUName,K[1],J.data),U.processRequests(),1==K[5]&&0==Object.keys(U.requestLevels[1]).length&&U.recalculateSeries(!0))}))}}computeTimeMax(U,Z){return(U+1)*(Z*this.options.nbPoints)}computeTimeMin(U,Z){return U*(Z*this.options.nbPoints)}getURL(U){var Z=this.options.url.replace('<measurementid>',U[2]).replace('<from>',this.computeTimeMin(U[3],U[4])).replace('<to>',this.computeTimeMax(U[3],U[4])).replace('<interval>',U[4]),K=U[6]||{};for(var Q in K)Z=Z.replace('<'+Q+'>',K[Q]);return Z}getOptimalInterval(U){var Z=(this.options.optimalPxPerPoint||1)*U/this.graph.getDrawingWidth(),K=1/0,Q;return this.options.intervals.forEach(function(J){var $=Math.min(K,Math.abs(J-Z));K!==$&&(Q=J,K=$)}),Q||1000}computeUniqueID(U,Z,K){var Q='',J=U.getInfo('timeSerieManagerDBElements');for(var $ in J)Q+=';'+$+':'+J[$];return U.getName()+';'+Z+';'+K+Q}computeSlotID(U,Z){return Math.floor(U/(Z*this.options.nbPoints))}computeSlotTime(U,Z){return U*(Z*this.options.nbPoints)}getZoneSerie(U){return U._zoneSerie}updateZoneSerie(U){var Z=this.graph.getSerie(U);Z&&Z._zoneSerie&&(Z._zoneSerie.setXAxis(Z.getXAxis()),Z._zoneSerie.setYAxis(Z.getYAxis()),Z._zoneSerie.setFillColor(Z.getLineColor()),Z._zoneSerie.setLineColor(Z.getLineColor()),Z._zoneSerie.setFillOpacity(0.2),Z._zoneSerie.setLineOpacity(0.3))}recalculateSeries(U){var Z=this;this.locked||(this.changed=!1,this.series.map(function(K){Z.recalculateSerie(K,U)}),this.changed=!1,Z.graph.draw())}recalculateSerie(U,Z){var K=U.getXAxis().getCurrentMin(),Q=U.getXAxis().getCurrentMax(),J=this.getOptimalInterval(Q-K),$=this.computeSlotID(K,J),ee=this.computeSlotID(Q,J),te=[],ie=[];if(!(!Z&&J==this.currentSlots[U.getName()].interval&&this.currentSlots[U.getName()].min<=$&&this.currentSlots[U.getName()].max>=ee)){$-=2,ee+=2,this.currentSlots[U.getName()].min=$,this.currentSlots[U.getName()].max=ee,this.currentSlots[U.getName()].interval=J;for(var ae=$;ae<=ee;){const re=V.default.get(this.options.LRUName,this.computeUniqueID(U,ae,J));re?(te=te.concat(re.data.mean),ie=ie.concat(re.data.minmax)):this.recalculateSerieUpwards(U,ae,J,te,ie),ae++}this.changed=!0,U.setData(te),U._zoneSerie&&U._zoneSerie.setData(ie)}}setIntervalCheck(U){this.interval&&clearInterval(this.interval),this.update(!0,!0),this.interval=setInterval(()=>{this.update(!0,!1)},U)}recalculateSerieUpwards(U,Z,K,Q,J){var $=this.options.intervals.slice(0);$.sort();var ee=$[$.indexOf(K)+1]||-1;if(0>ee)return[];var te=this.computeSlotTime(Z,K),ie=this.computeSlotTime(Z+1,K),ae=this.computeSlotID(te,ee),re=!1;const se=V.default.get(this.options.LRUName,this.computeUniqueID(U,ae,ee));if(se)for(var ne=0,oe=se.data.mean.length;ne<oe;ne+=2){if(se.data.mean[ne]<te)continue;else!1==re&&(re=ne);if(se.data.mean[ne]>=ie)return Q=Q.concat(se.data.mean.slice(re,ne)),void(J=Q.concat(se.data.minmax.slice(re,ne)))}return this.recalculateSerieUpwards(U,ae,ee,Q,J)}lockRedraw(){this.locked=!0}unlockRedraw(){this.locked=!1}isRedrawLocked(){return!!this.locked}}E.default=G})},function(u,A){var S,C,P;(function(T,E){C=[A],S=E,P='function'==typeof S?S.apply(A,C):S,!(P!==void 0&&(u.exports=P));var X})(this,function(T){'use strict';function E(B,R){R=R||50,O[B]||(O[B]={},W[B]=0),V[B]=R}function X(B,R){var G,U;if(O[B]&&O[B][R])return U=F[B],G=O[B][R],G.prev=U,G.next=U.next,U.next.prev=G,U.next=G,F[B]=G,G.data}function Y(B,R,G){var U,Z,K;if(O[B]&&void 0!==W[B]&&V[B])return K=F[B],O[B][R]?(X(B,R),O[B][R].data.data=G,O[B][R].data.timeout=Date.now()):(U={data:{data:G,timeout:Date.now()}},'undefined'==typeof K?(U.prev=U,U.next=U):(U.prev=K.prev,U.next=K.next,K.next.prev=U,K.next=U),F[B]=U,O[B][R]=U,W[B]++),W[B]>V[B]&&K&&(Z=K.next,K.next.next.prev=K,K.next=K.next.next,Z.next.next=void 0,Z.next.prev=void 0,W[B]--),G}function I(B,R){var G;if((G=X(B,R))!=void 0)return G}Object.defineProperty(T,'__esModule',{value:!0}),T.create=function(R,G){E(R,G)},T.get=I,T.store=function(B,R,G){return Y(B,R,G),G},T.empty=function(R){emptyMemory(R)},T.exist=function(R){return O[R]};var O={},F={},W={},V={};;;;T.default=I})},function(u,A,S){var C,P,T;(function(E,X){P=[A,S(39)],C=X,T='function'==typeof C?C.apply(A,P):C,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var Y=function(F){return F&&F.__esModule?F:{default:F}}(X);class I extends Y.default{constructor(){super(...arguments)}static defaults(){return{positiveStyle:{fillColor:'green',fillOpacity:0.2,strokeWidth:0},negativeStyle:{fillColor:'red',fillOpacity:0.2,strokeWidth:0},from:0,to:0}}init(O){this.graph=O,this.pathsPositive=[],this.pathsNegative=[],this.positivePolyline=this.graph.newShape('polyline').draw(),this.positivePolyline.setFillColor(this.options.positiveStyle.fillColor).setFillOpacity(this.options.positiveStyle.fillOpacity).setStrokeWidth(this.options.positiveStyle.strokeWidth).applyStyle(),this.negativePolyline=this.graph.newShape('polyline').draw(),this.negativePolyline.setFillColor(this.options.negativeStyle.fillColor).setFillOpacity(this.options.negativeStyle.fillOpacity).setStrokeWidth(this.options.negativeStyle.strokeWidth).applyStyle()}setSeries(O,F){this.serie1=O,this.serie2=F}setBoundaries(O,F){this.options.from=O,this.options.to=F}getFrom(){return this.options.from}getTo(){return this.options.to}draw(){function O(){!0===ie?W.pathsPositive.push([J,$]):!1==ie&&W.pathsNegative.push([J,$]),J=[],$=[],ie=void 0}function F(se,ne){for(var oe=0;oe<ne[0].length;oe+=2)0==oe&&(se+='M '),se+=' '+Math.round(W.serie1.getXAxis().getPx(ne[0][oe]))+', '+Math.round(W.serie1.getYAxis().getPx(ne[0][oe+1])),oe<ne[0].length-2&&(se+=' L ');for(var oe=ne[1].length-2;0<=oe;oe-=2)se+=' L '+Math.round(W.serie2.getXAxis().getPx(ne[1][oe]))+', '+Math.round(W.serie2.getYAxis().getPx(ne[1][oe+1])),0==oe&&(se+=' z ');return se}var W=this,V=this.serie1.searchClosestValue(this.getFrom()),B,R,G,U,Z,K,Q,J=[],$=[],ee;V?(B=V.dataIndex,R=2*V.xAfterIndex):(B=0,R=0),Z=this.interpolate(this.serie1,this.getFrom()),J.push(this.getFrom()),J.push(Z),Z=this.interpolate(this.serie2,this.getFrom()),$.push(this.getFrom()),$.push(Z);for(var te,ie,ae;B<this.serie1.data.length;B++){for(;R<this.serie1.data[B].length;R+=2){if(this.serie1.data[B][R]>this.getTo()){Z=this.interpolate(this.serie1,this.getTo()),K=this.interpolate(this.serie2,this.getTo()),Q=this.computeCrossing(J[J.length-2],J[J.length-1],this.getTo(),Z,$[$.length-2],$[$.length-1],this.getTo(),K),Q&&(J.push(Q.x),J.push(Q.y),$.push(Q.x),$.push(Q.y),O(),J.push(Q.x),J.push(Q.y),$.push(Q.x),$.push(Q.y),ie=this.serie1.data[B][R+1]>this.serie2.data[G][U+1]),J.push(this.getTo()),J.push(Z),$.push(this.getTo()),$.push(K),ae=!0;break}if(!te)if(te=this.serie2.searchClosestValue(this.serie1.data[B][R]),te)G=te.dataIndex,U=2*te.xBeforeIndex,Z=this.interpolate(this.serie2,this.serie1.data[B][R]),J.push(this.serie1.data[B][R]),J.push(this.serie1.data[B][R+1]),$.push(this.serie1.data[B][R]),$.push(Z),ie=this.serie1.data[B][R+1]>Z;else continue;for(ee=!1,Q=this.computeCrossing(J[J.length-2],J[J.length-1],this.serie1.data[B][R],this.serie1.data[B][R+1],$[$.length-2],$[$.length-1],this.serie2.data[G][U],this.serie2.data[G][U+1]),Q&&(J.push(Q.x),J.push(Q.y),$.push(Q.x),$.push(Q.y),O(),J.push(Q.x),J.push(Q.y),$.push(Q.x),$.push(Q.y),ie=this.serie1.data[B][R+1]>this.serie2.data[G][U+1]);this.serie2.data[G][U]<this.serie1.data[B][R];){if($.push(this.serie2.data[G][U]),$.push(this.serie2.data[G][U+1]),U+=2,U==this.serie2.data[G].length){ee=this.serie2.data[G][U-2],G++,U=0;break}Q=this.computeCrossing(J[J.length-2],J[J.length-1],this.serie1.data[B][R],this.serie1.data[B][R+1],$[$.length-2],$[$.length-1],this.serie2.data[G][U],this.serie2.data[G][U+1]),Q&&(J.push(Q.x),J.push(Q.y),$.push(Q.x),$.push(Q.y),O(),J.push(Q.x),J.push(Q.y),$.push(Q.x),$.push(Q.y),ie=this.serie1.data[B][R+1]>this.serie2.data[G][U+1])}!1===ee?(J.push(this.serie1.data[B][R]),J.push(this.serie1.data[B][R+1])):(J.push(ee),J.push(this.interpolate(this.serie1,ee)),te=!1,R-=2,O())}if(ae){O();break}Z=this.interpolate(this.serie2,J[J.length-2]),Z&&($.push(J[J.length-2]),$.push(Z)),O(),R=0,te=!1}var re=this.pathsPositive.reduce(F,'');this.positivePolyline.setPointsPx(re).redraw();var re=this.pathsNegative.reduce(F,'');this.negativePolyline.setPointsPx(re).redraw()}interpolate(O,F){var W=O.searchClosestValue(F);if(!W)return!1;if(void 0==W.xMax)return W.yMin;if(void 0==W.xMin)return W.yMax;var V=(F-W.xMin)/(W.xMax-W.xMin);return(1-V)*W.yMin+V*W.yMax}computeCrossing(O,F,W,V,B,R,G,U){var Z=(V-F)/(W-O),K=(U-R)/(G-B),Q=V-Z*W;if(O==W||B==G)return!1;if(Z==K)return{x:O,y1:F,y2:F};var J=(Q-(U-K*G))/(K-Z);return J>W||J<O||J<B||J>G?!1:{x:J,y:Z*J+Q}}getPositivePolyline(){return this.positivePolyline}getNegativePolyline(){return this.negativePolyline}}E.default=I})},function(u,A,S){var C,P,T;(function(E,X){P=[A,S(1),S(9),S(11),S(3),S(14),S(22),S(39),S(10)],C=X,T='function'==typeof C?C.apply(A,P):C,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X,Y,I,O,F,W,V,B){'use strict';function R(le){return le&&le.__esModule?le:{default:le}}Object.defineProperty(E,'__esModule',{value:!0});var G=R(X),U=R(Y),Z=R(I),K=function(de){if(de&&de.__esModule)return de;var pe={};if(null!=de)for(var ge in de)Object.prototype.hasOwnProperty.call(de,ge)&&(pe[ge]=de[ge]);return pe.default=de,pe}(O),Q=R(F),J=R(W),$=R(V);R(B);class ee extends Q.default{constructor(){super(...arguments),this.subSeries=[]}setData(){return super.setData(...arguments),this.subSeries.map(le=>{le.data=this.data}),this}draw(){return this.eraseMarkers(),this}getSymbolForLegend(){return!!this.subSeries[0]&&this.subSeries[0].getSymbolForLegend()}getMarkerForLegend(){return!!this.subSeries[0]&&this.subSeries[0].getMarkerForLegend()}}class te extends J.default{constructor(){super(...arguments),this.subSeries=[]}setData(){return super.setData(...arguments),this.subSeries.map(le=>{le.data=this.data}),this}draw(){return this}getSymbolForLegend(){return!!this.subSeries[0]&&this.subSeries[0].getSymbolForLegend()}getMarkerForLegend(){return!!this.subSeries[0]&&this.subSeries[0].getMarkerForLegend()}}var ie=['constructor','init','draw','setLineColor','setLineWidth','setLineStyle','getLineColor','getLineWidth','getLineStyle','setMarkers','showMarkers','hideMarkers','getMarkerDom','getMarkerDomIndependant','getMarkerPath','eraseMarkers','_recalculateMarkerPoints'];Object.getOwnPropertyNames(Q.default.prototype).concat([]).map(function(le){-1<ie.indexOf(le)||(ee.prototype[le]=function(de){return function(){var pe=arguments;this.subSeries.map(ge=>{ge[de](...pe)})}}(le))});class ae extends $.default{constructor(){super(...arguments),this.series=new Map}static defaults(){return{axes:{margins:{high:5,low:5}}}}init(le){this.graph=le}newXAxis(le){return newBottomAxis(le)}newYAxis(le){return newLeftAxis(le)}newTopAxis(le){return le=this.getOptions(le),new ne(this.graph,'top',le)}newBottomAxis(le){return le=this.getOptions(le),new ne(this.graph,'bottom',le)}newLeftAxis(le){return le=this.getOptions(le),new oe(this.graph,'left',le)}newRightAxis(le){return le=this.getOptions(le),new oe(this.graph,'right',le)}getOptions(le){var de={marginMin:this.options.axes.margins.low,marginMax:this.options.axes.margins.high};return K.extend(!0,de,le)}preDraw(){var le,de;this.series.forEach(({serie:pe})=>{le=pe.getXAxis(),de=pe.getYAxis();let ge=1;for(le.splitNumber&&(ge*=le.splitNumber),de.splitNumber&&(ge*=de.splitNumber);pe.subSeries.length<ge;){const ue=pe.getName()+'_'+pe.subSeries.length,ce=this.graph.newSerie(ue,{},pe.getType()||G.default.SERIE_LINE);ce.excludedFromLegend=!0,ce.styles=pe.styles,ce.data=pe.data,pe.getType()==G.default.SERIE_LINE&&(ce.markerPoints=pe.markerPoints,ce.markerFamilies=pe.markerFamilies),pe.subSeries.push(ce)}for(;pe.subSeries.length>ge;){let ue=this.graph.getSerie(pe.getName()+'_'+(pe.subSeries.length-1));ue&&ue.kill&&ue.kill(),pe.subSeries.pop()}!pe.getXAxis().splitNumber&&pe.getXAxis().splitAxis&&pe.getXAxis().splitAxis(),!pe.getYAxis().splitNumber&&pe.getYAxis().splitAxis&&pe.getYAxis().splitAxis(),pe.subSeries.map((ue,ce)=>{var he,xe;if(pe.getXAxis().getSubAxis){let me=ce%(le.splitNumber||1);he=pe.getXAxis().getSubAxis(me)}else he=pe.getXAxis();if(ue.setXAxis(he),pe.getYAxis().getSubAxis){let me=Math.floor(ce/(le.splitNumber||1));xe=pe.getYAxis().getSubAxis(me)}else xe=pe.getYAxis();ue.setYAxis(xe),ue.draw(!0)})})}newSerie(le,de={},pe){switch(pe){case'line':return newLineSerie(le,de);break;case'scatter':return newScatterSerie(le,de);}throw'Cannot create a split serie of type '+pe}newLineSerie(le,de){var pe={type:'lineSerie',serie:new ee(le,de,'line')};return this.series.set(le,pe),pe.serie.init(this.graph,le,de),this.graph.series.push(pe.serie),pe.serie}newScatterSerie(le,de){var pe={type:'scatterSerie',serie:new te(le,de,'scatter')};return this.series.set(le,pe),pe.serie.init(this.graph,de),this.graph.series.push(pe.serie),pe.serie}}var re={splitMarks:!0},se=function(le){var de=class extends le{constructor(ge,ue,ce={}){super(ge,ue,ce),this.axes=[],this.position=ue,this.constructorOptions=K.extend(!0,{},re,ce),this._splitVal=[]}all(ge){if('function'==typeof ge)return this.axes.map(ge),this}splitAxis(...ge){ge.push(1);let ue=ge.length;for(;this.axes.length>ue;)this.axes.pop().kill(!0,!0);for(;this.axes.length<ue;){let xe=new(this.getConstructor())(this.graph,this.position,this.constructorOptions);this.axes.push(xe),xe.zoomLock=!0,xe.init(this.graph,this.constructorOptions)}let ce=0,he=0;for(let xe of this.axes)xe.options.marginMin=10,xe.options.marginMax=10,0==he&&(xe.options.marginMin=0),he==this.axes.length-1&&(xe.options.marginMax=0),xe.setSpan(ce,ce=ge[he]),xe.setMinMaxFlipped(),he++;return this._splits=ge,this}fixGridIntervalBasedOnAxis(ge){return this.fixGridFor=ge,this.graph._axisHasChanged(),this}splitSpread(ge){return this.autoSpread=!!ge,this}hasAxis(ge){return-1<this.axes.indexOf(ge)}_splitSpread(){let ge=[],ue=0,ce=0;for(let he of this._splitVal)ue+=he[1]-he[0];for(let he of this._splitVal)ge.push(ce+=(he[1]-he[0])/ue);ge.pop(),this.splitAxis(...ge)}setChunkBoundaries(ge){let ue=0,ce,he;for(let xe of this.axes)Array.isArray(ge[ue])&&1<ge[ue].length&&!ce&&(ce=ge[ue][1]-ge[ue][0],he=ue),1!=ge[ue].length&&Array.isArray(ge[ue])?xe.forceMin(ge[ue][0]).forceMax(ge[ue][1]):(xe._mean=ge[ue],Array.isArray(xe._mean)&&(xe._mean=xe._mean[0])),ue++;return this._baseWidthVal=ce,this._baseWidthIndex=he,this._splitVal=ge,this.graph._axisHasChanged(),this}setMinMaxToFitSeries(){(!this._splitVal||1>this._splitVal.length)&&(super.setMinMaxToFitSeries(...arguments),this._splitVal[0]=this._splitVal[0]||[],this._splitVal[this._splitVal.length-1]=this._splitVal[this._splitVal.length-1]||[],this._splitVal[0][0]=this.getCurrentMin(),this._splitVal[this._splitVal.length-1][1]=this.getCurrentMax(),this.setChunkBoundaries(this._splitVal))}draw(){this.autoSpread&&this._splitSpread();let ge=0,ue,ce,he;if(0<=this._baseWidthIndex&&(ce=this.getSubAxis(this._baseWidthIndex))&&(he=ce.getSpan()),ce=void 0,0<=this.fixGridFor&&(ce=this.getSubAxis(this.fixGridFor))){if(void 0!==ce._mean){let xe=(ce.getSpan()[1]-ce.getSpan()[0])/(he[1]-he[0])*this._baseWidthVal;ce.forceMin(ce._mean-xe/2),ce.forceMax(ce._mean+xe/2)}ge=ce.draw(),ue=ce.getPrimaryTickUnit()}return this.axes.map(xe=>{if(ce!==xe){if(void 0!==xe._mean){let me=(xe.getSpan()[1]-xe.getSpan()[0])/(he[1]-he[0])*this._baseWidthVal;xe.forceMin(xe._mean-me/2),xe.forceMax(xe._mean+me/2)}ue&&xe.forcePrimaryTickUnit(ue),ge=Math.max(ge,xe.draw())}}),this.writeUnit(),ge}setMinPx(ge){super.setMinPx(ge);for(let ue of this.axes)ue.setMinPx(ge)}setMaxPx(ge){super.setMaxPx(ge);for(let ue of this.axes)ue.setMaxPx(ge)}setShift(){super.setShift(...arguments);for(let ge of this.axes)ge.setShift(...arguments)}init(){super.init(...arguments),this.splitAxis()}getAxisPosition(){var ge=0;return this.axes.map(ue=>{ge=Math.max(ge,ue.getAxisPosition())}),ge}getSubAxis(ge){if(this.axes.length<=ge)throw'Impossible to reach axis. Index '+ge+' is out of range';return this.axes[ge]}get splitNumber(){return this._splits.length}};return['turnGridsOff','turnGridsOn','gridsOff','gridsOn','setEngineering','setScientificScaleExponent','setScientific','setLabelColor','setSecondaryGridDasharray','setPrimaryGridDasharray','setSecondaryGridsOpacity','setPrimaryGridOpacity','setSecondaryGridWidth','setPrimaryGridWidth','setSecondaryGridColor','setPrimaryGridColor','setTicksLabelColor','setSecondaryTicksColor','setPrimaryTicksColor','setAxisColor','secondaryGridOn','secondaryGridOff','primaryGridOff','primaryGridOn','setSecondaryGrid','setPrimaryGrid','setGrids','setTickPosition','setExponentialFactor','setExponentialLabelFactor','setGridLinesStyle','forcePrimaryTickUnitMin','forcePrimaryTickUnitMax','forcePrimaryTickUnit','flip','show','hide','setDisplay'].map(pe=>{de.prototype[pe]=function(ge){return function(){return this.axes.map(ue=>{ue[ge](...arguments)}),this}}(pe)}),de};class ne extends se(U.default){constructor(le,de){super(...arguments),this.topbottom=de}getConstructor(){return U.default}getAxisPosition(){var le=super.getAxisPosition(...arguments);return this.labelPosY=le,this.getLabel()&&(le+=this.graph.options.fontSize),le}drawLabel(){super.drawLabel(),this.label.setAttribute('y',(this.top?-1:1)*(this.graph.options.fontSize+this.labelPosY))}draw(){var le=super.draw(...arguments);return this.drawLabel(),le}}class oe extends se(Z.default){constructor(){super(...arguments)}getConstructor(){return Z.default}drawLabel(){super.drawLabel()}equalizePosition(le){var de=le;if(this.getLabel()&&this.axes.map(pe=>{de=Math.max(pe.equalizePosition(le),de)}),this.getLabel())return this.placeLabel(this.left?-de:de),de+this.graph.options.fontSize}}K.mix(ne,new U.default),K.mix(oe,new Z.default),E.default=ae})},function(u,A,S){var C,P,T;(function(E,X){P=[A,S(3),S(39)],C=X,T='function'==typeof C?C.apply(A,P):C,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X,Y){'use strict';Object.defineProperty(E,'__esModule',{value:!0}),function(W){if(W&&W.__esModule)return W;var V={};if(null!=W)for(var B in W)Object.prototype.hasOwnProperty.call(W,B)&&(V[B]=W[B]);return V.default=W,V}(X);var I=function(W){return W&&W.__esModule?W:{default:W}}(Y);class O extends I.default{constructor(){super(...arguments)}init(F,W){super.init(F,W)}static defaults(){return{}}checkHSL(F){let W={},V,B,R;return(V=F.h||F.hue)?(1>V&&(V=Math.round(360*V)),W.hue=V):W.h=0,(B=F.s||F.saturation)?(1<B&&(B/=100),W.saturation=B):W.saturation=0.75,(R=F.lightness||F.l)?(1<R&&(R/=100),W.lightness=R):W.lightness=0.5,W}buildHSLString(F){return'hsl( '+Math.round(F.h)+', '+Math.round(100*F.s)+'%, '+Math.round(100*F.l)+'%)'}colorizeAll(F){let W,V;if(F.serieTypes?(!Array.isArray(F.serieTypes)&&(F.serieTypes=[F.serieTypes]),W=this.graph.allSeries(...F.serieTypes)):W=this.graph.getSeries(),V=W.length,!F.startingColorHSL)if(F.colorHSL)F.startingColorHSL=this.checkHSL(F.colorHSL);else throw'No starting color was provided. There must exist either options.colorHSL or options.startingColorHSL';if(!F.endingColorHSL)switch(F.affect&&['h','s','l','hue','saturation','lightness'].include(F.affect)||(F.affect='h'),F.affect){case'h':case'hue':F.endingColorHSL={h:F.startingColorHSL.h+300,s:F.startingColorHSL.s,l:F.startingColorHSL.l};break;case'saturation':case's':let B;B=0.5<F.startingColorHSL.s?0:1,F.endingColorHSL={h:F.startingColorHSL.h,s:B,l:F.startingColorHSL.l};break;case'lightness':case'l':let R;R=0.5<F.startingColorHSL.l?0:0.75,F.endingColorHSL={h:F.startingColorHSL.h,s:F.startingColorHSL.s,l:R};}else F.endingColorHSL=Object.assign({},F.startingColorHSL,F.endingColorHSL);W.map((B,R)=>{if(!B.setLineColor)throw'The serie '+B.getName()+' does not implement the method `startingColor`';B.setLineColor(this.buildHSLString({h:F.startingColorHSL.h+R/(V-1)*(F.endingColorHSL.h-F.startingColorHSL.h),s:F.startingColorHSL.s+R/(V-1)*(F.endingColorHSL.s-F.startingColorHSL.s),l:F.startingColorHSL.l+R/(V-1)*(F.endingColorHSL.l-F.startingColorHSL.l)}))})}}E.default=O})},function(u,A,S){var C,P,T;(function(E,X){P=[A,S(3),S(27)],C=X,T='function'==typeof C?C.apply(A,P):C,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X,Y){'use strict';Object.defineProperty(E,'__esModule',{value:!0}),function(W){if(W&&W.__esModule)return W;var V={};if(null!=W)for(var B in W)Object.prototype.hasOwnProperty.call(W,B)&&(V[B]=W[B]);return V.default=W,V}(X);var I=function(W){return W&&W.__esModule?W:{default:W}}(Y);class O extends I.default{constructor(F,W){super(F,W)}createDom(){this._dom=document.createElementNS(this.graph.ns,'ellipse')}applyPosition(){var F=this.computePosition(0);return this.setDom('cx',F.x||0),this.setDom('cy',F.y||0),this.setDom('rx',this.getProp('rx')||0),this.setDom('ry',this.getProp('ry')||0),!0}setR(F,W){return this.setProp('rx',F),this.setProp('ry',W),this}handleMouseUpImpl(){this.triggerChange()}handleMouseMoveImpl(){}}E.default=O})}])});;
//# sourceMappingURL=jsgraph-es6.min.js.map
