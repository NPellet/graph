(function(A,S){'object'==typeof exports&&'object'==typeof module?module.exports=S():'function'==typeof define&&define.amd?define([],S):'object'==typeof exports?exports.Graph=S():A.Graph=S()})(this,function(){return function(u){function A(C){if(S[C])return S[C].exports;var P=S[C]={exports:{},id:C,loaded:!1};return u[C].call(P.exports,P,P.exports,A),P.loaded=!0,P.exports}var S={};return A.m=u,A.c=S,A.p='',A(0)}([function(u,A,S){var C,P,E;(function(T,X){P=[u,S(1),S(2),S(8),S(9),S(11),S(12),S(13),S(14),S(17),S(19),S(20),S(21),S(22),S(23),S(24),S(25),S(26),S(27),S(28),S(29),S(49),S(31),S(32),S(30),S(33),S(34),S(35),S(36),S(37),S(38),S(39),S(40),S(41),S(42),S(43),S(44),S(46),S(47),S(48),S(5),S(6)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y,I,O,F,W,B,V,R,G,U,Z,K,Q,J,$,ee,te,ie,re,ae,se,ne,oe,le,pe,de,ge,ue,he,ce,xe,me,fe,ye,be,Ae,Me,ke,Se,_e){'use strict';function Ce(ct){return ct&&ct.__esModule?ct:{default:ct}}var Pe=Ce(X),ve=Ce(Y),Le=Ce(I),we=Ce(O),Ee=Ce(F),Te=Ce(W),Xe=Ce(B),Ye=Ce(V),De=Ce(R),Ie=Ce(G),Ne=Ce(U),He=Ce(Z),je=Ce(K),Oe=Ce(Q),Fe=Ce(J),ze=Ce($),We=Ce(ee),Be=Ce(te),Ve=Ce(ie),Re=Ce(re),Ge=Ce(ae),Ue=Ce(se),Ze=Ce(ne),qe=Ce(oe),Ke=Ce(le),Qe=Ce(pe),Je=Ce(de),$e=Ce(ge),et=Ce(ue),tt=Ce(he),it=Ce(ce),rt=Ce(xe),at=Ce(me),st=Ce(fe),nt=Ce(ye),ot=Ce(be),lt=Ce(Ae),pt=Ce(Me),gt=Ce(ke),ut=Ce(Se),ht=Ce(_e);Pe.default.registerConstructor('graph.position',ve.default),Pe.default.registerConstructor('graph.axis.x',we.default),Pe.default.registerConstructor('graph.axis.y',Ee.default),Pe.default.registerConstructor('graph.axis.x.bar',Te.default),Pe.default.registerConstructor('graph.axis.x.time',Xe.default),Pe.default.registerConstructor('graph.serie.line',Ye.default),Pe.default.registerConstructor('graph.serie.line.3d',De.default),Pe.default.registerConstructor('graph.serie.line.color',He.default),Pe.default.registerConstructor('graph.serie.contour',We.default),Pe.default.registerConstructor('graph.serie.bar',Ie.default),Pe.default.registerConstructor('graph.serie.box',Ne.default),Pe.default.registerConstructor('graph.serie.scatter',je.default),Pe.default.registerConstructor('graph.serie.zone',Oe.default),Pe.default.registerConstructor('graph.serie.zone.3d',Fe.default),Pe.default.registerConstructor('graph.serie.densitymap',ze.default),Pe.default.registerConstructor(Pe.default.SERIE_LINE,Ye.default),Pe.default.registerConstructor(Pe.default.SERIE_LINE_3D,De.default),Pe.default.registerConstructor(Pe.default.SERIE_LINE_COLORED,He.default),Pe.default.registerConstructor(Pe.default.SERIE_CONTOUR,We.default),Pe.default.registerConstructor(Pe.default.SERIE_BAR,Ie.default),Pe.default.registerConstructor(Pe.default.SERIE_BOX,Ne.default),Pe.default.registerConstructor(Pe.default.SERIE_SCATTER,je.default),Pe.default.registerConstructor(Pe.default.SERIE_ZONE,Oe.default),Pe.default.registerConstructor(Pe.default.SERIE_ZONE_3D,Fe.default),Pe.default.registerConstructor(Pe.default.SERIE_DENSITYMAP,ze.default),Pe.default.registerConstructor('graph.plugin.shape',at.default),Pe.default.registerConstructor('graph.plugin.drag',rt.default),Pe.default.registerConstructor('graph.plugin.zoom',nt.default),Pe.default.registerConstructor('graph.plugin.selectScatter',st.default),Pe.default.registerConstructor('graph.plugin.timeSerieManager',ot.default),Pe.default.registerConstructor('graph.plugin.serielinedifference',lt.default),Pe.default.registerConstructor('graph.plugin.serieLineDifference',lt.default),Pe.default.registerConstructor('graph.plugin.axissplitting',pt.default),Pe.default.registerConstructor('graph.plugin.makeTracesDifferent',gt.default),Pe.default.registerConstructor('graph.shape',Be.default),Pe.default.registerConstructor('graph.shape.areaundercurve',Ve.default),Pe.default.registerConstructor('graph.shape.arrow',Re.default),Pe.default.registerConstructor('graph.shape.ellipse',Ge.default),Pe.default.registerConstructor('graph.shape.label',Ue.default),Pe.default.registerConstructor('graph.shape.polyline',Ze.default),Pe.default.registerConstructor('graph.shape.line',qe.default),Pe.default.registerConstructor('graph.shape.nmrintegral',Ke.default),Pe.default.registerConstructor('graph.shape.html',tt.default),Pe.default.registerConstructor('graph.shape.peakintegration2d',Qe.default),Pe.default.registerConstructor('graph.shape.rect',Je.default),Pe.default.registerConstructor('graph.shape.rectangle',Je.default),Pe.default.registerConstructor('graph.shape.cross',$e.default),Pe.default.registerConstructor('graph.shape.peakboundariescenter',et.default),Pe.default.registerConstructor('graph.legend',Le.default),Pe.default.registerConstructor('graph.waveform',ut.default),T.exports=Pe.default})},function(u,A,S){var C,P,E;(function(T,X){P=[A,S(2),S(3),S(4),S(5)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y,I,O){'use strict';function W(Ae){return Ae&&Ae.__esModule?Ae:{default:Ae}}function B(Ae,Me,ke,Se){var _e=Ae.getConstructor(Se,!0);if(_e||'string'!=typeof Se||(_e=Ae.getConstructor('graph.serie.'+Se,!0)),_e){var Ce=new _e(Ae,Me,ke);Ae.appendSerieToDom(Ce)}else return ge.throwError('No constructor exists for the serie type provided. Use Graph.registerConstructor( name, constructor ) first is you use your own series');return Ce}function V(Ae,Me){for(var ke=0,Se=Me.length,_e;ke<Se;ke++){_e=!0;for(var Ce=0,Pe=Me[ke].length;Ce<Pe;Ce++)Ae[0]<Me[ke][Ce][0]&&Ae[1]<Me[ke][Ce][0]||Ae[0]>Me[ke][Ce][1]&&Ae[1]>Me[ke][Ce][1]||(_e=!1);if(_e)return Me[ke].push(Ae),ke}return Me.push([Ae]),Me.length-1}function R(Ae){var Le={top:[],bottom:[],left:[],right:[]},we={top:[],bottom:[],left:[],right:[]};Ae._painted=!0,Ae._applyToAxes(function(Ie,Ne){if(!(Ie.disabled||Ie.floating)){var He=V(Ie.getSpan(),we[Ne]);Ie.setLevel(He),Le[Ne][He]=Math.max(Ie.getAxisPosition(),Le[Ne][He]||0)}},!1,!0,!1);var Ee=Le.top.reduce(function(Ie,Ne){return Ie+Ne},0),Te=Le.bottom.reduce(function(Ie,Ne){return Ie+Ne},0);[Le.top,Le.bottom].map(function(Ie){Ie.reduce(function(Ne,He,je){return Ie[je]=Ne+He,Ne+He},0)}),Ae._applyToAxes(function(Ie,Ne){Ie.disabled||Ie.floating||Ie.setShift(Le[Ne][Ie.getLevel()])},!1,!0,!1),Ae._applyToAxes(function(Ie,Ne){if(!Ie.disabled&&(Ie.setMinPx(Ee),Ie.setMaxPx(Ae.getDrawingHeight(!0)-Te),!Ie.floating)){let He=Ie.linkedToAxis?0:Ie.draw();var je=V(Ie.getSpan(),we[Ne]);Ie.setLevel(je),Le[Ne][je]=Math.max(He,Le[Ne][je]||0)}},!1,!1,!0);var Xe=ge.extend(!0,{},Le);Ae._applyToAxes(function(Ie,Ne){Ie.disabled||Ie.floating||(Xe[Ne][Ie.getLevel()]=Math.max(Le[Ne][Ie.getLevel()],Ie.equalizePosition(Le[Ne][Ie.getLevel()])))},!1,!1,!0),Le=Xe;var Ye=Le.left.reduce(function(Ie,Ne){return Ie+Ne},0),De=Le.right.reduce(function(Ie,Ne){return Ie+Ne},0);[Le.left,Le.right].map(function(Ie){Ie.reduce(function(Ne,He,je){return Ie[je]=Ne+He,Ne+He},0)}),Ae._applyToAxes((Ie,Ne)=>{Ie.disabled||Ie.floating||Ie.setShift(Le[Ne][Ie.getLevel()])},!1,!1,!0),Ae._applyToAxes(function(Ie){Ie.disabled||(Ie.setMinPx(Ye),Ie.setMaxPx(Ae.getDrawingWidth(!0)-De),Ie.floating||!Ie.linkedToAxis&&Ie.draw())},!1,!0,!1),Ae._applyToAxes(function(Ie){if(Ie.floating){var Ne=Ie.getFloatingAxis(),He=Ie.getFloatingValue(),je=Ne.getPx(He);Ie.setShift(je),Ie.linkedToAxis||Ie.draw()}},!1,!0,!0),se(Ae,'right',Ae.getDrawingWidth(!0),Ae.getDrawingWidth(!0),Ee,Ae.getDrawingHeight(!0)-Te),se(Ae,'left',0,0,Ee,Ae.getDrawingHeight(!0)-Te),se(Ae,'top',Ye,Ae.getDrawingWidth(!0)-De,0,0),se(Ae,'bottom',Ye,Ae.getDrawingWidth(!0)-De,Ae.getDrawingHeight(!0)-Te,Ae.getDrawingHeight(!0)-Te),Ae.clipRect.setAttribute('y',Ee),Ae.clipRect.setAttribute('x',Ye),Ae.clipRect.setAttribute('width',Ae.getDrawingWidth()-Ye-De),Ae.clipRect.setAttribute('height',Ae.getDrawingHeight()-Ee-Te),Ae.rectEvent.setAttribute('y',Ee+Ae.getPaddingTop()),Ae.rectEvent.setAttribute('x',Ye+Ae.getPaddingLeft()),Ae.drawingSpaceWidth=Ae.getDrawingWidth()-Ye-De,Ae.drawingSpaceHeight=Ae.getDrawingHeight()-Ee-Te,Ae.rectEvent.setAttribute('width',Ae.drawingSpaceWidth),Ae.rectEvent.setAttribute('height',Ae.drawingSpaceHeight),Ae.drawingSpaceMinX=Ye+Ae.getPaddingLeft(),Ae.drawingSpaceMinY=Ee+Ae.getPaddingTop(),Ae.drawingSpaceMaxX=Ae.getDrawingWidth()-De+Ae.getPaddingLeft(),Ae.drawingSpaceMaxY=Ae.getDrawingHeight()-Te+Ae.getPaddingTop(),Ae.shift=Le,Ae.redrawShapes()}function G(Ae,Me,ke){return Ae.forcedPlugin?(Ae.activePlugin=Ae.forcedPlugin,void Ae._pluginExecute(Ae.activePlugin,ke,[Ae,e])):void U(Ae,Me,[Ae,Me],ke)}function U(Ae,Me,ke,Se){var _e=Ae.options.keyActions,Ce,Pe;for(Ce=0,Pe=_e.length;Ce<Pe;Ce++){if(_e[Ce].plugin){if(Ae.forcedPlugin==_e[Ce].plugin||Ae.isActionAllowed(Me,_e[Ce]))return _e[Ce].options&&ke.push(_e[Ce].options),Ae.activePlugin=_e[Ce].plugin,Ae._pluginExecute(_e[Ce].plugin,Se,ke),Me.preventDefault(),Me.stopPropagation(),!0;}else if(_e[Ce].callback&&Ae.isActionAllowed(Me,_e[Ce]))return _e[Ce].options&&ke.push(_e[Ce].options),Me.preventDefault(),Me.stopPropagation(),_e[Ce].callback.apply(Ae,ke),!0;_e[Ce].removeSelectedShape&&Ae.isActionAllowed(Me,_e[Ce])&&(Me.preventDefault(),Me.stopPropagation(),Ae.selectedShapes.map(ve=>{ve.kill()}))}return!1}function Z(){this.dom=document.createElementNS(me.ns,'svg'),this.dom.setAttributeNS('http://www.w3.org/2000/xmlns/','xmlns:xlink','http://www.w3.org/1999/xlink'),ge.setAttributeTo(this.dom,{xmlns:me.ns,'font-family':this.options.fontFamily,'font-size':this.options.fontSize,'data-jsgraph-version':'v2.0.18'}),this.defs=document.createElementNS(me.ns,'defs'),this.dom.appendChild(this.defs),this.groupEvent=document.createElementNS(me.ns,'g'),this.rectEvent=document.createElementNS(me.ns,'rect'),ge.setAttributeTo(this.rectEvent,{'pointer-events':'fill',fill:'transparent'}),this.groupEvent.appendChild(this.rectEvent),this.dom.appendChild(this.groupEvent),this.domTitle=document.createElementNS(me.ns,'text'),this.setTitle(this.options.title),ge.setAttributeTo(this.domTitle,{'text-anchor':'middle',y:20}),this.groupEvent.appendChild(this.domTitle),this.graphingZone=document.createElementNS(me.ns,'g'),this.updateGraphingZone(),this.groupEvent.appendChild(this.graphingZone),this.axisGroup=document.createElementNS(me.ns,'g'),this.graphingZone.appendChild(this.axisGroup),this.groupGrids=document.createElementNS(me.ns,'g'),this.groupPrimaryGrids=document.createElementNS(me.ns,'g'),this.groupSecondaryGrids=document.createElementNS(me.ns,'g'),this.axisGroup.appendChild(this.groupGrids),this.groupGrids.appendChild(this.groupSecondaryGrids),this.groupGrids.appendChild(this.groupPrimaryGrids),this.plotGroup=document.createElementNS(me.ns,'g'),this.graphingZone.appendChild(this.plotGroup),this.layers=[],this._makeClosingLines(),this.clip=document.createElementNS(me.ns,'clipPath'),this.clip.setAttribute('id','_clipplot'+this._creation),this.defs.appendChild(this.clip),this.clipRect=document.createElementNS(me.ns,'rect'),this.clip.appendChild(this.clipRect),this.clip.setAttribute('clipPathUnits','userSpaceOnUse'),this.markerArrow=document.createElementNS(this.ns,'marker'),this.markerArrow.setAttribute('viewBox','0 0 10 10'),this.markerArrow.setAttribute('id','arrow'+this._creation),this.markerArrow.setAttribute('refX','6'),this.markerArrow.setAttribute('refY','5'),this.markerArrow.setAttribute('markerUnits','strokeWidth'),this.markerArrow.setAttribute('markerWidth','8'),this.markerArrow.setAttribute('markerHeight','6'),this.markerArrow.setAttribute('orient','auto');var Ae=document.createElementNS(me.ns,'path');Ae.setAttribute('d','M 0 0 L 10 5 L 0 10 z'),this.markerArrow.appendChild(Ae),this.defs.appendChild(this.markerArrow),this.markerHorizontalSplit=document.createElementNS(me.ns,'marker'),this.markerHorizontalSplit.setAttribute('viewBox','0 0 6 8'),this.markerHorizontalSplit.setAttribute('id','horionzalsplit_'+this.getId()),this.markerHorizontalSplit.setAttribute('refX','3'),this.markerHorizontalSplit.setAttribute('refY','4'),this.markerHorizontalSplit.setAttribute('markerUnits','strokeWidth'),this.markerHorizontalSplit.setAttribute('markerWidth','6'),this.markerHorizontalSplit.setAttribute('markerHeight','8');var Me=document.createElementNS(me.ns,'line');Me.setAttribute('x1','0'),Me.setAttribute('y1','8'),Me.setAttribute('x2','6'),Me.setAttribute('y2','0'),Me.setAttribute('stroke','black'),this.markerHorizontalSplit.appendChild(Me),this.defs.appendChild(this.markerHorizontalSplit),this.markerVerticalSplit=document.createElementNS(me.ns,'marker'),this.markerVerticalSplit.setAttribute('viewBox','0 0 8 6'),this.markerVerticalSplit.setAttribute('id','verticalsplit_'+this.getId()),this.markerVerticalSplit.setAttribute('refX','4'),this.markerVerticalSplit.setAttribute('refY','3'),this.markerVerticalSplit.setAttribute('markerUnits','strokeWidth'),this.markerVerticalSplit.setAttribute('markerWidth','8'),this.markerVerticalSplit.setAttribute('markerHeight','6');var Me=document.createElementNS(me.ns,'line');Me.setAttribute('x1','0'),Me.setAttribute('y1','0'),Me.setAttribute('x2','8'),Me.setAttribute('y2','6'),Me.setAttribute('stroke','black'),this.markerVerticalSplit.appendChild(Me),this.defs.appendChild(this.markerVerticalSplit),this.vertLineArrow=document.createElementNS(me.ns,'marker'),this.vertLineArrow.setAttribute('viewBox','0 0 10 10'),this.vertLineArrow.setAttribute('id','verticalline'+this._creation),this.vertLineArrow.setAttribute('refX','0'),this.vertLineArrow.setAttribute('refY','5'),this.vertLineArrow.setAttribute('markerUnits','strokeWidth'),this.vertLineArrow.setAttribute('markerWidth','20'),this.vertLineArrow.setAttribute('markerHeight','10'),this.vertLineArrow.setAttribute('orient','auto'),this.vertLineArrow.setAttribute('stroke-width','1px');var ke=document.createElementNS(me.ns,'path');ke.setAttribute('d','M 0 -10 L 0 10'),ke.setAttribute('stroke','black'),this.vertLineArrow.appendChild(ke),this.defs.appendChild(this.vertLineArrow),this.bypassHandleMouse=!1}function K(Ae){if(!Ae.wrapper)throw'No wrapper exists. Cannot register the events.';Ae.wrapper.addEventListener('keydown',ke=>{G(Ae,ke,'keydown')}),Ae.wrapper.addEventListener('keypress',ke=>{G(Ae,ke,'keypress')}),Ae.wrapper.addEventListener('keyup',ke=>{G(Ae,ke,'keyup')}),Ae.groupEvent.addEventListener('mousemove',function(ke){var Se=Ae._getXY(ke);J(Ae,Se.x,Se.y,ke)}),Ae.dom.addEventListener('mouseleave',function(){oe(Ae)}),Ae.groupEvent.addEventListener('mousedown',function(ke){if(Ae.focus(),!(3==ke.which||ke.ctrlKey)){var Se=Ae._getXY(ke);Q(Ae,Se.x,Se.y,ke)}}),Ae.dom.addEventListener('mouseup',function(ke){Ae.emit('mouseUp',ke);var Se=Ae._getXY(ke);ke.stopPropagation(),ie(Ae,Se.x,Se.y,ke)}),Ae.dom.addEventListener('dblclick',function(ke){Ae.emit('dblClick',ke);var Se=Ae._getXY(ke);te(Ae,Se.x,Se.y,ke)}),Ae.groupEvent.addEventListener('click',function(ke){if(!(3==ke.which||ke.ctrlKey)){var Se=Ae._getXY(ke);Ae.prevent(!1)||re(Ae,Se.x,Se.y,ke)}}),Ae.groupEvent.addEventListener('mousewheel',function(ke){var Se=ke.wheelDeltaY||ke.wheelDelta||-ke.deltaY;return ne(Ae,Se,ke),!1}),Ae.groupEvent.addEventListener('wheel',function(ke){var Se=ke.wheelDeltaY||ke.wheelDelta||-ke.deltaY;return ne(Ae,Se,ke),!1})}function Q(Ae,Me,ke,Se){return Ae.forcedPlugin?(Ae.activePlugin=Ae.forcedPlugin,void Ae._pluginExecute(Ae.activePlugin,'onMouseDown',[Ae,Me,ke,Se])):void $(Ae,Se,[Ae,Me,ke,Se],'onMouseDown')}function J(Ae,Me,ke,Se){if(Ae.bypassHandleMouse)return void Ae.bypassHandleMouse.handleMouseMove(Se);if(!(Ae.activePlugin&&Ae._pluginExecute(Ae.activePlugin,'onMouseMove',[Ae,Me,ke,Se]))){if(Ae._applyToAxes('handleMouseMove',[Me-Ae.options.paddingLeft,Se],!0,!1),Ae._applyToAxes('handleMouseMove',[ke-Ae.options.paddingTop,Se],!1,!0),!Ae.activePlugin){var _e;if(Ae.options.trackingLine&&Ae.options.trackingLine.enable&&Ae.options.trackingLine.snapToSerie&&'common'==Ae.options.trackingLine.mode){var Ce=Ae.options.trackingLine.snapToSerie;if(_e=Ce.handleMouseMove(!1,!0),this.trackingObject)if(!_e)Ae.trackingObject.hide();else{Ae.trackingObject.show(),Ae.trackingObject.getPosition(0).x=_e.xClosest,Ae.trackingObject.getPosition(1).x=_e.xClosest,Ae.trackingObject.redraw();var Me=Ce.getXAxis().getPx(_e.xClosest)+Ae.options.paddingLeft}var Pe=Ae.options.trackingLine.series;Pe||(Pe=Ae.getSeries().map(function(we){return{serie:we,withinPx:20,withinVal:-1}})),Ae._trackingLegend=fe(Ae,Pe,Me,ke,Ae._trackingLegend,Ae.options.trackingLine.textMethod,_e.xClosest)}}if(Ae.options.onMouseMoveData){for(var ve={},Le=0;Le<Ae.series.length;Le++)ve[Ae.series[Le].getName()]=Ae.series[Le].handleMouseMove(!1,!0);Ae.options.onMouseMoveData.call(Ae,Se,ve)}$(Ae,Se,[Ae,Me,ke,Se],'onMouseMove')}}function $(Ae,Me,ke,Se){var _e=Ae.options.mouseActions,ve=!1,Ce,Pe;for(Ce=0,Pe=_e.length;Ce<Pe;Ce++)if(_e[Ce].plugin){if(Ae.forcedPlugin==_e[Ce].plugin||Ae.isActionAllowed(Me,_e[Ce])){_e[Ce].options&&ke.push(_e[Ce].options),Ae.activePlugin=_e[Ce].plugin,Ae._pluginExecute(_e[Ce].plugin,Se,ke),ve=!0;continue}}else if(_e[Ce].callback&&Ae.isActionAllowed(Me,_e[Ce])){_e[Ce].options&&ke.push(_e[Ce].options),_e[Ce].callback.apply(Ae,ke),ve=!0;continue}else if(_e[Ce].series){var Le;'all'===_e[Ce].series&&(Le=Ae.series),Array.isArray(_e[Ce].series)||(Le=[Le]),_e[Ce].options&&ke.push(_e[Ce].options);for(;0<Le.length;Ce++)Ae._serieExecute(Le[Ce],Se,ke);ve=!0;continue}return ve}function ee(Ae){var Me=document.createElement('div');return Me.setAttribute('class','trackingLegend'),Me.style.position='absolute',Me.style.borderRadius='4px',Me.style.boxShadow='1px 1px 3px 0px rgba(100,100,100,0.6)',Me.style.border='2px solid #333333',Me.style.backgroundColor='rgba(255, 255, 255, 0.5 )',Me.style.pointerEvents='none',Me.style.paddingTop='5px',Me.style.paddingBottom='5px',Me.style.paddingLeft='10px',Me.style.paddingRight='10px',Ae.getWrapper().insertBefore(Me,Ae.getDom()),Me}function te(Ae,Me,ke,Se){Ae.options.dblclick;$(Ae,Se,[Me,ke,Se],'onDblClick')}function ie(Ae,Me,ke,Se){return Ae.bypassHandleMouse?(Ae.bypassHandleMouse.handleMouseUp(Se),void(Ae.activePlugin=!1)):void(Ae._pluginExecute(Ae.activePlugin,'onMouseUp',[Ae,Me,ke,Se]),Ae.activePlugin=!1)}function re(Ae,Me,ke,Se){Ae.emit('click',[Ae,Me,ke,Se]),$(Ae,Se,[Me,ke,Se],'onClick'),Se.target.jsGraphIsShape||Ae.prevent(!1)||!Ae.options.shapesUnselectOnClick||Ae.unselectShapes()}function ae(Ae,Me,ke,Se){var ke=ke||{},Ce={def:{x:Ae.getConstructor('graph.axis.x'),y:Ae.getConstructor('graph.axis.y')},time:{x:Ae.getConstructor('graph.axis.x.time')},bar:{x:Ae.getConstructor('graph.axis.x.bar')}},_e;switch(ke.type){case'time':var Pe=Ce.time;break;case'bar':var Pe=Ce.bar;break;case'broken':var Pe=Ce.broken;break;default:var Pe=Ce.def;}return'top'===Se||'bottom'===Se?_e=Pe.x:'left'===Se||'right'===Se?_e=Pe.y:void 0,Me=Me||0,'object'==typeof Me&&(ke=Me,Me=0),Ae.axis[Se][Me]||(Ae.axis[Se][Me]=new _e(Ae,Se,ke),Ae.axis[Se][Me].init(Ae,ke)),Ae.axis[Se][Me]}function se(Ae,Me,ke,Se,_e,Ce){if(!1!==Ae.options.close){var Pe=0;Ae.axis[Me].map(function(ve){ve.isDisplayed()&&!ve.floating&&Pe++}),(!0===Ae.options.close||Ae.options.close[Me])&&0==Pe?(Ae.closingLines[Me].setAttribute('display','block'),Ae.closingLines[Me].setAttribute('x1',ke),Ae.closingLines[Me].setAttribute('x2',Se),Ae.closingLines[Me].setAttribute('y1',_e),Ae.closingLines[Me].setAttribute('y2',Ce)):Ae.closingLines[Me].setAttribute('display','none')}}function ne(Ae,Me,ke){$(Ae,ke,[Me,ke],'onMouseWheel')&&(ke.preventDefault(),ke.stopPropagation())}function oe(Ae){Ae.options.handleMouseLeave&&Ae.options.handleMouseLeave.call(Ae)}function le(Ae){var Me=Ae._axesHaveChanged;return Ae._axesHaveChanged=!1,Me}function pe(Ae){var Me=Ae._sizeChanged;return Ae._sizeChanged=!1,Me}Object.defineProperty(T,'__esModule',{value:!0});var de=W(X),ge=function(Ae){if(Ae&&Ae.__esModule)return Ae;var Me={};if(null!=Ae)for(var ke in Ae)Object.prototype.hasOwnProperty.call(Ae,ke)&&(Me[ke]=Ae[ke]);return Me.default=Ae,Me}(Y),ue=W(I),he=W(O);const ce={title:'',paddingTop:30,paddingBottom:5,paddingLeft:20,paddingRight:20,close:{left:!0,right:!0,top:!0,bottom:!0},closeColor:'black',fontSize:12,fontFamily:'Myriad Pro, Helvetica, Arial',plugins:{},pluginAction:{},mouseActions:[],keyActions:[],wheel:{},dblclick:{},shapesUnselectOnClick:!0,shapesUniqueSelection:!0};var xe=new Map;class me extends ue.default{constructor(Ae,Me,ke){for(var Se in super(),this._creation=ge.guid(),this._drawn=!1,Ae!==Object(Ae)||Ae instanceof HTMLElement?'string'==typeof Ae?Ae=document.getElementById(Ae):'number'==typeof Ae.length&&(Ae=Ae[0]):(ke=Me,Me=Ae,Ae=null),this.options=ge.extend({},ce,Me),Z.bind(this)(),Ae&&this.setWrapper(Ae),this.prevented=!1,this.axis={left:[],top:[],bottom:[],right:[]},this.shapes=[],this.shapesLocked=!1,this.plugins={},this.options.pluginAction)this.options.pluginAction.plugin=Se,this.options.mouseActions.push(this.options.pluginAction);if(this.selectedShapes=[],this.series=[],this._axesHaveChanged=!0,this.options.hasOwnProperty('padding')&&ge.isNumeric(this.options.padding)&&(this.options.paddingTop=this.options.paddingBottom=this.options.paddingLeft=this.options.paddingRight=this.options.padding),this.currentAction=!1,this.ns=me.ns,this.nsxlink=me.nsxlink,ke)for(var Se in ke)for(var _e=0,Ce=ke[Se].length;_e<Ce;_e++)'top'==Se?this.getTopAxis(_e,ke[Se][_e]):'bottom'==Se?this.getBottomAxis(_e,ke[Se][_e]):'left'==Se?this.getLeftAxis(_e,ke[Se][_e]):'right'==Se?this.getRightAxis(_e,ke[Se][_e]):void 0;this._pluginsInit()}setWrapper(Ae){if(!Ae)throw'The wrapper DOM element was not found.';if(!Ae.appendChild)throw'The wrapper appears to be an invalid HTMLElement';if(Ae.style['-webkit-user-select']='none',Ae.style['-moz-user-select']='none',Ae.style['-o-user-select']='none',Ae.style['-ms-user-select']='none',Ae.style['user-select']='none',Ae.style.position='relative',Ae.style.outline='none',Ae.setAttribute('tabindex',1),this.wrapper=Ae,!this.height||!this.width){var Me=getComputedStyle(Ae),ke=parseInt(Me.width),Se=parseInt(Me.height);this.setSize(ke,Se),this._resize()}Ae.appendChild(this.dom),K(this)}getDom(){return this.dom}getId(){return this._creation}getWrapper(){return this.wrapper}setOption(Ae,Me){return this.options[Ae]=Me,this}setTitle(Ae){this.options.title=Ae,this.domTitle.textContent=Ae}displayTitle(){this.domTitle.setAttribute('display','inline')}hideTitle(){this.domTitle.setAttribute('display','none')}hide(){'none'!==this.dom.style.display&&(this.dom.style.display='none')}show(){'none'==this.dom.style.display&&(this.dom.style.display='initial')}redraw(Ae){if(this.width&&this.height)return this.sizeSet?!Ae||le(this)||pe(this)?(this.executeRedrawSlaves(),R(this),!0):(this.executeRedrawSlaves(!0),!1):(this._resize(),this.executeRedrawSlaves(),!0)}executeRedrawSlaves(){this._pluginsExecute('preDraw')}draw(Ae){this.drawn=!0,this.updateLegend(!0),this.drawSeries(this.redraw(!Ae))}delayUpdate(){return this._lockUpdate=!0,this}doUpdate(){return this.legend&&this.legend.update(),this.draw(),this.legend&&this.legend.update(),this}resumeUpdate(){return this._lockUpdate=!1,this}isDelayedUpdate(){return this._lockUpdate}setWidth(Ae,Me){this.width=Ae,Me||this._resize()}setHeight(Ae,Me){this.height=Ae,Me||this._resize()}resize(Ae,Me){return Ae&&Me&&this.setSize(Ae,Me),this._resize(),this}setSize(Ae,Me){this.setWidth(Ae,!0),this.setHeight(Me,!0),this.getDrawingHeight(),this.getDrawingWidth()}getWidth(){return this.width}getHeight(){return this.height}getPaddingTop(){return this.options.paddingTop}getPaddingLeft(){return this.options.paddingLeft}getPaddingBottom(){return this.options.paddingBottom}getPaddingRight(){return this.options.paddingRight}getDrawingHeight(Ae){return Ae&&this.innerHeight?this.innerHeight:this.innerHeight=this.height-this.options.paddingTop-this.options.paddingBottom}getDrawingWidth(Ae){return Ae&&this.innerWidth?this.innerWidth:this.innerWidth=this.width-this.options.paddingLeft-this.options.paddingRight}cacheOffset(){this.offsetCached=ge.getOffset(this.wrapper)}uncacheOffset(){this.offsetCached=!1}getXAxis(Ae,Me){return 0<this.axis.top.length&&0==this.axis.bottom.length?this.getTopAxis(Ae,Me):this.getBottomAxis(Ae,Me)}getYAxis(Ae,Me){return 0<this.axis.right.length&&0==this.axis.left.length?this.getRightAxis(Ae,Me):this.getLeftAxis(Ae,Me)}getTopAxis(Ae,Me){return ae(this,Ae,Me,'top')}getBottomAxis(Ae,Me){return ae(this,Ae,Me,'bottom')}getLeftAxis(Ae,Me){return ae(this,Ae,Me,'left')}getRightAxis(Ae,Me){return ae(this,Ae,Me,'right')}setXAxis(Ae,Me){this.setBottomAxis(Ae,Me)}setYAxis(Ae,Me){this.setLeftAxis(Ae,Me)}setLeftAxis(Ae,Me){Me=Me||0,this.axis.left[Me]&&this.axis.left[Me].kill(),this.axis.left[Me]=Ae}setRightAxis(Ae,Me){Me=Me||0,this.axis.right[Me]&&this.axis.right[Me].kill(),this.axis.right[Me]=Ae}setTopAxis(Ae,Me){Me=Me||0,this.axis.top[Me]&&this.axis.top[Me].kill(),this.axis.top[Me]=Ae}setBottomAxis(Ae,Me){Me=Me||0,this.axis.bottom[Me]&&this.axis.bottom[Me].kill(),this.axis.bottom[Me]=Ae}killAxis(Ae,Me=!1,ke=!1){var Se;Ae.isX()&&(-1<(Se=this.axis.bottom.indexOf(Ae))&&this.axis.bottom.splice(Se,1),-1<(Se=this.axis.top.indexOf(Ae))&&this.axis.top.splice(Se,1),!ke&&this.series.map(_e=>{_e.getXAxis()==Ae&&_e.kill()})),Ae.isY()&&(-1<(Se=this.axis.left.indexOf(Ae))&&this.axis.left.splice(Se,1),-1<(Se=this.axis.right.indexOf(Ae))&&this.axis.right.splice(Se,1),!ke&&this.series.map(_e=>{_e.getYAxis()==Ae&&_e.kill()})),this.axisGroup.removeChild(Ae.group),this.groupPrimaryGrids.removeChild(Ae.gridPrimary),this.groupSecondaryGrids.removeChild(Ae.gridSecondary),Me||this.draw(!0)}hasXAxis(Ae){return this.hasTopAxis(Ae)||this.hasBottomAxis(Ae)}hasYAxis(Ae){return this.hasLeftAxis(Ae)||this.hasRightAxis(Ae)}hasTopAxis(Ae){return this.hasAxis(Ae,this.axis.top)}hasBottomAxis(Ae){return this.hasAxis(Ae,this.axis.bottom)}hasLeftAxis(Ae){return this.hasAxis(Ae,this.axis.left)}hasRightAxis(Ae){return this.hasAxis(Ae,this.axis.right)}hasAxis(Ae,Me){for(var ke=0,Se=Me.length;ke<Se;ke++){if(Me[ke]==Ae)return!0;if(Me[ke].hasAxis(Ae))return!0}return!1}autoscaleAxes(){return this._applyToAxes('setMinMaxToFitSeries',null,!0,!0),this}autoscale(){return this.autoscaleAxes(...arguments)}autoScale(){return this.autoscaleAxes(...arguments)}autoScaleAxes(){return this.autoscaleAxes(...arguments)}autoScaleAxis(Ae){return Ae?(Ae.setMinMaxToFitSeries(),this):this}setBackgroundColor(Ae){return this.rectEvent.setAttribute('fill',Ae),this}getAxisState(){var Ae={};for(var Me in this.axis)Ae[Me]=this.axis[Me].map(function(ke){return[ke.getCurrentMin(),ke.getCurrentMax()]});return Ae}setAxisState(Ae){var Me,ke;for(var Se in Ae)if(this.axis[Se])for(Me=0,ke=Ae[Se].length;Me<ke;Me++)this.axis[Se][Me]&&(this.axis[Se][Me].setCurrentMin(Ae[Se][Me][0]),this.axis[Se][Me].setCurrentMax(Ae[Se][Me][1]));this.draw()}saveAxisState(Ae){return this.savedAxisState=this.savedAxisState||{},this.savedAxisState[Ae]=this.getAxisState(),this}recallAxisState(){return this.savedAxisState[savedName]&&this.recallAxisState(this.savedAxisState[savedName]),this}_applyToAxis(Ae){switch(Ae){case'string':return function(Me,ke,Se){for(var _e=0;_e<this.axis[Me].length;_e++)this.axis[Me][_e][ke].apply(this.axis[Me][_e],Se)};break;case'function':return function(Me,ke,Se){for(var _e=0;_e<this.axis[Me].length;_e++)ke.call(this,this.axis[Me][_e],Me,Se)};}}getBoundaryAxis(Ae,Me,ke){var Se=this.getBoundaryAxisFromSeries(Ae,Me,ke);return Se}getBoundaryAxisFromSeries(Ae,Me,ke){var Se='min'==Me,Ce=Ae.isX()?['getMinX','getMaxX']:['getMinY','getMaxY'],Pe=Ce[Se?0:1],ve=Se?+(1/0):-(1/0),_e,we,Ee,Te,Xe,Ye;for(_e=Se?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,Ee=this.getSeriesFromAxis(Ae,!0),(Xe=0,Ye=Ee.length);Xe<Ye;Xe++)(we=Ee[Xe],!!we.isShown())&&(Te=we[Pe](ke),_e=Math[Me](isNaN(_e)?ve:_e,isNaN(Te)?ve:Te));return _e}getSeriesFromAxis(Ae){for(var Me=[],ke=this.series.length-1;0<=ke;ke--)(this.series[ke].getXAxis()==Ae||this.series[ke].getYAxis()==Ae)&&Me.push(this.series[ke]);return Me}updateDataMinMaxAxes(Ae){var Me=['bottom','top','left','right'],ke,Se,_e,Ce,Pe;for(Se=0,_e=Me.length;Se<_e;Se++)for(Ce=this.axis[Me[Se]].length-1;0<=Ce;Ce--)(ke=this.axis[Me[Se]][Ce],Pe=2>Se?'x':'y',!ke.disabled)&&(ke.setMinValueData(this.getBoundaryAxis(this.axis[Me[Se]][Ce],'min',Ae)),ke.setMaxValueData(this.getBoundaryAxis(this.axis[Me[Se]][Ce],'max',Ae)))}_applyToAxes(Ae,Me,ke,Se){var _e=[],Ce=0,Pe;for((ke||void 0==ke)&&(_e.push('top'),_e.push('bottom')),(Se||void 0==Se)&&(_e.push('left'),_e.push('right')),Pe=_e.length;Ce<Pe;Ce++)this._applyToAxis(typeof Ae).call(this,_e[Ce],Ae,Me)}findAxesLinkedTo(Ae){var Me=[];return this._applyToAxes(function(ke){ke.linkedToAxis&&ke.linkedToAxis.axis==Ae&&Me.push(ke)},{},Ae instanceof this.getConstructor('graph.axis.x'),Ae instanceof this.getConstructor('graph.axis.y')),Me}_axisHasChanged(){this._axesHaveChanged=!0}newSerie(Ae,Me,ke){let Se;return('object'==typeof Me||ke||(ke=Me,Me={}),ke||(ke=me.SERIE_LINE),Se=this.getSerie(Ae))?Se:(Se=B(this,Ae,Me,ke))?(this.series.push(Se),this.emit('newSerie',Se),Se):void 0}getSerie(Ae){if('number'==typeof Ae)return this.series[Ae]||!1;'function'==typeof Ae&&(Ae=Ae());for(var Me=0,ke=this.series.length;Me<ke;Me++)if(this.series[Me].getName()==Ae||this.series[Me]==Ae)return this.series[Me];return!1}getSeries(){return this.series}allSeries(...Ae){return this.series.filter(Me=>{return Ae.include(Me.getType())})}drawSerie(Ae,Me){if(!Ae.draw)throw'Serie has no method draw';Ae.draw(Me)}drawSeries(Ae){if(this.width&&this.height)for(var Me=this.series.length-1;0<=Me;Me--)this.series[Me].isShown()&&this.drawSerie(this.series[Me],Ae)}resetSeries(){this.removeSeries()}killSeries(){this.resetSeries()}removeSeries(){for(;this.series[0];)this.series[0].kill(!0);this.series=[],this.legend&&this.legend.update()}selectSerie(Ae,Me){'object'==typeof Ae||(Ae=this.getSerie(Ae));this.selectedSerie==Ae&&this.selectedSerie.selectionType==Me||(this.selectedSerie!==Ae&&this.selectedSerie&&this.unselectSerie(this.selectedSerie),this.selectedSerie=Ae,this.triggerEvent('onSelectSerie',Ae),Ae.select(Me||'selected'))}getSelectedSerie(){return this.selectedSerie}unselectSerie(Ae){Ae.unselect&&(Ae.unselect(),this.selectedSerie=!1,this.triggerEvent('onUnselectSerie',Ae))}getShapesOfSerie(Ae){for(var Me=[],ke=this.shapes.length-1;0<=ke;ke--)this.shapes[ke].getSerie()==Ae&&Me.push(this.shapes[ke]);return Me}makeToolbar(Ae){var Me=this.getConstructor('graph.toolbar');return Me?this.toolbar=new Me(this,Ae):ge.throwError('No constructor exists for toolbar')}getShapes(){return this.shapes||[]}newShape(Ae,Me,ke,Se){var _e=this;if(this.prevent(!1),!ke&&(this.emit('beforeNewShape',Me),this.prevent(!1)))return!1;'object'==typeof Ae&&(ke=Me,Me=Ae,Ae=Me.type),Me=Me||{},Me._id=ge.guid();var Pe;if(Pe='function'==typeof Ae?Ae:this.getConstructor('graph.shape.'+Ae),!Pe)return ge.throwError('No constructor for this shape');var ve=new Pe(this,Me);if(!ve)return ge.throwError('Failed to construct shape.');if(ve.type=Ae,ve.graph=this,ve._data=Me,void 0!==Me.properties&&ve.setProperties(Me.properties),ve.init(this,Se),Me.position)for(var Le=0,we=Me.position.length;Le<we;Le++)ve.setPosition(new de.default(Me.position[Le]),Le);if(void 0!==Me.fillColor&&ve.setFillColor(Me.fillColor),void 0!==Me.fillOpacity&&ve.setFillOpacity(Me.fillOpacity),void 0!==Me.strokeColor&&ve.setStrokeColor(Me.strokeColor),void 0!==Me.strokeWidth&&ve.setStrokeWidth(Me.strokeWidth),void 0!==Me.layer&&ve.setLayer(Me.layer),!0==Me.locked&&ve.lock(),!0==Me.movable&&ve.movable(),!0==Me.selectable&&ve.selectable(),!0==Me.resizable&&ve.resizable(),void 0!==Me.attributes&&ve.setProp('attributes',Me.attributes),void 0!==Me.handles&&ve.setProp('handles',Me.handles),void 0!==Me.selectOnMouseDown&&ve.setProp('selectOnMouseDown',!0),void 0!==Me.selectOnClick&&ve.setProp('selectOnClick',!0),void 0!==Me.highlightOnMouseOver&&ve.setProp('highlightOnMouseOver',!0),Me.labelEditable&&ve.setProp('labelEditable',Me.labelEditable),Me.labels&&!Me.label&&(Me.label=Me.labels),void 0!==Me.label){Array.isArray(Me.label)||(Me.label=[Me.label]);for(var Le=0,we=Me.label.length;Le<we;Le++)ve.showLabel(Le),ve.setLabelText(Me.label[Le].text,Le),ve.setLabelPosition(Me.label[Le].position,Le),ve.setLabelColor(Me.label[Le].color||'black',Le),ve.setLabelSize(Me.label[Le].size,Le),ve.setLabelAngle(Me.label[Le].angle||0,Le),ve.setLabelBaseline(Me.label[Le].baseline||'no-change',Le),ve.setLabelAnchor(Me.label[Le].anchor||'start',Le),ve.setLabelBackgroundColor(Me.label[Le].backgroundColor||'transparent',Le),ve.setLabelBackgroundOpacity(Me.label[Le].backgroundOpacity||1,Le)}return Me.serie&&ve.setSerie(this.getSerie(Me.serie)),ve.createHandles(),this.shapes.push(ve),ke||this.emit('newShape',ve,Me),ve}newPosition(){return new de.default(...arguments)}redrawShapes(){for(var Ae=0,Me=this.shapes.length;Ae<Me;Ae++)this.shapes[Ae].redraw()}removeShapes(){for(var Ae=0,Me=this.shapes.length;Ae<Me;Ae++)this.shapes[Ae]&&this.shapes[Ae].kill&&this.shapes[Ae].kill(!0);this.shapes=[]}selectShape(Ae,Me){if(Ae){if(-1<this.selectedShapes.indexOf(Ae))return!1;if(!Ae.isSelectable())return!1;Me||this.emit('beforeShapeSelect',Ae),this.prevent(!1)||(0<this.selectedShapes.length&&this.options.shapesUniqueSelection&&this.unselectShapes(Me),Ae._select(Me),this.selectedShapes.push(Ae),!Me&&this.emit('shapeSelect',Ae))}}getSelectedShapes(){return this.selectedShapes}unselectShape(Ae,Me){if(-1!=this.selectedShapes.indexOf(Ae))return Me||this.emit('beforeShapeUnselect',Ae),this.cancelUnselectShape?void(this.cancelUnselectShape=!1):void(Ae._unselect(),this.selectedShapes.splice(this.selectedShapes.indexOf(Ae),1),!Me&&this.emit('shapeUnselect',Ae))}unselectShapes(Ae){for(;this.selectedShapes[0];)this.unselectShape(this.selectedShapes[0],Ae);return this}_removeShape(Ae){this.shapes.splice(this.shapes.indexOf(Ae),1)}appendShapeToDom(Ae){Ae.isHTML()&&this.wrapper.insertBefore(Ae._dom,this.dom),this.getLayer(Ae.getLayer(),'shape').appendChild(Ae.group)}removeShapeFromDom(Ae){Ae.isHTML()&&this.wrapper.removeChild(Ae._dom),this.getLayer(Ae.getLayer(),'shape').removeChild(Ae.group)}appendSerieToDom(Ae){this.getLayer(Ae.getLayer(),'serie').appendChild(Ae.groupMain)}removeSerieFromDom(Ae){this.getLayer(Ae.getLayer(),'serie').removeChild(Ae.groupMain)}getLayer(Ae,Me){if(!this.layers[Ae]){this.layers[Ae]=[],this.layers[Ae][0]=document.createElementNS(me.ns,'g'),this.layers[Ae][0].setAttribute('data-layer',Ae),this.layers[Ae][1]=document.createElementNS(me.ns,'g'),this.layers[Ae][2]=document.createElementNS(me.ns,'g'),this.layers[Ae][0].appendChild(this.layers[Ae][1]),this.layers[Ae][0].appendChild(this.layers[Ae][2]);for(var ke=1,Se;!(Se=this.layers[Ae-ke])&&0<=Ae-ke;)ke++;Se?Se.nextSibling?this.plotGroup.insertBefore(this.layers[Ae][0],Se.nextSibling):this.plotGroup.appendChild(this.layers[Ae][0]):this.plotGroup.insertBefore(this.layers[Ae][0],this.plotGroup.firstChild)}return this.layers[Ae]['shape'==Me?2:1]}focus(){this.wrapper.focus()}elementMoving(Ae){this.bypassHandleMouse=Ae}stopElementMoving(Ae){Ae&&Ae==this.bypassHandleMouse?this.bypassHandleMouse=!1:!Ae&&(this.bypassHandleMouse=!1)}_makeClosingLines(){this.closingLines={};for(var Ae=['top','bottom','left','right'],Me=0,Se;Me<4;Me++)Se=document.createElementNS(me.ns,'line'),Se.setAttribute('stroke',this.options.closeColor),Se.setAttribute('shape-rendering','crispEdges'),Se.setAttribute('stroke-linecap','square'),Se.setAttribute('display','none'),this.closingLines[Ae[Me]]=Se,this.graphingZone.appendChild(Se)}isActionAllowed(Ae,Me){if((Me.type===Ae.type||void 0===Me.type&&'mousedown'===Ae.type||('wheel'===Ae.type||'mousewheel'===Ae.type)&&'mousewheel'==Me.type)&&!(Me.enabled&&('function'==typeof Me.enabled?!Me.enabled(this):!actions.enabled))){if(Me.key&&Me.key!==Ae.keyCode){if({backspace:8,enter:13,tab:9,shift:16,ctrl:17,alt:18,pause:19,escape:27,up:33,down:34,left:37,right:39}[Me.key]!==Ae.keyCode)return}return void 0===Me.shift&&(Me.shift=!1),void 0===Me.ctrl&&(Me.ctrl=!1),void 0===Me.meta&&(Me.meta=!1),void 0===Me.alt&&(Me.alt=!1),Ae.shiftKey==Me.shift&&Ae.ctrlKey==Me.ctrl&&Ae.metaKey==Me.meta&&Ae.altKey==Me.alt}}forcePlugin(Ae){this.forcedPlugin=Ae}unforcePlugin(){this.forcedPlugin=!1}_pluginsExecute(Ae,Me){for(var ke in this.plugins)this.plugins[ke]&&this.plugins[ke][Ae]&&this.plugins[ke][Ae].apply(this.plugins[ke],Me)}_pluginExecute(Ae,Me,ke){return Ae?this.plugins[Ae]&&this.plugins[Ae][Me]?(this.plugins[Ae][Me].apply(this.plugins[Ae],ke),!0):void 0:void 0}pluginYieldActiveState(){this.activePlugin=!1}_serieExecute(Ae,Me,ke){'object'!=typeof serie&&(serie=this.getSerie(serie)),'function'==typeof serie[Me]&&serie.apply(serie,ke)}_pluginsInit(){var Ae,Me,ke;for(var Se in this.options.plugins)if(Me=Se,ke=this.options.plugins[Se],Ae=this.getConstructor('graph.plugin.'+Me),Ae){var _e=ge.extend(!0,{},Ae.defaults(),ke);this.plugins[Me]=new Ae(_e),ge.mapEventEmission(this.plugins[Me].options,this.plugins[Me]),this.plugins[Me].init(this,ke)}else ge.throwError('Plugin "'+Me+'" has not been registered')}getPlugin(Ae){var Me=this.plugins[Ae];return Me?Me:ge.throwError('Plugin "'+Ae+'" has not been loaded or properly registered')}triggerEvent(){var Ae=arguments[0],Me=Array.prototype.splice.apply(arguments,[0,1]);return'function'==typeof this.options[Ae]?this.options[Ae].apply(this,arguments):void 0}makeLegend(Ae){if(this.legend)return this.legend;var Me=this.getConstructor('graph.legend');if(Me)this.legend=new Me(this,Ae);else return ge.throwError('Graph legend is not available as it has not been registered');return this.legend}updateLegend(Ae=!1){if(this.legend)return this.legend.update(Ae),this}getLegend(){return this.legend?this.legend:void 0}requireLegendUpdate(){this.legend&&this.legend.requireDelayedUpdate()}orthogonalProjectionSetup(){this.options.zAxis=ge.extend(!0,{maxZ:10,minZ:0,shiftX:-25,shiftY:-15,xAxis:this.getXAxis(),yAxis:this.getYAxis()})}orthogonalProjectionUpdate(){this.zAxis||(this.zAxis={g:document.createElementNS(me.ns,'g'),l:document.createElementNS(me.ns,'line')},this.zAxis.g.appendChild(this.zAxis.l),this.groupGrids.appendChild(this.zAxis.g));let Ae=this.options.zAxis.xAxis,Me=this.options.zAxis.yAxis;var ke=Ae.getMinPx(),Se=Me.getMinPx(),_e=Ae.getZProj(this.options.zAxis.maxZ),Ce=Me.getZProj(this.options.zAxis.maxZ);this.zAxis.l.setAttribute('stroke','black'),this.zAxis.l.setAttribute('x1',ke),this.zAxis.l.setAttribute('x2',ke+_e),this.zAxis.l.setAttribute('y1',Se),this.zAxis.l.setAttribute('y2',Se+Ce),this.updateDataMinMaxAxes(!0);var Pe=this.series.map(Le=>{return[Le.getZPos(),Le]});Pe.sort((Le,we)=>{return we[0]-Le[0]});let ve=0;Pe.forEach(Le=>{Le[1].setLayer(ve),this.appendSerieToDom(Le[1]),ve++}),this.drawSeries(!0)}kill(){this.wrapper.removeChild(this.dom)}_removeSerie(Ae){this.series.splice(this.series.indexOf(Ae),1)}contextListen(Ae,Me,ke){this;if(this.options.onContextMenuListen)return this.options.onContextMenuListen(Ae,Me,ke)}lockShapes(){this.shapesLocked=!0;for(var Ae=0,Me=this.shapes.length;Ae<Me;Ae++)this.shapes[Ae].moving=!1,this.shapes[Ae].resizing=!1}unlockShapes(){this.shapesLocked=!1}prevent(Ae){var Me=this.prevented;return-1!=Ae&&(this.prevented=void 0==Ae||Ae),Me}_getXY(Ae){var Me=Ae.clientX,ke=Ae.clientY,Se=this.offsetCached||ge.getOffset(this.wrapper);return Me-=Se.left,ke-=Se.top,{x:Me,y:ke}}_resize(){this.width&&this.height&&(this.getDrawingWidth(),this.getDrawingHeight(),this.sizeSet=!0,this.dom.setAttribute('width',this.width),this.dom.setAttribute('height',this.height),this.domTitle.setAttribute('x',this.width/2),this._sizeChanged=!0,this.drawn&&(this.requireLegendUpdate(),this.draw(!0)))}updateGraphingZone(){ge.setAttributeTo(this.graphingZone,{transform:'translate('+this.options.paddingLeft+', '+this.options.paddingTop+')'}),this._sizeChanged=!0}getDrawingSpaceWidth(){return()=>this.drawingSpaceWidth}getDrawingSpaceHeight(){return()=>this.drawingSpaceHeight}getDrawingSpaceMinX(){return()=>this.drawingSpaceMinX}getDrawingSpaceMinY(){return()=>this.drawingSpaceMinY}getDrawingSpaceMaxX(){return()=>this.drawingSpaceMaxX}getDrawingSpaceMaxY(){return()=>this.drawingSpaceMaxY}trackingLine(Ae){var Me=this;return'boolean'==typeof Ae?void(this.options.trackingLine&&(this.options.trackingLine.enable=Ae)):(Ae&&(this.options.trackingLine=Ae),Ae.series=Ae.series||[],Ae.enable=void 0===Ae.enable||!!Ae.enable,'individual'==Ae.mode?Ae.series&&(!Array.isArray(Ae.series)&&('all'==Ae.series?Ae.series=this.series.map(ke=>{serie:;}):Ae.series=[Ae.series]),Ae.series.forEach(ke=>{if('object'!=typeof ke.serie){if('object'!=typeof ke)throw'Misuse of the trackingLine() method. Each serie must be an object with the serie property: { series: [ { serie: jsGraphSerie, options: { ... someOptions } } ] }';ke.serie=this.getSerie(ke.serie)}ke.serie&&Me.addSerieToTrackingLine(ke.serie,ke)})):Ae.series.map(ke=>{ke.serie.disableTracking()}),!Ae.noLine)?(this.trackingObject||(this.trackingObject=this.newShape('line',ge.extend(!0,{position:[{y:'min'},{y:'max'}],stroke:'black',layer:-1},Ae.trackingLineShapeOptions))),this.trackingObject.draw(),this.trackingObject):void 0}addSerieToTrackingLine(Ae,Me){this.options.trackingLine||this.trackingLine({mode:'individual'}),this.options.trackingLine.series.push(Object.assign({serie:Ae},Me)),Ae.enableTracking((ke,Se,_e,Ce)=>{this.options.trackingLine.enable&&Se&&(this.trackingObject&&(this.trackingObject.show(),this.trackingObject.getPosition(0).x=Se.trueX,this.trackingObject.getPosition(1).x=Se.trueX,this.trackingObject.redraw()),ke._trackingLegend=fe(this,{serie:ke},_e,Ce,ke._trackingLegend,Me.textMethod?Me.textMethod:Pe=>{for(var ve in Pe){return Pe[ve].serie.serie.getName()+': '+Pe[ve].serie.serie.getYAxis().valueToHtml(Pe[ve].yValue)}},Se.trueX),ke._trackingLegend&&(ke._trackingLegend.style.display='block'))},ke=>{this.trackingObject&&this.trackingObject.hide(),ke.trackingShape&&ke.trackingShape.hide(),ke._trackingLegend&&(ke._trackingLegend.style.display='none'),ke._trackingLegend=fe(this,{serie:ke},!1,!1,ke._trackingLegend,!1,!1)})}setKatexRenderer(Ae){this._katexRenderer=Ae}hasKatexRenderer(){return!!this._katexRenderer}renderWithKatex(Ae,Me){if(this._katexRenderer){Me?Me.removeChild(Me.firstChild):Me=document.createElementNS(me.ns,'foreignObject');let ke=document.createElement('div');return Me.appendChild(ke),this._katexRenderer(Ae,ke),Me}return!1}static fromSchema(Ae,Me){var Se={},_e={left:[],top:[],right:[],bottom:[]},ke;return Ae.title&&(Se.title=Ae.title),Ae.axis&&Ae.axis.map(function(Pe){Pe.type||ge.throwError('Axis type is required (top, bottom, left or right)');var ve={};Pe.label&&(ve.labelValue=Pe.label),void 0!==Pe.unit&&(ve.unit=Pe.unit),void 0!==Pe.unitWrapperAfter&&(ve.unitWrapperAfter=Pe.unitWrapperAfter),void 0!==Pe.unitWrapperBefore&&(ve.unitWrapperBefore=Pe.unitWrapperBefore),void 0!==Pe.min&&(ve.forcedMin=Pe.min),void 0!==Pe.max&&(ve.forcedMax=Pe.max),void 0!==Pe.flip&&(ve.flipped=Pe.flip),_e[Pe.type].push(ve),Pe._jsGraphIndex=_e[Pe.type].length-1}),ke=new me(Me,Se,_e),Ae.width&&ke.setWidth(Ae.width),Ae.height&&ke.setHeight(Ae.width),ke._resize(),Ae.data&&Ae.data.map(function(Pe){var ve=Pe.type,we={},Le,Ee;switch(Pe.type){case'bar':ge.throwError('Bar charts not supported'),ve=!1;break;case'scatter':ve=me.SERIE_SCATTER;break;case'box':ve=me.SERIE_BOX,('x'==Pe.orientation||'y'==Pe.orientation)&&(we.orientation=Pe.orientation);break;default:ve=me.SERIE_LINE;}if(!ve)return void ge.throwError('No valid serie type was found');if(Le=ke.newSerie(Pe.id||Pe.label||ge.guid(),we,ve),Pe.lineStyle&&Pe.lineStyle.map(function(De){var Ie={};De.styleName=De.styleName||'unselected',ve===me.SERIE_LINE?(void 0!==De.lineWidth&&(Ie.lineWidth=De.lineWidth),void 0!==De.color&&(Ie.lineColor=De.color),De.lineStyle&&(Ie.lineStyle=De.lineStyle),Le.setStyle(Ie,De.styleName)):void 0}),Pe.style&&Pe.style.map(function(De){De.styleName=De.styleName||'unselected',Array.isArray(De.styles)||(De.styles=[De.styles]);var Ne=De.styles.map(function(He){switch(ve){case me.SERIE_LINE:return{type:He.shape,zoom:He.zoom,strokeWidth:He.lineWidth,strokeColor:He.lineColor,fillColor:He.color,points:He.points};break;case me.SERIE_BOX:return He;break;case me.SERIE_SCATTER:}});ve===me.SERIE_LINE?Le.setMarkers(Ne,De.styleName):ve===me.SERIE_SCATTER?Le.setStyle(Ne,{},De.styleName):ve===me.SERIE_BOX?Le.setStyle(Ne[0],De.stylename):void 0}),Pe.errorX||Pe.errorY){var Te=[];if(Pe.errorX)for(var Xe=0,Ye=Pe.errorX.length;Xe<Ye;Xe++)Te[Xe]=Te[Xe]||[[],[]],Te[Xe][0][0]=Pe.errorX[Xe];if(Pe.errorY)for(var Xe=0,Ye=Pe.errorY.length;Xe<Ye;Xe++)Te[Xe]=Te[Xe]||[[]],Te[Xe][1][0]=Pe.errorY[Xe];Le.setDataError(Te).setErrorStyle([{type:'bar',x:{},y:{}}])}switch(Ae.axis?(Ee=Ae.axis[Pe.xAxis],Ee&&('top'===Ee.type||'bottom'===Ee.type)?'top'==Ee.type?Le.setXAxis(ke.getTopAxis(Ee._jsGraphIndex)):'bottom'==Ee.type&&Le.setXAxis(ke.getBottomAxis(Ee._jsGraphIndex)):(ge.warn('No x axis found. Setting automatically'),Le.setXAxis(ke.getXAxis(0))),Ee=Ae.axis[Pe.yAxis],Ee&&('left'===Ee.type||'right'===Ee.type)?'left'==Ee.type?Le.setYAxis(ke.getLeftAxis(Ee._jsGraphIndex)):'right'==Ee.type&&Le.setYAxis(ke.getRightAxis(Ee._jsGraphIndex)):(ge.warn('No y axis found. Setting automatically'),Le.setYAxis(ke.getYAxis(0)))):(ge.warn('No axes found. Setting automatically'),Le.autoAxis()),ve){case me.SERIE_BOX:Le.setData(Pe.boxes);break;default:case me.SERIE_SCATTER:case me.SERIE_LINE:Le.setData([{x:Pe.x,y:Pe.y}]);}}),ke.autoscaleAxes(),ke.draw(),ke}exportToSchema(){let Ae={};Ae.title=this.options.title,Ae.width=this.getWidth(),Ae.height=this.getHeight();let ke=[],Se={x:[],y:[]};['top','bottom','left','right'].map(ve=>{this.axis[ve]&&(ke=ke.concat(this.axis[ve].map(Le=>{return{type:ve,label:Le.options.label,unit:Le.options.unit,min:Le.options.forcedMin,max:Le.options.forcedMax,flip:Le.options.flipped}})),'top'==ve||'bottom'==ve?Se.x=Se.x.concat(this.axis[ve]):Se.y=Se.y.concat(this.axis[ve]))}),Ae.axis=ke;let Ce=ve=>{switch(ve){case me.SERIE_LINE:return'line';break;case me.SERIE_BAR:return'bar';break;case me.SERIE_SCATTER:return'scatter';}},Pe=(ve,Le)=>{let we=[];switch(ve.getType()){case me.SERIE_LINE:for(var Ee=0;Ee<ve.data.length;Ee++)for(var Te=0;Te<ve.data[Ee].length-1;Te+=2)we.push(ve.data[Ee][Te+(Le&&ve.isFlipped()||!Le&&!ve.isFlipped()?1:0)]);break;case me.SERIE_SCATTER:for(var Te=0;Te<ve.data.length-1;Te+=2)we.push(ve.data[Ee+(Le&&ve.isFlipped()||!Le&&!ve.isFlipped()?1:0)]);}return we};return Ae.data=[].concat(this.series.map(ve=>{let Le=[],we=[];if(ve.getType()==me.SERIE_LINE)for(var Ee in ve.styles){we.push({styleName:Ee,color:ve.styles[Ee].lineColor,lineWidth:ve.styles[Ee].lineWidth,lineStyle:ve.styles[Ee].lineStyle});let Te={styleName:Ee,styles:[]};Le.push(Te),Te.styles=Te.styles.concat((ve.styles[Ee].markers||[]).map(Xe=>{return{shape:Xe.type,zoom:Xe.zoom,lineWidth:Xe.strokeWidth,lineColor:Xe.strokeColor,color:Xe.fillColor,points:Xe.points}}))}return{label:ve.getLabel(),id:ve.getName(),type:Ce(ve.getType()),x:Pe(ve,!0),y:Pe(ve,!1),xAxis:Se.x.indexOf(ve.getXAxis()),yAxis:Se.y.indexOf(ve.getYAxis()),style:Le,lineStyle:we}})),Ae}static registerConstructor(Ae,Me){return xe.has(Ae)?ge.throwError('Constructor '+Me+' already exists.'):void xe.set(Ae,Me)}static getConstructor(Ae,Me=!1){return xe.has(Ae)?xe.get(Ae):!Me&&ge.throwError('Constructor "'+Ae+'" doesn\'t exist')}static newWaveform(){return new he.default(...arguments)}static waveform(){return new he.default(...arguments)}}me.prototype.getConstructor=me.getConstructor;var fe=function(Ae,Me,ke,Se,_e,Ce,Pe){var ve=!1;Array.isArray(Me)||(Me=[Me]);var Le=[];if(!_e&&Ae.options.trackingLine.legend&&(ve=!0,_e=ee(Ae)),Me.map(Ee=>{var Te=Ee.serie.handleMouseMove(Pe,!1);if(!Te||!Ce)return Ee.serie.trackingShape&&Ee.serie.trackingShape.hide(),_e;if(0<Ee.withinPx&&1e-14<Math.abs(ke-Ae.options.paddingLeft-Ee.serie.getXAxis().getPx(Te.xClosest))-Ee.withinPx||0<Ee.withinVal&&Math.abs(Ee.serie.getXAxis().getVal(ke-Ae.options.paddingLeft)-Te.xClosest)-Ee.withinVal>Ee.serie.getXAxis().getVal(ke-Ae.options.paddingLeft)/1e5)Ee.serie.trackingShape&&Ee.serie.trackingShape.hide();else{if(Le[Ee.serie.getName()]={yValue:Te.xClosest,xValue:Te.yClosest,serie:Ee,index:Te},Ee.serie.trackingShape||(Ee.serie.trackingShape=Ae.newShape(Ae.options.trackingLine.serieShape.shape||'ellipse',{fillColor:Ee.serie.getLineColor(),strokeColor:'White',strokeWidth:Ee.serie.getLineWidth()},!0,Ae.options.trackingLine.serieShape.properties||{rx:[3*Ee.serie.getLineWidth()],ry:[3*Ee.serie.getLineWidth()]}).setSerie(Ee.serie).forceParentDom(Ee.serie.groupMain).draw(),Ae.options.trackingLine.serieShape.onCreated&&Ae.options.trackingLine.serieShape.onCreated(Ee.serie.trackingShape),Ee.serie.trackingShape.on('changed',()=>{Ae.options.trackingLine.serieShape.onChanged&&Ae.options.trackingLine.serieShape.onChanged(Ee.serie.trackingShape)})),Ee.serie.trackingShape.show(),Ee.serie.trackingShape.getPosition(0).x=Te.xClosest,Ae.options.trackingLine.serieShape.magnet){let Xe=Ae.options.trackingLine.serieShape.magnet,Ye=Xe.within,De;Xe.withinPx&&(Ye=Ee.serie.getXAxis().getRelVal(Xe.withinPx)),(De=Ee.serie.findLocalMinMax(Te.xClosest,Ye,Xe.mode))&&(Ee.serie.trackingShape.getPosition(0).x=De)}Ee.serie.trackingShape.redraw()}}),!!Ae.options.trackingLine.legend){if(0==Object.keys(Le).length||!Ce)_e.style.display='none';else{'none'==_e.style.display||ve?ye(Ae,_e,ke,Se,!0):be(Ae,_e,ke,Se),_e.style.display='block';var we=Ce(Le,Pe,ke,Se);_e.innerHTML=we}return _e}},ye=function(Ae,Me,ke,Se,_e){function Ce(){var Te=(Date.now()-ve)/200;1<Te&&(Te=1),Me.style.marginLeft=(ke-we)*Te+we+'px',Me.style.marginTop=(Se-Ee)*Te+Ee+'px',1>Te&&window.requestAnimationFrame(Ce)}var ve=Date.now(),Le=Me.offsetHeight,we=parseInt(Me.style.marginLeft.replace('px','')||0),Ee=parseInt(Me.style.marginTop.replace('px','')||0);return ke=ke>Ae.getWidth()/2?ke-ke%10-20-Me.offsetWidth:ke-ke%10+30,Se=Se-Se%10+Le/2,_e?(Me.style.marginLeft=ke+'px',void(Me.style.marginTop=Se+'px')):void window.requestAnimationFrame(Ce)},be=ge.debounce(ye,50);me.SERIE_LINE=Symbol(),me.SERIE_SCATTER=Symbol(),me.SERIE_CONTOUR=Symbol(),me.SERIE_BAR=Symbol(),me.SERIE_BOX=Symbol(),me.SERIE_ZONE=Symbol(),me.SERIE_LINE_COLORED=Symbol(),me.SERIE_ZONE=Symbol(),me.SERIE_DENSITYMAP=Symbol(),me.SERIE_LINE_3D=Symbol(),me.SERIE_ZONE_3D=Symbol(),me.TICKS_OUTSIDE=Symbol(),me.TICKS_INSIDE=Symbol(),me.TICKS_CENTERED=Symbol(),me.ns='http://www.w3.org/2000/svg',me.nsxlink='http://www.w3.org/1999/xlink',T.default=me})},function(u,A){var C,P,E;(function(T,X){P=[A],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T){'use strict';function X(O){return O&&O.indexOf&&-1<O.indexOf('px')&&parseInt(O.replace('px',''))}function Y(O){return!isNaN(parseFloat(O))&&isFinite(O)}Object.defineProperty(T,'__esModule',{value:!0});class I{constructor(O,F,W,B){'object'==typeof O?(this.x=O.x,this.y=O.y,this.dx=O.dx,this.dy=O.dy):(this.x=O,this.y=F,this.dx=W,this.dy=B)}duplicate(){return new I(this.x,this.y,this.dx,this.dy)}compute(O,F,W,B){if(O&&F&&W&&O.hasXAxis&&O.hasYAxis||O.throw(),!O.hasXAxis(F))throw'Graph does not contain the x axis that was used as a parameter';if(!O.hasYAxis(W))throw'Graph does not contain the x axis that was used as a parameter';return this._compute(O,F,W,B)}_compute(O,F,W,B){var V=this._relativeTo;if(V)var R=V._compute(O,F,W,B);var U={x:!1,y:!1},G;for(var Z in F||(F=O.getXAxis()),W||(W=O.getYAxis()),U){var K='x'==Z?F:W,Q=this[Z],J=this['d'+Z];if(void 0!==Q||(void 0===J||void 0!==V)&&void 0!==V)void 0!==Q&&(U[Z]=this.getPx(Q,K));else if('x'==Z){if(void 0===J)continue;U[Z]=V?V[Z]:K.getPos(0)}else if(void 0!==this.x&&B)if(!1!==X(this.x))console.warn('You have defined x in px and not y. Makes no sense. Returning 0 for y'),U[Z]=0;else{var $=B.searchClosestValue(this.x);$?U[Z]=B.getY($.yMin):(console.warn('Could not find y position for x = '+this.x+' on serie "'+B.getName()+'". Returning 0 for y.'),U[Z]=0)}if(void 0!==J){var ee=void 0!==Q||void 0==R||void 0==R[Z]?U[Z]:R[Z];if('y'==Z&&R&&void 0!==R.x&&void 0==R.y){if(!B){throw'Error. No serie exists. Cannot find y value'}var $=B.searchClosestValue(V.x);$&&(ee=B.getY($.yMin))}!1===(G=X(J))?!1===(G=this._parsePercent(J))?K&&(U[Z]=ee+K.getRelPx(J)):U[Z]=ee+this._getPositionPx(G,!0,K,O):U[Z]=ee+G}}return U}_getPositionPx(O,F,W,B){var V;if(!1!==(V=X(O)))return V;return!1===(V=this._parsePercent(O))?W?W.getPos(O):void 0:V/100*(F?B.getDrawingWidth():B.getDrawingHeight())}_parsePercent(O){return O&&O.indexOf&&-1<O.indexOf('%')&&O}getDeltaPx(O,F){var W;return!1===(W=X(O))?F.getRelPx(O)+'px':W+'px'}deltaPosition(O,F,W){O='y'==O?'y':'x';var B=this[O],V=this['d'+O],R,G;if(B!==void 0)!1===(R=X(B))?(B=this.getValPosition(B,W),this[O]=!1===(G=X(F))?B+F:B+W.getRelVal(G)):!1===(G=X(F))?this[O]=R+W.getRelPx(F)+'px':this[O]=R+G+'px';else if(V!==void 0){if('y'==O&&B===void 0&&!this._relativeTo)return;!1===(R=X(V))?(V=this.getValPosition(V,W),this['d'+O]=!1===(G=X(F))?V+F:V+W.getRelVal(G)):!1===(G=X(F))?this['d'+O]=R+W.getRelPx(F)+'px':this['d'+O]=R+G+'px'}}getValPosition(O,F){return'max'==O?F.getMaxValue():'min'==O?F.getMinValue():O}getPx(O,F,W){var B;if('function'==typeof O)return O(F,W);if(!1!==(B=X(O)))return B;if(!1!==(B=this._parsePercent(O)))return B;if(F){if('min'==O)return F.getMinPx();if('max'==O)return F.getMaxPx();if(W)return F.getRelPx(O);if(Y(O))return F.getPos(O)}}getPxRel(O,F){return this.getPx(O,F,!0)}relativeTo(O){return this._relativeTo=I.check(O),this}static check(O,F){if(O instanceof I)return O;var W=new I(O);if(O&&O.relativeTo){const B=F(O.relativeTo);B&&W.relativeTo(B)}return W}}T.default=I})},function(u,A){var C,P,E;(function(T,X){P=[A],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T){'use strict';function B(pe,de,ge){return 0>ge&&(ge+=1),1<ge&&(ge-=1),ge<1/6?pe+6*(de-pe)*ge:ge<1/2?de:ge<2/3?pe+6*((de-pe)*(2/3-ge)):pe}function G(pe,de){return pe._savedAttributes&&pe._savedAttributes[de]!==void 0}function Z(pe,de){if(pe&&pe._savedAttributesIds){pe._savedAttributesIds.splice(pe._savedAttributesIds.indexOf(de),1),delete pe._attributes[de];var ge={};for(var ue in pe._savedAttributes)ge[ue]=pe._savedAttributes[ue];for(var ue=0,he=pe._savedAttributesIds.length;ue<he;ue++)for(var ce in pe._attributes[pe._savedAttributesIds[ue]])ge[ce]=pe._attributes[pe._savedAttributesIds[ue]][ce];for(var ce in ge)pe.setAttribute(ce,ge[ce])}}function ie(){var pe,de,ge,ue,he,ce,xe=arguments[0],me=1,fe=arguments.length,ye=!1;for('boolean'==typeof xe?(ye=xe,xe=arguments[1]||{},me=2):('object'!=typeof xe&&'function'!=typeof xe||null==xe)&&(xe={});me<fe;++me)if(pe=arguments[me],null!=pe)for(de in pe)ge=xe[de],ue=pe[de],xe!==ue&&(ye&&ue&&(le(ue)||(he=oe(ue)))?(he?(he=!1,ce=ge&&oe(ge)?ge:[]):ce=ge&&le(ge)?ge:{},xe[de]=ie(ye,ce,ue)):'undefined'!=typeof ue&&(xe[de]=ue));return xe}Object.defineProperty(T,'__esModule',{value:!0}),T.setAttributeTo=function(pe,de,ge){if(ge)for(var ue in de)pe.setAttributeNS(ge,ue,de[ue]);else for(ue in de)pe.setAttribute(ue,de[ue])},T.mapEventEmission=function(pe,de){de||(de=this);var ge;for(var ue in pe)0==ue.indexOf('on')&&'function'==typeof pe[ue]&&(ge=ue.substring(2),ge=ge.substring(0,1).toLowerCase()+ge.substring(1),de.on&&function(he){de.on(ge,function(){pe[he].apply(de,arguments)})}(ue))},T.guid=function(){return'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(pe){var de=0|16*Math.random(),ge='x'==pe?de:8|3&de;return ge.toString(16)})},T.throwError=function(pe){console.error(pe)},T.warn=function(pe){console.warn(pe)},T.isNumeric=function(pe){return!Array.isArray(pe)&&0<=pe-parseFloat(pe)+1},T.hue2rgb=B,T.hslToRgb=function(pe,de,ge){var ue,he,ce;if(0==de)ue=he=ce=ge;else{var xe=0.5>ge?ge*(1+de):ge+de-ge*de,me=2*ge-xe;ue=B(me,xe,pe+1/3),he=B(me,xe,pe),ce=B(me,xe,pe-1/3)}return[Math.round(255*ue),Math.round(255*he),Math.round(255*ce)]},T.saveDomAttributes=function(pe,de,ge){if(pe)for(var ue in pe._savedAttributesIds=pe._savedAttributesIds||[],-1<pe._savedAttributesIds.indexOf(ge)&&Z(pe,ge),pe._savedAttributes=pe._savedAttributes||{},pe._attributes=pe._attributes||{},pe._attributes[ge]=de,pe._savedAttributesIds.push(ge),de)pe._savedAttributes[ue]||(pe._savedAttributes[ue]=pe.getAttribute(ue)),pe.setAttribute(ue,de[ue])},T.hasSavedAttribute=G,T.overwriteDomAttribute=function(pe,de,ge){G(pe,de)&&(pe._savedAttributes[de]=ge)},T.restoreDomAttributes=Z,T.debounce=function(pe,de,ge){var ue;return function(){var he=this,ce=arguments,me=ge&&!ue;clearTimeout(ue),ue=setTimeout(function(){ue=null,ge||pe.apply(he,ce)},de),me&&pe.apply(he,ce)}},T.SVGParser=function(pe){var de=new DOMParser,ge=de.parseFromString(pe,'image/svg+xml');return ge},T.reverseArray=function(pe){var de=null,ge=null,ue=pe.length;for(de=0,ge=ue-1;de<ge;de+=1,ge-=1){var he=pe[de];pe[de]=pe[ge],pe[ge]=he}return pe},T.getOffset=function(pe){var de=pe.getBoundingClientRect();return{top:de.top,left:de.left}},T.setCSS=function(pe,de){var ge=pe.style;for(var ue in de)ge[ue]=de[ue]},T.ajaxGet=function(pe){return new Promise(function(de,ge){var ue=new XMLHttpRequest;ue.open(pe.type||'GET',pe.url,!0),pe.json&&ue.setRequestHeader('Accept','application/json'),ue.onload=function(){if(200===ue.status){var he=ue.responseText;pe.json&&(he=JSON.parse(he)),de(he)}else ge(new Error('Request error: '+ue.status))},ue.onerror=function(){ge(new Error('Network error: '+ue.status))},ue.send()})},T.extend=ie,T.mix=function(pe,de){for(let ge in de)de.hasOwnProperty(ge)&&(pe.prototype[ge]=de[ge])},T.emptyDom=function(pe){for(;pe.firstChild;)pe.removeChild(pe.firstChild)};var se=Object.prototype.hasOwnProperty,ne=Object.prototype.toString,oe=function(de){return'function'==typeof Array.isArray?Array.isArray(de):'[object Array]'===ne.call(de)},le=function(de){if(!de||'[object Object]'!==ne.call(de))return!1;var ge=se.call(de,'constructor'),ue=de.constructor&&de.constructor.prototype&&se.call(de.constructor.prototype,'isPrototypeOf');if(de.constructor&&!ge&&!ue)return!1;for(var he in de);return'undefined'==typeof he||se.call(de,he)};T.isArray=oe,T.isPlainObject=le})},function(u,A){var C,P,E,P,E;(function(T,X){P=[],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(){'use strict';P=[],E=function(){'use strict';function T(){}function X(O,F){for(var W=O.length;W--;)if(O[W].listener===F)return W;return-1}function Y(O){return function(){return this[O].apply(this,arguments)}}var I=T.prototype;return I.getListeners=function(F){var W=this._getEvents(),B,V;if(F instanceof RegExp)for(V in B={},W)W.hasOwnProperty(V)&&F.test(V)&&(B[V]=W[V]);else B=W[F]||(W[F]=[]);return B},I.flattenListeners=function(F){var W=[],B;for(B=0;B<F.length;B+=1)W.push(F[B].listener);return W},I.getListenersAsObject=function(F){var W=this.getListeners(F),B;return W instanceof Array&&(B={},B[F]=W),B||W},I.addListener=function(F,W){var B=this.getListenersAsObject(F),R;for(R in B)B.hasOwnProperty(R)&&-1===X(B[R],W)&&B[R].push('object'==typeof W?W:{listener:W,once:!1});return this},I.on=Y('addListener'),I.addOnceListener=function(F,W){return this.addListener(F,{listener:W,once:!0})},I.once=Y('addOnceListener'),I.defineEvent=function(F){return this.getListeners(F),this},I.defineEvents=function(F){for(var W=0;W<F.length;W+=1)this.defineEvent(F[W]);return this},I.removeListener=function(F,W){var B=this.getListenersAsObject(F),V,R;for(R in B)B.hasOwnProperty(R)&&(V=X(B[R],W),-1!==V&&B[R].splice(V,1));return this},I.off=Y('removeListener'),I.addListeners=function(F,W){return this.manipulateListeners(!1,F,W)},I.removeListeners=function(F,W){return this.manipulateListeners(!0,F,W)},I.manipulateListeners=function(F,W,B){var G=F?this.removeListener:this.addListener,U=F?this.removeListeners:this.addListeners,V,R;if('object'==typeof W&&!(W instanceof RegExp))for(V in W)W.hasOwnProperty(V)&&(R=W[V])&&('function'==typeof R?G.call(this,V,R):U.call(this,V,R));else for(V=B.length;V--;)G.call(this,W,B[V]);return this},I.removeEvent=function(F){var B=this._getEvents(),V;if('string'==typeof F)delete B[F];else if(F instanceof RegExp)for(V in B)B.hasOwnProperty(V)&&F.test(V)&&delete B[V];else delete this._events;return this},I.removeAllListeners=Y('removeEvent'),I.emitEvent=function(F,W){var B=this.getListenersAsObject(F),V,R,G,U;for(G in B)if(B.hasOwnProperty(G))for(R=B[G].length;R--;)V=B[G][R],!0===V.once&&this.removeListener(F,V.listener),U=V.listener.apply(this,W||[]),U===this._getOnceReturnValue()&&this.removeListener(F,V.listener);return this},I.trigger=Y('emitEvent'),I.emit=function(F){var W=Array.prototype.slice.call(arguments,1);return this.emitEvent(F,W)},I.setOnceReturnValue=function(F){return this._onceReturnValue=F,this},I._getOnceReturnValue=function(){return!this.hasOwnProperty('_onceReturnValue')||this._onceReturnValue},I._getEvents=function(){return this._events||(this._events={})},T}.apply(A,P),!(E!==void 0&&(u.exports=E))})},function(u,A,S){var C,P,E;(function(T,X){P=[A,S(6),S(3),S(7)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y,I){'use strict';function O($){return $&&$.__esModule?$:{default:$}}function F($){$--;for(var ee=2;$>>=1;)ee<<=1;return ee}function W($){for(var ee=1;$>>=1;)ee<<=1;return ee}function B($,ee,te,ie,re){return($-ee)/(te-ee)*(re-ie)+ie}function V($,ee,te){let ie=0,re=ee.length,ae=re-1,ne=0,oe=1,se;if(ee[ie]==$)return ie;if(ee[ae]==$)return ae;for(;;){if(ne++,100<ne)throw'Error loop';for(se=Math.floor((ie+ae)/2);isNaN(ee[se]);){if(se>=ee.length-1)return ee.length-1;if(0>=se)return 0;se+=oe}if(se==ie||ee[se]==$||se==ae)return se;if(ee[se]<=$)te?ae=se:ie=se;else if(ee[se]>$)te?ie=se:ae=se;else return!1;oe*=-1}}Object.defineProperty(T,'__esModule',{value:!0});var R=O(X),G=O(I);class U{constructor($=[],ee=0,te=1){this.xOffset=ee,this.xScale=te,this.setData($)}setData($,ee=null){if(Array.isArray($[0])){let ae=[],se=[];$.forEach(ne=>{ae.push(ne[0]),se.push(ne[1])}),this.setXWaveform(ae),$=se}let te=this._makeArray($.length),ie=!1;const re=this.isNaNAllowed();return $.map((ae,se)=>{re||ae[0]===ae[0]&&ae[1]===ae[1]||(ie=!0),te[se]=ae}),ie&&this.warn('Trying to assign NaN values to a typed array that does not support NaNs. 0\'s will be used instead'),this._setData(te),ee&&this.setXWaveform(ee),this}getY($,ee){return ee&&this.dataInUse?this.dataInUse.y[$]*this.getScale()+this.getShift():this.data[$]*this.getScale()+this.getShift()}setXWaveform($){if(!($ instanceof U))if(Array.isArray($))$=new U($);else throw'Cannot set X waveform. Data is not a valid array.';return this.xdata=$,this.computeXMinMax(),this}hasXWaveform(){return!!this.xdata}getXWaveform(){if(this.xdata)return this.xdata;for(var $=new U,ee=0;ee<this.getLength();ee+=1)$.append(this.getX(ee));return $}rescaleX($,ee){return this.xScale=ee,this.xOffset=$,this.computeXMinMax(),this}getTypedArrayClass(){return this._typedArrayClass||!1}setTypedArrayClass($){this.getTypedArrayClass()&&this.isNaNAllowed()&&!this.isNaNAllowed($)&&this.warn('NaN values are not allowed by the new constructor ('+$.name+') while it was allowed by the previous one ('+this._typedArrayClass.name+')'),this.getTypedArrayClass()&&this.isUnsigned()&&!this.isUnsigned($)&&this.warn('You are switching from signed values to unsigned values. You may experience data corruption if there were some negative values.'),this._typedArrayClass=$,this.data&&this._setData($.from(this.data)),this.hasXWaveform()&&this.getXWaveform().setTypedArrayClass($)}isNaNAllowed($=this._typedArrayClass){return $==Array||$==Float32Array||$==Float64Array}isUnsigned($=this._typedArrayClass){return $==Uint8Array||$==Uint8ClampedArray||$==Uint16Array||$==Uint32Array}recalculateMinMaxNewPoint($,ee){($<this.minX||this.minX===void 0)&&(this.minX=$),($>this.maxX||this.maxX===void 0)&&(this.maxX=$),(ee<this.minY||this.minY===void 0)&&(this.minY=ee),(ee>this.maxY||this.maxY===void 0)&&(this.maxY=ee)}prepend($,ee){return'function'==typeof $&&($=$(this)),'function'==typeof ee&&(ee=ee(this)),this.xdata?this.xdata.prepend(null,$):null===$?this.xOffset-=this.xScale:(this.xdata=this.getXWaveform(),this.xdata.prepend(null,$)),this.data.unshift(ee),this.recalculateMinMaxNewPoint($,ee),this}append($,ee){return'function'==typeof $&&($=$(this)),'function'==typeof ee&&(ee=ee(this)),this.xdata?this.xdata.append(null,$):null!==$&&(this.xdata=this.getXWaveform(),this.xdata.append(null,$)),this.monotoneous&&(ee>this.data[this.data.y]&&!1===this.getMonotoneousAscending()?this.monotoneous=!1:ee<this.data[this.data.y]&&!0===this.getMonotoneousAscending()&&(this.monotoneous=!1)),(1==this.data.length||void 0===this._monotoneousAscending)&&(this.monotoneous=!0,this._monotoneousAscending=ee==this.data[0]?void 0:ee>this.data[0]),this.data.push(ee),this.recalculateMinMaxNewPoint($,ee),this}_makeArray($){const ee=this.getTypedArrayClass();return ee?new ee($):Array($)}_setData($){const ee=$.length;let te=1,ie=$[1]>$[0],re=$[0],ae=$[0];for(this._monotoneous=!0;te<ee;te++)$[te]!==$[te-1]&&ie!=$[te]>$[te-1]&&(this._monotoneous=!1),$[te]===$[te]&&(re=Math.min($[te],re),ae=Math.max($[te],ae));this._monotoneous&&(this._monotoneousAscending=$[1]>$[0]),this.minY=re,this.maxY=ae,this.data=$,this.computeXMinMax()}computeXMinMax(){if(this.data)if(this.xdata)this.minX=this.xdata.getMin(),this.maxX=this.xdata.getMax();else{const $=this.xOffset+this.xScale*this.getLength(),ee=this.xOffset;this.minX=Math.min($,ee),this.maxX=Math.max($,ee)}}getDataInUse(){return this.dataInUse||this.data}getIndexFromVal($,ee=!1,te=Math.round){let ie=ee&&this.dataInUse?this.dataInUse.y:this.data;let re;return re=this.getIndexFromData($,ie,this.data.getMonotoneousAscending(),te),ee&&this.dataInUse&&'aggregateY'==this.dataInUseType?re-re%4:re}getIndexFromX($,ee=!1,te=Math.round){let ie;ee&&this.dataInUse?ie=this.dataInUse.x:this.xdata&&(ie=this.xdata.getData());let re;return re=this.hasXWaveform()?this.xdata.getIndexFromData($,ie,this.xdata.getMonotoneousAscending(),te):Math.max(0,Math.min(this.getLength()-1,te(($-this.xOffset)/this.xScale))),ee&&this.dataInUse&&'aggregateX'==this.dataInUseType?re-re%4:re}getIndexFromData($,ee,te){if(!this.isMonotoneous())throw console.trace(),'Impossible to get the index from a non-monotoneous wave !';return $-=this.getShift(),$/=this.getScale(),V($,ee,!te)}getReductionType(){return this.dataInUseType}getXMin(){return this.minX*this.getXScale()+this.getXShift()}getXMax(){return this.maxX*this.getXScale()+this.getXShift()}getYMin(){return this.minY*this.getScale()+this.getShift()}getYMax(){return this.maxY*this.getScale()+this.getShift()}getMin(){return this.minY*this.getScale()+this.getShift()}getMax(){return this.maxY*this.getScale()+this.getShift()}getMinX(){return this.minX*this.getXScale()+this.getXShift()}getMaxX(){return this.maxX*this.getXScale()+this.getXShift()}getMinY(){return this.minY*this.getScale()+this.getShift()}getMaxY(){return this.maxY*this.getScale()+this.getShift()}getDataY(){return this.data}getData($){return $&&this.dataInUse?this.dataInUse.y:this.data}setShift($=0){return this.shift=$,this}getShift(){return this.shift||0}getScale(){return this.scale||1}setScale($=1){this.scale=$}setXShift($=0){return this.hasXWaveform?(this.getXWaveform().setShift($),this):this}getXShift($=0){return this.hasXWaveform?this.getXWaveform().getShift():0}setXScale($=1){return this.hasXWaveform?(this.getXWaveform().setScale($),this):this}getXScale(){return this.hasXWaveform?this.getXWaveform().getScale():1}getLength(){return this.data.length}getDataToUseFlat(){let $,ee=0,te;if(this.dataInUse){$=this.dataInUse.x.length,te=Array(2*$).fill(0);for(var ie=0;ie<$;ie+=1)te[ee]=this.dataInUse.x[ie],te[ee+1]=this.dataInUse.y[ie],ee+=2}else{$=this.getLength(),te=Array(2*$).fill(0);for(var ie=0;ie<$;ie+=1)te[ee+1]=this.data[ie],te[ee]=this.getX(ie),ee+=2}return te}fit($){var ee=this;return new Promise(function(te){var re=new R.default((0,Y.extend)({},{dataY:ee,dataX:ee.getXWaveform(),done:function(ae){te(ae)},waveform:new U},$));re.init(),re.fit()})}getX($,ee){return ee&&this.dataInUse?this.dataInUse.x[$]*this.getXScale()+this.getXShift():this.xdata?this.xdata.data[$]*this.getXScale()+this.getXShift():this.xOffset+$*this.xScale}getXRaw($,ee){return ee&&this.dataInUse?this.dataInUse.x[$]:this.xdata?this.xdata.data[$]:$}_integrateP($=0,ee=this.getLength()-1){if($=Math.round($),ee=Math.round(ee),$>ee){let oe=$;$=ee,ee=oe}var te=ee-$+1,ie=0;let ae=0,se;for(var ne=this.getData();$<=ee;$++)ne.length-1>$&&(se=this.getX($+1)-this.getX($),ae+=se,ie+=ne[$]*se);return[ie,te,ae]}integrateP($,ee){var te=this._integrateP($,ee);return te[0]}integrate($,ee){return this.integrateP(this.getIndexFromX($),this.getIndexFromX(ee))}average($=0,ee=this.getLength()-1){return this.getAverageP($,ee)}mean(){return this.average()}getAverageP($,ee){var te=this._integrateP($,ee);return te[0]/te[2]}getAverageX($,ee){var te=this._integrateX($,ee);return te[0]/te[2]}checkMonotonicity(){let $=1,ee=this.getData();const te=this.data.length;for(let ie=ee[1]>ee[0];$<te;$++)if(ee[$]!==ee[$-1]&&ie!==ee[$]>ee[$-1])return this._monotoneous=!1;return this._monotoneousAscending=ee[1]>ee[0],this._monotoneous=!0}requireXMonotonicity(){this.xdata&&this.xdata.requireMonotonicity()}requireMonotonicity(){if(!this.isMonotoneous())throw'The wave must be monotonic'}isMonotoneous(){return!!this._monotoneous}isXMonotoneous(){return!this.xdata||this.xdata.isMonotoneous()}invert(){let ee=dataY||this.data;return ee.reverse(),this.isMonotoneous()&&(this._monotoneousAscending=!this._monotoneousAscending),ee}resampleForDisplay($){let ee=0;this.requireXMonotonicity();let te=!1,ie=this.getDataY(),re={x:[],y:[]},ae=[],ue=!1,he=0,se,ne,oe,le,pe,de,ge,ce;const xe=this.getLength();if(!$.xPosition)throw'No position calculation method provided';if(!$.resampleToPx)throw'No "resampleToPx" method was provided. Unit: px per point';if($.minX>$.maxX){let me=$.minX;$.minX=$.maxX,$.maxX=me}for((this.xdata&&!this.xdata.getMonotoneousAscending()||!this.xdata&&-0>this.xScale)&&(te=!0,ee=xe);te?0<ee:ee<xe;te?ee--:ee++){if(ce=this.getX(ee),$.minX>ce){he=ee;continue}if(ge=$.xPosition(ce),!ue){for(he?(re.x.push(ce),re.y.push(ie[he])):he=ee;isNaN(ie[ee]);)te?ee--:ee++;se=ne=oe=ie[he],le=1,de=ge,pe=ce,he=0,ue=!0;continue}if(Math.abs(ge-de)>$.resampleToPx||ee==xe||0==ee||isNaN(ie[ee])){let me=(pe+ce)/2;if(re.x.push(me),re.y.push(se/le),ae.push(me,ne,oe),void 0!==$.maxX&&ce>$.maxX)break;ue=!1;continue}se+=ie[ee],le++,ne=Math.min(ne,ie[ee]),oe=Math.max(oe,ie[ee])}return this.dataInUseType='resampled',this.dataInUse=re,ae}interpolate($){let ee,te=this.getDataY();if(this.xdata){let ie=this.xdata.getData(),re=V($,ie,!this.xdata.getMonotoneousAscending());return ie[re]==$?te[re]:($-ie[re])/(ie[re+1]-ie[re])*(te[re+1]-te[re])+te[re]}ee=($-this.xOffset)/this.xScale;let ie=Math.floor(ee);return(ee-ie)*(te[ie+1]-te[ie])+te[ie]}getMonotoneousAscending(){return this.isMonotoneous()?this._monotoneousAscending:'The waveform is not monotoneous'}getXMonotoneousAscending(){return this.xdata?this.xdata.getMonotoneousAscending():0<this.xScale}isXMonotoneousAscending(){return this.getXMonotoneousAscending(...arguments)}divide($){return this._arithmetic($,J)}divideBy(){return this.divide(...arguments)}multiply($){return this._arithmetic($,Z)}multiplyBy(){return this.multiply(...arguments)}log(){return this.logBase(10)}ln(){return this.logBase(Math.E)}logBase($){let ee=Math.log($);this.data.map(te=>{return Math.log(te)/ee})}add($){return this._arithmetic($,K)}addBy(){return this.add(...arguments)}subtract($){return this._arithmetic($,Q)}subtractBy(){return this.subtract(...arguments)}math($){for(var ee=0;ee<this.getLength();ee++)this.data[ee]=$(this.getY(ee),this.getX(ee));return this._setData(this.data),this}_arithmetic($,ee){if($ instanceof U)return this._waveArithmetic($,ee);return'number'==typeof $?this._numberArithmetic($,ee):void 0}_numberArithmetic($,ee){let te=0,ie=this.getLength();if(ee==Z){for(;te<ie;te++)this.data[te]*=$;this.minY*=$,this.maxY*=$}else if(ee==J){for(;te<ie;te++)this.data[te]/=$;this.minY/=$,this.maxY/=$}else if(ee==K){for(;te<ie;te++)this.data[te]+=$;this.minY+=$,this.maxY+=$}else if(ee==Q){for(;te<ie;te++)this.data[te]-=$;this.minY-=$,this.maxY-=$}return this}_waveArithmetic($,ee){let te=this.getDataY(),ie=0;const re=this.getLength();if(this.requireXMonotonicity(),$.requireXMonotonicity(),ee==Z)for(;ie<re;ie++)te[ie]*=$.interpolate(this.getX(ie));else if(ee==J)for(;ie<re;ie++)te[ie]/=$.interpolate(this.getX(ie));else if(ee==K)for(;ie<re;ie++)te[ie]+=$.interpolate(this.getX(ie));else if(ee==Q)for(;ie<re;ie++)te[ie]-=$.interpolate(this.getX(ie));return this._setData(te),this}aggregate($='x'){this._dataAggregating={},this._dataAggregated={},this._dataAggregationDirection=$.toUpperCase();var ee=W(this.getLength());this._dataAggregating=(0,G.default)({minX:this.minX,maxX:this.maxX,minY:this.minY,maxY:this.maxY,data:this.data,xdata:this.xdata?this.xdata.getData():void 0,xScale:this.xScale,xOffset:this.xOffset,numPoints:ee,direction:$}).then(te=>{this._dataAggregated=te.aggregates,this._dataAggregating=!1})}hasAggregation(){return!!this._dataAggregated}selectAggregatedData($){if(2>$)return!1;var ee=F($);return this._dataAggregated[ee]?(this.dataInUseType='aggregate'+this._dataAggregationDirection,void(this.dataInUse=this._dataAggregated[ee])):this._dataAggregating?this._dataAggregating:void(this.dataInUseType='none',this.dataInUse={y:this.data,x:this.getXWaveform().data})}duplicate($){var ee=new U;return ee._setData(this.getDataY().slice()),ee.rescaleX(this.xOffset,this.xShift),ee.setShift(this.getShift()),ee.setScale(this.getScale()),this.xdata?($?ee.setXWaveform(this.xdata.duplicate()):ee.setXWaveform(this.xdata),ee.setXShift(this.getXShift()),ee.setXScale(this.getXScale())):(ee.xOffset=this.xOffset,ee.xScale=this.xScale),ee}subrangeX($,ee){if(!this.xdata){let ae=this.getIndexFromX($),se=this.getIndexFromX(se);return new U().setData(this.data.slice(ae,se)).rescaleX(this.xOffset,this.xScale)}for(var te=new U,ie=0,re=this.data.length;ie<re;ie++)this.data[ie]>=$&&this.data[ie]<ee&&te.append(this.dataX[ie],this.data[ie]);return te}findLocalMinMax($,ee,te){let ie=this.getIndexFromX($),re=this.getIndexFromX($+ee),ae=this.getIndexFromX($-ee);return this.findLocalMinMaxIndex(ae,re,te)}findLocalMinMaxIndex($,ee,te){let ie;ee<$&&(ie=ee,ee=$,$=ie);let re,ae;if('max'==te){re=Number.NEGATIVE_INFINITY;for(var se=$;se<=ee;se++)this.getY(se)>re&&(re=this.getY(se),ae=se)}else{re=Number.POSITIVE_INFINITY;for(var se=$;se<=ee;se++)this.getY(se)<re&&(re=this.getY(se),ae=se)}return ae==$||ae==ee?!1:this.getX(ae)}warn($){console&&console.warn($)}setUnit($){return this.unit=$,this}setXUnit($){return this.hasXWaveform()&&this.xdata.setUnit($),this.xunit=$,this}getUnit(){return this.unit||''}getXUnit(){return this.hasXWaveform()?this.xdata.getUnit():''|this.xunit}hasXUnit(){return 0<this.getXUnit().length}hasUnit(){return 0<this.getUnit().length}findLevels($,ee){ee=(0,Y.extend)({box:1,edge:'both',rounding:'before',rangeP:[0,this.getLength()]},ee);for(var te=ee.rangeP[0],re=[],ae=0,ie;ie=this.findLevel($,(0,Y.extend)(!0,{},ee,{rangeP:[te,ee.rangeP[1]]}));)if(re.push(ie),te=Math.ceil(ie),ae++,1e3<ae)return;return re}findLevel($,ee){ee=(0,Y.extend)({box:1,edge:'both',direction:'ascending',rounding:'before',rangeP:[0,this.getLength()]},ee),ee.rangeX&&(ee.rangeP=ee.rangeX.map(this.getIndexFromX));var te,ie,re,ae,se,ne,oe=ee.box;for(0==oe%2&&oe++,'descending'==ee.direction?(re=ee.rangeP[1],se=ee.rangeP[0],ne=-1):(re=ee.rangeP[0],se=ee.rangeP[1],ne=1);;re+=ne){if('descending'==ee.direction){if(re<se)break;}else if(re>se)break;if(!(re<ee.rangeP[0]+(oe-1)/2)){if(re>ee.rangeP[1]-(oe-1)/2)break;if(te=this.getAverageP(re-(oe-1)/2,re+(oe-1)/2),void 0==ie){ie=te<$;continue}if(te>$&&ie){if(ie=!1,'ascending'==ee.edge||'both'==ee.edge)for(ae=re+(oe-1)/2;ae>=re-(oe-1)/2;ae--)if(this.data[ae]>$&&this.data[ae-1]<=$)switch(ee.rounding){case'before':return ae-1;break;case'after':return ae;break;case'interpolate':return B($,this.data[ae],this.data[ae-1],ae,ae-1);}}else if(te<$&&!ie&&(ie=!0,'descending'==ee.edge||'both'==ee.edge))for(ae=re+(oe-1)/2;ae>=re-(oe-1)/2;ae--)if(this.data[ae]<$&&this.data[ae-1]>=$)switch(ee.rounding){case'before':return ae-1;break;case'after':return ae;break;case'interpolate':return B($,this.data[ae],this.data[ae-1],ae,ae-1);}}}}normalize($){let ee,te,ie,re,ae,se;if('max1'==$||'max100'==$){for(ee=1,'max100'==$&&(ee=100),re=this.data[0],se=1;se<this.getLength();se++)this.data[se]>re&&(re=this.data[se]);for(se=0;se<this.getLength();se++)this.data[se]/=re/ee}else if('sum1'==$){for(te=0,se=0;se<this.getLength();se++)te+=this.data[se];for(se=0;se<this.getLength();se++)this.data[se]/=te}else if('max1min0'==$){for(re=this.data[0],ie=this.data[0],se=1;se<this.getLength();se++)this.data[se]>re?re=this.data[se]:this.data[se]<ie&&(ie=this.data[se]);for(ae=1/(re-ie),se=0;se<this.getLength();se++)this.data[se]=(this.data[se]-ie)*ae}this.setData(this.data)}}const Z=Symbol(),K=Symbol(),Q=Symbol(),J=Symbol();T.default=U})},function(u,A){var C,P,E;(function(T,X){P=[A],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T){'use strict';Object.defineProperty(T,'__esModule',{value:!0});class Y{constructor(I,O,F,W){this.LMITER=100,this.LMBOOST=2,this.LMSHRINK=0.1,this.LAMBDAZERO=1e-3,this.LAMBDAMAX=1E9,this.LMTOL=1e-12,this.BIGVAL=9e99,this.sos,this.sosprev,this.lambda,this.myH=null,this.nadj=0,this.npts=0,this.delta,this.beta,this.alpha,this.amatrix,this.myH=I,this.nadj=O,this.npts=F,this.delta=Array(this.nadj).fill(0),this.beta=Array(this.nadj).fill(0),this.alpha=Array(this.nadj).fill(0),this.amatrix=Array(this.nadj).fill(0),this.alpha=this.alpha.map(()=>Array(this.nadj)),this.amatrix=this.amatrix.map(()=>Array(this.nadj)),this.lambda=this.LAMBDAZERO;var B=0,V=!1;do V=this.bLMiter(),W&&W(this.myH.params),B++;while(!V&&B<this.LMITER)}bLMiter(){for(var I=0;I<this.nadj;I++)this.delta[I]=0;if(this.sos=this.myH.nudge(this.delta),this.sos==this.BIGVAL)return console.error('  bLMiter finds faulty initial nudge()'),!1;if(this.sosprev=this.sos,console.log('  bLMiter..SumOfSquares= '+this.sos),!this.myH.buildJacobian())return console.error('  bLMiter finds buildJacobian()=false'),!1;for(var I=0;I<this.nadj;I++){this.beta[I]=0;for(var O=0;O<this.npts;O++)this.beta[I]-=this.myH.getResidualElement(O)*this.myH.getJacobianElement(O,I)}for(var I=0;I<this.nadj;I++)for(var F=0;F<this.nadj;F++){this.alpha[F][I]=0;for(var O=0;O<this.npts;O++)this.alpha[F][I]+=this.myH.getJacobianElement(O,F)*this.myH.getJacobianElement(O,I)}var W=0;do{for(var I=0;I<this.nadj;I++)for(var F=0;F<this.nadj;F++)this.amatrix[F][I]=this.alpha[F][I]+(F==I?this.lambda:0);this.gaussj(this.amatrix,this.nadj);for(var I=0;I<this.nadj;I++){this.delta[I]=0;for(var F=0;F<this.nadj;F++)this.delta[I]+=this.amatrix[F][I]*this.beta[F]}if(this.sos=this.myH.nudge(this.delta),this.sos==this.BIGVAL)return console.error('  LMinner failed SOS step'),!1;if(W=(this.sos-this.sosprev)/(1+this.sos),0>=W){this.lambda*=this.LMSHRINK;break}for(var B=0;B<this.nadj;B++)this.delta[B]*=-1;if(this.myH.nudge(this.delta),W<this.LMTOL)break;this.lambda*=this.LMBOOST}while(this.lambda<this.LAMBDAMAX);return W>-this.LMTOL||this.lambda>this.LAMBDAMAX}gaussj(I,O){var F=1,W,B,V,R,G,U,Z=Array(100),K=Array(100);for(G=0;G<O;G++){for(W=0,V=G;V<O;V++)for(R=G;R<O;R++)Math.abs(W)<=Math.abs(I[V][R])&&(W=I[V][R],Z[G]=V,K[G]=R);if(0==W)return 0;if(V=Z[G],V>G)for(R=0;R<O;R++)B=I[G][R],I[G][R]=I[V][R],I[V][R]=-B;if(R=K[G],R>G)for(V=0;V<O;V++)B=I[V][G],I[V][G]=I[V][R],I[V][R]=-B;for(V=0;V<O;V++)V!=G&&(I[V][G]=-I[V][G]/W);for(V=0;V<O;V++)for(R=0;R<O;R++)V!=G&&R!=G&&(I[V][R]+=I[V][G]*I[G][R]);for(R=0;R<O;R++)R!=G&&(I[G][R]/=W);I[G][G]=1/W,F*=W}for(U=0;U<O;U++){if(G=O-U-1,R=Z[G],R>G)for(V=0;V<O;V++)B=I[V][G],I[V][G]=-I[V][R],I[V][R]=B;if(V=K[G],V>G)for(R=0;R<O;R++)B=I[G][R],I[G][R]=-I[V][R],I[V][R]=B}return F}}T.default=class{constructor(I){this.DELTAP=1e-6,this.BIGVAL=9e99,this.WEIGHT=1,console.log(I),this.setYData(I.dataY),this.setXData(I.dataX),this.setWeight(I.weight),this.setInitialParams(I.params),I.subsetIndex&&this.setSubset(...I.subsetIndex),this.setFunction(I.function),I.progress&&this.hookIteration(I.progress),this.options=I}setYData(I){this.data=I}setXData(I){this.dataX=I}setWeight(I){this.weight=I}setInitialParams(I){this.parms=I,this.parms=this.parms.map(O=>{return'function'==typeof O?O(this.data,this.dataX):O}),this.NPARMS=I.length}setSubset(I,O){I!==void 0&&O!==void 0&&(this._from=I,this._to=O)}hookIteration(I){this._hookIteration=O=>{let F=this.buildFit(O,200);I(F)}}setFunction(I){this._func=I}init(){if(void 0!==this._from&&void 0!==this._to){if(this._from>=this._to)throw'Impossible to fit negative subranges. The starting index must be lower than the ending index';if(this.NPTS=this._to-this._from+1,this.data&&this.data.getLength()<=this._to)throw'Wave Y has not enough point to be fitted to subrange ['+this._from+', '+this._to+']';if(0>this._from)throw'Impossible to fit a subrange with negative indices'}else this.NPTS=this.data.getLength(),this._from=0,this._to=this.data.getLength()-1;if(this.dataX&&this.dataX.getLength()<=this._to)throw'Wave X has not enough point to be fitted to subrange ['+this._from+', '+this._to+']';this.arrY=this.data.getDataY(),this.arrX=this.dataX?this.dataX.getDataY():this.data.getDataX(),this.resid=Array(this.NPTS).fill(0),this.jac=Array(this.NPTS).fill(0),this.jac=this.jac.map(()=>Array(this.NPARMS))}fit(){return this.log('Starting the fit with initial parameter list {'+this.parms.join()+'};'),new Y(this,this.NPARMS,this.NPTS,this._hookIteration),this.log('Fit successful. Output parameters {'+this.parms.join()+'};'),this._result=this.buildFit(this.parms,200),this.options.done&&this.options.done(this.parms,this._result),this._result}func(I,O){return this._func(I,O)}computeResiduals(){for(var I=0,O=0;O<this.NPTS;O++)this.resid[O]=(this.func(this.arrX[O+this._from],this.parms)-this.arrY[O+this._from])*this.WEIGHT,I+=this.resid[O]*this.resid[O];return I}log(I){console.log(I)}nudge(I){for(var O=0;O<this.NPARMS;O++)this.parms[O]+=I[O];return this.computeResiduals()}buildJacobian(){for(var I=Array(this.NPARMS),O=0.5/this.DELTAP,F=0,W=0;W<this.NPARMS;W++){for(var B=0;B<this.NPARMS;B++)I[B]=B==W?this.DELTAP:0;if(F=this.nudge(I),F==this.BIGVAL)throw'Bad dBuildJacobian() exit 2';for(var V=0;V<this.NPTS;V++)this.jac[V][W]=this.getResidualElement(V);for(var B=0;B<this.NPARMS;B++)I[B]=B==W?-2*this.DELTAP:0;if(F=this.nudge(I),F==this.BIGVAL)throw'Bad dBuildJacobian(). exit 3';for(var V=0;V<this.NPTS;V++)this.jac[V][W]-=this.getResidualElement(V);for(var V=0;V<this.NPTS;V++)this.jac[V][W]*=O;for(var B=0;B<this.NPARMS;B++)I[B]=B==W?this.DELTAP:0;if(F=this.nudge(I),F==this.BIGVAL)throw'Bad dBuildJacobian(). exit 4'}return!0}getResidualElement(I){return this.resid[I]}getJacobianElement(I,O){return this.jac[I][O]}buildFit(I,O){let F;if(!O)F=this.arrX;else{const G=this.dataX.getMin(this._from,this._to),U=this.dataX.getMax(this._from,this._to);F=Array(O).fill(0).map((Z,K)=>K*(U-G)/(O-1)+G)}for(var W=Array(F.length),B=0,V=F.length;B<V;B++)W[B]=this.func(F[B],this.parms);let R=this.options.waveform;return R.setData(W,F),R}}})},function(u,A,S){var C,P,E;(function(T,X){P=[A,S(3)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X){'use strict';Object.defineProperty(T,'__esModule',{value:!0}),T.default=function(V){var R=I.guid();V._queueId=R;var G=new Promise(U=>{F[R]=U});return O.postMessage(V),G};var I=function(V){if(V&&V.__esModule)return V;var R={};if(null!=V)for(var G in V)Object.prototype.hasOwnProperty.call(V,G)&&(R[G]=V[G]);return R.default=V,R}(X),O,F={};let W=function(){onmessage=function(V){const R=V.data.data,G=V.data.maxX,U=V.data.minX,Z=V.data.maxY,K=V.data.minY,Q=V.data.direction;let J=V.data.numPoints,$=R.length,ee=0,te=-4,ie=[],re=[],ae=[],se=[],ne;ne=V.data.xdata?function(pe){return V.data.xdata[pe]}:function(pe){return pe*V.data.xScale+V.data.xOffset};let oe={};if('x'==Q)for(const le=J/(G-U);ee<$;ee++){if(slotNumber=Math.floor((ne(ee)-U)*le),ie[te]!==slotNumber){te+=4,ie[te]=slotNumber;let pe=(slotNumber+0.5)/le+U;re[te]=pe,re[te+1]=pe,re[te+2]=pe,re[te+3]=pe,ae[te]=R[ee],ae[te+1]=R[ee],ae[te+2]=R[ee],ae[te+3]=R[ee],se[te]=0}ae[te+1]=Math.min(R[ee],ae[te+1]),ae[te+2]=Math.max(R[ee],ae[te+2]),ae[te+3]=R[ee],se[te]+=R[ee]}else for(const le=J/(Z-K);ee<$;ee++){if(slotNumber=Math.floor((R[ee]-K)*le),ie[te]!==slotNumber){te+=4,ie[te]=slotNumber;let pe=(slotNumber+0.5)/le+K;ae[te]=pe,ae[te+1]=pe,ae[te+2]=pe,ae[te+3]=pe,re[te]=R[ee],re[te+1]=R[ee],re[te+2]=R[ee],re[te+3]=R[ee],se[te]=0}re[te+1]=Math.min(ne(ee),re[te+1]),re[te+2]=Math.max(ne(ee),re[te+2]),re[te+3]=ne(ee),se[te]+=ne(ee)}for(oe[J]={x:re,y:ae,sums:se},lastAggregation=ae,lastAggregationX=re,lastAggregationSum=se;256<J;){if(J/=2,newAggregation=[],newAggregationX=[],te=0,'x'==Q)for(ee=0,$=lastAggregation.length-8;ee<$;ee+=8)newAggregationX[te]=(lastAggregationX[ee]+lastAggregationX[ee+4])/2,newAggregationX[te+1]=newAggregationX[te],newAggregationX[te+2]=newAggregationX[te],newAggregationX[te+3]=newAggregationX[te],newAggregation[te]=lastAggregation[ee],newAggregation[te+1]=Math.min(lastAggregation[ee+1],lastAggregation[ee+5]),newAggregation[te+2]=Math.max(lastAggregation[ee+2],lastAggregation[ee+6]),newAggregation[te+3]=lastAggregation[ee+7],se[te]=(lastAggregationSum[ee]+lastAggregationSum[ee+4])/2,te+=4;else for(ee=0,$=lastAggregation.length-8;ee<$;ee+=8)newAggregation[te]=(lastAggregation[ee]+lastAggregation[ee+4])/2,newAggregation[te+1]=newAggregation[te],newAggregation[te+2]=newAggregation[te],newAggregation[te+3]=newAggregation[te],newAggregationX[te]=lastAggregationX[ee],newAggregationX[te+1]=Math.min(lastAggregationX[ee+1],lastAggregationX[ee+5]),newAggregationX[te+2]=Math.max(lastAggregationX[ee+2],lastAggregationX[ee+6]),newAggregationX[te+3]=lastAggregationX[ee+7],se[te]=(lastAggregationSum[ee]+lastAggregationSum[ee+4])/2,te+=4;oe[J]={x:newAggregationX,y:newAggregation,sums:se},lastAggregation=newAggregation,lastAggregationX=newAggregationX,lastAggregationSum=se,se=[]}postMessage({aggregates:oe,_queueId:V.data._queueId})}}.toString();W=W.split('\n'),W.pop(),W.shift();var B=URL.createObjectURL(new Blob([W.join('\n')],{type:'application/javascript'}));O=new Worker(B),O.onmessage=function(V){var R=V.data._queueId;delete V.data._queueId,F[R](V.data),delete F[R]}})},function(u,A,S){var C,P,E;(function(T,X){P=[A,S(2),S(3)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y){'use strict';function F(G){try{return G.getBBox()}catch(U){return{height:0,width:0,x:0,y:0}}}Object.defineProperty(T,'__esModule',{value:!0});var W=function(G){return G&&G.__esModule?G:{default:G}}(X),B=function(G){if(G&&G.__esModule)return G;var U={};if(null!=G)for(var Z in G)Object.prototype.hasOwnProperty.call(G,Z)&&(U[Z]=G[Z]);return U.default=G,U}(Y),V={backgroundColor:'rgba(255, 255, 255, 0.8)',frame:!0,frameWidth:1,frameColor:'black',paddingTop:10,paddingLeft:10,paddingBottom:10,paddingRight:10,frameRounding:0,movable:!1,shapesToggleable:!0,isSerieHideable:!0,isSerieSelectable:!0};class R{constructor(G,U){this.options=B.extend({},V,U),this.graph=G,this.svg=document.createElementNS(this.graph.ns,'g'),this.subG=document.createElementNS(this.graph.ns,'g'),this.groups=[],this.rect=document.createElementNS(this.graph.ns,'rect'),this.rectBottom=document.createElementNS(this.graph.ns,'rect'),this.rect.setAttribute('x',0),this.rect.setAttribute('y',0),this.rectBottom.setAttribute('x',0),this.rectBottom.setAttribute('y',0),this.series=!1,this.svg.setAttribute('display','none'),this.pos={x:void 0,y:void 0,transformX:0,transformY:0},this.setEvents(),this.eyeId=B.guid(),this.eyeCrossedId=B.guid();var Z=B.SVGParser('<svg xmlns="http://www.w3.org/2000/svg"><symbol id="'+this.eyeCrossedId+'" viewBox="0 -256 1850 1850"><rect pointer-events="fill" fill="transparent" x="-256" y="0" width="2106" height="1850" /><g transform="matrix(1,0,0,-1,30.372881,1214.339)"><path d="m 555,201 78,141 q -87,63 -136,159 -49,96 -49,203 0,121 61,225 Q 280,812 128,576 295,318 555,201 z m 389,759 q 0,20 -14,34 -14,14 -34,14 -125,0 -214.5,-89.5 Q 592,829 592,704 q 0,-20 14,-34 14,-14 34,-14 20,0 34,14 14,14 14,34 0,86 61,147 61,61 147,61 20,0 34,14 14,14 14,34 z m 363,191 q 0,-7 -1,-9 Q 1201,954 991,576 781,198 675,9 l -49,-89 q -10,-16 -28,-16 -12,0 -134,70 -16,10 -16,28 0,12 44,87 Q 349,154 228.5,262 108,370 20,507 0,538 0,576 q 0,38 20,69 153,235 380,371 227,136 496,136 89,0 180,-17 l 54,97 q 10,16 28,16 5,0 18,-6 13,-6 31,-15.5 18,-9.5 33,-18.5 15,-9 31.5,-18.5 16.5,-9.5 19.5,-11.5 16,-10 16,-27 z m 37,-447 Q 1344,565 1265,450.5 1186,336 1056,286 l 280,502 q 8,-45 8,-84 z m 448,-128 q 0,-35 -20,-69 Q 1733,443 1663,362 1513,190 1315.5,95 1118,0 896,0 l 74,132 q 212,18 392.5,137 180.5,119 301.5,307 -115,179 -282,294 l 63,112 q 95,-64 182.5,-153 87.5,-89 144.5,-184 20,-34 20,-69 z" fill="#c0c0c0"></path></g></symbol></svg>'),K=B.SVGParser('<svg xmlns="http://www.w3.org/2000/svg"><symbol id="'+this.eyeId+'" viewBox="0 -256 1850 1850"><rect pointer-events="fill" x="-256" y="0" fill="transparent" width="2106" height="1850" /><g transform="matrix(1,0,0,-1,30.372881,1259.8983)"><path d="m 1664,576 q -152,236 -381,353 61,-104 61,-225 0,-185 -131.5,-316.5 Q 1081,256 896,256 711,256 579.5,387.5 448,519 448,704 448,825 509,929 280,812 128,576 261,371 461.5,249.5 662,128 896,128 1130,128 1330.5,249.5 1531,371 1664,576 z M 944,960 q 0,20 -14,34 -14,14 -34,14 -125,0 -214.5,-89.5 Q 592,829 592,704 q 0,-20 14,-34 14,-14 34,-14 20,0 34,14 14,14 14,34 0,86 61,147 61,61 147,61 20,0 34,14 14,14 14,34 z m 848,-384 q 0,-34 -20,-69 Q 1632,277 1395.5,138.5 1159,0 896,0 633,0 396.5,139 160,278 20,507 0,542 0,576 q 0,34 20,69 140,229 376.5,368 236.5,139 499.5,139 263,0 499.5,-139 236.5,-139 376.5,-368 20,-35 20,-69 z" fill="#444444" /></g></symbol></svg>');this.svg.appendChild(document.adoptNode(K.documentElement.firstChild)),this.svg.appendChild(document.adoptNode(Z.documentElement.firstChild)),this.svg.appendChild(this.subG),this.applyStyle()}setPosition(G,U,Z){G&&(this.position=G,this.alignToX=U||'left',this.alignToY=Z||'top')}setDraggable(G){this.options.movable=G}setAutoPosition(G){return-1<['bottom','left','top','right'].indexOf(G=G.toLowerCase())?(this.autoPosition=G,this):void(this.requireDelayedUpdate(),this.autoPosition=!1)}autoPosition(){return this.setAutoPosition(...arguments)}buildLegendBox(){var G=this.series||this.graph.getSeries(),U=0,Z=this.options.paddingTop;this.autoPosition?this.graph.getDom().appendChild(this.getDom()):this.graph.graphingZone.appendChild(this.getDom());for(var K=0,Q=G.length;K<Q;K++)if(!G[K].excludedFromLegend||this.series){if('bottom'==this.autoPosition||'top'==this.autoPosition){var J=F(this.groups[K]);U+J.width>this.graph.getDrawingWidth()-this.options.paddingRight&&(Z+=16,U=0)}this.groups[K].setAttribute('transform','translate( '+U+', '+Z+')'),'bottom'==this.autoPosition||'top'==this.autoPosition?(U+=J.width+10,Z+=0):(U=0,Z+=16)}var J=F(this.subG);switch(this.width=J.width+this.options.paddingRight+this.options.paddingLeft,this.height=J.height+this.options.paddingBottom+this.options.paddingTop,this.rect.setAttribute('width',this.width),this.rect.setAttribute('height',this.height),this.rect.setAttribute('fill','none'),this.rect.setAttribute('pointer-events','fill'),this.rect.setAttribute('display','none'),this.options.movable&&(this.rectBottom.style.cursor='move'),this.rectBottom.setAttribute('width',this.width),this.rectBottom.setAttribute('height',this.height),this.rectBottom.setAttribute('x',J.x-this.options.paddingLeft),this.rectBottom.setAttribute('y',J.y-this.options.paddingTop),this.position=this.position||{},this.autoPosition){case'bottom':this.position.y=this.graph.getHeight()+'px',this.position.x=(this.graph.getWidth()-this.width)/2+'px',this.alignToY='bottom',this.alignToX=!1;break;case'left':this.position.x='6px',this.position.y=(this.graph.getHeight()-this.height)/2+'px',this.alignToX='left',this.alignToY=!1;break;case'right':this.position.x=this.graph.getWidth()+'px',this.position.y=(this.graph.getHeight()-this.height)/2+'px',this.alignToX='right',this.alignToY=!1;break;case'top':this.position.x=(this.graph.getWidth()-this.width)/2+'px',this.position.y='10px',this.alignToY='top',this.alignToX=!1;}if(this.autoPosition){switch(this.autoPosition){case'bottom':this.graph.options.paddingBottom=this.height+10;break;case'left':this.graph.options.paddingLeft=this.width+5;break;case'right':this.graph.options.paddingRight=this.width+10;break;case'top':this.graph.options.paddingTop=this.height+14;}this.graph.updateGraphingZone(),this.graph.getDrawingHeight(),this.graph.getDrawingWidth()}this.bbox=J}calculatePosition(){var G=W.default.check(this.position);let U=G.compute(this.graph,this.graph.getXAxis(),this.graph.getYAxis());U&&('right'==this.alignToX&&(U.x-=this.width,U.x+=this.bbox.x),'bottom'==this.alignToY?(U.y-=this.height,U.y+=this.bbox.y):U.y+=this.bbox.y,this.pos.transformX=U.x,this.pos.transformY=U.y,this._setPosition())}update(G){if(!(this.graph.isDelayedUpdate()||!this._requiredUpdate&&G)){this._requiredUpdate=!1;var U=this;for(this.applyStyle();this.subG.hasChildNodes();)this.subG.removeChild(this.subG.lastChild);this.svg.insertBefore(this.rectBottom,this.svg.firstChild);var Z=this.series||this.graph.getSeries();if(0<Z.length)this.svg.setAttribute('display','block');else return;if('bottom'==this.autoPosition||'top'==this.autoPosition)this.graph.getDrawingWidth();for(var ie=0,re=Z.length;ie<re;ie++)(!Z[ie].excludedFromLegend||this.series)&&function(ae){var se,ne,oe;if('bottom'==this.autoPosition||'top'==this.autoPosition)this.graph.getDrawingWidth();se=document.createElementNS(U.graph.ns,'g');var de=document.createElementNS(U.graph.ns,'rect');U.subG.appendChild(se),se.appendChild(de);var ne=Z[ae].getSymbolForLegend(),ge=Z[ae].getMarkerForLegend(),oe=Z[ae].getTextForLegend(),ue=35;if(this.isHideable()){ue+=20;var he=document.createElementNS(U.graph.ns,'use');he.setAttributeNS('http://www.w3.org/1999/xlink','xlink:href','#'+(Z[ie].isShown()?this.eyeId:this.eyeCrossedId)),he.setAttribute('width',15),he.setAttribute('height',15),he.setAttribute('x',35),he.setAttribute('y',-8),he.addEventListener('click',function(xe){xe.stopPropagation();var me;Z[ae].isShown()?(Z[ae].hide(U.options.hideShapesOnHideSerie),me=U.eyeCrossedId):(Z[ae].show(U.options.hideShapesOnHideSerie),me=U.eyeId),he.setAttributeNS('http://www.w3.org/1999/xlink','xlink:href','#'+me)})}oe.setAttribute('transform','translate('+ue+', 3)'),ne&&se.appendChild(ne),'scatter'==Z[ae].getType()&&ne.setAttribute('transform','translate( 20, 0 )'),ge&&se.appendChild(ge),he&&se.appendChild(he),se.appendChild(oe);var ce=F(se);de.setAttribute('x',ce.x),de.setAttribute('y',ce.y),de.setAttribute('width',ce.width),de.setAttribute('height',ce.height),de.setAttribute('fill','none'),de.setAttribute('pointer-events','fill'),U.groups[ae]=se,se.addEventListener('click',function(xe){var me=Z[ae];me.isShown()&&(U.isSelectable()&&!me.isSelected()?U.graph.selectSerie(me):U.graph.unselectSerie(me),xe.preventDefault(),xe.stopPropagation())})}.call(this,ie);this.svg.appendChild(this.rect),this.buildLegendBox(),this.calculatePosition()}}isHideable(){return this.options.isSerieHideable}notHideable(){return this.options.isSerieHideable=!1,this}hideable(){return this.options.isSerieHideable=!0,this}set seriesHideable(G){this.options.isSerieHideable=!!G}get seriesHideable(){return this.options.isSerieHideable}isSelectable(){return this.options.isSerieSelectable}isToggleShapes(){return this.options.shapesToggleable}getDom(){return this.svg}setEvents(){var G=this,U=this.pos;this.svg.addEventListener('mousedown',function(Q){Q.stopPropagation(),console.log('down'),G.options.movable&&(U.x=Q.clientX,U.y=Q.clientY,Q.preventDefault(),G.mousedown=!0,G.graph.elementMoving(G),G.rect.setAttribute('display','block'))}),this.svg.addEventListener('click',function(Q){Q.stopPropagation()}),this.svg.addEventListener('dblclick',function(Q){Q.stopPropagation()}),this.svg.addEventListener('mousemove',function(Q){G.handleMouseMove(Q)})}handleMouseUp(G){G.stopPropagation(),G.preventDefault(),this.mousedown=!1,this.rect.setAttribute('display','none'),this.graph.elementMoving(!1)}handleMouseMove(G){if(this.mousedown){var U=this.pos,Z=G.clientX-U.x,K=G.clientY-U.y;U.transformX+=Z,U.transformY+=K,U.x=G.clientX,U.y=G.clientY,G.stopPropagation(),G.preventDefault(),this._setPosition()}}_setPosition(){var G=this.pos;isNaN(G.transformX)||isNaN(G.transformY)||!1===G.transformX||!1===G.transformY||this.svg.setAttribute('transform','translate('+G.transformX+', '+G.transformY+')')}applyStyle(){this.options.frame&&(this.rectBottom.setAttribute('stroke',this.options.frameColor),this.rectBottom.setAttribute('stroke-width',this.options.frameWidth+'px'),this.rectBottom.setAttribute('rx',this.options.frameRounding),this.rectBottom.setAttribute('ry',this.options.frameRounding)),this.rectBottom.setAttribute('fill',this.options.backgroundColor)}fixSeries(){var G=[];if(!1===arguments[0])return this.series=!1,void this.update();for(var U=0,Z=arguments.length;U<Z;U++)Array.isArray(arguments[U])?G=G.concat(arguments[U]):G.push(arguments[U]);this.update(),this.series=G}fixSeriesAdd(G){this.series=this.series||[],this.series.push(G)}requireDelayedUpdate(){this._requiredUpdate=!0}}T.default=R})},function(u,A,S){var C,P,E;(function(T,X){P=[A,S(10)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X){'use strict';Object.defineProperty(T,'__esModule',{value:!0});var I=function(F){return F&&F.__esModule?F:{default:F}}(X);class O extends I.default{constructor(F,W,B={}){super(F,W,B),this.top='top'==W}getAxisPosition(){if(!this.options.display)return 0;var F=(1==this.options.tickPosition?8:20)+1*this.graph.options.fontSize;return this.getLabel()&&(F+=this.graph.options.fontSize),F}isX(){return!0}isY(){return!1}setShift(F){this.shift=F;void 0!==this.getShift()&&this.graph.getDrawingHeight()&&this.group.setAttribute('transform','translate(0 '+(this.floating?this.getShift():this.top?this.shift:this.graph.getDrawingHeight()-this.shift)+')')}getMaxSizeTick(){return(this.top?-1:1)*(1==this.options.tickPosition?10:10)}drawTick(F,W,B,V){var R=this,G;if(G=V||this.getPos(F),!(void 0==G||isNaN(G))){var U=this.nextTick(W,function(K){K.setAttribute('y1',(R.top?1:-1)*R.tickPx1*R.tickScaling[W]),K.setAttribute('y2',(R.top?1:-1)*R.tickPx2*R.tickScaling[W]),1==W?K.setAttribute('stroke',R.getPrimaryTicksColor()):K.setAttribute('stroke',R.getSecondaryTicksColor())});if(U.setAttribute('x1',G),U.setAttribute('x2',G),this.nextGridLine(1==W,G,G,0,this.graph.getDrawingHeight()),1==W){var Z=this.nextTickLabel(function(K){K.setAttribute('y',(R.top?-1:1)*((1==R.options.tickPosition?8:20)+(R.top?10:0))),K.setAttribute('text-anchor','middle'),'black'!==R.getTicksLabelColor()&&K.setAttribute('fill',R.getTicksLabelColor()),K.style.dominantBaseline='hanging'});Z.setAttribute('x',G),this.setTickContent(Z,F,B)}return[U,Z]}}drawLabel(){'black'!==this.getLabelColor()&&this.label.setAttribute('fill',this.getLabelColor()),this.katexElement?(this.label.setAttribute('style','display: none;'),this.katexElement.setAttribute('x',Math.abs(this.getMaxPx()+this.getMinPx())/2),this.katexElement.setAttribute('y',(this.top?-1:1)*((1==this.options.tickPosition?10:25)+this.graph.options.fontSize)),this.group.appendChild(this.katexElement)):(this.options.labelFont&&this.label.setAttribute('font-family',this.options.labelFont),this.label.setAttribute('text-anchor','middle'),this.label.setAttribute('style','display: initial;'),this.label.setAttribute('x',Math.abs(this.getMaxPx()+this.getMinPx())/2),this.label.setAttribute('y',(this.top?-1:1)*((1==this.options.tickPosition?10:25)+this.graph.options.fontSize)),this.labelTspan.textContent=this.getLabel())}draw(){var F=super.draw(...arguments);return this.drawSpecifics(),F}drawSpecifics(){this.drawLabel(),this.line.setAttribute('x1',this.getMinPx()),this.line.setAttribute('x2',this.getMaxPx()),this.line.setAttribute('y1',0),this.line.setAttribute('y2',0),this.line.setAttribute('stroke',this.getAxisColor()),this.top||(this.labelTspan.style.dominantBaseline='hanging',this.expTspan.style.dominantBaseline='hanging',this.expTspanExp.style.dominantBaseline='hanging',this.unitTspan.style.dominantBaseline='hanging');var F=this.getSpan();this.line.setAttribute('marker-start',this.options.splitMarks&&0!=F[0]?'url(#horionzalsplit_'+this.graph.getId()+')':''),this.line.setAttribute('marker-end',this.options.splitMarks&&1!=F[1]?'url(#horionzalsplit_'+this.graph.getId()+')':'')}_draw0Line(F){this._0line||(this._0line=document.createElementNS(this.graph.ns,'line')),this._0line.setAttribute('x1',F),this._0line.setAttribute('x2',F),this._0line.setAttribute('y1',0),this._0line.setAttribute('y2',this.getMaxPx()),this._0line.setAttribute('stroke','black'),this.groupGrids.appendChild(this._0line)}handleMouseMoveLocal(F){F-=this.graph.getPaddingLeft(),this.mouseVal=this.getVal(F)}setMinMaxFlipped(){var F=this.maxPx-this.minPx;if(!isNaN(F)){var W=F*this.options.span[1]+this.minPx-this.options.marginMax,B=F*this.options.span[0]+this.minPx+this.options.marginMin;this.minPxFlipped=this.isFlipped()?W:B,this.maxPxFlipped=this.isFlipped()?B:W}}getZProj(F){return F*this.graph.options.zAxis.shiftX}}T.default=O})},function(u,A,S){var C,P,E;(function(T,X){P=[A,S(1),S(4),S(3)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y,I){'use strict';function F(U){return U&&U.__esModule?U:{default:U}}Object.defineProperty(T,'__esModule',{value:!0});var W=F(X),B=F(Y),V=function(U){if(U&&U.__esModule)return U;var Z={};if(null!=U)for(var K in U)Object.prototype.hasOwnProperty.call(U,K)&&(Z[K]=U[K]);return Z.default=U,Z}(I);const R={lineAt0:!1,display:!0,flipped:!1,axisDataSpacing:{min:0.1,max:0.1},unitModification:!1,primaryGrid:!0,secondaryGrid:!0,primaryGridColor:'#f0f0f0',secondaryGridColor:'#f0f0f0',primaryGridWidth:1,secondaryGridWidth:1,shiftToZero:!1,tickPosition:1,nbTicksPrimary:3,nbTicksSecondary:10,ticklabelratio:1,exponentialFactor:0,exponentialLabelFactor:0,logScale:!1,forcedMin:!1,forcedMax:!1,span:[0,1],marginMin:0,marginMax:0,scientificScale:!1,scientificScaleExponent:!1,engineeringScale:!1,unit:!1,unitWrapperBefore:'',unitWrapperAfter:'',splitMarks:!1,useKatexForLabel:!1};class G extends B.default{constructor(){super()}init(U,Z,K){this.unitModificationTimeTicks=[[1,[1,2,5,10,20,30]],[60,[1,2,5,10,20,30]],[3600,[1,2,6,12]],[86400,[1,2,3,4,5,10,20,40]]],this.graph=U,this.options=V.extend(!0,{},R,K,Z),this.group=document.createElementNS(this.graph.ns,'g'),this.hasChanged=!0,this.rectEvent=document.createElementNS(this.graph.ns,'rect'),this.rectEvent.setAttribute('pointer-events','fill'),this.rectEvent.setAttribute('fill','transparent'),this.group.appendChild(this.rectEvent),this.graph.axisGroup.appendChild(this.group),this.line=document.createElementNS(this.graph.ns,'line'),this.line.setAttribute('stroke','black'),this.line.setAttribute('shape-rendering','crispEdges'),this.line.setAttribute('stroke-linecap','square'),this.groupTicks=document.createElementNS(this.graph.ns,'g'),this.groupTickLabels=document.createElementNS(this.graph.ns,'g'),this.group.appendChild(this.groupTicks),this.group.appendChild(this.groupTickLabels),this.group.appendChild(this.line),this.labelValue,this.label=document.createElementNS(this.graph.ns,'text'),this.labelTspan=document.createElementNS(this.graph.ns,'tspan'),this.preunit='',this.unitTspan=document.createElementNS(this.graph.ns,'tspan'),this.expTspan=document.createElementNS(this.graph.ns,'tspan'),this.expTspanExp=document.createElementNS(this.graph.ns,'tspan'),this.label.appendChild(this.labelTspan),this.label.appendChild(this.unitTspan),this.label.appendChild(this.expTspan),this.label.appendChild(this.expTspanExp),this.expTspan.setAttribute('dx',6),this.expTspanExp.setAttribute('dy',-5),this.expTspanExp.setAttribute('font-size','0.8em'),this.label.setAttribute('text-anchor','middle'),this.setTickPosition(this.options.tickPosition),this.gridLinePath={primary:'',secondary:''},this.gridPrimary=document.createElementNS(this.graph.ns,'path'),this.gridSecondary=document.createElementNS(this.graph.ns,'path'),this.graph.groupPrimaryGrids.appendChild(this.gridPrimary),this.graph.groupSecondaryGrids.appendChild(this.gridSecondary),this.setGridLinesStyle(),this.group.appendChild(this.label),this.groupSeries=document.createElementNS(this.graph.ns,'g'),this.group.appendChild(this.groupSeries),this.widthHeightTick=0,this.ticks={},this.ticksLabels=[],this.tickScaling={1:3,2:2,3:1,4:0.5},this.currentTick={},this.lastCurrentTick={},this.series=[],this.totalDelta=0,this.currentAction=!1,this.group.addEventListener('mousemove',Q=>{Q.preventDefault();var J=this.graph._getXY(Q);this.handleMouseMoveLocal(J.x,J.y,Q);for(var $=0,ee=this.series.length;$<ee;$++)this.series[$].handleMouseMove(!1,!0)}),this.labels=[],this.group.addEventListener('click',Q=>{Q.preventDefault();var J=this.graph._getXY(Q);this.addLabel(this.getVal(J.x-this.graph.getPaddingLeft()))}),this.gridPrimary.setAttribute('clip-path','url(#_clipplot'+this.graph._creation+')'),this.gridSecondary.setAttribute('clip-path','url(#_clipplot'+this.graph._creation+')'),this.graph._axisHasChanged(this)}handleMouseMoveLocal(){}hide(){return this.options.display=!1,this}show(){return this.options.display=!0,this}setDisplay(U){return this.options.display=!!U,this}isDisplayed(){return this.options.display}isShown(){return this.isDisplayed(...arguments)}kill(U,Z){this.graph.killAxis(this,U,Z)}setLineAt0(U){this.options.lineAt0=!!U}adaptTo(U,Z,K,Q){return U?(this.options.adaptTo={axis:U,thisValue:Z,foreignValue:K,preference:Q},this.adapt(),this):(this.options.adaptTo=!1,this)}adapt(){if(this.options.adaptTo){if(!Z);var Z=this.options.adaptTo.axis,K=this.options.adaptTo.thisValue,Q=this.options.adaptTo.foreignValue;if((void 0===Z.currentAxisMin||void 0===Z.currentAxisMax)&&Z.setMinMaxToFitSeries(),!1!==this.options.forcedMin&&!1==this.options.forcedMax||'max'!==this.options.adaptTo.preference){this.currentAxisMin=!1===this.options.forcedMin?this._zoomed?this.getCurrentMin():this.getMinValue()-(K-this.getMinValue())*(this.options.axisDataSpacing.min*(Z.getCurrentMax()-Z.getCurrentMin())/(Q-Z.getCurrentMin())):this.options.forcedMin,this.currentAxisMin==K&&(this.currentAxisMin-=this.options.axisDataSpacing.min*this.getInterval());var J=!1===this.options.forcedMin?this.currentAxisMin:this.options.forcedMin;this.currentAxisMax=(K-J)*(Z.getCurrentMax()-Z.getCurrentMin())/(Q-Z.getCurrentMin())+J}else{this.currentAxisMax=!1===this.options.forcedMax?this._zoomed?this.getCurrentMax():this.getMaxValue()+(this.getMaxValue()-K)*(this.options.axisDataSpacing.max*(Z.getCurrentMax()-Z.getCurrentMin())/(Z.getCurrentMax()-Q)):this.options.forcedMax,this.currentAxisMax==K&&(this.currentAxisMax+=this.options.axisDataSpacing.max*this.getInterval());var J=!1===this.options.forcedMax?this.currentAxisMax:this.options.forcedMax;this.currentAxisMin=(K-J)*(Z.getCurrentMin()-Z.getCurrentMax())/(Q-Z.getCurrentMax())+J}this.graph._axisHasChanged(this)}}setFloating(U,Z){return this.floating=!0,this.floatingAxis=U,this.floatingValue=Z,this}getFloatingAxis(){return this.floatingAxis}getFloatingValue(){return this.floatingValue}setAxisDataSpacing(U,Z){return this.options.axisDataSpacing.min=U,this.options.axisDataSpacing.max=Z||U,this}dataSpacing(){return this.setAxisDataSpacing(...arguments)}setAxisDataSpacingMin(U){this.options.axisDataSpacing.min=U}setAxisDataSpacingMax(U){this.options.axisDataSpacing.max=U}setMinPx(U){this.minPx=U,this.setMinMaxFlipped()}setMaxPx(U){this.maxPx=U,this.setMinMaxFlipped()}getMinPx(){return this.minPxFlipped}getMaxPx(){return this.maxPxFlipped}getMathMaxPx(){return this.maxPx}getMathMinPx(){return this.minPx}getMinValue(){return!1===this.options.forcedMin?this.dataMin:this.options.forcedMin}getMaxValue(){return!1===this.options.forcedMax?this.dataMax:this.options.forcedMax}setMinValueData(U){this.dataMin=U}setMaxValueData(U){this.dataMax=U}getDataMax(){return this.dataMax}getDataMin(){return this.dataMin}forceMin(U,Z){return this.options.forcedMin=U,this.setCurrentMin(Z?this.getCurrentMin():void 0),this.graph._axisHasChanged(this),this}forceMax(U,Z){return this.options.forcedMax=U,this.setCurrentMax(Z?this.getCurrentMax():void 0),this.graph._axisHasChanged(this),this}getForcedMin(){return this.options.forcedMin}getForcedMax(){return this.options.forcedMax}forceToAxis(U){return U.getMaxValue&&U.getMinValue&&(this.options.forcedMin=U.getMinValue(),this.options.forcedMax=U.getMaxValue()),this}getNbTicksPrimary(){return this.options.nbTicksPrimary}setNbTicksPrimary(U){this.options.nbTicksPrimary=U}getNbTicksSecondary(){return this.options.nbTicksSecondary}handleMouseMove(U){this.mouseVal=this.getVal(U)}handleMouseWheel(U,Z,K){U=Math.min(0.2,Math.max(-0.2,U)),'min'==K?K=this.getMinValue():'max'==K?K=this.getMaxValue():!K&&(K=0),this._doZoomVal((this.getCurrentMax()-K)*(1+U)+K,(this.getCurrentMin()-K)*(1+U)+K),this.graph.draw()}set zoomLock(U){this._zoomLocked=U}get zoomLock(){return this._zoomLocked||!1}zoom(U,Z,K){return!K&&this.zoomLock?void 0:this._doZoomVal(U,Z,!0)}_doZoomVal(U,Z,K){return this._doZoom(this.getPx(U),this.getPx(Z),U,Z,K)}_doZoom(U,Z,K,Q,J){var K=void 0===K?this.getVal(U):K,Q=void 0===Q?this.getVal(Z):Q;return this.setCurrentMin(Math.min(K,Q)),this.setCurrentMax(Math.max(K,Q)),this.cacheCurrentMin(),this.cacheCurrentMax(),this.cacheInterval(),this._zoomed=!0,this.adapt(),this._hasChanged=!0,J||this.emit('zoom',[this.currentAxisMin,this.currentAxisMax,this]),this}getSerieShift(){return this._serieShift}getSerieScale(){return this._serieScale}getMouseVal(){return this.mouseVal}getUnitPerTick(U,Z,K){var J=U/ue;Z=Z?Math.min(Z,U/10):U/10;var $=K/Z;switch(this.options.unitModification){case'time':case'time:min.sec':var ee=this.getModifiedValue(this.getMaxValue());3600>ee?0:86400>ee?1:2;for(var ie=!1,re=0,ae=this.unitModificationTimeTicks.length;re<ae;re++){for(var se=0,ne=this.unitModificationTimeTicks[re][1].length;se<ne;se++)if($<this.unitModificationTimeTicks[re][0]*this.unitModificationTimeTicks[re][1][se]){ie=!0;break}if(ie)break}ge=re===this.unitModificationTimeTicks.length?1:this.unitModificationTimeTicks[re][0]*this.unitModificationTimeTicks[re][1][se];break;default:var oe=Math.floor(Math.log($)/Math.log(10)),le=$*Math.pow(10,-oe);this.decimals=-oe;for(var pe=[1,2,5,10],de=!1,re=pe.length-1;0<=re;re--)(!de||Math.abs(pe[re]-le)<Math.abs(de-le))&&(de=pe[re]);var ge=de*Math.pow(10,oe);}var ue=K/ge,J=U/Z;return[ge,ue,J]}setMinMaxToFitSeries(U){var Z=this.getInterval();return this.options.logScale?(this.currentAxisMin=Math.max(1e-50,0.9*this.getMinValue()),this.currentAxisMax=Math.max(1e-50,1.1*this.getMaxValue())):(this.currentAxisMin=this.getMinValue(),this.currentAxisMax=this.getMaxValue(),!1===this.getForcedMin()&&(this.currentAxisMin-=this.options.axisDataSpacing.min*Z),!1===this.getForcedMax()&&(this.currentAxisMax+=this.options.axisDataSpacing.max*Z)),(isNaN(this.currentAxisMin)||isNaN(this.currentAxisMax))&&(this.currentAxisMax=void 0,this.currentAxisMin=void 0),this.cacheCurrentMin(),this.cacheCurrentMax(),this.cacheInterval(),this._zoomed=!1,this.adapt(),U||this.graph._axisHasChanged(this),this.emit('zoomOutFull',[this.currentAxisMin,this.currentAxisMax,this]),this}getInterval(){return this.getMaxValue()-this.getMinValue()}getCurrentInterval(){return this.cachedInterval}getCurrentMin(){return this.cachedCurrentMin}getCurrentMax(){return this.cachedCurrentMax}cacheCurrentMin(){this.cachedCurrentMin=this.currentAxisMin==this.currentAxisMax?this.options.logScale?this.currentAxisMin/10:this.currentAxisMin-1:this.currentAxisMin}cacheCurrentMax(){this.cachedCurrentMax=this.currentAxisMax==this.currentAxisMin?this.options.logScale?10*this.currentAxisMax:this.currentAxisMax+1:this.currentAxisMax}cacheInterval(){this.cachedInterval=this.cachedCurrentMax-this.cachedCurrentMin}setCurrentMin(U){return(void 0===U||!1!==this.getForcedMin()&&U<this.getForcedMin())&&(U=this.getMinValue()),this.currentAxisMin=U,this.options.logScale&&(this.currentAxisMin=Math.max(1e-50,U)),this.graph._axisHasChanged(this),this}setCurrentMax(U){(U===void 0||!1!==this.getForcedMax()&&U>this.getForcedMax())&&(U=this.getMaxValue()),this.currentAxisMax=U,this.options.logScale&&(this.currentAxisMax=Math.max(1e-50,U)),this.graph._axisHasChanged(this)}flip(U){return this.options.flipped=U,this.setMinMaxFlipped(),this}isFlipped(){return this.options.flipped}_draw(){var U=this;this.cacheCurrentMax(),this.cacheCurrentMin(),this.cacheInterval(),(void 0==this.currentAxisMin||void 0==this.currentAxisMax)&&this.setMinMaxToFitSeries(!0);var K=Math.abs(this.getMaxPx()-this.getMinPx()),Q=this.getCurrentInterval();if(!this.options.display)return this.line.setAttribute('display','none'),0;this.line.setAttribute('display','block'),this.scientificExponent=!0==this.options.scientificScale?this.options.scientificScaleExponent?this.options.scientificScaleExponent:Math.floor(Math.log(Math.max(Math.abs(this.getCurrentMax()),Math.abs(this.getCurrentMin())))/Math.log(10)):0,this.gridLinePath.primary='',this.gridLinePath.secondary='';let J;if(!this.options.useKatexForLabel||!this.graph.hasKatexRenderer())this.options.unitDecade&&this.options.unit&&0!==this.scientificExponent&&(this.scientificExponent=this.getEngineeringExponent(this.scientificExponent))&&(J=this.getExponentGreekLetter(this.scientificExponent))?(this.preunit=J,this.unitTspan.setAttribute('dx',0)):0===this.scientificExponent||isNaN(this.scientificExponent)?(!this.options.unit&&this.unitTspan.setAttribute('display','none'),this.preunit='',this.expTspan.setAttribute('display','none'),this.expTspanExp.setAttribute('display','none')):(this.options.engineeringScale&&(this.scientificExponent=this.getEngineeringExponent(this.scientificExponent)),this.preunit='',this.expTspan.setAttribute('display','visible'),this.expTspanExp.setAttribute('display','visible'),this.expTspan.textContent='x10',this.expTspanExp.textContent=this.scientificExponent),this.writeUnit();else{let te=this.getLabel();this.options.unitDecade&&this.options.unit&&0!==this.scientificExponent&&(this.scientificExponent=this.getEngineeringExponent(this.scientificExponent))&&(J=this.getExponentGreekLetter(this.scientificExponent))?(te+=J,this.preunitTspan.innerHTML=J,this.preunitTspan.setAttribute('display','visible'),this.unitTspan.setAttribute('dx',0),te+=' '+J+' '+this.options.unit):0!==this.scientificExponent&&!isNaN(this.scientificExponent)&&(this.options.engineeringScale&&(this.scientificExponent=this.getEngineeringExponent(this.scientificExponent)),te+=' \\cdot 10^'+this.scientificExponent+' '+this.options.unit),this.katexElement=this.graph.renderWithKatex(te,this.katexElement)}if(!!this.options.hideTicks)var $=0;else if(this.resetTicksLength(),this.linkedToAxis){this.linkedToAxis.deltaPx=10;var $=this.drawLinkedToAxisTicksWrapper(K,Q)}else if(!this.options.logScale)var $=this.drawLinearTicksWrapper(K,Q);else var $=this.drawLogTicks();this.removeUselessTicks(),this.removeUselessTickLabels(),this.gridPrimary.setAttribute('d',this.gridLinePath.primary),this.gridSecondary.setAttribute('d',this.gridLinePath.secondary);var ee=this.graph.findAxesLinkedTo(this);return ee.map(function(te){te.linkedToAxis&&(te.setMinPx(U.getMinPx()),te.setMaxPx(U.getMaxPx()),te.draw())}),this.options.lineAt0&&0>this.getCurrentMin()&&0<this.getCurrentMax()&&this._draw0Line(this.getPx(0)),$}writeUnit(){this.options.unit?(this.unitTspan.setAttribute('display','visible'),this.unitTspan.setAttribute('dx',5),this.expTspan.setAttribute('display','none'),this.expTspanExp.setAttribute('display','none'),this.unitTspan.innerHTML=(this.options.unitWrapperBefore+this.preunit+this.options.unit+this.options.unitWrapperAfter).replace(/\^([-+0-9]*)(.*)/g,'<tspan dy=\'-5\' font-size=\'0.7em\'>$1</tspan><tspan dy=\'5\' font-size=\'1em\'>$2</tspan>')):this.unitTspan.setAttribute('display','none')}getExponentGreekLetter(U){switch(U){case 3:return'k';break;case 6:return'M';break;case 9:return'G';break;case 12:return'T';break;case 15:return'E';break;case-3:return'm';break;case-6:return'&mu;';break;case-9:return'n';break;case-12:return'p';break;case-15:return'f';}}drawLinearTicksWrapper(U,Z){let K;return this.options.primaryTickUnit?K=this.options.primaryTickUnit:(K=this.getUnitPerTick(U,this.getNbTicksPrimary(),Z)[0],this.options.maxPrimaryTickUnit&&this.options.maxPrimaryTickUnit<K?K=this.options.maxPrimaryTickUnit:this.options.minPrimaryTickUnit&&this.options.minPrimaryTickUnit>K&&(K=this.options.minPrimaryTickUnit)),this.drawTicks(K,this.secondaryTicks())}forcePrimaryTickUnit(U){this.options.primaryTickUnit=U}forcePrimaryTickUnitMax(U){this.options.maxPrimaryTickUnit=U}forcePrimaryTickUnitMin(U){this.options.minPrimaryTickUnit=U}getPrimaryTickUnit(){return this.incrTick}setTickLabelRatio(U){this.options.ticklabelratio=U}draw(){this._widthLabels=0;var U=this._draw();return this._widthLabels+=U,U}drawTicks(U,Z){var K=U,Q=this.getCurrentMin(),J=this.getCurrentMax(),re=0,ee,te,ie;for(Z&&(ee=K/Z),te=this.options.shiftToZero?this.dataMin-Math.ceil((this.dataMin-Q)/K)*K:Math.floor(Q/K)*K,this.incrTick=U;te<=J&&(re++,!(200<re));){if(Z){ie=te+ee,this.subIncrTick=ie;for(var ae=0;ie<te+K&&(ae++,!(100<ae));){if(ie<Q||ie>J){ie+=ee;continue}this.drawTickWrapper(ie,!1,1e-4>Math.abs(ie-te-K/2)?2:3),ie+=ee}}if(te<Q||te>J){te+=U;continue}this.drawTickWrapper(te,!0,1),te+=U}return this.widthHeightTick=this.getMaxSizeTick(),this.widthHeightTick}nextTick(U,Z){if(this.ticks[U]=this.ticks[U]||[],this.lastCurrentTick[U]=this.lastCurrentTick[U]||0,this.currentTick[U]=this.currentTick[U]||0,this.currentTick[U]>=this.ticks[U].length){var K=document.createElementNS(this.graph.ns,'line');this.groupTicks.appendChild(K),this.ticks[U].push(K),Z(K)}var K=this.ticks[U][this.currentTick[U]];return this.currentTick[U]>=this.lastCurrentTick[U]&&K.setAttribute('display','visible'),this.currentTick[U]++,K}nextTickLabel(U){if(this.ticksLabels=this.ticksLabels||[],this.lastCurrentTickLabel=this.lastCurrentTickLabel||0,this.currentTickLabel=this.currentTickLabel||0,this.currentTickLabel>=this.ticksLabels.length){var Z=document.createElementNS(this.graph.ns,'text');this.groupTickLabels.appendChild(Z),this.ticksLabels.push(Z),U(Z)}var Z=this.ticksLabels[this.currentTickLabel];return this.currentTickLabel>=this.lastCurrentTickLabel&&Z.setAttribute('display','visible'),this.currentTickLabel++,Z}removeUselessTicks(){for(var U in this.currentTick){for(var Z=this.currentTick[U];Z<this.ticks[U].length;Z++)this.ticks[U][Z].setAttribute('display','none');this.lastCurrentTick[U]=this.currentTick[U],this.currentTick[U]=0}}removeUselessTickLabels(){for(var U=this.currentTickLabel;U<this.ticksLabels.length;U++)this.ticksLabels[U].setAttribute('display','none');this.lastCurrentTickLabel=this.currentTickLabel,this.currentTickLabel=0}nextGridLine(U,Z,K,Q,J){(U&&this.options.primaryGrid||!U&&this.options.secondaryGrid)&&(this.gridLinePath[U?'primary':'secondary']+='M '+Z+' '+Q+' L '+K+' '+J)}setGridLineStyle(U,Z){U.setAttribute('shape-rendering','crispEdges'),U.setAttribute('stroke',Z?this.getPrimaryGridColor():this.getSecondaryGridColor()),U.setAttribute('stroke-width',Z?this.getPrimaryGridWidth():this.getSecondaryGridWidth()),U.setAttribute('stroke-opacity',Z?this.getPrimaryGridOpacity():this.getSecondaryGridOpacity());var K;(K=Z?this.getPrimaryGridDasharray():this.getSecondaryGridDasharray())&&U.setAttribute('stroke-dasharray',K)}setGridLinesStyle(){return this.setGridLineStyle(this.gridPrimary,!0),this.setGridLineStyle(this.gridSecondary,!1),this}resetTicksLength(){}secondaryTicks(){return this.options.nbTicksSecondary}drawLogTicks(){var U=this.getCurrentMin(),Z=this.getCurrentMax(),K=Math.min(U,Z),Z=Math.max(U,Z);1e-50>K&&(K=1e-50),20<Math.log(K)-Math.log(Z)&&(Z=Math.pow(10,20*Math.log(K)));var Q={fontSize:'1.0em',exponential:!0,overwrite:!1};0>K&&(K=0);for(var J=0==K?0:Math.floor(Math.log(K)/Math.log(10)),K=1,ee;(ee=K*Math.pow(10,J))<Z;)1==K&&ee>U&&this.drawTickWrapper(ee,!0,1,Q),10==K?(K=1,J++):(1!=K&&ee>U&&this.drawTickWrapper(ee,!1,2,{overwrite:'',fontSize:'0.6em'}),K++);return this.widthHeightTick=this.getMaxSizeTick(),this.widthHeightTick}drawTickWrapper(U,Z,K,Q){this.drawTick(U,K,Q)}linkToAxis(U,Z,K){this.linkedToAxis={axis:U,scalingFunction:Z,decimals:K||1}}drawLinkedToAxisTicksWrapper(U,Z){var K=this.linkedToAxis,Q=0,ee=0,J,$,te,ie;K.deltaPx||(K.deltaPx=10);do{if(J=K.scalingFunction(K.axis.getVal(Q+this.getMinPx())),K.decimals&&(this.decimals=K.decimals),$=this.drawTick(J,1,{},Q+this.getMinPx()),!$)throw console.log(J,Q,this.getMinPx()),'Unable to draw tick. Please report the test-case';if(te=8*($[1].textContent+'').length,ie=5*Math.round(te/5),ie>K.deltaPx)return K.deltaPx=ie,void this.drawLinkedToAxisTicksWrapper(U,Z);ee++,Q+=K.deltaPx}while(Q<U)}getPos(U){return this.getPx(U)}getPx(U){if(!this.options.logScale)return(U-this.getCurrentMin())/this.getCurrentInterval()*(this.getMaxPx()-this.getMinPx())+this.getMinPx();if(!(0>U)){var U=(Math.log(U)-Math.log(this.getCurrentMin()))/(Math.log(this.getCurrentMax())-Math.log(this.getCurrentMin()))*(this.getMaxPx()-this.getMinPx())+this.getMinPx();return U}}getRoundedPx(U){return Math.round(10*this.getPx(U))/10}getVal(U){return this.options.logScale?Math.exp((U-this.getMinPx())/(this.getMaxPx()-this.getMinPx())*(Math.log(this.getCurrentMax())-Math.log(this.getCurrentMin()))+Math.log(this.getCurrentMin())):(U-this.getMinPx())/(this.getMaxPx()-this.getMinPx())*this.getCurrentInterval()+this.getCurrentMin()}getRelPx(U){return U/this.getCurrentInterval()*(this.getMaxPx()-this.getMinPx())}getRelVal(U){return U/(this.getMaxPx()-this.getMinPx())*this.getCurrentInterval()}valueToText(U){if(this.scientificExponent)return U/=Math.pow(10,this.scientificExponent),U.toFixed(1);if(U=U*Math.pow(10,this.getExponentialFactor())*Math.pow(10,this.getExponentialLabelFactor()),this.options.shiftToZero&&(U-=this.dataMin),this.options.ticklabelratio&&(U*=this.options.ticklabelratio),this.options.unitModification)return U=this.modifyUnit(U,this.options.unitModification),U;var Z=this.decimals-this.getExponentialFactor()-this.getExponentialLabelFactor();return isNaN(U)?'':0<Z?U.toFixed(Z):U.toFixed(0)}valueToHtml(U,Z,K){var Q=this.valueToText(U),J;return this.options.unitDecade&&this.options.unit&&0!==this.scientificExponent&&(this.scientificExponent=this.getEngineeringExponent(this.scientificExponent))&&(J=this.getExponentGreekLetter(this.scientificExponent))?Q+=J:0!==this.scientificExponent&&!isNaN(this.scientificExponent)&&!Z&&(Q+='x10',Q+='<sup>'+this.scientificExponent+'</sup>'),this.options.unit&&!K&&(Q+=this.options.unit.replace(/\^([-+0-9]*)/g,'<sup>$1</sup>')),Q}getModifiedValue(U){return this.options.ticklabelratio&&(U*=this.options.ticklabelratio),this.options.shiftToZero&&(U-=this.getMinValue()*(this.options.ticklabelratio||1)),U}modifyUnit(U,Z){var K='',Q=this.incrTick;switch(Z){case'time':var J=this.getModifiedValue(this.getMaxValue()),ee=[[60,'min'],[3600,'h'],[86400,'d']],$,te;if(3600>J?te=0:86400>J?te=1:2592000>J&&(te=2),!ee[te])return!1;U=U/ee[te][0];var ie=Math.floor(U);for(K=ie+ee[te][1],te--;Q<1*ee[te+1][0]&&-1<te;)$=!1,U=(U-ie)*ee[te+1][0]/ee[te][0],ie=Math.round(U),K+=' '+ie+ee[te][1],te--;break;case'time:min.sec':U=U/60;var ie=Math.floor(U),re=Math.round(60*(U-ie))+'';re=1==re.length?'0'+re:re,K=ie+'.'+re;}return K}getExponentialFactor(){return this.options.exponentialFactor}setExponentialFactor(U){this.options.exponentialFactor=U}setExponentialLabelFactor(U){this.options.exponentialLabelFactor=U}getExponentialLabelFactor(){return this.options.exponentialLabelFactor}setLabel(U){return this.options.labelValue=U,this}setLabelFont(U){return this.options.labelFont=U,this}getLabel(){return this.options.labelValue}setSpan(U,Z){return this.options.span=[U,Z],this}getSpan(){return this.options.span}setLevel(U){return this._level=U,this}getLevel(){return this._level}setShift(U){this.shift=U}getShift(){return this.shift}setTickPosition(U){switch(U){case 3:case'outside':case W.default.TICKS_OUTSIDE:U=3;break;case 2:case'centered':case W.default.TICKS_CENTERED:U=2;break;default:case 1:case'inside':case W.default.TICKS_INSIDE:U=1;}switch(this.options.tickPosition=U,this.options.tickPosition){case 3:this.tickPx1=-2,this.tickPx2=0;break;case 2:this.tickPx1=-1,this.tickPx2=1;break;case 1:this.tickPx1=0,this.tickPx2=2;}return this}setGrids(U){return this.options.primaryGrid=U,this.options.secondaryGrid=U,this}setPrimaryGrid(U){return this.options.primaryGrid=U,this}setSecondaryGrid(U){return this.options.secondaryGrid=U,this}primaryGridOn(){return this.setPrimaryGrid(!0)}primaryGridOff(){return this.setPrimaryGrid(!1)}secondaryGridOn(){return this.setSecondaryGrid(!0)}secondaryGridOff(){return this.setSecondaryGrid(!1)}gridsOn(){return this.setGrids(!0)}gridsOff(){return this.setGrids(!1)}turnGridsOff(){return this.gridsOff(...arguments)}turnGridsOn(){return this.gridsOn(...arguments)}setAxisColor(U){return this.options.axisColor=U,this}getAxisColor(){return this.options.axisColor||'black'}setPrimaryTicksColor(U){return this.options.primaryTicksColor=U,this}getPrimaryTicksColor(){return this.options.primaryTicksColor||'black'}setSecondaryTicksColor(U){return this.options.secondaryTicksColor=U,this}getSecondaryTicksColor(){return this.options.secondaryTicksColor||'black'}setTicksLabelColor(U){return this.options.ticksLabelColor=U,Array.isArray(this.ticksLabels)&&this.ticksLabels.forEach(Z=>{Z.setAttribute('fill',U)}),this}getTicksLabelColor(){return this.options.ticksLabelColor||'black'}setPrimaryGridColor(U){return this.options.primaryGridColor=U,this}getPrimaryGridColor(){return this.options.primaryGridColor}setSecondaryGridColor(U){return this.options.secondaryGridColor=U,this}getSecondaryGridColor(){return this.options.secondaryGridColor}setPrimaryGridWidth(U){return this.options.primaryGridWidth=U,this}getPrimaryGridWidth(){return this.options.primaryGridWidth}setSecondaryGridWidth(U){return this.options.secondaryGridWidth=U,this}getSecondaryGridWidth(){return this.options.secondaryGridWidth}setPrimaryGridOpacity(U){return this.options.primaryGridOpacity=U,this}getPrimaryGridOpacity(){return this.options.primaryGridOpacity}setSecondaryGridOpacity(U){return this.options.secondaryGridOpacity=U,this}getSecondaryGridOpacity(){return this.options.secondaryGridOpacity}setPrimaryGridDasharray(U){return this.options.primaryGridDasharray=U,this}getPrimaryGridDasharray(){return this.options.primaryGridDasharray}setSecondaryGridDasharray(U){return this.options.secondaryGridDasharray=U,this}getSecondaryGridDasharray(){return this.options.secondaryGridDasharray}setLabelColor(U){return this.options.labelColor=U,this}getLabelColor(){return this.options.labelColor}setTickContent(U,Z,K){if(K||(K={}),K.overwrite||!K.exponential)U.textContent=K.overwrite||this.valueToText(Z);else{var Q=Math.round(Math.log(Z)/Math.log(10)),J=Math.floor(Z*Math.pow(10,-Q));U.textContent=1==J?'10':J+'x10';var $=document.createElementNS(this.graph.ns,'tspan');$.textContent=Q,$.setAttribute('font-size','0.7em'),$.setAttribute('dy',-5),U.appendChild($)}K.fontSize&&U.setAttribute('font-size',K.fontSize)}isX(){return!1}isY(){return!1}setUnit(U){return this.options.unit=U,this}setUnitWrapper(U,Z){return this.options.unitWrapperBefore=U,this.options.unitWrapperAfter=Z,this}setUnitDecade(U){return this.options.unitDecade=U,this}setScientific(U){return this.options.scientificScale=U,this}setScientificScaleExponent(U){return this.options.scientificScaleExponent=U,this}setEngineering(U){return this.options.scientificScale=U,this.options.engineeringScale=U,this}getEngineeringExponent(U){return U-=0<U?U%3:(3- -U%3)%3,U}setLogScale(U){return this.options.logScale=U,this}isZoomed(){return this.currentAxisMin!=this.getMinValue()&&this.currentAxisMax!=this.getMaxValue()}hasAxis(){return!1}getType(){return null}useKatexForLabel(U=!0){return this.options.useKatexForLabel=U,this}}G.prototype.getValue=G.prototype.getVal,G.prototype.getDeltaPx=G.prototype.getRelPx,T.default=G})},function(u,A,S){var C,P,E;(function(T,X){P=[A,S(10)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X){'use strict';Object.defineProperty(T,'__esModule',{value:!0});var I=function(F){return F&&F.__esModule?F:{default:F}}(X);class O extends I.default{constructor(F,W,B){super(F,W,B),this.leftright=W,this.left='left'==W}setAxisPosition(F){this.shiftPosition=F}getAxisPosition(){return this.shiftPosition||0}getAdditionalWidth(){let F=0;return this.getLabel()&&(F+=this.graph.options.fontSize),this.isShown()&&(F+=Math.abs(this.tickMargin)),F}isX(){return!1}isY(){return!0}resetTicksLength(){this.longestTick=[!1,0]}getMaxSizeTick(){return this.longestTick&&this.longestTick[0]?this.longestTick[0].getComputedTextLength()+5:0}draw(){this.tickMargin=this.left?-5-this.tickPx1*this.tickScaling[1]:5+this.tickPx1*this.tickScaling[1];var F=super.draw(...arguments);return F+=this.getAdditionalWidth(),this.drawSpecifics(F),this.fullwidthlabel=F,F}equalizePosition(F){return this.placeLabel(this.left?-F:F),this.getLabel()?F+this.graph.options.fontSize:0}drawTick(F,W,B,V){var G=this,U=this.groupTicks,R,Z;if(R=V||this.getPos(F),!(void 0==R||isNaN(R))){var K=this.nextTick(W,Q=>{Q.setAttribute('x1',(this.left?1:-1)*this.tickPx1*this.tickScaling[W]),Q.setAttribute('x2',(this.left?1:-1)*this.tickPx2*this.tickScaling[W]),1==W?Q.setAttribute('stroke',this.getPrimaryTicksColor()):Q.setAttribute('stroke',this.getSecondaryTicksColor())});if(K.setAttribute('y1',R),K.setAttribute('y2',R),this.nextGridLine(1==W,0,this.graph.getDrawingWidth(),R,R),1==W){var Z=this.nextTickLabel(Q=>{Q.setAttribute('x',this.tickMargin),'black'!==this.getTicksLabelColor()&&Q.setAttribute('fill',this.getTicksLabelColor()),this.left?Q.setAttribute('text-anchor','end'):Q.setAttribute('text-anchor','start'),Q.style.dominantBaseline='central'});Z.setAttribute('y',R),this.setTickContent(Z,F,B),(Z.textContent+'').length>=this.longestTick[1]&&(this.longestTick[0]=Z,this.longestTick[1]=(Z.textContent+'').length)}}}drawLabel(){'black'!==this.getLabelColor()&&this.label.setAttribute('fill',this.getLabelColor()),this.label.setAttribute('dominant-baseline',this.left?'auto':'hanging'),this.labelTspan.textContent=this.getLabel()}placeLabel(F){this.label.setAttribute('transform','translate('+F+', '+Math.abs(this.getMaxPx()+this.getMinPx())/2+') rotate(-90)')}drawSpecifics(){this.line.setAttribute('y1',this.getMinPx()),this.line.setAttribute('y2',this.getMaxPx()),this.line.setAttribute('x1',0),this.line.setAttribute('x2',0),this.line.setAttribute('stroke',this.getAxisColor());var F=this.getSpan();this.line.setAttribute('marker-start',this.options.splitMarks&&0!=F[0]?'url(#verticalsplit_'+this.graph.getId()+')':''),this.line.setAttribute('marker-end',this.options.splitMarks&&1!=F[1]?'url(#verticalsplit_'+this.graph.getId()+')':'')}setShift(F){if(this.shift=F,this.shift&&this.graph.getWidth()){let W=this.shift;W=this.floating?W:this.isLeft()?W:this.graph.getWidth()-this.graph.getPaddingRight()-this.graph.getPaddingLeft()-W,this.group.setAttribute('transform','translate( '+W+' 0 )'),this.drawLabel()}}isLeft(){return this.left}isRight(){return!this.left}isFlipped(){return!this.options.flipped}_draw0Line(F){this._0line||(this._0line=document.createElementNS(this.graph.ns,'line')),this._0line.setAttribute('y1',F),this._0line.setAttribute('y2',F),this._0line.setAttribute('x1',0),this._0line.setAttribute('x2',this.graph.getDrawingWidth()),this._0line.setAttribute('stroke','black'),this.groupGrids.appendChild(this._0line)}handleMouseMoveLocal(F,W){W-=this.graph.getPaddingTop(),this.mouseVal=this.getVal(W)}scaleToFitAxis(F,W,B,V,R,G){F&&F.isX()||(F=this.graph.getXAxis()),isNaN(B)&&(B=F.getCurrentMin()),isNaN(V)&&(V=F.getCurrentMax()),R===void 0&&(R=!0),G===void 0&&(G=!0),'number'==typeof W&&(V=B,B=W,W=!1);for(var U=-(1/0),Z=1/0,K=0,Q=0,J=this.graph.series.length;Q<J;Q++)this.graph.series[Q].isShown()&&this.graph.series[Q]!=W&&this.graph.series[Q].getXAxis()==F&&this.graph.series[Q].getYAxis()===this&&(K++,U=G?Math.max(U,this.graph.series[Q].getMax(B,V)):0,Z=R?Math.min(Z,this.graph.series[Q].getMin(B,V)):0);if(0==K)this.setMinMaxToFitSeries();else{Z=R?Z:this.getCurrentMin(),U=G?U:this.getCurrentMax();var $=U-Z;Z-=this.options.axisDataSpacing.min*$,U+=this.options.axisDataSpacing.max*$,this._doZoomVal(Z,U)}return this}setMinMaxFlipped(){var F=this.maxPx-this.minPx;if(!isNaN(F)){var W=this.maxPx-F*this.options.span[0]-this.options.marginMin,B=this.maxPx-F*this.options.span[1]+this.options.marginMax;this.minPxFlipped=this.isFlipped()?W:B,this.maxPxFlipped=this.isFlipped()?B:W}}getZProj(F){return F*this.graph.options.zAxis.shiftY}}T.default=O})},function(u,A,S){var C,P,E;(function(T,X){P=[A,S(9)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X){'use strict';Object.defineProperty(T,'__esModule',{value:!0});var I=function(F){return F&&F.__esModule?F:{default:F}}(X);class O extends I.default{constructor(F,W,B={}){super(F,W,B)}set categories(F){return this._barCategories=F,this}draw(){var F=this,B=this.graph.drawingSpaceWidth,V=this._barCategories,W;if(this.forceMin(0),this.forceMax(1),this.cacheCurrentMin(),this.cacheCurrentMax(),this.cacheInterval(),!!V){Array.isArray(V)||(V=[V]);for(var R=0;R<=V.length;R++)this.drawTick(R/V.length,2),R<V.length&&(W=this.nextTickLabel(function(G){G.setAttribute('y',(F.top?-1:1)*((1==F.options.tickPosition?8:20)+(F.top?10:0))),G.setAttribute('text-anchor','middle'),'black'!==F.getTicksLabelColor()&&G.setAttribute('fill',F.getTicksLabelColor()),G.style.dominantBaseline='hanging'}),W.setAttribute('x',this.getPos((R+0.5)/V.length)),W.textContent=V[R].title);return this.drawSpecifics(),this}}autoSeries(){let F=[];for(let W of this.graph.series)W.getXAxis()==this&&F.push(W);return this.setSeries(...F),this}setSeries(){var F=this;return this.series=arguments,Array.prototype.map.call(this.series,function(W,B){'object'==typeof W||(W=F.graph.getSerie(W)),W.setCategoryConfig&&W.setCategoryConfig(B,F._barCategories,F.series.length)}),this._getUsedCategories(),this}_getUsedCategories(){let F={},W=0;Array.prototype.map.call(this.series,G=>{let U=G.getUsedCategories();for(let Z of U)F.hasOwnProperty(Z)||(F[Z]=1,W+=1),F[Z]++,W++});let B=0;for(let G in F){let U=F[G];F[G]=B,B+=U}let V={},R=0;Array.prototype.map.call(this.series,G=>{let U=G.getUsedCategories(),Z={};U.map(K=>{V[K]=V[K]||0.5,Z[K]=(F[K]+V[K])/W,V[K]++}),G.setDataIndices(Z,W),R++})}getType(){return'category'}}T.default=O})},function(u,A,S){var C,P,E;(function(T,X){P=[A,S(10),S(3)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y){'use strict';function F(te,ie){return Math.round(te/ie)*ie}function W(te,ie){switch(ie.unit){case's':te.setSeconds(F(te.getSeconds(),ie.increment)),te.setMilliseconds(0);break;case'i':te.setMinutes(F(te.getMinutes(),ie.increment)),te.setSeconds(0),te.setMilliseconds(0);break;case'h':te.setHours(F(te.getHours(),ie.increment)),te.setMinutes(0),te.setSeconds(0),te.setMilliseconds(0);break;case'd':te.setMinutes(0),te.setSeconds(0),te.setMilliseconds(0),te.setHours(0),te.setDate(F(te.getDate(),ie.increment));break;case'm':te.setMinutes(0),te.setSeconds(0),te.setMilliseconds(0),te.setHours(0),te.setDate(1),te.setMonth(F(te.getMonth(),ie.increment));break;case'y':te.setMinutes(0),te.setSeconds(0),te.setMilliseconds(0),te.setHours(0),te.setDate(1),te.setMonth(0);break;default:throw'Date format not recognized';}return te}function B(te,ie){switch(ie.unit){case's':te.setSeconds(te.getSeconds()+ie.increment),te.setMilliseconds(0);break;case'i':te.setMinutes(te.getMinutes()+ie.increment),te.setSeconds(0),te.setMilliseconds(0);break;case'h':te.setHours(te.getHours()+ie.increment),te.setMinutes(0),te.setSeconds(0),te.setMilliseconds(0);break;case'd':te.setDate(te.getDate()+ie.increment),te.setMinutes(0),te.setSeconds(0),te.setMilliseconds(0),te.setHours(0);break;case'm':te.setMonth(te.getMonth()+ie.increment),te.setMinutes(0),te.setSeconds(0),te.setMilliseconds(0),te.setHours(0),te.setDate(1);break;case'y':te.setFullYear(te.getFullYear()+ie.increment),te.setMinutes(0),te.setSeconds(0),te.setMilliseconds(0),te.setHours(0),te.setDate(1),te.setMonth(0);break;default:throw'Date format not recognized';}return te}function V(te,ie,re){if(te.groups[ie][re])return te.groups[ie][re].group.setAttribute('display','block'),te.groups[ie][re];var ae={group:document.createElementNS(te.graph.ns,'g'),text:document.createElementNS(te.graph.ns,'text')},se=document.createElementNS(te.graph.ns,'line');return se.setAttribute('stroke','black'),se.setAttribute('y1',0),2===ie?(se.setAttribute('y2',6),ae.text.setAttribute('y',15),ae.line=se,ae.group.appendChild(ae.line)):1===ie?(se.setAttribute('y2',20),ae.text.setAttribute('y',10),ae.line1=se,ae.line2=se.cloneNode(),ae.group.appendChild(ae.line1),ae.group.appendChild(ae.line2)):void 0,(ae.text.setAttribute('text-anchor','middle'),ae.text.setAttribute('dominant-baseline','middle'),ae.group.appendChild(ae.text),te.getWrapper(ie).appendChild(ae.group),te.groups[ie][re]=ae)}function R(te,ie,re){for(;re<te.groups[ie].length;re++)G(te.groups[ie][re])}function G(te){te.group.setAttribute('display','none')}function U(te,ie){return $(te,ie)}function Z(te,ie,re,ae,se,ne,oe){switch(te){case 1:var le=Math.max(ae,Math.min(se,ne)),pe=Math.max(ae,Math.min(se,oe));if(isNaN(pe)||isNaN(le))return;for(ie.line1.setAttribute('x1',le),ie.line2.setAttribute('x1',pe),ie.line1.setAttribute('x2',le),ie.line2.setAttribute('x2',pe),ie.text.setAttribute('x',(le+pe)/2);8*re.length>pe-le;)if(re=re.substr(0,re.length-2)+'.',1==re.length){re='';break}ie.text.textContent=re;break;case 2:if(ne<ae||ne>se)return void G(ie);ie.line.setAttribute('x1',ne),ie.line.setAttribute('x2',ne),ie.text.setAttribute('x',ne),ie.text.textContent=re;}}Object.defineProperty(T,'__esModule',{value:!0});var K=function(te){return te&&te.__esModule?te:{default:te}}(X),Q=function(te){if(te&&te.__esModule)return te;var ie={};if(null!=te)for(var re in te)Object.prototype.hasOwnProperty.call(te,re)&&(ie[re]=te[re]);return ie.default=te,ie}(Y),J=[{threshold:20,increments:{1:{increment:1,unit:'i',format:'HH"h"MM (dd/mm/yy)'},2:{increment:1,unit:'s',format:'MM:ss"s"'}}},{threshold:50,increments:{1:{increment:1,unit:'i',format:'HH"h"MM (dd/mm/yy)'},2:{increment:2,unit:'s',format:'MM:ss"s"'}}},{threshold:100,increments:{1:{increment:1,unit:'i',format:'HH"h"MM (dd/mm/yy)'},2:{increment:5,unit:'s',format:'MM:ss"s"'}}},{threshold:600,increments:{1:{increment:10,unit:'i',format:'HH"h"MM (dd/mm/yy)'},2:{increment:30,unit:'s',format:'MM:ss"s"'}}},{threshold:1e3,increments:{1:{increment:1,unit:'h',format:'HH"h"MM (dd/mm/yy)'},2:{increment:10,unit:'i',format:'MM"min"'}}},{threshold:1500,increments:{1:{increment:1,unit:'d',format:'dd/mm/yyyy'},2:{increment:1,unit:'i',format:'H"h"MM'}}},{threshold:3e3,increments:{1:{increment:1,unit:'d',format:'dd/mm/yyyy'},2:{increment:2,unit:'i',format:'H"h"MM'}}},{threshold:8e3,increments:{1:{increment:1,unit:'d',format:'dd/mm/yyyy'},2:{increment:10,unit:'i',format:'H"h"MM'}}},{threshold:26400,increments:{1:{increment:1,unit:'d',format:'dd/mm/yyyy'},2:{increment:20,unit:'i',format:'H"h"MM'}}},{threshold:86400,increments:{1:{increment:1,unit:'d',format:'dd/mm/yyyy'},2:{increment:1,unit:'h',format:'H"h"MM'}}},{threshold:2e5,increments:{1:{increment:1,unit:'d',format:'dd/mm/yyyy'},2:{increment:2,unit:'h',format:'H"h"MM'}}},{threshold:4e5,increments:{1:{increment:1,unit:'d',format:'dd/mm/yyyy'},2:{increment:6,unit:'h',format:'H"h"MM'}}},{threshold:1.4e6,increments:{1:{increment:1,unit:'d',format:'dd/mm/yyyy'},2:{increment:12,unit:'h',format:'HH"h"MM'}}},{threshold:6.4e6,increments:{1:{increment:1,unit:'m',format:'mmmm yyyy'},2:{increment:1,unit:'d',format:'dd'}}},{threshold:1.24e7,increments:{1:{increment:1,unit:'m',format:'mmmm yyyy'},2:{increment:2,unit:'d',format:'dd'}}},{threshold:43200000,increments:{1:{increment:1,unit:'m',format:'mmmm yyyy'},2:{increment:7,unit:'d',format:'dd'}}},{threshold:69120000,increments:{1:{increment:1,unit:'m',format:'mmmm yyyy'},2:{increment:15,unit:'d',format:'dd'}}},{threshold:86400000,increments:{1:{increment:1,unit:'y',format:'yyyy'},2:{increment:3,unit:'m',format:'mm/yyyy'}}},{threshold:172800000,increments:{1:{increment:1,unit:'y',format:'yyyy'},2:{increment:4,unit:'m',format:'mm/yyyy'}}},{threshold:864000000,increments:{1:{increment:1,unit:'y',format:'yyyy'},2:{increment:6,unit:'m',format:'mm/yyyy'}}},{threshold:1036800000,increments:{1:{increment:1,unit:'y',format:'yyyy'},2:{increment:1,unit:'y',format:'yyyy'}}}],$=function(){var te=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[WLloSZ]|"[^"]*"|'[^']*'/g,ie=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,re=/[^-+\dA-Z]/g,ae=function(ne,oe){for(ne=ne+'',oe=oe||2;ne.length<oe;)ne='0'+ne;return ne},se=function(ne,oe){var le=new Date(ne[oe+'FullYear'](),0,1);return Math.ceil(((ne-le)/8.64e7+le[oe+'Day']()+1)/7)};return function(ne,oe,le){var pe=$;if(1!=arguments.length||'[object String]'!=Object.prototype.toString.call(ne)||/\d/.test(ne)||(oe=ne,ne=void 0),ne=ne?new Date(ne):new Date,isNaN(ne))throw SyntaxError('invalid date:'+ne);oe=(pe.masks[oe]||oe||pe.masks['default'])+'','UTC:'==oe.slice(0,4)&&(oe=oe.slice(4),le=!0);var de=le?'getUTC':'get',ge=ne[de+'Date'](),ue=ne[de+'Day'](),he=ne[de+'Month'](),ce=ne[de+'FullYear'](),xe=ne[de+'Hours'](),me=ne[de+'Minutes'](),fe=ne[de+'Seconds'](),ye=ne[de+'Milliseconds'](),be=le?0:ne.getTimezoneOffset(),Ae={d:ge,dd:ae(ge),ddd:pe.i18n.dayNames[ue],dddd:pe.i18n.dayNames[ue+7],m:he+1,mm:ae(he+1),mmm:pe.i18n.monthNames[he],mmmm:pe.i18n.monthNames[he+12],yy:(ce+'').slice(2),yyyy:ce,h:xe%12||12,hh:ae(xe%12||12),H:xe,HH:ae(xe),M:me,MM:ae(me),s:fe,ss:ae(fe),l:ae(ye,3),L:ae(99<ye?Math.round(ye/10):ye),t:12>xe?'a':'p',tt:12>xe?'am':'pm',T:12>xe?'A':'P',TT:12>xe?'AM':'PM',Z:le?'UTC':((ne+'').match(ie)||['']).pop().replace(re,''),o:(0<be?'-':'+')+ae(100*Math.floor(Math.abs(be)/60)+Math.abs(be)%60,4),S:['th','st','nd','rd'][3<ge%10?0:(10!=ge%100-ge%10)*ge%10],W:se(ne,de)};return oe.replace(te,function(Me){return Me in Ae?Ae[Me]:Me.slice(1,Me.length-1)})}}();$.masks={'default':'ddd mmm dd yyyy HH:MM:ss',shortDate:'m/d/yy',mediumDate:'mmm d, yyyy',longDate:'mmmm d, yyyy',fullDate:'dddd, mmmm d, yyyy',shortTime:'h:MM TT',mediumTime:'h:MM:ss TT',longTime:'h:MM:ss TT Z',isoDate:'yyyy-mm-dd',isoTime:'HH:MM:ss',isoDateTime:'yyyy-mm-dd\'T\'HH:MM:ss',isoUtcDateTime:'UTC:yyyy-mm-dd\'T\'HH:MM:ss\'Z\''},$.i18n={dayNames:['Sun','Mon','Tue','Wed','Thu','Fri','Sat','Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],monthNames:['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec','January','February','March','April','May','June','July','August','September','October','November','December']};class ee extends K.default{constructor(){super(...arguments)}init(te,ie){super.init(te,ie),this.wrapper={1:document.createElementNS(te.ns,'g'),2:document.createElementNS(te.ns,'g')},this.groups={1:[],2:[]};var re=document.createElementNS(te.ns,'rect');re.setAttribute('fill','#c0c0c0'),re.setAttribute('stroke','#808080'),re.setAttribute('height','20'),re.setAttribute('x','0'),re.setAttribute('y','0'),this.rect=re,this.wrapper[1].appendChild(this.rect),this.group.appendChild(this.wrapper[1]),this.group.appendChild(this.wrapper[2]),this.wrapper[1].setAttribute('transform','translate( 0, 25 )'),this.wrapper[2].setAttribute('transform','translate( 0, 00 )')}draw(){this.cacheCurrentMax(),this.cacheCurrentMin(),(void 0==this.currentAxisMin||void 0==this.currentAxisMax)&&this.setMinMaxToFitSeries(!0),this.line.setAttribute('x1',this.getMinPx()),this.line.setAttribute('x2',this.getMaxPx()),this.line.setAttribute('y1',0),this.line.setAttribute('y2',0);var ie=this.maxPx-this.minPx,re=this.getCurrentInterval(),se=this.getCurrentMax(),ne=this.getCurrentMin();if(this.rect.setAttribute('width',ie),this.rect.setAttribute('x',this.minPx),!se||!ne)return 0;var oe;for(xe=0;xe<J.length;xe++)if(J[xe].threshold>re/ie){oe=J[xe];break}oe||(oe=J[J.length-1]);var de=0,le,pe,ge,ue,he,ce,xe;for(de=1;2>=de;de++){if(!Q.isNumeric(ne)){R(this,de,0);break}ge=new Date(ne),ue=W(ge,oe.increments[de]),xe=0;do if(he=U(ue,oe.increments[de].format),ce=V(this,de,xe),le=this.getPx(ue.getTime()),ue=B(ue,oe.increments[de]),pe=this.getPx(ue.getTime()),Z(de,ce,he,this.getMinPx(),this.getMaxPx(),le,pe),xe++,100<xe)break;while(ue.getTime()<se);R(this,de,xe)}}isX(){return!0}getWrapper(te){return this.wrapper[te]}setShift(te){this.shift=te,this.group.setAttribute('transform','translate(0 '+(this.top?this.shift:this.graph.getDrawingHeight()-this.shift)+')')}getAxisPosition(){return 60}setMinMaxFlipped(){var te=this.maxPx-this.minPx,ie=te*this.options.span[1]+this.minPx,re=te*this.options.span[0]+this.minPx;this.minPxFlipped=this.isFlipped()?ie:re,this.maxPxFlipped=this.isFlipped()?re:ie}}T.default=ee})},function(u,A,S){var C,P,E;(function(T,X){P=[A,S(1),S(15),S(3),S(16),S(5)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y,I,O,F){'use strict';function B(J){return J&&J.__esModule?J:{default:J}}function V(J,$,ee,te,ie){if($){if(J.options.markersIndependant){var re=J.getMarkerDomIndependent(J.counter2,$),ae='M '+ee+' '+te+' ';ae+=$.markerPath+' ',re.setAttribute('d',ae)}ie.path=ie.path||'',ie.path+='M '+ee+' '+te+' ',ie.path+=$.markerPath+' '}}Object.defineProperty(T,'__esModule',{value:!0});var R=B(X),G=B(Y),U=function(J){if(J&&J.__esModule)return J;var $={};if(null!=J)for(var ee in J)Object.prototype.hasOwnProperty.call(J,ee)&&($[ee]=J[ee]);return $.default=J,$}(I),Z=B(O),K=B(F);class Q extends G.default{static default(){return{lineColor:'black',lineStyle:1,flip:!1,label:'',lineWidth:1,markers:!1,trackMouse:!1,trackMouseLabel:!1,trackMouseLabelRouding:1,lineToZero:!1,selectableOnClick:!1,markersIndependant:!1}}constructor(){super(...arguments),this.selectionType='unselected',this.markerFamilies={},U.mapEventEmission(this.options,this),this.styles={},this.styles.unselected={lineColor:this.options.lineColor,lineStyle:this.options.lineStyle,lineWidth:this.options.lineWidth,markers:this.options.markers},this.styles.selected={lineWidth:3},this.extendStyles(),this.markersDom=new Map,this.shown=!0,this.data=[],this._isMinOrMax={x:{min:!1,max:!1},y:{min:!1,max:!1}},this.groupLines=document.createElementNS(this.graph.ns,'g'),this.domMarker=document.createElementNS(this.graph.ns,'path'),this.domMarker.style.cursor='pointer',this.groupMain=document.createElementNS(this.graph.ns,'g'),this.additionalData={},this.marker=document.createElementNS(this.graph.ns,'circle'),this.marker.setAttribute('fill','black'),this.marker.setAttribute('r',3),this.marker.setAttribute('display','none'),this.markerLabel=document.createElementNS(this.graph.ns,'text'),this.markerLabelSquare=document.createElementNS(this.graph.ns,'rect'),this.markerLabelSquare.setAttribute('fill','white'),this.domMarkerHover={},this.domMarkerSelect={},this.markerHovered=0,this.groupMarkerSelected=document.createElementNS(this.graph.ns,'g'),this.markerPoints={},this.lines=[],this.groupMain.appendChild(this.groupLines),this.groupMain.appendChild(this.marker),this.groupMain.appendChild(this.groupMarkerSelected),this.groupMain.appendChild(this.markerLabelSquare),this.groupMain.appendChild(this.markerLabel),this.groupMarkers=document.createElementNS(this.graph.ns,'g'),this.groupMain.appendChild(this.groupMarkers),this.independantMarkers=[],this.initExtended1&&this.initExtended1(),this.groupLines.addEventListener('click',()=>{this.options.selectableOnClick&&(this.isSelected()?this.graph.unselectSerie(this):this.graph.selectSerie(this))}),this.options.markers&&this.setMarkers(this.options.markers,'unselected')}setWaveform(J){if(!(J instanceof K.default))throw'Cannot assign waveform to serie. Waveform is not of the proper Waveform instance';return this.waveform=J,this.minX=this.waveform.getXMin(),this.maxX=this.waveform.getXMax(),this.minY=this.waveform.getMin(),this.maxY=this.waveform.getMax(),this.graph.updateDataMinMaxAxes(),this.dataHasChanged(),this}setOptions(J){return this.options=U.extend(!0,{},Q.prototype.defaults,J||{}),this.styles.unselected={lineColor:this.options.lineColor,lineStyle:this.options.lineStyle,markers:this.options.markers},this.applyLineStyles(),this}onMouseOverMarker(J,$){this.toggleMarker($,!0,!0);this.options.onMouseOverMarker&&this.options.onMouseOverMarker($,!!this.infos&&(this.infos[$]||!1),[this.waveform.getX($),this.waveform.getY($)])}onMouseOutMarker(J,$){this.markersOffHover(),this.options.onMouseOutMarker&&this.options.onMouseOutMarker($,!!this.infos&&(this.infos[$]||!1),[this.waveform.getX($),this.waveform.getY($)])}toggleMarker(J,$,ee){let te=J;var ie;'undefined'==typeof $&&(ie=ee?!this.domMarkerHover[J]:!this.domMarkerSelect[J]);var re=this['domMarker'+(ee?'Hover':'Select')];if(ie||!0===$){if(!re[J]){var ae=document.createElementNS(this.graph.ns,'path');this.setMarkerStyleTo(ae,this.markerFamilies[this.selectionType][this.getMarkerCurrentFamily(te)]),this['domMarker'+(ee?'Hover':'Select')][J]=ae,this.groupMarkerSelected.appendChild(ae)}else ae=re[J];let se=this.getX(this.waveform.getX(te)),ne=this.getY(this.waveform.getY(te));ae.setAttribute('d','M '+se+' '+ne+' '+this.getMarkerPath(this.markerFamilies[this.selectionType][this.getMarkerCurrentFamily(te)],1)),ee&&this.markerHovered++}else if((!ie||!1===$)&&(ee&&this.domMarkerHover[J]&&!this.domMarkerSelect[J]||this.domMarkerSelect[J])){if(!re[J])return;this.groupMarkerSelected.removeChild(re[J]),delete re[J],ee&&this.markerHovered--}return ie}markersOffHover(){for(var J in this.domMarkerHover)this.toggleMarker(J.split(','),!1,!0);return this}markersOffSelect(){for(var J in this.domMarkerSelect)this.toggleMarker(J.split(','),!1,!1);return this}onClickOnMarker(J,$){var ee=this.toggleMarker($);ee&&this.options.onSelectMarker&&this.options.onSelectMarker($,!!this.infos&&(this.infos[$[0]]||!1)),!ee&&this.options.onUnselectMarker&&this.options.onUnselectMarker($,!!this.infos&&(this.infos[$[0]]||!1)),this.options.onToggleMarker&&this.options.onToggleMarker($,!!this.infos&&(this.infos[$[0]]||!1),ee)}_getMarkerIndexFromEvent(J){var $=this.graph._getXY(J);return this.searchIndexByPxXY($.x-this.graph.getPaddingLeft(),$.y-this.graph.getPaddingTop())}onMouseWheel(){}empty(){for(var J=0,$=this.lines.length;J<$;J++)this.groupLines.removeChild(this.lines[J]);return this.lines=[],this}select(J){return J=J||'selected',this.selected='unselected'!==J,this.areMarkersShown()||this.areMarkersShown(J)?(this.selectionType=J,this.draw(!0),this.applyLineStyles()):(this.selectionType=J,this.applyLineStyles()),this.applyLineStyle(this.getSymbolForLegend()),this}unselect(){return this.selected=!1,this.select('unselected')}degrade(J){return this.degradationPx=J,this}drawInit(J){if(this.currentLineId=0,this.counter=0,this._drawn=!0,this.currentLine='',!this.waveform)this._dataToUse=this.data,this._xDataToUse=this.xData;else if(this.degradationPx)this.waveform.resampleForDisplay({resampleToPx:this.degradationPx,xPosition:this.getXAxis().getPx.bind(this.getXAxis()),minX:this.getXAxis().getCurrentMin(),maxX:this.getXAxis().getCurrentMax()}),this._dataToUse=[this.waveform.getDataToUseFlat()];else if(this.waveform.hasAggregation()){let te=this.getXAxis(),ie=this.graph.getDrawingWidth()*(te.getDataMax()-te.getDataMin())/(te.getCurrentMax()-te.getCurrentMin()),re=this.waveform.selectAggregatedData(ie);if(re instanceof Promise)return re.then(()=>{this.draw(J)}),!1;if(!1===re)return!1;this._dataToUse=this.waveform.getDataToUseFlat()}return!0}removeLinesGroup(){this._afterLinesGroup=this.groupLines.nextSibling,this.groupMain.removeChild(this.groupLines)}insertLinesGroup(){if(!this._afterLinesGroup)throw'Could not find group after lines to insertion.';this.groupMain.insertBefore(this.groupLines,this._afterLinesGroup),this._afterLinesGroup=!1}removeExtraLines(){for(var J=this.currentLineId,$=this.lines.length;J<$;J++)this.groupLines.removeChild(this.lines[J]);this.lines.splice(this.currentLineId,$-this.currentLineId),this.currentLineId=0}draw(J){if(super.draw(...arguments),!this.getXAxis()||!this.getYAxis())throw'No axes were defined for this serie';if(J||this.hasDataChanged()){if(!this.drawInit(J))return;var $=this._dataToUse,ee=this._xDataToUse,te=this._slotToUse;this.removeLinesGroup(),this.eraseMarkers(),this.lookForMaxima=!0,this.lookForMinima=!1,this.markerFamily=this.markerFamilies[this.selectionType||'unselected'],this.pos0=this.getYAxis().getPos(0),this.error&&this.errorDrawInit(),this._draw(),this.error&&this.errorDraw(),this.removeExtraLines(),this.insertMarkers(),this.insertLinesGroup()}for(var ie in this.domMarkerHover)this.toggleMarker(ie.split(','),!1,!0);for(var ie in this.domMarkerSelect)this.toggleMarker(ie.split(','),!1,!1);this.applyLineStyle(this.getSymbolForLegend()),this.hasStyleChanged(this.selectionType)&&this.updateStyle(),this.dataHasChanged(!1),super.afterDraw()}_draw(){let J=this,$=this.waveform,re=!1,ae=!1,pe=this.getXAxis(),de=this.getYAxis(),ge=pe.getCurrentMin(),ue=de.getCurrentMin(),he=pe.getCurrentMax(),ce=de.getCurrentMax(),ee,te,ie,se,ne,oe,le;if($){ee=$.getData(!0);let Se=$.getShift(),_e=$.getScale(),Ce=!1,Pe=!1,Le=this.isMonotoneous(),we=this.markersShown(),Ee=0,Te=$.getLength(),xe,me,fe,ye,be,Ae,Me,ke,ve;for(this.currentLine='',$.isXMonotoneous()&&($.isXMonotoneousAscending()?(Ee=$.getIndexFromX(ge,!0)||0,Te=$.getIndexFromX(he,!0),!1===Te&&(Te=$.getLength())):(Ee=$.getIndexFromX(he,!0)||0,Te=$.getIndexFromX(ge,!0),!1===Te&&(Te=$.getLength())),Te+=2,Te>ee.length&&(Te=ee.length));Ee<Te;Ee+=1){if(te=$.getX(Ee,!0),ie=ee[Ee]*_e+Se,te!=te||ie!=ie){this._createLine();continue}if(te<ge&&re<ge||te>he&&re>he||(ie<ue&&ae<ue||ie>ce&&ae>ce)&&!this.options.lineToZero){re=te,ae=ie,Pe=!0;continue}if(this.counter2=Ee,we&&this.getMarkerCurrentFamily(this.counter2),oe=this.getX(te),le=this.getY(ie),oe!=se||le!=ne){if(Ce=Le?ie<ue||ie>ce:te<ge||ie<ue||te>he||ie>ce,this.options.lineToZero){if(Ce=te<ge||te>he,Ce)continue;}else if(Ce||Pe){!1!==re&&!1!==ae||Pe?(ve=[],xe=(te-ge)/(te-re),me=ie-xe*(ie-ae),fe=(te-he)/(te-re),ye=ie-fe*(ie-ae),be=(ie-ue)/(ie-ae),Ae=te-be*(te-re),Me=(ie-ce)/(ie-ae),ke=te-Me*(te-re),1>xe&&0<xe&&!1!==me&&me<ce&&me>ue&&ve.push([ge,me]),1>fe&&0<fe&&!1!==ye&&ye<ce&&ye>ue&&ve.push([he,ye]),1>be&&0<be&&!1!==Ae&&Ae<he&&Ae>ge&&ve.push([Ae,ue]),1>Me&&0<Me&&!1!==ke&&ke<he&&ke>ge&&ve.push([ke,ce]),0<ve.length?Ce?Pe?2==ve.length&&(this._createLine(),this._addPoint(this.getX(ve[0][0]),this.getY(ve[0][1]),ve[0][0],ve[0][1],!1,!1,!1),this._addPoint(this.getX(ve[1][0]),this.getY(ve[1][1]),ve[0][0],ve[0][1],!1,!1,!1)):(1<ve.length&&(console.error('Programmation error. Please e-mail me.'),console.log(ve,ke,Ae,ye,me,ie,ue,ce,ae)),this._addPoint(this.getX(ve[0][0]),this.getY(ve[0][1]),ve[0][0],ve[0][1],!1,!1,!1)):(1<ve.length&&(console.error('Programmation error. Please e-mail me.'),console.log(ve,ke,Ae,ye,me,ie,ue,ce,ae)),this._createLine(),this._addPoint(this.getX(ve[0][0]),this.getY(ve[0][1]),ve[0][0],ve[0][1],!1,!1,!1),this._addPoint(oe,le,re,ae,!1,!1,!0)):!Ce&&this._addPoint(oe,le,re,ae,Ee,!1,!1)):(se=oe,ne=le,re=te,ae=ie),se=oe,ne=le,re=te,ae=ie,Pe=Ce;continue}if(oe!=oe||le!=le){0<this.counter&&this._createLine();continue}this._addPoint(oe,le,te,ie,Ee,!1,!0),se=oe,ne=le,re=te,ae=ie}}if(this._createLine(),this._tracker){this._trackerDom&&this._trackerDom.remove();var Xe=this.groupLines.cloneNode(!0);for(this.groupMain.appendChild(Xe),Ee=0,Te=Xe.children.length;Ee<Te;Ee++)Xe.children[Ee].setAttribute('stroke','transparent'),Xe.children[Ee].setAttribute('stroke-width','25px'),Xe.children[Ee].setAttribute('pointer-events','stroke');this._trackerDom=Xe,this.groupMain.addEventListener('mousemove',Ye=>{var De=this.graph._getXY(Ye),Ie=this.handleMouseMove(!1,!1);this._trackingCallback(this,Ie,De.x,De.y)}),this.groupMain.addEventListener('mouseleave',()=>{this._trackingOutCallback(this)})}return this}}kill(){super.kill()}getMarkerCurrentFamily(J){if(this.markerPoints&&this.markerPoints[this.selectionType]){for(var ee=0,$;ee<this.markerPoints[this.selectionType].length&&this.markerPoints[this.selectionType][ee][0]<=J;ee++)this.markerPoints[this.selectionType][ee][1]>=J&&(this.markerCurrentFamily=this.markerPoints[this.selectionType][ee][2],$=this.markerFamilies[this.selectionType][this.markerCurrentFamily]);return!!$&&(this.getMarkerDom($),this.markerCurrentFamily)}}drawSlot(J,$){var te=0,ie,re,ae,se;if(this.isFlipped())var ne=this.slots[$]/(this.maxY-this.minY),oe=Math.floor((this.getYAxis().getCurrentMin()-this.minY)*ne),le=Math.ceil((this.getYAxis().getCurrentMax()-this.minY)*ne);else var ne=this.slots[$]/(this.maxX-this.minX),oe=Math.floor((this.getXAxis().getCurrentMin()-this.minX)*ne),le=Math.ceil((this.getXAxis().getCurrentMax()-this.minX)*ne);for(se=oe;se<=le;se++)J[se]&&(this.isFlipped()?(re=Math.floor(this.getY(J[se].x)),ae=this.getX(J[se].max),this._addPoint(this.getX(J[se].start),re,!1,!1,!1,!1,!1),this._addPoint(ae,re,!1,!1,!1,!0,!1),this._addPoint(this.getX(J[se].min),re,!1,!1,!1,!1,!1),this._addPoint(this.getX(J[se].stop),re,!1,!1,!1,!0,!1)):(ie=Math.floor(this.getX(J[se].x)),ae=this.getY(J[se].max),this._addPoint(ie,this.getY(J[se].start),!1,!1,!1,!1,!1),this._addPoint(ie,ae,!1,!1,!1,!0,!1),this._addPoint(ie,this.getY(J[se].min),!1,!1,!1,!1,!1),this._addPoint(ie,this.getY(J[se].stop),!1,!1,!1,!0,!1)));this._createLine(),te++}setMarkerStyleTo(J,$){if(!J||!$)throw console.trace(),'Cannot set marker style. DOM does not exist.';J.setAttribute('fill',$.fillColor||'transparent'),J.setAttribute('stroke',$.strokeColor||this.getLineColor()),J.setAttribute('stroke-width',$.strokeWidth||1)}hideTrackingMarker(){this.marker.setAttribute('display','none'),this.markerLabel.setAttribute('display','none'),this.markerLabelSquare.setAttribute('display','none')}_addPoint(J,$,ee,te,ie,re,ae){if(J===J&&$===$)return 0==this.counter?this.currentLine='M ':this.options.lineToZero||re?this.currentLine+='M ':this.currentLine+='L ',this.currentLine+=J,this.currentLine+=' ',this.currentLine+=$,this.currentLine+=' ',this.options.lineToZero&&void 0!==this.pos0&&(this.currentLine+='L ',this.currentLine+=J,this.currentLine+=' ',this.currentLine+=this.pos0,this.currentLine+=' '),this.error&&this.errorAddPoint(ie,ee,te,J,$),this.markerPoints?void(this.markersShown()&&!1!==ae&&this.markerFamily&&V(this,this.markerFamily[this.markerCurrentFamily],J,$,this.markersDom.get(this.markerFamily[this.markerCurrentFamily])),this.counter++):void this.counter++}_createLine(){var J=this.currentLineId++,$;return this.lines[J]?$=this.lines[J]:($=document.createElementNS(this.graph.ns,'path'),this.applyLineStyle($),this.groupLines.appendChild($),this.lines[J]=$),0==this.counter?$.setAttribute('d',''):$.setAttribute('d',this.currentLine),this.currentLine='M ',this.counter=0,$}applyLineStyles(){for(var J=0;J<this.lines.length;J++)this.applyLineStyle(this.lines[J])}applyLineStyle(J){J.setAttribute('stroke',this.getLineColor()),J.setAttribute('stroke-width',this.getLineWidth()),this.getLineDashArray()?J.setAttribute('stroke-dasharray',this.getLineDashArray()):J.removeAttribute('stroke-dasharray'),J.setAttribute('fill','none')}updateStyle(){this.applyLineStyles(),this.setLegendSymbolStyle(),this.styleHasChanged(!1)}getMarkerPath(J,$){var ee=J.zoom||1,$=$||0,te=[];switch(J.type){case 2:te=['m',-2,-2,'l',4,4,'m',-4,0,'l',4,-4];break;case 3:te=['m',-2,0,'l',4,0,'m',-2,-2,'l',0,4];break;case 4:te=['m',-1,-1,'l',2,0,'l',-1,2,'z'];break;default:case 1:te=['m',-2,-2,'l',4,0,'l',0,4,'l',-4,0,'z'];}if((1==ee||!ee)&&!$)return te.join(' ');if(te){for(var re=0,ae=te.length;re<ae;re++)typeof te[re]=='number'&&(te[re]*=ee+$);return te.join(' ')}}getMarkerDom(J){var $=this;if(!this.markersDom.has(J)){var ee=document.createElementNS(this.graph.ns,'path');this.setMarkerStyleTo(ee,J),this.markersDom.set(J,{dom:ee,path:''}),ee.addEventListener('mouseover',function(te){var ie=$._getMarkerIndexFromEvent(te);$.onMouseOverMarker(te,ie)}),ee.addEventListener('mouseout',function(te){var ie=$._getMarkerIndexFromEvent(te);$.onMouseOutMarker(te,ie)}),ee.addEventListener('click',function(te){var ie=$._getMarkerIndexFromEvent(te);$.onClickOnMarker(te,ie)})}return J.dom}getMarkerDomIndependent(J,$){if(!this.independantMarkers[J]){var ee=document.createElementNS(this.graph.ns,'path');this.setMarkerStyleTo(ee,$),ee.addEventListener('mouseover',te=>{this.onMouseOverMarker(te,J)}),ee.addEventListener('mouseout',te=>{this.onMouseOutMarker(te,J)}),ee.addEventListener('click',te=>{this.onClickOnMarker(te,J)}),this.independantMarkers[J]=ee}return this.groupMarkers.appendChild(this.independantMarkers[J]),this.independantMarkers[J]}searchIndexByPxXY(J,$){for(var ee=!1,te=!1,re=this._xDataToUse,ne=0,oe=this.waveform.getLength(),ie,ae,se;ne<oe;ne+=1)ae=this.waveform.getX(ne),se=this.waveform.getY(ne),ie=Math.pow(this.getX(ae)-J,2)+Math.pow(this.getY(se)-$,2),(!ee||ie<ee)&&(ee=ie,te=ne);return te}searchClosestValue(J){if(this.waveform){const ee=this.waveform.getIndexFromX(J);let te={xMin:this.waveform.getX(ee),xMax:this.waveform.getX(ee+1),yMin:this.waveform.getY(ee),yMax:this.waveform.getY(ee+1)};return Math.abs(te.xMin-J)<Math.abs(te.xMax-J)?(te.xClosest=te.xMin,te.yClosest=te.yMin):(te.xClosest=te.xMax,te.yClosest=te.yMax),te}}handleMouseMove(J,$){var ee=J||this.getXAxis().getMouseVal(),ne=this.searchClosestValue(ee);if(ne){var oe=(ee-ne.xMin)/(ne.xMax-ne.xMin),le=(1-oe)*ne.yMin+oe*ne.yMax;if($&&this.options.trackMouse){if(void 0==ne.xMin)return!1;var pe=this.getX(this.getFlip()?le:ee),de=this.getY(this.getFlip()?ee:le);switch(this.marker.setAttribute('display','block'),this.marker.setAttribute('cx',pe),this.marker.setAttribute('cy',de),this.markerLabel.setAttribute('display','block'),this.markerLabelSquare.setAttribute('display','block'),this.options.trackMouseLabel){case!1:break;default:this.markerLabel.textContent=this.options.trackMouseLabel.replace('<x>',ee.toFixed(this.options.trackMouseLabelRouding)).replace('<y>',le.toFixed(this.options.trackMouseLabelRouding));}this.markerLabel.setAttribute('x',pe+5),this.markerLabel.setAttribute('y',de-5),this.markerLabelSquare.setAttribute('x',pe+5),this.markerLabelSquare.setAttribute('y',de-5-this.graph.options.fontSize),this.markerLabelSquare.setAttribute('width',this.markerLabel.getComputedTextLength()+2),this.markerLabelSquare.setAttribute('height',this.graph.options.fontSize+2)}return{xBefore:ne.xMin,xAfter:ne.xMax,yBefore:ne.yMin,yAfter:ne.yMax,trueX:ee,interpolatedY:le,xClosest:ne.xClosest,yClosest:ne.yClosest}}}getMax(J,$){var ee=Math.min(J,$),te=Math.max(J,$),ie=this.searchClosestValue(ee),re=this.searchClosestValue(te),ne=-(1/0),ae,se,oe,le;if(ie||(ee=this.minX,ie=this.searchClosestValue(ee)),re||(te=this.maxX,re=this.searchClosestValue(te)),!ie||!re)return-(1/0);for(ae=ie.dataIndex;ae<=re.dataIndex;ae++)for(oe=ae==ie.dataIndex?ie.xBeforeIndexArr:0,le=ae==re.dataIndex?re.xBeforeIndexArr:this.data[ae].length,se=oe;se<=le;se+=2)ne=Math.max(ne,this.data[ae][se+1]);return ne}getMin(J,$){var ee=Math.min(J,$),te=Math.max(J,$),ie=this.searchClosestValue(ee),re=this.searchClosestValue(te),ne=1/0,ae,se,oe,le;if(ie||(ee=this.minX,ie=this.searchClosestValue(ee)),re||(te=this.maxX,re=this.searchClosestValue(te)),!ie||!re)return 1/0;for(ae=ie.dataIndex;ae<=re.dataIndex;ae++)for(oe=ae==ie.dataIndex?ie.xBeforeIndexArr:0,le=ae==re.dataIndex?re.xBeforeIndexArr:this.data[ae].length,se=oe;se<=le;se+=2)ne=Math.min(ne,this.data[ae][se+1]);return ne}setStyle(J,$='unselected'){this.styles[$]=J,this.styleHasChanged($)}setLineStyle(J,$='unselected',ee){return this.styles[$]=this.styles[$]||{},this.styles[$].lineStyle=J,ee&&this.setLineStyle(J,'selected'),this.styleHasChanged($),this}getLineStyle(J){return this.getStyle(J).lineStyle}getLineDashArray(J=this.selectionType||'unselected'){switch(this.getStyle(J).lineStyle){case 2:return'1, 1';break;case 3:return'2, 2';break;case 4:return'3, 3';break;case 5:return'4, 4';break;case 6:return'5, 5';break;case 7:return'5 2';break;case 8:return'2 5';break;case 9:return'4 2 4 4';break;case 10:return'1,3,1';break;case 11:return'9 2';break;case 12:return'2 9';break;case 1:case!1:return!1;break;default:return this.styles[J].lineStyle;}this.styleHasChanged(J)}getStyle(J=this.selectionType||'unselected'){return this.styles[J]}extendStyles(){for(var J in this.styles){var $=this.styles[J];$&&(this.styles[J]=U.extend(!0,{},this.styles.unselected,$))}}extendStyle(J,$){var ee=this.styles[J];this.styles[J]=U.extend(!0,{},this.styles[$||'unselected'],ee||{}),this.styles[J].markers.map(function(te){te.dom&&(te.dom='')}),this._recalculateMarkerPoints(J,this.styles[J].markers),this.styleHasChanged(J)}setLineWidth(J,$,ee){return $=$||'unselected',this.styles[$]=this.styles[$]||{},this.styles[$].lineWidth=J,ee&&this.setLineWidth(J,'selected'),this.styleHasChanged($),this}getLineWidth(J){return this.getStyle(J).lineWidth||1}setLineColor(J,$,ee){return $=$||'unselected',this.styles[$]=this.styles[$]||{},this.styles[$].lineColor=J,ee&&this.setLineColor(J,'selected'),this.styleHasChanged($),this}getLineColor(J){return this.getStyle(J).lineColor||'black'}showMarkers(J,$){return J=J||'unselected',this.styles[J]=this.styles[J]||{},this.styles[J].showMarkers=!0,$&&this._drawn?this.draw(!0):this.styleHasChanged(J),this}hideMarkers(J,$){return J=J||'unselected',this.styles[J].showMarkers=!1,$&&this._drawn?this.draw(!0):this.styleHasChanged(J),this}markersShown(J){return!1!==this.getStyle(J).showMarkers}areMarkersShown(){return this.markersShown.apply(this,arguments)}isMarkersShown(){return this.markersShown.apply(this,arguments)}setMarkers(J,$,ee){return this.styles[$||'unselected']=this.styles[$||'unselected']||{},this.showMarkers($,!1),Array.isArray(J)||'object'!=typeof J?!J&&(J=[{type:1,zoom:1,points:'all'}]):J=[J],this.styles[$||'unselected'].markers=J,ee&&(this.styles.selected.markers=U.extend(!0,{},J)),this._recalculateMarkerPoints($,J),this.styleHasChanged($),this.dataHasChanged(!0),this}setMarkersPoints(J,$,ee){this._extendMarkers('points',J,$,ee,!0)}setMarkersColor(J,$,ee){this._extendMarkers('color',J,$,ee)}setMarkersType(J,$,ee){this._extendMarkers('type',J,$,ee)}setMarkersZoom(J,$,ee){this._extendMarkers('zoom',J,$,ee)}setMarkersStrokeColor(J,$,ee){this._extendMarkers('strokeColor',J,$,ee)}setMarkersStrokeWidth(J,$,ee){this._extendMarkers('strokeWidth',J,$,ee)}setMarkersFillColor(J,$,ee){this._extendMarkers('fillColor',J,$,ee)}_extendMarkers(J,$,ee,te,ie){(ee=ee||0,te=te||'unselected',this.styles[te]&&this.styles[te].markers)&&(this.styles[te].markers[ee][J]=$,ie&&this._recalculateMarkerPoints(te,this.styles[te].markers),this.markersDom[this.styles[te].markers[ee]]&&this.setMarkerStyleTo(this.markersDom[this.styles[te].markers[ee]].dom,this.styles[te].markers[ee]))}_recalculateMarkerPoints(J,$){var ee=[];ee.push([0,1/0,null]);for(var te=0,ie=$.length;te<ie;te++){$[te].markerPath=this.getMarkerPath($[te]),$[te].points||($[te].points='all'),Array.isArray($[te].points)||($[te].points=[$[te].points]);for(var re=0,ae=$[te].points.length;re<ae;re++)'all'==$[te].points[re]?ee.push([0,1/0,te]):Array.isArray($[te].points[re])?ee.push([$[te].points[re][0],$[te].points[re][1],te]):ee.push([$[te].points[re],$[te].points[re],te])}this.markerFamilies[J||'unselected']=$,ee.sort(function(se,ne){return se[0]-ne[0]||(null==se[2]?-1:1)}),this.markerPoints[J||'unselected']=ee}insertMarkers(J){if(this.markerFamilies&&this.markerFamilies[J||this.selectionType]&&!this.options.markersIndependant)for(var $=0,ee=this.markerFamilies[J||this.selectionType].length;$<ee;$++)if(this.markersDom.has(this.markerFamilies[J||this.selectionType][$])){let te=this.markersDom.get(this.markerFamilies[J||this.selectionType][$]);te.dom.setAttribute('d',te.path),this.groupMarkers.appendChild(te.dom),this.currentMarkersSelectionType=this.selectionType}}getMarkerForLegend(){if(this.markerPoints&&this.markerPoints[this.selectionType]){if(!this.markerForLegend){var J=document.createElementNS(this.graph.ns,'path');this.setMarkerStyleTo(J,this.markerFamilies[this.selectionType][0]),J.setAttribute('d','M 14 0 '+this.getMarkerPath(this.markerFamilies[this.selectionType][0])),this.markerForLegend=J}return this.markerForLegend}}eraseMarkers(){var J=this;if(this.options.markersIndependant){for(var $ in this.independantMarkers)J.groupMarkers.removeChild(this.independantMarkers[$]);this.independantMarkers={}}else this.currentMarkersSelectionType&&(this.markersDom.forEach(function(ee){ee.dom&&ee.dom.parentNode===J.groupMarkers&&(J.groupMarkers.removeChild(ee.dom),ee.path='')}),this.currentMarkersSelectionType=!1)}isMonotoneous(){return this.waveform?this.waveform.isMonotoneous():!!this.xmonotoneous}findLocalMinMax(J,$,ee){return!!this.waveform&&this.waveform.findLocalMinMax(J,$,ee)}}U.mix(Q,Z.default),T.default=Q})},function(u,A,S){var C,P,E;(function(T,X){P=[A,S(4),S(3),S(5)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y,I){'use strict';function F(G){return G&&G.__esModule?G:{default:G}}Object.defineProperty(T,'__esModule',{value:!0});var W=F(X),B=function(G){if(G&&G.__esModule)return G;var U={};if(null!=G)for(var Z in G)Object.prototype.hasOwnProperty.call(G,Z)&&(U[Z]=G[Z]);return U.default=G,U}(Y),V=F(I);class R extends W.default{static default(){return{redrawShapesAfterDraw:!1}}constructor(G,U,Z){super(...arguments),this.graph=G,this.name=U,this.options=Object.assign({},R.default(),this.constructor.default(),Z)}draw(){}beforeDraw(){}afterDraw(){this.options.redrawShapesAfterDraw&&this.graph.getShapesOfSerie(this).forEach(G=>{G.redraw()}),this.emit('draw')}setData(G,U,Z){function K(Ae){var Me=Object.prototype.toString.call(Ae);return'[object Array]'===Me||'[object Int16Array]'===Me||'[object Int32Array]'===Me||'[object Float32Array]'===Me||'[object Float64Array]'===Me||'[object Uint8Array]'===Me||'[object Uint16Array]'===Me||'[object Uint32Array]'===Me||'[object Int8Array]'===Me}if(G instanceof V.default)return this.setWaveform(G);var Q=0,U=U||!1,Z=Z||'float',te=0,J,$,ee,ie;this.minX=Number.MAX_SAFE_INTEGER,this.maxX=Number.MIN_SAFE_INTEGER,this.minY=Number.MAX_SAFE_INTEGER,this.maxY=Number.MIN_SAFE_INTEGER;let re=[];var ae=K(G);if(!ae&&'object'==typeof G)G=[G];else if(ae&&!K(G[0])&&'object'!=typeof G[0])G=[G],U=!0;else if(ae&&K(G[0])&&2<G[0].length)U=!0;else if(!ae)return void B.throwError('Data is not an array');var se=K(G[0]),ne=K(G[0][0]);if(!se||U||ne||(G=[G]),se)for(var oe=0,le=G.length;oe<le;oe++){ee=this._addData(Z,U?G.length:2*G.length),re.push(ee),Q=0;for(var pe=0,de=G[oe].length;pe<de;pe++)U?(ee[Q]=[G[oe][pe],G[oe][pe+1]],Q++,te+=pe%2?1:0):(ee[Q]=[G[oe][pe][0],G[oe][pe][1]],te++,Q++)}else if('object'==typeof G[0])if(G[0].x)for(var oe=0,de=G.length,ee;oe<de;oe++){ee=this._addData(Z,2*G[oe].x.length),re.push(ee),Q=0;for(var pe=0,ge=G[0].x.length;pe<ge;pe++)ee[Q]=[G[oe].x[pe],G[oe].y[pe]],te++,Q++}else{this.mode='x_equally_separated';var ue=0,he=[],le=0,ce;if(!G[0].y)return console.log(G),void B.throwError('No y data');for(var oe=0,de=G.length;oe<de;oe++)ue+=G[oe].y.length,ie=0!=oe&&(!G[oe+1]||G[oe].x+G[oe].dx*G[oe].y.length==G[oe+1].x),ie||(re.push(this._addData(Z,ue)),he.push(ue),ue=0);this.xData=[],ue=0,le=0,Q=0;for(var oe=0,de=G.length;oe<de;oe++){J=G[oe].x,$=G[oe].dx;for(var pe=0;pe<ce;pe++)re[le][Q]=[J+pe*$,G[oe].y[pe]],Q++,te++;ue+=G[oe].y.length,he[le]==ue&&(le++,ue=0,Q=0)}}var xe=(this.maxX-this.minX)/this.graph.getDrawingWidth(),fe=4*this.graph.getDrawingWidth(),ye=te/4,fe=this.graph.getDrawingWidth(),ye=te;re=re.reduce(function(Ae,Me,ke){return 0<ke&&Ae.push([NaN,NaN]),Ae.concat(Me)},[]);var be=new V.default;return be.setData(re),this.setWaveform(be),this}_addData(){return[]}clearData(){return this.setData([]),this}getData(){return this.data}setOptions(G){this.options=G||{}}setOption(G,U){this.options[G]=U}kill(G){return this.graph.removeSerieFromDom(this),this.graph._removeSerie(this),this.graph.legend&&!G&&this.graph.legend.update(),this.graph=void 0,this}hide(G){if(this.hidden=!0,this.groupMain.setAttribute('display','none'),this.getSymbolForLegend().setAttribute('opacity',0.5),this.getTextForLegend().setAttribute('opacity',0.5),this.hideImpl(),G)for(var U=this.graph.getShapesOfSerie(this),Z=0,K=U.length;Z<K;Z++)U[Z].hide();return this.emit('hide'),this}show(G){if(this.hidden=!1,this.groupMain.setAttribute('display','block'),this.getSymbolForLegend().setAttribute('opacity',1),this.getTextForLegend().setAttribute('opacity',1),this.showImpl(),this.draw(!0),G)for(var U=this.graph.getShapesOfSerie(this),Z=0,K=U.length;Z<K;Z++)U[Z].show();return this.emit('show'),this}hideImpl(){}showImpl(){}toggleDisplay(){return this.isShown()?this.hide():this.show(),this}isShown(){return!this.hidden}getX(G){return(G=this.getXAxis().getPx(G))-G%0.2}getY(G){return(G=this.getYAxis().getPx(G))-G%0.2}isSelected(){return this.selected||'unselected'!==this.selectionType}_checkX(G){this.minX=Math.min(this.minX,G),this.maxX=Math.max(this.maxX,G)}_checkY(G){this.minY=Math.min(this.minY,G),this.maxY=Math.max(this.maxY,G)}getName(){return this.name}autoAxis(){return this.isFlipped()?(this.setXAxis(this.graph.getYAxis()),this.setYAxis(this.graph.getXAxis())):(this.setXAxis(this.graph.getXAxis()),this.setYAxis(this.graph.getYAxis())),this.graph.updateDataMinMaxAxes(),this}autoAxes(){return this.autoAxis(...arguments)}setXAxis(G){return this.xaxis='number'==typeof G?this.isFlipped()?this.graph.getYAxis(G):this.graph.getXAxis(G):G,this.graph.updateDataMinMaxAxes(),this}setYAxis(G){return'number'==typeof G?this.xaxis=this.isFlipped()?this.graph.getXAxis(G):this.graph.getYAxis(G):this.yaxis=G,this.graph.updateDataMinMaxAxes(),this}setAxes(){for(var G=0;2>G;G++)arguments[G]&&this[arguments[G].isX()?'setXAxis':'setYAxis'](arguments[G]);return this}getXAxis(){return this.xaxis}getYAxis(){return this.yaxis}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getWaveform(){return this.waveform}getWaveforms(){return[this.waveform]}setWaveform(G){if(!(G instanceof V.default))throw'Cannot assign waveform to serie. Waveform is not of the proper Waveform instance';return this.waveform=G,this.minX=this.waveform.getXMin(),this.maxX=this.waveform.getXMax(),this.minY=this.waveform.getMin(),this.maxY=this.waveform.getMax(),this.graph.updateDataMinMaxAxes(),this.dataHasChanged(),this}getSymbolForLegend(){if(!this.lineForLegend){var G=document.createElementNS(this.graph.ns,'line');this.applyLineStyle(G),G.setAttribute('x1',5),G.setAttribute('x2',25),G.setAttribute('y1',0),G.setAttribute('y2',0),G.setAttribute('cursor','pointer'),this.lineForLegend=G}return this.lineForLegend}setLegendSymbolStyle(){this.applyLineStyle(this.getSymbolForLegend())}updateStyle(){this.setLegendSymbolStyle(),this.graph.updateLegend()}getTextForLegend(){if(!this.textForLegend){var G=document.createElementNS(this.graph.ns,'text');G.setAttribute('cursor','pointer'),G.textContent=this.getLabel(),this.textForLegend=G}return this.textForLegend}getIndex(){return this.graph.series.indexOf(this)}getLabel(){return this.options.label||this.name}setLabel(G){return this.options.label=G,this.textForLegend&&(this.textForLegend.textContent=G),this.graph.requireLegendUpdate(),this}setFlip(G){return this.options.flip=G,this}getFlip(){return this.options.flip}isFlipped(){return this.options.flip}setLayer(G){let U=parseInt(G)||1;return U!==this.options.layer&&(this.options.layer=U,this.graph.appendSerieToDom(this)),this}getLayer(){return this.options.layer||1}setStyle(G,U='unselected'){this.styles[U]=G,this.styleHasChanged(U)}styleHasChanged(G='unselected'){if(this._changedStyles=this._changedStyles||{},!1===G)for(var U in this._changedStyles)this._changedStyles[U]=!1;else this._changedStyles[G||'unselected']=!0;return this.graph.requireLegendUpdate(),this}hasStyleChanged(G){return this._changedStyles=this._changedStyles||{},this._changedStyles[G||'unselected']}dataHasChanged(G){return this._dataHasChanged=void 0===G||G,this}hasDataChanged(){return this._dataHasChanged}setInfo(G,U){return this.infos=this.infos||{},this.infos[G]=U,this}getInfo(G){return(this.infos||{})[G]}setAdditionalData(G){return this.additionalData=G,this}getAdditionalData(){return this.additionalData}select(){return this.selected=!0,this}unselect(){return this.selected=!1,this}enableTracking(G,U){return this._tracker=!0,this._trackingCallback=G,this._trackingOutCallback=U,this}disableTracking(){return this._trackerDom&&(this._trackerDom.remove(),this._trackerDom=null),this._tracker=!1,this._trackingCallback=null,this}allowTrackingLine(G){G=G||{},this.graph.addSerieToTrackingLine(this,G)}getMarkerForLegend(){return!1}get type(){return this._type}getType(){return this._type}set excludedFromLegend(G=!0){this._excludedFromLegend=G}get excludedFromLegend(){return!!this._excludedFromLegend}setDataIndices(G,U){this.categoryIndices=G,this.nbCategories=U}}T.default=R})},function(u,A,S){var C,P,E;(function(T,X){P=[A,S(3)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X){'use strict';Object.defineProperty(T,'__esModule',{value:!0});var I=function(F){if(F&&F.__esModule)return F;var W={};if(null!=F)for(var B in F)Object.prototype.hasOwnProperty.call(F,B)&&(W[B]=F[B]);return W.default=F,W}(X);T.default={doErrorDraw:function(F,W,B,V,R,G){W instanceof Array||(W=[W]);var U='y'==F?'getY':'getX',Z='y'==F?['top','bottom']:['left','right'],K;if(!(isNaN(R)||isNaN(G)))for(var Q=0,J=W.length;Q<J;Q++)W[Q]instanceof Array?(K=Z[0],this.errorstyles[Q].paths[K]+=' M '+R+' '+G,this.errorstyles[Q].paths[K]+=this.makeError(F,Q,this[U](B+W[Q][0]),V,K),K=Z[1],this.errorstyles[Q].paths[K]+=' M '+R+' '+G,this.errorstyles[Q].paths[K]+=this.makeError(F,Q,this[U](B-W[Q][1]),V,K)):(K=Z[0],this.errorstyles[Q].paths[K]+=' M '+R+' '+G,this.errorstyles[Q].paths[K]+=this.makeError(F,Q,this[U](B+W[Q]),V,K),K=Z[1],this.errorstyles[Q].paths[K]+=' M '+R+' '+G,this.errorstyles[Q].paths[K]+=this.makeError(F,Q,this[U](B-W[Q]),V,K))},makeError:function(F,W,B,V,R){var G;switch(this.errorstyles[W].type){case'bar':G='makeBar';break;case'box':G='makeBox';}return this[G+F.toUpperCase()](B,V,this.errorstyles[W][R])},makeBarY:function(F,W,B){if(F&&B){var V=I.isNumeric(B.width)?B.width:10;return' V '+F+' m -'+V/2+' 0 h '+V+' m -'+V/2+' 0 V '+W+' '}},makeBoxY:function(F,W,B){return F&&B?' m 5 0 V '+F+' h -10 V '+W+' m 5 0 ':void 0},makeBarX:function(F,W,B){if(F&&B){var V=I.isNumeric(B.width)?B.width:10;return' H '+F+' m 0 -'+V/2+' v '+V+' m 0 -'+V/2+' H '+W+' '}},makeBoxX:function(F,W,B){return F&&B?' v 5 H '+F+' v -10 H '+W+' v 5 ':void 0},check:function(F,W,B){var V,R;if((this.getType()!=Graph.SERIE_LINE&&this.getType()!=Graph.SERIE_SCATTER||(V=this.data[2*F])&&(R=this.data[2*F+1]))&&void 0!==V){for(var G=0,U=W.length;G<U;G++)Array.isArray(W[G])?(isNaN(W[G][0])||this._checkY(R+W[G][0]),isNaN(W[G][1])||this._checkY(R-W[G][1])):isNaN(W[G])||(this._checkY(R+W[G]),this._checkY(R-W[G]));for(var G=0,U=B.length;G<U;G++)Array.isArray(B[G])?(isNaN(B[G][0])||this._checkX(V-B[G][0]),isNaN(B[G][1])||this._checkX(V+B[G][1])):isNaN(W[G])||(this._checkX(V-B[G]),this._checkX(V+B[G]))}},setDataError:function(F,W){if(this.error=F,!W)for(let B=0,V=this.error.length;B<V;B++)this.error[B]&&this.check(B,this.error[B][0],this.error[B][1]);return this.dataHasChanged(),this.graph.updateDataMinMaxAxes(),this},setErrorStyle:function(F){function W(Q){Q.dom=document.createElementNS(B.graph.ns,'path'),Q.dom.setAttribute('fill',Q.fillColor||'none'),Q.dom.setAttribute('stroke',Q.strokeColor||'black'),Q.dom.setAttribute('stroke-opacity',Q.strokeOpacity||1),Q.dom.setAttribute('fill-opacity',Q.fillOpacity||1),Q.dom.setAttribute('stroke-width',Q.strokeWidth||1),B.groupMain.appendChild(Q.dom)}var B=this;F=F||['box','bar'],Array.isArray(F)||(F=[F]);for(var V=[],R=[['y','top','bottom'],['x','left','right']],G=0;G<F.length;G++){V[G]={},'string'==typeof F[G]&&(F[G]={type:F[G],y:{}}),V[G].type=F[G].type;for(var U=0,Z=R.length;U<Z;U++){F[G].all&&(F[G][R[U][1]]=I.extend(!0,{},F[G].all),F[G][R[U][2]]=I.extend(!0,{},F[G].all)),F[G][R[U][0]]&&(F[G][R[U][1]]=I.extend(!0,{},F[G][R[U][0]]),F[G][R[U][2]]=I.extend(!0,{},F[G][R[U][0]]));for(var K=1;2>=K;K++)F[G][R[U][K]]&&(V[G][R[U][K]]=F[G][R[U][K]],W(V[G][R[U][K]]))}}return this.errorstyles=V,this},errorDrawInit:function(){if(this.errorstyles)for(var W=0,B=this.errorstyles.length;W<B;W++)this.errorstyles[W].paths={top:'',bottom:'',left:'',right:''}},errorAddPoint:function(F,W,B,V,R){var G;this.error&&(G=this.error[F/2])&&(G[0]&&this.doErrorDraw('y',G[0],B,R,V,R),G[1]&&this.doErrorDraw('x',G[1],W,V,V,R))},errorAddPointBarChart:function(F,W,B,V){var R;this.error&&(R=this.error[F])&&this.doErrorDraw('y',R,W,V,B,V)},errorDraw:function(){if(this.error&&this.errorstyles)for(var F=0,W=this.errorstyles.length;F<W;F++)for(var B in this.errorstyles[F].paths)this.errorstyles[F][B]&&this.errorstyles[F][B].dom&&this.errorstyles[F][B].dom.setAttribute('d',this.errorstyles[F].paths[B])}}})},function(u,A,S){var C,P,E;(function(T,X){P=[A,S(1),S(14),S(5),S(18),S(3)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y,I,O,F){'use strict';function B(Q){return Q&&Q.__esModule?Q:{default:Q}}Object.defineProperty(T,'__esModule',{value:!0});var V=B(X),R=B(Y),G=B(I),U=B(O),Z=function(Q){if(Q&&Q.__esModule)return Q;var J={};if(null!=Q)for(var $ in Q)Object.prototype.hasOwnProperty.call(Q,$)&&(J[$]=Q[$]);return J.default=Q,J}(F);class K extends R.default{static defaults(){return{zpos:0}}constructor(){super(...arguments)}setZPos(Q){return this.options.zpos=Q,this}setz(){return this.setZPos(...arguments)}}Z.mix(K,U.default),T.default=K})},function(u,A){var C,P,E;(function(T,X){P=[A],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T){'use strict';function X(I,O,F){let W,B,V,R,G,U=I.getWaveforms();for(let Z of U)for(W=0,B=Z.getLength(),V=Z.getData();W<B;W+=1)R=O?I.getXAxis().getVal(I.getX(Z.getX(W,!0))):I.getYAxis().getVal(I.getY(V[W])),G=0==W?R:F?Math.min(G,R):Math.max(G,R);return G}Object.defineProperty(T,'__esModule',{value:!0});T.default={getX:function(I){return(I=this.getXAxis().getPx(I))-I%0.2+this.getXAxis().getZProj(this.options.zpos)},getY:function(I){return(I=this.getYAxis().getPx(I))-I%0.2+this.getYAxis().getZProj(this.options.zpos)},getZPos:function(){return this.options.zpos},getMinX:function(I){return I?X(this,!0,!0):this.minX},getMaxX:function(I){return I?X(this,!0,!1):this.maxX},getMinY:function(I){return I?X(this,!1,!0):this.minY},getMaxY:function(I){return I?X(this,!1,!1):this.maxY}}})},function(u,A,S){var C,P,E;(function(T,X){P=[A,S(3),S(14),S(16)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y,I){'use strict';function O(G){return G&&G.__esModule?G:{default:G}}Object.defineProperty(T,'__esModule',{value:!0});var W=function(G){if(G&&G.__esModule)return G;var U={};if(null!=G)for(var Z in G)Object.prototype.hasOwnProperty.call(G,Z)&&(U[Z]=G[Z]);return U.default=G,U}(X),B=O(Y),V=O(I);class R extends B.default{constructor(){super(...arguments),this.groupMain=document.createElementNS(this.graph.ns,'g'),this.pathDom=document.createElementNS(this.graph.ns,'path'),this.groupMain.appendChild(this.pathDom),this.styles={},this.styles.unselected={lineColor:this.options.lineColor,lineStyle:this.options.lineStyle,lineWidth:this.options.lineWidth,fillColor:this.options.fillColor,fillOpacity:this.options.fillOpacity,markers:this.options.markers}}setData(G){for(var U in this.data=G,this.minY=Number.MAX_SAFE_INTEGER,this.maxY=Number.MIN_SAFE_INTEGER,this.data)this._checkY(this.data[U]);return this}setFillColor(G,U,Z){return U=U||'unselected',this.styles[U]=this.styles[U]||{},this.styles[U].fillColor=G,Z&&this.setFillColor(G,'selected'),this.styleHasChanged(U),this}getFillColor(G){return this.getStyle(G).fillColor}setFillOpacity(G,U,Z){return U=U||'unselected',this.styles[U]=this.styles[U]||{},this.styles[U].fillOpacity=G,Z&&this.setLineWidth(G,'selected'),this.styleHasChanged(U),this}getFillOpacity(G){return this.getStyle(G).fillOpacity||1}applyLineStyles(){this.applyLineStyle(this.pathDom)}applyLineStyle(G){G.setAttribute('stroke',this.getLineColor()),G.setAttribute('stroke-width',this.getLineWidth()),this.getLineDashArray()?G.setAttribute('stroke-dasharray',this.getLineDashArray()):G.removeAttribute('stroke-dasharray'),G.setAttribute('fill',this.getFillColor()),G.setAttribute('fill-opacity',this.getFillOpacity()||1)}draw(){var G='';for(var K in this.error&&this.errorDrawInit(),this.data)this.categoryIndices[K]&&(G+='M '+this.getXAxis().getPos(this.categoryIndices[K])+' '+this.getYAxis().getPos(0)+' V '+this.getYAxis().getPos(this.data[K])+' h '+this.getXAxis().getDeltaPx(1/this.nbCategories)+' V '+this.getYAxis().getPos(0),this.error&&this.errorAddPointBarChart(K,this.data[K],this.getXAxis().getPos(this.categoryIndices[K]+0.5/this.nbCategories),this.getYAxis().getPos(this.data[K])));this.error&&this.errorDraw(),this.pathDom.setAttribute('d',G),this.applyLineStyles()}setMarkers(){}getUsedCategories(){return Object.keys(this.data)}}T.default=R})},function(u,A,S){var C,P,E;(function(T,X){P=[A,S(15),S(3)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y){'use strict';Object.defineProperty(T,'__esModule',{value:!0});var O=function(W){return W&&W.__esModule?W:{default:W}}(X);class F extends O.default{static default(){return{orientation:'y',maxBoxWidth:20,defaultStyle:{meanLineColor:'rgb( 100, 0, 0 )',meanLineWidth:2,boxAboveLineWidth:1,boxAboveLineColor:'rgb( 0, 0, 0 )',boxAboveFillColor:'transparent',boxAboveFillOpacity:1,boxBelowLineWidth:1,boxBelowLineColor:'rgb( 0, 0, 0 )',boxBelowFillColor:'transparent',boxBelowFillOpacity:1,barAboveLineColor:'rgba( 0, 0, 0, 1 )',barAboveLineWidth:1,barBelowLineColor:'rgba( 0, 0, 0, 1 )',barBelowLineWidth:1,outlierLineWidth:1,outlierLineColor:'rgb( 255, 255, 255 )',outlierFillColor:'rgb( 0, 0, 0 )',outlierFillOpacity:1}}}constructor(){super(...arguments),this.groupMain=document.createElementNS(this.graph.ns,'g'),this.pathDom=document.createElementNS(this.graph.ns,'path'),this.groupMain.appendChild(this.pathDom),this.styles={},this.styles.unselected=this.options.defaultStyle}setData(W,B){if(this.data=W,!!Array.isArray(W)){let V,R,G,U,Z;for(var K in'y'==this.options.orientation?(V=this.getXAxis(),R=this.getYAxis(),G=this._checkX.bind(this),U=this._checkY.bind(this),Z=!0,this.minY=W[0].Q2,this.maxY=W[0].Q2,this.maxX=W[0].x,this.minX=W[0].x):(V=this.getYAxis(),R=this.getXAxis(),G=this._checkY.bind(this),U=this._checkX.bind(this),Z=!1,this.minX=W[0].Q2,this.maxX=W[0].Q2,this.maxY=W[0].y,this.minY=W[0].y),B&&(G=function(){},U=function(){}),V&&R||(0,Y.throwError)('Error in setting data of the box serie. The X and Y axes must be set beforehand'),this.data)Z?(G(this.data[K].x),this.data[K].pos=this.data[K].x):(G(this.data[K].y),this.data[K].pos=this.data[K].y),this.data[K].Q3&&U(this.data[K].Q3),this.data[K].Q1&&U(this.data[K].Q1),this.data[K].whiskers?Array.isArray(this.data[K].whiskers)?(0<this.data[K].whiskers.length&&U(this.data[K].whiskers[0]),1<this.data[K].whiskers.length&&U(this.data[K].whiskers[1])):(U(this.data[K].whiskers),this.data[K].whiskers=[this.data[K].whiskers]):this.data[K].whiskers=[],Array.isArray(this.data[K].outliers)?this.data[K].outliers.map(Q=>U(Q)):this.data[K].outliers=[];return this.dataHasChanged(),this.graph.updateDataMinMaxAxes(),this}}_style(W,B,V='unselected',R=!1){return this.styles[V]=this.styles[V]||{},this.styles[V][W]=B,R&&this._set(W,B,'selected'),this.styleHasChanged(V),this}_gstyle(W,B){return this.getStyle(B)[W]}getStyle(W='unselected'){return this.styles[W]||{}}setMeanLineColor(){return this._style('meanLineColor',...arguments)}getMeanLineColor(){return this._gstyle('meanLineColor',...arguments)}setStyle(W,B='unselected'){this.styles[B]=(0,Y.extend)({},defaults.defaultStyle,this.styles.unselected,W),this.styleHasChanged(B)}setMeanLineWidth(){return this._style('meanLineWidth',...arguments)}getMeanLineWidth(){return this._gstyle('meanLineWidth',...arguments)}setBoxAboveLineColor(){return this._style('boxAboveLineColor',...arguments)}getBoxAboveLineColor(){return this._gstyle('boxAboveLineColor',...arguments)}setBoxBelowLineColor(){return this._style('boxBelowLineColor',...arguments)}getBoxBelowLineColor(){return this._gstyle('boxBelowLineColor',...arguments)}setBoxAboveLineWidth(){return this._style('boxAboveLineWidth',...arguments)}getBoxAboveLineWidth(){return this._gstyle('boxAboveLineWidth',...arguments)}setBoxBelowLineWidth(){return this._style('boxBelowLineWidth',...arguments)}getBoxBelowLineWidth(){return this._gstyle('boxBelowLineWidth',...arguments)}setBoxAboveFillColor(){return this._style('boxAboveFillColor',...arguments)}getBoxAboveFillColor(){return this._gstyle('boxAboveFillColor',...arguments)}setBoxBelowFillColor(){return this._style('boxBelowFillColor',...arguments)}getBoxBelowFillColor(){return this._gstyle('boxBelowFillColor',...arguments)}setBoxAboveFillOpacity(){return this._style('boxAboveFillOpacity',...arguments)}getBoxAboveFillOpacity(){return this._gstyle('boxAboveFillOpacity',...arguments)}setBoxBelowFillOpacity(){return this._style('boxBelowFillOpacity',...arguments)}getBoxBelowFillOpacity(){return this._gstyle('boxBelowFillOpacity',...arguments)}setBarAboveLineColor(){return this._style('barAboveLineColor',...arguments)}getBarAboveLineColor(){return this._gstyle('barAboveLineColor',...arguments)}setBarBelowLineColor(){return this._style('barBelowLineColor',...arguments)}getBarBelowLineColor(){return this._gstyle('barBelowLineColor',...arguments)}setBarAboveLineWidth(){return this._style('barAboveLineWidth',...arguments)}getBarAboveLineWidth(){return this._gstyle('barAboveLineWidth',...arguments)}setBarBelowLineWidth(){return this._style('barBelowLineWidth',...arguments)}getBarBelowLineWidth(){return this._gstyle('barBelowLineWidth',...arguments)}setOutlierLineColor(){return this._style('outlierLineColor',...arguments)}getOutlierLineColor(){return this._gstyle('outlierLineColor',...arguments)}setOutlierLineWidth(){return this._style('outlierLineWidth',...arguments)}getOutlierLineWidth(){return this._gstyle('outlierLineWidth',...arguments)}setOutlierFillColor(){return this._style('outlierFillColor',...arguments)}getOutlierFillColor(){return this._gstyle('outlierFillColor',...arguments)}setOutlierFillOpacity(){return this._style('outlierFillOpacity',...arguments)}getOutlierFillOpacity(){return this._gstyle('outlierFillOpacity',...arguments)}applyLineStyles(){this.applyLineStyle(this.pathDom)}applyLineStyle(W){W.setAttribute('stroke',this.getLineColor()),W.setAttribute('stroke-width',this.getLineWidth()),W.removeAttribute('stroke-dasharray'),W.setAttribute('fill',this.getFillColor()),W.setAttribute('fill-opacity',this.getFillOpacity()||1)}draw(){if(this.data){let B='y'==this.options.orientation?this.getYAxis():this.getXAxis(),V='y'==this.options.orientation?this.getXAxis():this.getYAxis(),G=!1,W,R,U,Z,K,Q,J,$;if((0,Y.emptyDom)(this.groupMain),'category'==V.getType())R=V.getRelPx(0.8/this.nbCategories),G=!0;else{R=this.options.maxBoxWidth;for(var re=0,ae=this.data.length;re<ae-1;re++)R=Math.min(R,Math.abs(V.getPx(this.data[re+1].pos)-V.getPx(this.data[re].pos)))}for(var re=0,ae=this.data.length;re<ae;re++){if('category'==V.getType()){let de='y'==this.options.orientation?this.data[re].x:this.data[re].y;if(!!this.categoryIndices.hasOwnProperty(de))W=[V.getPos(this.categoryIndices[de])+1.2*R/2];else if(Array.isArray(this._linkedToScatterSeries))for(let ge of this._linkedToScatterSeries)if(ge.categoryIndices.hasOwnProperty(de)){W=[V.getPos(ge.categoryIndices[de])+1.2*R/2],B='y'==this.options.orientation?ge.getYAxis():ge.getXAxis();break}}else W=[V.getPos('y'==this.options.orientation?this.data[re].x:this.data[re].y),R];U=B.getPos(this.data[re].Q2),Z=B.getPos(this.data[re].Q3),K=B.getPos(this.data[re].Q1),this.data[re].whiskers.map(de=>{de<this.data[re].Q1?J=B.getPos(de):Q=B.getPos(de)}),$=this.data[re].outliers.map(de=>B.getPos(de));var se=document.createElementNS(this.graph.ns,'line');this.applyMeanStyle(se);var ne=document.createElementNS(this.graph.ns,'rect'),oe=document.createElementNS(this.graph.ns,'rect');'y'==this.options.orientation?(ne.setAttribute('width',R),ne.setAttribute('x',W[0]-R/2),oe.setAttribute('width',R),oe.setAttribute('x',W[0]-R/2),se.setAttribute('x1',W[0]-R/2),se.setAttribute('x2',W[0]+R/2),se.setAttribute('y1',U),se.setAttribute('y2',U)):(ne.setAttribute('height',R),ne.setAttribute('y',W[0]-R/2),oe.setAttribute('height',R),oe.setAttribute('y',W[0]-R/2),se.setAttribute('y1',W[0]-R/2),se.setAttribute('y2',W[0]+R/2),se.setAttribute('x1',U),se.setAttribute('x2',U)),this.boxPos(ne,U,Z,'x'==this.options.orientation),this.boxPos(oe,U,K,'x'==this.options.orientation),this.applyBoxStyle(ne,oe);var le=document.createElementNS(this.graph.ns,'line'),pe=document.createElementNS(this.graph.ns,'line');'y'==this.options.orientation?(void 0!==Q&&(le.setAttribute('y1',Z),le.setAttribute('y2',Q),le.setAttribute('x1',W[0]),le.setAttribute('x2',W[0])),void 0!==J&&(pe.setAttribute('y1',K),pe.setAttribute('y2',J),pe.setAttribute('x1',W[0]),pe.setAttribute('x2',W[0]))):(void 0!==Q&&(le.setAttribute('x1',Z),le.setAttribute('x2',Q),le.setAttribute('y1',W[0]),le.setAttribute('y2',W[0])),void 0!==J&&(pe.setAttribute('x1',K),pe.setAttribute('x2',J),pe.setAttribute('y1',W[0]),pe.setAttribute('y2',W[0]))),$.map(de=>{let ge=document.createElementNS(this.graph.ns,'circle');ge.setAttribute('r',2),'y'==this.options.orientation?(ge.setAttribute('cx',W[0]),ge.setAttribute('cy',de)):(ge.setAttribute('cy',W[0]),ge.setAttribute('cx',de)),this.setOutlierStyle(ge),this.groupMain.appendChild(ge)}),void 0!==Q&&this.groupMain.appendChild(le),void 0!==J&&this.groupMain.appendChild(pe),void 0!=Z&&this.groupMain.appendChild(ne),void 0!=K&&this.groupMain.appendChild(oe),this.groupMain.appendChild(se),this.applyWhiskerStyle(le,pe)}}}applyBoxStyle(W,B){W.setAttribute('stroke',this.getBoxAboveLineColor()),W.setAttribute('stroke-width',this.getBoxAboveLineWidth()),this.getBoxAboveFillColor()!==void 0&&W.setAttribute('fill',this.getBoxAboveFillColor()),this.getBoxAboveFillOpacity()!==void 0&&W.setAttribute('fill-opacity',this.getBoxAboveFillOpacity()),B.setAttribute('stroke',this.getBoxBelowLineColor()),B.setAttribute('stroke-width',this.getBoxBelowLineWidth()),this.getBoxBelowFillColor()!==void 0&&B.setAttribute('fill',this.getBoxBelowFillColor()),this.getBoxAboveFillOpacity()!==void 0&&B.setAttribute('fill-opacity',this.getBoxBelowFillOpacity())}applyWhiskerStyle(W,B){W.setAttribute('stroke',this.getBarAboveLineColor()),W.setAttribute('stroke-width',this.getBarAboveLineWidth()),B.setAttribute('stroke',this.getBarBelowLineColor()),B.setAttribute('stroke-width',this.getBarBelowLineWidth())}applyMeanStyle(W){W.setAttribute('stroke',this.getMeanLineColor()),W.setAttribute('stroke-width',this.getMeanLineWidth())}setOutlierStyle(W){W.setAttribute('stroke',this.getOutlierLineColor()),W.setAttribute('stroke-width',this.getOutlierLineWidth()),this.getBoxBelowFillColor()!==void 0&&W.setAttribute('fill',this.getOutlierFillColor()),this.getBoxAboveFillOpacity()!==void 0&&W.setAttribute('fill-opacity',this.getOutlierFillOpacity())}getCategoryIndex(W){if(!this.categories)throw new Error('No categories were defined. Probably axis.setSeries was not called');for(var B=0;B<this.categories.length;B++)if(this.categories[B].name==W)return B;return!1}setMarkers(){}boxPos(W,B,V,R){B>V?(W.setAttribute(R?'x':'y',V),W.setAttribute(R?'width':'height',B-V)):(W.setAttribute(R?'x':'y',B),W.setAttribute(R?'width':'height',V-B))}getUsedCategories(){let W='y'==this.options.orientation?'x':'y',B=this.data.map(V=>V[W]);return Array.isArray(this._linkedToScatterSeries)&&this._linkedToScatterSeries.map(V=>{V.getUsedCategories().map(R=>{let G;-1<(G=B.indexOf(R))&&B.splice(G,1)})}),B}linkToScatterSerie(...W){this._linkedToScatterSeries=W}}T.default=F})},function(u,A,S){var C,P,E;(function(T,X){P=[A,S(14),S(3),S(16)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y,I){'use strict';function F(G){return G&&G.__esModule?G:{default:G}}Object.defineProperty(T,'__esModule',{value:!0});var W=F(X),B=function(G){if(G&&G.__esModule)return G;var U={};if(null!=G)for(var Z in G)Object.prototype.hasOwnProperty.call(G,Z)&&(U[Z]=G[Z]);return U.default=G,U}(Y),V=F(I);class R extends W.default{constructor(){super(...arguments),this.lines=this.lines||{}}setColors(G){this.colors=G}_draw_standard(){var G=this,U=this._dataToUse,K=0,Q=U.length,ae=!1,se=!1,de=this.getXAxis(),ge=this.getYAxis(),ue=de.getCurrentMin(),he=ge.getCurrentMin(),ce=de.getCurrentMax(),xe=ge.getCurrentMax(),_e=0,Ce=1,Pe=!1,ve=!1,Z,J,$,ee,te,ie,$,ne,oe,le,pe;for(this.eraseLines(),this.isFlipped()&&(_e=1,Ce=0),K=0;K<Q;K++){for(Z=!1,this.counter1=K,this.currentLine='',J=0,$=0,ee=U[K].length,J=0;J<ee;J+=2){if(te=U[K][J+_e],ie=U[K][J+Ce],te<ue&&ae<ue||te>ce&&ae>ce||(ie<he&&se<he||ie>xe&&se>xe)&&!this.options.lineToZero){ae=te,se=ie,ve=!0;continue}if(this.counter2=J/2,this.markersShown()&&this.getMarkerCurrentFamily(this.counter2),le=this.getX(te),pe=this.getY(ie),le!=ne||pe!=oe){if(Pe=te<ue||ie<he||te>ce||ie>xe,isNaN(le)||isNaN(pe)){0<this.counter;continue}if(this._optimize_before(le,pe)){var we=this.colors[K][J/2];if(this._addPoint(le,pe,te,ie,ne,oe,ae,se,J,we,!1,!0),this.detectPeaks(te,ie),!this._optimize_after(le,pe)){Z=!0;break}ne=le,oe=pe,ae=te,se=ie}}}if(Z)break}if(this.latchLines(),this._tracker){this._trackerDom&&this._trackerDom.remove();var Ee=this.groupLines.cloneNode(!0);this.groupMain.appendChild(Ee);for(var K=0,Q=Ee.children.length;K<Q;K++)Ee.children[K].setAttribute('stroke','transparent'),Ee.children[K].setAttribute('stroke-width','25px'),Ee.children[K].setAttribute('pointer-events','stroke');G._trackerDom=Ee,G.groupMain.addEventListener('mousemove',function(Te){var Xe=G.graph._getXY(Te),Ye=G.handleMouseMove(!1,!1);G._trackingCallback(G,Ye,Xe.x,Xe.y)}),G.groupMain.addEventListener('mouseleave',function(){G._trackingOutCallback(G)})}return this}_addPoint(G,U,Z,K,Q,J,$,ee,te,ie){if(void 0!==Q&&void 0!==J&&!(isNaN(G)||isNaN(U))){var se=this.lines[ie];se||(se=this.lines[ie]={object:document.createElementNS(this.graph.ns,'path'),path:'',color:ie},se.object.setAttribute('stroke',ie),se.color=ie,this.groupLines.appendChild(se.object)),se.path+='M '+Q+' '+J+' L '+G+' '+U,this.error&&this.errorAddPoint(te,Z,K,G,U)}}removeExtraLines(){}latchLines(){for(var G in this.lines)this.lines[G].object.setAttribute('d',this.lines[G].path)}eraseLines(){for(var G in this.lines)this.lines[G].path='',this.lines[G].object.setAttribute('d','')}applyLineStyle(G){G.setAttribute('stroke-width',this.getLineWidth()),this.getLineDashArray()?G.setAttribute('stroke-dasharray',this.getLineDashArray()):G.removeAttribute('stroke-dasharray'),G.setAttribute('fill','none')}}T.default=R})},function(u,A,S){var C,P,E;(function(T,X){P=[A,S(15),S(3),S(16)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y,I){'use strict';function F(Z){return Z&&Z.__esModule?Z:{default:Z}}Object.defineProperty(T,'__esModule',{value:!0});var W=F(X),B=function(Z){if(Z&&Z.__esModule)return Z;var K={};if(null!=Z)for(var Q in Z)Object.prototype.hasOwnProperty.call(Z,Q)&&(K[Q]=Z[Q]);return K.default=Z,K}(Y),V=F(I);class U extends W.default{constructor(){super(...arguments),this.id=Math.random()+Date.now(),this.shapes=[],this.shown=!0,this.data=[],this.shapesDetails=[],this.shapes=[],this._type='scatter',B.mapEventEmission(this.options,this),this._isMinOrMax={x:{min:!1,max:!1},y:{min:!1,max:!1}},this.groupPoints=document.createElementNS(this.graph.ns,'g'),this.groupMain=document.createElementNS(this.graph.ns,'g'),this.additionalData={},this.selectedStyleGeneral={},this.selectedStyleModifiers={},this.groupPoints.addEventListener('mouseover',J=>{var $=parseInt(J.target.parentElement.getAttribute('data-shapeid'));this.emit('mouseover',$,this.waveform.getX($),this.waveform.getY($))}),this.groupPoints.addEventListener('mouseout',J=>{var $=parseInt(J.target.parentElement.getAttribute('data-shapeid'));this.emit('mouseout',$,this.waveform.getX($),this.waveform.getY($))}),this.minX=Number.MAX_VALUE,this.minY=Number.MAX_VALUE,this.maxX=Number.MIN_VALUE,this.maxY=Number.MIN_VALUE,this.groupMain.appendChild(this.groupPoints),this.currentAction=!1,this.initExtended1&&this.initExtended1(),this.styles={},this.styles.unselected={},this.styles.selected={},this.styles.unselected.default={shape:'circle',cx:0,cy:0,r:3,stroke:'transparent',fill:'black'},this.styles.selected.default={shape:'circle',cx:0,cy:0,r:4,stroke:'transparent',fill:'black'}}setDataCategory(Z){let K=+(1/0),Q=-(1/0);for(let J of Z)Z.y.getMaxY()>Q?Q=Z.y.getMaxY():Z.y.getMinY()<K&&(K=Z.y.getMinY());return this.data=Z,this.dataHasChanged(),this.graph.updateDataMinMaxAxes(),this}empty(){for(;this.groupPoints.firstChild;)this.groupPoints.removeChild(this.groupPoints.firstChild)}getSymbolForLegend(){if(this.symbol)return this.symbol;var Z=document.createElementNS(this.graph.ns,'g');Z.setAttribute('data-shapeid',-1);var K=this.doShape(Z,this.styles.unselected.default),Q=this.getStyle('unselected',-1,!0);for(var J in Q[-1])'shape'!=J&&K.setAttribute(J,Q[-1][J]);return Z}setStyle(Z,K,Q){return'string'==typeof K&&(Q=K,K=!1),void 0===Q&&(Q='unselected'),this.styles[Q]=this.styles[Q]||{},this.styles[Q].all=Z,this.styles[Q].modifiers=K,this.styleHasChanged(Q),this}draw(Z){if(Z||this.hasDataChanged()||this.hasStyleChanged('unselected')){var ee=0,se='category'==this.getXAxis().getType(),J,$,te;this._drawn=!0,this.dataHasChanged(!1),this.styleHasChanged(!1),this.groupMain.removeChild(this.groupPoints);var ne=[];if(ee=0,te=0,this.error&&this.errorDrawInit(),se){for(let pe=0;ee<this.data.length;ee++)if(this.categoryIndices.hasOwnProperty(this.data[ee].x)){this.error;for(var oe=0,le=this.data[i].y.getLength();oe<le;oe++)$=this.getY(this.data[i].y.getY(oe)),J=this.getX(oe/(le-1)*(0.8/this.nbCategories)+this.categoryIndices[this.data[ee].x]+0.1/this.nbCategories),oe++,this.shapesDetails[pe]=this.shapesDetails[pe]||[],this.shapesDetails[pe][0]=J,this.shapesDetails[pe][1]=$,ne.push(pe),pe++}}else for(;ee<this.waveform.getLength();ee++)this.waveform.getX(ee)<this.getXAxis().getCurrentMin()||this.waveform.getX(ee)>this.getXAxis().getCurrentMax()||this.waveform.getY(ee)<this.getYAxis().getCurrentMin()||this.waveform.getY(ee)>this.getYAxis().getCurrentMax()||(J=this.getX(this.waveform.getX(ee)),$=this.getY(this.waveform.getY(ee)),this.error&&this.errorAddPoint(ee,this.waveform.getX(ee),this.waveform.getY(ee),J,$),this.shapesDetails[ee]=this.shapesDetails[ee]||[],this.shapesDetails[ee][0]=J,this.shapesDetails[ee][1]=$,ne.push(ee));this.error&&this.errorDraw(),this.applyStyle('unselected',ne),this.groupMain.appendChild(this.groupPoints)}}_addPoint(Z,K,Q){var J=document.createElementNS(this.graph.ns,'g');J.setAttribute('transform','translate('+Z+', '+K+')'),J.setAttribute('data-shapeid',Q),shape=this.extraStyle&&this.extraStyle[Q]?this.doShape(J,this.extraStyle[Q]):this.stdStylePerso?this.doShape(J,this.stdStylePerso):this.doShape(J,this.stdStyle),this.shapes[Q]=shape,this.groupPoints.appendChild(J)}doShape(Z,K){var Q=document.createElementNS(this.graph.ns,K.shape);return Z.appendChild(Q),Q}getStyle(Z,K,Q){var Z=Z||'unselected',J,$={};'number'==typeof K?J=[K]:Array.isArray(K)&&(J=K);var ee,K,te,ie,ae;this.styles[Z].all!==void 0&&(ae=this.styles[Z].all,'function'==typeof ae?ae=ae():!1===ae&&(ae={}));for(var se=0,ne=J.length;se<ne;se++){if(K=J[se],ee=this.shapes[K],(te=this.styles[Z].modifiers)&&('function'==typeof te||te[K])){'function'==typeof te?ie=te(K,ee):te[K]&&(ie=te[K]);var oe=B.extend({},ae,ie);ie=B.extend(ie,oe)}else ie=void 0==ae?this.styles[Z].default:ae;if(!ee){var le=document.createElementNS(this.graph.ns,'g');le.setAttribute('data-shapeid',K),this.shapes[K]=this.doShape(le,ie),this.groupPoints.appendChild(le),ee=this.shapes[K]}Q||ee.parentNode.setAttribute('transform','translate('+this.shapesDetails[K][0]+', '+this.shapesDetails[K][1]+')'),$[K]=ie}return $}applyStyle(Z,K,Q){var J,$,ee=this.getStyle(Z,K,Q);for(J in ee)for($ in ee[J])'shape'!==$&&(ee[J][$]?this.shapes[J].setAttribute($,ee[J][$]):this.shapes[J].removeAttribute($))}unselectPoint(Z){this.selectPoint(Z,!1)}selectPoint(Z,K,Q){if(!(this.shapesDetails[Z][2]&&this.shapesDetails[Z][2]==Q)){if('string'==typeof K&&(Q=K,K=void 0),Array.isArray(Z))return this.selectPoints(Z);if(this.shapes[Z]&&this.shapesDetails[Z])if((this.shapesDetails[Z][2]||!1===K)&&!0!==K){var J=this.shapesDetails[Z][2];this.shapesDetails[Z][2]=!1;var $=this.getStyle(J,Z,!0);for(var ee in $[Z])this.shapes[Z].removeAttribute(ee);this.applyStyle('unselected',Z,!0)}else Q=Q||'selected',this.shapesDetails[Z][2]=Q,this.applyStyle(Q,Z,!0)}}getUsedCategories(){return'object'==typeof this.data[0]?this.data.map(Z=>Z.x):[]}}B.mix(U,V.default),T.default=U})},function(u,A,S){var C,P,E;(function(T,X){P=[A,S(15),S(5),S(3)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y,I){'use strict';function O(V){return V&&V.__esModule?V:{default:V}}Object.defineProperty(T,'__esModule',{value:!0});var F=O(X),W=O(Y);class B extends F.default{static default(){return{fillColor:'rgba( 0, 0, 0, 0.1 )',lineColor:'rgba( 0, 0, 0, 1 )',lineWidth:'1px'}}constructor(){super(...arguments),this.selectionType='unselected',this.id=(0,I.guid)(),this.groupZones=document.createElementNS(this.graph.ns,'g'),this.groupMain=document.createElementNS(this.graph.ns,'g'),this.lineZone=document.createElementNS(this.graph.ns,'path'),this.lineZone.setAttribute('stroke','black'),this.lineZone.setAttribute('stroke-width','1px'),this.groupMain.appendChild(this.groupZones),this.groupZones.appendChild(this.lineZone),this.applyLineStyle(this.lineZone),this.styleHasChanged(),this.clip=document.createElementNS(this.graph.ns,'clipPath'),this.clipId=(0,I.guid)(),this.clip.setAttribute('id',this.clipId),this.graph.defs.appendChild(this.clip)}setWaveform(...V){return this.waveforms=V,this.waveforms=this.waveforms.map(R=>{return R instanceof W.default?R:new W.default(R)}),this.minX=this.waveforms[0].getXMin(),this.maxX=this.waveforms[0].getXMax(),this.minY=this.waveforms[0].getMin(),this.maxY=this.waveforms[0].getMax(),this.waveforms.map(R=>{this.minX=Math.min(R.getXMin(),this.minX),this.maxX=Math.max(R.getXMin(),this.maxX),this.minY=Math.min(R.getMin(),this.minY),this.maxY=Math.max(R.getMax(),this.maxY)}),this.graph.updateDataMinMaxAxes(),this.dataHasChanged(),this}setWaveforms(){return this.setWaveform(...arguments)}getWaveforms(){return this.waveforms}setMinMaxWaveforms(V,R){return this.waveforms=[V,R.reverse()],this}empty(){for(;this.group.firstChild;)this.group.removeChild(this.group.firstChild)}draw(V){if(V||this.hasDataChanged()){if(!this.waveforms)return;let R=0,G=0,U=0,Z=0,K=0,Q='',J;const $=this.getXAxis().getMinPx(),ee=this.getXAxis().getMaxPx(),te=this.getYAxis().getMinPx(),ie=this.getYAxis().getMaxPx(),re=this.getXAxis().getCurrentMin(),ae=this.getXAxis().getCurrentMax(),se=this.getYAxis().getCurrentMin(),ne=this.getYAxis().getCurrentMax();this.groupMain.removeChild(this.groupZones);for(let oe of this.waveforms)for(G=oe.getData(!0),K=0;K<G.length;K+=1){if(R=oe.getX(K,!0),Z=this.getY(G[K]),U=this.getX(R),R<re||R>ae){J=[R,G[K],U,Z];continue}G[K]<se?Z=this.getY(se):G[K]>ne&&(Z=this.getY(ne)),0<Q.length&&(Q+=' L '),J?(Q+=J[2]+','+J[3]+' ',J=!1):Q+=U+','+Z+' '}this.lineZone.setAttribute('d','M '+Q+' z'),this.groupMain.appendChild(this.groupZones)}this.hasStyleChanged(this.selectionType)&&(this.applyLineStyle(this.lineZone),this.styleHasChanged(!1))}applyLineStyle(V){V.setAttribute('stroke',this.getLineColor()),V.setAttribute('stroke-width',this.getLineWidth()),V.setAttribute('fill',this.getFillColor()),V.setAttribute('fill-opacity',this.getFillOpacity()),V.setAttribute('stroke-opacity',this.getLineOpacity())}setLineWidth(V){return this.options.lineWidth=V,this.styleHasChanged(),this}getLineWidth(){return this.options.lineWidth}setLineOpacity(V){return this.options.lineOpacity=V,this.styleHasChanged(),this}getLineOpacity(){return this.options.lineOpacity}setLineColor(V){return this.options.lineColor=V,this.styleHasChanged(),this}getLineColor(){return this.options.lineColor}setFillOpacity(V){return this.options.fillOpacity=V,this.styleHasChanged(),this}getFillOpacity(){return this.options.fillOpacity}setFillColor(V){return this.options.fillColor=V,this.styleHasChanged(),this}getFillColor(){return this.options.fillColor}}T.default=B})},function(u,A,S){var C,P,E;(function(T,X){P=[A,S(1),S(23),S(5),S(18),S(3)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y,I,O,F){'use strict';function B(Q){return Q&&Q.__esModule?Q:{default:Q}}Object.defineProperty(T,'__esModule',{value:!0});var V=B(X),R=B(Y),G=B(I),U=B(O),Z=function(Q){if(Q&&Q.__esModule)return Q;var J={};if(null!=Q)for(var $ in Q)Object.prototype.hasOwnProperty.call(Q,$)&&(J[$]=Q[$]);return J.default=Q,J}(F);class K extends R.default{static default(){return{zpos:0}}constructor(){super(...arguments)}setZPos(Q){return this.options.zpos=Q,this}setz(){return this.setZPos(...arguments)}}Z.mix(K,U.default),T.default=K})},function(u,A,S){var C,P,E;(function(T,X){P=[A,S(15),S(3)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y){'use strict';Object.defineProperty(T,'__esModule',{value:!0});var F=function(V){return V&&V.__esModule?V:{default:V}}(X),W=function(V){if(V&&V.__esModule)return V;var R={};if(null!=V)for(var G in V)Object.prototype.hasOwnProperty.call(V,G)&&(R[G]=V[G]);return R.default=V,R}(Y);class B extends F.default{constructor(){super(...arguments),W.mapEventEmission(this.options,this),this.groupMain=document.createElementNS(this.graph.ns,'g'),this.rects=[],this.paths=[],this.recalculateBinsOnDraw=!1}setData(V){this.minX=this.maxX=this.minY=this.maxY=0;var R=0,G=V.length;for(this.data=V,this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY,R=0;R<G;R++)this._checkX(V[R][0]),this._checkY(V[R][1]);return this.dataHasChanged(),this.graph.updateDataMinMaxAxes(),this}calculateDensity(V,R,G,U,Z,K){var Q=[],$=this.data.length,ie=Number.POSITIVE_INFINITY,re=Number.NEGATIVE_INFINITY,J,ee,te;for(J=0;J<$;J++)(ee=~~((this.data[J][0]-V)/R),te=~~((this.data[J][1]-U)/Z),!(ee>G||te>K||0>ee||0>te))&&(Q[ee]=Q[ee]||[],Q[ee][te]=Q[ee][te]+1||1,ie=Q[ee][te]<ie?Q[ee][te]:ie,re=Q[ee][te]>re?Q[ee][te]:re);return this.maxIndexX=G,this.maxIndexY=K,this.binMin=ie,this.binMax=re,this.deltaX=R,this.deltaY=Z,this.fromX=V,this.fromY=U,this.numX=G,this.numY=K,this.densitymap=Q,Q}calculateDensityWeighted(V,R,G,U,Z,K){var Q=[],$=this.data.length,ie=Number.POSITIVE_INFINITY,re=Number.NEGATIVE_INFINITY,J,ee,te,ae,se,ne,oe,le,pe,de,ge;for(J=0;J<$;J++)(ne=(this.data[J][0]-V)/R-0.5,oe=(this.data[J][1]-U)/Z-0.5,ee=Math.floor(ne),te=Math.floor(oe),le=ee,de=te,pe=ee+1,ge=te+1,ae=1-(ne-ee),se=1-(oe-te),!(ee>G||te>K||0>ee||0>te))&&(Q[le]=Q[le]||[],Q[pe]=Q[pe]||[],Q[le][de]=Q[le][de]||0,Q[pe][de]=Q[pe][de]||0,Q[le][ge]=Q[le][ge]||0,Q[pe][ge]=Q[pe][ge]||0,Q[le][de]+=ae*se,Q[pe][de]+=(1-ae)*se,Q[le][ge]+=ae*(1-se),Q[pe][ge]+=(1-ae)*(1-se),ie=Q[le][de]<ie?Q[le][de]:ie,re=Q[le][de]>re?Q[le][de]:re,ie=Q[pe][de]<ie?Q[pe][de]:ie,re=Q[pe][de]>re?Q[pe][de]:re,ie=Q[le][ge]<ie?Q[le][ge]:ie,re=Q[le][ge]>re?Q[le][ge]:re,ie=Q[pe][ge]<ie?Q[pe][ge]:ie,re=Q[pe][ge]>re?Q[pe][ge]:re);return this.maxIndexX=G,this.maxIndexY=K,this.binMin=ie,this.binMax=re,this.deltaX=R,this.deltaY=Z,this.fromX=V,this.fromY=U,this.numX=G,this.numY=K,this.densitymap=Q,Q}autoBins(V,R){return this.numX=V||400,this.numY=R||this.numX,this.calculateDensity(this.minX,(this.maxX-this.minX)/V,V,this.minY,(this.maxY-this.minY)/R,R),this.recalculateBinsOnDraw=!1,this}setPxPerBin(V,R,G){return V&&this.calculationDensityMap({from:'min',to:'max',pxPerBin:V,weighted:G}),R&&this.calculationDensityMap(!1,{from:'min',to:'max',pxPerBin:R,weighted:G}),this}setBinsFromTo(V,R,G,U){return this.densityMapCalculation=this.densityMapCalculation||{},this.densityMapCalculation[V]={from:R,to:G,numBins:U},this.calculationDensityMap(),this}calculationDensityMap(V,R){this.method=this.calculateDensityAdvanced,this.densityMapCalculation=this.densityMapCalculation||{},V&&(this.densityMapCalculation.x=V),R&&(this.densityMapCalculation.y=R)}calculateDensityAdvanced(){var V={x:{from:0,num:0,delta:0,weighing:!1},y:{from:0,num:0,delta:0,weighing:!1}},R={x:this.graph.drawingSpaceWidth,y:this.graph.drawingSpaceHeight},G={x:this.getXAxis,y:this.getYAxis},U=!1;for(var Z in this.densityMapCalculation)if(this.densityMapCalculation[Z].weighted&&(U=!0,V[Z].weighing=!0),this.densityMapCalculation[Z].pxPerBin){var K='min'==this.densityMapCalculation[Z].from?G[Z].call(this).getCurrentMin():this.densityMapCalculation[Z].from,Q='max'==this.densityMapCalculation[Z].to?G[Z].call(this).getCurrentMax():this.densityMapCalculation[Z].to,J=Math.abs(G[Z].call(this).getRelPx(Q-K));V[Z].num=Math.ceil(R[Z]/this.densityMapCalculation[Z].pxPerBin),V[Z].from=K-Math.abs(G[Z].call(this).getRelVal((V[Z].num*this.densityMapCalculation[Z].pxPerBin-J)/2)),V[Z].delta=Math.abs(G[Z].call(this).getRelVal(this.densityMapCalculation[Z].pxPerBin))}else V[Z].num=this.densityMapCalculation[Z].numBins||400,V[Z].from='min'==this.densityMapCalculation[Z].from?G[Z].call(this).getCurrentMin():this.densityMapCalculation[Z].from,V[Z].delta=this.densityMapCalculation[Z].to?(('max'==this.densityMapCalculation[Z].to?G[Z].call(this).getCurrentMax():this.densityMapCalculation[Z].to)-V[Z].from)/V[Z].num:this.densityMapCalculate[Z].delta;(U?this.calculateDensityWeighted:this.calculateDensity).call(this,V.x.from,V.x.delta,V.x.num,V.y.from,V.y.delta,V.y.num)}setColorMapBinBoundaries(V,R){return this.colorMapMin=V,this.colorMapMax=R,this}autoColorMapBinBoundaries(){return this.colorMapMin=this.binMin,this.colorMapMax=this.binMax,this}onRedrawColorMapBinBoundaries(V){return this.callbackColorMapMinMax=V,this}colorMapHSL(V,R,G){G=G||'linear';for(var U={exp:function(ae){return(Math.exp(1*(ae/R))-Math.exp(0))/(Math.exp(1)-Math.exp(0))},log:function(ae){return(Math.log(ae+1)-Math.log(1))/(Math.log(R+1)-Math.log(1))},linear:function(ae){return(ae-0)/(R-0)}},Z=0,K=[],Q=[],J={h:null,s:null,l:null,a:null},te=V.length-1,ie=0,$,ee;ie<=R;ie++){for(var re in $=U[G](ie),ee=Math.floor($*te),ee==V.length-1&&(ee=te-1),$=($-ee/te)/(1/te),J)J[re]=(V[ee+1][re]-V[ee][re])*$+V[ee][re];K[Z]='hsl('+J.h+', '+Math.round(100*J.s)+'%, '+Math.round(100*J.l)+'%)',Q[Z]=J.a,Z++}return this.opacities=Q,this.colorMap=K,this.colorMapNum=R,this}autoColorMapHSL(V,R){return this.colorMapHSV(V,100,R||'linear'),this}getColorIndex(V){return Math.max(0,Math.min(this.colorMapNum,Math.floor((V-this.colorMapMin)/(this.colorMapMax-this.colorMapMin)*this.colorMapNum)))}draw(){var V;if(this.method&&this.method(),!this.callbackColorMapMinMax||void 0==this.colorMapMin||void 0==this.colorMapMax||'auto'==this.callbackColorMapMinMax)this.autoColorMapBinBoundaries();else{var R=this.callbackColorMapMinMax(this.binMin,this.binMax);this.setColorMapBinBoundaries(R[0],R[1])}for(var G=this.getXAxis().getRelPx(this.deltaX),U=this.getYAxis().getRelPx(this.deltaY),Z=0;Z<this.paths.length;Z++)this.paths[Z]='';for(var Z=0;Z<this.maxIndexX;Z++)for(var K=0;K<this.maxIndexY;K++)void 0!=this.densitymap[Z]&&void 0!=this.densitymap[Z][K]&&(V=this.getColorIndex(this.densitymap[Z][K]),this.paths[V]||(this.paths[V]=''),this.paths[V]+=' M '+this.getXAxis().getPx(Z*this.deltaX+this.fromX)+' '+this.getYAxis().getPx(K*this.deltaY+this.fromY)+' h '+G+' v '+U+' h -'+G+' z');this.drawRects()}drawRects(){for(var V=0;V<this.paths.length;V++)this.rects[V]||(this.rects[V]=document.createElementNS(this.graph.ns,'path'),this.rects[V].setAttribute('shape-rendering','crispEdges')),void 0!==this.paths[V]&&(this.rects[V].setAttribute('d',this.paths[V]),this.rects[V].setAttribute('fill',this.colorMap[V]),this.rects[V].setAttribute('fill-opacity',this.opacities[V])),this.groupMain.appendChild(this.rects[V])}setOptions(V){return this.options=W.extend(!0,{},defaults,V||{}),this}}T.default=B})},function(u,A,S){var C,P,E;(function(T,X){P=[A,S(14),S(3)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y){'use strict';Object.defineProperty(T,'__esModule',{value:!0});var F=function(V){return V&&V.__esModule?V:{default:V}}(X),W=function(V){if(V&&V.__esModule)return V;var R={};if(null!=V)for(var G in V)Object.prototype.hasOwnProperty.call(V,G)&&(R[G]=V[G]);return R.default=V,R}(Y);class B extends F.default{constructor(){super(...arguments),this.negativeDelta=0,this.positiveDelta=0,this.negativeThreshold=0,this.positiveThreshold=0}setData(V,R,G){var R=R||'2D',G=G||'float',J=V.length,ie=[],Q,$,ee,te;for(V instanceof Array||'object'!=typeof V||(this.minX=V.minX,this.minY=V.minY,this.maxX=V.maxX,this.maxY=V.maxY,V=V.segments,J=V.length),Q=0;Q<J;Q++){for(ee=V[Q].lines.length,te=this._addData(G,ee),$=0;$<ee;$+=2)te[$]=V[Q].lines[$],this._checkX(te[$]),te[$+1]=V[Q].lines[$+1],this._checkY(te[$+1]);ie.push({lines:te,zValue:V[Q].zValue})}return this.data=ie,this.graph.updateDataMinMaxAxes(),this.dataHasChanged(!0),this}draw(V){if(V||this.hasDataChanged()){this.currentLine=0;var J=0,$=this.data.length,ee=0,U,Z,K,Q,te,ie,ae,se;this.minZ=1/0,this.maxZ=-(1/0);var ne=this.groupLines.nextSibling;this.groupMain.removeChild(this.groupLines),this.zValues={};var oe=0,le=1;this.getFlip()&&(oe=0,le=1);var pe=this.getYAxis().getCurrentMin(),de=this.getXAxis().getCurrentMin(),ge=this.getXAxis().getCurrentMax(),ue=this.getYAxis().getCurrentMax();for(this.counter=0,this.currentLineId=0;J<$;J++){for(this.currentLine='',ee=0,te=0,(se=this.data[J].lines,ie=se.length);ee<ie;ee+=4){var he,ce;se[ee+oe]<de&&se[ee+2+oe]<de||se[ee+le]<pe&&se[ee+2+le]<pe||se[ee+le]>ue&&se[ee+2+le]>ue||se[ee+oe]>ge&&se[ee+2+oe]>ge||(K=this.getX(se[ee+oe]),Q=this.getY(se[ee+le]),U=this.getX(se[ee+2+oe]),Z=this.getY(se[ee+2+le]),U!=K||Z!=Q)&&(this.currentLine+='M ',this.currentLine+=K,this.currentLine+=' ',this.currentLine+=Q,this.currentLine+='L ',this.currentLine+=U,this.currentLine+=' ',this.currentLine+=Z,this.counter++,he=U,ce=Z,te++)}this.currentLine+=' z',ae=this._createLine(),ae.setAttribute('data-zvalue',this.data[J].zValue),this.zValues[this.data[J].zValue]={dom:ae},this.minZ=Math.min(this.minZ,this.data[J].zValue),this.maxZ=Math.max(this.maxZ,this.data[J].zValue)}for(J++,J=this.currentLine+1;J<this.lines.length;J++)this.groupLines.removeChild(this.lines[J]),this.lines.splice(J,1);for(J=0;J<$;J++)this.setColorTo(this.lines[J],this.data[J].zValue,this.minZ,this.maxZ);this.onMouseWheel(0,{shiftKey:!1}),this.groupMain.insertBefore(this.groupLines,ne)}else if(this.hasStyleChanged(this.selectionType))for(;J<$;J++)this.setColorTo(this.lines[J],this.data[J].zValue,this.minZ,this.maxZ)}onMouseWheel(V,R,G,U){for(var Z in V/=250,void 0===G?R.shiftKey&&this.options.hasNegative?(this.negativeDelta=Math.min(0,Math.max(-1,this.negativeDelta+Math.min(0.1,Math.max(-0.1,V)))),this.negativeThreshold=-this.minZ*Math.pow(this.negativeDelta,3)):(this.positiveDelta=Math.min(1,Math.max(0,this.positiveDelta+Math.min(0.1,Math.max(-0.1,V)))),this.positiveThreshold=this.maxZ*Math.pow(this.positiveDelta,3)):(!U&&(this.negativeThreshold=-G*this.minZ,this.negativeDelta=-Math.pow(Math.abs(this.negativeThreshold/-this.minZ),1/3)),U&&(this.positiveThreshold=G*this.maxZ,this.positiveDelta=Math.pow(this.positiveThreshold/this.maxZ,1/3))),isNaN(this.positiveDelta)&&(this.positiveDelta=0),isNaN(this.negativeDelta)&&(this.negativeDelta=0),this.zValues)this.zValues[Z].dom.setAttribute('display',0<=Z&&Z>=this.positiveThreshold||0>=Z&&Z<=this.negativeThreshold?'block':'none');this._shapeZoom&&(this.options.hasNegative?(this._shapeZoom.setHandleNeg(-Math.pow(this.negativeDelta,3),this.minZ),this._shapeZoom.showHandleNeg()):this._shapeZoom.hideHandleNeg(),this._shapeZoom.setHandlePos(Math.pow(this.positiveDelta,3),this.maxZ))}setDynamicColor(V){this.lineColors=V,this.styleHasChanged()}setNegative(V){this.options.hasNegative=V,V&&(this.negativeThreshold=0)}setColorTo(V,R,G,U){if(this.lineColors){var Z={h:0,s:0,l:0};for(var K in Z)Z[K]=0<R?this.lineColors.fromPositive[K]+(this.lineColors.toPositive[K]-this.lineColors.fromPositive[K])*(R/U):this.lineColors.fromNegative[K]+(this.lineColors.toNegative[K]-this.lineColors.fromNegative[K])*(R/G);Z.h/=360;var Q=W.hslToRgb(Z.h,Z.s,Z.l);V.setAttribute('stroke','rgb('+Q.join()+')')}}getSymbolForLegend(){if(!this.lineForLegend){var V=document.createElementNS(this.graph.ns,'ellipse');V.setAttribute('cx',7),V.setAttribute('cy',0),V.setAttribute('rx',8),V.setAttribute('ry',3),V.setAttribute('cursor','pointer'),this.lineForLegend=V}return this.applyLineStyle(this.lineForLegend,this.maxZ),this.lineForLegend}applyLineStyle(V,R){V.setAttribute('stroke',this.getLineColor()),V.setAttribute('stroke-width',this.getLineWidth()+(this.isSelected()?2:0)),this.getLineDashArray()&&V.setAttribute('stroke-dasharray',this.getLineDashArray()),V.setAttribute('fill','none'),this.setColorTo(V,R===void 0?V.getAttribute('data-zvalue'):R,this.minZ,this.maxZ),this.hasStyleChanged(!1)}setShapeZoom(V){this._shapeZoom=V}}T.default=B})},function(u,A,S){var C,P,E;(function(T,X){P=[A,S(2),S(3),S(4)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y,I){'use strict';function F(G){return G&&G.__esModule?G:{default:G}}Object.defineProperty(T,'__esModule',{value:!0});var W=F(X),B=function(G){if(G&&G.__esModule)return G;var U={};if(null!=G)for(var Z in G)Object.prototype.hasOwnProperty.call(G,Z)&&(U[Z]=G[Z]);return U.default=G,U}(Y),V=F(I);class R extends V.default{constructor(){super()}init(G,U){var Z=this;if(this.graph=G,this.properties=U||{},this.handles=[],this.options=this.options||{},this.group=document.createElementNS(this.graph.ns,'g'),this._selected=!1,this.createDom(),this._dom&&(this._dom.jsGraphIsShape=this),this.group.jsGraphIsShape=this,this.classes=[],this.transforms=[],this._data.masker){var K=document.createElementNS(this.graph.ns,'mask');this.maskingId=Math.random(),K.setAttribute('id',this.maskingId),this.maskDomWrapper=document.createElementNS(this.graph.ns,'rect'),this.maskDomWrapper.setAttribute('fill','white'),K.appendChild(this.maskDomWrapper);var Q=this._dom.cloneNode();K.appendChild(Q),this.maskDom=Q,this.graph.defs.appendChild(K)}return this.group&&(this._dom&&!this.isHTML()&&this.group.appendChild(this._dom),this.group.addEventListener('mouseover',function(J){Z.handleMouseOver(J)}),this.group.addEventListener('mouseout',function(J){Z.handleMouseOut(J)}),this.group.addEventListener('mousedown',function(J){Z.graph.focus(),Z.handleMouseDown(J)}),this.group.addEventListener('click',function(J){Z.handleClick(J)}),this.group.addEventListener('dblclick',function(J){Z.handleDblClick(J)})),this.initImpl(),this.graph.emit('shapeNew',this),this}initImpl(){}getData(){return this._data}getType(){return this.type}kill(G){this._inDom&&this.graph.removeShapeFromDom(this),G||this.graph._removeShape(this),this.graph.stopElementMoving(this),this.graph.emit('shapeRemoved',this),this.emit('removed',this),this._inDom=!1}hide(){return this.hidden?this:(this.hidden=!0,this.isHTML()?this._dom.style.display='none':this.group.style.display='none',this)}isHidden(){return this.hidden}isVisible(){return!this.hidden}show(){return this.hidden?(this.hidden=!1,this.isHTML()?this._dom.style.display='initial':this.group.style.display='initial',this.redraw(),this):this}addClass(G){return this.classes=this.classes||[],-1==this.classes.indexOf(G)&&this.classes.push(G),this.makeClasses(),this}removeClass(G){return this.classes.splice(this.classes.indexOf(G),1),this.makeClasses(),this}makeClasses(){return this._dom&&this._dom.setAttribute('class',this.classes.join(' ')),this}changed(G,U){return G&&(this.graph.emit(G,this,U),this.emit(G,this,U)),this.emit('changed',this,U),this.graph.emit('shapeChanged',this,U),this}setEventReceptacle(){this.rectEvent||(this.rectEvent=document.createElementNS(this.graph.ns,'rect'),this.rectEvent.setAttribute('pointer-events','fill'),this.rectEvent.setAttribute('fill','transparent'),this.group.appendChild(this.rectEvent),this.rectEvent.jsGraphIsShape=this);var G=this.group.getBBox();this.rectEvent.setAttribute('x',G.x),this.rectEvent.setAttribute('y',G.y-10),this.rectEvent.setAttribute('width',G.width),this.rectEvent.setAttribute('height',G.height+20)}setSerie(G){return this.serie=G,this.xAxis=G.getXAxis(),this.yAxis=G.getYAxis(),this}getSerie(){return this.serie}autoAxes(){return this.xAxis||(this.xAxis=this.graph.getXAxis()),this.yAxis||(this.yAxis=this.graph.getYAxis()),this}setXAxis(G){return this.xAxis=G,this}setYAxis(G){this.yAxis=G}getXAxis(){return this.xAxis||this.autoAxes(),this.xAxis}getYAxis(){return this.yAxis||this.autoAxes(),this.yAxis}setLayer(G){return this.setProp('layer',G),this}getLayer(){var G=this.getProp('layer');return void 0===G?1:G}draw(G,U){return(!this._inDom||G)&&(this.appendToDom(),this._inDom=!0),this.makeLabels(),U||this.redraw(),this.applyStyle(),this}redraw(){return this.hidden?this:(this.position=this.applyPosition(),this.redrawImpl(),!this.position)?this:(this.updateLabels(),this._applyTransforms(),this)}redrawImpl(){}setProperties(G){this.properties=G,Array.isArray(this.properties.position)||(this.properties.position=[this.properties.position]);for(var U=this,Z=0,K=this.properties.position.length,Q;Z<K;Z++)Q=W.default.check(this.properties.position[Z],function(J){return U.getRelativePosition(J)}),this.properties.position[Z]=Q;return this.emit('propertiesChanged'),this}getRelativePosition(G){var U;if(null!==(U=/position([0-9]*)/.exec(G)))return this.getPosition(U[1]);return null===(U=/labelPosition([0-9]*)/.exec(G))?void 0:this.getLabelPosition(U[1])}getProperties(){return this.properties}setProp(G,U,Z){return this.properties=this.properties||{},this.properties[G]=this.properties[G]||[],this.properties[G][Z||0]=U,this.emit('propertyChanged',G),this}getProp(G,U){return(this.properties[G]||[])[U||0]}getProps(G){return this.properties[G]||[]}addProp(G,U){this.properties[G]=this.properties[G]||[],this.properties[G].push(U)}resetProp(G){this.properties[G]=[]}setDom(G,U,Z){!this._dom||Z&&B.hasSavedAttribute(this._dom,G)||this._dom.setAttribute(G,U)}setDomGroup(G,U){this.group&&this.group.setAttribute(G,U)}setStrokeColor(G){return this.setProp('strokeColor',G),this.overwriteSavedProp('stroke',G),this.applySelectedStyle(),this}getStrokeColor(){return this.getProp('strokeColor')}setFillColor(G){return this.setProp('fillColor',G),this.overwriteSavedProp('fill',G),this.applySelectedStyle(),this}getFillColor(){return this.getProp('fillColor')}setFillOpacity(G){return this.setProp('fillOpacity',G),this.overwriteSavedProp('fill-opacity',G),this.applySelectedStyle(),this}setStrokeWidth(G){return this.setProp('strokeWidth',G),this.overwriteSavedProp('stroke-width',G),this.applySelectedStyle(),this}getStrokeWidth(){return this.getProp('strokeWidth')}setStrokeDasharray(G){return this.setProp('strokeDasharray',G),this.overwriteSavedProp('stroke-dasharray',G),this.applySelectedStyle(),this}setAttributes(G){return this.setProp('attributes',G),this}overwriteSavedProp(G,U){B.overwriteDomAttribute(this._dom,G,U)}addAttribute(G,U){var Z={};return Z[G]=U,this.addProp('attributes',Z),this}addTransform(G,U){return this.addProp('transforms',{type:G,arguments:Array.isArray(U)?U:[U]}),this}resetTransforms(){return this.resetProp('transforms'),this}setLabelText(G,U){return this.setProp('labelText',G,U||0),this}setLabelData(G,U){return this.setProp('labelData',text,U||0),this}getLabelText(G,U){return this.getProp('labelText',U||0)}displayLabel(G){return this.setProp('labelVisible',!0,G||0),this}hideLabel(G){return this.setProp('labelVisible',!1,G||0),this}setLabelColor(G,U){return this.setProp('labelColor',G,U||0),this}setLabelFontSize(G,U){return this.setProp('labelFontSize',G,U||0),this}getLabelPosition(G){return this.getProp('labelPosition',G||0)}setLabelPosition(G,U){var K=W.default.check(G,function(Q){return Z.getRelativePosition(Q)}),Z;return this.setProp('labelPosition',K,U||0),this}setLabelAngle(G,U){return this.setProp('labelAngle',G,U||0),this}setLabelBaseline(G,U){return this.setProp('labelBaseline',G,U||0),this}setLabelAnchor(G,U){return this.setProp('labelAnchor',G,U||0),this}setLabelSize(G,U){return this.setProp('labelSize',G,U||0),this}setLabelStrokeColor(G,U){return this.setProp('labelStrokeColor',G,U||0),this}setLabelStrokeWidth(G,U){return this.setProp('labelStrokeWidth',G,U||0),this}setLabelBackgroundColor(G,U){return this.setProp('labelBackgroundColor',G,U||0),this}setLabelBackgroundOpacity(G,U){return this.setProp('labelBackgroundOpacity',G,U||0),this}applyGenericStyle(){this.setDom('fill',this.getProp('fillColor'),!0),this.setDom('fill-opacity',this.getProp('fillOpacity'),!0),this.setDom('stroke',this.getProp('strokeColor'),!0),this.setDom('stroke-width',this.getProp('strokeWidth'),!0),this.setDom('stroke-dasharray',this.getProp('strokeDasharray'),!0);for(var G=this.getProps('attributes'),U=0,Z=G.length;U<Z;U++)for(var K in G[U])this.setDom(K,'function'==typeof G[U][K]?G[U][K].call(this,K):G[U][K],!0);return this._applyTransforms(),this}applyStyle(){return this.applyGenericStyle()}calculatePosition(G){var U;return U=G instanceof W.default?G:this.getPosition(G),U?U&&U.compute?U.compute(this.graph,this.getXAxis(),this.getYAxis(),this.getSerie()):void this.graph.throw():void 0}getPosition(G){var U=this.getProp('position',G||0);return this.setProp('position',U=W.default.check(U),G),U}setPosition(G,U){var Z=this,K=W.default.check(G,function(Q){return Z.getRelativePosition(Q)});return this.setProp('position',K,U||0)}sortPositions(G){return this.getProps('position').sort(G),this}_applyTransforms(){var G=this.getProp('transforms'),U='';if(G&&(G=Array.isArray(G)?G:[G],0!=G.length)){for(var Z=0;Z<G.length;Z++){switch(U+=G[Z].type+'(',G[Z].type){case'translate':let Q=G[Z].arguments[0].compute(this.graph,this.getXAxis(),this.getYAxis(),this.getSerie());U+=Q.x,U+=', ',U+=Q.y;break;case'rotate':if(U+=G[Z].arguments[0],U+=', ',1==this.transforms[Z].arguments.length){var K=this.getPosition(0);U+=K.x+', '+K.y}else U+=W.default.getDeltaPx(G[Z].arguments[1],this.getXAxis()).replace('px',''),U+=', ',U+=W.default.getDeltaPx(G[Z].arguments[2],this.getYAxis()).replace('px','');}U+=') '}return this.setDomGroup('transform',U),this}}makeLabels(){this._labels=this._labels||[],this._labelsBackground=this._labelsBackground||[],this._labels.map(U=>{this.group.removeChild(U)}),this._labelsBackground.map(U=>{this.group.removeChild(U)}),this._labels=[],this._labelsBackground[G]=[];for(var G=0;void 0!==this.getProp('labelText',G);)this._labels[G]||(this._labels[G]=document.createElementNS(this.graph.ns,'text'),this._labels[G].setAttribute('data-label-i',G),this._labels[G].jsGraphIsShape=this,this._labelsBackground[G]=document.createElementNS(this.graph.ns,'rect'),this._labelsBackground[G].setAttribute('data-label-i',G),this._labelsBackground[G].jsGraphIsShape=this,this.group.appendChild(this._labelsBackground[G]),this.group.appendChild(this._labels[G]),this._labels[G].addEventListener('dblclick',U=>{U.stopPropagation(),this.labelDblClickListener(U)}),this._labelsBackground[G].addEventListener('dblclick',U=>{U.stopPropagation(),this.labelDblClickListener(U)})),G++;return this.updateLabels(),this}isLabelEditable(G){return this.getProp('labelEditable',G||0)}updateLabels(){this;this._labels=this._labels||[];for(var U=0,Z=this._labels.length;U<Z;U++)this._applyLabelData(U)}_applyLabelData(G){G=G||0;var U=this.getProp('labelVisible',G);if(!1===U)return this._labels[G].setAttribute('display','none'),void this._labelsBackground[G].setAttribute('display','none');this._labels[G].setAttribute('display','initial'),this._labelsBackground[G].setAttribute('display','initial');var Z=this.calculatePosition(W.default.check(this.getProp('labelPosition',G)));if(!(isNaN(Z.x)||isNaN(Z.y))){'NaNpx'==Z.x||isNaN(Z.x)||'NaN'===Z.x||!1===Z.x||(this._labels[G].setAttribute('x',Z.x),this._labels[G].setAttribute('y',Z.y));var K=this.getProp('labelAngle',G)||0;if(0!=K){var Q=this._labels[G].getAttribute('x'),J=this._labels[G].getAttribute('y');this._labels[G].setAttribute('transform','rotate('+K+' '+Q+' '+J+')')}let $=this.getProp('labelHTMLData',G)||{};for(var ee in console.log($),$)this._labels[G].setAttribute(ee,$[ee]),this._labelsBackground[G].setAttribute(ee,$[ee]);this._labels[G].setAttribute('dominant-baseline',this.getProp('labelBaseline',G)||'no-change'),this._labels[G].textContent=this.getProp('labelText',G),this._labels[G].setAttribute('fill',this.getProp('labelColor',G)||'black'),this._labels[G].setAttribute('font-size',this.getProp('labelSize',G)+'px'||'12px'),this._labels[G].setAttribute('text-anchor',this._getLabelAnchor(G)),this._labels[G].setAttribute('stroke',this.getProp('labelStrokeColor',G)||'black'),this._labels[G].setAttribute('stroke-width',this.getProp('labelStrokeWidth',G)||'0px'),this._labels[G].setAttribute('stroke-location','outside');let te=this._labels[G].getBBox();return this._labelsBackground[G].setAttribute('x',te.x),this._labelsBackground[G].setAttribute('y',te.y),this._labelsBackground[G].setAttribute('width',te.width),this._labelsBackground[G].setAttribute('height',te.height),this._labelsBackground[G].setAttribute('fill',this.getProp('labelBackgroundColor')||'transparent'),this._labelsBackground[G].setAttribute('fill-opacity',this.getProp('labelBackgroundOpacity')||1),this}}emptyLabels(){for(var G=0,U=this._labels.length;G<U;G++)this._labels[G].textContent='';return this}_getLabelAnchor(G){var U=this.getProp('labelAnchor',G);switch(U){case'middle':case'start':case'end':return U;break;case'right':return'end';break;case'left':return'start';break;default:return'start';}}isSelected(){return this._selectStatus||!1}hasHandles(G){return void 0!==G&&this.setProp('handles',G),!!this.getProp('handles')||!!this.getProp('statichandles')}addHandles(){if(!this.isLocked()){if(!this.handlesInDom){this.handlesInDom=!0;for(var G=1;G<this.handles.length;G++)this.handles[G]&&this.group.appendChild(this.handles[G])}return this}}removeHandles(){this.hideHandles(),this.handles=[]}hideHandles(){if(!this.handlesInDom)return this;for(var G=1;G<this.handles.length;G++)this.group.removeChild(this.handles[G]);return this.handlesInDom=!1,this}areHandlesInDom(){return this.handlesInDom}_select(G){return!!this.isSelectable()&&void(this.appendToDom(),this._selectStatus=!0,this.applySelectedStyle(),this.hasHandles()&&!this.hasStaticHandles()&&(this.addHandles(),this.setHandles()),!G&&this.graph.emit('shapeSelected',this))}applySelectedStyle(){if(this._selectStatus){var G=this.getSelectStyle(),U={};for(var Z in G)U[Z]='function'==typeof G[Z]?G[Z].call(this):G[Z];B.saveDomAttributes(this._dom,U,'select')}}_unselect(G){this._selectStatus=!1,B.restoreDomAttributes(this._dom,'select'),this.hasHandles()&&!this.hasStaticHandles()&&this.hideHandles(),G||this.graph.emit('shapeUnselected',this)}getSelectStyle(){return this.selectStyle}setSelectStyle(G){return this.selectStyle=G,this.applySelectedStyle(),this}setStaticHandles(G){this.setProp('staticHandles',G)}hasStaticHandles(){return!!this.getProp('staticHandles')}_createHandles(G,U,Z,K){if(!(this.handles&&0<this.handles.length)){for(var Q=this,J=1;J<=G;J++)(ee=>{var te=this,ie=document.createElementNS(te.graph.ns,U);if(ie.jsGraphIsShape=!0,Z)for(var re in Z)ie.setAttribute(re,Z[re]);ie.addEventListener('mousedown',ae=>{te.isResizable()&&(ae.preventDefault(),ae.stopPropagation(),te.graph.emit('beforeShapeResize',te),this.emit('beforeShapeResize'),!te.graph.prevent(!1)&&(te.resizing=!0,te.handleSelected=ee,te.handleMouseDown(ae)))}),K&&K(te.handles[ee]),te.handles[ee]=ie}).call(this,J);return this.handles}}createHandles(){}handleMouseDownImpl(){}handleMouseMoveImpl(){}handleMouseUpImpl(){}handleCreateImpl(){}handleMouseDown(G){if(!this.isLocked())return(this.isMovable()||this.isResizable())&&this.graph.elementMoving(this),this.getProp('selectOnMouseDown')&&this.graph.selectShape(this),this.isMovable()&&!this.resizing&&(this.graph.emit('beforeShapeMove',self),!this.graph.prevent(!1)&&(this.moving=!0)),this._mouseCoords=this.graph._getXY(G),this.handleMouseDownImpl(G,this._mouseCoords)}handleClick(G){return!!this.isSelectable()&&void(!G.shiftKey&&this.graph.unselectShapes(),this.getProp('selectOnClick')&&(console.log('sel'),this.graph.selectShape(this)))}handleMouseMove(G){if((this.resizing||this.moving)&&!this.isSelected()&&this.graph.selectShape(this),this.graph.emit('beforeShapeMouseMove',this),this.emit('beforeShapeMouseMove'),this.graph.prevent(!1)||!this._mouseCoords)return!1;var U=this.graph._getXY(G),Z=this.getXAxis().getRelVal(U.x-this._mouseCoords.x),K=this.getYAxis().getRelVal(U.y-this._mouseCoords.y);(0!=Z||0!==K)&&(this.preventUnselect=!0),this._mouseCoords=U;var Q=this.handleMouseMoveImpl(G,Z,K,U.x-this._mouseCoords.x,U.y-this._mouseCoords.y);return Q}handleMouseUp(G){return this.moving&&(this.graph.emit('shapeMoved',this),this.emit('shapeMoved')),(this.handleSelected||this.resize)&&(this.graph.emit('shapeResized',this),this.emit('shapeResized')),this.moving=!1,this.resizing=!1,this.handleSelected=!1,this.graph.elementMoving(!1),this.handleMouseUpImpl(G)}handleDblClick(){}handleMouseOver(){!this.getProp('highlightOnMouseOver')||this.moving||this.resizing||this.highlight(),this.graph.emit('shapeMouseOver',this)}handleMouseOut(){this.getProp('highlightOnMouseOver')&&this.unHighlight(),this.graph.emit('shapeMouseOut',this)}lock(){return this.setProp('locked',!0),this}unlock(){return this.setProp('locked',!1),this}isLocked(){return this.getProp('locked')||this.graph.shapesLocked}movable(){this.setProp('movable',!0)}unmovable(){return this.setProp('movable',!1),!1}isMovable(){return this.getProp('movable')}resizable(){this.setProp('resizable',!0)}unresizable(){this.setProp('resizable',!1)}isResizable(){return this.getProp('resizable')}selectable(){this.setProp('selectable',!0)}unselectable(){this.graph.unselectShape(this),this.setProp('selectable',!1)}isSelectable(){return this.getProp('selectable')}highlight(G,U){return G||(G=this.getHighlightAttributes()),U||(U='highlight'),B.saveDomAttributes(this._dom,G,U),this.highlightImpl(),this}unHighlight(G){return G||(G='highlight'),B.restoreDomAttributes(this._dom,G),this.unHighlightImpl(),this}highlightImpl(){}unHighlightImpl(){}getHighlightAttributes(){return this._highlightAttributes}setHighlightAttributes(G){return this._highlightAttributes=G,this}getMaskingID(){return this.maskingId}maskWith(G){const U=G.getMaskingID();U?this._dom.setAttribute('mask','url(#'+U+')'):this._dom.removeAttribute('mask')}updateMask(){}labelDblClickListener(G){var U=parseInt(G.target.getAttribute('data-label-i')),Z=this;if(!isNaN(U)&&this.isLabelEditable(U)){G.preventDefault(),G.stopPropagation();var K=document.createElement('input');K.setAttribute('type','text'),K.setAttribute('value',Z.getProp('labelText',U)),Z.graph.wrapper.prepend(K),K.select(),B.setCSS(K,{position:'absolute',marginTop:parseInt(G.target.getAttribute('y').replace('px',''))+this.graph.getPaddingTop()-10+'px',marginLeft:parseInt(G.target.getAttribute('x').replace('px',''))+this.graph.getPaddingLeft()-50+'px',textAlign:'center',width:'100px'});const Q=Z.getLabelText(U),J=function(){Z.setLabelText(K.value,U),Z._labels[U].textContent=K.value;const $=K.value;K.remove(),K.removeEventListener('blur',J),K=!1,Z.changed('shapeLabelChanged',{previousValue:Q,nextValue:$})};K.addEventListener('blur',J),K.addEventListener('keyup',function($){13===$.keyCode&&J()}),K.addEventListener('keypress',function($){$.stopPropagation()}),K.addEventListener('keydown',function($){$.stopPropagation()}),K.focus()}}appendToDom(){return this._forcedParentDom?this._forcedParentDom.appendChild(this.group):this.graph.appendShapeToDom(this),this}forceParentDom(G){return this._forcedParentDom=G,this}isHTML(){return!1}}R.prototype.computePosition=R.prototype.calculatePosition,R.prototype.showLabel=R.prototype.displayLabel,R.prototype.remove=R.prototype.kill,T.default=R})},function(u,A,S){var C,P,E;(function(T,X){P=[A,S(27)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X){'use strict';Object.defineProperty(T,'__esModule',{value:!0});var I=function(F){return F&&F.__esModule?F:{default:F}}(X);class O extends I.default{createDom(){this._dom=document.createElementNS(this.graph.ns,'path')}createHandles(){this._createHandles(2,'line',{'stroke-width':'3',stroke:'transparent','pointer-events':'stroke',cursor:'ew-resize'})}handleMouseMoveImpl(F,W){if(!this.isLocked()){if(this.moving)this.getPosition(0).deltaPosition('x',W,this.getXAxis()),this.getPosition(1).deltaPosition('x',W,this.getXAxis());else if(this.serie&&this.handleSelected){this.resizingPosition=1==this.handleSelected?this.getPosition(0):this.getPosition(1);var V=this.serie.searchClosestValue(this.getXAxis().getVal(this.graph._getXY(F).x-this.graph.getPaddingLeft()));if(!V)return;this.resizingPosition.x!=V.xMin&&(this.preventUnselect=!0),this.resizingPosition.x=V.xMin}else this.handleSelected&&(this.resizingPosition=1==this.handleSelected?this.getPosition(0):this.getPosition(1),this.resizingPosition.deltaPosition('x',W,this.getXAxis()));this.applyPosition()}}applyPosition(){if(this.serie){var F=this.computePosition(0),W=this.computePosition(1),B=Math.abs(F.x-W.x),V=Math.min(F.x,W.x);if(2>B||0>V+B||V>this.graph.getDrawingWidth())return this.setDom('d',''),!1;var R=this.serie.searchClosestValue(this.getPosition(0).x),G=this.serie.searchClosestValue(this.getPosition(1).x),ae=0,se=Number.MAX_VALUE,U,Z,K,Q,J,$,V,ee;if(!R||!G)return!1;for(R.xBeforeIndex>G.xBeforeIndex&&(U=R,R=G,G=U),this.counter=0,Z=R.dataIndex;Z<=G.dataIndex;Z++){for(this.currentLine='',Q=Z==R.dataIndex?R.xBeforeIndexArr:0,J=Z==G.dataIndex?G.xBeforeIndexArr:this.serie.data[Z].length,$=0,Q==J&&J++,K=Q;K<=J;K+=2)V=this.serie.getX(this.serie.data[Z][K+0]),ee=this.serie.getY(this.serie.data[Z][K+1]),ae=Math.max(this.serie.data[Z][K+1],ae),se=Math.min(this.serie.data[Z][K+1],se),K==Q&&(this.firstX=V,this.firstY=ee),this.currentLine+=0<$?' L '+V+' '+ee+' ':' M '+V+' '+ee+' ',$++;if(this.lastX=V,this.lastY=ee,!this.firstX||!this.firstY||!this.lastX||!this.lastY)return;this.currentLine+=' V '+this.getYAxis().getPx(0)+' H '+this.firstX+' z',this.setDom('d',this.currentLine)}return this.maxY=this.serie.getY(ae),this.setHandles(),this.changed(),!0}}setHandles(){if(this.firstX){var F=this.computePosition(0),W=this.computePosition(1);F.x<W.x?(this.handles[1].setAttribute('x1',this.firstX),this.handles[1].setAttribute('x2',this.firstX),this.handles[2].setAttribute('x1',this.lastX),this.handles[2].setAttribute('x2',this.lastX)):(this.handles[1].setAttribute('x1',this.lastX),this.handles[1].setAttribute('x2',this.lastX),this.handles[2].setAttribute('x1',this.firstX),this.handles[2].setAttribute('x2',this.firstX)),this.handles[1].setAttribute('y1',this.getYAxis().getMaxPx()),this.handles[1].setAttribute('y2',this.serie.getY(0)),this.handles[2].setAttribute('y1',this.getYAxis().getMaxPx()),this.handles[2].setAttribute('y2',this.serie.getY(0))}}}T.default=O})},function(u,A,S){var C,P,E;(function(T,X){P=[A,S(30)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X){'use strict';Object.defineProperty(T,'__esModule',{value:!0});var I=function(F){return F&&F.__esModule?F:{default:F}}(X);class O extends I.default{constructor(F){super(F)}createDom(){this._dom=document.createElementNS(this.graph.ns,'line'),this._dom.setAttribute('marker-end','url(#arrow'+this.graph._creation+')'),this.createHandles(this.nbHandles,'rect',{transform:'translate(-3 -3)',width:6,height:6,stroke:'black',fill:'white',cursor:'nwse-resize'}),this.setStrokeColor('black'),this.setStrokeWidth(1)}}T.default=O})},function(u,A,S){var C,P,E;(function(T,X){P=[A,S(27)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X){'use strict';Object.defineProperty(T,'__esModule',{value:!0});var I=function(F){return F&&F.__esModule?F:{default:F}}(X);class O extends I.default{constructor(F,W){super(F,W)}createDom(){this._dom=document.createElementNS(this.graph.ns,'line'),this.setStrokeColor('black'),this.setStrokeWidth(1)}createHandles(){this._createHandles(2,'rect',{transform:'translate(-3 -3)',width:6,height:6,stroke:'black',fill:'white',cursor:'nwse-resize'})}applyPosition(){var F=this.calculatePosition(0),W=this.calculatePosition(1);if(F&&F.x&&F.y)return this.setDom('x2',F.x),this.setDom('y2',F.y),this.setDom('y1',W.y),this.setDom('x1',W.x),this.currentPos2x=W.x,this.currentPos2y=W.y,this.currentPos1x=F.x,this.currentPos1y=F.y,!0}handleMouseMoveImpl(F,W,B){if(!this.isLocked()){var G=this.getPosition(0),U=this.getPosition(1),Z;if(1==this.handleSelected?Z=G:2==this.handleSelected&&(Z=U),Z&&(!this._data.vertical&&Z.deltaPosition('x',W,this.getXAxis()),!this._data.horizontal&&Z.deltaPosition('y',B,this.getYAxis())),this.moving&&(G.x&&G.deltaPosition('x',W,this.getXAxis()),G.y&&G.deltaPosition('y',B,this.getYAxis()),U.x&&U.deltaPosition('x',W,this.getXAxis()),U.y&&U.deltaPosition('y',B,this.getYAxis())),this._data.forcedCoords){var K=this._data.forcedCoords;void 0!==K.y&&('function'==typeof K.y?U.y=G.y=K.y(this):(U.y=K.y,G.y=K.y)),void 0!==K.x&&('function'==typeof K.x?U.x=G.x=K.x(this):(U.x=K.x,G.x=K.x))}return this.rectEvent&&this.setEventReceptacle(),this.redraw(),this.changed(),this.setHandles(),!0}}setHandles(){!this.areHandlesInDom()||isNaN(this.currentPos1x)||(this.handles[1].setAttribute('x',this.currentPos1x),this.handles[1].setAttribute('y',this.currentPos1y),this.handles[2].setAttribute('x',this.currentPos2x),this.handles[2].setAttribute('y',this.currentPos2y))}setEventReceptacle(){this.currentPos1x&&(!this.rectEvent&&(this.rectEvent=document.createElementNS(this.graph.ns,'line'),this.rectEvent.setAttribute('pointer-events','stroke'),this.rectEvent.setAttribute('stroke','transparent'),this.rectEvent.jsGraphIsShape=this,this.group.appendChild(this.rectEvent)),this.rectEvent.setAttribute('x1',this.currentPos1x),this.rectEvent.setAttribute('y1',this.currentPos1y),this.rectEvent.setAttribute('x2',this.currentPos2x),this.rectEvent.setAttribute('y2',this.currentPos2y),this.rectEvent.setAttribute('stroke-width',this.getProp('strokeWidth')+2))}}T.default=O})},function(u,A,S){var C,P,E;(function(T,X){P=[A,S(27)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X){'use strict';Object.defineProperty(T,'__esModule',{value:!0});var I=function(F){return F&&F.__esModule?F:{default:F}}(X);class O extends I.default{constructor(F,W){super(F,W)}createDom(){return!1}applyPosition(){return!0}}T.default=O})},function(u,A,S){var C,P,E;(function(T,X){P=[A,S(27)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X){'use strict';Object.defineProperty(T,'__esModule',{value:!0});var I=function(F){return F&&F.__esModule?F:{default:F}}(X);class O extends I.default{constructor(F,W){super(F,W)}createDom(){this._dom=document.createElementNS(this.graph.ns,'path'),this.getStrokeColor()||this.setStrokeColor('black'),this.getStrokeWidth()==void 0&&this.setStrokeWidth(1)}createHandles(){}setPointsPx(F){return this.setProp('pxPoints',F),this}applyPosition(){let W=this.computePosition(0),F;if(F=this.getProp('pxPoints'))F=' M '+W.x+' '+W.y+' '+F,this.setDom('d',F);else if(this.points){var B,V;this.serie?(B=this.serie.getXAxis(),V=this.serie.getYAxis()):this.xAxis&&this.yAxis&&(B=this.xAxis,V=this.yAxis),this.setDom('d','M '+this.points.map(function(R){return B.getPx(R[0])+', '+V.getPx(R[1])}).join(' L '))}return this.changed(),!0}}T.default=O})},function(u,A,S){var C,P,E;(function(T,X){P=[A,S(27),S(2)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y){'use strict';function I(B){return B&&B.__esModule?B:{default:B}}Object.defineProperty(T,'__esModule',{value:!0});var O=I(X),F=I(Y);class W extends O.default{constructor(B,V){super(B,V),this.nbHandles=2}createDom(){this._dom=document.createElementNS(this.graph.ns,'path'),this._dom.setAttribute('pointer-events','stroke')}initImpl(){this.setFillColor('transparent'),this.setStrokeColor('black')}createHandles(){this._createHandles(2,'rect',{transform:'translate(-3 -3)',width:6,height:6,stroke:'black',fill:'white'}),this.handles[1].setAttribute('fill','red')}xor(B,V){return B&&!V||!B&&V}applyPosition(){let U=this.getAxis(),Z=[],K='',Q=this.getProp('baseLine',0)||300,B,V,R,G,J;if(!this.serie)throw'No serie exists for this shape';let $=this.getPosition(0),ee=this.getPosition(1);if($.x<this.serie.getXAxis().getCurrentMin()&&ee.x<this.serie.getXAxis().getCurrentMin()||$.x>this.serie.getXAxis().getCurrentMax()&&ee.x>this.serie.getXAxis().getCurrentMax())return this.setDom('d',''),this.emptyLabels(),!1;this.showLabel(0);let te=0,re=this.serie.getWaveform(),ie;if(re){let ae=re.getIndexFromX($[U],!0,Math.floor),se=re.getIndexFromX(ee[U],!0,Math.ceil),oe=!1,ne;ae==se&&('aggregate'==re.getReductionType()?se+=4:se++),se<ae&&(ne=ae,ae=se,se=ne,oe=!0);let me=re.getDataInUse(),be=!0,le,pe,de,ge,ue,he,ce,xe,fe,ye;for('aggregate'==re.getReductionType()&&(be=!1),(!re.getXMonotoneousAscending()||0)&&(re.getXMonotoneousAscending()||1)?(ie=ae,fe=!1,ye=1):(ie=se,fe=!0,ye=-1),console.log(ae,se);fe?ie>=ae:ie<=se;ie+=ye){if(R=re.getX(ie,!0),G=re.getY(ie,!0),B=this.serie.getX(R),V=this.serie.getY(G),te+=re.getY(ie,!0),le||(le=B,pe=V,de=re.getX(ie),ge=re.getY(ie)),void 0==ue){ue=B,ce=V,he=re.getX(ie),xe=re.getY(ie);continue}B!=ue||V!=ce,ue=B,ce=V,Z.push([B,V,te]),he=R}he=!1,xe=!1,ue=!1,ce=!1,0==te&&(te=1),this._sumVal=re.integrate($.x,ee.x),J=this.ratio?this.ratio*(this.sumVal/te):200/te;let Ae;if(0!=Z.length){for(var Me=0,ke=Z.length;Me<ke;Me++){if(Ae=Q-Z[Me][2]*J,0<Me&&(Z[Me-1][2]>te/2&&Z[Me][2]<=te/2||Z[Me-1][2]<te/2&&Z[Me][2]>=te/2)){let Se=Q-(Z[Me-1][2]+Z[Me][2])/2*J;this.setPosition({x:Z[Me][0]+'px',y:Se+'px'},3),this.setLabelPosition(this.getPosition(3),0)}K+=' L '+Z[Me][0]+', '+Ae+' ',this.lastPointX=Z[Me][0],this.lastPointY=Ae}return this.points=Z,this._sum=te,K=this.serie.isFlipped()?' M '+Q+', '+le+' '+K:' M '+le+', '+Q+' '+K,this.firstPointX=le,this.firstPointY=Q,this.setDom('d',K),this.firstX=le,this.firstY=pe,this.ratioLabel&&this.updateIntegralValue(this.ratioLabel)||this.updateLabels(),this.changed(),this.handleCondition=!this.xor(-1==ye,oe),this.setHandles(),this.updateIntegralValue(),!0}}}updateIntegralValue(B=this.ratioLabel){B&&(this.ratioLabel=B),this.setLabelText(B?(Math.round(100*this.sumVal*B)/100).toPrecision(3):'N/A',0),this.updateLabels()}getAxis(){return this._data.axis||'x'}set ratio(B){this._ratio=B}get ratio(){return this._ratio}get sum(){return this._sum}get sumVal(){return this._sumVal}selectStyle(){this.setDom('stroke-width','2px')}selectHandles(){}setHandles(){void 0!=this.points&&this.isSelected()&&(this.addHandles(),this.handleCondition?(this.handles[1].setAttribute('x',this.firstPointX),this.handles[1].setAttribute('y',this.firstPointY),this.handles[2].setAttribute('x',this.lastPointX),this.handles[2].setAttribute('y',this.lastPointY)):(this.handles[2].setAttribute('x',this.firstPointX),this.handles[2].setAttribute('y',this.firstPointY),this.handles[1].setAttribute('x',this.lastPointX),this.handles[1].setAttribute('y',this.lastPointY)))}handleMouseMoveImpl(B,V){if(!this.isLocked()){var Z=this.getPosition(0),K=this.getPosition(1),Q;return 1==this.handleSelected?Q=Z:2==this.handleSelected&&(Q=K),Q&&!this._data.vertical&&Q.deltaPosition('x',V,this.getXAxis()),this.moving&&(Z.x&&Z.deltaPosition('x',V,this.getXAxis()),K.x&&K.deltaPosition('x',V,this.getXAxis())),this.rectEvent&&this.setEventReceptacle(),this.redraw(),this.changed(),!0}}}T.default=W})},function(u,A,S){var C,P,E;(function(T,X){P=[A,S(35)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X){'use strict';Object.defineProperty(T,'__esModule',{value:!0});var I=function(F){return F&&F.__esModule?F:{default:F}}(X);class O extends I.default{constructor(F,W){super(F,W),this.nbHandles=4}createDom(){this._dom=document.createElementNS(this.graph.ns,'rect'),this._dom.element=this,this.createHandles(this.nbHandles,'rect',{transform:'translate(-3 -3)',width:6,height:6,stroke:'black',fill:'white',cursor:'nwse-resize'})}redrawImpl(){this.setPosition(),this.setHandles(),this.setBindableToDom(this._dom)}}T.default=O})},function(u,A,S){var C,P,E;(function(T,X){P=[A,S(27),S(3)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y){'use strict';Object.defineProperty(T,'__esModule',{value:!0});var F=function(V){return V&&V.__esModule?V:{default:V}}(X),W=function(V){if(V&&V.__esModule)return V;var R={};if(null!=V)for(var G in V)Object.prototype.hasOwnProperty.call(V,G)&&(R[G]=V[G]);return R.default=V,R}(Y);class B extends F.default{constructor(V,R){super(V,R)}createDom(){this;return this._dom=document.createElementNS(this.graph.ns,'rect'),this.setStrokeColor('black'),this.setStrokeWidth(1),this.setFillColor('transparent'),this}createHandles(){if(this.hasHandles()){var V=this.getProp('handles');switch('object'!=typeof V&&(V={}),V.type||(V.type='corners'),V.type){case'sides':W.extend(V,{sides:{top:!0,bottom:!0,left:!0,right:!0}});var R=0;for(var G in V.sides)V.sides[G]&&R++;this._createHandles(R,'g').map(function(U){var Z=document.createElementNS(self.graph.ns,'rect');Z.setAttribute('x','-3'),Z.setAttribute('width','6'),Z.setAttribute('y','-6'),Z.setAttribute('height','12'),Z.setAttribute('stroke','black'),Z.setAttribute('fill','white'),Z.setAttribute('cursor','pointer'),U.appendChild(Z)});var R=1;for(var G in V.sides)V.sides[G]&&(this.handles[G]=this['handle'+R],this.sides[R]=G,R++);break;case'corners':this._createHandles(4,'rect',{transform:'translate(-3 -3)',width:6,height:6,stroke:'black',fill:'white'}),this.handles&&(this.handles[2].setAttribute('cursor','nesw-resize'),this.handles[4].setAttribute('cursor','nesw-resize'),this.handles[1].setAttribute('cursor','nwse-resize'),this.handles[3].setAttribute('cursor','nwse-resize'));}return this}}applyPosition(){var V=this.computePosition(0),R=this.computePosition(1),G,U,Z,K;return V.x<R.x?(G=V.x,Z=R.x-V.x):(G=R.x,Z=V.x-R.x),V.y<R.y?(U=V.y,K=R.y-V.y):(U=R.y,K=V.y-R.y),this.currentX=G,this.currentY=U,this.currentW=Z,this.currentH=K,isNaN(G)||isNaN(U)||!1===G||!1===U?!1:(this.setDom('width',Z),this.setDom('height',K),this.setDom('x',G),this.setDom('y',U),this.setHandles(),this.updateMask(),!0)}handleMouseMoveImpl(V,R,G){var K=this.getProp('handles');if(this.moving||this.handleSelected){var Q=this.getPosition(0),J=this.getPosition(1),$=this.getXAxis().isFlipped(),ee=this.getYAxis().isFlipped(),te=Q.x,ie=Q.y,re=J.x,ae=J.y;if(this.moving)Q.deltaPosition('x',R,this.getXAxis()),Q.deltaPosition('y',G,this.getYAxis()),J.deltaPosition('x',R,this.getXAxis()),J.deltaPosition('y',G,this.getYAxis());else switch(K.type){case'sides':switch(this.sides[this.handleSelected]){case'left':Q.deltaPosition('x',R,this.getXAxis());break;case'right':J.deltaPosition('x',R,this.getXAxis());break;case'top':Q.deltaPosition('y',G,this.getYAxis());break;case'bottom':J.deltaPosition('y',G,this.getYAxis());}break;case'corners':default:1==this.handleSelected?(Q.deltaPosition('x',R,this.getXAxis()),Q.deltaPosition('y',G,this.getYAxis())):2==this.handleSelected?(J.deltaPosition('x',R,this.getXAxis()),Q.deltaPosition('y',G,this.getYAxis())):3==this.handleSelected?(J.deltaPosition('y',G,this.getYAxis()),J.deltaPosition('x',R,this.getXAxis())):4==this.handleSelected&&(Q.deltaPosition('x',R,this.getXAxis()),J.deltaPosition('y',G,this.getYAxis()));}return this.redraw(),this.changed(),this.setHandles(),!0}}setHandles(){if(!this.isLocked()&&(this.isSelectable()||this._staticHandles)&&this.handlesInDom){var V=this.computePosition(0),R=this.computePosition(1),G=this.getProp('handles');switch(G.type){case'sides':this.handles.left&&this.handles.left.setAttribute('transform','translate('+this.currentX+' '+(this.currentY+this.currentH/2)+')'),this.handles.right&&this.handles.right.setAttribute('transform','translate( '+(this.currentX+this.currentW)+' '+(this.currentY+this.currentH/2)+')'),this.handles.top&&this.handles.top.setAttribute('transform','translate( '+(this.currentX+this.currentW/2)+' '+this.currentY+')'),this.handles.bottom&&this.handles.bottom.setAttribute('transform','translate( '+(this.currentX+this.currentW/2)+' '+(this.currentY+this.currentH)+')');break;case'corners':default:this.handles[1].setAttribute('x',V.x),this.handles[1].setAttribute('y',V.y),this.handles[2].setAttribute('x',R.x),this.handles[2].setAttribute('y',V.y),this.handles[3].setAttribute('x',R.x),this.handles[3].setAttribute('y',R.y),this.handles[4].setAttribute('x',V.x),this.handles[4].setAttribute('y',R.y);}}}}T.default=B})},function(u,A,S){var C,P,E;(function(T,X){P=[A,S(27)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X){'use strict';Object.defineProperty(T,'__esModule',{value:!0});var I=function(F){return F&&F.__esModule?F:{default:F}}(X);class O extends I.default{constructor(F,W){super(F,W),this.nbHandles=1}get width(){return this.options.width||10}set width(F=10){this.options.width=F}createDom(){this._dom=document.createElementNS(this.graph.ns,'path'),this._dom.setAttribute('d','M -'+this.width/2+' 0 h '+this.width+' m -'+this.width/2+' -'+this.width/2+' v '+this.width+'')}createHandles(){this._createHandles(this.nbHandles,'rect',{transform:'translate(-3 -3)',width:6,height:6,stroke:'black',fill:'white',cursor:'nwse-resize'})}applyPosition(){var F=this.calculatePosition(0);if(F&&F.x&&F.y)return this.setDom('transform','translate( '+F.x+', '+F.y+')'),this.currentPos1x=F.x,this.currentPos1y=F.y,!0}redrawImpl(){this.setHandles()}handleCreateImpl(){}handleMouseDownImpl(){return this.moving=!0,!0}handleMouseUpImpl(){return this.triggerChange(),!0}handleMouseMoveImpl(F,W,B){if(!this.isLocked()){var G=this.getFromData('pos');return this.moving&&(G.x=this.graph.deltaPosition(G.x,W,this.getXAxis()),G.y=this.graph.deltaPosition(G.y,B,this.getYAxis())),this.redrawImpl(),!0}}createHandles(){this._createHandles(1,'rect',{transform:'translate(-3 -3)',width:6,height:6,stroke:'black',fill:'white',cursor:'nwse-resize'})}setHandles(){!this.areHandlesInDom()||isNaN(this.currentPos1x)||(this.handles[1].setAttribute('x',this.currentPos1x),this.handles[1].setAttribute('y',this.currentPos1y))}selectStyle(){this.setDom('stroke','red'),this.setDom('stroke-width','2')}}T.default=O})},function(u,A,S){var C,P,E;(function(T,X){P=[A,S(30)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X){'use strict';Object.defineProperty(T,'__esModule',{value:!0});var I=function(F){return F&&F.__esModule?F:{default:F}}(X);class O extends I.default{constructor(F){super(F),this.lineHeight=6}createDom(){this._dom=document.createElementNS(this.graph.ns,'line'),this.line1=document.createElementNS(this.graph.ns,'line'),this.line2=document.createElementNS(this.graph.ns,'line'),this.line3=document.createElementNS(this.graph.ns,'line'),this.rectBoundary=document.createElementNS(this.graph.ns,'path'),this.rectBoundary.setAttribute('fill','transparent'),this.rectBoundary.setAttribute('stroke','none'),this.rectBoundary.setAttribute('pointer-events','fill'),this.rectBoundary.jsGraphIsShape=!0,this.group.appendChild(this.rectBoundary),this.group.appendChild(this.line1),this.group.appendChild(this.line2),this.group.appendChild(this.line3),this._dom.element=this}createHandles(){this._createHandles(3,'rect',{transform:'translate(-3 -3)',width:6,height:6,stroke:'black',fill:'white',cursor:'nwse-resize'})}redrawImpl(){this.line1.setAttribute('stroke',this.getStrokeColor()),this.line2.setAttribute('stroke',this.getStrokeColor()),this.line3.setAttribute('stroke',this.getStrokeColor()),this.line1.setAttribute('stroke-width',this.getStrokeWidth()),this.line2.setAttribute('stroke-width',this.getStrokeWidth()),this.line3.setAttribute('stroke-width',this.getStrokeWidth()),this.setHandles(),this.redrawLines()}redrawLines(){var F=this.computePosition(0),W=this.computePosition(1),B=this.computePosition(2);if(F.x&&W.x&&B.x&&this.posYPx){var V=this.lineHeight;this.rectBoundary.setAttribute('d','M '+F.x+' '+(this.posYPx-V)+' v '+2*V+' H '+W.x+' v '+-2*V+'z'),this.line1.setAttribute('x1',F.x),this.line1.setAttribute('x2',F.x),this.line2.setAttribute('x1',W.x),this.line2.setAttribute('x2',W.x),this.line3.setAttribute('x1',B.x),this.line3.setAttribute('x2',B.x),this._dom.setAttribute('x1',F.x),this._dom.setAttribute('x2',W.x),this.redrawY(V)}return this}redrawY(){if(!this.posYPx)return this;var F=this.lineHeight;return this.line1.setAttribute('y1',this.posYPx-F),this.line1.setAttribute('y2',this.posYPx+F),this.line2.setAttribute('y1',this.posYPx-F),this.line2.setAttribute('y2',this.posYPx+F),this.line3.setAttribute('y1',this.posYPx-F),this.line3.setAttribute('y2',this.posYPx+F),this._dom.setAttribute('y1',this.posYPx),this._dom.setAttribute('y2',this.posYPx),this}setHandles(){if(this.posYPx){var F=this.computePosition(0),W=this.computePosition(1),B=this.computePosition(2);F.x&&W.x&&B.x&&(this.handles[1].setAttribute('x',F.x),this.handles[1].setAttribute('y',this.posYPx),this.handles[2].setAttribute('x',W.x),this.handles[2].setAttribute('y',this.posYPx),this.handles[3].setAttribute('x',B.x),this.handles[3].setAttribute('y',this.posYPx))}}setY(F){return this.posYPx=F,this}setLineHeight(F){this.lineHeihgt=F}handleMouseMoveImpl(F,W){if(!this.isLocked()){var V=this.getPosition(0),R=this.getPosition(1),G=this.getPosition(2);switch(this.handleSelected){case 1:V.deltaPosition('x',W,this.getXAxis()),(Math.abs(G.x-R.x)>Math.abs(R.x-V.x)||Math.abs(G.x-V.x)>Math.abs(R.x-V.x))&&(G.x=V.x+0.1*(R.x-V.x));break;case 2:R.deltaPosition('x',W,this.getXAxis()),(Math.abs(G.x-R.x)>Math.abs(R.x-V.x)||Math.abs(G.x-V.x)>Math.abs(R.x-V.x))&&(G.x=R.x+0.1*(V.x-R.x));break;case 3:if(G.deltaPosition('x',W,this.getXAxis()),Math.abs(G.x-R.x)>Math.abs(R.x-V.x)||Math.abs(G.x-V.x)>Math.abs(R.x-V.x))return;}this.setLabelPosition({y:this.getLabelPosition(0).y,x:G.x}),this.updateLabels(),this.redrawLines(),this.setHandles()}}applyPosition(){return this.redrawLines(),!0}}T.default=O})},function(u,A,S){var C,P,E;(function(T,X){P=[A,S(3),S(27)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y){'use strict';Object.defineProperty(T,'__esModule',{value:!0});var O=function(W){return W&&W.__esModule?W:{default:W}}(Y);class F extends O.default{constructor(W,B){super(W,B)}createDom(){this._dom=document.createElement('div'),this._dom.setAttribute('style','position: absolute');let W=document.createElement('div');this._dom.appendChild(W),this.div=W}createHandles(){}setHeight(W){this.setProp('height',W)}setWidth(W){this.setProp('width',W)}setContent(W){this.setProp('content',W)}setRenderer(W){this._renderer=W}redraw(){this._renderer?this._renderer(this.div):this.div.innerHTML=this.getProp('content'),super.redraw(...arguments)}applyPosition(){var W=this.calculatePosition(0);if(W&&(0,X.isNumeric)(W.x)&&(0,X.isNumeric)(W.y))return this._dom.style.left=W.x+'px',this._dom.style.top=W.y+'px',this.currentPosX=W.x,this.currentPosY=W.y,!0}handleMouseMoveImpl(){return!0}setHandles(){this.areHandlesInDom()&&isNaN(this.currentPos1x)}isHTML(){return!0}}T.default=F})},function(u,A,S){var C,P,E;(function(T,X){P=[A,S(4)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X){'use strict';Object.defineProperty(T,'__esModule',{value:!0});var I=function(F){return F&&F.__esModule?F:{default:F}}(X);class O extends I.default{static defaults(){return{}}constructor(F){super(...arguments),this.options=F}init(F){this.graph=F}onMouseDown(){}onMouseUp(){}onMouseMove(){}}T.default=O})},function(u,A,S){var C,P,E;(function(T,X){P=[A,S(39)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X){'use strict';Object.defineProperty(T,'__esModule',{value:!0});var I=function(F){return F&&F.__esModule?F:{default:F}}(X);class O extends I.default{static defaults(){return{dragX:!0,dragY:!0,persistanceX:!1,persistanceY:!1}}init(F){this.graph=F,this.time=null,this.totaltime=2e3}onMouseDown(F,W,B){return this._draggingX=W,this._draggingY=B,this._lastDraggingX=this._draggingX,this._lastDraggingY=this._draggingY,this.stopAnimation=!0,this.moved=!1,!0}onMouseMove(F,W,B){var G=W-this._draggingX,U=B-this._draggingY;this.options.dragX&&F._applyToAxes(function(Z){Z.setCurrentMin(Z.getVal(Z.getMinPx()-G)),Z.setCurrentMax(Z.getVal(Z.getMaxPx()-G))},!1,!0,!1),this.options.dragY&&F._applyToAxes(function(Z){Z.setCurrentMin(Z.getVal(Z.getMinPx()-U)),Z.setCurrentMax(Z.getVal(Z.getMaxPx()-U))},!1,!1,!0),this._lastDraggingX=this._draggingX,this._lastDraggingY=this._draggingY,this._draggingX=W,this._draggingY=B,this.moved=!0,this.time=Date.now(),this.emit('dragging'),F.draw(!0)}onMouseUp(F,W,B){var G=Date.now()-this.time;return W==this._lastDraggingX||B==this._lastDraggingY?void(this.moved&&this.emit('dragged')):(this.speedX=(W-this._lastDraggingX)/G,this.speedY=(B-this._lastDraggingY)/G,isNaN(this.speedX)||isNaN(this.speedY)?void this.emit('dragged'):void(F._applyToAxes(function(U){U._pluginDragMin=U.getCurrentMin(),U._pluginDragMax=U.getCurrentMax()},!1,!0,!0),this.stopAnimation=!1,this.accelerationX=-this.speedX/this.totaltime,this.accelerationY=-this.speedY/this.totaltime,this.options.persistanceX||this.options.persistanceY?this._persistanceMove(F):this.emit('dragged')))}_persistanceMove(F){var W=this;return W.stopAnimation?void W.emit('dragged'):void window.requestAnimationFrame(function(){var B=Date.now()-W.time,V=(0.5*W.accelerationX*B+W.speedX)*B,R=(0.5*W.accelerationY*B+W.speedY)*B;W.options.persistanceX&&F._applyToAxes(function(G){G.setCurrentMin(-G.getRelVal(V)+G._pluginDragMin),G.setCurrentMax(-G.getRelVal(V)+G._pluginDragMax),G.cacheCurrentMin(),G.cacheCurrentMax(),G.cacheInterval()},!1,!0,!1),W.options.persistanceY&&F._applyToAxes(function(G){G.setCurrentMin(-G.getRelVal(R)+G._pluginDragMin),G.setCurrentMax(-G.getRelVal(R)+G._pluginDragMax),G.cacheCurrentMin(),G.cacheCurrentMax(),G.cacheInterval()},!1,!1,!0),F.draw(),B<W.totaltime?(W.emit('dragging'),W._persistanceMove(F)):W.emit('dragged')})}}T.default=O})},function(u,A,S){var C,P,E;(function(T,X){P=[A,S(39),S(3)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y){'use strict';Object.defineProperty(T,'__esModule',{value:!0});var F=function(V){return V&&V.__esModule?V:{default:V}}(X),W=function(V){if(V&&V.__esModule)return V;var R={};if(null!=V)for(var G in V)Object.prototype.hasOwnProperty.call(V,G)&&(R[G]=V[G]);return R.default=V,R}(Y);class B extends F.default{constructor(){super(...arguments)}init(V,R){super.init(V,R),this.shapeType=R.type}setShape(V){this.shapeInfo.shapeType=V}onMouseDown(V,R,G,U){if(this.shapeType||this.options.url){console.log('down');var K=this,Q=this,J,$;this.count=this.count||0,R-=V.getPaddingLeft(),G-=V.getPaddingTop(),J=V.getXAxis().getVal(R),$=V.getYAxis().getVal(G);var ee={position:[{x:J,y:$},{x:J,y:$}],onChange:function(re){V.triggerEvent('onAnnotationChange',re)},locked:!1,selectable:!0,resizable:!0,movable:!0};let te=this.options.properties;if(W.extend(!0,ee,this.options),this.emit('beforeNewShape',U,ee),!this.graph.prevent(!1)){var ie=V.newShape(ee.type,ee,!1,te);this.emit('createdShape',U,ie),ie&&(K.currentShape=ie,K.currentShapeEvent=U),V.once('mouseUp',()=>{console.log(this.currentShape),this.currentShape||K.emit('newShape',U,ie)})}}}onMouseMove(V,R,G,U){if(this.currentShape){console.log('mv'),this.count++;var Z=this.currentShape;this.currentShape=!1,V.selectedSerie&&!Z.serie&&Z.setSerie(V.selectedSerie),Z.resizing=!0,Z.options&&Z.options.onCreate&&Z.options.onCreate.call(Z),Z.draw(),V.selectShape(Z),Z.handleMouseDown(this.currentShapeEvent,!0),Z.handleSelected=this.options.handleSelected||1,Z.handleMouseMove(U,!0)}}onMouseUp(){this.currentShape&&(this.currentShape.kill(),this.currentShape=!1)}}T.default=B})},function(u,A,S){var C,P,E;(function(T,X){P=[A,S(3),S(39)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y){'use strict';Object.defineProperty(T,'__esModule',{value:!0});var F=function(V){if(V&&V.__esModule)return V;var R={};if(null!=V)for(var G in V)Object.prototype.hasOwnProperty.call(V,G)&&(R[G]=V[G]);return R.default=V,R}(X),W=function(V){return V&&V.__esModule?V:{default:V}}(Y);class B extends W.default{constructor(){super(...arguments)}init(V){this._path=document.createElementNS(V.ns,'path'),F.setAttributeTo(this._path,{display:'none',fill:'rgba(0,0,0,0.1)',stroke:'rgba(0,0,0,1)','shape-rendering':'crispEdges',x:0,y:0,height:0,width:0,d:''}),this.graph=V,V.dom.appendChild(this._path)}setSerie(V){this.serie=V}onMouseDown(V,R,G){this.serie&&(this.path='M '+R+' '+G+' ',this.currentX=R,this.currentY=G,this.xs=[this.serie.getXAxis().getVal(R-V.getPaddingLeft())],this.ys=[this.serie.getYAxis().getVal(G-V.getPaddingTop())],this._path.setAttribute('d',''),this._path.setAttribute('display','block'))}onMouseMove(V,R,G){25<Math.pow(R-this.currentX,2)+Math.pow(G-this.currentY,2)&&(this.path+=' L '+R+' '+G+' ',this.currentX=R,this.currentY=G,this.xs.push(this.serie.getXAxis().getVal(R-V.getPaddingLeft())),this.ys.push(this.serie.getYAxis().getVal(G-V.getPaddingTop())),this._path.setAttribute('d',this.path+' z'),this.findPoints())}findPoints(){for(var V=this.serie.waveform,R=[],G=0,Z=0,K=V.getLength(),U;Z<K;Z+=1){G=0;for(var Q=0,J=this.xs.length;Q<J;Q+=1)U=Q==J-1?0:Q+1,(this.ys[Q]<V.getY(Z)&&this.ys[U]>V.getY(Z)||this.ys[Q]>V.getY(Z)&&this.ys[U]<V.getY(Z))&&V.getX(Z)>(V.getY(Z)-this.ys[Q])/(this.ys[U]-this.ys[Q])*(this.xs[U]-this.xs[Q])+this.xs[Q]&&G++;1==G%2?(R.push(Z),this.serie.selectPoint(Z,!0,'selected')):this.serie.unselectPoint(Z)}this.selected=R,this.emit('selectionProcess',R)}onMouseUp(){this._path.setAttribute('display','none'),this.emit('selectionEnd',this.selected)}}T.default=B})},function(u,A,S){var C,P,E;(function(T,X){P=[A,S(3),S(39)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y){'use strict';Object.defineProperty(T,'__esModule',{value:!0});var F=function(V){if(V&&V.__esModule)return V;var R={};if(null!=V)for(var G in V)Object.prototype.hasOwnProperty.call(V,G)&&(R[G]=V[G]);return R.default=V,R}(X),W=function(V){return V&&V.__esModule?V:{default:V}}(Y);class B extends W.default{constructor(){super(...arguments)}static defaults(){return{axes:'all'}}init(V){this._zoomingGroup=document.createElementNS(V.ns,'g'),this._zoomingSquare=document.createElementNS(V.ns,'rect'),this._zoomingSquare.setAttribute('display','none'),F.setAttributeTo(this._zoomingSquare,{display:'none',fill:'rgba(171,12,12,0.2)',stroke:'rgba(171,12,12,1)','shape-rendering':'crispEdges',x:0,y:0,height:0,width:0,'pointer-events':'none'}),this.graph=V,V.groupEvent.appendChild(this._zoomingGroup),this._zoomingGroup.appendChild(this._zoomingSquare)}onMouseDown(V,R,G,U,Z){var K=this.options.zoomMode;if(K){switch(this._zoomingMode=K,void 0===R&&(this._backedUpZoomMode=this._zoomingMode,this._zoomingMode='y',R=0),void 0===G&&(this._backedUpZoomMode=this._zoomingMode,this._zoomingMode='x',G=0),this._zoomingXStart=R,this._zoomingYStart=G,this.x1=R-V.getPaddingLeft(),this.y1=G-V.getPaddingTop(),this._zoomingSquare.setAttribute('width',0),this._zoomingSquare.setAttribute('height',0),this._zoomingSquare.setAttribute('display','block'),this._zoomingMode){case'x':this._zoomingSquare.setAttribute('y',V.options.paddingTop),this._zoomingSquare.setAttribute('height',V.getDrawingHeight()-V.shift.bottom);break;case'y':this._zoomingSquare.setAttribute('x',V.options.paddingLeft),this._zoomingSquare.setAttribute('width',V.getDrawingWidth());break;case'forceY2':this.y2=V.getYAxis().getPx(this.options.forcedY)+V.options.paddingTop;}this.options.onZoomStart&&!Z&&this.options.onZoomStart(V,R,G,U,Z)}}onMouseMove(V,R,G,U,Z){switch(this._zoomingMode){case'xy':this._zoomingSquare.setAttribute('x',Math.min(this._zoomingXStart,R)),this._zoomingSquare.setAttribute('y',Math.min(this._zoomingYStart,G)),this._zoomingSquare.setAttribute('width',Math.abs(this._zoomingXStart-R)),this._zoomingSquare.setAttribute('height',Math.abs(this._zoomingYStart-G));break;case'forceY2':this._zoomingSquare.setAttribute('y',Math.min(this._zoomingYStart,this.y2)),this._zoomingSquare.setAttribute('height',Math.abs(this._zoomingYStart-this.y2)),this._zoomingSquare.setAttribute('x',Math.min(this._zoomingXStart,R)),this._zoomingSquare.setAttribute('width',Math.abs(this._zoomingXStart-R));break;case'x':this._zoomingSquare.setAttribute('x',Math.min(this._zoomingXStart,R)),this._zoomingSquare.setAttribute('width',Math.abs(this._zoomingXStart-R));break;case'y':this._zoomingSquare.setAttribute('y',Math.min(this._zoomingYStart,G)),this._zoomingSquare.setAttribute('height',Math.abs(this._zoomingYStart-G));}this.options.onZoomMove&&!Z&&this.options.onZoomMove(V,R,G,U,Z)}onMouseUp(V,R,G,U,Z){var K=this;this.removeZone();var Q=R-V.options.paddingLeft,J=G-V.options.paddingTop;if((this.emit('beforeZoom',{graph:V,x:R,y:G,e:U,mute:Z}),!V.prevent(!1))&&(0!=R-this._zoomingXStart||'y'==this._zoomingMode)&&(0!=G-this._zoomingYStart||'x'==this._zoomingMode))if(this.options.transition||this.options.smooth){let $=!1,ee=!1;('x'==this._zoomingMode||'xy'==this._zoomingMode||'forceY2'==this._zoomingMode)&&(this.fullX=!1,this.toAxes(function(te){te._pluginZoomMin=te.getCurrentMin(),te._pluginZoomMax=te.getCurrentMax(),te._pluginZoomMinFinal=Math.min(te.getVal(Q),te.getVal(K.x1)),te._pluginZoomMaxFinal=Math.max(te.getVal(Q),te.getVal(K.x1))},!1,!0,!1),$=!0),('y'==this._zoomingMode||'xy'==this._zoomingMode)&&(this.fullY=!1,this.toAxes(function(te){te._pluginZoomMin=te.getCurrentMin(),te._pluginZoomMax=te.getCurrentMax(),te._pluginZoomMinFinal=Math.min(te.getVal(J),te.getVal(K.y1)),te._pluginZoomMaxFinal=Math.max(te.getVal(J),te.getVal(K.y1))},!1,!1,!0),ee=!0),'forceY2'==this._zoomingMode&&(this.fullY=!1,this.toAxes(function(te){te._pluginZoomMin=te.getCurrentMin(),te._pluginZoomMax=te.getCurrentMax(),te._pluginZoomMinFinal=Math.min(te.getVal(K.y2),te.getVal(K.y1)),te._pluginZoomMaxFinal=Math.max(te.getVal(K.y2),te.getVal(K.y1))},!1,!1,!0),ee=!0),this.transition($,ee,'zoomEnd')}else{switch(this._zoomingMode){case'x':this.fullX=!1,this.toAxes('_doZoom',[Q,this.x1],!0,!1);break;case'y':this.fullY=!1,this.toAxes('_doZoom',[J,this.y1],!1,!0);break;case'xy':this.fullX=!1,this.fullY=!1,this.toAxes('_doZoom',[Q,this.x1],!0,!1),this.toAxes('_doZoom',[J,this.y1],!1,!0);break;case'forceY2':this.fullX=!1,this.fullY=!1,this.toAxes('_doZoom',[Q,this.x1],!0,!1),this.toAxes('_doZoom',[this.y1,this.y2],!1,!0);}V.draw(),this._backedUpZoomMode&&(this._zoomingMode=this._backedUpZoomMode),this.emit('zoomed'),V.pluginYieldActiveState()}}removeZone(){this._zoomingSquare.setAttribute('display','none')}onMouseWheel(V,R,G){G||(G={}),G.baseline||(G.baseline=0);var U='x'==G.direction,Z='y'===G.direction;this.toAxes('handleMouseWheel',[V,R,G.baseline],U,Z),this.graph.drawSeries()}onDblClick(V,R,G,U,Z){var K=this.graph;if(this.emit('beforeDblClick',{graph:K,x:V,y:R,pref:U,e:G,mute:Z}),!K.prevent(!1)){if(this.options.transition||this.options.smooth){var Q=!1,J=!1;if(('xtotal'==U.mode||'total'==U.mode)&&(this.toAxes(function(de){de._pluginZoomMin=de.getCurrentMin(),de._pluginZoomMax=de.getCurrentMax(),de._pluginZoomMinFinal=de.getMinValue()-de.options.axisDataSpacing.min*de.getInterval(),de._pluginZoomMaxFinal=de.getMaxValue()+de.options.axisDataSpacing.max*de.getInterval()},!1,!0,!1),Q=!0),('ytotal'==U.mode||'total'==U.mode)&&(this.toAxes(function(de){de._pluginZoomMin=de.getCurrentMin(),de._pluginZoomMax=de.getCurrentMax(),de._pluginZoomMinFinal=de.getMinValue()-de.options.axisDataSpacing.min*de.getInterval(),de._pluginZoomMaxFinal=de.getMaxValue()+de.options.axisDataSpacing.max*de.getInterval()},!1,!1,!0),J=!0),'gradualX'==U.mode||'gradualY'==U.mode||'gradual'==U.mode||'gradualXY'==U.mode){var V=!1,R=!1;('gradualX'==U.mode||'gradual'==U.mode||'gradualXY'==U.mode)&&(V=!0,Q=!0),('gradualY'==U.mode||'gradual'==U.mode||'gradualXY'==U.mode)&&(R=!0,J=!0),this.toAxes(function(de){de._pluginZoomMin=de.getCurrentMin(),de._pluginZoomMax=de.getCurrentMax(),de._pluginZoomMinFinal=de.getCurrentMin()-(de.getCurrentMax()-de.getCurrentMin()),de._pluginZoomMaxFinal=de.getCurrentMax()+(de.getCurrentMax()-de.getCurrentMin())},!1,V,R)}return void this.transition(Q,J,'dblClick')}var $=this.graph.getXAxis(),ee=this.graph.getYAxis();if('xtotal'==U.mode)this.toAxes('setMinMaxToFitSeries',null,!0,!1),this.fullX=!0,this.fullY=!1;else if('ytotal'==U.mode)this.toAxes('setMinMaxToFitSeries',null,!1,!0),this.fullX=!1,this.fullY=!0;else if('total'==U.mode)this.toAxes('setMinMaxToFitSeries',null,!0,!0),this.fullX=!0,this.fullY=!0;else{V-=this.graph.options.paddingLeft,R-=this.graph.options.paddingTop;var te=$.getCurrentMin(),ie=$.getCurrentMax(),re=$.getVal(V),ae=ie-te,se=ee.getCurrentMin(),ne=ee.getCurrentMax(),oe=ee.getVal(R),le=ne-se;if('gradualXY'==U.mode||'gradualX'==U.mode){var pe=(re-te)/(ie-te);te=Math.max($.getMinValue(),te-ae*pe),ie=Math.min($.getMaxValue(),ie+ae*(1-pe)),$.setCurrentMin(te),$.setCurrentMax(ie),$.options.onZoom&&$.options.onZoom(te,ie),$.cacheCurrentMin(),$.cacheCurrentMax(),$.cacheInterval()}if('gradualXY'==U.mode||'gradualY'==U.mode){var pe=(oe-se)/(ne-se);se=Math.max(ee.getMinValue(),se-le*pe),ne=Math.min(ee.getMaxValue(),ne+le*(1-pe)),ee.setCurrentMin(se),ee.setCurrentMax(ne),ee.options.onZoom&&ee.options.onZoom(se,ne),ee.cacheCurrentMin(),ee.cacheCurrentMax(),ee.cacheInterval()}}K.pluginYieldActiveState(),this.graph.draw()}}transition(V,R,G){var U=this,Z=500;U.gradualUnzoomStart||(U.gradualUnzoomStart=Date.now()),window.requestAnimationFrame(function(){var K=Date.now()-U.gradualUnzoomStart;K>Z&&(K=Z);var Q=Math.sin(K/Z*Math.PI/2);U.toAxes(function(J){J.setCurrentMin(J._pluginZoomMin+(J._pluginZoomMinFinal-J._pluginZoomMin)*Q),J.setCurrentMax(J._pluginZoomMax+(J._pluginZoomMaxFinal-J._pluginZoomMax)*Q),J.cacheCurrentMin(),J.cacheCurrentMax(),J.cacheInterval()},!1,V,R),U.graph.draw(),K<Z?(U.transition(V,R,G),U.emit('zooming')):(U.emit('zoomed'),U.graph.pluginYieldActiveState(),G&&U.emit(G),U.gradualUnzoomStart=0)})}isFullX(){return this.fullX}isFullY(){return this.fullY}toAxes(V,R,G,U){var Z=this.options.axes;switch(Z&&('serieSelected'!=Z||this.graph.getSelectedSerie())||(Z='all'),Z){case'all':this.graph._applyToAxes.apply(this.graph,arguments);break;case'serieSelected':var K=this.graph.getSelectedSerie();K&&(G&&('string'==typeof V?K.getXAxis()[V].apply(K.getXAxis(),R):V.apply(K.getXAxis(),R)),U&&('string'==typeof V?K.getYAxis()[V].apply(K.getYAxis(),R):V.apply(K.getYAxis(),R)));break;default:Array.isArray(Z)||(Z=[Z]);for(let Q of Z)Q.isX()&&G?'string'==typeof V?Q[V].apply(Q,R):V.apply(Q,R):Q.isY()&&U&&('string'==typeof V?Q[V].apply(Q,R):V.apply(Q,R));}}}T.default=B})},function(u,A,S){var C,P,E;(function(T,X){P=[A,S(1),S(45),S(39),S(3)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y,I,O){'use strict';function W(Z){return Z&&Z.__esModule?Z:{default:Z}}Object.defineProperty(T,'__esModule',{value:!0});var B=W(X),V=W(Y),R=W(I),G=function(Z){if(Z&&Z.__esModule)return Z;var K={};if(null!=Z)for(var Q in Z)Object.prototype.hasOwnProperty.call(Z,Q)&&(K[Q]=Z[Q]);return K.default=Z,K}(O);class U extends R.default{constructor(){super(...arguments),this.series=[],this.plugins=[],this.currentSlots={},this.requestLevels=new Map,this.update=(Z,K)=>{this.series.forEach(function(Q){this.updateSerie(Q,Z)}),Z||this.recalculateSeries(K)}}static defaults(){return{LRUName:'PluginTimeSerieManager',intervals:[1000,15000,60000,900000,3600000,8640000],maxParallelRequests:3,optimalPxPerPoint:2,nbPoints:1e3,url:''}}init(Z){this.graph=Z,V.default.create(this.options.LRUName,200),this.requestsRunning=0}setURL(Z){return this.options.url=Z,this}setAvailableIntervals(){this.options.intervals=arguments}newSerie(Z,K,Q,J,$){var ee=this.graph.newSerie(Z,K,Q);return this.currentSlots[Z]={min:0,max:0,interval:0},ee.on('hide',function(){ee._zoneSerie&&ee._zoneSerie.hide()}),ee.on('show',function(){ee._zoneSerie&&ee._zoneSerie.show()}),ee.setInfo('timeSerieManagerDBElements',J),$||(ee._zoneSerie=this.graph.newSerie(Z+'_zone',{},B.default.SERIE_ZONE)),this.series.push(ee),ee}registerPlugin(Z){var Q;if(-1<(Q=this.plugins.indexOf(Z)))for(var J=1;J<arguments.length;J++)Z.removeListener(arguments[J],this.update);for(var J=1;J<arguments.length;J++)Z.on(arguments[J],this.update)}updateSerie(Z,K){var Q=this,J=Z.getXAxis().getCurrentMin(),$=Z.getXAxis().getCurrentMax(),te=this.getOptimalInterval($-J),ie=this.options.intervals.indexOf(te),re;this.cleanRegister(ie);for(var ae=ie;ae<=ie+1;ae++){re=this.options.intervals[ae];var se=Q.computeSlotID(J,re),ne=Q.computeSlotID($,re);[[2,5,6],[1,2,4],[0,1,3]].forEach(function(le){for(var pe=se-le[0]*(ne-se),de=ne+le[0]*(ne-se),ge=pe;ge<=de&&!(Q.computeTimeMin(ge,re)>Date.now());)Q.register(Z,ge,re,re==te?le[1]:le[2],!0,K),ge++})}this.processRequests()}cleanRegister(Z){this.requestLevels&&this.requestLevels.forEach(K=>{K.forEach((Q,J)=>{Q[4]<Z&&K.splice(J,1)})})}register(Z,K,Q,J,$,ee){var te=this.computeUniqueID(Z,K,Q),ie=V.default.get(this.options.LRUName,te);(!ie||this.computeTimeMax(K,Q)>Date.now()&&ie.timeout<Date.now()-(ee?5e3:1e5)&&1==J)&&this.request(Z,K,Q,J,te,$)}request(Z,K,Q,J,$,ee){for(var te in this.requestLevels)te!=J&&this.requestLevels[te][$]&&(1===this.requestLevels[te][$][0]?this.requestLevels[te][$][5]=J:delete this.requestLevels[te][$]);this.requestLevels[J]&&this.requestLevels[J][$]||(this.requestLevels[J]=this.requestLevels[J]||{},this.requestLevels[J][$]=[0,$,Z.getName(),K,Q,J,Z.getInfo('timeSerieManagerDBElements')],!ee&&this.processRequests())}processRequests(){if(!(this.requestsRunning>=this.options.maxParallelRequests)){for(var Z=this,K=1,Q;;){for(var J in this.requestLevels[K])if(1!=this.requestLevels[K][J][0]){Q=this.requestLevels[K][J];break}if(Q)break;if(K++,10<K)return}this.requestsRunning++,Q&&(Q[0]=1,G.ajaxGet({url:this.getURL(Q),method:'GET',json:!0}).done(function($){1==$.status&&(Z.requestsRunning--,delete Z.requestLevels[K][J],V.default.store(Z.options.LRUName,Q[1],$.data),Z.processRequests(),1==Q[5]&&0==Object.keys(Z.requestLevels[1]).length&&Z.recalculateSeries(!0))}))}}computeTimeMax(Z,K){return(Z+1)*(K*this.options.nbPoints)}computeTimeMin(Z,K){return Z*(K*this.options.nbPoints)}getURL(Z){var K=this.options.url.replace('<measurementid>',Z[2]).replace('<from>',this.computeTimeMin(Z[3],Z[4])).replace('<to>',this.computeTimeMax(Z[3],Z[4])).replace('<interval>',Z[4]),Q=Z[6]||{};for(var J in Q)K=K.replace('<'+J+'>',Q[J]);return K}getOptimalInterval(Z){var K=(this.options.optimalPxPerPoint||1)*Z/this.graph.getDrawingWidth(),Q=1/0,J;return this.options.intervals.forEach(function($){var ee=Math.min(Q,Math.abs($-K));Q!==ee&&(J=$,Q=ee)}),J||1e3}computeUniqueID(Z,K,Q){var J='',$=Z.getInfo('timeSerieManagerDBElements');for(var ee in $)J+=';'+ee+':'+$[ee];return Z.getName()+';'+K+';'+Q+J}computeSlotID(Z,K){return Math.floor(Z/(K*this.options.nbPoints))}computeSlotTime(Z,K){return Z*(K*this.options.nbPoints)}getZoneSerie(Z){return Z._zoneSerie}updateZoneSerie(Z){var K=this.graph.getSerie(Z);K&&K._zoneSerie&&(K._zoneSerie.setXAxis(K.getXAxis()),K._zoneSerie.setYAxis(K.getYAxis()),K._zoneSerie.setFillColor(K.getLineColor()),K._zoneSerie.setLineColor(K.getLineColor()),K._zoneSerie.setFillOpacity(0.2),K._zoneSerie.setLineOpacity(0.3))}recalculateSeries(Z){var K=this;this.locked||(this.changed=!1,this.series.map(function(Q){K.recalculateSerie(Q,Z)}),this.changed=!1,K.graph.draw())}recalculateSerie(Z,K){var Q=Z.getXAxis().getCurrentMin(),J=Z.getXAxis().getCurrentMax(),$=this.getOptimalInterval(J-Q),ee=this.computeSlotID(Q,$),te=this.computeSlotID(J,$),ie=[],re=[];if(!(!K&&$==this.currentSlots[Z.getName()].interval&&this.currentSlots[Z.getName()].min<=ee&&this.currentSlots[Z.getName()].max>=te)){ee-=2,te+=2,this.currentSlots[Z.getName()].min=ee,this.currentSlots[Z.getName()].max=te,this.currentSlots[Z.getName()].interval=$;for(var ae=ee;ae<=te;){const se=V.default.get(this.options.LRUName,this.computeUniqueID(Z,ae,$));se?(ie=ie.concat(se.data.mean),re=re.concat(se.data.minmax)):this.recalculateSerieUpwards(Z,ae,$,ie,re),ae++}this.changed=!0,Z.setData(ie),Z._zoneSerie&&Z._zoneSerie.setData(re)}}setIntervalCheck(Z){this.interval&&clearInterval(this.interval),this.update(!0,!0),this.interval=setInterval(()=>{this.update(!0,!1)},Z)}recalculateSerieUpwards(Z,K,Q,J,$){var ee=this.options.intervals.slice(0);ee.sort();var te=ee[ee.indexOf(Q)+1]||-1;if(0>te)return[];var ie=this.computeSlotTime(K,Q),re=this.computeSlotTime(K+1,Q),ae=this.computeSlotID(ie,te),se=!1;const ne=V.default.get(this.options.LRUName,this.computeUniqueID(Z,ae,te));if(ne)for(var oe=0,le=ne.data.mean.length;oe<le;oe+=2){if(ne.data.mean[oe]<ie)continue;else!1==se&&(se=oe);if(ne.data.mean[oe]>=re)return J=J.concat(ne.data.mean.slice(se,oe)),void($=J.concat(ne.data.minmax.slice(se,oe)))}return this.recalculateSerieUpwards(Z,ae,te,J,$)}lockRedraw(){this.locked=!0}unlockRedraw(){this.locked=!1}isRedrawLocked(){return!!this.locked}}T.default=U})},function(u,A){var C,P,E;(function(T,X){P=[A],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T){'use strict';function X(K,Q){Q=Q||50,R[K]||(R[K]={},U[K]=0),Z[K]=Q}function Y(K,Q){var J,$;if(R[K]&&R[K][Q])return $=G[K],J=R[K][Q],J.prev=$,J.next=$.next,$.next.prev=J,$.next=J,G[K]=J,J.data}function I(K,Q,J){var $,ee,te;if(R[K]&&void 0!==U[K]&&Z[K])return te=G[K],R[K][Q]?(Y(K,Q),R[K][Q].data.data=J,R[K][Q].data.timeout=Date.now()):($={data:{data:J,timeout:Date.now()}},'undefined'==typeof te?($.prev=$,$.next=$):($.prev=te.prev,$.next=te.next,te.next.prev=$,te.next=$),G[K]=$,R[K][Q]=$,U[K]++),U[K]>Z[K]&&te&&(ee=te.next,te.next.next.prev=te,te.next=te.next.next,ee.next.next=void 0,ee.next.prev=void 0,U[K]--),J}function F(K,Q){var J;if((J=Y(K,Q))!=void 0)return J}Object.defineProperty(T,'__esModule',{value:!0}),T.create=function(K,Q){X(K,Q)},T.get=F,T.store=function(K,Q,J){return I(K,Q,J),J},T.empty=function(K){emptyMemory(K)},T.exist=function(K){return R[K]};var R={},G={},U={},Z={};T.default=F})},function(u,A,S){var C,P,E;(function(T,X){P=[A,S(39)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X){'use strict';Object.defineProperty(T,'__esModule',{value:!0});var I=function(F){return F&&F.__esModule?F:{default:F}}(X);class O extends I.default{constructor(){super(...arguments)}static defaults(){return{positiveStyle:{fillColor:'green',fillOpacity:0.2,strokeWidth:0},negativeStyle:{fillColor:'red',fillOpacity:0.2,strokeWidth:0},from:0,to:0}}init(F){this.graph=F,this.pathsPositive=[],this.pathsNegative=[],this.positivePolyline=this.graph.newShape('polyline').draw(),this.positivePolyline.setFillColor(this.options.positiveStyle.fillColor).setFillOpacity(this.options.positiveStyle.fillOpacity).setStrokeWidth(this.options.positiveStyle.strokeWidth).applyStyle(),this.negativePolyline=this.graph.newShape('polyline').draw(),this.negativePolyline.setFillColor(this.options.negativeStyle.fillColor).setFillOpacity(this.options.negativeStyle.fillOpacity).setStrokeWidth(this.options.negativeStyle.strokeWidth).applyStyle()}setSeries(F,W){this.serie1=F,this.serie2=W}setBoundaries(F,W){this.options.from=F,this.options.to=W}getFrom(){return this.options.from}getTo(){return this.options.to}draw(){function F(){!0===re?B.pathsPositive.push([$,ee]):!1==re&&B.pathsNegative.push([$,ee]),$=[],ee=[],re=void 0}function W(ne,oe){for(var le=0;le<oe[0].length;le+=2)0==le&&(ne+='M '),ne+=' '+Math.round(B.serie1.getXAxis().getPx(oe[0][le]))+', '+Math.round(B.serie1.getYAxis().getPx(oe[0][le+1])),le<oe[0].length-2&&(ne+=' L ');for(var le=oe[1].length-2;0<=le;le-=2)ne+=' L '+Math.round(B.serie2.getXAxis().getPx(oe[1][le]))+', '+Math.round(B.serie2.getYAxis().getPx(oe[1][le+1])),0==le&&(ne+=' z ');return ne}var B=this,V=this.serie1.searchClosestValue(this.getFrom()),R,G,U,Z,K,Q,J,$=[],ee=[],te;V?(R=V.dataIndex,G=2*V.xAfterIndex):(R=0,G=0),K=this.interpolate(this.serie1,this.getFrom()),$.push(this.getFrom()),$.push(K),K=this.interpolate(this.serie2,this.getFrom()),ee.push(this.getFrom()),ee.push(K);for(var ie,re,ae;R<this.serie1.data.length;R++){for(;G<this.serie1.data[R].length;G+=2){if(this.serie1.data[R][G]>this.getTo()){K=this.interpolate(this.serie1,this.getTo()),Q=this.interpolate(this.serie2,this.getTo()),J=this.computeCrossing($[$.length-2],$[$.length-1],this.getTo(),K,ee[ee.length-2],ee[ee.length-1],this.getTo(),Q),J&&($.push(J.x),$.push(J.y),ee.push(J.x),ee.push(J.y),F(),$.push(J.x),$.push(J.y),ee.push(J.x),ee.push(J.y),re=this.serie1.data[R][G+1]>this.serie2.data[U][Z+1]),$.push(this.getTo()),$.push(K),ee.push(this.getTo()),ee.push(Q),ae=!0;break}if(!ie)if(ie=this.serie2.searchClosestValue(this.serie1.data[R][G]),ie)U=ie.dataIndex,Z=2*ie.xBeforeIndex,K=this.interpolate(this.serie2,this.serie1.data[R][G]),$.push(this.serie1.data[R][G]),$.push(this.serie1.data[R][G+1]),ee.push(this.serie1.data[R][G]),ee.push(K),re=this.serie1.data[R][G+1]>K;else continue;for(te=!1,J=this.computeCrossing($[$.length-2],$[$.length-1],this.serie1.data[R][G],this.serie1.data[R][G+1],ee[ee.length-2],ee[ee.length-1],this.serie2.data[U][Z],this.serie2.data[U][Z+1]),J&&($.push(J.x),$.push(J.y),ee.push(J.x),ee.push(J.y),F(),$.push(J.x),$.push(J.y),ee.push(J.x),ee.push(J.y),re=this.serie1.data[R][G+1]>this.serie2.data[U][Z+1]);this.serie2.data[U][Z]<this.serie1.data[R][G];){if(ee.push(this.serie2.data[U][Z]),ee.push(this.serie2.data[U][Z+1]),Z+=2,Z==this.serie2.data[U].length){te=this.serie2.data[U][Z-2],U++,Z=0;break}J=this.computeCrossing($[$.length-2],$[$.length-1],this.serie1.data[R][G],this.serie1.data[R][G+1],ee[ee.length-2],ee[ee.length-1],this.serie2.data[U][Z],this.serie2.data[U][Z+1]),J&&($.push(J.x),$.push(J.y),ee.push(J.x),ee.push(J.y),F(),$.push(J.x),$.push(J.y),ee.push(J.x),ee.push(J.y),re=this.serie1.data[R][G+1]>this.serie2.data[U][Z+1])}!1===te?($.push(this.serie1.data[R][G]),$.push(this.serie1.data[R][G+1])):($.push(te),$.push(this.interpolate(this.serie1,te)),ie=!1,G-=2,F())}if(ae){F();break}K=this.interpolate(this.serie2,$[$.length-2]),K&&(ee.push($[$.length-2]),ee.push(K)),F(),G=0,ie=!1}var se=this.pathsPositive.reduce(W,'');this.positivePolyline.setPointsPx(se).redraw();var se=this.pathsNegative.reduce(W,'');this.negativePolyline.setPointsPx(se).redraw()}interpolate(F,W){var B=F.searchClosestValue(W);if(!B)return!1;if(void 0==B.xMax)return B.yMin;if(void 0==B.xMin)return B.yMax;var V=(W-B.xMin)/(B.xMax-B.xMin);return(1-V)*B.yMin+V*B.yMax}computeCrossing(F,W,B,V,R,G,U,Z){var K=(V-W)/(B-F),Q=(Z-G)/(U-R),J=V-K*B;if(F==B||R==U)return!1;if(K==Q)return{x:F,y1:W,y2:W};var ee=(J-(Z-Q*U))/(Q-K);return ee>B||ee<F||ee<R||ee>U?!1:{x:ee,y:K*ee+J}}getPositivePolyline(){return this.positivePolyline}getNegativePolyline(){return this.negativePolyline}}T.default=O})},function(u,A,S){var C,P,E;(function(T,X){P=[A,S(1),S(9),S(11),S(3),S(14),S(22),S(39),S(10)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y,I,O,F,W,B,V){'use strict';function G(ge){return ge&&ge.__esModule?ge:{default:ge}}Object.defineProperty(T,'__esModule',{value:!0});var U=G(X),Z=G(Y),K=G(I),Q=function(ge){if(ge&&ge.__esModule)return ge;var ue={};if(null!=ge)for(var he in ge)Object.prototype.hasOwnProperty.call(ge,he)&&(ue[he]=ge[he]);return ue.default=ge,ue}(O),J=G(F),$=G(W),ee=G(B),te=G(V);class ie extends J.default{constructor(){super(...arguments),this.subSeries=[]}setData(){return super.setData(...arguments),this.subSeries.map(ge=>{ge.data=this.data}),this}draw(){return this.eraseMarkers(),this}getSymbolForLegend(){return!!this.subSeries[0]&&this.subSeries[0].getSymbolForLegend()}getMarkerForLegend(){return!!this.subSeries[0]&&this.subSeries[0].getMarkerForLegend()}}class re extends $.default{constructor(){super(...arguments),this.subSeries=[]}setData(){return super.setData(...arguments),this.subSeries.map(ge=>{ge.data=this.data}),this}draw(){return this}getSymbolForLegend(){return!!this.subSeries[0]&&this.subSeries[0].getSymbolForLegend()}getMarkerForLegend(){return!!this.subSeries[0]&&this.subSeries[0].getMarkerForLegend()}}var ae=['constructor','init','draw','setLineColor','setLineWidth','setLineStyle','getLineColor','getLineWidth','getLineStyle','setMarkers','showMarkers','hideMarkers','getMarkerDom','getMarkerDomIndependant','getMarkerPath','eraseMarkers','_recalculateMarkerPoints'];Object.getOwnPropertyNames(J.default.prototype).concat([]).map(function(ge){-1<ae.indexOf(ge)||(ie.prototype[ge]=function(ue){return function(){var he=arguments;this.subSeries.map(ce=>{ce[ue](...he)})}}(ge))});class ne extends ee.default{constructor(){super(...arguments),this.series=new Map}static defaults(){return{axes:{margins:{high:5,low:5}}}}init(ge){this.graph=ge}newXAxis(ge){return newBottomAxis(ge)}newYAxis(ge){return newLeftAxis(ge)}newTopAxis(ge){return ge=this.getOptions(ge),new pe(this.graph,'top',ge)}newBottomAxis(ge){return ge=this.getOptions(ge),new pe(this.graph,'bottom',ge)}newLeftAxis(ge){return ge=this.getOptions(ge),new de(this.graph,'left',ge)}newRightAxis(ge){return ge=this.getOptions(ge),new de(this.graph,'right',ge)}getOptions(ge){var ue={marginMin:this.options.axes.margins.low,marginMax:this.options.axes.margins.high};return Q.extend(!0,ue,ge)}preDraw(){var ge,ue;this.series.forEach(({serie:he})=>{ge=he.getXAxis(),ue=he.getYAxis();let ce=1;for(ge.splitNumber&&(ce*=ge.splitNumber),ue.splitNumber&&(ce*=ue.splitNumber);he.subSeries.length<ce;){const xe=he.getName()+'_'+he.subSeries.length,me=this.graph.newSerie(xe,{},he.getType()||U.default.SERIE_LINE);me.excludedFromLegend=!0,me.styles=he.styles,me.data=he.data,he.getType()==U.default.SERIE_LINE&&(me.markerPoints=he.markerPoints,me.markerFamilies=he.markerFamilies),he.subSeries.push(me)}for(;he.subSeries.length>ce;){let xe=this.graph.getSerie(he.getName()+'_'+(he.subSeries.length-1));xe&&xe.kill&&xe.kill(),he.subSeries.pop()}!he.getXAxis().splitNumber&&he.getXAxis().splitAxis&&he.getXAxis().splitAxis(),!he.getYAxis().splitNumber&&he.getYAxis().splitAxis&&he.getYAxis().splitAxis(),he.subSeries.map((xe,me)=>{var fe,ye;if(he.getXAxis().getSubAxis){let be=me%(ge.splitNumber||1);fe=he.getXAxis().getSubAxis(be)}else fe=he.getXAxis();if(xe.setXAxis(fe),he.getYAxis().getSubAxis){let be=Math.floor(me/(ge.splitNumber||1));ye=he.getYAxis().getSubAxis(be)}else ye=he.getYAxis();xe.setYAxis(ye),xe.draw(!0)})})}newSerie(ge,ue={},he){switch(he){case'line':return newLineSerie(ge,ue);break;case'scatter':return newScatterSerie(ge,ue);}throw'Cannot create a split serie of type '+he}newLineSerie(ge,ue){var he={type:'lineSerie',serie:new ie(ge,ue,'line')};return this.series.set(ge,he),he.serie.init(this.graph,ge,ue),this.graph.series.push(he.serie),he.serie}newScatterSerie(ge,ue){var he={type:'scatterSerie',serie:new re(ge,ue,'scatter')};return this.series.set(ge,he),he.serie.init(this.graph,ue),this.graph.series.push(he.serie),he.serie}}var oe={splitMarks:!0},le=function(ge){var he=class extends ge{constructor(xe,me,fe={}){super(xe,me,fe),this.axes=[],this.position=me,this.constructorOptions=Q.extend(!0,{},oe,fe),this._splitVal=[]}all(xe){if('function'==typeof xe)return this.axes.map(xe),this}splitAxis(...xe){xe.push(1);let me=xe.length;for(;this.axes.length>me;)this.axes.pop().kill(!0,!0);for(;this.axes.length<me;){let be=new(this.getConstructor())(this.graph,this.position,this.constructorOptions);this.axes.push(be),be.zoomLock=!0,be.init(this.graph,this.constructorOptions)}let fe=0,ye=0;for(let be of this.axes)be.options.marginMin=10,be.options.marginMax=10,0==ye&&(be.options.marginMin=0),ye==this.axes.length-1&&(be.options.marginMax=0),be.setSpan(fe,fe=xe[ye]),be.setMinMaxFlipped(),ye++;return this._splits=xe,this}fixGridIntervalBasedOnAxis(xe){return this.fixGridFor=xe,this.graph._axisHasChanged(),this}splitSpread(xe){return this.autoSpread=!!xe,this}hasAxis(xe){return-1<this.axes.indexOf(xe)}_splitSpread(){let xe=[],me=0,fe=0;for(let ye of this._splitVal)me+=ye[1]-ye[0];for(let ye of this._splitVal)xe.push(fe+=(ye[1]-ye[0])/me);xe.pop(),this.splitAxis(...xe)}setChunkBoundaries(xe){let me=0,fe,ye;for(let be of this.axes)Array.isArray(xe[me])&&1<xe[me].length&&!fe&&(fe=xe[me][1]-xe[me][0],ye=me),1!=xe[me].length&&Array.isArray(xe[me])?be.forceMin(xe[me][0]).forceMax(xe[me][1]):(be._mean=xe[me],Array.isArray(be._mean)&&(be._mean=be._mean[0])),me++;return this._baseWidthVal=fe,this._baseWidthIndex=ye,this._splitVal=xe,this.graph._axisHasChanged(),this}setMinMaxToFitSeries(){(!this._splitVal||1>this._splitVal.length)&&(super.setMinMaxToFitSeries(...arguments),this._splitVal[0]=this._splitVal[0]||[],this._splitVal[this._splitVal.length-1]=this._splitVal[this._splitVal.length-1]||[],this._splitVal[0][0]=this.getCurrentMin(),this._splitVal[this._splitVal.length-1][1]=this.getCurrentMax(),this.setChunkBoundaries(this._splitVal))}draw(){this.autoSpread&&this._splitSpread();let xe=0,me,fe,ye;if(0<=this._baseWidthIndex&&(fe=this.getSubAxis(this._baseWidthIndex))&&(ye=fe.getSpan()),fe=void 0,0<=this.fixGridFor&&(fe=this.getSubAxis(this.fixGridFor))){if(void 0!==fe._mean){let be=(fe.getSpan()[1]-fe.getSpan()[0])/(ye[1]-ye[0])*this._baseWidthVal;fe.forceMin(fe._mean-be/2),fe.forceMax(fe._mean+be/2)}xe=fe.draw(),me=fe.getPrimaryTickUnit()}return this.axes.map(be=>{if(fe!==be){if(void 0!==be._mean){let Ae=(be.getSpan()[1]-be.getSpan()[0])/(ye[1]-ye[0])*this._baseWidthVal;be.forceMin(be._mean-Ae/2),be.forceMax(be._mean+Ae/2)}me&&be.forcePrimaryTickUnit(me),xe=Math.max(xe,be.draw())}}),this.writeUnit(),xe}setMinPx(xe){super.setMinPx(xe);for(let me of this.axes)me.setMinPx(xe)}setMaxPx(xe){super.setMaxPx(xe);for(let me of this.axes)me.setMaxPx(xe)}setShift(){super.setShift(...arguments);for(let xe of this.axes)xe.setShift(...arguments)}init(){super.init(...arguments),this.splitAxis()}getAxisPosition(){var xe=0;return this.axes.map(me=>{xe=Math.max(xe,me.getAxisPosition())}),xe}getSubAxis(xe){if(this.axes.length<=xe)throw'Impossible to reach axis. Index '+xe+' is out of range';return this.axes[xe]}get splitNumber(){return this._splits.length}};return['turnGridsOff','turnGridsOn','gridsOff','gridsOn','setEngineering','setScientificScaleExponent','setScientific','setLabelColor','setSecondaryGridDasharray','setPrimaryGridDasharray','setSecondaryGridsOpacity','setPrimaryGridOpacity','setSecondaryGridWidth','setPrimaryGridWidth','setSecondaryGridColor','setPrimaryGridColor','setTicksLabelColor','setSecondaryTicksColor','setPrimaryTicksColor','setAxisColor','secondaryGridOn','secondaryGridOff','primaryGridOff','primaryGridOn','setSecondaryGrid','setPrimaryGrid','setGrids','setTickPosition','setExponentialFactor','setExponentialLabelFactor','setGridLinesStyle','forcePrimaryTickUnitMin','forcePrimaryTickUnitMax','forcePrimaryTickUnit','flip','show','hide','setDisplay'].map(ce=>{he.prototype[ce]=function(xe){return function(){return this.axes.map(me=>{me[xe](...arguments)}),this}}(ce)}),he};class pe extends le(Z.default){constructor(ge,ue){super(...arguments),this.topbottom=ue}getConstructor(){return Z.default}getAxisPosition(){var ge=super.getAxisPosition(...arguments);return this.labelPosY=ge,this.getLabel()&&(ge+=this.graph.options.fontSize),ge}drawLabel(){super.drawLabel(),this.label.setAttribute('y',(this.top?-1:1)*(this.graph.options.fontSize+this.labelPosY))}draw(){var ge=super.draw(...arguments);return this.drawLabel(),ge}}class de extends le(K.default){constructor(){super(...arguments)}getConstructor(){return K.default}drawLabel(){super.drawLabel()}equalizePosition(ge){var ue=ge;if(this.getLabel()&&this.axes.map(he=>{ue=Math.max(he.equalizePosition(ge),ue)}),this.getLabel())return this.placeLabel(this.left?-ue:ue),ue+this.graph.options.fontSize}}Q.mix(pe,new Z.default),Q.mix(de,new K.default),T.default=ne})},function(u,A,S){var C,P,E;(function(T,X){P=[A,S(3),S(39)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y){'use strict';Object.defineProperty(T,'__esModule',{value:!0});var F=function(V){if(V&&V.__esModule)return V;var R={};if(null!=V)for(var G in V)Object.prototype.hasOwnProperty.call(V,G)&&(R[G]=V[G]);return R.default=V,R}(X),W=function(V){return V&&V.__esModule?V:{default:V}}(Y);class B extends W.default{constructor(){super(...arguments)}init(V,R){super.init(V,R)}static defaults(){return{}}checkHSL(V){let R={},G,U,Z;return(G=V.h||V.hue)?(1>G&&(G=Math.round(360*G)),R.hue=G):R.h=0,(U=V.s||V.saturation)?(1<U&&(U/=100),R.saturation=U):R.saturation=.75,(Z=V.lightness||V.l)?(1<Z&&(Z/=100),R.lightness=Z):R.lightness=0.5,R}buildHSLString(V){return'hsl( '+Math.round(V.h)+', '+Math.round(100*V.s)+'%, '+Math.round(100*V.l)+'%)'}colorizeAll(V){let R,G;if(V.serieTypes?(!Array.isArray(V.serieTypes)&&(V.serieTypes=[V.serieTypes]),R=this.graph.allSeries(...V.serieTypes)):R=this.graph.getSeries(),G=R.length,!V.startingColorHSL)if(V.colorHSL)V.startingColorHSL=this.checkHSL(V.colorHSL);else throw'No starting color was provided. There must exist either options.colorHSL or options.startingColorHSL';if(!V.endingColorHSL)switch(V.affect&&['h','s','l','hue','saturation','lightness'].include(V.affect)||(V.affect='h'),V.affect){case'h':case'hue':V.endingColorHSL={h:V.startingColorHSL.h+300,s:V.startingColorHSL.s,l:V.startingColorHSL.l};break;case'saturation':case's':let U;U=0.5<V.startingColorHSL.s?0:1,V.endingColorHSL={h:V.startingColorHSL.h,s:U,l:V.startingColorHSL.l};break;case'lightness':case'l':let Z;Z=0.5<V.startingColorHSL.l?0:0.75,V.endingColorHSL={h:V.startingColorHSL.h,s:V.startingColorHSL.s,l:Z};}else V.endingColorHSL=Object.assign({},V.startingColorHSL,V.endingColorHSL);R.map((U,Z)=>{if(!U.setLineColor)throw'The serie '+U.getName()+' does not implement the method `startingColor`';U.setLineColor(this.buildHSLString({h:V.startingColorHSL.h+Z/(G-1)*(V.endingColorHSL.h-V.startingColorHSL.h),s:V.startingColorHSL.s+Z/(G-1)*(V.endingColorHSL.s-V.startingColorHSL.s),l:V.startingColorHSL.l+Z/(G-1)*(V.endingColorHSL.l-V.startingColorHSL.l)}))})}}T.default=B})},function(u,A,S){var C,P,E;(function(T,X){P=[A,S(3),S(27)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y){'use strict';Object.defineProperty(T,'__esModule',{value:!0});var F=function(V){if(V&&V.__esModule)return V;var R={};if(null!=V)for(var G in V)Object.prototype.hasOwnProperty.call(V,G)&&(R[G]=V[G]);return R.default=V,R}(X),W=function(V){return V&&V.__esModule?V:{default:V}}(Y);class B extends W.default{constructor(V,R){super(V,R)}createDom(){this._dom=document.createElementNS(this.graph.ns,'ellipse')}applyPosition(){var V=this.computePosition(0);return this.setDom('cx',V.x||0),this.setDom('cy',V.y||0),this.setDom('rx',this.getProp('rx')||0),this.setDom('ry',this.getProp('ry')||0),!0}setR(V,R){return this.setProp('rx',V),this.setProp('ry',R),this}handleMouseUpImpl(){this.triggerChange()}handleMouseMoveImpl(){}}T.default=B})}])});
//# sourceMappingURL=jsgraph-es6.min.js.map
