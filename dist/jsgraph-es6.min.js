(function(A,S){'object'==typeof exports&&'object'==typeof module?module.exports=S():'function'==typeof define&&define.amd?define([],S):'object'==typeof exports?exports.Graph=S():A.Graph=S()})(this,function(){return function(u){function A(P){if(S[P])return S[P].exports;var C=S[P]={exports:{},id:P,loaded:!1};return u[P].call(C.exports,C,C.exports,A),C.loaded=!0,C.exports}var S={};return A.m=u,A.c=S,A.p='',A(0)}([function(u,A,S){var P,C,E;(function(T,X){C=[u,A,S(1),S(2),S(8),S(9),S(11),S(12),S(13),S(14),S(17),S(19),S(20),S(21),S(22),S(23),S(24),S(25),S(26),S(27),S(28),S(29),S(50),S(31),S(32),S(30),S(33),S(34),S(35),S(36),S(37),S(38),S(39),S(40),S(41),S(42),S(43),S(44),S(46),S(47),S(48),S(49),S(5),S(6)],P=X,E='function'==typeof P?P.apply(A,C):P,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y,I,B,O,F,W,V,R,U,G,Z,K,Q,J,$,ee,te,ie,re,ae,se,oe,ne,le,pe,de,ge,ue,he,ce,xe,me,fe,ye,be,Ae,Me,ke,Se,_e,ve,Pe){'use strict';function Ce(ft){return ft&&ft.__esModule?ft:{default:ft}}Object.defineProperty(X,'__esModule',{value:!0});var we=Ce(Y),Le=Ce(I),Ee=Ce(B),Te=Ce(O),Xe=Ce(F),Ye=Ce(W),De=Ce(V),Ie=Ce(R),je=Ce(U),Ne=Ce(G),Be=Ce(Z),Oe=Ce(K),He=Ce(Q),Fe=Ce(J),ze=Ce($),We=Ce(ee),Ve=Ce(te),Re=Ce(ie),Ue=Ce(re),Ge=Ce(ae),Ze=Ce(se),qe=Ce(oe),Ke=Ce(ne),Qe=Ce(le),Je=Ce(pe),$e=Ce(de),et=Ce(ge),tt=Ce(ue),it=Ce(he),rt=Ce(ce),at=Ce(xe),st=Ce(me),ot=Ce(fe),nt=Ce(ye),lt=Ce(be),pt=Ce(Ae),gt=Ce(Me),ut=Ce(ke),ht=Ce(Se),ct=Ce(_e),xt=Ce(ve),mt=Ce(Pe);we.default.registerConstructor('graph.position',Le.default),we.default.registerConstructor('graph.axis.x',Te.default),we.default.registerConstructor('graph.axis.y',Xe.default),we.default.registerConstructor('graph.axis.x.bar',Ye.default),we.default.registerConstructor('graph.axis.x.time',De.default),we.default.registerConstructor('graph.serie.line',Ie.default),we.default.registerConstructor('graph.serie.line.3d',je.default),we.default.registerConstructor('graph.serie.line.color',Oe.default),we.default.registerConstructor('graph.serie.contour',Ve.default),we.default.registerConstructor('graph.serie.bar',Ne.default),we.default.registerConstructor('graph.serie.box',Be.default),we.default.registerConstructor('graph.serie.scatter',He.default),we.default.registerConstructor('graph.serie.zone',Fe.default),we.default.registerConstructor('graph.serie.zone.3d',ze.default),we.default.registerConstructor('graph.serie.densitymap',We.default),we.default.registerConstructor(we.default.SERIE_LINE,Ie.default),we.default.registerConstructor(we.default.SERIE_LINE_3D,je.default),we.default.registerConstructor(we.default.SERIE_LINE_COLORED,Oe.default),we.default.registerConstructor(we.default.SERIE_CONTOUR,Ve.default),we.default.registerConstructor(we.default.SERIE_BAR,Ne.default),we.default.registerConstructor(we.default.SERIE_BOX,Be.default),we.default.registerConstructor(we.default.SERIE_SCATTER,He.default),we.default.registerConstructor(we.default.SERIE_ZONE,Fe.default),we.default.registerConstructor(we.default.SERIE_ZONE_3D,ze.default),we.default.registerConstructor(we.default.SERIE_DENSITYMAP,We.default),we.default.registerConstructor('graph.plugin.shape',ot.default),we.default.registerConstructor('graph.plugin.drag',st.default),we.default.registerConstructor('graph.plugin.zoom',lt.default),we.default.registerConstructor('graph.plugin.selectScatter',nt.default),we.default.registerConstructor('graph.plugin.timeSerieManager',pt.default),we.default.registerConstructor('graph.plugin.serielinedifference',gt.default),we.default.registerConstructor('graph.plugin.serieLineDifference',gt.default),we.default.registerConstructor('graph.plugin.axissplitting',ut.default),we.default.registerConstructor('graph.plugin.makeTracesDifferent',ht.default),we.default.registerConstructor('graph.plugin.peakPicking',ct.default),we.default.registerConstructor('graph.shape',Re.default),we.default.registerConstructor('graph.shape.areaundercurve',Ue.default),we.default.registerConstructor('graph.shape.arrow',Ge.default),we.default.registerConstructor('graph.shape.ellipse',Ze.default),we.default.registerConstructor('graph.shape.label',qe.default),we.default.registerConstructor('graph.shape.polyline',Ke.default),we.default.registerConstructor('graph.shape.line',Qe.default),we.default.registerConstructor('graph.shape.nmrintegral',Je.default),we.default.registerConstructor('graph.shape.html',rt.default),we.default.registerConstructor('graph.shape.peakintegration2d',$e.default),we.default.registerConstructor('graph.shape.rect',et.default),we.default.registerConstructor('graph.shape.rectangle',et.default),we.default.registerConstructor('graph.shape.cross',tt.default),we.default.registerConstructor('graph.shape.peakboundariescenter',it.default),we.default.registerConstructor('graph.legend',Ee.default),we.default.registerConstructor('graph.waveform',xt.default),X.default=we.default,T.exports=X['default']})},function(u,A,S){var P,C,E;(function(T,X){C=[u,A,S(2),S(3),S(4),S(5)],P=X,E='function'==typeof P?P.apply(A,C):P,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y,I,B,O){'use strict';function W(Me){return Me&&Me.__esModule?Me:{default:Me}}function V(Me,ke,Se,_e){var ve=Me.getConstructor(_e,!0);if(ve||'string'!=typeof _e||(ve=Me.getConstructor('graph.serie.'+_e,!0)),ve){var Pe=new ve(Me,ke,Se);Me.appendSerieToDom(Pe)}else return ue.throwError('No constructor exists for the serie type provided. Use Graph.registerConstructor( name, constructor ) first is you use your own series');return Pe}function R(Me,ke){for(var Se=0,_e=ke.length,ve;Se<_e;Se++){ve=!0;for(var Pe=0,Ce=ke[Se].length;Pe<Ce;Pe++)Me[0]<ke[Se][Pe][0]&&Me[1]<ke[Se][Pe][0]||Me[0]>ke[Se][Pe][1]&&Me[1]>ke[Se][Pe][1]||(ve=!1);if(ve)return ke[Se].push(Me),Se}return ke.push([Me]),ke.length-1}function U(Me){var Le={top:[],bottom:[],left:[],right:[]},Ee={top:[],bottom:[],left:[],right:[]};Me._painted=!0,Me._applyToAxes(function(je,Ne){if(!je.isShown())return void je.hideGroup();if(je.showGroup(),!je.floating){var Be=R(je.getSpan(),Ee[Ne]);je.setLevel(Be),Le[Ne][Be]=Math.max(je.getAxisPosition(),Le[Ne][Be]||0)}},!1,!0,!1);var Te=Le.top.reduce(function(je,Ne){return je+Ne},0),Xe=Le.bottom.reduce(function(je,Ne){return je+Ne},0);Me.drawingSpaceHeight=Me.getDrawingHeight()-Te-Xe,[Le.top,Le.bottom].map(function(je){je.reduce(function(Ne,Be,Oe){return je[Oe]=Ne+Be,Ne+Be},0)}),Me._applyToAxes(function(je,Ne){!je.isShown()||je.floating||je.setShift(Le[Ne][je.getLevel()])},!1,!0,!1),Me._applyToAxes(function(je,Ne){if(je.isShown()?je.showGroup():je.hideGroup(),je.setMinPx(Te),je.setMaxPx(Me.getDrawingHeight(!0)-Xe),!je.floating){let Be=je.linkedToAxis?0:je.draw();if(je.isShown()){var Oe=R(je.getSpan(),Ee[Ne]);je.setLevel(Oe),Le[Ne][Oe]=Math.max(Be,Le[Ne][Oe]||0)}}},!1,!1,!0);var Ye=ue.extend(!0,{},Le);Me._applyToAxes(function(je,Ne){!je.isShown()||je.floating||(Ye[Ne][je.getLevel()]=Math.max(Le[Ne][je.getLevel()],je.equalizePosition(Le[Ne][je.getLevel()])))},!1,!1,!0),Le=Ye;var De=Le.left.reduce(function(je,Ne){return je+Ne},0),Ie=Le.right.reduce(function(je,Ne){return je+Ne},0);Me.drawingSpaceWidth=Me.getDrawingWidth()-De-Ie,[Le.left,Le.right].map(function(je){je.reduce(function(Ne,Be,Oe){return je[Oe]=Ne+Be,Ne+Be},0)}),Me._applyToAxes((je,Ne)=>{!je.isShown()||je.floating||je.setShift(Le[Ne][je.getLevel()])},!1,!1,!0),Me._applyToAxes(function(je){je.isShown()&&(je.setMinPx(De),je.setMaxPx(Me.getDrawingWidth(!0)-Ie),je.floating||!je.linkedToAxis&&je.draw())},!1,!0,!1),Me._applyToAxes(function(je){if(je.floating){var Ne=je.getFloatingAxis(),Be=je.getFloatingValue(),Oe=Ne.getPx(Be);je.setShift(Oe),je.linkedToAxis||je.draw()}},!1,!0,!0),oe(Me,'right',Me.getDrawingWidth(!0),Me.getDrawingWidth(!0),Te,Me.getDrawingHeight(!0)-Xe),oe(Me,'left',0,0,Te,Me.getDrawingHeight(!0)-Xe),oe(Me,'top',De,Me.getDrawingWidth(!0)-Ie,0,0),oe(Me,'bottom',De,Me.getDrawingWidth(!0)-Ie,Me.getDrawingHeight(!0)-Xe,Me.getDrawingHeight(!0)-Xe),Me.clipRect.setAttribute('y',Te),Me.clipRect.setAttribute('x',De),Me.clipRect.setAttribute('width',Me.getDrawingWidth()-De-Ie),Me.clipRect.setAttribute('height',Me.getDrawingHeight()-Te-Xe),Me.rectEvent.setAttribute('y',Te+Me.getPaddingTop()),Me.rectEvent.setAttribute('x',De+Me.getPaddingLeft()),Me.rectEvent.setAttribute('width',Me.drawingSpaceWidth),Me.rectEvent.setAttribute('height',Me.drawingSpaceHeight),Me.drawingSpaceMinX=De+Me.getPaddingLeft(),Me.drawingSpaceMinY=Te+Me.getPaddingTop(),Me.drawingSpaceMaxX=Me.getDrawingWidth()-Ie+Me.getPaddingLeft(),Me.drawingSpaceMaxY=Me.getDrawingHeight()-Xe+Me.getPaddingTop(),Me._applyToAxes(function(je){je.isShown()&&je.drawLines()},!1,!0,!0),Me.shift=Le,Me.redrawShapes()}function G(Me,ke,Se){return Me.forcedPlugin?(Me.activePlugin=Me.forcedPlugin,void Me._pluginExecute(Me.activePlugin,Se,[Me,e])):void Z(Me,ke,[Me,ke],Se)}function Z(Me,ke,Se,_e){var ve=Me.options.keyActions,Pe,Ce;for(Pe=0,Ce=ve.length;Pe<Ce;Pe++){if(ve[Pe].plugin){if(Me.forcedPlugin==ve[Pe].plugin||Me.isActionAllowed(ke,ve[Pe]))return ve[Pe].options&&Se.push(ve[Pe].options),Me.activePlugin=ve[Pe].plugin,Me._pluginExecute(ve[Pe].plugin,_e,Se),ke.preventDefault(),ke.stopPropagation(),!0;}else if(ve[Pe].callback&&Me.isActionAllowed(ke,ve[Pe]))return ve[Pe].options&&Se.push(ve[Pe].options),ke.preventDefault(),ke.stopPropagation(),ve[Pe].callback.apply(Me,Se),!0;ve[Pe].removeSelectedShape&&Me.isActionAllowed(ke,ve[Pe])&&(ke.preventDefault(),ke.stopPropagation(),Me.selectedShapes.map(we=>{we.kill()}))}return!1}function K(){this.dom=document.createElementNS(fe.ns,'svg'),this.dom.setAttributeNS('http://www.w3.org/2000/xmlns/','xmlns:xlink','http://www.w3.org/1999/xlink'),ue.setAttributeTo(this.dom,{xmlns:fe.ns,'font-family':this.options.fontFamily,'font-size':this.options.fontSize,'data-jsgraph-version':'v2.0.35'}),this.defs=document.createElementNS(fe.ns,'defs'),this.dom.appendChild(this.defs),this.groupEvent=document.createElementNS(fe.ns,'g'),this.rectEvent=document.createElementNS(fe.ns,'rect'),ue.setAttributeTo(this.rectEvent,{'pointer-events':'fill',fill:'transparent'}),this.groupEvent.appendChild(this.rectEvent),this.dom.appendChild(this.groupEvent),this.domTitle=document.createElementNS(fe.ns,'text'),this.setTitle(this.options.title),ue.setAttributeTo(this.domTitle,{'text-anchor':'middle',y:20}),this.groupEvent.appendChild(this.domTitle),this.graphingZone=document.createElementNS(fe.ns,'g'),this.updateGraphingZone(),this.groupEvent.appendChild(this.graphingZone),this.axisGroup=document.createElementNS(fe.ns,'g'),this.graphingZone.appendChild(this.axisGroup),this.groupGrids=document.createElementNS(fe.ns,'g'),this.groupPrimaryGrids=document.createElementNS(fe.ns,'g'),this.groupSecondaryGrids=document.createElementNS(fe.ns,'g'),this.axisGroup.appendChild(this.groupGrids),this.groupGrids.appendChild(this.groupSecondaryGrids),this.groupGrids.appendChild(this.groupPrimaryGrids),this.plotGroup=document.createElementNS(fe.ns,'g'),this.graphingZone.appendChild(this.plotGroup),this.layers=[],this._makeClosingLines(),this.clip=document.createElementNS(fe.ns,'clipPath'),this.clip.setAttribute('id','_clipplot'+this._creation),this.defs.appendChild(this.clip),this.clipRect=document.createElementNS(fe.ns,'rect'),this.clip.appendChild(this.clipRect),this.clip.setAttribute('clipPathUnits','userSpaceOnUse'),this.markerArrow=document.createElementNS(this.ns,'marker'),this.markerArrow.setAttribute('viewBox','0 0 10 10'),this.markerArrow.setAttribute('id','arrow'+this._creation),this.markerArrow.setAttribute('refX','6'),this.markerArrow.setAttribute('refY','5'),this.markerArrow.setAttribute('markerUnits','strokeWidth'),this.markerArrow.setAttribute('markerWidth','8'),this.markerArrow.setAttribute('markerHeight','6'),this.markerArrow.setAttribute('orient','auto');var Me=document.createElementNS(fe.ns,'path');Me.setAttribute('d','M 0 0 L 10 5 L 0 10 z'),this.markerArrow.appendChild(Me),this.defs.appendChild(this.markerArrow),this.markerHorizontalSplit=document.createElementNS(fe.ns,'marker'),this.markerHorizontalSplit.setAttribute('viewBox','0 0 6 8'),this.markerHorizontalSplit.setAttribute('id','horionzalsplit_'+this.getId()),this.markerHorizontalSplit.setAttribute('refX','3'),this.markerHorizontalSplit.setAttribute('refY','4'),this.markerHorizontalSplit.setAttribute('markerUnits','strokeWidth'),this.markerHorizontalSplit.setAttribute('markerWidth','6'),this.markerHorizontalSplit.setAttribute('markerHeight','8');var ke=document.createElementNS(fe.ns,'line');ke.setAttribute('x1','0'),ke.setAttribute('y1','8'),ke.setAttribute('x2','6'),ke.setAttribute('y2','0'),ke.setAttribute('stroke','black'),this.markerHorizontalSplit.appendChild(ke),this.defs.appendChild(this.markerHorizontalSplit),this.markerVerticalSplit=document.createElementNS(fe.ns,'marker'),this.markerVerticalSplit.setAttribute('viewBox','0 0 8 6'),this.markerVerticalSplit.setAttribute('id','verticalsplit_'+this.getId()),this.markerVerticalSplit.setAttribute('refX','4'),this.markerVerticalSplit.setAttribute('refY','3'),this.markerVerticalSplit.setAttribute('markerUnits','strokeWidth'),this.markerVerticalSplit.setAttribute('markerWidth','8'),this.markerVerticalSplit.setAttribute('markerHeight','6');var ke=document.createElementNS(fe.ns,'line');ke.setAttribute('x1','0'),ke.setAttribute('y1','0'),ke.setAttribute('x2','8'),ke.setAttribute('y2','6'),ke.setAttribute('stroke','black'),this.markerVerticalSplit.appendChild(ke),this.defs.appendChild(this.markerVerticalSplit),this.vertLineArrow=document.createElementNS(fe.ns,'marker'),this.vertLineArrow.setAttribute('viewBox','0 0 10 10'),this.vertLineArrow.setAttribute('id','verticalline'+this._creation),this.vertLineArrow.setAttribute('refX','0'),this.vertLineArrow.setAttribute('refY','5'),this.vertLineArrow.setAttribute('markerUnits','strokeWidth'),this.vertLineArrow.setAttribute('markerWidth','20'),this.vertLineArrow.setAttribute('markerHeight','10'),this.vertLineArrow.setAttribute('orient','auto'),this.vertLineArrow.setAttribute('stroke-width','1px');var Se=document.createElementNS(fe.ns,'path');Se.setAttribute('d','M 0 -10 L 0 10'),Se.setAttribute('stroke','black'),this.vertLineArrow.appendChild(Se),this.defs.appendChild(this.vertLineArrow),this.bypassHandleMouse=!1}function Q(Me){if(!Me.wrapper)throw'No wrapper exists. Cannot register the events.';Me.wrapper.addEventListener('keydown',Se=>{G(Me,Se,'keydown')}),Me.wrapper.addEventListener('keypress',Se=>{G(Me,Se,'keypress')}),Me.wrapper.addEventListener('keyup',Se=>{G(Me,Se,'keyup')}),Me.dom.addEventListener('mousemove',function(Se){var _e=Me._getXY(Se);$(Me,_e.x,_e.y,Se)}),Me.dom.addEventListener('mouseleave',function(){le(Me)}),Me.groupEvent.addEventListener('mousedown',function(Se){if(Me.focus(),!(3==Se.which||Se.ctrlKey)){var _e=Me._getXY(Se);J(Me,_e.x,_e.y,Se)}}),Me.dom.addEventListener('mouseup',function(Se){Me.emit('mouseUp',Se);var _e=Me._getXY(Se);Se.stopPropagation(),re(Me,_e.x,_e.y,Se)}),Me.dom.addEventListener('dblclick',function(Se){Me.emit('dblClick',Se);var _e=Me._getXY(Se);ie(Me,_e.x,_e.y,Se)}),Me.groupEvent.addEventListener('click',function(Se){if(!(3==Se.which||Se.ctrlKey)){var _e=Me._getXY(Se);Me.prevent(!1)||ae(Me,_e.x,_e.y,Se)}}),Me.groupEvent.addEventListener('mousewheel',function(Se){var _e=Se.wheelDeltaY||Se.wheelDelta||-Se.deltaY;return ne(Me,_e,Se),!1}),Me.groupEvent.addEventListener('wheel',function(Se){var _e=Se.wheelDeltaY||Se.wheelDelta||-Se.deltaY;return ne(Me,_e,Se),!1})}function J(Me,ke,Se,_e){return Me.forcedPlugin?(Me.activePlugin=Me.forcedPlugin,void Me._pluginExecute(Me.activePlugin,'onMouseDown',[Me,ke,Se,_e])):void(Me.activePlugin&&(Me.activePlugin=!1),ee(Me,_e,[Me,ke,Se,_e],'onMouseDown'))}function $(Me,ke,Se,_e){if(Me.bypassHandleMouse)return void Me.bypassHandleMouse.handleMouseMove(_e);if(!(Me.activePlugin&&Me._pluginExecute(Me.activePlugin,'onMouseMove',[Me,ke,Se,_e]))){if(Me._applyToAxes('handleMouseMove',[ke-Me.options.paddingLeft,_e],!0,!1),Me._applyToAxes('handleMouseMove',[Se-Me.options.paddingTop,_e],!1,!0),!Me.activePlugin){var ve;if(Me.options.trackingLine&&Me.options.trackingLine.enable&&Me.options.trackingLine.snapToSerie&&'common'==Me.options.trackingLine.mode){var Pe=Me.options.trackingLine.snapToSerie;if(ve=Pe.handleMouseMove(!1,!0),this.trackingObject)if(!ve)Me.trackingObject.hide();else{Me.trackingObject.show(),Me.trackingObject.getPosition(0).x=ve.xClosest,Me.trackingObject.getPosition(1).x=ve.xClosest,Me.trackingObject.redraw();var ke=Pe.getXAxis().getPx(ve.xClosest)+Me.options.paddingLeft}var Ce=Me.options.trackingLine.series;Ce||(Ce=Me.getSeries().map(function(Ee){return{serie:Ee,withinPx:20,withinVal:-1}})),Me._trackingLegend=ye(Me,Ce,ke,Se,Me._trackingLegend,Me.options.trackingLine.textMethod,ve.xClosest)}}if(Me.options.onMouseMoveData){for(var we={},Le=0;Le<Me.series.length;Le++)we[Me.series[Le].getName()]=Me.series[Le].handleMouseMove(!1,!0);Me.options.onMouseMoveData.call(Me,_e,we)}ee(Me,_e,[Me,ke,Se,_e],'onMouseMove')}}function ee(Me,ke,Se,_e){var ve=Me.options.mouseActions,we=!1,Pe,Ce;for(Pe=0,Ce=ve.length;Pe<Ce;Pe++)if(ve[Pe].plugin){if(Me.forcedPlugin==ve[Pe].plugin||Me.isActionAllowed(ke,ve[Pe])){ve[Pe].options&&Se.push(ve[Pe].options),'wheel'!==ke.type&&'mousewheel'!==ke.type&&(Me.activePlugin=ve[Pe].plugin),Me._pluginExecute(ve[Pe].plugin,_e,Se),we=!0;continue}}else if(ve[Pe].callback&&Me.isActionAllowed(ke,ve[Pe])){ve[Pe].options&&Se.push(ve[Pe].options),ve[Pe].callback.apply(Me,Se),we=!0;continue}else if(ve[Pe].series){var Le;'all'===ve[Pe].series&&(Le=Me.series),Array.isArray(ve[Pe].series)||(Le=[Le]),ve[Pe].options&&Se.push(ve[Pe].options);for(;0<Le.length;Pe++)Me._serieExecute(Le[Pe],_e,Se);we=!0;continue}return we}function te(Me){var ke=document.createElement('div');return ke.setAttribute('class','trackingLegend'),ke.style.position='absolute',ke.style.borderRadius='4px',ke.style.boxShadow='1px 1px 3px 0px rgba(100,100,100,0.6)',ke.style.border='2px solid #333333',ke.style.backgroundColor='rgba(255, 255, 255, 0.5 )',ke.style.pointerEvents='none',ke.style.paddingTop='5px',ke.style.paddingBottom='5px',ke.style.paddingLeft='10px',ke.style.paddingRight='10px',Me.getWrapper().insertBefore(ke,Me.getDom()),ke}function ie(Me,ke,Se,_e){Me.options.dblclick;ee(Me,_e,[ke,Se,_e],'onDblClick')}function re(Me,ke,Se,_e){return Me.bypassHandleMouse?(Me.bypassHandleMouse.handleMouseUp(_e),void(Me.activePlugin=!1)):void(Me._pluginExecute(Me.activePlugin,'onMouseUp',[Me,ke,Se,_e]),Me.activePlugin=!1)}function ae(Me,ke,Se,_e){Me.emit('click',[Me,ke,Se,_e]),ee(Me,_e,[ke,Se,_e],'onClick'),_e.target.jsGraphIsShape||Me.prevent(!1)||!Me.options.shapesUnselectOnClick||Me.unselectShapes()}function se(Me,ke,Se,_e){var Se=Se||{},Pe={def:{x:Me.getConstructor('graph.axis.x'),y:Me.getConstructor('graph.axis.y')},time:{x:Me.getConstructor('graph.axis.x.time')},bar:{x:Me.getConstructor('graph.axis.x.bar')}},ve;switch(Se.type){case'time':var Ce=Pe.time;break;case'bar':var Ce=Pe.bar;break;case'broken':var Ce=Pe.broken;break;default:var Ce=Pe.def;}return'top'===_e||'bottom'===_e?ve=Ce.x:'left'===_e||'right'===_e?ve=Ce.y:void 0,ke=ke||0,'object'==typeof ke&&(Se=ke,ke=0),Me.axis[_e][ke]||(Me.axis[_e][ke]=new ve(Me,_e,Se),Me.axis[_e][ke].init(Me,Se)),Me.axis[_e][ke]}function oe(Me,ke,Se,_e,ve,Pe){if(!1!==Me.options.close){var Ce=0;Me.axis[ke].map(function(we){we.isDisplayed()&&!we.floating&&Ce++}),(!0===Me.options.close||Me.options.close[ke])&&0==Ce?(Me.closingLines[ke].setAttribute('display','block'),Me.closingLines[ke].setAttribute('x1',Se),Me.closingLines[ke].setAttribute('x2',_e),Me.closingLines[ke].setAttribute('y1',ve),Me.closingLines[ke].setAttribute('y2',Pe)):Me.closingLines[ke].setAttribute('display','none')}}function ne(Me,ke,Se){ee(Me,Se,[ke,Se],'onMouseWheel')&&(Se.preventDefault(),Se.stopPropagation())}function le(Me){Me.options.handleMouseLeave&&Me.options.handleMouseLeave.call(Me)}function pe(Me){var ke=Me._axesHaveChanged;return Me._axesHaveChanged=!1,ke}function de(Me){var ke=Me._sizeChanged;return Me._sizeChanged=!1,ke}Object.defineProperty(X,'__esModule',{value:!0});var ge=W(Y),ue=function(Me){if(Me&&Me.__esModule)return Me;var ke={};if(null!=Me)for(var Se in Me)Object.prototype.hasOwnProperty.call(Me,Se)&&(ke[Se]=Me[Se]);return ke.default=Me,ke}(I),he=W(B),ce=W(O);const xe={title:'',paddingTop:30,paddingBottom:5,paddingLeft:20,paddingRight:20,close:{left:!0,right:!0,top:!0,bottom:!0},closeColor:'black',fontSize:12,fontFamily:'Myriad Pro, Helvetica, Arial',plugins:{},pluginAction:{},mouseActions:[],keyActions:[],wheel:{},dblclick:{},shapesUnselectOnClick:!0,shapesUniqueSelection:!0};var me=new Map;class fe extends he.default{constructor(Me,ke,Se){for(var _e in super(),this._creation=ue.guid(),this._drawn=!1,Me!==Object(Me)||Me instanceof HTMLElement?'string'==typeof Me?Me=document.getElementById(Me):'number'==typeof Me.length&&(Me=Me[0]):(Se=ke,ke=Me,Me=null),this.options=ue.extend({},xe,ke),K.bind(this)(),Me&&this.setWrapper(Me),this.prevented=!1,this.axis={left:[],top:[],bottom:[],right:[]},this.shapes=[],this.shapesLocked=!1,this.plugins={},this.options.pluginAction)this.options.pluginAction.plugin=_e,this.options.mouseActions.push(this.options.pluginAction);if(this.selectedShapes=[],this.series=[],this._axesHaveChanged=!0,this.options.hasOwnProperty('padding')&&ue.isNumeric(this.options.padding)&&(this.options.paddingTop=this.options.paddingBottom=this.options.paddingLeft=this.options.paddingRight=this.options.padding),this.currentAction=!1,this.ns=fe.ns,this.nsxlink=fe.nsxlink,Se)for(var _e in Se)for(var ve=0,Pe=Se[_e].length;ve<Pe;ve++)'top'==_e?this.getTopAxis(ve,Se[_e][ve]):'bottom'==_e?this.getBottomAxis(ve,Se[_e][ve]):'left'==_e?this.getLeftAxis(ve,Se[_e][ve]):'right'==_e?this.getRightAxis(ve,Se[_e][ve]):void 0;this._pluginsInit()}setWrapper(Me){if(!Me)throw'The wrapper DOM element was not found.';if(!Me.appendChild)throw'The wrapper appears to be an invalid HTMLElement';if(Me.style['-webkit-user-select']='none',Me.style['-moz-user-select']='none',Me.style['-o-user-select']='none',Me.style['-ms-user-select']='none',Me.style['user-select']='none',Me.style.position='relative',Me.style.outline='none',this.wrapper=Me,!this.height||!this.width){var ke=getComputedStyle(Me),Se=parseInt(ke.width),_e=parseInt(ke.height);this.setSize(Se,_e),this._resize()}Me.appendChild(this.dom),Q(this)}getDom(){return this.dom}getId(){return this._creation}getWrapper(){return this.wrapper}setOption(Me,ke){return this.options[Me]=ke,this}setTitle(Me){this.options.title=Me,this.domTitle.textContent=Me}displayTitle(){this.domTitle.setAttribute('display','inline')}hideTitle(){this.domTitle.setAttribute('display','none')}hide(){'none'!==this.dom.style.display&&(this.dom.style.display='none')}show(){'none'==this.dom.style.display&&(this.dom.style.display='initial')}redraw(Me,ke){if(this.width&&this.height)return this.sizeSet?!Me||ke||pe(this)||de(this)?(this.executeRedrawSlaves(),U(this),!0):(this.executeRedrawSlaves(!0),!1):(this._resize(),this.executeRedrawSlaves(),!0)}executeRedrawSlaves(){this._pluginsExecute('preDraw')}draw(Me){this.drawn=!0,this.updateLegend(!0),this.drawSeries(this.redraw(!0,Me)),this._pluginsExecute('postDraw')}delayUpdate(){return this._lockUpdate=!0,this}doUpdate(){return this.legend&&this.legend.update(),this.draw(),this.legend&&this.legend.update(),this}resumeUpdate(){return this._lockUpdate=!1,this}isDelayedUpdate(){return this._lockUpdate}setWidth(Me,ke){this.width=Me,ke||this._resize()}setHeight(Me,ke){this.height=Me,ke||this._resize()}resize(Me,ke){return Me&&ke&&this.setSize(Me,ke),this._resize(),this}setSize(Me,ke){this.setWidth(Me,!0),this.setHeight(ke,!0),this.getDrawingHeight(),this.getDrawingWidth()}getWidth(){return this.width}getHeight(){return this.height}getPaddingTop(){return this.options.paddingTop}getPaddingLeft(){return this.options.paddingLeft}getPaddingBottom(){return this.options.paddingBottom}getPaddingRight(){return this.options.paddingRight}getDrawingHeight(Me){return Me&&this.innerHeight?this.innerHeight:this.innerHeight=this.height-this.options.paddingTop-this.options.paddingBottom}getDrawingWidth(Me){return Me&&this.innerWidth?this.innerWidth:this.innerWidth=this.width-this.options.paddingLeft-this.options.paddingRight}cacheOffset(){this.offsetCached=ue.getOffset(this.wrapper)}uncacheOffset(){this.offsetCached=!1}getXAxis(Me,ke){return 0<this.axis.top.length&&0==this.axis.bottom.length?this.getTopAxis(Me,ke):this.getBottomAxis(Me,ke)}getYAxis(Me,ke){return 0<this.axis.right.length&&0==this.axis.left.length?this.getRightAxis(Me,ke):this.getLeftAxis(Me,ke)}getTopAxis(Me,ke){return se(this,Me,ke,'top')}getBottomAxis(Me,ke){return se(this,Me,ke,'bottom')}getLeftAxis(Me,ke){return se(this,Me,ke,'left')}getRightAxis(Me,ke){return se(this,Me,ke,'right')}setXAxis(Me,ke){this.setBottomAxis(Me,ke)}setYAxis(Me,ke){this.setLeftAxis(Me,ke)}setLeftAxis(Me,ke){ke=ke||0,this.axis.left[ke]&&this.axis.left[ke].kill(),this.axis.left[ke]=Me}setRightAxis(Me,ke){ke=ke||0,this.axis.right[ke]&&this.axis.right[ke].kill(),this.axis.right[ke]=Me}setTopAxis(Me,ke){ke=ke||0,this.axis.top[ke]&&this.axis.top[ke].kill(),this.axis.top[ke]=Me}setBottomAxis(Me,ke){ke=ke||0,this.axis.bottom[ke]&&this.axis.bottom[ke].kill(),this.axis.bottom[ke]=Me}killAxis(Me,ke=!1,Se=!1){var _e;Me.isX()&&(-1<(_e=this.axis.bottom.indexOf(Me))&&this.axis.bottom.splice(_e,1),-1<(_e=this.axis.top.indexOf(Me))&&this.axis.top.splice(_e,1),!Se&&this.series.map(ve=>{ve.getXAxis()==Me&&ve.kill()})),Me.isY()&&(-1<(_e=this.axis.left.indexOf(Me))&&this.axis.left.splice(_e,1),-1<(_e=this.axis.right.indexOf(Me))&&this.axis.right.splice(_e,1),!Se&&this.series.map(ve=>{ve.getYAxis()==Me&&ve.kill()})),this.axisGroup.removeChild(Me.group),this.groupPrimaryGrids.removeChild(Me.gridPrimary),this.groupSecondaryGrids.removeChild(Me.gridSecondary),ke||this.draw(!0)}hasXAxis(Me){return this.hasTopAxis(Me)||this.hasBottomAxis(Me)}hasYAxis(Me){return this.hasLeftAxis(Me)||this.hasRightAxis(Me)}hasTopAxis(Me){return this.hasAxis(Me,this.axis.top)}hasBottomAxis(Me){return this.hasAxis(Me,this.axis.bottom)}hasLeftAxis(Me){return this.hasAxis(Me,this.axis.left)}hasRightAxis(Me){return this.hasAxis(Me,this.axis.right)}hasAxis(Me,ke){for(var Se=0,_e=ke.length;Se<_e;Se++){if(ke[Se]==Me)return!0;if(ke[Se].hasAxis(Me))return!0}return!1}autoscaleAxes(){return this._applyToAxes('setMinMaxToFitSeries',null,!0,!0),this}autoscale(){return this.autoscaleAxes(...arguments)}autoScale(){return this.autoscaleAxes(...arguments)}autoScaleAxes(){return this.autoscaleAxes(...arguments)}autoScaleAxis(Me){return Me?(Me.setMinMaxToFitSeries(),this):this}setBackgroundColor(Me){return this.rectEvent.setAttribute('fill',Me),this}getAxisState(){var Me={};for(var ke in this.axis)Me[ke]=this.axis[ke].map(function(Se){return[Se.getCurrentMin(),Se.getCurrentMax()]});return Me}setAxisState(Me){var ke,Se;for(var _e in Me)if(this.axis[_e])for(ke=0,Se=Me[_e].length;ke<Se;ke++)this.axis[_e][ke]&&(this.axis[_e][ke].setCurrentMin(Me[_e][ke][0]),this.axis[_e][ke].setCurrentMax(Me[_e][ke][1]));this.draw()}saveAxisState(Me){return this.savedAxisState=this.savedAxisState||{},this.savedAxisState[Me]=this.getAxisState(),this}recallAxisState(){return this.savedAxisState[savedName]&&this.recallAxisState(this.savedAxisState[savedName]),this}_applyToAxis(Me){switch(Me){case'string':return function(ke,Se,_e){for(var ve=0;ve<this.axis[ke].length;ve++)this.axis[ke][ve][Se].apply(this.axis[ke][ve],_e)};break;case'function':return function(ke,Se,_e){for(var ve=0;ve<this.axis[ke].length;ve++)Se.call(this,this.axis[ke][ve],ke,_e)};}}getBoundaryAxis(Me,ke,Se){var _e=this.getBoundaryAxisFromSeries(Me,ke,Se);return _e}getBoundaryAxisFromSeries(Me,ke,Se){var _e='min'==ke,Pe=Me.isX()?['getMinX','getMaxX']:['getMinY','getMaxY'],Ce=Pe[_e?0:1],we=_e?+(1/0):-(1/0),ve,Ee,Te,Xe,Ye,De;for(ve=_e?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,Te=this.getSeriesFromAxis(Me),(Ye=0,De=Te.length);Ye<De;Ye++)(Ee=Te[Ye],!!Ee.isShown())&&(Xe=Ee[Ce](Se),ve=Math[ke](isNaN(ve)?we:ve,isNaN(Xe)?we:Xe));return ve}getSeriesFromAxis(Me){for(var ke=[],Se=this.series.length-1;0<=Se;Se--)(this.series[Se].getXAxis()==Me||this.series[Se].getYAxis()==Me)&&ke.push(this.series[Se]);return ke}updateDataMinMaxAxes(Me){var ke=['bottom','top','left','right'],Se,_e,ve,Pe,Ce;for(_e=0,ve=ke.length;_e<ve;_e++)for(Pe=this.axis[ke[_e]].length-1;0<=Pe;Pe--)Se=this.axis[ke[_e]][Pe],Ce=2>_e?'x':'y',!Se.isShown(),Se.setMinValueData(this.getBoundaryAxis(this.axis[ke[_e]][Pe],'min',Me)),Se.setMaxValueData(this.getBoundaryAxis(this.axis[ke[_e]][Pe],'max',Me))}_applyToAxes(Me,ke,Se,_e){var ve=[],Pe=0,Ce;for((Se||void 0==Se)&&(ve.push('top'),ve.push('bottom')),(_e||void 0==_e)&&(ve.push('left'),ve.push('right')),Ce=ve.length;Pe<Ce;Pe++)this._applyToAxis(typeof Me).call(this,ve[Pe],Me,ke)}findAxesLinkedTo(Me){var ke=[];return this._applyToAxes(function(Se){Se.linkedToAxis&&Se.linkedToAxis.axis==Me&&ke.push(Se)},{},Me instanceof this.getConstructor('graph.axis.x'),Me instanceof this.getConstructor('graph.axis.y')),ke}_axisHasChanged(){this._axesHaveChanged=!0}newSerie(Me,ke,Se){let _e;return('object'==typeof ke||Se||(Se=ke,ke={}),Se||(Se=fe.SERIE_LINE),_e=this.getSerie(Me))?_e:(_e=V(this,Me,ke,Se))?(this.series.push(_e),this.emit('newSerie',_e),_e):void 0}getSerie(Me){if('number'==typeof Me)return this.series[Me]||!1;'function'==typeof Me&&(Me=Me());for(var ke=0,Se=this.series.length;ke<Se;ke++)if(this.series[ke].getName()==Me||this.series[ke]==Me)return this.series[ke];return!1}getSeries(){return this.series}allSeries(...Me){return this.series.filter(ke=>{return Me.include(ke.getType())})}drawSerie(Me,ke){if(!Me.draw)throw'Serie has no method draw';Me.draw(ke)}drawSeries(Me){if(this.width&&this.height)for(var ke=this.series.length-1;0<=ke;ke--)this.series[ke].isShown()&&this.drawSerie(this.series[ke],Me)}resetSeries(){this.removeSeries()}killSeries(){this.resetSeries()}removeSeries(){for(;this.series[0];)this.series[0].kill(!0);this.series=[],this.legend&&this.legend.update()}selectSerie(Me,ke){'object'==typeof Me||(Me=this.getSerie(Me));this.selectedSerie==Me&&this.selectedSerie.selectionType==ke||(this.selectedSerie!==Me&&this.selectedSerie&&this.unselectSerie(this.selectedSerie),this.selectedSerie=Me,this.triggerEvent('onSelectSerie',Me),Me.select(ke||'selected'))}getSelectedSerie(){return this.selectedSerie}unselectSerie(Me){Me.unselect&&(Me.unselect(),this.selectedSerie=!1,this.triggerEvent('onUnselectSerie',Me))}getShapesOfSerie(Me){for(var ke=[],Se=this.shapes.length-1;0<=Se;Se--)this.shapes[Se].getSerie()==Me&&ke.push(this.shapes[Se]);return ke}makeToolbar(Me){var ke=this.getConstructor('graph.toolbar');return ke?this.toolbar=new ke(this,Me):ue.throwError('No constructor exists for toolbar')}getShapes(){return this.shapes||[]}newShape(Me,ke,Se,_e){var ve=this;if(this.prevent(!1),!Se&&(this.emit('beforeNewShape',ke),this.prevent(!1)))return!1;'object'==typeof Me&&(Se=ke,ke=Me,Me=ke.type),ke=ke||{},ke._id=ue.guid();var Ce;if(Ce='function'==typeof Me?Me:this.getConstructor('graph.shape.'+Me),!Ce)return ue.throwError('No constructor for this shape');var we=new Ce(this,ke);if(!we)return ue.throwError('Failed to construct shape.');if(we.type=Me,we.graph=this,we._data=ke,void 0!==ke.properties&&we.setProperties(ke.properties),we.init(this,_e),ke.position)for(var Le=0,Ee=ke.position.length;Le<Ee;Le++)we.setPosition(new ge.default(ke.position[Le]),Le);if(void 0!==ke.fillColor&&we.setFillColor(ke.fillColor),void 0!==ke.fillOpacity&&we.setFillOpacity(ke.fillOpacity),void 0!==ke.strokeColor&&we.setStrokeColor(ke.strokeColor),void 0!==ke.strokeWidth&&we.setStrokeWidth(ke.strokeWidth),void 0!==ke.layer&&we.setLayer(ke.layer),!0==ke.locked&&we.lock(),!0==ke.movable&&we.movable(),!0==ke.selectable&&we.selectable(),!0==ke.resizable&&we.resizable(),void 0!==ke.attributes&&we.setProp('attributes',ke.attributes),void 0!==ke.handles&&we.setProp('handles',ke.handles),void 0!==ke.selectOnMouseDown&&we.setProp('selectOnMouseDown',!0),void 0!==ke.selectOnClick&&we.setProp('selectOnClick',!0),void 0!==ke.highlightOnMouseOver&&we.setProp('highlightOnMouseOver',!0),ke.labelEditable&&we.setProp('labelEditable',ke.labelEditable),ke.labels&&!ke.label&&(ke.label=ke.labels),void 0!==ke.label){Array.isArray(ke.label)||(ke.label=[ke.label]);for(var Le=0,Ee=ke.label.length;Le<Ee;Le++)we.showLabel(Le),we.setLabelText(ke.label[Le].text,Le),we.setLabelPosition(ke.label[Le].position,Le),we.setLabelColor(ke.label[Le].color||'black',Le),we.setLabelSize(ke.label[Le].size,Le),we.setLabelAngle(ke.label[Le].angle||0,Le),we.setLabelBaseline(ke.label[Le].baseline||'no-change',Le),we.setLabelAnchor(ke.label[Le].anchor||'start',Le),we.setLabelBackgroundColor(ke.label[Le].backgroundColor||'transparent',Le),we.setLabelBackgroundOpacity(ke.label[Le].backgroundOpacity||1,Le)}return console.log(ke.serie,this.getSerie(ke.serie)),ke.serie&&we.setSerie(this.getSerie(ke.serie)),we.createHandles(),this.shapes.push(we),Se||this.emit('newShape',we,ke),we}newPosition(){return new ge.default(...arguments)}redrawShapes(){for(var Me=0,ke=this.shapes.length;Me<ke;Me++)this.shapes[Me].redraw()}removeShapes(){for(var Me=0,ke=this.shapes.length;Me<ke;Me++)this.shapes[Me]&&this.shapes[Me].kill&&this.shapes[Me].kill(!0);this.shapes=[]}selectShape(Me,ke){if(Me){if(-1<this.selectedShapes.indexOf(Me))return!1;if(!Me.isSelectable())return!1;ke||this.emit('beforeShapeSelect',Me),this.prevent(!1)||(0<this.selectedShapes.length&&this.options.shapesUniqueSelection&&this.unselectShapes(ke),Me._select(ke),this.selectedShapes.push(Me),!ke&&this.emit('shapeSelect',Me))}}getSelectedShapes(){return this.selectedShapes}unselectShape(Me,ke){if(-1!=this.selectedShapes.indexOf(Me))return ke||this.emit('beforeShapeUnselect',Me),this.cancelUnselectShape?void(this.cancelUnselectShape=!1):void(Me._unselect(),this.selectedShapes.splice(this.selectedShapes.indexOf(Me),1),!ke&&this.emit('shapeUnselect',Me))}unselectShapes(Me){for(;this.selectedShapes[0];)this.unselectShape(this.selectedShapes[0],Me);return this}_removeShape(Me){this.shapes.splice(this.shapes.indexOf(Me),1)}appendShapeToDom(Me){Me.isHTML()&&this.wrapper.insertBefore(Me._dom,this.dom),this.getLayer(Me.getLayer(),'shape').appendChild(Me.group)}removeShapeFromDom(Me){Me.isHTML()&&this.wrapper.removeChild(Me._dom),this.getLayer(Me.getLayer(),'shape').removeChild(Me.group)}appendSerieToDom(Me){this.getLayer(Me.getLayer(),'serie').appendChild(Me.groupMain)}removeSerieFromDom(Me){this.getLayer(Me.getLayer(),'serie').removeChild(Me.groupMain)}getLayer(Me,ke){if(!this.layers[Me]){this.layers[Me]=[],this.layers[Me][0]=document.createElementNS(fe.ns,'g'),this.layers[Me][0].setAttribute('data-layer',Me),this.layers[Me][1]=document.createElementNS(fe.ns,'g'),this.layers[Me][2]=document.createElementNS(fe.ns,'g'),this.layers[Me][0].appendChild(this.layers[Me][1]),this.layers[Me][0].appendChild(this.layers[Me][2]);for(var Se=1,_e;!(_e=this.layers[Me-Se])&&0<=Me-Se;)Se++;_e?_e.nextSibling?this.plotGroup.insertBefore(this.layers[Me][0],_e.nextSibling):this.plotGroup.appendChild(this.layers[Me][0]):this.plotGroup.insertBefore(this.layers[Me][0],this.plotGroup.firstChild)}return this.layers[Me]['shape'==ke?2:1]}focus(){this.wrapper.focus()}elementMoving(Me){this.bypassHandleMouse=Me}stopElementMoving(Me){Me&&Me==this.bypassHandleMouse?this.bypassHandleMouse=!1:!Me&&(this.bypassHandleMouse=!1)}_makeClosingLines(){this.closingLines={};for(var Me=['top','bottom','left','right'],ke=0,_e;ke<4;ke++)_e=document.createElementNS(fe.ns,'line'),_e.setAttribute('stroke',this.options.closeColor),_e.setAttribute('shape-rendering','crispEdges'),_e.setAttribute('stroke-linecap','square'),_e.setAttribute('display','none'),this.closingLines[Me[ke]]=_e,this.graphingZone.appendChild(_e)}isActionAllowed(Me,ke){if((ke.type===Me.type||void 0===ke.type&&'mousedown'===Me.type||('wheel'===Me.type||'mousewheel'===Me.type)&&'mousewheel'==ke.type)&&!(ke.enabled&&('function'==typeof ke.enabled?!ke.enabled(this):!actions.enabled))){if(ke.key&&ke.key!==Me.keyCode){if({backspace:8,enter:13,tab:9,shift:16,ctrl:17,alt:18,pause:19,escape:27,up:33,down:34,left:37,right:39}[ke.key]!==Me.keyCode)return}return void 0===ke.shift&&(ke.shift=!1),void 0===ke.ctrl&&(ke.ctrl=!1),void 0===ke.meta&&(ke.meta=!1),void 0===ke.alt&&(ke.alt=!1),Me.shiftKey==ke.shift&&Me.ctrlKey==ke.ctrl&&Me.metaKey==ke.meta&&Me.altKey==ke.alt}}forcePlugin(Me){this.forcedPlugin=Me}unforcePlugin(){this.forcedPlugin=!1}_pluginsExecute(Me,ke){for(var Se in this.plugins)this.plugins[Se]&&this.plugins[Se][Me]&&this.plugins[Se][Me].apply(this.plugins[Se],ke)}_pluginExecute(Me,ke,Se){return Me?this.plugins[Me]&&this.plugins[Me][ke]?(this.plugins[Me][ke].apply(this.plugins[Me],Se),!0):void 0:void 0}pluginYieldActiveState(){this.activePlugin=!1}_serieExecute(Me,ke,Se){'object'!=typeof serie&&(serie=this.getSerie(serie)),'function'==typeof serie[ke]&&serie.apply(serie,Se)}_pluginsInit(){var Me,ke,Se;for(var _e in this.options.plugins)ke=_e,Se=this.options.plugins[_e],Me=this.getConstructor('graph.plugin.'+ke),Me?(this.plugins[ke]=new Me(Se),ue.mapEventEmission(this.plugins[ke].options,this.plugins[ke]),this.plugins[ke].init(this,Se)):ue.throwError('Plugin "'+ke+'" has not been registered')}getPlugin(Me){var ke=this.plugins[Me];return ke?ke:ue.throwError('Plugin "'+Me+'" has not been loaded or properly registered')}triggerEvent(){var Me=arguments[0],ke=Array.prototype.splice.apply(arguments,[0,1]);return'function'==typeof this.options[Me]?this.options[Me].apply(this,arguments):void 0}makeLegend(Me){if(this.legend)return this.legend;var ke=this.getConstructor('graph.legend');if(ke)this.legend=new ke(this,Me);else return ue.throwError('Graph legend is not available as it has not been registered');return this.legend}updateLegend(Me=!1){if(this.legend)return this.legend.update(Me),this}getLegend(){return this.legend?this.legend:void 0}requireLegendUpdate(){this.legend&&this.legend.requireDelayedUpdate()}orthogonalProjectionSetup(){this.options.zAxis=ue.extend(!0,{maxZ:10,minZ:0,shiftX:-25,shiftY:-15,xAxis:this.getXAxis(),yAxis:this.getYAxis()})}orthogonalProjectionUpdate(){this.zAxis||(this.zAxis={g:document.createElementNS(fe.ns,'g'),l:document.createElementNS(fe.ns,'line')},this.zAxis.g.appendChild(this.zAxis.l),this.groupGrids.appendChild(this.zAxis.g));let Me=this.options.zAxis.xAxis,ke=this.options.zAxis.yAxis;var Se=Me.getMinPx(),_e=ke.getMinPx(),ve=Me.getZProj(this.options.zAxis.maxZ),Pe=ke.getZProj(this.options.zAxis.maxZ);this.zAxis.l.setAttribute('stroke','black'),this.zAxis.l.setAttribute('x1',Se),this.zAxis.l.setAttribute('x2',Se+ve),this.zAxis.l.setAttribute('y1',_e),this.zAxis.l.setAttribute('y2',_e+Pe),this.updateDataMinMaxAxes(!0);var Ce=this.series.map(Le=>{return[Le.getZPos(),Le]});Ce.sort((Le,Ee)=>{return Ee[0]-Le[0]});let we=0;Ce.forEach(Le=>{Le[1].setLayer(we),this.appendSerieToDom(Le[1]),we++}),this.drawSeries(!0)}kill(){this.wrapper.removeChild(this.dom)}_removeSerie(Me){this.series.splice(this.series.indexOf(Me),1)}contextListen(Me,ke,Se){this;if(this.options.onContextMenuListen)return this.options.onContextMenuListen(Me,ke,Se)}lockShapes(){this.shapesLocked=!0;for(var Me=0,ke=this.shapes.length;Me<ke;Me++)this.shapes[Me].moving=!1,this.shapes[Me].resizing=!1}unlockShapes(){this.shapesLocked=!1}prevent(Me){var ke=this.prevented;return-1!=Me&&(this.prevented=void 0==Me||Me),ke}_getXY(Me){var ke=Me.clientX,Se=Me.clientY,_e=this.offsetCached||ue.getOffset(this.wrapper);return ke-=_e.left,Se-=_e.top,{x:ke,y:Se}}_resize(){this.width&&this.height&&(this.getDrawingWidth(),this.getDrawingHeight(),this.sizeSet=!0,this.dom.setAttribute('width',this.width),this.dom.setAttribute('height',this.height),this.domTitle.setAttribute('x',this.width/2),this._sizeChanged=!0,this.drawn&&(this.requireLegendUpdate(),this.draw(!0)))}updateGraphingZone(){ue.setAttributeTo(this.graphingZone,{transform:'translate('+this.options.paddingLeft+', '+this.options.paddingTop+')'}),this._sizeChanged=!0}getDrawingSpaceWidth(){return()=>this.drawingSpaceWidth}getDrawingSpaceHeight(){return()=>this.drawingSpaceHeight}getDrawingSpaceMinX(){return()=>this.drawingSpaceMinX}getDrawingSpaceMinY(){return()=>this.drawingSpaceMinY}getDrawingSpaceMaxX(){return()=>this.drawingSpaceMaxX}getDrawingSpaceMaxY(){return()=>this.drawingSpaceMaxY}trackingLine(Me){var ke=this;return'boolean'==typeof Me?void(this.options.trackingLine&&(this.options.trackingLine.enable=Me)):(Me&&(this.options.trackingLine=Me),Me.series=Me.series||[],Me.enable=void 0===Me.enable||!!Me.enable,'individual'==Me.mode?Me.series&&(!Array.isArray(Me.series)&&('all'==Me.series?Me.series=this.series.map(Se=>{serie:;}):Me.series=[Me.series]),Me.series.forEach(Se=>{if('object'!=typeof Se.serie){if('object'!=typeof Se)throw'Misuse of the trackingLine() method. Each serie must be an object with the serie property: { series: [ { serie: jsGraphSerie, options: { ... someOptions } } ] }';Se.serie=this.getSerie(Se.serie)}Se.serie&&ke.addSerieToTrackingLine(Se.serie,Se)})):Me.series.map(Se=>{Se.serie.disableTracking()}),!Me.noLine)?(this.trackingObject||(this.trackingObject=this.newShape('line',ue.extend(!0,{position:[{y:'min'},{y:'max'}],stroke:'black',layer:-1},Me.trackingLineShapeOptions))),this.trackingObject.draw(),this.trackingObject):void 0}addSerieToTrackingLine(Me,ke){this.options.trackingLine||this.trackingLine({mode:'individual'}),this.options.trackingLine.series.push(Object.assign({serie:Me},ke)),Me.enableTracking((Se,_e,ve,Pe)=>{this.options.trackingLine.enable&&_e&&(this.trackingObject&&(this.trackingObject.show(),this.trackingObject.getPosition(0).x=_e.trueX,this.trackingObject.getPosition(1).x=_e.trueX,this.trackingObject.redraw()),Se._trackingLegend=ye(this,{serie:Se},ve,Pe,Se._trackingLegend,ke.textMethod?ke.textMethod:Ce=>{for(var we in Ce){return Ce[we].serie.serie.getName()+': '+Ce[we].serie.serie.getYAxis().valueToHtml(Ce[we].yValue)}},_e.trueX),Se._trackingLegend&&(Se._trackingLegend.style.display='block'))},Se=>{this.trackingObject&&this.trackingObject.hide(),Se.trackingShape&&Se.trackingShape.hide(),Se._trackingLegend&&(Se._trackingLegend.style.display='none'),Se._trackingLegend=ye(this,{serie:Se},!1,!1,Se._trackingLegend,!1,!1)})}setKatexRenderer(Me){this._katexRenderer=Me}hasKatexRenderer(){return!!this._katexRenderer}renderWithKatex(Me,ke){if(this._katexRenderer){ke?ke.removeChild(ke.firstChild):ke=document.createElementNS(fe.ns,'foreignObject');let Se=document.createElement('div');return ke.appendChild(Se),this._katexRenderer(Me,Se),ke}return!1}static fromJSON(Me,ke){let _e={},ve={left:[],top:[],right:[],bottom:[]},Se,Ce;return Me.title&&(_e.title=Me.title),Me.axis&&Me.axis.map(function(we){we.type||ue.throwError('Axis type is required (top, bottom, left or right)');var Le={};we.label&&(Le.labelValue=we.label),void 0!==we.unit&&(Le.unit=we.unit),void 0!==we.unitWrapperAfter&&(Le.unitWrapperAfter=we.unitWrapperAfter),void 0!==we.unitWrapperBefore&&(Le.unitWrapperBefore=we.unitWrapperBefore),void 0!==we.min&&(Le.forcedMin=we.min),void 0!==we.max&&(Le.forcedMax=we.max),void 0!==we.flip&&(Le.flipped=we.flip),ve[we.type].push(Le),we._jsGraphIndex=ve[we.type].length-1}),Se=new fe(ke,_e,ve),Me.width&&Se.setWidth(Me.width),Me.height&&Se.setHeight(Me.width),Se._resize(),Me.data&&Me.data.map(function(we){var Le=we.type,Te={},Ee,Xe;let Ye;switch(we.type){case'bar':ue.throwError('Bar charts not supported'),Le=!1;break;case'color':Le=fe.SERIE_LINE_COLORED;break;case'scatter':Le=fe.SERIE_SCATTER;break;case'box':Le=fe.SERIE_BOX,('x'==we.orientation||'y'==we.orientation)&&(Te.orientation=we.orientation);break;default:Le=fe.SERIE_LINE;}if(Le!==fe.SERIE_BOX&&(Ye=fe.newWaveform()),!Le)return void ue.throwError('No valid serie type was found');if(Ee=Se.newSerie(we.id||we.label||ue.guid(),Te,Le),we.lineStyle&&(Array.isArray(lineStyle)&&(lineStyle={unselected:lineStyle}),lineStyle.entries().forEach(([Re,Ue])=>{var Ge={};Le===fe.SERIE_LINE?(void 0!==Ue.lineWidth&&(Ge.lineWidth=Ue.lineWidth),void 0!==Ue.color&&(Ge.lineColor=Ue.color),Ue.lineStyle&&(Ge.lineStyle=Ue.lineStyle),Ee.setStyle(Ge,Re)):void 0})),we.styles){styles=Array.isArray(we.styles)?{unselected:we.styles}:we.styles,styles.entries().forEach(([Ue,Ge])=>{Array.isArray(Ge)||(Ge=[Ge]);var qe=Ge.map(function(Ke){switch(Le){case fe.SERIE_LINE:return{type:Ke.shape,zoom:Ke.zoom,strokeWidth:Ke.lineWidth,strokeColor:Ke.lineColor,fillColor:Ke.color,points:Ke.points};break;case fe.SERIE_BOX:return Ke;break;case fe.SERIE_SCATTER:return Ke;}});Le===fe.SERIE_LINE?Ee.setMarkers(qe,Ue):Le===fe.SERIE_SCATTER?Ee.setStyle({},qe,Ue):Le===fe.SERIE_BOX?Ee.setStyle(qe[0],Ue||'unselected'):void 0})}if(we.color&&Le==fe.SERIE_LINE_COLORED&&Ee.setColors(we.color),Le!==fe.SERIE_BOX&&Ye.setData(we.y,we.x),!!Ee){let De=[],Ie=[],je=[],Ne=[],Be=[],Oe=[],He=[],Fe=[];if(void 0!=Ye){if(we.errorX)for(var We=0,Ve=we.errorX.length;We<Ve;We++)Array.isArray(we.errorX[We])?(De.push(we.errorX[We][0]),Ie.push(we.errorX[We][1])):(De.push(we.errorX[We]),Ie.push(we.errorX[We]));else if(we.errorBarX||we.errorBoxX){if(we.errorBarX)for(var We=0,Ve=we.errorBarX.length;We<Ve;We++)Array.isArray(we.errorBarX[We])?(De.push(we.errorBarX[We][0]),Ie.push(we.errorBarX[We][1])):(De.push(we.errorBarX[We]),Ie.push(we.errorBarX[We]));if(we.errorBoxX)for(var We=0,Ve=we.errorBoxX.length;We<Ve;We++)Array.isArray(we.errorBoxX[We])?(Be.push(we.errorBoxX[We][0]),Oe.push(we.errorBoxX[We][1])):(Be.push(we.errorBoxX[We]),Oe.push(we.errorBoxX[We]))}if(we.errorY)for(var We=0,Ve=we.errorY.length;We<Ve;We++)Array.isArray(we.errorY[We])?(je.push(we.errorY[We][0]),Ne.push(we.errorY[We][1])):(je.push(we.errorY[We]),Ne.push(we.errorY[We]));else if(we.errorBarY||we.errorBoxY){if(we.errorBarY)for(var We=0,Ve=we.errorBarY.length;We<Ve;We++)Array.isArray(we.errorBarY[We])?(je.push(we.errorBarY[We][0]),Ne.push(we.errorBarY[We][1])):(je.push(we.errorBarY[We]),Ne.push(we.errorBarY[We]));if(we.errorBoxY)for(var We=0,Ve=we.errorBoxY.length;We<Ve;We++)Array.isArray(we.errorBoxY[We])?(He.push(we.errorBoxY[We][0]),Fe.push(we.errorBoxY[We][1])):(He.push(we.errorBoxY[We]),Fe.push(we.errorBoxY[We]))}Ce={},0<De.length&&(Ye.setErrorBarXAbove(fe.newWaveform(De)),Ce.right={}),0<Ie.length&&(Ye.setErrorBarXAbove(fe.newWaveform(De)),Ce.left={}),0<je.length&&(Ye.setErrorBarXAbove(fe.newWaveform(je)),Ce.top={}),0<Ne.length&&(Ye.setErrorBarXAbove(fe.newWaveform(je)),Ce.bottom={}),Ee.setErrorBarStyle(Ce),Ce={},0<Be.length&&(Ye.setErrorBoxXAbove(fe.newWaveform(Be)),Ce.right={}),0<Oe.length&&(Ye.setErrorBoxXBelow(fe.newWaveform(Oe)),Ce.left={}),0<He.length&&(Ye.setErrorBoxAbove(fe.newWaveform(He)),Ce.top={}),0<Fe.length&&(Ye.setErrorBoxBelow(fe.newWaveform(Fe)),Ce.bottom={}),Ee.setErrorBoxStyle(Ce)}switch(Me.axis?(Xe=Me.axis[we.xAxis],Xe&&('top'===Xe.type||'bottom'===Xe.type)?'top'==Xe.type?Ee.setXAxis(Se.getTopAxis(Xe._jsGraphIndex)):'bottom'==Xe.type&&Ee.setXAxis(Se.getBottomAxis(Xe._jsGraphIndex)):(ue.warn('No x axis found. Setting automatically'),Ee.setXAxis(Se.getXAxis(0))),Xe=Me.axis[we.yAxis],Xe&&('left'===Xe.type||'right'===Xe.type)?'left'==Xe.type?Ee.setYAxis(Se.getLeftAxis(Xe._jsGraphIndex)):'right'==Xe.type&&Ee.setYAxis(Se.getRightAxis(Xe._jsGraphIndex)):(ue.warn('No y axis found. Setting automatically'),Ee.setYAxis(Se.getYAxis(0)))):(ue.warn('No axes found. Setting automatically'),Ee.autoAxis()),Le){case fe.SERIE_BOX:Ee.setData(we.boxes);break;default:case fe.SERIE_SCATTER:case fe.SERIE_LINE_COLORED:case fe.SERIE_LINE:Ee.setWaveform(Ye);}}}),Se.autoscaleAxes(),Se.draw(),Se}exportToSchema(){let Me={};Me.title=this.options.title,Me.width=this.getWidth(),Me.height=this.getHeight();let Se=[],_e={x:[],y:[]};['top','bottom','left','right'].map(we=>{this.axis[we]&&(Se=Se.concat(this.axis[we].map(Le=>{return{type:we,label:Le.options.label,unit:Le.options.unit,min:Le.options.forcedMin,max:Le.options.forcedMax,flip:Le.options.flipped}})),'top'==we||'bottom'==we?_e.x=_e.x.concat(this.axis[we]):_e.y=_e.y.concat(this.axis[we]))}),Me.axis=Se;let Pe=we=>{switch(we){case fe.SERIE_LINE:return'line';break;case fe.SERIE_BAR:return'bar';break;case fe.SERIE_LINE_COLORED:return'color';break;case fe.SERIE_SCATTER:return'scatter';}},Ce=(we,Le)=>{let Ee=[];switch(we.getType()){case fe.SERIE_LINE:for(var Te=0;Te<we.data.length;Te++)for(var Xe=0;Xe<we.data[Te].length-1;Xe+=2)Ee.push(we.data[Te][Xe+(Le&&we.isFlipped()||!Le&&!we.isFlipped()?1:0)]);break;case fe.SERIE_SCATTER:for(var Xe=0;Xe<we.data.length-1;Xe+=2)Ee.push(we.data[Te+(Le&&we.isFlipped()||!Le&&!we.isFlipped()?1:0)]);}return Ee};return Me.data=[].concat(this.series.map(we=>{style=[];let Le=[];if(we.getType()==fe.SERIE_LINE)for(var Ee in we.styles){Le.push({styleName:Ee,color:we.styles[Ee].lineColor,lineWidth:we.styles[Ee].lineWidth,lineStyle:we.styles[Ee].lineStyle});let Te={styleName:Ee,styles:[]};style.push(Te),Te.styles=Te.styles.concat((we.styles[Ee].markers||[]).map(Xe=>{return{shape:Xe.type,zoom:Xe.zoom,lineWidth:Xe.strokeWidth,lineColor:Xe.strokeColor,color:Xe.fillColor,points:Xe.points}}))}return{label:we.getLabel(),id:we.getName(),type:Pe(we.getType()),x:Ce(we,!0),y:Ce(we,!1),xAxis:_e.x.indexOf(we.getXAxis()),yAxis:_e.y.indexOf(we.getYAxis()),style:style,lineStyle:Le}})),Me}static registerConstructor(Me,ke){return me.has(Me)?ue.throwError('Constructor '+ke+' already exists.'):void me.set(Me,ke)}static getConstructor(Me,ke=!1){return me.has(Me)?me.get(Me):!ke&&ue.throwError('Constructor "'+Me+'" doesn\'t exist')}static newWaveform(){return new ce.default(...arguments)}static waveform(){return new ce.default(...arguments)}}fe.prototype.getConstructor=fe.getConstructor;var ye=function(Me,ke,Se,_e,ve,Pe,Ce){var we=!1;Array.isArray(ke)||(ke=[ke]);var Le=[];if(!ve&&Me.options.trackingLine.legend&&(we=!0,ve=te(Me)),ke.map(Te=>{var Xe=Te.serie.handleMouseMove(Ce,!1);if(!Xe||!Pe)return Te.serie.trackingShape&&Te.serie.trackingShape.hide(),ve;if(0<Te.withinPx&&1e-14<Math.abs(Se-Me.options.paddingLeft-Te.serie.getXAxis().getPx(Xe.xClosest))-Te.withinPx||0<Te.withinVal&&Math.abs(Te.serie.getXAxis().getVal(Se-Me.options.paddingLeft)-Xe.xClosest)-Te.withinVal>Te.serie.getXAxis().getVal(Se-Me.options.paddingLeft)/1e5)Te.serie.trackingShape&&Te.serie.trackingShape.hide();else{if(Le[Te.serie.getName()]={yValue:Xe.xClosest,xValue:Xe.yClosest,serie:Te,index:Xe},Te.serie.trackingShape||(Te.serie.trackingShape=Me.newShape(Me.options.trackingLine.serieShape.shape||'ellipse',{fillColor:Te.serie.getLineColor(),strokeColor:'White',strokeWidth:Te.serie.getLineWidth()},!0,Me.options.trackingLine.serieShape.properties||{rx:[3*Te.serie.getLineWidth()],ry:[3*Te.serie.getLineWidth()]}).setSerie(Te.serie).forceParentDom(Te.serie.groupMain).draw(),Me.options.trackingLine.serieShape.onCreated&&Me.options.trackingLine.serieShape.onCreated(Te.serie.trackingShape),Te.serie.trackingShape.on('changed',()=>{Me.options.trackingLine.serieShape.onChanged&&Me.options.trackingLine.serieShape.onChanged(Te.serie.trackingShape)})),Te.serie.trackingShape.show(),Te.serie.trackingShape.getPosition(0).x=Xe.xClosest,Me.options.trackingLine.serieShape.magnet){let Ye=Me.options.trackingLine.serieShape.magnet,De=Ye.within,Ie;Ye.withinPx&&(De=Te.serie.getXAxis().getRelVal(Ye.withinPx)),(Ie=Te.serie.findLocalMinMax(Xe.xClosest,De,Ye.mode))&&(Te.serie.trackingShape.getPosition(0).x=Ie)}Te.serie.trackingShape.redraw()}}),!!Me.options.trackingLine.legend){if(0==Object.keys(Le).length||!Pe)ve.style.display='none';else{'none'==ve.style.display||we?be(Me,ve,Se,_e,!0):Ae(Me,ve,Se,_e),ve.style.display='block';var Ee=Pe(Le,Ce,Se,_e);ve.innerHTML=Ee}return ve}},be=function(Me,ke,Se,_e,ve){function Pe(){var Xe=(Date.now()-we)/200;1<Xe&&(Xe=1),ke.style.marginLeft=(Se-Ee)*Xe+Ee+'px',ke.style.marginTop=(_e-Te)*Xe+Te+'px',1>Xe&&window.requestAnimationFrame(Pe)}var we=Date.now(),Le=ke.offsetHeight,Ee=parseInt(ke.style.marginLeft.replace('px','')||0),Te=parseInt(ke.style.marginTop.replace('px','')||0);return Se=Se>Me.getWidth()/2?Se-Se%10-20-ke.offsetWidth:Se-Se%10+30,_e=_e-_e%10+Le/2,ve?(ke.style.marginLeft=Se+'px',void(ke.style.marginTop=_e+'px')):void window.requestAnimationFrame(Pe)},Ae=ue.debounce(be,50);fe.SERIE_LINE=Symbol(),fe.SERIE_SCATTER=Symbol(),fe.SERIE_CONTOUR=Symbol(),fe.SERIE_BAR=Symbol(),fe.SERIE_BOX=Symbol(),fe.SERIE_ZONE=Symbol(),fe.SERIE_LINE_COLORED=Symbol(),fe.SERIE_ZONE=Symbol(),fe.SERIE_DENSITYMAP=Symbol(),fe.SERIE_LINE_3D=Symbol(),fe.SERIE_ZONE_3D=Symbol(),fe.TICKS_OUTSIDE=Symbol(),fe.TICKS_INSIDE=Symbol(),fe.TICKS_CENTERED=Symbol(),fe.ns='http://www.w3.org/2000/svg',fe.nsxlink='http://www.w3.org/1999/xlink',X.default=fe,T.exports=X['default']})},function(u,A){var P,C,E;(function(T,X){C=[u,A],P=X,E='function'==typeof P?P.apply(A,C):P,!(void 0!==E&&(u.exports=E))})(this,function(T,X){'use strict';function Y(O){return O&&O.indexOf&&-1<O.indexOf('px')&&parseInt(O.replace('px',''))}function I(O){return!isNaN(parseFloat(O))&&isFinite(O)}Object.defineProperty(X,'__esModule',{value:!0});class B{constructor(O,F,W,V){'object'==typeof O?(this.x=O.x,this.y=O.y,this.dx=O.dx,this.dy=O.dy):(this.x=O,this.y=F,this.dx=W,this.dy=V)}duplicate(){return new B(this.x,this.y,this.dx,this.dy)}compute(O,F,W,V){if(O&&F&&W&&O.hasXAxis&&O.hasYAxis||O.throw(),!O.hasXAxis(F))throw'Graph does not contain the x axis that was used as a parameter';if(!O.hasYAxis(W))throw'Graph does not contain the x axis that was used as a parameter';return this._compute(O,F,W,V)}_compute(O,F,W,V){var R=this._relativeTo;if(R)var U=R._compute(O,F,W,V);var Z={x:!1,y:!1},G;for(var K in F||(F=O.getXAxis()),W||(W=O.getYAxis()),Z){var Q='x'==K?F:W,J=this[K],$=this['d'+K];if(void 0!==J||(void 0===$||void 0!==R)&&void 0!==R)void 0!==J&&(Z[K]=this.getPx(J,Q));else if('x'==K){if(void 0===$)continue;Z[K]=R?R[K]:Q.getPos(0)}else if(void 0!==this.x&&V)if(!1!==Y(this.x))console.warn('You have defined x in px and not y. Makes no sense. Returning 0 for y'),Z[K]=0;else{var ee=V.searchClosestValue(this.x);ee?Z[K]=V.getY(ee.yMin):(console.warn('Could not find y position for x = '+this.x+' on serie "'+V.getName()+'". Returning 0 for y.'),Z[K]=0)}if(void 0!==$){var te=void 0!==J||void 0==U||void 0==U[K]?Z[K]:U[K];if('y'==K&&U&&void 0!==U.x&&void 0==U.y){if(!V){throw'Error. No serie exists. Cannot find y value'}var ee=V.searchClosestValue(R.x);ee&&(te=V.getY(ee.yMin))}!1===(G=Y($))?!1===(G=this._parsePercent($))?Q&&(Z[K]=te+Q.getRelPx($)):Z[K]=te+this._getPositionPx(G,!0,Q,O):Z[K]=te+G}}return Z}_getPositionPx(O,F,W,V){var R;if(!1!==(R=Y(O)))return R;return!1===(R=this._parsePercent(O))?W?W.getPos(O):void 0:R/100*(F?V.getDrawingWidth():V.getDrawingHeight())}_parsePercent(O){return O&&O.indexOf&&-1<O.indexOf('%')&&O}getDeltaPx(O,F){var W;return!1===(W=Y(O))?F.getRelPx(O)+'px':W+'px'}deltaPosition(O,F,W){O='y'==O?'y':'x';var V=this[O],R=this['d'+O],U,G;if(V!==void 0)!1===(U=Y(V))?(V=this.getValPosition(V,W),this[O]=!1===(G=Y(F))?V+F:V+W.getRelVal(G)):!1===(G=Y(F))?this[O]=U+W.getRelPx(F)+'px':this[O]=U+G+'px';else if(R!==void 0){if('y'==O&&V===void 0&&!this._relativeTo)return;!1===(U=Y(R))?(R=this.getValPosition(R,W),this['d'+O]=!1===(G=Y(F))?R+F:R+W.getRelVal(G)):!1===(G=Y(F))?this['d'+O]=U+W.getRelPx(F)+'px':this['d'+O]=U+G+'px'}}getValPosition(O,F){return'max'==O?F.getMaxValue():'min'==O?F.getMinValue():O}getPx(O,F,W){var V;if('function'==typeof O)return O(F,W);if(!1!==(V=Y(O)))return V;if(!1!==(V=this._parsePercent(O)))return V;if(F){if('min'==O)return F.getMinPx();if('max'==O)return F.getMaxPx();if(W)return F.getRelPx(O);if(I(O))return F.getPos(O)}}getPxRel(O,F){return this.getPx(O,F,!0)}relativeTo(O){return this._relativeTo=B.check(O),this}static check(O,F){if(O instanceof B)return O;var W=new B(O);if(O&&O.relativeTo){const V=F(O.relativeTo);V&&W.relativeTo(V)}return W}}X.default=B,T.exports=X['default']})},function(u,A){var P,C,E;(function(T,X){C=[A],P=X,E='function'==typeof P?P.apply(A,C):P,!(void 0!==E&&(u.exports=E))})(this,function(T){'use strict';function W(pe,de,ge){return 0>ge&&(ge+=1),1<ge&&(ge-=1),ge<1/6?pe+6*(de-pe)*ge:ge<1/2?de:ge<2/3?pe+6*((de-pe)*(2/3-ge)):pe}function U(pe,de){return pe._savedAttributes&&pe._savedAttributes[de]!==void 0}function Z(pe,de){if(pe&&pe._savedAttributesIds){pe._savedAttributesIds.splice(pe._savedAttributesIds.indexOf(de),1),delete pe._attributes[de];var ge={};for(var ue in pe._savedAttributes)ge[ue]=pe._savedAttributes[ue];for(var ue=0,he=pe._savedAttributesIds.length;ue<he;ue++)for(var ce in pe._attributes[pe._savedAttributesIds[ue]])ge[ce]=pe._attributes[pe._savedAttributesIds[ue]][ce];for(var ce in ge)pe.setAttribute(ce,ge[ce])}}function ie(){var pe,de,ge,ue,he,ce,xe=arguments[0],me=1,fe=arguments.length,ye=!1;for('boolean'==typeof xe?(ye=xe,xe=arguments[1]||{},me=2):('object'!=typeof xe&&'function'!=typeof xe||null==xe)&&(xe={});me<fe;++me)if(pe=arguments[me],null!=pe)for(de in pe)ge=xe[de],ue=pe[de],xe!==ue&&(ye&&ue&&(le(ue)||(he=ne(ue)))?(he?(he=!1,ce=ge&&ne(ge)?ge:[]):ce=ge&&le(ge)?ge:{},xe[de]=ie(ye,ce,ue)):'undefined'!=typeof ue&&(xe[de]=ue));return xe}Object.defineProperty(T,'__esModule',{value:!0}),T.setAttributeTo=function(pe,de,ge){if(ge)for(var ue in de)pe.setAttributeNS(ge,ue,de[ue]);else for(ue in de)pe.setAttribute(ue,de[ue])},T.mapEventEmission=function(pe,de){de||(de=this);var ge;for(var ue in pe)0==ue.indexOf('on')&&'function'==typeof pe[ue]&&(ge=ue.substring(2),ge=ge.substring(0,1).toLowerCase()+ge.substring(1),de.on&&function(he){de.on(ge,function(){pe[he].apply(de,arguments)})}(ue))},T.guid=function(){return'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(pe){var de=0|16*Math.random(),ge='x'==pe?de:8|3&de;return ge.toString(16)})},T.throwError=function(pe){console.error(pe)},T.warn=function(pe){console.warn(pe)},T.isNumeric=function(pe){return!Array.isArray(pe)&&0<=pe-parseFloat(pe)+1},T.hue2rgb=W,T.hslToRgb=function(pe,de,ge){var ue,he,ce;if(0==de)ue=he=ce=ge;else{var xe=0.5>ge?ge*(1+de):ge+de-ge*de,me=2*ge-xe;ue=W(me,xe,pe+1/3),he=W(me,xe,pe),ce=W(me,xe,pe-1/3)}return[Math.round(255*ue),Math.round(255*he),Math.round(255*ce)]},T.saveDomAttributes=function(pe,de,ge){if(pe)for(var ue in pe._savedAttributesIds=pe._savedAttributesIds||[],-1<pe._savedAttributesIds.indexOf(ge)&&Z(pe,ge),pe._savedAttributes=pe._savedAttributes||{},pe._attributes=pe._attributes||{},pe._attributes[ge]=de,pe._savedAttributesIds.push(ge),de)pe._savedAttributes[ue]||(pe._savedAttributes[ue]=pe.getAttribute(ue)),pe.setAttribute(ue,de[ue])},T.hasSavedAttribute=U,T.overwriteDomAttribute=function(pe,de,ge){U(pe,de)&&(pe._savedAttributes[de]=ge)},T.restoreDomAttributes=Z,T.debounce=function(pe,de,ge){var ue;return function(){var he=this,ce=arguments,me=ge&&!ue;clearTimeout(ue),ue=setTimeout(function(){ue=null,ge||pe.apply(he,ce)},de),me&&pe.apply(he,ce)}},T.SVGParser=function(pe){var de=new DOMParser,ge=de.parseFromString(pe,'image/svg+xml');return ge},T.reverseArray=function(pe){var de=null,ge=null,ue=pe.length;for(de=0,ge=ue-1;de<ge;de+=1,ge-=1){var he=pe[de];pe[de]=pe[ge],pe[ge]=he}return pe},T.getOffset=function(pe){var de=pe.getBoundingClientRect();return{top:de.top,left:de.left}},T.setCSS=function(pe,de){var ge=pe.style;for(var ue in de)ge[ue]=de[ue]},T.ajaxGet=function(pe){return new Promise(function(de,ge){var ue=new XMLHttpRequest;ue.open(pe.type||'GET',pe.url,!0),pe.json&&ue.setRequestHeader('Accept','application/json'),ue.onload=function(){if(200===ue.status){var he=ue.responseText;pe.json&&(he=JSON.parse(he)),de(he)}else ge(new Error('Request error: '+ue.status))},ue.onerror=function(){ge(new Error('Network error: '+ue.status))},ue.send()})},T.extend=ie,T.mix=function(pe,de){for(let ge in de)de.hasOwnProperty(ge)&&(pe.prototype[ge]=de[ge])},T.emptyDom=function(pe){for(;pe.firstChild;)pe.removeChild(pe.firstChild)};var se=Object.prototype.hasOwnProperty,oe=Object.prototype.toString,ne=function(de){return'function'==typeof Array.isArray?Array.isArray(de):'[object Array]'===oe.call(de)},le=function(de){if(!de||'[object Object]'!==oe.call(de))return!1;var ge=se.call(de,'constructor'),ue=de.constructor&&de.constructor.prototype&&se.call(de.constructor.prototype,'isPrototypeOf');if(de.constructor&&!ge&&!ue)return!1;for(var he in de);return'undefined'==typeof he||se.call(de,he)};T.default={},T.isArray=ne,T.isPlainObject=le})},function(u,A){var P,C,E;(function(T,X){C=[u,A],P=X,E='function'==typeof P?P.apply(A,C):P,!(void 0!==E&&(u.exports=E))})(this,function(T,X){'use strict';function Y(){}function I(F,W){for(var V=F.length;V--;)if(F[V].listener===W)return V;return-1}function B(F){return function(){return this[F].apply(this,arguments)}}Object.defineProperty(X,'__esModule',{value:!0});var O=Y.prototype;O.getListeners=function(W){var V=this._getEvents(),R,U;if(W instanceof RegExp)for(U in R={},V)V.hasOwnProperty(U)&&W.test(U)&&(R[U]=V[U]);else R=V[W]||(V[W]=[]);return R},O.flattenListeners=function(W){var V=[],R;for(R=0;R<W.length;R+=1)V.push(W[R].listener);return V},O.getListenersAsObject=function(W){var V=this.getListeners(W),R;return V instanceof Array&&(R={},R[W]=V),R||V},O.addListener=function(W,V){var R=this.getListenersAsObject(W),G;for(G in R)R.hasOwnProperty(G)&&-1===I(R[G],V)&&R[G].push('object'==typeof V?V:{listener:V,once:!1});return this},O.on=B('addListener'),O.addOnceListener=function(W,V){return this.addListener(W,{listener:V,once:!0})},O.once=B('addOnceListener'),O.defineEvent=function(W){return this.getListeners(W),this},O.defineEvents=function(W){for(var V=0;V<W.length;V+=1)this.defineEvent(W[V]);return this},O.removeListener=function(W,V){var R=this.getListenersAsObject(W),U,G;for(G in R)R.hasOwnProperty(G)&&(U=I(R[G],V),-1!==U&&R[G].splice(U,1));return this},O.off=B('removeListener'),O.addListeners=function(W,V){return this.manipulateListeners(!1,W,V)},O.removeListeners=function(W,V){return this.manipulateListeners(!0,W,V)},O.manipulateListeners=function(W,V,R){var U,G,Z=W?this.removeListener:this.addListener,K=W?this.removeListeners:this.addListeners;if('object'==typeof V&&!(V instanceof RegExp))for(U in V)V.hasOwnProperty(U)&&(G=V[U])&&('function'==typeof G?Z.call(this,U,G):K.call(this,U,G));else for(U=R.length;U--;)Z.call(this,V,R[U]);return this},O.removeEvent=function(W){var R=this._getEvents(),U;if('string'==typeof W)delete R[W];else if(W instanceof RegExp)for(U in R)R.hasOwnProperty(U)&&W.test(U)&&delete R[U];else delete this._events;return this},O.removeAllListeners=B('removeEvent'),O.emitEvent=function(W,V){var R=this.getListenersAsObject(W),U,G,Z,K;for(Z in R)if(R.hasOwnProperty(Z))for(G=R[Z].length;G--;)U=R[Z][G],!0===U.once&&this.removeListener(W,U.listener),K=U.listener.apply(this,V||[]),K===this._getOnceReturnValue()&&this.removeListener(W,U.listener);return this},O.trigger=B('emitEvent'),O.emit=function(W){var V=Array.prototype.slice.call(arguments,1);return this.emitEvent(W,V)},O.setOnceReturnValue=function(W){return this._onceReturnValue=W,this},O._getOnceReturnValue=function(){return!this.hasOwnProperty('_onceReturnValue')||this._onceReturnValue},O._getEvents=function(){return this._events||(this._events={})},X.default=Y,T.exports=X['default']})},function(u,A,S){var P,C,E;(function(T,X){C=[u,A,S(6),S(7)],P=X,E='function'==typeof P?P.apply(A,C):P,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y,I){'use strict';function B($){return $&&$.__esModule?$:{default:$}}function O($){$--;for(var ee=2;$>>=1;)ee<<=1;return ee}function F($){for(var ee=1;$>>=1;)ee<<=1;return ee}function W($,ee,te,ie,re){return($-ee)/(te-ee)*(re-ie)+ie}function V($,ee,te){let ie=0,re=ee.length,ae=re-1,oe=0,ne=1,se;if(ee[ie]==$)return ie;if(ee[ae]==$)return ae;for(;;){if(oe++,100<oe)throw'Error loop';for(se=Math.floor((ie+ae)/2);isNaN(ee[se]);){if(se>=ee.length-1)return ee.length-1;if(0>=se)return 0;se+=ne}if(se==ie||ee[se]==$||se==ae)return se;if(ee[se]<=$)te?ae=se:ie=se;else if(ee[se]>$)te?ie=se:ae=se;else return!1;ne*=-1}}Object.defineProperty(X,'__esModule',{value:!0});var R=B(Y),U=B(I);class G{constructor($=[],ee=0,te=1){this.xOffset=ee,this.xScale=te,this.errors={nb:0,bars:{above:null,below:null},boxes:{above:null,below:null}},this.setData($),this.BELOW=G.BELOW,this.ABOVE=G.ABOVE,this.BOX=G.BOX,this.BAR=G.BAR}setData($,ee=null){if(Array.isArray($[0])){let ae=[],se=[];$.forEach(oe=>{ae.push(oe[0]),se.push(oe[1])}),this.setXWaveform(ae),$=se}let te=this._makeArray($.length),ie=!1;const re=this.isNaNAllowed();return $.map((ae,se)=>{re||ae[0]===ae[0]&&ae[1]===ae[1]||(ie=!0),te[se]=ae}),ie&&this.warn('Trying to assign NaN values to a typed array that does not support NaNs. 0\'s will be used instead'),this._setData(te),ee&&this.setXWaveform(ee),this}getY($,ee=!1){return ee&&this.dataInUse?this.dataInUse.y[$]*this.getScale()+this.getShift():this.data[$]*this.getScale()+this.getShift()}setXWaveform($){if(!($ instanceof G))if(Array.isArray($))$=new G($);else throw'Cannot set X waveform. Data is not a valid array.';return this.xdata=$,this.computeXMinMax(),this}hasXWaveform(){return!!this.xdata}getXWaveform(){if(this.xdata)return this.xdata;let $=new G,ee=[];for(var te=0;te<this.getLength();te+=1)ee.push(this.getX(te));return $.setData(ee),this.xdata=$,$}rescaleX($,ee){return this.xScale=ee,this.xOffset=$,this.computeXMinMax(),this}getTypedArrayClass(){return this._typedArrayClass||!1}setTypedArrayClass($){this.getTypedArrayClass()&&this.isNaNAllowed()&&!this.isNaNAllowed($)&&this.warn('NaN values are not allowed by the new constructor ('+$.name+') while it was allowed by the previous one ('+this._typedArrayClass.name+')'),this.getTypedArrayClass()&&this.isUnsigned()&&!this.isUnsigned($)&&this.warn('You are switching from signed values to unsigned values. You may experience data corruption if there were some negative values.'),this._typedArrayClass=$,this.data&&this._setData($.from(this.data)),this.hasXWaveform()&&this.getXWaveform().setTypedArrayClass($)}isNaNAllowed($=this._typedArrayClass){return $==Array||$==Float32Array||$==Float64Array}isUnsigned($=this._typedArrayClass){return $==Uint8Array||$==Uint8ClampedArray||$==Uint16Array||$==Uint32Array}recalculateMinMaxNewPoint($,ee){($<this.minX||this.minX===void 0)&&(this.minX=$),($>this.maxX||this.maxX===void 0)&&(this.maxX=$),(ee<this.minY||this.minY===void 0)&&(this.minY=ee),(ee>this.maxY||this.maxY===void 0)&&(this.maxY=ee)}prepend($,ee){return'function'==typeof $&&($=$(this)),'function'==typeof ee&&(ee=ee(this)),this.xdata?this.xdata.prepend(null,$):null===$?this.xOffset-=this.xScale:(this.xdata=this.getXWaveform(),this.xdata.prepend(null,$)),this.data.unshift(ee),this.recalculateMinMaxNewPoint($,ee),this}append($,ee){return this.data||(this.data=[]),'function'==typeof $&&($=$(this)),'function'==typeof ee&&(ee=ee(this)),this.xdata?this.xdata.append(null,$):null!==$&&(this.xdata=this.getXWaveform(),this.xdata.append(null,$)),this.monotoneous&&(ee>this.data[this.data.y]&&!1===this.getMonotoneousAscending()?this.monotoneous=!1:ee<this.data[this.data.y]&&!0===this.getMonotoneousAscending()&&(this.monotoneous=!1)),(1==this.data.length||void 0===this._monotoneousAscending)&&(this.monotoneous=!0,this._monotoneousAscending=ee==this.data[0]?void 0:ee>this.data[0]),this.data.push(ee),this.recalculateMinMaxNewPoint($,ee),this}_makeArray($){const ee=this.getTypedArrayClass();return ee?new ee($):Array($)}_setData($=this.data){const ee=$.length;let te=1,ie=$[1]>$[0],re=$[0],ae=$[0];for(this._monotoneous=!0;te<ee;te++)$[te]!==$[te-1]&&ie!=$[te]>$[te-1]&&(this._monotoneous=!1),$[te]===$[te]&&(re=Math.min($[te],re),ae=Math.max($[te],ae));if(this._monotoneous&&(this._monotoneousAscending=$[1]>$[0]),this.hasErrorBars()){for(te=0;te<ee;te++)$[te]===$[te]&&(re=Math.min(re,$[te]-this.getMaxError(te,'below')),ae=Math.max(ae,$[te]+this.getMaxError(te,'above')));this.minY=re,this.maxY=ae}else this.minY=re,this.maxY=ae;this.data=$,this.computeXMinMax()}computeXMinMax(){if(this.data&&!this.xdata){const $=this.xOffset+this.xScale*this.getLength(),ee=this.xOffset;this.minX=Math.min($,ee),this.maxX=Math.max($,ee)}}getDataInUse(){return this.dataInUse||this.data}getIndexFromVal($,ee=!1,te=Math.round){let ie=ee&&this.dataInUse?this.dataInUse.y:this.data;let re;return re=this.getIndexFromData($,ie,this.data.getMonotoneousAscending(),te),ee&&this.dataInUse&&'aggregateY'==this.dataInUseType?re-re%4:re}getIndexFromX($,ee=!1,te=Math.round){let ie;ee&&this.dataInUse?ie=this.dataInUse.x:this.xdata&&(ie=this.xdata.data);let re;return re=this.hasXWaveform()?this.xdata.getIndexFromData($,ie,this.xdata.getMonotoneousAscending(),te):Math.max(0,Math.min(this.getLength()-1,te(($-this.xOffset)/this.xScale))),ee&&this.dataInUse&&'aggregateX'==this.dataInUseType?re-re%4:re}getIndexFromData($,ee,te){if(!this.isMonotoneous())throw console.trace(),'Impossible to get the index from a non-monotoneous wave !';return $-=this.getShift(),$/=this.getScale(),V($,ee,!te)}getReductionType(){return this.dataInUseType}getXMin(){return this.xdata?this.xdata.getMin():this.minX}getXMax(){return this.xdata?this.xdata.getMax():this.maxX}getYMin(){return this.minY*this.getScale()+this.getShift()}getYMax(){return this.maxY*this.getScale()+this.getShift()}getMin(){return this.minY*this.getScale()+this.getShift()}getMax(){return this.maxY*this.getScale()+this.getShift()}getMinX(){return this.getXMin()}getMaxX(){return this.getXMax()}getMinY(){return this.minY*this.getScale()+this.getShift()}getMaxY(){return this.maxY*this.getScale()+this.getShift()}getDataY(){return this.data}getData($){return $&&this.dataInUse?this.dataInUse.y:this.data}setShift($=0){return this.shift=$,this}getShift(){return this.shift||0}getScale(){return this.scale||1}setScale($=1){this.scale=$}setXShift($=0){return this.hasXWaveform()?(this.getXWaveform().setShift($),this):this}getXShift($=0){return this.hasXWaveform?this.getXWaveform().getShift():0}setXScale($=1){return this.hasXWaveform?(this.getXWaveform().setScale($),this):this}getXScale(){return this.hasXWaveform?this.getXWaveform().getScale():1}getLength(){return this.data?this.data.length:0}getDataToUseFlat(){let $,ee=0,te;if(this.dataInUse){$=this.dataInUse.x.length,te=Array(2*$).fill(0);for(var ie=0;ie<$;ie+=1)te[ee]=this.dataInUse.x[ie],te[ee+1]=this.dataInUse.y[ie],ee+=2}else{$=this.getLength(),te=Array(2*$).fill(0);for(var ie=0;ie<$;ie+=1)te[ee+1]=this.data[ie],te[ee]=this.getX(ie),ee+=2}return te}fit($){var ee=this;return new Promise(function(te){var re=new R.default(Object.assign({},{dataY:ee,dataX:ee.getXWaveform(),done:function(ae){te(ae)},waveform:new G},$));re.init(),re.fit()})}getX($,ee){return ee&&this.dataInUse?this.dataInUse.x[$]*this.getXScale()+this.getXShift():this.xdata?this.xdata.data[$]*this.getXScale()+this.getXShift():this.xOffset+$*this.xScale}getXRaw($,ee){return ee&&this.dataInUse?this.dataInUse.x[$]:this.xdata?this.xdata.data[$]:$}_integrateP($=0,ee=this.getLength()-1){if($=Math.round($),ee=Math.round(ee),$>ee){let ne=$;$=ee,ee=ne}var te=ee-$+1,ie=0;let ae=0,se;for(var oe=this.getData();$<=ee;$++)oe.length-1>$&&(se=this.getX($+1)-this.getX($),ae+=se,ie+=oe[$]*se);return[ie,te,ae]}integrateP($,ee){var te=this._integrateP($,ee);return te[0]}integrate($,ee){return this.integrateP(this.getIndexFromX($),this.getIndexFromX(ee))}average($=0,ee=this.getLength()-1){return this.getAverageP($,ee)}mean(){return this.average()}getAverageP($,ee){var te=this._integrateP($,ee);return te[0]/te[2]}getAverageX($,ee){var te=this._integrateX($,ee);return te[0]/te[2]}checkMonotonicity(){let $=1,ee=this.getData();const te=this.data.length;for(let ie=ee[1]>ee[0];$<te;$++)if(ee[$]!==ee[$-1]&&ie!==ee[$]>ee[$-1])return this._monotoneous=!1;return this._monotoneousAscending=ee[1]>ee[0],this._monotoneous=!0}requireXMonotonicity(){this.xdata&&this.xdata.requireMonotonicity()}requireMonotonicity(){if(!this.isMonotoneous())throw'The wave must be monotonic'}isMonotoneous(){return!!this._monotoneous}isXMonotoneous(){return!this.xdata||this.xdata.isMonotoneous()}invert(){let ee=dataY||this.data;return ee.reverse(),this.isMonotoneous()&&(this._monotoneousAscending=!this._monotoneousAscending),ee}resampleForDisplay($){let ee=0;this.requireXMonotonicity();let te=!1,ie=this.getDataY(),re={x:[],y:[]},ae=[],ue=!1,he=0,se,oe,ne,le,pe,de,ge,ce;const xe=this.getLength();if(!$.xPosition)throw'No position calculation method provided';if(!$.resampleToPx)throw'No "resampleToPx" method was provided. Unit: px per point';if($.minX>$.maxX){let me=$.minX;$.minX=$.maxX,$.maxX=me}for((this.xdata&&!this.xdata.getMonotoneousAscending()||!this.xdata&&-0>this.xScale)&&(te=!0,ee=xe);te?0<ee:ee<xe;te?ee--:ee++){if(ce=this.getX(ee),$.minX>ce){he=ee;continue}if(ge=$.xPosition(ce),!ue){for(he?(re.x.push(ce),re.y.push(ie[he])):he=ee;isNaN(ie[ee]);)te?ee--:ee++;se=oe=ne=ie[he],le=1,de=ge,pe=ce,he=0,ue=!0;continue}if(Math.abs(ge-de)>$.resampleToPx||ee==xe||0==ee||isNaN(ie[ee])){let me=(pe+ce)/2;if(re.x.push(me),re.y.push(se/le),ae.push(me,oe,ne),void 0!==$.maxX&&ce>$.maxX)break;ue=!1;continue}se+=ie[ee],le++,oe=Math.min(oe,ie[ee]),ne=Math.max(ne,ie[ee])}return this.dataInUseType='resampled',this.dataInUse=re,ae}interpolate($){let te=this.getDataY(),ee;if($=($-this.getXShift())/this.getXScale(),this.xdata){let ie=this.xdata.getData(),re=V($,ie,!this.xdata.getMonotoneousAscending());return ie[re]==$?te[re]:($-ie[re])/(ie[re+1]-ie[re])*(te[re+1]-te[re])+te[re]}ee=($-this.xOffset)/this.xScale;let ie=Math.floor(ee);return(ee-ie)*(te[ie+1]-te[ie])+te[ie]}getMonotoneousAscending(){return this.isMonotoneous()?this._monotoneousAscending:'The waveform is not monotoneous'}getXMonotoneousAscending(){return this.xdata?this.xdata.getMonotoneousAscending():0<this.xScale}isXMonotoneousAscending(){return this.getXMonotoneousAscending(...arguments)}divide($){return this._arithmetic($,J)}divideBy(){return this.divide(...arguments)}multiply($){return this._arithmetic($,Z)}multiplyBy(){return this.multiply(...arguments)}log(){return this.logBase(10)}ln(){return this.logBase(Math.E)}logBase($){let ee=Math.log($);this.data.map(te=>{return Math.log(te)/ee})}add($){return this._arithmetic($,K)}addBy(){return this.add(...arguments)}subtract($){return this._arithmetic($,Q)}subtractBy(){return this.subtract(...arguments)}math($){for(var ee=0;ee<this.getLength();ee++)this.data[ee]=$(this.getY(ee),this.getX(ee));return this._setData(this.data),this}_arithmetic($,ee){if($ instanceof G)return this._waveArithmetic($,ee);return'number'==typeof $?this._numberArithmetic($,ee):void 0}_numberArithmetic($,ee){let te=0,ie=this.getLength();if(ee==Z){for(;te<ie;te++)this.data[te]*=$;this.minY*=$,this.maxY*=$}else if(ee==J){for(;te<ie;te++)this.data[te]/=$;this.minY/=$,this.maxY/=$}else if(ee==K){for(;te<ie;te++)this.data[te]+=$;this.minY+=$,this.maxY+=$}else if(ee==Q){for(;te<ie;te++)this.data[te]-=$;this.minY-=$,this.maxY-=$}return this}_waveArithmetic($,ee){let te=this.getDataY(),ie=0;const re=this.getLength();if(this.requireXMonotonicity(),$.requireXMonotonicity(),ee==Z)for(;ie<re;ie++)te[ie]*=$.interpolate(this.getX(ie));else if(ee==J)for(;ie<re;ie++)te[ie]/=$.interpolate(this.getX(ie));else if(ee==K)for(;ie<re;ie++)te[ie]+=$.interpolate(this.getX(ie));else if(ee==Q)for(;ie<re;ie++)te[ie]-=$.interpolate(this.getX(ie));return this._setData(te),this}aggregate($='x'){this._dataAggregating={},this._dataAggregated={},this._dataAggregationDirection=$.toUpperCase();var ee=F(this.getLength());this._dataAggregating=(0,U.default)({minX:this.getMinX(),maxX:this.getMaxX(),minY:this.getMinY(),maxY:this.getMaxY(),data:this.data,xdata:this.xdata?this.xdata.getData():void 0,xScale:this.xScale,xOffset:this.xOffset,numPoints:ee,direction:$}).then(te=>{this._dataAggregated=te.aggregates,console.log(this._dataAggregated),this._dataAggregating=!1})}hasAggregation(){return!!this._dataAggregated}selectAggregatedData($){if(2>$)return!1;var ee=O($);return this._dataAggregated[ee]?(this.dataInUseType='aggregate'+this._dataAggregationDirection,void(this.dataInUse=this._dataAggregated[ee])):this._dataAggregating?this._dataAggregating:void(this.dataInUseType='none',this.dataInUse={y:this.data,x:this.getXWaveform().data})}duplicate($){var ee=new G;return ee._setData(this.getDataY().slice()),ee.rescaleX(this.xOffset,this.xShift),ee.setShift(this.getShift()),ee.setScale(this.getScale()),this.xdata?($?ee.setXWaveform(this.xdata.duplicate()):ee.setXWaveform(this.xdata),ee.setXShift(this.getXShift()),ee.setXScale(this.getXScale())):(ee.xOffset=this.xOffset,ee.xScale=this.xScale),ee}subrangeX($,ee){if(!this.xdata){let ae=this.getIndexFromX($),se=this.getIndexFromX(se);return new G().setData(this.data.slice(ae,se)).rescaleX(this.xOffset,this.xScale)}for(var te=new G,ie=0,re=this.data.length;ie<re;ie++)this.data[ie]>=$&&this.data[ie]<ee&&te.append(this.dataX[ie],this.data[ie]);return te}findLocalMinMax($,ee,te){let ie=this.getIndexFromX($),re=this.getIndexFromX($+ee),ae=this.getIndexFromX($-ee);return this.findLocalMinMaxIndex(ae,re,te)}findLocalMinMaxIndex($,ee,te){let ie;ee<$&&(ie=ee,ee=$,$=ie);let re,ae;if('max'==te){re=Number.NEGATIVE_INFINITY;for(var se=$;se<=ee;se++)this.getY(se)>re&&(re=this.getY(se),ae=se)}else{re=Number.POSITIVE_INFINITY;for(var se=$;se<=ee;se++)this.getY(se)<re&&(re=this.getY(se),ae=se)}return ae==$||ae==ee?!1:this.getX(ae)}warn($){console&&console.warn($)}setUnit($){return this.unit=$,this}setXUnit($){return this.hasXWaveform()&&this.xdata.setUnit($),this.xunit=$,this}getUnit(){return this.unit||''}getXUnit(){return this.hasXWaveform()?this.xdata.getUnit():''|this.xunit}hasXUnit(){return 0<this.getXUnit().length}hasUnit(){return 0<this.getUnit().length}findLevels($,ee){ee=Object.assign({box:1,edge:'both',rounding:'before',rangeP:[0,this.getLength()]},ee);for(var te=ee.rangeP[0],re=[],ae=0,ie;ie=this.findLevel($,Object.assign({},ee,{rangeP:[te,ee.rangeP[1]]}));)if(re.push(ie),te=Math.ceil(ie),ae++,1e3<ae)return;return re}findLevel($,ee){ee=Object.assign({box:1,edge:'both',direction:'ascending',rounding:'before',rangeP:[0,this.getLength()]},ee),ee.rangeX&&(ee.rangeP=ee.rangeX.map(this.getIndexFromX));var te,ie,re,ae,se,oe,ne=ee.box;for(0==ne%2&&ne++,'descending'==ee.direction?(re=ee.rangeP[1],se=ee.rangeP[0],oe=-1):(re=ee.rangeP[0],se=ee.rangeP[1],oe=1);;re+=oe){if('descending'==ee.direction){if(re<se)break;}else if(re>se)break;if(!(re<ee.rangeP[0]+(ne-1)/2)){if(re>ee.rangeP[1]-(ne-1)/2)break;if(te=this.getAverageP(re-(ne-1)/2,re+(ne-1)/2),void 0==ie){ie=te<$;continue}if(te>=$&&ie){if(ie=!1,'ascending'==ee.edge||'both'==ee.edge)for(ae=re+(ne-1)/2;ae>=re-(ne-1)/2;ae--)if(this.data[ae]>=$&&this.data[ae-1]<$)switch(ee.rounding){case'before':return ae-1;break;case'after':return ae;break;case'interpolate':return W($,this.data[ae],this.data[ae-1],ae,ae-1);}}else if(te<=$&&!ie&&(ie=!0,'descending'==ee.edge||'both'==ee.edge))for(ae=re+(ne-1)/2;ae>=re-(ne-1)/2;ae--)if(this.data[ae]<=$&&this.data[ae-1]>$)switch(ee.rounding){case'before':return ae-1;break;case'after':return ae;break;case'interpolate':return W($,this.data[ae],this.data[ae-1],ae,ae-1);}}}}normalize($){let ee,te,ie,re,ae,se;if('max1'==$||'max100'==$){for(ee=1,'max100'==$&&(ee=100),re=this.data[0],se=1;se<this.getLength();se++)this.data[se]>re&&(re=this.data[se]);for(se=0;se<this.getLength();se++)this.data[se]/=re/ee}else if('sum1'==$){for(te=0,se=0;se<this.getLength();se++)te+=this.data[se];for(se=0;se<this.getLength();se++)this.data[se]/=te}else if('max1min0'==$){for(re=this.data[0],ie=this.data[0],se=1;se<this.getLength();se++)this.data[se]>re?re=this.data[se]:this.data[se]<ie&&(ie=this.data[se]);for(ae=1/(re-ie),se=0;se<this.getLength();se++)this.data[se]=(this.data[se]-ie)*ae}this.setData(this.data)}setErrorBarX($){Array.isArray($)&&($=new G($));var ee=this.getXWaveform();return ee.setErrorBar($),this}setErrorBarXBelow($){Array.isArray($)&&($=new G($));var ee=this.getXWaveform();return ee.setErrorBarBelow($),this}setErrorBarXAbove($){Array.isArray($)&&($=new G($));var ee=this.getXWaveform();return ee.setErrorBarAbove($),this}setErrorBoxX($){Array.isArray($)&&($=new G($));var ee=this.getXWaveform();return ee.setErrorBoxAbove($),ee.setErrorBoxBelow($),this}setErrorBoxXBelow($){Array.isArray($)&&($=new G($));var ee=this.getXWaveform();return ee.setErrorBoxBelow($),this}setErrorBoxXAbove($){Array.isArray($)&&($=new G($));var ee=this.getXWaveform();return ee.setErrorBoxAbove($),this}setErrorBar($,ee=!0){Array.isArray($)&&($=new G($)),this.errors.nb++,this.errors.nb++,this.errors.bars.bottom=$,this.errors.bars.top=$,ee&&this._setData()}setErrorBarBelow($,ee=!0){Array.isArray($)&&($=new G($)),this.errors.nb++,this.errors.bars.below=$,ee&&this._setData()}setErrorBarAbove($,ee=!0){Array.isArray($)&&($=new G($)),this.errors.nb++,this.errors.bars.above=$,ee&&this._setData()}setErrorBox($,ee=!0){Array.isArray($)&&($=new G($)),this.errors.nb++,this.errors.nb++,this.errors.boxes.above=$,this.errors.boxes.below=$,ee&&this._setData()}setErrorBoxBelow($,ee=!0){Array.isArray($)&&($=new G($)),this.errors.nb++,this.errors.boxes.below=$,ee&&this._setData()}setErrorBoxAbove($,ee=!0){Array.isArray($)&&($=new G($)),this.errors.boxes.above=$,ee&&this._setData()}getMaxError($,ee=G.ABOVE){return Math.max(this.getMaxErrorType($,ee,G.BOX),this.getMaxErrorType($,ee,G.BAR))}getMaxErrorType($,ee=G.ABOVE,te=G.BOX){let ie;if(te==G.BOX)ie=this.errors.boxes;else if(te==G.BAR)ie=this.errors.bars;else throw'Unknown type of error';let re;return(re=ie[ee])||(ee==G.ABOVE?ie[ee]==G.BELOW&&(re=ie.below):ie[ee]==G.ABOVE&&(re=ie.above)),re?re.getY($):0}getErrorBarXBelow($){return this.getErrorX($,G.BELOW,G.BAR)}getErrorBarXAbove($){return this.getErrorX($,G.ABOVE,G.BAR)}getErrorBoxXBelow($){return this.getErrorX($,G.BELOW,G.BOX)}getErrorBoxXAbove($){return this.getErrorX($,G.ABOVE,G.BOX)}getErrorBarYBelow($){return this.getError($,G.BELOW,G.BAR)}getErrorBarYAbove($){return this.getError($,G.ABOVE,G.BAR)}getErrorBoxYBelow($){return this.getError($,G.BELOW,G.BOX)}getErrorBoxYAbove($){return this.getError($,G.ABOVE,G.BOX)}getErrorX($,ee=G.ABOVE,te=G.BAR){return!!this.hasXWaveform()&&this.xdata.getError($,ee,te)}getError($,ee=G.ABOVE,te=G.BAR){let ie=te==G.BAR?this.errors.bars:this.errors.boxes;if(!ie)return!1;let re;if(re=ee==G.ABOVE?ie.above:ie.below)return re==G.ABOVE&&ee==G.BELOW?re=ie.above:re==G.BELOW&&ee==G.ABOVE&&(re=ie.below),!!re&&re.getY($)}hasErrorBars(){return 0<this.errors.nb||this.hasXWaveform()&&0<this.xdata.errors.nb}}G.BELOW=Symbol(),G.ABOVE=Symbol(),G.BOX=Symbol(),G.BAR=Symbol();const Z=Symbol(),K=Symbol(),Q=Symbol(),J=Symbol();X.default=G,T.exports=X['default']})},function(u,A){var P,C,E;(function(T,X){C=[u,A],P=X,E='function'==typeof P?P.apply(A,C):P,!(void 0!==E&&(u.exports=E))})(this,function(T,X){'use strict';Object.defineProperty(X,'__esModule',{value:!0});class I{constructor(B,O,F,W){this.LMITER=100,this.LMBOOST=2,this.LMSHRINK=0.1,this.LAMBDAZERO=1e-3,this.LAMBDAMAX=1E9,this.LMTOL=1e-12,this.BIGVAL=9e99,this.sos,this.sosprev,this.lambda,this.myH=null,this.nadj=0,this.npts=0,this.delta,this.beta,this.alpha,this.amatrix,this.myH=B,this.nadj=O,this.npts=F,this.delta=Array(this.nadj).fill(0),this.beta=Array(this.nadj).fill(0),this.alpha=Array(this.nadj).fill(0),this.amatrix=Array(this.nadj).fill(0),this.alpha=this.alpha.map(()=>Array(this.nadj)),this.amatrix=this.amatrix.map(()=>Array(this.nadj)),this.lambda=this.LAMBDAZERO;var V=0,R=!1;do R=this.bLMiter(),W&&W(this.myH.params),V++;while(!R&&V<this.LMITER)}bLMiter(){for(var B=0;B<this.nadj;B++)this.delta[B]=0;if(this.sos=this.myH.nudge(this.delta),this.sos==this.BIGVAL)return console.error('  bLMiter finds faulty initial nudge()'),!1;if(this.sosprev=this.sos,this.myH.log('  bLMiter..SumOfSquares= '+this.sos),!this.myH.buildJacobian())return console.error('  bLMiter finds buildJacobian()=false'),!1;for(var B=0;B<this.nadj;B++){this.beta[B]=0;for(var O=0;O<this.npts;O++)this.beta[B]-=this.myH.getResidualElement(O)*this.myH.getJacobianElement(O,B)}for(var B=0;B<this.nadj;B++)for(var F=0;F<this.nadj;F++){this.alpha[F][B]=0;for(var O=0;O<this.npts;O++)this.alpha[F][B]+=this.myH.getJacobianElement(O,F)*this.myH.getJacobianElement(O,B)}var W=0;do{for(var B=0;B<this.nadj;B++)for(var F=0;F<this.nadj;F++)this.amatrix[F][B]=this.alpha[F][B]+(F==B?this.lambda:0);this.gaussj(this.amatrix,this.nadj);for(var B=0;B<this.nadj;B++){this.delta[B]=0;for(var F=0;F<this.nadj;F++)this.delta[B]+=this.amatrix[F][B]*this.beta[F]}if(this.sos=this.myH.nudge(this.delta),this.sos==this.BIGVAL)return console.error('  LMinner failed SOS step'),!1;if(W=(this.sos-this.sosprev)/(1+this.sos),0>=W){this.lambda*=this.LMSHRINK;break}for(var V=0;V<this.nadj;V++)this.delta[V]*=-1;if(this.myH.nudge(this.delta),W<this.LMTOL)break;this.lambda*=this.LMBOOST}while(this.lambda<this.LAMBDAMAX);return W>-this.LMTOL||this.lambda>this.LAMBDAMAX}gaussj(B,O){var F=1,W,V,R,U,G,Z,K=Array(100),Q=Array(100);for(G=0;G<O;G++){for(W=0,R=G;R<O;R++)for(U=G;U<O;U++)Math.abs(W)<=Math.abs(B[R][U])&&(W=B[R][U],K[G]=R,Q[G]=U);if(0==W)return 0;if(R=K[G],R>G)for(U=0;U<O;U++)V=B[G][U],B[G][U]=B[R][U],B[R][U]=-V;if(U=Q[G],U>G)for(R=0;R<O;R++)V=B[R][G],B[R][G]=B[R][U],B[R][U]=-V;for(R=0;R<O;R++)R!=G&&(B[R][G]=-B[R][G]/W);for(R=0;R<O;R++)for(U=0;U<O;U++)R!=G&&U!=G&&(B[R][U]+=B[R][G]*B[G][U]);for(U=0;U<O;U++)U!=G&&(B[G][U]/=W);B[G][G]=1/W,F*=W}for(Z=0;Z<O;Z++){if(G=O-Z-1,U=K[G],U>G)for(R=0;R<O;R++)V=B[R][G],B[R][G]=-B[R][U],B[R][U]=V;if(R=Q[G],R>G)for(U=0;U<O;U++)V=B[G][U],B[G][U]=-B[R][U],B[R][U]=V}return F}}X.default=class{constructor(B){this.DELTAP=1e-6,this.BIGVAL=9e99,this.WEIGHT=1,this.setYData(B.dataY),this.setXData(B.dataX),this.setWeight(B.weight),this.setInitialParams(B.params),B.subsetIndex&&this.setSubset(...B.subsetIndex),this.setFunction(B.function),B.progress&&this.hookIteration(B.progress),this.options=B}setYData(B){this.data=B}setXData(B){this.dataX=B}setWeight(B){this.weight=B}setInitialParams(B){this.parms=B,this.parms=this.parms.map(O=>{return'function'==typeof O?O(this.data,this.dataX):O}),this.NPARMS=B.length}setSubset(B,O){B!==void 0&&O!==void 0&&(this._from=B,this._to=O)}hookIteration(B){this._hookIteration=O=>{let F=this.buildFit(O,200);B(F)}}setFunction(B){this._func=B}init(){if(void 0!==this._from&&void 0!==this._to){if(this._from>=this._to)throw'Impossible to fit negative subranges. The starting index must be lower than the ending index';if(this.NPTS=this._to-this._from+1,this.data&&this.data.getLength()<=this._to)throw'Wave Y has not enough point to be fitted to subrange ['+this._from+', '+this._to+']';if(0>this._from)throw'Impossible to fit a subrange with negative indices'}else this.NPTS=this.data.getLength(),this._from=0,this._to=this.data.getLength()-1;if(this.dataX&&this.dataX.getLength()<=this._to)throw'Wave X has not enough point to be fitted to subrange ['+this._from+', '+this._to+']';this.arrY=this.data.getDataY(),this.arrX=this.dataX?this.dataX.getDataY():this.data.getDataX(),this.resid=Array(this.NPTS).fill(0),this.jac=Array(this.NPTS).fill(0),this.jac=this.jac.map(()=>Array(this.NPARMS))}fit(){return this.log('Starting the fit with initial parameter list {'+this.parms.join()+'};'),new I(this,this.NPARMS,this.NPTS,this._hookIteration),this.log('Fit successful. Output parameters {'+this.parms.join()+'};'),this._result=this.buildFit(this.parms,200),this.options.done&&this.options.done(this.parms,this._result),this._result}func(B,O){return this._func(B,O)}computeResiduals(){for(var B=0,O=0;O<this.NPTS;O++)this.resid[O]=(this.func(this.arrX[O+this._from],this.parms)-this.arrY[O+this._from])*this.WEIGHT,B+=this.resid[O]*this.resid[O];return B}log(B){this.options.log&&console.log(B)}nudge(B){for(var O=0;O<this.NPARMS;O++)this.parms[O]+=B[O];return this.computeResiduals()}buildJacobian(){for(var B=Array(this.NPARMS),O=0.5/this.DELTAP,F=0,W=0;W<this.NPARMS;W++){for(var V=0;V<this.NPARMS;V++)B[V]=V==W?this.DELTAP:0;if(F=this.nudge(B),F==this.BIGVAL)throw'Bad dBuildJacobian() exit 2';for(var R=0;R<this.NPTS;R++)this.jac[R][W]=this.getResidualElement(R);for(var V=0;V<this.NPARMS;V++)B[V]=V==W?-2*this.DELTAP:0;if(F=this.nudge(B),F==this.BIGVAL)throw'Bad dBuildJacobian(). exit 3';for(var R=0;R<this.NPTS;R++)this.jac[R][W]-=this.getResidualElement(R);for(var R=0;R<this.NPTS;R++)this.jac[R][W]*=O;for(var V=0;V<this.NPARMS;V++)B[V]=V==W?this.DELTAP:0;if(F=this.nudge(B),F==this.BIGVAL)throw'Bad dBuildJacobian(). exit 4'}return!0}getResidualElement(B){return this.resid[B]}getJacobianElement(B,O){return this.jac[B][O]}buildFit(B,O){let F;if(!O)F=this.arrX;else{const G=this.dataX.getMin(this._from,this._to),Z=this.dataX.getMax(this._from,this._to);F=Array(O).fill(0).map((K,Q)=>Q*(Z-G)/(O-1)+G)}for(var W=Array(F.length),V=0,R=F.length;V<R;V++)W[V]=this.func(F[V],this.parms);let U=this.options.waveform;return U.setData(W,F),U}},T.exports=X['default']})},function(u,A){var P,C,E;(function(T,X){C=[u,A],P=X,E='function'==typeof P?P.apply(A,C):P,!(void 0!==E&&(u.exports=E))})(this,function(T,X){'use strict';Object.defineProperty(X,'__esModule',{value:!0}),X.default=function(F){var W=Date.now();F._queueId=W;var V=new Promise(R=>{I[W]=R});return Y.postMessage(F),V};var Y,I={};let B=function(){onmessage=function(F){const W=F.data.data,V=F.data.maxX,R=F.data.minX,U=F.data.maxY,G=F.data.minY,Z=F.data.direction;let K=F.data.numPoints,Q=W.length,J=0,$=-4,ee=[],te=[],ie=[],re=[],ae;ae=F.data.xdata?function(ne){return F.data.xdata[ne]}:function(ne){return ne*F.data.xScale+F.data.xOffset};let se={};if(console.log(Z),'x'==Z)for(const oe=K/(V-R);J<Q;J++){if(slotNumber=Math.floor((ae(J)-R)*oe),ee[$]!==slotNumber){$+=4,ee[$]=slotNumber;let ne=(slotNumber+0.5)/oe+R;te[$]=ne,te[$+1]=ne,te[$+2]=ne,te[$+3]=ne,ie[$]=W[J],ie[$+1]=W[J],ie[$+2]=W[J],ie[$+3]=W[J],re[$]=0}ie[$+1]=Math.min(W[J],ie[$+1]),ie[$+2]=Math.max(W[J],ie[$+2]),ie[$+3]=W[J],re[$]+=W[J]}else for(const oe=K/(U-G);J<Q;J++){if(slotNumber=Math.floor((W[J]-G)*oe),ee[$]!==slotNumber){$+=4,ee[$]=slotNumber;let ne=(slotNumber+0.5)/oe+G;ie[$]=ne,ie[$+1]=ne,ie[$+2]=ne,ie[$+3]=ne,te[$]=W[J],te[$+1]=W[J],te[$+2]=W[J],te[$+3]=W[J],re[$]=0}te[$+1]=Math.min(ae(J),te[$+1]),te[$+2]=Math.max(ae(J),te[$+2]),te[$+3]=ae(J),re[$]+=ae(J)}for(se[K]={x:te,y:ie,sums:re},lastAggregation=ie,lastAggregationX=te,lastAggregationSum=re;256<K;){if(K/=2,newAggregation=[],newAggregationX=[],$=0,'x'==Z)for(J=0,Q=lastAggregation.length-8;J<Q;J+=8)newAggregationX[$]=(lastAggregationX[J]+lastAggregationX[J+4])/2,newAggregationX[$+1]=newAggregationX[$],newAggregationX[$+2]=newAggregationX[$],newAggregationX[$+3]=newAggregationX[$],newAggregation[$]=lastAggregation[J],newAggregation[$+1]=Math.min(lastAggregation[J+1],lastAggregation[J+5]),newAggregation[$+2]=Math.max(lastAggregation[J+2],lastAggregation[J+6]),newAggregation[$+3]=lastAggregation[J+7],re[$]=(lastAggregationSum[J]+lastAggregationSum[J+4])/2,$+=4;else for(J=0,Q=lastAggregation.length-8;J<Q;J+=8)newAggregation[$]=(lastAggregation[J]+lastAggregation[J+4])/2,newAggregation[$+1]=newAggregation[$],newAggregation[$+2]=newAggregation[$],newAggregation[$+3]=newAggregation[$],newAggregationX[$]=lastAggregationX[J],newAggregationX[$+1]=Math.min(lastAggregationX[J+1],lastAggregationX[J+5]),newAggregationX[$+2]=Math.max(lastAggregationX[J+2],lastAggregationX[J+6]),newAggregationX[$+3]=lastAggregationX[J+7],re[$]=(lastAggregationSum[J]+lastAggregationSum[J+4])/2,$+=4;se[K]={x:newAggregationX,y:newAggregation,sums:re},lastAggregation=newAggregation,lastAggregationX=newAggregationX,lastAggregationSum=re,re=[]}postMessage({aggregates:se,_queueId:F.data._queueId})}}.toString();B=B.split('\n'),B.pop(),B.shift();var O=URL.createObjectURL(new Blob([B.join('\n')],{type:'application/javascript'}));Y=new Worker(O),Y.onmessage=function(F){var W=F.data._queueId;delete F.data._queueId,I[W](F.data),delete I[W]};T.exports=X['default']})},function(u,A,S){var P,C,E;(function(T,X){C=[u,A,S(2),S(3)],P=X,E='function'==typeof P?P.apply(A,C):P,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y,I){'use strict';function F(G){try{return G.getBBox()}catch(Z){return{height:0,width:0,x:0,y:0}}}Object.defineProperty(X,'__esModule',{value:!0});var W=function(G){return G&&G.__esModule?G:{default:G}}(Y),V=function(G){if(G&&G.__esModule)return G;var Z={};if(null!=G)for(var K in G)Object.prototype.hasOwnProperty.call(G,K)&&(Z[K]=G[K]);return Z.default=G,Z}(I),R={backgroundColor:'rgba(255, 255, 255, 0.8)',frame:!0,frameWidth:1,frameColor:'black',paddingTop:10,paddingLeft:10,paddingBottom:10,paddingRight:10,frameRounding:0,movable:!1,shapesToggleable:!0,isSerieHideable:!0,isSerieSelectable:!0};class U{constructor(G,Z){this.options=V.extend({},R,Z),this.graph=G,this.svg=document.createElementNS(this.graph.ns,'g'),this.subG=document.createElementNS(this.graph.ns,'g'),this.groups=[],this.rect=document.createElementNS(this.graph.ns,'rect'),this.rectBottom=document.createElementNS(this.graph.ns,'rect'),this.rect.setAttribute('x',0),this.rect.setAttribute('y',0),this.rectBottom.setAttribute('x',0),this.rectBottom.setAttribute('y',0),this.series=!1,this.svg.setAttribute('display','none'),this.pos={x:void 0,y:void 0,transformX:0,transformY:0},this.setEvents(),this.eyeId=V.guid(),this.eyeCrossedId=V.guid();var K=V.SVGParser('<svg xmlns="http://www.w3.org/2000/svg"><symbol id="'+this.eyeCrossedId+'" viewBox="0 -256 1850 1850"><rect pointer-events="fill" fill="transparent" x="-256" y="0" width="2106" height="1850" /><g transform="matrix(1,0,0,-1,30.372881,1214.339)"><path d="m 555,201 78,141 q -87,63 -136,159 -49,96 -49,203 0,121 61,225 Q 280,812 128,576 295,318 555,201 z m 389,759 q 0,20 -14,34 -14,14 -34,14 -125,0 -214.5,-89.5 Q 592,829 592,704 q 0,-20 14,-34 14,-14 34,-14 20,0 34,14 14,14 14,34 0,86 61,147 61,61 147,61 20,0 34,14 14,14 14,34 z m 363,191 q 0,-7 -1,-9 Q 1201,954 991,576 781,198 675,9 l -49,-89 q -10,-16 -28,-16 -12,0 -134,70 -16,10 -16,28 0,12 44,87 Q 349,154 228.5,262 108,370 20,507 0,538 0,576 q 0,38 20,69 153,235 380,371 227,136 496,136 89,0 180,-17 l 54,97 q 10,16 28,16 5,0 18,-6 13,-6 31,-15.5 18,-9.5 33,-18.5 15,-9 31.5,-18.5 16.5,-9.5 19.5,-11.5 16,-10 16,-27 z m 37,-447 Q 1344,565 1265,450.5 1186,336 1056,286 l 280,502 q 8,-45 8,-84 z m 448,-128 q 0,-35 -20,-69 Q 1733,443 1663,362 1513,190 1315.5,95 1118,0 896,0 l 74,132 q 212,18 392.5,137 180.5,119 301.5,307 -115,179 -282,294 l 63,112 q 95,-64 182.5,-153 87.5,-89 144.5,-184 20,-34 20,-69 z" fill="#c0c0c0"></path></g></symbol></svg>'),Q=V.SVGParser('<svg xmlns="http://www.w3.org/2000/svg"><symbol id="'+this.eyeId+'" viewBox="0 -256 1850 1850"><rect pointer-events="fill" x="-256" y="0" fill="transparent" width="2106" height="1850" /><g transform="matrix(1,0,0,-1,30.372881,1259.8983)"><path d="m 1664,576 q -152,236 -381,353 61,-104 61,-225 0,-185 -131.5,-316.5 Q 1081,256 896,256 711,256 579.5,387.5 448,519 448,704 448,825 509,929 280,812 128,576 261,371 461.5,249.5 662,128 896,128 1130,128 1330.5,249.5 1531,371 1664,576 z M 944,960 q 0,20 -14,34 -14,14 -34,14 -125,0 -214.5,-89.5 Q 592,829 592,704 q 0,-20 14,-34 14,-14 34,-14 20,0 34,14 14,14 14,34 0,86 61,147 61,61 147,61 20,0 34,14 14,14 14,34 z m 848,-384 q 0,-34 -20,-69 Q 1632,277 1395.5,138.5 1159,0 896,0 633,0 396.5,139 160,278 20,507 0,542 0,576 q 0,34 20,69 140,229 376.5,368 236.5,139 499.5,139 263,0 499.5,-139 236.5,-139 376.5,-368 20,-35 20,-69 z" fill="#444444" /></g></symbol></svg>');this.svg.appendChild(document.adoptNode(Q.documentElement.firstChild)),this.svg.appendChild(document.adoptNode(K.documentElement.firstChild)),this.svg.appendChild(this.subG),this.applyStyle()}setPosition(G,Z,K){G&&(this.position=G,this.alignToX=Z||'left',this.alignToY=K||'top')}setDraggable(G){this.options.movable=G}setAutoPosition(G){return-1<['bottom','left','top','right'].indexOf(G=G.toLowerCase())?(this.autoPosition=G,this):void(this.requireDelayedUpdate(),this.autoPosition=!1)}autoPosition(){return this.setAutoPosition(...arguments)}buildLegendBox(){var G=this.series||this.graph.getSeries(),Z=0,K=this.options.paddingTop;this.autoPosition?this.graph.getDom().appendChild(this.getDom()):this.graph.graphingZone.appendChild(this.getDom());for(var Q=0,J=G.length;Q<J;Q++)if(!G[Q].excludedFromLegend||this.series){if('bottom'==this.autoPosition||'top'==this.autoPosition){var $=F(this.groups[Q]);Z+$.width>this.graph.getDrawingWidth()-this.options.paddingRight&&(K+=16,Z=0)}this.groups[Q].setAttribute('transform','translate( '+Z+', '+K+')'),'bottom'==this.autoPosition||'top'==this.autoPosition?(Z+=$.width+10,K+=0):(Z=0,K+=16)}var $=F(this.subG);switch(this.width=$.width+this.options.paddingRight+this.options.paddingLeft,this.height=$.height+this.options.paddingBottom+this.options.paddingTop,this.rect.setAttribute('width',this.width),this.rect.setAttribute('height',this.height),this.rect.setAttribute('fill','none'),this.rect.setAttribute('pointer-events','fill'),this.rect.setAttribute('display','none'),this.options.movable&&(this.rectBottom.style.cursor='move'),this.rectBottom.setAttribute('width',this.width),this.rectBottom.setAttribute('height',this.height),this.rectBottom.setAttribute('x',$.x-this.options.paddingLeft),this.rectBottom.setAttribute('y',$.y-this.options.paddingTop),this.position=this.position||{},this.autoPosition){case'bottom':this.position.y=this.graph.getHeight()+'px',this.position.x=(this.graph.drawingSpaceWidth-this.width)/2+this.graph.drawingSpaceMinX+'px',this.alignToY='bottom',this.alignToX=!1;break;case'left':this.position.x='6px',this.position.y=(this.graph.getHeight()-this.height)/2+'px',this.alignToX='left',this.alignToY=!1;break;case'right':this.position.x=this.graph.getWidth()+'px',this.position.y=(this.graph.getHeight()-this.height)/2+'px',this.alignToX='right',this.alignToY=!1;break;case'top':this.position.x=(this.graph.drawingSpaceWidth-this.width)/2+this.graph.drawingSpaceMinX+'px',this.position.y='10px',this.alignToY='top',this.alignToX=!1;}if(this.autoPosition){switch(this.autoPosition){case'bottom':this.graph.options.paddingBottom=this.height+10;break;case'left':this.graph.options.paddingLeft=this.width+5;break;case'right':this.graph.options.paddingRight=this.width+10;break;case'top':this.graph.options.paddingTop=this.height+14;}this.graph.updateGraphingZone(),this.graph.getDrawingHeight(),this.graph.getDrawingWidth()}this.bbox=$}calculatePosition(){var G=W.default.check(this.position);let Z=G.compute(this.graph,this.graph.getXAxis(),this.graph.getYAxis());Z&&('right'==this.alignToX&&(Z.x-=this.width,Z.x+=this.bbox.x),'bottom'==this.alignToY?(Z.y-=this.height,Z.y+=this.bbox.y):Z.y+=this.bbox.y,this.pos.transformX=Z.x,this.pos.transformY=Z.y,this._setPosition())}update(G){if(!(this.graph.isDelayedUpdate()||!this._requiredUpdate&&G)){this._requiredUpdate=!1;var Z=this;for(this.applyStyle();this.subG.hasChildNodes();)this.subG.removeChild(this.subG.lastChild);this.svg.insertBefore(this.rectBottom,this.svg.firstChild);var K=this.series||this.graph.getSeries();if(0<K.length)this.svg.setAttribute('display','block');else return;if('bottom'==this.autoPosition||'top'==this.autoPosition)this.graph.getDrawingWidth();for(var re=0,ae=K.length;re<ae;re++)(!K[re].excludedFromLegend||this.series)&&function(se){var oe,ne,le;if('bottom'==this.autoPosition||'top'==this.autoPosition)this.graph.getDrawingWidth();oe=document.createElementNS(Z.graph.ns,'g');var ge=document.createElementNS(Z.graph.ns,'rect');Z.subG.appendChild(oe),oe.appendChild(ge);var ne=K[se].getSymbolForLegend(),ue=K[se].getMarkerForLegend(),le=K[se].getTextForLegend(),he=35;if(this.isHideable()){he+=20;var ce=document.createElementNS(Z.graph.ns,'use');ce.setAttributeNS('http://www.w3.org/1999/xlink','xlink:href','#'+(K[re].isShown()?this.eyeId:this.eyeCrossedId)),ce.setAttribute('width',15),ce.setAttribute('height',15),ce.setAttribute('x',35),ce.setAttribute('y',-8),ce.addEventListener('click',function(me){me.stopPropagation();var fe;K[se].isShown()?(K[se].hide(Z.options.hideShapesOnHideSerie),fe=Z.eyeCrossedId):(K[se].show(Z.options.hideShapesOnHideSerie),fe=Z.eyeId),ce.setAttributeNS('http://www.w3.org/1999/xlink','xlink:href','#'+fe)})}le.setAttribute('transform','translate('+he+', 3)'),ne&&oe.appendChild(ne),'scatter'==K[se].getType()&&ne.setAttribute('transform','translate( 20, 0 )'),ue&&oe.appendChild(ue),ce&&oe.appendChild(ce),oe.appendChild(le);var xe=F(oe);ge.setAttribute('x',xe.x),ge.setAttribute('y',xe.y),ge.setAttribute('width',xe.width),ge.setAttribute('height',xe.height),ge.setAttribute('fill','none'),ge.setAttribute('pointer-events','fill'),Z.groups[se]=oe,oe.addEventListener('click',function(me){var fe=K[se];fe.isShown()&&(Z.isSelectable()&&!fe.isSelected()?Z.graph.selectSerie(fe):Z.graph.unselectSerie(fe),me.preventDefault(),me.stopPropagation())})}.call(this,re);this.svg.appendChild(this.rect),this.buildLegendBox(),this.calculatePosition()}}isHideable(){return this.options.isSerieHideable}notHideable(){return this.options.isSerieHideable=!1,this}hideable(){return this.options.isSerieHideable=!0,this}set seriesHideable(G){this.options.isSerieHideable=!!G}get seriesHideable(){return this.options.isSerieHideable}isSelectable(){return this.options.isSerieSelectable}isToggleShapes(){return this.options.shapesToggleable}getDom(){return this.svg}setEvents(){var G=this,Z=this.pos;this.svg.addEventListener('mousedown',function(J){J.stopPropagation(),console.log('down'),G.options.movable&&(Z.x=J.clientX,Z.y=J.clientY,J.preventDefault(),G.mousedown=!0,G.graph.elementMoving(G),G.rect.setAttribute('display','block'))}),this.svg.addEventListener('click',function(J){J.stopPropagation()}),this.svg.addEventListener('dblclick',function(J){J.stopPropagation()}),this.svg.addEventListener('mousemove',function(J){G.handleMouseMove(J)})}handleMouseUp(G){G.stopPropagation(),G.preventDefault(),this.mousedown=!1,this.rect.setAttribute('display','none'),this.graph.elementMoving(!1)}handleMouseMove(G){if(this.mousedown){var Z=this.pos,K=G.clientX-Z.x,Q=G.clientY-Z.y;Z.transformX+=K,Z.transformY+=Q,Z.x=G.clientX,Z.y=G.clientY,G.stopPropagation(),G.preventDefault(),this._setPosition()}}_setPosition(){var G=this.pos;isNaN(G.transformX)||isNaN(G.transformY)||!1===G.transformX||!1===G.transformY||this.svg.setAttribute('transform','translate('+G.transformX+', '+G.transformY+')')}applyStyle(){this.options.frame&&(this.rectBottom.setAttribute('stroke',this.options.frameColor),this.rectBottom.setAttribute('stroke-width',this.options.frameWidth+'px'),this.rectBottom.setAttribute('rx',this.options.frameRounding),this.rectBottom.setAttribute('ry',this.options.frameRounding)),this.rectBottom.setAttribute('fill',this.options.backgroundColor)}fixSeries(){var G=[];if(!1===arguments[0])return this.series=!1,void this.update();for(var Z=0,K=arguments.length;Z<K;Z++)Array.isArray(arguments[Z])?G=G.concat(arguments[Z]):G.push(arguments[Z]);this.update(),this.series=G}fixSeriesAdd(G){this.series=this.series||[],this.series.push(G)}requireDelayedUpdate(){this._requiredUpdate=!0}}X.default=U,T.exports=X['default']})},function(u,A,S){var P,C,E;(function(T,X){C=[u,A,S(10)],P=X,E='function'==typeof P?P.apply(A,C):P,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y){'use strict';Object.defineProperty(X,'__esModule',{value:!0});var B=function(F){return F&&F.__esModule?F:{default:F}}(Y);class O extends B.default{constructor(F,W,V={}){super(F,W,V),this.top='top'==W}getAxisPosition(){if(!this.options.display)return 0;var F=(1==this.options.tickPosition?8:20)+1*this.graph.options.fontSize;return this.getLabel()&&(F+=this.graph.options.fontSize),F}isX(){return!0}isY(){return!1}setShift(F){this.shift=F;void 0!==this.getShift()&&this.graph.getDrawingHeight()&&this.group.setAttribute('transform','translate(0 '+(this.floating?this.getShift():this.top?this.shift:this.graph.getDrawingHeight()-this.shift)+')')}getMaxSizeTick(){return(this.top?-1:1)*(1==this.options.tickPosition?10:10)}drawTick(F,W,V,R){var U=this,G;if(G=R||this.getPos(F),!(void 0==G||isNaN(G))){var Z=this.nextTick(W,function(Q){Q.setAttribute('y1',(U.top?1:-1)*U.tickPx1*U.tickScaling[W]),Q.setAttribute('y2',(U.top?1:-1)*U.tickPx2*U.tickScaling[W]),1==W?Q.setAttribute('stroke',U.getPrimaryTicksColor()):Q.setAttribute('stroke',U.getSecondaryTicksColor())});if(Z.setAttribute('x1',G),Z.setAttribute('x2',G),this.nextGridLine(1==W,G,G,0,this.graph.getDrawingHeight()),1==W){var K=this.nextTickLabel(function(Q){Q.setAttribute('y',(U.top?-1:1)*((1==U.options.tickPosition?8:20)+(U.top?10:0))),Q.setAttribute('text-anchor','middle'),'black'!==U.getTicksLabelColor()&&Q.setAttribute('fill',U.getTicksLabelColor()),Q.style.dominantBaseline='hanging'});K.setAttribute('x',G),this.setTickContent(K,F,V)}return[Z,K]}}drawLabel(){'black'!==this.getLabelColor()&&this.label.setAttribute('fill',this.getLabelColor()),this.options.labelFont&&this.label.setAttribute('font-family',this.options.labelFont),this.label.setAttribute('text-anchor','middle'),this.label.setAttribute('style','display: initial;'),this.label.setAttribute('x',Math.abs(this.getMaxPx()+this.getMinPx())/2),this.label.setAttribute('y',(this.top?-1:1)*((1==this.options.tickPosition?10:25)+this.graph.options.fontSize)),this.labelTspan.textContent=this.getLabel()}draw(){var F=super.draw(...arguments);return this.drawSpecifics(),F}drawSpecifics(){this.drawLabel(),this.line.setAttribute('x1',this.getMinPx()),this.line.setAttribute('x2',this.getMaxPx()),this.line.setAttribute('y1',0),this.line.setAttribute('y2',0),this.line.setAttribute('stroke',this.getAxisColor()),this.top||(this.labelTspan.style.dominantBaseline='hanging',this.expTspan.style.dominantBaseline='hanging',this.expTspanExp.style.dominantBaseline='hanging',this.unitTspan.style.dominantBaseline='hanging');var F=this.getSpan();this.line.setAttribute('marker-start',this.options.splitMarks&&0!=F[0]?'url(#horionzalsplit_'+this.graph.getId()+')':''),this.line.setAttribute('marker-end',this.options.splitMarks&&1!=F[1]?'url(#horionzalsplit_'+this.graph.getId()+')':'')}_drawLine(F,W){let V=this.getPx(F);return W?W.setAttribute('display','initial'):W=document.createElementNS(this.graph.ns,'line'),W.setAttribute('x1',V),W.setAttribute('x2',V),W.setAttribute('y1',0),W.setAttribute('y2',this.graph.drawingSpaceHeight),W.setAttribute('stroke','black'),this.group.appendChild(W),W}_hideLine(F){F&&F.setAttribute('display','none')}handleMouseMoveLocal(F){F-=this.graph.getPaddingLeft(),this.mouseVal=this.getVal(F)}setMinMaxFlipped(){var F=this.maxPx-this.minPx;if(!isNaN(F)){var W=F*this.options.span[1]+this.minPx-this.options.marginMax,V=F*this.options.span[0]+this.minPx+this.options.marginMin;this.minPxFlipped=this.isFlipped()?W:V,this.maxPxFlipped=this.isFlipped()?V:W}}getZProj(F){return F*this.graph.options.zAxis.shiftX}}X.default=O,T.exports=X['default']})},function(u,A,S){var P,C,E;(function(T,X){C=[u,A,S(1),S(4),S(3)],P=X,E='function'==typeof P?P.apply(A,C):P,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y,I,B){'use strict';function F(Z){return Z&&Z.__esModule?Z:{default:Z}}Object.defineProperty(X,'__esModule',{value:!0});var W=F(Y),V=F(I),R=function(Z){if(Z&&Z.__esModule)return Z;var K={};if(null!=Z)for(var Q in Z)Object.prototype.hasOwnProperty.call(Z,Q)&&(K[Q]=Z[Q]);return K.default=Z,K}(B);const U={lineAt:!1,display:!0,flipped:!1,axisDataSpacing:{min:0.1,max:0.1},unitModification:!1,primaryGrid:!0,secondaryGrid:!0,primaryGridColor:'#f0f0f0',secondaryGridColor:'#f0f0f0',primaryGridWidth:1,secondaryGridWidth:1,hideWhenNoSeriesShown:!1,shiftToZero:!1,tickPosition:1,nbTicksPrimary:3,nbTicksSecondary:10,ticklabelratio:1,exponentialFactor:0,exponentialLabelFactor:0,logScale:!1,forcedMin:!1,forcedMax:!1,span:[0,1],marginMin:0,marginMax:0,scientificScale:!1,scientificScaleExponent:!1,engineeringScale:!1,unit:!1,unitWrapperBefore:'',unitWrapperAfter:'',splitMarks:!1,useKatexForLabel:!1};class G extends V.default{constructor(){super()}init(Z,K,Q){this.unitModificationTimeTicks=[[1,[1,2,5,10,20,30]],[60,[1,2,5,10,20,30]],[3600,[1,2,6,12]],[86400,[1,2,3,4,5,10,20,40]]],this.graph=Z,this.options=R.extend(!0,{},U,Q,K),this.group=document.createElementNS(this.graph.ns,'g'),this.hasChanged=!0,this.rectEvent=document.createElementNS(this.graph.ns,'rect'),this.rectEvent.setAttribute('pointer-events','fill'),this.rectEvent.setAttribute('fill','transparent'),this.group.appendChild(this.rectEvent),this.graph.axisGroup.appendChild(this.group),this._lines=[],this.line=document.createElementNS(this.graph.ns,'line'),this.line.setAttribute('stroke','black'),this.line.setAttribute('shape-rendering','crispEdges'),this.line.setAttribute('stroke-linecap','square'),this.groupTicks=document.createElementNS(this.graph.ns,'g'),this.groupTickLabels=document.createElementNS(this.graph.ns,'g'),this.group.appendChild(this.groupTicks),this.group.appendChild(this.groupTickLabels),this.group.appendChild(this.line),this.labelValue,this.label=document.createElementNS(this.graph.ns,'text'),this.labelTspan=document.createElementNS(this.graph.ns,'tspan'),this.preunit='',this.unitTspan=document.createElementNS(this.graph.ns,'tspan'),this.expTspan=document.createElementNS(this.graph.ns,'tspan'),this.expTspanExp=document.createElementNS(this.graph.ns,'tspan'),this.label.appendChild(this.labelTspan),this.label.appendChild(this.unitTspan),this.label.appendChild(this.expTspan),this.label.appendChild(this.expTspanExp),this.expTspan.setAttribute('dx',6),this.expTspanExp.setAttribute('dy',-5),this.expTspanExp.setAttribute('font-size','0.8em'),this.label.setAttribute('text-anchor','middle'),this.setTickPosition(this.options.tickPosition),this.gridLinePath={primary:'',secondary:''},this.gridPrimary=document.createElementNS(this.graph.ns,'path'),this.gridSecondary=document.createElementNS(this.graph.ns,'path'),this.graph.groupPrimaryGrids.appendChild(this.gridPrimary),this.graph.groupSecondaryGrids.appendChild(this.gridSecondary),this.setGridLinesStyle(),this.group.appendChild(this.label),this.groupSeries=document.createElementNS(this.graph.ns,'g'),this.group.appendChild(this.groupSeries),this.widthHeightTick=0,this.ticks={},this.ticksLabels=[],this.tickScaling={1:3,2:2,3:1,4:0.5},this.currentTick={},this.lastCurrentTick={},this.series=[],this.totalDelta=0,this.currentAction=!1,this.group.addEventListener('mousemove',J=>{J.preventDefault();var $=this.graph._getXY(J);this.handleMouseMoveLocal($.x,$.y,J);for(var ee=0,te=this.series.length;ee<te;ee++)this.series[ee].handleMouseMove(!1,!0)}),this.labels=[],this.group.addEventListener('click',J=>{J.preventDefault();var $=this.graph._getXY(J);this.addLabel(this.getVal($.x-this.graph.getPaddingLeft()))}),this.gridPrimary.setAttribute('clip-path','url(#_clipplot'+this.graph._creation+')'),this.gridSecondary.setAttribute('clip-path','url(#_clipplot'+this.graph._creation+')'),this.graph._axisHasChanged(this)}handleMouseMoveLocal(){}hide(){return this.options.display=!1,this}show(){return this.options.display=!0,this}setDisplay(Z){return this.options.display=!!Z,this}isDisplayed(){return this.options.hideWhenNoSeriesShown?this.graph.getSeriesFromAxis(this).reduce((Z,K)=>{return Z||K.isShown()},!1):this.options.display}isShown(){return this.isDisplayed(...arguments)}hideGroup(){this._hidden||(this._hidden=!0,this.group.setAttribute('display','none'))}showGroup(){this._hidden&&(this._hidden=!1,this.group.setAttribute('display','initial'))}kill(Z,K){this.graph.killAxis(this,Z,K)}setLineAt(Z){return this.options.lineAt=Z,this}adaptTo(Z,K,Q,J){return Z?(this.options.adaptTo={axis:Z,thisValue:K,foreignValue:Q,preference:J},this.adapt(),this):(this.options.adaptTo=!1,this)}adapt(){if(this.options.adaptTo){if(!K);var K=this.options.adaptTo.axis,Q=this.options.adaptTo.thisValue,J=this.options.adaptTo.foreignValue;if((void 0===K.currentAxisMin||void 0===K.currentAxisMax)&&K.setMinMaxToFitSeries(),!1!==this.options.forcedMin&&!1==this.options.forcedMax||'max'!==this.options.adaptTo.preference){this.currentAxisMin=!1===this.options.forcedMin?this._zoomed?this.getCurrentMin():this.getMinValue()-(Q-this.getMinValue())*(this.options.axisDataSpacing.min*(K.getCurrentMax()-K.getCurrentMin())/(J-K.getCurrentMin())):this.options.forcedMin,this.currentAxisMin==Q&&(this.currentAxisMin-=this.options.axisDataSpacing.min*this.getInterval());var $=!1===this.options.forcedMin?this.currentAxisMin:this.options.forcedMin;this.currentAxisMax=(Q-$)*(K.getCurrentMax()-K.getCurrentMin())/(J-K.getCurrentMin())+$}else{this.currentAxisMax=!1===this.options.forcedMax?this._zoomed?this.getCurrentMax():this.getMaxValue()+(this.getMaxValue()-Q)*(this.options.axisDataSpacing.max*(K.getCurrentMax()-K.getCurrentMin())/(K.getCurrentMax()-J)):this.options.forcedMax,this.currentAxisMax==Q&&(this.currentAxisMax+=this.options.axisDataSpacing.max*this.getInterval());var $=!1===this.options.forcedMax?this.currentAxisMax:this.options.forcedMax;this.currentAxisMin=(Q-$)*(K.getCurrentMin()-K.getCurrentMax())/(J-K.getCurrentMax())+$}this.graph._axisHasChanged(this)}}setFloating(Z,K){return this.floating=!0,this.floatingAxis=Z,this.floatingValue=K,this}getFloatingAxis(){return this.floatingAxis}getFloatingValue(){return this.floatingValue}setAxisDataSpacing(Z,K){return this.options.axisDataSpacing.min=Z,this.options.axisDataSpacing.max=K||Z,this}dataSpacing(){return this.setAxisDataSpacing(...arguments)}setAxisDataSpacingMin(Z){this.options.axisDataSpacing.min=Z}setAxisDataSpacingMax(Z){this.options.axisDataSpacing.max=Z}setMinPx(Z){this.minPx=Z,this.setMinMaxFlipped()}setMaxPx(Z){this.maxPx=Z,this.setMinMaxFlipped()}getMinPx(){return this.minPxFlipped}getMaxPx(){return this.maxPxFlipped}getMathMaxPx(){return this.maxPx}getMathMinPx(){return this.minPx}getMinValue(){return!1===this.options.forcedMin?this.dataMin:this.options.forcedMin}getMaxValue(){return!1===this.options.forcedMax?this.dataMax:this.options.forcedMax}setMinValueData(Z){this.dataMin=Z,isNaN(this.getCurrentMin())&&(this.setCurrentMin(this.dataMin),this.cache())}setMaxValueData(Z){this.dataMax=Z,isNaN(this.getCurrentMax())&&(this.setCurrentMax(this.dataMax),this.cache())}getDataMax(){return this.dataMax}getDataMin(){return this.dataMin}forceMin(Z,K){return this.options.forcedMin=Z,this.setCurrentMin(K?this.getCurrentMin():void 0),this.graph._axisHasChanged(this),this}forceMax(Z,K){return this.options.forcedMax=Z,this.setCurrentMax(K?this.getCurrentMax():void 0),this.graph._axisHasChanged(this),this}getForcedMin(){return this.options.forcedMin}getForcedMax(){return this.options.forcedMax}forceToAxis(Z){return Z.getMaxValue&&Z.getMinValue&&(this.options.forcedMin=Z.getMinValue(),this.options.forcedMax=Z.getMaxValue()),this}getNbTicksPrimary(){return this.options.nbTicksPrimary}setNbTicksPrimary(Z){this.options.nbTicksPrimary=Z}getNbTicksSecondary(){return this.options.nbTicksSecondary}setNbTicksSecondary(Z){return this.options.nbTicksSecondary=Z,this}handleMouseMove(Z){this.mouseVal=this.getVal(Z)}handleMouseWheel(Z,K,Q){Z=Math.min(0.2,Math.max(-0.2,Z)),'min'==Q?Q=this.getMinValue():'max'==Q?Q=this.getMaxValue():!Q&&(Q=0),this._doZoomVal((this.getCurrentMax()-Q)*(1+Z)+Q,(this.getCurrentMin()-Q)*(1+Z)+Q),this.graph.draw()}set zoomLock(Z){this._zoomLocked=Z}get zoomLock(){return this._zoomLocked||!1}zoom(Z,K,Q){return!Q&&this.zoomLock?void 0:this._doZoomVal(Z,K,!0)}_doZoomVal(Z,K,Q){return this._doZoom(this.getPx(Z),this.getPx(K),Z,K,Q)}_doZoom(Z,K,Q,J,$){var Q=void 0===Q?this.getVal(Z):Q,J=void 0===J?this.getVal(K):J;return this.setCurrentMin(Math.min(Q,J)),this.setCurrentMax(Math.max(Q,J)),this.cacheCurrentMin(),this.cacheCurrentMax(),this.cacheInterval(),this._zoomed=!0,this.adapt(),this._hasChanged=!0,$||this.emit('zoom',[this.currentAxisMin,this.currentAxisMax,this]),this}getSerieShift(){return this._serieShift}getSerieScale(){return this._serieScale}getMouseVal(){return this.mouseVal}getUnitPerTick(Z,K,Q){var $=Z/he;K=K?Math.min(K,Z/10):Z/10;var ee=Q/K;switch(this.options.unitModification){case'time':case'time:min.sec':var te=this.getModifiedValue(this.getMaxValue());3600>te?0:86400>te?1:2;for(var re=!1,ae=0,se=this.unitModificationTimeTicks.length;ae<se;ae++){for(var oe=0,ne=this.unitModificationTimeTicks[ae][1].length;oe<ne;oe++)if(ee<this.unitModificationTimeTicks[ae][0]*this.unitModificationTimeTicks[ae][1][oe]){re=!0;break}if(re)break}ue=ae===this.unitModificationTimeTicks.length?1:this.unitModificationTimeTicks[ae][0]*this.unitModificationTimeTicks[ae][1][oe];break;default:var le=Math.floor(Math.log(ee)/Math.log(10)),pe=ee*Math.pow(10,-le);this.decimals=-le;for(var de=[1,2,5,10],ge=!1,ae=de.length-1;0<=ae;ae--)(!ge||Math.abs(de[ae]-pe)<Math.abs(ge-pe))&&(ge=de[ae]);var ue=ge*Math.pow(10,le);}var he=Q/ue,$=Z/K;return[ue,he,$]}setMinMaxToFitSeries(Z){var K=this.getInterval();return this.options.logScale?(this.currentAxisMin=Math.max(1e-50,0.9*this.getMinValue()),this.currentAxisMax=Math.max(1e-50,1.1*this.getMaxValue())):(this.currentAxisMin=this.getMinValue(),this.currentAxisMax=this.getMaxValue(),!1===this.getForcedMin()&&(this.currentAxisMin-=this.options.axisDataSpacing.min*K),!1===this.getForcedMax()&&(this.currentAxisMax+=this.options.axisDataSpacing.max*K)),(isNaN(this.currentAxisMin)||isNaN(this.currentAxisMax))&&(this.currentAxisMax=void 0,this.currentAxisMin=void 0),this.cache(),this._zoomed=!1,this.adapt(),Z||this.graph._axisHasChanged(this),this.emit('zoomOutFull',[this.currentAxisMin,this.currentAxisMax,this]),this}getInterval(){return this.getMaxValue()-this.getMinValue()}getCurrentInterval(){return this.cachedInterval}getCurrentMin(){return this.cachedCurrentMin}getCurrentMax(){return this.cachedCurrentMax}cacheCurrentMin(){this.cachedCurrentMin=this.currentAxisMin==this.currentAxisMax?this.options.logScale?this.currentAxisMin/10:this.currentAxisMin-1:this.currentAxisMin}cacheCurrentMax(){this.cachedCurrentMax=this.currentAxisMax==this.currentAxisMin?this.options.logScale?10*this.currentAxisMax:this.currentAxisMax+1:this.currentAxisMax}cacheInterval(){this.cachedInterval=this.cachedCurrentMax-this.cachedCurrentMin}cache(){this.cacheCurrentMin(),this.cacheCurrentMax(),this.cacheInterval()}setCurrentMin(Z){return(void 0===Z||!1!==this.getForcedMin()&&Z<this.getForcedMin())&&(Z=this.getMinValue()),this.currentAxisMin=Z,this.options.logScale&&(this.currentAxisMin=Math.max(1e-50,Z)),this.graph._axisHasChanged(this),this}setCurrentMax(Z){(Z===void 0||!1!==this.getForcedMax()&&Z>this.getForcedMax())&&(Z=this.getMaxValue()),this.currentAxisMax=Z,this.options.logScale&&(this.currentAxisMax=Math.max(1e-50,Z)),this.graph._axisHasChanged(this)}flip(Z){return this.options.flipped=Z,this.setMinMaxFlipped(),this}isFlipped(){return this.options.flipped}_draw(){var Z=this;this.cache(),(void 0==this.currentAxisMin||void 0==this.currentAxisMax)&&this.setMinMaxToFitSeries(!0);var Q=Math.abs(this.getMaxPx()-this.getMinPx()),J=this.getCurrentInterval();if(!this.isShown())return this.line.setAttribute('display','none'),0;this.line.setAttribute('display','block'),this.scientificExponent=!0==this.options.scientificScale?this.options.scientificScaleExponent?this.options.scientificScaleExponent:Math.floor(Math.log(Math.max(Math.abs(this.getCurrentMax()),Math.abs(this.getCurrentMin())))/Math.log(10)):0,this.gridLinePath.primary='',this.gridLinePath.secondary='';let $;if(!this.options.useKatexForLabel||!this.graph.hasKatexRenderer())this.options.unitDecade&&this.options.unit&&0!==this.scientificExponent&&(this.scientificExponent=this.getEngineeringExponent(this.scientificExponent))&&($=this.getExponentGreekLetter(this.scientificExponent))?(this.preunit=$,this.unitTspan.setAttribute('dx',0)):0===this.scientificExponent||isNaN(this.scientificExponent)?(!this.options.unit&&this.unitTspan.setAttribute('display','none'),this.preunit='',this.expTspan.setAttribute('display','none'),this.expTspanExp.setAttribute('display','none')):(this.options.engineeringScale&&(this.scientificExponent=this.getEngineeringExponent(this.scientificExponent)),this.preunit='',this.expTspan.setAttribute('display','visible'),this.expTspanExp.setAttribute('display','visible'),this.expTspan.textContent='x10',this.expTspanExp.textContent=this.scientificExponent),this.writeUnit();else{let ie=this.getLabel();this.options.unitDecade&&this.options.unit&&0!==this.scientificExponent&&(this.scientificExponent=this.getEngineeringExponent(this.scientificExponent))&&($=this.getExponentGreekLetter(this.scientificExponent))?(ie+=$,this.preunitTspan.innerHTML=$,this.preunitTspan.setAttribute('display','visible'),this.unitTspan.setAttribute('dx',0),ie+=' '+$+' '+this.options.unit):0!==this.scientificExponent&&!isNaN(this.scientificExponent)&&(this.options.engineeringScale&&(this.scientificExponent=this.getEngineeringExponent(this.scientificExponent)),ie+=' \\cdot 10^'+this.scientificExponent+' '+this.options.unit),this.katexElement=this.graph.renderWithKatex(ie,this.katexElement)}if(!!this.options.hideTicks)var ee=0;else if(this.resetTicksLength(),this.linkedToAxis){this.linkedToAxis.deltaPx=10;var ee=this.drawLinkedToAxisTicksWrapper(Q,J)}else if(!this.options.logScale)var ee=this.drawLinearTicksWrapper(Q,J);else var ee=this.drawLogTicks();this.removeUselessTicks(),this.removeUselessTickLabels(),this.gridPrimary.setAttribute('d',this.gridLinePath.primary),this.gridSecondary.setAttribute('d',this.gridLinePath.secondary);var te=this.graph.findAxesLinkedTo(this);return te.map(function(ie){ie.linkedToAxis&&(ie.setMinPx(Z.getMinPx()),ie.setMaxPx(Z.getMaxPx()),ie.draw())}),ee}drawLines(){this.options.lineAt&&Array.isArray(this.options.lineAt)&&this.options.lineAt.forEach((Z,K)=>{!isNaN(Z)&&this.getCurrentMin()<Z&&this.getCurrentMax()>Z?this._lines[K]=this._drawLine(Z,this._lines[K]):this._hideLine(this._lines[K])})}writeUnit(){this.options.unit?(this.unitTspan.setAttribute('display','visible'),this.unitTspan.setAttribute('dx',5),this.expTspan.setAttribute('display','none'),this.expTspanExp.setAttribute('display','none'),this.unitTspan.innerHTML=(this.options.unitWrapperBefore+this.preunit+this.options.unit+this.options.unitWrapperAfter).replace(/\^([-+0-9]*)(.*)/g,'<tspan dy=\'-5\' font-size=\'0.7em\'>$1</tspan><tspan dy=\'5\' font-size=\'1em\'>$2</tspan>')):this.unitTspan.setAttribute('display','none')}getExponentGreekLetter(Z){switch(Z){case 3:return'k';break;case 6:return'M';break;case 9:return'G';break;case 12:return'T';break;case 15:return'E';break;case-3:return'm';break;case-6:return'&mu;';break;case-9:return'n';break;case-12:return'p';break;case-15:return'f';}}drawLinearTicksWrapper(Z,K){let Q;return this.options.primaryTickUnit?Q=this.options.primaryTickUnit:(Q=this.getUnitPerTick(Z,this.getNbTicksPrimary(),K)[0],this.options.maxPrimaryTickUnit&&this.options.maxPrimaryTickUnit<Q?Q=this.options.maxPrimaryTickUnit:this.options.minPrimaryTickUnit&&this.options.minPrimaryTickUnit>Q&&(Q=this.options.minPrimaryTickUnit)),this.drawTicks(Q,this.secondaryTicks())}forcePrimaryTickUnit(Z){this.options.primaryTickUnit=Z}forcePrimaryTickUnitMax(Z){this.options.maxPrimaryTickUnit=Z}forcePrimaryTickUnitMin(Z){this.options.minPrimaryTickUnit=Z}getPrimaryTickUnit(){return this.incrTick}setTickLabelRatio(Z){this.options.ticklabelratio=Z}doesHideWhenNoSeriesShown(){return this.options.hideWhenNoSeriesShown}draw(){this._widthLabels=0;var Z=this._draw();return this._widthLabels+=Z,Z}drawTicks(Z,K){var Q=Z,J=this.getCurrentMin(),$=this.getCurrentMax(),ae=0,te,ie,re;for(K&&(te=Q/K),ie=this.options.shiftToZero?this.dataMin-Math.ceil((this.dataMin-J)/Q)*Q:Math.floor(J/Q)*Q,this.incrTick=Z;ie<=$&&(ae++,!(200<ae));){if(K){re=ie+te,this.subIncrTick=re;for(var se=0;re<ie+Q&&(se++,!(100<se));){if(re<J||re>$){re+=te;continue}this.drawTickWrapper(re,!1,1e-4>Math.abs(re-ie-Q/2)?2:3),re+=te}}if(ie<J||ie>$){ie+=Z;continue}this.drawTickWrapper(ie,!0,1),ie+=Z}return this.widthHeightTick=this.getMaxSizeTick(),this.widthHeightTick}nextTick(Z,K){if(this.ticks[Z]=this.ticks[Z]||[],this.lastCurrentTick[Z]=this.lastCurrentTick[Z]||0,this.currentTick[Z]=this.currentTick[Z]||0,this.currentTick[Z]>=this.ticks[Z].length){var Q=document.createElementNS(this.graph.ns,'line');this.groupTicks.appendChild(Q),this.ticks[Z].push(Q),K(Q)}var Q=this.ticks[Z][this.currentTick[Z]];return this.currentTick[Z]>=this.lastCurrentTick[Z]&&Q.setAttribute('display','visible'),this.currentTick[Z]++,Q}nextTickLabel(Z){if(this.ticksLabels=this.ticksLabels||[],this.lastCurrentTickLabel=this.lastCurrentTickLabel||0,this.currentTickLabel=this.currentTickLabel||0,this.currentTickLabel>=this.ticksLabels.length){var K=document.createElementNS(this.graph.ns,'text');this.groupTickLabels.appendChild(K),this.ticksLabels.push(K),Z(K)}var K=this.ticksLabels[this.currentTickLabel];return this.currentTickLabel>=this.lastCurrentTickLabel&&K.setAttribute('display','visible'),this.currentTickLabel++,K}removeUselessTicks(){for(var Z in this.currentTick){for(var K=this.currentTick[Z];K<this.ticks[Z].length;K++)this.ticks[Z][K].setAttribute('display','none');this.lastCurrentTick[Z]=this.currentTick[Z],this.currentTick[Z]=0}}removeUselessTickLabels(){for(var Z=this.currentTickLabel;Z<this.ticksLabels.length;Z++)this.ticksLabels[Z].setAttribute('display','none');this.lastCurrentTickLabel=this.currentTickLabel,this.currentTickLabel=0}nextGridLine(Z,K,Q,J,$){(Z&&this.options.primaryGrid||!Z&&this.options.secondaryGrid)&&(this.gridLinePath[Z?'primary':'secondary']+='M '+K+' '+J+' L '+Q+' '+$)}setGridLineStyle(Z,K){Z.setAttribute('shape-rendering','crispEdges'),Z.setAttribute('stroke',K?this.getPrimaryGridColor():this.getSecondaryGridColor()),Z.setAttribute('stroke-width',K?this.getPrimaryGridWidth():this.getSecondaryGridWidth()),Z.setAttribute('stroke-opacity',K?this.getPrimaryGridOpacity():this.getSecondaryGridOpacity());var Q;(Q=K?this.getPrimaryGridDasharray():this.getSecondaryGridDasharray())&&Z.setAttribute('stroke-dasharray',Q)}setGridLinesStyle(){return this.setGridLineStyle(this.gridPrimary,!0),this.setGridLineStyle(this.gridSecondary,!1),this}resetTicksLength(){}secondaryTicks(){return this.options.nbTicksSecondary}drawLogTicks(){var Z=this.getCurrentMin(),K=this.getCurrentMax(),Q=Math.min(Z,K),K=Math.max(Z,K);1e-50>Q&&(Q=1e-50),20<Math.log(Q)-Math.log(K)&&(K=Math.pow(10,20*Math.log(Q)));var J={fontSize:'1.0em',exponential:!0,overwrite:!1};0>Q&&(Q=0);for(var $=0==Q?0:Math.floor(Math.log(Q)/Math.log(10)),Q=1,te;(te=Q*Math.pow(10,$))<K;)1==Q&&te>Z&&this.drawTickWrapper(te,!0,1,J),10==Q?(Q=1,$++):(1!=Q&&te>Z&&this.drawTickWrapper(te,!1,2,{overwrite:'',fontSize:'0.6em'}),Q++);return this.widthHeightTick=this.getMaxSizeTick(),this.widthHeightTick}drawTickWrapper(Z,K,Q,J){this.drawTick(Z,Q,J)}linkToAxis(Z,K,Q){this.linkedToAxis={axis:Z,scalingFunction:K,decimals:Q||1}}drawLinkedToAxisTicksWrapper(Z,K){var Q=this.linkedToAxis,J=0,te=0,$,ee,ie,re;Q.deltaPx||(Q.deltaPx=10);do{if($=Q.scalingFunction(Q.axis.getVal(J+this.getMinPx())),Q.decimals&&(this.decimals=Q.decimals),ee=this.drawTick($,1,{},J+this.getMinPx()),!ee)throw console.log($,J,this.getMinPx()),'Unable to draw tick. Please report the test-case';if(ie=8*(ee[1].textContent+'').length,re=5*Math.round(ie/5),re>Q.deltaPx)return Q.deltaPx=re,void this.drawLinkedToAxisTicksWrapper(Z,K);te++,J+=Q.deltaPx}while(J<Z)}getPos(Z){return this.getPx(Z)}getPx(Z){if(!this.options.logScale)return(Z-this.getCurrentMin())/this.getCurrentInterval()*(this.getMaxPx()-this.getMinPx())+this.getMinPx();if(!(0>Z)){var Z=(Math.log(Z)-Math.log(this.getCurrentMin()))/(Math.log(this.getCurrentMax())-Math.log(this.getCurrentMin()))*(this.getMaxPx()-this.getMinPx())+this.getMinPx();return Z}}getRoundedPx(Z){return Math.round(10*this.getPx(Z))/10}getVal(Z){return this.options.logScale?Math.exp((Z-this.getMinPx())/(this.getMaxPx()-this.getMinPx())*(Math.log(this.getCurrentMax())-Math.log(this.getCurrentMin()))+Math.log(this.getCurrentMin())):(Z-this.getMinPx())/(this.getMaxPx()-this.getMinPx())*this.getCurrentInterval()+this.getCurrentMin()}getRelPx(Z){return Z/this.getCurrentInterval()*(this.getMaxPx()-this.getMinPx())}getRelVal(Z){return Z/(this.getMaxPx()-this.getMinPx())*this.getCurrentInterval()}valueToText(Z){if(this.scientificExponent)return Z/=Math.pow(10,this.scientificExponent),Z.toFixed(1);if(Z=Z*Math.pow(10,this.getExponentialFactor())*Math.pow(10,this.getExponentialLabelFactor()),this.options.shiftToZero&&(Z-=this.dataMin),this.options.ticklabelratio&&(Z*=this.options.ticklabelratio),this.options.unitModification)return Z=this.modifyUnit(Z,this.options.unitModification),Z;var K=this.decimals-this.getExponentialFactor()-this.getExponentialLabelFactor();return isNaN(Z)?'':0<K?Z.toFixed(K):Z.toFixed(0)}valueToHtml(Z,K,Q){var J=this.valueToText(Z),$;return this.options.unitDecade&&this.options.unit&&0!==this.scientificExponent&&(this.scientificExponent=this.getEngineeringExponent(this.scientificExponent))&&($=this.getExponentGreekLetter(this.scientificExponent))?J+=$:0!==this.scientificExponent&&!isNaN(this.scientificExponent)&&!K&&(J+='x10',J+='<sup>'+this.scientificExponent+'</sup>'),this.options.unit&&!Q&&(J+=this.options.unit.replace(/\^([-+0-9]*)/g,'<sup>$1</sup>')),J}getModifiedValue(Z){return this.options.ticklabelratio&&(Z*=this.options.ticklabelratio),this.options.shiftToZero&&(Z-=this.getMinValue()*(this.options.ticklabelratio||1)),Z}modifyUnit(Z,K){var Q='',J=this.incrTick;switch(K){case'time':var $=this.getModifiedValue(this.getMaxValue()),te=[[60,'min'],[3600,'h'],[86400,'d']],ee,ie;if(3600>$?ie=0:86400>$?ie=1:2592000>$&&(ie=2),!te[ie])return!1;Z=Z/te[ie][0];var re=Math.floor(Z);for(Q=re+te[ie][1],ie--;J<1*te[ie+1][0]&&-1<ie;)ee=!1,Z=(Z-re)*te[ie+1][0]/te[ie][0],re=Math.round(Z),Q+=' '+re+te[ie][1],ie--;break;case'time:min.sec':Z=Z/60;var re=Math.floor(Z),ae=Math.round(60*(Z-re))+'';ae=1==ae.length?'0'+ae:ae,Q=re+'.'+ae;}return Q}getExponentialFactor(){return this.options.exponentialFactor}setExponentialFactor(Z){this.options.exponentialFactor=Z}setExponentialLabelFactor(Z){this.options.exponentialLabelFactor=Z}getExponentialLabelFactor(){return this.options.exponentialLabelFactor}setLabel(Z){return this.options.labelValue=Z,this}setLabelFont(Z){return this.options.labelFont=Z,this}getLabel(){return this.options.labelValue}setSpan(Z,K){return this.options.span=[Z,K],this}getSpan(){return this.options.span}setLevel(Z){return this._level=Z,this}getLevel(){return this._level}setShift(Z){this.shift=Z}getShift(){return this.shift}setTickPosition(Z){switch(Z){case 3:case'outside':case W.default.TICKS_OUTSIDE:Z=3;break;case 2:case'centered':case W.default.TICKS_CENTERED:Z=2;break;default:case 1:case'inside':case W.default.TICKS_INSIDE:Z=1;}switch(this.options.tickPosition=Z,this.options.tickPosition){case 3:this.tickPx1=-2,this.tickPx2=0;break;case 2:this.tickPx1=-1,this.tickPx2=1;break;case 1:this.tickPx1=0,this.tickPx2=2;}return this}setGrids(Z){return this.options.primaryGrid=Z,this.options.secondaryGrid=Z,this}setPrimaryGrid(Z){return this.options.primaryGrid=Z,this}setSecondaryGrid(Z){return this.options.secondaryGrid=Z,this}primaryGridOn(){return this.setPrimaryGrid(!0)}primaryGridOff(){return this.setPrimaryGrid(!1)}secondaryGridOn(){return this.setSecondaryGrid(!0)}secondaryGridOff(){return this.setSecondaryGrid(!1)}gridsOn(){return this.setGrids(!0)}gridsOff(){return this.setGrids(!1)}turnGridsOff(){return this.gridsOff(...arguments)}turnGridsOn(){return this.gridsOn(...arguments)}setAxisColor(Z){return this.options.axisColor=Z,this}getAxisColor(){return this.options.axisColor||'black'}setPrimaryTicksColor(Z){return this.options.primaryTicksColor=Z,this}getPrimaryTicksColor(){return this.options.primaryTicksColor||'black'}setSecondaryTicksColor(Z){return this.options.secondaryTicksColor=Z,this}getSecondaryTicksColor(){return this.options.secondaryTicksColor||'black'}setTicksLabelColor(Z){return this.options.ticksLabelColor=Z,Array.isArray(this.ticksLabels)&&this.ticksLabels.forEach(K=>{K.setAttribute('fill',Z)}),this}getTicksLabelColor(){return this.options.ticksLabelColor||'black'}setPrimaryGridColor(Z){return this.options.primaryGridColor=Z,this}getPrimaryGridColor(){return this.options.primaryGridColor}setSecondaryGridColor(Z){return this.options.secondaryGridColor=Z,this}getSecondaryGridColor(){return this.options.secondaryGridColor}setPrimaryGridWidth(Z){return this.options.primaryGridWidth=Z,this}getPrimaryGridWidth(){return this.options.primaryGridWidth}setSecondaryGridWidth(Z){return this.options.secondaryGridWidth=Z,this}getSecondaryGridWidth(){return this.options.secondaryGridWidth}setPrimaryGridOpacity(Z){return this.options.primaryGridOpacity=Z,this}getPrimaryGridOpacity(){return this.options.primaryGridOpacity}setSecondaryGridOpacity(Z){return this.options.secondaryGridOpacity=Z,this}getSecondaryGridOpacity(){return this.options.secondaryGridOpacity}setPrimaryGridDasharray(Z){return this.options.primaryGridDasharray=Z,this}getPrimaryGridDasharray(){return this.options.primaryGridDasharray}setSecondaryGridDasharray(Z){return this.options.secondaryGridDasharray=Z,this}getSecondaryGridDasharray(){return this.options.secondaryGridDasharray}setLabelColor(Z){return this.options.labelColor=Z,this}getLabelColor(){return this.options.labelColor}setTickContent(Z,K,Q){if(Q||(Q={}),Q.overwrite||!Q.exponential)Z.textContent=Q.overwrite||this.valueToText(K);else{var J=Math.round(Math.log(K)/Math.log(10)),$=Math.floor(K*Math.pow(10,-J));Z.textContent=1==$?'10':$+'x10';var ee=document.createElementNS(this.graph.ns,'tspan');ee.textContent=J,ee.setAttribute('font-size','0.7em'),ee.setAttribute('dy',-5),Z.appendChild(ee)}Q.fontSize&&Z.setAttribute('font-size',Q.fontSize)}isX(){return!1}isY(){return!1}setUnit(Z){return this.options.unit=Z,this}setUnitWrapper(Z,K){return this.options.unitWrapperBefore=Z,this.options.unitWrapperAfter=K,this}setUnitDecade(Z){return this.options.unitDecade=Z,this}setScientific(Z){return this.options.scientificScale=Z,this}setScientificScaleExponent(Z){return this.options.scientificScaleExponent=Z,this}setEngineering(Z){return this.options.scientificScale=Z,this.options.engineeringScale=Z,this}getEngineeringExponent(Z){return Z-=0<Z?Z%3:(3- -Z%3)%3,Z}setLogScale(Z){return this.options.logScale=Z,this}isZoomed(){return this.currentAxisMin!=this.getMinValue()&&this.currentAxisMax!=this.getMaxValue()}hasAxis(){return!1}getType(){return null}useKatexForLabel(Z=!0){return this.options.useKatexForLabel=Z,this}}G.prototype.getValue=G.prototype.getVal,G.prototype.getDeltaPx=G.prototype.getRelPx,X.default=G,T.exports=X['default']})},function(u,A,S){var P,C,E;(function(T,X){C=[u,A,S(10)],P=X,E='function'==typeof P?P.apply(A,C):P,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y){'use strict';Object.defineProperty(X,'__esModule',{value:!0});var B=function(F){return F&&F.__esModule?F:{default:F}}(Y);class O extends B.default{constructor(F,W,V){super(F,W,V),this.leftright=W,this.left='left'==W}setAxisPosition(F){this.shiftPosition=F}getAxisPosition(){return this.shiftPosition||0}getAdditionalWidth(){let F=0;return this.getLabel()&&(F+=this.graph.options.fontSize),this.isShown()&&(F+=Math.abs(this.tickMargin)),F}isX(){return!1}isY(){return!0}resetTicksLength(){this.longestTick=[!1,0]}getMaxSizeTick(){return this.longestTick&&this.longestTick[0]?this.longestTick[0].getComputedTextLength()+5:0}draw(){this.tickMargin=this.left?-5-this.tickPx1*this.tickScaling[1]:2-this.tickPx1*this.tickScaling[1];var F=super.draw(...arguments);return F+=this.getAdditionalWidth(),this.drawSpecifics(F),this.fullwidthlabel=F,F}equalizePosition(F){return this.placeLabel(this.left?-F:F),this.getLabel()?F+this.graph.options.fontSize:0}drawTick(F,W,V,R){var G=this,Z=this.groupTicks,U,K;if(U=R||this.getPos(F),!(void 0==U||isNaN(U))){var Q=this.nextTick(W,J=>{J.setAttribute('x1',(this.left?1:-1)*this.tickPx1*this.tickScaling[W]),J.setAttribute('x2',(this.left?1:-1)*this.tickPx2*this.tickScaling[W]),1==W?J.setAttribute('stroke',this.getPrimaryTicksColor()):J.setAttribute('stroke',this.getSecondaryTicksColor())});if(Q.setAttribute('y1',U),Q.setAttribute('y2',U),this.nextGridLine(1==W,0,this.graph.getDrawingWidth(),U,U),1==W){var K=this.nextTickLabel(J=>{J.setAttribute('x',this.tickMargin),'black'!==this.getTicksLabelColor()&&J.setAttribute('fill',this.getTicksLabelColor()),this.left?J.setAttribute('text-anchor','end'):J.setAttribute('text-anchor','start'),J.style.dominantBaseline='central'});K.setAttribute('y',U),this.setTickContent(K,F,V),(K.textContent+'').length>=this.longestTick[1]&&(this.longestTick[0]=K,this.longestTick[1]=(K.textContent+'').length)}}}drawLabel(){'black'!==this.getLabelColor()&&this.label.setAttribute('fill',this.getLabelColor()),this.label.setAttribute('dominant-baseline',this.left?'auto':'auto'),this.labelTspan.textContent=this.getLabel()}placeLabel(F){this.label.setAttribute('transform','translate('+F+', '+Math.abs(this.getMaxPx()+this.getMinPx())/2+') rotate(-90)')}drawSpecifics(){this.line.setAttribute('y1',this.getMinPx()),this.line.setAttribute('y2',this.getMaxPx()),this.line.setAttribute('x1',0),this.line.setAttribute('x2',0),this.line.setAttribute('stroke',this.getAxisColor());var F=this.getSpan();this.line.setAttribute('marker-start',this.options.splitMarks&&0!=F[0]?'url(#verticalsplit_'+this.graph.getId()+')':''),this.line.setAttribute('marker-end',this.options.splitMarks&&1!=F[1]?'url(#verticalsplit_'+this.graph.getId()+')':'')}setShift(F){if(this.shift=F,this.shift&&this.graph.getWidth()){let W=this.shift;W=this.floating?W:this.isLeft()?W:this.graph.getWidth()-this.graph.getPaddingRight()-this.graph.getPaddingLeft()-W,this.group.setAttribute('transform','translate( '+W+' 0 )'),this.drawLabel()}}isLeft(){return this.left}isRight(){return!this.left}isFlipped(){return!this.options.flipped}_drawLine(F,W){let V=this.getPx(F);return W?W.setAttribute('display','initial'):W=document.createElementNS(this.graph.ns,'line'),W.setAttribute('y1',V),W.setAttribute('y2',V),W.setAttribute('x1',0),W.setAttribute('x2',this.graph.drawingSpaceWidth),W.setAttribute('stroke','black'),this.group.appendChild(W),W}_hideLine(F){F&&F.setAttribute('display','none')}handleMouseMoveLocal(F,W){W-=this.graph.getPaddingTop(),this.mouseVal=this.getVal(W)}scaleToFitAxis(F,W,V,R,U,G){F&&F.isX()||(F=this.graph.getXAxis()),isNaN(V)&&(V=F.getCurrentMin()),isNaN(R)&&(R=F.getCurrentMax()),U===void 0&&(U=!0),G===void 0&&(G=!0),'number'==typeof W&&(R=V,V=W,W=!1);for(var Z=-(1/0),K=1/0,Q=0,J=0,$=this.graph.series.length;J<$;J++)this.graph.series[J].isShown()&&this.graph.series[J]!=W&&this.graph.series[J].getXAxis()==F&&this.graph.series[J].getYAxis()===this&&(Q++,Z=G?Math.max(Z,this.graph.series[J].getMax(V,R)):0,K=U?Math.min(K,this.graph.series[J].getMin(V,R)):0);if(0==Q)this.setMinMaxToFitSeries();else{K=U?K:this.getCurrentMin(),Z=G?Z:this.getCurrentMax();var ee=Z-K;K-=this.options.axisDataSpacing.min*ee,Z+=this.options.axisDataSpacing.max*ee,this._doZoomVal(K,Z)}return this}setMinMaxFlipped(){var F=this.maxPx-this.minPx;if(!isNaN(F)){var W=this.maxPx-F*this.options.span[0]-this.options.marginMin,V=this.maxPx-F*this.options.span[1]+this.options.marginMax;this.minPxFlipped=this.isFlipped()?W:V,this.maxPxFlipped=this.isFlipped()?V:W}}getZProj(F){return F*this.graph.options.zAxis.shiftY}}X.default=O,T.exports=X['default']})},function(u,A,S){var P,C,E;(function(T,X){C=[u,A,S(9)],P=X,E='function'==typeof P?P.apply(A,C):P,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y){'use strict';Object.defineProperty(X,'__esModule',{value:!0});var B=function(F){return F&&F.__esModule?F:{default:F}}(Y);class O extends B.default{constructor(F,W,V={}){super(F,W,V)}set categories(F){return this._barCategories=F,this}draw(){var F=this,V=this.graph.drawingSpaceWidth,R=this._barCategories,W;if(this.forceMin(0),this.forceMax(1),this.cacheCurrentMin(),this.cacheCurrentMax(),this.cacheInterval(),!!R){Array.isArray(R)||(R=[R]);for(var U=0;U<=R.length;U++)this.drawTick(U/R.length,2),U<R.length&&(W=this.nextTickLabel(function(G){G.setAttribute('y',(F.top?-1:1)*((1==F.options.tickPosition?8:20)+(F.top?10:0))),G.setAttribute('text-anchor','middle'),'black'!==F.getTicksLabelColor()&&G.setAttribute('fill',F.getTicksLabelColor()),G.style.dominantBaseline='hanging'}),W.setAttribute('x',this.getPos((U+0.5)/R.length)),W.textContent=R[U].title);return this.drawSpecifics(),this}}autoSeries(){let F=[];for(let W of this.graph.series)W.getXAxis()==this&&F.push(W);return this.setSeries(...F),this}setSeries(){var F=this;return this.series=arguments,Array.prototype.map.call(this.series,function(W,V){'object'==typeof W||(W=F.graph.getSerie(W)),W.setCategoryConfig&&W.setCategoryConfig(V,F._barCategories,F.series.length)}),this._getUsedCategories(),this}_getUsedCategories(){let F={},W=0;Array.prototype.map.call(this.series,G=>{let Z=G.getUsedCategories();for(let K of Z)F.hasOwnProperty(K)||(F[K]=1,W+=1),F[K]++,W++});let V=0;for(let G in F){let Z=F[G];F[G]=V,V+=Z}let R={},U=0;Array.prototype.map.call(this.series,G=>{let Z=G.getUsedCategories(),K={};Z.map(Q=>{R[Q]=R[Q]||0.5,K[Q]=(F[Q]+R[Q])/W,R[Q]++}),G.setDataIndices(K,W),U++})}getType(){return'category'}}X.default=O,T.exports=X['default']})},function(u,A,S){var P,C,E;(function(T,X){C=[u,A,S(10),S(3)],P=X,E='function'==typeof P?P.apply(A,C):P,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y,I){'use strict';function F(ie,re){return Math.round(ie/re)*re}function W(ie,re){switch(re.unit){case's':ie.setSeconds(F(ie.getSeconds(),re.increment)),ie.setMilliseconds(0);break;case'i':ie.setMinutes(F(ie.getMinutes(),re.increment)),ie.setSeconds(0),ie.setMilliseconds(0);break;case'h':ie.setHours(F(ie.getHours(),re.increment)),ie.setMinutes(0),ie.setSeconds(0),ie.setMilliseconds(0);break;case'd':ie.setMinutes(0),ie.setSeconds(0),ie.setMilliseconds(0),ie.setHours(0),ie.setDate(F(ie.getDate(),re.increment));break;case'm':ie.setMinutes(0),ie.setSeconds(0),ie.setMilliseconds(0),ie.setHours(0),ie.setDate(1),ie.setMonth(F(ie.getMonth(),re.increment));break;case'y':ie.setMinutes(0),ie.setSeconds(0),ie.setMilliseconds(0),ie.setHours(0),ie.setDate(1),ie.setMonth(0);break;default:throw'Date format not recognized';}return ie}function V(ie,re){switch(re.unit){case's':ie.setSeconds(ie.getSeconds()+re.increment),ie.setMilliseconds(0);break;case'i':ie.setMinutes(ie.getMinutes()+re.increment),ie.setSeconds(0),ie.setMilliseconds(0);break;case'h':ie.setHours(ie.getHours()+re.increment),ie.setMinutes(0),ie.setSeconds(0),ie.setMilliseconds(0);break;case'd':ie.setDate(ie.getDate()+re.increment),ie.setMinutes(0),ie.setSeconds(0),ie.setMilliseconds(0),ie.setHours(0);break;case'm':ie.setMonth(ie.getMonth()+re.increment),ie.setMinutes(0),ie.setSeconds(0),ie.setMilliseconds(0),ie.setHours(0),ie.setDate(1);break;case'y':ie.setFullYear(ie.getFullYear()+re.increment),ie.setMinutes(0),ie.setSeconds(0),ie.setMilliseconds(0),ie.setHours(0),ie.setDate(1),ie.setMonth(0);break;default:throw'Date format not recognized';}return ie}function R(ie,re,ae){if(ie.groups[re][ae])return ie.groups[re][ae].group.setAttribute('display','block'),ie.groups[re][ae];var se={group:document.createElementNS(ie.graph.ns,'g'),text:document.createElementNS(ie.graph.ns,'text')},oe=document.createElementNS(ie.graph.ns,'line');return oe.setAttribute('stroke','black'),oe.setAttribute('y1',0),2===re?(oe.setAttribute('y2',6),se.text.setAttribute('y',15),se.line=oe,se.group.appendChild(se.line)):1===re?(oe.setAttribute('y2',20),se.text.setAttribute('y',10),se.line1=oe,se.line2=oe.cloneNode(),se.group.appendChild(se.line1),se.group.appendChild(se.line2)):void 0,(se.text.setAttribute('text-anchor','middle'),se.text.setAttribute('dominant-baseline','middle'),se.group.appendChild(se.text),ie.getWrapper(re).appendChild(se.group),ie.groups[re][ae]=se)}function U(ie,re,ae){for(;ae<ie.groups[re].length;ae++)G(ie.groups[re][ae])}function G(ie){ie.group.setAttribute('display','none')}function Z(ie,re){return ee(ie,re)}function K(ie,re,ae,se,oe,ne,le){switch(ie){case 1:var pe=Math.max(se,Math.min(oe,ne)),de=Math.max(se,Math.min(oe,le));if(isNaN(de)||isNaN(pe))return;for(re.line1.setAttribute('x1',pe),re.line2.setAttribute('x1',de),re.line1.setAttribute('x2',pe),re.line2.setAttribute('x2',de),re.text.setAttribute('x',(pe+de)/2);8*ae.length>de-pe;)if(ae=ae.substr(0,ae.length-2)+'.',1==ae.length){ae='';break}re.text.textContent=ae;break;case 2:if(ne<se||ne>oe)return void G(re);re.line.setAttribute('x1',ne),re.line.setAttribute('x2',ne),re.text.setAttribute('x',ne),re.text.textContent=ae;}}Object.defineProperty(X,'__esModule',{value:!0});var Q=function(ie){return ie&&ie.__esModule?ie:{default:ie}}(Y),J=function(ie){if(ie&&ie.__esModule)return ie;var re={};if(null!=ie)for(var ae in ie)Object.prototype.hasOwnProperty.call(ie,ae)&&(re[ae]=ie[ae]);return re.default=ie,re}(I),$=[{threshold:20,increments:{1:{increment:1,unit:'i',format:'HH"h"MM (dd/mm/yy)'},2:{increment:1,unit:'s',format:'MM:ss"s"'}}},{threshold:50,increments:{1:{increment:1,unit:'i',format:'HH"h"MM (dd/mm/yy)'},2:{increment:2,unit:'s',format:'MM:ss"s"'}}},{threshold:100,increments:{1:{increment:1,unit:'i',format:'HH"h"MM (dd/mm/yy)'},2:{increment:5,unit:'s',format:'MM:ss"s"'}}},{threshold:600,increments:{1:{increment:10,unit:'i',format:'HH"h"MM (dd/mm/yy)'},2:{increment:30,unit:'s',format:'MM:ss"s"'}}},{threshold:1e3,increments:{1:{increment:1,unit:'h',format:'HH"h"MM (dd/mm/yy)'},2:{increment:10,unit:'i',format:'MM"min"'}}},{threshold:1500,increments:{1:{increment:1,unit:'d',format:'dd/mm/yyyy'},2:{increment:1,unit:'i',format:'H"h"MM'}}},{threshold:3e3,increments:{1:{increment:1,unit:'d',format:'dd/mm/yyyy'},2:{increment:2,unit:'i',format:'H"h"MM'}}},{threshold:8e3,increments:{1:{increment:1,unit:'d',format:'dd/mm/yyyy'},2:{increment:10,unit:'i',format:'H"h"MM'}}},{threshold:26400,increments:{1:{increment:1,unit:'d',format:'dd/mm/yyyy'},2:{increment:20,unit:'i',format:'H"h"MM'}}},{threshold:86400,increments:{1:{increment:1,unit:'d',format:'dd/mm/yyyy'},2:{increment:1,unit:'h',format:'H"h"MM'}}},{threshold:2e5,increments:{1:{increment:1,unit:'d',format:'dd/mm/yyyy'},2:{increment:2,unit:'h',format:'H"h"MM'}}},{threshold:4e5,increments:{1:{increment:1,unit:'d',format:'dd/mm/yyyy'},2:{increment:6,unit:'h',format:'H"h"MM'}}},{threshold:1.4e6,increments:{1:{increment:1,unit:'d',format:'dd/mm/yyyy'},2:{increment:12,unit:'h',format:'HH"h"MM'}}},{threshold:6.4e6,increments:{1:{increment:1,unit:'m',format:'mmmm yyyy'},2:{increment:1,unit:'d',format:'dd'}}},{threshold:1.24e7,increments:{1:{increment:1,unit:'m',format:'mmmm yyyy'},2:{increment:2,unit:'d',format:'dd'}}},{threshold:43200000,increments:{1:{increment:1,unit:'m',format:'mmmm yyyy'},2:{increment:7,unit:'d',format:'dd'}}},{threshold:69120000,increments:{1:{increment:1,unit:'m',format:'mmmm yyyy'},2:{increment:15,unit:'d',format:'dd'}}},{threshold:86400000,increments:{1:{increment:1,unit:'y',format:'yyyy'},2:{increment:3,unit:'m',format:'mm/yyyy'}}},{threshold:172800000,increments:{1:{increment:1,unit:'y',format:'yyyy'},2:{increment:4,unit:'m',format:'mm/yyyy'}}},{threshold:864000000,increments:{1:{increment:1,unit:'y',format:'yyyy'},2:{increment:6,unit:'m',format:'mm/yyyy'}}},{threshold:1036800000,increments:{1:{increment:1,unit:'y',format:'yyyy'},2:{increment:1,unit:'y',format:'yyyy'}}}],ee=function(){var ie=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[WLloSZ]|"[^"]*"|'[^']*'/g,re=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,ae=/[^-+\dA-Z]/g,se=function(ne,le){for(ne=ne+'',le=le||2;ne.length<le;)ne='0'+ne;return ne},oe=function(ne,le){var pe=new Date(ne[le+'FullYear'](),0,1);return Math.ceil(((ne-pe)/8.64e7+pe[le+'Day']()+1)/7)};return function(ne,le,pe){var de=ee;if(1!=arguments.length||'[object String]'!=Object.prototype.toString.call(ne)||/\d/.test(ne)||(le=ne,ne=void 0),ne=ne?new Date(ne):new Date,isNaN(ne))throw SyntaxError('invalid date:'+ne);le=(de.masks[le]||le||de.masks['default'])+'','UTC:'==le.slice(0,4)&&(le=le.slice(4),pe=!0);var ge=pe?'getUTC':'get',ue=ne[ge+'Date'](),he=ne[ge+'Day'](),ce=ne[ge+'Month'](),xe=ne[ge+'FullYear'](),me=ne[ge+'Hours'](),fe=ne[ge+'Minutes'](),ye=ne[ge+'Seconds'](),be=ne[ge+'Milliseconds'](),Ae=pe?0:ne.getTimezoneOffset(),Me={d:ue,dd:se(ue),ddd:de.i18n.dayNames[he],dddd:de.i18n.dayNames[he+7],m:ce+1,mm:se(ce+1),mmm:de.i18n.monthNames[ce],mmmm:de.i18n.monthNames[ce+12],yy:(xe+'').slice(2),yyyy:xe,h:me%12||12,hh:se(me%12||12),H:me,HH:se(me),M:fe,MM:se(fe),s:ye,ss:se(ye),l:se(be,3),L:se(99<be?Math.round(be/10):be),t:12>me?'a':'p',tt:12>me?'am':'pm',T:12>me?'A':'P',TT:12>me?'AM':'PM',Z:pe?'UTC':((ne+'').match(re)||['']).pop().replace(ae,''),o:(0<Ae?'-':'+')+se(100*Math.floor(Math.abs(Ae)/60)+Math.abs(Ae)%60,4),S:['th','st','nd','rd'][3<ue%10?0:(10!=ue%100-ue%10)*ue%10],W:oe(ne,ge)};return le.replace(ie,function(ke){return ke in Me?Me[ke]:ke.slice(1,ke.length-1)})}}();ee.masks={'default':'ddd mmm dd yyyy HH:MM:ss',shortDate:'m/d/yy',mediumDate:'mmm d, yyyy',longDate:'mmmm d, yyyy',fullDate:'dddd, mmmm d, yyyy',shortTime:'h:MM TT',mediumTime:'h:MM:ss TT',longTime:'h:MM:ss TT Z',isoDate:'yyyy-mm-dd',isoTime:'HH:MM:ss',isoDateTime:'yyyy-mm-dd\'T\'HH:MM:ss',isoUtcDateTime:'UTC:yyyy-mm-dd\'T\'HH:MM:ss\'Z\''},ee.i18n={dayNames:['Sun','Mon','Tue','Wed','Thu','Fri','Sat','Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],monthNames:['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec','January','February','March','April','May','June','July','August','September','October','November','December']};class te extends Q.default{constructor(){super(...arguments)}init(ie,re){super.init(ie,re),this.wrapper={1:document.createElementNS(ie.ns,'g'),2:document.createElementNS(ie.ns,'g')},this.groups={1:[],2:[]};var ae=document.createElementNS(ie.ns,'rect');ae.setAttribute('fill','#c0c0c0'),ae.setAttribute('stroke','#808080'),ae.setAttribute('height','20'),ae.setAttribute('x','0'),ae.setAttribute('y','0'),this.rect=ae,this.wrapper[1].appendChild(this.rect),this.group.appendChild(this.wrapper[1]),this.group.appendChild(this.wrapper[2]),this.wrapper[1].setAttribute('transform','translate( 0, 25 )'),this.wrapper[2].setAttribute('transform','translate( 0, 00 )')}draw(){this.cacheCurrentMax(),this.cacheCurrentMin(),(void 0==this.currentAxisMin||void 0==this.currentAxisMax)&&this.setMinMaxToFitSeries(!0),this.line.setAttribute('x1',this.getMinPx()),this.line.setAttribute('x2',this.getMaxPx()),this.line.setAttribute('y1',0),this.line.setAttribute('y2',0);var re=this.maxPx-this.minPx,ae=this.getCurrentInterval(),oe=this.getCurrentMax(),ne=this.getCurrentMin();if(this.rect.setAttribute('width',re),this.rect.setAttribute('x',this.minPx),!oe||!ne)return 0;var le;for(me=0;me<$.length;me++)if($[me].threshold>ae/re){le=$[me];break}le||(le=$[$.length-1]);var ge=0,pe,de,ue,he,ce,xe,me;for(ge=1;2>=ge;ge++){if(!J.isNumeric(ne)){U(this,ge,0);break}ue=new Date(ne),he=W(ue,le.increments[ge]),me=0;do if(ce=Z(he,le.increments[ge].format),xe=R(this,ge,me),pe=this.getPx(he.getTime()),he=V(he,le.increments[ge]),de=this.getPx(he.getTime()),K(ge,xe,ce,this.getMinPx(),this.getMaxPx(),pe,de),me++,100<me)break;while(he.getTime()<oe);U(this,ge,me)}}isX(){return!0}getWrapper(ie){return this.wrapper[ie]}setShift(ie){this.shift=ie,this.group.setAttribute('transform','translate(0 '+(this.top?this.shift:this.graph.getDrawingHeight()-this.shift)+')')}getAxisPosition(){return 60}setMinMaxFlipped(){var ie=this.maxPx-this.minPx,re=ie*this.options.span[1]+this.minPx,ae=ie*this.options.span[0]+this.minPx;this.minPxFlipped=this.isFlipped()?re:ae,this.maxPxFlipped=this.isFlipped()?ae:re}}X.default=te,T.exports=X['default']})},function(u,A,S){var P,C,E;(function(T,X){C=[u,A,S(1),S(15),S(3),S(16),S(5)],P=X,E='function'==typeof P?P.apply(A,C):P,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y,I,B,O,F){'use strict';function V($){return $&&$.__esModule?$:{default:$}}function R($,ee,te,ie,re){if(ee){if($.options.markersIndependant){var ae=$.getMarkerDomIndependent($.counter2,ee),se='M '+te+' '+ie+' ';se+=ee.markerPath+' ',ae.setAttribute('d',se)}re.path=re.path||'',re.path+='M '+te+' '+ie+' ',re.path+=ee.markerPath+' '}}Object.defineProperty(X,'__esModule',{value:!0});var U=V(Y),G=V(I),Z=function($){if($&&$.__esModule)return $;var ee={};if(null!=$)for(var te in $)Object.prototype.hasOwnProperty.call($,te)&&(ee[te]=$[te]);return ee.default=$,ee}(B),K=V(O),Q=V(F);class J extends G.default{static default(){return{lineColor:'black',lineStyle:1,flip:!1,label:'',lineWidth:1,markers:!1,trackMouse:!1,trackMouseLabel:!1,trackMouseLabelRouding:1,lineToZero:!1,selectableOnClick:!1,markersIndependant:!1,overflowX:!1,overflowY:!1}}constructor(){super(...arguments),this.selectionType='unselected',this.markerFamilies={},Z.mapEventEmission(this.options,this),this.styles={},this.styles.unselected={lineColor:this.options.lineColor,lineStyle:this.options.lineStyle,lineWidth:this.options.lineWidth,markers:this.options.markers},this.styles.selected={lineWidth:3},this.extendStyles(),this.markersDom=new Map,this.shown=!0,this.data=[],this._isMinOrMax={x:{min:!1,max:!1},y:{min:!1,max:!1}},this.groupLines=document.createElementNS(this.graph.ns,'g'),this.domMarker=document.createElementNS(this.graph.ns,'path'),this.domMarker.style.cursor='pointer',this.groupMain=document.createElementNS(this.graph.ns,'g'),this.additionalData={},this.marker=document.createElementNS(this.graph.ns,'circle'),this.marker.setAttribute('fill','black'),this.marker.setAttribute('r',3),this.marker.setAttribute('display','none'),this.markerLabel=document.createElementNS(this.graph.ns,'text'),this.markerLabelSquare=document.createElementNS(this.graph.ns,'rect'),this.markerLabelSquare.setAttribute('fill','white'),this.domMarkerHover={},this.domMarkerSelect={},this.markerHovered=0,this.groupMarkerSelected=document.createElementNS(this.graph.ns,'g'),this.markerPoints={},this.lines=[],this.groupMain.appendChild(this.groupLines),this.groupMain.appendChild(this.marker),this.groupMain.appendChild(this.groupMarkerSelected),this.groupMain.appendChild(this.markerLabelSquare),this.groupMain.appendChild(this.markerLabel),this.groupMarkers=document.createElementNS(this.graph.ns,'g'),this.groupMain.appendChild(this.groupMarkers),this.independantMarkers=[],this.initExtended1&&this.initExtended1(),this.groupLines.addEventListener('click',()=>{this.options.selectableOnClick&&(this.isSelected()?this.graph.unselectSerie(this):this.graph.selectSerie(this))}),this.options.markers&&this.setMarkers(this.options.markers,'unselected')}setWaveform($){if(!($ instanceof Q.default))throw'Cannot assign waveform to serie. Waveform is not of the proper Waveform instance';return this.waveform=$,this.minX=this.waveform.getXMin(),this.maxX=this.waveform.getXMax(),this.minY=this.waveform.getMin(),this.maxY=this.waveform.getMax(),this.graph.updateDataMinMaxAxes(),this.dataHasChanged(),this}setOptions($){return this.options=Z.extend(!0,{},J.prototype.defaults,$||{}),this.styles.unselected={lineColor:this.options.lineColor,lineStyle:this.options.lineStyle,markers:this.options.markers},this.applyLineStyles(),this}onMouseOverMarker($,ee){this.toggleMarker(ee,!0,!0);this.options.onMouseOverMarker&&this.options.onMouseOverMarker(ee,!!this.infos&&(this.infos[ee]||!1),[this.waveform.getX(ee),this.waveform.getY(ee)])}onMouseOutMarker($,ee){this.markersOffHover(),this.options.onMouseOutMarker&&this.options.onMouseOutMarker(ee,!!this.infos&&(this.infos[ee]||!1),[this.waveform.getX(ee),this.waveform.getY(ee)])}toggleMarker($,ee,te){let ie=$;var re;'undefined'==typeof ee&&(re=te?!this.domMarkerHover[$]:!this.domMarkerSelect[$]);var ae=this['domMarker'+(te?'Hover':'Select')];if(re||!0===ee){if(!ae[$]){var se=document.createElementNS(this.graph.ns,'path');this.setMarkerStyleTo(se,this.markerFamilies[this.selectionType][this.getMarkerCurrentFamily(ie)]),this['domMarker'+(te?'Hover':'Select')][$]=se,this.groupMarkerSelected.appendChild(se)}else se=ae[$];let oe=this.getX(this.waveform.getX(ie)),ne=this.getY(this.waveform.getY(ie));se.setAttribute('d','M '+oe+' '+ne+' '+this.getMarkerPath(this.markerFamilies[this.selectionType][this.getMarkerCurrentFamily(ie)],1)),te&&this.markerHovered++}else if((!re||!1===ee)&&(te&&this.domMarkerHover[$]&&!this.domMarkerSelect[$]||this.domMarkerSelect[$])){if(!ae[$])return;this.groupMarkerSelected.removeChild(ae[$]),delete ae[$],te&&this.markerHovered--}return re}markersOffHover(){for(var $ in this.domMarkerHover)this.toggleMarker($.split(','),!1,!0);return this}markersOffSelect(){for(var $ in this.domMarkerSelect)this.toggleMarker($.split(','),!1,!1);return this}onClickOnMarker($,ee){var te=this.toggleMarker(ee);te&&this.options.onSelectMarker&&this.options.onSelectMarker(ee,!!this.infos&&(this.infos[ee[0]]||!1)),!te&&this.options.onUnselectMarker&&this.options.onUnselectMarker(ee,!!this.infos&&(this.infos[ee[0]]||!1)),this.options.onToggleMarker&&this.options.onToggleMarker(ee,!!this.infos&&(this.infos[ee[0]]||!1),te)}_getMarkerIndexFromEvent($){var ee=this.graph._getXY($);return this.searchIndexByPxXY(ee.x-this.graph.getPaddingLeft(),ee.y-this.graph.getPaddingTop())}onMouseWheel(){}empty(){for(var $=0,ee=this.lines.length;$<ee;$++)this.groupLines.removeChild(this.lines[$]);return this.lines=[],this}select($){return $=$||'selected',this.selected='unselected'!==$,this.areMarkersShown()||this.areMarkersShown($)?(this.selectionType=$,this.draw(!0),this.applyLineStyles()):(this.selectionType=$,this.applyLineStyles()),this.applyLineStyle(this.getSymbolForLegend()),this}unselect(){return this.selected=!1,this.select('unselected')}degrade($){return this.degradationPx=$,this}drawInit($){try{this.axisCheck()}catch(ie){return console.warn(ie),!1}if(this.currentLineId=0,this.counter=0,this._drawn=!0,this.currentLine='',!this.waveform)this._dataToUse=this.data,this._xDataToUse=this.xData;else if(this.degradationPx)this.waveform.resampleForDisplay({resampleToPx:this.degradationPx,xPosition:this.getXAxis().getPx.bind(this.getXAxis()),minX:this.getXAxis().getCurrentMin(),maxX:this.getXAxis().getCurrentMax()}),this._dataToUse=[this.waveform.getDataToUseFlat()];else if(this.waveform.hasAggregation()){let ie=this.getXAxis(),re=this.graph.getDrawingWidth()*(ie.getDataMax()-ie.getDataMin())/(ie.getCurrentMax()-ie.getCurrentMin()),ae=this.waveform.selectAggregatedData(re);if(ae instanceof Promise)return ae.then(()=>{this.draw($)}),!1;if(!1===ae)return!1;this._dataToUse=this.waveform.getDataToUseFlat()}return!0}removeLinesGroup(){this._afterLinesGroup=this.groupLines.nextSibling,this.groupMain.removeChild(this.groupLines)}insertLinesGroup(){if(!this._afterLinesGroup)throw'Could not find group after lines to insertion.';this.groupMain.insertBefore(this.groupLines,this._afterLinesGroup),this._afterLinesGroup=!1}removeExtraLines(){for(var $=this.currentLineId,ee=this.lines.length;$<ee;$++)this.groupLines.removeChild(this.lines[$]);this.lines.splice(this.currentLineId,ee-this.currentLineId),this.currentLineId=0}draw($){if(super.draw(...arguments),!this.getXAxis()||!this.getYAxis())throw'No axes were defined for this serie';if($||this.hasDataChanged()){if(!this.drawInit($))return;var ee=this._dataToUse,te=this._xDataToUse,ie=this._slotToUse;this.removeLinesGroup(),this.eraseMarkers(),this.lookForMaxima=!0,this.lookForMinima=!1,this.markerFamily=this.markerFamilies[this.selectionType||'unselected'],this.pos0=this.getYAxis().getPos(0),this.hasErrors()&&this.errorDrawInit(),this._draw(),this.hasErrors()&&this.errorDraw(),this.removeExtraLines(),this.insertMarkers(),this.insertLinesGroup()}for(var re in this.domMarkerHover)this.toggleMarker(re.split(','),!1,!0);for(var re in this.domMarkerSelect)this.toggleMarker(re.split(','),!1,!1);this.applyLineStyle(this.getSymbolForLegend()),this.hasStyleChanged(this.selectionType)&&this.updateStyle(),this.dataHasChanged(!1),super.afterDraw()}_draw(){let $=this,ee=this.waveform,ae=!1,se=!1,de=this.getXAxis(),ge=this.getYAxis(),ue=de.getCurrentMin(),he=ge.getCurrentMin(),ce=de.getCurrentMax(),xe=ge.getCurrentMax(),te,ie,re,oe,ne,le,pe;if(ee){te=ee.getData(!0);let _e=ee.getShift(),ve=ee.getScale(),Pe=!1,Ce=!1,Le=this.isMonotoneous(),Ee=this.markersShown(),Te=0,Xe=ee.getLength(),me,fe,ye,be,Ae,Me,ke,Se,we;for(this.currentLine='',ee.isXMonotoneous()&&(ee.isXMonotoneousAscending()?(Te=ee.getIndexFromX(ue,!0)||0,Xe=ee.getIndexFromX(ce,!0),!1===Xe&&(Xe=ee.getLength())):(Te=ee.getIndexFromX(ce,!0)||0,Xe=ee.getIndexFromX(ue,!0),!1===Xe&&(Xe=ee.getLength())),Xe+=2,Xe>te.length&&(Xe=te.length));Te<Xe;Te+=1){if(ie=ee.getX(Te,!0),re=te[Te]*ve+_e,ie!=ie||re!=re){this._createLine();continue}if(ie<ue&&ae<ue||ie>ce&&ae>ce||(re<he&&se<he||re>xe&&se>xe)&&!this.options.lineToZero){ae=ie,se=re,Ce=!0;continue}if(this.counter2=Te,Ee&&this.getMarkerCurrentFamily(this.counter2),le=this.getX(ie),pe=this.getY(re),le!=oe||pe!=ne){if(le!=le||pe!=pe){0<this.counter&&this._createLine();continue}if(Pe=Le?re<he||re>xe:!this.options.overflowX&&(ie<ue||ie>ce)&&!this.options.overflowY&&(re<he||re>xe),this.options.lineToZero){if(Pe=ie<ue||ie>ce,Pe)continue;}else if(Pe||Ce){!1!==ae&&!1!==se||Ce?(we=[],me=(ie-ue)/(ie-ae),fe=re-me*(re-se),ye=(ie-ce)/(ie-ae),be=re-ye*(re-se),Ae=(re-he)/(re-se),Me=ie-Ae*(ie-ae),ke=(re-xe)/(re-se),Se=ie-ke*(ie-ae),1>me&&0<me&&!1!==fe&&fe<xe&&fe>he&&we.push([ue,fe]),1>ye&&0<ye&&!1!==be&&be<xe&&be>he&&we.push([ce,be]),1>Ae&&0<Ae&&!1!==Me&&Me<ce&&Me>ue&&we.push([Me,he]),1>ke&&0<ke&&!1!==Se&&Se<ce&&Se>ue&&we.push([Se,xe]),0<we.length?Pe?Ce?2==we.length&&(this._createLine(),this._addPoint(this.getX(we[0][0]),this.getY(we[0][1]),we[0][0],we[0][1],!1,!1,!1),this._addPoint(this.getX(we[1][0]),this.getY(we[1][1]),we[0][0],we[0][1],!1,!1,!1)):(1<we.length&&(console.error('Programmation error. Please e-mail me.'),console.log(we,Se,Me,be,fe,re,he,xe,se)),this._addPoint(this.getX(we[0][0]),this.getY(we[0][1]),we[0][0],we[0][1],!1,!1,!1)):(1<we.length&&(console.error('Programmation error. Please e-mail me.'),console.log(we,Se,Me,be,fe,re,he,xe,se)),this._createLine(),this._addPoint(this.getX(we[0][0]),this.getY(we[0][1]),we[0][0],we[0][1],!1,!1,!1),this._addPoint(le,pe,ae,se,!1,!1,!0)):!Pe&&this._addPoint(le,pe,ae,se,Te,!1,!1)):(oe=le,ne=pe,ae=ie,se=re),oe=le,ne=pe,ae=ie,se=re,Ce=Pe;continue}this._addPoint(le,pe,ie,re,Te,!1,!0),oe=le,ne=pe,ae=ie,se=re}}if(this._createLine(),this._tracker){this._trackerDom&&this._trackerDom.remove();var Ye=this.groupLines.cloneNode(!0);for(this.groupMain.appendChild(Ye),Te=0,Xe=Ye.children.length;Te<Xe;Te++)Ye.children[Te].setAttribute('stroke','transparent'),Ye.children[Te].setAttribute('stroke-width','25px'),Ye.children[Te].setAttribute('pointer-events','stroke');this._trackerDom=Ye,this.groupMain.addEventListener('mousemove',De=>{var Ie=this.graph._getXY(De),je=this.handleMouseMove(!1,!1);this._trackingCallback(this,je,Ie.x,Ie.y)}),this.groupMain.addEventListener('mouseleave',()=>{this._trackingOutCallback(this)})}return this}}kill(){super.kill()}getMarkerCurrentFamily($){if(this.markerPoints&&this.markerPoints[this.selectionType]){for(var te=0,ee;te<this.markerPoints[this.selectionType].length&&this.markerPoints[this.selectionType][te][0]<=$;te++)this.markerPoints[this.selectionType][te][1]>=$&&(this.markerCurrentFamily=this.markerPoints[this.selectionType][te][2],ee=this.markerFamilies[this.selectionType][this.markerCurrentFamily]);return!!ee&&(this.getMarkerDom(ee),this.markerCurrentFamily)}}setMarkerStyleTo($,ee){if(!$||!ee)throw console.trace(),'Cannot set marker style. DOM does not exist.';$.setAttribute('fill',ee.fillColor||'transparent'),$.setAttribute('stroke',ee.strokeColor||this.getLineColor()),$.setAttribute('stroke-width',ee.strokeWidth||1)}hideTrackingMarker(){this.marker.setAttribute('display','none'),this.markerLabel.setAttribute('display','none'),this.markerLabelSquare.setAttribute('display','none')}_addPoint($,ee,te,ie,re,ae,se){if($===$&&ee===ee)return 0==this.counter?this.currentLine='M ':this.options.lineToZero||ae?this.currentLine+='M ':this.currentLine+='L ',this.currentLine+=$,this.currentLine+=' ',this.currentLine+=ee,this.currentLine+=' ',this.options.lineToZero&&void 0!==this.pos0&&(this.currentLine+='L ',this.currentLine+=$,this.currentLine+=' ',this.currentLine+=this.pos0,this.currentLine+=' '),this.hasErrors()&&this.errorAddPoint(re,te,ie,$,ee),this.markerPoints?void(this.markersShown()&&!1!==se&&this.markerFamily&&R(this,this.markerFamily[this.markerCurrentFamily],$,ee,this.markersDom.get(this.markerFamily[this.markerCurrentFamily])),this.counter++):void this.counter++}_createLine(){var $=this.currentLineId++,ee;return this.lines[$]?ee=this.lines[$]:(ee=document.createElementNS(this.graph.ns,'path'),this.applyLineStyle(ee),this.groupLines.appendChild(ee),this.lines[$]=ee),0==this.counter?ee.setAttribute('d',''):ee.setAttribute('d',this.currentLine),this.currentLine='M ',this.counter=0,ee}applyLineStyles(){for(var $=0;$<this.lines.length;$++)this.applyLineStyle(this.lines[$])}applyLineStyle($){$.setAttribute('stroke',this.getLineColor()),$.setAttribute('stroke-width',this.getLineWidth()),this.getLineDashArray()?$.setAttribute('stroke-dasharray',this.getLineDashArray()):$.removeAttribute('stroke-dasharray'),$.setAttribute('fill','none')}updateStyle(){this.applyLineStyles(),this.setLegendSymbolStyle(),this.styleHasChanged(!1)}getMarkerPath($,ee){var te=$.zoom||1,ee=ee||0,ie=[];switch($.type){case 2:ie=['m',-2,-2,'l',4,4,'m',-4,0,'l',4,-4];break;case 3:ie=['m',-2,0,'l',4,0,'m',-2,-2,'l',0,4];break;case 4:ie=['m',-1,-1,'l',2,0,'l',-1,2,'z'];break;default:case 1:ie=['m',-2,-2,'l',4,0,'l',0,4,'l',-4,0,'z'];}if((1==te||!te)&&!ee)return ie.join(' ');if(ie){for(var ae=0,se=ie.length;ae<se;ae++)typeof ie[ae]=='number'&&(ie[ae]*=te+ee);return ie.join(' ')}}getMarkerDom($){var ee=this;if(!this.markersDom.has($)){var te=document.createElementNS(this.graph.ns,'path');this.setMarkerStyleTo(te,$),this.markersDom.set($,{dom:te,path:''}),te.addEventListener('mouseover',function(ie){var re=ee._getMarkerIndexFromEvent(ie);ee.onMouseOverMarker(ie,re)}),te.addEventListener('mouseout',function(ie){var re=ee._getMarkerIndexFromEvent(ie);ee.onMouseOutMarker(ie,re)}),te.addEventListener('click',function(ie){var re=ee._getMarkerIndexFromEvent(ie);ee.onClickOnMarker(ie,re)})}return $.dom}getMarkerDomIndependent($,ee){if(!this.independantMarkers[$]){var te=document.createElementNS(this.graph.ns,'path');this.setMarkerStyleTo(te,ee),te.addEventListener('mouseover',ie=>{this.onMouseOverMarker(ie,$)}),te.addEventListener('mouseout',ie=>{this.onMouseOutMarker(ie,$)}),te.addEventListener('click',ie=>{this.onClickOnMarker(ie,$)}),this.independantMarkers[$]=te}return this.groupMarkers.appendChild(this.independantMarkers[$]),this.independantMarkers[$]}searchIndexByPxXY($,ee){for(var te=!1,ie=!1,ae=this._xDataToUse,ne=0,le=this.waveform.getLength(),re,se,oe;ne<le;ne+=1)se=this.waveform.getX(ne),oe=this.waveform.getY(ne),re=Math.pow(this.getX(se)-$,2)+Math.pow(this.getY(oe)-ee,2),(!te||re<te)&&(te=re,ie=ne);return ie}searchClosestValue($){if(this.waveform){const te=this.waveform.getIndexFromX($);let ie={xMin:this.waveform.getX(te),xMax:this.waveform.getX(te+1),yMin:this.waveform.getY(te),yMax:this.waveform.getY(te+1),xExact:$};return Math.abs(ie.xMin-$)<Math.abs(ie.xMax-$)?(ie.xClosest=ie.xMin,ie.yClosest=ie.yMin):(ie.xClosest=ie.xMax,ie.yClosest=ie.yMax),ie}}handleMouseMove($,ee){var te=$||this.getXAxis().getMouseVal(),ne=this.searchClosestValue(te);if(ne){var le=(te-ne.xMin)/(ne.xMax-ne.xMin),pe=(1-le)*ne.yMin+le*ne.yMax;if(ee&&this.options.trackMouse){if(void 0==ne.xMin)return!1;var de=this.getX(this.getFlip()?pe:te),ge=this.getY(this.getFlip()?te:pe);switch(this.marker.setAttribute('display','block'),this.marker.setAttribute('cx',de),this.marker.setAttribute('cy',ge),this.markerLabel.setAttribute('display','block'),this.markerLabelSquare.setAttribute('display','block'),this.options.trackMouseLabel){case!1:break;default:this.markerLabel.textContent=this.options.trackMouseLabel.replace('<x>',te.toFixed(this.options.trackMouseLabelRouding)).replace('<y>',pe.toFixed(this.options.trackMouseLabelRouding));}this.markerLabel.setAttribute('x',de+5),this.markerLabel.setAttribute('y',ge-5),this.markerLabelSquare.setAttribute('x',de+5),this.markerLabelSquare.setAttribute('y',ge-5-this.graph.options.fontSize),this.markerLabelSquare.setAttribute('width',this.markerLabel.getComputedTextLength()+2),this.markerLabelSquare.setAttribute('height',this.graph.options.fontSize+2)}return{xBefore:ne.xMin,xAfter:ne.xMax,yBefore:ne.yMin,yAfter:ne.yMax,trueX:ne.xExact,interpolatedY:pe,xClosest:ne.xClosest,yClosest:ne.yClosest}}}getMax($,ee){var te=Math.min($,ee),ie=Math.max($,ee),re=this.searchClosestValue(te),ae=this.searchClosestValue(ie),ne=-(1/0),se,oe,le,pe;if(re||(te=this.minX,re=this.searchClosestValue(te)),ae||(ie=this.maxX,ae=this.searchClosestValue(ie)),!re||!ae)return-(1/0);for(se=re.dataIndex;se<=ae.dataIndex;se++)for(le=se==re.dataIndex?re.xBeforeIndexArr:0,pe=se==ae.dataIndex?ae.xBeforeIndexArr:this.data[se].length,oe=le;oe<=pe;oe+=2)ne=Math.max(ne,this.data[se][oe+1]);return ne}getMin($,ee){var te=Math.min($,ee),ie=Math.max($,ee),re=this.searchClosestValue(te),ae=this.searchClosestValue(ie),ne=1/0,se,oe,le,pe;if(re||(te=this.minX,re=this.searchClosestValue(te)),ae||(ie=this.maxX,ae=this.searchClosestValue(ie)),!re||!ae)return 1/0;for(se=re.dataIndex;se<=ae.dataIndex;se++)for(le=se==re.dataIndex?re.xBeforeIndexArr:0,pe=se==ae.dataIndex?ae.xBeforeIndexArr:this.data[se].length,oe=le;oe<=pe;oe+=2)ne=Math.min(ne,this.data[se][oe+1]);return ne}setStyle($,ee='unselected'){this.styles[ee]=$,this.styleHasChanged(ee)}setLineStyle($,ee='unselected',te){return this.styles[ee]=this.styles[ee]||{},this.styles[ee].lineStyle=$,te&&this.setLineStyle($,'selected'),this.styleHasChanged(ee),this}getLineStyle($){return this.getStyle($).lineStyle}getLineDashArray($=this.selectionType||'unselected'){switch(this.getStyle($).lineStyle){case 2:return'1, 1';break;case 3:return'2, 2';break;case 4:return'3, 3';break;case 5:return'4, 4';break;case 6:return'5, 5';break;case 7:return'5 2';break;case 8:return'2 5';break;case 9:return'4 2 4 4';break;case 10:return'1,3,1';break;case 11:return'9 2';break;case 12:return'2 9';break;case 1:case!1:return!1;break;default:return this.styles[$].lineStyle;}this.styleHasChanged($)}getStyle($=this.selectionType||'unselected'){return this.styles[$]}extendStyles(){for(var $ in this.styles){var ee=this.styles[$];ee&&(this.styles[$]=Z.extend(!0,{},this.styles.unselected,ee))}}extendStyle($,ee){var te=this.styles[$];this.styles[$]=Z.extend(!0,{},this.styles[ee||'unselected'],te||{}),this.styles[$].markers.map(function(ie){ie.dom&&(ie.dom='')}),this._recalculateMarkerPoints($,this.styles[$].markers),this.styleHasChanged($)}setLineWidth($,ee,te){return ee=ee||'unselected',this.styles[ee]=this.styles[ee]||{},this.styles[ee].lineWidth=$,te&&this.setLineWidth($,'selected'),this.styleHasChanged(ee),this}getLineWidth($){return this.getStyle($).lineWidth||1}setLineColor($,ee,te){return ee=ee||'unselected',this.styles[ee]=this.styles[ee]||{},this.styles[ee].lineColor=$,te&&this.setLineColor($,'selected'),this.styleHasChanged(ee),this}getLineColor($){return this.getStyle($).lineColor||'black'}showMarkers($,ee){return $=$||'unselected',this.styles[$]=this.styles[$]||{},this.styles[$].showMarkers=!0,ee&&this._drawn?this.draw(!0):this.styleHasChanged($),this}hideMarkers($,ee){return $=$||'unselected',this.styles[$].showMarkers=!1,ee&&this._drawn?this.draw(!0):this.styleHasChanged($),this}markersShown($){return!1!==this.getStyle($).showMarkers}areMarkersShown(){return this.markersShown.apply(this,arguments)}isMarkersShown(){return this.markersShown.apply(this,arguments)}setMarkers($,ee,te){return this.styles[ee||'unselected']=this.styles[ee||'unselected']||{},this.showMarkers(ee,!1),Array.isArray($)||'object'!=typeof $?!$&&($=[{type:1,zoom:1,points:'all'}]):$=[$],this.styles[ee||'unselected'].markers=$,te&&(this.styles.selected.markers=Z.extend(!0,{},$)),this._recalculateMarkerPoints(ee,$),this.styleHasChanged(ee),this.dataHasChanged(!0),this}setMarkersPoints($,ee,te){this._extendMarkers('points',$,ee,te,!0)}setMarkersColor($,ee,te){this._extendMarkers('color',$,ee,te)}setMarkersType($,ee,te){this._extendMarkers('type',$,ee,te)}setMarkersZoom($,ee,te){this._extendMarkers('zoom',$,ee,te)}setMarkersStrokeColor($,ee,te){this._extendMarkers('strokeColor',$,ee,te)}setMarkersStrokeWidth($,ee,te){this._extendMarkers('strokeWidth',$,ee,te)}setMarkersFillColor($,ee,te){this._extendMarkers('fillColor',$,ee,te)}_extendMarkers($,ee,te,ie,re){(te=te||0,ie=ie||'unselected',this.styles[ie]&&this.styles[ie].markers)&&(this.styles[ie].markers[te][$]=ee,re&&this._recalculateMarkerPoints(ie,this.styles[ie].markers),this.markersDom[this.styles[ie].markers[te]]&&this.setMarkerStyleTo(this.markersDom[this.styles[ie].markers[te]].dom,this.styles[ie].markers[te]))}_recalculateMarkerPoints($,ee){var te=[];te.push([0,1/0,null]);for(var ie=0,re=ee.length;ie<re;ie++){ee[ie].markerPath=this.getMarkerPath(ee[ie]),ee[ie].points||(ee[ie].points='all'),Array.isArray(ee[ie].points)||(ee[ie].points=[ee[ie].points]);for(var ae=0,se=ee[ie].points.length;ae<se;ae++)'all'==ee[ie].points[ae]?te.push([0,1/0,ie]):Array.isArray(ee[ie].points[ae])?te.push([ee[ie].points[ae][0],ee[ie].points[ae][1],ie]):te.push([ee[ie].points[ae],ee[ie].points[ae],ie])}this.markerFamilies[$||'unselected']=ee,te.sort(function(oe,ne){return oe[0]-ne[0]||(null==oe[2]?-1:1)}),this.markerPoints[$||'unselected']=te}insertMarkers($){if(this.markerFamilies&&this.markerFamilies[$||this.selectionType]&&!this.options.markersIndependant)for(var ee=0,te=this.markerFamilies[$||this.selectionType].length;ee<te;ee++)if(this.markersDom.has(this.markerFamilies[$||this.selectionType][ee])){let ie=this.markersDom.get(this.markerFamilies[$||this.selectionType][ee]);ie.dom.setAttribute('d',ie.path),this.groupMarkers.appendChild(ie.dom),this.currentMarkersSelectionType=this.selectionType}}getMarkerForLegend(){if(this.markerPoints&&this.markerPoints[this.selectionType]){if(!this.markerForLegend){var $=document.createElementNS(this.graph.ns,'path');this.setMarkerStyleTo($,this.markerFamilies[this.selectionType][0]),$.setAttribute('d','M 14 0 '+this.getMarkerPath(this.markerFamilies[this.selectionType][0])),this.markerForLegend=$}return this.markerForLegend}}eraseMarkers(){var $=this;if(this.options.markersIndependant){for(var ee in this.independantMarkers)$.groupMarkers.removeChild(this.independantMarkers[ee]);this.independantMarkers={}}else this.currentMarkersSelectionType&&(this.markersDom.forEach(function(te){te.dom&&te.dom.parentNode===$.groupMarkers&&($.groupMarkers.removeChild(te.dom),te.path='')}),this.currentMarkersSelectionType=!1)}isMonotoneous(){return this.waveform?this.waveform.isMonotoneous():!!this.xmonotoneous}findLocalMinMax($,ee,te){return!!this.waveform&&this.waveform.findLocalMinMax($,ee,te)}}Z.mix(J,K.default),X.default=J,T.exports=X['default']})},function(u,A,S){var P,C,E;(function(T,X){C=[u,A,S(4),S(3),S(5)],P=X,E='function'==typeof P?P.apply(A,C):P,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y,I,B){'use strict';function F(G){return G&&G.__esModule?G:{default:G}}Object.defineProperty(X,'__esModule',{value:!0});var W=F(Y),V=function(G){if(G&&G.__esModule)return G;var Z={};if(null!=G)for(var K in G)Object.prototype.hasOwnProperty.call(G,K)&&(Z[K]=G[K]);return Z.default=G,Z}(I),R=F(B);class U extends W.default{static default(){return{redrawShapesAfterDraw:!1}}constructor(G,Z,K){super(...arguments),this.graph=G,this.name=Z,this.options=Object.assign({},U.default(),this.constructor.default(),K)}draw(){}beforeDraw(){}afterDraw(){this.options.redrawShapesAfterDraw&&this.graph.getShapesOfSerie(this).forEach(G=>{G.redraw()}),this.emit('draw')}setData(G){if(G instanceof R.default)return this.setWaveform(G);throw'Setting data other than waveforms in not supported by default. You must implemented this method in the inherited class.'}_addData(){return[]}clearData(){return this.setData(new R.default),this}getData(){return this.data}setOptions(G){this.options=G||{}}setOption(G,Z){this.options[G]=Z}kill(G){return this.graph.removeSerieFromDom(this),this.graph._removeSerie(this),this.graph.legend&&!G&&this.graph.legend.update(),this.graph=void 0,this}hide(G){if(this.hidden=!0,this.groupMain.setAttribute('display','none'),this.getSymbolForLegend().setAttribute('opacity',0.5),this.getTextForLegend().setAttribute('opacity',0.5),this.hideImpl(),G)for(var Z=this.graph.getShapesOfSerie(this),K=0,Q=Z.length;K<Q;K++)Z[K].hide();return this.emit('hide'),(this.getXAxis().doesHideWhenNoSeriesShown()||this.getYAxis().doesHideWhenNoSeriesShown())&&this.graph.draw(!0),this}show(G){if(this.hidden=!1,this.groupMain.setAttribute('display','block'),this.getSymbolForLegend().setAttribute('opacity',1),this.getTextForLegend().setAttribute('opacity',1),this.showImpl(),this.draw(!0),G)for(var Z=this.graph.getShapesOfSerie(this),K=0,Q=Z.length;K<Q;K++)Z[K].show();return this.emit('show'),(this.getXAxis().doesHideWhenNoSeriesShown()||this.getYAxis().doesHideWhenNoSeriesShown())&&this.graph.draw(!0),this}hideImpl(){}showImpl(){}toggleDisplay(){return this.isShown()?this.hide():this.show(),this}isShown(){return!this.hidden}axisCheck(){if(!this.getXAxis()||!this.getYAxis())throw'No axis exist for this serie. Check that they were properly assigned';if(isNaN(this.getXAxis().getCurrentMin())||isNaN(this.getXAxis().getCurrentMax())||isNaN(this.getYAxis().getCurrentMin())||isNaN(this.getYAxis().getCurrentMax()))throw'Axis min and max values are not defined. Try autoscaling'}getX(G){return(G=this.getXAxis().getPx(G))-G%0.2}getY(G){return(G=this.getYAxis().getPx(G))-G%0.2}isSelected(){return this.selected||'unselected'!==this.selectionType}_checkX(G){this.minX=Math.min(this.minX,G),this.maxX=Math.max(this.maxX,G)}_checkY(G){this.minY=Math.min(this.minY,G),this.maxY=Math.max(this.maxY,G)}getName(){return this.name}autoAxis(){return this.isFlipped()?(this.setXAxis(this.graph.getYAxis()),this.setYAxis(this.graph.getXAxis())):(this.setXAxis(this.graph.getXAxis()),this.setYAxis(this.graph.getYAxis())),this.graph.updateDataMinMaxAxes(),this}autoAxes(){return this.autoAxis(...arguments)}setXAxis(G){return this.xaxis='number'==typeof G?this.isFlipped()?this.graph.getYAxis(G):this.graph.getXAxis(G):G,this.graph.updateDataMinMaxAxes(),this}setYAxis(G){return'number'==typeof G?this.xaxis=this.isFlipped()?this.graph.getXAxis(G):this.graph.getYAxis(G):this.yaxis=G,this.graph.updateDataMinMaxAxes(),this}setAxes(){for(var G=0;2>G;G++)arguments[G]&&this[arguments[G].isX()?'setXAxis':'setYAxis'](arguments[G]);return this.graph.updateDataMinMaxAxes(),this}getXAxis(){return this.xaxis}getYAxis(){return this.yaxis}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getWaveform(){return this.waveform}getWaveforms(){return[this.waveform]}setWaveform(G){if(!(G instanceof R.default))throw'Cannot assign waveform to serie. Waveform is not of the proper Waveform instance';return this.waveform=G,this.minX=this.waveform.getXMin(),this.maxX=this.waveform.getXMax(),this.minY=this.waveform.getMin(),this.maxY=this.waveform.getMax(),this.graph.updateDataMinMaxAxes(),this.dataHasChanged(),this}getSymbolForLegend(){if(!this.lineForLegend){var G=document.createElementNS(this.graph.ns,'line');this.applyLineStyle(G),G.setAttribute('x1',5),G.setAttribute('x2',25),G.setAttribute('y1',0),G.setAttribute('y2',0),G.setAttribute('cursor','pointer'),this.lineForLegend=G}return this.lineForLegend}setLegendSymbolStyle(){this.applyLineStyle(this.getSymbolForLegend())}updateStyle(){this.setLegendSymbolStyle(),this.graph.updateLegend()}getTextForLegend(){if(!this.textForLegend){var G=document.createElementNS(this.graph.ns,'text');G.setAttribute('cursor','pointer'),G.textContent=this.getLabel(),this.textForLegend=G}return this.textForLegend}getIndex(){return this.graph.series.indexOf(this)}getLabel(){return this.options.label||this.name}setLabel(G){return this.options.label=G,this.textForLegend&&(this.textForLegend.textContent=G),this.graph.requireLegendUpdate(),this}setFlip(G){return this.options.flip=G,this}getFlip(){return this.options.flip}isFlipped(){return this.options.flip}setLayer(G){let Z=parseInt(G)||1;return Z!==this.options.layer&&(this.options.layer=Z,this.graph.appendSerieToDom(this)),this}getLayer(){return this.options.layer||1}setStyle(G,Z='unselected'){this.styles[Z]=G,this.styleHasChanged(Z)}styleHasChanged(G='unselected'){if(this._changedStyles=this._changedStyles||{},!1===G)for(var Z in this._changedStyles)this._changedStyles[Z]=!1;else this._changedStyles[G||'unselected']=!0;return this.graph.requireLegendUpdate(),this}hasStyleChanged(G){return this._changedStyles=this._changedStyles||{},this._changedStyles[G||'unselected']}dataHasChanged(G){return this._dataHasChanged=void 0===G||G,this}hasDataChanged(){return this._dataHasChanged}setInfo(G,Z){return this.infos=this.infos||{},this.infos[G]=Z,this}getInfo(G){return(this.infos||{})[G]}setAdditionalData(G){return this.additionalData=G,this}getAdditionalData(){return this.additionalData}select(){return this.selected=!0,this}unselect(){return this.selected=!1,this}enableTracking(G,Z){return this._tracker=!0,this._trackingCallback=G,this._trackingOutCallback=Z,this}disableTracking(){return this._trackerDom&&(this._trackerDom.remove(),this._trackerDom=null),this._tracker=!1,this._trackingCallback=null,this}allowTrackingLine(G){G=G||{},this.graph.addSerieToTrackingLine(this,G)}getMarkerForLegend(){return!1}get type(){return this._type}getType(){return this._type}set excludedFromLegend(G){this._excludedFromLegend=G}get excludedFromLegend(){return!!this._excludedFromLegend}setDataIndices(G,Z){this.categoryIndices=G,this.nbCategories=Z}hasErrors(){return!!this.waveform&&this.waveform.hasErrorBars()}}X.default=U,T.exports=X['default']})},function(u,A,S){var P,C,E;(function(T,X){C=[u,A,S(3)],P=X,E='function'==typeof P?P.apply(A,C):P,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y){'use strict';Object.defineProperty(X,'__esModule',{value:!0});var B=function(F){if(F&&F.__esModule)return F;var W={};if(null!=F)for(var V in F)Object.prototype.hasOwnProperty.call(F,V)&&(W[V]=F[V]);return W.default=F,W}(Y),O={makeBarY:function(F,W,V){if(F&&void 0!==V){var R=B.isNumeric(V.width)?V.width:10;return' V '+F+' m -'+R/2+' 0 h '+R+' m -'+R/2+' 0 V '+W+' '}},makeBoxY:function(F,W,V){return F&&void 0!==V?' m 5 0 V '+F+' h -10 V '+W+' m 5 0 ':void 0},makeBarX:function(F,W,V){if(F&&void 0!==V){var R=B.isNumeric(V.width)?V.width:10;return' H '+F+' m 0 -'+R/2+' v '+R+' m 0 -'+R/2+' H '+W+' '}},makeBoxX:function(F,W,V){return F&&void 0!==V?' v 5 H '+F+' v -10 H '+W+' v 5 ':void 0},setErrorBarStyle:function(F){return this.errorbarStyle=this._setErrorStyle(F),this},setErrorBoxStyle:function(F){return this.errorboxStyle=this._setErrorStyle(F),this},_setErrorStyle(F={}){var W=[],V=[['y','top','bottom'],['x','left','right']],R=K=>{K.dom=document.createElementNS(this.graph.ns,'path'),K.dom.setAttribute('fill',K.fillColor||'none'),K.dom.setAttribute('stroke',K.strokeColor||'black'),K.dom.setAttribute('stroke-opacity',K.strokeOpacity||1),K.dom.setAttribute('fill-opacity',K.fillOpacity||1),K.dom.setAttribute('stroke-width',K.strokeWidth||1),this.groupMain.appendChild(K.dom)},W={};'string'==typeof F&&(F={});for(var U=0,G=V.length;U<G;U++){F.all&&(F[V[U][1]]=B.extend(!0,{},F.all),F[V[U][2]]=B.extend(!0,{},F.all)),F[V[U][0]]&&(F[V[U][1]]=B.extend(!0,{},F[V[U][0]]),F[V[U][2]]=B.extend(!0,{},F[V[U][0]]));for(var Z=1;2>=Z;Z++)F[V[U][Z]]&&(W[V[U][Z]]=F[V[U][Z]],R(W[V[U][Z]]))}return W},errorDrawInit:function(){this.errorboxStyle&&(this.errorboxStyle.paths={top:'',bottom:'',left:'',right:''}),this.errorbarStyle&&(this.errorbarStyle.paths={top:'',bottom:'',left:'',right:''})},errorAddPoint:function(F,W,V,R,U){let G;(G=this.waveform.getErrorBarXBelow(F))&&(this.errorbarStyle.paths.left+=' M '+R+' '+U,this.errorbarStyle.paths.left+=this.makeBarX(this.getX(W-G),R,this.errorbarStyle.left)),(G=this.waveform.getErrorBarXAbove(F))&&(this.errorbarStyle.paths.right+=' M '+R+' '+U,this.errorbarStyle.paths.right+=this.makeBarX(this.getX(W+G),R,this.errorbarStyle.right)),(G=this.waveform.getErrorBarYBelow(F))&&(this.errorbarStyle.paths.bottom+=' M '+R+' '+U,this.errorbarStyle.paths.bottom+=this.makeBarY(this.getY(V-G),U,this.errorbarStyle.bottom)),(G=this.waveform.getErrorBarYAbove(F))&&(this.errorbarStyle.paths.top+=' M '+R+' '+U,this.errorbarStyle.paths.top+=this.makeBarY(this.getY(V+G),U,this.errorbarStyle.top)),(G=this.waveform.getErrorBoxXBelow(F))&&(this.errorboxStyle.paths.left+=' M '+R+' '+U,this.errorboxStyle.paths.left+=this.makeBoxX(this.getX(W-G),R,this.errorboxStyle.left)),(G=this.waveform.getErrorBoxXAbove(F))&&(this.errorboxStyle.paths.right+=' M '+R+' '+U,this.errorboxStyle.paths.right+=this.makeBoxX(this.getX(W+G),R,this.errorboxStyle.right)),(G=this.waveform.getErrorBoxYBelow(F))&&(this.errorboxStyle.paths.bottom+=' M '+R+' '+U,this.errorboxStyle.paths.bottom+=this.makeBoxY(this.getY(V-G),U,this.errorboxStyle.bottom)),(G=this.waveform.getErrorBoxYAbove(F))&&(this.errorboxStyle.paths.top+=' M '+R+' '+U,this.errorboxStyle.paths.top+=this.makeBoxY(this.getY(V+G),U,this.errorboxStyle.top))},errorAddPointBarChart:function(F,W,V,R){var U;this.error&&(U=this.error[F])&&this.doErrorDraw('y',U,W,R,V,R)},errorDraw:function(){if(this.errorbarStyle)for(var F in this.errorbarStyle.paths)this.errorbarStyle[F]&&this.errorbarStyle[F].dom&&this.errorbarStyle[F].dom.setAttribute('d',this.errorbarStyle.paths[F]);if(this.errorboxStyle)for(var F in this.errorboxStyle.paths)this.errorboxStyle[F]&&this.errorboxStyle[F].dom&&this.errorboxStyle[F].dom.setAttribute('d',this.errorboxStyle.paths[F])}};X.default=O,T.exports=X['default']})},function(u,A,S){var P,C,E;(function(T,X){C=[u,A,S(1),S(14),S(5),S(18),S(3)],P=X,E='function'==typeof P?P.apply(A,C):P,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y,I,B,O,F){'use strict';function V(J){return J&&J.__esModule?J:{default:J}}Object.defineProperty(X,'__esModule',{value:!0});var R=V(Y),U=V(I),G=V(B),Z=V(O),K=function(J){if(J&&J.__esModule)return J;var $={};if(null!=J)for(var ee in J)Object.prototype.hasOwnProperty.call(J,ee)&&($[ee]=J[ee]);return $.default=J,$}(F);class Q extends U.default{static defaults(){return{zpos:0}}constructor(){super(...arguments)}setZPos(J){return this.options.zpos=J,this}setz(){return this.setZPos(...arguments)}}K.mix(Q,Z.default),X.default=Q,T.exports=X['default']})},function(u,A){var P,C,E;(function(T,X){C=[u,A],P=X,E='function'==typeof P?P.apply(A,C):P,!(void 0!==E&&(u.exports=E))})(this,function(T,X){'use strict';function Y(B,O,F){let W,V,R,U,G,Z=B.getWaveforms();for(let K of Z)for(W=0,V=K.getLength(),R=K.getData();W<V;W+=1)U=O?B.getXAxis().getVal(B.getX(K.getX(W,!0))):B.getYAxis().getVal(B.getY(R[W])),G=0==W?U:F?Math.min(G,U):Math.max(G,U);return G}Object.defineProperty(X,'__esModule',{value:!0});X.default={getX:function(B){return(B=this.getXAxis().getPx(B))-B%0.2+this.getXAxis().getZProj(this.options.zpos)},getY:function(B){return(B=this.getYAxis().getPx(B))-B%0.2+this.getYAxis().getZProj(this.options.zpos)},getZPos:function(){return this.options.zpos},getMinX:function(B){return B?Y(this,!0,!0):this.minX},getMaxX:function(B){return B?Y(this,!0,!1):this.maxX},getMinY:function(B){return B?Y(this,!1,!0):this.minY},getMaxY:function(B){return B?Y(this,!1,!1):this.maxY}},T.exports=X['default']})},function(u,A,S){var P,C,E;(function(T,X){C=[u,A,S(3),S(14),S(16)],P=X,E='function'==typeof P?P.apply(A,C):P,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y,I,B){'use strict';function O(G){return G&&G.__esModule?G:{default:G}}Object.defineProperty(X,'__esModule',{value:!0});var W=function(G){if(G&&G.__esModule)return G;var Z={};if(null!=G)for(var K in G)Object.prototype.hasOwnProperty.call(G,K)&&(Z[K]=G[K]);return Z.default=G,Z}(Y),V=O(I),R=O(B);class U extends V.default{constructor(){super(...arguments),this.groupMain=document.createElementNS(this.graph.ns,'g'),this.pathDom=document.createElementNS(this.graph.ns,'path'),this.groupMain.appendChild(this.pathDom),this.styles={},this.styles.unselected={lineColor:this.options.lineColor,lineStyle:this.options.lineStyle,lineWidth:this.options.lineWidth,fillColor:this.options.fillColor,fillOpacity:this.options.fillOpacity,markers:this.options.markers}}setData(G){for(var Z in this.data=G,this.minY=Number.MAX_SAFE_INTEGER,this.maxY=Number.MIN_SAFE_INTEGER,this.data)this._checkY(this.data[Z]);return this}setFillColor(G,Z,K){return Z=Z||'unselected',this.styles[Z]=this.styles[Z]||{},this.styles[Z].fillColor=G,K&&this.setFillColor(G,'selected'),this.styleHasChanged(Z),this}getFillColor(G){return this.getStyle(G).fillColor}setFillOpacity(G,Z,K){return Z=Z||'unselected',this.styles[Z]=this.styles[Z]||{},this.styles[Z].fillOpacity=G,K&&this.setLineWidth(G,'selected'),this.styleHasChanged(Z),this}getFillOpacity(G){return this.getStyle(G).fillOpacity||1}applyLineStyles(){this.applyLineStyle(this.pathDom)}applyLineStyle(G){G.setAttribute('stroke',this.getLineColor()),G.setAttribute('stroke-width',this.getLineWidth()),this.getLineDashArray()?G.setAttribute('stroke-dasharray',this.getLineDashArray()):G.removeAttribute('stroke-dasharray'),G.setAttribute('fill',this.getFillColor()),G.setAttribute('fill-opacity',this.getFillOpacity()||1)}draw(){var G='';for(var Q in this.error&&this.errorDrawInit(),this.data)this.categoryIndices[Q]&&(G+='M '+this.getXAxis().getPos(this.categoryIndices[Q])+' '+this.getYAxis().getPos(0)+' V '+this.getYAxis().getPos(this.data[Q])+' h '+this.getXAxis().getDeltaPx(1/this.nbCategories)+' V '+this.getYAxis().getPos(0),this.error&&this.errorAddPointBarChart(Q,this.data[Q],this.getXAxis().getPos(this.categoryIndices[Q]+0.5/this.nbCategories),this.getYAxis().getPos(this.data[Q])));this.error&&this.errorDraw(),this.pathDom.setAttribute('d',G),this.applyLineStyles()}setMarkers(){}getUsedCategories(){return Object.keys(this.data)}}X.default=U,T.exports=X['default']})},function(u,A,S){var P,C,E;(function(T,X){C=[u,A,S(15),S(3)],P=X,E='function'==typeof P?P.apply(A,C):P,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y,I){'use strict';Object.defineProperty(X,'__esModule',{value:!0});var O=function(W){return W&&W.__esModule?W:{default:W}}(Y);class F extends O.default{static default(){return{orientation:'y',maxBoxWidth:20,defaultStyle:{meanLineColor:'rgb( 100, 0, 0 )',meanLineWidth:2,boxAboveLineWidth:1,boxAboveLineColor:'rgb( 0, 0, 0 )',boxAboveFillColor:'transparent',boxAboveFillOpacity:1,boxBelowLineWidth:1,boxBelowLineColor:'rgb( 0, 0, 0 )',boxBelowFillColor:'transparent',boxBelowFillOpacity:1,barAboveLineColor:'rgba( 0, 0, 0, 1 )',barAboveLineWidth:1,barBelowLineColor:'rgba( 0, 0, 0, 1 )',barBelowLineWidth:1,outlierLineWidth:1,outlierLineColor:'rgb( 255, 255, 255 )',outlierFillColor:'rgb( 0, 0, 0 )',outlierFillOpacity:1}}}constructor(){super(...arguments),this.groupMain=document.createElementNS(this.graph.ns,'g'),this.pathDom=document.createElementNS(this.graph.ns,'path'),this.groupMain.appendChild(this.pathDom),this.styles={},this.styles.unselected=this.options.defaultStyle}setData(W,V){if(this.data=W,!!Array.isArray(W)){let R,U,G,Z,K;for(var Q in'y'==this.options.orientation?(R=this.getXAxis(),U=this.getYAxis(),G=this._checkX.bind(this),Z=this._checkY.bind(this),K=!0,this.minY=W[0].Q2,this.maxY=W[0].Q2,this.maxX=W[0].x,this.minX=W[0].x):(R=this.getYAxis(),U=this.getXAxis(),G=this._checkY.bind(this),Z=this._checkX.bind(this),K=!1,this.minX=W[0].Q2,this.maxX=W[0].Q2,this.maxY=W[0].y,this.minY=W[0].y),V&&(G=function(){},Z=function(){}),R&&U||(0,I.throwError)('Error in setting data of the box serie. The X and Y axes must be set beforehand'),this.data)K?(G(this.data[Q].x),this.data[Q].pos=this.data[Q].x):(G(this.data[Q].y),this.data[Q].pos=this.data[Q].y),this.data[Q].Q3&&Z(this.data[Q].Q3),this.data[Q].Q1&&Z(this.data[Q].Q1),this.data[Q].whiskers?Array.isArray(this.data[Q].whiskers)?(0<this.data[Q].whiskers.length&&Z(this.data[Q].whiskers[0]),1<this.data[Q].whiskers.length&&Z(this.data[Q].whiskers[1])):(Z(this.data[Q].whiskers),this.data[Q].whiskers=[this.data[Q].whiskers]):this.data[Q].whiskers=[],Array.isArray(this.data[Q].outliers)?this.data[Q].outliers.map(J=>Z(J)):this.data[Q].outliers=[];return this.dataHasChanged(),this.graph.updateDataMinMaxAxes(),this}}_style(W,V,R='unselected',U=!1){return this.styles[R]=this.styles[R]||{},this.styles[R][W]=V,U&&this._set(W,V,'selected'),this.styleHasChanged(R),this}_gstyle(W,V){return this.getStyle(V)[W]}getStyle(W='unselected'){return this.styles[W]||{}}setMeanLineColor(){return this._style('meanLineColor',...arguments)}getMeanLineColor(){return this._gstyle('meanLineColor',...arguments)}setStyle(W,V='unselected'){this.styles[V]=(0,I.extend)({},defaults.defaultStyle,this.styles.unselected,W),this.styleHasChanged(V)}setMeanLineWidth(){return this._style('meanLineWidth',...arguments)}getMeanLineWidth(){return this._gstyle('meanLineWidth',...arguments)}setBoxAboveLineColor(){return this._style('boxAboveLineColor',...arguments)}getBoxAboveLineColor(){return this._gstyle('boxAboveLineColor',...arguments)}setBoxBelowLineColor(){return this._style('boxBelowLineColor',...arguments)}getBoxBelowLineColor(){return this._gstyle('boxBelowLineColor',...arguments)}setBoxAboveLineWidth(){return this._style('boxAboveLineWidth',...arguments)}getBoxAboveLineWidth(){return this._gstyle('boxAboveLineWidth',...arguments)}setBoxBelowLineWidth(){return this._style('boxBelowLineWidth',...arguments)}getBoxBelowLineWidth(){return this._gstyle('boxBelowLineWidth',...arguments)}setBoxAboveFillColor(){return this._style('boxAboveFillColor',...arguments)}getBoxAboveFillColor(){return this._gstyle('boxAboveFillColor',...arguments)}setBoxBelowFillColor(){return this._style('boxBelowFillColor',...arguments)}getBoxBelowFillColor(){return this._gstyle('boxBelowFillColor',...arguments)}setBoxAboveFillOpacity(){return this._style('boxAboveFillOpacity',...arguments)}getBoxAboveFillOpacity(){return this._gstyle('boxAboveFillOpacity',...arguments)}setBoxBelowFillOpacity(){return this._style('boxBelowFillOpacity',...arguments)}getBoxBelowFillOpacity(){return this._gstyle('boxBelowFillOpacity',...arguments)}setBarAboveLineColor(){return this._style('barAboveLineColor',...arguments)}getBarAboveLineColor(){return this._gstyle('barAboveLineColor',...arguments)}setBarBelowLineColor(){return this._style('barBelowLineColor',...arguments)}getBarBelowLineColor(){return this._gstyle('barBelowLineColor',...arguments)}setBarAboveLineWidth(){return this._style('barAboveLineWidth',...arguments)}getBarAboveLineWidth(){return this._gstyle('barAboveLineWidth',...arguments)}setBarBelowLineWidth(){return this._style('barBelowLineWidth',...arguments)}getBarBelowLineWidth(){return this._gstyle('barBelowLineWidth',...arguments)}setOutlierLineColor(){return this._style('outlierLineColor',...arguments)}getOutlierLineColor(){return this._gstyle('outlierLineColor',...arguments)}setOutlierLineWidth(){return this._style('outlierLineWidth',...arguments)}getOutlierLineWidth(){return this._gstyle('outlierLineWidth',...arguments)}setOutlierFillColor(){return this._style('outlierFillColor',...arguments)}getOutlierFillColor(){return this._gstyle('outlierFillColor',...arguments)}setOutlierFillOpacity(){return this._style('outlierFillOpacity',...arguments)}getOutlierFillOpacity(){return this._gstyle('outlierFillOpacity',...arguments)}applyLineStyles(){this.applyLineStyle(this.pathDom)}applyLineStyle(W){W.setAttribute('stroke',this.getLineColor()),W.setAttribute('stroke-width',this.getLineWidth()),W.removeAttribute('stroke-dasharray'),W.setAttribute('fill',this.getFillColor()),W.setAttribute('fill-opacity',this.getFillOpacity()||1)}draw(){if(this.data){let V='y'==this.options.orientation?this.getYAxis():this.getXAxis(),R='y'==this.options.orientation?this.getXAxis():this.getYAxis(),G=!1,W,U,Z,K,Q,J,$,ee;if((0,I.emptyDom)(this.groupMain),'category'==R.getType())U=R.getRelPx(0.8/this.nbCategories),G=!0;else{U=this.options.maxBoxWidth;for(var ae=0,se=this.data.length;ae<se-1;ae++)U=Math.min(U,Math.abs(R.getPx(this.data[ae+1].pos)-R.getPx(this.data[ae].pos)))}for(var ae=0,se=this.data.length;ae<se;ae++){if('category'==R.getType()){let ge='y'==this.options.orientation?this.data[ae].x:this.data[ae].y;if(!!this.categoryIndices.hasOwnProperty(ge))W=[R.getPos(this.categoryIndices[ge])+1.2*U/2];else if(Array.isArray(this._linkedToScatterSeries))for(let ue of this._linkedToScatterSeries)if(ue.categoryIndices.hasOwnProperty(ge)){W=[R.getPos(ue.categoryIndices[ge])+1.2*U/2],V='y'==this.options.orientation?ue.getYAxis():ue.getXAxis();break}}else W=[R.getPos('y'==this.options.orientation?this.data[ae].x:this.data[ae].y),U];Z=V.getPos(this.data[ae].Q2),K=V.getPos(this.data[ae].Q3),Q=V.getPos(this.data[ae].Q1),this.data[ae].whiskers.map(ge=>{ge<this.data[ae].Q1?$=V.getPos(ge):J=V.getPos(ge)}),ee=this.data[ae].outliers.map(ge=>V.getPos(ge));var oe=document.createElementNS(this.graph.ns,'line');this.applyMeanStyle(oe);var ne=document.createElementNS(this.graph.ns,'rect'),le=document.createElementNS(this.graph.ns,'rect');'y'==this.options.orientation?(ne.setAttribute('width',U),ne.setAttribute('x',W[0]-U/2),le.setAttribute('width',U),le.setAttribute('x',W[0]-U/2),oe.setAttribute('x1',W[0]-U/2),oe.setAttribute('x2',W[0]+U/2),oe.setAttribute('y1',Z),oe.setAttribute('y2',Z)):(ne.setAttribute('height',U),ne.setAttribute('y',W[0]-U/2),le.setAttribute('height',U),le.setAttribute('y',W[0]-U/2),oe.setAttribute('y1',W[0]-U/2),oe.setAttribute('y2',W[0]+U/2),oe.setAttribute('x1',Z),oe.setAttribute('x2',Z)),this.boxPos(ne,Z,K,'x'==this.options.orientation),this.boxPos(le,Z,Q,'x'==this.options.orientation),this.applyBoxStyle(ne,le);var pe=document.createElementNS(this.graph.ns,'line'),de=document.createElementNS(this.graph.ns,'line');'y'==this.options.orientation?(void 0!==J&&(pe.setAttribute('y1',K),pe.setAttribute('y2',J),pe.setAttribute('x1',W[0]),pe.setAttribute('x2',W[0])),void 0!==$&&(de.setAttribute('y1',Q),de.setAttribute('y2',$),de.setAttribute('x1',W[0]),de.setAttribute('x2',W[0]))):(void 0!==J&&(pe.setAttribute('x1',K),pe.setAttribute('x2',J),pe.setAttribute('y1',W[0]),pe.setAttribute('y2',W[0])),void 0!==$&&(de.setAttribute('x1',Q),de.setAttribute('x2',$),de.setAttribute('y1',W[0]),de.setAttribute('y2',W[0]))),ee.map(ge=>{let ue=document.createElementNS(this.graph.ns,'circle');ue.setAttribute('r',2),'y'==this.options.orientation?(ue.setAttribute('cx',W[0]),ue.setAttribute('cy',ge)):(ue.setAttribute('cy',W[0]),ue.setAttribute('cx',ge)),this.setOutlierStyle(ue),this.groupMain.appendChild(ue)}),void 0!==J&&this.groupMain.appendChild(pe),void 0!==$&&this.groupMain.appendChild(de),void 0!=K&&this.groupMain.appendChild(ne),void 0!=Q&&this.groupMain.appendChild(le),this.groupMain.appendChild(oe),this.applyWhiskerStyle(pe,de)}}}applyBoxStyle(W,V){W.setAttribute('stroke',this.getBoxAboveLineColor()),W.setAttribute('stroke-width',this.getBoxAboveLineWidth()),this.getBoxAboveFillColor()!==void 0&&W.setAttribute('fill',this.getBoxAboveFillColor()),this.getBoxAboveFillOpacity()!==void 0&&W.setAttribute('fill-opacity',this.getBoxAboveFillOpacity()),V.setAttribute('stroke',this.getBoxBelowLineColor()),V.setAttribute('stroke-width',this.getBoxBelowLineWidth()),this.getBoxBelowFillColor()!==void 0&&V.setAttribute('fill',this.getBoxBelowFillColor()),this.getBoxAboveFillOpacity()!==void 0&&V.setAttribute('fill-opacity',this.getBoxBelowFillOpacity())}applyWhiskerStyle(W,V){W.setAttribute('stroke',this.getBarAboveLineColor()),W.setAttribute('stroke-width',this.getBarAboveLineWidth()),V.setAttribute('stroke',this.getBarBelowLineColor()),V.setAttribute('stroke-width',this.getBarBelowLineWidth())}applyMeanStyle(W){W.setAttribute('stroke',this.getMeanLineColor()),W.setAttribute('stroke-width',this.getMeanLineWidth())}setOutlierStyle(W){W.setAttribute('stroke',this.getOutlierLineColor()),W.setAttribute('stroke-width',this.getOutlierLineWidth()),this.getBoxBelowFillColor()!==void 0&&W.setAttribute('fill',this.getOutlierFillColor()),this.getBoxAboveFillOpacity()!==void 0&&W.setAttribute('fill-opacity',this.getOutlierFillOpacity())}getCategoryIndex(W){if(!this.categories)throw new Error('No categories were defined. Probably axis.setSeries was not called');for(var V=0;V<this.categories.length;V++)if(this.categories[V].name==W)return V;return!1}setMarkers(){}boxPos(W,V,R,U){V>R?(W.setAttribute(U?'x':'y',R),W.setAttribute(U?'width':'height',V-R)):(W.setAttribute(U?'x':'y',V),W.setAttribute(U?'width':'height',R-V))}getUsedCategories(){let W='y'==this.options.orientation?'x':'y',V=this.data.map(R=>R[W]);return Array.isArray(this._linkedToScatterSeries)&&this._linkedToScatterSeries.map(R=>{R.getUsedCategories().map(U=>{let G;-1<(G=V.indexOf(U))&&V.splice(G,1)})}),V}linkToScatterSerie(...W){this._linkedToScatterSeries=W}}X.default=F,T.exports=X['default']})},function(u,A,S){var P,C,E;(function(T,X){C=[u,A,S(14),S(3),S(16)],P=X,E='function'==typeof P?P.apply(A,C):P,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y,I,B){'use strict';function F(G){return G&&G.__esModule?G:{default:G}}Object.defineProperty(X,'__esModule',{value:!0});var W=F(Y),V=function(G){if(G&&G.__esModule)return G;var Z={};if(null!=G)for(var K in G)Object.prototype.hasOwnProperty.call(G,K)&&(Z[K]=G[K]);return Z.default=G,Z}(I),R=F(B);class U extends W.default{constructor(){super(...arguments),this.lines=this.lines||{}}setColors(G){this.colors=G}_draw(){var G=this,Z=this._dataToUse,Q=0,ae=!1,se=!1,de=this.getXAxis(),ge=this.getYAxis(),ue=de.getCurrentMin(),he=ge.getCurrentMin(),ce=de.getCurrentMax(),xe=ge.getCurrentMax(),_e=0,ve=1,Pe=!1,Ce=!1,J,$,ee,te,ie,$,oe,ne,le,pe;for(this.eraseLines(),this.isFlipped()&&(_e=1,ve=0),this.currentLine='',ee=this.waveform.getLength(),J=0;J<ee;J+=2){if(te=this.waveform.getX(J),ie=this.waveform.getY(J),te<ue&&ae<ue||te>ce&&ae>ce||(ie<he&&se<he||ie>xe&&se>xe)&&!this.options.lineToZero){ae=te,se=ie,Ce=!0;continue}if(this.counter2=J,this.markersShown()&&this.getMarkerCurrentFamily(this.counter2),le=this.getX(te),pe=this.getY(ie),le!=oe||pe!=ne){if(Pe=te<ue||ie<he||te>ce||ie>xe,isNaN(le)||isNaN(pe)){0<this.counter;continue}var Le=this.colors[J];this._addPoint(le,pe,te,ie,oe,ne,ae,se,J,Le,!1,!0),oe=le,ne=pe,ae=te,se=ie}}if(this.latchLines(),this._tracker){this._trackerDom&&this._trackerDom.remove();var Ee=this.groupLines.cloneNode(!0);this.groupMain.appendChild(Ee);for(var Q=0,Te=Ee.children.length;Q<Te;Q++)Ee.children[Q].setAttribute('stroke','transparent'),Ee.children[Q].setAttribute('stroke-width','25px'),Ee.children[Q].setAttribute('pointer-events','stroke');G._trackerDom=Ee,G.groupMain.addEventListener('mousemove',function(Xe){var Ye=G.graph._getXY(Xe),De=G.handleMouseMove(!1,!1);G._trackingCallback(G,De,Ye.x,Ye.y)}),G.groupMain.addEventListener('mouseleave',function(){G._trackingOutCallback(G)})}return this}_addPoint(G,Z,K,Q,J,$,ee,te,ie,re){if(void 0!==J&&void 0!==$&&!(isNaN(G)||isNaN(Z))){re._rgb&&(re='rgba('+re._rgb[0]+','+re._rgb[1]+','+re._rgb[2]+','+(re._rgb[3]||1)+')');var oe=this.lines[re];oe||(oe=this.lines[re]={object:document.createElementNS(this.graph.ns,'path'),path:'',color:re},oe.object.setAttribute('stroke',re),oe.color=re,this.groupLines.appendChild(oe.object)),oe.path+='M '+J+' '+$+' L '+G+' '+Z,this.hasErrors()&&this.errorAddPoint(ie,K,Q,G,Z)}}removeExtraLines(){}latchLines(){for(var G in this.lines)this.lines[G].object.setAttribute('d',this.lines[G].path)}eraseLines(){for(var G in this.lines)this.lines[G].path='',this.lines[G].object.setAttribute('d','')}applyLineStyle(G){G.setAttribute('stroke-width',this.getLineWidth()),this.getLineDashArray()?G.setAttribute('stroke-dasharray',this.getLineDashArray()):G.removeAttribute('stroke-dasharray'),G.setAttribute('fill','none')}}X.default=U,T.exports=X['default']})},function(u,A,S){var P,C,E;(function(T,X){C=[u,A,S(15),S(3),S(16)],P=X,E='function'==typeof P?P.apply(A,C):P,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y,I,B){'use strict';function F(K){return K&&K.__esModule?K:{default:K}}Object.defineProperty(X,'__esModule',{value:!0});var W=F(Y),V=function(K){if(K&&K.__esModule)return K;var Q={};if(null!=K)for(var J in K)Object.prototype.hasOwnProperty.call(K,J)&&(Q[J]=K[J]);return Q.default=K,Q}(I),R=F(B);class Z extends W.default{constructor(){super(...arguments),this.id=Math.random()+Date.now(),this.shapes=[],this.shown=!0,this.data=[],this.shapesDetails=[],this.shapes=[],this._type='scatter',V.mapEventEmission(this.options,this),this._isMinOrMax={x:{min:!1,max:!1},y:{min:!1,max:!1}},this.groupPoints=document.createElementNS(this.graph.ns,'g'),this.groupMain=document.createElementNS(this.graph.ns,'g'),this.additionalData={},this.selectedStyleGeneral={},this.selectedStyleModifiers={},this.groupPoints.addEventListener('mouseover',$=>{var ee=parseInt($.target.parentElement.getAttribute('data-shapeid'));this.emit('mouseover',ee,this.waveform.getX(ee),this.waveform.getY(ee))}),this.groupPoints.addEventListener('mouseout',$=>{var ee=parseInt($.target.parentElement.getAttribute('data-shapeid'));this.emit('mouseout',ee,this.waveform.getX(ee),this.waveform.getY(ee))}),this.minX=Number.MAX_VALUE,this.minY=Number.MAX_VALUE,this.maxX=Number.MIN_VALUE,this.maxY=Number.MIN_VALUE,this.groupMain.appendChild(this.groupPoints),this.currentAction=!1,this.initExtended1&&this.initExtended1(),this.styles={},this.styles.unselected={},this.styles.selected={},this.styles.unselected.default={shape:'circle',cx:0,cy:0,r:3,stroke:'transparent',fill:'black'},this.styles.selected.default={shape:'circle',cx:0,cy:0,r:4,stroke:'transparent',fill:'black'}}setDataCategory(K){for(let $ of K)this._checkY($.y.getMaxY()),this._checkY($.y.getMinY());return this.data=K,this.dataHasChanged(),this.graph.updateDataMinMaxAxes(),this}empty(){for(;this.groupPoints.firstChild;)this.groupPoints.removeChild(this.groupPoints.firstChild)}getSymbolForLegend(){if(this.symbol)return this.symbol;var K=document.createElementNS(this.graph.ns,'g');K.setAttribute('data-shapeid',-1);var Q=this.doShape(K,this.styles.unselected.default),J=this.getStyle('unselected',-1,!0);for(var $ in J[-1])'shape'!=$&&Q.setAttribute($,J[-1][$]);return K}setStyle(K,Q,J='unselected'){return'string'==typeof Q&&(J=Q,Q=!1),this.styles[J]=this.styles[J]||{},this.styles[J].all=K,this.styles[J].modifiers=Q,this.styleHasChanged(J),this}draw(K){if(K||this.hasDataChanged()||this.hasStyleChanged('unselected')){var te=0,oe='category'==this.getXAxis().getType(),$,ee,ie;this._drawn=!0,this.dataHasChanged(!1),this.styleHasChanged(!1),this.groupMain.removeChild(this.groupPoints);var ne=[];if(te=0,ie=0,this.hasErrors()&&this.errorDrawInit(),oe){for(let de=0;te<this.data.length;te++)if(this.categoryIndices.hasOwnProperty(this.data[te].x)){this.error;for(var le=0,pe=this.data[te].y.getLength();le<pe;le++)ee=this.getY(this.data[te].y.getY(le)),$=this.getX(le/(pe-1)*(0.8/this.nbCategories)+this.categoryIndices[this.data[te].x]+0.1/this.nbCategories),le++,this.shapesDetails[de]=this.shapesDetails[de]||[],this.shapesDetails[de][0]=$,this.shapesDetails[de][1]=ee,ne.push(de),de++}}else for(;te<this.waveform.getLength();te++){if(this.waveform.getX(te)<this.getXAxis().getCurrentMin()||this.waveform.getX(te)>this.getXAxis().getCurrentMax()||this.waveform.getY(te)<this.getYAxis().getCurrentMin()||this.waveform.getY(te)>this.getYAxis().getCurrentMax()){this.shapes[te]&&this.shapes[te].setAttribute('display','none');continue}this.shapes[te]&&this.shapes[te].setAttribute('display','initial'),$=this.getX(this.waveform.getX(te)),ee=this.getY(this.waveform.getY(te)),this.hasErrors()&&this.errorAddPoint(te,this.waveform.getX(te),this.waveform.getY(te),$,ee),this.shapesDetails[te]=this.shapesDetails[te]||[],this.shapesDetails[te][0]=$,this.shapesDetails[te][1]=ee,ne.push(te)}this.hasErrors()&&this.errorDraw(),this.applyStyle('unselected',ne),this.groupMain.appendChild(this.groupPoints)}}_addPoint(K,Q,J){var $=document.createElementNS(this.graph.ns,'g');$.setAttribute('transform','translate('+K+', '+Q+')'),$.setAttribute('data-shapeid',J),shape=this.extraStyle&&this.extraStyle[J]?this.doShape($,this.extraStyle[J]):this.stdStylePerso?this.doShape($,this.stdStylePerso):this.doShape($,this.stdStyle),this.shapes[J]=shape,this.groupPoints.appendChild($)}doShape(K,Q){var J=document.createElementNS(this.graph.ns,Q.shape);return K.appendChild(J),J}getStyle(K,Q,J){var K=K||'unselected',$,ee={};'number'==typeof Q?$=[Q]:Array.isArray(Q)&&($=Q);var te,Q,ie,re,se;this.styles[K].all!==void 0&&(se=this.styles[K].all,'function'==typeof se?se=se():!1===se&&(se={}));for(var oe=0,ne=$.length;oe<ne;oe++){if(Q=$[oe],te=this.shapes[Q],(ie=this.styles[K].modifiers)&&('function'==typeof ie||ie[Q])?('function'==typeof ie?re=ie(Q,te):ie[Q]&&(re=ie[Q]),ee[Q]=Object.assign({},se,re)):void 0==se?ee[Q]=this.styles[K].default:ee[Q]=se,ee[Q]||(ee[Q]=se),!te){if(!ee[Q].shape)throw console.error(re),'No shape was defined with this style.';var le=document.createElementNS(this.graph.ns,'g');le.setAttribute('data-shapeid',Q),this.shapes[Q]=this.doShape(le,ee[Q]),this.groupPoints.appendChild(le),te=this.shapes[Q]}J||te.parentNode.setAttribute('transform','translate('+this.shapesDetails[Q][0]+', '+this.shapesDetails[Q][1]+')')}return ee}applyStyle(K,Q,J){var $,ee,te=this.getStyle(K,Q,J);for($ in te)for(ee in te[$])'shape'!==ee&&(te[$][ee]?this.shapes[$].setAttribute(ee,te[$][ee]):this.shapes[$].removeAttribute(ee))}unselectPoint(K){this.selectPoint(K,!1)}selectPoint(K,Q,J){if(!(this.shapesDetails[K][2]&&this.shapesDetails[K][2]==J)){if('string'==typeof Q&&(J=Q,Q=void 0),Array.isArray(K))return this.selectPoints(K);if(this.shapes[K]&&this.shapesDetails[K])if((this.shapesDetails[K][2]||!1===Q)&&!0!==Q){var $=this.shapesDetails[K][2];this.shapesDetails[K][2]=!1;var ee=this.getStyle($,K,!0);for(var te in ee[K])this.shapes[K].removeAttribute(te);this.applyStyle('unselected',K,!0)}else J=J||'selected',this.shapesDetails[K][2]=J,this.applyStyle(J,K,!0)}}getUsedCategories(){return'object'==typeof this.data[0]?this.data.map(K=>K.x):[]}}V.mix(Z,R.default),X.default=Z,T.exports=X['default']})},function(u,A,S){var P,C,E;(function(T,X){C=[u,A,S(15),S(5),S(3)],P=X,E='function'==typeof P?P.apply(A,C):P,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y,I,B){'use strict';function O(R){return R&&R.__esModule?R:{default:R}}Object.defineProperty(X,'__esModule',{value:!0});var F=O(Y),W=O(I);class V extends F.default{static default(){return{fillColor:'rgba( 0, 0, 0, 0.1 )',lineColor:'rgba( 0, 0, 0, 1 )',lineWidth:'1px'}}constructor(){super(...arguments),this.selectionType='unselected',this.id=(0,B.guid)(),this.groupZones=document.createElementNS(this.graph.ns,'g'),this.groupMain=document.createElementNS(this.graph.ns,'g'),this.lineZone=document.createElementNS(this.graph.ns,'path'),this.lineZone.setAttribute('stroke','black'),this.lineZone.setAttribute('stroke-width','1px'),this.groupMain.appendChild(this.groupZones),this.groupZones.appendChild(this.lineZone),this.applyLineStyle(this.lineZone),this.styleHasChanged(),this.clip=document.createElementNS(this.graph.ns,'clipPath'),this.clipId=(0,B.guid)(),this.clip.setAttribute('id',this.clipId),this.graph.defs.appendChild(this.clip)}setWaveform(...R){return this.waveforms=R,this.waveforms=this.waveforms.map(U=>{return U instanceof W.default?U:new W.default(U)}),this.minX=this.waveforms[0].getXMin(),this.maxX=this.waveforms[0].getXMax(),this.minY=this.waveforms[0].getMin(),this.maxY=this.waveforms[0].getMax(),this.waveforms.map(U=>{this.minX=Math.min(U.getXMin(),this.minX),this.maxX=Math.max(U.getXMin(),this.maxX),this.minY=Math.min(U.getMin(),this.minY),this.maxY=Math.max(U.getMax(),this.maxY)}),this.graph.updateDataMinMaxAxes(),this.dataHasChanged(),this}setWaveforms(){return this.setWaveform(...arguments)}getWaveforms(){return this.waveforms}setMinMaxWaveforms(R,U){return this.waveforms=[R,U.reverse()],this}empty(){for(;this.group.firstChild;)this.group.removeChild(this.group.firstChild)}draw(R){if(R||this.hasDataChanged()){if(!this.waveforms)return;let U=0,G=0,Z=0,K=0,Q=0,J='',ee=!1,$;const te=this.getXAxis().getMinPx(),ie=this.getXAxis().getMaxPx(),re=this.getYAxis().getMinPx(),ae=this.getYAxis().getMaxPx(),se=this.getXAxis().getCurrentMin(),oe=this.getXAxis().getCurrentMax(),ne=this.getYAxis().getCurrentMin(),le=this.getYAxis().getCurrentMax();this.groupMain.removeChild(this.groupZones);for(let pe of this.waveforms)for(Q=0;Q<pe.getLength();Q+=1)if(U=pe.getX(Q,!0),G=pe.getY(Q,!0),G[Q]<ne?K=this.getY(ne):G[Q]>le&&(K=this.getY(le)),U==U){if(G!=G){if(0==J.length)continue;J+='L '+Z+', '+this.getY(pe.getMinY()),ee=!0;continue}if(K=this.getY(G),Z=this.getX(U),U<se||U>oe){$=[U,G[Q],Z,K];continue}ee&&(J+=' M '+Z+', '+this.getY(pe.getMinY())+' ',ee=!1),0<J.length&&(J+=' L '),$?(J+=$[2]+','+$[3]+' ',$=!1):J+=Z+','+K+' '}''==J?this.lineZone.setAttribute('d',''):this.lineZone.setAttribute('d','M '+J+' z'),this.groupMain.appendChild(this.groupZones)}this.hasStyleChanged(this.selectionType)&&(this.applyLineStyle(this.lineZone),this.styleHasChanged(!1))}applyLineStyle(R){R.setAttribute('stroke',this.getLineColor()),R.setAttribute('stroke-width',this.getLineWidth()),R.setAttribute('fill',this.getFillColor()),R.setAttribute('fill-opacity',this.getFillOpacity()),R.setAttribute('stroke-opacity',this.getLineOpacity())}setLineWidth(R){return this.options.lineWidth=R,this.styleHasChanged(),this}getLineWidth(){return this.options.lineWidth}setLineOpacity(R){return this.options.lineOpacity=R,this.styleHasChanged(),this}getLineOpacity(){return this.options.lineOpacity}setLineColor(R){return this.options.lineColor=R,this.styleHasChanged(),this}getLineColor(){return this.options.lineColor}setFillOpacity(R){return this.options.fillOpacity=R,this.styleHasChanged(),this}getFillOpacity(){return this.options.fillOpacity}setFillColor(R){return this.options.fillColor=R,this.styleHasChanged(),this}getFillColor(){return this.options.fillColor}}X.default=V,T.exports=X['default']})},function(u,A,S){var P,C,E;(function(T,X){C=[u,A,S(1),S(23),S(5),S(18),S(3)],P=X,E='function'==typeof P?P.apply(A,C):P,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y,I,B,O,F){'use strict';function V(J){return J&&J.__esModule?J:{default:J}}Object.defineProperty(X,'__esModule',{value:!0});var R=V(Y),U=V(I),G=V(B),Z=V(O),K=function(J){if(J&&J.__esModule)return J;var $={};if(null!=J)for(var ee in J)Object.prototype.hasOwnProperty.call(J,ee)&&($[ee]=J[ee]);return $.default=J,$}(F);class Q extends U.default{static default(){return{zpos:0}}constructor(){super(...arguments)}setZPos(J){return this.options.zpos=J,this}setz(){return this.setZPos(...arguments)}}K.mix(Q,Z.default),X.default=Q,T.exports=X['default']})},function(u,A,S){var P,C,E;(function(T,X){C=[u,A,S(15),S(3)],P=X,E='function'==typeof P?P.apply(A,C):P,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y,I){'use strict';Object.defineProperty(X,'__esModule',{value:!0});var F=function(R){return R&&R.__esModule?R:{default:R}}(Y),W=function(R){if(R&&R.__esModule)return R;var U={};if(null!=R)for(var G in R)Object.prototype.hasOwnProperty.call(R,G)&&(U[G]=R[G]);return U.default=R,U}(I);class V extends F.default{constructor(){super(...arguments),W.mapEventEmission(this.options,this),this.groupMain=document.createElementNS(this.graph.ns,'g'),this.rects=[],this.paths=[],this.recalculateBinsOnDraw=!1}setData(R){this.minX=this.maxX=this.minY=this.maxY=0;var U=0,G=R.length;for(this.data=R,this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY,U=0;U<G;U++)this._checkX(R[U][0]),this._checkY(R[U][1]);return this.dataHasChanged(),this.graph.updateDataMinMaxAxes(),this}calculateDensity(R,U,G,Z,K,Q){var J=[],ee=this.data.length,re=Number.POSITIVE_INFINITY,ae=Number.NEGATIVE_INFINITY,$,te,ie;for($=0;$<ee;$++)(te=~~((this.data[$][0]-R)/U),ie=~~((this.data[$][1]-Z)/K),!(te>G||ie>Q||0>te||0>ie))&&(J[te]=J[te]||[],J[te][ie]=J[te][ie]+1||1,re=J[te][ie]<re?J[te][ie]:re,ae=J[te][ie]>ae?J[te][ie]:ae);return this.maxIndexX=G,this.maxIndexY=Q,this.binMin=re,this.binMax=ae,this.deltaX=U,this.deltaY=K,this.fromX=R,this.fromY=Z,this.numX=G,this.numY=Q,this.densitymap=J,J}calculateDensityWeighted(R,U,G,Z,K,Q){var J=[],ee=this.data.length,re=Number.POSITIVE_INFINITY,ae=Number.NEGATIVE_INFINITY,$,te,ie,se,oe,ne,le,pe,de,ge,ue;for($=0;$<ee;$++)(ne=(this.data[$][0]-R)/U-0.5,le=(this.data[$][1]-Z)/K-0.5,te=Math.floor(ne),ie=Math.floor(le),pe=te,ge=ie,de=te+1,ue=ie+1,se=1-(ne-te),oe=1-(le-ie),!(te>G||ie>Q||0>te||0>ie))&&(J[pe]=J[pe]||[],J[de]=J[de]||[],J[pe][ge]=J[pe][ge]||0,J[de][ge]=J[de][ge]||0,J[pe][ue]=J[pe][ue]||0,J[de][ue]=J[de][ue]||0,J[pe][ge]+=se*oe,J[de][ge]+=(1-se)*oe,J[pe][ue]+=se*(1-oe),J[de][ue]+=(1-se)*(1-oe),re=J[pe][ge]<re?J[pe][ge]:re,ae=J[pe][ge]>ae?J[pe][ge]:ae,re=J[de][ge]<re?J[de][ge]:re,ae=J[de][ge]>ae?J[de][ge]:ae,re=J[pe][ue]<re?J[pe][ue]:re,ae=J[pe][ue]>ae?J[pe][ue]:ae,re=J[de][ue]<re?J[de][ue]:re,ae=J[de][ue]>ae?J[de][ue]:ae);return this.maxIndexX=G,this.maxIndexY=Q,this.binMin=re,this.binMax=ae,this.deltaX=U,this.deltaY=K,this.fromX=R,this.fromY=Z,this.numX=G,this.numY=Q,this.densitymap=J,J}autoBins(R,U){return this.numX=R||400,this.numY=U||this.numX,this.calculateDensity(this.minX,(this.maxX-this.minX)/R,R,this.minY,(this.maxY-this.minY)/U,U),this.recalculateBinsOnDraw=!1,this}setPxPerBin(R,U,G){return R&&this.calculationDensityMap({from:'min',to:'max',pxPerBin:R,weighted:G}),U&&this.calculationDensityMap(!1,{from:'min',to:'max',pxPerBin:U,weighted:G}),this}setBinsFromTo(R,U,G,Z){return this.densityMapCalculation=this.densityMapCalculation||{},this.densityMapCalculation[R]={from:U,to:G,numBins:Z},this.calculationDensityMap(),this}calculationDensityMap(R,U){this.method=this.calculateDensityAdvanced,this.densityMapCalculation=this.densityMapCalculation||{},R&&(this.densityMapCalculation.x=R),U&&(this.densityMapCalculation.y=U)}calculateDensityAdvanced(){var R={x:{from:0,num:0,delta:0,weighing:!1},y:{from:0,num:0,delta:0,weighing:!1}},U={x:this.graph.drawingSpaceWidth,y:this.graph.drawingSpaceHeight},G={x:this.getXAxis,y:this.getYAxis},Z=!1;for(var K in this.densityMapCalculation)if(this.densityMapCalculation[K].weighted&&(Z=!0,R[K].weighing=!0),this.densityMapCalculation[K].pxPerBin){var Q='min'==this.densityMapCalculation[K].from?G[K].call(this).getCurrentMin():this.densityMapCalculation[K].from,J='max'==this.densityMapCalculation[K].to?G[K].call(this).getCurrentMax():this.densityMapCalculation[K].to,$=Math.abs(G[K].call(this).getRelPx(J-Q));R[K].num=Math.ceil(U[K]/this.densityMapCalculation[K].pxPerBin),R[K].from=Q-Math.abs(G[K].call(this).getRelVal((R[K].num*this.densityMapCalculation[K].pxPerBin-$)/2)),R[K].delta=Math.abs(G[K].call(this).getRelVal(this.densityMapCalculation[K].pxPerBin))}else R[K].num=this.densityMapCalculation[K].numBins||400,R[K].from='min'==this.densityMapCalculation[K].from?G[K].call(this).getCurrentMin():this.densityMapCalculation[K].from,R[K].delta=this.densityMapCalculation[K].to?(('max'==this.densityMapCalculation[K].to?G[K].call(this).getCurrentMax():this.densityMapCalculation[K].to)-R[K].from)/R[K].num:this.densityMapCalculate[K].delta;(Z?this.calculateDensityWeighted:this.calculateDensity).call(this,R.x.from,R.x.delta,R.x.num,R.y.from,R.y.delta,R.y.num)}setColorMapBinBoundaries(R,U){return this.colorMapMin=R,this.colorMapMax=U,this}autoColorMapBinBoundaries(){return this.colorMapMin=this.binMin,this.colorMapMax=this.binMax,this}onRedrawColorMapBinBoundaries(R){return this.callbackColorMapMinMax=R,this}colorMapHSL(R,U,G){G=G||'linear';for(var Z={exp:function(se){return(Math.exp(1*(se/U))-Math.exp(0))/(Math.exp(1)-Math.exp(0))},log:function(se){return(Math.log(se+1)-Math.log(1))/(Math.log(U+1)-Math.log(1))},linear:function(se){return(se-0)/(U-0)}},K=0,Q=[],J=[],$={h:null,s:null,l:null,a:null},ie=R.length-1,re=0,ee,te;re<=U;re++){for(var ae in ee=Z[G](re),te=Math.floor(ee*ie),te==R.length-1&&(te=ie-1),ee=(ee-te/ie)/(1/ie),$)$[ae]=(R[te+1][ae]-R[te][ae])*ee+R[te][ae];Q[K]='hsl('+$.h+', '+Math.round(100*$.s)+'%, '+Math.round(100*$.l)+'%)',J[K]=$.a,K++}return this.opacities=J,this.colorMap=Q,this.colorMapNum=U,this}autoColorMapHSL(R,U){return this.colorMapHSV(R,100,U||'linear'),this}getColorIndex(R){return Math.max(0,Math.min(this.colorMapNum,Math.floor((R-this.colorMapMin)/(this.colorMapMax-this.colorMapMin)*this.colorMapNum)))}draw(){var R;if(this.method&&this.method(),!this.callbackColorMapMinMax||void 0==this.colorMapMin||void 0==this.colorMapMax||'auto'==this.callbackColorMapMinMax)this.autoColorMapBinBoundaries();else{var U=this.callbackColorMapMinMax(this.binMin,this.binMax);this.setColorMapBinBoundaries(U[0],U[1])}for(var G=this.getXAxis().getRelPx(this.deltaX),Z=this.getYAxis().getRelPx(this.deltaY),K=0;K<this.paths.length;K++)this.paths[K]='';for(var K=0;K<this.maxIndexX;K++)for(var Q=0;Q<this.maxIndexY;Q++)void 0!=this.densitymap[K]&&void 0!=this.densitymap[K][Q]&&(R=this.getColorIndex(this.densitymap[K][Q]),this.paths[R]||(this.paths[R]=''),this.paths[R]+=' M '+this.getXAxis().getPx(K*this.deltaX+this.fromX)+' '+this.getYAxis().getPx(Q*this.deltaY+this.fromY)+' h '+G+' v '+Z+' h -'+G+' z');this.drawRects()}drawRects(){for(var R=0;R<this.paths.length;R++)this.rects[R]||(this.rects[R]=document.createElementNS(this.graph.ns,'path'),this.rects[R].setAttribute('shape-rendering','crispEdges')),void 0!==this.paths[R]&&(this.rects[R].setAttribute('d',this.paths[R]),this.rects[R].setAttribute('fill',this.colorMap[R]),this.rects[R].setAttribute('fill-opacity',this.opacities[R])),this.groupMain.appendChild(this.rects[R])}setOptions(R){return this.options=W.extend(!0,{},defaults,R||{}),this}}X.default=V,T.exports=X['default']})},function(u,A,S){var P,C,E;(function(T,X){C=[u,A,S(14),S(3)],P=X,E='function'==typeof P?P.apply(A,C):P,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y,I){'use strict';Object.defineProperty(X,'__esModule',{value:!0});var F=function(R){return R&&R.__esModule?R:{default:R}}(Y),W=function(R){if(R&&R.__esModule)return R;var U={};if(null!=R)for(var G in R)Object.prototype.hasOwnProperty.call(R,G)&&(U[G]=R[G]);return U.default=R,U}(I);class V extends F.default{constructor(R){super(...arguments),this.negativeDelta=0,this.positiveDelta=0,this.negativeThreshold=0,this.positiveThreshold=0,this.groupMain.setAttribute('clip-path','url(#_clipplot'+R._creation+')')}setData(R,U,G){var U=U||'2D',G=G||'float',$=R.length,re=[],J,ee,te,ie;for(R instanceof Array||'object'!=typeof R||(this.minX=R.minX,this.minY=R.minY,this.maxX=R.maxX,this.maxY=R.maxY,R=R.segments,$=R.length),J=0;J<$;J++){for(te=R[J].lines.length,ie=this._addData(G,te),ee=0;ee<te;ee+=2)ie[ee]=R[J].lines[ee],this._checkX(ie[ee]),ie[ee+1]=R[J].lines[ee+1],this._checkY(ie[ee+1]);re.push({lines:ie,zValue:R[J].zValue})}return this.data=re,this.graph.updateDataMinMaxAxes(),this.dataHasChanged(!0),this}draw(R){if(R||this.hasDataChanged()){this.currentLine=0;var $=0,ee=this.data.length,te=0,Z,K,Q,J,ie,re,se,oe;this.minZ=1/0,this.maxZ=-(1/0);var ne=this.groupLines.nextSibling;this.groupMain.removeChild(this.groupLines),this.zValues={};var le=0,pe=1;this.getFlip()&&(le=0,pe=1);var de=this.getYAxis().getCurrentMin(),ge=this.getXAxis().getCurrentMin(),ue=this.getXAxis().getCurrentMax(),he=this.getYAxis().getCurrentMax();for(this.counter=0,this.currentLineId=0;$<ee;$++){for(this.currentLine='',te=0,ie=0,(oe=this.data[$].lines,re=oe.length);te<re;te+=4){var ce,xe;oe[te+le]<ge&&oe[te+2+le]<ge||oe[te+pe]<de&&oe[te+2+pe]<de||oe[te+pe]>he&&oe[te+2+pe]>he||oe[te+le]>ue&&oe[te+2+le]>ue||(Q=this.getX(oe[te+le]),J=this.getY(oe[te+pe]),Z=this.getX(oe[te+2+le]),K=this.getY(oe[te+2+pe]),Z!=Q||K!=J)&&(this.currentLine+='M ',this.currentLine+=Q,this.currentLine+=' ',this.currentLine+=J,this.currentLine+='L ',this.currentLine+=Z,this.currentLine+=' ',this.currentLine+=K,this.counter++,ce=Z,xe=K,ie++)}this.currentLine+=' z',se=this._createLine(),se.setAttribute('data-zvalue',this.data[$].zValue),this.zValues[this.data[$].zValue]={dom:se},this.minZ=Math.min(this.minZ,this.data[$].zValue),this.maxZ=Math.max(this.maxZ,this.data[$].zValue)}for($++,$=this.currentLine+1;$<this.lines.length;$++)this.groupLines.removeChild(this.lines[$]),this.lines.splice($,1);for($=0;$<ee;$++)this.setColorTo(this.lines[$],this.data[$].zValue,this.minZ,this.maxZ);this.onMouseWheel(0,{shiftKey:!1}),this.groupMain.insertBefore(this.groupLines,ne)}else if(this.hasStyleChanged(this.selectionType))for(;$<ee;$++)this.setColorTo(this.lines[$],this.data[$].zValue,this.minZ,this.maxZ)}onMouseWheel(R,U,G,Z){for(var K in R/=250,void 0===G?U.shiftKey&&this.options.hasNegative?(this.negativeDelta=Math.min(0,Math.max(-1,this.negativeDelta+Math.min(0.1,Math.max(-0.1,R)))),this.negativeThreshold=-this.minZ*Math.pow(this.negativeDelta,3)):(this.positiveDelta=Math.min(1,Math.max(0,this.positiveDelta+Math.min(0.1,Math.max(-0.1,R)))),this.positiveThreshold=this.maxZ*Math.pow(this.positiveDelta,3)):(!Z&&(this.negativeThreshold=-G*this.minZ,this.negativeDelta=-Math.pow(Math.abs(this.negativeThreshold/-this.minZ),1/3)),Z&&(this.positiveThreshold=G*this.maxZ,this.positiveDelta=Math.pow(this.positiveThreshold/this.maxZ,1/3))),isNaN(this.positiveDelta)&&(this.positiveDelta=0),isNaN(this.negativeDelta)&&(this.negativeDelta=0),this.zValues)this.zValues[K].dom.setAttribute('display',0<=K&&K>=this.positiveThreshold||0>=K&&K<=this.negativeThreshold?'block':'none');this._shapeZoom&&(this.options.hasNegative?(this._shapeZoom.setHandleNeg(-Math.pow(this.negativeDelta,3),this.minZ),this._shapeZoom.showHandleNeg()):this._shapeZoom.hideHandleNeg(),this._shapeZoom.setHandlePos(Math.pow(this.positiveDelta,3),this.maxZ))}setDynamicColor(R){this.lineColors=R,this.styleHasChanged()}setNegative(R){this.options.hasNegative=R,R&&(this.negativeThreshold=0)}setColorTo(R,U,G,Z){if(this.lineColors){var K={h:0,s:0,l:0};for(var Q in K)K[Q]=0<U?this.lineColors.fromPositive[Q]+(this.lineColors.toPositive[Q]-this.lineColors.fromPositive[Q])*(U/Z):this.lineColors.fromNegative[Q]+(this.lineColors.toNegative[Q]-this.lineColors.fromNegative[Q])*(U/G);K.h/=360;var J=W.hslToRgb(K.h,K.s,K.l);R.setAttribute('stroke','rgb('+J.join()+')')}}getSymbolForLegend(){if(!this.lineForLegend){var R=document.createElementNS(this.graph.ns,'ellipse');R.setAttribute('cx',7),R.setAttribute('cy',0),R.setAttribute('rx',8),R.setAttribute('ry',3),R.setAttribute('cursor','pointer'),this.lineForLegend=R}return this.applyLineStyle(this.lineForLegend,this.maxZ),this.lineForLegend}applyLineStyle(R,U){R.setAttribute('stroke',this.getLineColor()),R.setAttribute('stroke-width',this.getLineWidth()+(this.isSelected()?2:0)),this.getLineDashArray()&&R.setAttribute('stroke-dasharray',this.getLineDashArray()),R.setAttribute('fill','none'),this.setColorTo(R,U===void 0?R.getAttribute('data-zvalue'):U,this.minZ,this.maxZ),this.hasStyleChanged(!1)}setShapeZoom(R){this._shapeZoom=R}}X.default=V,T.exports=X['default']})},function(u,A,S){var P,C,E;(function(T,X){C=[u,A,S(2),S(3),S(4)],P=X,E='function'==typeof P?P.apply(A,C):P,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y,I,B){'use strict';function F(G){return G&&G.__esModule?G:{default:G}}Object.defineProperty(X,'__esModule',{value:!0});var W=F(Y),V=function(G){if(G&&G.__esModule)return G;var Z={};if(null!=G)for(var K in G)Object.prototype.hasOwnProperty.call(G,K)&&(Z[K]=G[K]);return Z.default=G,Z}(I),R=F(B);class U extends R.default{constructor(){super()}init(G,Z){var K=this;if(this.graph=G,this.properties=Z||{},this.handles=[],this.options=this.options||{},this.group=document.createElementNS(this.graph.ns,'g'),this.group.setAttribute('clip-path','url(#_clipplot'+G._creation+')'),this._selected=!1,this.createDom(),this._dom&&(this._dom.jsGraphIsShape=this),this.group.jsGraphIsShape=this,this.classes=[],this.transforms=[],this._data.masker){var Q=document.createElementNS(this.graph.ns,'mask');this.maskingId=Math.random(),Q.setAttribute('id',this.maskingId),this.maskDomWrapper=document.createElementNS(this.graph.ns,'rect'),this.maskDomWrapper.setAttribute('fill','white'),Q.appendChild(this.maskDomWrapper);var J=this._dom.cloneNode();Q.appendChild(J),this.maskDom=J,this.graph.defs.appendChild(Q)}return this.group&&(this._dom&&!this.isHTML()&&this.group.appendChild(this._dom),this.group.addEventListener('mouseover',function($){K.handleMouseOver($)}),this.group.addEventListener('mouseout',function($){K.handleMouseOut($)}),this.group.addEventListener('mousedown',function($){K.graph.focus(),K.handleMouseDown($)}),this.group.addEventListener('click',function($){K.handleClick($)}),this.group.addEventListener('dblclick',function($){K.handleDblClick($)})),this.initImpl(),this.graph.emit('shapeNew',this),this}initImpl(){}getData(){return this._data}getType(){return this.type}kill(G){this._inDom&&this.graph.removeShapeFromDom(this),G||this.graph._removeShape(this),this.graph.stopElementMoving(this),this.graph.emit('shapeRemoved',this),this.emit('removed',this),this._inDom=!1}hide(){return this.hidden?this:(this.hidden=!0,this.isHTML()?this._dom.style.display='none':this.group.style.display='none',this)}isHidden(){return this.hidden}isVisible(){return!this.hidden}show(){return this.hidden?(this.hidden=!1,this.isHTML()?this._dom.style.display='initial':this.group.style.display='initial',this.redraw(),this):this}addClass(G){return this.classes=this.classes||[],-1==this.classes.indexOf(G)&&this.classes.push(G),this.makeClasses(),this}removeClass(G){return this.classes.splice(this.classes.indexOf(G),1),this.makeClasses(),this}makeClasses(){return this._dom&&this._dom.setAttribute('class',this.classes.join(' ')),this}changed(G,Z){return G&&(this.graph.emit(G,this,Z),this.emit(G,this,Z)),this.emit('changed',this,Z),this.graph.emit('shapeChanged',this,Z),this}setEventReceptacle(){this.rectEvent||(this.rectEvent=document.createElementNS(this.graph.ns,'rect'),this.rectEvent.setAttribute('pointer-events','fill'),this.rectEvent.setAttribute('fill','transparent'),this.group.appendChild(this.rectEvent),this.rectEvent.jsGraphIsShape=this);var G=this.group.getBBox();this.rectEvent.setAttribute('x',G.x),this.rectEvent.setAttribute('y',G.y-10),this.rectEvent.setAttribute('width',G.width),this.rectEvent.setAttribute('height',G.height+20)}setSerie(G){if(G){if(this.serie=G,!G.getXAxis||!G.getYAxis)throw console.error(G),'Serie does not implement the getXAxis or getYAxis method';return this.xAxis=G.getXAxis(),this.yAxis=G.getYAxis(),this}}getSerie(){return this.serie}autoAxes(){return this.xAxis||(this.xAxis=this.graph.getXAxis()),this.yAxis||(this.yAxis=this.graph.getYAxis()),this}setXAxis(G){return this.xAxis=G,this}setYAxis(G){this.yAxis=G}getXAxis(){return this.xAxis||this.autoAxes(),this.xAxis}getYAxis(){return this.yAxis||this.autoAxes(),this.yAxis}setLayer(G){return this.setProp('layer',G),this}getLayer(){var G=this.getProp('layer');return void 0===G?1:G}draw(G,Z){return(!this._inDom||G)&&(this.appendToDom(),this._inDom=!0),this.makeLabels(),Z||this.redraw(),this.applyStyle(),this}redraw(){return this.hidden?this:(this.position=this.applyPosition(),this.redrawImpl(),!this.position)?this:(this.updateLabels(),this._applyTransforms(),this)}redrawImpl(){}setProperties(G){this.properties=G,Array.isArray(this.properties.position)||(this.properties.position=[this.properties.position]);for(var Z=this,K=0,Q=this.properties.position.length,J;K<Q;K++)J=W.default.check(this.properties.position[K],function($){return Z.getRelativePosition($)}),this.properties.position[K]=J;return this.emit('propertiesChanged'),this}getRelativePosition(G){var Z;if(null!==(Z=/position([0-9]*)/.exec(G)))return this.getPosition(Z[1]);return null===(Z=/labelPosition([0-9]*)/.exec(G))?void 0:this.getLabelPosition(Z[1])}getProperties(){return this.properties}setProp(G,Z,K){return this.properties=this.properties||{},this.properties[G]=this.properties[G]||[],this.properties[G][K||0]=Z,this.emit('propertyChanged',G),this}getProp(G,Z){return(this.properties[G]||[])[Z||0]}getProps(G){return this.properties[G]||[]}addProp(G,Z){this.properties[G]=this.properties[G]||[],this.properties[G].push(Z)}resetProp(G){this.properties[G]=[]}setDom(G,Z,K){!this._dom||K&&V.hasSavedAttribute(this._dom,G)||this._dom.setAttribute(G,Z)}setDomGroup(G,Z){this.group&&this.group.setAttribute(G,Z)}setStrokeColor(G){return this.setProp('strokeColor',G),this.overwriteSavedProp('stroke',G),this.applySelectedStyle(),this}getStrokeColor(){return this.getProp('strokeColor')}setFillColor(G){return this.setProp('fillColor',G),this.overwriteSavedProp('fill',G),this.applySelectedStyle(),this}getFillColor(){return this.getProp('fillColor')}setFillOpacity(G){return this.setProp('fillOpacity',G),this.overwriteSavedProp('fill-opacity',G),this.applySelectedStyle(),this}setStrokeWidth(G){return this.setProp('strokeWidth',G),this.overwriteSavedProp('stroke-width',G),this.applySelectedStyle(),this}getStrokeWidth(){return this.getProp('strokeWidth')}setStrokeDasharray(G){return this.setProp('strokeDasharray',G),this.overwriteSavedProp('stroke-dasharray',G),this.applySelectedStyle(),this}setAttributes(G){return this.setProp('attributes',G),this}overwriteSavedProp(G,Z){V.overwriteDomAttribute(this._dom,G,Z)}addAttribute(G,Z){var K={};return K[G]=Z,this.addProp('attributes',K),this}addTransform(G,Z){return this.addProp('transforms',{type:G,arguments:Array.isArray(Z)?Z:[Z]}),this}resetTransforms(){return this.resetProp('transforms'),this}setLabelText(G,Z){return this.setProp('labelText',G,Z||0),this}setLabelData(G,Z){return this.setProp('labelData',text,Z||0),this}getLabelText(G,Z){return this.getProp('labelText',Z||0)}displayLabel(G){return this.setProp('labelVisible',!0,G||0),this}hideLabel(G){return this.setProp('labelVisible',!1,G||0),this}setLabelColor(G,Z){return this.setProp('labelColor',G,Z||0),this}setLabelFontSize(G,Z){return this.setProp('labelFontSize',G,Z||0),this}getLabelPosition(G){return this.getProp('labelPosition',G||0)}setLabelPosition(G,Z){var Q=W.default.check(G,function(J){return K.getRelativePosition(J)}),K;return this.setProp('labelPosition',Q,Z||0),this}setLabelAngle(G,Z){return this.setProp('labelAngle',G,Z||0),this}setLabelBaseline(G,Z){return this.setProp('labelBaseline',G,Z||0),this}setLabelAnchor(G,Z){return this.setProp('labelAnchor',G,Z||0),this}setLabelSize(G,Z){return this.setProp('labelSize',G,Z||0),this}setLabelStrokeColor(G,Z){return this.setProp('labelStrokeColor',G,Z||0),this}setLabelStrokeWidth(G,Z){return this.setProp('labelStrokeWidth',G,Z||0),this}setLabelBackgroundColor(G,Z){return this.setProp('labelBackgroundColor',G,Z||0),this}setLabelBackgroundOpacity(G,Z){return this.setProp('labelBackgroundOpacity',G,Z||0),this}applyGenericStyle(){this.setDom('fill',this.getProp('fillColor'),!0),this.setDom('fill-opacity',this.getProp('fillOpacity'),!0),this.setDom('stroke',this.getProp('strokeColor'),!0),this.setDom('stroke-width',this.getProp('strokeWidth'),!0),this.setDom('stroke-dasharray',this.getProp('strokeDasharray'),!0);for(var G=this.getProps('attributes'),Z=0,K=G.length;Z<K;Z++)for(var Q in G[Z])this.setDom(Q,'function'==typeof G[Z][Q]?G[Z][Q].call(this,Q):G[Z][Q],!0);return this._applyTransforms(),this}applyStyle(){return this.applyGenericStyle()}calculatePosition(G){var Z;return Z=G instanceof W.default?G:this.getPosition(G),Z?Z&&Z.compute?Z.compute(this.graph,this.getXAxis(),this.getYAxis(),this.getSerie()):void this.graph.throw():void 0}getPosition(G){var Z=this.getProp('position',G||0);return this.setProp('position',Z=W.default.check(Z),G),Z}setPosition(G,Z){var K=this,Q=W.default.check(G,function(J){return K.getRelativePosition(J)});return this.setProp('position',Q,Z||0)}sortPositions(G){return this.getProps('position').sort(G),this}_applyTransforms(){var G=this.getProp('transforms'),Z='';if(G&&(G=Array.isArray(G)?G:[G],0!=G.length)){for(var K=0;K<G.length;K++){switch(Z+=G[K].type+'(',G[K].type){case'translate':let J=G[K].arguments[0].compute(this.graph,this.getXAxis(),this.getYAxis(),this.getSerie());Z+=J.x,Z+=', ',Z+=J.y;break;case'rotate':if(Z+=G[K].arguments[0],Z+=', ',1==this.transforms[K].arguments.length){var Q=this.getPosition(0);Z+=Q.x+', '+Q.y}else Z+=W.default.getDeltaPx(G[K].arguments[1],this.getXAxis()).replace('px',''),Z+=', ',Z+=W.default.getDeltaPx(G[K].arguments[2],this.getYAxis()).replace('px','');}Z+=') '}return this.setDomGroup('transform',Z),this}}makeLabels(){this._labels=this._labels||[],this._labelsBackground=this._labelsBackground||[],this._labels.map(Z=>{this.group.removeChild(Z)}),this._labelsBackground.map(Z=>{this.group.removeChild(Z)}),this._labels=[],this._labelsBackground[G]=[];for(var G=0;void 0!==this.getProp('labelText',G);)this._labels[G]||(this._labels[G]=document.createElementNS(this.graph.ns,'text'),this._labels[G].setAttribute('data-label-i',G),this._labels[G].jsGraphIsShape=this,this._labelsBackground[G]=document.createElementNS(this.graph.ns,'rect'),this._labelsBackground[G].setAttribute('data-label-i',G),this._labelsBackground[G].jsGraphIsShape=this,this.group.appendChild(this._labelsBackground[G]),this.group.appendChild(this._labels[G]),this._labels[G].addEventListener('dblclick',Z=>{Z.stopPropagation(),this.labelDblClickListener(Z)}),this._labelsBackground[G].addEventListener('dblclick',Z=>{Z.stopPropagation(),this.labelDblClickListener(Z)})),G++;return this.updateLabels(),this}isLabelEditable(G){return this.getProp('labelEditable',G||0)}updateLabels(){this;this._labels=this._labels||[];for(var Z=0,K=this._labels.length;Z<K;Z++)this._applyLabelData(Z)}_applyLabelData(G){G=G||0;var Z=this.getProp('labelVisible',G);if(!1===Z)return this._labels[G].setAttribute('display','none'),void this._labelsBackground[G].setAttribute('display','none');this._labels[G].setAttribute('display','initial'),this._labelsBackground[G].setAttribute('display','initial');var K=this.calculatePosition(W.default.check(this.getProp('labelPosition',G)));if(!(isNaN(K.x)||isNaN(K.y)||!1===K.y||!1===K.x)){'NaNpx'==K.x||isNaN(K.x)||'NaN'===K.x||!1===K.x||(this._labels[G].setAttribute('x',K.x),this._labels[G].setAttribute('y',K.y));var Q=this.getProp('labelAngle',G)||0;if(0!=Q){var J=this._labels[G].getAttribute('x'),$=this._labels[G].getAttribute('y');this._labels[G].setAttribute('transform','rotate('+Q+' '+J+' '+$+')')}let ee=this.getProp('labelHTMLData',G)||{};for(var te in ee)this._labels[G].setAttribute(te,ee[te]),this._labelsBackground[G].setAttribute(te,ee[te]);this._labels[G].setAttribute('dominant-baseline',this.getProp('labelBaseline',G)||'no-change'),this._labels[G].textContent=this.getProp('labelText',G),this._labels[G].setAttribute('fill',this.getProp('labelColor',G)||'black'),this._labels[G].setAttribute('font-size',this.getProp('labelSize',G)+'px'||'12px'),this._labels[G].setAttribute('text-anchor',this._getLabelAnchor(G)),this._labels[G].setAttribute('stroke',this.getProp('labelStrokeColor',G)||'black'),this._labels[G].setAttribute('stroke-width',this.getProp('labelStrokeWidth',G)||'0px'),this._labels[G].setAttribute('stroke-location','outside');let ie=this._labels[G].getBBox();return this._labelsBackground[G].setAttribute('x',ie.x),this._labelsBackground[G].setAttribute('y',ie.y),this._labelsBackground[G].setAttribute('width',ie.width),this._labelsBackground[G].setAttribute('height',ie.height),this._labelsBackground[G].setAttribute('fill',this.getProp('labelBackgroundColor')||'transparent'),this._labelsBackground[G].setAttribute('fill-opacity',this.getProp('labelBackgroundOpacity')||1),this}}emptyLabels(){for(var G=0,Z=this._labels.length;G<Z;G++)this._labels[G].textContent='';return this}_getLabelAnchor(G){var Z=this.getProp('labelAnchor',G);switch(Z){case'middle':case'start':case'end':return Z;break;case'right':return'end';break;case'left':return'start';break;default:return'start';}}isSelected(){return this._selectStatus||!1}hasHandles(G){return void 0!==G&&this.setProp('handles',G),!!this.getProp('handles')||!!this.getProp('statichandles')}addHandles(){if(!this.isLocked()){if(!this.handlesInDom){this.handlesInDom=!0;for(var G=1;G<this.handles.length;G++)this.handles[G]&&this.group.appendChild(this.handles[G])}return this}}removeHandles(){this.hideHandles(),this.handles=[]}hideHandles(){if(!this.handlesInDom)return this;for(var G=1;G<this.handles.length;G++)this.group.removeChild(this.handles[G]);return this.handlesInDom=!1,this}areHandlesInDom(){return this.handlesInDom}_select(G){return!!this.isSelectable()&&void(this.appendToDom(),this._selectStatus=!0,this.applySelectedStyle(),this.hasHandles()&&!this.hasStaticHandles()&&(this.addHandles(),this.setHandles()),!G&&this.graph.emit('shapeSelected',this))}applySelectedStyle(){if(this._selectStatus){var G=this.getSelectStyle(),Z={};for(var K in G)Z[K]='function'==typeof G[K]?G[K].call(this):G[K];V.saveDomAttributes(this._dom,Z,'select')}}_unselect(G){this._selectStatus=!1,V.restoreDomAttributes(this._dom,'select'),this.hasHandles()&&!this.hasStaticHandles()&&this.hideHandles(),G||this.graph.emit('shapeUnselected',this)}getSelectStyle(){return this.selectStyle}setSelectStyle(G){return this.selectStyle=G,this.applySelectedStyle(),this}setStaticHandles(G){this.setProp('staticHandles',G)}hasStaticHandles(){return!!this.getProp('staticHandles')}_createHandles(G,Z,K,Q){if(!(this.handles&&0<this.handles.length)){for(var J=this,$=1;$<=G;$++)(te=>{var ie=this,re=document.createElementNS(ie.graph.ns,Z);if(re.jsGraphIsShape=!0,K)for(var ae in K)re.setAttribute(ae,K[ae]);re.addEventListener('mousedown',se=>{ie.isResizable()&&(se.preventDefault(),se.stopPropagation(),ie.graph.emit('beforeShapeResize',ie),this.emit('beforeShapeResize'),!ie.graph.prevent(!1)&&(ie.resizing=!0,ie.handleSelected=te,ie.handleMouseDown(se)))}),Q&&Q(ie.handles[te]),ie.handles[te]=re}).call(this,$);return this.handles}}createHandles(){}handleMouseDownImpl(){}handleMouseMoveImpl(){}handleMouseUpImpl(){}handleCreateImpl(){}handleMouseDown(G){if(!this.isLocked())return(this.isMovable()||this.isResizable())&&this.graph.elementMoving(this),this.getProp('selectOnMouseDown')&&this.graph.selectShape(this),this.isMovable()&&!this.resizing&&(this.graph.emit('beforeShapeMove',self),!this.graph.prevent(!1)&&(this.moving=!0)),this._mouseCoords=this.graph._getXY(G),this.handleMouseDownImpl(G,this._mouseCoords)}handleClick(G){return!!this.isSelectable()&&void(!G.shiftKey&&this.graph.unselectShapes(),this.getProp('selectOnClick')&&(console.log('sel'),this.graph.selectShape(this)))}handleMouseMove(G){if((this.resizing||this.moving)&&!this.isSelected()&&this.graph.selectShape(this),this.graph.emit('beforeShapeMouseMove',this),this.emit('beforeShapeMouseMove'),this.graph.prevent(!1)||!this._mouseCoords)return!1;var Z=this.graph._getXY(G),K=this.getXAxis().getRelVal(Z.x-this._mouseCoords.x),Q=this.getYAxis().getRelVal(Z.y-this._mouseCoords.y);(0!=K||0!==Q)&&(this.preventUnselect=!0),this._mouseCoords=Z;var J=this.handleMouseMoveImpl(G,K,Q,Z.x-this._mouseCoords.x,Z.y-this._mouseCoords.y);return J}handleMouseUp(G){return this.moving&&(this.graph.emit('shapeMoved',this),this.emit('shapeMoved')),(this.handleSelected||this.resize)&&(this.graph.emit('shapeResized',this),this.emit('shapeResized')),this.moving=!1,this.resizing=!1,this.handleSelected=!1,this.graph.elementMoving(!1),this.handleMouseUpImpl(G)}handleDblClick(){}handleMouseOver(){!this.getProp('highlightOnMouseOver')||this.moving||this.resizing||this.highlight(),this.graph.emit('shapeMouseOver',this)}handleMouseOut(){this.getProp('highlightOnMouseOver')&&this.unHighlight(),this.graph.emit('shapeMouseOut',this)}lock(){return this.setProp('locked',!0),this}unlock(){return this.setProp('locked',!1),this}isLocked(){return this.getProp('locked')||this.graph.shapesLocked}movable(){this.setProp('movable',!0)}unmovable(){return this.setProp('movable',!1),!1}isMovable(){return this.getProp('movable')}resizable(){this.setProp('resizable',!0)}unresizable(){this.setProp('resizable',!1)}isResizable(){return this.getProp('resizable')}selectable(){this.setProp('selectable',!0)}unselectable(){this.graph.unselectShape(this),this.setProp('selectable',!1)}isSelectable(){return this.getProp('selectable')}highlight(G,Z){return G||(G=this.getHighlightAttributes()),Z||(Z='highlight'),V.saveDomAttributes(this._dom,G,Z),this.highlightImpl(),this}unHighlight(G){return G||(G='highlight'),V.restoreDomAttributes(this._dom,G),this.unHighlightImpl(),this}highlightImpl(){}unHighlightImpl(){}getHighlightAttributes(){return this._highlightAttributes}setHighlightAttributes(G){return this._highlightAttributes=G,this}getMaskingID(){return this.maskingId}maskWith(G){const Z=G.getMaskingID();Z?this._dom.setAttribute('mask','url(#'+Z+')'):this._dom.removeAttribute('mask')}updateMask(){}labelDblClickListener(G){var Z=parseInt(G.target.getAttribute('data-label-i')),K=this;if(!isNaN(Z)&&this.isLabelEditable(Z)){G.preventDefault(),G.stopPropagation();var Q=document.createElement('input');Q.setAttribute('type','text'),Q.setAttribute('value',K.getProp('labelText',Z)),K.graph.wrapper.prepend(Q),Q.select(),V.setCSS(Q,{position:'absolute',marginTop:parseInt(G.target.getAttribute('y').replace('px',''))+this.graph.getPaddingTop()-10+'px',marginLeft:parseInt(G.target.getAttribute('x').replace('px',''))+this.graph.getPaddingLeft()-50+'px',textAlign:'center',width:'100px'});const J=K.getLabelText(Z),$=function(){K.setLabelText(Q.value,Z),K._labels[Z].textContent=Q.value;const ee=Q.value;Q.remove(),Q.removeEventListener('blur',$),Q=!1,K.changed('shapeLabelChanged',{previousValue:J,nextValue:ee})};Q.addEventListener('blur',$),Q.addEventListener('keyup',function(ee){13===ee.keyCode&&$()}),Q.addEventListener('keypress',function(ee){ee.stopPropagation()}),Q.addEventListener('keydown',function(ee){ee.stopPropagation()}),Q.focus()}}appendToDom(){return this._forcedParentDom?this._forcedParentDom.appendChild(this.group):this.graph.appendShapeToDom(this),this}forceParentDom(G){return this._forcedParentDom=G,this}isHTML(){return!1}}U.prototype.computePosition=U.prototype.calculatePosition,U.prototype.showLabel=U.prototype.displayLabel,U.prototype.remove=U.prototype.kill,X.default=U,T.exports=X['default']})},function(u,A,S){var P,C,E;(function(T,X){C=[u,A,S(27)],P=X,E='function'==typeof P?P.apply(A,C):P,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y){'use strict';Object.defineProperty(X,'__esModule',{value:!0});var B=function(F){return F&&F.__esModule?F:{default:F}}(Y);class O extends B.default{createDom(){this._dom=document.createElementNS(this.graph.ns,'path')}createHandles(){this._createHandles(2,'line',{'stroke-width':'3',stroke:'transparent','pointer-events':'stroke',cursor:'ew-resize'})}handleMouseMoveImpl(F,W){if(!this.isLocked()){if(this.moving)this.getPosition(0).deltaPosition('x',W,this.getXAxis()),this.getPosition(1).deltaPosition('x',W,this.getXAxis());else if(this.serie&&this.handleSelected){this.resizingPosition=1==this.handleSelected?this.getPosition(0):this.getPosition(1);var R=this.serie.searchClosestValue(this.getXAxis().getVal(this.graph._getXY(F).x-this.graph.getPaddingLeft()));if(!R)return;this.resizingPosition.x!=R.xMin&&(this.preventUnselect=!0),this.resizingPosition.x=R.xMin}else this.handleSelected&&(this.resizingPosition=1==this.handleSelected?this.getPosition(0):this.getPosition(1),this.resizingPosition.deltaPosition('x',W,this.getXAxis()));this.applyPosition()}}applyPosition(){if(this.serie){var F=this.computePosition(0),W=this.computePosition(1),V=Math.abs(F.x-W.x),R=Math.min(F.x,W.x);if(2>V||0>R+V||R>this.graph.getDrawingWidth())return this.setDom('d',''),!1;var U=this.serie.searchClosestValue(this.getPosition(0).x),G=this.serie.searchClosestValue(this.getPosition(1).x),se=0,oe=Number.MAX_VALUE,Z,K,Q,J,$,ee,R,te;if(!U||!G)return!1;for(U.xBeforeIndex>G.xBeforeIndex&&(Z=U,U=G,G=Z),this.counter=0,K=U.dataIndex;K<=G.dataIndex;K++){for(this.currentLine='',J=K==U.dataIndex?U.xBeforeIndexArr:0,$=K==G.dataIndex?G.xBeforeIndexArr:this.serie.data[K].length,ee=0,J==$&&$++,Q=J;Q<=$;Q+=2)R=this.serie.getX(this.serie.data[K][Q+0]),te=this.serie.getY(this.serie.data[K][Q+1]),se=Math.max(this.serie.data[K][Q+1],se),oe=Math.min(this.serie.data[K][Q+1],oe),Q==J&&(this.firstX=R,this.firstY=te),this.currentLine+=0<ee?' L '+R+' '+te+' ':' M '+R+' '+te+' ',ee++;if(this.lastX=R,this.lastY=te,!this.firstX||!this.firstY||!this.lastX||!this.lastY)return;this.currentLine+=' V '+this.getYAxis().getPx(0)+' H '+this.firstX+' z',this.setDom('d',this.currentLine)}return this.maxY=this.serie.getY(se),this.setHandles(),this.changed(),!0}}setHandles(){if(this.firstX){var F=this.computePosition(0),W=this.computePosition(1);F.x<W.x?(this.handles[1].setAttribute('x1',this.firstX),this.handles[1].setAttribute('x2',this.firstX),this.handles[2].setAttribute('x1',this.lastX),this.handles[2].setAttribute('x2',this.lastX)):(this.handles[1].setAttribute('x1',this.lastX),this.handles[1].setAttribute('x2',this.lastX),this.handles[2].setAttribute('x1',this.firstX),this.handles[2].setAttribute('x2',this.firstX)),this.handles[1].setAttribute('y1',this.getYAxis().getMaxPx()),this.handles[1].setAttribute('y2',this.serie.getY(0)),this.handles[2].setAttribute('y1',this.getYAxis().getMaxPx()),this.handles[2].setAttribute('y2',this.serie.getY(0))}}}X.default=O,T.exports=X['default']})},function(u,A,S){var P,C,E;(function(T,X){C=[u,A,S(30)],P=X,E='function'==typeof P?P.apply(A,C):P,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y){'use strict';Object.defineProperty(X,'__esModule',{value:!0});var B=function(F){return F&&F.__esModule?F:{default:F}}(Y);class O extends B.default{constructor(F){super(F)}createDom(){this._dom=document.createElementNS(this.graph.ns,'line'),this._dom.setAttribute('marker-end','url(#arrow'+this.graph._creation+')'),this.createHandles(this.nbHandles,'rect',{transform:'translate(-3 -3)',width:6,height:6,stroke:'black',fill:'white',cursor:'nwse-resize'}),this.setStrokeColor('black'),this.setStrokeWidth(1)}}X.default=O,T.exports=X['default']})},function(u,A,S){var P,C,E;(function(T,X){C=[u,A,S(27)],P=X,E='function'==typeof P?P.apply(A,C):P,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y){'use strict';Object.defineProperty(X,'__esModule',{value:!0});var B=function(F){return F&&F.__esModule?F:{default:F}}(Y);class O extends B.default{constructor(F,W){super(F,W)}createDom(){this._dom=document.createElementNS(this.graph.ns,'line'),this.setStrokeColor('black'),this.setStrokeWidth(1)}createHandles(){this._createHandles(2,'rect',{transform:'translate(-3 -3)',width:6,height:6,stroke:'black',fill:'white',cursor:'nwse-resize'})}applyPosition(){var F=this.calculatePosition(0),W=this.calculatePosition(1);if(F&&F.x&&F.y)return this.setDom('x2',F.x),this.setDom('y2',F.y),this.setDom('y1',W.y),this.setDom('x1',W.x),this.currentPos2x=W.x,this.currentPos2y=W.y,this.currentPos1x=F.x,this.currentPos1y=F.y,!0}handleMouseMoveImpl(F,W,V){if(!this.isLocked()){var G=this.getPosition(0),Z=this.getPosition(1),K;if(1==this.handleSelected?K=G:2==this.handleSelected&&(K=Z),K&&(!this._data.vertical&&K.deltaPosition('x',W,this.getXAxis()),!this._data.horizontal&&K.deltaPosition('y',V,this.getYAxis())),this.moving&&(G.x&&G.deltaPosition('x',W,this.getXAxis()),G.y&&G.deltaPosition('y',V,this.getYAxis()),Z.x&&Z.deltaPosition('x',W,this.getXAxis()),Z.y&&Z.deltaPosition('y',V,this.getYAxis())),this._data.forcedCoords){var Q=this._data.forcedCoords;void 0!==Q.y&&('function'==typeof Q.y?Z.y=G.y=Q.y(this):(Z.y=Q.y,G.y=Q.y)),void 0!==Q.x&&('function'==typeof Q.x?Z.x=G.x=Q.x(this):(Z.x=Q.x,G.x=Q.x))}return this.rectEvent&&this.setEventReceptacle(),this.redraw(),this.changed(),this.setHandles(),!0}}setHandles(){!this.areHandlesInDom()||isNaN(this.currentPos1x)||(this.handles[1].setAttribute('x',this.currentPos1x),this.handles[1].setAttribute('y',this.currentPos1y),this.handles[2].setAttribute('x',this.currentPos2x),this.handles[2].setAttribute('y',this.currentPos2y))}setEventReceptacle(){this.currentPos1x&&(!this.rectEvent&&(this.rectEvent=document.createElementNS(this.graph.ns,'line'),this.rectEvent.setAttribute('pointer-events','stroke'),this.rectEvent.setAttribute('stroke','transparent'),this.rectEvent.jsGraphIsShape=this,this.group.appendChild(this.rectEvent)),this.rectEvent.setAttribute('x1',this.currentPos1x),this.rectEvent.setAttribute('y1',this.currentPos1y),this.rectEvent.setAttribute('x2',this.currentPos2x),this.rectEvent.setAttribute('y2',this.currentPos2y),this.rectEvent.setAttribute('stroke-width',this.getProp('strokeWidth')+2))}}X.default=O,T.exports=X['default']})},function(u,A,S){var P,C,E;(function(T,X){C=[u,A,S(27)],P=X,E='function'==typeof P?P.apply(A,C):P,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y){'use strict';Object.defineProperty(X,'__esModule',{value:!0});var B=function(F){return F&&F.__esModule?F:{default:F}}(Y);class O extends B.default{constructor(F,W){super(F,W)}createDom(){return!1}applyPosition(){return!0}}X.default=O,T.exports=X['default']})},function(u,A,S){var P,C,E;(function(T,X){C=[u,A,S(27)],P=X,E='function'==typeof P?P.apply(A,C):P,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y){'use strict';Object.defineProperty(X,'__esModule',{value:!0});var B=function(F){return F&&F.__esModule?F:{default:F}}(Y);class O extends B.default{constructor(F,W){super(F,W)}createDom(){this._dom=document.createElementNS(this.graph.ns,'path'),this.getStrokeColor()||this.setStrokeColor('black'),this.getStrokeWidth()==void 0&&this.setStrokeWidth(1)}createHandles(){}setPointsPx(F){return this.setProp('pxPoints',F),this}applyPosition(){let W=this.computePosition(0),F;if(F=this.getProp('pxPoints'))F=' M '+W.x+' '+W.y+' '+F,this.setDom('d',F);else if(this.points){var V,R;this.serie?(V=this.serie.getXAxis(),R=this.serie.getYAxis()):this.xAxis&&this.yAxis&&(V=this.xAxis,R=this.yAxis),this.setDom('d','M '+this.points.map(function(U){return V.getPx(U[0])+', '+R.getPx(U[1])}).join(' L '))}return this.changed(),!0}}X.default=O,T.exports=X['default']})},function(u,A,S){var P,C,E;(function(T,X){C=[u,A,S(27),S(2)],P=X,E='function'==typeof P?P.apply(A,C):P,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y,I){'use strict';function B(V){return V&&V.__esModule?V:{default:V}}Object.defineProperty(X,'__esModule',{value:!0});var O=B(Y),F=B(I);class W extends O.default{constructor(V,R){super(V,R),this.nbHandles=2}createDom(){this._dom=document.createElementNS(this.graph.ns,'path'),this._dom.setAttribute('pointer-events','stroke')}initImpl(){this.setFillColor('transparent'),this.setStrokeColor('black')}createHandles(){this._createHandles(2,'rect',{transform:'translate(-3 -3)',width:6,height:6,stroke:'black',fill:'white'}),this.handles[1].setAttribute('fill','red')}xor(V,R){return V&&!R||!V&&R}applyPosition(){let Z=this.getAxis(),K=[],Q='',J=this.getProp('baseLine',0)||300,V,R,U,G,$;if(!this.serie)throw'No serie exists for this shape';let ee=this.getPosition(0),te=this.getPosition(1);if(ee.x<this.serie.getXAxis().getCurrentMin()&&te.x<this.serie.getXAxis().getCurrentMin()||ee.x>this.serie.getXAxis().getCurrentMax()&&te.x>this.serie.getXAxis().getCurrentMax())return this.setDom('d',''),this.emptyLabels(),!1;this.showLabel(0);let ie=0,ae=this.serie.getWaveform(),re;if(ae){let se=ae.getIndexFromX(ee[Z],!0,Math.floor),oe=ae.getIndexFromX(te[Z],!0,Math.ceil),le=!1,ne;se==oe&&('aggregate'==ae.getReductionType()?oe+=4:oe++),oe<se&&(ne=se,se=oe,oe=ne,le=!0);let fe=ae.getDataInUse(),Ae=!0,pe,de,ge,ue,he,ce,xe,me,ye,be;for('aggregate'==ae.getReductionType()&&(Ae=!1),(!ae.getXMonotoneousAscending()||0)&&(ae.getXMonotoneousAscending()||1)?(re=se,ye=!1,be=1):(re=oe,ye=!0,be=-1);ye?re>=se:re<=oe;re+=be){if(U=ae.getX(re,!0),G=ae.getY(re,!0),V=this.serie.getX(U),R=this.serie.getY(G),ie+=ae.getY(re,!0),pe||(pe=V,de=R,ge=ae.getX(re),ue=ae.getY(re)),void 0==he){he=V,xe=R,ce=ae.getX(re),me=ae.getY(re);continue}V!=he||R!=xe,he=V,xe=R,K.push([V,R,ie]),ce=U}ce=!1,me=!1,he=!1,xe=!1,0==ie&&(ie=1),this._sumVal=ae.integrate(ee.x,te.x),$=this.ratio?this.ratio*(this.sumVal/ie):200/ie;let Me;if(0!=K.length){for(var ke=0,Se=K.length;ke<Se;ke++){if(Me=J-K[ke][2]*$,0<ke&&(K[ke-1][2]>ie/2&&K[ke][2]<=ie/2||K[ke-1][2]<ie/2&&K[ke][2]>=ie/2)){let _e=J-(K[ke-1][2]+K[ke][2])/2*$;this.setPosition({x:K[ke][0]+'px',y:_e+'px'},3),this.setLabelPosition(this.getPosition(3),0)}Q+=' L '+K[ke][0]+', '+Me+' ',this.lastPointX=K[ke][0],this.lastPointY=Me}return this.points=K,this._sum=ie,Q=this.serie.isFlipped()?' M '+J+', '+pe+' '+Q:' M '+pe+', '+J+' '+Q,this.firstPointX=pe,this.firstPointY=J,this.setDom('d',Q),this.firstX=pe,this.firstY=de,this.ratioLabel&&this.updateIntegralValue(this.ratioLabel)||this.updateLabels(),this.changed(),this.handleCondition=!this.xor(-1==be,le),this.setHandles(),this.updateIntegralValue(),!0}}}updateIntegralValue(V=this.ratioLabel){V&&(this.ratioLabel=V),this.setLabelText(V?(Math.round(100*this.sumVal*V)/100).toPrecision(3):'N/A',0),this.updateLabels()}getAxis(){return this._data.axis||'x'}set ratio(V){this._ratio=V}get ratio(){return this._ratio}get sum(){return this._sum}get sumVal(){return this._sumVal}selectStyle(){this.setDom('stroke-width','2px')}selectHandles(){}setHandles(){void 0!=this.points&&this.isSelected()&&(this.addHandles(),this.handleCondition?(this.handles[1].setAttribute('x',this.firstPointX),this.handles[1].setAttribute('y',this.firstPointY),this.handles[2].setAttribute('x',this.lastPointX),this.handles[2].setAttribute('y',this.lastPointY)):(this.handles[2].setAttribute('x',this.firstPointX),this.handles[2].setAttribute('y',this.firstPointY),this.handles[1].setAttribute('x',this.lastPointX),this.handles[1].setAttribute('y',this.lastPointY)))}handleMouseMoveImpl(V,R){if(!this.isLocked()){var K=this.getPosition(0),Q=this.getPosition(1),J;return 1==this.handleSelected?J=K:2==this.handleSelected&&(J=Q),J&&!this._data.vertical&&J.deltaPosition('x',R,this.getXAxis()),this.moving&&(K.x&&K.deltaPosition('x',R,this.getXAxis()),Q.x&&Q.deltaPosition('x',R,this.getXAxis())),this.rectEvent&&this.setEventReceptacle(),this.redraw(),this.changed(),!0}}}X.default=W,T.exports=X['default']})},function(u,A,S){var P,C,E;(function(T,X){C=[u,A,S(35)],P=X,E='function'==typeof P?P.apply(A,C):P,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y){'use strict';Object.defineProperty(X,'__esModule',{value:!0});var B=function(F){return F&&F.__esModule?F:{default:F}}(Y);class O extends B.default{constructor(F,W){super(F,W),this.nbHandles=4}createDom(){this._dom=document.createElementNS(this.graph.ns,'rect'),this._dom.element=this,this.createHandles(this.nbHandles,'rect',{transform:'translate(-3 -3)',width:6,height:6,stroke:'black',fill:'white',cursor:'nwse-resize'})}redrawImpl(){this.setPosition(),this.setHandles(),this.setBindableToDom(this._dom)}}X.default=O,T.exports=X['default']})},function(u,A,S){var P,C,E;(function(T,X){C=[u,A,S(27),S(3)],P=X,E='function'==typeof P?P.apply(A,C):P,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y,I){'use strict';Object.defineProperty(X,'__esModule',{value:!0});var F=function(R){return R&&R.__esModule?R:{default:R}}(Y),W=function(R){if(R&&R.__esModule)return R;var U={};if(null!=R)for(var G in R)Object.prototype.hasOwnProperty.call(R,G)&&(U[G]=R[G]);return U.default=R,U}(I);class V extends F.default{constructor(R,U){super(R,U)}createDom(){this;return this._dom=document.createElementNS(this.graph.ns,'rect'),this.setStrokeColor('black'),this.setStrokeWidth(1),this.setFillColor('transparent'),this}createHandles(){if(this.hasHandles()){var R=this.getProp('handles');switch('object'!=typeof R&&(R={}),R.type||(R.type='corners'),R.type){case'sides':W.extend(R,{sides:{top:!0,bottom:!0,left:!0,right:!0}});var U=0;for(var G in R.sides)R.sides[G]&&U++;this._createHandles(U,'g').map(function(Z){var K=document.createElementNS(self.graph.ns,'rect');K.setAttribute('x','-3'),K.setAttribute('width','6'),K.setAttribute('y','-6'),K.setAttribute('height','12'),K.setAttribute('stroke','black'),K.setAttribute('fill','white'),K.setAttribute('cursor','pointer'),Z.appendChild(K)});var U=1;for(var G in R.sides)R.sides[G]&&(this.handles[G]=this['handle'+U],this.sides[U]=G,U++);break;case'corners':this._createHandles(4,'rect',{transform:'translate(-3 -3)',width:6,height:6,stroke:'black',fill:'white'}),this.handles&&(this.handles[2].setAttribute('cursor','nesw-resize'),this.handles[4].setAttribute('cursor','nesw-resize'),this.handles[1].setAttribute('cursor','nwse-resize'),this.handles[3].setAttribute('cursor','nwse-resize'));}return this}}applyPosition(){var R=this.computePosition(0),U=this.computePosition(1),G,Z,K,Q;return R.x<U.x?(G=R.x,K=U.x-R.x):(G=U.x,K=R.x-U.x),R.y<U.y?(Z=R.y,Q=U.y-R.y):(Z=U.y,Q=R.y-U.y),this.currentX=G,this.currentY=Z,this.currentW=K,this.currentH=Q,isNaN(G)||isNaN(Z)||!1===G||!1===Z?!1:(this.setDom('width',K),this.setDom('height',Q),this.setDom('x',G),this.setDom('y',Z),this.setHandles(),this.updateMask(),!0)}handleMouseMoveImpl(R,U,G){var Q=this.getProp('handles');if(this.moving||this.handleSelected){var J=this.getPosition(0),$=this.getPosition(1),ee=this.getXAxis().isFlipped(),te=this.getYAxis().isFlipped(),ie=J.x,re=J.y,ae=$.x,se=$.y;if(this.moving)J.deltaPosition('x',U,this.getXAxis()),J.deltaPosition('y',G,this.getYAxis()),$.deltaPosition('x',U,this.getXAxis()),$.deltaPosition('y',G,this.getYAxis());else switch(Q.type){case'sides':switch(this.sides[this.handleSelected]){case'left':J.deltaPosition('x',U,this.getXAxis());break;case'right':$.deltaPosition('x',U,this.getXAxis());break;case'top':J.deltaPosition('y',G,this.getYAxis());break;case'bottom':$.deltaPosition('y',G,this.getYAxis());}break;case'corners':default:1==this.handleSelected?(J.deltaPosition('x',U,this.getXAxis()),J.deltaPosition('y',G,this.getYAxis())):2==this.handleSelected?($.deltaPosition('x',U,this.getXAxis()),J.deltaPosition('y',G,this.getYAxis())):3==this.handleSelected?($.deltaPosition('y',G,this.getYAxis()),$.deltaPosition('x',U,this.getXAxis())):4==this.handleSelected&&(J.deltaPosition('x',U,this.getXAxis()),$.deltaPosition('y',G,this.getYAxis()));}return this.redraw(),this.changed(),this.setHandles(),!0}}setHandles(){if(!this.isLocked()&&(this.isSelectable()||this._staticHandles)&&this.handlesInDom){var R=this.computePosition(0),U=this.computePosition(1),G=this.getProp('handles');switch(G.type){case'sides':this.handles.left&&this.handles.left.setAttribute('transform','translate('+this.currentX+' '+(this.currentY+this.currentH/2)+')'),this.handles.right&&this.handles.right.setAttribute('transform','translate( '+(this.currentX+this.currentW)+' '+(this.currentY+this.currentH/2)+')'),this.handles.top&&this.handles.top.setAttribute('transform','translate( '+(this.currentX+this.currentW/2)+' '+this.currentY+')'),this.handles.bottom&&this.handles.bottom.setAttribute('transform','translate( '+(this.currentX+this.currentW/2)+' '+(this.currentY+this.currentH)+')');break;case'corners':default:this.handles[1].setAttribute('x',R.x),this.handles[1].setAttribute('y',R.y),this.handles[2].setAttribute('x',U.x),this.handles[2].setAttribute('y',R.y),this.handles[3].setAttribute('x',U.x),this.handles[3].setAttribute('y',U.y),this.handles[4].setAttribute('x',R.x),this.handles[4].setAttribute('y',U.y);}}}}X.default=V,T.exports=X['default']})},function(u,A,S){var P,C,E;(function(T,X){C=[u,A,S(27)],P=X,E='function'==typeof P?P.apply(A,C):P,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y){'use strict';Object.defineProperty(X,'__esModule',{value:!0});var B=function(F){return F&&F.__esModule?F:{default:F}}(Y);class O extends B.default{constructor(F,W){super(F,W),this.nbHandles=1}get width(){return this.options.width||10}set width(F=10){this.options.width=F}createDom(){this._dom=document.createElementNS(this.graph.ns,'path'),this._dom.setAttribute('d','M -'+this.width/2+' 0 h '+this.width+' m -'+this.width/2+' -'+this.width/2+' v '+this.width+'')}createHandles(){this._createHandles(this.nbHandles,'rect',{transform:'translate(-3 -3)',width:6,height:6,stroke:'black',fill:'white',cursor:'nwse-resize'})}applyPosition(){var F=this.calculatePosition(0);if(F&&F.x&&F.y)return this.setDom('transform','translate( '+F.x+', '+F.y+')'),this.currentPos1x=F.x,this.currentPos1y=F.y,!0}redrawImpl(){this.setHandles()}handleCreateImpl(){}handleMouseDownImpl(){return this.moving=!0,!0}handleMouseUpImpl(){return this.triggerChange(),!0}handleMouseMoveImpl(F,W,V){if(!this.isLocked()){var G=this.getFromData('pos');return this.moving&&(G.x=this.graph.deltaPosition(G.x,W,this.getXAxis()),G.y=this.graph.deltaPosition(G.y,V,this.getYAxis())),this.redrawImpl(),!0}}createHandles(){this._createHandles(1,'rect',{transform:'translate(-3 -3)',width:6,height:6,stroke:'black',fill:'white',cursor:'nwse-resize'})}setHandles(){!this.areHandlesInDom()||isNaN(this.currentPos1x)||(this.handles[1].setAttribute('x',this.currentPos1x),this.handles[1].setAttribute('y',this.currentPos1y))}selectStyle(){this.setDom('stroke','red'),this.setDom('stroke-width','2')}}X.default=O,T.exports=X['default']})},function(u,A,S){var P,C,E;(function(T,X){C=[u,A,S(30)],P=X,E='function'==typeof P?P.apply(A,C):P,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y){'use strict';Object.defineProperty(X,'__esModule',{value:!0});var B=function(F){return F&&F.__esModule?F:{default:F}}(Y);class O extends B.default{constructor(F){super(F),this.lineHeight=6}createDom(){this._dom=document.createElementNS(this.graph.ns,'line'),this.line1=document.createElementNS(this.graph.ns,'line'),this.line2=document.createElementNS(this.graph.ns,'line'),this.line3=document.createElementNS(this.graph.ns,'line'),this.rectBoundary=document.createElementNS(this.graph.ns,'path'),this.rectBoundary.setAttribute('fill','transparent'),this.rectBoundary.setAttribute('stroke','none'),this.rectBoundary.setAttribute('pointer-events','fill'),this.rectBoundary.jsGraphIsShape=!0,this.group.appendChild(this.rectBoundary),this.group.appendChild(this.line1),this.group.appendChild(this.line2),this.group.appendChild(this.line3),this._dom.element=this}createHandles(){this._createHandles(3,'rect',{transform:'translate(-3 -3)',width:6,height:6,stroke:'black',fill:'white',cursor:'nwse-resize'})}redrawImpl(){this.line1.setAttribute('stroke',this.getStrokeColor()),this.line2.setAttribute('stroke',this.getStrokeColor()),this.line3.setAttribute('stroke',this.getStrokeColor()),this.line1.setAttribute('stroke-width',this.getStrokeWidth()),this.line2.setAttribute('stroke-width',this.getStrokeWidth()),this.line3.setAttribute('stroke-width',this.getStrokeWidth()),this.setHandles(),this.redrawLines()}redrawLines(){var F=this.computePosition(0),W=this.computePosition(1),V=this.computePosition(2);if(F.x&&W.x&&V.x&&this.posYPx){var R=this.lineHeight;this.rectBoundary.setAttribute('d','M '+F.x+' '+(this.posYPx-R)+' v '+2*R+' H '+W.x+' v '+-2*R+'z'),this.line1.setAttribute('x1',F.x),this.line1.setAttribute('x2',F.x),this.line2.setAttribute('x1',W.x),this.line2.setAttribute('x2',W.x),this.line3.setAttribute('x1',V.x),this.line3.setAttribute('x2',V.x),this._dom.setAttribute('x1',F.x),this._dom.setAttribute('x2',W.x),this.redrawY(R)}return this}redrawY(){if(!this.posYPx)return this;var F=this.lineHeight;return this.line1.setAttribute('y1',this.posYPx-F),this.line1.setAttribute('y2',this.posYPx+F),this.line2.setAttribute('y1',this.posYPx-F),this.line2.setAttribute('y2',this.posYPx+F),this.line3.setAttribute('y1',this.posYPx-F),this.line3.setAttribute('y2',this.posYPx+F),this._dom.setAttribute('y1',this.posYPx),this._dom.setAttribute('y2',this.posYPx),this}setHandles(){if(this.posYPx){var F=this.computePosition(0),W=this.computePosition(1),V=this.computePosition(2);F.x&&W.x&&V.x&&(this.handles[1].setAttribute('x',F.x),this.handles[1].setAttribute('y',this.posYPx),this.handles[2].setAttribute('x',W.x),this.handles[2].setAttribute('y',this.posYPx),this.handles[3].setAttribute('x',V.x),this.handles[3].setAttribute('y',this.posYPx))}}setY(F){return this.posYPx=F,this}setLineHeight(F){this.lineHeihgt=F}handleMouseMoveImpl(F,W){if(!this.isLocked()){var R=this.getPosition(0),U=this.getPosition(1),G=this.getPosition(2);switch(this.handleSelected){case 1:R.deltaPosition('x',W,this.getXAxis()),(Math.abs(G.x-U.x)>Math.abs(U.x-R.x)||Math.abs(G.x-R.x)>Math.abs(U.x-R.x))&&(G.x=R.x+0.1*(U.x-R.x));break;case 2:U.deltaPosition('x',W,this.getXAxis()),(Math.abs(G.x-U.x)>Math.abs(U.x-R.x)||Math.abs(G.x-R.x)>Math.abs(U.x-R.x))&&(G.x=U.x+0.1*(R.x-U.x));break;case 3:if(G.deltaPosition('x',W,this.getXAxis()),Math.abs(G.x-U.x)>Math.abs(U.x-R.x)||Math.abs(G.x-R.x)>Math.abs(U.x-R.x))return;}this.setLabelPosition({y:this.getLabelPosition(0).y,x:G.x}),this.updateLabels(),this.redrawLines(),this.setHandles()}}applyPosition(){return this.redrawLines(),!0}}X.default=O,T.exports=X['default']})},function(u,A,S){var P,C,E;(function(T,X){C=[u,A,S(3),S(27)],P=X,E='function'==typeof P?P.apply(A,C):P,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y,I){'use strict';Object.defineProperty(X,'__esModule',{value:!0});var O=function(W){return W&&W.__esModule?W:{default:W}}(I);class F extends O.default{constructor(W,V){super(W,V)}createDom(){this._dom=document.createElement('div'),this._dom.setAttribute('style','position: absolute');let W=document.createElement('div');this._dom.appendChild(W),this.div=W}createHandles(){}setHeight(W){this.setProp('height',W)}setWidth(W){this.setProp('width',W)}setContent(W){this.setProp('content',W)}setRenderer(W){this._renderer=W}redraw(){this._renderer?this._renderer(this.div):this.div.innerHTML=this.getProp('content'),super.redraw(...arguments)}applyPosition(){var W=this.calculatePosition(0);if(W&&(0,Y.isNumeric)(W.x)&&(0,Y.isNumeric)(W.y))return this._dom.style.left=W.x+'px',this._dom.style.top=W.y+'px',this.currentPosX=W.x,this.currentPosY=W.y,!0}handleMouseMoveImpl(){return!0}setHandles(){this.areHandlesInDom()&&isNaN(this.currentPos1x)}isHTML(){return!0}}X.default=F,T.exports=X['default']})},function(u,A,S){var P,C,E;(function(T,X){C=[u,A,S(4)],P=X,E='function'==typeof P?P.apply(A,C):P,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y){'use strict';Object.defineProperty(X,'__esModule',{value:!0});var B=function(F){return F&&F.__esModule?F:{default:F}}(Y);class O extends B.default{static default(){return{}}constructor(F){super(...arguments),this.options=Object.assign({},O.default(),this.constructor.default(),F)}init(F){this.graph=F}onMouseDown(){}onMouseUp(){}onMouseMove(){}}X.default=O,T.exports=X['default']})},function(u,A,S){var P,C,E;(function(T,X){C=[u,A,S(39)],P=X,E='function'==typeof P?P.apply(A,C):P,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y){'use strict';Object.defineProperty(X,'__esModule',{value:!0});var B=function(F){return F&&F.__esModule?F:{default:F}}(Y);class O extends B.default{static default(){return{dragX:!0,dragY:!0,persistanceX:!1,persistanceY:!1}}init(F){this.graph=F,this.time=null,this.totaltime=2e3}onMouseDown(F,W,V){return this._draggingX=W,this._draggingY=V,this._lastDraggingX=this._draggingX,this._lastDraggingY=this._draggingY,this.stopAnimation=!0,this.moved=!1,!0}onMouseMove(F,W,V){var G=W-this._draggingX,Z=V-this._draggingY;this.options.dragX&&F._applyToAxes(function(K){K.setCurrentMin(K.getVal(K.getMinPx()-G)),K.setCurrentMax(K.getVal(K.getMaxPx()-G))},!1,!0,!1),this.options.dragY&&F._applyToAxes(function(K){K.setCurrentMin(K.getVal(K.getMinPx()-Z)),K.setCurrentMax(K.getVal(K.getMaxPx()-Z))},!1,!1,!0),this._lastDraggingX=this._draggingX,this._lastDraggingY=this._draggingY,this._draggingX=W,this._draggingY=V,this.moved=!0,this.time=Date.now(),this.emit('dragging'),F.draw(!0)}onMouseUp(F,W,V){var G=Date.now()-this.time;return W==this._lastDraggingX||V==this._lastDraggingY?void(this.moved&&this.emit('dragged')):(this.speedX=(W-this._lastDraggingX)/G,this.speedY=(V-this._lastDraggingY)/G,isNaN(this.speedX)||isNaN(this.speedY)?void this.emit('dragged'):void(F._applyToAxes(function(Z){Z._pluginDragMin=Z.getCurrentMin(),Z._pluginDragMax=Z.getCurrentMax()},!1,!0,!0),this.stopAnimation=!1,this.accelerationX=-this.speedX/this.totaltime,this.accelerationY=-this.speedY/this.totaltime,this.options.persistanceX||this.options.persistanceY?this._persistanceMove(F):this.emit('dragged')))}_persistanceMove(F){var W=this;return W.stopAnimation?void W.emit('dragged'):void window.requestAnimationFrame(function(){var V=Date.now()-W.time,R=(0.5*W.accelerationX*V+W.speedX)*V,U=(0.5*W.accelerationY*V+W.speedY)*V;W.options.persistanceX&&F._applyToAxes(function(G){G.setCurrentMin(-G.getRelVal(R)+G._pluginDragMin),G.setCurrentMax(-G.getRelVal(R)+G._pluginDragMax),G.cacheCurrentMin(),G.cacheCurrentMax(),G.cacheInterval()},!1,!0,!1),W.options.persistanceY&&F._applyToAxes(function(G){G.setCurrentMin(-G.getRelVal(U)+G._pluginDragMin),G.setCurrentMax(-G.getRelVal(U)+G._pluginDragMax),G.cacheCurrentMin(),G.cacheCurrentMax(),G.cacheInterval()},!1,!1,!0),F.draw(),V<W.totaltime?(W.emit('dragging'),W._persistanceMove(F)):W.emit('dragged')})}}X.default=O,T.exports=X['default']})},function(u,A,S){var P,C,E;(function(T,X){C=[u,A,S(39),S(3)],P=X,E='function'==typeof P?P.apply(A,C):P,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y,I){'use strict';Object.defineProperty(X,'__esModule',{value:!0});var F=function(R){return R&&R.__esModule?R:{default:R}}(Y),W=function(R){if(R&&R.__esModule)return R;var U={};if(null!=R)for(var G in R)Object.prototype.hasOwnProperty.call(R,G)&&(U[G]=R[G]);return U.default=R,U}(I);class V extends F.default{constructor(){super(...arguments)}static default(){return{}}init(R,U){super.init(R,U),this.shapeType=U.type}setShape(R){this.shapeInfo.shapeType=R}onMouseDown(R,U,G,Z){if(this.shapeType||this.options.url){var Q=this,J=this,$,ee;this.count=this.count||0,U-=R.getPaddingLeft(),G-=R.getPaddingTop(),$=R.getXAxis().getVal(U),ee=R.getYAxis().getVal(G);var te={position:[{x:$,y:ee},{x:$,y:ee}],onChange:function(ae){R.triggerEvent('onAnnotationChange',ae)},locked:!1,selectable:!0,resizable:!0,movable:!0};let ie=this.options.properties;if(W.extend(!0,te,this.options),this.emit('beforeNewShape',Z,te),!this.graph.prevent(!1)){var re=R.newShape(te.type,te,!1,ie);this.emit('createdShape',Z,re),re&&(Q.currentShape=re,Q.currentShapeEvent=Z),R.once('mouseUp',()=>{console.log(this.currentShape),this.currentShape||Q.emit('newShape',Z,re)})}}}onMouseMove(R,U,G,Z){if(this.currentShape){console.log('mv'),this.count++;var K=this.currentShape;this.currentShape=!1,R.selectedSerie&&!K.serie&&K.setSerie(R.selectedSerie),K.resizing=!0,K.options&&K.options.onCreate&&K.options.onCreate.call(K),K.draw(),R.selectShape(K),K.handleMouseDown(this.currentShapeEvent,!0),K.handleSelected=this.options.handleSelected||1,K.handleMouseMove(Z,!0)}}onMouseUp(){this.currentShape&&(this.currentShape.kill(),this.currentShape=!1)}}X.default=V,T.exports=X['default']})},function(u,A,S){var P,C,E;(function(T,X){C=[u,A,S(3),S(39)],P=X,E='function'==typeof P?P.apply(A,C):P,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y,I){'use strict';Object.defineProperty(X,'__esModule',{value:!0});var F=function(R){if(R&&R.__esModule)return R;var U={};if(null!=R)for(var G in R)Object.prototype.hasOwnProperty.call(R,G)&&(U[G]=R[G]);return U.default=R,U}(Y),W=function(R){return R&&R.__esModule?R:{default:R}}(I);class V extends W.default{constructor(){super(...arguments)}static default(){return{}}init(R){this._path=document.createElementNS(R.ns,'path'),F.setAttributeTo(this._path,{display:'none',fill:'rgba(0,0,0,0.1)',stroke:'rgba(0,0,0,1)','shape-rendering':'crispEdges',x:0,y:0,height:0,width:0,d:''}),this.graph=R,R.dom.appendChild(this._path)}setSerie(R){this.serie=R}onMouseDown(R,U,G){this.serie&&(this.path='M '+U+' '+G+' ',this.currentX=U,this.currentY=G,this.xs=[this.serie.getXAxis().getVal(U-R.getPaddingLeft())],this.ys=[this.serie.getYAxis().getVal(G-R.getPaddingTop())],this._path.setAttribute('d',''),this._path.setAttribute('display','block'))}onMouseMove(R,U,G){25<Math.pow(U-this.currentX,2)+Math.pow(G-this.currentY,2)&&(this.path+=' L '+U+' '+G+' ',this.currentX=U,this.currentY=G,this.xs.push(this.serie.getXAxis().getVal(U-R.getPaddingLeft())),this.ys.push(this.serie.getYAxis().getVal(G-R.getPaddingTop())),this._path.setAttribute('d',this.path+' z'),this.findPoints())}findPoints(){for(var R=this.serie.waveform,U=[],G=0,K=0,Q=R.getLength(),Z;K<Q;K+=1){G=0;for(var J=0,$=this.xs.length;J<$;J+=1)Z=J==$-1?0:J+1,(this.ys[J]<R.getY(K)&&this.ys[Z]>R.getY(K)||this.ys[J]>R.getY(K)&&this.ys[Z]<R.getY(K))&&R.getX(K)>(R.getY(K)-this.ys[J])/(this.ys[Z]-this.ys[J])*(this.xs[Z]-this.xs[J])+this.xs[J]&&G++;1==G%2?(U.push(K),this.serie.selectPoint(K,!0,'selected')):this.serie.unselectPoint(K)}this.selected=U,this.emit('selectionProcess',U)}onMouseUp(){this._path.setAttribute('display','none'),this.emit('selectionEnd',this.selected)}}X.default=V,T.exports=X['default']})},function(u,A,S){var P,C,E;(function(T,X){C=[u,A,S(3),S(39)],P=X,E='function'==typeof P?P.apply(A,C):P,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y,I){'use strict';Object.defineProperty(X,'__esModule',{value:!0});var F=function(R){if(R&&R.__esModule)return R;var U={};if(null!=R)for(var G in R)Object.prototype.hasOwnProperty.call(R,G)&&(U[G]=R[G]);return U.default=R,U}(Y),W=function(R){return R&&R.__esModule?R:{default:R}}(I);class V extends W.default{constructor(){super(...arguments)}static default(){return{axes:'all'}}init(R){this._zoomingGroup=document.createElementNS(R.ns,'g'),this._zoomingSquare=document.createElementNS(R.ns,'rect'),this._zoomingSquare.setAttribute('display','none'),F.setAttributeTo(this._zoomingSquare,{display:'none',fill:'rgba(171,12,12,0.2)',stroke:'rgba(171,12,12,1)','shape-rendering':'crispEdges',x:0,y:0,height:0,width:0,'pointer-events':'none'}),this.graph=R,R.groupEvent.appendChild(this._zoomingGroup),this._zoomingGroup.appendChild(this._zoomingSquare)}onMouseDown(R,U,G,Z,K){var Q=this.options.zoomMode;if(Q){switch(this._zoomingMode=Q,void 0===U&&(this._backedUpZoomMode=this._zoomingMode,this._zoomingMode='y',U=0),void 0===G&&(this._backedUpZoomMode=this._zoomingMode,this._zoomingMode='x',G=0),this._zoomingXStart=U,this._zoomingYStart=G,this.x1=U-R.getPaddingLeft(),this.y1=G-R.getPaddingTop(),this._zoomingSquare.setAttribute('width',0),this._zoomingSquare.setAttribute('height',0),this._zoomingSquare.setAttribute('display','block'),this._zoomingMode){case'x':this._zoomingSquare.setAttribute('y',R.options.paddingTop),this._zoomingSquare.setAttribute('height',R.getDrawingHeight()-R.shift.bottom);break;case'y':this._zoomingSquare.setAttribute('x',R.options.paddingLeft),this._zoomingSquare.setAttribute('width',R.getDrawingWidth());break;case'forceY2':this.y2=R.getYAxis().getPx(this.options.forcedY)+R.options.paddingTop;}this.options.onZoomStart&&!K&&this.options.onZoomStart(R,U,G,Z,K)}}onMouseMove(R,U,G,Z,K){switch(this._zoomingMode){case'xy':this._zoomingSquare.setAttribute('x',Math.min(this._zoomingXStart,U)),this._zoomingSquare.setAttribute('y',Math.min(this._zoomingYStart,G)),this._zoomingSquare.setAttribute('width',Math.abs(this._zoomingXStart-U)),this._zoomingSquare.setAttribute('height',Math.abs(this._zoomingYStart-G));break;case'forceY2':this._zoomingSquare.setAttribute('y',Math.min(this._zoomingYStart,this.y2)),this._zoomingSquare.setAttribute('height',Math.abs(this._zoomingYStart-this.y2)),this._zoomingSquare.setAttribute('x',Math.min(this._zoomingXStart,U)),this._zoomingSquare.setAttribute('width',Math.abs(this._zoomingXStart-U));break;case'x':this._zoomingSquare.setAttribute('x',Math.min(this._zoomingXStart,U)),this._zoomingSquare.setAttribute('width',Math.abs(this._zoomingXStart-U));break;case'y':this._zoomingSquare.setAttribute('y',Math.min(this._zoomingYStart,G)),this._zoomingSquare.setAttribute('height',Math.abs(this._zoomingYStart-G));}this.options.onZoomMove&&!K&&this.options.onZoomMove(R,U,G,Z,K)}onMouseUp(R,U,G,Z,K){console.log('inplugin');var Q=this;this.removeZone();var J=U-R.options.paddingLeft,$=G-R.options.paddingTop;if((this.emit('beforeZoom',{graph:R,x:U,y:G,e:Z,mute:K}),!R.prevent(!1))&&(0!=U-this._zoomingXStart||'y'==this._zoomingMode)&&(0!=G-this._zoomingYStart||'x'==this._zoomingMode))if(this.options.transition||this.options.smooth){let ee=!1,te=!1;('x'==this._zoomingMode||'xy'==this._zoomingMode||'forceY2'==this._zoomingMode)&&(this.fullX=!1,this.toAxes(function(ie){ie._pluginZoomMin=ie.getCurrentMin(),ie._pluginZoomMax=ie.getCurrentMax(),ie._pluginZoomMinFinal=Math.min(ie.getVal(J),ie.getVal(Q.x1)),ie._pluginZoomMaxFinal=Math.max(ie.getVal(J),ie.getVal(Q.x1))},!1,!0,!1),ee=!0),('y'==this._zoomingMode||'xy'==this._zoomingMode)&&(this.fullY=!1,this.toAxes(function(ie){ie._pluginZoomMin=ie.getCurrentMin(),ie._pluginZoomMax=ie.getCurrentMax(),ie._pluginZoomMinFinal=Math.min(ie.getVal($),ie.getVal(Q.y1)),ie._pluginZoomMaxFinal=Math.max(ie.getVal($),ie.getVal(Q.y1))},!1,!1,!0),te=!0),'forceY2'==this._zoomingMode&&(this.fullY=!1,this.toAxes(function(ie){ie._pluginZoomMin=ie.getCurrentMin(),ie._pluginZoomMax=ie.getCurrentMax(),ie._pluginZoomMinFinal=Math.min(ie.getVal(Q.y2),ie.getVal(Q.y1)),ie._pluginZoomMaxFinal=Math.max(ie.getVal(Q.y2),ie.getVal(Q.y1))},!1,!1,!0),te=!0),this.transition(ee,te,'zoomEnd')}else{switch(this._zoomingMode){case'x':this.fullX=!1,this.toAxes('_doZoom',[J,this.x1],!0,!1);break;case'y':this.fullY=!1,this.toAxes('_doZoom',[$,this.y1],!1,!0);break;case'xy':this.fullX=!1,this.fullY=!1,this.toAxes('_doZoom',[J,this.x1],!0,!1),this.toAxes('_doZoom',[$,this.y1],!1,!0);break;case'forceY2':this.fullX=!1,this.fullY=!1,this.toAxes('_doZoom',[J,this.x1],!0,!1),this.toAxes('_doZoom',[this.y1,this.y2],!1,!0);}R.draw(),this._backedUpZoomMode&&(this._zoomingMode=this._backedUpZoomMode),this.emit('zoomed'),R.pluginYieldActiveState()}}removeZone(){this._zoomingSquare.setAttribute('display','none')}onMouseWheel(R,U,G){G||(G={}),G.baseline||(G.baseline=0);var Z='x'==G.direction,K='y'===G.direction;this.toAxes('handleMouseWheel',[R,U,G.baseline],Z,K),this.graph.drawSeries()}onDblClick(R,U,G,Z,K){var Q=this.graph;if(this.emit('beforeDblClick',{graph:Q,x:R,y:U,pref:Z,e:G,mute:K}),!Q.prevent(!1)){if(this.options.transition||this.options.smooth){var J=!1,$=!1;if(('xtotal'==Z.mode||'total'==Z.mode)&&(this.toAxes(function(ge){ge._pluginZoomMin=ge.getCurrentMin(),ge._pluginZoomMax=ge.getCurrentMax(),ge._pluginZoomMinFinal=ge.getMinValue()-ge.options.axisDataSpacing.min*ge.getInterval(),ge._pluginZoomMaxFinal=ge.getMaxValue()+ge.options.axisDataSpacing.max*ge.getInterval()},!1,!0,!1),J=!0),('ytotal'==Z.mode||'total'==Z.mode)&&(this.toAxes(function(ge){ge._pluginZoomMin=ge.getCurrentMin(),ge._pluginZoomMax=ge.getCurrentMax(),ge._pluginZoomMinFinal=ge.getMinValue()-ge.options.axisDataSpacing.min*ge.getInterval(),ge._pluginZoomMaxFinal=ge.getMaxValue()+ge.options.axisDataSpacing.max*ge.getInterval()},!1,!1,!0),$=!0),'gradualX'==Z.mode||'gradualY'==Z.mode||'gradual'==Z.mode||'gradualXY'==Z.mode){var R=!1,U=!1;('gradualX'==Z.mode||'gradual'==Z.mode||'gradualXY'==Z.mode)&&(R=!0,J=!0),('gradualY'==Z.mode||'gradual'==Z.mode||'gradualXY'==Z.mode)&&(U=!0,$=!0),this.toAxes(function(ge){ge._pluginZoomMin=ge.getCurrentMin(),ge._pluginZoomMax=ge.getCurrentMax(),ge._pluginZoomMinFinal=ge.getCurrentMin()-(ge.getCurrentMax()-ge.getCurrentMin()),ge._pluginZoomMaxFinal=ge.getCurrentMax()+(ge.getCurrentMax()-ge.getCurrentMin())},!1,R,U)}return void this.transition(J,$,'dblClick')}var ee=this.graph.getXAxis(),te=this.graph.getYAxis();if('xtotal'==Z.mode)this.toAxes('setMinMaxToFitSeries',null,!0,!1),this.fullX=!0,this.fullY=!1;else if('ytotal'==Z.mode)this.toAxes('setMinMaxToFitSeries',null,!1,!0),this.fullX=!1,this.fullY=!0;else if('total'==Z.mode)this.toAxes('setMinMaxToFitSeries',null,!0,!0),this.fullX=!0,this.fullY=!0;else{R-=this.graph.options.paddingLeft,U-=this.graph.options.paddingTop;var ie=ee.getCurrentMin(),re=ee.getCurrentMax(),ae=ee.getVal(R),se=re-ie,oe=te.getCurrentMin(),ne=te.getCurrentMax(),le=te.getVal(U),pe=ne-oe;if('gradualXY'==Z.mode||'gradualX'==Z.mode){var de=(ae-ie)/(re-ie);ie=Math.max(ee.getMinValue(),ie-se*de),re=Math.min(ee.getMaxValue(),re+se*(1-de)),ee.setCurrentMin(ie),ee.setCurrentMax(re),ee.options.onZoom&&ee.options.onZoom(ie,re),ee.cacheCurrentMin(),ee.cacheCurrentMax(),ee.cacheInterval()}if('gradualXY'==Z.mode||'gradualY'==Z.mode){var de=(le-oe)/(ne-oe);oe=Math.max(te.getMinValue(),oe-pe*de),ne=Math.min(te.getMaxValue(),ne+pe*(1-de)),te.setCurrentMin(oe),te.setCurrentMax(ne),te.options.onZoom&&te.options.onZoom(oe,ne),te.cacheCurrentMin(),te.cacheCurrentMax(),te.cacheInterval()}}Q.pluginYieldActiveState(),this.graph.draw()}}transition(R,U,G){var Z=this,K=500;Z.gradualUnzoomStart||(Z.gradualUnzoomStart=Date.now()),window.requestAnimationFrame(function(){var Q=Date.now()-Z.gradualUnzoomStart;Q>K&&(Q=K);var J=Math.sin(Q/K*Math.PI/2);Z.toAxes(function($){$.setCurrentMin($._pluginZoomMin+($._pluginZoomMinFinal-$._pluginZoomMin)*J),$.setCurrentMax($._pluginZoomMax+($._pluginZoomMaxFinal-$._pluginZoomMax)*J),$.cacheCurrentMin(),$.cacheCurrentMax(),$.cacheInterval()},!1,R,U),Z.graph.draw(),Q<K?(Z.transition(R,U,G),Z.emit('zooming')):(Z.emit('zoomed'),Z.graph.pluginYieldActiveState(),G&&Z.emit(G),Z.gradualUnzoomStart=0)})}isFullX(){return this.fullX}isFullY(){return this.fullY}toAxes(R,U,G,Z){var K=this.options.axes;switch(K&&('serieSelected'!=K||this.graph.getSelectedSerie())||(K='all'),K){case'all':this.graph._applyToAxes.apply(this.graph,arguments);break;case'serieSelected':var Q=this.graph.getSelectedSerie();Q&&(G&&('string'==typeof R?Q.getXAxis()[R].apply(Q.getXAxis(),U):R.apply(Q.getXAxis(),U)),Z&&('string'==typeof R?Q.getYAxis()[R].apply(Q.getYAxis(),U):R.apply(Q.getYAxis(),U)));break;default:Array.isArray(K)||(K=[K]);for(let J of K)J.isX()&&G?'string'==typeof R?J[R].apply(J,U):R.apply(J,U):J.isY()&&Z&&('string'==typeof R?J[R].apply(J,U):R.apply(J,U));}}}X.default=V,T.exports=X['default']})},function(u,A,S){var P,C,E;(function(T,X){C=[u,A,S(1),S(45),S(39),S(3)],P=X,E='function'==typeof P?P.apply(A,C):P,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y,I,B,O){'use strict';function W(K){return K&&K.__esModule?K:{default:K}}Object.defineProperty(X,'__esModule',{value:!0});var V=W(Y),R=W(I),U=W(B),G=function(K){if(K&&K.__esModule)return K;var Q={};if(null!=K)for(var J in K)Object.prototype.hasOwnProperty.call(K,J)&&(Q[J]=K[J]);return Q.default=K,Q}(O);class Z extends U.default{constructor(){super(...arguments),this.series=[],this.plugins=[],this.currentSlots={},this.requestLevels=new Map,this.update=(K,Q)=>{this.series.forEach(function(J){this.updateSerie(J,K)}),K||this.recalculateSeries(Q)}}static default(){return{LRUName:'PluginTimeSerieManager',intervals:[1000,15000,60000,900000,3600000,8640000],maxParallelRequests:3,optimalPxPerPoint:2,nbPoints:1e3,url:''}}init(K){this.graph=K,R.default.create(this.options.LRUName,200),this.requestsRunning=0}setURL(K){return this.options.url=K,this}setAvailableIntervals(){this.options.intervals=arguments}newSerie(K,Q,J,$,ee){var te=this.graph.newSerie(K,Q,J);return this.currentSlots[K]={min:0,max:0,interval:0},te.on('hide',function(){te._zoneSerie&&te._zoneSerie.hide()}),te.on('show',function(){te._zoneSerie&&te._zoneSerie.show()}),te.setInfo('timeSerieManagerDBElements',$),ee||(te._zoneSerie=this.graph.newSerie(K+'_zone',{},V.default.SERIE_ZONE)),this.series.push(te),te}registerPlugin(K){var J;if(-1<(J=this.plugins.indexOf(K)))for(var $=1;$<arguments.length;$++)K.removeListener(arguments[$],this.update);for(var $=1;$<arguments.length;$++)K.on(arguments[$],this.update)}updateSerie(K,Q){var J=this,$=K.getXAxis().getCurrentMin(),ee=K.getXAxis().getCurrentMax(),ie=this.getOptimalInterval(ee-$),re=this.options.intervals.indexOf(ie),ae;this.cleanRegister(re);for(var se=re;se<=re+1;se++){ae=this.options.intervals[se];var oe=J.computeSlotID($,ae),ne=J.computeSlotID(ee,ae);[[2,5,6],[1,2,4],[0,1,3]].forEach(function(pe){for(var de=oe-pe[0]*(ne-oe),ge=ne+pe[0]*(ne-oe),ue=de;ue<=ge&&!(J.computeTimeMin(ue,ae)>Date.now());)J.register(K,ue,ae,ae==ie?pe[1]:pe[2],!0,Q),ue++})}this.processRequests()}cleanRegister(K){this.requestLevels&&this.requestLevels.forEach(Q=>{Q.forEach((J,$)=>{J[4]<K&&Q.splice($,1)})})}register(K,Q,J,$,ee,te){var ie=this.computeUniqueID(K,Q,J),re=R.default.get(this.options.LRUName,ie);(!re||this.computeTimeMax(Q,J)>Date.now()&&re.timeout<Date.now()-(te?5e3:1e5)&&1==$)&&this.request(K,Q,J,$,ie,ee)}request(K,Q,J,$,ee,te){for(var ie in this.requestLevels)ie!=$&&this.requestLevels[ie][ee]&&(1===this.requestLevels[ie][ee][0]?this.requestLevels[ie][ee][5]=$:delete this.requestLevels[ie][ee]);this.requestLevels[$]&&this.requestLevels[$][ee]||(this.requestLevels[$]=this.requestLevels[$]||{},this.requestLevels[$][ee]=[0,ee,K.getName(),Q,J,$,K.getInfo('timeSerieManagerDBElements')],!te&&this.processRequests())}processRequests(){if(!(this.requestsRunning>=this.options.maxParallelRequests)){for(var K=this,Q=1,J;;){for(var $ in this.requestLevels[Q])if(1!=this.requestLevels[Q][$][0]){J=this.requestLevels[Q][$];break}if(J)break;if(Q++,10<Q)return}this.requestsRunning++,J&&(J[0]=1,G.ajaxGet({url:this.getURL(J),method:'GET',json:!0}).done(function(ee){1==ee.status&&(K.requestsRunning--,delete K.requestLevels[Q][$],R.default.store(K.options.LRUName,J[1],ee.data),K.processRequests(),1==J[5]&&0==Object.keys(K.requestLevels[1]).length&&K.recalculateSeries(!0))}))}}computeTimeMax(K,Q){return(K+1)*(Q*this.options.nbPoints)}computeTimeMin(K,Q){return K*(Q*this.options.nbPoints)}getURL(K){var Q=this.options.url.replace('<measurementid>',K[2]).replace('<from>',this.computeTimeMin(K[3],K[4])).replace('<to>',this.computeTimeMax(K[3],K[4])).replace('<interval>',K[4]),J=K[6]||{};for(var $ in J)Q=Q.replace('<'+$+'>',J[$]);return Q}getOptimalInterval(K){var Q=(this.options.optimalPxPerPoint||1)*K/this.graph.getDrawingWidth(),J=1/0,$;return this.options.intervals.forEach(function(ee){var te=Math.min(J,Math.abs(ee-Q));J!==te&&($=ee,J=te)}),$||1e3}computeUniqueID(K,Q,J){var $='',ee=K.getInfo('timeSerieManagerDBElements');for(var te in ee)$+=';'+te+':'+ee[te];return K.getName()+';'+Q+';'+J+$}computeSlotID(K,Q){return Math.floor(K/(Q*this.options.nbPoints))}computeSlotTime(K,Q){return K*(Q*this.options.nbPoints)}getZoneSerie(K){return K._zoneSerie}updateZoneSerie(K){var Q=this.graph.getSerie(K);Q&&Q._zoneSerie&&(Q._zoneSerie.setXAxis(Q.getXAxis()),Q._zoneSerie.setYAxis(Q.getYAxis()),Q._zoneSerie.setFillColor(Q.getLineColor()),Q._zoneSerie.setLineColor(Q.getLineColor()),Q._zoneSerie.setFillOpacity(0.2),Q._zoneSerie.setLineOpacity(0.3))}recalculateSeries(K){var Q=this;this.locked||(this.changed=!1,this.series.map(function(J){Q.recalculateSerie(J,K)}),this.changed=!1,Q.graph.draw())}recalculateSerie(K,Q){var J=K.getXAxis().getCurrentMin(),$=K.getXAxis().getCurrentMax(),ee=this.getOptimalInterval($-J),te=this.computeSlotID(J,ee),ie=this.computeSlotID($,ee),re=[],ae=[];if(!(!Q&&ee==this.currentSlots[K.getName()].interval&&this.currentSlots[K.getName()].min<=te&&this.currentSlots[K.getName()].max>=ie)){te-=2,ie+=2,this.currentSlots[K.getName()].min=te,this.currentSlots[K.getName()].max=ie,this.currentSlots[K.getName()].interval=ee;for(var se=te;se<=ie;){const oe=R.default.get(this.options.LRUName,this.computeUniqueID(K,se,ee));oe?(re=re.concat(oe.data.mean),ae=ae.concat(oe.data.minmax)):this.recalculateSerieUpwards(K,se,ee,re,ae),se++}this.changed=!0,K.setData(re),K._zoneSerie&&K._zoneSerie.setData(ae)}}setIntervalCheck(K){this.interval&&clearInterval(this.interval),this.update(!0,!0),this.interval=setInterval(()=>{this.update(!0,!1)},K)}recalculateSerieUpwards(K,Q,J,$,ee){var te=this.options.intervals.slice(0);te.sort();var ie=te[te.indexOf(J)+1]||-1;if(0>ie)return[];var re=this.computeSlotTime(Q,J),ae=this.computeSlotTime(Q+1,J),se=this.computeSlotID(re,ie),oe=!1;const ne=R.default.get(this.options.LRUName,this.computeUniqueID(K,se,ie));if(ne)for(var le=0,pe=ne.data.mean.length;le<pe;le+=2){if(ne.data.mean[le]<re)continue;else!1==oe&&(oe=le);if(ne.data.mean[le]>=ae)return $=$.concat(ne.data.mean.slice(oe,le)),void(ee=$.concat(ne.data.minmax.slice(oe,le)))}return this.recalculateSerieUpwards(K,se,ie,$,ee)}lockRedraw(){this.locked=!0}unlockRedraw(){this.locked=!1}isRedrawLocked(){return!!this.locked}}X.default=Z,T.exports=X['default']})},function(u,A){var P,C,E;(function(T,X){C=[A],P=X,E='function'==typeof P?P.apply(A,C):P,!(void 0!==E&&(u.exports=E))})(this,function(T){'use strict';function X(K,Q){Q=Q||50,R[K]||(R[K]={},G[K]=0),Z[K]=Q}function Y(K,Q){var J,$;if(R[K]&&R[K][Q])return $=U[K],J=R[K][Q],J.prev=$,J.next=$.next,$.next.prev=J,$.next=J,U[K]=J,J.data}function I(K,Q,J){var $,ee,te;if(R[K]&&void 0!==G[K]&&Z[K])return te=U[K],R[K][Q]?(Y(K,Q),R[K][Q].data.data=J,R[K][Q].data.timeout=Date.now()):($={data:{data:J,timeout:Date.now()}},'undefined'==typeof te?($.prev=$,$.next=$):($.prev=te.prev,$.next=te.next,te.next.prev=$,te.next=$),U[K]=$,R[K][Q]=$,G[K]++),G[K]>Z[K]&&te&&(ee=te.next,te.next.next.prev=te,te.next=te.next.next,ee.next.next=void 0,ee.next.prev=void 0,G[K]--),J}function O(K,Q){var J;if((J=Y(K,Q))!=void 0)return J}Object.defineProperty(T,'__esModule',{value:!0}),T.create=function(K,Q){X(K,Q)},T.get=O,T.store=function(K,Q,J){return I(K,Q,J),J},T.empty=function(K){emptyMemory(K)},T.exist=function(K){return R[K]};var R={},U={},G={},Z={};T.default=O})},function(u,A,S){var P,C,E;(function(T,X){C=[u,A,S(39)],P=X,E='function'==typeof P?P.apply(A,C):P,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y){'use strict';Object.defineProperty(X,'__esModule',{value:!0});var B=function(F){return F&&F.__esModule?F:{default:F}}(Y);class O extends B.default{constructor(){super(...arguments)}static default(){return{positiveStyle:{fillColor:'green',fillOpacity:0.2,strokeWidth:0},negativeStyle:{fillColor:'red',fillOpacity:0.2,strokeWidth:0},from:0,to:0}}init(F){this.graph=F,this.pathsPositive=[],this.pathsNegative=[],this.positivePolyline=this.graph.newShape('polyline').draw(),this.positivePolyline.setFillColor(this.options.positiveStyle.fillColor).setFillOpacity(this.options.positiveStyle.fillOpacity).setStrokeWidth(this.options.positiveStyle.strokeWidth).applyStyle(),this.negativePolyline=this.graph.newShape('polyline').draw(),this.negativePolyline.setFillColor(this.options.negativeStyle.fillColor).setFillOpacity(this.options.negativeStyle.fillOpacity).setStrokeWidth(this.options.negativeStyle.strokeWidth).applyStyle()}setSeries(F,W){this.serie1=F,this.serie2=W}setBoundaries(F,W){this.options.from=F,this.options.to=W}getFrom(){return this.options.from}getTo(){return this.options.to}draw(){function F(){!0===ae?V.pathsPositive.push([ee,te]):!1==ae&&V.pathsNegative.push([ee,te]),ee=[],te=[],ae=void 0}function W(ne,le){for(var pe=0;pe<le[0].length;pe+=2)0==pe&&(ne+='M '),ne+=' '+Math.round(V.serie1.getXAxis().getPx(le[0][pe]))+', '+Math.round(V.serie1.getYAxis().getPx(le[0][pe+1])),pe<le[0].length-2&&(ne+=' L ');for(var pe=le[1].length-2;0<=pe;pe-=2)ne+=' L '+Math.round(V.serie2.getXAxis().getPx(le[1][pe]))+', '+Math.round(V.serie2.getYAxis().getPx(le[1][pe+1])),0==pe&&(ne+=' z ');return ne}var V=this,R=this.serie1.searchClosestValue(this.getFrom()),U,G,Z,K,Q,J,$,ee=[],te=[],ie;R?(U=R.dataIndex,G=2*R.xAfterIndex):(U=0,G=0),Q=this.interpolate(this.serie1,this.getFrom()),ee.push(this.getFrom()),ee.push(Q),Q=this.interpolate(this.serie2,this.getFrom()),te.push(this.getFrom()),te.push(Q);for(var re,ae,se;U<this.serie1.data.length;U++){for(;G<this.serie1.data[U].length;G+=2){if(this.serie1.data[U][G]>this.getTo()){Q=this.interpolate(this.serie1,this.getTo()),J=this.interpolate(this.serie2,this.getTo()),$=this.computeCrossing(ee[ee.length-2],ee[ee.length-1],this.getTo(),Q,te[te.length-2],te[te.length-1],this.getTo(),J),$&&(ee.push($.x),ee.push($.y),te.push($.x),te.push($.y),F(),ee.push($.x),ee.push($.y),te.push($.x),te.push($.y),ae=this.serie1.data[U][G+1]>this.serie2.data[Z][K+1]),ee.push(this.getTo()),ee.push(Q),te.push(this.getTo()),te.push(J),se=!0;break}if(!re)if(re=this.serie2.searchClosestValue(this.serie1.data[U][G]),re)Z=re.dataIndex,K=2*re.xBeforeIndex,Q=this.interpolate(this.serie2,this.serie1.data[U][G]),ee.push(this.serie1.data[U][G]),ee.push(this.serie1.data[U][G+1]),te.push(this.serie1.data[U][G]),te.push(Q),ae=this.serie1.data[U][G+1]>Q;else continue;for(ie=!1,$=this.computeCrossing(ee[ee.length-2],ee[ee.length-1],this.serie1.data[U][G],this.serie1.data[U][G+1],te[te.length-2],te[te.length-1],this.serie2.data[Z][K],this.serie2.data[Z][K+1]),$&&(ee.push($.x),ee.push($.y),te.push($.x),te.push($.y),F(),ee.push($.x),ee.push($.y),te.push($.x),te.push($.y),ae=this.serie1.data[U][G+1]>this.serie2.data[Z][K+1]);this.serie2.data[Z][K]<this.serie1.data[U][G];){if(te.push(this.serie2.data[Z][K]),te.push(this.serie2.data[Z][K+1]),K+=2,K==this.serie2.data[Z].length){ie=this.serie2.data[Z][K-2],Z++,K=0;break}$=this.computeCrossing(ee[ee.length-2],ee[ee.length-1],this.serie1.data[U][G],this.serie1.data[U][G+1],te[te.length-2],te[te.length-1],this.serie2.data[Z][K],this.serie2.data[Z][K+1]),$&&(ee.push($.x),ee.push($.y),te.push($.x),te.push($.y),F(),ee.push($.x),ee.push($.y),te.push($.x),te.push($.y),ae=this.serie1.data[U][G+1]>this.serie2.data[Z][K+1])}!1===ie?(ee.push(this.serie1.data[U][G]),ee.push(this.serie1.data[U][G+1])):(ee.push(ie),ee.push(this.interpolate(this.serie1,ie)),re=!1,G-=2,F())}if(se){F();break}Q=this.interpolate(this.serie2,ee[ee.length-2]),Q&&(te.push(ee[ee.length-2]),te.push(Q)),F(),G=0,re=!1}var oe=this.pathsPositive.reduce(W,'');this.positivePolyline.setPointsPx(oe).redraw();var oe=this.pathsNegative.reduce(W,'');this.negativePolyline.setPointsPx(oe).redraw()}interpolate(F,W){var V=F.searchClosestValue(W);if(!V)return!1;if(void 0==V.xMax)return V.yMin;if(void 0==V.xMin)return V.yMax;var R=(W-V.xMin)/(V.xMax-V.xMin);return(1-R)*V.yMin+R*V.yMax}computeCrossing(F,W,V,R,U,G,Z,K){var Q=(R-W)/(V-F),J=(K-G)/(Z-U),$=R-Q*V;if(F==V||U==Z)return!1;if(Q==J)return{x:F,y1:W,y2:W};var te=($-(K-J*Z))/(J-Q);return te>V||te<F||te<U||te>Z?!1:{x:te,y:Q*te+$}}getPositivePolyline(){return this.positivePolyline}getNegativePolyline(){return this.negativePolyline}}X.default=O,T.exports=X['default']})},function(u,A,S){var P,C,E;(function(T,X){C=[u,A,S(1),S(9),S(11),S(3),S(14),S(22),S(39),S(10)],P=X,E='function'==typeof P?P.apply(A,C):P,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y,I,B,O,F,W,V,R){'use strict';function G(ue){return ue&&ue.__esModule?ue:{default:ue}}Object.defineProperty(X,'__esModule',{value:!0});var Z=G(Y),K=G(I),Q=G(B),J=function(ue){if(ue&&ue.__esModule)return ue;var he={};if(null!=ue)for(var ce in ue)Object.prototype.hasOwnProperty.call(ue,ce)&&(he[ce]=ue[ce]);return he.default=ue,he}(O),$=G(F),ee=G(W),te=G(V),ie=G(R);class re extends $.default{constructor(){super(...arguments),this.subSeries=[]}setData(){return super.setData(...arguments),this.subSeries.map(ue=>{ue.data=this.data}),this}draw(){return this.eraseMarkers(),this}getSymbolForLegend(){return!!this.subSeries[0]&&this.subSeries[0].getSymbolForLegend()}getMarkerForLegend(){return!!this.subSeries[0]&&this.subSeries[0].getMarkerForLegend()}}class ae extends ee.default{constructor(){super(...arguments),this.subSeries=[]}setData(){return super.setData(...arguments),this.subSeries.map(ue=>{ue.data=this.data}),this}draw(){return this}getSymbolForLegend(){return!!this.subSeries[0]&&this.subSeries[0].getSymbolForLegend()}getMarkerForLegend(){return!!this.subSeries[0]&&this.subSeries[0].getMarkerForLegend()}}var se=['constructor','init','draw','setLineColor','setLineWidth','setLineStyle','getLineColor','getLineWidth','getLineStyle','setMarkers','showMarkers','hideMarkers','getMarkerDom','getMarkerDomIndependant','getMarkerPath','eraseMarkers','_recalculateMarkerPoints'];Object.getOwnPropertyNames($.default.prototype).concat([]).map(function(ue){-1<se.indexOf(ue)||(re.prototype[ue]=function(he){return function(){var ce=arguments;this.subSeries.map(xe=>{xe[he](...ce)})}}(ue))});class ne extends te.default{constructor(){super(...arguments),this.series=new Map}static defaults(){return{axes:{margins:{high:5,low:5}}}}init(ue){this.graph=ue}newXAxis(ue){return newBottomAxis(ue)}newYAxis(ue){return newLeftAxis(ue)}newTopAxis(ue){return ue=this.getOptions(ue),new de(this.graph,'top',ue)}newBottomAxis(ue){return ue=this.getOptions(ue),new de(this.graph,'bottom',ue)}newLeftAxis(ue){return ue=this.getOptions(ue),new ge(this.graph,'left',ue)}newRightAxis(ue){return ue=this.getOptions(ue),new ge(this.graph,'right',ue)}getOptions(ue){var he={marginMin:this.options.axes.margins.low,marginMax:this.options.axes.margins.high};return J.extend(!0,he,ue)}preDraw(){var ue,he;this.series.forEach(({serie:ce})=>{ue=ce.getXAxis(),he=ce.getYAxis();let xe=1;for(ue.splitNumber&&(xe*=ue.splitNumber),he.splitNumber&&(xe*=he.splitNumber);ce.subSeries.length<xe;){const me=ce.getName()+'_'+ce.subSeries.length,fe=this.graph.newSerie(me,{},ce.getType()||Z.default.SERIE_LINE);fe.excludedFromLegend=!0,fe.styles=ce.styles,fe.data=ce.data,ce.getType()==Z.default.SERIE_LINE&&(fe.markerPoints=ce.markerPoints,fe.markerFamilies=ce.markerFamilies),ce.subSeries.push(fe)}for(;ce.subSeries.length>xe;){let me=this.graph.getSerie(ce.getName()+'_'+(ce.subSeries.length-1));me&&me.kill&&me.kill(),ce.subSeries.pop()}!ce.getXAxis().splitNumber&&ce.getXAxis().splitAxis&&ce.getXAxis().splitAxis(),!ce.getYAxis().splitNumber&&ce.getYAxis().splitAxis&&ce.getYAxis().splitAxis(),ce.subSeries.map((me,fe)=>{var ye,be;if(ce.getXAxis().getSubAxis){let Ae=fe%(ue.splitNumber||1);ye=ce.getXAxis().getSubAxis(Ae)}else ye=ce.getXAxis();if(me.setXAxis(ye),ce.getYAxis().getSubAxis){let Ae=Math.floor(fe/(ue.splitNumber||1));be=ce.getYAxis().getSubAxis(Ae)}else be=ce.getYAxis();me.setYAxis(be),me.draw(!0)})})}newSerie(ue,he={},ce){switch(ce){case'line':return newLineSerie(ue,he);break;case'scatter':return newScatterSerie(ue,he);}throw'Cannot create a split serie of type '+ce}newLineSerie(ue,he){var ce={type:'lineSerie',serie:new re(ue,he,'line')};return this.series.set(ue,ce),ce.serie.init(this.graph,ue,he),this.graph.series.push(ce.serie),ce.serie}newScatterSerie(ue,he){var ce={type:'scatterSerie',serie:new ae(ue,he,'scatter')};return this.series.set(ue,ce),ce.serie.init(this.graph,he),this.graph.series.push(ce.serie),ce.serie}}var le={splitMarks:!0},pe=function(ue){var ce=class extends ue{constructor(me,fe,ye={}){super(me,fe,ye),this.axes=[],this.position=fe,this.constructorOptions=J.extend(!0,{},le,ye),this._splitVal=[]}all(me){if('function'==typeof me)return this.axes.map(me),this}splitAxis(...me){me.push(1);let fe=me.length;for(;this.axes.length>fe;)this.axes.pop().kill(!0,!0);for(;this.axes.length<fe;){let Ae=new(this.getConstructor())(this.graph,this.position,this.constructorOptions);this.axes.push(Ae),Ae.zoomLock=!0,Ae.init(this.graph,this.constructorOptions)}let ye=0,be=0;for(let Ae of this.axes)Ae.options.marginMin=10,Ae.options.marginMax=10,0==be&&(Ae.options.marginMin=0),be==this.axes.length-1&&(Ae.options.marginMax=0),Ae.setSpan(ye,ye=me[be]),Ae.setMinMaxFlipped(),be++;return this._splits=me,this}fixGridIntervalBasedOnAxis(me){return this.fixGridFor=me,this.graph._axisHasChanged(),this}splitSpread(me){return this.autoSpread=!!me,this}hasAxis(me){return-1<this.axes.indexOf(me)}_splitSpread(){let me=[],fe=0,ye=0;for(let be of this._splitVal)fe+=be[1]-be[0];for(let be of this._splitVal)me.push(ye+=(be[1]-be[0])/fe);me.pop(),this.splitAxis(...me)}setChunkBoundaries(me){let fe=0,ye,be;for(let Ae of this.axes)Array.isArray(me[fe])&&1<me[fe].length&&!ye&&(ye=me[fe][1]-me[fe][0],be=fe),1!=me[fe].length&&Array.isArray(me[fe])?Ae.forceMin(me[fe][0]).forceMax(me[fe][1]):(Ae._mean=me[fe],Array.isArray(Ae._mean)&&(Ae._mean=Ae._mean[0])),fe++;return this._baseWidthVal=ye,this._baseWidthIndex=be,this._splitVal=me,this.graph._axisHasChanged(),this}setMinMaxToFitSeries(){(!this._splitVal||1>this._splitVal.length)&&(super.setMinMaxToFitSeries(...arguments),this._splitVal[0]=this._splitVal[0]||[],this._splitVal[this._splitVal.length-1]=this._splitVal[this._splitVal.length-1]||[],this._splitVal[0][0]=this.getCurrentMin(),this._splitVal[this._splitVal.length-1][1]=this.getCurrentMax(),this.setChunkBoundaries(this._splitVal))}draw(){this.autoSpread&&this._splitSpread();let me=0,fe,ye,be;if(0<=this._baseWidthIndex&&(ye=this.getSubAxis(this._baseWidthIndex))&&(be=ye.getSpan()),ye=void 0,0<=this.fixGridFor&&(ye=this.getSubAxis(this.fixGridFor))){if(void 0!==ye._mean){let Ae=(ye.getSpan()[1]-ye.getSpan()[0])/(be[1]-be[0])*this._baseWidthVal;ye.forceMin(ye._mean-Ae/2),ye.forceMax(ye._mean+Ae/2)}me=ye.draw(),fe=ye.getPrimaryTickUnit()}return this.axes.map(Ae=>{if(ye!==Ae){if(void 0!==Ae._mean){let Me=(Ae.getSpan()[1]-Ae.getSpan()[0])/(be[1]-be[0])*this._baseWidthVal;Ae.forceMin(Ae._mean-Me/2),Ae.forceMax(Ae._mean+Me/2)}fe&&Ae.forcePrimaryTickUnit(fe),me=Math.max(me,Ae.draw())}}),this.writeUnit(),me}setMinPx(me){super.setMinPx(me);for(let fe of this.axes)fe.setMinPx(me)}setMaxPx(me){super.setMaxPx(me);for(let fe of this.axes)fe.setMaxPx(me)}setShift(){super.setShift(...arguments);for(let me of this.axes)me.setShift(...arguments)}init(){super.init(...arguments),this.splitAxis()}getAxisPosition(){var me=0;return this.axes.map(fe=>{me=Math.max(me,fe.getAxisPosition())}),me}getSubAxis(me){if(this.axes.length<=me)throw'Impossible to reach axis. Index '+me+' is out of range';return this.axes[me]}get splitNumber(){return this._splits.length}};return['turnGridsOff','turnGridsOn','gridsOff','gridsOn','setEngineering','setScientificScaleExponent','setScientific','setLabelColor','setSecondaryGridDasharray','setPrimaryGridDasharray','setSecondaryGridsOpacity','setPrimaryGridOpacity','setSecondaryGridWidth','setPrimaryGridWidth','setSecondaryGridColor','setPrimaryGridColor','setTicksLabelColor','setSecondaryTicksColor','setPrimaryTicksColor','setAxisColor','secondaryGridOn','secondaryGridOff','primaryGridOff','primaryGridOn','setSecondaryGrid','setPrimaryGrid','setGrids','setTickPosition','setExponentialFactor','setExponentialLabelFactor','setGridLinesStyle','forcePrimaryTickUnitMin','forcePrimaryTickUnitMax','forcePrimaryTickUnit','flip','show','hide','setDisplay'].map(xe=>{ce.prototype[xe]=function(me){return function(){return this.axes.map(fe=>{fe[me](...arguments)}),this}}(xe)}),ce};class de extends pe(K.default){constructor(ue,he){super(...arguments),this.topbottom=he}getConstructor(){return K.default}getAxisPosition(){var ue=super.getAxisPosition(...arguments);return this.labelPosY=ue,this.getLabel()&&(ue+=this.graph.options.fontSize),ue}drawLabel(){super.drawLabel(),this.label.setAttribute('y',(this.top?-1:1)*(this.graph.options.fontSize+this.labelPosY))}draw(){var ue=super.draw(...arguments);return this.drawLabel(),ue}}class ge extends pe(Q.default){constructor(){super(...arguments)}getConstructor(){return Q.default}drawLabel(){super.drawLabel()}equalizePosition(ue){var he=ue;if(this.getLabel()&&this.axes.map(ce=>{he=Math.max(ce.equalizePosition(ue),he)}),this.getLabel())return this.placeLabel(this.left?-he:he),he+this.graph.options.fontSize}}J.mix(de,new K.default),J.mix(ge,new Q.default),X.default=ne,T.exports=X['default']})},function(u,A,S){var P,C,E;(function(T,X){C=[u,A,S(3),S(39)],P=X,E='function'==typeof P?P.apply(A,C):P,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y,I){'use strict';Object.defineProperty(X,'__esModule',{value:!0});var F=function(R){if(R&&R.__esModule)return R;var U={};if(null!=R)for(var G in R)Object.prototype.hasOwnProperty.call(R,G)&&(U[G]=R[G]);return U.default=R,U}(Y),W=function(R){return R&&R.__esModule?R:{default:R}}(I);class V extends W.default{constructor(){super(...arguments)}init(R,U){super.init(R,U)}static default(){return{}}checkHSL(R){let U={},G,Z,K;return(G=R.h||R.hue)?(1>G&&(G=Math.round(360*G)),U.hue=G):U.h=0,(Z=R.s||R.saturation)?(1<Z&&(Z/=100),U.saturation=Z):U.saturation=.75,(K=R.lightness||R.l)?(1<K&&(K/=100),U.lightness=K):U.lightness=0.5,U}buildHSLString(R){return'hsl( '+Math.round(R.h)+', '+Math.round(100*R.s)+'%, '+Math.round(100*R.l)+'%)'}colorizeAll(R){let U,G;if(R.serieTypes?(!Array.isArray(R.serieTypes)&&(R.serieTypes=[R.serieTypes]),U=this.graph.allSeries(...R.serieTypes)):U=this.graph.getSeries(),G=U.length,!R.startingColorHSL)if(R.colorHSL)R.startingColorHSL=this.checkHSL(R.colorHSL);else throw'No starting color was provided. There must exist either options.colorHSL or options.startingColorHSL';if(!R.endingColorHSL)switch(R.affect&&['h','s','l','hue','saturation','lightness'].include(R.affect)||(R.affect='h'),R.affect){case'h':case'hue':R.endingColorHSL={h:R.startingColorHSL.h+300,s:R.startingColorHSL.s,l:R.startingColorHSL.l};break;case'saturation':case's':let Z;Z=0.5<R.startingColorHSL.s?0:1,R.endingColorHSL={h:R.startingColorHSL.h,s:Z,l:R.startingColorHSL.l};break;case'lightness':case'l':let K;K=0.5<R.startingColorHSL.l?0:0.75,R.endingColorHSL={h:R.startingColorHSL.h,s:R.startingColorHSL.s,l:K};}else R.endingColorHSL=Object.assign({},R.startingColorHSL,R.endingColorHSL);return U.map((Z,K)=>{if(!Z.setLineColor)throw'The serie '+Z.getName()+' does not implement the method `startingColor`';const Q=this.buildHSLString({h:R.startingColorHSL.h+K/(G-1)*(R.endingColorHSL.h-R.startingColorHSL.h),s:R.startingColorHSL.s+K/(G-1)*(R.endingColorHSL.s-R.startingColorHSL.s),l:R.startingColorHSL.l+K/(G-1)*(R.endingColorHSL.l-R.startingColorHSL.l)});return Z.setLineColor(Q),Q})}}X.default=V,T.exports=X['default']})},function(u,A,S){var P,C,E;(function(T,X){C=[u,A,S(3),S(39)],P=X,E='function'==typeof P?P.apply(A,C):P,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y,I){'use strict';Object.defineProperty(X,'__esModule',{value:!0});var F=function(R){if(R&&R.__esModule)return R;var U={};if(null!=R)for(var G in R)Object.prototype.hasOwnProperty.call(R,G)&&(U[G]=R[G]);return U.default=R,U}(Y),W=function(R){return R&&R.__esModule?R:{default:R}}(I);class V extends W.default{constructor(){super(...arguments)}static default(){return{autoPeakPicking:!1,autoPeakPickingNb:4,autoPeakPickingMinDistance:10,autoPeakPickingFormat:!1,autoPeakPickingAllowAllY:!1}}init(R,U){super.init(R,U),this.picks=[];for(var G=0,Z=this.options.autoPeakPickingNb,K;G<Z;G++)K=this.graph.newShape({type:'label',label:{text:'',position:{x:0},anchor:'middle'},selectable:!0,shapeOptions:{minPosY:15}}),K.draw(),this.picks.push(K)}setSerie(R){this.serie=R}preDraw(){this.serie&&(this.detectedPeaks=[],this.lastYPeakPicking=!1)}postDraw(){if(this.serie){let R=!0,U=!1,Z=[],K=this.serie.getWaveform(),G;if(!K)throw'The serie must have a waveform for the peak picking to work';let Q=K.getLength(),J=0,$;for(;J<Q;J++){if($=K.getY(J),this.serie.options.lineToZero){Z.push([K.getX(J),$]);continue}if(!G){G=[K.getX(J),$];continue}$>=G[1]&&R||$<=G[1]&&U?G=[K.getX(J),$]:($<G[1]&&R||$>G[1]&&U)&&(U?(U=!1,R=!0):(U=!0,R=!1,Z.push(G),G=!1),G=[K.getX(J),$])}var ee=Z,re=[],ae=ee.length,te,ie,ie,se,oe,ne;J=0;var le=this.graph.selectedShapes.map(function(pe){return pe.getProp('xval')});for(ee.sort(function(pe,de){return de[1]-pe[1]}),oe=0;J<ae;J++)if((te=ee[J][0],ie=this.serie.getX(te),se=0,$=this.serie.getY(ee[J][1]),!(ie<this.serie.getXAxis().getMinPx()||ie>this.serie.getXAxis().getMaxPx()))&&!(!this.options.autoPeakPickingAllowAllY&&($>this.serie.getYAxis().getMinPx()||$<this.serie.getYAxis().getMaxPx()))){for(;se<re.length&&!(Math.abs(re[se]-ie)<this.options.autoPeakPickingMinDistance);se++);if(!(se<re.length)){if(-1<(ne=le.indexOf(te))){re.push(ie);continue}if(!this.picks[oe])return;for(0>this.serie.getYAxis().getPx(ee[J][1])-20?(this.picks[oe].setLabelPosition({x:te,y:'5px'}),this.picks[oe].setLabelBaseline('hanging')):(this.picks[oe].setLabelBaseline('no-change'),this.picks[oe].setLabelPosition({x:te,y:ee[J][1],dy:'-15px'})),this.picks[oe].setProp('xval',te),this.options.autoPeakPickingFormat?this.picks[oe].setLabelText(this.options.autoPeakPickingFormat.call(this.picks[oe],te,oe)):this.picks[oe].setLabelText(Math.round(1e3*te)/1e3+''),this.picks[oe].makeLabels(),oe++;this.picks[oe]&&this.picks[oe].isSelected();)oe++;if(re.length==this.options.autoPeakPickingNb)break}}}}hidePeakPicking(R){if(this._hidePeakPickingLocked||(this._hidePeakPickingLocked=R),!!graph.picks)for(var U=0;U<graph.picks.length;U++)graph.picks[U].hide()}showPeakPicking(R){if((!this._hidePeakPickingLocked||R)&&graph.picks)for(var U=0;U<graph.picks.length;U++)graph.picks[U].show()}killPeakPicking(){if(this.picks)for(var R=0,U=this.picks.length;R<U;R++)this.picks[R].kill()}}X.default=V,T.exports=X['default']})},function(u,A,S){var P,C,E;(function(T,X){C=[u,A,S(3),S(27)],P=X,E='function'==typeof P?P.apply(A,C):P,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y,I){'use strict';Object.defineProperty(X,'__esModule',{value:!0});var F=function(R){if(R&&R.__esModule)return R;var U={};if(null!=R)for(var G in R)Object.prototype.hasOwnProperty.call(R,G)&&(U[G]=R[G]);return U.default=R,U}(Y),W=function(R){return R&&R.__esModule?R:{default:R}}(I);class V extends W.default{constructor(R,U){super(R,U)}createDom(){this._dom=document.createElementNS(this.graph.ns,'ellipse')}applyPosition(){var R=this.computePosition(0);return this.setDom('cx',R.x||0),this.setDom('cy',R.y||0),this.setDom('rx',this.getProp('rx')||0),this.setDom('ry',this.getProp('ry')||0),!0}setR(R,U){return this.setProp('rx',R),this.setProp('ry',U),this}handleMouseUpImpl(){this.triggerChange()}handleMouseMoveImpl(){}}X.default=V,T.exports=X['default']})}])});
//# sourceMappingURL=jsgraph-es6.min.js.map
