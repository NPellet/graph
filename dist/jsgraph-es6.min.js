(function(A,S){'object'==typeof exports&&'object'==typeof module?module.exports=S():'function'==typeof define&&define.amd?define([],S):'object'==typeof exports?exports.Graph=S():A.Graph=S()})(this,function(){return function(u){function A(P){if(S[P])return S[P].exports;var C=S[P]={exports:{},id:P,loaded:!1};return u[P].call(C.exports,C,C.exports,A),C.loaded=!0,C.exports}var S={};return A.m=u,A.c=S,A.p='',A(0)}([function(u,A,S){var P,C,T;(function(E,X){C=[u,S(1),S(2),S(8),S(9),S(11),S(12),S(13),S(14),S(18),S(20),S(21),S(22),S(23),S(24),S(25),S(26),S(27),S(28),S(29),S(49),S(30),S(31),S(32),S(33),S(34),S(35),S(36),S(37),S(38),S(39),S(40),S(41),S(42),S(43),S(44),S(45),S(47),S(48),S(5),S(6)],P=X,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X,Y,I,F,O,V,W,B,R,G,Z,U,Q,K,J,$,ee,te,ie,ae,re,se,ne,oe,le,de,pe,ue,ge,ce,xe,he,me,ye,fe,be,Ae,Me,ke,_e){'use strict';function Se(pt){return pt&&pt.__esModule?pt:{default:pt}}var Pe=Se(X),Ce=Se(Y),ve=Se(I),we=Se(F),Le=Se(O),Te=Se(V),Ee=Se(W),Xe=Se(B),De=Se(R),Ye=Se(G),Ie=Se(Z),Ne=Se(U),He=Se(Q),je=Se(K),ze=Se(J),Fe=Se($),Oe=Se(ee),Ve=Se(te),We=Se(ie),Be=Se(ae),Re=Se(re),Ge=Se(se),Ze=Se(ne),Ue=Se(oe),qe=Se(le),Qe=Se(de),Ke=Se(pe),Je=Se(ue),$e=Se(ge),et=Se(ce);Se(xe);var tt=Se(he),it=Se(me),at=Se(ye),rt=Se(fe),st=Se(be),nt=Se(Ae),ot=Se(Me),lt=Se(ke);Se(_e),Pe.default.registerConstructor('graph.position',Ce.default),Pe.default.registerConstructor('graph.axis.x',we.default),Pe.default.registerConstructor('graph.axis.y',Le.default),Pe.default.registerConstructor('graph.axis.x.bar',Te.default),Pe.default.registerConstructor('graph.axis.x.time',Ee.default),Pe.default.registerConstructor('graph.serie.line',Xe.default),Pe.default.registerConstructor('graph.serie.line.3d',De.default),Pe.default.registerConstructor('graph.serie.line.color',Ne.default),Pe.default.registerConstructor('graph.serie.contour',Oe.default),Pe.default.registerConstructor('graph.serie.bar',Ye.default),Pe.default.registerConstructor('graph.serie.box',Ie.default),Pe.default.registerConstructor('graph.serie.scatter',He.default),Pe.default.registerConstructor('graph.serie.zone',je.default),Pe.default.registerConstructor('graph.serie.zone.3d',ze.default),Pe.default.registerConstructor('graph.serie.densitymap',Fe.default),Pe.default.registerConstructor(Pe.default.SERIE_LINE,Xe.default),Pe.default.registerConstructor(Pe.default.SERIE_LINE_3D,De.default),Pe.default.registerConstructor(Pe.default.SERIE_LINE_COLORED,Ne.default),Pe.default.registerConstructor(Pe.default.SERIE_CONTOUR,Oe.default),Pe.default.registerConstructor(Pe.default.SERIE_BAR,Ye.default),Pe.default.registerConstructor(Pe.default.SERIE_BOX,Ie.default),Pe.default.registerConstructor(Pe.default.SERIE_SCATTER,He.default),Pe.default.registerConstructor(Pe.default.SERIE_ZONE,je.default),Pe.default.registerConstructor(Pe.default.SERIE_ZONE_3D,ze.default),Pe.default.registerConstructor(Pe.default.SERIE_DENSITYMAP,Fe.default),Pe.default.registerConstructor('graph.plugin.shape',it.default),Pe.default.registerConstructor('graph.plugin.drag',tt.default),Pe.default.registerConstructor('graph.plugin.zoom',rt.default),Pe.default.registerConstructor('graph.plugin.selectScatter',at.default),Pe.default.registerConstructor('graph.plugin.timeSerieManager',st.default),Pe.default.registerConstructor('graph.plugin.serielinedifference',nt.default),Pe.default.registerConstructor('graph.plugin.serieLineDifference',nt.default),Pe.default.registerConstructor('graph.plugin.axissplitting',ot.default),Pe.default.registerConstructor('graph.shape',Ve.default),Pe.default.registerConstructor('graph.shape.areaundercurve',We.default),Pe.default.registerConstructor('graph.shape.arrow',Be.default),Pe.default.registerConstructor('graph.shape.ellipse',Re.default),Pe.default.registerConstructor('graph.shape.label',Ge.default),Pe.default.registerConstructor('graph.shape.polyline',Ze.default),Pe.default.registerConstructor('graph.shape.line',Ue.default),Pe.default.registerConstructor('graph.shape.nmrintegral',qe.default),Pe.default.registerConstructor('graph.shape.html',et.default),Pe.default.registerConstructor('graph.shape.peakintegration2d',Qe.default),Pe.default.registerConstructor('graph.shape.rect',Ke.default),Pe.default.registerConstructor('graph.shape.rectangle',Ke.default),Pe.default.registerConstructor('graph.shape.cross',Je.default),Pe.default.registerConstructor('graph.shape.peakboundariescenter',$e.default),Pe.default.registerConstructor('graph.legend',ve.default),Pe.default.registerConstructor('graph.waveform',lt.default),E.exports=Pe.default})},function(u,A,S){var P,C,T;(function(E,X){C=[A,S(2),S(3),S(4),S(5)],P=X,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X,Y,I,F){'use strict';function O(fe){return fe&&fe.__esModule?fe:{default:fe}}function V(fe,be,Ae,Me){var ke=fe.getConstructor(Me,!0);if(ke||'string'!=typeof Me||(ke=fe.getConstructor('graph.serie.'+Me,!0)),ke){var _e=new ke;_e.init(fe,be,Ae),fe.appendSerieToDom(_e)}else return de.throwError('No constructor exists for the serie type provided. Use Graph.registerConstructor( name, constructor ) first is you use your own series');return _e}function W(fe,be){for(var Ae=0,Me=be.length;Ae<Me;Ae++){var ke=!0;for(var _e=0,Se=be[Ae].length;_e<Se;_e++)fe[0]<be[Ae][_e][0]&&fe[1]<be[Ae][_e][0]||fe[0]>be[Ae][_e][1]&&fe[1]>be[Ae][_e][1]||(ke=!1);if(ke)return be[Ae].push(fe),Ae}return be.push([fe]),be.length-1}function B(fe){var be={top:[],bottom:[],left:[],right:[]},Ae={top:[],bottom:[],left:[],right:[]};fe._painted=!0,fe._applyToAxes(function(Ce,ve){if(!(Ce.disabled||Ce.floating)){var we=W(Ce.getSpan(),Ae[ve]);Ce.setLevel(we),be[ve][we]=Math.max(Ce.getAxisPosition(),be[ve][we]||0)}},!1,!0,!1);var Me=be.top.reduce(function(Ce,ve){return Ce+ve},0),ke=be.bottom.reduce(function(Ce,ve){return Ce+ve},0);[be.top,be.bottom].map(function(Ce){Ce.reduce(function(ve,we,Le){return Ce[Le]=ve+we,ve+we},0)}),fe._applyToAxes(function(Ce,ve){Ce.disabled||Ce.floating||Ce.setShift(be[ve][Ce.getLevel()])},!1,!0,!1),fe._applyToAxes(function(Ce,ve){if(!Ce.disabled&&(Ce.setMinPx(Me),Ce.setMaxPx(fe.getDrawingHeight(!0)-ke),!Ce.floating)){let we=Ce.linkedToAxis?0:Ce.draw();var Le=W(Ce.getSpan(),Ae[ve]);Ce.setLevel(Le),be[ve][Le]=Math.max(we,be[ve][Le]||0)}},!1,!1,!0);var _e=de.extend(!0,{},be);fe._applyToAxes(function(Ce,ve){Ce.disabled||Ce.floating||(_e[ve][Ce.getLevel()]=Math.max(be[ve][Ce.getLevel()],Ce.equalizePosition(be[ve][Ce.getLevel()])))},!1,!1,!0),be=_e;var Se=be.left.reduce(function(Ce,ve){return Ce+ve},0),Pe=be.right.reduce(function(Ce,ve){return Ce+ve},0);[be.left,be.right].map(function(Ce){Ce.reduce(function(ve,we,Le){return Ce[Le]=ve+we,ve+we},0)}),fe._applyToAxes((Ce,ve)=>{Ce.disabled||Ce.floating||Ce.setShift(be[ve][Ce.getLevel()])},!1,!1,!0),fe._applyToAxes(function(Ce){Ce.disabled||(Ce.setMinPx(Se),Ce.setMaxPx(fe.getDrawingWidth(!0)-Pe),Ce.floating||!Ce.linkedToAxis&&Ce.draw())},!1,!0,!1),fe._applyToAxes(function(Ce){if(Ce.floating){var ve=Ce.getFloatingAxis(),we=Ce.getFloatingValue(),Le=ve.getPx(we);Ce.setShift(Le),Ce.linkedToAxis||Ce.draw()}},!1,!0,!0),ae(fe,'right',fe.getDrawingWidth(!0),fe.getDrawingWidth(!0),Me,fe.getDrawingHeight(!0)-ke),ae(fe,'left',0,0,Me,fe.getDrawingHeight(!0)-ke),ae(fe,'top',Se,fe.getDrawingWidth(!0)-Pe,0,0),ae(fe,'bottom',Se,fe.getDrawingWidth(!0)-Pe,fe.getDrawingHeight(!0)-ke,fe.getDrawingHeight(!0)-ke),fe.clipRect.setAttribute('y',Me),fe.clipRect.setAttribute('x',Se),fe.clipRect.setAttribute('width',fe.getDrawingWidth()-Se-Pe),fe.clipRect.setAttribute('height',fe.getDrawingHeight()-Me-ke),fe.rectEvent.setAttribute('y',Me+fe.getPaddingTop()),fe.rectEvent.setAttribute('x',Se+fe.getPaddingLeft()),fe.drawingSpaceWidth=fe.getDrawingWidth()-Se-Pe,fe.drawingSpaceHeight=fe.getDrawingHeight()-Me-ke,fe.rectEvent.setAttribute('width',fe.drawingSpaceWidth),fe.rectEvent.setAttribute('height',fe.drawingSpaceHeight),fe.drawingSpaceMinX=Se+fe.getPaddingLeft(),fe.drawingSpaceMinY=Me+fe.getPaddingTop(),fe.drawingSpaceMaxX=fe.getDrawingWidth()-Pe+fe.getPaddingLeft(),fe.drawingSpaceMaxY=fe.getDrawingHeight()-ke+fe.getPaddingTop(),fe.shift=be,fe.redrawShapes()}function R(fe,be,Ae){return fe.forcedPlugin?(fe.activePlugin=fe.forcedPlugin,void fe._pluginExecute(fe.activePlugin,Ae,[fe,e])):void G(fe,be,[fe,be],Ae)}function G(fe,be,Ae,Me){var ke=fe.options.keyActions,_e,Se;for(_e=0,Se=ke.length;_e<Se;_e++){if(ke[_e].plugin){if(fe.forcedPlugin==ke[_e].plugin||fe.isActionAllowed(be,ke[_e]))return ke[_e].options&&Ae.push(ke[_e].options),fe.activePlugin=ke[_e].plugin,fe._pluginExecute(ke[_e].plugin,Me,Ae),be.preventDefault(),be.stopPropagation(),!0;}else if(ke[_e].callback&&fe.isActionAllowed(be,ke[_e]))return ke[_e].options&&Ae.push(ke[_e].options),be.preventDefault(),be.stopPropagation(),ke[_e].callback.apply(fe,Ae),!0;ke[_e].removeSelectedShape&&fe.isActionAllowed(be,ke[_e])&&(be.preventDefault(),be.stopPropagation(),fe.selectedShapes.map(Pe=>{Pe.kill()}))}return!1}function Z(fe){fe._dom.addEventListener('keydown',be=>{R(fe,be,'keydown')}),fe._dom.addEventListener('keypress',be=>{R(fe,be,'keypress')}),fe._dom.addEventListener('keyup',be=>{R(fe,be,'keyup')}),fe.groupEvent.addEventListener('mousemove',function(be){var Ae=fe._getXY(be);Q(fe,Ae.x,Ae.y,be)}),fe.dom.addEventListener('mouseleave',function(){se(fe)}),fe.groupEvent.addEventListener('mousedown',function(be){if(fe.focus(),!(3==be.which||be.ctrlKey)){var Ae=fe._getXY(be);U(fe,Ae.x,Ae.y,be)}}),fe.dom.addEventListener('mouseup',function(be){fe.emit('mouseUp',be);var Ae=fe._getXY(be);ee(fe,Ae.x,Ae.y,be)}),fe.dom.addEventListener('dblclick',function(be){fe.emit('dblClick',be);var Ae=fe._getXY(be);$(fe,Ae.x,Ae.y,be)}),fe.groupEvent.addEventListener('click',function(be){if(!(3==be.which||be.ctrlKey)){var Ae=fe._getXY(be);fe.prevent(!1)||te(fe,Ae.x,Ae.y,be)}}),fe.groupEvent.addEventListener('mousewheel',function(be){var Ae=be.wheelDeltaY||be.wheelDelta||-be.deltaY;return re(fe,Ae,be),!1}),fe.groupEvent.addEventListener('wheel',function(be){var Ae=be.wheelDeltaY||be.wheelDelta||-be.deltaY;return re(fe,Ae,be),!1})}function U(fe,be,Ae,Me){return fe.forcedPlugin?(fe.activePlugin=fe.forcedPlugin,void fe._pluginExecute(fe.activePlugin,'onMouseDown',[fe,be,Ae,Me])):void K(fe,Me,[fe,be,Ae,Me],'onMouseDown')}function Q(fe,be,Ae,Me){if(fe.bypassHandleMouse)return void fe.bypassHandleMouse.handleMouseMove(Me);if(!(fe.activePlugin&&fe._pluginExecute(fe.activePlugin,'onMouseMove',[fe,be,Ae,Me]))){;if(fe._applyToAxes('handleMouseMove',[be-fe.options.paddingLeft,Me],!0,!1),fe._applyToAxes('handleMouseMove',[Ae-fe.options.paddingTop,Me],!1,!0),!fe.activePlugin){var ke;if(fe.options.trackingLine&&fe.options.trackingLine.snapToSerie&&'common'==fe.options.trackingLine.mode){var _e=fe.options.trackingLine.snapToSerie;if(ke=_e.handleMouseMove(!1,!0),!ke)fe.trackingLine.hide();else{fe.trackingLine.show();var Se=ke.xIndexClosest;fe.trackingLine.getPosition(0).x=_e.getData()[0][2*Se],fe.trackingLine.getPosition(1).x=_e.getData()[0][2*Se],fe.trackingLine.redraw();var be=_e.getXAxis().getPx(fe.trackingLine.getPosition(0).x)+fe.options.paddingLeft}var Pe=fe.options.trackingLine.series;Pe||(Pe=fe.getSeries().map(function(we){return{serie:we,withinPx:20,withinVal:-1}})),fe._trackingLegend=he(fe,Pe,be,Ae,fe._trackingLegend,fe.options.trackingLine.textMethod,fe.trackingLine.getPosition(1).x)}}if(fe.options.onMouseMoveData){var Ce={};for(var ve=0;ve<fe.series.length;ve++)Ce[fe.series[ve].getName()]=fe.series[ve].handleMouseMove(!1,!0);fe.options.onMouseMoveData.call(fe,Me,Ce)}K(fe,Me,[fe,be,Ae,Me],'onMouseMove')}}function K(fe,be,Ae,Me){var ke=fe.options.mouseActions,_e,Se;for(_e=0,Se=ke.length;_e<Se;_e++)if(!ke[_e].plugin){if(ke[_e].callback&&fe.isActionAllowed(be,ke[_e]))return ke[_e].options&&Ae.push(ke[_e].options),ke[_e].callback.apply(fe,Ae),!0;if(ke[_e].series){var Pe;for('all'===ke[_e].series&&(Pe=fe.series),Array.isArray(ke[_e].series)||(Pe=[Pe]),ke[_e].options&&Ae.push(ke[_e].options);0<Pe.length;_e++)fe._serieExecute(Pe[_e],Me,Ae);return!0}}else if(fe.forcedPlugin==ke[_e].plugin||fe.isActionAllowed(be,ke[_e]))return ke[_e].options&&Ae.push(ke[_e].options),fe.activePlugin=ke[_e].plugin,fe._pluginExecute(ke[_e].plugin,Me,Ae),!0;return!1}function J(fe){var be=document.createElement('div');return be.setAttribute('class','trackingLegend'),be.style.position='absolute',be.style.borderRadius='4px',be.style.boxShadow='1px 1px 3px 0px rgba(100,100,100,0.6)',be.style.border='2px solid #333333',be.style.backgroundColor='rgba(255, 255, 255, 0.5 )',be.style.pointerEvents='none',be.style.paddingTop='5px',be.style.paddingBottom='5px',be.style.paddingLeft='10px',be.style.paddingRight='10px',fe.getWrapper().insertBefore(be,fe.getDom()),be}function $(fe,be,Ae,Me){fe.options.dblclick,K(fe,Me,[be,Ae,Me],'onDblClick')}function ee(fe,be,Ae,Me){return fe.bypassHandleMouse?(fe.bypassHandleMouse.handleMouseUp(Me),void(fe.activePlugin=!1)):void(fe._pluginExecute(fe.activePlugin,'onMouseUp',[fe,be,Ae,Me]),fe.activePlugin=!1)}function te(fe,be,Ae,Me){fe.emit('click',[fe,be,Ae,Me]),Me.target.jsGraphIsShape||fe.prevent(!1)||!fe.options.shapesUnselectOnClick||fe.unselectShapes()}function ie(fe,be,Ae,Me){var Ae=Ae||{},_e={def:{x:fe.getConstructor('graph.axis.x'),y:fe.getConstructor('graph.axis.y')},time:{x:fe.getConstructor('graph.axis.x.time')},bar:{x:fe.getConstructor('graph.axis.x.bar')}},ke;switch(Ae.type){case'time':var Se=_e.time;break;case'bar':var Se=_e.bar;break;case'broken':var Se=_e.broken;break;default:var Se=_e.def;}return'top'===Me||'bottom'===Me?ke=Se.x:'left'===Me||'right'===Me?ke=Se.y:void 0,be=be||0,'object'==typeof be&&(Ae=be,be=0),fe.axis[Me][be]||(fe.axis[Me][be]=new ke(fe,Me,Ae),fe.axis[Me][be].init(fe,Ae)),fe.axis[Me][be]}function ae(fe,be,Ae,Me,ke,_e){if(!1!==fe.options.close){var Se=0;fe.axis[be].map(function(Pe){Pe.isDisplayed()&&!Pe.floating&&Se++}),(!0===fe.options.close||fe.options.close[be])&&0==Se?(fe.closingLines[be].setAttribute('display','block'),fe.closingLines[be].setAttribute('x1',Ae),fe.closingLines[be].setAttribute('x2',Me),fe.closingLines[be].setAttribute('y1',ke),fe.closingLines[be].setAttribute('y2',_e)):fe.closingLines[be].setAttribute('display','none')}}function re(fe,be,Ae){K(fe,Ae,[be,Ae],'onMouseWheel')&&(Ae.preventDefault(),Ae.stopPropagation())}function se(fe){fe.options.handleMouseLeave&&fe.options.handleMouseLeave.call(fe)}function ne(fe){var be=fe._axesHaveChanged;return fe._axesHaveChanged=!1,be}function oe(fe){var be=fe._sizeChanged;return fe._sizeChanged=!1,be}Object.defineProperty(E,'__esModule',{value:!0});var le=O(X),de=function(be){if(be&&be.__esModule)return be;var Ae={};if(null!=be)for(var Me in be)Object.prototype.hasOwnProperty.call(be,Me)&&(Ae[Me]=be[Me]);return Ae.default=be,Ae}(Y),pe=O(I),ue=O(F);const ge={title:'',paddingTop:30,paddingBottom:5,paddingLeft:20,paddingRight:20,close:{left:!0,right:!0,top:!0,bottom:!0},fontSize:12,fontFamily:'Myriad Pro, Helvetica, Arial',plugins:{},pluginAction:{},mouseActions:[],keyActions:[],wheel:{},dblclick:{},shapesUnselectOnClick:!0,shapesUniqueSelection:!0};var ce=new Map;class xe extends pe.default{constructor(fe,be,Ae){if(super(),this._creation=de.guid(),'string'==typeof fe?fe=document.getElementById(fe):'number'==typeof fe.length&&(fe=fe[0]),!fe)throw'The wrapper DOM element was not found.';if(!fe.appendChild)throw'The wrapper appears to be an invalid HTMLElement';for(var Me in fe.style['-webkit-user-select']='none',fe.style['-moz-user-select']='none',fe.style['-o-user-select']='none',fe.style['-ms-user-select']='none',fe.style['user-select']='none',this.options=de.extend({},ge,be),this.prevented=!1,this.axis={left:[],top:[],bottom:[],right:[]},this.shapes=[],this.shapesLocked=!1,this.plugins={},this.options.pluginAction)this.options.pluginAction.plugin=Me,this.options.mouseActions.push(this.options.pluginAction);this.selectedShapes=[],this.ns='http://www.w3.org/2000/svg',this.nsxlink='http://www.w3.org/1999/xlink',this.series=[],this._dom=fe,this._axesHaveChanged=!0,this.options.hasOwnProperty('padding')&&de.isNumeric(this.options.padding)&&(this.options.paddingTop=this.options.paddingBottom=this.options.paddingLeft=this.options.paddingRight=this.options.padding);var ke=getComputedStyle(fe),_e=parseInt(ke.width),Se=parseInt(ke.height);if(this._doDom(),this.setSize(_e,Se),this._resize(),Z(this),this.currentAction=!1,Ae)for(var Me in Ae)for(var Pe=0,Ce=Ae[Me].length;Pe<Ce;Pe++)'top'==Me?this.getTopAxis(Pe,Ae[Me][Pe]):'bottom'==Me?this.getBottomAxis(Pe,Ae[Me][Pe]):'left'==Me?this.getLeftAxis(Pe,Ae[Me][Pe]):'right'==Me?this.getRightAxis(Pe,Ae[Me][Pe]):void 0;this._pluginsInit()}getDom(){return this.dom}getId(){return this._creation}getWrapper(){return this._dom}setOption(fe,be){return this.options[fe]=be,this}setTitle(fe){this.options.title=fe,this.domTitle.textContent=fe}displayTitle(){this.domTitle.setAttribute('display','inline')}hideTitle(){this.domTitle.setAttribute('display','none')}redraw(fe){if(this.width&&this.height)return this.sizeSet?!fe||ne(this)||oe(this)?(this.executeRedrawSlaves(),B(this),!0):(this.executeRedrawSlaves(!0),!1):(this._resize(),this.executeRedrawSlaves(),!0)}executeRedrawSlaves(){this._pluginsExecute('preDraw')}draw(fe){this.updateLegend(!0),this.drawSeries(this.redraw(!fe))}delayUpdate(){return this._lockUpdate=!0,this}doUpdate(){return this.legend&&this.legend.update(),this.draw(),this.legend&&this.legend.update(),this}resumeUpdate(){return this._lockUpdate=!1,this}isDelayedUpdate(){return this._lockUpdate}setWidth(fe,be){this.width=fe,be||this._resize()}setHeight(fe,be){this.height=fe,be||this._resize()}resize(fe,be){return fe&&be&&this.setSize(fe,be),this._resize(),this}setSize(fe,be){this.setWidth(fe,!0),this.setHeight(be,!0),this.getDrawingHeight(),this.getDrawingWidth()}getWidth(){return this.width}getHeight(){return this.height}getPaddingTop(){return this.options.paddingTop}getPaddingLeft(){return this.options.paddingLeft}getPaddingBottom(){return this.options.paddingBottom}getPaddingRight(){return this.options.paddingRight}getDrawingHeight(fe){return fe&&this.innerHeight?this.innerHeight:this.innerHeight=this.height-this.options.paddingTop-this.options.paddingBottom}getDrawingWidth(fe){return fe&&this.innerWidth?this.innerWidth:this.innerWidth=this.width-this.options.paddingLeft-this.options.paddingRight}cacheOffset(){this.offsetCached=de.getOffset(this._dom)}uncacheOffset(){this.offsetCached=!1}getXAxis(fe,be){return 0<this.axis.top.length&&0==this.axis.bottom.length?this.getTopAxis(fe,be):this.getBottomAxis(fe,be)}getYAxis(fe,be){return 0<this.axis.right.length&&0==this.axis.left.length?this.getRightAxis(fe,be):this.getLeftAxis(fe,be)}getTopAxis(fe,be){return ie(this,fe,be,'top')}getBottomAxis(fe,be){return ie(this,fe,be,'bottom')}getLeftAxis(fe,be){return ie(this,fe,be,'left')}getRightAxis(fe,be){return ie(this,fe,be,'right')}setXAxis(fe,be){this.setBottomAxis(fe,be)}setYAxis(fe,be){this.setLeftAxis(fe,be)}setLeftAxis(fe,be){be=be||0,this.axis.left[be]&&this.axis.left[be].kill(),this.axis.left[be]=fe}setRightAxis(fe,be){be=be||0,this.axis.right[be]&&this.axis.right[be].kill(),this.axis.right[be]=fe}setTopAxis(fe,be){be=be||0,this.axis.top[be]&&this.axis.top[be].kill(),this.axis.top[be]=fe}setBottomAxis(fe,be){be=be||0,this.axis.bottom[be]&&this.axis.bottom[be].kill(),this.axis.bottom[be]=fe}killAxis(fe,be=!1,Ae=!1){var Me;fe.isX()&&(-1<(Me=this.axis.bottom.indexOf(fe))&&this.axis.bottom.splice(Me,1),-1<(Me=this.axis.top.indexOf(fe))&&this.axis.top.splice(Me,1),!Ae&&this.series.map(ke=>{ke.getXAxis()==fe&&ke.kill()})),fe.isY()&&(-1<(Me=this.axis.left.indexOf(fe))&&this.axis.left.splice(Me,1),-1<(Me=this.axis.right.indexOf(fe))&&this.axis.right.splice(Me,1),!Ae&&this.series.map(ke=>{ke.getYAxis()==fe&&ke.kill()})),this.axisGroup.removeChild(fe.group),this.groupPrimaryGrids.removeChild(fe.gridPrimary),this.groupSecondaryGrids.removeChild(fe.gridSecondary),be||this.draw(!0)}hasXAxis(fe){return this.hasTopAxis(fe)||this.hasBottomAxis(fe)}hasYAxis(fe){return this.hasLeftAxis(fe)||this.hasRightAxis(fe)}hasTopAxis(fe){return this.hasAxis(fe,this.axis.top)}hasBottomAxis(fe){return this.hasAxis(fe,this.axis.bottom)}hasLeftAxis(fe){return this.hasAxis(fe,this.axis.left)}hasRightAxis(fe){return this.hasAxis(fe,this.axis.right)}hasAxis(fe,be){for(var Ae=0,Me=be.length;Ae<Me;Ae++){if(be[Ae]==fe)return!0;if(be[Ae].hasAxis(fe))return!0}return!1}autoscaleAxes(){this._applyToAxes('setMinMaxToFitSeries',null,!0,!0)}setBackgroundColor(fe){return this.rectEvent.setAttribute('fill',fe),this}getAxisState(){var fe={};for(var be in this.axis)fe[be]=this.axis[be].map(function(Ae){return[Ae.getCurrentMin(),Ae.getCurrentMax()]});return fe}setAxisState(fe){var be,Ae;for(var Me in fe)if(this.axis[Me])for(be=0,Ae=fe[Me].length;be<Ae;be++)this.axis[Me][be]&&(this.axis[Me][be].setCurrentMin(fe[Me][be][0]),this.axis[Me][be].setCurrentMax(fe[Me][be][1]));this.draw()}saveAxisState(fe){return this.savedAxisState=this.savedAxisState||{},this.savedAxisState[fe]=this.getAxisState(),this}recallAxisState(){return this.savedAxisState[savedName]&&this.recallAxisState(this.savedAxisState[savedName]),this}_applyToAxis(fe){switch(fe){case'string':return function(be,Ae,Me){for(var ke=0;ke<this.axis[be].length;ke++)this.axis[be][ke][Ae].apply(this.axis[be][ke],Me)};break;case'function':return function(be,Ae,Me){for(var ke=0;ke<this.axis[be].length;ke++)Ae.call(this,this.axis[be][ke],be,Me)};}}getBoundaryAxis(fe,be,Ae){var Me=this.getBoundaryAxisFromSeries(fe,be,Ae);return Me}getBoundaryAxisFromSeries(fe,be,Ae){var Me='min'==be,_e=fe.isX()?['getMinX','getMaxX']:['getMinY','getMaxY'],Se=_e[Me?0:1],Pe=Me?+(1/0):-(1/0),ke,Ce,ve,we,Le,Te;for(ke=Me?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,ve=this.getSeriesFromAxis(fe,!0),(Le=0,Te=ve.length);Le<Te;Le++)(Ce=ve[Le],!!Ce.isShown())&&(we=Ce[Se](Ae),ke=Math[be](isNaN(ke)?Pe:ke,isNaN(we)?Pe:we));return ke}getSeriesFromAxis(fe){for(var be=[],Ae=this.series.length-1;0<=Ae;Ae--)(this.series[Ae].getXAxis()==fe||this.series[Ae].getYAxis()==fe)&&be.push(this.series[Ae]);return be}updateDataMinMaxAxes(fe){var be=['bottom','top','left','right'],Ae,Me,ke,_e;for(Me=0,ke=be.length;Me<ke;Me++)for(_e=this.axis[be[Me]].length-1;0<=_e;_e--)(Ae=this.axis[be[Me]][_e],2>Me?'x':'y',!Ae.disabled)&&(Ae.setMinValueData(this.getBoundaryAxis(this.axis[be[Me]][_e],'min',fe)),Ae.setMaxValueData(this.getBoundaryAxis(this.axis[be[Me]][_e],'max',fe)))}_applyToAxes(fe,be,Ae,Me){var ke=[],_e=0,Se;for((Ae||void 0==Ae)&&(ke.push('top'),ke.push('bottom')),(Me||void 0==Me)&&(ke.push('left'),ke.push('right')),Se=ke.length;_e<Se;_e++)this._applyToAxis(typeof fe).call(this,ke[_e],fe,be)}findAxesLinkedTo(fe){var be=[];return this._applyToAxes(function(Ae){Ae.linkedToAxis&&Ae.linkedToAxis.axis==fe&&be.push(Ae)},{},fe instanceof this.getConstructor('graph.axis.x'),fe instanceof this.getConstructor('graph.axis.y')),be}_axisHasChanged(){this._axesHaveChanged=!0}newSerie(fe,be,Ae){let Me;return('object'==typeof be||Ae||(Ae=be,be={}),Ae||(Ae=xe.SERIE_LINE),Me=this.getSerie(fe))?Me:(Me=V(this,fe,be,Ae))?(this.series.push(Me),this.emit('newSerie',Me),Me):void 0}getSerie(fe){if('number'==typeof fe)return this.series[fe]||!1;for(var be=0,Ae=this.series.length;be<Ae;be++)if(this.series[be].getName()==fe)return this.series[be];return!1}getSeries(){return this.series}drawSerie(fe,be){if(!fe.draw)throw'Serie has no method draw';fe.draw(be)}drawSeries(fe){if(this.width&&this.height)for(var be=this.series.length-1;0<=be;be--)this.series[be].isShown()&&this.drawSerie(this.series[be],fe)}resetSeries(){this.removeSeries()}killSeries(){this.resetSeries()}removeSeries(){for(;this.series[0];)this.series[0].kill(!0);this.series=[],this.legend&&this.legend.update()}selectSerie(fe,be){'object'==typeof fe||(fe=this.getSerie(fe));this.selectedSerie==fe&&this.selectedSerie.selectionType==be||(this.selectedSerie!==fe&&this.unselectSerie(fe),this.selectedSerie=fe,this.triggerEvent('onSelectSerie',fe),fe.select(be||'selected'))}getSelectedSerie(){return this.selectedSerie}unselectSerie(fe){fe.unselect(),this.selectedSerie=!1,this.triggerEvent('onUnselectSerie',fe)}getShapesOfSerie(fe){for(var be=[],Ae=this.shapes.length-1;0<=Ae;Ae--)this.shapes[Ae].getSerie()==fe&&be.push(this.shapes[Ae]);return be}makeToolbar(fe){var be=this.getConstructor('graph.toolbar');return be?this.toolbar=new be(this,fe):de.throwError('No constructor exists for toolbar')}getShapes(){return this.shapes||[]}newShape(fe,be,Ae,Me){var ke=this;if(this.prevent(!1),!Ae&&(this.emit('beforeNewShape',be),this.prevent(!1)))return!1;'object'==typeof fe&&(Ae=be,be=fe,fe=be.type),be=be||{},be._id=de.guid();var _e;if(_e='function'==typeof fe?fe:this.getConstructor('graph.shape.'+fe),!_e)return de.throwError('No constructor for this shape');var Se=new _e(this,be);if(!Se)return de.throwError('Failed to construct shape.');if(Se.type=fe,Se.graph=this,Se._data=be,Se.init(this,Me),be.position)for(var Pe=0,Ce=be.position.length;Pe<Ce;Pe++)Se.setPosition(new le.default(be.position[Pe]),Pe);if(void 0!==be.properties&&Se.setProperties(be.properties),void 0!==be.fillColor&&Se.setFillColor(be.fillColor),void 0!==be.fillOpacity&&Se.setFillOpacity(be.fillOpacity),void 0!==be.strokeColor&&Se.setStrokeColor(be.strokeColor),void 0!==be.strokeWidth&&Se.setStrokeWidth(be.strokeWidth),void 0!==be.layer&&Se.setLayer(be.layer),!0==be.locked&&Se.lock(),!0==be.movable&&Se.movable(),!0==be.selectable&&Se.selectable(),!0==be.resizable&&Se.resizable(),void 0!==be.attributes&&Se.setProp('attributes',be.attributes),void 0!==be.handles&&Se.setProp('handles',be.handles),void 0!==be.selectOnMouseDown&&Se.setProp('selectOnMouseDown',!0),void 0!==be.selectOnClick&&Se.setProp('selectOnClick',!0),void 0!==be.highlightOnMouseOver&&Se.setProp('highlightOnMouseOver',!0),be.labelEditable&&Se.setProp('labelEditable',be.labelEditable),be.labels&&!be.label&&(be.label=be.labels),void 0!==be.label){Array.isArray(be.label)||(be.label=[be.label]);for(var Pe=0,Ce=be.label.length;Pe<Ce;Pe++)Se.showLabel(Pe),Se.setLabelText(be.label[Pe].text,Pe),Se.setLabelPosition(be.label[Pe].position,Pe),Se.setLabelColor(be.label[Pe].color||'black',Pe),Se.setLabelSize(be.label[Pe].size,Pe),Se.setLabelAngle(be.label[Pe].angle||0,Pe),Se.setLabelBaseline(be.label[Pe].baseline||'no-change',Pe),Se.setLabelAnchor(be.label[Pe].anchor||'start',Pe)}return Se.createHandles(),this.shapes.push(Se),Ae||this.emit('newShape',Se,be),Se}newPosition(){return new le.default(...arguments)}redrawShapes(){for(var fe=0,be=this.shapes.length;fe<be;fe++)this.shapes[fe].redraw()}removeShapes(){for(var fe=0,be=this.shapes.length;fe<be;fe++)this.shapes[fe]&&this.shapes[fe].kill&&this.shapes[fe].kill(!0);this.shapes=[]}selectShape(fe,be){if(fe){if(-1<this.selectedShapes.indexOf(fe))return!1;if(!fe.isSelectable())return!1;be||this.emit('beforeShapeSelect',fe),this.prevent(!1)||(0<this.selectedShapes.length&&this.options.shapesUniqueSelection&&this.unselectShapes(be),fe._select(be),this.selectedShapes.push(fe),!be&&this.emit('shapeSelect',fe))}}unselectShape(fe,be){if(-1!=this.selectedShapes.indexOf(fe))return be||this.emit('beforeShapeUnselect',fe),this.cancelUnselectShape?void(this.cancelUnselectShape=!1):void(fe._unselect(),this.selectedShapes.splice(this.selectedShapes.indexOf(fe),1),!be&&this.emit('shapeUnselect',fe))}unselectShapes(fe){for(;this.selectedShapes[0];)this.unselectShape(this.selectedShapes[0],fe);return this}_removeShape(fe){this.shapes.splice(this.shapes.indexOf(fe),1)}appendShapeToDom(fe){this.getLayer(fe.getLayer(),'shape').appendChild(fe.group)}removeShapeFromDom(fe){this.getLayer(fe.getLayer(),'shape').removeChild(fe.group)}appendSerieToDom(fe){this.getLayer(fe.getLayer(),'serie').appendChild(fe.groupMain)}removeSerieFromDom(fe){this.getLayer(fe.getLayer(),'serie').removeChild(fe.groupMain)}getLayer(fe,be){if(!this.layers[fe]){this.layers[fe]=[],this.layers[fe][0]=document.createElementNS(this.ns,'g'),this.layers[fe][0].setAttribute('data-layer',fe),this.layers[fe][1]=document.createElementNS(this.ns,'g'),this.layers[fe][2]=document.createElementNS(this.ns,'g'),this.layers[fe][0].appendChild(this.layers[fe][1]),this.layers[fe][0].appendChild(this.layers[fe][2]);for(var Ae=1,Me;!(Me=this.layers[fe-Ae])&&0<=fe-Ae;)Ae++;Me?Me.nextSibling?this.plotGroup.insertBefore(this.layers[fe][0],Me.nextSibling):this.plotGroup.appendChild(this.layers[fe][0]):this.plotGroup.insertBefore(this.layers[fe][0],this.plotGroup.firstChild)}return this.layers[fe]['shape'==be?2:1]}focus(){this._dom.focus()}elementMoving(fe){this.bypassHandleMouse=fe}stopElementMoving(fe){fe&&fe==this.bypassHandleMouse?this.bypassHandleMouse=!1:!fe&&(this.bypassHandleMouse=!1)}_makeClosingLines(){this.closingLines={};for(var fe=['top','bottom','left','right'],be=0;4>be;be++){var Ae=document.createElementNS(this.ns,'line');Ae.setAttribute('stroke','black'),Ae.setAttribute('shape-rendering','crispEdges'),Ae.setAttribute('stroke-linecap','square'),Ae.setAttribute('display','none'),this.closingLines[fe[be]]=Ae,this.graphingZone.appendChild(Ae)}}isActionAllowed(fe,be){if(be.type===fe.type||void 0===be.type&&'mousedown'===fe.type||('wheel'===fe.type||'mousewheel'===fe.type)&&'mousewheel'==be.type)return be.key&&be.key!==fe.keyCode&&{backspace:8,enter:13,tab:9,shift:16,ctrl:17,alt:18,pause:19,escape:27,up:33,down:34,left:37,right:39}[be.key]!==fe.keyCode?void 0:(void 0===be.shift&&(be.shift=!1),void 0===be.ctrl&&(be.ctrl=!1),void 0===be.meta&&(be.meta=!1),void 0===be.alt&&(be.alt=!1),fe.shiftKey==be.shift&&fe.ctrlKey==be.ctrl&&fe.metaKey==be.meta&&fe.altKey==be.alt)}forcePlugin(fe){this.forcedPlugin=fe}unforcePlugin(){this.forcedPlugin=!1}_pluginsExecute(fe,be){for(var Ae in this.plugins)this.plugins[Ae]&&this.plugins[Ae][fe]&&this.plugins[Ae][fe].apply(this.plugins[Ae],be)}_pluginExecute(fe,be,Ae){!fe||this.plugins[fe]&&this.plugins[fe][be]&&this.plugins[fe][be].apply(this.plugins[fe],Ae)}pluginYieldActiveState(){this.activePlugin=!1}_serieExecute(fe,be,Ae){'object'!=typeof serie&&(serie=this.getSerie(serie)),'function'==typeof serie[be]&&serie.apply(serie,Ae)}_pluginsInit(){var fe,be,Ae;for(var Me in this.options.plugins)if(be=Me,Ae=this.options.plugins[Me],fe=this.getConstructor('graph.plugin.'+be),fe){var ke=de.extend(!0,{},fe.defaults(),Ae);this.plugins[be]=new fe(ke),de.mapEventEmission(this.plugins[be].options,this.plugins[be]),this.plugins[be].init(this,Ae)}else de.throwError('Plugin "'+be+'" has not been registered')}getPlugin(fe){var be=this.plugins[fe];return be?be:de.throwError('Plugin "'+fe+'" has not been loaded or properly registered')}triggerEvent(){var fe=arguments[0],be=Array.prototype.splice.apply(arguments,[0,1]);if('function'==typeof this.options[fe])return this.options[fe].apply(this,arguments)}makeLegend(fe){if(this.legend)return this.legend;var be=this.getConstructor('graph.legend');if(be)this.legend=new be(this,fe);else return de.throwError('Graph legend is not available as it has not been registered');return this.legend}updateLegend(fe=!1){if(this.legend)return this.legend.update(fe),this}getLegend(){return this.legend?this.legend:void 0}requireLegendUpdate(){this.legend&&this.legend.requireDelayedUpdate()}orthogonalProjectionSetup(){this.options.zAxis=de.extend(!0,{maxZ:10,minZ:0,shiftX:-25,shiftY:-15,xAxis:this.getXAxis(),yAxis:this.getYAxis()})}orthogonalProjectionUpdate(){this.zAxis||(this.zAxis={g:document.createElementNS(this.ns,'g'),l:document.createElementNS(this.ns,'line')},this.zAxis.g.appendChild(this.zAxis.l),this.groupGrids.appendChild(this.zAxis.g));let fe=this.options.zAxis.xAxis,be=this.options.zAxis.yAxis;var Ae=fe.getMinPx(),Me=be.getMinPx(),ke=fe.getZProj(this.options.zAxis.maxZ),_e=be.getZProj(this.options.zAxis.maxZ);this.zAxis.l.setAttribute('stroke','black'),this.zAxis.l.setAttribute('x1',Ae),this.zAxis.l.setAttribute('x2',Ae+ke),this.zAxis.l.setAttribute('y1',Me),this.zAxis.l.setAttribute('y2',Me+_e),this.updateDataMinMaxAxes(!0);var Se=this.series.map(Ce=>{return[Ce.getZPos(),Ce]});Se.sort((Ce,ve)=>{return ve[0]-Ce[0]});let Pe=0;Se.forEach(Ce=>{Ce[1].setLayer(Pe),this.appendSerieToDom(Ce[1]),Pe++}),this.drawSeries(!0)}kill(){this._dom.removeChild(this.dom)}_removeSerie(fe){this.series.splice(this.series.indexOf(fe),1)}contextListen(fe,be,Ae){if(this,this.options.onContextMenuListen)return this.options.onContextMenuListen(fe,be,Ae)}lockShapes(){this.shapesLocked=!0;for(var fe=0,be=this.shapes.length;fe<be;fe++)this.shapes[fe].moving=!1,this.shapes[fe].resizing=!1}unlockShapes(){this.shapesLocked=!1}prevent(fe){var be=this.prevented;return-1!=fe&&(this.prevented=void 0==fe||fe),be}_getXY(fe){var be=fe.pageX,Ae=fe.pageY,Me=this.offsetCached||de.getOffset(this._dom);return be-=Me.left,Ae-=Me.top,{x:be,y:Ae}}_resize(){this.width&&this.height&&(this.getDrawingWidth(),this.getDrawingHeight(),this.sizeSet=!0,this.dom.setAttribute('width',this.width),this.dom.setAttribute('height',this.height),this.domTitle.setAttribute('x',this.width/2),this.requireLegendUpdate(),this.draw(!0))}_doDom(){this.dom=document.createElementNS(this.ns,'svg'),this.dom.setAttributeNS('http://www.w3.org/2000/xmlns/','xmlns:xlink','http://www.w3.org/1999/xlink'),de.setAttributeTo(this.dom,{xmlns:this.ns,'font-family':this.options.fontFamily,'font-size':this.options.fontSize}),this._dom.appendChild(this.dom),this._dom.setAttribute('tabindex',1),this._dom.style.outline='none',this.defs=document.createElementNS(this.ns,'defs'),this.dom.appendChild(this.defs),this.groupEvent=document.createElementNS(this.ns,'g'),this.rectEvent=document.createElementNS(this.ns,'rect'),de.setAttributeTo(this.rectEvent,{'pointer-events':'fill',fill:'transparent'}),this.groupEvent.appendChild(this.rectEvent),this.dom.appendChild(this.groupEvent),this.domTitle=document.createElementNS(this.ns,'text'),this.setTitle(this.options.title),de.setAttributeTo(this.domTitle,{'text-anchor':'middle',y:20}),this.groupEvent.appendChild(this.domTitle),this.graphingZone=document.createElementNS(this.ns,'g'),this.updateGraphingZone(),this.groupEvent.appendChild(this.graphingZone),this.axisGroup=document.createElementNS(this.ns,'g'),this.graphingZone.appendChild(this.axisGroup),this.groupGrids=document.createElementNS(this.ns,'g'),this.groupPrimaryGrids=document.createElementNS(this.ns,'g'),this.groupSecondaryGrids=document.createElementNS(this.ns,'g'),this.axisGroup.appendChild(this.groupGrids),this.groupGrids.appendChild(this.groupSecondaryGrids),this.groupGrids.appendChild(this.groupPrimaryGrids),this.plotGroup=document.createElementNS(this.ns,'g'),this.graphingZone.appendChild(this.plotGroup),this.layers=[],this._makeClosingLines(),this.clip=document.createElementNS(this.ns,'clipPath'),this.clip.setAttribute('id','_clipplot'+this._creation),this.defs.appendChild(this.clip),this.clipRect=document.createElementNS(this.ns,'rect'),this.clip.appendChild(this.clipRect),this.clip.setAttribute('clipPathUnits','userSpaceOnUse'),this.markerArrow=document.createElementNS(this.ns,'marker'),this.markerArrow.setAttribute('viewBox','0 0 10 10'),this.markerArrow.setAttribute('id','arrow'+this._creation),this.markerArrow.setAttribute('refX','6'),this.markerArrow.setAttribute('refY','5'),this.markerArrow.setAttribute('markerUnits','strokeWidth'),this.markerArrow.setAttribute('markerWidth','8'),this.markerArrow.setAttribute('markerHeight','6'),this.markerArrow.setAttribute('orient','auto');var fe=document.createElementNS(this.ns,'path');fe.setAttribute('d','M 0 0 L 10 5 L 0 10 z'),this.markerArrow.appendChild(fe),this.defs.appendChild(this.markerArrow),this.markerHorizontalSplit=document.createElementNS(this.ns,'marker'),this.markerHorizontalSplit.setAttribute('viewBox','0 0 6 8'),this.markerHorizontalSplit.setAttribute('id','horionzalsplit_'+this.getId()),this.markerHorizontalSplit.setAttribute('refX','3'),this.markerHorizontalSplit.setAttribute('refY','4'),this.markerHorizontalSplit.setAttribute('markerUnits','strokeWidth'),this.markerHorizontalSplit.setAttribute('markerWidth','6'),this.markerHorizontalSplit.setAttribute('markerHeight','8');var be=document.createElementNS(this.ns,'line');be.setAttribute('x1','0'),be.setAttribute('y1','8'),be.setAttribute('x2','6'),be.setAttribute('y2','0'),be.setAttribute('stroke','black'),this.markerHorizontalSplit.appendChild(be),this.defs.appendChild(this.markerHorizontalSplit),this.markerVerticalSplit=document.createElementNS(this.ns,'marker'),this.markerVerticalSplit.setAttribute('viewBox','0 0 8 6'),this.markerVerticalSplit.setAttribute('id','verticalsplit_'+this.getId()),this.markerVerticalSplit.setAttribute('refX','4'),this.markerVerticalSplit.setAttribute('refY','3'),this.markerVerticalSplit.setAttribute('markerUnits','strokeWidth'),this.markerVerticalSplit.setAttribute('markerWidth','8'),this.markerVerticalSplit.setAttribute('markerHeight','6');var be=document.createElementNS(this.ns,'line');be.setAttribute('x1','0'),be.setAttribute('y1','0'),be.setAttribute('x2','8'),be.setAttribute('y2','6'),be.setAttribute('stroke','black'),this.markerVerticalSplit.appendChild(be),this.defs.appendChild(this.markerVerticalSplit),this.vertLineArrow=document.createElementNS(this.ns,'marker'),this.vertLineArrow.setAttribute('viewBox','0 0 10 10'),this.vertLineArrow.setAttribute('id','verticalline'+this._creation),this.vertLineArrow.setAttribute('refX','0'),this.vertLineArrow.setAttribute('refY','5'),this.vertLineArrow.setAttribute('markerUnits','strokeWidth'),this.vertLineArrow.setAttribute('markerWidth','20'),this.vertLineArrow.setAttribute('markerHeight','10'),this.vertLineArrow.setAttribute('orient','auto'),this.vertLineArrow.setAttribute('stroke-width','1px');var Ae=document.createElementNS(this.ns,'path');Ae.setAttribute('d','M 0 -10 L 0 10'),Ae.setAttribute('stroke','black'),this.vertLineArrow.appendChild(Ae),this.defs.appendChild(this.vertLineArrow),this.bypassHandleMouse=!1}updateGraphingZone(){de.setAttributeTo(this.graphingZone,{transform:'translate('+this.options.paddingLeft+', '+this.options.paddingTop+')'}),this._sizeChanged=!0}getDrawingSpaceWidth(){return()=>this.drawingSpaceWidth}getDrawingSpaceHeight(){return()=>this.drawingSpaceHeight}getDrawingSpaceMinX(){return()=>this.drawingSpaceMinX}getDrawingSpaceMinY(){return()=>this.drawingSpaceMinY}getDrawingSpaceMaxX(){return()=>this.drawingSpaceMaxX}getDrawingSpaceMaxY(){return()=>this.drawingSpaceMaxY}trackingLine(fe){var be=this;return fe&&(this.options.trackingLine=fe),'individual'==fe.mode?fe.series&&fe.series.map(function(Ae){'object'!=typeof Ae.serie&&(Ae.serie=this.getSerie(Ae.serie)),be.addSerieToTrackingLine(Ae.serie,Ae)}):fe.series.map(function(Ae){Ae.serie.disableTracking()}),this.trackingLine=this.newShape('line',de.extend(!0,{position:[{y:'min'},{y:'max'}],stroke:'black',layer:-1},fe.trackingLineShapeOptions)),this.trackingLine.draw(),this.trackingLine}addSerieToTrackingLine(fe,be){var Ae=this;this.options.trackingLine||this.trackingLine({mode:'individual'}),fe.enableTracking(function(Me,ke,_e,Se){ke&&(Ae.trackingLine.show(),ke.xIndexClosest,Ae.trackingLine.getPosition(0).x=Me.getData()[0][2*ke.closestIndex],Ae.trackingLine.getPosition(1).x=Me.getData()[0][2*ke.closestIndex],Ae.trackingLine.redraw(),Me._trackingLegend=he(Ae,{serie:Me},_e,Se,Me._trackingLegend,be.textMethod?be.textMethod:function(Pe){for(var Ce in Pe)return Pe[Ce].serie.serie.getName()+': '+Pe[Ce].serie.serie.getYAxis().valueToHtml(Pe[Ce].yValue)},Ae.trackingLine.getPosition(0).x),Me._trackingLegend.style.display='block')},function(Me){Ae.trackingLine.hide(),Me.trackingShape&&Me.trackingShape.hide(),Me._trackingLegend&&(Me._trackingLegend.style.display='none'),Me._trackingLegend=he(Ae,{serie:Me},!1,!1,Me._trackingLegend,!1,!1)})}static fromSchema(fe,be){var Me={},ke={left:[],top:[],right:[],bottom:[]},Ae;return fe.title&&(Me.title=fe.title),fe.axis&&fe.axis.map(function(_e){_e.type||de.throwError('Axis type is required (top, bottom, left or right)');var Se={};_e.label&&(Se.labelValue=_e.label),void 0!==_e.unit&&(Se.unit=_e.unit),void 0!==_e.unitWrapperAfter&&(Se.unitWrapperAfter=_e.unitWrapperAfter),void 0!==_e.unitWrapperBefore&&(Se.unitWrapperBefore=_e.unitWrapperBefore),void 0!==_e.min&&(Se.forcedMin=_e.min),void 0!==_e.max&&(Se.forcedMax=_e.max),void 0!==_e.flip&&(Se.flipped=_e.flip),ke[_e.type].push(Se),_e._jsGraphIndex=ke[_e.type].length-1}),Ae=new xe(be,Me,ke),fe.width&&Ae.setWidth(fe.width),fe.height&&Ae.setHeight(fe.width),Ae._resize(),fe.data&&fe.data.map(function(_e){var Se=_e.type,Ce={},Pe,ve;switch(_e.type){case'bar':de.throwError('Bar charts not supported'),Se=!1;break;case'scatter':Se=xe.SERIE_SCATTER;break;case'box':Se=xe.SERIE_BOX,('x'==_e.orientation||'y'==_e.orientation)&&(Ce.orientation=_e.orientation);break;default:Se=xe.SERIE_LINE;}if(!Se)return void de.throwError('No valid serie type was found');if(Pe=Ae.newSerie(_e.id||_e.label||de.guid(),Ce,Se),_e.lineStyle&&_e.lineStyle.map(function(Ee){var Xe={};Ee.styleName=Ee.styleName||'unselected',Se===xe.SERIE_LINE?(void 0!==Ee.lineWidth&&(Xe.lineWidth=Ee.lineWidth),void 0!==Ee.color&&(Xe.lineColor=Ee.color),Ee.lineStyle&&(Xe.lineStyle=Ee.lineStyle),Pe.setStyle(Xe,Ee.styleName)):void 0}),_e.style&&_e.style.map(function(Ee){Ee.styleName=Ee.styleName||'unselected',Array.isArray(Ee.styles)||(Ee.styles=[Ee.styles]);var Xe=Ee.styles.map(function(De){switch(Se){case xe.SERIE_LINE:return{type:De.shape,zoom:De.zoom,strokeWidth:De.lineWidth,strokeColor:De.lineColor,fillColor:De.color,points:De.points};break;case xe.SERIE_BOX:return De;break;case xe.SERIE_SCATTER:}});Se===xe.SERIE_LINE?Pe.setMarkers(Xe,Ee.styleName):Se===xe.SERIE_SCATTER?Pe.setStyle(Xe,{},Ee.styleName):Se===xe.SERIE_BOX?Pe.setStyle(Xe[0],Ee.stylename):void 0}),_e.errorX||_e.errorY){var we=[];if(_e.errorX)for(var Le=0,Te=_e.errorX.length;Le<Te;Le++)we[Le]=we[Le]||[[],[]],we[Le][0][0]=_e.errorX[Le];if(_e.errorY)for(var Le=0,Te=_e.errorY.length;Le<Te;Le++)we[Le]=we[Le]||[[]],we[Le][1][0]=_e.errorY[Le];Pe.setDataError(we).setErrorStyle([{type:'bar',x:{},y:{}}])}switch(fe.axis?(ve=fe.axis[_e.xAxis],ve&&('top'===ve.type||'bottom'===ve.type)?'top'==ve.type?Pe.setXAxis(Ae.getTopAxis(ve._jsGraphIndex)):'bottom'==ve.type&&Pe.setXAxis(Ae.getBottomAxis(ve._jsGraphIndex)):(de.warn('No x axis found. Setting automatically'),Pe.setXAxis(Ae.getXAxis(0))),ve=fe.axis[_e.yAxis],ve&&('left'===ve.type||'right'===ve.type)?'left'==ve.type?Pe.setYAxis(Ae.getLeftAxis(ve._jsGraphIndex)):'right'==ve.type&&Pe.setYAxis(Ae.getRightAxis(ve._jsGraphIndex)):(de.warn('No y axis found. Setting automatically'),Pe.setYAxis(Ae.getYAxis(0)))):(de.warn('No axes found. Setting automatically'),Pe.autoAxis()),Se){case xe.SERIE_BOX:Pe.setData(_e.boxes);break;default:case xe.SERIE_SCATTER:case xe.SERIE_LINE:Pe.setData([{x:_e.x,y:_e.y}]);}}),Ae.autoscaleAxes(),Ae.draw(),Ae}exportToSchema(){let fe={};fe.title=this.options.title,fe.width=this.getWidth(),fe.height=this.getHeight();let be=[],Ae={x:[],y:[]};['top','bottom','left','right'].map(_e=>{this.axis[_e]&&(be=be.concat(this.axis[_e].map(Se=>{return{type:_e,label:Se.options.label,unit:Se.options.unit,min:Se.options.forcedMin,max:Se.options.forcedMax,flip:Se.options.flipped}})),'top'==_e||'bottom'==_e?Ae.x=Ae.x.concat(this.axis[_e]):Ae.y=Ae.y.concat(this.axis[_e]))}),fe.axis=be;let Me=_e=>{switch(_e){case xe.SERIE_LINE:return'line';break;case xe.SERIE_BAR:return'bar';break;case xe.SERIE_SCATTER:return'scatter';}},ke=(_e,Se)=>{let Pe=[];switch(_e.getType()){case xe.SERIE_LINE:for(var Ce=0;Ce<_e.data.length;Ce++)for(var ve=0;ve<_e.data[Ce].length-1;ve+=2)Pe.push(_e.data[Ce][ve+(Se&&_e.isFlipped()||!Se&&!_e.isFlipped()?1:0)]);break;case xe.SERIE_SCATTER:for(var ve=0;ve<_e.data.length-1;ve+=2)Pe.push(_e.data[Ce+(Se&&_e.isFlipped()||!Se&&!_e.isFlipped()?1:0)]);}return Pe};return fe.data=[].concat(this.series.map(_e=>{let Se=[],Pe=[];if(_e.getType()==xe.SERIE_LINE)for(var Ce in _e.styles){Pe.push({styleName:Ce,color:_e.styles[Ce].lineColor,lineWidth:_e.styles[Ce].lineWidth,lineStyle:_e.styles[Ce].lineStyle});let ve={styleName:Ce,styles:[]};Se.push(ve),ve.styles=ve.styles.concat((_e.styles[Ce].markers||[]).map(we=>{return{shape:we.type,zoom:we.zoom,lineWidth:we.strokeWidth,lineColor:we.strokeColor,color:we.fillColor,points:we.points}}))}return{label:_e.getLabel(),id:_e.getName(),type:Me(_e.getType()),x:ke(_e,!0),y:ke(_e,!1),xAxis:Ae.x.indexOf(_e.getXAxis()),yAxis:Ae.y.indexOf(_e.getYAxis()),style:Se,lineStyle:Pe}})),fe}static registerConstructor(fe,be){return ce.has(fe)?de.throwError('Constructor '+be+' already exists.'):void ce.set(fe,be)}static getConstructor(fe,be){return ce.has(fe)?ce.get(fe):!be&&de.throwError('Constructor "'+fe+'" doesn\'t exist')}static newWaveform(){return new ue.default(...arguments)}static waveform(){return new ue.default(...arguments)}}xe.prototype.getConstructor=xe.getConstructor;;;;var he=function(fe,be,Ae,Me,ke,_e,Se){var Pe=!1;Array.isArray(be)||(be=[be]);var Ce=[];if(ke||(Pe=!0,ke=J(fe)),be.map(function(we){var Le=we.serie.handleMouseMove(Se,!1);return Le&&_e?void(0<we.withinPx&&1e-14<Math.abs(Ae-fe.options.paddingLeft-we.serie.getXAxis().getPx(we.serie.getData()[0][2*Le.xIndexClosest]))-we.withinPx||0<we.withinVal&&Math.abs(we.serie.getXAxis().getVal(Ae-fe.options.paddingLeft)-we.serie.getData()[0][2*Le.xIndexClosest])-we.withinVal>we.serie.getXAxis().getVal(Ae-fe.options.paddingLeft)/100000?we.serie.trackingShape&&we.serie.trackingShape.hide():(Ce[we.serie.getName()]={xIndex:Le.xIndexClosest,yValue:we.serie.getData()[0][2*Le.xIndexClosest+1],xValue:we.serie.getData()[0][2*Le.xIndexClosest],serie:we,index:Le},!we.serie.trackingShape&&(we.serie.trackingShape=fe.newShape('ellipse',{fillColor:we.serie.getLineColor(),strokeColor:'White',strokeWidth:we.serie.getLineWidth()}).setSerie(we.serie).setProp('rx',3*we.serie.getLineWidth()).setProp('ry',3*we.serie.getLineWidth()).forceParentDom(we.serie.groupMain).draw()),we.serie.trackingShape.show(),we.serie.trackingShape.getPosition(0).x=we.serie.getData()[0][2*Le.xIndexClosest],we.serie.trackingShape.redraw())):(we.serie.trackingShape&&we.serie.trackingShape.hide(),ke)}),0==Object.keys(Ce).length||!_e)ke.style.display='none';else{'none'==ke.style.display||Pe?me(fe,ke,Ae,Me,!0):ye(fe,ke,Ae,Me),ke.style.display='block';var ve=_e(Ce,Se,Ae,Me);ke.innerHTML=ve}return ke},me=function(fe,be,Ae,Me,ke){function _e(){var we=(Date.now()-Se)/200;1<we&&(we=1),be.style.marginLeft=(Ae-Ce)*we+Ce+'px',be.style.marginTop=(Me-ve)*we+ve+'px',1>we&&window.requestAnimationFrame(_e)}var Se=Date.now(),Pe=be.offsetHeight,Ce=parseInt(be.style.marginLeft.replace('px','')||0),ve=parseInt(be.style.marginTop.replace('px','')||0);return Ae=Ae>fe.getWidth()/2?Ae-Ae%10-20-be.offsetWidth:Ae-Ae%10+30,Me=Me-Me%10+Pe/2,ke?(be.style.marginLeft=Ae+'px',void(be.style.marginTop=Me+'px')):void window.requestAnimationFrame(_e)},ye=de.debounce(me,50);xe.SERIE_LINE=Symbol(),xe.SERIE_SCATTER=Symbol(),xe.SERIE_CONTOUR=Symbol(),xe.SERIE_BAR=Symbol(),xe.SERIE_BOX=Symbol(),xe.SERIE_ZONE=Symbol(),xe.SERIE_LINE_COLORED=Symbol(),xe.SERIE_ZONE=Symbol(),xe.SERIE_DENSITYMAP=Symbol(),xe.SERIE_LINE_3D=Symbol(),xe.SERIE_ZONE_3D=Symbol(),xe.TICKS_OUTSIDE=Symbol(),xe.TICKS_INSIDE=Symbol(),xe.TICKS_CENTERED=Symbol(),E.default=xe})},function(u,A){var S,P,C;(function(T,E){P=[A],S=E,C='function'==typeof S?S.apply(A,P):S,!(C!==void 0&&(u.exports=C));var X})(this,function(T){'use strict';function E(I){return I&&I.indexOf&&-1<I.indexOf('px')&&parseInt(I.replace('px',''))}function X(I){return!isNaN(parseFloat(I))&&isFinite(I)}Object.defineProperty(T,'__esModule',{value:!0});;class Y{constructor(I,F,O,V){'object'==typeof I?(this.x=I.x,this.y=I.y,this.dx=I.dx,this.dy=I.dy):(this.x=I,this.y=F,this.dx=O,this.dy=V)}compute(I,F,O,V){if(I&&F&&O&&I.hasXAxis&&I.hasYAxis||I.throw(),!I.hasXAxis(F))throw'Graph does not contain the x axis that was used as a parameter';if(!I.hasYAxis(O))throw'Graph does not contain the x axis that was used as a parameter';return this._compute(I,F,O,V)}_compute(I,F,O,V){var W=this._relativeTo;if(W)var B=W._compute(I,F,O,V);var G={x:!1,y:!1},R;for(var Z in F||(F=I.getXAxis()),O||(O=I.getYAxis()),G){var U='x'==Z?F:O,Q=this[Z],K=this['d'+Z];if(void 0!==Q||(void 0===K||void 0!==W)&&void 0!==W)void 0!==Q&&(G[Z]=this.getPx(Q,U));else if('x'==Z){if(void 0===K)continue;G[Z]=W?W[Z]:U.getPos(0)}else if(void 0!==this.x&&V)if(!1!==E(this.x))console.warn('You have defined x in px and not y. Makes no sense. Returning 0 for y'),G[Z]=0;else{var J=V.searchClosestValue(this.x);J?G[Z]=V.getY(J.yMin):(console.warn('Could not find y position for x = '+this.x+' on serie "'+V.getName()+'". Returning 0 for y.'),G[Z]=0)}if(void 0!==K){var $=void 0!==Q||void 0==B||void 0==B[Z]?G[Z]:B[Z];if('y'==Z&&B&&void 0!==B.x&&void 0==B.y){if(!V)throw'Error. No serie exists. Cannot find y value';var J=V.searchClosestValue(W.x);J&&($=V.getY(J.yMin))}!1===(R=E(K))?!1===(R=this._parsePercent(K))?U&&(G[Z]=$+U.getRelPx(K)):G[Z]=$+this._getPositionPx(R,!0,U,I):G[Z]=$+R}}return G}_getPositionPx(I,F,O,V){var W;if(!1!==(W=E(I)))return W;return!1===(W=this._parsePercent(I))?O?O.getPos(I):void 0:W/100*(F?V.getDrawingWidth():V.getDrawingHeight())}_parsePercent(I){return I&&I.indexOf&&-1<I.indexOf('%')&&I}getDeltaPx(I,F){var O;return!1===(O=E(I))?F.getRelPx(I)+'px':O+'px'}deltaPosition(I,F,O){I='y'==I?'y':'x';var V=this[I],W=this['d'+I],B,R;if(V!==void 0)!1===(B=E(V))?(V=this.getValPosition(V,O),this[I]=!1===(R=E(F))?V+F:V+O.getRelVal(R)):!1===(R=E(F))?this[I]=B+O.getRelPx(F)+'px':this[I]=B+R+'px';else if(W!==void 0){if('y'==I&&V===void 0&&!this._relativeTo)return;!1===(B=E(W))?(W=this.getValPosition(W,O),this['d'+I]=!1===(R=E(F))?W+F:W+O.getRelVal(R)):!1===(R=E(F))?this['d'+I]=B+O.getRelPx(F)+'px':this['d'+I]=B+R+'px'}}getValPosition(I,F){return'max'==I?F.getMaxValue():'min'==I?F.getMinValue():I}getPx(I,F,O){var V;if('function'==typeof I)return I(F,O);if(!1!==(V=E(I)))return V;if(!1!==(V=this._parsePercent(I)))return V;if(F){if('min'==I)return F.getMinPx();if('max'==I)return F.getMaxPx();if(O)return F.getRelPx(I);if(X(I))return F.getPos(I)}}getPxRel(I,F){return this.getPx(I,F,!0)}relativeTo(I){return this._relativeTo=Y.check(I),this}static check(I,F){if(I instanceof Y)return I;var O=new Y(I);if(I&&I.relativeTo){const V=F(I.relativeTo);V&&O.relativeTo(V)}return O}}T.default=Y})},function(u,A){var S,P,C;(function(T,E){P=[A],S=E,C='function'==typeof S?S.apply(A,P):S,!(C!==void 0&&(u.exports=C));var X})(this,function(T){'use strict';function E(B,R,G){return 0>G&&(G+=1),1<G&&(G-=1),G<1/6?B+6*(R-B)*G:G<1/2?R:G<2/3?B+6*((R-B)*(2/3-G)):B}function X(B,R){return B._savedAttributes&&B._savedAttributes[R]!==void 0}function Y(B,R){if(B&&B._savedAttributesIds){B._savedAttributesIds.splice(B._savedAttributesIds.indexOf(R),1),delete B._attributes[R];var G={};for(var Z in B._savedAttributes)G[Z]=B._savedAttributes[Z];;for(var Z=0,U=B._savedAttributesIds.length;Z<U;Z++)for(var Q in B._attributes[B._savedAttributesIds[Z]])G[Q]=B._attributes[B._savedAttributesIds[Z]][Q];for(var Q in G)B.setAttribute(Q,G[Q])}}function I(){var B,R,G,Z,U,Q,K=arguments[0],J=1,$=arguments.length,ee=!1;for('boolean'==typeof K?(ee=K,K=arguments[1]||{},J=2):('object'!=typeof K&&'function'!=typeof K||null==K)&&(K={});J<$;++J)if(B=arguments[J],null!=B)for(R in B)G=K[R],Z=B[R],K!==Z&&(ee&&Z&&(W(Z)||(U=V(Z)))?(U?(U=!1,Q=G&&V(G)?G:[]):Q=G&&W(G)?G:{},K[R]=I(ee,Q,Z)):'undefined'!=typeof Z&&(K[R]=Z));return K}Object.defineProperty(T,'__esModule',{value:!0}),T.setAttributeTo=function(R,G,Z){if(Z)for(var U in G)R.setAttributeNS(Z,U,G[U]);else for(U in G)R.setAttribute(U,G[U])},T.mapEventEmission=function(R,G){G||(G=this);var Z;for(var U in R)0==U.indexOf('on')&&'function'==typeof R[U]&&(Z=U.substring(2),Z=Z.substring(0,1).toLowerCase()+Z.substring(1),G.on&&function(Q){G.on(Z,function(){R[Q].apply(G,arguments)})}(U))},T.guid=function(){return'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(R){var G=0|16*Math.random(),Z='x'==R?G:8|3&G;return Z.toString(16)})},T.throwError=function(R){console.error(R)},T.warn=function(R){console.warn(R)},T.isNumeric=function(R){return!Array.isArray(R)&&0<=R-parseFloat(R)+1},T.hue2rgb=E,T.hslToRgb=function(R,G,Z){var U,Q,K;if(0==G)U=Q=K=Z;else{var J=0.5>Z?Z*(1+G):Z+G-Z*G,$=2*Z-J;U=E($,J,R+1/3),Q=E($,J,R),K=E($,J,R-1/3)}return[Math.round(255*U),Math.round(255*Q),Math.round(255*K)]},T.saveDomAttributes=function(R,G,Z){if(R)for(var U in R._savedAttributesIds=R._savedAttributesIds||[],-1<R._savedAttributesIds.indexOf(Z)&&Y(R,Z),R._savedAttributes=R._savedAttributes||{},R._attributes=R._attributes||{},R._attributes[Z]=G,R._savedAttributesIds.push(Z),G)R._savedAttributes[U]||(R._savedAttributes[U]=R.getAttribute(U)),R.setAttribute(U,G[U])},T.hasSavedAttribute=X,T.overwriteDomAttribute=function(R,G,Z){X(R,G)&&(R._savedAttributes[G]=Z)},T.restoreDomAttributes=Y,T.debounce=function(R,G,Z){var U;return function(){var Q=this,K=arguments,J=Z&&!U;clearTimeout(U),U=setTimeout(function(){U=null,Z||R.apply(Q,K)},G),J&&R.apply(Q,K)}},T.SVGParser=function(R){var G=new DOMParser,Z=G.parseFromString(R,'image/svg+xml');return Z},T.reverseArray=function(R){var G=null,Z=null,U=R.length;for(G=0,Z=U-1;G<Z;G+=1,Z-=1){var Q=R[G];R[G]=R[Z],R[Z]=Q}return R},T.getOffset=function(R){var G=R.getBoundingClientRect();return{top:G.top+document.body.scrollTop,left:G.left+document.body.scrollLeft}},T.setCSS=function(R,G){var Z=R.style;for(var U in G)Z[U]=G[U]},T.ajaxGet=function(R){return new Promise(function(G,Z){var U=new XMLHttpRequest;U.open(R.type||'GET',R.url,!0),R.json&&U.setRequestHeader('Accept','application/json'),U.onload=function(){if(200===U.status){var Q=U.responseText;R.json&&(Q=JSON.parse(Q)),G(Q)}else Z(new Error('Request error: '+U.status))},U.onerror=function(){Z(new Error('Network error: '+U.status))},U.send()})},T.extend=I,T.mix=function(R,G){for(let Z in G)G.hasOwnProperty(Z)&&(R.prototype[Z]=G[Z])},T.emptyDom=function(R){for(;R.firstChild;)R.removeChild(R.firstChild)};;;;;;;;;;;;;;;;;var F=Object.prototype.hasOwnProperty,O=Object.prototype.toString,V=function(R){return'function'==typeof Array.isArray?Array.isArray(R):'[object Array]'===O.call(R)},W=function(R){if(!R||'[object Object]'!==O.call(R))return!1;var G=F.call(R,'constructor'),Z=R.constructor&&R.constructor.prototype&&F.call(R.constructor.prototype,'isPrototypeOf');if(R.constructor&&!G&&!Z)return!1;for(var U in R);return'undefined'==typeof U||F.call(R,U)};;T.isArray=V,T.isPlainObject=W})},function(u,A){var S,P,C,P,C;(function(T,E){P=[],S=E,C='function'==typeof S?S.apply(A,P):S,!(C!==void 0&&(u.exports=C))})(this,function(){'use strict';P=[],C=function(){'use strict';function T(){}function E(I,F){for(var O=I.length;O--;)if(I[O].listener===F)return O;return-1}function X(I){return function(){return this[I].apply(this,arguments)}}var Y=T.prototype;return Y.getListeners=function(F){var O=this._getEvents(),V;if(F instanceof RegExp)for(var W in V={},O)O.hasOwnProperty(W)&&F.test(W)&&(V[W]=O[W]);else V=O[F]||(O[F]=[]);return V},Y.flattenListeners=function(F){var O=[],V;for(V=0;V<F.length;V+=1)O.push(F[V].listener);return O},Y.getListenersAsObject=function(F){var O=this.getListeners(F),V;return O instanceof Array&&(V={},V[F]=O),V||O},Y.addListener=function(F,O){var V=this.getListenersAsObject(F);for(var W in V)V.hasOwnProperty(W)&&-1===E(V[W],O)&&V[W].push('object'==typeof O?O:{listener:O,once:!1});return this},Y.on=X('addListener'),Y.addOnceListener=function(F,O){return this.addListener(F,{listener:O,once:!0})},Y.once=X('addOnceListener'),Y.defineEvent=function(F){return this.getListeners(F),this},Y.defineEvents=function(F){for(var O=0;O<F.length;O+=1)this.defineEvent(F[O]);return this},Y.removeListener=function(F,O){var V=this.getListenersAsObject(F),W;for(var B in V)V.hasOwnProperty(B)&&(W=E(V[B],O),-1!==W&&V[B].splice(W,1));return this},Y.off=X('removeListener'),Y.addListeners=function(F,O){return this.manipulateListeners(!1,F,O)},Y.removeListeners=function(F,O){return this.manipulateListeners(!0,F,O)},Y.manipulateListeners=function(F,O,V){var R=F?this.removeListener:this.addListener,G=F?this.removeListeners:this.addListeners,B;if('object'==typeof O&&!(O instanceof RegExp))for(var W in O)O.hasOwnProperty(W)&&(B=O[W])&&('function'==typeof B?R.call(this,W,B):G.call(this,W,B));else for(W=V.length;W--;)R.call(this,O,V[W]);return this},Y.removeEvent=function(F){var O=this._getEvents();if('string'==typeof F)delete O[F];else if(F instanceof RegExp)for(var V in O)O.hasOwnProperty(V)&&F.test(V)&&delete O[V];else delete this._events;return this},Y.removeAllListeners=X('removeEvent'),Y.emitEvent=function(F,O){var V=this.getListenersAsObject(F),W,B,G;for(var R in V)if(V.hasOwnProperty(R))for(B=V[R].length;B--;)W=V[R][B],!0===W.once&&this.removeListener(F,W.listener),G=W.listener.apply(this,O||[]),G===this._getOnceReturnValue()&&this.removeListener(F,W.listener);return this},Y.trigger=X('emitEvent'),Y.emit=function(F){var O=Array.prototype.slice.call(arguments,1);return this.emitEvent(F,O)},Y.setOnceReturnValue=function(F){return this._onceReturnValue=F,this},Y._getOnceReturnValue=function(){return!this.hasOwnProperty('_onceReturnValue')||this._onceReturnValue},Y._getEvents=function(){return this._events||(this._events={})},T}.apply(A,P),!(C!==void 0&&(u.exports=C))})},function(u,A,S){var P,C,T;(function(E,X){C=[A,S(6),S(3),S(7)],P=X,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X,Y,I){'use strict';function F(K){return K&&K.__esModule?K:{default:K}}function O(K){K--;for(var J=2;K>>=1;)J<<=1;return J}function V(K,J,$){let ee=0,te=J.length,ie=te-1,re=0,se=1,ae;if(J[ee]==K)return ee;if(J[ie]==K)return ie;for(;!0;){if(re++,100<re)throw'Error loop';for(ae=Math.floor((ee+ie)/2);isNaN(J[ae]);)ae+=se;if(ae==ee||J[ae]==K||ae==ie)return ae;if(J[ae]<=K)$?ie=ae:ee=ae;else if(J[ae]>K)$?ee=ae:ie=ae;else return!1;se*=-1}}Object.defineProperty(E,'__esModule',{value:!0});var W=F(X),B=F(I);class R{constructor(K=[],J=0,$=1){this.xOffset=J,this.xScale=$,this.setData(K)}setData(K,J=null){if(Array.isArray(K[0])){let ie=[],ae=[];K.forEach(re=>{ie.push(re[0]),ae.push(re[1])}),this.setXWaveform(ie),K=ae}let $=this._makeArray(K.length),ee=!1;const te=this.isNaNAllowed();return K.map((ie,ae)=>{te||ie[0]===ie[0]&&ie[1]===ie[1]||(ee=!0),$[ae]=ie}),ee&&this.warn('Trying to assign NaN values to a typed array that does not support NaNs. 0\'s will be used instead'),this._setData($),J&&this.setXWaveform(J),this}getY(K){return this.data[K]}setXWaveform(K){if(!(K instanceof R))if(Array.isArray(K))K=new R(K);else throw'Cannot set X waveform. Data is not a valid array.';return this.xdata=K,this.computeXMinMax(),this}hasXWaveform(){return!!this.xdata}getXWaveform(){if(this.xdata)return this.xdata;var K=new R;for(var J=0;J<this.getLength();J+=1)K.append(this.getX(J));return K}rescaleX(K,J){this.xScale=J,this.xOffset=K,this.computeXMinMax()}getTypedArrayClass(){return this._typedArrayClass||!1}setTypedArrayClass(K){this.getTypedArrayClass()&&this.isNaNAllowed()&&!this.isNaNAllowed(K)&&this.warn('NaN values are not allowed by the new constructor ('+K.name+') while it was allowed by the previous one ('+this._typedArrayClass.name+')'),this.getTypedArrayClass()&&this.isUnsigned()&&!this.isUnsigned(K)&&this.warn('You are switching from signed values to unsigned values. You may experience data corruption if there were some negative values.'),this._typedArrayClass=K,this.data&&this._setData(K.from(this.data)),this.hasXWaveform()&&this.getXWaveform().setTypedArrayClass(K)}isNaNAllowed(K=this._typedArrayClass){return K==Array||K==Float32Array||K==Float64Array}isUnsigned(K=this._typedArrayClass){return K==Uint8Array||K==Uint8ClampedArray||K==Uint16Array||K==Uint32Array}recalculateMinMaxNewPoint(K,J){(K<this.minX||this.minX===void 0)&&(this.minX=K),(K>this.maxX||this.maxX===void 0)&&(this.maxX=K),(J<this.minY||this.minY===void 0)&&(this.minY=J),(J>this.maxY||this.maxY===void 0)&&(this.maxY=J)}prepend(K,J){return'function'==typeof K&&(K=K(this)),'function'==typeof J&&(J=J(this)),this.xdata?this.xdata.prepend(null,K):null===K?this.xOffset-=this.xScale:(this.xdata=this.getXWaveform(),this.xdata.prepend(null,K)),this.data.unshift(J),this.recalculateMinMaxNewPoint(K,J),this}append(K,J){return'function'==typeof K&&(K=K(this)),'function'==typeof J&&(J=J(this)),this.xdata?this.xdata.append(null,K):null!==K&&(this.xdata=this.getXWaveform(),this.xdata.append(null,K)),this.data.push(J),this.recalculateMinMaxNewPoint(K,J),this}_makeArray(K){const J=this.getTypedArrayClass();return J?new J(K):Array(K)}_setData(K){const J=K.length;let $=1,ee=K[1]>K[0],te=K[0],ie=K[0];for(this._monotoneous=!0;$<J;$++)K[$]!==K[$-1]&&ee!=K[$]>K[$-1]&&(this._monotoneous=!1),K[$]===K[$]&&(te=Math.min(K[$],te),ie=Math.max(K[$],ie));this._monotoneous&&(this._monotoneousAscending=K[1]>K[0]),this.minY=te,this.maxY=ie,this.data=K,this.computeXMinMax()}computeXMinMax(){if(this.data)if(this.xdata)this.minX=this.xdata.getMin(),this.maxX=this.xdata.getMax();else{const K=this.xOffset+this.xScale*this.getLength(),J=this.xOffset;this.minX=Math.min(K,J),this.maxX=Math.max(K,J)}}getIndexFromX(K){if(this.xdata){let J=this.xdata.getData();return V(K,J,!this.xdata.getMonotoneousDirection())}return Math.max(0,Math.min(this.getLength()-1,Math.floor((K-this.xOffset)/this.xScale)))}getXMin(){return this.minX}getXMax(){return this.maxX}getYMin(){return this.minY}getYMax(){return this.maxY}getMin(){return this.minY}getMax(){return this.maxY}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getDataY(){return this.data}getData(K){return K&&this.dataInUse?this.dataInUse.y:this.data}getLength(){return this.data.length}getDataToUseFlat(){let K,J=0,$;if(this.dataInUse){K=this.dataInUse.x.length,$=Array(2*K).fill(0);for(var ee=0;ee<K;ee+=1)$[J]=this.dataInUse.x[ee],$[J+1]=this.dataInUse.y[ee],J+=2}else{K=this.getLength(),$=Array(2*K).fill(0);for(var ee=0;ee<K;ee+=1)$[J+1]=this.data[ee],$[J]=this.getX(ee),J+=2}return $}fit(K){var J=this;return new Promise(function($){var ee=new W.default((0,Y.extend)({},{dataY:J,dataX:J.getXWaveform(),done:function(te){$(te)},waveform:new R},K));ee.init(),ee.fit()})}getX(K,J){return J&&this.dataInUse?this.dataInUse.x[K]:this.xdata?this.xdata.data[K]:this.xOffset+K*this.xScale}_integrateP(K=0,J=this.getLength()-1){K=Math.round(K),J=Math.round(J);var $=J-K+1,ee=0;let te=0,ie;for(var ae=this.getData();K<=J;K++)ae.length-1>K&&(ie=this.getX(K+1)-this.getX(K),te+=ie,ee+=ae[K]*ie);return[ee,$,te]}integrateP(K,J){var $=this._integrateP(K,J);return $[0]}average(K=0,J=this.getLength()-1){return this.getAverageP(K,J)}mean(){return this.average()}getAverageP(K,J){var $=this._integrateP(K,J);return $[0]/$[2]}getAverageX(K,J){var $=this._integrateX(K,J);return $[0]/$[2]}checkMonotonicity(){let K=1,J=this.getData();const $=this.data.length;for(let ee=J[1]>J[0];K<$;K++)if(J[K]!==J[K-1]&&ee!==J[K]>J[K-1])return this._monotoneous=!1;return this._monotoneousAscending=J[1]>J[0],this._monotoneous=!0}requireXMonotonicity(){this.xdata&&this.xdata.requireMonotonicity()}requireMonotonicity(){if(!this.isMonotoneous())throw'The wave must be monotonic'}isMonotoneous(){return!!this._monotoneous}isXMonotoneous(){return!this.xdata||this.xdata.isMonotoneous()}invert(){let K=dataY||this.data;return K.reverse(),this.isMonotoneous()&&(this.monotoneousDirection=!this.monotoneousDirection),K}resampleForDisplay(K){let J=0;this.requireXMonotonicity();let $=!1,ee=this.getDataY(),te={x:[],y:[]},ie=[],pe=!1,ue=0,ae,re,se,ne,oe,le,de,ge;const ce=this.getLength();if(!K.xPosition)throw'No position calculation method provided';if(!K.resampleToPx)throw'No "resampleToPx" method was provided. Unit: px per point';if(K.minX>K.maxX){let xe=K.minX;K.minX=K.maxX,K.maxX=xe}for((this.xdata&&!this.xdata.getMonotoneousDirection()||!this.xdata&&-0>this.xScale)&&($=!0,J=ce);$?0<J:J<ce;$?J--:J++){if(ge=this.getX(J),K.minX>ge){ue=J;continue}if(de=K.xPosition(ge),!pe){for(ue?(te.x.push(ge),te.y.push(ee[ue])):ue=J;isNaN(ee[J]);)$?J--:J++;ae=re=se=ee[ue],ne=1,le=de,oe=ge,ue=0,pe=!0;continue}if(Math.abs(de-le)>K.resampleToPx||J==ce||0==J||isNaN(ee[J])){let xe=(oe+ge)/2;if(te.x.push(xe),te.y.push(ae/ne),ie.push(xe,re,se),void 0!==K.maxX&&ge>K.maxX)break;pe=!1;continue}ae+=ee[J],ne++,re=Math.min(re,ee[J]),se=Math.max(se,ee[J])}return this.dataInUse=te,ie}interpolate(K){let J,$=this.getDataY();if(this.xdata){let ee=this.xdata.getData(),te=V(K,ee,!this.xdata.getMonotoneousDirection());return ee[te]==K?$[te]:(K-ee[te])/(ee[te+1]-ee[te])*($[te+1]-$[te])+$[te]}J=(K-this.xOffset)/this.xScale;let ee=Math.floor(J);return(J-ee)*($[ee+1]-$[ee])+$[ee]}getMonotoneousDirection(){return this.monotoneousDirection}getXMonotoneousDirection(){return this.xdata?this.xdata.getMonotoneousDirection():0<this.xScale}divide(K){return this._arithmetic(K,Q)}divideBy(){return this.divide(...arguments)}multiply(K){return this._arithmetic(K,G)}multiplyBy(){return this.multiply(...arguments)}log(){return this.logBase(10)}ln(){return this.logBase(Math.E)}logBase(K){let J=Math.log(K);this.data.map($=>{return Math.log($)/J})}add(K){return this._arithmetic(K,Z)}addBy(){return this.add(...arguments)}subtract(K){return this._arithmetic(K,U)}subtractBy(){return this.subtract(...arguments)}_arithmetic(K,J){if(K instanceof R)return this._waveArithmetic(K,J);return'number'==typeof K?this._numberArithmetic(K,J):void 0}_numberArithmetic(K,J){let $=0,ee=this.getLength();if(J==G){for(;$<ee;$++)this.data[$]*=K;this.minY*=K,this.maxY*=K}else if(J==Q){for(;$<ee;$++)this.data[$]/=K;this.minY/=K,this.maxY/=K}else if(J==Z){for(;$<ee;$++)this.data[$]+=K;this.minY+=K,this.maxY+=K}else if(J==U){for(;$<ee;$++)this.data[$]-=K;this.minY-=K,this.maxY-=K}return this}_waveArithmetic(K,J){let $=this.getDataY(),ee=0;const te=this.getLength();if(this.requireXMonotonicity(),K.requireXMonotonicity(),J==G)for(;ee<te;ee++)$[ee]*=K.interpolate(this.getX(ee));else if(J==Q)for(;ee<te;ee++)$[ee]/=K.interpolate(this.getX(ee));else if(J==Z)for(;ee<te;ee++)$[ee]+=K.interpolate(this.getX(ee));else if(J==U)for(;ee<te;ee++)$[ee]-=K.interpolate(this.getX(ee));return this._setData($),this}aggregate(){let K=128,J=0;for(this._dataAggregating={},this._dataAggregated={};10>J&&(this._dataAggregating[K]=(0,B.default)({min:this.getMinX(),max:this.getMaxX(),data:this.data,xdata:this.xdata?this.xdata.getData():void 0,xScale:this.xScale,xOffset:this.xOffset,numPoints:K}).then($=>{this._dataAggregated[$.numPoints]=$.data}),!(K>this.getLength()));J++)K*=2}hasAggregation(){return!!this._dataAggregated}getAggregatedData(K){var J=O(K);return this._dataAggregated[J]?void(this.dataInUse=this._dataAggregated[J]):this._dataAggregating[J]?this._dataAggregating[J]:void(this.dataInUse=this.data)}duplicate(K){var J=new R;return J._setData(this.getDataY().slice()),this.xdata?K?J.setXWaveform(this.xdata.duplicate()):J.setXWaveform(this.xdata):(J.xOffset=this.xOffset,J.xScale=this.xScale),J}warn(K){console&&console.warn(K)}};const G=Symbol(),Z=Symbol(),U=Symbol(),Q=Symbol();E.default=R})},function(u,A){var S,P,C;(function(T,E){P=[A],S=E,C='function'==typeof S?S.apply(A,P):S,!(C!==void 0&&(u.exports=C));var X})(this,function(T){'use strict';Object.defineProperty(T,'__esModule',{value:!0});class E{constructor(X,Y,I,F){this.LMITER=100,this.LMBOOST=2,this.LMSHRINK=0.1,this.LAMBDAZERO=0.001,this.LAMBDAMAX=1000000000,this.LMTOL=1e-12,this.BIGVAL=9e+99,this.sos,this.sosprev,this.lambda,this.myH=null,this.nadj=0,this.npts=0,this.delta,this.beta,this.alpha,this.amatrix,this.myH=X,this.nadj=Y,this.npts=I,this.delta=Array(this.nadj).fill(0),this.beta=Array(this.nadj).fill(0),this.alpha=Array(this.nadj).fill(0),this.amatrix=Array(this.nadj).fill(0),this.alpha=this.alpha.map(()=>Array(this.nadj)),this.amatrix=this.amatrix.map(()=>Array(this.nadj)),this.lambda=this.LAMBDAZERO;var O=0,V=!1;do V=this.bLMiter(),F&&F(this.myH.params),O++;while(!V&&O<this.LMITER)}bLMiter(){for(var X=0;X<this.nadj;X++)this.delta[X]=0;if(this.sos=this.myH.nudge(this.delta),this.sos==this.BIGVAL)return console.error('  bLMiter finds faulty initial nudge()'),!1;if(this.sosprev=this.sos,console.log('  bLMiter..SumOfSquares= '+this.sos),!this.myH.buildJacobian())return console.error('  bLMiter finds buildJacobian()=false'),!1;for(var X=0;X<this.nadj;X++){this.beta[X]=0;for(var Y=0;Y<this.npts;Y++)this.beta[X]-=this.myH.getResidualElement(Y)*this.myH.getJacobianElement(Y,X)}for(var X=0;X<this.nadj;X++)for(var I=0;I<this.nadj;I++){this.alpha[I][X]=0;for(var Y=0;Y<this.npts;Y++)this.alpha[I][X]+=this.myH.getJacobianElement(Y,I)*this.myH.getJacobianElement(Y,X)}var F=0;do{for(var X=0;X<this.nadj;X++)for(var I=0;I<this.nadj;I++)this.amatrix[I][X]=this.alpha[I][X]+(I==X?this.lambda:0);this.gaussj(this.amatrix,this.nadj);for(var X=0;X<this.nadj;X++){this.delta[X]=0;for(var I=0;I<this.nadj;I++)this.delta[X]+=this.amatrix[I][X]*this.beta[I]}if(this.sos=this.myH.nudge(this.delta),this.sos==this.BIGVAL)return console.error('  LMinner failed SOS step'),!1;if(F=(this.sos-this.sosprev)/(1+this.sos),0>=F){this.lambda*=this.LMSHRINK;break}for(var O=0;O<this.nadj;O++)this.delta[O]*=-1;if(this.myH.nudge(this.delta),F<this.LMTOL)break;this.lambda*=this.LMBOOST}while(this.lambda<this.LAMBDAMAX);return F>-this.LMTOL||this.lambda>this.LAMBDAMAX}gaussj(X,Y){var I=1,F,O,V,W,B,R,G=Array(100),Z=Array(100);for(B=0;B<Y;B++){for(F=0,V=B;V<Y;V++)for(W=B;W<Y;W++)Math.abs(F)<=Math.abs(X[V][W])&&(F=X[V][W],G[B]=V,Z[B]=W);if(0==F)return 0;if(V=G[B],V>B)for(W=0;W<Y;W++)O=X[B][W],X[B][W]=X[V][W],X[V][W]=-O;if(W=Z[B],W>B)for(V=0;V<Y;V++)O=X[V][B],X[V][B]=X[V][W],X[V][W]=-O;for(V=0;V<Y;V++)V!=B&&(X[V][B]=-X[V][B]/F);for(V=0;V<Y;V++)for(W=0;W<Y;W++)V!=B&&W!=B&&(X[V][W]+=X[V][B]*X[B][W]);for(W=0;W<Y;W++)W!=B&&(X[B][W]/=F);X[B][B]=1/F,I*=F}for(R=0;R<Y;R++){if(B=Y-R-1,W=G[B],W>B)for(V=0;V<Y;V++)O=X[V][B],X[V][B]=-X[V][W],X[V][W]=O;if(V=Z[B],V>B)for(W=0;W<Y;W++)O=X[B][W],X[B][W]=-X[V][W],X[V][W]=O}return I}}T.default=class{constructor(Y){this.DELTAP=0.000001,this.BIGVAL=9e+99,this.WEIGHT=1,console.log(Y),this.setYData(Y.dataY),this.setXData(Y.dataX),this.setWeight(Y.weight),this.setInitialParams(Y.params),Y.subsetIndex&&this.setSubset(...Y.subsetIndex),this.setFunction(Y.function),Y.progress&&this.hookIteration(Y.progress),this.options=Y}setYData(Y){this.data=Y}setXData(Y){this.dataX=Y}setWeight(Y){this.weight=Y}setInitialParams(Y){this.parms=Y,this.parms=this.parms.map(I=>{return'function'==typeof I?I(this.data,this.dataX):I}),this.NPARMS=Y.length}setSubset(Y,I){Y!==void 0&&I!==void 0&&(this._from=Y,this._to=I)}hookIteration(Y){this._hookIteration=I=>{let F=this.buildFit(I,200);Y(F)}}setFunction(Y){this._func=Y}init(){if(void 0!==this._from&&void 0!==this._to){if(this._from>=this._to)throw'Impossible to fit negative subranges. The starting index must be lower than the ending index';if(this.NPTS=this._to-this._from+1,this.data&&this.data.getLength()<=this._to)throw'Wave Y has not enough point to be fitted to subrange ['+this._from+', '+this._to+']';if(0>this._from)throw'Impossible to fit a subrange with negative indices'}else this.NPTS=this.data.getLength(),this._from=0,this._to=this.data.getLength()-1;if(this.dataX&&this.dataX.getLength()<=this._to)throw'Wave X has not enough point to be fitted to subrange ['+this._from+', '+this._to+']';this.arrY=this.data.getDataY(),this.arrX=this.dataX?this.dataX.getDataY():this.data.getDataX(),this.resid=Array(this.NPTS).fill(0),this.jac=Array(this.NPTS).fill(0),this.jac=this.jac.map(()=>Array(this.NPARMS))}fit(){return this.log('Starting the fit with initial parameter list {'+this.parms.join()+'};'),new E(this,this.NPARMS,this.NPTS,this._hookIteration),this.log('Fit successful. Output parameters {'+this.parms.join()+'};'),this._result=this.buildFit(this.parms,200),this.options.done&&this.options.done(this.parms,this._result),this._result}func(Y,I){return this._func(Y,I)}computeResiduals(){var Y=0;for(var I=0;I<this.NPTS;I++)this.resid[I]=(this.func(this.arrX[I+this._from],this.parms)-this.arrY[I+this._from])*this.WEIGHT,Y+=this.resid[I]*this.resid[I];return Y}log(Y){console.log(Y)}nudge(Y){for(var I=0;I<this.NPARMS;I++)this.parms[I]+=Y[I];return this.computeResiduals()}buildJacobian(){var Y=Array(this.NPARMS),I=0.5/this.DELTAP,F=0;for(var O=0;O<this.NPARMS;O++){for(var V=0;V<this.NPARMS;V++)Y[V]=V==O?this.DELTAP:0;if(F=this.nudge(Y),F==this.BIGVAL)throw'Bad dBuildJacobian() exit 2';for(var W=0;W<this.NPTS;W++)this.jac[W][O]=this.getResidualElement(W);for(var V=0;V<this.NPARMS;V++)Y[V]=V==O?-2*this.DELTAP:0;if(F=this.nudge(Y),F==this.BIGVAL)throw'Bad dBuildJacobian(). exit 3';for(var W=0;W<this.NPTS;W++)this.jac[W][O]-=this.getResidualElement(W);for(var W=0;W<this.NPTS;W++)this.jac[W][O]*=I;for(var V=0;V<this.NPARMS;V++)Y[V]=V==O?this.DELTAP:0;if(F=this.nudge(Y),F==this.BIGVAL)throw'Bad dBuildJacobian(). exit 4'}return!0}getResidualElement(Y){return this.resid[Y]}getJacobianElement(Y,I){return this.jac[Y][I]}buildFit(Y,I){let F;if(!I)F=this.arrX;else{const R=this.dataX.getMin(this._from,this._to),G=this.dataX.getMax(this._from,this._to);F=Array(I).fill(0).map((Z,U)=>U*(G-R)/(I-1)+R)}var O=Array(F.length);for(var V=0,W=F.length;V<W;V++)O[V]=this.func(F[V],this.parms);let B=this.options.waveform;return B.setData(O,F),B}}})},function(u,A,S){var P,C,T;(function(E,X){C=[A,S(3)],P=X,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X){'use strict';Object.defineProperty(E,'__esModule',{value:!0}),E.default=function(V){var W=Y.guid();V._queueId=W;var B=new Promise(R=>{F[W]=R});return I.postMessage(V),B};var Y=function(W){if(W&&W.__esModule)return W;var B={};if(null!=W)for(var R in W)Object.prototype.hasOwnProperty.call(W,R)&&(B[R]=W[R]);return B.default=W,B}(X),I,F={},O=URL.createObjectURL(new Blob([' ( '+function(){onmessage=function(V){const W=V.data.data,B=V.data.numPoints,R=V.data.max,G=V.data.min,Z=B/(R-G),U=W.length;let Q=0,K=-4,J=[],$=[],ee=[],te;for(te=V.data.xscale?function(ae){return V.data.xscale[ae]}:function(ae){return ae*V.data.xScale+V.data.xOffset};Q<U;Q++){if(slotNumber=Math.floor((te(Q)-G)*Z),J[K]!==slotNumber){K+=4,J[K]=slotNumber;let ie=(slotNumber+0.5)/Z;$[K]=ie,$[K+1]=ie,$[K+2]=ie,$[K+3]=ie,ee[K]=W[Q],ee[K+1]=W[Q],ee[K+2]=W[Q],ee[K+3]=W[Q]}ee[K+1]=Math.min(W[Q],ee[K+1]),ee[K+2]=Math.max(W[Q],ee[K+2]),ee[K+3]=W[Q]}postMessage({numPoints:B,data:{x:$,y:ee},_queueId:V.data._queueId})}}.toString()+')()'],{type:'application/javascript'}));I=new Worker(O),I.onmessage=function(V){var W=V.data._queueId;delete V.data._queueId,F[W](V.data),delete F[W]}})},function(u,A,S){var P,C,T;(function(E,X){C=[A,S(2),S(3)],P=X,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X,Y){'use strict';function I(B){try{return B.getBBox()}catch(R){return{height:0,width:0,x:0,y:0}}}Object.defineProperty(E,'__esModule',{value:!0});var F=function(R){return R&&R.__esModule?R:{default:R}}(X),O=function(R){if(R&&R.__esModule)return R;var G={};if(null!=R)for(var Z in R)Object.prototype.hasOwnProperty.call(R,Z)&&(G[Z]=R[Z]);return G.default=R,G}(Y),V={backgroundColor:'rgba(255, 255, 255, 0.8)',frame:!0,frameWidth:1,frameColor:'black',paddingTop:10,paddingLeft:10,paddingBottom:10,paddingRight:10,frameRounding:0,movable:!1,shapesToggleable:!0,isSerieHideable:!0,isSerieSelectable:!0};class W{constructor(B,R){this.options=O.extend({},V,R),this.graph=B,this.svg=document.createElementNS(this.graph.ns,'g'),this.subG=document.createElementNS(this.graph.ns,'g'),this.groups=[],this.rect=document.createElementNS(this.graph.ns,'rect'),this.rectBottom=document.createElementNS(this.graph.ns,'rect'),this.rect.setAttribute('x',0),this.rect.setAttribute('y',0),this.rectBottom.setAttribute('x',0),this.rectBottom.setAttribute('y',0),this.series=!1,this.svg.setAttribute('display','none'),this.pos={x:void 0,y:void 0,transformX:0,transformY:0},this.setEvents(),this.eyeId=O.guid(),this.eyeCrossedId=O.guid();var G=O.SVGParser('<svg xmlns="http://www.w3.org/2000/svg"><symbol id="'+this.eyeCrossedId+'" viewBox="0 -256 1850 1850"><rect pointer-events="fill" fill="transparent" x="-256" y="0" width="2106" height="1850" /><g transform="matrix(1,0,0,-1,30.372881,1214.339)"><path d="m 555,201 78,141 q -87,63 -136,159 -49,96 -49,203 0,121 61,225 Q 280,812 128,576 295,318 555,201 z m 389,759 q 0,20 -14,34 -14,14 -34,14 -125,0 -214.5,-89.5 Q 592,829 592,704 q 0,-20 14,-34 14,-14 34,-14 20,0 34,14 14,14 14,34 0,86 61,147 61,61 147,61 20,0 34,14 14,14 14,34 z m 363,191 q 0,-7 -1,-9 Q 1201,954 991,576 781,198 675,9 l -49,-89 q -10,-16 -28,-16 -12,0 -134,70 -16,10 -16,28 0,12 44,87 Q 349,154 228.5,262 108,370 20,507 0,538 0,576 q 0,38 20,69 153,235 380,371 227,136 496,136 89,0 180,-17 l 54,97 q 10,16 28,16 5,0 18,-6 13,-6 31,-15.5 18,-9.5 33,-18.5 15,-9 31.5,-18.5 16.5,-9.5 19.5,-11.5 16,-10 16,-27 z m 37,-447 Q 1344,565 1265,450.5 1186,336 1056,286 l 280,502 q 8,-45 8,-84 z m 448,-128 q 0,-35 -20,-69 Q 1733,443 1663,362 1513,190 1315.5,95 1118,0 896,0 l 74,132 q 212,18 392.5,137 180.5,119 301.5,307 -115,179 -282,294 l 63,112 q 95,-64 182.5,-153 87.5,-89 144.5,-184 20,-34 20,-69 z" fill="#c0c0c0"></path></g></symbol></svg>'),Z=O.SVGParser('<svg xmlns="http://www.w3.org/2000/svg"><symbol id="'+this.eyeId+'" viewBox="0 -256 1850 1850"><rect pointer-events="fill" x="-256" y="0" fill="transparent" width="2106" height="1850" /><g transform="matrix(1,0,0,-1,30.372881,1259.8983)"><path d="m 1664,576 q -152,236 -381,353 61,-104 61,-225 0,-185 -131.5,-316.5 Q 1081,256 896,256 711,256 579.5,387.5 448,519 448,704 448,825 509,929 280,812 128,576 261,371 461.5,249.5 662,128 896,128 1130,128 1330.5,249.5 1531,371 1664,576 z M 944,960 q 0,20 -14,34 -14,14 -34,14 -125,0 -214.5,-89.5 Q 592,829 592,704 q 0,-20 14,-34 14,-14 34,-14 20,0 34,14 14,14 14,34 0,86 61,147 61,61 147,61 20,0 34,14 14,14 14,34 z m 848,-384 q 0,-34 -20,-69 Q 1632,277 1395.5,138.5 1159,0 896,0 633,0 396.5,139 160,278 20,507 0,542 0,576 q 0,34 20,69 140,229 376.5,368 236.5,139 499.5,139 263,0 499.5,-139 236.5,-139 376.5,-368 20,-35 20,-69 z" fill="#444444" /></g></symbol></svg>');this.svg.appendChild(document.adoptNode(Z.documentElement.firstChild)),this.svg.appendChild(document.adoptNode(G.documentElement.firstChild)),this.svg.appendChild(this.subG),this.applyStyle()}setPosition(B,R,G){B&&(this.position=B,this.alignToX=R||'left',this.alignToY=G||'top')}setDraggable(B){this.options.movable=B}setAutoPosition(B){return-1<['bottom','left','top','right'].indexOf(B=B.toLowerCase())?(this.autoPosition=B,this):void(this.requireDelayedUpdate(),this.autoPosition=!1)}autoPosition(){return this.setAutoPosition(...arguments)}buildLegendBox(){var B=this.series||this.graph.getSeries(),R=0,G=this.options.paddingTop;this.autoPosition?this.graph.getDom().appendChild(this.getDom()):this.graph.graphingZone.appendChild(this.getDom());for(var Z=0,U=B.length;Z<U;Z++)if(!B[Z].excludedFromLegend||this.series){if('bottom'==this.autoPosition||'top'==this.autoPosition){var Q=I(this.groups[Z]);R+Q.width>this.graph.getDrawingWidth()-this.options.paddingRight&&(G+=16,R=0)}this.groups[Z].setAttribute('transform','translate( '+R+', '+G+')'),'bottom'==this.autoPosition||'top'==this.autoPosition?(R+=Q.width+10,G+=0):(R=0,G+=16)}var Q=I(this.subG);switch(this.width=Q.width+this.options.paddingRight+this.options.paddingLeft,this.height=Q.height+this.options.paddingBottom+this.options.paddingTop,this.rect.setAttribute('width',this.width),this.rect.setAttribute('height',this.height),this.rect.setAttribute('fill','none'),this.rect.setAttribute('pointer-events','fill'),this.rect.setAttribute('display','none'),this.options.movable&&(this.rectBottom.style.cursor='move'),this.rectBottom.setAttribute('width',this.width),this.rectBottom.setAttribute('height',this.height),this.rectBottom.setAttribute('x',Q.x-this.options.paddingLeft),this.rectBottom.setAttribute('y',Q.y-this.options.paddingTop),this.position=this.position||{},this.autoPosition){case'bottom':this.position.y=this.graph.getHeight()+'px',this.position.x=(this.graph.getWidth()-this.width)/2+'px',this.alignToY='bottom',this.alignToX=!1;break;case'left':this.position.x='6px',this.position.y=(this.graph.getHeight()-this.height)/2+'px',this.alignToX='left',this.alignToY=!1;break;case'right':this.position.x=this.graph.getWidth()+'px',this.position.y=(this.graph.getHeight()-this.height)/2+'px',this.alignToX='right',this.alignToY=!1;break;case'top':this.position.x=(this.graph.getWidth()-this.width)/2+'px',this.position.y='10px',this.alignToY='top',this.alignToX=!1;}if(this.autoPosition){switch(this.autoPosition){case'bottom':this.graph.options.paddingBottom=this.height+10;break;case'left':this.graph.options.paddingLeft=this.width+5;break;case'right':this.graph.options.paddingRight=this.width+10;break;case'top':this.graph.options.paddingTop=this.height+14;}this.graph.updateGraphingZone(),this.graph.getDrawingHeight(),this.graph.getDrawingWidth()}this.bbox=Q}calculatePosition(){var B=F.default.check(this.position);let R=B.compute(this.graph,this.graph.getXAxis(),this.graph.getYAxis());R&&('right'==this.alignToX&&(R.x-=this.width,R.x+=this.bbox.x),'bottom'==this.alignToY?(R.y-=this.height,R.y+=this.bbox.y):R.y+=this.bbox.y,this.pos.transformX=R.x,this.pos.transformY=R.y,this._setPosition())}update(B){if(!(this.graph.isDelayedUpdate()||!this._requiredUpdate&&B)){this._requiredUpdate=!1;var R=this;for(this.applyStyle();this.subG.hasChildNodes();)this.subG.removeChild(this.subG.lastChild);this.svg.insertBefore(this.rectBottom,this.svg.firstChild);var G=this.series||this.graph.getSeries();if(0<G.length)this.svg.setAttribute('display','block');else return;('bottom'==this.autoPosition||'top'==this.autoPosition)&&this.graph.getDrawingWidth();for(var Z=0,U=G.length;Z<U;Z++)(!G[Z].excludedFromLegend||this.series)&&function(Q){var K,J,$;('bottom'==this.autoPosition||'top'==this.autoPosition)&&this.graph.getDrawingWidth(),K=document.createElementNS(R.graph.ns,'g');var ee=document.createElementNS(R.graph.ns,'rect');R.subG.appendChild(K),K.appendChild(ee);var J=G[Q].getSymbolForLegend(),te=G[Q].getMarkerForLegend(),$=G[Q].getTextForLegend(),ie=35;if(this.isHideable()){ie+=20;var ae=document.createElementNS(R.graph.ns,'use');ae.setAttributeNS('http://www.w3.org/1999/xlink','xlink:href','#'+this.eyeId),ae.setAttribute('width',15),ae.setAttribute('height',15),ae.setAttribute('x',35),ae.setAttribute('y',-8),ae.addEventListener('click',function(se){se.stopPropagation();var ne;G[Q].isShown()?(G[Q].hide(),ne=R.eyeCrossedId):(G[Q].show(),ne=R.eyeId),ae.setAttributeNS('http://www.w3.org/1999/xlink','xlink:href','#'+ne)})}$.setAttribute('transform','translate('+ie+', 3)'),J&&K.appendChild(J),'scatter'==G[Q].getType()&&J.setAttribute('transform','translate( 20, 0 )'),te&&K.appendChild(te),ae&&K.appendChild(ae),K.appendChild($);var re=I(K);ee.setAttribute('x',re.x),ee.setAttribute('y',re.y),ee.setAttribute('width',re.width),ee.setAttribute('height',re.height),ee.setAttribute('fill','none'),ee.setAttribute('pointer-events','fill'),R.groups[Q]=K,K.addEventListener('click',function(se){var ne=G[Q];R.isSelectable()&&!ne.isSelected()?R.graph.selectSerie(ne):R.graph.unselectSerie(ne),se.preventDefault(),se.stopPropagation()})}.call(this,Z);this.svg.appendChild(this.rect),this.buildLegendBox(),this.calculatePosition()}}isHideable(){return this.options.isSerieHideable}notHideable(){return this.options.isSerieHideable=!1,this}hideable(){return this.options.isSerieHideable=!0,this}set seriesHideable(B){this.options.isSerieHideable=!!B}get seriesHideable(){return this.options.isSerieHideable}isSelectable(){return this.options.isSerieSelectable}isToggleShapes(){return this.options.shapesToggleable}getDom(){return this.svg}setEvents(){var B=this,R=this.pos;this.svg.addEventListener('mousedown',function(G){G.stopPropagation(),console.log('down'),B.options.movable&&(R.x=G.clientX,R.y=G.clientY,G.preventDefault(),B.mousedown=!0,B.graph.elementMoving(B),B.rect.setAttribute('display','block'))}),this.svg.addEventListener('click',function(G){G.stopPropagation()}),this.svg.addEventListener('dblclick',function(G){G.stopPropagation()}),this.svg.addEventListener('mousemove',function(G){B.handleMouseMove(G)})}handleMouseUp(B){B.stopPropagation(),B.preventDefault(),this.mousedown=!1,this.rect.setAttribute('display','none'),this.graph.elementMoving(!1)}handleMouseMove(B){if(this.mousedown){var R=this.pos,G=B.clientX-R.x,Z=B.clientY-R.y;R.transformX+=G,R.transformY+=Z,R.x=B.clientX,R.y=B.clientY,B.stopPropagation(),B.preventDefault(),this._setPosition()}}_setPosition(){var B=this.pos;isNaN(B.transformX)||isNaN(B.transformY)||!1===B.transformX||!1===B.transformY||this.svg.setAttribute('transform','translate('+B.transformX+', '+B.transformY+')')}applyStyle(){this.options.frame&&(this.rectBottom.setAttribute('stroke',this.options.frameColor),this.rectBottom.setAttribute('stroke-width',this.options.frameWidth+'px'),this.rectBottom.setAttribute('rx',this.options.frameRounding),this.rectBottom.setAttribute('ry',this.options.frameRounding)),this.rectBottom.setAttribute('fill',this.options.backgroundColor)}fixSeries(){var B=[];if(!1===arguments[0])return this.series=!1,void this.update();for(var R=0,G=arguments.length;R<G;R++)Array.isArray(arguments[R])?B=B.concat(arguments[R]):B.push(arguments[R]);this.update(),this.series=B}fixSeriesAdd(B){this.series=this.series||[],this.series.push(B)}requireDelayedUpdate(){this._requiredUpdate=!0}}E.default=W})},function(u,A,S){var P,C,T;(function(E,X){C=[A,S(10)],P=X,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var Y=function(O){return O&&O.__esModule?O:{default:O}}(X);class I extends Y.default{constructor(F,O,V={}){super(F,O,V),this.top='top'==O}getAxisPosition(){if(!this.options.display)return 0;var F=(1==this.options.tickPosition?8:20)+1*this.graph.options.fontSize;return this.getLabel()&&(F+=this.graph.options.fontSize),F}isX(){return!0}isY(){return!1}setShift(F){this.shift=F;void 0!==this.getShift()&&this.graph.getDrawingHeight()&&this.group.setAttribute('transform','translate(0 '+(this.floating?this.getShift():this.top?this.shift:this.graph.getDrawingHeight()-this.shift)+')')}getMaxSizeTick(){return(this.top?-1:1)*(1==this.options.tickPosition?10:10)}drawTick(F,O,V,W){var B=this,R;if(R=W||this.getPos(F),!(void 0==R||isNaN(R))){var G=this.nextTick(O,function(U){U.setAttribute('y1',(B.top?1:-1)*B.tickPx1*B.tickScaling[O]),U.setAttribute('y2',(B.top?1:-1)*B.tickPx2*B.tickScaling[O]),1==O?U.setAttribute('stroke',B.getPrimaryTicksColor()):U.setAttribute('stroke',B.getSecondaryTicksColor())});if(G.setAttribute('x1',R),G.setAttribute('x2',R),this.nextGridLine(1==O,R,R,0,this.graph.getDrawingHeight()),1==O){var Z=this.nextTickLabel(function(U){U.setAttribute('y',(B.top?-1:1)*((1==B.options.tickPosition?8:20)+(B.top?10:0))),U.setAttribute('text-anchor','middle'),'black'!==B.getTicksLabelColor()&&U.setAttribute('fill',B.getTicksLabelColor()),U.style.dominantBaseline='hanging'});Z.setAttribute('x',R),this.setTickContent(Z,F,V)}return[G,Z]}}drawLabel(){this.label.setAttribute('text-anchor','middle'),this.label.setAttribute('x',Math.abs(this.getMaxPx()+this.getMinPx())/2),this.label.setAttribute('y',(this.top?-1:1)*((1==this.options.tickPosition?10:25)+this.graph.options.fontSize)),this.labelTspan.textContent=this.getLabel()}draw(){var F=super.draw(...arguments);return this.drawSpecifics(),F}drawSpecifics(){this.drawLabel(),this.line.setAttribute('x1',this.getMinPx()),this.line.setAttribute('x2',this.getMaxPx()),this.line.setAttribute('y1',0),this.line.setAttribute('y2',0),this.line.setAttribute('stroke',this.getAxisColor()),this.top||(this.labelTspan.style.dominantBaseline='hanging',this.expTspan.style.dominantBaseline='hanging',this.expTspanExp.style.dominantBaseline='hanging',this.unitTspan.style.dominantBaseline='hanging',this.preunitTspan.style.dominantBaseline='hanging');var F=this.getSpan();this.line.setAttribute('marker-start',this.options.splitMarks&&0!=F[0]?'url(#horionzalsplit_'+this.graph.getId()+')':''),this.line.setAttribute('marker-end',this.options.splitMarks&&1!=F[1]?'url(#horionzalsplit_'+this.graph.getId()+')':'')}_draw0Line(F){this._0line||(this._0line=document.createElementNS(this.graph.ns,'line')),this._0line.setAttribute('x1',F),this._0line.setAttribute('x2',F),this._0line.setAttribute('y1',0),this._0line.setAttribute('y2',this.getMaxPx()),this._0line.setAttribute('stroke','black'),this.groupGrids.appendChild(this._0line)}handleMouseMoveLocal(F){F-=this.graph.getPaddingLeft(),this.mouseVal=this.getVal(F)}setMinMaxFlipped(){var F=this.maxPx-this.minPx;if(!isNaN(F)){var O=F*this.options.span[1]+this.minPx-this.options.marginMax,V=F*this.options.span[0]+this.minPx+this.options.marginMin;this.minPxFlipped=this.isFlipped()?O:V,this.maxPxFlipped=this.isFlipped()?V:O}}getZProj(F){return F*this.graph.options.zAxis.shiftX}}E.default=I})},function(u,A,S){var P,C,T;(function(E,X){C=[A,S(1),S(4),S(3)],P=X,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X,Y,I){'use strict';function F(G){return G&&G.__esModule?G:{default:G}}Object.defineProperty(E,'__esModule',{value:!0});var O=F(X),V=F(Y),W=function(Z){if(Z&&Z.__esModule)return Z;var U={};if(null!=Z)for(var Q in Z)Object.prototype.hasOwnProperty.call(Z,Q)&&(U[Q]=Z[Q]);return U.default=Z,U}(I);const B={lineAt0:!1,display:!0,flipped:!1,axisDataSpacing:{min:0.1,max:0.1},unitModification:!1,primaryGrid:!0,secondaryGrid:!0,primaryGridColor:'#f0f0f0',secondaryGridColor:'#f0f0f0',primaryGridWidth:1,secondaryGridWidth:1,shiftToZero:!1,tickPosition:1,nbTicksPrimary:3,nbTicksSecondary:10,ticklabelratio:1,exponentialFactor:0,exponentialLabelFactor:0,logScale:!1,forcedMin:!1,forcedMax:!1,span:[0,1],marginMin:0,marginMax:0,scientificScale:!1,scientificScaleExponent:!1,engineeringScale:!1,unit:!1,unitWrapperBefore:'',unitWrapperAfter:'',splitMarks:!1};class R extends V.default{constructor(){super()}init(G,Z,U){this.unitModificationTimeTicks=[[1,[1,2,5,10,20,30]],[60,[1,2,5,10,20,30]],[3600,[1,2,6,12]],[86400,[1,2,3,4,5,10,20,40]]];var Q=this;this.graph=G,this.options=W.extend(!0,{},B,U,Z),this.group=document.createElementNS(this.graph.ns,'g'),this.hasChanged=!0,this.rectEvent=document.createElementNS(this.graph.ns,'rect'),this.rectEvent.setAttribute('pointer-events','fill'),this.rectEvent.setAttribute('fill','transparent'),this.group.appendChild(this.rectEvent),this.graph.axisGroup.appendChild(this.group),this.line=document.createElementNS(this.graph.ns,'line'),this.line.setAttribute('stroke','black'),this.line.setAttribute('shape-rendering','crispEdges'),this.line.setAttribute('stroke-linecap','square'),this.groupTicks=document.createElementNS(this.graph.ns,'g'),this.groupTickLabels=document.createElementNS(this.graph.ns,'g'),this.group.appendChild(this.groupTicks),this.group.appendChild(this.groupTickLabels),this.group.appendChild(this.line),this.labelValue,this.label=document.createElementNS(this.graph.ns,'text'),this.labelTspan=document.createElementNS(this.graph.ns,'tspan'),this.preunitTspan=document.createElementNS(this.graph.ns,'tspan'),this.unitTspan=document.createElementNS(this.graph.ns,'tspan'),this.expTspan=document.createElementNS(this.graph.ns,'tspan'),this.expTspanExp=document.createElementNS(this.graph.ns,'tspan'),this.label.appendChild(this.labelTspan),this.label.appendChild(this.preunitTspan),this.label.appendChild(this.unitTspan),this.label.appendChild(this.expTspan),this.label.appendChild(this.expTspanExp),this.preunitTspan.setAttribute('dx',6),this.expTspan.setAttribute('dx',6),this.expTspanExp.setAttribute('dy',-5),this.expTspanExp.setAttribute('font-size','0.8em'),this.label.setAttribute('text-anchor','middle'),this.setTickPosition(this.options.tickPosition),this.gridLinePath={primary:'',secondary:''},this.gridPrimary=document.createElementNS(this.graph.ns,'path'),this.gridSecondary=document.createElementNS(this.graph.ns,'path'),this.graph.groupPrimaryGrids.appendChild(this.gridPrimary),this.graph.groupSecondaryGrids.appendChild(this.gridSecondary),this.setGridLinesStyle(),this.group.appendChild(this.label),this.groupSeries=document.createElementNS(this.graph.ns,'g'),this.group.appendChild(this.groupSeries),this.widthHeightTick=0,this.ticks={},this.ticksLabels=[],this.tickScaling={'1':3,'2':2,'3':1,'4':0.5},this.currentTick={},this.lastCurrentTick={},this.series=[],this.totalDelta=0,this.currentAction=!1,this.group.addEventListener('mousemove',function(K){K.preventDefault();var J=Q.graph._getXY(K);Q.handleMouseMoveLocal(J.x,J.y,K);for(var $=0,ee=Q.series.length;$<ee;$++)Q.series[$].handleMouseMove(!1,!0)}),this.labels=[],this.group.addEventListener('click',function(K){K.preventDefault();var J=Q.graph._getXY(K);Q.addLabel(Q.getVal(J.x-Q.graph.getPaddingLeft()))}),this.axisRand=Math.random(),this.clip=document.createElementNS(this.graph.ns,'clipPath'),this.clip.setAttribute('id','_clip'+this.axisRand),this.graph.defs.appendChild(this.clip),this.clipRect=document.createElementNS(this.graph.ns,'rect'),this.clip.appendChild(this.clipRect),this.clip.setAttribute('clipPathUnits','userSpaceOnUse'),this.graph._axisHasChanged(this)}handleMouseMoveLocal(){}hide(){return this.options.display=!1,this}show(){return this.options.display=!0,this}setDisplay(G){return this.options.display=!!G,this}isDisplayed(){return this.options.display}isShown(){return this.isDisplayed(...arguments)}kill(G,Z){this.graph.killAxis(this,G,Z)}setLineAt0(G){this.options.lineAt0=!!G}adaptTo(G,Z,U,Q){return G?(this.options.adaptTo={axis:G,thisValue:Z,foreignValue:U,preference:Q},this.adapt(),this):(this.options.adaptTo=!1,this)}adapt(){if(this.options.adaptTo){if(!G);var G=this.options.adaptTo.axis,Z=this.options.adaptTo.thisValue,U=this.options.adaptTo.foreignValue;if((void 0===G.currentAxisMin||void 0===G.currentAxisMax)&&G.setMinMaxToFitSeries(),!1!==this.options.forcedMin&&!1==this.options.forcedMax||'max'!==this.options.adaptTo.preference){this.currentAxisMin=!1===this.options.forcedMin?this._zoomed?this.getCurrentMin():this.getMinValue()-(Z-this.getMinValue())*(this.options.axisDataSpacing.min*(G.getCurrentMax()-G.getCurrentMin())/(U-G.getCurrentMin())):this.options.forcedMin,this.currentAxisMin==Z&&(this.currentAxisMin-=this.options.axisDataSpacing.min*this.getInterval());var Q=!1===this.options.forcedMin?this.currentAxisMin:this.options.forcedMin;this.currentAxisMax=(Z-Q)*(G.getCurrentMax()-G.getCurrentMin())/(U-G.getCurrentMin())+Q}else{this.currentAxisMax=!1===this.options.forcedMax?this._zoomed?this.getCurrentMax():this.getMaxValue()+(this.getMaxValue()-Z)*(this.options.axisDataSpacing.max*(G.getCurrentMax()-G.getCurrentMin())/(G.getCurrentMax()-U)):this.options.forcedMax,this.currentAxisMax==Z&&(this.currentAxisMax+=this.options.axisDataSpacing.max*this.getInterval());var Q=!1===this.options.forcedMax?this.currentAxisMax:this.options.forcedMax;this.currentAxisMin=(Z-Q)*(G.getCurrentMin()-G.getCurrentMax())/(U-G.getCurrentMax())+Q}this.graph._axisHasChanged(this)}}setFloating(G,Z){return this.floating=!0,this.floatingAxis=G,this.floatingValue=Z,this}getFloatingAxis(){return this.floatingAxis}getFloatingValue(){return this.floatingValue}setAxisDataSpacing(G,Z){return this.options.axisDataSpacing.min=G,this.options.axisDataSpacing.max=Z||G,this}dataSpacing(){return this.setAxisDataSpacing(...arguments)}setAxisDataSpacingMin(G){this.options.axisDataSpacing.min=G}setAxisDataSpacingMax(G){this.options.axisDataSpacing.max=G}setMinPx(G){this.minPx=G,this.setMinMaxFlipped()}setMaxPx(G){this.maxPx=G,this.setMinMaxFlipped()}getMinPx(){return this.minPxFlipped}getMaxPx(){return this.maxPxFlipped}getMathMaxPx(){return this.maxPx}getMathMinPx(){return this.minPx}getMinValue(){return!1===this.options.forcedMin?this.dataMin:this.options.forcedMin}getMaxValue(){return!1===this.options.forcedMax?this.dataMax:this.options.forcedMax}setMinValueData(G){this.dataMin=G}setMaxValueData(G){this.dataMax=G}forceMin(G,Z){return this.options.forcedMin=G,this.setCurrentMin(Z?this.getCurrentMin():void 0),this.graph._axisHasChanged(this),this}forceMax(G,Z){return this.options.forcedMax=G,this.setCurrentMax(Z?this.getCurrentMax():void 0),this.graph._axisHasChanged(this),this}getForcedMin(){return this.options.forcedMin}getForcedMax(){return this.options.forcedMax}forceToAxis(G){return G.getMaxValue&&G.getMinValue&&(this.options.forcedMin=G.getMinValue(),this.options.forcedMax=G.getMaxValue()),this}getNbTicksPrimary(){return this.options.nbTicksPrimary}setNbTicksPrimary(G){this.options.nbTicksPrimary=G}getNbTicksSecondary(){return this.options.nbTicksSecondary}handleMouseMove(G){this.mouseVal=this.getVal(G)}handleMouseWheel(G,Z,U){G=Math.min(0.2,Math.max(-0.2,G)),'min'==U?U=this.getMinValue():'max'==U?U=this.getMaxValue():!U&&(U=0),this._doZoomVal((this.getCurrentMax()-U)*(1+G)+U,(this.getCurrentMin()-U)*(1+G)+U),this.graph.draw()}set zoomLock(G){this._zoomLocked=G}get zoomLock(){return this._zoomLocked||!1}zoom(G,Z,U){return!U&&this.zoomLock?void 0:this._doZoomVal(G,Z,!0)}_doZoomVal(G,Z,U){return this._doZoom(this.getPx(G),this.getPx(Z),G,Z,U)}_doZoom(G,Z,U,Q,K){var U=void 0===U?this.getVal(G):U,Q=void 0===Q?this.getVal(Z):Q;return this.setCurrentMin(Math.min(U,Q)),this.setCurrentMax(Math.max(U,Q)),this.cacheCurrentMin(),this.cacheCurrentMax(),this.cacheInterval(),this._zoomed=!0,this.adapt(),this._hasChanged=!0,K||this.emit('zoom',[this.currentAxisMin,this.currentAxisMax,this]),this}getSerieShift(){return this._serieShift}getSerieScale(){return this._serieScale}getMouseVal(){return this.mouseVal}getUnitPerTick(G,Z,U){var Q=G/de;Z=Z?Math.min(Z,G/10):G/10;var K=U/Z;switch(this.options.unitModification){case'time':case'time:min.sec':var J=this.getModifiedValue(this.getMaxValue());3600>J||J<86400;var $=!1;for(var ee=0,te=this.unitModificationTimeTicks.length;ee<te;ee++){for(var ie=0,ae=this.unitModificationTimeTicks[ee][1].length;ie<ae;ie++)if(K<this.unitModificationTimeTicks[ee][0]*this.unitModificationTimeTicks[ee][1][ie]){$=!0;break}if($)break}le=ee===this.unitModificationTimeTicks.length?1:this.unitModificationTimeTicks[ee][0]*this.unitModificationTimeTicks[ee][1][ie];break;default:var re=Math.floor(Math.log(K)/Math.log(10)),se=K*Math.pow(10,-re);this.decimals=-re;var ne=[1,2,5,10],oe=!1;for(var ee=ne.length-1;0<=ee;ee--)(!oe||Math.abs(ne[ee]-se)<Math.abs(oe-se))&&(oe=ne[ee]);var le=oe*Math.pow(10,re);}var de=U/le,Q=G/Z;return[le,de,Q]}setMinMaxToFitSeries(G){var Z=this.getInterval();return this.options.logScale?(this.currentAxisMin=Math.max(1e-50,0.9*this.getMinValue()),this.currentAxisMax=Math.max(1e-50,1.1*this.getMaxValue())):(this.currentAxisMin=this.getMinValue(),this.currentAxisMax=this.getMaxValue(),!1===this.getForcedMin()&&(this.currentAxisMin-=this.options.axisDataSpacing.min*Z),!1===this.getForcedMax()&&(this.currentAxisMax+=this.options.axisDataSpacing.max*Z)),(isNaN(this.currentAxisMin)||isNaN(this.currentAxisMax))&&(this.currentAxisMax=void 0,this.currentAxisMin=void 0),this.cacheCurrentMin(),this.cacheCurrentMax(),this.cacheInterval(),this._zoomed=!1,this.adapt(),G||this.graph._axisHasChanged(this),this.emit('zoomOutFull',[this.currentAxisMin,this.currentAxisMax,this]),this}getInterval(){return this.getMaxValue()-this.getMinValue()}getCurrentInterval(){return this.cachedInterval}getCurrentMin(){return this.cachedCurrentMin}getCurrentMax(){return this.cachedCurrentMax}cacheCurrentMin(){this.cachedCurrentMin=this.currentAxisMin==this.currentAxisMax?this.options.logScale?this.currentAxisMin/10:this.currentAxisMin-1:this.currentAxisMin}cacheCurrentMax(){this.cachedCurrentMax=this.currentAxisMax==this.currentAxisMin?this.options.logScale?10*this.currentAxisMax:this.currentAxisMax+1:this.currentAxisMax}cacheInterval(){this.cachedInterval=this.cachedCurrentMax-this.cachedCurrentMin}setCurrentMin(G){return(void 0===G||!1!==this.getForcedMin()&&G<this.getForcedMin())&&(G=this.getMinValue()),this.currentAxisMin=G,this.options.logScale&&(this.currentAxisMin=Math.max(1e-50,G)),this.graph._axisHasChanged(this),this}setCurrentMax(G){(G===void 0||!1!==this.getForcedMax()&&G>this.getForcedMax())&&(G=this.getMaxValue()),this.currentAxisMax=G,this.options.logScale&&(this.currentAxisMax=Math.max(1e-50,G)),this.graph._axisHasChanged(this)}flip(G){return this.options.flipped=G,this.setMinMaxFlipped(),this}isFlipped(){return this.options.flipped}_draw(){var G=this;this.cacheCurrentMax(),this.cacheCurrentMin(),this.cacheInterval(),(void 0==this.currentAxisMin||void 0==this.currentAxisMax)&&this.setMinMaxToFitSeries(!0);var Z=Math.abs(this.getMaxPx()-this.getMinPx()),U=this.getCurrentInterval();if(!this.options.display)return this.line.setAttribute('display','none'),0;this.line.setAttribute('display','block'),this.scientificExponent=!0==this.options.scientificScale?this.options.scientificScaleExponent?this.options.scientificScaleExponent:Math.floor(Math.log(Math.max(Math.abs(this.getCurrentMax()),Math.abs(this.getCurrentMin())))/Math.log(10)):0,this.gridLinePath.primary='',this.gridLinePath.secondary='',this.writeUnit();var Q;if(this.options.unitDecade&&this.options.unit&&0!==this.scientificExponent&&(this.scientificExponent=this.getEngineeringExponent(this.scientificExponent))&&(Q=this.getExponentGreekLetter(this.scientificExponent))?(this.preunitTspan.innerHTML=Q,this.preunitTspan.setAttribute('display','visible'),this.unitTspan.setAttribute('dx',0)):0===this.scientificExponent||isNaN(this.scientificExponent)?(!this.options.unit&&this.unitTspan.setAttribute('display','none'),this.preunitTspan.setAttribute('display','none'),this.expTspan.setAttribute('display','none'),this.expTspanExp.setAttribute('display','none')):(this.options.engineeringScale&&(this.scientificExponent=this.getEngineeringExponent(this.scientificExponent)),this.preunitTspan.textContent='',this.preunitTspan.setAttribute('display','none'),this.expTspan.setAttribute('display','visible'),this.expTspanExp.setAttribute('display','visible'),this.expTspan.textContent='x10',this.expTspanExp.textContent=this.scientificExponent),!!this.options.hideTicks)var K=0;else if(this.resetTicksLength(),this.linkedToAxis){this.linkedToAxis.deltaPx=10;var K=this.drawLinkedToAxisTicksWrapper(Z,U)}else if(!this.options.logScale)var K=this.drawLinearTicksWrapper(Z,U);else var K=this.drawLogTicks();this.removeUselessTicks(),this.removeUselessTickLabels(),this.gridPrimary.setAttribute('d',this.gridLinePath.primary),this.gridSecondary.setAttribute('d',this.gridLinePath.secondary);var J=this.graph.findAxesLinkedTo(this);return J.map(function($){$.linkedToAxis&&($.setMinPx(G.getMinPx()),$.setMaxPx(G.getMaxPx()),$.draw())}),this.options.lineAt0&&0>this.getCurrentMin()&&0<this.getCurrentMax()&&this._draw0Line(this.getPx(0)),K}writeUnit(){this.options.unit?(this.unitTspan.setAttribute('display','visible'),this.unitTspan.setAttribute('dx',5),this.expTspan.setAttribute('display','none'),this.expTspanExp.setAttribute('display','none'),this.unitTspan.innerHTML=this.options.unitWrapperBefore+this.options.unit.replace(/\^([-+0-9]*)/g,'<tspan dy=\'-5\' font-size=\'0.7em\'>$1</tspan>')+this.options.unitWrapperAfter):this.unitTspan.setAttribute('display','none')}getExponentGreekLetter(G){switch(G){case 3:return'k';break;case 6:return'M';break;case 9:return'G';break;case 12:return'T';break;case 15:return'E';break;case-3:return'm';break;case-6:return'&mu;';break;case-9:return'n';break;case-12:return'p';break;case-15:return'f';}}drawLinearTicksWrapper(G,Z){let U;return this.options.primaryTickUnit?U=this.options.primaryTickUnit:(U=this.getUnitPerTick(G,this.getNbTicksPrimary(),Z)[0],this.options.maxPrimaryTickUnit&&this.options.maxPrimaryTickUnit<U?U=this.options.maxPrimaryTickUnit:this.options.minPrimaryTickUnit&&this.options.minPrimaryTickUnit>U&&(U=this.options.minPrimaryTickUnit)),this.drawTicks(U,this.secondaryTicks())}forcePrimaryTickUnit(G){this.options.primaryTickUnit=G}forcePrimaryTickUnitMax(G){this.options.maxPrimaryTickUnit=G}forcePrimaryTickUnitMin(G){this.options.minPrimaryTickUnit=G}getPrimaryTickUnit(){return this.incrTick}setTickLabelRatio(G){this.options.ticklabelratio=G}draw(){this._widthLabels=0;var G=this._draw();return this._widthLabels+=G,G}drawTicks(G,Z){var U=G,Q=this.getCurrentMin(),K=this.getCurrentMax(),te=0,J,$,ee;for(Z&&(J=U/Z),$=this.options.shiftToZero?this.dataMin-Math.ceil((this.dataMin-Q)/U)*U:Math.floor(Q/U)*U,this.incrTick=G;$<=K&&(te++,!(200<te));){if(Z){ee=$+J,this.subIncrTick=ee;for(var ie=0;ee<$+U&&(ie++,!(100<ie));){if(ee<Q||ee>K){ee+=J;continue}this.drawTickWrapper(ee,!1,0.0001>Math.abs(ee-$-U/2)?2:3),ee+=J}}if($<Q||$>K){$+=G;continue}this.drawTickWrapper($,!0,1),$+=G}return this.widthHeightTick=this.getMaxSizeTick(),this.widthHeightTick}nextTick(G,Z){if(this.ticks[G]=this.ticks[G]||[],this.lastCurrentTick[G]=this.lastCurrentTick[G]||0,this.currentTick[G]=this.currentTick[G]||0,this.currentTick[G]>=this.ticks[G].length){var U=document.createElementNS(this.graph.ns,'line');this.groupTicks.appendChild(U),this.ticks[G].push(U),Z(U)}var U=this.ticks[G][this.currentTick[G]];return this.currentTick[G]>=this.lastCurrentTick[G]&&U.setAttribute('display','visible'),this.currentTick[G]++,U}nextTickLabel(G){if(this.ticksLabels=this.ticksLabels||[],this.lastCurrentTickLabel=this.lastCurrentTickLabel||0,this.currentTickLabel=this.currentTickLabel||0,this.currentTickLabel>=this.ticksLabels.length){var Z=document.createElementNS(this.graph.ns,'text');this.groupTickLabels.appendChild(Z),this.ticksLabels.push(Z),G(Z)}var Z=this.ticksLabels[this.currentTickLabel];return this.currentTickLabel>=this.lastCurrentTickLabel&&Z.setAttribute('display','visible'),this.currentTickLabel++,Z}removeUselessTicks(){for(var G in this.currentTick){for(var Z=this.currentTick[G];Z<this.ticks[G].length;Z++)this.ticks[G][Z].setAttribute('display','none');this.lastCurrentTick[G]=this.currentTick[G],this.currentTick[G]=0}}removeUselessTickLabels(){for(var G=this.currentTickLabel;G<this.ticksLabels.length;G++)this.ticksLabels[G].setAttribute('display','none');this.lastCurrentTickLabel=this.currentTickLabel,this.currentTickLabel=0}nextGridLine(G,Z,U,Q,K){(G&&this.options.primaryGrid||!G&&this.options.secondaryGrid)&&(this.gridLinePath[G?'primary':'secondary']+='M '+Z+' '+Q+' L '+U+' '+K)}setGridLineStyle(G,Z){G.setAttribute('shape-rendering','crispEdges'),G.setAttribute('stroke',Z?this.getPrimaryGridColor():this.getSecondaryGridColor()),G.setAttribute('stroke-width',Z?this.getPrimaryGridWidth():this.getSecondaryGridWidth()),G.setAttribute('stroke-opacity',Z?this.getPrimaryGridOpacity():this.getSecondaryGridOpacity());var U;(U=Z?this.getPrimaryGridDasharray():this.getSecondaryGridDasharray())&&G.setAttribute('stroke-dasharray',U)}setGridLinesStyle(){return this.setGridLineStyle(this.gridPrimary,!0),this.setGridLineStyle(this.gridSecondary,!1),this}resetTicksLength(){}secondaryTicks(){return this.options.nbTicksSecondary}drawLogTicks(){var G=this.getCurrentMin(),Z=this.getCurrentMax(),U=Math.min(G,Z),Z=Math.max(G,Z);1e-50>U&&(U=1e-50),20<Math.log(U)-Math.log(Z)&&(Z=Math.pow(10,20*Math.log(U)));var Q={fontSize:'1.0em',exponential:!0,overwrite:!1};0>U&&(U=0);for(var K=0==U?0:Math.floor(Math.log(U)/Math.log(10)),U=1,J;(J=U*Math.pow(10,K))<Z;)1==U&&J>G&&this.drawTickWrapper(J,!0,1,Q),10==U?(U=1,K++):(1!=U&&J>G&&this.drawTickWrapper(J,!1,2,{overwrite:'',fontSize:'0.6em'}),U++);return this.widthHeightTick=this.getMaxSizeTick(),this.widthHeightTick}drawTickWrapper(G,Z,U,Q){this.drawTick(G,U,Q)}linkToAxis(G,Z,U){this.linkedToAxis={axis:G,scalingFunction:Z,decimals:U||1}}drawLinkedToAxisTicksWrapper(G,Z){var U=this.linkedToAxis,Q=0,$=0,K,J,ee,te;U.deltaPx||(U.deltaPx=10);do{if(K=U.scalingFunction(U.axis.getVal(Q+this.getMinPx())),U.decimals&&(this.decimals=U.decimals),J=this.drawTick(K,1,{},Q+this.getMinPx()),!J){console.log(K,Q,this.getMinPx()),console.error('Problem here');break}if(ee=8*(J[1].textContent+'').length,te=5*Math.round(ee/5),te>U.deltaPx)return U.deltaPx=te,void this.drawLinkedToAxisTicksWrapper(G,Z);$++,Q+=U.deltaPx}while(Q<G)}getPos(G){return this.getPx(G)}getPx(G){if(!this.options.logScale)return(G-this.getCurrentMin())/this.getCurrentInterval()*(this.getMaxPx()-this.getMinPx())+this.getMinPx();if(!(0>G)){var G=(Math.log(G)-Math.log(this.getCurrentMin()))/(Math.log(this.getCurrentMax())-Math.log(this.getCurrentMin()))*(this.getMaxPx()-this.getMinPx())+this.getMinPx();return G}}getRoundedPx(G){return Math.round(10*this.getPx(G))/10}getVal(G){return this.options.logScale?Math.exp((G-this.getMinPx())/(this.getMaxPx()-this.getMinPx())*(Math.log(this.getCurrentMax())-Math.log(this.getCurrentMin()))+Math.log(this.getCurrentMin())):(G-this.getMinPx())/(this.getMaxPx()-this.getMinPx())*this.getCurrentInterval()+this.getCurrentMin()}getRelPx(G){return G/this.getCurrentInterval()*(this.getMaxPx()-this.getMinPx())}getRelVal(G){return G/(this.getMaxPx()-this.getMinPx())*this.getCurrentInterval()}valueToText(G){if(this.scientificExponent)return G/=Math.pow(10,this.scientificExponent),G.toFixed(1);if(G=G*Math.pow(10,this.getExponentialFactor())*Math.pow(10,this.getExponentialLabelFactor()),this.options.shiftToZero&&(G-=this.dataMin),this.options.ticklabelratio&&(G*=this.options.ticklabelratio),this.options.unitModification)return G=this.modifyUnit(G,this.options.unitModification),G;var Z=this.decimals-this.getExponentialFactor()-this.getExponentialLabelFactor();return isNaN(G)?'':0<Z?G.toFixed(Z):G.toFixed(0)}valueToHtml(G,Z,U){var Q=this.valueToText(G),K;return this.options.unitDecade&&this.options.unit&&0!==this.scientificExponent&&(this.scientificExponent=this.getEngineeringExponent(this.scientificExponent))&&(K=this.getExponentGreekLetter(this.scientificExponent))?Q+=K:0!==this.scientificExponent&&!isNaN(this.scientificExponent)&&!Z&&(Q+='x10',Q+='<sup>'+this.scientificExponent+'</sup>'),this.options.unit&&!U&&(Q+=this.options.unit.replace(/\^([-+0-9]*)/g,'<sup>$1</sup>')),Q}getModifiedValue(G){return this.options.ticklabelratio&&(G*=this.options.ticklabelratio),this.options.shiftToZero&&(G-=this.getMinValue()*(this.options.ticklabelratio||1)),G}modifyUnit(G,Z){var U='',Q=this.incrTick;switch(Z){case'time':var K=this.getModifiedValue(this.getMaxValue()),J=[[60,'min'],[3600,'h'],[86400,'d']],$;if(3600>K?$=0:86400>K?$=1:2592000>K&&($=2),!J[$])return!1;G=G/J[$][0];var ee=Math.floor(G);for(U=ee+J[$][1],$--;Q<1*J[$+1][0]&&-1<$;)G=(G-ee)*J[$+1][0]/J[$][0],ee=Math.round(G),U+=' '+ee+J[$][1],$--;break;case'time:min.sec':G=G/60;var ee=Math.floor(G),te=Math.round(60*(G-ee))+'';te=1==te.length?'0'+te:te,U=ee+'.'+te;}return U}getExponentialFactor(){return this.options.exponentialFactor}setExponentialFactor(G){this.options.exponentialFactor=G}setExponentialLabelFactor(G){this.options.exponentialLabelFactor=G}getExponentialLabelFactor(){return this.options.exponentialLabelFactor}setLabel(G){return this.options.labelValue=G,this}getLabel(){return this.options.labelValue}setSpan(G,Z){return this.options.span=[G,Z],this}getSpan(){return this.options.span}setLevel(G){return this._level=G,this}getLevel(){return this._level}setShift(G){this.shift=G}getShift(){return this.shift}setTickPosition(G){switch(G){case 3:case'outside':case O.default.TICKS_OUTSIDE:G=3;break;case 2:case'centered':case O.default.TICKS_CENTERED:G=2;break;default:case 1:case'inside':case O.default.TICKS_INSIDE:G=1;}switch(this.options.tickPosition=G,this.options.tickPosition){case 3:this.tickPx1=-2,this.tickPx2=0;break;case 2:this.tickPx1=-1,this.tickPx2=1;break;case 1:this.tickPx1=0,this.tickPx2=2;}return this}setGrids(G){return this.options.primaryGrid=G,this.options.secondaryGrid=G,this}setPrimaryGrid(G){return this.options.primaryGrid=G,this}setSecondaryGrid(G){return this.options.secondaryGrid=G,this}primaryGridOn(){return this.setPrimaryGrid(!0)}primaryGridOff(){return this.setPrimaryGrid(!1)}secondaryGridOn(){return this.setSecondaryGrid(!0)}secondaryGridOff(){return this.setSecondaryGrid(!1)}gridsOn(){return this.setGrids(!0)}gridsOff(){return this.setGrids(!1)}turnGridsOff(){return this.gridsOff(...arguments)}turnGridsOn(){return this.gridsOn(...arguments)}setAxisColor(G){return this.options.axisColor=G,this}getAxisColor(){return this.options.axisColor||'black'}setPrimaryTicksColor(G){return this.options.primaryTicksColor=G,this}getPrimaryTicksColor(){return this.options.primaryTicksColor||'black'}setSecondaryTicksColor(G){return this.options.secondaryTicksColor=G,this}getSecondaryTicksColor(){return this.options.secondaryTicksColor||'black'}setTicksLabelColor(G){return this.options.ticksLabelColor=G,this}getTicksLabelColor(){return this.options.ticksLabelColor||'black'}setPrimaryGridColor(G){return this.options.primaryGridColor=G,this}getPrimaryGridColor(){return this.options.primaryGridColor}setSecondaryGridColor(G){return this.options.secondaryGridColor=G,this}getSecondaryGridColor(){return this.options.secondaryGridColor}setPrimaryGridWidth(G){return this.options.primaryGridWidth=G,this}getPrimaryGridWidth(){return this.options.primaryGridWidth}setSecondaryGridWidth(G){return this.options.secondaryGridWidth=G,this}getSecondaryGridWidth(){return this.options.secondaryGridWidth}setPrimaryGridOpacity(G){return this.options.primaryGridOpacity=G,this}getPrimaryGridOpacity(){return this.options.primaryGridOpacity}setSecondaryGridOpacity(G){return this.options.secondaryGridOpacity=G,this}getSecondaryGridOpacity(){return this.options.secondaryGridOpacity}setPrimaryGridDasharray(G){return this.options.primaryGridDasharray=G,this}getPrimaryGridDasharray(){return this.options.primaryGridDasharray}setSecondaryGridDasharray(G){return this.options.secondaryGridDasharray=G,this}getSecondaryGridDasharray(){return this.options.secondaryGridDasharray}setLabelColor(G){this.options.labelColor=G}getLabelColor(){return this.options.labelColor}setTickContent(G,Z,U){if(U||(U={}),U.overwrite||!U.exponential)G.textContent=U.overwrite||this.valueToText(Z);else{var Q=Math.round(Math.log(Z)/Math.log(10)),K=Math.floor(Z*Math.pow(10,-Q));G.textContent=1==K?'10':K+'x10';var J=document.createElementNS(this.graph.ns,'tspan');J.textContent=Q,J.setAttribute('font-size','0.7em'),J.setAttribute('dy',-5),G.appendChild(J)}U.fontSize&&G.setAttribute('font-size',U.fontSize)}isX(){return!1}isY(){return!1}setUnit(G){return this.options.unit=G,this}setUnitWrapper(G,Z){return this.options.unitWrapperBefore=G,this.options.unitWrapperAfter=Z,this}setUnitDecade(G){return this.options.unitDecade=G,this}setScientific(G){return this.options.scientificScale=G,this}setScientificScaleExponent(G){return this.options.scientificScaleExponent=G,this}setEngineering(G){return this.options.scientificScale=G,this.options.engineeringScale=G,this}getEngineeringExponent(G){return G-=0<G?G%3:(3- -G%3)%3,G}setLogScale(G){return this.options.logScale=G,this}isZoomed(){return this.currentAxisMin!=this.getMinValue()&&this.currentAxisMax!=this.getMaxValue()}hasAxis(){return!1}getType(){return null}}R.prototype.getValue=R.prototype.getVal,R.prototype.getDeltaPx=R.prototype.getRelPx,E.default=R})},function(u,A,S){var P,C,T;(function(E,X){C=[A,S(10)],P=X,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var Y=function(O){return O&&O.__esModule?O:{default:O}}(X);class I extends Y.default{constructor(F,O,V){super(F,O,V),this.leftright=O,this.left='left'==O}setAxisPosition(F){this.shiftPosition=F}getAxisPosition(){return this.shiftPosition||0}getAdditionalWidth(){let F=0;return this.getLabel()&&(F+=this.graph.options.fontSize),this.isShown()&&(F+=Math.abs(this.tickMargin)),F}isX(){return!1}isY(){return!0}resetTicksLength(){this.longestTick=[!1,0]}getMaxSizeTick(){return this.longestTick&&this.longestTick[0]?this.longestTick[0].getComputedTextLength()+5:0}draw(){this.tickMargin=this.left?-5-this.tickPx1*this.tickScaling[1]:5+this.tickPx1*this.tickScaling[1];var F=super.draw(...arguments);return F+=this.getAdditionalWidth(),this.drawSpecifics(F),this.fullwidthlabel=F,F}equalizePosition(F){return this.placeLabel(this.left?-F:F),this.getLabel()?F+this.graph.options.fontSize:0}drawTick(F,O,V,W){var R=this,G=this.groupTicks,B,Z;if(B=W||this.getPos(F),!(void 0==B||isNaN(B))){var U=this.nextTick(O,Q=>{Q.setAttribute('x1',(this.left?1:-1)*this.tickPx1*this.tickScaling[O]),Q.setAttribute('x2',(this.left?1:-1)*this.tickPx2*this.tickScaling[O]),1==O?Q.setAttribute('stroke',this.getPrimaryTicksColor()):Q.setAttribute('stroke',this.getSecondaryTicksColor())});if(U.setAttribute('y1',B),U.setAttribute('y2',B),this.nextGridLine(1==O,0,this.graph.getDrawingWidth(),B,B),1==O){var Z=this.nextTickLabel(Q=>{Q.setAttribute('x',this.tickMargin),'black'!==this.getTicksLabelColor()&&Q.setAttribute('fill',this.getTicksLabelColor()),this.left?Q.setAttribute('text-anchor','end'):Q.setAttribute('text-anchor','start'),Q.style.dominantBaseline='central'});Z.setAttribute('y',B),this.setTickContent(Z,F,V),(Z.textContent+'').length>=this.longestTick[1]&&(this.longestTick[0]=Z,this.longestTick[1]=(Z.textContent+'').length)}}}drawLabel(){'black'!==this.getLabelColor()&&this.label.setAttribute('fill',this.getLabelColor()),this.label.setAttribute('dominant-baseline',this.left?'auto':'hanging'),this.labelTspan.textContent=this.getLabel()}placeLabel(F){this.label.setAttribute('transform','translate('+F+', '+Math.abs(this.getMaxPx()+this.getMinPx())/2+') rotate(-90)')}drawSpecifics(){this.line.setAttribute('y1',this.getMinPx()),this.line.setAttribute('y2',this.getMaxPx()),this.line.setAttribute('x1',0),this.line.setAttribute('x2',0),this.line.setAttribute('stroke',this.getAxisColor());var F=this.getSpan();this.line.setAttribute('marker-start',this.options.splitMarks&&0!=F[0]?'url(#verticalsplit_'+this.graph.getId()+')':''),this.line.setAttribute('marker-end',this.options.splitMarks&&1!=F[1]?'url(#verticalsplit_'+this.graph.getId()+')':'')}setShift(F){if(this.shift=F,this.shift&&this.graph.getWidth()){let O=this.shift;O=this.floating?O:this.isLeft()?O:this.graph.getWidth()-this.graph.getPaddingRight()-this.graph.getPaddingLeft()-O,this.group.setAttribute('transform','translate( '+O+' 0 )'),this.drawLabel()}}isLeft(){return this.left}isRight(){return!this.left}isFlipped(){return!this.options.flipped}_draw0Line(F){this._0line||(this._0line=document.createElementNS(this.graph.ns,'line')),this._0line.setAttribute('y1',F),this._0line.setAttribute('y2',F),this._0line.setAttribute('x1',0),this._0line.setAttribute('x2',this.graph.getDrawingWidth()),this._0line.setAttribute('stroke','black'),this.groupGrids.appendChild(this._0line)}handleMouseMoveLocal(F,O){O-=this.graph.getPaddingTop(),this.mouseVal=this.getVal(O)}scaleToFitAxis(F,O,V,W,B,R){F&&F.isX()||(F=this.graph.getXAxis()),isNaN(V)&&(V=F.getCurrentMin()),isNaN(W)&&(W=F.getCurrentMax()),B===void 0&&(B=!0),R===void 0&&(R=!0),'number'==typeof O&&(W=V,V=O,O=!1);var G=-(1/0),Z=1/0,U=0;for(var Q=0,K=this.graph.series.length;Q<K;Q++)this.graph.series[Q].isShown()&&this.graph.series[Q]!=O&&this.graph.series[Q].getXAxis()==F&&this.graph.series[Q].getYAxis()===this&&(U++,G=R?Math.max(G,this.graph.series[Q].getMax(V,W)):0,Z=B?Math.min(Z,this.graph.series[Q].getMin(V,W)):0);if(0==U)this.setMinMaxToFitSeries();else{Z=B?Z:this.getCurrentMin(),G=R?G:this.getCurrentMax();var J=G-Z;Z-=this.options.axisDataSpacing.min*J,G+=this.options.axisDataSpacing.max*J,this._doZoomVal(Z,G)}return this}setMinMaxFlipped(){var F=this.maxPx-this.minPx;if(!isNaN(F)){var O=this.maxPx-F*this.options.span[0]-this.options.marginMin,V=this.maxPx-F*this.options.span[1]+this.options.marginMax;this.minPxFlipped=this.isFlipped()?O:V,this.maxPxFlipped=this.isFlipped()?V:O}}getZProj(F){return F*this.graph.options.zAxis.shiftY}}E.default=I})},function(u,A,S){var P,C,T;(function(E,X){C=[A,S(9)],P=X,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var Y=function(O){return O&&O.__esModule?O:{default:O}}(X);class I extends Y.default{constructor(F,O,V={}){super(F,O,V)}set categories(F){return this._barCategories=F,this}draw(){var F=this,V=this.graph.drawingSpaceWidth,W=this._barCategories,O;if(this.forceMin(0),this.forceMax(1),this.cacheCurrentMin(),this.cacheCurrentMax(),this.cacheInterval(),!!W){Array.isArray(W)||(W=[W]);for(var B=0;B<=W.length;B++)this.drawTick(B/W.length,2),B<W.length&&(O=this.nextTickLabel(function(R){R.setAttribute('y',(F.top?-1:1)*((1==F.options.tickPosition?8:20)+(F.top?10:0))),R.setAttribute('text-anchor','middle'),'black'!==F.getTicksLabelColor()&&R.setAttribute('fill',F.getTicksLabelColor()),R.style.dominantBaseline='hanging'}),O.setAttribute('x',this.getPos((B+0.5)/W.length)),O.textContent=W[B].title);return this.drawSpecifics(),this}}autoSeries(){let F=[];for(let O of this.graph.series)O.getXAxis()==this&&F.push(O);return this.setSeries(...F),this}setSeries(){var F=this;return this.series=arguments,Array.prototype.map.call(this.series,function(O,V){'object'==typeof O||(O=F.graph.getSerie(O)),O.setCategoryConfig&&O.setCategoryConfig(V,F._barCategories,F.series.length)}),this._getUsedCategories(),this}_getUsedCategories(){let F={},O=0;Array.prototype.map.call(this.series,R=>{let G=R.getUsedCategories();for(let Z of G)F.hasOwnProperty(Z)||(F[Z]=1,O+=1),F[Z]++,O++});let V=0;for(let R in F){let G=F[R];F[R]=V,V+=G}let W={},B=0;Array.prototype.map.call(this.series,R=>{let G=R.getUsedCategories(),Z={};G.map(U=>{W[U]=W[U]||0.5,Z[U]=(F[U]+W[U])/O,W[U]++}),R.setDataIndices(Z,O),B++})}getType(){return'category'}}E.default=I})},function(u,A,S){var P,C,T;(function(E,X){C=[A,S(10),S(3)],P=X,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X,Y){'use strict';function I($,ee){return Math.round($/ee)*ee}function F($,ee){switch(ee.unit){case's':$.setSeconds(I($.getSeconds(),ee.increment)),$.setMilliseconds(0);break;case'i':$.setMinutes(I($.getMinutes(),ee.increment)),$.setSeconds(0),$.setMilliseconds(0);break;case'h':$.setHours(I($.getHours(),ee.increment)),$.setMinutes(0),$.setSeconds(0),$.setMilliseconds(0);break;case'd':$.setMinutes(0),$.setSeconds(0),$.setMilliseconds(0),$.setHours(0),$.setDate(I($.getDate(),ee.increment));break;case'm':$.setMinutes(0),$.setSeconds(0),$.setMilliseconds(0),$.setHours(0),$.setDate(1),$.setMonth(I($.getMonth(),ee.increment));break;case'y':$.setMinutes(0),$.setSeconds(0),$.setMilliseconds(0),$.setHours(0),$.setDate(1),$.setMonth(0);break;default:throw'Date format not recognized';}return $}function O($,ee){switch(ee.unit){case's':$.setSeconds($.getSeconds()+ee.increment),$.setMilliseconds(0);break;case'i':$.setMinutes($.getMinutes()+ee.increment),$.setSeconds(0),$.setMilliseconds(0);break;case'h':$.setHours($.getHours()+ee.increment),$.setMinutes(0),$.setSeconds(0),$.setMilliseconds(0);break;case'd':$.setDate($.getDate()+ee.increment),$.setMinutes(0),$.setSeconds(0),$.setMilliseconds(0),$.setHours(0);break;case'm':$.setMonth($.getMonth()+ee.increment),$.setMinutes(0),$.setSeconds(0),$.setMilliseconds(0),$.setHours(0),$.setDate(1);break;case'y':$.setFullYear($.getFullYear()+ee.increment),$.setMinutes(0),$.setSeconds(0),$.setMilliseconds(0),$.setHours(0),$.setDate(1),$.setMonth(0);break;default:throw'Date format not recognized';}return $}function V($,ee,te){if($.groups[ee][te])return $.groups[ee][te].group.setAttribute('display','block'),$.groups[ee][te];var ie={group:document.createElementNS($.graph.ns,'g'),text:document.createElementNS($.graph.ns,'text')},ae=document.createElementNS($.graph.ns,'line');return ae.setAttribute('stroke','black'),ae.setAttribute('y1',0),2===ee?(ae.setAttribute('y2',6),ie.text.setAttribute('y',15),ie.line=ae,ie.group.appendChild(ie.line)):1===ee?(ae.setAttribute('y2',20),ie.text.setAttribute('y',10),ie.line1=ae,ie.line2=ae.cloneNode(),ie.group.appendChild(ie.line1),ie.group.appendChild(ie.line2)):void 0,(ie.text.setAttribute('text-anchor','middle'),ie.text.setAttribute('dominant-baseline','middle'),ie.group.appendChild(ie.text),$.getWrapper(ee).appendChild(ie.group),$.groups[ee][te]=ie)}function W($,ee,te){for(;te<$.groups[ee].length;te++)B($.groups[ee][te])}function B($){$.group.setAttribute('display','none')}function R($,ee){return K($,ee)}function G($,ee,te,ie,ae,re,se){switch($){case 1:var ne=Math.max(ie,Math.min(ae,re)),oe=Math.max(ie,Math.min(ae,se));if(isNaN(oe)||isNaN(ne))return;for(ee.line1.setAttribute('x1',ne),ee.line2.setAttribute('x1',oe),ee.line1.setAttribute('x2',ne),ee.line2.setAttribute('x2',oe),ee.text.setAttribute('x',(ne+oe)/2);8*te.length>oe-ne;)if(te=te.substr(0,te.length-2)+'.',1==te.length){te='';break}ee.text.textContent=te;break;case 2:if(re<ie||re>ae)return void B(ee);ee.line.setAttribute('x1',re),ee.line.setAttribute('x2',re),ee.text.setAttribute('x',re),ee.text.textContent=te;}}Object.defineProperty(E,'__esModule',{value:!0});var Z=function(ee){return ee&&ee.__esModule?ee:{default:ee}}(X),U=function(ee){if(ee&&ee.__esModule)return ee;var te={};if(null!=ee)for(var ie in ee)Object.prototype.hasOwnProperty.call(ee,ie)&&(te[ie]=ee[ie]);return te.default=ee,te}(Y),Q=[{threshold:20,increments:{1:{increment:1,unit:'i',format:'HH"h"MM (dd/mm/yy)'},2:{increment:1,unit:'s',format:'MM:ss"s"'}}},{threshold:50,increments:{1:{increment:1,unit:'i',format:'HH"h"MM (dd/mm/yy)'},2:{increment:2,unit:'s',format:'MM:ss"s"'}}},{threshold:100,increments:{1:{increment:1,unit:'i',format:'HH"h"MM (dd/mm/yy)'},2:{increment:5,unit:'s',format:'MM:ss"s"'}}},{threshold:600,increments:{1:{increment:10,unit:'i',format:'HH"h"MM (dd/mm/yy)'},2:{increment:30,unit:'s',format:'MM:ss"s"'}}},{threshold:1000,increments:{1:{increment:1,unit:'h',format:'HH"h"MM (dd/mm/yy)'},2:{increment:10,unit:'i',format:'MM"min"'}}},{threshold:1500,increments:{1:{increment:1,unit:'d',format:'dd/mm/yyyy'},2:{increment:1,unit:'i',format:'H"h"MM'}}},{threshold:3000,increments:{1:{increment:1,unit:'d',format:'dd/mm/yyyy'},2:{increment:2,unit:'i',format:'H"h"MM'}}},{threshold:8000,increments:{1:{increment:1,unit:'d',format:'dd/mm/yyyy'},2:{increment:10,unit:'i',format:'H"h"MM'}}},{threshold:26400,increments:{1:{increment:1,unit:'d',format:'dd/mm/yyyy'},2:{increment:20,unit:'i',format:'H"h"MM'}}},{threshold:86400,increments:{1:{increment:1,unit:'d',format:'dd/mm/yyyy'},2:{increment:1,unit:'h',format:'H"h"MM'}}},{threshold:200000,increments:{1:{increment:1,unit:'d',format:'dd/mm/yyyy'},2:{increment:2,unit:'h',format:'H"h"MM'}}},{threshold:400000,increments:{1:{increment:1,unit:'d',format:'dd/mm/yyyy'},2:{increment:6,unit:'h',format:'H"h"MM'}}},{threshold:1400000,increments:{1:{increment:1,unit:'d',format:'dd/mm/yyyy'},2:{increment:12,unit:'h',format:'HH"h"MM'}}},{threshold:6400000,increments:{1:{increment:1,unit:'m',format:'mmmm yyyy'},2:{increment:1,unit:'d',format:'dd'}}},{threshold:12400000,increments:{1:{increment:1,unit:'m',format:'mmmm yyyy'},2:{increment:2,unit:'d',format:'dd'}}},{threshold:43200000,increments:{1:{increment:1,unit:'m',format:'mmmm yyyy'},2:{increment:7,unit:'d',format:'dd'}}},{threshold:69120000,increments:{1:{increment:1,unit:'m',format:'mmmm yyyy'},2:{increment:15,unit:'d',format:'dd'}}},{threshold:86400000,increments:{1:{increment:1,unit:'y',format:'yyyy'},2:{increment:3,unit:'m',format:'mm/yyyy'}}},{threshold:172800000,increments:{1:{increment:1,unit:'y',format:'yyyy'},2:{increment:4,unit:'m',format:'mm/yyyy'}}},{threshold:864000000,increments:{1:{increment:1,unit:'y',format:'yyyy'},2:{increment:6,unit:'m',format:'mm/yyyy'}}},{threshold:1036800000,increments:{1:{increment:1,unit:'y',format:'yyyy'},2:{increment:1,unit:'y',format:'yyyy'}}}],K=function(){var $=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[WLloSZ]|"[^"]*"|'[^']*'/g,ee=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,te=/[^-+\dA-Z]/g,ie=function(re,se){for(re=re+'',se=se||2;re.length<se;)re='0'+re;return re},ae=function(re,se){var ne=new Date(re[se+'FullYear'](),0,1);return Math.ceil(((re-ne)/86400000+ne[se+'Day']()+1)/7)};return function(re,se,ne){var oe=K;if(1!=arguments.length||'[object String]'!=Object.prototype.toString.call(re)||/\d/.test(re)||(se=re,re=void 0),re=re?new Date(re):new Date,isNaN(re))throw SyntaxError('invalid date:'+re);se=(oe.masks[se]||se||oe.masks['default'])+'','UTC:'==se.slice(0,4)&&(se=se.slice(4),ne=!0);var le=ne?'getUTC':'get',de=re[le+'Date'](),pe=re[le+'Day'](),ue=re[le+'Month'](),ge=re[le+'FullYear'](),ce=re[le+'Hours'](),xe=re[le+'Minutes'](),he=re[le+'Seconds'](),me=re[le+'Milliseconds'](),ye=ne?0:re.getTimezoneOffset(),fe={d:de,dd:ie(de),ddd:oe.i18n.dayNames[pe],dddd:oe.i18n.dayNames[pe+7],m:ue+1,mm:ie(ue+1),mmm:oe.i18n.monthNames[ue],mmmm:oe.i18n.monthNames[ue+12],yy:(ge+'').slice(2),yyyy:ge,h:ce%12||12,hh:ie(ce%12||12),H:ce,HH:ie(ce),M:xe,MM:ie(xe),s:he,ss:ie(he),l:ie(me,3),L:ie(99<me?Math.round(me/10):me),t:12>ce?'a':'p',tt:12>ce?'am':'pm',T:12>ce?'A':'P',TT:12>ce?'AM':'PM',Z:ne?'UTC':((re+'').match(ee)||['']).pop().replace(te,''),o:(0<ye?'-':'+')+ie(100*Math.floor(Math.abs(ye)/60)+Math.abs(ye)%60,4),S:['th','st','nd','rd'][3<de%10?0:(10!=de%100-de%10)*de%10],W:ae(re,le)};return se.replace($,function(be){return be in fe?fe[be]:be.slice(1,be.length-1)})}}();K.masks={'default':'ddd mmm dd yyyy HH:MM:ss',shortDate:'m/d/yy',mediumDate:'mmm d, yyyy',longDate:'mmmm d, yyyy',fullDate:'dddd, mmmm d, yyyy',shortTime:'h:MM TT',mediumTime:'h:MM:ss TT',longTime:'h:MM:ss TT Z',isoDate:'yyyy-mm-dd',isoTime:'HH:MM:ss',isoDateTime:'yyyy-mm-dd\'T\'HH:MM:ss',isoUtcDateTime:'UTC:yyyy-mm-dd\'T\'HH:MM:ss\'Z\''},K.i18n={dayNames:['Sun','Mon','Tue','Wed','Thu','Fri','Sat','Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],monthNames:['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec','January','February','March','April','May','June','July','August','September','October','November','December']};class J extends Z.default{constructor(){super(...arguments)}init($,ee){super.init($,ee),this.wrapper={1:document.createElementNS($.ns,'g'),2:document.createElementNS($.ns,'g')},this.groups={'1':[],'2':[]};var te=document.createElementNS($.ns,'rect');te.setAttribute('fill','#c0c0c0'),te.setAttribute('stroke','#808080'),te.setAttribute('height','20'),te.setAttribute('x','0'),te.setAttribute('y','0'),this.rect=te,this.wrapper[1].appendChild(this.rect),this.group.appendChild(this.wrapper[1]),this.group.appendChild(this.wrapper[2]),this.wrapper[1].setAttribute('transform','translate( 0, 25 )'),this.wrapper[2].setAttribute('transform','translate( 0, 00 )')}draw(){this.cacheCurrentMax(),this.cacheCurrentMin(),(void 0==this.currentAxisMin||void 0==this.currentAxisMax)&&this.setMinMaxToFitSeries(!0),this.line.setAttribute('x1',this.getMinPx()),this.line.setAttribute('x2',this.getMaxPx()),this.line.setAttribute('y1',0),this.line.setAttribute('y2',0);var $=this.maxPx-this.minPx,ee=this.getCurrentInterval(),te=this.getCurrentMax(),ie=this.getCurrentMin();if(this.rect.setAttribute('width',$),this.rect.setAttribute('x',this.minPx),!te||!ie)return 0;var ae;for(ue=0;ue<Q.length;ue++)if(Q[ue].threshold>ee/$){ae=Q[ue];break}ae||(ae=Q[Q.length-1]);var ne=0,re,se,oe,le,de,pe,ue;for(ne=1;2>=ne;ne++){if(!U.isNumeric(ie)){W(this,ne,0);break}oe=new Date(ie),le=F(oe,ae.increments[ne]),ue=0;do if(de=R(le,ae.increments[ne].format),pe=V(this,ne,ue),re=this.getPx(le.getTime()),le=O(le,ae.increments[ne]),se=this.getPx(le.getTime()),G(ne,pe,de,this.getMinPx(),this.getMaxPx(),re,se),ue++,100<ue)break;while(le.getTime()<te);W(this,ne,ue)}}isX(){return!0}getWrapper($){return this.wrapper[$]}setShift($){this.shift=$,this.group.setAttribute('transform','translate(0 '+(this.top?this.shift:this.graph.getDrawingHeight()-this.shift)+')')}getAxisPosition(){return 60}setMinMaxFlipped(){var $=this.maxPx-this.minPx,ee=$*this.options.span[1]+this.minPx,te=$*this.options.span[0]+this.minPx;this.minPxFlipped=this.isFlipped()?ee:te,this.maxPxFlipped=this.isFlipped()?te:ee}}E.default=J})},function(u,A,S){var P,C,T;(function(E,X){C=[A,S(1),S(15),S(16),S(3),S(17),S(5)],P=X,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X,Y,I,F,O,V){'use strict';function W(J){return J&&J.__esModule?J:{default:J}}Object.defineProperty(E,'__esModule',{value:!0}),W(X);var B=W(Y),R=W(I),G=function($){if($&&$.__esModule)return $;var ee={};if(null!=$)for(var te in $)Object.prototype.hasOwnProperty.call($,te)&&(ee[te]=$[te]);return ee.default=$,ee}(F),Z=W(O),U=W(V);const Q={lineColor:'black',lineStyle:1,flip:!1,label:'',lineWidth:1,markers:!1,trackMouse:!1,trackMouseLabel:!1,trackMouseLabelRouding:1,lineToZero:!1,selectableOnClick:!0,markersIndependant:!1};class K extends B.default{constructor(){super(...arguments)}init(J,$,ee){this.selectionType='unselected',this.markerFamilies={},this.graph=J,this.name=$,this.options=G.extend(!0,{},Q,ee||{}),G.mapEventEmission(this.options,this),this.styles={},this.styles.unselected={lineColor:this.options.lineColor,lineStyle:this.options.lineStyle,lineWidth:this.options.lineWidth,markers:this.options.markers},this.styles.selected={lineWidth:3},this.extendStyles(),this.markersDom=new Map,this.shown=!0,this.data=[],this._isMinOrMax={x:{min:!1,max:!1},y:{min:!1,max:!1}},this.groupLines=document.createElementNS(this.graph.ns,'g'),this.domMarker=document.createElementNS(this.graph.ns,'path'),this.domMarker.style.cursor='pointer',this.groupMain=document.createElementNS(this.graph.ns,'g'),this.additionalData={},this.marker=document.createElementNS(this.graph.ns,'circle'),this.marker.setAttribute('fill','black'),this.marker.setAttribute('r',3),this.marker.setAttribute('display','none'),this.markerLabel=document.createElementNS(this.graph.ns,'text'),this.markerLabelSquare=document.createElementNS(this.graph.ns,'rect'),this.markerLabelSquare.setAttribute('fill','white'),this.domMarkerHover={},this.domMarkerSelect={},this.markerHovered=0,this.groupMarkerSelected=document.createElementNS(this.graph.ns,'g'),this.markerPoints={},this.lines=[],this.groupMain.appendChild(this.groupLines),this.groupMain.appendChild(this.marker),this.groupMain.appendChild(this.groupMarkerSelected),this.groupMain.appendChild(this.markerLabelSquare),this.groupMain.appendChild(this.markerLabel),this.groupMarkers=document.createElementNS(this.graph.ns,'g'),this.groupMain.appendChild(this.groupMarkers),this.independantMarkers=[],this.initExtended1&&this.initExtended1(),this.groupLines.addEventListener('click',()=>{this.options.selectableOnClick&&(this.isSelected()?this.graph.unselectSerie(this):this.graph.selectSerie(this))}),this.options.markers&&this.setMarkers(this.options.markers,'unselected')}setWaveform(J){if(!(J instanceof U.default))throw'Cannot assign waveform to serie. Waveform is not of the proper Waveform instance';return this._waveform=J,this.minX=this._waveform.getXMin(),this.maxX=this._waveform.getXMax(),this.minY=this._waveform.getMin(),this.maxY=this._waveform.getMax(),this.graph.updateDataMinMaxAxes(),this.dataHasChanged(),this}setOptions(J){return this.options=G.extend(!0,{},K.prototype.defaults,J||{}),this.styles.unselected={lineColor:this.options.lineColor,lineStyle:this.options.lineStyle,markers:this.options.markers},this.applyLineStyles(),this}calculateSlots(){this,this.slotsData={};for(var J=0,$=this.slots.length;J<$;J++)this.calculateSlot(this.slots[J],J)}slotCalculator(J,$){return(0,R.default)({min:this.minX,max:this.maxX,data:this.data,slot:J,slotNumber:$,flip:this.getFlip()})}calculateSlot(J,$){var ee=this;this.slotsData[J]=this.slotCalculator(J,$),this.slotsData[J].then(function(te){return ee.slotsData[J]=te,te})}onMouseOverMarker(J,$){this.toggleMarker($,!0,!0),this.options.onMouseOverMarker&&this.options.onMouseOverMarker($,!!this.infos&&(this.infos[$[0]]||!1),[this.data[$[1]][2*$[0]],this.data[$[1]][2*$[0]+1]])}onMouseOutMarker(J,$){this.markersOffHover(),this.options.onMouseOutMarker&&this.options.onMouseOutMarker($,!!this.infos&&(this.infos[$[0]]||!1),[this.data[$[1]][2*$[0]],this.data[$[1]][2*$[0]+1]])}toggleMarker(J,$,ee){let te=J[0];J=J.join();var ie;'undefined'==typeof $&&(ie=ee?!this.domMarkerHover[J]:!this.domMarkerSelect[J]);var ae=this['domMarker'+(ee?'Hover':'Select')];if(ie||!0===$){if(!ae[J]){var re=document.createElementNS(this.graph.ns,'path');this.setMarkerStyleTo(re,this.markerFamilies[this.selectionType][this.getMarkerCurrentFamily(te)]),this['domMarker'+(ee?'Hover':'Select')][J]=re,this.groupMarkerSelected.appendChild(re)}else re=ae[J];var se,ne;'x_equally_separated'==this.mode?(se=this._xDataToUse.x+te*this._xDataToUse.dx,ne=this.data[te]):(se=this.data[2*te],ne=this.data[2*te+1]),se=this.getX(se),ne=this.getY(ne),re.setAttribute('d','M '+se+' '+ne+' '+this.getMarkerPath(this.markerFamilies[this.selectionType][this.getMarkerCurrentFamily(te)],1)),ee&&this.markerHovered++}else if((!ie||!1===$)&&(ee&&this.domMarkerHover[J]&&!this.domMarkerSelect[J]||this.domMarkerSelect[J])){if(!ae[J])return;this.groupMarkerSelected.removeChild(ae[J]),delete ae[J],ee&&this.markerHovered--}return ie}markersOffHover(){for(var J in this.domMarkerHover)this.toggleMarker(J.split(','),!1,!0);return this}markersOffSelect(){for(var J in this.domMarkerSelect)this.toggleMarker(J.split(','),!1,!1);return this}onClickOnMarker(J,$){var ee=this.toggleMarker($);ee&&this.options.onSelectMarker&&this.options.onSelectMarker($,!!this.infos&&(this.infos[$[0]]||!1)),!ee&&this.options.onUnselectMarker&&this.options.onUnselectMarker($,!!this.infos&&(this.infos[$[0]]||!1)),this.options.onToggleMarker&&this.options.onToggleMarker($,!!this.infos&&(this.infos[$[0]]||!1),ee)}_getMarkerIndexFromEvent(J){var $=this.graph._getXY(J);return this.searchIndexByPxXY($.x-this.graph.getPaddingLeft(),$.y-this.graph.getPaddingTop())}onMouseWheel(){}empty(){for(var J=0,$=this.lines.length;J<$;J++)this.groupLines.removeChild(this.lines[J]);return this.lines=[],this}select(J){return J=J||'selected',this.selected='unselected'!==J,this.areMarkersShown()||this.areMarkersShown(J)?(this.selectionType=J,this.draw(!0),this.applyLineStyles()):(this.selectionType=J,this.applyLineStyles()),this.applyLineStyle(this.getSymbolForLegend()),this}unselect(){return this.selected=!1,this.select('unselected')}degrade(J){return this.degradationPx=J,this}drawInit(J){if(this.currentLineId=0,this.counter=0,this._drawn=!0,this.currentLine='',!this._waveform)this._dataToUse=this.data,this._xDataToUse=this.xData;else if(this.degradationPx)this._waveform.resampleForDisplay({resampleToPx:this.degradationPx,xPosition:this.getXAxis().getPx.bind(this.getXAxis()),minX:this.getXAxis().getCurrentMin(),maxX:this.getXAxis().getCurrentMax()}),this._dataToUse=[this._waveform.getDataToUseFlat()];else if(this._waveform.hasAggregation()){let $=this._waveform.getAggregatedData(this.graph.getDrawingWidth());if($ instanceof Promise)return $.then(()=>{this.draw(J)}),!1}return this._optimizeMonotoneous=this.isXMonotoneous(),this.optimizeMonotoneousDirection=this.XMonotoneousDirection()&&!this.getXAxis().isFlipped()||!this.XMonotoneousDirection()&&this.getXAxis().isFlipped(),this._optimizeBreak,this._optimizeBuffer,!0}removeLinesGroup(){this._afterLinesGroup=this.groupLines.nextSibling,this.groupMain.removeChild(this.groupLines)}insertLinesGroup(){if(!this._afterLinesGroup)throw'Could not find group after lines to insertion.';this.groupMain.insertBefore(this.groupLines,this._afterLinesGroup),this._afterLinesGroup=!1}removeExtraLines(){for(var J=this.currentLineId,$=this.lines.length;J<$;J++)this.groupLines.removeChild(this.lines[J]);this.lines.splice(this.currentLineId,$-this.currentLineId),this.currentLineId=0}draw(J){if(J||this.hasDataChanged()){if(!this.drawInit(J))return;console.log(this.getName(),this.getYAxis().getCurrentMax());var $=this._dataToUse,ee=this._xDataToUse,te=this._slotToUse;this.removeLinesGroup(),this.eraseMarkers(),this.lookForMaxima=!0,this.lookForMinima=!1,this.markerFamily=this.markerFamilies[this.selectionType||'unselected'],this.pos0=this.getYAxis().getPos(0),this.error&&this.errorDrawInit(),this._draw_standard(),this.error&&this.errorDraw(),this.removeExtraLines(),this.insertMarkers(),this.insertLinesGroup()}for(var ie in this.domMarkerHover)this.toggleMarker(ie.split(','),!1,!0);for(var ie in this.domMarkerSelect)this.toggleMarker(ie.split(','),!1,!1);this.applyLineStyle(this.getSymbolForLegend()),this.hasStyleChanged(this.selectionType)&&this.updateStyle(),this.dataHasChanged(!1)}_draw_standard(){let J=this,$=this._waveform,ae=!1,re=!1,de=this.getXAxis(),pe=this.getYAxis(),ue=de.getCurrentMin(),ge=pe.getCurrentMin(),ce=de.getCurrentMax(),xe=pe.getCurrentMax(),ee,te,ie,se,ne,oe,le;if($){ee=$.getData(!0);let _e=!1,Se=!1,Ce=this.isMonotoneous(),ve=this.markersShown(),we=0,Le=$.getLength(),he,me,ye,fe,be,Ae,Me,ke,Pe;for(this.counter1=0,this.currentLine='',$.isXMonotoneous()&&($.getXMonotoneousDirection()?(we=$.getIndexFromX(ue)||0,Le=$.getIndexFromX(ce),!1===Le&&(Le=$.getLength())):(we=$.getIndexFromX(ce)||0,Le=$.getIndexFromX(ue),!1===Le&&(Le=$.getLength())),Le+=2,Le>$.getLength()&&(Le=$.getLength()));we<Le;we+=1){if(te=$.getX(we,!0),ie=ee[we],te!=te||ie!=ie){this._createLine();continue}if(te<ue&&ae<ue||te>ce&&ae>ce||(ie<ge&&re<ge||ie>xe&&re>xe)&&!this.options.lineToZero){ae=te,re=ie,Se=!0;continue}if(this.counter2=we,ve&&this.getMarkerCurrentFamily(this.counter2),oe=this.getX(te),le=this.getY(ie),oe!=se||le!=ne){if(_e=Ce?ie<ge||ie>xe:te<ue||ie<ge||te>ce||ie>xe,this.options.lineToZero){if(_e=te<ue||te>ce,_e)continue;}else if(_e||Se){!1!==ae&&!1!==re||Se?(Pe=[],he=(te-ue)/(te-ae),me=ie-he*(ie-re),ye=(te-ce)/(te-ae),fe=ie-ye*(ie-re),be=(ie-ge)/(ie-re),Ae=te-be*(te-ae),Me=(ie-xe)/(ie-re),ke=te-Me*(te-ae),1>he&&0<he&&!1!==me&&me<xe&&me>ge&&Pe.push([ue,me]),1>ye&&0<ye&&!1!==fe&&fe<xe&&fe>ge&&Pe.push([ce,fe]),1>be&&0<be&&!1!==Ae&&Ae<ce&&Ae>ue&&Pe.push([Ae,ge]),1>Me&&0<Me&&!1!==ke&&ke<ce&&ke>ue&&Pe.push([ke,xe]),0<Pe.length?_e?Se?2==Pe.length&&(this._createLine(),this._addPoint(this.getX(Pe[0][0]),this.getY(Pe[0][1]),Pe[0][0],Pe[0][1],!1,!1,!1),this._addPoint(this.getX(Pe[1][0]),this.getY(Pe[1][1]),Pe[0][0],Pe[0][1],!1,!1,!1)):(1<Pe.length&&(console.error('Programmation error. Please e-mail me.'),console.log(Pe,ke,Ae,fe,me,ie,ge,xe,re)),this._addPoint(this.getX(Pe[0][0]),this.getY(Pe[0][1]),Pe[0][0],Pe[0][1],!1,!1,!1)):(1<Pe.length&&(console.error('Programmation error. Please e-mail me.'),console.log(Pe,ke,Ae,fe,me,ie,ge,xe,re)),this._createLine(),this._addPoint(this.getX(Pe[0][0]),this.getY(Pe[0][1]),Pe[0][0],Pe[0][1],!1,!1,!1),this._addPoint(oe,le,ae,re,!1,!1,!0)):!_e&&this._addPoint(oe,le,ae,re,we,!1,!1)):(se=oe,ne=le,ae=te,re=ie),se=oe,ne=le,ae=te,re=ie,Se=_e;continue}if(oe!=oe||le!=le){0<this.counter&&this._createLine();continue}this._addPoint(oe,le,te,ie,we,!1,!0),se=oe,ne=le,ae=te,re=ie}}if(this._createLine(),this._tracker){this._trackerDom&&this._trackerDom.remove();var Te=this.groupLines.cloneNode(!0);for(this.groupMain.appendChild(Te),we=0,Le=Te.children.length;we<Le;we++)Te.children[we].setAttribute('stroke','transparent'),Te.children[we].setAttribute('stroke-width','25px'),Te.children[we].setAttribute('pointer-events','stroke');J._trackerDom=Te,J.groupMain.addEventListener('mousemove',function(Ee){var Xe=J.graph._getXY(Ee),De=J.handleMouseMove(!1,!1);J._trackingCallback(J,De,Xe.x,Xe.y)}),J.groupMain.addEventListener('mouseleave',function(){J._trackingOutCallback(J)})}return this}}kill(){super.kill()}getMarkerCurrentFamily(J){if(this.markerPoints&&this.markerPoints[this.selectionType]){var $;for(var ee=0;ee<this.markerPoints[this.selectionType].length&&this.markerPoints[this.selectionType][ee][0]<=J;ee++)this.markerPoints[this.selectionType][ee][1]>=J&&(this.markerCurrentFamily=this.markerPoints[this.selectionType][ee][2],$=this.markerFamilies[this.selectionType][this.markerCurrentFamily]);return!!$&&(this.getMarkerDom($),this.markerCurrentFamily)}}drawSlot(J,$){var ee=0,te,ie,ae,re;if(this.isFlipped())var se=this.slots[$]/(this.maxY-this.minY),ne=Math.floor((this.getYAxis().getCurrentMin()-this.minY)*se),oe=Math.ceil((this.getYAxis().getCurrentMax()-this.minY)*se);else var se=this.slots[$]/(this.maxX-this.minX),ne=Math.floor((this.getXAxis().getCurrentMin()-this.minX)*se),oe=Math.ceil((this.getXAxis().getCurrentMax()-this.minX)*se);for(re=ne;re<=oe;re++)J[re]&&(this.isFlipped()?(ie=Math.floor(this.getY(J[re].x)),ae=this.getX(J[re].max),this._addPoint(this.getX(J[re].start),ie,!1,!1,!1,!1,!1),this._addPoint(ae,ie,!1,!1,!1,!0,!1),this._addPoint(this.getX(J[re].min),ie,!1,!1,!1,!1,!1),this._addPoint(this.getX(J[re].stop),ie,!1,!1,!1,!0,!1)):(te=Math.floor(this.getX(J[re].x)),ae=this.getY(J[re].max),this._addPoint(te,this.getY(J[re].start),!1,!1,!1,!1,!1),this._addPoint(te,ae,!1,!1,!1,!0,!1),this._addPoint(te,this.getY(J[re].min),!1,!1,!1,!1,!1),this._addPoint(te,this.getY(J[re].stop),!1,!1,!1,!0,!1)));this._createLine(),ee++}setMarkerStyleTo(J,$){if(!J||!$)throw console.trace(),'Cannot set marker style. DOM does not exist.';J.setAttribute('fill',$.fillColor||'transparent'),J.setAttribute('stroke',$.strokeColor||this.getLineColor()),J.setAttribute('stroke-width',$.strokeWidth||1)}hideTrackingMarker(){this.marker.setAttribute('display','none'),this.markerLabel.setAttribute('display','none'),this.markerLabelSquare.setAttribute('display','none')}_addPoint(J,$,ee,te,ie,ae,re){if(J===J&&$===$)return 0==this.counter?this.currentLine='M ':this.options.lineToZero||ae?this.currentLine+='M ':this.currentLine+='L ',this.currentLine+=J,this.currentLine+=' ',this.currentLine+=$,this.currentLine+=' ',this.options.lineToZero&&void 0!==this.pos0&&(this.currentLine+='L ',this.currentLine+=J,this.currentLine+=' ',this.currentLine+=pos,this.currentLine+=' '),this.error&&this.errorAddPoint(ie,ee,te,J,$),this.markerPoints?void(this.markersShown()&&!1!==re&&this.markerFamily&&drawMarkerXY(this,this.markerFamily[this.markerCurrentFamily],J,$,this.markersDom.get(this.markerFamily[this.markerCurrentFamily])),this.counter++):void this.counter++}_createLine(){var J=this.currentLineId++,$;return this.lines[J]?$=this.lines[J]:($=document.createElementNS(this.graph.ns,'path'),this.applyLineStyle($),this.groupLines.appendChild($),this.lines[J]=$),0==this.counter?$.setAttribute('d',''):$.setAttribute('d',this.currentLine),this.currentLine='M ',this.counter=0,$}applyLineStyles(){for(var J=0;J<this.lines.length;J++)this.applyLineStyle(this.lines[J])}applyLineStyle(J){J.setAttribute('stroke',this.getLineColor()),J.setAttribute('stroke-width',this.getLineWidth()),this.getLineDashArray()?J.setAttribute('stroke-dasharray',this.getLineDashArray()):J.removeAttribute('stroke-dasharray'),J.setAttribute('fill','none')}updateStyle(){this.applyLineStyles(),this.setLegendSymbolStyle(),this.styleHasChanged(!1)}getMarkerPath(J,$){var ee=J.zoom||1,$=$||0,te=[];switch(J.type){case 2:te=['m',-2,-2,'l',4,4,'m',-4,0,'l',4,-4];break;case 3:te=['m',-2,0,'l',4,0,'m',-2,-2,'l',0,4];break;case 4:te=['m',-1,-1,'l',2,0,'l',-1,2,'z'];break;default:case 1:te=['m',-2,-2,'l',4,0,'l',0,4,'l',-4,0,'z'];}if((1==ee||!ee)&&!$)return te.join(' ');if(te){for(var ie=0,ae=te.length;ie<ae;ie++)'number'==typeof te[ie]&&(te[ie]*=ee+$);return te.join(' ')}}getMarkerDom(J){var $=this;if(!this.markersDom.has(J)){var ee=document.createElementNS(this.graph.ns,'path');this.setMarkerStyleTo(ee,J),this.markersDom.set(J,{dom:ee,path:''}),ee.addEventListener('mouseover',function(te){var ie=$._getMarkerIndexFromEvent(te);$.onMouseOverMarker(te,ie)}),ee.addEventListener('mouseout',function(te){var ie=$._getMarkerIndexFromEvent(te);$.onMouseOutMarker(te,ie)}),ee.addEventListener('click',function(te){var ie=$._getMarkerIndexFromEvent(te);$.onClickOnMarker(te,ie)})}return J.dom}getMarkerDomIndependant(J,$,ee){var te=this,ie=J+','+$;if(!this.independantMarkers[ie]){var ae=document.createElementNS(this.graph.ns,'path');this.setMarkerStyleTo(ae,ee),ae.addEventListener('mouseover',function(re){te.onMouseOverMarker(re,[$,J])}),ae.addEventListener('mouseout',function(re){te.onMouseOutMarker(re,[$,J])}),ae.addEventListener('click',function(re){te.onClickOnMarker(re,[$,J])}),this.independantMarkers[ie]=ae}return this.groupMarkers.appendChild(this.independantMarkers[ie]),this.independantMarkers[ie]}searchIndexByPxXY(J,$){var ee=!1,te=!1,ie,ae=this._xDataToUse,re,se;if('x_equally_separated'==this.mode)for(var ne=0,oe=this.data.length;ne<oe;ne++)for(var le=0,de=this.data[ne].length;le<de;le+=1)re=ae[ne].x+le*ae[ne].dx,se=this.data[ne][le],ie=Math.pow(this.getX(re)-J,2)+Math.pow(this.getY(se)-$,2),(!ee||ie<ee)&&(ee=ie,te=[le,ne]);else for(var ne=0,oe=this.data.length;ne<oe;ne++)for(var le=0,de=this.data[ne].length;le<de;le+=2)re=this.data[ne][le],se=this.data[ne][le+1],ie=Math.pow(this.getX(re)-J,2)+Math.pow(this.getY(se)-$,2),(!ee||ie<ee)&&(ee=ie,te=[le/2,ne]);return te}searchClosestValue(J,$){if(this._waveform){var ee=this._waveform.getIndexFromX(J);return{xMin:this._waveform.getX(ee),xMax:this._waveform.getX(ee+1),yMin:this._waveform.getY(ee),yMax:this._waveform.getY(ee+1)}}var te}handleMouseMove(J,$){var ee=J||this.getXAxis().getMouseVal(),te=this.searchClosestValue(ee);if(te){var ie=(ee-te.xMin)/(te.xMax-te.xMin),ae=(1-ie)*te.yMin+ie*te.yMax;if($&&this.options.trackMouse){if(void 0==te.xMin)return!1;var re=this.getX(this.getFlip()?ae:ee),se=this.getY(this.getFlip()?ee:ae);switch(this.marker.setAttribute('display','block'),this.marker.setAttribute('cx',re),this.marker.setAttribute('cy',se),this.markerLabel.setAttribute('display','block'),this.markerLabelSquare.setAttribute('display','block'),this.options.trackMouseLabel){case!1:break;default:this.markerLabel.textContent=this.options.trackMouseLabel.replace('<x>',ee.toFixed(this.options.trackMouseLabelRouding)).replace('<y>',ae.toFixed(this.options.trackMouseLabelRouding));}this.markerLabel.setAttribute('x',re+5),this.markerLabel.setAttribute('y',se-5),this.markerLabelSquare.setAttribute('x',re+5),this.markerLabelSquare.setAttribute('y',se-5-this.graph.options.fontSize),this.markerLabelSquare.setAttribute('width',this.markerLabel.getComputedTextLength()+2),this.markerLabelSquare.setAttribute('height',this.graph.options.fontSize+2)}return{xBefore:te.xMin,xAfter:te.xMax,yBefore:te.yMin,yAfter:te.yMax,trueX:ee,interpolatedY:ae,xBeforeIndex:te.xBeforeIndex,xIndexClosest:te.xClosest}}}_searchBinary(J,$,ee){let te=0,ie=$.length,ae=ie-2,se=0,ne=2,re;if($[te]==J)return te;if($[ae]==J)return ae;for(;!0;){if(se++,100<se)throw'Error loop';for(re=(te+ae)/2,re-=re%2;isNaN($[re]);)re+=ne;if(re==te||$[re]==J||re==ae)return re;$[re]<=J?ee?ae=re:te=re:$[re]>J&&(ee?te=re:ae=re),ne*=-1}}getMax(J,$){var ee=Math.min(J,$),te=Math.max(J,$),ie=this.searchClosestValue(ee),ae=this.searchClosestValue(te),ne=-(1/0),re,se,oe,le;if(ie||(ee=this.minX,ie=this.searchClosestValue(ee)),ae||(te=this.maxX,ae=this.searchClosestValue(te)),!ie||!ae)return-(1/0);for(re=ie.dataIndex;re<=ae.dataIndex;re++)for(oe=re==ie.dataIndex?ie.xBeforeIndexArr:0,le=re==ae.dataIndex?ae.xBeforeIndexArr:this.data[re].length,se=oe;se<=le;se+=2)ne=Math.max(ne,this.data[re][se+1]);return ne}getMin(J,$){var ee=Math.min(J,$),te=Math.max(J,$),ie=this.searchClosestValue(ee),ae=this.searchClosestValue(te),ne=1/0,re,se,oe,le;if(ie||(ee=this.minX,ie=this.searchClosestValue(ee)),ae||(te=this.maxX,ae=this.searchClosestValue(te)),!ie||!ae)return 1/0;for(re=ie.dataIndex;re<=ae.dataIndex;re++)for(oe=re==ie.dataIndex?ie.xBeforeIndexArr:0,le=re==ae.dataIndex?ae.xBeforeIndexArr:this.data[re].length,se=oe;se<=le;se+=2)ne=Math.min(ne,this.data[re][se+1]);return ne}setStyle(J,$='unselected'){this.styles[$]=J,this.styleHasChanged($)}setLineStyle(J,$='unselected',ee){return this.styles[$]=this.styles[$]||{},this.styles[$].lineStyle=J,ee&&this.setLineStyle(J,'selected'),this.styleHasChanged($),this}getLineStyle(J){return this.getStyle(J).lineStyle}getLineDashArray(J=this.selectionType||'unselected'){switch(this.getStyle(J).lineStyle){case 2:return'1, 1';break;case 3:return'2, 2';break;case 4:return'3, 3';break;case 5:return'4, 4';break;case 6:return'5, 5';break;case 7:return'5 2';break;case 8:return'2 5';break;case 9:return'4 2 4 4';break;case 10:return'1,3,1';break;case 11:return'9 2';break;case 12:return'2 9';break;case 1:case!1:return!1;break;default:return this.styles[J].lineStyle;}this.styleHasChanged(J)}getStyle(J=this.selectionType||'unselected'){return this.styles[J]}extendStyles(){for(var J in this.styles){var $=this.styles[J];$&&(this.styles[J]=G.extend(!0,{},this.styles.unselected,$))}}extendStyle(J,$){var ee=this.styles[J];this.styles[J]=G.extend(!0,{},this.styles[$||'unselected'],ee||{}),this.styles[J].markers.map(function(te){te.dom&&(te.dom='')}),this._recalculateMarkerPoints(J,this.styles[J].markers),this.styleHasChanged(J)}setLineWidth(J,$,ee){return $=$||'unselected',this.styles[$]=this.styles[$]||{},this.styles[$].lineWidth=J,ee&&this.setLineWidth(J,'selected'),this.styleHasChanged($),this}getLineWidth(J){return this.getStyle(J).lineWidth||1}setLineColor(J,$,ee){return $=$||'unselected',this.styles[$]=this.styles[$]||{},this.styles[$].lineColor=J,ee&&this.setLineColor(J,'selected'),this.styleHasChanged($),this}getLineColor(J){return this.getStyle(J).lineColor||'black'}showMarkers(J,$){return J=J||'unselected',this.styles[J]=this.styles[J]||{},this.styles[J].showMarkers=!0,$&&this._drawn?this.draw(!0):this.styleHasChanged(J),this}hideMarkers(J,$){return J=J||'unselected',this.styles[J].showMarkers=!1,$&&this._drawn?this.draw(!0):this.styleHasChanged(J),this}markersShown(J){return!1!==this.getStyle(J).showMarkers}areMarkersShown(){return this.markersShown.apply(this,arguments)}isMarkersShown(){return this.markersShown.apply(this,arguments)}setMarkers(J,$,ee){return this.styles[$||'unselected']=this.styles[$||'unselected']||{},this.showMarkers($,!1),Array.isArray(J)||'object'!=typeof J?!J&&(J=[{type:1,zoom:1,points:'all'}]):J=[J],this.styles[$||'unselected'].markers=J,ee&&(this.styles.selected.markers=G.extend(!0,{},J)),this._recalculateMarkerPoints($,J),this.styleHasChanged($),this.dataHasChanged(!0),this}setMarkersPoints(J,$,ee){this._extendMarkers('points',J,$,ee,!0)}setMarkersColor(J,$,ee){this._extendMarkers('color',J,$,ee)}setMarkersType(J,$,ee){this._extendMarkers('type',J,$,ee)}setMarkersZoom(J,$,ee){this._extendMarkers('zoom',J,$,ee)}setMarkersStrokeColor(J,$,ee){this._extendMarkers('strokeColor',J,$,ee)}setMarkersStrokeWidth(J,$,ee){this._extendMarkers('strokeWidth',J,$,ee)}setMarkersFillColor(J,$,ee){this._extendMarkers('fillColor',J,$,ee)}_extendMarkers(J,$,ee,te,ie){(ee=ee||0,te=te||'unselected',this.styles[te]&&this.styles[te].markers)&&(this.styles[te].markers[ee][J]=$,ie&&this._recalculateMarkerPoints(te,this.styles[te].markers),this.markersDom[this.styles[te].markers[ee]]&&this.setMarkerStyleTo(this.markersDom[this.styles[te].markers[ee]].dom,this.styles[te].markers[ee]))}_recalculateMarkerPoints(J,$){var ee=[];ee.push([0,1/0,null]);for(var te=0,ie=$.length;te<ie;te++){$[te].markerPath=this.getMarkerPath($[te]),$[te].points||($[te].points='all'),Array.isArray($[te].points)||($[te].points=[$[te].points]);for(var ae=0,re=$[te].points.length;ae<re;ae++)'all'==$[te].points[ae]?ee.push([0,1/0,te]):Array.isArray($[te].points[ae])?ee.push([$[te].points[ae][0],$[te].points[ae][1],te]):ee.push([$[te].points[ae],$[te].points[ae],te])}this.markerFamilies[J||'unselected']=$,ee.sort(function(se,ne){return se[0]-ne[0]||(null==se[2]?-1:1)}),this.markerPoints[J||'unselected']=ee}insertMarkers(J){if(this.markerFamilies&&this.markerFamilies[J||this.selectionType]&&!this.options.markersIndependant)for(var $=0,ee=this.markerFamilies[J||this.selectionType].length;$<ee;$++)if(this.markersDom.has(this.markerFamilies[J||this.selectionType][$])){let te=this.markersDom.get(this.markerFamilies[J||this.selectionType][$]);te.dom.setAttribute('d',te.path),this.groupMarkers.appendChild(te.dom),this.currentMarkersSelectionType=this.selectionType}}getMarkerForLegend(){if(this.markerPoints&&this.markerPoints[this.selectionType]){if(!this.markerForLegend){var J=document.createElementNS(this.graph.ns,'path');this.setMarkerStyleTo(J,this.markerFamilies[this.selectionType][0]),J.setAttribute('d','M 14 0 '+this.getMarkerPath(this.markerFamilies[this.selectionType][0])),this.markerForLegend=J}return this.markerForLegend}}eraseMarkers(){var J=this;if(this.options.markersIndependant){for(var $ in this.independantMarkers)J.groupMarkers.removeChild(this.independantMarkers[$]);this.independantMarkers={}}else this.currentMarkersSelectionType&&(this.markersDom.forEach(function(ee){ee.dom&&ee.dom.parentNode===J.groupMarkers&&(J.groupMarkers.removeChild(ee.dom),ee.path='')}),this.currentMarkersSelectionType=!1)}isMonotoneous(){return this._waveform?this._waveform.isMonotoneous():!!this.xmonotoneous}XIsMonotoneous(){return this.xmonotoneous=!0,this}isXMonotoneous(){return this.xmonotoneous||!1}XMonotoneousDirection(){return this.data&&this.data[0]&&0<this.data[0][2]-this.data[0][0]}}G.mix(K,Z.default),E.default=K})},function(u,A,S){var P,C,T;(function(E,X){C=[A,S(4),S(3),S(5)],P=X,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X,Y,I){'use strict';function F(R){return R&&R.__esModule?R:{default:R}}Object.defineProperty(E,'__esModule',{value:!0});var O=F(X),V=function(G){if(G&&G.__esModule)return G;var Z={};if(null!=G)for(var U in G)Object.prototype.hasOwnProperty.call(G,U)&&(Z[U]=G[U]);return Z.default=G,Z}(Y),W=F(I);class B extends O.default{constructor(){super(...arguments)}setData(R,G,Z){function U(fe){var be=Object.prototype.toString.call(fe);return'[object Array]'===be||'[object Int16Array]'===be||'[object Int32Array]'===be||'[object Float32Array]'===be||'[object Float64Array]'===be||'[object Uint8Array]'===be||'[object Uint16Array]'===be||'[object Uint32Array]'===be||'[object Int8Array]'===be}if(R instanceof W.default)return this.setWaveform(R);var Q=0,G=G||!1,Z=Z||'float',ee=0,K,J,$,te;this.minX=Number.MAX_SAFE_INTEGER,this.maxX=Number.MIN_SAFE_INTEGER,this.minY=Number.MAX_SAFE_INTEGER,this.maxY=Number.MIN_SAFE_INTEGER;let ie=[];var ae=U(R);if(!ae&&'object'==typeof R)R=[R];else if(ae&&!U(R[0])&&'object'!=typeof R[0])R=[R],G=!0;else if(ae&&U(R[0])&&2<R[0].length)G=!0;else if(!ae)return void V.throwError('Data is not an array');var re=U(R[0]),se=U(R[0][0]);if(!re||G||se||(R=[R]),re)for(var ne=0,oe=R.length;ne<oe;ne++){$=this._addData(Z,G?R.length:2*R.length),ie.push($),Q=0;for(var le=0,de=R[ne].length;le<de;le++)G?($[Q]=[R[ne][le],R[ne][le+1]],Q++,ee+=le%2?1:0):($[Q]=[R[ne][le][0],R[ne][le][1]],ee++,Q++)}else if('object'==typeof R[0])if(R[0].x)for(var ne=0,de=R.length;ne<de;ne++){var $=this._addData(Z,2*R[ne].x.length);ie.push($),Q=0;for(var le=0,pe=R[0].x.length;le<pe;le++)$[Q]=[R[ne].x[le],R[ne].y[le]],ee++,Q++}else{this.mode='x_equally_separated';var ue=0,ge=[],oe=0,ce;if(!R[0].y)return console.log(R),void V.throwError('No y data');for(var ne=0,de=R.length;ne<de;ne++)ue+=R[ne].y.length,te=0!=ne&&(!R[ne+1]||R[ne].x+R[ne].dx*R[ne].y.length==R[ne+1].x),te||(ie.push(this._addData(Z,ue)),ge.push(ue),ue=0);this.xData=[],ue=0,oe=0,Q=0;for(var ne=0,de=R.length;ne<de;ne++){K=R[ne].x,J=R[ne].dx;for(var le=0;le<ce;le++)ie[oe][Q]=[K+le*J,R[ne].y[le]],Q++,ee++;ue+=R[ne].y.length,ge[oe]==ue&&(oe++,ue=0,Q=0)}}var xe=(this.maxX-this.minX)/this.graph.getDrawingWidth(),he=4*this.graph.getDrawingWidth(),me=ee/4,he=this.graph.getDrawingWidth(),me=ee;ie=ie.reduce(function(fe,be,Ae){return 0<Ae&&fe.push([NaN,NaN]),fe.concat(be)},[]);var ye=new W.default;return ye.setData(ie),this.setWaveform(ye),this}_addData(){return[]}clearData(){return this.setData([]),this}getData(){return this.data}setOptions(R){this.options=R||{}}setOption(R,G){this.options[R]=G}kill(R){return this.graph.removeSerieFromDom(this),this.graph._removeSerie(this),this.graph.legend&&!R&&this.graph.legend.update(),this.graph=void 0,this}hide(R){if(this.hidden=!0,this.groupMain.setAttribute('display','none'),this.getSymbolForLegend().setAttribute('opacity',0.5),this.getTextForLegend().setAttribute('opacity',0.5),this.hideImpl(),R){var G=this.graph.getShapesOfSerie(this);for(var Z=0,U=G.length;Z<U;Z++)G[Z].hide()}return this.emit('hide'),this}show(R){if(this.hidden=!1,this.groupMain.setAttribute('display','block'),this.getSymbolForLegend().setAttribute('opacity',1),this.getTextForLegend().setAttribute('opacity',1),this.showImpl(),this.draw(!0),R){var G=this.graph.getShapesOfSerie(this);for(var Z=0,U=G.length;Z<U;Z++)G[Z].show()}return this.emit('show'),this}hideImpl(){}showImpl(){}toggleDisplay(){return this.isShown()?this.hide():this.show(),this}isShown(){return!this.hidden}getX(R){return(R=this.getXAxis().getPx(R))-R%0.2}getY(R){return(R=this.getYAxis().getPx(R))-R%0.2}isSelected(){return this.selected||'unselected'!==this.selectionType}_checkX(R){this.minX=Math.min(this.minX,R),this.maxX=Math.max(this.maxX,R)}_checkY(R){this.minY=Math.min(this.minY,R),this.maxY=Math.max(this.maxY,R)}getName(){return this.name}autoAxis(){return this.isFlipped()?(this.setXAxis(this.graph.getYAxis()),this.setYAxis(this.graph.getXAxis())):(this.setXAxis(this.graph.getXAxis()),this.setYAxis(this.graph.getYAxis())),this.graph.updateDataMinMaxAxes(),this}setXAxis(R){return this.xaxis='number'==typeof R?this.isFlipped()?this.graph.getYAxis(R):this.graph.getXAxis(R):R,this.graph.updateDataMinMaxAxes(),this}setYAxis(R){return'number'==typeof R?this.xaxis=this.isFlipped()?this.graph.getXAxis(R):this.graph.getYAxis(R):this.yaxis=R,this.graph.updateDataMinMaxAxes(),this}setAxes(){for(var R=0;2>R;R++)arguments[R]&&this[arguments[R].isX()?'setXAxis':'setYAxis'](arguments[R]);return this}getXAxis(){return this.xaxis}getYAxis(){return this.yaxis}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getWaveform(){return this._waveform}getWaveforms(){return[this._waveform]}getSymbolForLegend(){if(!this.lineForLegend){var R=document.createElementNS(this.graph.ns,'line');this.applyLineStyle(R),R.setAttribute('x1',5),R.setAttribute('x2',25),R.setAttribute('y1',0),R.setAttribute('y2',0),R.setAttribute('cursor','pointer'),this.lineForLegend=R}return this.lineForLegend}setLegendSymbolStyle(){this.applyLineStyle(this.getSymbolForLegend())}updateStyle(){this.setLegendSymbolStyle(),this.graph.updateLegend()}getTextForLegend(){if(!this.textForLegend){var R=document.createElementNS(this.graph.ns,'text');R.setAttribute('cursor','pointer'),R.textContent=this.getLabel(),this.textForLegend=R}return this.textForLegend}getIndex(){return this.graph.series.indexOf(this)}getLabel(){return this.options.label||this.name}setLabel(R){return this.options.label=R,this.textForLegend&&(this.textForLegend.textContent=R),this.graph.requireLegendUpdate(),this}setFlip(R){return this.options.flip=R,this}getFlip(){return this.options.flip}isFlipped(){return this.options.flip}setLayer(R){return this.options.layer=parseInt(R)||1,this}getLayer(){return this.options.layer||1}setStyle(R,G='unselected'){this.styles[G]=R,this.styleHasChanged(G)}styleHasChanged(R='unselected'){if(this._changedStyles=this._changedStyles||{},!1===R)for(var G in this._changedStyles)this._changedStyles[G]=!1;else this._changedStyles[R||'unselected']=!0;return this.graph.requireLegendUpdate(),this}hasStyleChanged(R){return this._changedStyles=this._changedStyles||{},this._changedStyles[R||'unselected']}dataHasChanged(R){return this._dataHasChanged=void 0===R||R,this}hasDataChanged(){return this._dataHasChanged}setInfo(R,G){return this.infos=this.infos||{},this.infos[R]=G,this}getInfo(R){return(this.infos||{})[R]}setAdditionalData(R){return this.additionalData=R,this}getAdditionalData(){return this.additionalData}select(){return this.selected=!0,this}unselect(){return this.selected=!1,this}enableTracking(R,G){return this._tracker=!0,this._trackingCallback=R,this._trackingOutCallback=G,this}disableTracking(){return this._trackerDom&&(this._trackerDom.remove(),this._trackerDom=null),this._tracker=!1,this._trackingCallback=null,this}allowTrackingLine(R){R=R||{},this.graph.addSerieToTrackingLine(this,R)}getMarkerForLegend(){return!1}get type(){return this._type}getType(){return this._type}set excludedFromLegend(R=!0){this._excludedFromLegend=R}get excludedFromLegend(){return!!this._excludedFromLegend}setDataIndices(R,G){this.categoryIndices=R,this.nbCategories=G}}E.default=B})},function(u,A,S){var P,C,T;(function(E,X){C=[A,S(3)],P=X,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X){'use strict';function Y(){var V=URL.createObjectURL(new Blob([' ( '+function(){onmessage=function(W){var B=W.data.data,R=W.data.slotNumber,G=W.data.slot,Z=W.data.flip,U=W.data.max,Q=W.data.min,K,J=[];for(var $=0,ee=B.length;$<ee;$++)for(var te=0,ie=B[$].length;te<ie;te+=2)K=Math.floor((B[$][te]-Q)*(G/(U-Q))),J[K]=J[K]||{min:B[$][te+1],max:B[$][te+1],start:B[$][te+1],stop:!1,x:B[$][te]},J[K].stop=B[$][te+1],J[K].min=Math.min(B[$][te+1],J[K].min),J[K].max=Math.max(B[$][te+1],J[K].max);postMessage({slotNumber:R,slot:G,data:J,_queueId:W.data._queueId})}}.toString()+')()'],{type:'application/javascript'}));F=new Worker(V),F.onmessage=function(W){var B=W.data._queueId;delete W.data._queueId,O[B].resolve(W.data.data),delete O[B]}}Object.defineProperty(E,'__esModule',{value:!0}),E.default=function(V){F||Y();var W=I.guid();V._queueId=W;var R=new Promise(function(G){B=G}),B;return O[W]={promise:R,resolve:B},F.postMessage(V),O[W].promise};var I=function(W){if(W&&W.__esModule)return W;var B={};if(null!=W)for(var R in W)Object.prototype.hasOwnProperty.call(W,R)&&(B[R]=W[R]);return B.default=W,B}(X),F,O={}})},function(u,A,S){var P,C,T;(function(E,X){C=[A,S(3)],P=X,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var Y=function(F){if(F&&F.__esModule)return F;var O={};if(null!=F)for(var V in F)Object.prototype.hasOwnProperty.call(F,V)&&(O[V]=F[V]);return O.default=F,O}(X);E.default={doErrorDraw:function(I,F,O,V,W,B){F instanceof Array||(F=[F]);var R='y'==I?'getY':'getX',G='y'==I?['top','bottom']:['left','right'],Z;if(!(isNaN(W)||isNaN(B)))for(var U=0,Q=F.length;U<Q;U++)F[U]instanceof Array?(Z=G[0],this.errorstyles[U].paths[Z]+=' M '+W+' '+B,this.errorstyles[U].paths[Z]+=this.makeError(I,U,this[R](O+F[U][0]),V,Z),Z=G[1],this.errorstyles[U].paths[Z]+=' M '+W+' '+B,this.errorstyles[U].paths[Z]+=this.makeError(I,U,this[R](O-F[U][1]),V,Z)):(Z=G[0],this.errorstyles[U].paths[Z]+=' M '+W+' '+B,this.errorstyles[U].paths[Z]+=this.makeError(I,U,this[R](O+F[U]),V,Z),Z=G[1],this.errorstyles[U].paths[Z]+=' M '+W+' '+B,this.errorstyles[U].paths[Z]+=this.makeError(I,U,this[R](O-F[U]),V,Z))},makeError:function(I,F,O,V,W){var B;switch(this.errorstyles[F].type){case'bar':B='makeBar';break;case'box':B='makeBox';}return this[B+I.toUpperCase()](O,V,this.errorstyles[F][W])},makeBarY:function(I,F,O){if(I&&O){var V=Y.isNumeric(O.width)?O.width:10;return' V '+I+' m -'+V/2+' 0 h '+V+' m -'+V/2+' 0 V '+F+' '}},makeBoxY:function(I,F,O){return I&&O?' m 5 0 V '+I+' h -10 V '+F+' m 5 0 ':void 0},makeBarX:function(I,F,O){if(I&&O){var V=Y.isNumeric(O.width)?O.width:10;return' H '+I+' m 0 -'+V/2+' v '+V+' m 0 -'+V/2+' H '+F+' '}},makeBoxX:function(I,F,O){return I&&O?' v 5 H '+I+' v -10 H '+F+' v 5 ':void 0},check:function(I,F,O){var V,W;if((this.getType()!=Graph.SERIE_LINE&&this.getType()!=Graph.SERIE_SCATTER||(V=this.data[2*I])&&(W=this.data[2*I+1]))&&void 0!==V){for(var B=0,R=F.length;B<R;B++)Array.isArray(F[B])?(isNaN(F[B][0])||this._checkY(W+F[B][0]),isNaN(F[B][1])||this._checkY(W-F[B][1])):isNaN(F[B])||(this._checkY(W+F[B]),this._checkY(W-F[B]));for(var B=0,R=O.length;B<R;B++)Array.isArray(O[B])?(isNaN(O[B][0])||this._checkX(V-O[B][0]),isNaN(O[B][1])||this._checkX(V+O[B][1])):isNaN(F[B])||(this._checkX(V-O[B]),this._checkX(V+O[B]))}},setDataError:function(I,F){if(this.error=I,!F)for(let O=0,V=this.error.length;O<V;O++)this.error[O]&&this.check(O,this.error[O][0],this.error[O][1]);return this.dataHasChanged(),this.graph.updateDataMinMaxAxes(),this},setErrorStyle:function(I){function F(U){U.dom=document.createElementNS(O.graph.ns,'path'),U.dom.setAttribute('fill',U.fillColor||'none'),U.dom.setAttribute('stroke',U.strokeColor||'black'),U.dom.setAttribute('stroke-opacity',U.strokeOpacity||1),U.dom.setAttribute('fill-opacity',U.fillOpacity||1),U.dom.setAttribute('stroke-width',U.strokeWidth||1),O.groupMain.appendChild(U.dom)}var O=this;I=I||['box','bar'],Array.isArray(I)||(I=[I]);var V=[],W=[['y','top','bottom'],['x','left','right']];for(var B=0;B<I.length;B++){V[B]={},'string'==typeof I[B]&&(I[B]={type:I[B],y:{}}),V[B].type=I[B].type;for(var R=0,G=W.length;R<G;R++){I[B].all&&(I[B][W[R][1]]=Y.extend(!0,{},I[B].all),I[B][W[R][2]]=Y.extend(!0,{},I[B].all)),I[B][W[R][0]]&&(I[B][W[R][1]]=Y.extend(!0,{},I[B][W[R][0]]),I[B][W[R][2]]=Y.extend(!0,{},I[B][W[R][0]]));for(var Z=1;2>=Z;Z++)I[B][W[R][Z]]&&(V[B][W[R][Z]]=I[B][W[R][Z]],F(V[B][W[R][Z]]))}}return this.errorstyles=V,this},errorDrawInit:function(){if(this.errorstyles)for(var I=0,F=this.errorstyles.length;I<F;I++)this.errorstyles[I].paths={top:'',bottom:'',left:'',right:''}},errorAddPoint:function(I,F,O,V,W){var B;this.error&&(B=this.error[I/2])&&(B[0]&&this.doErrorDraw('y',B[0],O,W,V,W),B[1]&&this.doErrorDraw('x',B[1],F,V,V,W))},errorAddPointBarChart:function(I,F,O,V){var W;this.error&&(W=this.error[I])&&this.doErrorDraw('y',W,F,V,O,V)},errorDraw:function(){if(this.error&&this.errorstyles)for(var I=0,F=this.errorstyles.length;I<F;I++)for(var O in this.errorstyles[I].paths)this.errorstyles[I][O]&&this.errorstyles[I][O].dom&&this.errorstyles[I][O].dom.setAttribute('d',this.errorstyles[I].paths[O])}}})},function(u,A,S){var P,C,T;(function(E,X){C=[A,S(1),S(14),S(5),S(19),S(3)],P=X,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X,Y,I,F,O){'use strict';function V(U){return U&&U.__esModule?U:{default:U}}Object.defineProperty(E,'__esModule',{value:!0}),V(X);var W=V(Y);V(I);var B=V(F),R=function(Q){if(Q&&Q.__esModule)return Q;var K={};if(null!=Q)for(var J in Q)Object.prototype.hasOwnProperty.call(Q,J)&&(K[J]=Q[J]);return K.default=Q,K}(O);const G={zpos:0};class Z extends W.default{constructor(){super(...arguments)}init(U,Q,K){return super.init(U,Q,K),this.options=R.extend(!0,this.options,G,K||{}),this}setZPos(U){return this.options.zpos=U,this}setz(){return this.setZPos(...arguments)}}R.mix(Z,B.default),E.default=Z})},function(u,A){var S,P,C;(function(T,E){P=[A],S=E,C='function'==typeof S?S.apply(A,P):S,!(C!==void 0&&(u.exports=C));var X})(this,function(T){'use strict';function E(X,Y,I){let F,O,V,W,B,R=X.getWaveforms();for(let G of R)for(F=0,O=G.getLength(),V=G.getData();F<O;F+=1)W=Y?X.getXAxis().getVal(X.getX(G.getX(F,!0))):X.getYAxis().getVal(X.getY(V[F])),B=0==F?W:I?Math.min(B,W):Math.max(B,W);return B}Object.defineProperty(T,'__esModule',{value:!0}),T.default={getX:function(X){return(X=this.getXAxis().getPx(X))-X%0.2+this.getXAxis().getZProj(this.options.zpos)},getY:function(X){return(X=this.getYAxis().getPx(X))-X%0.2+this.getYAxis().getZProj(this.options.zpos)},getZPos:function(){return this.options.zpos},getMinX:function(X){return X?E(this,!0,!0):this.minX},getMaxX:function(X){return X?E(this,!0,!1):this.maxX},getMinY:function(X){return X?E(this,!1,!0):this.minY},getMaxY:function(X){return X?E(this,!1,!1):this.maxY}}})},function(u,A,S){var P,C,T;(function(E,X){C=[A,S(3),S(14),S(17)],P=X,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X,Y,I){'use strict';function F(W){return W&&W.__esModule?W:{default:W}}Object.defineProperty(E,'__esModule',{value:!0}),function(B){if(B&&B.__esModule)return B;var R={};if(null!=B)for(var G in B)Object.prototype.hasOwnProperty.call(B,G)&&(R[G]=B[G]);return R.default=B,R}(X);var O=F(Y);F(I);class V extends O.default{constructor(){super()}init(W,B,R){this.graph=W,this.name=B,this.options=R||{},this.groupMain=document.createElementNS(this.graph.ns,'g'),this.pathDom=document.createElementNS(this.graph.ns,'path'),this.groupMain.appendChild(this.pathDom),this.styles={},this.styles.unselected={lineColor:this.options.lineColor,lineStyle:this.options.lineStyle,lineWidth:this.options.lineWidth,fillColor:this.options.fillColor,fillOpacity:this.options.fillOpacity,markers:this.options.markers}}setData(W){for(var B in this.data=W,this.minY=Number.MAX_SAFE_INTEGER,this.maxY=Number.MIN_SAFE_INTEGER,this.data)this._checkY(this.data[B]);return this}setFillColor(W,B,R){return B=B||'unselected',this.styles[B]=this.styles[B]||{},this.styles[B].fillColor=W,R&&this.setFillColor(W,'selected'),this.styleHasChanged(B),this}getFillColor(W){return this.getStyle(W).fillColor}setFillOpacity(W,B,R){return B=B||'unselected',this.styles[B]=this.styles[B]||{},this.styles[B].fillOpacity=W,R&&this.setLineWidth(W,'selected'),this.styleHasChanged(B),this}getFillOpacity(W){return this.getStyle(W).fillOpacity||1}applyLineStyles(){this.applyLineStyle(this.pathDom)}applyLineStyle(W){W.setAttribute('stroke',this.getLineColor()),W.setAttribute('stroke-width',this.getLineWidth()),this.getLineDashArray()?W.setAttribute('stroke-dasharray',this.getLineDashArray()):W.removeAttribute('stroke-dasharray'),W.setAttribute('fill',this.getFillColor()),W.setAttribute('fill-opacity',this.getFillOpacity()||1)}draw(){var W='';for(var B in this.error&&this.errorDrawInit(),this.data)this.categoryIndices[B]&&(W+='M '+this.getXAxis().getPos(this.categoryIndices[B])+' '+this.getYAxis().getPos(0)+' V '+this.getYAxis().getPos(this.data[B])+' h '+this.getXAxis().getDeltaPx(1/this.nbCategories)+' V '+this.getYAxis().getPos(0),this.error&&this.errorAddPointBarChart(B,this.data[B],this.getXAxis().getPos(this.categoryIndices[B]+0.5/this.nbCategories),this.getYAxis().getPos(this.data[B])));this.error&&this.errorDraw(),this.pathDom.setAttribute('d',W),this.applyLineStyles()}setMarkers(){}getUsedCategories(){return Object.keys(this.data)}}E.default=V})},function(u,A,S){var P,C,T;(function(E,X){C=[A,S(15),S(3)],P=X,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X,Y){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var I=function(W){return W&&W.__esModule?W:{default:W}}(X);const F={orientation:'y',maxBoxWidth:20,defaultStyle:{meanLineColor:'rgb( 100, 0, 0 )',meanLineWidth:2,boxAboveLineWidth:1,boxAboveLineColor:'rgb( 0, 0, 0 )',boxAboveFillColor:'transparent',boxAboveFillOpacity:1,boxBelowLineWidth:1,boxBelowLineColor:'rgb( 0, 0, 0 )',boxBelowFillColor:'transparent',boxBelowFillOpacity:1,barAboveLineColor:'rgba( 0, 0, 0, 1 )',barAboveLineWidth:1,barBelowLineColor:'rgba( 0, 0, 0, 1 )',barBelowLineWidth:1,outlierLineWidth:1,outlierLineColor:'rgb( 255, 255, 255 )',outlierFillColor:'rgb( 0, 0, 0 )',outlierFillOpacity:1}};class O extends I.default{constructor(){super()}init(V,W,B){this.graph=V,this.name=W,this.options=(0,Y.extend)(!0,{},F,B||{}),this.groupMain=document.createElementNS(this.graph.ns,'g'),this.pathDom=document.createElementNS(this.graph.ns,'path'),this.groupMain.appendChild(this.pathDom),this.styles={},this.styles.unselected=this.options.defaultStyle}setData(V,W){if(this.data=V,!!Array.isArray(V)){let B,R,G,Z,U;for(var Q in'y'==this.options.orientation?(B=this.getXAxis(),R=this.getYAxis(),G=this._checkX.bind(this),Z=this._checkY.bind(this),U=!0,this.minY=V[0].Q2,this.maxY=V[0].Q2,this.maxX=V[0].x,this.minX=V[0].x):(B=this.getYAxis(),R=this.getXAxis(),G=this._checkY.bind(this),Z=this._checkX.bind(this),U=!1,this.minX=V[0].Q2,this.maxX=V[0].Q2,this.maxY=V[0].y,this.minY=V[0].y),W&&(G=function(){},Z=function(){}),B&&R||(0,Y.throwError)('Error in setting data of the box serie. The X and Y axes must be set beforehand'),this.data)U?(G(this.data[Q].x),this.data[Q].pos=this.data[Q].x):(G(this.data[Q].y),this.data[Q].pos=this.data[Q].y),this.data[Q].Q3&&Z(this.data[Q].Q3),this.data[Q].Q1&&Z(this.data[Q].Q1),this.data[Q].whiskers?Array.isArray(this.data[Q].whiskers)?(0<this.data[Q].whiskers.length&&Z(this.data[Q].whiskers[0]),1<this.data[Q].whiskers.length&&Z(this.data[Q].whiskers[1])):(Z(this.data[Q].whiskers),this.data[Q].whiskers=[this.data[Q].whiskers]):this.data[Q].whiskers=[],Array.isArray(this.data[Q].outliers)?this.data[Q].outliers.map(K=>Z(K)):this.data[Q].outliers=[];return this.dataHasChanged(),this.graph.updateDataMinMaxAxes(),this}}_style(V,W,B='unselected',R=!1){return this.styles[B]=this.styles[B]||{},this.styles[B][V]=W,R&&this._set(V,W,'selected'),this.styleHasChanged(B),this}_gstyle(V,W){return this.getStyle(W)[V]}getStyle(V='unselected'){return this.styles[V]||{}}setMeanLineColor(){return this._style('meanLineColor',...arguments)}getMeanLineColor(){return this._gstyle('meanLineColor',...arguments)}setStyle(V,W='unselected'){this.styles[W]=(0,Y.extend)({},F.defaultStyle,this.styles.unselected,V),this.styleHasChanged(W)}setMeanLineWidth(){return this._style('meanLineWidth',...arguments)}getMeanLineWidth(){return this._gstyle('meanLineWidth',...arguments)}setBoxAboveLineColor(){return this._style('boxAboveLineColor',...arguments)}getBoxAboveLineColor(){return this._gstyle('boxAboveLineColor',...arguments)}setBoxBelowLineColor(){return this._style('boxBelowLineColor',...arguments)}getBoxBelowLineColor(){return this._gstyle('boxBelowLineColor',...arguments)}setBoxAboveLineWidth(){return this._style('boxAboveLineWidth',...arguments)}getBoxAboveLineWidth(){return this._gstyle('boxAboveLineWidth',...arguments)}setBoxBelowLineWidth(){return this._style('boxBelowLineWidth',...arguments)}getBoxBelowLineWidth(){return this._gstyle('boxBelowLineWidth',...arguments)}setBoxAboveFillColor(){return this._style('boxAboveFillColor',...arguments)}getBoxAboveFillColor(){return this._gstyle('boxAboveFillColor',...arguments)}setBoxBelowFillColor(){return this._style('boxBelowFillColor',...arguments)}getBoxBelowFillColor(){return this._gstyle('boxBelowFillColor',...arguments)}setBoxAboveFillOpacity(){return this._style('boxAboveFillOpacity',...arguments)}getBoxAboveFillOpacity(){return this._gstyle('boxAboveFillOpacity',...arguments)}setBoxBelowFillOpacity(){return this._style('boxBelowFillOpacity',...arguments)}getBoxBelowFillOpacity(){return this._gstyle('boxBelowFillOpacity',...arguments)}setBarAboveLineColor(){return this._style('barAboveLineColor',...arguments)}getBarAboveLineColor(){return this._gstyle('barAboveLineColor',...arguments)}setBarBelowLineColor(){return this._style('barBelowLineColor',...arguments)}getBarBelowLineColor(){return this._gstyle('barBelowLineColor',...arguments)}setBarAboveLineWidth(){return this._style('barAboveLineWidth',...arguments)}getBarAboveLineWidth(){return this._gstyle('barAboveLineWidth',...arguments)}setBarBelowLineWidth(){return this._style('barBelowLineWidth',...arguments)}getBarBelowLineWidth(){return this._gstyle('barBelowLineWidth',...arguments)}setOutlierLineColor(){return this._style('outlierLineColor',...arguments)}getOutlierLineColor(){return this._gstyle('outlierLineColor',...arguments)}setOutlierLineWidth(){return this._style('outlierLineWidth',...arguments)}getOutlierLineWidth(){return this._gstyle('outlierLineWidth',...arguments)}setOutlierFillColor(){return this._style('outlierFillColor',...arguments)}getOutlierFillColor(){return this._gstyle('outlierFillColor',...arguments)}setOutlierFillOpacity(){return this._style('outlierFillOpacity',...arguments)}getOutlierFillOpacity(){return this._gstyle('outlierFillOpacity',...arguments)}applyLineStyles(){this.applyLineStyle(this.pathDom)}applyLineStyle(V){V.setAttribute('stroke',this.getLineColor()),V.setAttribute('stroke-width',this.getLineWidth()),V.removeAttribute('stroke-dasharray'),V.setAttribute('fill',this.getFillColor()),V.setAttribute('fill-opacity',this.getFillOpacity()||1)}draw(){if(this.data){let W='y'==this.options.orientation?this.getYAxis():this.getXAxis(),B='y'==this.options.orientation?this.getXAxis():this.getYAxis(),V,R,G,Z,U,Q,K,J;if((0,Y.emptyDom)(this.groupMain),'category'==B.getType())R=B.getRelPx(0.8/this.nbCategories);else{R=this.options.maxBoxWidth;for(var $=0,ee=this.data.length;$<ee-1;$++)R=Math.min(R,Math.abs(B.getPx(this.data[$+1].pos)-B.getPx(this.data[$].pos)))}for(var $=0,ee=this.data.length;$<ee;$++){if('category'==B.getType()){let ne='y'==this.options.orientation?this.data[$].x:this.data[$].y;if(!!this.categoryIndices.hasOwnProperty(ne))V=[B.getPos(this.categoryIndices[ne])+1.2*R/2];else if(Array.isArray(this._linkedToScatterSeries))for(let oe of this._linkedToScatterSeries)if(oe.categoryIndices.hasOwnProperty(ne)){V=[B.getPos(oe.categoryIndices[ne])+1.2*R/2],W='y'==this.options.orientation?oe.getYAxis():oe.getXAxis();break}}else V=[B.getPos('y'==this.options.orientation?this.data[$].x:this.data[$].y),R];G=W.getPos(this.data[$].Q2),Z=W.getPos(this.data[$].Q3),U=W.getPos(this.data[$].Q1),this.data[$].whiskers.map(ne=>{ne<this.data[$].Q1?K=W.getPos(ne):Q=W.getPos(ne)}),J=this.data[$].outliers.map(ne=>W.getPos(ne));var te=document.createElementNS(this.graph.ns,'line');this.applyMeanStyle(te);var ie=document.createElementNS(this.graph.ns,'rect'),ae=document.createElementNS(this.graph.ns,'rect');'y'==this.options.orientation?(ie.setAttribute('width',R),ie.setAttribute('x',V[0]-R/2),ae.setAttribute('width',R),ae.setAttribute('x',V[0]-R/2),te.setAttribute('x1',V[0]-R/2),te.setAttribute('x2',V[0]+R/2),te.setAttribute('y1',G),te.setAttribute('y2',G)):(ie.setAttribute('height',R),ie.setAttribute('y',V[0]-R/2),ae.setAttribute('height',R),ae.setAttribute('y',V[0]-R/2),te.setAttribute('y1',V[0]-R/2),te.setAttribute('y2',V[0]+R/2),te.setAttribute('x1',G),te.setAttribute('x2',G)),this.boxPos(ie,G,Z,'x'==this.options.orientation),this.boxPos(ae,G,U,'x'==this.options.orientation),this.applyBoxStyle(ie,ae);var re=document.createElementNS(this.graph.ns,'line'),se=document.createElementNS(this.graph.ns,'line');'y'==this.options.orientation?(void 0!==Q&&(re.setAttribute('y1',Z),re.setAttribute('y2',Q),re.setAttribute('x1',V[0]),re.setAttribute('x2',V[0])),void 0!==K&&(se.setAttribute('y1',U),se.setAttribute('y2',K),se.setAttribute('x1',V[0]),se.setAttribute('x2',V[0]))):(void 0!==Q&&(re.setAttribute('x1',Z),re.setAttribute('x2',Q),re.setAttribute('y1',V[0]),re.setAttribute('y2',V[0])),void 0!==K&&(se.setAttribute('x1',U),se.setAttribute('x2',K),se.setAttribute('y1',V[0]),se.setAttribute('y2',V[0]))),J.map(ne=>{let oe=document.createElementNS(this.graph.ns,'circle');oe.setAttribute('r',2),'y'==this.options.orientation?(oe.setAttribute('cx',V[0]),oe.setAttribute('cy',ne)):(oe.setAttribute('cy',V[0]),oe.setAttribute('cx',ne)),this.setOutlierStyle(oe),this.groupMain.appendChild(oe)}),void 0!==Q&&this.groupMain.appendChild(re),void 0!==K&&this.groupMain.appendChild(se),void 0!=Z&&this.groupMain.appendChild(ie),void 0!=U&&this.groupMain.appendChild(ae),this.groupMain.appendChild(te),this.applyWhiskerStyle(re,se)}}}applyBoxStyle(V,W){V.setAttribute('stroke',this.getBoxAboveLineColor()),V.setAttribute('stroke-width',this.getBoxAboveLineWidth()),this.getBoxAboveFillColor()!==void 0&&V.setAttribute('fill',this.getBoxAboveFillColor()),this.getBoxAboveFillOpacity()!==void 0&&V.setAttribute('fill-opacity',this.getBoxAboveFillOpacity()),W.setAttribute('stroke',this.getBoxBelowLineColor()),W.setAttribute('stroke-width',this.getBoxBelowLineWidth()),this.getBoxBelowFillColor()!==void 0&&W.setAttribute('fill',this.getBoxBelowFillColor()),this.getBoxAboveFillOpacity()!==void 0&&W.setAttribute('fill-opacity',this.getBoxBelowFillOpacity())}applyWhiskerStyle(V,W){V.setAttribute('stroke',this.getBarAboveLineColor()),V.setAttribute('stroke-width',this.getBarAboveLineWidth()),W.setAttribute('stroke',this.getBarBelowLineColor()),W.setAttribute('stroke-width',this.getBarBelowLineWidth())}applyMeanStyle(V){V.setAttribute('stroke',this.getMeanLineColor()),V.setAttribute('stroke-width',this.getMeanLineWidth())}setOutlierStyle(V){V.setAttribute('stroke',this.getOutlierLineColor()),V.setAttribute('stroke-width',this.getOutlierLineWidth()),this.getBoxBelowFillColor()!==void 0&&V.setAttribute('fill',this.getOutlierFillColor()),this.getBoxAboveFillOpacity()!==void 0&&V.setAttribute('fill-opacity',this.getOutlierFillOpacity())}getCategoryIndex(V){if(!this.categories)throw new Error('No categories were defined. Probably axis.setSeries was not called');for(var W=0;W<this.categories.length;W++)if(this.categories[W].name==V)return W;return!1}setMarkers(){}boxPos(V,W,B,R){W>B?(V.setAttribute(R?'x':'y',B),V.setAttribute(R?'width':'height',W-B)):(V.setAttribute(R?'x':'y',W),V.setAttribute(R?'width':'height',B-W))}getUsedCategories(){let V='y'==this.options.orientation?'x':'y',W=this.data.map(B=>B[V]);return Array.isArray(this._linkedToScatterSeries)&&this._linkedToScatterSeries.map(B=>{B.getUsedCategories().map(R=>{let G;-1<(G=W.indexOf(R))&&W.splice(G,1)})}),W}linkToScatterSerie(...V){this._linkedToScatterSeries=V}}E.default=O})},function(u,A,S){var P,C,T;(function(E,X){C=[A,S(14),S(3),S(17)],P=X,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X,Y,I){'use strict';function F(W){return W&&W.__esModule?W:{default:W}}Object.defineProperty(E,'__esModule',{value:!0});var O=F(X);(function(B){if(B&&B.__esModule)return B;var R={};if(null!=B)for(var G in B)Object.prototype.hasOwnProperty.call(B,G)&&(R[G]=B[G]);return R.default=B,R})(Y),F(I);class V extends O.default{constructor(){super(...arguments)}initExtended1(){this.lines=this.lines||{},this.initExtended2&&this.initExtended2()}setColors(W){this.colors=W}_draw_standard(){var W=this,B=this._dataToUse,G=0,Z=B.length,ee=!1,te=!1,ne=this.getXAxis(),oe=this.getYAxis(),le=ne.getCurrentMin(),de=oe.getCurrentMin(),pe=ne.getCurrentMax(),ue=oe.getCurrentMax(),ge=0,ce=1,R,U,Q,K,J,$,Q,ie,ae,re,se;for(this.eraseLines(),this.isFlipped()&&(ge=1,ce=0),G=0;G<Z;G++){for(R=!1,this.counter1=G,this.currentLine='',U=0,Q=0,K=B[G].length,U=0;U<K;U+=2){if(J=B[G][U+ge],$=B[G][U+ce],J<le&&ee<le||J>pe&&ee>pe||($<de&&te<de||$>ue&&te>ue)&&!this.options.lineToZero){ee=J,te=$;continue}if(this.counter2=U/2,this.markersShown()&&this.getMarkerCurrentFamily(this.counter2),re=this.getX(J),se=this.getY($),re!=ie||se!=ae){if(isNaN(re)||isNaN(se)){0<this.counter;continue}if(this._optimize_before(re,se)){var xe=this.colors[G][U/2];if(this._addPoint(re,se,J,$,ie,ae,ee,te,U,xe,!1,!0),this.detectPeaks(J,$),!this._optimize_after(re,se)){R=!0;break}ie=re,ae=se,ee=J,te=$}}}if(R)break}if(this.latchLines(),this._tracker){this._trackerDom&&this._trackerDom.remove();var he=this.groupLines.cloneNode(!0);this.groupMain.appendChild(he);for(var G=0,Z=he.children.length;G<Z;G++)he.children[G].setAttribute('stroke','transparent'),he.children[G].setAttribute('stroke-width','25px'),he.children[G].setAttribute('pointer-events','stroke');W._trackerDom=he,W.groupMain.addEventListener('mousemove',function(me){var ye=W.graph._getXY(me),fe=W.handleMouseMove(!1,!1);W._trackingCallback(W,fe,ye.x,ye.y)}),W.groupMain.addEventListener('mouseleave',function(){W._trackingOutCallback(W)})}return this}_addPoint(W,B,R,G,Z,U,Q,K,J,$){if(void 0!==Z&&void 0!==U&&!(isNaN(W)||isNaN(B))){var ee=this.lines[$];ee||(ee=this.lines[$]={object:document.createElementNS(this.graph.ns,'path'),path:'',color:$},ee.object.setAttribute('stroke',$),ee.color=$,this.groupLines.appendChild(ee.object)),ee.path+='M '+Z+' '+U+' L '+W+' '+B,this.error&&this.errorAddPoint(J,R,G,W,B)}}removeExtraLines(){}latchLines(){for(var W in this.lines)this.lines[W].object.setAttribute('d',this.lines[W].path)}eraseLines(){for(var W in this.lines)this.lines[W].path='',this.lines[W].object.setAttribute('d','')}applyLineStyle(W){W.setAttribute('stroke-width',this.getLineWidth()),this.getLineDashArray()?W.setAttribute('stroke-dasharray',this.getLineDashArray()):W.removeAttribute('stroke-dasharray'),W.setAttribute('fill','none')}}E.default=V})},function(u,A,S){var P,C,T;(function(E,X){C=[A,S(15),S(3),S(17)],P=X,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X,Y,I){'use strict';function F(G){return G&&G.__esModule?G:{default:G}}Object.defineProperty(E,'__esModule',{value:!0});var O=F(X),V=function(Z){if(Z&&Z.__esModule)return Z;var U={};if(null!=Z)for(var Q in Z)Object.prototype.hasOwnProperty.call(Z,Q)&&(U[Q]=Z[Q]);return U.default=Z,U}(Y),W=F(I);const B={};class R extends O.default{constructor(){super(...arguments)}init(G,Z,U){var Q=this;this.graph=G,this.name=Z,this.id=Math.random()+Date.now(),this.shapes=[],this.shown=!0,this.options=V.extend(!0,{},B,U),this.data=[],this.shapesDetails=[],this.shapes=[],this._type='scatter',V.mapEventEmission(this.options,this),this._isMinOrMax={x:{min:!1,max:!1},y:{min:!1,max:!1}},this.groupPoints=document.createElementNS(this.graph.ns,'g'),this.groupMain=document.createElementNS(this.graph.ns,'g'),this.additionalData={},this.selectedStyleGeneral={},this.selectedStyleModifiers={},this.groupPoints.addEventListener('mouseover',function(K){var J=parseInt(K.target.parentElement.getAttribute('data-shapeid'));Q.emit('mouseover',J,Q.data[2*J],Q.data[2*J+1])}),this.groupPoints.addEventListener('mouseout',function(K){var J=parseInt(K.target.parentElement.getAttribute('data-shapeid'));Q.emit('mouseout',J,Q.data[2*J],Q.data[2*J+1])}),this.minX=Number.MAX_VALUE,this.minY=Number.MAX_VALUE,this.maxX=Number.MIN_VALUE,this.maxY=Number.MIN_VALUE,this.groupMain.appendChild(this.groupPoints),this.currentAction=!1,this.initExtended1&&this.initExtended1(),this.styles={},this.styles.unselected={},this.styles.selected={},this.styles.unselected.default={shape:'circle',cx:0,cy:0,r:3,stroke:'transparent',fill:'black'},this.styles.selected.default={shape:'circle',cx:0,cy:0,r:4,stroke:'transparent',fill:'black'}}setData(G,Z,U){var Q=0,Z=Z||'2D',U=U||'float',J=0,K;if(this.empty(),this.shapesDetails=[],this.shapes=[],!G instanceof Array)return this;G instanceof Array&&!(G[0]instanceof Array)&&'object'!=typeof G[0]&&(Z='1D');var $='2D'==Z;K=this._addData(U,$?2*G.length:G.length),Q=0;for(var ee=0,te=G.length;ee<te;ee++)$?(K[Q]=G[ee][0],this._checkX(K[Q]),Q++,K[Q]=G[ee][1],this._checkY(K[Q]),Q++,J++):(K[Q]=G[ee],this[0==ee%2?'_checkX':'_checkY'](K[Q]),Q++,J+=ee%2?1:0);return this.dataHasChanged(),this.graph.updateDataMinMaxAxes(),this.data=K,this}setDataCategory(G){for(var Z in G)if(Array.isArray(G[Z].y))for(let U of G[Z].y)this._checkY(U);return this.dataHasChanged(),this.graph.updateDataMinMaxAxes(),this.data=G,this}empty(){for(;this.groupPoints.firstChild;)this.groupPoints.removeChild(this.groupPoints.firstChild)}getSymbolForLegend(){if(this.symbol)return this.symbol;var G=document.createElementNS(this.graph.ns,'g');G.setAttribute('data-shapeid',-1);var Z=this.doShape(G,this.styles.unselected.default),U=this.getStyle('unselected',-1,!0);for(var Q in U[-1])'shape'!=Q&&Z.setAttribute(Q,U[-1][Q]);return G}setStyle(G,Z,U){return'string'==typeof Z&&(U=Z,Z=!1),void 0===U&&(U='unselected'),this.styles[U]=this.styles[U]||{},this.styles[U].all=G,this.styles[U].modifiers=Z,this.styleHasChanged(U),this}draw(G){if(G||this.hasDataChanged()||this.hasStyleChanged('unselected')){var Q=0,J=this,$='category'==this.getXAxis().getType(),Z,U,K;this._drawn=!0,this.dataHasChanged(!1),this.styleHasChanged(!1),this.groupMain.removeChild(this.groupPoints);var ee=0,te=1;this.getFlip()&&(ee=1,te=0),this.data.length/2;var ie=[];if(Q=0,K=this.data.length,this.error&&this.errorDrawInit(),$){for(let ae=0;Q<K;Q+=1)if(this.categoryIndices.hasOwnProperty(this.data[Q].x)){let re=this.data[Q].y,se=re.length,ne=0;this.error;for(let oe of this.data[Q].y){let le=ne/(se-1)*(0.8/this.nbCategories)+this.categoryIndices[this.data[Q].x]+0.1/this.nbCategories;U=this.getY(oe),Z=this.getX(le),ne++,this.shapesDetails[ae]=this.shapesDetails[ae]||[],this.shapesDetails[ae][0]=Z,this.shapesDetails[ae][1]=U,ie.push(ae),ae++}}}else for(;Q<K;Q+=2)this.data[Q+ee]<this.getXAxis().getCurrentMin()||this.data[Q+ee]>this.getXAxis().getCurrentMax()||this.data[Q+te]<this.getYAxis().getCurrentMin()||this.data[Q+te]>this.getYAxis().getCurrentMax()||(Z=this.getX(this.data[Q+ee]),U=this.getY(this.data[Q+te]),this.error&&this.errorAddPoint(Q,this.data[Q+ee],this.data[Q+te],Z,U),this.shapesDetails[Q/2]=this.shapesDetails[Q/2]||[],this.shapesDetails[Q/2][0]=Z,this.shapesDetails[Q/2][1]=U,ie.push(Q/2));this.error&&this.errorDraw(),this.applyStyle('unselected',ie),this.groupMain.appendChild(this.groupPoints)}}_addPoint(G,Z,U){var Q=document.createElementNS(this.graph.ns,'g');Q.setAttribute('transform','translate('+G+', '+Z+')'),Q.setAttribute('data-shapeid',U),shape=this.extraStyle&&this.extraStyle[U]?this.doShape(Q,this.extraStyle[U]):this.stdStylePerso?this.doShape(Q,this.stdStylePerso):this.doShape(Q,this.stdStyle),this.shapes[U]=shape,this.groupPoints.appendChild(Q)}doShape(G,Z){var U=document.createElementNS(this.graph.ns,Z.shape);return G.appendChild(U),U}getStyle(G,Z,U){var G=G||'unselected',Q,K={};'number'==typeof Z?Q=[Z]:Array.isArray(Z)&&(Q=Z);var J,Z,$,ee,te;this.styles[G].all!==void 0&&(te=this.styles[G].all,'function'==typeof te?te=te():!1===te&&(te={}));for(var ie=0,ae=Q.length;ie<ae;ie++){if(Z=Q[ie],J=this.shapes[Z],($=this.styles[G].modifiers)&&('function'==typeof $||$[Z])){'function'==typeof $?ee=$(Z,J):$[Z]&&(ee=$[Z]);var re=V.extend({},te,ee);ee=V.extend(ee,re)}else ee=void 0==te?this.styles[G].default:te;if(!J){var se=document.createElementNS(this.graph.ns,'g');se.setAttribute('data-shapeid',Z),this.shapes[Z]=this.doShape(se,ee),this.groupPoints.appendChild(se),J=this.shapes[Z]}U||J.parentNode.setAttribute('transform','translate('+this.shapesDetails[Z][0]+', '+this.shapesDetails[Z][1]+')'),K[Z]=ee}return K}applyStyle(G,Z,U){var Q,K,J=this.getStyle(G,Z,U);for(Q in J)for(K in J[Q])'shape'!==K&&(J[Q][K]?this.shapes[Q].setAttribute(K,J[Q][K]):this.shapes[Q].removeAttribute(K))}unselectPoint(G){this.selectPoint(G,!1)}selectPoint(G,Z,U){if(!(this.shapesDetails[G][2]&&this.shapesDetails[G][2]==U)){if('string'==typeof Z&&(U=Z,Z=void 0),Array.isArray(G))return this.selectPoints(G);if(this.shapes[G]&&this.shapesDetails[G])if((this.shapesDetails[G][2]||!1===Z)&&!0!==Z){var Q=this.shapesDetails[G][2];this.shapesDetails[G][2]=!1;var K=this.getStyle(Q,G,!0);for(var J in K[G])this.shapes[G].removeAttribute(J);this.applyStyle('unselected',G,!0)}else U=U||'selected',this.shapesDetails[G][2]=U,this.applyStyle(U,G,!0)}}getUsedCategories(){return'object'==typeof this.data[0]?this.data.map(G=>G.x):[]}}V.mix(R,W.default),E.default=R})},function(u,A,S){var P,C,T;(function(E,X){C=[A,S(15),S(5),S(3)],P=X,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X,Y,I){'use strict';function F(R){return R&&R.__esModule?R:{default:R}}Object.defineProperty(E,'__esModule',{value:!0});var O=F(X),V=F(Y);const W={fillColor:'rgba( 0, 0, 0, 0.1 )',lineColor:'rgba( 0, 0, 0, 1 )',lineWidth:'1px'};class B extends O.default{constructor(){super(...arguments)}init(R,G,Z){this,this.graph=R,this.name=G,this.selectionType='unselected',this.id=(0,I.guid)(),this.options=(0,I.extend)(!0,{},W,Z),this.groupZones=document.createElementNS(this.graph.ns,'g'),this.groupMain=document.createElementNS(this.graph.ns,'g'),this.lineZone=document.createElementNS(this.graph.ns,'path'),this.lineZone.setAttribute('stroke','black'),this.lineZone.setAttribute('stroke-width','1px'),this.groupMain.appendChild(this.groupZones),this.groupZones.appendChild(this.lineZone),this.applyLineStyle(this.lineZone),this.styleHasChanged(),this.clip=document.createElementNS(this.graph.ns,'clipPath'),this.clipId=(0,I.guid)(),this.clip.setAttribute('id',this.clipId),this.graph.defs.appendChild(this.clip)}setWaveform(...R){return this.waveforms=R,this.waveforms=this.waveforms.map(G=>{return G instanceof V.default?G:new V.default(G)}),this.minX=this.waveforms[0].getXMin(),this.maxX=this.waveforms[0].getXMax(),this.minY=this.waveforms[0].getMin(),this.maxY=this.waveforms[0].getMax(),this.waveforms.map(G=>{this.minX=Math.min(G.getXMin(),this.minX),this.maxX=Math.max(G.getXMin(),this.maxX),this.minY=Math.min(G.getMin(),this.minY),this.maxY=Math.max(G.getMax(),this.maxY)}),this.graph.updateDataMinMaxAxes(),this.dataHasChanged(),this}setWaveforms(){return this.setWaveform(...arguments)}getWaveforms(){return this.waveforms}setMinMaxWaveforms(R,G){return this.waveforms=[R,G.reverse()],this}empty(){for(;this.group.firstChild;)this.group.removeChild(this.group.firstChild)}draw(R){if(R||this.hasDataChanged()){if(!this.waveforms)return;let G=0,Z=0,U=0,Q=0,K=0,J='',$;const ee=this.getXAxis().getMinPx(),te=this.getXAxis().getMaxPx(),ie=this.getYAxis().getMinPx(),ae=this.getYAxis().getMaxPx(),re=this.getXAxis().getCurrentMin(),se=this.getXAxis().getCurrentMax(),ne=this.getYAxis().getCurrentMin(),oe=this.getYAxis().getCurrentMax();this.groupMain.removeChild(this.groupZones);for(let le of this.waveforms)for(Z=le.getData(!0),K=0;K<Z.length;K+=1){if(G=le.getX(K,!0),Q=this.getY(Z[K]),U=this.getX(G),G<re||G>se){$=[G,Z[K],U,Q];continue}Z[K]<ne?Q=this.getY(ne):Z[K]>oe&&(Q=this.getY(oe)),0<J.length&&(J+=' L '),$?(J+=$[2]+','+$[3]+' ',$=!1):J+=U+','+Q+' '}this.lineZone.setAttribute('d','M '+J+' z'),this.groupMain.appendChild(this.groupZones)}this.hasStyleChanged(this.selectionType)&&(this.applyLineStyle(this.lineZone),this.styleHasChanged(!1))}applyLineStyle(R){R.setAttribute('stroke',this.getLineColor()),R.setAttribute('stroke-width',this.getLineWidth()),R.setAttribute('fill',this.getFillColor()),R.setAttribute('fill-opacity',this.getFillOpacity()),R.setAttribute('stroke-opacity',this.getLineOpacity())}setLineWidth(R){return this.options.lineWidth=R,this.styleHasChanged(),this}getLineWidth(){return this.options.lineWidth}setLineOpacity(R){return this.options.lineOpacity=R,this.styleHasChanged(),this}getLineOpacity(){return this.options.lineOpacity}setLineColor(R){return this.options.lineColor=R,this.styleHasChanged(),this}getLineColor(){return this.options.lineColor}setFillOpacity(R){return this.options.fillOpacity=R,this.styleHasChanged(),this}getFillOpacity(){return this.options.fillOpacity}setFillColor(R){return this.options.fillColor=R,this.styleHasChanged(),this}getFillColor(){return this.options.fillColor}}E.default=B})},function(u,A,S){var P,C,T;(function(E,X){C=[A,S(1),S(24),S(5),S(19),S(3)],P=X,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X,Y,I,F,O){'use strict';function V(U){return U&&U.__esModule?U:{default:U}}Object.defineProperty(E,'__esModule',{value:!0}),V(X);var W=V(Y);V(I);var B=V(F),R=function(Q){if(Q&&Q.__esModule)return Q;var K={};if(null!=Q)for(var J in Q)Object.prototype.hasOwnProperty.call(Q,J)&&(K[J]=Q[J]);return K.default=Q,K}(O);const G={zpos:0};class Z extends W.default{constructor(){super(...arguments)}init(U,Q,K){return super.init(U,Q,K),this.options=R.extend(!0,this.options,G,K||{}),this}setZPos(U){return this.options.zpos=U,this}setz(){return this.setZPos(...arguments)}}R.mix(Z,B.default),E.default=Z})},function(u,A,S){var P,C,T;(function(E,X){C=[A,S(15),S(3)],P=X,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X,Y){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var I=function(B){return B&&B.__esModule?B:{default:B}}(X),F=function(B){if(B&&B.__esModule)return B;var R={};if(null!=B)for(var G in B)Object.prototype.hasOwnProperty.call(B,G)&&(R[G]=B[G]);return R.default=B,R}(Y);const O={};class V extends I.default{init(W,B,R){this.options=F.extend(!0,{},O,R||{}),F.mapEventEmission(this.options,this),this.graph=W,this.groupMain=document.createElementNS(this.graph.ns,'g'),this.rects=[],this.paths=[],this.recalculateBinsOnDraw=!1}setData(W){this.minX=this.maxX=this.minY=this.maxY=0;var B=0,R=W.length;for(this.data=W,this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY,B=0;B<R;B++)this._checkX(W[B][0]),this._checkY(W[B][1]);return this.dataHasChanged(),this.graph.updateDataMinMaxAxes(),this}calculateDensity(W,B,R,G,Z,U){var Q=[],J=this.data.length,te=Number.POSITIVE_INFINITY,ie=Number.NEGATIVE_INFINITY,K,$,ee;for(K=0;K<J;K++)($=~~((this.data[K][0]-W)/B),ee=~~((this.data[K][1]-G)/Z),!($>R||ee>U||0>$||0>ee))&&(Q[$]=Q[$]||[],Q[$][ee]=Q[$][ee]+1||1,te=Q[$][ee]<te?Q[$][ee]:te,ie=Q[$][ee]>ie?Q[$][ee]:ie);return this.maxIndexX=R,this.maxIndexY=U,this.binMin=te,this.binMax=ie,this.deltaX=B,this.deltaY=Z,this.fromX=W,this.fromY=G,this.numX=R,this.numY=U,this.densitymap=Q,Q}calculateDensityWeighted(W,B,R,G,Z,U){var Q=[],J=this.data.length,te=Number.POSITIVE_INFINITY,ie=Number.NEGATIVE_INFINITY,K,$,ee,ae,re,se,ne,oe,le,de,pe;for(K=0;K<J;K++)(se=(this.data[K][0]-W)/B-0.5,ne=(this.data[K][1]-G)/Z-0.5,$=Math.floor(se),ee=Math.floor(ne),oe=$,de=ee,le=$+1,pe=ee+1,ae=1-(se-$),re=1-(ne-ee),!($>R||ee>U||0>$||0>ee))&&(Q[oe]=Q[oe]||[],Q[le]=Q[le]||[],Q[oe][de]=Q[oe][de]||0,Q[le][de]=Q[le][de]||0,Q[oe][pe]=Q[oe][pe]||0,Q[le][pe]=Q[le][pe]||0,Q[oe][de]+=ae*re,Q[le][de]+=(1-ae)*re,Q[oe][pe]+=ae*(1-re),Q[le][pe]+=(1-ae)*(1-re),te=Q[oe][de]<te?Q[oe][de]:te,ie=Q[oe][de]>ie?Q[oe][de]:ie,te=Q[le][de]<te?Q[le][de]:te,ie=Q[le][de]>ie?Q[le][de]:ie,te=Q[oe][pe]<te?Q[oe][pe]:te,ie=Q[oe][pe]>ie?Q[oe][pe]:ie,te=Q[le][pe]<te?Q[le][pe]:te,ie=Q[le][pe]>ie?Q[le][pe]:ie);return this.maxIndexX=R,this.maxIndexY=U,this.binMin=te,this.binMax=ie,this.deltaX=B,this.deltaY=Z,this.fromX=W,this.fromY=G,this.numX=R,this.numY=U,this.densitymap=Q,Q}autoBins(W,B){return this.numX=W||400,this.numY=B||this.numX,this.calculateDensity(this.minX,(this.maxX-this.minX)/W,W,this.minY,(this.maxY-this.minY)/B,B),this.recalculateBinsOnDraw=!1,this}setPxPerBin(W,B,R){return W&&this.calculationDensityMap({from:'min',to:'max',pxPerBin:W,weighted:R}),B&&this.calculationDensityMap(!1,{from:'min',to:'max',pxPerBin:B,weighted:R}),this}setBinsFromTo(W,B,R,G){return this.densityMapCalculation=this.densityMapCalculation||{},this.densityMapCalculation[W]={from:B,to:R,numBins:G},this.calculationDensityMap(),this}calculationDensityMap(W,B){this.method=this.calculateDensityAdvanced,this.densityMapCalculation=this.densityMapCalculation||{},W&&(this.densityMapCalculation.x=W),B&&(this.densityMapCalculation.y=B)}calculateDensityAdvanced(){var W={x:{from:0,num:0,delta:0,weighing:!1},y:{from:0,num:0,delta:0,weighing:!1}},B={x:this.graph.drawingSpaceWidth,y:this.graph.drawingSpaceHeight},R={x:this.getXAxis,y:this.getYAxis},G=!1;for(var Z in this.densityMapCalculation)if(this.densityMapCalculation[Z].weighted&&(G=!0,W[Z].weighing=!0),this.densityMapCalculation[Z].pxPerBin){var U='min'==this.densityMapCalculation[Z].from?R[Z].call(this).getCurrentMin():this.densityMapCalculation[Z].from,Q='max'==this.densityMapCalculation[Z].to?R[Z].call(this).getCurrentMax():this.densityMapCalculation[Z].to,K=Math.abs(R[Z].call(this).getRelPx(Q-U));W[Z].num=Math.ceil(B[Z]/this.densityMapCalculation[Z].pxPerBin),W[Z].from=U-Math.abs(R[Z].call(this).getRelVal((W[Z].num*this.densityMapCalculation[Z].pxPerBin-K)/2)),W[Z].delta=Math.abs(R[Z].call(this).getRelVal(this.densityMapCalculation[Z].pxPerBin))}else W[Z].num=this.densityMapCalculation[Z].numBins||400,W[Z].from='min'==this.densityMapCalculation[Z].from?R[Z].call(this).getCurrentMin():this.densityMapCalculation[Z].from,W[Z].delta=this.densityMapCalculation[Z].to?(('max'==this.densityMapCalculation[Z].to?R[Z].call(this).getCurrentMax():this.densityMapCalculation[Z].to)-W[Z].from)/W[Z].num:this.densityMapCalculate[Z].delta;(G?this.calculateDensityWeighted:this.calculateDensity).call(this,W.x.from,W.x.delta,W.x.num,W.y.from,W.y.delta,W.y.num)}setColorMapBinBoundaries(W,B){return this.colorMapMin=W,this.colorMapMax=B,this}autoColorMapBinBoundaries(){return this.colorMapMin=this.binMin,this.colorMapMax=this.binMax,this}onRedrawColorMapBinBoundaries(W){return this.callbackColorMapMinMax=W,this}colorMapHSL(W,B,R){R=R||'linear';var G={exp:function(ae){return(Math.exp(1*(ae/B))-Math.exp(0))/(Math.exp(1)-Math.exp(0))},log:function(ae){return(Math.log(ae+1)-Math.log(1))/(Math.log(B+1)-Math.log(1))},linear:function(ae){return(ae-0)/(B-0)}},Z=0,U=[],Q=[],K={h:null,s:null,l:null,a:null},ee=W.length-1,J,$;for(var te=0;te<=B;te++){for(var ie in J=G[R](te),$=Math.floor(J*ee),$==W.length-1&&($=ee-1),J=(J-$/ee)/(1/ee),K)K[ie]=(W[$+1][ie]-W[$][ie])*J+W[$][ie];U[Z]='hsl('+K.h+', '+Math.round(100*K.s)+'%, '+Math.round(100*K.l)+'%)',Q[Z]=K.a,Z++}return this.opacities=Q,this.colorMap=U,this.colorMapNum=B,this}autoColorMapHSL(W,B){return this.colorMapHSV(W,100,B||'linear'),this}getColorIndex(W){return Math.max(0,Math.min(this.colorMapNum,Math.floor((W-this.colorMapMin)/(this.colorMapMax-this.colorMapMin)*this.colorMapNum)))}draw(){var W;if(this.method&&this.method(),!this.callbackColorMapMinMax||void 0==this.colorMapMin||void 0==this.colorMapMax||'auto'==this.callbackColorMapMinMax)this.autoColorMapBinBoundaries();else{var B=this.callbackColorMapMinMax(this.binMin,this.binMax);this.setColorMapBinBoundaries(B[0],B[1])}var R=this.getXAxis().getRelPx(this.deltaX),G=this.getYAxis().getRelPx(this.deltaY);for(var Z=0;Z<this.paths.length;Z++)this.paths[Z]='';for(var Z=0;Z<this.maxIndexX;Z++)for(var U=0;U<this.maxIndexY;U++)if(void 0!=this.densitymap[Z]&&void 0!=this.densitymap[Z][U]){W=this.getColorIndex(this.densitymap[Z][U]),this.paths[W]||(this.paths[W]=''),this.paths[W]+=' M '+this.getXAxis().getPx(Z*this.deltaX+this.fromX)+' '+this.getYAxis().getPx(U*this.deltaY+this.fromY)+' h '+R+' v '+G+' h -'+R+' z';;}this.drawRects()}drawRects(){for(var W=0;W<this.paths.length;W++)this.rects[W]||(this.rects[W]=document.createElementNS(this.graph.ns,'path'),this.rects[W].setAttribute('shape-rendering','crispEdges')),void 0!==this.paths[W]&&(this.rects[W].setAttribute('d',this.paths[W]),this.rects[W].setAttribute('fill',this.colorMap[W]),this.rects[W].setAttribute('fill-opacity',this.opacities[W])),this.groupMain.appendChild(this.rects[W])}setOptions(W){return this.options=F.extend(!0,{},O,W||{}),this}}E.default=V})},function(u,A,S){var P,C,T;(function(E,X){C=[A,S(14),S(3)],P=X,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X,Y){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var I=function(W){return W&&W.__esModule?W:{default:W}}(X),F=function(W){if(W&&W.__esModule)return W;var B={};if(null!=W)for(var R in W)Object.prototype.hasOwnProperty.call(W,R)&&(B[R]=W[R]);return B.default=W,B}(Y);class O extends I.default{constructor(){super(...arguments),this.negativeDelta=0,this.positiveDelta=0,this.negativeThreshold=0,this.positiveThreshold=0}setData(V,W,B){var W=W||'2D',B=B||'float',G=V.length,K=[],R,Z,U,Q;for(V instanceof Array||'object'!=typeof V||(this.minX=V.minX,this.minY=V.minY,this.maxX=V.maxX,this.maxY=V.maxY,V=V.segments,G=V.length),R=0;R<G;R++){for(U=V[R].lines.length,Q=this._addData(B,U),Z=0;Z<U;Z+=2)Q[Z]=V[R].lines[Z],this._checkX(Q[Z]),Q[Z+1]=V[R].lines[Z+1],this._checkY(Q[Z+1]);K.push({lines:Q,zValue:V[R].zValue})}return this.data=K,this.graph.updateDataMinMaxAxes(),this.dataHasChanged(!0),this}draw(V){if(V||this.hasDataChanged()){this.currentLine=0;var Z=0,U=this.data.length,Q=0,W,B,R,G,K,J,$,ee;this.minZ=1/0,this.maxZ=-(1/0);var te=this.groupLines.nextSibling;this.groupMain.removeChild(this.groupLines),this.zValues={};var ie=0,ae=1;this.getFlip()&&(ie=0,ae=1);var re=this.getYAxis().getCurrentMin(),se=this.getXAxis().getCurrentMin(),ne=this.getXAxis().getCurrentMax(),oe=this.getYAxis().getCurrentMax();for(this.counter=0,this.currentLineId=0;Z<U;Z++){for(this.currentLine='',Q=0,K=0,(ee=this.data[Z].lines,J=ee.length);Q<J;Q+=4)ee[Q+ie]<se&&ee[Q+2+ie]<se||ee[Q+ae]<re&&ee[Q+2+ae]<re||ee[Q+ae]>oe&&ee[Q+2+ae]>oe||ee[Q+ie]>ne&&ee[Q+2+ie]>ne||(R=this.getX(ee[Q+ie]),G=this.getY(ee[Q+ae]),W=this.getX(ee[Q+2+ie]),B=this.getY(ee[Q+2+ae]),W!=R||B!=G)&&(this.currentLine+='M ',this.currentLine+=R,this.currentLine+=' ',this.currentLine+=G,this.currentLine+='L ',this.currentLine+=W,this.currentLine+=' ',this.currentLine+=B,this.counter++,K++);this.currentLine+=' z',$=this._createLine(),$.setAttribute('data-zvalue',this.data[Z].zValue),this.zValues[this.data[Z].zValue]={dom:$},this.minZ=Math.min(this.minZ,this.data[Z].zValue),this.maxZ=Math.max(this.maxZ,this.data[Z].zValue)}for(Z++,Z=this.currentLine+1;Z<this.lines.length;Z++)this.groupLines.removeChild(this.lines[Z]),this.lines.splice(Z,1);for(Z=0;Z<U;Z++)this.setColorTo(this.lines[Z],this.data[Z].zValue,this.minZ,this.maxZ);this.onMouseWheel(0,{shiftKey:!1}),this.groupMain.insertBefore(this.groupLines,te)}else if(this.hasStyleChanged(this.selectionType))for(;Z<U;Z++)this.setColorTo(this.lines[Z],this.data[Z].zValue,this.minZ,this.maxZ)}onMouseWheel(V,W,B,R){for(var G in V/=250,void 0===B?W.shiftKey&&this.options.hasNegative?(this.negativeDelta=Math.min(0,Math.max(-1,this.negativeDelta+Math.min(0.1,Math.max(-0.1,V)))),this.negativeThreshold=-this.minZ*Math.pow(this.negativeDelta,3)):(this.positiveDelta=Math.min(1,Math.max(0,this.positiveDelta+Math.min(0.1,Math.max(-0.1,V)))),this.positiveThreshold=this.maxZ*Math.pow(this.positiveDelta,3)):(!R&&(this.negativeThreshold=-B*this.minZ,this.negativeDelta=-Math.pow(Math.abs(this.negativeThreshold/-this.minZ),1/3)),R&&(this.positiveThreshold=B*this.maxZ,this.positiveDelta=Math.pow(this.positiveThreshold/this.maxZ,1/3))),isNaN(this.positiveDelta)&&(this.positiveDelta=0),isNaN(this.negativeDelta)&&(this.negativeDelta=0),this.zValues)this.zValues[G].dom.setAttribute('display',0<=G&&G>=this.positiveThreshold||0>=G&&G<=this.negativeThreshold?'block':'none');this._shapeZoom&&(this.options.hasNegative?(this._shapeZoom.setHandleNeg(-Math.pow(this.negativeDelta,3),this.minZ),this._shapeZoom.showHandleNeg()):this._shapeZoom.hideHandleNeg(),this._shapeZoom.setHandlePos(Math.pow(this.positiveDelta,3),this.maxZ))}setDynamicColor(V){this.lineColors=V,this.styleHasChanged()}setNegative(V){this.options.hasNegative=V,V&&(this.negativeThreshold=0)}setColorTo(V,W,B,R){if(this.lineColors){var G={h:0,s:0,l:0};for(var Z in G)G[Z]=0<W?this.lineColors.fromPositive[Z]+(this.lineColors.toPositive[Z]-this.lineColors.fromPositive[Z])*(W/R):this.lineColors.fromNegative[Z]+(this.lineColors.toNegative[Z]-this.lineColors.fromNegative[Z])*(W/B);G.h/=360;var U=F.hslToRgb(G.h,G.s,G.l);V.setAttribute('stroke','rgb('+U.join()+')')}}getSymbolForLegend(){if(!this.lineForLegend){var V=document.createElementNS(this.graph.ns,'ellipse');V.setAttribute('cx',7),V.setAttribute('cy',0),V.setAttribute('rx',8),V.setAttribute('ry',3),V.setAttribute('cursor','pointer'),this.lineForLegend=V}return this.applyLineStyle(this.lineForLegend,this.maxZ),this.lineForLegend}applyLineStyle(V,W){V.setAttribute('stroke',this.getLineColor()),V.setAttribute('stroke-width',this.getLineWidth()+(this.isSelected()?2:0)),this.getLineDashArray()&&V.setAttribute('stroke-dasharray',this.getLineDashArray()),V.setAttribute('fill','none'),this.setColorTo(V,W===void 0?V.getAttribute('data-zvalue'):W,this.minZ,this.maxZ),this.hasStyleChanged(!1)}setShapeZoom(V){this._shapeZoom=V}}E.default=O})},function(u,A,S){var P,C,T;(function(E,X){C=[A,S(2),S(3),S(4)],P=X,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X,Y,I){'use strict';function F(R){return R&&R.__esModule?R:{default:R}}Object.defineProperty(E,'__esModule',{value:!0});var O=F(X),V=function(G){if(G&&G.__esModule)return G;var Z={};if(null!=G)for(var U in G)Object.prototype.hasOwnProperty.call(G,U)&&(Z[U]=G[U]);return Z.default=G,Z}(Y),W=F(I);class B extends W.default{constructor(){super()}init(R,G){var Z=this;if(this.graph=R,this.properties=G||{},this.handles=[],this.options=this.options||{},this.group=document.createElementNS(this.graph.ns,'g'),this._selected=!1,this.createDom(),this._dom&&(this._dom.jsGraphIsShape=this),this.group.jsGraphIsShape=this,this.classes=[],this.transforms=[],this._data.masker){var U=document.createElementNS(this.graph.ns,'mask');this.maskingId=Math.random(),U.setAttribute('id',this.maskingId),this.maskDomWrapper=document.createElementNS(this.graph.ns,'rect'),this.maskDomWrapper.setAttribute('fill','white'),U.appendChild(this.maskDomWrapper);var Q=this._dom.cloneNode();U.appendChild(Q),this.maskDom=Q,this.graph.defs.appendChild(U)}return this.group&&(this._dom&&this.group.appendChild(this._dom),this.group.addEventListener('mouseover',function(K){Z.handleMouseOver(K)}),this.group.addEventListener('mouseout',function(K){Z.handleMouseOut(K)}),this.group.addEventListener('mousedown',function(K){Z.graph.focus(),Z.handleMouseDown(K)}),this.group.addEventListener('click',function(K){Z.handleClick(K)}),this.group.addEventListener('dblclick',function(K){Z.handleDblClick(K)})),this.initImpl(),this.graph.emit('shapeNew',this),this}initImpl(){}getData(){return this._data}getType(){return this.type}kill(R){this.graph.removeShapeFromDom(this),R||this.graph._removeShape(this),this.graph.stopElementMoving(this),this.graph.emit('shapeRemoved',this),this._inDom=!1}hide(){if(!this.hidden)return this.hidden=!0,this.group.style.display='none',this}show(){if(this.hidden)return this.hidden=!1,this.group.style.display='block',this.redraw(),this}addClass(R){return this.classes=this.classes||[],-1==this.classes.indexOf(R)&&this.classes.push(R),this.makeClasses(),this}removeClass(R){return this.classes.splice(this.classes.indexOf(R),1),this.makeClasses(),this}makeClasses(){return this._dom&&this._dom.setAttribute('class',this.classes.join(' ')),this}changed(R){return R&&this.graph.emit(R,this),this.graph.emit('shapeChanged',this),this}setEventReceptacle(){this.rectEvent||(this.rectEvent=document.createElementNS(this.graph.ns,'rect'),this.rectEvent.setAttribute('pointer-events','fill'),this.rectEvent.setAttribute('fill','transparent'),this.group.appendChild(this.rectEvent),this.rectEvent.jsGraphIsShape=this);var R=this.group.getBBox();this.rectEvent.setAttribute('x',R.x),this.rectEvent.setAttribute('y',R.y-10),this.rectEvent.setAttribute('width',R.width),this.rectEvent.setAttribute('height',R.height+20)}setSerie(R){return this.serie=R,this.xAxis=R.getXAxis(),this.yAxis=R.getYAxis(),this}getSerie(){return this.serie}autoAxes(){return this.xAxis||(this.xAxis=this.graph.getXAxis()),this.yAxis||(this.yAxis=this.graph.getYAxis()),this}setXAxis(R){return this.xAxis=R,this}setYAxis(R){this.yAxis=R}getXAxis(){return this.xAxis||this.autoAxes(),this.xAxis}getYAxis(){return this.yAxis||this.autoAxes(),this.yAxis}setLayer(R){return this.setProp('layer',R),this}getLayer(){var R=this.getProp('layer');return void 0===R?1:R}draw(R){return(!this._inDom||R)&&(this.appendToDom(),this._inDom=!0),this.makeLabels(),this.redraw(),this.applyStyle(),this}redraw(){return this.hidden?this:(this.position=this.applyPosition(),this.redrawImpl(),!this.position)?this:(this.updateLabels(),this._applyTransforms(),this)}redrawImpl(){}setProperties(R){this.properties=R,Array.isArray(this.properties.position)||(this.properties.position=[this.properties.position]);var G=this;for(var Z=0,U=this.properties.position.length;Z<U;Z++){var Q=O.default.check(this.properties.position[Z],function(K){return G.getRelativePosition(K)});this.properties.position[Z]=Q}return this.emit('propertiesChanged'),this}getRelativePosition(R){var G;if(null!==(G=/position([0-9]*)/.exec(R)))return this.getPosition(G[1]);return null===(G=/labelPosition([0-9]*)/.exec(R))?void 0:this.getLabelPosition(G[1])}getProperties(){return this.properties}setProp(R,G,Z){return this.properties=this.properties||{},this.properties[R]=this.properties[R]||[],this.properties[R][Z||0]=G,this.emit('propertyChanged',R),this}getProp(R,G){return(this.properties[R]||[])[G||0]}getProps(R){return this.properties[R]||[]}addProp(R,G){this.properties[R]=this.properties[R]||[],this.properties[R].push(G)}resetProp(R){this.properties[R]=[]}setDom(R,G,Z){!this._dom||Z&&V.hasSavedAttribute(this._dom,R)||this._dom.setAttribute(R,G)}setDomGroup(R,G){this.group&&this.group.setAttribute(R,G)}setStrokeColor(R){return this.setProp('strokeColor',R),this.overwriteSavedProp('stroke',R),this.applySelectedStyle(),this}getStrokeColor(){return this.getProp('strokeColor')}setFillColor(R){return this.setProp('fillColor',R),this.overwriteSavedProp('fill',R),this.applySelectedStyle(),this}getFillColor(){return this.getProp('fillColor')}setFillOpacity(R){return this.setProp('fillOpacity',R),this.overwriteSavedProp('fill-opacity',R),this.applySelectedStyle(),this}setStrokeWidth(R){return this.setProp('strokeWidth',R),this.overwriteSavedProp('stroke-width',R),this.applySelectedStyle(),this}getStrokeWidth(){return this.getProp('strokeWidth')}setStrokeDasharray(R){return this.setProp('strokeDasharray',R),this.overwriteSavedProp('stroke-dasharray',R),this.applySelectedStyle(),this}setAttributes(R){return this.setProp('attributes',R),this}overwriteSavedProp(R,G){V.overwriteDomAttribute(this._dom,R,G)}addAttribute(R,G){var Z={};return Z[R]=G,this.addProp('attributes',Z),this}addTransform(R,G){return this.addProp('transforms',{type:R,arguments:Array.isArray(G)?G:[G]}),this}resetTransforms(){return this.resetProp('transforms'),this}setLabelText(R,G){return this.setProp('labelText',R,G||0),this}getLabelText(R,G){return this.getProp('labelText',G||0)}displayLabel(R){return this.setProp('labelVisible',!0,R||0),this}hideLabel(R){return this.setProp('labelVisible',!1,R||0),this}setLabelColor(R,G){return this.setProp('labelColor',R,G||0),this}setLabelFontSize(R,G){return this.setProp('labelFontSize',R,G||0),this}getLabelPosition(R){return this.getProp('labelPosition',R||0)}setLabelPosition(R,G){var U=O.default.check(R,function(Q){return Z.getRelativePosition(Q)}),Z;return this.setProp('labelPosition',U,G||0),this}setLabelAngle(R,G){return this.setProp('labelAngle',R,G||0),this}setLabelBaseline(R,G){return this.setProp('labelBaseline',R,G||0),this}setLabelAnchor(R,G){return this.setProp('labelAnchor',R,G||0),this}setLabelSize(R,G){return this.setProp('labelSize',R,G||0),this}setLabelStrokeColor(R,G){return this.setProp('labelStrokeColor',R,G||0),this}setLabelStrokeWidth(R,G){return this.setProp('labelStrokeWidth',R,G||0),this}applyGenericStyle(){this.setDom('fill',this.getProp('fillColor'),!0),this.setDom('fill-opacity',this.getProp('fillOpacity'),!0),this.setDom('stroke',this.getProp('strokeColor'),!0),this.setDom('stroke-width',this.getProp('strokeWidth'),!0),this.setDom('stroke-dasharray',this.getProp('strokeDasharray'),!0);var R=this.getProps('attributes');for(var G=0,Z=R.length;G<Z;G++)for(var U in R[G])this.setDom(U,'function'==typeof R[G][U]?R[G][U].call(this,U):R[G][U],!0);return this._applyTransforms(),this}applyStyle(){return this.applyGenericStyle()}calculatePosition(R){var G=R instanceof O.default?R:this.getPosition(R);return G?G&&G.compute?G.compute(this.graph,this.getXAxis(),this.getYAxis(),this.getSerie()):void this.graph.throw():void 0}getPosition(R){var G=this.getProp('position',R||0);return this.setProp('position',G=O.default.check(G),R),G}setPosition(R,G){var Z=this,U=O.default.check(R,function(Q){return Z.getRelativePosition(Q)});return this.setProp('position',U,G||0)}_applyTransforms(){var R=this.getProp('transforms'),G='';if(R&&(R=Array.isArray(R)?R:[R],0!=R.length)){for(var Z=0;Z<R.length;Z++){switch(G+=R[Z].type+'(',R[Z].type){case'translate':let Q=R[Z].arguments[0].compute(this.graph,this.getXAxis(),this.getYAxis(),this.getSerie());G+=Q.x,G+=', ',G+=Q.y;break;case'rotate':if(G+=R[Z].arguments[0],G+=', ',1==this.transforms[Z].arguments.length){var U=this.getPosition(0);G+=U.x+', '+U.y}else G+=O.default.getDeltaPx(R[Z].arguments[1],this.getXAxis()).replace('px',''),G+=', ',G+=O.default.getDeltaPx(R[Z].arguments[2],this.getYAxis()).replace('px','');}G+=') '}return this.setDomGroup('transform',G),this}}makeLabels(){var R=this;this._labels=this._labels||[],this._labels.map(function(Z){R.group.removeChild(Z)}),this._labels=[];for(var G=0;this.getProp('labelText',G);)R._labels[G]||(R._labels[G]=document.createElementNS(R.graph.ns,'text'),R._labels[G].setAttribute('data-label-i',G),R._labels[G].jsGraphIsShape=R,R.group.appendChild(this._labels[G]),R._labels[G].addEventListener('dblclick',function(Z){Z.stopPropagation(),R.labelDblClickListener(Z)})),G++;return this.updateLabels(),this}isLabelEditable(R){return this.getProp('labelEditable',R||0)}updateLabels(){this,this._labels=this._labels||[];for(var R=0,G=this._labels.length;R<G;R++)this._applyLabelData(R)}_applyLabelData(R){R=R||0;var G=this.getProp('labelVisible',R);if(!1===G)return void this._labels[R].setAttribute('display','none');this._labels[R].setAttribute('display','initial');var Z=this.calculatePosition(O.default.check(this.getProp('labelPosition',R)));if(!(isNaN(Z.x)||isNaN(Z.y))){'NaNpx'==Z.x||isNaN(Z.x)||'NaN'===Z.x||!1===Z.x||(this._labels[R].setAttribute('x',Z.x),this._labels[R].setAttribute('y',Z.y));var U=this.getProp('labelAngle',R)||0;if(0!=U){var Q=this._labels[R].getAttribute('x'),K=this._labels[R].getAttribute('y');this._labels[R].setAttribute('transform','rotate('+U+' '+Q+' '+K+')')}return this._labels[R].setAttribute('dominant-baseline',this.getProp('labelBaseline',R)||'no-change'),this._labels[R].textContent=this.getProp('labelText',R),this._labels[R].setAttribute('fill',this.getProp('labelColor',R)||'black'),this._labels[R].setAttribute('font-size',this.getProp('labelSize',R)+'px'||'12px'),this._labels[R].setAttribute('text-anchor',this._getLabelAnchor(R)),this._labels[R].setAttribute('stroke',this.getProp('labelStrokeColor',R)),this._labels[R].setAttribute('stroke-width',this.getProp('labelStrokeWidth',R)+'px'),this._labels[R].setAttribute('stroke-location','outside'),this}}_getLabelAnchor(R){var G=this.getProp('labelAnchor',R);switch(G){case'middle':case'start':case'end':return G;break;case'right':return'end';break;case'left':return'start';break;default:return'start';}}isSelected(){return this._selectStatus||!1}hasHandles(R){return void 0!==R&&this.setProp('handles',R),!!this.getProp('handles')||!!this.getProp('statichandles')}addHandles(){if(!this.isLocked()){if(!this.handlesInDom){this.handlesInDom=!0;for(var R=1;R<this.handles.length;R++)this.handles[R]&&this.group.appendChild(this.handles[R])}return this}}removeHandles(){this.hideHandles(),this.handles=[]}hideHandles(){if(!this.handlesInDom)return this;for(var R=1;R<this.handles.length;R++)this.group.removeChild(this.handles[R]);return this.handlesInDom=!1,this}areHandlesInDom(){return this.handlesInDom}_select(R){return!!this.isSelectable()&&void(this.appendToDom(),this._selectStatus=!0,this.applySelectedStyle(),this.hasHandles()&&!this.hasStaticHandles()&&(this.addHandles(),this.setHandles()),!R&&this.graph.emit('shapeSelected',this))}applySelectedStyle(){if(this._selectStatus){var R=this.getSelectStyle(),G={};for(var Z in R)G[Z]='function'==typeof R[Z]?R[Z].call(this):R[Z];V.saveDomAttributes(this._dom,G,'select')}}_unselect(R){this._selectStatus=!1,V.restoreDomAttributes(this._dom,'select'),this.hasHandles()&&!this.hasStaticHandles()&&this.hideHandles(),R||this.graph.emit('shapeUnselected',this)}getSelectStyle(){return this.selectStyle}setSelectStyle(R){return this.selectStyle=R,this.applySelectedStyle(),this}setStaticHandles(R){this.setProp('staticHandles',R)}hasStaticHandles(){return!!this.getProp('staticHandles')}_createHandles(R,G,Z,U){if(!(this.handles&&0<this.handles.length)){this;for(var Q=1;Q<=R;Q++)(function(K){var J=this,$=document.createElementNS(J.graph.ns,G);if($.jsGraphIsShape=!0,Z)for(var ee in Z)$.setAttribute(ee,Z[ee]);$.addEventListener('mousedown',function(te){J.isResizable()&&(te.preventDefault(),te.stopPropagation(),J.graph.emit('beforeShapeResize',J),!J.graph.prevent(!1)&&(J.resizing=!0,J.handleSelected=K,J.handleMouseDown(te)))}),U&&U(J.handles[K]),J.handles[K]=$}).call(this,Q);return this.handles}}createHandles(){}handleMouseDownImpl(){}handleMouseMoveImpl(){}handleMouseUpImpl(){}handleCreateImpl(){}handleMouseDown(R){if(!this.isLocked())return(this.isMovable()||this.isResizable())&&this.graph.elementMoving(this),this.getProp('selectOnMouseDown')&&this.graph.selectShape(this),this.isMovable()&&!this.resizing&&(this.graph.emit('beforeShapeMove',self),!this.graph.prevent(!1)&&(this.moving=!0)),this._mouseCoords=this.graph._getXY(R),this.handleMouseDownImpl(R,this._mouseCoords)}handleClick(R){return this.getProp('selectOnClick')&&this.graph.selectShape(this),!!this.isSelectable()&&void(!R.shiftKey&&this.graph.unselectShapes(),this.graph.selectShape(this))}handleMouseMove(R){if((this.resizing||this.moving)&&!this.isSelected()&&this.graph.selectShape(this),this.graph.emit('beforeShapeMouseMove',this),this.graph.prevent(!1)||!this._mouseCoords)return!1;var G=this.graph._getXY(R),Z=this.getXAxis().getRelVal(G.x-this._mouseCoords.x),U=this.getYAxis().getRelVal(G.y-this._mouseCoords.y);(0!=Z||0!==U)&&(this.preventUnselect=!0),this._mouseCoords=G;var Q=this.handleMouseMoveImpl(R,Z,U,G.x-this._mouseCoords.x,G.y-this._mouseCoords.y);return Q}handleMouseUp(R){return this.moving&&this.graph.emit('shapeMoved',this),(this.handleSelected||this.resize)&&this.graph.emit('shapeResized',this),this.moving=!1,this.resizing=!1,this.handleSelected=!1,this.graph.elementMoving(!1),this.handleMouseUpImpl(R)}handleDblClick(){}handleMouseOver(){!this.getProp('highlightOnMouseOver')||this.moving||this.resizing||this.highlight(),this.graph.emit('shapeMouseOver',this)}handleMouseOut(){this.getProp('highlightOnMouseOver')&&this.unHighlight(),this.graph.emit('shapeMouseOut',this)}lock(){return this.setProp('locked',!0),this}unlock(){return this.setProp('locked',!1),this}isLocked(){return this.getProp('locked')||this.graph.shapesLocked}movable(){this.setProp('movable',!0)}unmovable(){return this.setProp('movable',!1),!1}isMovable(){return this.getProp('movable')}resizable(){this.setProp('resizable',!0)}unresizable(){this.setProp('resizable',!1)}isResizable(){return this.getProp('resizable')}selectable(){this.setProp('selectable',!0)}unselectable(){this.graph.unselectShape(this),this.setProp('selectable',!1)}isSelectable(){return this.getProp('selectable')}highlight(R,G){return R||(R=this.getHighlightAttributes()),G||(G='highlight'),V.saveDomAttributes(this._dom,R,G),this.highlightImpl(),this}unHighlight(R){return R||(R='highlight'),V.restoreDomAttributes(this._dom,R),this.unHighlightImpl(),this}highlightImpl(){}unHighlightImpl(){}getHighlightAttributes(){return this._highlightAttributes}setHighlightAttributes(R){return this._highlightAttributes=R,this}getMaskingID(){return this.maskingId}maskWith(R){const G=R.getMaskingID();G?this._dom.setAttribute('mask','url(#'+G+')'):this._dom.removeAttribute('mask')}updateMask(){var R={x:'min',y:'min'},G={x:'max',y:'max'}}labelDblClickListener(R){var G=parseInt(R.target.getAttribute('data-label-i')),Z=this;if(!isNaN(G)&&this.isLabelEditable(G)){R.preventDefault(),R.stopPropagation();var U=document.createElement('input');U.setAttribute('type','text'),U.setAttribute('value',Z.getProp('labelText',G)),Z.graph._dom.prepend(U),V.setCSS(U,{position:'absolute',marginTop:parseInt(R.target.getAttribute('y').replace('px',''))-10+'px',marginLeft:parseInt(R.target.getAttribute('x').replace('px',''))-50+'px',textAlign:'center',width:'100px'}),U.addEventListener('blur',function(){Z.setLabelText(U.getAttribute('value'),G),Z._labels[G].textContent=U.getAttribute('value'),U.remove(),Z.changed('shapeLabelChanged')}),U.addEventListener('keyup',function(Q){Q.stopPropagation(),Q.preventDefault(),13===Q.keyCode&&U.dispatchEvent(new Event('blur'))}),U.addEventListener('keypress',function(Q){Q.stopPropagation()}),U.addEventListener('keydown',function(Q){Q.stopPropagation()}),U.focus()}}appendToDom(){return this._forcedParentDom?this._forcedParentDom.appendChild(this.group):this.graph.appendShapeToDom(this),this}forceParentDom(R){return this._forcedParentDom=R,this}}B.prototype.computePosition=B.prototype.calculatePosition,B.prototype.showLabel=B.prototype.displayLabel,B.prototype.remove=B.prototype.kill,E.default=B})},function(u,A,S){var P,C,T;(function(E,X){C=[A,S(28)],P=X,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var Y=function(O){return O&&O.__esModule?O:{default:O}}(X);class I extends Y.default{createDom(){this._dom=document.createElementNS(this.graph.ns,'path')}createHandles(){this._createHandles(2,'line',{'stroke-width':'3',stroke:'transparent','pointer-events':'stroke',cursor:'ew-resize'})}handleMouseMoveImpl(F,O){if(!this.isLocked()){if(this.moving)this.getPosition(0).deltaPosition('x',O,this.getXAxis()),this.getPosition(1).deltaPosition('x',O,this.getXAxis());else if(this.serie&&this.handleSelected){this.resizingPosition=1==this.handleSelected?this.getPosition(0):this.getPosition(1);var V=this.serie.searchClosestValue(this.getXAxis().getVal(this.graph._getXY(F).x-this.graph.getPaddingLeft()));if(!V)return;this.resizingPosition.x!=V.xMin&&(this.preventUnselect=!0),this.resizingPosition.x=V.xMin}else this.handleSelected&&(this.resizingPosition=1==this.handleSelected?this.getPosition(0):this.getPosition(1),this.resizingPosition.deltaPosition('x',O,this.getXAxis()));this.applyPosition()}}applyPosition(){if(this.serie){var F=this.computePosition(0),O=this.computePosition(1),V=Math.abs(F.x-O.x),W=Math.min(F.x,O.x);if(2>V||0>W+V||W>this.graph.getDrawingWidth())return this.setDom('d',''),!1;var B=this.serie.searchClosestValue(this.getPosition(0).x),R=this.serie.searchClosestValue(this.getPosition(1).x),ee=0,te=Number.MAX_VALUE,G,Z,U,Q,K,J,W,$;if(!B||!R)return!1;for(B.xBeforeIndex>R.xBeforeIndex&&(G=B,B=R,R=G),this.counter=0,Z=B.dataIndex;Z<=R.dataIndex;Z++){for(this.currentLine='',Q=Z==B.dataIndex?B.xBeforeIndexArr:0,K=Z==R.dataIndex?R.xBeforeIndexArr:this.serie.data[Z].length,J=0,Q==K&&K++,U=Q;U<=K;U+=2)W=this.serie.getX(this.serie.data[Z][U+0]),$=this.serie.getY(this.serie.data[Z][U+1]),ee=Math.max(this.serie.data[Z][U+1],ee),te=Math.min(this.serie.data[Z][U+1],te),U==Q&&(this.firstX=W,this.firstY=$),this.currentLine+=0<J?' L '+W+' '+$+' ':' M '+W+' '+$+' ',J++;if(this.lastX=W,this.lastY=$,!this.firstX||!this.firstY||!this.lastX||!this.lastY)return;this.currentLine+=' V '+this.getYAxis().getPx(0)+' H '+this.firstX+' z',this.setDom('d',this.currentLine)}return this.maxY=this.serie.getY(ee),this.setHandles(),this.changed(),!0}}setHandles(){if(this.firstX){var F=this.computePosition(0),O=this.computePosition(1);F.x<O.x?(this.handles[1].setAttribute('x1',this.firstX),this.handles[1].setAttribute('x2',this.firstX),this.handles[2].setAttribute('x1',this.lastX),this.handles[2].setAttribute('x2',this.lastX)):(this.handles[1].setAttribute('x1',this.lastX),this.handles[1].setAttribute('x2',this.lastX),this.handles[2].setAttribute('x1',this.firstX),this.handles[2].setAttribute('x2',this.firstX)),this.handles[1].setAttribute('y1',this.getYAxis().getMaxPx()),this.handles[1].setAttribute('y2',this.serie.getY(0)),this.handles[2].setAttribute('y1',this.getYAxis().getMaxPx()),this.handles[2].setAttribute('y2',this.serie.getY(0))}}}E.default=I})},function(u,A,S){var P,C,T;(function(E,X){C=[A,S(3),S(28)],P=X,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X,Y){'use strict';Object.defineProperty(E,'__esModule',{value:!0}),function(V){if(V&&V.__esModule)return V;var W={};if(null!=V)for(var B in V)Object.prototype.hasOwnProperty.call(V,B)&&(W[B]=V[B]);return W.default=V,W}(X);var I=function(V){return V&&V.__esModule?V:{default:V}}(Y);class F extends I.default{constructor(O,V){super(O,V)}createDom(){this._dom=document.createElementNS(this.graph.ns,'ellipse')}applyPosition(){var O=this.computePosition(0);return this.setDom('cx',O.x||0),this.setDom('cy',O.y||0),this.setDom('rx',this.getProp('rx')||0),this.setDom('ry',this.getProp('ry')||0),!0}setR(O,V){this.setProp('rx',O),this.setProp('ry',V)}handleMouseUpImpl(){this.triggerChange()}handleMouseMoveImpl(){}}E.default=F})},function(u,A,S){var P,C,T;(function(E,X){C=[A,S(28)],P=X,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var Y=function(O){return O&&O.__esModule?O:{default:O}}(X);class I extends Y.default{constructor(F,O){super(F,O)}createDom(){return!1}applyPosition(){return!0}}E.default=I})},function(u,A,S){var P,C,T;(function(E,X){C=[A,S(28)],P=X,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var Y=function(O){return O&&O.__esModule?O:{default:O}}(X);class I extends Y.default{constructor(F,O){super(F,O)}createDom(){this._dom=document.createElementNS(this.graph.ns,'path'),this.setStrokeColor('black'),this.setStrokeWidth(1)}createHandles(){}setPointsPx(F){return this.pxPoints=F,this}applyPosition(){if(this.pxPoints)this.setDom('d',this.pxPoints);else if(this.points){var F,O;this.serie?(F=this.serie.getXAxis(),O=this.serie.getYAxis()):this.xAxis&&this.yAxis&&(F=this.xAxis,O=this.yAxis),this.setDom('d','M '+this.points.map(function(V){return F.getPx(V[0])+', '+O.getPx(V[1])}).join(' L '))}return!0}}E.default=I})},function(u,A,S){var P,C,T;(function(E,X){C=[A,S(28)],P=X,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var Y=function(O){return O&&O.__esModule?O:{default:O}}(X);class I extends Y.default{constructor(F,O){super(F,O)}createDom(){this._dom=document.createElementNS(this.graph.ns,'line'),this.setStrokeColor('black'),this.setStrokeWidth(1)}createHandles(){this._createHandles(2,'rect',{transform:'translate(-3 -3)',width:6,height:6,stroke:'black',fill:'white',cursor:'nwse-resize'})}applyPosition(){var F=this.calculatePosition(0),O=this.calculatePosition(1);if(F&&F.x&&F.y)return this.setDom('x2',F.x),this.setDom('y2',F.y),this.setDom('y1',O.y),this.setDom('x1',O.x),this.currentPos2x=O.x,this.currentPos2y=O.y,this.currentPos1x=F.x,this.currentPos1y=F.y,!0}handleMouseMoveImpl(F,O,V){if(!this.isLocked()){var W=this.getPosition(0),B=this.getPosition(1),R;if(1==this.handleSelected?R=W:2==this.handleSelected&&(R=B),R&&(!this._data.vertical&&R.deltaPosition('x',O,this.getXAxis()),!this._data.horizontal&&R.deltaPosition('y',V,this.getYAxis())),this.moving&&(W.x&&W.deltaPosition('x',O,this.getXAxis()),W.y&&W.deltaPosition('y',V,this.getYAxis()),B.x&&B.deltaPosition('x',O,this.getXAxis()),B.y&&B.deltaPosition('y',V,this.getYAxis())),this._data.forcedCoords){var G=this._data.forcedCoords;void 0!==G.y&&('function'==typeof G.y?B.y=W.y=G.y(this):(B.y=G.y,W.y=G.y)),void 0!==G.x&&('function'==typeof G.x?B.x=W.x=G.x(this):(B.x=G.x,W.x=G.x))}return this.rectEvent&&this.setEventReceptacle(),this.redraw(),this.changed(),this.setHandles(),!0}}setHandles(){!this.areHandlesInDom()||isNaN(this.currentPos1x)||(this.handles[1].setAttribute('x',this.currentPos1x),this.handles[1].setAttribute('y',this.currentPos1y),this.handles[2].setAttribute('x',this.currentPos2x),this.handles[2].setAttribute('y',this.currentPos2y))}setEventReceptacle(){this.currentPos1x&&(!this.rectEvent&&(this.rectEvent=document.createElementNS(this.graph.ns,'line'),this.rectEvent.setAttribute('pointer-events','stroke'),this.rectEvent.setAttribute('stroke','transparent'),this.rectEvent.jsGraphIsShape=this,this.group.appendChild(this.rectEvent)),this.rectEvent.setAttribute('x1',this.currentPos1x),this.rectEvent.setAttribute('y1',this.currentPos1y),this.rectEvent.setAttribute('x2',this.currentPos2x),this.rectEvent.setAttribute('y2',this.currentPos2y),this.rectEvent.setAttribute('stroke-width',this.getProp('strokeWidth')+2))}}E.default=I})},function(u,A,S){var P,C,T;(function(E,X){C=[A,S(29),S(2)],P=X,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X,Y){'use strict';function I(W){return W&&W.__esModule?W:{default:W}}Object.defineProperty(E,'__esModule',{value:!0});var F=I(X),O=I(Y);class V extends F.default{constructor(W,B){super(W,B),this.nbHandles=2}createHandles(){this._createHandles(2,'rect',{transform:'translate(-3 -3)',width:6,height:6,stroke:'black',fill:'white'})}applyPosition(){var W=this.calculatePosition(0),B=this.calculatePosition(1),Z=this.getAxis(),U=[],R,G;let Q=this.yBaseline;if(W&&B){this.serie.isFlipped()?(Q=this.getXAxis().getPx(0)-Q,R=Math.abs(W.y-B.y),G=Math.min(W.y,B.y)):(Q=this.getYAxis().getPx(0)-Q,R=Math.abs(W.x-B.x),G=Math.min(W.x,B.x)),this.computedBaseline=Q,this.reversed=G==B.x;var K=this.getPosition(0),J=this.getPosition(1);if('x'==Z&&(2>R||0>G+R||G>this.graph.getDrawingWidth())||'y'==Z&&(2>R||0>G+R||G>this.graph.getDrawingHeight()))U=[[0,0]],this.hideLabel(0),this.setDom('d',''),this.hideHandles();else{this.showLabel(0);var $=this.serie.searchClosestValue(K[Z]),ee=this.serie.searchClosestValue(J[Z]),pe='',ue=1,ge=0,ce=Number.MAX_VALUE,te,ie,ae,re,se,ne,G,oe,le,de;if(!$||!ee)return!1;W.y=$.yMin,B.y=ee.yMin,$.xBeforeIndex>ee.xBeforeIndex&&(te=$,$=ee,ee=te);var ye=0,fe=this.scaling,le,de,xe,he,me;for(this.serie.isFlipped()&&(ue=0,ge=1),ie=$.dataIndex;ie<=ee.dataIndex;ie++){for(re=ie==$.dataIndex?$.xBeforeIndexArr:0,se=ie==ee.dataIndex?ee.xBeforeIndexArr:this.serie.data[ie].length,ne=0,ae=re;ae<=se;ae+=2){if(G=this.serie.getX(this.serie.data[ie][ae+ge]),oe=this.serie.getY(this.serie.data[ie][ae+ue]),this.serie.isFlipped()){var be=G;G=oe,oe=be}if(le||(le=G,de=oe,this.serie.data[ie][ae+ge],this.serie.data[ie][ae+ue]),void 0==xe){xe=G,he=oe,me=this.serie.data[ie][ae+ge],this.serie.data[ie][ae+ue];continue}(ye+=0.5*((this.serie.data[ie][ae+ge]-me)*this.serie.data[ie][ae+ue]),me=this.serie.data[ie][ae+ge],G!=xe||oe!=he)&&(xe=G,he=oe,U.push([G,ye]),ne++)}if(this.lastX=G,this.lastY=oe,!le||!de||!this.lastX||!this.lastY)return}0==ye&&(ye=1);var fe;fe=this._ratio?this._ratio:150/ye;for(var ie=0,Ae=U.length;ie<Ae;ie++)U[ie][1]=Q-U[ie][1]*fe,0==ie&&(this.firstPointX=U[ie][0],this.firstPointY=U[ie][1]),pe+=' L '+U[ie][ge]+', '+U[ie][ue]+' ',this.lastPointX=U[ie][0],this.lastPointY=U[ie][1];this.points=U,this.sum=ye;var he=de,xe=this.lastX;Math.min(20,xe-le),pe=this.serie.isFlipped()?' M '+Q+', '+le+' '+pe:' M '+le+', '+Q+' '+pe,this.setDom('d',pe),this.firstX=le,this.firstY=de,this.maxY=this.serie.getY(0),this._selected&&this.select(),this.setHandles()}return this.setLabelPosition(new O.default({x:(K.x+J.x)/2,y:(this.firstPointY+this.lastPointY)/2+'px'})),this.updateLabels(),this.changed(),!0}}getAxis(){return this._data.axis||'x'}set ratio(W=1){this._ratio=W}get ratio(){return this._ratio}set yBaseline(W=30){this._yBaseline=W}get yBaseline(){return this._yBaseline||30}selectStyle(){this.setDom('stroke-width','2px')}selectHandles(){}setHandles(){if(void 0!=this.points&&this.isSelected()){this.addHandles();var W=this.computePosition(0),B=this.computePosition(1);W.x<B.x?(this.handles[1].setAttribute('x',this.firstPointX),this.handles[1].setAttribute('y',this.firstPointY),this.handles[2].setAttribute('x',this.lastPointX),this.handles[2].setAttribute('y',this.lastPointY)):(this.handles[2].setAttribute('x',this.firstPointX),this.handles[2].setAttribute('y',this.firstPointY),this.handles[1].setAttribute('x',this.lastPointX),this.handles[1].setAttribute('y',this.lastPointY))}}}E.default=V})},function(u,A,S){var P,C,T;(function(E,X){C=[A,S(36)],P=X,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var Y=function(O){return O&&O.__esModule?O:{default:O}}(X);class I extends Y.default{constructor(F,O){super(F,O),this.nbHandles=4}createDom(){this._dom=document.createElementNS(this.graph.ns,'rect'),this._dom.element=this,this.createHandles(this.nbHandles,'rect',{transform:'translate(-3 -3)',width:6,height:6,stroke:'black',fill:'white',cursor:'nwse-resize'})}redrawImpl(){this.setPosition(),this.setHandles(),this.setBindableToDom(this._dom)}}E.default=I})},function(u,A,S){var P,C,T;(function(E,X){C=[A,S(28),S(3)],P=X,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X,Y){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var I=function(W){return W&&W.__esModule?W:{default:W}}(X),F=function(W){if(W&&W.__esModule)return W;var B={};if(null!=W)for(var R in W)Object.prototype.hasOwnProperty.call(W,R)&&(B[R]=W[R]);return B.default=W,B}(Y);class O extends I.default{constructor(V,W){super(V,W)}createDom(){return this,this._dom=document.createElementNS(this.graph.ns,'rect'),this.setStrokeColor('black'),this.setStrokeWidth(1),this.setFillColor('transparent'),this}createHandles(){if(this.hasHandles()){var V=this.getProp('handles');switch('object'!=typeof V&&(V={}),V.type||(V.type='corners'),V.type){case'sides':F.extend(V,{sides:{top:!0,bottom:!0,left:!0,right:!0}});var W=0;for(var B in V.sides)V.sides[B]&&W++;this._createHandles(W,'g').map(function(R){var G=document.createElementNS(self.graph.ns,'rect');G.setAttribute('x','-3'),G.setAttribute('width','6'),G.setAttribute('y','-6'),G.setAttribute('height','12'),G.setAttribute('stroke','black'),G.setAttribute('fill','white'),G.setAttribute('cursor','pointer'),R.appendChild(G)});var W=1;for(var B in V.sides)V.sides[B]&&(this.handles[B]=this['handle'+W],this.sides[W]=B,W++);break;case'corners':this._createHandles(4,'rect',{transform:'translate(-3 -3)',width:6,height:6,stroke:'black',fill:'white'}),this.handles&&(this.handles[2].setAttribute('cursor','nesw-resize'),this.handles[4].setAttribute('cursor','nesw-resize'),this.handles[1].setAttribute('cursor','nwse-resize'),this.handles[3].setAttribute('cursor','nwse-resize'));}return this}}applyPosition(){var V=this.computePosition(0),W=this.computePosition(1),B,R,G,Z;return V.x<W.x?(B=V.x,G=W.x-V.x):(B=W.x,G=V.x-W.x),V.y<W.y?(R=V.y,Z=W.y-V.y):(R=W.y,Z=V.y-W.y),this.currentX=B,this.currentY=R,this.currentW=G,this.currentH=Z,isNaN(B)||isNaN(R)||!1===B||!1===R?!1:(this.setDom('width',G),this.setDom('height',Z),this.setDom('x',B),this.setDom('y',R),this.setHandles(),this.updateMask(),!0)}handleMouseMoveImpl(V,W,B){var R=this.getProp('handles');if(this.moving||this.handleSelected){var G=this.getPosition(0),Z=this.getPosition(1),U=this.getXAxis().isFlipped(),Q=this.getYAxis().isFlipped(),K=G.x,J=G.y,$=Z.x,ee=Z.y;if(this.moving)G.deltaPosition('x',W,this.getXAxis()),G.deltaPosition('y',B,this.getYAxis()),Z.deltaPosition('x',W,this.getXAxis()),Z.deltaPosition('y',B,this.getYAxis());else switch(R.type){case'sides':switch(this.sides[this.handleSelected]){case'left':G.deltaPosition('x',W,this.getXAxis());break;case'right':Z.deltaPosition('x',W,this.getXAxis());break;case'top':G.deltaPosition('y',B,this.getYAxis());break;case'bottom':Z.deltaPosition('y',B,this.getYAxis());}break;case'corners':default:1==this.handleSelected?(G.deltaPosition('x',W,this.getXAxis()),G.deltaPosition('y',B,this.getYAxis())):2==this.handleSelected?(Z.deltaPosition('x',W,this.getXAxis()),G.deltaPosition('y',B,this.getYAxis())):3==this.handleSelected?(Z.deltaPosition('y',B,this.getYAxis()),Z.deltaPosition('x',W,this.getXAxis())):4==this.handleSelected&&(G.deltaPosition('x',W,this.getXAxis()),Z.deltaPosition('y',B,this.getYAxis()));}return this.redraw(),this.changed(),this.setHandles(),!0}}setHandles(){if(!this.isLocked()&&(this.isSelectable()||this._staticHandles)&&this.handlesInDom){var V=this.computePosition(0),W=this.computePosition(1),B=this.getProp('handles');switch(B.type){case'sides':this.handles.left&&this.handles.left.setAttribute('transform','translate('+this.currentX+' '+(this.currentY+this.currentH/2)+')'),this.handles.right&&this.handles.right.setAttribute('transform','translate( '+(this.currentX+this.currentW)+' '+(this.currentY+this.currentH/2)+')'),this.handles.top&&this.handles.top.setAttribute('transform','translate( '+(this.currentX+this.currentW/2)+' '+this.currentY+')'),this.handles.bottom&&this.handles.bottom.setAttribute('transform','translate( '+(this.currentX+this.currentW/2)+' '+(this.currentY+this.currentH)+')');break;case'corners':default:this.handles[1].setAttribute('x',V.x),this.handles[1].setAttribute('y',V.y),this.handles[2].setAttribute('x',W.x),this.handles[2].setAttribute('y',V.y),this.handles[3].setAttribute('x',W.x),this.handles[3].setAttribute('y',W.y),this.handles[4].setAttribute('x',V.x),this.handles[4].setAttribute('y',W.y);}}}}E.default=O})},function(u,A,S){var P,C,T;(function(E,X){C=[A,S(28)],P=X,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var Y=function(O){return O&&O.__esModule?O:{default:O}}(X);class I extends Y.default{constructor(F,O){super(F,O),this.nbHandles=1}get width(){return this.options.width||10}set width(F=10){this.options.width=F}createDom(){this._dom=document.createElementNS(this.graph.ns,'path'),this._dom.setAttribute('d','M -'+this.width/2+' 0 h '+this.width+' m -'+this.width/2+' -'+this.width/2+' v '+this.width+'')}createHandles(){this._createHandles(this.nbHandles,'rect',{transform:'translate(-3 -3)',width:6,height:6,stroke:'black',fill:'white',cursor:'nwse-resize'})}applyPosition(){var F=this.calculatePosition(0);if(F&&F.x&&F.y)return this.setDom('transform','translate( '+F.x+', '+F.y+')'),this.currentPos1x=F.x,this.currentPos1y=F.y,!0}redrawImpl(){this.setHandles()}handleCreateImpl(){}handleMouseDownImpl(){return this.moving=!0,!0}handleMouseUpImpl(){return this.triggerChange(),!0}handleMouseMoveImpl(F,O,V){if(!this.isLocked()){var W=this.getFromData('pos');return this.moving&&(W.x=this.graph.deltaPosition(W.x,O,this.getXAxis()),W.y=this.graph.deltaPosition(W.y,V,this.getYAxis())),this.redrawImpl(),!0}}createHandles(){this._createHandles(1,'rect',{transform:'translate(-3 -3)',width:6,height:6,stroke:'black',fill:'white',cursor:'nwse-resize'})}setHandles(){!this.areHandlesInDom()||isNaN(this.currentPos1x)||(this.handles[1].setAttribute('x',this.currentPos1x),this.handles[1].setAttribute('y',this.currentPos1y))}selectStyle(){this.setDom('stroke','red'),this.setDom('stroke-width','2')}}E.default=I})},function(u,A,S){var P,C,T;(function(E,X){C=[A,S(33)],P=X,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var Y=function(O){return O&&O.__esModule?O:{default:O}}(X);class I extends Y.default{constructor(F){super(F),this.lineHeight=6}createDom(){this._dom=document.createElementNS(this.graph.ns,'line'),this.line1=document.createElementNS(this.graph.ns,'line'),this.line2=document.createElementNS(this.graph.ns,'line'),this.line3=document.createElementNS(this.graph.ns,'line'),this.rectBoundary=document.createElementNS(this.graph.ns,'path'),this.rectBoundary.setAttribute('fill','transparent'),this.rectBoundary.setAttribute('stroke','none'),this.rectBoundary.setAttribute('pointer-events','fill'),this.rectBoundary.jsGraphIsShape=!0,this.group.appendChild(this.rectBoundary),this.group.appendChild(this.line1),this.group.appendChild(this.line2),this.group.appendChild(this.line3),this._dom.element=this}createHandles(){this._createHandles(3,'rect',{transform:'translate(-3 -3)',width:6,height:6,stroke:'black',fill:'white',cursor:'nwse-resize'})}redrawImpl(){this.line1.setAttribute('stroke',this.getStrokeColor()),this.line2.setAttribute('stroke',this.getStrokeColor()),this.line3.setAttribute('stroke',this.getStrokeColor()),this.line1.setAttribute('stroke-width',this.getStrokeWidth()),this.line2.setAttribute('stroke-width',this.getStrokeWidth()),this.line3.setAttribute('stroke-width',this.getStrokeWidth()),this.setHandles(),this.redrawLines()}redrawLines(){var F=this.computePosition(0),O=this.computePosition(1),V=this.computePosition(2);if(F.x&&O.x&&V.x&&this.posYPx){var W=this.lineHeight;this.rectBoundary.setAttribute('d','M '+F.x+' '+(this.posYPx-W)+' v '+2*W+' H '+O.x+' v '+-2*W+'z'),this.line1.setAttribute('x1',F.x),this.line1.setAttribute('x2',F.x),this.line2.setAttribute('x1',O.x),this.line2.setAttribute('x2',O.x),this.line3.setAttribute('x1',V.x),this.line3.setAttribute('x2',V.x),this._dom.setAttribute('x1',F.x),this._dom.setAttribute('x2',O.x),this.redrawY(W)}return this}redrawY(){if(!this.posYPx)return this;var F=this.lineHeight;return this.line1.setAttribute('y1',this.posYPx-F),this.line1.setAttribute('y2',this.posYPx+F),this.line2.setAttribute('y1',this.posYPx-F),this.line2.setAttribute('y2',this.posYPx+F),this.line3.setAttribute('y1',this.posYPx-F),this.line3.setAttribute('y2',this.posYPx+F),this._dom.setAttribute('y1',this.posYPx),this._dom.setAttribute('y2',this.posYPx),this}setHandles(){if(this.posYPx){var F=this.computePosition(0),O=this.computePosition(1),V=this.computePosition(2);F.x&&O.x&&V.x&&(this.handles[1].setAttribute('x',F.x),this.handles[1].setAttribute('y',this.posYPx),this.handles[2].setAttribute('x',O.x),this.handles[2].setAttribute('y',this.posYPx),this.handles[3].setAttribute('x',V.x),this.handles[3].setAttribute('y',this.posYPx))}}setY(F){return this.posYPx=F,this}setLineHeight(F){this.lineHeihgt=F}handleMouseMoveImpl(F,O){if(!this.isLocked()){var V=this.getPosition(0),W=this.getPosition(1),B=this.getPosition(2);switch(this.handleSelected){case 1:V.deltaPosition('x',O,this.getXAxis()),(Math.abs(B.x-W.x)>Math.abs(W.x-V.x)||Math.abs(B.x-V.x)>Math.abs(W.x-V.x))&&(B.x=V.x+0.1*(W.x-V.x));break;case 2:W.deltaPosition('x',O,this.getXAxis()),(Math.abs(B.x-W.x)>Math.abs(W.x-V.x)||Math.abs(B.x-V.x)>Math.abs(W.x-V.x))&&(B.x=W.x+0.1*(V.x-W.x));break;case 3:if(B.deltaPosition('x',O,this.getXAxis()),Math.abs(B.x-W.x)>Math.abs(W.x-V.x)||Math.abs(B.x-V.x)>Math.abs(W.x-V.x))return;}this.setLabelPosition({y:this.getLabelPosition(0).y,x:B.x}),this.updateLabels(),this.redrawLines(),this.setHandles()}}applyPosition(){return this.redrawLines(),!0}}E.default=I})},function(u,A,S){var P,C,T;(function(E,X){C=[A,S(3),S(28)],P=X,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X,Y){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var I=function(V){return V&&V.__esModule?V:{default:V}}(Y);class F extends I.default{constructor(O,V){super(O,V)}createDom(){this._dom=document.createElementNS(this.graph.ns,'foreignObject');let O=document.createElement('div');this._dom.appendChild(O),this.div=O}createHandles(){}setHeight(O){this.setProp('height',O)}setWidth(O){this.setProp('width',O)}setContent(O){this.setProp('content',O)}setRenderer(O){this._renderer=O}redraw(){this._renderer?this._renderer(this.div):this.div.innerHTML=this.getProp('content'),super.redraw(...arguments)}applyPosition(){this.setDom('width',this.getProp('width')),this.setDom('height',this.getProp('height'));var O=this.calculatePosition(0);if(O&&(0,X.isNumeric)(O.x)&&(0,X.isNumeric)(O.y))return this.setDom('x',O.x),this.setDom('y',O.y),this.currentPosX=O.x,this.currentPosY=O.y,!0}handleMouseMoveImpl(O,V,W){if(!this.isLocked()){var B=this.getPosition(0);return B&&(!this._data.vertical&&B.deltaPosition('x',V,this.getXAxis()),!this._data.horizontal&&B.deltaPosition('y',W,this.getYAxis())),this.moving&&(pos.x&&pos.deltaPosition('x',V,this.getXAxis()),pos.y&&pos.deltaPosition('y',W,this.getYAxis()),pos2.x&&pos2.deltaPosition('x',V,this.getXAxis()),pos2.y&&pos2.deltaPosition('y',W,this.getYAxis())),this.redraw(),this.changed(),this.setHandles(),!0}}setHandles(){this.areHandlesInDom()&&isNaN(this.currentPos1x)}}E.default=F})},function(u,A,S){var P,C,T;(function(E,X){C=[A,S(4)],P=X,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var Y=function(O){return O&&O.__esModule?O:{default:O}}(X);class I extends Y.default{static defaults(){return{}}constructor(F){super(...arguments),this.options=F}init(){}onMouseDown(){}onMouseUp(){}onMouseMove(){}}E.default=I})},function(u,A,S){var P,C,T;(function(E,X){C=[A,S(40)],P=X,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var Y=function(O){return O&&O.__esModule?O:{default:O}}(X);class I extends Y.default{static defaults(){return{dragX:!0,dragY:!0,persistanceX:!1,persistanceY:!1}}init(F){this.graph=F,this.time=null,this.totaltime=2000}onMouseDown(F,O,V){return this._draggingX=O,this._draggingY=V,this._lastDraggingX=this._draggingX,this._lastDraggingY=this._draggingY,this.stopAnimation=!0,this.moved=!1,!0}onMouseMove(F,O,V){var W=O-this._draggingX,B=V-this._draggingY;this.options.dragX&&F._applyToAxes(function(R){R.setCurrentMin(R.getVal(R.getMinPx()-W)),R.setCurrentMax(R.getVal(R.getMaxPx()-W))},!1,!0,!1),this.options.dragY&&F._applyToAxes(function(R){R.setCurrentMin(R.getVal(R.getMinPx()-B)),R.setCurrentMax(R.getVal(R.getMaxPx()-B))},!1,!1,!0),this._lastDraggingX=this._draggingX,this._lastDraggingY=this._draggingY,this._draggingX=O,this._draggingY=V,this.moved=!0,this.time=Date.now(),this.emit('dragging'),F.draw(!0)}onMouseUp(F,O,V){var W=Date.now()-this.time;return O==this._lastDraggingX||V==this._lastDraggingY?void(this.moved&&this.emit('dragged')):(this.speedX=(O-this._lastDraggingX)/W,this.speedY=(V-this._lastDraggingY)/W,isNaN(this.speedX)||isNaN(this.speedY)?void this.emit('dragged'):void(F._applyToAxes(function(B){B._pluginDragMin=B.getCurrentMin(),B._pluginDragMax=B.getCurrentMax()},!1,!0,!0),this.stopAnimation=!1,this.accelerationX=-this.speedX/this.totaltime,this.accelerationY=-this.speedY/this.totaltime,this.options.persistanceX||this.options.persistanceY?this._persistanceMove(F):this.emit('dragged')))}_persistanceMove(F){var O=this;return O.stopAnimation?void O.emit('dragged'):void window.requestAnimationFrame(function(){var V=Date.now()-O.time,W=(0.5*O.accelerationX*V+O.speedX)*V,B=(0.5*O.accelerationY*V+O.speedY)*V;O.options.persistanceX&&F._applyToAxes(function(R){R.setCurrentMin(-R.getRelVal(W)+R._pluginDragMin),R.setCurrentMax(-R.getRelVal(W)+R._pluginDragMax),R.cacheCurrentMin(),R.cacheCurrentMax(),R.cacheInterval()},!1,!0,!1),O.options.persistanceY&&F._applyToAxes(function(R){R.setCurrentMin(-R.getRelVal(B)+R._pluginDragMin),R.setCurrentMax(-R.getRelVal(B)+R._pluginDragMax),R.cacheCurrentMin(),R.cacheCurrentMax(),R.cacheInterval()},!1,!1,!0),F.draw(),V<O.totaltime?(O.emit('dragging'),O._persistanceMove(F)):O.emit('dragged')})}}E.default=I})},function(u,A,S){var P,C,T;(function(E,X){C=[A,S(40),S(3)],P=X,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X,Y){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var I=function(W){return W&&W.__esModule?W:{default:W}}(X),F=function(W){if(W&&W.__esModule)return W;var B={};if(null!=W)for(var R in W)Object.prototype.hasOwnProperty.call(W,R)&&(B[R]=W[R]);return B.default=W,B}(Y);class O extends I.default{constructor(){super(...arguments)}init(V,W){this.graph=V,this.shapeType=W.type}setShape(V){this.shapeInfo.shapeType=V}onMouseDown(V,W,B,R){if(this.shapeType||this.options.url){var G=this,Z=this,U,Q;this.count=this.count||0,W-=V.getPaddingLeft(),B-=V.getPaddingTop(),U=V.getXAxis().getVal(W),Q=V.getYAxis().getVal(B);var K={position:[{x:U,y:Q},{x:U,y:Q}],onChange:function($){V.triggerEvent('onAnnotationChange',$)},locked:!1,selectable:!0,resizable:!0,movable:!0};if(F.extend(!0,K,this.options),this.emit('beforeNewShape',K,R),!this.graph.prevent(!1)){var J=V.newShape(K.type,K);this.emit('createdShape',J,R),J&&(G.currentShape=J,G.currentShapeEvent=R),V.once('mouseUp',function(){G.emit('newShape',J)})}}}onMouseMove(V,W,B,R){var G=this;if(G.currentShape){G.count++;var Z=G.currentShape;G.currentShape=!1,V.selectedSerie&&Z.setSerie(V.selectedSerie),Z.resizing=!0,Z.options&&Z.options.onCreate&&Z.options.onCreate.call(Z),Z.draw(),V.selectShape(Z),Z.handleMouseDown(G.currentShapeEvent,!0),Z.handleSelected=1,Z.handleMouseMove(R,!0)}}onMouseUp(){var V=this;V.currentShape&&(V.currentShape=!1)}}E.default=O})},function(u,A,S){var P,C,T;(function(E,X){C=[A,S(3),S(40)],P=X,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X,Y){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var I=function(W){if(W&&W.__esModule)return W;var B={};if(null!=W)for(var R in W)Object.prototype.hasOwnProperty.call(W,R)&&(B[R]=W[R]);return B.default=W,B}(X),F=function(W){return W&&W.__esModule?W:{default:W}}(Y);class O extends F.default{constructor(){super(...arguments)}init(V){this._path=document.createElementNS(V.ns,'path'),I.setAttributeTo(this._path,{display:'none',fill:'rgba(0,0,0,0.1)',stroke:'rgba(0,0,0,1)','shape-rendering':'crispEdges',x:0,y:0,height:0,width:0,d:''}),this.graph=V,V.dom.appendChild(this._path)}setSerie(V){this.serie=V}onMouseDown(V,W,B){this.serie&&(this.path='M '+W+' '+B+' ',this.currentX=W,this.currentY=B,this.xs=[this.serie.getXAxis().getVal(W-V.getPaddingLeft())],this.ys=[this.serie.getYAxis().getVal(B-V.getPaddingTop())],this._path.setAttribute('d',''),this._path.setAttribute('display','block'))}onMouseMove(V,W,B){25<Math.pow(W-this.currentX,2)+Math.pow(B-this.currentY,2)&&(this.path+=' L '+W+' '+B+' ',this.currentX=W,this.currentY=B,this.xs.push(this.serie.getXAxis().getVal(W-V.getPaddingLeft())),this.ys.push(this.serie.getYAxis().getVal(B-V.getPaddingTop())),this._path.setAttribute('d',this.path+' z'),this.findPoints())}findPoints(){var V=this.serie.data,W=[],B=0,R;for(var G=0,Z=V.length;G<Z;G+=2){B=0;for(var U=0,Q=this.xs.length;U<Q;U+=1)R=U==Q-1?0:U+1,(this.ys[U]<V[G+1]&&this.ys[R]>V[G+1]||this.ys[U]>V[G+1]&&this.ys[R]<V[G+1])&&V[G]>(V[G+1]-this.ys[U])/(this.ys[R]-this.ys[U])*(this.xs[R]-this.xs[U])+this.xs[U]&&B++;1==B%2?(W.push(G/2),this.serie.selectPoint(G/2,!0,'selected')):this.serie.unselectPoint(G/2)}this.selected=W,this.emit('selectionProcess',W)}onMouseUp(){this._path.setAttribute('display','none'),this.emit('selectionEnd',this.selected)}}E.default=O})},function(u,A,S){var P,C,T;(function(E,X){C=[A,S(3),S(40)],P=X,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X,Y){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var I=function(W){if(W&&W.__esModule)return W;var B={};if(null!=W)for(var R in W)Object.prototype.hasOwnProperty.call(W,R)&&(B[R]=W[R]);return B.default=W,B}(X),F=function(W){return W&&W.__esModule?W:{default:W}}(Y);class O extends F.default{constructor(){super(...arguments)}static defaults(){return{axes:'all'}}init(V){this._zoomingGroup=document.createElementNS(V.ns,'g'),this._zoomingSquare=document.createElementNS(V.ns,'rect'),this._zoomingSquare.setAttribute('display','none'),I.setAttributeTo(this._zoomingSquare,{display:'none',fill:'rgba(171,12,12,0.2)',stroke:'rgba(171,12,12,1)','shape-rendering':'crispEdges',x:0,y:0,height:0,width:0,'pointer-events':'none'}),this.graph=V,V.groupEvent.appendChild(this._zoomingGroup),this._zoomingGroup.appendChild(this._zoomingSquare)}onMouseDown(V,W,B,R,G){var Z=this.options.zoomMode;if(Z){switch(this._zoomingMode=Z,void 0===W&&(this._backedUpZoomMode=this._zoomingMode,this._zoomingMode='y',W=0),void 0===B&&(this._backedUpZoomMode=this._zoomingMode,this._zoomingMode='x',B=0),this._zoomingXStart=W,this._zoomingYStart=B,this.x1=W-V.getPaddingLeft(),this.y1=B-V.getPaddingTop(),this._zoomingSquare.setAttribute('width',0),this._zoomingSquare.setAttribute('height',0),this._zoomingSquare.setAttribute('display','block'),this._zoomingMode){case'x':this._zoomingSquare.setAttribute('y',V.options.paddingTop),this._zoomingSquare.setAttribute('height',V.getDrawingHeight()-V.shift.bottom);break;case'y':this._zoomingSquare.setAttribute('x',V.options.paddingLeft),this._zoomingSquare.setAttribute('width',V.getDrawingWidth());break;case'forceY2':this.y2=V.getYAxis().getPx(this.options.forcedY)+V.options.paddingTop;}this.options.onZoomStart&&!G&&this.options.onZoomStart(V,W,B,R,G)}}onMouseMove(V,W,B,R,G){switch(this._zoomingMode){case'xy':this._zoomingSquare.setAttribute('x',Math.min(this._zoomingXStart,W)),this._zoomingSquare.setAttribute('y',Math.min(this._zoomingYStart,B)),this._zoomingSquare.setAttribute('width',Math.abs(this._zoomingXStart-W)),this._zoomingSquare.setAttribute('height',Math.abs(this._zoomingYStart-B));break;case'forceY2':this._zoomingSquare.setAttribute('y',Math.min(this._zoomingYStart,this.y2)),this._zoomingSquare.setAttribute('height',Math.abs(this._zoomingYStart-this.y2)),this._zoomingSquare.setAttribute('x',Math.min(this._zoomingXStart,W)),this._zoomingSquare.setAttribute('width',Math.abs(this._zoomingXStart-W));break;case'x':this._zoomingSquare.setAttribute('x',Math.min(this._zoomingXStart,W)),this._zoomingSquare.setAttribute('width',Math.abs(this._zoomingXStart-W));break;case'y':this._zoomingSquare.setAttribute('y',Math.min(this._zoomingYStart,B)),this._zoomingSquare.setAttribute('height',Math.abs(this._zoomingYStart-B));}this.options.onZoomMove&&!G&&this.options.onZoomMove(V,W,B,R,G)}onMouseUp(V,W,B){var R=this;this.removeZone();var G=W-V.options.paddingLeft,Z=B-V.options.paddingTop;if((0!=W-this._zoomingXStart||'y'==this._zoomingMode)&&(0!=B-this._zoomingYStart||'x'==this._zoomingMode))if(V.cancelClick=!0,this.options.transition||this.options.smooth){let U=!1,Q=!1;('x'==this._zoomingMode||'xy'==this._zoomingMode||'forceY2'==this._zoomingMode)&&(this.fullX=!1,this.toAxes(function(K){K._pluginZoomMin=K.getCurrentMin(),K._pluginZoomMax=K.getCurrentMax(),K._pluginZoomMinFinal=Math.min(K.getVal(G),K.getVal(R.x1)),K._pluginZoomMaxFinal=Math.max(K.getVal(G),K.getVal(R.x1))},!1,!0,!1),U=!0),('y'==this._zoomingMode||'xy'==this._zoomingMode)&&(this.fullY=!1,this.toAxes(function(K){K._pluginZoomMin=K.getCurrentMin(),K._pluginZoomMax=K.getCurrentMax(),K._pluginZoomMinFinal=Math.min(K.getVal(Z),K.getVal(R.y1)),K._pluginZoomMaxFinal=Math.max(K.getVal(Z),K.getVal(R.y1))},!1,!1,!0),Q=!0),'forceY2'==this._zoomingMode&&(this.fullY=!1,this.toAxes(function(K){K._pluginZoomMin=K.getCurrentMin(),K._pluginZoomMax=K.getCurrentMax(),K._pluginZoomMinFinal=Math.min(K.getVal(R.y2),K.getVal(R.y1)),K._pluginZoomMaxFinal=Math.max(K.getVal(R.y2),K.getVal(R.y1))},!1,!1,!0),Q=!0),this.transition(U,Q,'zoomEnd')}else{switch(this._zoomingMode){case'x':this.fullX=!1,this.toAxes('_doZoom',[G,this.x1],!0,!1);break;case'y':this.fullY=!1,this.toAxes('_doZoom',[Z,this.y1],!1,!0);break;case'xy':this.fullX=!1,this.fullY=!1,this.toAxes('_doZoom',[G,this.x1],!0,!1),this.toAxes('_doZoom',[Z,this.y1],!1,!0);break;case'forceY2':this.fullX=!1,this.fullY=!1,this.toAxes('_doZoom',[G,this.x1],!0,!1),this.toAxes('_doZoom',[this.y1,this.y2],!1,!0);}V.prevent(!0),V.draw(),this._backedUpZoomMode&&(this._zoomingMode=this._backedUpZoomMode),this.emit('zoomed'),V.pluginYieldActiveState()}}removeZone(){this._zoomingSquare.setAttribute('display','none')}onMouseWheel(V,W,B){B||(B={}),B.baseline||(B.baseline=0);var R='x'==B.direction,G='y'===B.direction;this.toAxes('handleMouseWheel',[V,W,B.baseline],R,G),this.graph.drawSeries()}onDblClick(V,W,B,R,G){var Z=this.graph;if(this.emit('beforeDblClick',{graph:Z,x:V,y:W,pref:R,e:B,mute:G}),!Z.prevent(!1)){if(this.options.transition||this.options.smooth){var U=!1,Q=!1;if(('xtotal'==R.mode||'total'==R.mode)&&(this.toAxes(function(le){le._pluginZoomMin=le.getCurrentMin(),le._pluginZoomMax=le.getCurrentMax(),le._pluginZoomMinFinal=le.getMinValue()-le.options.axisDataSpacing.min*le.getInterval(),le._pluginZoomMaxFinal=le.getMaxValue()+le.options.axisDataSpacing.max*le.getInterval()},!1,!0,!1),U=!0),('ytotal'==R.mode||'total'==R.mode)&&(this.toAxes(function(le){le._pluginZoomMin=le.getCurrentMin(),le._pluginZoomMax=le.getCurrentMax(),le._pluginZoomMinFinal=le.getMinValue()-le.options.axisDataSpacing.min*le.getInterval(),le._pluginZoomMaxFinal=le.getMaxValue()+le.options.axisDataSpacing.max*le.getInterval()},!1,!1,!0),Q=!0),'gradualX'==R.mode||'gradualY'==R.mode||'gradual'==R.mode||'gradualXY'==R.mode){var V=!1,W=!1;('gradualX'==R.mode||'gradual'==R.mode||'gradualXY'==R.mode)&&(V=!0,U=!0),('gradualY'==R.mode||'gradual'==R.mode||'gradualXY'==R.mode)&&(W=!0,Q=!0),this.toAxes(function(le){le._pluginZoomMin=le.getCurrentMin(),le._pluginZoomMax=le.getCurrentMax(),le._pluginZoomMinFinal=le.getCurrentMin()-(le.getCurrentMax()-le.getCurrentMin()),le._pluginZoomMaxFinal=le.getCurrentMax()+(le.getCurrentMax()-le.getCurrentMin())},!1,V,W)}return void this.transition(U,Q,'dblClick')}var K=this.graph.getXAxis(),J=this.graph.getYAxis();if('xtotal'==R.mode)this.toAxes('setMinMaxToFitSeries',null,!0,!1),this.fullX=!0,this.fullY=!1;else if('ytotal'==R.mode)this.toAxes('setMinMaxToFitSeries',null,!1,!0),this.fullX=!1,this.fullY=!0;else if('total'==R.mode)this.toAxes('setMinMaxToFitSeries',null,!0,!0),this.fullX=!0,this.fullY=!0;else{V-=this.graph.options.paddingLeft,W-=this.graph.options.paddingTop;var $=K.getCurrentMin(),ee=K.getCurrentMax(),te=K.getVal(V),ie=ee-$,ae=J.getCurrentMin(),re=J.getCurrentMax(),se=J.getVal(W),ne=re-ae;if('gradualXY'==R.mode||'gradualX'==R.mode){var oe=(te-$)/(ee-$);$=Math.max(K.getMinValue(),$-ie*oe),ee=Math.min(K.getMaxValue(),ee+ie*(1-oe)),K.setCurrentMin($),K.setCurrentMax(ee),K.options.onZoom&&K.options.onZoom($,ee),K.cacheCurrentMin(),K.cacheCurrentMax(),K.cacheInterval()}if('gradualXY'==R.mode||'gradualY'==R.mode){var oe=(se-ae)/(re-ae);ae=Math.max(J.getMinValue(),ae-ne*oe),re=Math.min(J.getMaxValue(),re+ne*(1-oe)),J.setCurrentMin(ae),J.setCurrentMax(re),J.options.onZoom&&J.options.onZoom(ae,re),J.cacheCurrentMin(),J.cacheCurrentMax(),J.cacheInterval()}}Z.pluginYieldActiveState(),this.graph.draw()}}transition(V,W,B){var R=this,G=500;R.gradualUnzoomStart||(R.gradualUnzoomStart=Date.now()),window.requestAnimationFrame(function(){var Z=Date.now()-R.gradualUnzoomStart;Z>G&&(Z=G);var U=Math.sin(Z/G*Math.PI/2);R.toAxes(function(Q){Q.setCurrentMin(Q._pluginZoomMin+(Q._pluginZoomMinFinal-Q._pluginZoomMin)*U),Q.setCurrentMax(Q._pluginZoomMax+(Q._pluginZoomMaxFinal-Q._pluginZoomMax)*U),Q.cacheCurrentMin(),Q.cacheCurrentMax(),Q.cacheInterval()},!1,V,W),R.graph.draw(),Z<G?(R.transition(V,W,B),R.emit('zooming')):(R.emit('zoomed'),R.graph.pluginYieldActiveState(),B&&R.emit(B),R.gradualUnzoomStart=0)})}isFullX(){return this.fullX}isFullY(){return this.fullY}toAxes(V,W,B,R){var G=this.options.axes;switch(G&&('serieSelected'!=G||this.graph.getSelectedSerie())||(G='all'),G){case'all':this.graph._applyToAxes.apply(this.graph,arguments);break;case'serieSelected':var Z=this.graph.getSelectedSerie();Z&&(B&&('string'==typeof V?Z.getXAxis()[V].apply(Z.getXAxis(),W):V.apply(Z.getXAxis(),W)),R&&('string'==typeof V?Z.getYAxis()[V].apply(Z.getYAxis(),W):V.apply(Z.getYAxis(),W)));break;default:Array.isArray(G)||(G=[G]);for(let U of G)U.isX()&&B?'string'==typeof V?U[V].apply(U,W):V.apply(U,W):U.isY()&&R&&('string'==typeof V?U[V].apply(U,W):V.apply(U,W));}}}E.default=O})},function(u,A,S){var P,C,T;(function(E,X){C=[A,S(1),S(46),S(40),S(3)],P=X,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X,Y,I,F){'use strict';function O(Z){return Z&&Z.__esModule?Z:{default:Z}}Object.defineProperty(E,'__esModule',{value:!0});var V=O(X),W=O(Y),B=O(I),R=function(U){if(U&&U.__esModule)return U;var Q={};if(null!=U)for(var K in U)Object.prototype.hasOwnProperty.call(U,K)&&(Q[K]=U[K]);return Q.default=U,Q}(F);class G extends B.default{constructor(){super(...arguments),this.series=[],this.plugins=[],this.currentSlots={},this.requestLevels=new Map,this.update=(Z,U)=>{this.series.forEach(function(Q){this.updateSerie(Q,Z)}),Z||this.recalculateSeries(U)}}static defaults(){return{LRUName:'PluginTimeSerieManager',intervals:[1000,15000,60000,900000,3600000,8640000],maxParallelRequests:3,optimalPxPerPoint:2,nbPoints:1000,url:''}}init(Z){this.graph=Z,W.default.create(this.options.LRUName,200),this.requestsRunning=0}setURL(Z){return this.options.url=Z,this}setAvailableIntervals(){this.options.intervals=arguments}newSerie(Z,U,Q,K,J){var $=this.graph.newSerie(Z,U,Q);return this.currentSlots[Z]={min:0,max:0,interval:0},$.on('hide',function(){$._zoneSerie&&$._zoneSerie.hide()}),$.on('show',function(){$._zoneSerie&&$._zoneSerie.show()}),$.setInfo('timeSerieManagerDBElements',K),J||($._zoneSerie=this.graph.newSerie(Z+'_zone',{},V.default.SERIE_ZONE)),this.series.push($),$}registerPlugin(Z){var U;if(-1<(U=this.plugins.indexOf(Z)))for(var Q=1;Q<arguments.length;Q++)Z.removeListener(arguments[Q],this.update);for(var Q=1;Q<arguments.length;Q++)Z.on(arguments[Q],this.update)}updateSerie(Z,U){var Q=this,K=Z.getXAxis().getCurrentMin(),J=Z.getXAxis().getCurrentMax(),$=this.getOptimalInterval(J-K),ee=this.options.intervals.indexOf($),te;this.cleanRegister(ee);for(var ie=ee;ie<=ee+1;ie++){te=this.options.intervals[ie];var ae=Q.computeSlotID(K,te),re=Q.computeSlotID(J,te);[[2,5,6],[1,2,4],[0,1,3]].forEach(function(se){for(var ne=ae-se[0]*(re-ae),oe=re+se[0]*(re-ae),le=ne;le<=oe&&!(Q.computeTimeMin(le,te)>Date.now());)Q.register(Z,le,te,te==$?se[1]:se[2],!0,U),le++})}this.processRequests()}cleanRegister(Z){this.requestLevels&&this.requestLevels.forEach(U=>{U.forEach((Q,K)=>{Q[4]<Z&&U.splice(K,1)})})}register(Z,U,Q,K,J,$){var ee=this.computeUniqueID(Z,U,Q),te=W.default.get(this.options.LRUName,ee);(!te||this.computeTimeMax(U,Q)>Date.now()&&te.timeout<Date.now()-($?5000:100000)&&1==K)&&this.request(Z,U,Q,K,ee,J)}request(Z,U,Q,K,J,$){for(var ee in this.requestLevels)ee!=K&&this.requestLevels[ee][J]&&(1===this.requestLevels[ee][J][0]?this.requestLevels[ee][J][5]=K:delete this.requestLevels[ee][J]);this.requestLevels[K]&&this.requestLevels[K][J]||(this.requestLevels[K]=this.requestLevels[K]||{},this.requestLevels[K][J]=[0,J,Z.getName(),U,Q,K,Z.getInfo('timeSerieManagerDBElements')],!$&&this.processRequests())}processRequests(){if(!(this.requestsRunning>=this.options.maxParallelRequests)){for(var Z=this,U=1,Q;!0;){for(var K in this.requestLevels[U])if(1!=this.requestLevels[U][K][0]){Q=this.requestLevels[U][K];break}if(Q)break;if(U++,10<U)return}this.requestsRunning++,Q&&(Q[0]=1,R.ajaxGet({url:this.getURL(Q),method:'GET',json:!0}).done(function(J){1==J.status&&(Z.requestsRunning--,delete Z.requestLevels[U][K],W.default.store(Z.options.LRUName,Q[1],J.data),Z.processRequests(),1==Q[5]&&0==Object.keys(Z.requestLevels[1]).length&&Z.recalculateSeries(!0))}))}}computeTimeMax(Z,U){return(Z+1)*(U*this.options.nbPoints)}computeTimeMin(Z,U){return Z*(U*this.options.nbPoints)}getURL(Z){var U=this.options.url.replace('<measurementid>',Z[2]).replace('<from>',this.computeTimeMin(Z[3],Z[4])).replace('<to>',this.computeTimeMax(Z[3],Z[4])).replace('<interval>',Z[4]),Q=Z[6]||{};for(var K in Q)U=U.replace('<'+K+'>',Q[K]);return U}getOptimalInterval(Z){var U=(this.options.optimalPxPerPoint||1)*Z/this.graph.getDrawingWidth(),Q=1/0,K;return this.options.intervals.forEach(function(J){var $=Math.min(Q,Math.abs(J-U));Q!==$&&(K=J,Q=$)}),K||1000}computeUniqueID(Z,U,Q){var K='',J=Z.getInfo('timeSerieManagerDBElements');for(var $ in J)K+=';'+$+':'+J[$];return Z.getName()+';'+U+';'+Q+K}computeSlotID(Z,U){return Math.floor(Z/(U*this.options.nbPoints))}computeSlotTime(Z,U){return Z*(U*this.options.nbPoints)}getZoneSerie(Z){return Z._zoneSerie}updateZoneSerie(Z){var U=this.graph.getSerie(Z);U&&U._zoneSerie&&(U._zoneSerie.setXAxis(U.getXAxis()),U._zoneSerie.setYAxis(U.getYAxis()),U._zoneSerie.setFillColor(U.getLineColor()),U._zoneSerie.setLineColor(U.getLineColor()),U._zoneSerie.setFillOpacity(0.2),U._zoneSerie.setLineOpacity(0.3))}recalculateSeries(Z){var U=this;this.locked||(this.changed=!1,this.series.map(function(Q){U.recalculateSerie(Q,Z)}),this.changed=!1,U.graph.draw())}recalculateSerie(Z,U){var Q=Z.getXAxis().getCurrentMin(),K=Z.getXAxis().getCurrentMax(),J=this.getOptimalInterval(K-Q),$=this.computeSlotID(Q,J),ee=this.computeSlotID(K,J),te=[],ie=[];if(!(!U&&J==this.currentSlots[Z.getName()].interval&&this.currentSlots[Z.getName()].min<=$&&this.currentSlots[Z.getName()].max>=ee)){$-=2,ee+=2,this.currentSlots[Z.getName()].min=$,this.currentSlots[Z.getName()].max=ee,this.currentSlots[Z.getName()].interval=J;for(var ae=$;ae<=ee;){const re=W.default.get(this.options.LRUName,this.computeUniqueID(Z,ae,J));re?(te=te.concat(re.data.mean),ie=ie.concat(re.data.minmax)):this.recalculateSerieUpwards(Z,ae,J,te,ie),ae++}this.changed=!0,Z.setData(te),Z._zoneSerie&&Z._zoneSerie.setData(ie)}}setIntervalCheck(Z){this.interval&&clearInterval(this.interval),this.update(!0,!0),this.interval=setInterval(()=>{this.update(!0,!1)},Z)}recalculateSerieUpwards(Z,U,Q,K,J){var $=this.options.intervals.slice(0);$.sort();var ee=$[$.indexOf(Q)+1]||-1;if(0>ee)return[];var te=this.computeSlotTime(U,Q),ie=this.computeSlotTime(U+1,Q),ae=this.computeSlotID(te,ee),re=!1;const se=W.default.get(this.options.LRUName,this.computeUniqueID(Z,ae,ee));if(se)for(var ne=0,oe=se.data.mean.length;ne<oe;ne+=2){if(se.data.mean[ne]<te)continue;else!1==re&&(re=ne);if(se.data.mean[ne]>=ie)return K=K.concat(se.data.mean.slice(re,ne)),void(J=K.concat(se.data.minmax.slice(re,ne)))}return this.recalculateSerieUpwards(Z,ae,ee,K,J)}lockRedraw(){this.locked=!0}unlockRedraw(){this.locked=!1}isRedrawLocked(){return!!this.locked}}E.default=G})},function(u,A){var S,P,C;(function(T,E){P=[A],S=E,C='function'==typeof S?S.apply(A,P):S,!(C!==void 0&&(u.exports=C));var X})(this,function(T){'use strict';function E(W,B){B=B||50,I[W]||(I[W]={},O[W]=0),V[W]=B}function X(W,B){var R,G;if(I[W]&&I[W][B])return G=F[W],R=I[W][B],R.prev=G,R.next=G.next,G.next.prev=R,G.next=R,F[W]=R,R.data}function Y(W,B,R){var G,Z,U;if(I[W]&&void 0!==O[W]&&V[W])return U=F[W],I[W][B]?(X(W,B),I[W][B].data.data=R,I[W][B].data.timeout=Date.now()):(G={data:{data:R,timeout:Date.now()}},'undefined'==typeof U?(G.prev=G,G.next=G):(G.prev=U.prev,G.next=U.next,U.next.prev=G,U.next=G),F[W]=G,I[W][B]=G,O[W]++),O[W]>V[W]&&U&&(Z=U.next,U.next.next.prev=U,U.next=U.next.next,Z.next.next=void 0,Z.next.prev=void 0,O[W]--),R}Object.defineProperty(T,'__esModule',{value:!0}),T.create=function(B,R){E(B,R)},T.get=function(B,R){var G;if((G=X(B,R))!=void 0)return G},T.store=function(W,B,R){return Y(W,B,R),R},T.empty=function(B){emptyMemory(B)},T.exist=function(B){return I[B]};var I={},F={},O={},V={};;;;})},function(u,A,S){var P,C,T;(function(E,X){C=[A,S(40)],P=X,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var Y=function(O){return O&&O.__esModule?O:{default:O}}(X);class I extends Y.default{constructor(){super(...arguments)}static defaults(){return{positiveStyle:{fillColor:'green',fillOpacity:0.2,strokeWidth:0},negativeStyle:{fillColor:'red',fillOpacity:0.2,strokeWidth:0},from:0,to:0}}init(F){this.graph=F,this.pathsPositive=[],this.pathsNegative=[],this.positivePolyline=this.graph.newShape('polyline').draw(),this.positivePolyline.setFillColor(this.options.positiveStyle.fillColor).setFillOpacity(this.options.positiveStyle.fillOpacity).setStrokeWidth(this.options.positiveStyle.strokeWidth).applyStyle(),this.negativePolyline=this.graph.newShape('polyline').draw(),this.negativePolyline.setFillColor(this.options.negativeStyle.fillColor).setFillOpacity(this.options.negativeStyle.fillOpacity).setStrokeWidth(this.options.negativeStyle.strokeWidth).applyStyle()}setSeries(F,O){this.serie1=F,this.serie2=O}setBoundaries(F,O){this.options.from=F,this.options.to=O}getFrom(){return this.options.from}getTo(){return this.options.to}draw(){function F(){!0===ie?V.pathsPositive.push([J,$]):!1==ie&&V.pathsNegative.push([J,$]),J=[],$=[],ie=void 0}function O(se,ne){for(var oe=0;oe<ne[0].length;oe+=2)0==oe&&(se+='M '),se+=' '+Math.round(V.serie1.getXAxis().getPx(ne[0][oe]))+', '+Math.round(V.serie1.getYAxis().getPx(ne[0][oe+1])),oe<ne[0].length-2&&(se+=' L ');for(var oe=ne[1].length-2;0<=oe;oe-=2)se+=' L '+Math.round(V.serie2.getXAxis().getPx(ne[1][oe]))+', '+Math.round(V.serie2.getYAxis().getPx(ne[1][oe+1])),0==oe&&(se+=' z ');return se}var V=this,W=this.serie1.searchClosestValue(this.getFrom()),B,R,G,Z,U,Q,K,J=[],$=[],ee;W?(B=W.dataIndex,R=2*W.xAfterIndex):(B=0,R=0),U=this.interpolate(this.serie1,this.getFrom()),J.push(this.getFrom()),J.push(U),U=this.interpolate(this.serie2,this.getFrom()),$.push(this.getFrom()),$.push(U);for(var te,ie,ae;B<this.serie1.data.length;B++){for(;R<this.serie1.data[B].length;R+=2){if(this.serie1.data[B][R]>this.getTo()){U=this.interpolate(this.serie1,this.getTo()),Q=this.interpolate(this.serie2,this.getTo()),K=this.computeCrossing(J[J.length-2],J[J.length-1],this.getTo(),U,$[$.length-2],$[$.length-1],this.getTo(),Q),K&&(J.push(K.x),J.push(K.y),$.push(K.x),$.push(K.y),F(),J.push(K.x),J.push(K.y),$.push(K.x),$.push(K.y),ie=this.serie1.data[B][R+1]>this.serie2.data[G][Z+1]),J.push(this.getTo()),J.push(U),$.push(this.getTo()),$.push(Q),ae=!0;break}if(!te)if(te=this.serie2.searchClosestValue(this.serie1.data[B][R]),te)G=te.dataIndex,Z=2*te.xBeforeIndex,U=this.interpolate(this.serie2,this.serie1.data[B][R]),J.push(this.serie1.data[B][R]),J.push(this.serie1.data[B][R+1]),$.push(this.serie1.data[B][R]),$.push(U),ie=this.serie1.data[B][R+1]>U;else continue;for(ee=!1,K=this.computeCrossing(J[J.length-2],J[J.length-1],this.serie1.data[B][R],this.serie1.data[B][R+1],$[$.length-2],$[$.length-1],this.serie2.data[G][Z],this.serie2.data[G][Z+1]),K&&(J.push(K.x),J.push(K.y),$.push(K.x),$.push(K.y),F(),J.push(K.x),J.push(K.y),$.push(K.x),$.push(K.y),ie=this.serie1.data[B][R+1]>this.serie2.data[G][Z+1]);this.serie2.data[G][Z]<this.serie1.data[B][R];){if($.push(this.serie2.data[G][Z]),$.push(this.serie2.data[G][Z+1]),Z+=2,Z==this.serie2.data[G].length){ee=this.serie2.data[G][Z-2],G++,Z=0;break}K=this.computeCrossing(J[J.length-2],J[J.length-1],this.serie1.data[B][R],this.serie1.data[B][R+1],$[$.length-2],$[$.length-1],this.serie2.data[G][Z],this.serie2.data[G][Z+1]),K&&(J.push(K.x),J.push(K.y),$.push(K.x),$.push(K.y),F(),J.push(K.x),J.push(K.y),$.push(K.x),$.push(K.y),ie=this.serie1.data[B][R+1]>this.serie2.data[G][Z+1])}!1===ee?(J.push(this.serie1.data[B][R]),J.push(this.serie1.data[B][R+1])):(J.push(ee),J.push(this.interpolate(this.serie1,ee)),te=!1,R-=2,F())}if(ae){F();break}U=this.interpolate(this.serie2,J[J.length-2]),U&&($.push(J[J.length-2]),$.push(U)),F(),R=0,te=!1}var re=this.pathsPositive.reduce(O,'');this.positivePolyline.setPointsPx(re).redraw();var re=this.pathsNegative.reduce(O,'');this.negativePolyline.setPointsPx(re).redraw()}interpolate(F,O){var V=F.searchClosestValue(O);if(!V)return!1;if(void 0==V.xMax)return V.yMin;if(void 0==V.xMin)return V.yMax;var W=(O-V.xMin)/(V.xMax-V.xMin);return(1-W)*V.yMin+W*V.yMax}computeCrossing(F,O,V,W,B,R,G,Z){var U=(W-O)/(V-F),Q=(Z-R)/(G-B),K=W-U*V;if(F==V||B==G)return!1;if(U==Q)return{x:F,y1:O,y2:O};var J=(K-(Z-Q*G))/(Q-U);return J>V||J<F||J<B||J>G?!1:{x:J,y:U*J+K}}getPositivePolyline(){return this.positivePolyline}getNegativePolyline(){return this.negativePolyline}}E.default=I})},function(u,A,S){var P,C,T;(function(E,X){C=[A,S(1),S(9),S(11),S(3),S(14),S(23),S(40),S(10)],P=X,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X,Y,I,F,O,V,W,B){'use strict';function R(le){return le&&le.__esModule?le:{default:le}}Object.defineProperty(E,'__esModule',{value:!0});var G=R(X),Z=R(Y),U=R(I),Q=function(de){if(de&&de.__esModule)return de;var pe={};if(null!=de)for(var ue in de)Object.prototype.hasOwnProperty.call(de,ue)&&(pe[ue]=de[ue]);return pe.default=de,pe}(F),K=R(O),J=R(V),$=R(W);R(B);class ee extends K.default{constructor(){super(...arguments),this.subSeries=[]}setData(){return super.setData(...arguments),this.subSeries.map(le=>{le.data=this.data}),this}draw(){return this.eraseMarkers(),this}getSymbolForLegend(){return!!this.subSeries[0]&&this.subSeries[0].getSymbolForLegend()}getMarkerForLegend(){return!!this.subSeries[0]&&this.subSeries[0].getMarkerForLegend()}}class te extends J.default{constructor(){super(...arguments),this.subSeries=[]}setData(){return super.setData(...arguments),this.subSeries.map(le=>{le.data=this.data}),this}draw(){return this}getSymbolForLegend(){return!!this.subSeries[0]&&this.subSeries[0].getSymbolForLegend()}getMarkerForLegend(){return!!this.subSeries[0]&&this.subSeries[0].getMarkerForLegend()}}var ie=['constructor','init','draw','setLineColor','setLineWidth','setLineStyle','getLineColor','getLineWidth','getLineStyle','setMarkers','showMarkers','hideMarkers','getMarkerDom','getMarkerDomIndependant','getMarkerPath','eraseMarkers','_recalculateMarkerPoints'];Object.getOwnPropertyNames(K.default.prototype).concat([]).map(function(le){-1<ie.indexOf(le)||(ee.prototype[le]=function(de){return function(){var pe=arguments;this.subSeries.map(ue=>{ue[de](...pe)})}}(le))});class ae extends $.default{constructor(){super(...arguments),this.series=new Map}static defaults(){return{axes:{margins:{high:5,low:5}}}}init(le){this.graph=le}newXAxis(le){return newBottomAxis(le)}newYAxis(le){return newLeftAxis(le)}newTopAxis(le){return le=this.getOptions(le),new ne(this.graph,'top',le)}newBottomAxis(le){return le=this.getOptions(le),new ne(this.graph,'bottom',le)}newLeftAxis(le){return le=this.getOptions(le),new oe(this.graph,'left',le)}newRightAxis(le){return le=this.getOptions(le),new oe(this.graph,'right',le)}getOptions(le){var de={marginMin:this.options.axes.margins.low,marginMax:this.options.axes.margins.high};return Q.extend(!0,de,le)}preDraw(){var le,de;this.series.forEach(({serie:pe})=>{le=pe.getXAxis(),de=pe.getYAxis();let ue=1;for(le.splitNumber&&(ue*=le.splitNumber),de.splitNumber&&(ue*=de.splitNumber);pe.subSeries.length<ue;){const ge=pe.getName()+'_'+pe.subSeries.length,ce=this.graph.newSerie(ge,{},pe.getType()||G.default.SERIE_LINE);ce.excludedFromLegend=!0,ce.styles=pe.styles,ce.data=pe.data,pe.getType()==G.default.SERIE_LINE&&(ce.markerPoints=pe.markerPoints,ce.markerFamilies=pe.markerFamilies),pe.subSeries.push(ce)}for(;pe.subSeries.length>ue;){let ge=this.graph.getSerie(pe.getName()+'_'+(pe.subSeries.length-1));ge&&ge.kill&&ge.kill(),pe.subSeries.pop()}!pe.getXAxis().splitNumber&&pe.getXAxis().splitAxis&&pe.getXAxis().splitAxis(),!pe.getYAxis().splitNumber&&pe.getYAxis().splitAxis&&pe.getYAxis().splitAxis(),pe.subSeries.map((ge,ce)=>{var xe,he;if(pe.getXAxis().getSubAxis){let me=ce%(le.splitNumber||1);xe=pe.getXAxis().getSubAxis(me)}else xe=pe.getXAxis();if(ge.setXAxis(xe),pe.getYAxis().getSubAxis){let me=Math.floor(ce/(le.splitNumber||1));he=pe.getYAxis().getSubAxis(me)}else he=pe.getYAxis();ge.setYAxis(he),ge.draw(!0)})})}newSerie(le,de={},pe){switch(pe){case'line':return newLineSerie(le,de);break;case'scatter':return newScatterSerie(le,de);}throw'Cannot create a split serie of type '+pe}newLineSerie(le,de){var pe={type:'lineSerie',serie:new ee(le,de,'line')};return this.series.set(le,pe),pe.serie.init(this.graph,le,de),this.graph.series.push(pe.serie),pe.serie}newScatterSerie(le,de){var pe={type:'scatterSerie',serie:new te(le,de,'scatter')};return this.series.set(le,pe),pe.serie.init(this.graph,de),this.graph.series.push(pe.serie),pe.serie}}var re={splitMarks:!0},se=function(le){var de=class extends le{constructor(ue,ge,ce={}){super(ue,ge,ce),this.axes=[],this.position=ge,this.constructorOptions=Q.extend(!0,{},re,ce),this._splitVal=[]}all(ue){if('function'==typeof ue)return this.axes.map(ue),this}splitAxis(...ue){ue.push(1);let ge=ue.length;for(;this.axes.length>ge;)this.axes.pop().kill(!0,!0);for(;this.axes.length<ge;){let he=new(this.getConstructor())(this.graph,this.position,this.constructorOptions);this.axes.push(he),he.zoomLock=!0,he.init(this.graph,this.constructorOptions)}let ce=0,xe=0;for(let he of this.axes)he.options.marginMin=10,he.options.marginMax=10,0==xe&&(he.options.marginMin=0),xe==this.axes.length-1&&(he.options.marginMax=0),he.setSpan(ce,ce=ue[xe]),he.setMinMaxFlipped(),xe++;return this._splits=ue,this}fixGridIntervalBasedOnAxis(ue){return this.fixGridFor=ue,this.graph._axisHasChanged(),this}splitSpread(ue){return this.autoSpread=!!ue,this}hasAxis(ue){return-1<this.axes.indexOf(ue)}_splitSpread(){let ue=[],ge=0,ce=0;for(let xe of this._splitVal)ge+=xe[1]-xe[0];for(let xe of this._splitVal)ue.push(ce+=(xe[1]-xe[0])/ge);ue.pop(),this.splitAxis(...ue)}setChunkBoundaries(ue){let ge=0,ce,xe;for(let he of this.axes)Array.isArray(ue[ge])&&1<ue[ge].length&&!ce&&(ce=ue[ge][1]-ue[ge][0],xe=ge),1!=ue[ge].length&&Array.isArray(ue[ge])?he.forceMin(ue[ge][0]).forceMax(ue[ge][1]):(he._mean=ue[ge],Array.isArray(he._mean)&&(he._mean=he._mean[0])),ge++;return this._baseWidthVal=ce,this._baseWidthIndex=xe,this._splitVal=ue,this.graph._axisHasChanged(),this}setMinMaxToFitSeries(){(!this._splitVal||1>this._splitVal.length)&&(super.setMinMaxToFitSeries(...arguments),this._splitVal[0]=this._splitVal[0]||[],this._splitVal[this._splitVal.length-1]=this._splitVal[this._splitVal.length-1]||[],this._splitVal[0][0]=this.getCurrentMin(),this._splitVal[this._splitVal.length-1][1]=this.getCurrentMax(),this.setChunkBoundaries(this._splitVal))}draw(){this.autoSpread&&this._splitSpread();let ue=0,ge,ce,xe;if(0<=this._baseWidthIndex&&(ce=this.getSubAxis(this._baseWidthIndex))&&(xe=ce.getSpan()),ce=void 0,0<=this.fixGridFor&&(ce=this.getSubAxis(this.fixGridFor))){if(void 0!==ce._mean){let he=(ce.getSpan()[1]-ce.getSpan()[0])/(xe[1]-xe[0])*this._baseWidthVal;ce.forceMin(ce._mean-he/2),ce.forceMax(ce._mean+he/2)}ue=ce.draw(),ge=ce.getPrimaryTickUnit()}return this.axes.map(he=>{if(ce!==he){if(void 0!==he._mean){let me=(he.getSpan()[1]-he.getSpan()[0])/(xe[1]-xe[0])*this._baseWidthVal;he.forceMin(he._mean-me/2),he.forceMax(he._mean+me/2)}ge&&he.forcePrimaryTickUnit(ge),ue=Math.max(ue,he.draw())}}),this.writeUnit(),ue}setMinPx(ue){super.setMinPx(ue);for(let ge of this.axes)ge.setMinPx(ue)}setMaxPx(ue){super.setMaxPx(ue);for(let ge of this.axes)ge.setMaxPx(ue)}setShift(){super.setShift(...arguments);for(let ue of this.axes)ue.setShift(...arguments)}init(){super.init(...arguments),this.splitAxis()}getAxisPosition(){var ue=0;return this.axes.map(ge=>{ue=Math.max(ue,ge.getAxisPosition())}),ue}getSubAxis(ue){if(this.axes.length<=ue)throw'Impossible to reach axis. Index '+ue+' is out of range';return this.axes[ue]}get splitNumber(){return this._splits.length}};return['turnGridsOff','turnGridsOn','gridsOff','gridsOn','setEngineering','setScientificScaleExponent','setScientific','setLabelColor','setSecondaryGridDasharray','setPrimaryGridDasharray','setSecondaryGridsOpacity','setPrimaryGridOpacity','setSecondaryGridWidth','setPrimaryGridWidth','setSecondaryGridColor','setPrimaryGridColor','setTicksLabelColor','setSecondaryTicksColor','setPrimaryTicksColor','setAxisColor','secondaryGridOn','secondaryGridOff','primaryGridOff','primaryGridOn','setSecondaryGrid','setPrimaryGrid','setGrids','setTickPosition','setExponentialFactor','setExponentialLabelFactor','setGridLinesStyle','forcePrimaryTickUnitMin','forcePrimaryTickUnitMax','forcePrimaryTickUnit','flip','show','hide','setDisplay'].map(pe=>{de.prototype[pe]=function(ue){return function(){return this.axes.map(ge=>{ge[ue](...arguments)}),this}}(pe)}),de};class ne extends se(Z.default){constructor(le,de){super(...arguments),this.topbottom=de}getConstructor(){return Z.default}getAxisPosition(){var le=super.getAxisPosition(...arguments);return this.labelPosY=le,this.getLabel()&&(le+=this.graph.options.fontSize),le}drawLabel(){super.drawLabel(),this.label.setAttribute('y',(this.top?-1:1)*(this.graph.options.fontSize+this.labelPosY))}draw(){var le=super.draw(...arguments);return this.drawLabel(),le}}class oe extends se(U.default){constructor(){super(...arguments)}getConstructor(){return U.default}drawLabel(){super.drawLabel()}equalizePosition(le){var de=le;if(this.getLabel()&&this.axes.map(pe=>{de=Math.max(pe.equalizePosition(le),de)}),this.getLabel())return this.placeLabel(this.left?-de:de),de+this.graph.options.fontSize}}Q.mix(ne,new Z.default),Q.mix(oe,new U.default),E.default=ae})},function(u,A,S){var P,C,T;(function(E,X){C=[A,S(33)],P=X,T='function'==typeof P?P.apply(A,C):P,!(T!==void 0&&(u.exports=T));var Y})(this,function(E,X){'use strict';Object.defineProperty(E,'__esModule',{value:!0});var Y=function(O){return O&&O.__esModule?O:{default:O}}(X);class I extends Y.default{constructor(F){super(F)}createDom(){this._dom=document.createElementNS(this.graph.ns,'line'),this._dom.setAttribute('marker-end','url(#arrow'+this.graph._creation+')'),this.createHandles(this.nbHandles,'rect',{transform:'translate(-3 -3)',width:6,height:6,stroke:'black',fill:'white',cursor:'nwse-resize'}),this.setStrokeColor('black'),this.setStrokeWidth(1)}}E.default=I})}])});;
//# sourceMappingURL=jsgraph-es6.min.js.map
