(function(A,S){'object'==typeof exports&&'object'==typeof module?module.exports=S():'function'==typeof define&&define.amd?define([],S):'object'==typeof exports?exports.Graph=S():A.Graph=S()})(this,function(){return function(u){function A(C){if(S[C])return S[C].exports;var P=S[C]={exports:{},id:C,loaded:!1};return u[C].call(P.exports,P,P.exports,A),P.loaded=!0,P.exports}var S={};return A.m=u,A.c=S,A.p='',A(0)}([function(u,A,S){var C,P,E;(function(T,X){P=[u,A,S(1),S(2),S(8),S(9),S(11),S(12),S(13),S(14),S(17),S(19),S(20),S(21),S(22),S(23),S(24),S(25),S(26),S(27),S(28),S(49),S(29),S(30),S(31),S(32),S(33),S(34),S(35),S(36),S(37),S(38),S(39),S(40),S(41),S(42),S(43),S(44),S(46),S(47),S(48),S(5),S(6)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y,I,B,O,F,W,V,R,U,G,Z,K,Q,J,$,ee,te,re,ie,ae,se,ne,oe,le,pe,de,ge,ue,he,ce,xe,me,fe,ye,be,Ae,Me,Se,ke,_e,ve){'use strict';function Ce(xt){return xt&&xt.__esModule?xt:{default:xt}}Object.defineProperty(X,'__esModule',{value:!0});var Pe=Ce(Y),we=Ce(I),Le=Ce(B),Ee=Ce(O),Te=Ce(F),Xe=Ce(W),Ye=Ce(V),De=Ce(R),Ie=Ce(U),je=Ce(G),Ne=Ce(Z),Be=Ce(K),Oe=Ce(Q),He=Ce(J),Fe=Ce($),ze=Ce(ee),We=Ce(te),Ve=Ce(re),Re=Ce(ie),Ue=Ce(ae),Ge=Ce(se),Ze=Ce(ne),qe=Ce(oe),Ke=Ce(le),Qe=Ce(pe),Je=Ce(de),$e=Ce(ge),et=Ce(ue),tt=Ce(he),rt=Ce(ce),it=Ce(xe),at=Ce(me),st=Ce(fe),nt=Ce(ye),ot=Ce(be),lt=Ce(Ae),pt=Ce(Me),gt=Ce(Se),ut=Ce(ke),ht=Ce(_e),ct=Ce(ve);Pe.default.registerConstructor('graph.position',we.default),Pe.default.registerConstructor('graph.axis.x',Ee.default),Pe.default.registerConstructor('graph.axis.y',Te.default),Pe.default.registerConstructor('graph.axis.x.bar',Xe.default),Pe.default.registerConstructor('graph.axis.x.time',Ye.default),Pe.default.registerConstructor('graph.serie.line',De.default),Pe.default.registerConstructor('graph.serie.line.3d',Ie.default),Pe.default.registerConstructor('graph.serie.line.color',Be.default),Pe.default.registerConstructor('graph.serie.contour',We.default),Pe.default.registerConstructor('graph.serie.bar',je.default),Pe.default.registerConstructor('graph.serie.box',Ne.default),Pe.default.registerConstructor('graph.serie.scatter',Oe.default),Pe.default.registerConstructor('graph.serie.zone',He.default),Pe.default.registerConstructor('graph.serie.zone.3d',Fe.default),Pe.default.registerConstructor('graph.serie.densitymap',ze.default),Pe.default.registerConstructor(Pe.default.SERIE_LINE,De.default),Pe.default.registerConstructor(Pe.default.SERIE_LINE_3D,Ie.default),Pe.default.registerConstructor(Pe.default.SERIE_LINE_COLORED,Be.default),Pe.default.registerConstructor(Pe.default.SERIE_CONTOUR,We.default),Pe.default.registerConstructor(Pe.default.SERIE_BAR,je.default),Pe.default.registerConstructor(Pe.default.SERIE_BOX,Ne.default),Pe.default.registerConstructor(Pe.default.SERIE_SCATTER,Oe.default),Pe.default.registerConstructor(Pe.default.SERIE_ZONE,He.default),Pe.default.registerConstructor(Pe.default.SERIE_ZONE_3D,Fe.default),Pe.default.registerConstructor(Pe.default.SERIE_DENSITYMAP,ze.default),Pe.default.registerConstructor('graph.plugin.shape',st.default),Pe.default.registerConstructor('graph.plugin.drag',at.default),Pe.default.registerConstructor('graph.plugin.zoom',ot.default),Pe.default.registerConstructor('graph.plugin.selectScatter',nt.default),Pe.default.registerConstructor('graph.plugin.timeSerieManager',lt.default),Pe.default.registerConstructor('graph.plugin.serielinedifference',pt.default),Pe.default.registerConstructor('graph.plugin.serieLineDifference',pt.default),Pe.default.registerConstructor('graph.plugin.axissplitting',gt.default),Pe.default.registerConstructor('graph.plugin.makeTracesDifferent',ut.default),Pe.default.registerConstructor('graph.shape',Ve.default),Pe.default.registerConstructor('graph.shape.areaundercurve',Re.default),Pe.default.registerConstructor('graph.shape.arrow',Ue.default),Pe.default.registerConstructor('graph.shape.ellipse',Ge.default),Pe.default.registerConstructor('graph.shape.label',Ze.default),Pe.default.registerConstructor('graph.shape.polyline',qe.default),Pe.default.registerConstructor('graph.shape.line',Ke.default),Pe.default.registerConstructor('graph.shape.nmrintegral',Qe.default),Pe.default.registerConstructor('graph.shape.html',rt.default),Pe.default.registerConstructor('graph.shape.peakintegration2d',Je.default),Pe.default.registerConstructor('graph.shape.rect',$e.default),Pe.default.registerConstructor('graph.shape.rectangle',$e.default),Pe.default.registerConstructor('graph.shape.cross',et.default),Pe.default.registerConstructor('graph.shape.peakboundariescenter',tt.default),Pe.default.registerConstructor('graph.legend',Le.default),Pe.default.registerConstructor('graph.waveform',ht.default),X.default=Pe.default,T.exports=X['default']})},function(u,A,S){var C,P,E;(function(T,X){P=[u,A,S(2),S(3),S(4),S(5)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y,I,B,O){'use strict';function W(Se){return Se&&Se.__esModule?Se:{default:Se}}function V(Se,ke,_e,ve){var Ce=Se.getConstructor(ve,!0);if(Ce||'string'!=typeof ve||(Ce=Se.getConstructor('graph.serie.'+ve,!0)),Ce){var Pe=new Ce(Se,ke,_e);Se.appendSerieToDom(Pe)}else return ue.throwError('No constructor exists for the serie type provided. Use Graph.registerConstructor( name, constructor ) first is you use your own series');return Pe}function R(Se,ke){for(var _e=0,ve=ke.length,Ce;_e<ve;_e++){Ce=!0;for(var Pe=0,we=ke[_e].length;Pe<we;Pe++)Se[0]<ke[_e][Pe][0]&&Se[1]<ke[_e][Pe][0]||Se[0]>ke[_e][Pe][1]&&Se[1]>ke[_e][Pe][1]||(Ce=!1);if(Ce)return ke[_e].push(Se),_e}return ke.push([Se]),ke.length-1}function U(Se){var Ee={top:[],bottom:[],left:[],right:[]},Te={top:[],bottom:[],left:[],right:[]};Se._painted=!0,Se._applyToAxes(function(Ne,Be){if(!(Ne.disabled||Ne.floating)){var Oe=R(Ne.getSpan(),Te[Be]);Ne.setLevel(Oe),Ee[Be][Oe]=Math.max(Ne.getAxisPosition(),Ee[Be][Oe]||0)}},!1,!0,!1);var Xe=Ee.top.reduce(function(Ne,Be){return Ne+Be},0),Ye=Ee.bottom.reduce(function(Ne,Be){return Ne+Be},0);[Ee.top,Ee.bottom].map(function(Ne){Ne.reduce(function(Be,Oe,He){return Ne[He]=Be+Oe,Be+Oe},0)}),Se._applyToAxes(function(Ne,Be){Ne.disabled||Ne.floating||Ne.setShift(Ee[Be][Ne.getLevel()])},!1,!0,!1),Se._applyToAxes(function(Ne,Be){if(!Ne.disabled&&(Ne.setMinPx(Xe),Ne.setMaxPx(Se.getDrawingHeight(!0)-Ye),!Ne.floating)){let Oe=Ne.linkedToAxis?0:Ne.draw();var He=R(Ne.getSpan(),Te[Be]);Ne.setLevel(He),Ee[Be][He]=Math.max(Oe,Ee[Be][He]||0)}},!1,!1,!0);var De=ue.extend(!0,{},Ee);Se._applyToAxes(function(Ne,Be){Ne.disabled||Ne.floating||(De[Be][Ne.getLevel()]=Math.max(Ee[Be][Ne.getLevel()],Ne.equalizePosition(Ee[Be][Ne.getLevel()])))},!1,!1,!0),Ee=De;var Ie=Ee.left.reduce(function(Ne,Be){return Ne+Be},0),je=Ee.right.reduce(function(Ne,Be){return Ne+Be},0);[Ee.left,Ee.right].map(function(Ne){Ne.reduce(function(Be,Oe,He){return Ne[He]=Be+Oe,Be+Oe},0)}),Se._applyToAxes((Ne,Be)=>{Ne.disabled||Ne.floating||Ne.setShift(Ee[Be][Ne.getLevel()])},!1,!1,!0),Se._applyToAxes(function(Ne){Ne.disabled||(Ne.setMinPx(Ie),Ne.setMaxPx(Se.getDrawingWidth(!0)-je),Ne.floating||!Ne.linkedToAxis&&Ne.draw())},!1,!0,!1),Se._applyToAxes(function(Ne){if(Ne.floating){var Be=Ne.getFloatingAxis(),Oe=Ne.getFloatingValue(),He=Be.getPx(Oe);Ne.setShift(He),Ne.linkedToAxis||Ne.draw()}},!1,!0,!0),ne(Se,'right',Se.getDrawingWidth(!0),Se.getDrawingWidth(!0),Xe,Se.getDrawingHeight(!0)-Ye),ne(Se,'left',0,0,Xe,Se.getDrawingHeight(!0)-Ye),ne(Se,'top',Ie,Se.getDrawingWidth(!0)-je,0,0),ne(Se,'bottom',Ie,Se.getDrawingWidth(!0)-je,Se.getDrawingHeight(!0)-Ye,Se.getDrawingHeight(!0)-Ye),Se.clipRect.setAttribute('y',Xe),Se.clipRect.setAttribute('x',Ie),Se.clipRect.setAttribute('width',Se.getDrawingWidth()-Ie-je),Se.clipRect.setAttribute('height',Se.getDrawingHeight()-Xe-Ye),Se.rectEvent.setAttribute('y',Xe+Se.getPaddingTop()),Se.rectEvent.setAttribute('x',Ie+Se.getPaddingLeft()),Se.drawingSpaceWidth=Se.getDrawingWidth()-Ie-je,Se.drawingSpaceHeight=Se.getDrawingHeight()-Xe-Ye,Se.rectEvent.setAttribute('width',Se.drawingSpaceWidth),Se.rectEvent.setAttribute('height',Se.drawingSpaceHeight),Se.drawingSpaceMinX=Ie+Se.getPaddingLeft(),Se.drawingSpaceMinY=Xe+Se.getPaddingTop(),Se.drawingSpaceMaxX=Se.getDrawingWidth()-je+Se.getPaddingLeft(),Se.drawingSpaceMaxY=Se.getDrawingHeight()-Ye+Se.getPaddingTop(),Se.shift=Ee,Se.redrawShapes()}function G(Se,ke,_e){return Se.forcedPlugin?(Se.activePlugin=Se.forcedPlugin,void Se._pluginExecute(Se.activePlugin,_e,[Se,e])):void Z(Se,ke,[Se,ke],_e)}function Z(Se,ke,_e,ve){var Ce=Se.options.keyActions,Pe,we;for(Pe=0,we=Ce.length;Pe<we;Pe++){if(Ce[Pe].plugin){if(Se.forcedPlugin==Ce[Pe].plugin||Se.isActionAllowed(ke,Ce[Pe]))return Ce[Pe].options&&_e.push(Ce[Pe].options),Se.activePlugin=Ce[Pe].plugin,Se._pluginExecute(Ce[Pe].plugin,ve,_e),ke.preventDefault(),ke.stopPropagation(),!0;}else if(Ce[Pe].callback&&Se.isActionAllowed(ke,Ce[Pe]))return Ce[Pe].options&&_e.push(Ce[Pe].options),ke.preventDefault(),ke.stopPropagation(),Ce[Pe].callback.apply(Se,_e),!0;Ce[Pe].removeSelectedShape&&Se.isActionAllowed(ke,Ce[Pe])&&(ke.preventDefault(),ke.stopPropagation(),Se.selectedShapes.map(Le=>{Le.kill()}))}return!1}function K(){this.dom=document.createElementNS(ye.ns,'svg'),this.dom.setAttributeNS('http://www.w3.org/2000/xmlns/','xmlns:xlink','http://www.w3.org/1999/xlink'),ue.setAttributeTo(this.dom,{xmlns:ye.ns,'font-family':this.options.fontFamily,'font-size':this.options.fontSize,'data-jsgraph-version':xe}),this.defs=document.createElementNS(ye.ns,'defs'),this.dom.appendChild(this.defs),this.groupEvent=document.createElementNS(ye.ns,'g'),this.rectEvent=document.createElementNS(ye.ns,'rect'),ue.setAttributeTo(this.rectEvent,{'pointer-events':'fill',fill:'transparent'}),this.groupEvent.appendChild(this.rectEvent),this.dom.appendChild(this.groupEvent),this.domTitle=document.createElementNS(ye.ns,'text'),this.setTitle(this.options.title),ue.setAttributeTo(this.domTitle,{'text-anchor':'middle',y:20}),this.groupEvent.appendChild(this.domTitle),this.graphingZone=document.createElementNS(ye.ns,'g'),this.updateGraphingZone(),this.groupEvent.appendChild(this.graphingZone),this.axisGroup=document.createElementNS(ye.ns,'g'),this.graphingZone.appendChild(this.axisGroup),this.groupGrids=document.createElementNS(ye.ns,'g'),this.groupPrimaryGrids=document.createElementNS(ye.ns,'g'),this.groupSecondaryGrids=document.createElementNS(ye.ns,'g'),this.axisGroup.appendChild(this.groupGrids),this.groupGrids.appendChild(this.groupSecondaryGrids),this.groupGrids.appendChild(this.groupPrimaryGrids),this.plotGroup=document.createElementNS(ye.ns,'g'),this.graphingZone.appendChild(this.plotGroup),this.layers=[],this._makeClosingLines(),this.clip=document.createElementNS(ye.ns,'clipPath'),this.clip.setAttribute('id','_clipplot'+this._creation),this.defs.appendChild(this.clip),this.clipRect=document.createElementNS(ye.ns,'rect'),this.clip.appendChild(this.clipRect),this.clip.setAttribute('clipPathUnits','userSpaceOnUse'),this.markerArrow=document.createElementNS(this.ns,'marker'),this.markerArrow.setAttribute('viewBox','0 0 10 10'),this.markerArrow.setAttribute('id','arrow'+this._creation),this.markerArrow.setAttribute('refX','6'),this.markerArrow.setAttribute('refY','5'),this.markerArrow.setAttribute('markerUnits','strokeWidth'),this.markerArrow.setAttribute('markerWidth','8'),this.markerArrow.setAttribute('markerHeight','6'),this.markerArrow.setAttribute('orient','auto');var Se=document.createElementNS(ye.ns,'path');Se.setAttribute('d','M 0 0 L 10 5 L 0 10 z'),this.markerArrow.appendChild(Se),this.defs.appendChild(this.markerArrow),this.markerHorizontalSplit=document.createElementNS(ye.ns,'marker'),this.markerHorizontalSplit.setAttribute('viewBox','0 0 6 8'),this.markerHorizontalSplit.setAttribute('id','horionzalsplit_'+this.getId()),this.markerHorizontalSplit.setAttribute('refX','3'),this.markerHorizontalSplit.setAttribute('refY','4'),this.markerHorizontalSplit.setAttribute('markerUnits','strokeWidth'),this.markerHorizontalSplit.setAttribute('markerWidth','6'),this.markerHorizontalSplit.setAttribute('markerHeight','8');var ke=document.createElementNS(ye.ns,'line');ke.setAttribute('x1','0'),ke.setAttribute('y1','8'),ke.setAttribute('x2','6'),ke.setAttribute('y2','0'),ke.setAttribute('stroke','black'),this.markerHorizontalSplit.appendChild(ke),this.defs.appendChild(this.markerHorizontalSplit),this.markerVerticalSplit=document.createElementNS(ye.ns,'marker'),this.markerVerticalSplit.setAttribute('viewBox','0 0 8 6'),this.markerVerticalSplit.setAttribute('id','verticalsplit_'+this.getId()),this.markerVerticalSplit.setAttribute('refX','4'),this.markerVerticalSplit.setAttribute('refY','3'),this.markerVerticalSplit.setAttribute('markerUnits','strokeWidth'),this.markerVerticalSplit.setAttribute('markerWidth','8'),this.markerVerticalSplit.setAttribute('markerHeight','6');var ke=document.createElementNS(ye.ns,'line');ke.setAttribute('x1','0'),ke.setAttribute('y1','0'),ke.setAttribute('x2','8'),ke.setAttribute('y2','6'),ke.setAttribute('stroke','black'),this.markerVerticalSplit.appendChild(ke),this.defs.appendChild(this.markerVerticalSplit),this.vertLineArrow=document.createElementNS(ye.ns,'marker'),this.vertLineArrow.setAttribute('viewBox','0 0 10 10'),this.vertLineArrow.setAttribute('id','verticalline'+this._creation),this.vertLineArrow.setAttribute('refX','0'),this.vertLineArrow.setAttribute('refY','5'),this.vertLineArrow.setAttribute('markerUnits','strokeWidth'),this.vertLineArrow.setAttribute('markerWidth','20'),this.vertLineArrow.setAttribute('markerHeight','10'),this.vertLineArrow.setAttribute('orient','auto'),this.vertLineArrow.setAttribute('stroke-width','1px');var _e=document.createElementNS(ye.ns,'path');_e.setAttribute('d','M 0 -10 L 0 10'),_e.setAttribute('stroke','black'),this.vertLineArrow.appendChild(_e),this.defs.appendChild(this.vertLineArrow),this.bypassHandleMouse=!1}function Q(Se){if(!Se.wrapper)throw'No wrapper exists. Cannot register the events.';Se.wrapper.addEventListener('keydown',_e=>{G(Se,_e,'keydown')}),Se.wrapper.addEventListener('keypress',_e=>{G(Se,_e,'keypress')}),Se.wrapper.addEventListener('keyup',_e=>{G(Se,_e,'keyup')}),Se.dom.addEventListener('mousemove',function(_e){var ve=Se._getXY(_e);$(Se,ve.x,ve.y,_e)}),Se.dom.addEventListener('mouseleave',function(){le(Se)}),Se.groupEvent.addEventListener('mousedown',function(_e){if(Se.focus(),!(3==_e.which||_e.ctrlKey)){var ve=Se._getXY(_e);J(Se,ve.x,ve.y,_e)}}),Se.dom.addEventListener('mouseup',function(_e){Se.emit('mouseUp',_e);var ve=Se._getXY(_e);_e.stopPropagation(),ie(Se,ve.x,ve.y,_e)}),Se.dom.addEventListener('dblclick',function(_e){Se.emit('dblClick',_e);var ve=Se._getXY(_e);re(Se,ve.x,ve.y,_e)}),Se.groupEvent.addEventListener('click',function(_e){if(!(3==_e.which||_e.ctrlKey)){var ve=Se._getXY(_e);Se.prevent(!1)||ae(Se,ve.x,ve.y,_e)}}),Se.groupEvent.addEventListener('mousewheel',function(_e){var ve=_e.wheelDeltaY||_e.wheelDelta||-_e.deltaY;return oe(Se,ve,_e),!1}),Se.groupEvent.addEventListener('wheel',function(_e){var ve=_e.wheelDeltaY||_e.wheelDelta||-_e.deltaY;return oe(Se,ve,_e),!1})}function J(Se,ke,_e,ve){return Se.forcedPlugin?(Se.activePlugin=Se.forcedPlugin,void Se._pluginExecute(Se.activePlugin,'onMouseDown',[Se,ke,_e,ve])):void ee(Se,ve,[Se,ke,_e,ve],'onMouseDown')}function $(Se,ke,_e,ve){if(Se.bypassHandleMouse)return void Se.bypassHandleMouse.handleMouseMove(ve);if(!(Se.activePlugin&&Se._pluginExecute(Se.activePlugin,'onMouseMove',[Se,ke,_e,ve]))){if(Se._applyToAxes('handleMouseMove',[ke-Se.options.paddingLeft,ve],!0,!1),Se._applyToAxes('handleMouseMove',[_e-Se.options.paddingTop,ve],!1,!0),!Se.activePlugin){var Ce;if(Se.options.trackingLine&&Se.options.trackingLine.enable&&Se.options.trackingLine.snapToSerie&&'common'==Se.options.trackingLine.mode){var Pe=Se.options.trackingLine.snapToSerie;if(Ce=Pe.handleMouseMove(!1,!0),this.trackingObject)if(!Ce)Se.trackingObject.hide();else{Se.trackingObject.show(),Se.trackingObject.getPosition(0).x=Ce.xClosest,Se.trackingObject.getPosition(1).x=Ce.xClosest,Se.trackingObject.redraw();var ke=Pe.getXAxis().getPx(Ce.xClosest)+Se.options.paddingLeft}var we=Se.options.trackingLine.series;we||(we=Se.getSeries().map(function(Te){return{serie:Te,withinPx:20,withinVal:-1}})),Se._trackingLegend=be(Se,we,ke,_e,Se._trackingLegend,Se.options.trackingLine.textMethod,Ce.xClosest)}}if(Se.options.onMouseMoveData){for(var Le={},Ee=0;Ee<Se.series.length;Ee++)Le[Se.series[Ee].getName()]=Se.series[Ee].handleMouseMove(!1,!0);Se.options.onMouseMoveData.call(Se,ve,Le)}ee(Se,ve,[Se,ke,_e,ve],'onMouseMove')}}function ee(Se,ke,_e,ve){var Ce=Se.options.mouseActions,Le=!1,Pe,we;for(Pe=0,we=Ce.length;Pe<we;Pe++)if(Ce[Pe].plugin){if(Se.forcedPlugin==Ce[Pe].plugin||Se.isActionAllowed(ke,Ce[Pe])){Ce[Pe].options&&_e.push(Ce[Pe].options),Se.activePlugin=Ce[Pe].plugin,Se._pluginExecute(Ce[Pe].plugin,ve,_e),Le=!0;continue}}else if(Ce[Pe].callback&&Se.isActionAllowed(ke,Ce[Pe])){Ce[Pe].options&&_e.push(Ce[Pe].options),Ce[Pe].callback.apply(Se,_e),Le=!0;continue}else if(Ce[Pe].series){var Ee;'all'===Ce[Pe].series&&(Ee=Se.series),Array.isArray(Ce[Pe].series)||(Ee=[Ee]),Ce[Pe].options&&_e.push(Ce[Pe].options);for(;0<Ee.length;Pe++)Se._serieExecute(Ee[Pe],ve,_e);Le=!0;continue}return Le}function te(Se){var ke=document.createElement('div');return ke.setAttribute('class','trackingLegend'),ke.style.position='absolute',ke.style.borderRadius='4px',ke.style.boxShadow='1px 1px 3px 0px rgba(100,100,100,0.6)',ke.style.border='2px solid #333333',ke.style.backgroundColor='rgba(255, 255, 255, 0.5 )',ke.style.pointerEvents='none',ke.style.paddingTop='5px',ke.style.paddingBottom='5px',ke.style.paddingLeft='10px',ke.style.paddingRight='10px',Se.getWrapper().insertBefore(ke,Se.getDom()),ke}function re(Se,ke,_e,ve){Se.options.dblclick;ee(Se,ve,[ke,_e,ve],'onDblClick')}function ie(Se,ke,_e,ve){return Se.bypassHandleMouse?(Se.bypassHandleMouse.handleMouseUp(ve),void(Se.activePlugin=!1)):void(Se._pluginExecute(Se.activePlugin,'onMouseUp',[Se,ke,_e,ve]),Se.activePlugin=!1)}function ae(Se,ke,_e,ve){Se.emit('click',[Se,ke,_e,ve]),ee(Se,ve,[ke,_e,ve],'onClick'),ve.target.jsGraphIsShape||Se.prevent(!1)||!Se.options.shapesUnselectOnClick||Se.unselectShapes()}function se(Se,ke,_e,ve){var _e=_e||{},Pe={def:{x:Se.getConstructor('graph.axis.x'),y:Se.getConstructor('graph.axis.y')},time:{x:Se.getConstructor('graph.axis.x.time')},bar:{x:Se.getConstructor('graph.axis.x.bar')}},Ce;switch(_e.type){case'time':var we=Pe.time;break;case'bar':var we=Pe.bar;break;case'broken':var we=Pe.broken;break;default:var we=Pe.def;}return'top'===ve||'bottom'===ve?Ce=we.x:'left'===ve||'right'===ve?Ce=we.y:void 0,ke=ke||0,'object'==typeof ke&&(_e=ke,ke=0),Se.axis[ve][ke]||(Se.axis[ve][ke]=new Ce(Se,ve,_e),Se.axis[ve][ke].init(Se,_e)),Se.axis[ve][ke]}function ne(Se,ke,_e,ve,Ce,Pe){if(!1!==Se.options.close){var we=0;Se.axis[ke].map(function(Le){Le.isDisplayed()&&!Le.floating&&we++}),(!0===Se.options.close||Se.options.close[ke])&&0==we?(Se.closingLines[ke].setAttribute('display','block'),Se.closingLines[ke].setAttribute('x1',_e),Se.closingLines[ke].setAttribute('x2',ve),Se.closingLines[ke].setAttribute('y1',Ce),Se.closingLines[ke].setAttribute('y2',Pe)):Se.closingLines[ke].setAttribute('display','none')}}function oe(Se,ke,_e){ee(Se,_e,[ke,_e],'onMouseWheel')&&(_e.preventDefault(),_e.stopPropagation())}function le(Se){Se.options.handleMouseLeave&&Se.options.handleMouseLeave.call(Se)}function pe(Se){var ke=Se._axesHaveChanged;return Se._axesHaveChanged=!1,ke}function de(Se){var ke=Se._sizeChanged;return Se._sizeChanged=!1,ke}Object.defineProperty(X,'__esModule',{value:!0});var ge=W(Y),ue=function(Se){if(Se&&Se.__esModule)return Se;var ke={};if(null!=Se)for(var _e in Se)Object.prototype.hasOwnProperty.call(Se,_e)&&(ke[_e]=Se[_e]);return ke.default=Se,ke}(I),he=W(B),ce=W(O);if(!xe)var xe='head';const me={title:'',paddingTop:30,paddingBottom:5,paddingLeft:20,paddingRight:20,close:{left:!0,right:!0,top:!0,bottom:!0},closeColor:'black',fontSize:12,fontFamily:'Myriad Pro, Helvetica, Arial',plugins:{},pluginAction:{},mouseActions:[],keyActions:[],wheel:{},dblclick:{},shapesUnselectOnClick:!0,shapesUniqueSelection:!0};var fe=new Map;class ye extends he.default{constructor(Se,ke,_e){for(var ve in super(),console.log('new'),this._creation=ue.guid(),this._drawn=!1,Se!==Object(Se)||Se instanceof HTMLElement?'string'==typeof Se?Se=document.getElementById(Se):'number'==typeof Se.length&&(Se=Se[0]):(_e=ke,ke=Se,Se=null),this.options=ue.extend({},me,ke),K.bind(this)(),Se&&this.setWrapper(Se),this.prevented=!1,this.axis={left:[],top:[],bottom:[],right:[]},this.shapes=[],this.shapesLocked=!1,this.plugins={},this.options.pluginAction)this.options.pluginAction.plugin=ve,this.options.mouseActions.push(this.options.pluginAction);if(this.selectedShapes=[],this.series=[],this._axesHaveChanged=!0,this.options.hasOwnProperty('padding')&&ue.isNumeric(this.options.padding)&&(this.options.paddingTop=this.options.paddingBottom=this.options.paddingLeft=this.options.paddingRight=this.options.padding),this.currentAction=!1,this.ns=ye.ns,this.nsxlink=ye.nsxlink,_e)for(var ve in _e)for(var Ce=0,Pe=_e[ve].length;Ce<Pe;Ce++)'top'==ve?this.getTopAxis(Ce,_e[ve][Ce]):'bottom'==ve?this.getBottomAxis(Ce,_e[ve][Ce]):'left'==ve?this.getLeftAxis(Ce,_e[ve][Ce]):'right'==ve?this.getRightAxis(Ce,_e[ve][Ce]):void 0;this._pluginsInit()}setWrapper(Se){if(!Se)throw'The wrapper DOM element was not found.';if(!Se.appendChild)throw'The wrapper appears to be an invalid HTMLElement';if(Se.style['-webkit-user-select']='none',Se.style['-moz-user-select']='none',Se.style['-o-user-select']='none',Se.style['-ms-user-select']='none',Se.style['user-select']='none',Se.style.position='relative',Se.style.outline='none',Se.setAttribute('tabindex',1),this.wrapper=Se,!this.height||!this.width){var ke=getComputedStyle(Se),_e=parseInt(ke.width),ve=parseInt(ke.height);this.setSize(_e,ve),this._resize()}Se.appendChild(this.dom),Q(this)}getDom(){return this.dom}getId(){return this._creation}getWrapper(){return this.wrapper}setOption(Se,ke){return this.options[Se]=ke,this}setTitle(Se){this.options.title=Se,this.domTitle.textContent=Se}displayTitle(){this.domTitle.setAttribute('display','inline')}hideTitle(){this.domTitle.setAttribute('display','none')}hide(){'none'!==this.dom.style.display&&(this.dom.style.display='none')}show(){'none'==this.dom.style.display&&(this.dom.style.display='initial')}redraw(Se){if(this.width&&this.height)return this.sizeSet?!Se||pe(this)||de(this)?(this.executeRedrawSlaves(),U(this),!0):(this.executeRedrawSlaves(!0),!1):(this._resize(),this.executeRedrawSlaves(),!0)}executeRedrawSlaves(){this._pluginsExecute('preDraw')}draw(Se){this.drawn=!0,this.updateLegend(!0),this.drawSeries(this.redraw(!Se))}delayUpdate(){return this._lockUpdate=!0,this}doUpdate(){return this.legend&&this.legend.update(),this.draw(),this.legend&&this.legend.update(),this}resumeUpdate(){return this._lockUpdate=!1,this}isDelayedUpdate(){return this._lockUpdate}setWidth(Se,ke){this.width=Se,ke||this._resize()}setHeight(Se,ke){this.height=Se,ke||this._resize()}resize(Se,ke){return Se&&ke&&this.setSize(Se,ke),this._resize(),this}setSize(Se,ke){this.setWidth(Se,!0),this.setHeight(ke,!0),this.getDrawingHeight(),this.getDrawingWidth()}getWidth(){return this.width}getHeight(){return this.height}getPaddingTop(){return this.options.paddingTop}getPaddingLeft(){return this.options.paddingLeft}getPaddingBottom(){return this.options.paddingBottom}getPaddingRight(){return this.options.paddingRight}getDrawingHeight(Se){return Se&&this.innerHeight?this.innerHeight:this.innerHeight=this.height-this.options.paddingTop-this.options.paddingBottom}getDrawingWidth(Se){return Se&&this.innerWidth?this.innerWidth:this.innerWidth=this.width-this.options.paddingLeft-this.options.paddingRight}cacheOffset(){this.offsetCached=ue.getOffset(this.wrapper)}uncacheOffset(){this.offsetCached=!1}getXAxis(Se,ke){return 0<this.axis.top.length&&0==this.axis.bottom.length?this.getTopAxis(Se,ke):this.getBottomAxis(Se,ke)}getYAxis(Se,ke){return 0<this.axis.right.length&&0==this.axis.left.length?this.getRightAxis(Se,ke):this.getLeftAxis(Se,ke)}getTopAxis(Se,ke){return se(this,Se,ke,'top')}getBottomAxis(Se,ke){return se(this,Se,ke,'bottom')}getLeftAxis(Se,ke){return se(this,Se,ke,'left')}getRightAxis(Se,ke){return se(this,Se,ke,'right')}setXAxis(Se,ke){this.setBottomAxis(Se,ke)}setYAxis(Se,ke){this.setLeftAxis(Se,ke)}setLeftAxis(Se,ke){ke=ke||0,this.axis.left[ke]&&this.axis.left[ke].kill(),this.axis.left[ke]=Se}setRightAxis(Se,ke){ke=ke||0,this.axis.right[ke]&&this.axis.right[ke].kill(),this.axis.right[ke]=Se}setTopAxis(Se,ke){ke=ke||0,this.axis.top[ke]&&this.axis.top[ke].kill(),this.axis.top[ke]=Se}setBottomAxis(Se,ke){ke=ke||0,this.axis.bottom[ke]&&this.axis.bottom[ke].kill(),this.axis.bottom[ke]=Se}killAxis(Se,ke=!1,_e=!1){var ve;Se.isX()&&(-1<(ve=this.axis.bottom.indexOf(Se))&&this.axis.bottom.splice(ve,1),-1<(ve=this.axis.top.indexOf(Se))&&this.axis.top.splice(ve,1),!_e&&this.series.map(Ce=>{Ce.getXAxis()==Se&&Ce.kill()})),Se.isY()&&(-1<(ve=this.axis.left.indexOf(Se))&&this.axis.left.splice(ve,1),-1<(ve=this.axis.right.indexOf(Se))&&this.axis.right.splice(ve,1),!_e&&this.series.map(Ce=>{Ce.getYAxis()==Se&&Ce.kill()})),this.axisGroup.removeChild(Se.group),this.groupPrimaryGrids.removeChild(Se.gridPrimary),this.groupSecondaryGrids.removeChild(Se.gridSecondary),ke||this.draw(!0)}hasXAxis(Se){return this.hasTopAxis(Se)||this.hasBottomAxis(Se)}hasYAxis(Se){return this.hasLeftAxis(Se)||this.hasRightAxis(Se)}hasTopAxis(Se){return this.hasAxis(Se,this.axis.top)}hasBottomAxis(Se){return this.hasAxis(Se,this.axis.bottom)}hasLeftAxis(Se){return this.hasAxis(Se,this.axis.left)}hasRightAxis(Se){return this.hasAxis(Se,this.axis.right)}hasAxis(Se,ke){for(var _e=0,ve=ke.length;_e<ve;_e++){if(ke[_e]==Se)return!0;if(ke[_e].hasAxis(Se))return!0}return!1}autoscaleAxes(){return this._applyToAxes('setMinMaxToFitSeries',null,!0,!0),this}autoscale(){return this.autoscaleAxes(...arguments)}autoScale(){return this.autoscaleAxes(...arguments)}autoScaleAxes(){return this.autoscaleAxes(...arguments)}autoScaleAxis(Se){return Se?(Se.setMinMaxToFitSeries(),this):this}setBackgroundColor(Se){return this.rectEvent.setAttribute('fill',Se),this}getAxisState(){var Se={};for(var ke in this.axis)Se[ke]=this.axis[ke].map(function(_e){return[_e.getCurrentMin(),_e.getCurrentMax()]});return Se}setAxisState(Se){var ke,_e;for(var ve in Se)if(this.axis[ve])for(ke=0,_e=Se[ve].length;ke<_e;ke++)this.axis[ve][ke]&&(this.axis[ve][ke].setCurrentMin(Se[ve][ke][0]),this.axis[ve][ke].setCurrentMax(Se[ve][ke][1]));this.draw()}saveAxisState(Se){return this.savedAxisState=this.savedAxisState||{},this.savedAxisState[Se]=this.getAxisState(),this}recallAxisState(){return this.savedAxisState[savedName]&&this.recallAxisState(this.savedAxisState[savedName]),this}_applyToAxis(Se){switch(Se){case'string':return function(ke,_e,ve){for(var Ce=0;Ce<this.axis[ke].length;Ce++)this.axis[ke][Ce][_e].apply(this.axis[ke][Ce],ve)};break;case'function':return function(ke,_e,ve){for(var Ce=0;Ce<this.axis[ke].length;Ce++)_e.call(this,this.axis[ke][Ce],ke,ve)};}}getBoundaryAxis(Se,ke,_e){var ve=this.getBoundaryAxisFromSeries(Se,ke,_e);return ve}getBoundaryAxisFromSeries(Se,ke,_e){var ve='min'==ke,Pe=Se.isX()?['getMinX','getMaxX']:['getMinY','getMaxY'],we=Pe[ve?0:1],Le=ve?+(1/0):-(1/0),Ce,Te,Xe,Ye,De,Ie;for(Ce=ve?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,Xe=this.getSeriesFromAxis(Se,!0),(De=0,Ie=Xe.length);De<Ie;De++)(Te=Xe[De],!!Te.isShown())&&(Ye=Te[we](_e),Ce=Math[ke](isNaN(Ce)?Le:Ce,isNaN(Ye)?Le:Ye));return Ce}getSeriesFromAxis(Se){for(var ke=[],_e=this.series.length-1;0<=_e;_e--)(this.series[_e].getXAxis()==Se||this.series[_e].getYAxis()==Se)&&ke.push(this.series[_e]);return ke}updateDataMinMaxAxes(Se){var ke=['bottom','top','left','right'],_e,ve,Ce,Pe,we;for(ve=0,Ce=ke.length;ve<Ce;ve++)for(Pe=this.axis[ke[ve]].length-1;0<=Pe;Pe--)(_e=this.axis[ke[ve]][Pe],we=2>ve?'x':'y',!_e.disabled)&&(_e.setMinValueData(this.getBoundaryAxis(this.axis[ke[ve]][Pe],'min',Se)),_e.setMaxValueData(this.getBoundaryAxis(this.axis[ke[ve]][Pe],'max',Se)))}_applyToAxes(Se,ke,_e,ve){var Ce=[],Pe=0,we;for((_e||void 0==_e)&&(Ce.push('top'),Ce.push('bottom')),(ve||void 0==ve)&&(Ce.push('left'),Ce.push('right')),we=Ce.length;Pe<we;Pe++)this._applyToAxis(typeof Se).call(this,Ce[Pe],Se,ke)}findAxesLinkedTo(Se){var ke=[];return this._applyToAxes(function(_e){_e.linkedToAxis&&_e.linkedToAxis.axis==Se&&ke.push(_e)},{},Se instanceof this.getConstructor('graph.axis.x'),Se instanceof this.getConstructor('graph.axis.y')),ke}_axisHasChanged(){this._axesHaveChanged=!0}newSerie(Se,ke,_e){let ve;return('object'==typeof ke||_e||(_e=ke,ke={}),_e||(_e=ye.SERIE_LINE),ve=this.getSerie(Se))?ve:(ve=V(this,Se,ke,_e))?(this.series.push(ve),this.emit('newSerie',ve),ve):void 0}getSerie(Se){if('number'==typeof Se)return this.series[Se]||!1;'function'==typeof Se&&(Se=Se());for(var ke=0,_e=this.series.length;ke<_e;ke++)if(this.series[ke].getName()==Se||this.series[ke]==Se)return this.series[ke];return!1}getSeries(){return this.series}allSeries(...Se){return this.series.filter(ke=>{return Se.include(ke.getType())})}drawSerie(Se,ke){if(!Se.draw)throw'Serie has no method draw';Se.draw(ke)}drawSeries(Se){if(this.width&&this.height)for(var ke=this.series.length-1;0<=ke;ke--)this.series[ke].isShown()&&this.drawSerie(this.series[ke],Se)}resetSeries(){this.removeSeries()}killSeries(){this.resetSeries()}removeSeries(){for(;this.series[0];)this.series[0].kill(!0);this.series=[],this.legend&&this.legend.update()}selectSerie(Se,ke){'object'==typeof Se||(Se=this.getSerie(Se));this.selectedSerie==Se&&this.selectedSerie.selectionType==ke||(this.selectedSerie!==Se&&this.selectedSerie&&this.unselectSerie(this.selectedSerie),this.selectedSerie=Se,this.triggerEvent('onSelectSerie',Se),Se.select(ke||'selected'))}getSelectedSerie(){return this.selectedSerie}unselectSerie(Se){Se.unselect&&(Se.unselect(),this.selectedSerie=!1,this.triggerEvent('onUnselectSerie',Se))}getShapesOfSerie(Se){for(var ke=[],_e=this.shapes.length-1;0<=_e;_e--)this.shapes[_e].getSerie()==Se&&ke.push(this.shapes[_e]);return ke}makeToolbar(Se){var ke=this.getConstructor('graph.toolbar');return ke?this.toolbar=new ke(this,Se):ue.throwError('No constructor exists for toolbar')}getShapes(){return this.shapes||[]}newShape(Se,ke,_e,ve){var Ce=this;if(this.prevent(!1),!_e&&(this.emit('beforeNewShape',ke),this.prevent(!1)))return!1;'object'==typeof Se&&(_e=ke,ke=Se,Se=ke.type),ke=ke||{},ke._id=ue.guid();var we;if(we='function'==typeof Se?Se:this.getConstructor('graph.shape.'+Se),!we)return ue.throwError('No constructor for this shape');var Le=new we(this,ke);if(!Le)return ue.throwError('Failed to construct shape.');if(Le.type=Se,Le.graph=this,Le._data=ke,void 0!==ke.properties&&Le.setProperties(ke.properties),Le.init(this,ve),ke.position)for(var Ee=0,Te=ke.position.length;Ee<Te;Ee++)Le.setPosition(new ge.default(ke.position[Ee]),Ee);if(void 0!==ke.fillColor&&Le.setFillColor(ke.fillColor),void 0!==ke.fillOpacity&&Le.setFillOpacity(ke.fillOpacity),void 0!==ke.strokeColor&&Le.setStrokeColor(ke.strokeColor),void 0!==ke.strokeWidth&&Le.setStrokeWidth(ke.strokeWidth),void 0!==ke.layer&&Le.setLayer(ke.layer),!0==ke.locked&&Le.lock(),!0==ke.movable&&Le.movable(),!0==ke.selectable&&Le.selectable(),!0==ke.resizable&&Le.resizable(),void 0!==ke.attributes&&Le.setProp('attributes',ke.attributes),void 0!==ke.handles&&Le.setProp('handles',ke.handles),void 0!==ke.selectOnMouseDown&&Le.setProp('selectOnMouseDown',!0),void 0!==ke.selectOnClick&&Le.setProp('selectOnClick',!0),void 0!==ke.highlightOnMouseOver&&Le.setProp('highlightOnMouseOver',!0),ke.labelEditable&&Le.setProp('labelEditable',ke.labelEditable),ke.labels&&!ke.label&&(ke.label=ke.labels),void 0!==ke.label){Array.isArray(ke.label)||(ke.label=[ke.label]);for(var Ee=0,Te=ke.label.length;Ee<Te;Ee++)Le.showLabel(Ee),Le.setLabelText(ke.label[Ee].text,Ee),Le.setLabelPosition(ke.label[Ee].position,Ee),Le.setLabelColor(ke.label[Ee].color||'black',Ee),Le.setLabelSize(ke.label[Ee].size,Ee),Le.setLabelAngle(ke.label[Ee].angle||0,Ee),Le.setLabelBaseline(ke.label[Ee].baseline||'no-change',Ee),Le.setLabelAnchor(ke.label[Ee].anchor||'start',Ee),Le.setLabelBackgroundColor(ke.label[Ee].backgroundColor||'transparent',Ee),Le.setLabelBackgroundOpacity(ke.label[Ee].backgroundOpacity||1,Ee)}return ke.serie&&Le.setSerie(this.getSerie(ke.serie)),Le.createHandles(),this.shapes.push(Le),_e||this.emit('newShape',Le,ke),Le}newPosition(){return new ge.default(...arguments)}redrawShapes(){for(var Se=0,ke=this.shapes.length;Se<ke;Se++)this.shapes[Se].redraw()}removeShapes(){for(var Se=0,ke=this.shapes.length;Se<ke;Se++)this.shapes[Se]&&this.shapes[Se].kill&&this.shapes[Se].kill(!0);this.shapes=[]}selectShape(Se,ke){if(Se){if(-1<this.selectedShapes.indexOf(Se))return!1;if(!Se.isSelectable())return!1;ke||this.emit('beforeShapeSelect',Se),this.prevent(!1)||(0<this.selectedShapes.length&&this.options.shapesUniqueSelection&&this.unselectShapes(ke),Se._select(ke),this.selectedShapes.push(Se),!ke&&this.emit('shapeSelect',Se))}}getSelectedShapes(){return this.selectedShapes}unselectShape(Se,ke){if(-1!=this.selectedShapes.indexOf(Se))return ke||this.emit('beforeShapeUnselect',Se),this.cancelUnselectShape?void(this.cancelUnselectShape=!1):void(Se._unselect(),this.selectedShapes.splice(this.selectedShapes.indexOf(Se),1),!ke&&this.emit('shapeUnselect',Se))}unselectShapes(Se){for(;this.selectedShapes[0];)this.unselectShape(this.selectedShapes[0],Se);return this}_removeShape(Se){this.shapes.splice(this.shapes.indexOf(Se),1)}appendShapeToDom(Se){Se.isHTML()&&this.wrapper.insertBefore(Se._dom,this.dom),this.getLayer(Se.getLayer(),'shape').appendChild(Se.group)}removeShapeFromDom(Se){Se.isHTML()&&this.wrapper.removeChild(Se._dom),this.getLayer(Se.getLayer(),'shape').removeChild(Se.group)}appendSerieToDom(Se){this.getLayer(Se.getLayer(),'serie').appendChild(Se.groupMain)}removeSerieFromDom(Se){this.getLayer(Se.getLayer(),'serie').removeChild(Se.groupMain)}getLayer(Se,ke){if(!this.layers[Se]){this.layers[Se]=[],this.layers[Se][0]=document.createElementNS(ye.ns,'g'),this.layers[Se][0].setAttribute('data-layer',Se),this.layers[Se][1]=document.createElementNS(ye.ns,'g'),this.layers[Se][2]=document.createElementNS(ye.ns,'g'),this.layers[Se][0].appendChild(this.layers[Se][1]),this.layers[Se][0].appendChild(this.layers[Se][2]);for(var _e=1,ve;!(ve=this.layers[Se-_e])&&0<=Se-_e;)_e++;ve?ve.nextSibling?this.plotGroup.insertBefore(this.layers[Se][0],ve.nextSibling):this.plotGroup.appendChild(this.layers[Se][0]):this.plotGroup.insertBefore(this.layers[Se][0],this.plotGroup.firstChild)}return this.layers[Se]['shape'==ke?2:1]}focus(){this.wrapper.focus()}elementMoving(Se){this.bypassHandleMouse=Se}stopElementMoving(Se){Se&&Se==this.bypassHandleMouse?this.bypassHandleMouse=!1:!Se&&(this.bypassHandleMouse=!1)}_makeClosingLines(){this.closingLines={};for(var Se=['top','bottom','left','right'],ke=0,ve;ke<4;ke++)ve=document.createElementNS(ye.ns,'line'),ve.setAttribute('stroke',this.options.closeColor),ve.setAttribute('shape-rendering','crispEdges'),ve.setAttribute('stroke-linecap','square'),ve.setAttribute('display','none'),this.closingLines[Se[ke]]=ve,this.graphingZone.appendChild(ve)}isActionAllowed(Se,ke){if((ke.type===Se.type||void 0===ke.type&&'mousedown'===Se.type||('wheel'===Se.type||'mousewheel'===Se.type)&&'mousewheel'==ke.type)&&!(ke.enabled&&('function'==typeof ke.enabled?!ke.enabled(this):!actions.enabled))){if(ke.key&&ke.key!==Se.keyCode){if({backspace:8,enter:13,tab:9,shift:16,ctrl:17,alt:18,pause:19,escape:27,up:33,down:34,left:37,right:39}[ke.key]!==Se.keyCode)return}return void 0===ke.shift&&(ke.shift=!1),void 0===ke.ctrl&&(ke.ctrl=!1),void 0===ke.meta&&(ke.meta=!1),void 0===ke.alt&&(ke.alt=!1),Se.shiftKey==ke.shift&&Se.ctrlKey==ke.ctrl&&Se.metaKey==ke.meta&&Se.altKey==ke.alt}}forcePlugin(Se){this.forcedPlugin=Se}unforcePlugin(){this.forcedPlugin=!1}_pluginsExecute(Se,ke){for(var _e in this.plugins)this.plugins[_e]&&this.plugins[_e][Se]&&this.plugins[_e][Se].apply(this.plugins[_e],ke)}_pluginExecute(Se,ke,_e){return Se?this.plugins[Se]&&this.plugins[Se][ke]?(this.plugins[Se][ke].apply(this.plugins[Se],_e),!0):void 0:void 0}pluginYieldActiveState(){this.activePlugin=!1}_serieExecute(Se,ke,_e){'object'!=typeof serie&&(serie=this.getSerie(serie)),'function'==typeof serie[ke]&&serie.apply(serie,_e)}_pluginsInit(){var Se,ke,_e;for(var ve in this.options.plugins)if(ke=ve,_e=this.options.plugins[ve],Se=this.getConstructor('graph.plugin.'+ke),Se){var Ce=ue.extend(!0,{},Se.defaults(),_e);this.plugins[ke]=new Se(Ce),ue.mapEventEmission(this.plugins[ke].options,this.plugins[ke]),this.plugins[ke].init(this,_e)}else ue.throwError('Plugin "'+ke+'" has not been registered')}getPlugin(Se){var ke=this.plugins[Se];return ke?ke:ue.throwError('Plugin "'+Se+'" has not been loaded or properly registered')}triggerEvent(){var Se=arguments[0],ke=Array.prototype.splice.apply(arguments,[0,1]);return'function'==typeof this.options[Se]?this.options[Se].apply(this,arguments):void 0}makeLegend(Se){if(this.legend)return this.legend;var ke=this.getConstructor('graph.legend');if(ke)this.legend=new ke(this,Se);else return ue.throwError('Graph legend is not available as it has not been registered');return this.legend}updateLegend(Se=!1){if(this.legend)return this.legend.update(Se),this}getLegend(){return this.legend?this.legend:void 0}requireLegendUpdate(){this.legend&&this.legend.requireDelayedUpdate()}orthogonalProjectionSetup(){this.options.zAxis=ue.extend(!0,{maxZ:10,minZ:0,shiftX:-25,shiftY:-15,xAxis:this.getXAxis(),yAxis:this.getYAxis()})}orthogonalProjectionUpdate(){this.zAxis||(this.zAxis={g:document.createElementNS(ye.ns,'g'),l:document.createElementNS(ye.ns,'line')},this.zAxis.g.appendChild(this.zAxis.l),this.groupGrids.appendChild(this.zAxis.g));let Se=this.options.zAxis.xAxis,ke=this.options.zAxis.yAxis;var _e=Se.getMinPx(),ve=ke.getMinPx(),Ce=Se.getZProj(this.options.zAxis.maxZ),Pe=ke.getZProj(this.options.zAxis.maxZ);this.zAxis.l.setAttribute('stroke','black'),this.zAxis.l.setAttribute('x1',_e),this.zAxis.l.setAttribute('x2',_e+Ce),this.zAxis.l.setAttribute('y1',ve),this.zAxis.l.setAttribute('y2',ve+Pe),this.updateDataMinMaxAxes(!0);var we=this.series.map(Ee=>{return[Ee.getZPos(),Ee]});we.sort((Ee,Te)=>{return Te[0]-Ee[0]});let Le=0;we.forEach(Ee=>{Ee[1].setLayer(Le),this.appendSerieToDom(Ee[1]),Le++}),this.drawSeries(!0)}kill(){this.wrapper.removeChild(this.dom)}_removeSerie(Se){this.series.splice(this.series.indexOf(Se),1)}contextListen(Se,ke,_e){this;if(this.options.onContextMenuListen)return this.options.onContextMenuListen(Se,ke,_e)}lockShapes(){this.shapesLocked=!0;for(var Se=0,ke=this.shapes.length;Se<ke;Se++)this.shapes[Se].moving=!1,this.shapes[Se].resizing=!1}unlockShapes(){this.shapesLocked=!1}prevent(Se){var ke=this.prevented;return-1!=Se&&(this.prevented=void 0==Se||Se),ke}_getXY(Se){var ke=Se.clientX,_e=Se.clientY,ve=this.offsetCached||ue.getOffset(this.wrapper);return ke-=ve.left,_e-=ve.top,{x:ke,y:_e}}_resize(){this.width&&this.height&&(this.getDrawingWidth(),this.getDrawingHeight(),this.sizeSet=!0,this.dom.setAttribute('width',this.width),this.dom.setAttribute('height',this.height),this.domTitle.setAttribute('x',this.width/2),this._sizeChanged=!0,this.drawn&&(this.requireLegendUpdate(),this.draw(!0)))}updateGraphingZone(){ue.setAttributeTo(this.graphingZone,{transform:'translate('+this.options.paddingLeft+', '+this.options.paddingTop+')'}),this._sizeChanged=!0}getDrawingSpaceWidth(){return()=>this.drawingSpaceWidth}getDrawingSpaceHeight(){return()=>this.drawingSpaceHeight}getDrawingSpaceMinX(){return()=>this.drawingSpaceMinX}getDrawingSpaceMinY(){return()=>this.drawingSpaceMinY}getDrawingSpaceMaxX(){return()=>this.drawingSpaceMaxX}getDrawingSpaceMaxY(){return()=>this.drawingSpaceMaxY}trackingLine(Se){var ke=this;return'boolean'==typeof Se?void(this.options.trackingLine&&(this.options.trackingLine.enable=Se)):(Se&&(this.options.trackingLine=Se),Se.series=Se.series||[],Se.enable=void 0===Se.enable||!!Se.enable,'individual'==Se.mode?Se.series&&(!Array.isArray(Se.series)&&('all'==Se.series?Se.series=this.series.map(_e=>{serie:;}):Se.series=[Se.series]),Se.series.forEach(_e=>{if('object'!=typeof _e.serie){if('object'!=typeof _e)throw'Misuse of the trackingLine() method. Each serie must be an object with the serie property: { series: [ { serie: jsGraphSerie, options: { ... someOptions } } ] }';_e.serie=this.getSerie(_e.serie)}_e.serie&&ke.addSerieToTrackingLine(_e.serie,_e)})):Se.series.map(_e=>{_e.serie.disableTracking()}),!Se.noLine)?(this.trackingObject||(this.trackingObject=this.newShape('line',ue.extend(!0,{position:[{y:'min'},{y:'max'}],stroke:'black',layer:-1},Se.trackingLineShapeOptions))),this.trackingObject.draw(),this.trackingObject):void 0}addSerieToTrackingLine(Se,ke){this.options.trackingLine||this.trackingLine({mode:'individual'}),this.options.trackingLine.series.push(Object.assign({serie:Se},ke)),Se.enableTracking((_e,ve,Ce,Pe)=>{this.options.trackingLine.enable&&ve&&(this.trackingObject&&(this.trackingObject.show(),this.trackingObject.getPosition(0).x=ve.trueX,this.trackingObject.getPosition(1).x=ve.trueX,this.trackingObject.redraw()),_e._trackingLegend=be(this,{serie:_e},Ce,Pe,_e._trackingLegend,ke.textMethod?ke.textMethod:we=>{for(var Le in we){return we[Le].serie.serie.getName()+': '+we[Le].serie.serie.getYAxis().valueToHtml(we[Le].yValue)}},ve.trueX),_e._trackingLegend&&(_e._trackingLegend.style.display='block'))},_e=>{this.trackingObject&&this.trackingObject.hide(),_e.trackingShape&&_e.trackingShape.hide(),_e._trackingLegend&&(_e._trackingLegend.style.display='none'),_e._trackingLegend=be(this,{serie:_e},!1,!1,_e._trackingLegend,!1,!1)})}setKatexRenderer(Se){this._katexRenderer=Se}hasKatexRenderer(){return!!this._katexRenderer}renderWithKatex(Se,ke){if(this._katexRenderer){ke?ke.removeChild(ke.firstChild):ke=document.createElementNS(ye.ns,'foreignObject');let _e=document.createElement('div');return ke.appendChild(_e),this._katexRenderer(Se,_e),ke}return!1}static fromJSON(Se,ke){let ve={},Ce={left:[],top:[],right:[],bottom:[]},_e,we;return Se.title&&(ve.title=Se.title),Se.axis&&Se.axis.map(function(Le){Le.type||ue.throwError('Axis type is required (top, bottom, left or right)');var Ee={};Le.label&&(Ee.labelValue=Le.label),void 0!==Le.unit&&(Ee.unit=Le.unit),void 0!==Le.unitWrapperAfter&&(Ee.unitWrapperAfter=Le.unitWrapperAfter),void 0!==Le.unitWrapperBefore&&(Ee.unitWrapperBefore=Le.unitWrapperBefore),void 0!==Le.min&&(Ee.forcedMin=Le.min),void 0!==Le.max&&(Ee.forcedMax=Le.max),void 0!==Le.flip&&(Ee.flipped=Le.flip),Ce[Le.type].push(Ee),Le._jsGraphIndex=Ce[Le.type].length-1}),_e=new ye(ke,ve,Ce),Se.width&&_e.setWidth(Se.width),Se.height&&_e.setHeight(Se.width),_e._resize(),Se.data&&Se.data.map(function(Le){var Ee=Le.type,Xe={},De=ye.newWaveform(),Te,Ye;switch(Le.type){case'bar':ue.throwError('Bar charts not supported'),Ee=!1;break;case'color':Ee=ye.SERIE_LINE_COLORED;break;case'scatter':Ee=ye.SERIE_SCATTER;break;case'box':Ee=ye.SERIE_BOX,('x'==Le.orientation||'y'==Le.orientation)&&(Xe.orientation=Le.orientation);break;default:Ee=ye.SERIE_LINE;}if(!Ee)return void ue.throwError('No valid serie type was found');if(Te=_e.newSerie(Le.id||Le.label||ue.guid(),Xe,Ee),Le.lineStyle&&Le.lineStyle.map(function(Ue){var Ge={};Ue={},Ue.styleName=Ue.styleName||'unselected',Ee===ye.SERIE_LINE?(void 0!==Ue.lineWidth&&(Ge.lineWidth=Ue.lineWidth),void 0!==Ue.color&&(Ge.lineColor=Ue.color),Ue.lineStyle&&(Ge.lineStyle=Ue.lineStyle),Te.setStyle(Ge,Ue.styleName)):void 0}),Le.styles&&Le.styles.map(function(Ue){Ue.styleName=Ue.styleName||'unselected',Array.isArray(Ue.styles)||(Ue.styles=[Ue.styles]);var Ze=Ue.styles.map(function(qe){switch(Ee){case ye.SERIE_LINE:return{type:qe.shape,zoom:qe.zoom,strokeWidth:qe.lineWidth,strokeColor:qe.lineColor,fillColor:qe.color,points:qe.points};break;case ye.SERIE_BOX:return qe;break;case ye.SERIE_SCATTER:return qe;}});Ee===ye.SERIE_LINE?Te.setMarkers(Ze,Ue.styleName):Ee===ye.SERIE_SCATTER?Te.setStyle({},Ze,Ue.styleName):Ee===ye.SERIE_BOX?Te.setStyle(Ze[0],Ue.stylename||'unselected'):void 0}),console.log(Le),Le.color&&Ee==ye.SERIE_LINE_COLORED&&Te.setColors(Le.color),De.setData(Le.y,Le.x),!!Te){let Ie=[],je=[],Ne=[],Be=[],Oe=[],He=[],Fe=[],ze=[];if(Le.errorX)for(var Ve=0,Re=Le.errorX.length;Ve<Re;Ve++)Array.isArray(Le.errorX[Ve])?(Ie.push(Le.errorX[Ve][0]),je.push(Le.errorX[Ve][1])):(Ie.push(Le.errorX[Ve]),je.push(Le.errorX[Ve]));else if(Le.errorBarX||Le.errorBoxX){if(Le.errorBarX)for(var Ve=0,Re=Le.errorBarX.length;Ve<Re;Ve++)Array.isArray(Le.errorBarX[Ve])?(Ie.push(Le.errorBarX[Ve][0]),je.push(Le.errorBarX[Ve][1])):(Ie.push(Le.errorBarX[Ve]),je.push(Le.errorBarX[Ve]));if(Le.errorBoxX)for(var Ve=0,Re=Le.errorBoxX.length;Ve<Re;Ve++)Array.isArray(Le.errorBoxX[Ve])?(Oe.push(Le.errorBoxX[Ve][0]),He.push(Le.errorBoxX[Ve][1])):(Oe.push(Le.errorBoxX[Ve]),He.push(Le.errorBoxX[Ve]))}if(Le.errorY)for(var Ve=0,Re=Le.errorY.length;Ve<Re;Ve++)Array.isArray(Le.errorY[Ve])?(Ne.push(Le.errorY[Ve][0]),Be.push(Le.errorY[Ve][1])):(Ne.push(Le.errorY[Ve]),Be.push(Le.errorY[Ve]));else if(Le.errorBarY||Le.errorBoxY){if(Le.errorBarY)for(var Ve=0,Re=Le.errorBarY.length;Ve<Re;Ve++)Array.isArray(Le.errorBarY[Ve])?(Ne.push(Le.errorBarY[Ve][0]),Be.push(Le.errorBarY[Ve][1])):(Ne.push(Le.errorBarY[Ve]),Be.push(Le.errorBarY[Ve]));if(Le.errorBoxY)for(var Ve=0,Re=Le.errorBoxY.length;Ve<Re;Ve++)Array.isArray(Le.errorBoxY[Ve])?(Fe.push(Le.errorBoxY[Ve][0]),ze.push(Le.errorBoxY[Ve][1])):(Fe.push(Le.errorBoxY[Ve]),ze.push(Le.errorBoxY[Ve]))}switch(we={},0<Ie.length&&(De.setErrorBarXAbove(ye.newWaveform(Ie)),we.right={}),0<je.length&&(De.setErrorBarXAbove(ye.newWaveform(Ie)),we.left={}),0<Ne.length&&(De.setErrorBarXAbove(ye.newWaveform(Ne)),we.top={}),0<Be.length&&(De.setErrorBarXAbove(ye.newWaveform(Ne)),we.bottom={}),Te.setErrorBarStyle(we),we={},0<Oe.length&&(De.setErrorBoxXAbove(ye.newWaveform(Oe)),we.right={}),0<He.length&&(De.setErrorBoxXBelow(ye.newWaveform(He)),we.left={}),0<Fe.length&&(De.setErrorBoxAbove(ye.newWaveform(Fe)),we.top={}),0<ze.length&&(De.setErrorBoxBelow(ye.newWaveform(ze)),we.bottom={}),Te.setErrorBoxStyle(we),Se.axis?(Ye=Se.axis[Le.xAxis],Ye&&('top'===Ye.type||'bottom'===Ye.type)?'top'==Ye.type?Te.setXAxis(_e.getTopAxis(Ye._jsGraphIndex)):'bottom'==Ye.type&&Te.setXAxis(_e.getBottomAxis(Ye._jsGraphIndex)):(ue.warn('No x axis found. Setting automatically'),Te.setXAxis(_e.getXAxis(0))),Ye=Se.axis[Le.yAxis],Ye&&('left'===Ye.type||'right'===Ye.type)?'left'==Ye.type?Te.setYAxis(_e.getLeftAxis(Ye._jsGraphIndex)):'right'==Ye.type&&Te.setYAxis(_e.getRightAxis(Ye._jsGraphIndex)):(ue.warn('No y axis found. Setting automatically'),Te.setYAxis(_e.getYAxis(0)))):(ue.warn('No axes found. Setting automatically'),Te.autoAxis()),Ee){case ye.SERIE_BOX:Te.setData(Le.boxes);break;default:case ye.SERIE_SCATTER:case ye.SERIE_LINE_COLORED:case ye.SERIE_LINE:Te.setWaveform(De);}}}),_e.autoscaleAxes(),_e.draw(),_e}exportToSchema(){let Se={};Se.title=this.options.title,Se.width=this.getWidth(),Se.height=this.getHeight();let _e=[],ve={x:[],y:[]};['top','bottom','left','right'].map(Le=>{this.axis[Le]&&(_e=_e.concat(this.axis[Le].map(Ee=>{return{type:Le,label:Ee.options.label,unit:Ee.options.unit,min:Ee.options.forcedMin,max:Ee.options.forcedMax,flip:Ee.options.flipped}})),'top'==Le||'bottom'==Le?ve.x=ve.x.concat(this.axis[Le]):ve.y=ve.y.concat(this.axis[Le]))}),Se.axis=_e;let Pe=Le=>{switch(Le){case ye.SERIE_LINE:return'line';break;case ye.SERIE_BAR:return'bar';break;case ye.SERIE_LINE_COLORED:return'color';break;case ye.SERIE_SCATTER:return'scatter';}},we=(Le,Ee)=>{let Te=[];switch(Le.getType()){case ye.SERIE_LINE:for(var Xe=0;Xe<Le.data.length;Xe++)for(var Ye=0;Ye<Le.data[Xe].length-1;Ye+=2)Te.push(Le.data[Xe][Ye+(Ee&&Le.isFlipped()||!Ee&&!Le.isFlipped()?1:0)]);break;case ye.SERIE_SCATTER:for(var Ye=0;Ye<Le.data.length-1;Ye+=2)Te.push(Le.data[Xe+(Ee&&Le.isFlipped()||!Ee&&!Le.isFlipped()?1:0)]);}return Te};return Se.data=[].concat(this.series.map(Le=>{style=[];let Ee=[];if(Le.getType()==ye.SERIE_LINE)for(var Te in Le.styles){Ee.push({styleName:Te,color:Le.styles[Te].lineColor,lineWidth:Le.styles[Te].lineWidth,lineStyle:Le.styles[Te].lineStyle});let Xe={styleName:Te,styles:[]};style.push(Xe),Xe.styles=Xe.styles.concat((Le.styles[Te].markers||[]).map(Ye=>{return{shape:Ye.type,zoom:Ye.zoom,lineWidth:Ye.strokeWidth,lineColor:Ye.strokeColor,color:Ye.fillColor,points:Ye.points}}))}return{label:Le.getLabel(),id:Le.getName(),type:Pe(Le.getType()),x:we(Le,!0),y:we(Le,!1),xAxis:ve.x.indexOf(Le.getXAxis()),yAxis:ve.y.indexOf(Le.getYAxis()),style:style,lineStyle:Ee}})),Se}static registerConstructor(Se,ke){return fe.has(Se)?ue.throwError('Constructor '+ke+' already exists.'):void fe.set(Se,ke)}static getConstructor(Se,ke=!1){return fe.has(Se)?fe.get(Se):!ke&&ue.throwError('Constructor "'+Se+'" doesn\'t exist')}static newWaveform(){return new ce.default(...arguments)}static waveform(){return new ce.default(...arguments)}}ye.prototype.getConstructor=ye.getConstructor;var be=function(Se,ke,_e,ve,Ce,Pe,we){var Le=!1;Array.isArray(ke)||(ke=[ke]);var Ee=[];if(!Ce&&Se.options.trackingLine.legend&&(Le=!0,Ce=te(Se)),ke.map(Xe=>{var Ye=Xe.serie.handleMouseMove(we,!1);if(!Ye||!Pe)return Xe.serie.trackingShape&&Xe.serie.trackingShape.hide(),Ce;if(0<Xe.withinPx&&1e-14<Math.abs(_e-Se.options.paddingLeft-Xe.serie.getXAxis().getPx(Ye.xClosest))-Xe.withinPx||0<Xe.withinVal&&Math.abs(Xe.serie.getXAxis().getVal(_e-Se.options.paddingLeft)-Ye.xClosest)-Xe.withinVal>Xe.serie.getXAxis().getVal(_e-Se.options.paddingLeft)/1e5)Xe.serie.trackingShape&&Xe.serie.trackingShape.hide();else{if(Ee[Xe.serie.getName()]={yValue:Ye.xClosest,xValue:Ye.yClosest,serie:Xe,index:Ye},Xe.serie.trackingShape||(Xe.serie.trackingShape=Se.newShape(Se.options.trackingLine.serieShape.shape||'ellipse',{fillColor:Xe.serie.getLineColor(),strokeColor:'White',strokeWidth:Xe.serie.getLineWidth()},!0,Se.options.trackingLine.serieShape.properties||{rx:[3*Xe.serie.getLineWidth()],ry:[3*Xe.serie.getLineWidth()]}).setSerie(Xe.serie).forceParentDom(Xe.serie.groupMain).draw(),Se.options.trackingLine.serieShape.onCreated&&Se.options.trackingLine.serieShape.onCreated(Xe.serie.trackingShape),Xe.serie.trackingShape.on('changed',()=>{Se.options.trackingLine.serieShape.onChanged&&Se.options.trackingLine.serieShape.onChanged(Xe.serie.trackingShape)})),Xe.serie.trackingShape.show(),Xe.serie.trackingShape.getPosition(0).x=Ye.xClosest,Se.options.trackingLine.serieShape.magnet){let De=Se.options.trackingLine.serieShape.magnet,Ie=De.within,je;De.withinPx&&(Ie=Xe.serie.getXAxis().getRelVal(De.withinPx)),(je=Xe.serie.findLocalMinMax(Ye.xClosest,Ie,De.mode))&&(Xe.serie.trackingShape.getPosition(0).x=je)}Xe.serie.trackingShape.redraw()}}),!!Se.options.trackingLine.legend){if(0==Object.keys(Ee).length||!Pe)Ce.style.display='none';else{'none'==Ce.style.display||Le?Ae(Se,Ce,_e,ve,!0):Me(Se,Ce,_e,ve),Ce.style.display='block';var Te=Pe(Ee,we,_e,ve);Ce.innerHTML=Te}return Ce}},Ae=function(Se,ke,_e,ve,Ce){function Pe(){var Ye=(Date.now()-Le)/200;1<Ye&&(Ye=1),ke.style.marginLeft=(_e-Te)*Ye+Te+'px',ke.style.marginTop=(ve-Xe)*Ye+Xe+'px',1>Ye&&window.requestAnimationFrame(Pe)}var Le=Date.now(),Ee=ke.offsetHeight,Te=parseInt(ke.style.marginLeft.replace('px','')||0),Xe=parseInt(ke.style.marginTop.replace('px','')||0);return _e=_e>Se.getWidth()/2?_e-_e%10-20-ke.offsetWidth:_e-_e%10+30,ve=ve-ve%10+Ee/2,Ce?(ke.style.marginLeft=_e+'px',void(ke.style.marginTop=ve+'px')):void window.requestAnimationFrame(Pe)},Me=ue.debounce(Ae,50);ye.SERIE_LINE=Symbol(),ye.SERIE_SCATTER=Symbol(),ye.SERIE_CONTOUR=Symbol(),ye.SERIE_BAR=Symbol(),ye.SERIE_BOX=Symbol(),ye.SERIE_ZONE=Symbol(),ye.SERIE_LINE_COLORED=Symbol(),ye.SERIE_ZONE=Symbol(),ye.SERIE_DENSITYMAP=Symbol(),ye.SERIE_LINE_3D=Symbol(),ye.SERIE_ZONE_3D=Symbol(),ye.TICKS_OUTSIDE=Symbol(),ye.TICKS_INSIDE=Symbol(),ye.TICKS_CENTERED=Symbol(),ye.ns='http://www.w3.org/2000/svg',ye.nsxlink='http://www.w3.org/1999/xlink',X.default=ye,T.exports=X['default']})},function(u,A){var C,P,E;(function(T,X){P=[u,A],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X){'use strict';function Y(O){return O&&O.indexOf&&-1<O.indexOf('px')&&parseInt(O.replace('px',''))}function I(O){return!isNaN(parseFloat(O))&&isFinite(O)}Object.defineProperty(X,'__esModule',{value:!0});class B{constructor(O,F,W,V){'object'==typeof O?(this.x=O.x,this.y=O.y,this.dx=O.dx,this.dy=O.dy):(this.x=O,this.y=F,this.dx=W,this.dy=V)}duplicate(){return new B(this.x,this.y,this.dx,this.dy)}compute(O,F,W,V){if(O&&F&&W&&O.hasXAxis&&O.hasYAxis||O.throw(),!O.hasXAxis(F))throw'Graph does not contain the x axis that was used as a parameter';if(!O.hasYAxis(W))throw'Graph does not contain the x axis that was used as a parameter';return this._compute(O,F,W,V)}_compute(O,F,W,V){var R=this._relativeTo;if(R)var U=R._compute(O,F,W,V);var Z={x:!1,y:!1},G;for(var K in F||(F=O.getXAxis()),W||(W=O.getYAxis()),Z){var Q='x'==K?F:W,J=this[K],$=this['d'+K];if(void 0!==J||(void 0===$||void 0!==R)&&void 0!==R)void 0!==J&&(Z[K]=this.getPx(J,Q));else if('x'==K){if(void 0===$)continue;Z[K]=R?R[K]:Q.getPos(0)}else if(void 0!==this.x&&V)if(!1!==Y(this.x))console.warn('You have defined x in px and not y. Makes no sense. Returning 0 for y'),Z[K]=0;else{var ee=V.searchClosestValue(this.x);ee?Z[K]=V.getY(ee.yMin):(console.warn('Could not find y position for x = '+this.x+' on serie "'+V.getName()+'". Returning 0 for y.'),Z[K]=0)}if(void 0!==$){var te=void 0!==J||void 0==U||void 0==U[K]?Z[K]:U[K];if('y'==K&&U&&void 0!==U.x&&void 0==U.y){if(!V){throw'Error. No serie exists. Cannot find y value'}var ee=V.searchClosestValue(R.x);ee&&(te=V.getY(ee.yMin))}!1===(G=Y($))?!1===(G=this._parsePercent($))?Q&&(Z[K]=te+Q.getRelPx($)):Z[K]=te+this._getPositionPx(G,!0,Q,O):Z[K]=te+G}}return Z}_getPositionPx(O,F,W,V){var R;if(!1!==(R=Y(O)))return R;return!1===(R=this._parsePercent(O))?W?W.getPos(O):void 0:R/100*(F?V.getDrawingWidth():V.getDrawingHeight())}_parsePercent(O){return O&&O.indexOf&&-1<O.indexOf('%')&&O}getDeltaPx(O,F){var W;return!1===(W=Y(O))?F.getRelPx(O)+'px':W+'px'}deltaPosition(O,F,W){O='y'==O?'y':'x';var V=this[O],R=this['d'+O],U,G;if(V!==void 0)!1===(U=Y(V))?(V=this.getValPosition(V,W),this[O]=!1===(G=Y(F))?V+F:V+W.getRelVal(G)):!1===(G=Y(F))?this[O]=U+W.getRelPx(F)+'px':this[O]=U+G+'px';else if(R!==void 0){if('y'==O&&V===void 0&&!this._relativeTo)return;!1===(U=Y(R))?(R=this.getValPosition(R,W),this['d'+O]=!1===(G=Y(F))?R+F:R+W.getRelVal(G)):!1===(G=Y(F))?this['d'+O]=U+W.getRelPx(F)+'px':this['d'+O]=U+G+'px'}}getValPosition(O,F){return'max'==O?F.getMaxValue():'min'==O?F.getMinValue():O}getPx(O,F,W){var V;if('function'==typeof O)return O(F,W);if(!1!==(V=Y(O)))return V;if(!1!==(V=this._parsePercent(O)))return V;if(F){if('min'==O)return F.getMinPx();if('max'==O)return F.getMaxPx();if(W)return F.getRelPx(O);if(I(O))return F.getPos(O)}}getPxRel(O,F){return this.getPx(O,F,!0)}relativeTo(O){return this._relativeTo=B.check(O),this}static check(O,F){if(O instanceof B)return O;var W=new B(O);if(O&&O.relativeTo){const V=F(O.relativeTo);V&&W.relativeTo(V)}return W}}X.default=B,T.exports=X['default']})},function(u,A){var C,P,E;(function(T,X){P=[A],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T){'use strict';function W(pe,de,ge){return 0>ge&&(ge+=1),1<ge&&(ge-=1),ge<1/6?pe+6*(de-pe)*ge:ge<1/2?de:ge<2/3?pe+6*((de-pe)*(2/3-ge)):pe}function U(pe,de){return pe._savedAttributes&&pe._savedAttributes[de]!==void 0}function Z(pe,de){if(pe&&pe._savedAttributesIds){pe._savedAttributesIds.splice(pe._savedAttributesIds.indexOf(de),1),delete pe._attributes[de];var ge={};for(var ue in pe._savedAttributes)ge[ue]=pe._savedAttributes[ue];for(var ue=0,he=pe._savedAttributesIds.length;ue<he;ue++)for(var ce in pe._attributes[pe._savedAttributesIds[ue]])ge[ce]=pe._attributes[pe._savedAttributesIds[ue]][ce];for(var ce in ge)pe.setAttribute(ce,ge[ce])}}function re(){var pe,de,ge,ue,he,ce,xe=arguments[0],me=1,fe=arguments.length,ye=!1;for('boolean'==typeof xe?(ye=xe,xe=arguments[1]||{},me=2):('object'!=typeof xe&&'function'!=typeof xe||null==xe)&&(xe={});me<fe;++me)if(pe=arguments[me],null!=pe)for(de in pe)ge=xe[de],ue=pe[de],xe!==ue&&(ye&&ue&&(le(ue)||(he=oe(ue)))?(he?(he=!1,ce=ge&&oe(ge)?ge:[]):ce=ge&&le(ge)?ge:{},xe[de]=re(ye,ce,ue)):'undefined'!=typeof ue&&(xe[de]=ue));return xe}Object.defineProperty(T,'__esModule',{value:!0}),T.setAttributeTo=function(pe,de,ge){if(ge)for(var ue in de)pe.setAttributeNS(ge,ue,de[ue]);else for(ue in de)pe.setAttribute(ue,de[ue])},T.mapEventEmission=function(pe,de){de||(de=this);var ge;for(var ue in pe)0==ue.indexOf('on')&&'function'==typeof pe[ue]&&(ge=ue.substring(2),ge=ge.substring(0,1).toLowerCase()+ge.substring(1),de.on&&function(he){de.on(ge,function(){pe[he].apply(de,arguments)})}(ue))},T.guid=function(){return'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(pe){var de=0|16*Math.random(),ge='x'==pe?de:8|3&de;return ge.toString(16)})},T.throwError=function(pe){console.error(pe)},T.warn=function(pe){console.warn(pe)},T.isNumeric=function(pe){return!Array.isArray(pe)&&0<=pe-parseFloat(pe)+1},T.hue2rgb=W,T.hslToRgb=function(pe,de,ge){var ue,he,ce;if(0==de)ue=he=ce=ge;else{var xe=0.5>ge?ge*(1+de):ge+de-ge*de,me=2*ge-xe;ue=W(me,xe,pe+1/3),he=W(me,xe,pe),ce=W(me,xe,pe-1/3)}return[Math.round(255*ue),Math.round(255*he),Math.round(255*ce)]},T.saveDomAttributes=function(pe,de,ge){if(pe)for(var ue in pe._savedAttributesIds=pe._savedAttributesIds||[],-1<pe._savedAttributesIds.indexOf(ge)&&Z(pe,ge),pe._savedAttributes=pe._savedAttributes||{},pe._attributes=pe._attributes||{},pe._attributes[ge]=de,pe._savedAttributesIds.push(ge),de)pe._savedAttributes[ue]||(pe._savedAttributes[ue]=pe.getAttribute(ue)),pe.setAttribute(ue,de[ue])},T.hasSavedAttribute=U,T.overwriteDomAttribute=function(pe,de,ge){U(pe,de)&&(pe._savedAttributes[de]=ge)},T.restoreDomAttributes=Z,T.debounce=function(pe,de,ge){var ue;return function(){var he=this,ce=arguments,me=ge&&!ue;clearTimeout(ue),ue=setTimeout(function(){ue=null,ge||pe.apply(he,ce)},de),me&&pe.apply(he,ce)}},T.SVGParser=function(pe){var de=new DOMParser,ge=de.parseFromString(pe,'image/svg+xml');return ge},T.reverseArray=function(pe){var de=null,ge=null,ue=pe.length;for(de=0,ge=ue-1;de<ge;de+=1,ge-=1){var he=pe[de];pe[de]=pe[ge],pe[ge]=he}return pe},T.getOffset=function(pe){var de=pe.getBoundingClientRect();return{top:de.top,left:de.left}},T.setCSS=function(pe,de){var ge=pe.style;for(var ue in de)ge[ue]=de[ue]},T.ajaxGet=function(pe){return new Promise(function(de,ge){var ue=new XMLHttpRequest;ue.open(pe.type||'GET',pe.url,!0),pe.json&&ue.setRequestHeader('Accept','application/json'),ue.onload=function(){if(200===ue.status){var he=ue.responseText;pe.json&&(he=JSON.parse(he)),de(he)}else ge(new Error('Request error: '+ue.status))},ue.onerror=function(){ge(new Error('Network error: '+ue.status))},ue.send()})},T.extend=re,T.mix=function(pe,de){for(let ge in de)de.hasOwnProperty(ge)&&(pe.prototype[ge]=de[ge])},T.emptyDom=function(pe){for(;pe.firstChild;)pe.removeChild(pe.firstChild)};var se=Object.prototype.hasOwnProperty,ne=Object.prototype.toString,oe=function(de){return'function'==typeof Array.isArray?Array.isArray(de):'[object Array]'===ne.call(de)},le=function(de){if(!de||'[object Object]'!==ne.call(de))return!1;var ge=se.call(de,'constructor'),ue=de.constructor&&de.constructor.prototype&&se.call(de.constructor.prototype,'isPrototypeOf');if(de.constructor&&!ge&&!ue)return!1;for(var he in de);return'undefined'==typeof he||se.call(de,he)};T.default={},T.isArray=oe,T.isPlainObject=le})},function(u,A){var C,P,E;(function(T,X){P=[u,A],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X){'use strict';function Y(){}function I(F,W){for(var V=F.length;V--;)if(F[V].listener===W)return V;return-1}function B(F){return function(){return this[F].apply(this,arguments)}}Object.defineProperty(X,'__esModule',{value:!0});var O=Y.prototype;O.getListeners=function(W){var V=this._getEvents(),R,U;if(W instanceof RegExp)for(U in R={},V)V.hasOwnProperty(U)&&W.test(U)&&(R[U]=V[U]);else R=V[W]||(V[W]=[]);return R},O.flattenListeners=function(W){var V=[],R;for(R=0;R<W.length;R+=1)V.push(W[R].listener);return V},O.getListenersAsObject=function(W){var V=this.getListeners(W),R;return V instanceof Array&&(R={},R[W]=V),R||V},O.addListener=function(W,V){var R=this.getListenersAsObject(W),G;for(G in R)R.hasOwnProperty(G)&&-1===I(R[G],V)&&R[G].push('object'==typeof V?V:{listener:V,once:!1});return this},O.on=B('addListener'),O.addOnceListener=function(W,V){return this.addListener(W,{listener:V,once:!0})},O.once=B('addOnceListener'),O.defineEvent=function(W){return this.getListeners(W),this},O.defineEvents=function(W){for(var V=0;V<W.length;V+=1)this.defineEvent(W[V]);return this},O.removeListener=function(W,V){var R=this.getListenersAsObject(W),U,G;for(G in R)R.hasOwnProperty(G)&&(U=I(R[G],V),-1!==U&&R[G].splice(U,1));return this},O.off=B('removeListener'),O.addListeners=function(W,V){return this.manipulateListeners(!1,W,V)},O.removeListeners=function(W,V){return this.manipulateListeners(!0,W,V)},O.manipulateListeners=function(W,V,R){var U,G,Z=W?this.removeListener:this.addListener,K=W?this.removeListeners:this.addListeners;if('object'==typeof V&&!(V instanceof RegExp))for(U in V)V.hasOwnProperty(U)&&(G=V[U])&&('function'==typeof G?Z.call(this,U,G):K.call(this,U,G));else for(U=R.length;U--;)Z.call(this,V,R[U]);return this},O.removeEvent=function(W){var R=this._getEvents(),U;if('string'==typeof W)delete R[W];else if(W instanceof RegExp)for(U in R)R.hasOwnProperty(U)&&W.test(U)&&delete R[U];else delete this._events;return this},O.removeAllListeners=B('removeEvent'),O.emitEvent=function(W,V){var R=this.getListenersAsObject(W),U,G,Z,K;for(Z in R)if(R.hasOwnProperty(Z))for(G=R[Z].length;G--;)U=R[Z][G],!0===U.once&&this.removeListener(W,U.listener),K=U.listener.apply(this,V||[]),K===this._getOnceReturnValue()&&this.removeListener(W,U.listener);return this},O.trigger=B('emitEvent'),O.emit=function(W){var V=Array.prototype.slice.call(arguments,1);return this.emitEvent(W,V)},O.setOnceReturnValue=function(W){return this._onceReturnValue=W,this},O._getOnceReturnValue=function(){return!this.hasOwnProperty('_onceReturnValue')||this._onceReturnValue},O._getEvents=function(){return this._events||(this._events={})},X.default=Y,T.exports=X['default']})},function(u,A,S){var C,P,E;(function(T,X){P=[u,A,S(6),S(7)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y,I){'use strict';function B($){return $&&$.__esModule?$:{default:$}}function O($){$--;for(var ee=2;$>>=1;)ee<<=1;return ee}function F($){for(var ee=1;$>>=1;)ee<<=1;return ee}function W($,ee,te,re,ie){return($-ee)/(te-ee)*(ie-re)+re}function V($,ee,te){let re=0,ie=ee.length,ae=ie-1,ne=0,oe=1,se;if(ee[re]==$)return re;if(ee[ae]==$)return ae;for(;;){if(ne++,100<ne)throw'Error loop';for(se=Math.floor((re+ae)/2);isNaN(ee[se]);){if(se>=ee.length-1)return ee.length-1;if(0>=se)return 0;se+=oe}if(se==re||ee[se]==$||se==ae)return se;if(ee[se]<=$)te?ae=se:re=se;else if(ee[se]>$)te?re=se:ae=se;else return!1;oe*=-1}}Object.defineProperty(X,'__esModule',{value:!0});var R=B(Y),U=B(I);class G{constructor($=[],ee=0,te=1){this.xOffset=ee,this.xScale=te,this.errors={nb:0,bars:{above:null,below:null},boxes:{above:null,below:null}},0<$.length&&this.setData($),this.BELOW=G.BELOW,this.ABOVE=G.ABOVE,this.BOX=G.BOX,this.BAR=G.BAR}setData($,ee=null){if(Array.isArray($[0])){let ae=[],se=[];$.forEach(ne=>{ae.push(ne[0]),se.push(ne[1])}),this.setXWaveform(ae),$=se}let te=this._makeArray($.length),re=!1;const ie=this.isNaNAllowed();return $.map((ae,se)=>{ie||ae[0]===ae[0]&&ae[1]===ae[1]||(re=!0),te[se]=ae}),re&&this.warn('Trying to assign NaN values to a typed array that does not support NaNs. 0\'s will be used instead'),this._setData(te),ee&&this.setXWaveform(ee),this}getY($,ee){return ee&&this.dataInUse?this.dataInUse.y[$]*this.getScale()+this.getShift():this.data[$]*this.getScale()+this.getShift()}setXWaveform($){if(!($ instanceof G))if(Array.isArray($))$=new G($);else throw'Cannot set X waveform. Data is not a valid array.';return this.xdata=$,this.computeXMinMax(),this}hasXWaveform(){return!!this.xdata}getXWaveform(){if(this.xdata)return this.xdata;let $=new G,ee=[];for(var te=0;te<this.getLength();te+=1)ee.push(this.getX(te));return $.setData(ee),this.xdata=$,$}rescaleX($,ee){return this.xScale=ee,this.xOffset=$,this.computeXMinMax(),this}getTypedArrayClass(){return this._typedArrayClass||!1}setTypedArrayClass($){this.getTypedArrayClass()&&this.isNaNAllowed()&&!this.isNaNAllowed($)&&this.warn('NaN values are not allowed by the new constructor ('+$.name+') while it was allowed by the previous one ('+this._typedArrayClass.name+')'),this.getTypedArrayClass()&&this.isUnsigned()&&!this.isUnsigned($)&&this.warn('You are switching from signed values to unsigned values. You may experience data corruption if there were some negative values.'),this._typedArrayClass=$,this.data&&this._setData($.from(this.data)),this.hasXWaveform()&&this.getXWaveform().setTypedArrayClass($)}isNaNAllowed($=this._typedArrayClass){return $==Array||$==Float32Array||$==Float64Array}isUnsigned($=this._typedArrayClass){return $==Uint8Array||$==Uint8ClampedArray||$==Uint16Array||$==Uint32Array}recalculateMinMaxNewPoint($,ee){($<this.minX||this.minX===void 0)&&(this.minX=$),($>this.maxX||this.maxX===void 0)&&(this.maxX=$),(ee<this.minY||this.minY===void 0)&&(this.minY=ee),(ee>this.maxY||this.maxY===void 0)&&(this.maxY=ee)}prepend($,ee){return'function'==typeof $&&($=$(this)),'function'==typeof ee&&(ee=ee(this)),this.xdata?this.xdata.prepend(null,$):null===$?this.xOffset-=this.xScale:(this.xdata=this.getXWaveform(),this.xdata.prepend(null,$)),this.data.unshift(ee),this.recalculateMinMaxNewPoint($,ee),this}append($,ee){return'function'==typeof $&&($=$(this)),'function'==typeof ee&&(ee=ee(this)),this.xdata?this.xdata.append(null,$):null!==$&&(this.xdata=this.getXWaveform(),this.xdata.append(null,$)),this.monotoneous&&(ee>this.data[this.data.y]&&!1===this.getMonotoneousAscending()?this.monotoneous=!1:ee<this.data[this.data.y]&&!0===this.getMonotoneousAscending()&&(this.monotoneous=!1)),(1==this.data.length||void 0===this._monotoneousAscending)&&(this.monotoneous=!0,this._monotoneousAscending=ee==this.data[0]?void 0:ee>this.data[0]),this.data.push(ee),this.recalculateMinMaxNewPoint($,ee),this}_makeArray($){const ee=this.getTypedArrayClass();return ee?new ee($):Array($)}_setData($=this.data){const ee=$.length;let te=1,re=$[1]>$[0],ie=$[0],ae=$[0];for(this._monotoneous=!0;te<ee;te++)$[te]!==$[te-1]&&re!=$[te]>$[te-1]&&(this._monotoneous=!1),$[te]===$[te]&&(ie=Math.min($[te],ie),ae=Math.max($[te],ae));if(this._monotoneous&&(this._monotoneousAscending=$[1]>$[0]),this.hasErrorBars()){for(te=0;te<ee;te++)$[te]===$[te]&&(ie=Math.min(ie,$[te]-this.getMaxError(te,'below')),ae=Math.max(ae,$[te]+this.getMaxError(te,'above')));this.minY=ie,this.maxY=ae}else this.minY=ie,this.maxY=ae;this.data=$,this.computeXMinMax()}computeXMinMax(){if(this.data&&!this.xdata){const $=this.xOffset+this.xScale*this.getLength(),ee=this.xOffset;this.minX=Math.min($,ee),this.maxX=Math.max($,ee)}}getDataInUse(){return this.dataInUse||this.data}getIndexFromVal($,ee=!1,te=Math.round){let re=ee&&this.dataInUse?this.dataInUse.y:this.data;let ie;return ie=this.getIndexFromData($,re,this.data.getMonotoneousAscending(),te),ee&&this.dataInUse&&'aggregateY'==this.dataInUseType?ie-ie%4:ie}getIndexFromX($,ee=!1,te=Math.round){let re;ee&&this.dataInUse?re=this.dataInUse.x:this.xdata&&(re=this.xdata.getData());let ie;return ie=this.hasXWaveform()?this.xdata.getIndexFromData($,re,this.xdata.getMonotoneousAscending(),te):Math.max(0,Math.min(this.getLength()-1,te(($-this.xOffset)/this.xScale))),ee&&this.dataInUse&&'aggregateX'==this.dataInUseType?ie-ie%4:ie}getIndexFromData($,ee,te){if(!this.isMonotoneous())throw console.trace(),'Impossible to get the index from a non-monotoneous wave !';return $-=this.getShift(),$/=this.getScale(),V($,ee,!te)}getReductionType(){return this.dataInUseType}getXMin(){return(this.xdata?this.xdata.getMin():this.minX)*this.getXScale()+this.getXShift()}getXMax(){return(this.xdata?this.xdata.getMax():this.maxX)*this.getXScale()+this.getXShift()}getYMin(){return this.minY*this.getScale()+this.getShift()}getYMax(){return this.maxY*this.getScale()+this.getShift()}getMin(){return this.minY*this.getScale()+this.getShift()}getMax(){return this.maxY*this.getScale()+this.getShift()}getMinX(){return this.getXMin()}getMaxX(){return this.getXMax()}getMinY(){return this.minY*this.getScale()+this.getShift()}getMaxY(){return this.maxY*this.getScale()+this.getShift()}getDataY(){return this.data}getData($){return $&&this.dataInUse?this.dataInUse.y:this.data}setShift($=0){return this.shift=$,this}getShift(){return this.shift||0}getScale(){return this.scale||1}setScale($=1){this.scale=$}setXShift($=0){return this.hasXWaveform?(this.getXWaveform().setShift($),this):this}getXShift($=0){return this.hasXWaveform?this.getXWaveform().getShift():0}setXScale($=1){return this.hasXWaveform?(this.getXWaveform().setScale($),this):this}getXScale(){return this.hasXWaveform?this.getXWaveform().getScale():1}getLength(){return this.data.length}getDataToUseFlat(){let $,ee=0,te;if(this.dataInUse){$=this.dataInUse.x.length,te=Array(2*$).fill(0);for(var re=0;re<$;re+=1)te[ee]=this.dataInUse.x[re],te[ee+1]=this.dataInUse.y[re],ee+=2}else{$=this.getLength(),te=Array(2*$).fill(0);for(var re=0;re<$;re+=1)te[ee+1]=this.data[re],te[ee]=this.getX(re),ee+=2}return te}fit($){var ee=this;return new Promise(function(te){var ie=new R.default(Object.assign({},{dataY:ee,dataX:ee.getXWaveform(),done:function(ae){te(ae)},waveform:new G},$));ie.init(),ie.fit()})}getX($,ee){return ee&&this.dataInUse?this.dataInUse.x[$]*this.getXScale()+this.getXShift():this.xdata?this.xdata.data[$]*this.getXScale()+this.getXShift():this.xOffset+$*this.xScale}getXRaw($,ee){return ee&&this.dataInUse?this.dataInUse.x[$]:this.xdata?this.xdata.data[$]:$}_integrateP($=0,ee=this.getLength()-1){if($=Math.round($),ee=Math.round(ee),$>ee){let oe=$;$=ee,ee=oe}var te=ee-$+1,re=0;let ae=0,se;for(var ne=this.getData();$<=ee;$++)ne.length-1>$&&(se=this.getX($+1)-this.getX($),ae+=se,re+=ne[$]*se);return[re,te,ae]}integrateP($,ee){var te=this._integrateP($,ee);return te[0]}integrate($,ee){return this.integrateP(this.getIndexFromX($),this.getIndexFromX(ee))}average($=0,ee=this.getLength()-1){return this.getAverageP($,ee)}mean(){return this.average()}getAverageP($,ee){var te=this._integrateP($,ee);return te[0]/te[2]}getAverageX($,ee){var te=this._integrateX($,ee);return te[0]/te[2]}checkMonotonicity(){let $=1,ee=this.getData();const te=this.data.length;for(let re=ee[1]>ee[0];$<te;$++)if(ee[$]!==ee[$-1]&&re!==ee[$]>ee[$-1])return this._monotoneous=!1;return this._monotoneousAscending=ee[1]>ee[0],this._monotoneous=!0}requireXMonotonicity(){this.xdata&&this.xdata.requireMonotonicity()}requireMonotonicity(){if(!this.isMonotoneous())throw'The wave must be monotonic'}isMonotoneous(){return!!this._monotoneous}isXMonotoneous(){return!this.xdata||this.xdata.isMonotoneous()}invert(){let ee=dataY||this.data;return ee.reverse(),this.isMonotoneous()&&(this._monotoneousAscending=!this._monotoneousAscending),ee}resampleForDisplay($){let ee=0;this.requireXMonotonicity();let te=!1,re=this.getDataY(),ie={x:[],y:[]},ae=[],ue=!1,he=0,se,ne,oe,le,pe,de,ge,ce;const xe=this.getLength();if(!$.xPosition)throw'No position calculation method provided';if(!$.resampleToPx)throw'No "resampleToPx" method was provided. Unit: px per point';if($.minX>$.maxX){let me=$.minX;$.minX=$.maxX,$.maxX=me}for((this.xdata&&!this.xdata.getMonotoneousAscending()||!this.xdata&&-0>this.xScale)&&(te=!0,ee=xe);te?0<ee:ee<xe;te?ee--:ee++){if(ce=this.getX(ee),$.minX>ce){he=ee;continue}if(ge=$.xPosition(ce),!ue){for(he?(ie.x.push(ce),ie.y.push(re[he])):he=ee;isNaN(re[ee]);)te?ee--:ee++;se=ne=oe=re[he],le=1,de=ge,pe=ce,he=0,ue=!0;continue}if(Math.abs(ge-de)>$.resampleToPx||ee==xe||0==ee||isNaN(re[ee])){let me=(pe+ce)/2;if(ie.x.push(me),ie.y.push(se/le),ae.push(me,ne,oe),void 0!==$.maxX&&ce>$.maxX)break;ue=!1;continue}se+=re[ee],le++,ne=Math.min(ne,re[ee]),oe=Math.max(oe,re[ee])}return this.dataInUseType='resampled',this.dataInUse=ie,ae}interpolate($){let ee,te=this.getDataY();if(this.xdata){let re=this.xdata.getData(),ie=V($,re,!this.xdata.getMonotoneousAscending());return re[ie]==$?te[ie]:($-re[ie])/(re[ie+1]-re[ie])*(te[ie+1]-te[ie])+te[ie]}ee=($-this.xOffset)/this.xScale;let re=Math.floor(ee);return(ee-re)*(te[re+1]-te[re])+te[re]}getMonotoneousAscending(){return this.isMonotoneous()?this._monotoneousAscending:'The waveform is not monotoneous'}getXMonotoneousAscending(){return this.xdata?this.xdata.getMonotoneousAscending():0<this.xScale}isXMonotoneousAscending(){return this.getXMonotoneousAscending(...arguments)}divide($){return this._arithmetic($,J)}divideBy(){return this.divide(...arguments)}multiply($){return this._arithmetic($,Z)}multiplyBy(){return this.multiply(...arguments)}log(){return this.logBase(10)}ln(){return this.logBase(Math.E)}logBase($){let ee=Math.log($);this.data.map(te=>{return Math.log(te)/ee})}add($){return this._arithmetic($,K)}addBy(){return this.add(...arguments)}subtract($){return this._arithmetic($,Q)}subtractBy(){return this.subtract(...arguments)}math($){for(var ee=0;ee<this.getLength();ee++)this.data[ee]=$(this.getY(ee),this.getX(ee));return this._setData(this.data),this}_arithmetic($,ee){if($ instanceof G)return this._waveArithmetic($,ee);return'number'==typeof $?this._numberArithmetic($,ee):void 0}_numberArithmetic($,ee){let te=0,re=this.getLength();if(ee==Z){for(;te<re;te++)this.data[te]*=$;this.minY*=$,this.maxY*=$}else if(ee==J){for(;te<re;te++)this.data[te]/=$;this.minY/=$,this.maxY/=$}else if(ee==K){for(;te<re;te++)this.data[te]+=$;this.minY+=$,this.maxY+=$}else if(ee==Q){for(;te<re;te++)this.data[te]-=$;this.minY-=$,this.maxY-=$}return this}_waveArithmetic($,ee){let te=this.getDataY(),re=0;const ie=this.getLength();if(this.requireXMonotonicity(),$.requireXMonotonicity(),ee==Z)for(;re<ie;re++)te[re]*=$.interpolate(this.getX(re));else if(ee==J)for(;re<ie;re++)te[re]/=$.interpolate(this.getX(re));else if(ee==K)for(;re<ie;re++)te[re]+=$.interpolate(this.getX(re));else if(ee==Q)for(;re<ie;re++)te[re]-=$.interpolate(this.getX(re));return this._setData(te),this}aggregate($='x'){this._dataAggregating={},this._dataAggregated={},this._dataAggregationDirection=$.toUpperCase();var ee=F(this.getLength());this._dataAggregating=(0,U.default)({minX:this.minX,maxX:this.maxX,minY:this.minY,maxY:this.maxY,data:this.data,xdata:this.xdata?this.xdata.getData():void 0,xScale:this.xScale,xOffset:this.xOffset,numPoints:ee,direction:$}).then(te=>{this._dataAggregated=te.aggregates,this._dataAggregating=!1})}hasAggregation(){return!!this._dataAggregated}selectAggregatedData($){if(2>$)return!1;var ee=O($);return this._dataAggregated[ee]?(this.dataInUseType='aggregate'+this._dataAggregationDirection,void(this.dataInUse=this._dataAggregated[ee])):this._dataAggregating?this._dataAggregating:void(this.dataInUseType='none',this.dataInUse={y:this.data,x:this.getXWaveform().data})}duplicate($){var ee=new G;return ee._setData(this.getDataY().slice()),ee.rescaleX(this.xOffset,this.xShift),ee.setShift(this.getShift()),ee.setScale(this.getScale()),this.xdata?($?ee.setXWaveform(this.xdata.duplicate()):ee.setXWaveform(this.xdata),ee.setXShift(this.getXShift()),ee.setXScale(this.getXScale())):(ee.xOffset=this.xOffset,ee.xScale=this.xScale),ee}subrangeX($,ee){if(!this.xdata){let ae=this.getIndexFromX($),se=this.getIndexFromX(se);return new G().setData(this.data.slice(ae,se)).rescaleX(this.xOffset,this.xScale)}for(var te=new G,re=0,ie=this.data.length;re<ie;re++)this.data[re]>=$&&this.data[re]<ee&&te.append(this.dataX[re],this.data[re]);return te}findLocalMinMax($,ee,te){let re=this.getIndexFromX($),ie=this.getIndexFromX($+ee),ae=this.getIndexFromX($-ee);return this.findLocalMinMaxIndex(ae,ie,te)}findLocalMinMaxIndex($,ee,te){let re;ee<$&&(re=ee,ee=$,$=re);let ie,ae;if('max'==te){ie=Number.NEGATIVE_INFINITY;for(var se=$;se<=ee;se++)this.getY(se)>ie&&(ie=this.getY(se),ae=se)}else{ie=Number.POSITIVE_INFINITY;for(var se=$;se<=ee;se++)this.getY(se)<ie&&(ie=this.getY(se),ae=se)}return ae==$||ae==ee?!1:this.getX(ae)}warn($){console&&console.warn($)}setUnit($){return this.unit=$,this}setXUnit($){return this.hasXWaveform()&&this.xdata.setUnit($),this.xunit=$,this}getUnit(){return this.unit||''}getXUnit(){return this.hasXWaveform()?this.xdata.getUnit():''|this.xunit}hasXUnit(){return 0<this.getXUnit().length}hasUnit(){return 0<this.getUnit().length}findLevels($,ee){ee=Object.assign({box:1,edge:'both',rounding:'before',rangeP:[0,this.getLength()]},ee);for(var te=ee.rangeP[0],ie=[],ae=0,re;re=this.findLevel($,Object.assign({},ee,{rangeP:[te,ee.rangeP[1]]}));)if(ie.push(re),te=Math.ceil(re),ae++,1e3<ae)return;return ie}findLevel($,ee){ee=Object.assign({box:1,edge:'both',direction:'ascending',rounding:'before',rangeP:[0,this.getLength()]},ee),ee.rangeX&&(ee.rangeP=ee.rangeX.map(this.getIndexFromX));var te,re,ie,ae,se,ne,oe=ee.box;for(0==oe%2&&oe++,'descending'==ee.direction?(ie=ee.rangeP[1],se=ee.rangeP[0],ne=-1):(ie=ee.rangeP[0],se=ee.rangeP[1],ne=1);;ie+=ne){if('descending'==ee.direction){if(ie<se)break;}else if(ie>se)break;if(!(ie<ee.rangeP[0]+(oe-1)/2)){if(ie>ee.rangeP[1]-(oe-1)/2)break;if(te=this.getAverageP(ie-(oe-1)/2,ie+(oe-1)/2),void 0==re){re=te<$;continue}if(te>=$&&re){if(re=!1,'ascending'==ee.edge||'both'==ee.edge)for(ae=ie+(oe-1)/2;ae>=ie-(oe-1)/2;ae--)if(this.data[ae]>=$&&this.data[ae-1]<$)switch(ee.rounding){case'before':return ae-1;break;case'after':return ae;break;case'interpolate':return W($,this.data[ae],this.data[ae-1],ae,ae-1);}}else if(te<=$&&!re&&(re=!0,'descending'==ee.edge||'both'==ee.edge))for(ae=ie+(oe-1)/2;ae>=ie-(oe-1)/2;ae--)if(this.data[ae]<=$&&this.data[ae-1]>$)switch(ee.rounding){case'before':return ae-1;break;case'after':return ae;break;case'interpolate':return W($,this.data[ae],this.data[ae-1],ae,ae-1);}}}}normalize($){let ee,te,re,ie,ae,se;if('max1'==$||'max100'==$){for(ee=1,'max100'==$&&(ee=100),ie=this.data[0],se=1;se<this.getLength();se++)this.data[se]>ie&&(ie=this.data[se]);for(se=0;se<this.getLength();se++)this.data[se]/=ie/ee}else if('sum1'==$){for(te=0,se=0;se<this.getLength();se++)te+=this.data[se];for(se=0;se<this.getLength();se++)this.data[se]/=te}else if('max1min0'==$){for(ie=this.data[0],re=this.data[0],se=1;se<this.getLength();se++)this.data[se]>ie?ie=this.data[se]:this.data[se]<re&&(re=this.data[se]);for(ae=1/(ie-re),se=0;se<this.getLength();se++)this.data[se]=(this.data[se]-re)*ae}this.setData(this.data)}setErrorBarX($){Array.isArray($)&&($=new G($));var ee=this.getXWaveform();return ee.setErrorBar($),this}setErrorBarXBelow($){Array.isArray($)&&($=new G($));var ee=this.getXWaveform();return ee.setErrorBarBelow($),this}setErrorBarXAbove($){Array.isArray($)&&($=new G($));var ee=this.getXWaveform();return ee.setErrorBarAbove($),this}setErrorBoxX($){Array.isArray($)&&($=new G($));var ee=this.getXWaveform();return ee.setErrorBoxAbove($),ee.setErrorBoxBelow($),this}setErrorBoxXBelow($){Array.isArray($)&&($=new G($));var ee=this.getXWaveform();return ee.setErrorBoxBelow($),this}setErrorBoxXAbove($){Array.isArray($)&&($=new G($));var ee=this.getXWaveform();return ee.setErrorBoxAbove($),this}setErrorBar($,ee=!0){Array.isArray($)&&($=new G($)),this.errors.nb++,this.errors.nb++,this.errors.bars.bottom=$,this.errors.bars.top=$,ee&&this._setData()}setErrorBarBelow($,ee=!0){Array.isArray($)&&($=new G($)),this.errors.nb++,this.errors.bars.below=$,ee&&this._setData()}setErrorBarAbove($,ee=!0){Array.isArray($)&&($=new G($)),this.errors.nb++,this.errors.bars.above=$,ee&&this._setData()}setErrorBox($,ee=!0){Array.isArray($)&&($=new G($)),this.errors.nb++,this.errors.nb++,this.errors.boxes.above=$,this.errors.boxes.below=$,ee&&this._setData()}setErrorBoxBelow($,ee=!0){Array.isArray($)&&($=new G($)),this.errors.nb++,this.errors.boxes.below=$,ee&&this._setData()}setErrorBoxAbove($,ee=!0){Array.isArray($)&&($=new G($)),this.errors.boxes.above=$,ee&&this._setData()}getMaxError($,ee=G.ABOVE){return Math.max(this.getMaxErrorType($,ee,G.BOX),this.getMaxErrorType($,ee,G.BAR))}getMaxErrorType($,ee=G.ABOVE,te=G.BOX){let re;if(te==G.BOX)re=this.errors.boxes;else if(te==G.BAR)re=this.errors.bars;else throw'Unknown type of error';let ie;return(ie=re[ee])||(ee==G.ABOVE?re[ee]==G.BELOW&&(ie=re.below):re[ee]==G.ABOVE&&(ie=re.above)),ie?ie.getY($):0}getErrorBarXBelow($){return this.getErrorX($,G.BELOW,G.BAR)}getErrorBarXAbove($){return this.getErrorX($,G.ABOVE,G.BAR)}getErrorBoxXBelow($){return this.getErrorX($,G.BELOW,G.BOX)}getErrorBoxXAbove($){return this.getErrorX($,G.ABOVE,G.BOX)}getErrorBarYBelow($){return this.getError($,G.BELOW,G.BAR)}getErrorBarYAbove($){return this.getError($,G.ABOVE,G.BAR)}getErrorBoxYBelow($){return this.getError($,G.BELOW,G.BOX)}getErrorBoxYAbove($){return this.getError($,G.ABOVE,G.BOX)}getErrorX($,ee=G.ABOVE,te=G.BAR){return!!this.hasXWaveform()&&this.xdata.getError($,ee,te)}getError($,ee=G.ABOVE,te=G.BAR){let re=te==G.BAR?this.errors.bars:this.errors.boxes;if(!re)return!1;let ie;if(ie=ee==G.ABOVE?re.above:re.below)return ie==G.ABOVE&&ee==G.BELOW?ie=re.above:ie==G.BELOW&&ee==G.ABOVE&&(ie=re.below),!!ie&&ie.getY($)}hasErrorBars(){return 0<this.errors.nb||this.hasXWaveform()&&0<this.xdata.errors.nb}}G.BELOW=Symbol(),G.ABOVE=Symbol(),G.BOX=Symbol(),G.BAR=Symbol();const Z=Symbol(),K=Symbol(),Q=Symbol(),J=Symbol();X.default=G,T.exports=X['default']})},function(u,A){var C,P,E;(function(T,X){P=[u,A],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X){'use strict';Object.defineProperty(X,'__esModule',{value:!0});class I{constructor(B,O,F,W){this.LMITER=100,this.LMBOOST=2,this.LMSHRINK=0.1,this.LAMBDAZERO=1e-3,this.LAMBDAMAX=1E9,this.LMTOL=1e-12,this.BIGVAL=9e99,this.sos,this.sosprev,this.lambda,this.myH=null,this.nadj=0,this.npts=0,this.delta,this.beta,this.alpha,this.amatrix,this.myH=B,this.nadj=O,this.npts=F,this.delta=Array(this.nadj).fill(0),this.beta=Array(this.nadj).fill(0),this.alpha=Array(this.nadj).fill(0),this.amatrix=Array(this.nadj).fill(0),this.alpha=this.alpha.map(()=>Array(this.nadj)),this.amatrix=this.amatrix.map(()=>Array(this.nadj)),this.lambda=this.LAMBDAZERO;var V=0,R=!1;do R=this.bLMiter(),W&&W(this.myH.params),V++;while(!R&&V<this.LMITER)}bLMiter(){for(var B=0;B<this.nadj;B++)this.delta[B]=0;if(this.sos=this.myH.nudge(this.delta),this.sos==this.BIGVAL)return console.error('  bLMiter finds faulty initial nudge()'),!1;if(this.sosprev=this.sos,console.log('  bLMiter..SumOfSquares= '+this.sos),!this.myH.buildJacobian())return console.error('  bLMiter finds buildJacobian()=false'),!1;for(var B=0;B<this.nadj;B++){this.beta[B]=0;for(var O=0;O<this.npts;O++)this.beta[B]-=this.myH.getResidualElement(O)*this.myH.getJacobianElement(O,B)}for(var B=0;B<this.nadj;B++)for(var F=0;F<this.nadj;F++){this.alpha[F][B]=0;for(var O=0;O<this.npts;O++)this.alpha[F][B]+=this.myH.getJacobianElement(O,F)*this.myH.getJacobianElement(O,B)}var W=0;do{for(var B=0;B<this.nadj;B++)for(var F=0;F<this.nadj;F++)this.amatrix[F][B]=this.alpha[F][B]+(F==B?this.lambda:0);this.gaussj(this.amatrix,this.nadj);for(var B=0;B<this.nadj;B++){this.delta[B]=0;for(var F=0;F<this.nadj;F++)this.delta[B]+=this.amatrix[F][B]*this.beta[F]}if(this.sos=this.myH.nudge(this.delta),this.sos==this.BIGVAL)return console.error('  LMinner failed SOS step'),!1;if(W=(this.sos-this.sosprev)/(1+this.sos),0>=W){this.lambda*=this.LMSHRINK;break}for(var V=0;V<this.nadj;V++)this.delta[V]*=-1;if(this.myH.nudge(this.delta),W<this.LMTOL)break;this.lambda*=this.LMBOOST}while(this.lambda<this.LAMBDAMAX);return W>-this.LMTOL||this.lambda>this.LAMBDAMAX}gaussj(B,O){var F=1,W,V,R,U,G,Z,K=Array(100),Q=Array(100);for(G=0;G<O;G++){for(W=0,R=G;R<O;R++)for(U=G;U<O;U++)Math.abs(W)<=Math.abs(B[R][U])&&(W=B[R][U],K[G]=R,Q[G]=U);if(0==W)return 0;if(R=K[G],R>G)for(U=0;U<O;U++)V=B[G][U],B[G][U]=B[R][U],B[R][U]=-V;if(U=Q[G],U>G)for(R=0;R<O;R++)V=B[R][G],B[R][G]=B[R][U],B[R][U]=-V;for(R=0;R<O;R++)R!=G&&(B[R][G]=-B[R][G]/W);for(R=0;R<O;R++)for(U=0;U<O;U++)R!=G&&U!=G&&(B[R][U]+=B[R][G]*B[G][U]);for(U=0;U<O;U++)U!=G&&(B[G][U]/=W);B[G][G]=1/W,F*=W}for(Z=0;Z<O;Z++){if(G=O-Z-1,U=K[G],U>G)for(R=0;R<O;R++)V=B[R][G],B[R][G]=-B[R][U],B[R][U]=V;if(R=Q[G],R>G)for(U=0;U<O;U++)V=B[G][U],B[G][U]=-B[R][U],B[R][U]=V}return F}}X.default=class{constructor(B){this.DELTAP=1e-6,this.BIGVAL=9e99,this.WEIGHT=1,console.log(B),this.setYData(B.dataY),this.setXData(B.dataX),this.setWeight(B.weight),this.setInitialParams(B.params),B.subsetIndex&&this.setSubset(...B.subsetIndex),this.setFunction(B.function),B.progress&&this.hookIteration(B.progress),this.options=B}setYData(B){this.data=B}setXData(B){this.dataX=B}setWeight(B){this.weight=B}setInitialParams(B){this.parms=B,this.parms=this.parms.map(O=>{return'function'==typeof O?O(this.data,this.dataX):O}),this.NPARMS=B.length}setSubset(B,O){B!==void 0&&O!==void 0&&(this._from=B,this._to=O)}hookIteration(B){this._hookIteration=O=>{let F=this.buildFit(O,200);B(F)}}setFunction(B){this._func=B}init(){if(void 0!==this._from&&void 0!==this._to){if(this._from>=this._to)throw'Impossible to fit negative subranges. The starting index must be lower than the ending index';if(this.NPTS=this._to-this._from+1,this.data&&this.data.getLength()<=this._to)throw'Wave Y has not enough point to be fitted to subrange ['+this._from+', '+this._to+']';if(0>this._from)throw'Impossible to fit a subrange with negative indices'}else this.NPTS=this.data.getLength(),this._from=0,this._to=this.data.getLength()-1;if(this.dataX&&this.dataX.getLength()<=this._to)throw'Wave X has not enough point to be fitted to subrange ['+this._from+', '+this._to+']';this.arrY=this.data.getDataY(),this.arrX=this.dataX?this.dataX.getDataY():this.data.getDataX(),this.resid=Array(this.NPTS).fill(0),this.jac=Array(this.NPTS).fill(0),this.jac=this.jac.map(()=>Array(this.NPARMS))}fit(){return this.log('Starting the fit with initial parameter list {'+this.parms.join()+'};'),new I(this,this.NPARMS,this.NPTS,this._hookIteration),this.log('Fit successful. Output parameters {'+this.parms.join()+'};'),this._result=this.buildFit(this.parms,200),this.options.done&&this.options.done(this.parms,this._result),this._result}func(B,O){return this._func(B,O)}computeResiduals(){for(var B=0,O=0;O<this.NPTS;O++)this.resid[O]=(this.func(this.arrX[O+this._from],this.parms)-this.arrY[O+this._from])*this.WEIGHT,B+=this.resid[O]*this.resid[O];return B}log(B){console.log(B)}nudge(B){for(var O=0;O<this.NPARMS;O++)this.parms[O]+=B[O];return this.computeResiduals()}buildJacobian(){for(var B=Array(this.NPARMS),O=0.5/this.DELTAP,F=0,W=0;W<this.NPARMS;W++){for(var V=0;V<this.NPARMS;V++)B[V]=V==W?this.DELTAP:0;if(F=this.nudge(B),F==this.BIGVAL)throw'Bad dBuildJacobian() exit 2';for(var R=0;R<this.NPTS;R++)this.jac[R][W]=this.getResidualElement(R);for(var V=0;V<this.NPARMS;V++)B[V]=V==W?-2*this.DELTAP:0;if(F=this.nudge(B),F==this.BIGVAL)throw'Bad dBuildJacobian(). exit 3';for(var R=0;R<this.NPTS;R++)this.jac[R][W]-=this.getResidualElement(R);for(var R=0;R<this.NPTS;R++)this.jac[R][W]*=O;for(var V=0;V<this.NPARMS;V++)B[V]=V==W?this.DELTAP:0;if(F=this.nudge(B),F==this.BIGVAL)throw'Bad dBuildJacobian(). exit 4'}return!0}getResidualElement(B){return this.resid[B]}getJacobianElement(B,O){return this.jac[B][O]}buildFit(B,O){let F;if(!O)F=this.arrX;else{const G=this.dataX.getMin(this._from,this._to),Z=this.dataX.getMax(this._from,this._to);F=Array(O).fill(0).map((K,Q)=>Q*(Z-G)/(O-1)+G)}for(var W=Array(F.length),V=0,R=F.length;V<R;V++)W[V]=this.func(F[V],this.parms);let U=this.options.waveform;return U.setData(W,F),U}},T.exports=X['default']})},function(u,A){var C,P,E;(function(T,X){P=[u,A],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X){'use strict';Object.defineProperty(X,'__esModule',{value:!0}),X.default=function(F){var W=Date.now();F._queueId=W;var V=new Promise(R=>{I[W]=R});return Y.postMessage(F),V};var Y,I={};let B=function(){onmessage=function(F){const W=F.data.data,V=F.data.maxX,R=F.data.minX,U=F.data.maxY,G=F.data.minY,Z=F.data.direction;let K=F.data.numPoints,Q=W.length,J=0,$=-4,ee=[],te=[],re=[],ie=[],ae;ae=F.data.xdata?function(oe){return F.data.xdata[oe]}:function(oe){return oe*F.data.xScale+F.data.xOffset};let se={};if('x'==Z)for(const ne=K/(V-R);J<Q;J++){if(slotNumber=Math.floor((ae(J)-R)*ne),ee[$]!==slotNumber){$+=4,ee[$]=slotNumber;let oe=(slotNumber+0.5)/ne+R;te[$]=oe,te[$+1]=oe,te[$+2]=oe,te[$+3]=oe,re[$]=W[J],re[$+1]=W[J],re[$+2]=W[J],re[$+3]=W[J],ie[$]=0}re[$+1]=Math.min(W[J],re[$+1]),re[$+2]=Math.max(W[J],re[$+2]),re[$+3]=W[J],ie[$]+=W[J]}else for(const ne=K/(U-G);J<Q;J++){if(slotNumber=Math.floor((W[J]-G)*ne),ee[$]!==slotNumber){$+=4,ee[$]=slotNumber;let oe=(slotNumber+0.5)/ne+G;re[$]=oe,re[$+1]=oe,re[$+2]=oe,re[$+3]=oe,te[$]=W[J],te[$+1]=W[J],te[$+2]=W[J],te[$+3]=W[J],ie[$]=0}te[$+1]=Math.min(ae(J),te[$+1]),te[$+2]=Math.max(ae(J),te[$+2]),te[$+3]=ae(J),ie[$]+=ae(J)}for(se[K]={x:te,y:re,sums:ie},lastAggregation=re,lastAggregationX=te,lastAggregationSum=ie;256<K;){if(K/=2,newAggregation=[],newAggregationX=[],$=0,'x'==Z)for(J=0,Q=lastAggregation.length-8;J<Q;J+=8)newAggregationX[$]=(lastAggregationX[J]+lastAggregationX[J+4])/2,newAggregationX[$+1]=newAggregationX[$],newAggregationX[$+2]=newAggregationX[$],newAggregationX[$+3]=newAggregationX[$],newAggregation[$]=lastAggregation[J],newAggregation[$+1]=Math.min(lastAggregation[J+1],lastAggregation[J+5]),newAggregation[$+2]=Math.max(lastAggregation[J+2],lastAggregation[J+6]),newAggregation[$+3]=lastAggregation[J+7],ie[$]=(lastAggregationSum[J]+lastAggregationSum[J+4])/2,$+=4;else for(J=0,Q=lastAggregation.length-8;J<Q;J+=8)newAggregation[$]=(lastAggregation[J]+lastAggregation[J+4])/2,newAggregation[$+1]=newAggregation[$],newAggregation[$+2]=newAggregation[$],newAggregation[$+3]=newAggregation[$],newAggregationX[$]=lastAggregationX[J],newAggregationX[$+1]=Math.min(lastAggregationX[J+1],lastAggregationX[J+5]),newAggregationX[$+2]=Math.max(lastAggregationX[J+2],lastAggregationX[J+6]),newAggregationX[$+3]=lastAggregationX[J+7],ie[$]=(lastAggregationSum[J]+lastAggregationSum[J+4])/2,$+=4;se[K]={x:newAggregationX,y:newAggregation,sums:ie},lastAggregation=newAggregation,lastAggregationX=newAggregationX,lastAggregationSum=ie,ie=[]}postMessage({aggregates:se,_queueId:F.data._queueId})}}.toString();B=B.split('\n'),B.pop(),B.shift();var O=URL.createObjectURL(new Blob([B.join('\n')],{type:'application/javascript'}));Y=new Worker(O),Y.onmessage=function(F){var W=F.data._queueId;delete F.data._queueId,I[W](F.data),delete I[W]};T.exports=X['default']})},function(u,A,S){var C,P,E;(function(T,X){P=[u,A,S(2),S(3)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y,I){'use strict';function F(G){try{return G.getBBox()}catch(Z){return{height:0,width:0,x:0,y:0}}}Object.defineProperty(X,'__esModule',{value:!0});var W=function(G){return G&&G.__esModule?G:{default:G}}(Y),V=function(G){if(G&&G.__esModule)return G;var Z={};if(null!=G)for(var K in G)Object.prototype.hasOwnProperty.call(G,K)&&(Z[K]=G[K]);return Z.default=G,Z}(I),R={backgroundColor:'rgba(255, 255, 255, 0.8)',frame:!0,frameWidth:1,frameColor:'black',paddingTop:10,paddingLeft:10,paddingBottom:10,paddingRight:10,frameRounding:0,movable:!1,shapesToggleable:!0,isSerieHideable:!0,isSerieSelectable:!0};class U{constructor(G,Z){this.options=V.extend({},R,Z),this.graph=G,this.svg=document.createElementNS(this.graph.ns,'g'),this.subG=document.createElementNS(this.graph.ns,'g'),this.groups=[],this.rect=document.createElementNS(this.graph.ns,'rect'),this.rectBottom=document.createElementNS(this.graph.ns,'rect'),this.rect.setAttribute('x',0),this.rect.setAttribute('y',0),this.rectBottom.setAttribute('x',0),this.rectBottom.setAttribute('y',0),this.series=!1,this.svg.setAttribute('display','none'),this.pos={x:void 0,y:void 0,transformX:0,transformY:0},this.setEvents(),this.eyeId=V.guid(),this.eyeCrossedId=V.guid();var K=V.SVGParser('<svg xmlns="http://www.w3.org/2000/svg"><symbol id="'+this.eyeCrossedId+'" viewBox="0 -256 1850 1850"><rect pointer-events="fill" fill="transparent" x="-256" y="0" width="2106" height="1850" /><g transform="matrix(1,0,0,-1,30.372881,1214.339)"><path d="m 555,201 78,141 q -87,63 -136,159 -49,96 -49,203 0,121 61,225 Q 280,812 128,576 295,318 555,201 z m 389,759 q 0,20 -14,34 -14,14 -34,14 -125,0 -214.5,-89.5 Q 592,829 592,704 q 0,-20 14,-34 14,-14 34,-14 20,0 34,14 14,14 14,34 0,86 61,147 61,61 147,61 20,0 34,14 14,14 14,34 z m 363,191 q 0,-7 -1,-9 Q 1201,954 991,576 781,198 675,9 l -49,-89 q -10,-16 -28,-16 -12,0 -134,70 -16,10 -16,28 0,12 44,87 Q 349,154 228.5,262 108,370 20,507 0,538 0,576 q 0,38 20,69 153,235 380,371 227,136 496,136 89,0 180,-17 l 54,97 q 10,16 28,16 5,0 18,-6 13,-6 31,-15.5 18,-9.5 33,-18.5 15,-9 31.5,-18.5 16.5,-9.5 19.5,-11.5 16,-10 16,-27 z m 37,-447 Q 1344,565 1265,450.5 1186,336 1056,286 l 280,502 q 8,-45 8,-84 z m 448,-128 q 0,-35 -20,-69 Q 1733,443 1663,362 1513,190 1315.5,95 1118,0 896,0 l 74,132 q 212,18 392.5,137 180.5,119 301.5,307 -115,179 -282,294 l 63,112 q 95,-64 182.5,-153 87.5,-89 144.5,-184 20,-34 20,-69 z" fill="#c0c0c0"></path></g></symbol></svg>'),Q=V.SVGParser('<svg xmlns="http://www.w3.org/2000/svg"><symbol id="'+this.eyeId+'" viewBox="0 -256 1850 1850"><rect pointer-events="fill" x="-256" y="0" fill="transparent" width="2106" height="1850" /><g transform="matrix(1,0,0,-1,30.372881,1259.8983)"><path d="m 1664,576 q -152,236 -381,353 61,-104 61,-225 0,-185 -131.5,-316.5 Q 1081,256 896,256 711,256 579.5,387.5 448,519 448,704 448,825 509,929 280,812 128,576 261,371 461.5,249.5 662,128 896,128 1130,128 1330.5,249.5 1531,371 1664,576 z M 944,960 q 0,20 -14,34 -14,14 -34,14 -125,0 -214.5,-89.5 Q 592,829 592,704 q 0,-20 14,-34 14,-14 34,-14 20,0 34,14 14,14 14,34 0,86 61,147 61,61 147,61 20,0 34,14 14,14 14,34 z m 848,-384 q 0,-34 -20,-69 Q 1632,277 1395.5,138.5 1159,0 896,0 633,0 396.5,139 160,278 20,507 0,542 0,576 q 0,34 20,69 140,229 376.5,368 236.5,139 499.5,139 263,0 499.5,-139 236.5,-139 376.5,-368 20,-35 20,-69 z" fill="#444444" /></g></symbol></svg>');this.svg.appendChild(document.adoptNode(Q.documentElement.firstChild)),this.svg.appendChild(document.adoptNode(K.documentElement.firstChild)),this.svg.appendChild(this.subG),this.applyStyle()}setPosition(G,Z,K){G&&(this.position=G,this.alignToX=Z||'left',this.alignToY=K||'top')}setDraggable(G){this.options.movable=G}setAutoPosition(G){return-1<['bottom','left','top','right'].indexOf(G=G.toLowerCase())?(this.autoPosition=G,this):void(this.requireDelayedUpdate(),this.autoPosition=!1)}autoPosition(){return this.setAutoPosition(...arguments)}buildLegendBox(){var G=this.series||this.graph.getSeries(),Z=0,K=this.options.paddingTop;this.autoPosition?this.graph.getDom().appendChild(this.getDom()):this.graph.graphingZone.appendChild(this.getDom());for(var Q=0,J=G.length;Q<J;Q++)if(!G[Q].excludedFromLegend||this.series){if('bottom'==this.autoPosition||'top'==this.autoPosition){var $=F(this.groups[Q]);Z+$.width>this.graph.getDrawingWidth()-this.options.paddingRight&&(K+=16,Z=0)}this.groups[Q].setAttribute('transform','translate( '+Z+', '+K+')'),'bottom'==this.autoPosition||'top'==this.autoPosition?(Z+=$.width+10,K+=0):(Z=0,K+=16)}var $=F(this.subG);switch(this.width=$.width+this.options.paddingRight+this.options.paddingLeft,this.height=$.height+this.options.paddingBottom+this.options.paddingTop,this.rect.setAttribute('width',this.width),this.rect.setAttribute('height',this.height),this.rect.setAttribute('fill','none'),this.rect.setAttribute('pointer-events','fill'),this.rect.setAttribute('display','none'),this.options.movable&&(this.rectBottom.style.cursor='move'),this.rectBottom.setAttribute('width',this.width),this.rectBottom.setAttribute('height',this.height),this.rectBottom.setAttribute('x',$.x-this.options.paddingLeft),this.rectBottom.setAttribute('y',$.y-this.options.paddingTop),this.position=this.position||{},this.autoPosition){case'bottom':this.position.y=this.graph.getHeight()+'px',this.position.x=(this.graph.getWidth()-this.width)/2+'px',this.alignToY='bottom',this.alignToX=!1;break;case'left':this.position.x='6px',this.position.y=(this.graph.getHeight()-this.height)/2+'px',this.alignToX='left',this.alignToY=!1;break;case'right':this.position.x=this.graph.getWidth()+'px',this.position.y=(this.graph.getHeight()-this.height)/2+'px',this.alignToX='right',this.alignToY=!1;break;case'top':this.position.x=(this.graph.getWidth()-this.width)/2+'px',this.position.y='10px',this.alignToY='top',this.alignToX=!1;}if(this.autoPosition){switch(this.autoPosition){case'bottom':this.graph.options.paddingBottom=this.height+10;break;case'left':this.graph.options.paddingLeft=this.width+5;break;case'right':this.graph.options.paddingRight=this.width+10;break;case'top':this.graph.options.paddingTop=this.height+14;}this.graph.updateGraphingZone(),this.graph.getDrawingHeight(),this.graph.getDrawingWidth()}this.bbox=$}calculatePosition(){var G=W.default.check(this.position);let Z=G.compute(this.graph,this.graph.getXAxis(),this.graph.getYAxis());Z&&('right'==this.alignToX&&(Z.x-=this.width,Z.x+=this.bbox.x),'bottom'==this.alignToY?(Z.y-=this.height,Z.y+=this.bbox.y):Z.y+=this.bbox.y,this.pos.transformX=Z.x,this.pos.transformY=Z.y,this._setPosition())}update(G){if(!(this.graph.isDelayedUpdate()||!this._requiredUpdate&&G)){this._requiredUpdate=!1;var Z=this;for(this.applyStyle();this.subG.hasChildNodes();)this.subG.removeChild(this.subG.lastChild);this.svg.insertBefore(this.rectBottom,this.svg.firstChild);var K=this.series||this.graph.getSeries();if(0<K.length)this.svg.setAttribute('display','block');else return;if('bottom'==this.autoPosition||'top'==this.autoPosition)this.graph.getDrawingWidth();for(var ie=0,ae=K.length;ie<ae;ie++)(!K[ie].excludedFromLegend||this.series)&&function(se){var ne,oe,le;if('bottom'==this.autoPosition||'top'==this.autoPosition)this.graph.getDrawingWidth();ne=document.createElementNS(Z.graph.ns,'g');var ge=document.createElementNS(Z.graph.ns,'rect');Z.subG.appendChild(ne),ne.appendChild(ge);var oe=K[se].getSymbolForLegend(),ue=K[se].getMarkerForLegend(),le=K[se].getTextForLegend(),he=35;if(this.isHideable()){he+=20;var ce=document.createElementNS(Z.graph.ns,'use');ce.setAttributeNS('http://www.w3.org/1999/xlink','xlink:href','#'+(K[ie].isShown()?this.eyeId:this.eyeCrossedId)),ce.setAttribute('width',15),ce.setAttribute('height',15),ce.setAttribute('x',35),ce.setAttribute('y',-8),ce.addEventListener('click',function(me){me.stopPropagation();var fe;K[se].isShown()?(K[se].hide(Z.options.hideShapesOnHideSerie),fe=Z.eyeCrossedId):(K[se].show(Z.options.hideShapesOnHideSerie),fe=Z.eyeId),ce.setAttributeNS('http://www.w3.org/1999/xlink','xlink:href','#'+fe)})}le.setAttribute('transform','translate('+he+', 3)'),oe&&ne.appendChild(oe),'scatter'==K[se].getType()&&oe.setAttribute('transform','translate( 20, 0 )'),ue&&ne.appendChild(ue),ce&&ne.appendChild(ce),ne.appendChild(le);var xe=F(ne);ge.setAttribute('x',xe.x),ge.setAttribute('y',xe.y),ge.setAttribute('width',xe.width),ge.setAttribute('height',xe.height),ge.setAttribute('fill','none'),ge.setAttribute('pointer-events','fill'),Z.groups[se]=ne,ne.addEventListener('click',function(me){var fe=K[se];fe.isShown()&&(Z.isSelectable()&&!fe.isSelected()?Z.graph.selectSerie(fe):Z.graph.unselectSerie(fe),me.preventDefault(),me.stopPropagation())})}.call(this,ie);this.svg.appendChild(this.rect),this.buildLegendBox(),this.calculatePosition()}}isHideable(){return this.options.isSerieHideable}notHideable(){return this.options.isSerieHideable=!1,this}hideable(){return this.options.isSerieHideable=!0,this}set seriesHideable(G){this.options.isSerieHideable=!!G}get seriesHideable(){return this.options.isSerieHideable}isSelectable(){return this.options.isSerieSelectable}isToggleShapes(){return this.options.shapesToggleable}getDom(){return this.svg}setEvents(){var G=this,Z=this.pos;this.svg.addEventListener('mousedown',function(J){J.stopPropagation(),console.log('down'),G.options.movable&&(Z.x=J.clientX,Z.y=J.clientY,J.preventDefault(),G.mousedown=!0,G.graph.elementMoving(G),G.rect.setAttribute('display','block'))}),this.svg.addEventListener('click',function(J){J.stopPropagation()}),this.svg.addEventListener('dblclick',function(J){J.stopPropagation()}),this.svg.addEventListener('mousemove',function(J){G.handleMouseMove(J)})}handleMouseUp(G){G.stopPropagation(),G.preventDefault(),this.mousedown=!1,this.rect.setAttribute('display','none'),this.graph.elementMoving(!1)}handleMouseMove(G){if(this.mousedown){var Z=this.pos,K=G.clientX-Z.x,Q=G.clientY-Z.y;Z.transformX+=K,Z.transformY+=Q,Z.x=G.clientX,Z.y=G.clientY,G.stopPropagation(),G.preventDefault(),this._setPosition()}}_setPosition(){var G=this.pos;isNaN(G.transformX)||isNaN(G.transformY)||!1===G.transformX||!1===G.transformY||this.svg.setAttribute('transform','translate('+G.transformX+', '+G.transformY+')')}applyStyle(){this.options.frame&&(this.rectBottom.setAttribute('stroke',this.options.frameColor),this.rectBottom.setAttribute('stroke-width',this.options.frameWidth+'px'),this.rectBottom.setAttribute('rx',this.options.frameRounding),this.rectBottom.setAttribute('ry',this.options.frameRounding)),this.rectBottom.setAttribute('fill',this.options.backgroundColor)}fixSeries(){var G=[];if(!1===arguments[0])return this.series=!1,void this.update();for(var Z=0,K=arguments.length;Z<K;Z++)Array.isArray(arguments[Z])?G=G.concat(arguments[Z]):G.push(arguments[Z]);this.update(),this.series=G}fixSeriesAdd(G){this.series=this.series||[],this.series.push(G)}requireDelayedUpdate(){this._requiredUpdate=!0}}X.default=U,T.exports=X['default']})},function(u,A,S){var C,P,E;(function(T,X){P=[u,A,S(10)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y){'use strict';Object.defineProperty(X,'__esModule',{value:!0});var B=function(F){return F&&F.__esModule?F:{default:F}}(Y);class O extends B.default{constructor(F,W,V={}){super(F,W,V),this.top='top'==W}getAxisPosition(){if(!this.options.display)return 0;var F=(1==this.options.tickPosition?8:20)+1*this.graph.options.fontSize;return this.getLabel()&&(F+=this.graph.options.fontSize),F}isX(){return!0}isY(){return!1}setShift(F){this.shift=F;void 0!==this.getShift()&&this.graph.getDrawingHeight()&&this.group.setAttribute('transform','translate(0 '+(this.floating?this.getShift():this.top?this.shift:this.graph.getDrawingHeight()-this.shift)+')')}getMaxSizeTick(){return(this.top?-1:1)*(1==this.options.tickPosition?10:10)}drawTick(F,W,V,R){var U=this,G;if(G=R||this.getPos(F),!(void 0==G||isNaN(G))){var Z=this.nextTick(W,function(Q){Q.setAttribute('y1',(U.top?1:-1)*U.tickPx1*U.tickScaling[W]),Q.setAttribute('y2',(U.top?1:-1)*U.tickPx2*U.tickScaling[W]),1==W?Q.setAttribute('stroke',U.getPrimaryTicksColor()):Q.setAttribute('stroke',U.getSecondaryTicksColor())});if(Z.setAttribute('x1',G),Z.setAttribute('x2',G),this.nextGridLine(1==W,G,G,0,this.graph.getDrawingHeight()),1==W){var K=this.nextTickLabel(function(Q){Q.setAttribute('y',(U.top?-1:1)*((1==U.options.tickPosition?8:20)+(U.top?10:0))),Q.setAttribute('text-anchor','middle'),'black'!==U.getTicksLabelColor()&&Q.setAttribute('fill',U.getTicksLabelColor()),Q.style.dominantBaseline='hanging'});K.setAttribute('x',G),this.setTickContent(K,F,V)}return[Z,K]}}drawLabel(){'black'!==this.getLabelColor()&&this.label.setAttribute('fill',this.getLabelColor()),this.katexElement?(this.label.setAttribute('style','display: none;'),this.katexElement.setAttribute('x',Math.abs(this.getMaxPx()+this.getMinPx())/2),this.katexElement.setAttribute('y',(this.top?-1:1)*((1==this.options.tickPosition?10:25)+this.graph.options.fontSize)),this.group.appendChild(this.katexElement)):(this.options.labelFont&&this.label.setAttribute('font-family',this.options.labelFont),this.label.setAttribute('text-anchor','middle'),this.label.setAttribute('style','display: initial;'),this.label.setAttribute('x',Math.abs(this.getMaxPx()+this.getMinPx())/2),this.label.setAttribute('y',(this.top?-1:1)*((1==this.options.tickPosition?10:25)+this.graph.options.fontSize)),this.labelTspan.textContent=this.getLabel())}draw(){var F=super.draw(...arguments);return this.drawSpecifics(),F}drawSpecifics(){this.drawLabel(),this.line.setAttribute('x1',this.getMinPx()),this.line.setAttribute('x2',this.getMaxPx()),this.line.setAttribute('y1',0),this.line.setAttribute('y2',0),this.line.setAttribute('stroke',this.getAxisColor()),this.top||(this.labelTspan.style.dominantBaseline='hanging',this.expTspan.style.dominantBaseline='hanging',this.expTspanExp.style.dominantBaseline='hanging',this.unitTspan.style.dominantBaseline='hanging');var F=this.getSpan();this.line.setAttribute('marker-start',this.options.splitMarks&&0!=F[0]?'url(#horionzalsplit_'+this.graph.getId()+')':''),this.line.setAttribute('marker-end',this.options.splitMarks&&1!=F[1]?'url(#horionzalsplit_'+this.graph.getId()+')':'')}_draw0Line(F){this._0line||(this._0line=document.createElementNS(this.graph.ns,'line')),this._0line.setAttribute('x1',F),this._0line.setAttribute('x2',F),this._0line.setAttribute('y1',0),this._0line.setAttribute('y2',this.getMaxPx()),this._0line.setAttribute('stroke','black'),this.groupGrids.appendChild(this._0line)}handleMouseMoveLocal(F){F-=this.graph.getPaddingLeft(),this.mouseVal=this.getVal(F)}setMinMaxFlipped(){var F=this.maxPx-this.minPx;if(!isNaN(F)){var W=F*this.options.span[1]+this.minPx-this.options.marginMax,V=F*this.options.span[0]+this.minPx+this.options.marginMin;this.minPxFlipped=this.isFlipped()?W:V,this.maxPxFlipped=this.isFlipped()?V:W}}getZProj(F){return F*this.graph.options.zAxis.shiftX}}X.default=O,T.exports=X['default']})},function(u,A,S){var C,P,E;(function(T,X){P=[u,A,S(1),S(4),S(3)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y,I,B){'use strict';function F(Z){return Z&&Z.__esModule?Z:{default:Z}}Object.defineProperty(X,'__esModule',{value:!0});var W=F(Y),V=F(I),R=function(Z){if(Z&&Z.__esModule)return Z;var K={};if(null!=Z)for(var Q in Z)Object.prototype.hasOwnProperty.call(Z,Q)&&(K[Q]=Z[Q]);return K.default=Z,K}(B);const U={lineAt0:!1,display:!0,flipped:!1,axisDataSpacing:{min:0.1,max:0.1},unitModification:!1,primaryGrid:!0,secondaryGrid:!0,primaryGridColor:'#f0f0f0',secondaryGridColor:'#f0f0f0',primaryGridWidth:1,secondaryGridWidth:1,shiftToZero:!1,tickPosition:1,nbTicksPrimary:3,nbTicksSecondary:10,ticklabelratio:1,exponentialFactor:0,exponentialLabelFactor:0,logScale:!1,forcedMin:!1,forcedMax:!1,span:[0,1],marginMin:0,marginMax:0,scientificScale:!1,scientificScaleExponent:!1,engineeringScale:!1,unit:!1,unitWrapperBefore:'',unitWrapperAfter:'',splitMarks:!1,useKatexForLabel:!1};class G extends V.default{constructor(){super()}init(Z,K,Q){this.unitModificationTimeTicks=[[1,[1,2,5,10,20,30]],[60,[1,2,5,10,20,30]],[3600,[1,2,6,12]],[86400,[1,2,3,4,5,10,20,40]]],this.graph=Z,this.options=R.extend(!0,{},U,Q,K),this.group=document.createElementNS(this.graph.ns,'g'),this.hasChanged=!0,this.rectEvent=document.createElementNS(this.graph.ns,'rect'),this.rectEvent.setAttribute('pointer-events','fill'),this.rectEvent.setAttribute('fill','transparent'),this.group.appendChild(this.rectEvent),this.graph.axisGroup.appendChild(this.group),this.line=document.createElementNS(this.graph.ns,'line'),this.line.setAttribute('stroke','black'),this.line.setAttribute('shape-rendering','crispEdges'),this.line.setAttribute('stroke-linecap','square'),this.groupTicks=document.createElementNS(this.graph.ns,'g'),this.groupTickLabels=document.createElementNS(this.graph.ns,'g'),this.group.appendChild(this.groupTicks),this.group.appendChild(this.groupTickLabels),this.group.appendChild(this.line),this.labelValue,this.label=document.createElementNS(this.graph.ns,'text'),this.labelTspan=document.createElementNS(this.graph.ns,'tspan'),this.preunit='',this.unitTspan=document.createElementNS(this.graph.ns,'tspan'),this.expTspan=document.createElementNS(this.graph.ns,'tspan'),this.expTspanExp=document.createElementNS(this.graph.ns,'tspan'),this.label.appendChild(this.labelTspan),this.label.appendChild(this.unitTspan),this.label.appendChild(this.expTspan),this.label.appendChild(this.expTspanExp),this.expTspan.setAttribute('dx',6),this.expTspanExp.setAttribute('dy',-5),this.expTspanExp.setAttribute('font-size','0.8em'),this.label.setAttribute('text-anchor','middle'),this.setTickPosition(this.options.tickPosition),this.gridLinePath={primary:'',secondary:''},this.gridPrimary=document.createElementNS(this.graph.ns,'path'),this.gridSecondary=document.createElementNS(this.graph.ns,'path'),this.graph.groupPrimaryGrids.appendChild(this.gridPrimary),this.graph.groupSecondaryGrids.appendChild(this.gridSecondary),this.setGridLinesStyle(),this.group.appendChild(this.label),this.groupSeries=document.createElementNS(this.graph.ns,'g'),this.group.appendChild(this.groupSeries),this.widthHeightTick=0,this.ticks={},this.ticksLabels=[],this.tickScaling={1:3,2:2,3:1,4:0.5},this.currentTick={},this.lastCurrentTick={},this.series=[],this.totalDelta=0,this.currentAction=!1,this.group.addEventListener('mousemove',J=>{J.preventDefault();var $=this.graph._getXY(J);this.handleMouseMoveLocal($.x,$.y,J);for(var ee=0,te=this.series.length;ee<te;ee++)this.series[ee].handleMouseMove(!1,!0)}),this.labels=[],this.group.addEventListener('click',J=>{J.preventDefault();var $=this.graph._getXY(J);this.addLabel(this.getVal($.x-this.graph.getPaddingLeft()))}),this.gridPrimary.setAttribute('clip-path','url(#_clipplot'+this.graph._creation+')'),this.gridSecondary.setAttribute('clip-path','url(#_clipplot'+this.graph._creation+')'),this.graph._axisHasChanged(this)}handleMouseMoveLocal(){}hide(){return this.options.display=!1,this}show(){return this.options.display=!0,this}setDisplay(Z){return this.options.display=!!Z,this}isDisplayed(){return this.options.display}isShown(){return this.isDisplayed(...arguments)}kill(Z,K){this.graph.killAxis(this,Z,K)}setLineAt0(Z){this.options.lineAt0=!!Z}adaptTo(Z,K,Q,J){return Z?(this.options.adaptTo={axis:Z,thisValue:K,foreignValue:Q,preference:J},this.adapt(),this):(this.options.adaptTo=!1,this)}adapt(){if(this.options.adaptTo){if(!K);var K=this.options.adaptTo.axis,Q=this.options.adaptTo.thisValue,J=this.options.adaptTo.foreignValue;if((void 0===K.currentAxisMin||void 0===K.currentAxisMax)&&K.setMinMaxToFitSeries(),!1!==this.options.forcedMin&&!1==this.options.forcedMax||'max'!==this.options.adaptTo.preference){this.currentAxisMin=!1===this.options.forcedMin?this._zoomed?this.getCurrentMin():this.getMinValue()-(Q-this.getMinValue())*(this.options.axisDataSpacing.min*(K.getCurrentMax()-K.getCurrentMin())/(J-K.getCurrentMin())):this.options.forcedMin,this.currentAxisMin==Q&&(this.currentAxisMin-=this.options.axisDataSpacing.min*this.getInterval());var $=!1===this.options.forcedMin?this.currentAxisMin:this.options.forcedMin;this.currentAxisMax=(Q-$)*(K.getCurrentMax()-K.getCurrentMin())/(J-K.getCurrentMin())+$}else{this.currentAxisMax=!1===this.options.forcedMax?this._zoomed?this.getCurrentMax():this.getMaxValue()+(this.getMaxValue()-Q)*(this.options.axisDataSpacing.max*(K.getCurrentMax()-K.getCurrentMin())/(K.getCurrentMax()-J)):this.options.forcedMax,this.currentAxisMax==Q&&(this.currentAxisMax+=this.options.axisDataSpacing.max*this.getInterval());var $=!1===this.options.forcedMax?this.currentAxisMax:this.options.forcedMax;this.currentAxisMin=(Q-$)*(K.getCurrentMin()-K.getCurrentMax())/(J-K.getCurrentMax())+$}this.graph._axisHasChanged(this)}}setFloating(Z,K){return this.floating=!0,this.floatingAxis=Z,this.floatingValue=K,this}getFloatingAxis(){return this.floatingAxis}getFloatingValue(){return this.floatingValue}setAxisDataSpacing(Z,K){return this.options.axisDataSpacing.min=Z,this.options.axisDataSpacing.max=K||Z,this}dataSpacing(){return this.setAxisDataSpacing(...arguments)}setAxisDataSpacingMin(Z){this.options.axisDataSpacing.min=Z}setAxisDataSpacingMax(Z){this.options.axisDataSpacing.max=Z}setMinPx(Z){this.minPx=Z,this.setMinMaxFlipped()}setMaxPx(Z){this.maxPx=Z,this.setMinMaxFlipped()}getMinPx(){return this.minPxFlipped}getMaxPx(){return this.maxPxFlipped}getMathMaxPx(){return this.maxPx}getMathMinPx(){return this.minPx}getMinValue(){return!1===this.options.forcedMin?this.dataMin:this.options.forcedMin}getMaxValue(){return!1===this.options.forcedMax?this.dataMax:this.options.forcedMax}setMinValueData(Z){this.dataMin=Z}setMaxValueData(Z){this.dataMax=Z}getDataMax(){return this.dataMax}getDataMin(){return this.dataMin}forceMin(Z,K){return this.options.forcedMin=Z,this.setCurrentMin(K?this.getCurrentMin():void 0),this.graph._axisHasChanged(this),this}forceMax(Z,K){return this.options.forcedMax=Z,this.setCurrentMax(K?this.getCurrentMax():void 0),this.graph._axisHasChanged(this),this}getForcedMin(){return this.options.forcedMin}getForcedMax(){return this.options.forcedMax}forceToAxis(Z){return Z.getMaxValue&&Z.getMinValue&&(this.options.forcedMin=Z.getMinValue(),this.options.forcedMax=Z.getMaxValue()),this}getNbTicksPrimary(){return this.options.nbTicksPrimary}setNbTicksPrimary(Z){this.options.nbTicksPrimary=Z}getNbTicksSecondary(){return this.options.nbTicksSecondary}handleMouseMove(Z){this.mouseVal=this.getVal(Z)}handleMouseWheel(Z,K,Q){Z=Math.min(0.2,Math.max(-0.2,Z)),'min'==Q?Q=this.getMinValue():'max'==Q?Q=this.getMaxValue():!Q&&(Q=0),this._doZoomVal((this.getCurrentMax()-Q)*(1+Z)+Q,(this.getCurrentMin()-Q)*(1+Z)+Q),this.graph.draw()}set zoomLock(Z){this._zoomLocked=Z}get zoomLock(){return this._zoomLocked||!1}zoom(Z,K,Q){return!Q&&this.zoomLock?void 0:this._doZoomVal(Z,K,!0)}_doZoomVal(Z,K,Q){return this._doZoom(this.getPx(Z),this.getPx(K),Z,K,Q)}_doZoom(Z,K,Q,J,$){var Q=void 0===Q?this.getVal(Z):Q,J=void 0===J?this.getVal(K):J;return this.setCurrentMin(Math.min(Q,J)),this.setCurrentMax(Math.max(Q,J)),this.cacheCurrentMin(),this.cacheCurrentMax(),this.cacheInterval(),this._zoomed=!0,this.adapt(),this._hasChanged=!0,$||this.emit('zoom',[this.currentAxisMin,this.currentAxisMax,this]),this}getSerieShift(){return this._serieShift}getSerieScale(){return this._serieScale}getMouseVal(){return this.mouseVal}getUnitPerTick(Z,K,Q){var $=Z/he;K=K?Math.min(K,Z/10):Z/10;var ee=Q/K;switch(this.options.unitModification){case'time':case'time:min.sec':var te=this.getModifiedValue(this.getMaxValue());3600>te?0:86400>te?1:2;for(var ie=!1,ae=0,se=this.unitModificationTimeTicks.length;ae<se;ae++){for(var ne=0,oe=this.unitModificationTimeTicks[ae][1].length;ne<oe;ne++)if(ee<this.unitModificationTimeTicks[ae][0]*this.unitModificationTimeTicks[ae][1][ne]){ie=!0;break}if(ie)break}ue=ae===this.unitModificationTimeTicks.length?1:this.unitModificationTimeTicks[ae][0]*this.unitModificationTimeTicks[ae][1][ne];break;default:var le=Math.floor(Math.log(ee)/Math.log(10)),pe=ee*Math.pow(10,-le);this.decimals=-le;for(var de=[1,2,5,10],ge=!1,ae=de.length-1;0<=ae;ae--)(!ge||Math.abs(de[ae]-pe)<Math.abs(ge-pe))&&(ge=de[ae]);var ue=ge*Math.pow(10,le);}var he=Q/ue,$=Z/K;return[ue,he,$]}setMinMaxToFitSeries(Z){var K=this.getInterval();return this.options.logScale?(this.currentAxisMin=Math.max(1e-50,0.9*this.getMinValue()),this.currentAxisMax=Math.max(1e-50,1.1*this.getMaxValue())):(this.currentAxisMin=this.getMinValue(),this.currentAxisMax=this.getMaxValue(),!1===this.getForcedMin()&&(this.currentAxisMin-=this.options.axisDataSpacing.min*K),!1===this.getForcedMax()&&(this.currentAxisMax+=this.options.axisDataSpacing.max*K)),(isNaN(this.currentAxisMin)||isNaN(this.currentAxisMax))&&(this.currentAxisMax=void 0,this.currentAxisMin=void 0),this.cacheCurrentMin(),this.cacheCurrentMax(),this.cacheInterval(),this._zoomed=!1,this.adapt(),Z||this.graph._axisHasChanged(this),this.emit('zoomOutFull',[this.currentAxisMin,this.currentAxisMax,this]),this}getInterval(){return this.getMaxValue()-this.getMinValue()}getCurrentInterval(){return this.cachedInterval}getCurrentMin(){return this.cachedCurrentMin}getCurrentMax(){return this.cachedCurrentMax}cacheCurrentMin(){this.cachedCurrentMin=this.currentAxisMin==this.currentAxisMax?this.options.logScale?this.currentAxisMin/10:this.currentAxisMin-1:this.currentAxisMin}cacheCurrentMax(){this.cachedCurrentMax=this.currentAxisMax==this.currentAxisMin?this.options.logScale?10*this.currentAxisMax:this.currentAxisMax+1:this.currentAxisMax}cacheInterval(){this.cachedInterval=this.cachedCurrentMax-this.cachedCurrentMin}setCurrentMin(Z){return(void 0===Z||!1!==this.getForcedMin()&&Z<this.getForcedMin())&&(Z=this.getMinValue()),this.currentAxisMin=Z,this.options.logScale&&(this.currentAxisMin=Math.max(1e-50,Z)),this.graph._axisHasChanged(this),this}setCurrentMax(Z){(Z===void 0||!1!==this.getForcedMax()&&Z>this.getForcedMax())&&(Z=this.getMaxValue()),this.currentAxisMax=Z,this.options.logScale&&(this.currentAxisMax=Math.max(1e-50,Z)),this.graph._axisHasChanged(this)}flip(Z){return this.options.flipped=Z,this.setMinMaxFlipped(),this}isFlipped(){return this.options.flipped}_draw(){var Z=this;this.cacheCurrentMax(),this.cacheCurrentMin(),this.cacheInterval(),(void 0==this.currentAxisMin||void 0==this.currentAxisMax)&&this.setMinMaxToFitSeries(!0);var Q=Math.abs(this.getMaxPx()-this.getMinPx()),J=this.getCurrentInterval();if(!this.options.display)return this.line.setAttribute('display','none'),0;this.line.setAttribute('display','block'),this.scientificExponent=!0==this.options.scientificScale?this.options.scientificScaleExponent?this.options.scientificScaleExponent:Math.floor(Math.log(Math.max(Math.abs(this.getCurrentMax()),Math.abs(this.getCurrentMin())))/Math.log(10)):0,this.gridLinePath.primary='',this.gridLinePath.secondary='';let $;if(!this.options.useKatexForLabel||!this.graph.hasKatexRenderer())this.options.unitDecade&&this.options.unit&&0!==this.scientificExponent&&(this.scientificExponent=this.getEngineeringExponent(this.scientificExponent))&&($=this.getExponentGreekLetter(this.scientificExponent))?(this.preunit=$,this.unitTspan.setAttribute('dx',0)):0===this.scientificExponent||isNaN(this.scientificExponent)?(!this.options.unit&&this.unitTspan.setAttribute('display','none'),this.preunit='',this.expTspan.setAttribute('display','none'),this.expTspanExp.setAttribute('display','none')):(this.options.engineeringScale&&(this.scientificExponent=this.getEngineeringExponent(this.scientificExponent)),this.preunit='',this.expTspan.setAttribute('display','visible'),this.expTspanExp.setAttribute('display','visible'),this.expTspan.textContent='x10',this.expTspanExp.textContent=this.scientificExponent),this.writeUnit();else{let re=this.getLabel();this.options.unitDecade&&this.options.unit&&0!==this.scientificExponent&&(this.scientificExponent=this.getEngineeringExponent(this.scientificExponent))&&($=this.getExponentGreekLetter(this.scientificExponent))?(re+=$,this.preunitTspan.innerHTML=$,this.preunitTspan.setAttribute('display','visible'),this.unitTspan.setAttribute('dx',0),re+=' '+$+' '+this.options.unit):0!==this.scientificExponent&&!isNaN(this.scientificExponent)&&(this.options.engineeringScale&&(this.scientificExponent=this.getEngineeringExponent(this.scientificExponent)),re+=' \\cdot 10^'+this.scientificExponent+' '+this.options.unit),this.katexElement=this.graph.renderWithKatex(re,this.katexElement)}if(!!this.options.hideTicks)var ee=0;else if(this.resetTicksLength(),this.linkedToAxis){this.linkedToAxis.deltaPx=10;var ee=this.drawLinkedToAxisTicksWrapper(Q,J)}else if(!this.options.logScale)var ee=this.drawLinearTicksWrapper(Q,J);else var ee=this.drawLogTicks();this.removeUselessTicks(),this.removeUselessTickLabels(),this.gridPrimary.setAttribute('d',this.gridLinePath.primary),this.gridSecondary.setAttribute('d',this.gridLinePath.secondary);var te=this.graph.findAxesLinkedTo(this);return te.map(function(re){re.linkedToAxis&&(re.setMinPx(Z.getMinPx()),re.setMaxPx(Z.getMaxPx()),re.draw())}),this.options.lineAt0&&0>this.getCurrentMin()&&0<this.getCurrentMax()&&this._draw0Line(this.getPx(0)),ee}writeUnit(){this.options.unit?(this.unitTspan.setAttribute('display','visible'),this.unitTspan.setAttribute('dx',5),this.expTspan.setAttribute('display','none'),this.expTspanExp.setAttribute('display','none'),this.unitTspan.innerHTML=(this.options.unitWrapperBefore+this.preunit+this.options.unit+this.options.unitWrapperAfter).replace(/\^([-+0-9]*)(.*)/g,'<tspan dy=\'-5\' font-size=\'0.7em\'>$1</tspan><tspan dy=\'5\' font-size=\'1em\'>$2</tspan>')):this.unitTspan.setAttribute('display','none')}getExponentGreekLetter(Z){switch(Z){case 3:return'k';break;case 6:return'M';break;case 9:return'G';break;case 12:return'T';break;case 15:return'E';break;case-3:return'm';break;case-6:return'&mu;';break;case-9:return'n';break;case-12:return'p';break;case-15:return'f';}}drawLinearTicksWrapper(Z,K){let Q;return this.options.primaryTickUnit?Q=this.options.primaryTickUnit:(Q=this.getUnitPerTick(Z,this.getNbTicksPrimary(),K)[0],this.options.maxPrimaryTickUnit&&this.options.maxPrimaryTickUnit<Q?Q=this.options.maxPrimaryTickUnit:this.options.minPrimaryTickUnit&&this.options.minPrimaryTickUnit>Q&&(Q=this.options.minPrimaryTickUnit)),this.drawTicks(Q,this.secondaryTicks())}forcePrimaryTickUnit(Z){this.options.primaryTickUnit=Z}forcePrimaryTickUnitMax(Z){this.options.maxPrimaryTickUnit=Z}forcePrimaryTickUnitMin(Z){this.options.minPrimaryTickUnit=Z}getPrimaryTickUnit(){return this.incrTick}setTickLabelRatio(Z){this.options.ticklabelratio=Z}draw(){this._widthLabels=0;var Z=this._draw();return this._widthLabels+=Z,Z}drawTicks(Z,K){var Q=Z,J=this.getCurrentMin(),$=this.getCurrentMax(),ae=0,te,re,ie;for(K&&(te=Q/K),re=this.options.shiftToZero?this.dataMin-Math.ceil((this.dataMin-J)/Q)*Q:Math.floor(J/Q)*Q,this.incrTick=Z;re<=$&&(ae++,!(200<ae));){if(K){ie=re+te,this.subIncrTick=ie;for(var se=0;ie<re+Q&&(se++,!(100<se));){if(ie<J||ie>$){ie+=te;continue}this.drawTickWrapper(ie,!1,1e-4>Math.abs(ie-re-Q/2)?2:3),ie+=te}}if(re<J||re>$){re+=Z;continue}this.drawTickWrapper(re,!0,1),re+=Z}return this.widthHeightTick=this.getMaxSizeTick(),this.widthHeightTick}nextTick(Z,K){if(this.ticks[Z]=this.ticks[Z]||[],this.lastCurrentTick[Z]=this.lastCurrentTick[Z]||0,this.currentTick[Z]=this.currentTick[Z]||0,this.currentTick[Z]>=this.ticks[Z].length){var Q=document.createElementNS(this.graph.ns,'line');this.groupTicks.appendChild(Q),this.ticks[Z].push(Q),K(Q)}var Q=this.ticks[Z][this.currentTick[Z]];return this.currentTick[Z]>=this.lastCurrentTick[Z]&&Q.setAttribute('display','visible'),this.currentTick[Z]++,Q}nextTickLabel(Z){if(this.ticksLabels=this.ticksLabels||[],this.lastCurrentTickLabel=this.lastCurrentTickLabel||0,this.currentTickLabel=this.currentTickLabel||0,this.currentTickLabel>=this.ticksLabels.length){var K=document.createElementNS(this.graph.ns,'text');this.groupTickLabels.appendChild(K),this.ticksLabels.push(K),Z(K)}var K=this.ticksLabels[this.currentTickLabel];return this.currentTickLabel>=this.lastCurrentTickLabel&&K.setAttribute('display','visible'),this.currentTickLabel++,K}removeUselessTicks(){for(var Z in this.currentTick){for(var K=this.currentTick[Z];K<this.ticks[Z].length;K++)this.ticks[Z][K].setAttribute('display','none');this.lastCurrentTick[Z]=this.currentTick[Z],this.currentTick[Z]=0}}removeUselessTickLabels(){for(var Z=this.currentTickLabel;Z<this.ticksLabels.length;Z++)this.ticksLabels[Z].setAttribute('display','none');this.lastCurrentTickLabel=this.currentTickLabel,this.currentTickLabel=0}nextGridLine(Z,K,Q,J,$){(Z&&this.options.primaryGrid||!Z&&this.options.secondaryGrid)&&(this.gridLinePath[Z?'primary':'secondary']+='M '+K+' '+J+' L '+Q+' '+$)}setGridLineStyle(Z,K){Z.setAttribute('shape-rendering','crispEdges'),Z.setAttribute('stroke',K?this.getPrimaryGridColor():this.getSecondaryGridColor()),Z.setAttribute('stroke-width',K?this.getPrimaryGridWidth():this.getSecondaryGridWidth()),Z.setAttribute('stroke-opacity',K?this.getPrimaryGridOpacity():this.getSecondaryGridOpacity());var Q;(Q=K?this.getPrimaryGridDasharray():this.getSecondaryGridDasharray())&&Z.setAttribute('stroke-dasharray',Q)}setGridLinesStyle(){return this.setGridLineStyle(this.gridPrimary,!0),this.setGridLineStyle(this.gridSecondary,!1),this}resetTicksLength(){}secondaryTicks(){return this.options.nbTicksSecondary}drawLogTicks(){var Z=this.getCurrentMin(),K=this.getCurrentMax(),Q=Math.min(Z,K),K=Math.max(Z,K);1e-50>Q&&(Q=1e-50),20<Math.log(Q)-Math.log(K)&&(K=Math.pow(10,20*Math.log(Q)));var J={fontSize:'1.0em',exponential:!0,overwrite:!1};0>Q&&(Q=0);for(var $=0==Q?0:Math.floor(Math.log(Q)/Math.log(10)),Q=1,te;(te=Q*Math.pow(10,$))<K;)1==Q&&te>Z&&this.drawTickWrapper(te,!0,1,J),10==Q?(Q=1,$++):(1!=Q&&te>Z&&this.drawTickWrapper(te,!1,2,{overwrite:'',fontSize:'0.6em'}),Q++);return this.widthHeightTick=this.getMaxSizeTick(),this.widthHeightTick}drawTickWrapper(Z,K,Q,J){this.drawTick(Z,Q,J)}linkToAxis(Z,K,Q){this.linkedToAxis={axis:Z,scalingFunction:K,decimals:Q||1}}drawLinkedToAxisTicksWrapper(Z,K){var Q=this.linkedToAxis,J=0,te=0,$,ee,re,ie;Q.deltaPx||(Q.deltaPx=10);do{if($=Q.scalingFunction(Q.axis.getVal(J+this.getMinPx())),Q.decimals&&(this.decimals=Q.decimals),ee=this.drawTick($,1,{},J+this.getMinPx()),!ee)throw console.log($,J,this.getMinPx()),'Unable to draw tick. Please report the test-case';if(re=8*(ee[1].textContent+'').length,ie=5*Math.round(re/5),ie>Q.deltaPx)return Q.deltaPx=ie,void this.drawLinkedToAxisTicksWrapper(Z,K);te++,J+=Q.deltaPx}while(J<Z)}getPos(Z){return this.getPx(Z)}getPx(Z){if(!this.options.logScale)return(Z-this.getCurrentMin())/this.getCurrentInterval()*(this.getMaxPx()-this.getMinPx())+this.getMinPx();if(!(0>Z)){var Z=(Math.log(Z)-Math.log(this.getCurrentMin()))/(Math.log(this.getCurrentMax())-Math.log(this.getCurrentMin()))*(this.getMaxPx()-this.getMinPx())+this.getMinPx();return Z}}getRoundedPx(Z){return Math.round(10*this.getPx(Z))/10}getVal(Z){return this.options.logScale?Math.exp((Z-this.getMinPx())/(this.getMaxPx()-this.getMinPx())*(Math.log(this.getCurrentMax())-Math.log(this.getCurrentMin()))+Math.log(this.getCurrentMin())):(Z-this.getMinPx())/(this.getMaxPx()-this.getMinPx())*this.getCurrentInterval()+this.getCurrentMin()}getRelPx(Z){return Z/this.getCurrentInterval()*(this.getMaxPx()-this.getMinPx())}getRelVal(Z){return Z/(this.getMaxPx()-this.getMinPx())*this.getCurrentInterval()}valueToText(Z){if(this.scientificExponent)return Z/=Math.pow(10,this.scientificExponent),Z.toFixed(1);if(Z=Z*Math.pow(10,this.getExponentialFactor())*Math.pow(10,this.getExponentialLabelFactor()),this.options.shiftToZero&&(Z-=this.dataMin),this.options.ticklabelratio&&(Z*=this.options.ticklabelratio),this.options.unitModification)return Z=this.modifyUnit(Z,this.options.unitModification),Z;var K=this.decimals-this.getExponentialFactor()-this.getExponentialLabelFactor();return isNaN(Z)?'':0<K?Z.toFixed(K):Z.toFixed(0)}valueToHtml(Z,K,Q){var J=this.valueToText(Z),$;return this.options.unitDecade&&this.options.unit&&0!==this.scientificExponent&&(this.scientificExponent=this.getEngineeringExponent(this.scientificExponent))&&($=this.getExponentGreekLetter(this.scientificExponent))?J+=$:0!==this.scientificExponent&&!isNaN(this.scientificExponent)&&!K&&(J+='x10',J+='<sup>'+this.scientificExponent+'</sup>'),this.options.unit&&!Q&&(J+=this.options.unit.replace(/\^([-+0-9]*)/g,'<sup>$1</sup>')),J}getModifiedValue(Z){return this.options.ticklabelratio&&(Z*=this.options.ticklabelratio),this.options.shiftToZero&&(Z-=this.getMinValue()*(this.options.ticklabelratio||1)),Z}modifyUnit(Z,K){var Q='',J=this.incrTick;switch(K){case'time':var $=this.getModifiedValue(this.getMaxValue()),te=[[60,'min'],[3600,'h'],[86400,'d']],ee,re;if(3600>$?re=0:86400>$?re=1:2592000>$&&(re=2),!te[re])return!1;Z=Z/te[re][0];var ie=Math.floor(Z);for(Q=ie+te[re][1],re--;J<1*te[re+1][0]&&-1<re;)ee=!1,Z=(Z-ie)*te[re+1][0]/te[re][0],ie=Math.round(Z),Q+=' '+ie+te[re][1],re--;break;case'time:min.sec':Z=Z/60;var ie=Math.floor(Z),ae=Math.round(60*(Z-ie))+'';ae=1==ae.length?'0'+ae:ae,Q=ie+'.'+ae;}return Q}getExponentialFactor(){return this.options.exponentialFactor}setExponentialFactor(Z){this.options.exponentialFactor=Z}setExponentialLabelFactor(Z){this.options.exponentialLabelFactor=Z}getExponentialLabelFactor(){return this.options.exponentialLabelFactor}setLabel(Z){return this.options.labelValue=Z,this}setLabelFont(Z){return this.options.labelFont=Z,this}getLabel(){return this.options.labelValue}setSpan(Z,K){return this.options.span=[Z,K],this}getSpan(){return this.options.span}setLevel(Z){return this._level=Z,this}getLevel(){return this._level}setShift(Z){this.shift=Z}getShift(){return this.shift}setTickPosition(Z){switch(Z){case 3:case'outside':case W.default.TICKS_OUTSIDE:Z=3;break;case 2:case'centered':case W.default.TICKS_CENTERED:Z=2;break;default:case 1:case'inside':case W.default.TICKS_INSIDE:Z=1;}switch(this.options.tickPosition=Z,this.options.tickPosition){case 3:this.tickPx1=-2,this.tickPx2=0;break;case 2:this.tickPx1=-1,this.tickPx2=1;break;case 1:this.tickPx1=0,this.tickPx2=2;}return this}setGrids(Z){return this.options.primaryGrid=Z,this.options.secondaryGrid=Z,this}setPrimaryGrid(Z){return this.options.primaryGrid=Z,this}setSecondaryGrid(Z){return this.options.secondaryGrid=Z,this}primaryGridOn(){return this.setPrimaryGrid(!0)}primaryGridOff(){return this.setPrimaryGrid(!1)}secondaryGridOn(){return this.setSecondaryGrid(!0)}secondaryGridOff(){return this.setSecondaryGrid(!1)}gridsOn(){return this.setGrids(!0)}gridsOff(){return this.setGrids(!1)}turnGridsOff(){return this.gridsOff(...arguments)}turnGridsOn(){return this.gridsOn(...arguments)}setAxisColor(Z){return this.options.axisColor=Z,this}getAxisColor(){return this.options.axisColor||'black'}setPrimaryTicksColor(Z){return this.options.primaryTicksColor=Z,this}getPrimaryTicksColor(){return this.options.primaryTicksColor||'black'}setSecondaryTicksColor(Z){return this.options.secondaryTicksColor=Z,this}getSecondaryTicksColor(){return this.options.secondaryTicksColor||'black'}setTicksLabelColor(Z){return this.options.ticksLabelColor=Z,Array.isArray(this.ticksLabels)&&this.ticksLabels.forEach(K=>{K.setAttribute('fill',Z)}),this}getTicksLabelColor(){return this.options.ticksLabelColor||'black'}setPrimaryGridColor(Z){return this.options.primaryGridColor=Z,this}getPrimaryGridColor(){return this.options.primaryGridColor}setSecondaryGridColor(Z){return this.options.secondaryGridColor=Z,this}getSecondaryGridColor(){return this.options.secondaryGridColor}setPrimaryGridWidth(Z){return this.options.primaryGridWidth=Z,this}getPrimaryGridWidth(){return this.options.primaryGridWidth}setSecondaryGridWidth(Z){return this.options.secondaryGridWidth=Z,this}getSecondaryGridWidth(){return this.options.secondaryGridWidth}setPrimaryGridOpacity(Z){return this.options.primaryGridOpacity=Z,this}getPrimaryGridOpacity(){return this.options.primaryGridOpacity}setSecondaryGridOpacity(Z){return this.options.secondaryGridOpacity=Z,this}getSecondaryGridOpacity(){return this.options.secondaryGridOpacity}setPrimaryGridDasharray(Z){return this.options.primaryGridDasharray=Z,this}getPrimaryGridDasharray(){return this.options.primaryGridDasharray}setSecondaryGridDasharray(Z){return this.options.secondaryGridDasharray=Z,this}getSecondaryGridDasharray(){return this.options.secondaryGridDasharray}setLabelColor(Z){return this.options.labelColor=Z,this}getLabelColor(){return this.options.labelColor}setTickContent(Z,K,Q){if(Q||(Q={}),Q.overwrite||!Q.exponential)Z.textContent=Q.overwrite||this.valueToText(K);else{var J=Math.round(Math.log(K)/Math.log(10)),$=Math.floor(K*Math.pow(10,-J));Z.textContent=1==$?'10':$+'x10';var ee=document.createElementNS(this.graph.ns,'tspan');ee.textContent=J,ee.setAttribute('font-size','0.7em'),ee.setAttribute('dy',-5),Z.appendChild(ee)}Q.fontSize&&Z.setAttribute('font-size',Q.fontSize)}isX(){return!1}isY(){return!1}setUnit(Z){return this.options.unit=Z,this}setUnitWrapper(Z,K){return this.options.unitWrapperBefore=Z,this.options.unitWrapperAfter=K,this}setUnitDecade(Z){return this.options.unitDecade=Z,this}setScientific(Z){return this.options.scientificScale=Z,this}setScientificScaleExponent(Z){return this.options.scientificScaleExponent=Z,this}setEngineering(Z){return this.options.scientificScale=Z,this.options.engineeringScale=Z,this}getEngineeringExponent(Z){return Z-=0<Z?Z%3:(3- -Z%3)%3,Z}setLogScale(Z){return this.options.logScale=Z,this}isZoomed(){return this.currentAxisMin!=this.getMinValue()&&this.currentAxisMax!=this.getMaxValue()}hasAxis(){return!1}getType(){return null}useKatexForLabel(Z=!0){return this.options.useKatexForLabel=Z,this}}G.prototype.getValue=G.prototype.getVal,G.prototype.getDeltaPx=G.prototype.getRelPx,X.default=G,T.exports=X['default']})},function(u,A,S){var C,P,E;(function(T,X){P=[u,A,S(10)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y){'use strict';Object.defineProperty(X,'__esModule',{value:!0});var B=function(F){return F&&F.__esModule?F:{default:F}}(Y);class O extends B.default{constructor(F,W,V){super(F,W,V),this.leftright=W,this.left='left'==W}setAxisPosition(F){this.shiftPosition=F}getAxisPosition(){return this.shiftPosition||0}getAdditionalWidth(){let F=0;return this.getLabel()&&(F+=this.graph.options.fontSize),this.isShown()&&(F+=Math.abs(this.tickMargin)),F}isX(){return!1}isY(){return!0}resetTicksLength(){this.longestTick=[!1,0]}getMaxSizeTick(){return this.longestTick&&this.longestTick[0]?this.longestTick[0].getComputedTextLength()+5:0}draw(){this.tickMargin=this.left?-5-this.tickPx1*this.tickScaling[1]:5+this.tickPx1*this.tickScaling[1];var F=super.draw(...arguments);return F+=this.getAdditionalWidth(),this.drawSpecifics(F),this.fullwidthlabel=F,F}equalizePosition(F){return this.placeLabel(this.left?-F:F),this.getLabel()?F+this.graph.options.fontSize:0}drawTick(F,W,V,R){var G=this,Z=this.groupTicks,U,K;if(U=R||this.getPos(F),!(void 0==U||isNaN(U))){var Q=this.nextTick(W,J=>{J.setAttribute('x1',(this.left?1:-1)*this.tickPx1*this.tickScaling[W]),J.setAttribute('x2',(this.left?1:-1)*this.tickPx2*this.tickScaling[W]),1==W?J.setAttribute('stroke',this.getPrimaryTicksColor()):J.setAttribute('stroke',this.getSecondaryTicksColor())});if(Q.setAttribute('y1',U),Q.setAttribute('y2',U),this.nextGridLine(1==W,0,this.graph.getDrawingWidth(),U,U),1==W){var K=this.nextTickLabel(J=>{J.setAttribute('x',this.tickMargin),'black'!==this.getTicksLabelColor()&&J.setAttribute('fill',this.getTicksLabelColor()),this.left?J.setAttribute('text-anchor','end'):J.setAttribute('text-anchor','start'),J.style.dominantBaseline='central'});K.setAttribute('y',U),this.setTickContent(K,F,V),(K.textContent+'').length>=this.longestTick[1]&&(this.longestTick[0]=K,this.longestTick[1]=(K.textContent+'').length)}}}drawLabel(){'black'!==this.getLabelColor()&&this.label.setAttribute('fill',this.getLabelColor()),this.label.setAttribute('dominant-baseline',this.left?'auto':'hanging'),this.labelTspan.textContent=this.getLabel()}placeLabel(F){this.label.setAttribute('transform','translate('+F+', '+Math.abs(this.getMaxPx()+this.getMinPx())/2+') rotate(-90)')}drawSpecifics(){this.line.setAttribute('y1',this.getMinPx()),this.line.setAttribute('y2',this.getMaxPx()),this.line.setAttribute('x1',0),this.line.setAttribute('x2',0),this.line.setAttribute('stroke',this.getAxisColor());var F=this.getSpan();this.line.setAttribute('marker-start',this.options.splitMarks&&0!=F[0]?'url(#verticalsplit_'+this.graph.getId()+')':''),this.line.setAttribute('marker-end',this.options.splitMarks&&1!=F[1]?'url(#verticalsplit_'+this.graph.getId()+')':'')}setShift(F){if(this.shift=F,this.shift&&this.graph.getWidth()){let W=this.shift;W=this.floating?W:this.isLeft()?W:this.graph.getWidth()-this.graph.getPaddingRight()-this.graph.getPaddingLeft()-W,this.group.setAttribute('transform','translate( '+W+' 0 )'),this.drawLabel()}}isLeft(){return this.left}isRight(){return!this.left}isFlipped(){return!this.options.flipped}_draw0Line(F){this._0line||(this._0line=document.createElementNS(this.graph.ns,'line')),this._0line.setAttribute('y1',F),this._0line.setAttribute('y2',F),this._0line.setAttribute('x1',0),this._0line.setAttribute('x2',this.graph.getDrawingWidth()),this._0line.setAttribute('stroke','black'),this.groupGrids.appendChild(this._0line)}handleMouseMoveLocal(F,W){W-=this.graph.getPaddingTop(),this.mouseVal=this.getVal(W)}scaleToFitAxis(F,W,V,R,U,G){F&&F.isX()||(F=this.graph.getXAxis()),isNaN(V)&&(V=F.getCurrentMin()),isNaN(R)&&(R=F.getCurrentMax()),U===void 0&&(U=!0),G===void 0&&(G=!0),'number'==typeof W&&(R=V,V=W,W=!1);for(var Z=-(1/0),K=1/0,Q=0,J=0,$=this.graph.series.length;J<$;J++)this.graph.series[J].isShown()&&this.graph.series[J]!=W&&this.graph.series[J].getXAxis()==F&&this.graph.series[J].getYAxis()===this&&(Q++,Z=G?Math.max(Z,this.graph.series[J].getMax(V,R)):0,K=U?Math.min(K,this.graph.series[J].getMin(V,R)):0);if(0==Q)this.setMinMaxToFitSeries();else{K=U?K:this.getCurrentMin(),Z=G?Z:this.getCurrentMax();var ee=Z-K;K-=this.options.axisDataSpacing.min*ee,Z+=this.options.axisDataSpacing.max*ee,this._doZoomVal(K,Z)}return this}setMinMaxFlipped(){var F=this.maxPx-this.minPx;if(!isNaN(F)){var W=this.maxPx-F*this.options.span[0]-this.options.marginMin,V=this.maxPx-F*this.options.span[1]+this.options.marginMax;this.minPxFlipped=this.isFlipped()?W:V,this.maxPxFlipped=this.isFlipped()?V:W}}getZProj(F){return F*this.graph.options.zAxis.shiftY}}X.default=O,T.exports=X['default']})},function(u,A,S){var C,P,E;(function(T,X){P=[u,A,S(9)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y){'use strict';Object.defineProperty(X,'__esModule',{value:!0});var B=function(F){return F&&F.__esModule?F:{default:F}}(Y);class O extends B.default{constructor(F,W,V={}){super(F,W,V)}set categories(F){return this._barCategories=F,this}draw(){var F=this,V=this.graph.drawingSpaceWidth,R=this._barCategories,W;if(this.forceMin(0),this.forceMax(1),this.cacheCurrentMin(),this.cacheCurrentMax(),this.cacheInterval(),!!R){Array.isArray(R)||(R=[R]);for(var U=0;U<=R.length;U++)this.drawTick(U/R.length,2),U<R.length&&(W=this.nextTickLabel(function(G){G.setAttribute('y',(F.top?-1:1)*((1==F.options.tickPosition?8:20)+(F.top?10:0))),G.setAttribute('text-anchor','middle'),'black'!==F.getTicksLabelColor()&&G.setAttribute('fill',F.getTicksLabelColor()),G.style.dominantBaseline='hanging'}),W.setAttribute('x',this.getPos((U+0.5)/R.length)),W.textContent=R[U].title);return this.drawSpecifics(),this}}autoSeries(){let F=[];for(let W of this.graph.series)W.getXAxis()==this&&F.push(W);return this.setSeries(...F),this}setSeries(){var F=this;return this.series=arguments,Array.prototype.map.call(this.series,function(W,V){'object'==typeof W||(W=F.graph.getSerie(W)),W.setCategoryConfig&&W.setCategoryConfig(V,F._barCategories,F.series.length)}),this._getUsedCategories(),this}_getUsedCategories(){let F={},W=0;Array.prototype.map.call(this.series,G=>{let Z=G.getUsedCategories();for(let K of Z)F.hasOwnProperty(K)||(F[K]=1,W+=1),F[K]++,W++});let V=0;for(let G in F){let Z=F[G];F[G]=V,V+=Z}let R={},U=0;Array.prototype.map.call(this.series,G=>{let Z=G.getUsedCategories(),K={};Z.map(Q=>{R[Q]=R[Q]||0.5,K[Q]=(F[Q]+R[Q])/W,R[Q]++}),G.setDataIndices(K,W),U++})}getType(){return'category'}}X.default=O,T.exports=X['default']})},function(u,A,S){var C,P,E;(function(T,X){P=[u,A,S(10),S(3)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y,I){'use strict';function F(re,ie){return Math.round(re/ie)*ie}function W(re,ie){switch(ie.unit){case's':re.setSeconds(F(re.getSeconds(),ie.increment)),re.setMilliseconds(0);break;case'i':re.setMinutes(F(re.getMinutes(),ie.increment)),re.setSeconds(0),re.setMilliseconds(0);break;case'h':re.setHours(F(re.getHours(),ie.increment)),re.setMinutes(0),re.setSeconds(0),re.setMilliseconds(0);break;case'd':re.setMinutes(0),re.setSeconds(0),re.setMilliseconds(0),re.setHours(0),re.setDate(F(re.getDate(),ie.increment));break;case'm':re.setMinutes(0),re.setSeconds(0),re.setMilliseconds(0),re.setHours(0),re.setDate(1),re.setMonth(F(re.getMonth(),ie.increment));break;case'y':re.setMinutes(0),re.setSeconds(0),re.setMilliseconds(0),re.setHours(0),re.setDate(1),re.setMonth(0);break;default:throw'Date format not recognized';}return re}function V(re,ie){switch(ie.unit){case's':re.setSeconds(re.getSeconds()+ie.increment),re.setMilliseconds(0);break;case'i':re.setMinutes(re.getMinutes()+ie.increment),re.setSeconds(0),re.setMilliseconds(0);break;case'h':re.setHours(re.getHours()+ie.increment),re.setMinutes(0),re.setSeconds(0),re.setMilliseconds(0);break;case'd':re.setDate(re.getDate()+ie.increment),re.setMinutes(0),re.setSeconds(0),re.setMilliseconds(0),re.setHours(0);break;case'm':re.setMonth(re.getMonth()+ie.increment),re.setMinutes(0),re.setSeconds(0),re.setMilliseconds(0),re.setHours(0),re.setDate(1);break;case'y':re.setFullYear(re.getFullYear()+ie.increment),re.setMinutes(0),re.setSeconds(0),re.setMilliseconds(0),re.setHours(0),re.setDate(1),re.setMonth(0);break;default:throw'Date format not recognized';}return re}function R(re,ie,ae){if(re.groups[ie][ae])return re.groups[ie][ae].group.setAttribute('display','block'),re.groups[ie][ae];var se={group:document.createElementNS(re.graph.ns,'g'),text:document.createElementNS(re.graph.ns,'text')},ne=document.createElementNS(re.graph.ns,'line');return ne.setAttribute('stroke','black'),ne.setAttribute('y1',0),2===ie?(ne.setAttribute('y2',6),se.text.setAttribute('y',15),se.line=ne,se.group.appendChild(se.line)):1===ie?(ne.setAttribute('y2',20),se.text.setAttribute('y',10),se.line1=ne,se.line2=ne.cloneNode(),se.group.appendChild(se.line1),se.group.appendChild(se.line2)):void 0,(se.text.setAttribute('text-anchor','middle'),se.text.setAttribute('dominant-baseline','middle'),se.group.appendChild(se.text),re.getWrapper(ie).appendChild(se.group),re.groups[ie][ae]=se)}function U(re,ie,ae){for(;ae<re.groups[ie].length;ae++)G(re.groups[ie][ae])}function G(re){re.group.setAttribute('display','none')}function Z(re,ie){return ee(re,ie)}function K(re,ie,ae,se,ne,oe,le){switch(re){case 1:var pe=Math.max(se,Math.min(ne,oe)),de=Math.max(se,Math.min(ne,le));if(isNaN(de)||isNaN(pe))return;for(ie.line1.setAttribute('x1',pe),ie.line2.setAttribute('x1',de),ie.line1.setAttribute('x2',pe),ie.line2.setAttribute('x2',de),ie.text.setAttribute('x',(pe+de)/2);8*ae.length>de-pe;)if(ae=ae.substr(0,ae.length-2)+'.',1==ae.length){ae='';break}ie.text.textContent=ae;break;case 2:if(oe<se||oe>ne)return void G(ie);ie.line.setAttribute('x1',oe),ie.line.setAttribute('x2',oe),ie.text.setAttribute('x',oe),ie.text.textContent=ae;}}Object.defineProperty(X,'__esModule',{value:!0});var Q=function(re){return re&&re.__esModule?re:{default:re}}(Y),J=function(re){if(re&&re.__esModule)return re;var ie={};if(null!=re)for(var ae in re)Object.prototype.hasOwnProperty.call(re,ae)&&(ie[ae]=re[ae]);return ie.default=re,ie}(I),$=[{threshold:20,increments:{1:{increment:1,unit:'i',format:'HH"h"MM (dd/mm/yy)'},2:{increment:1,unit:'s',format:'MM:ss"s"'}}},{threshold:50,increments:{1:{increment:1,unit:'i',format:'HH"h"MM (dd/mm/yy)'},2:{increment:2,unit:'s',format:'MM:ss"s"'}}},{threshold:100,increments:{1:{increment:1,unit:'i',format:'HH"h"MM (dd/mm/yy)'},2:{increment:5,unit:'s',format:'MM:ss"s"'}}},{threshold:600,increments:{1:{increment:10,unit:'i',format:'HH"h"MM (dd/mm/yy)'},2:{increment:30,unit:'s',format:'MM:ss"s"'}}},{threshold:1e3,increments:{1:{increment:1,unit:'h',format:'HH"h"MM (dd/mm/yy)'},2:{increment:10,unit:'i',format:'MM"min"'}}},{threshold:1500,increments:{1:{increment:1,unit:'d',format:'dd/mm/yyyy'},2:{increment:1,unit:'i',format:'H"h"MM'}}},{threshold:3e3,increments:{1:{increment:1,unit:'d',format:'dd/mm/yyyy'},2:{increment:2,unit:'i',format:'H"h"MM'}}},{threshold:8e3,increments:{1:{increment:1,unit:'d',format:'dd/mm/yyyy'},2:{increment:10,unit:'i',format:'H"h"MM'}}},{threshold:26400,increments:{1:{increment:1,unit:'d',format:'dd/mm/yyyy'},2:{increment:20,unit:'i',format:'H"h"MM'}}},{threshold:86400,increments:{1:{increment:1,unit:'d',format:'dd/mm/yyyy'},2:{increment:1,unit:'h',format:'H"h"MM'}}},{threshold:2e5,increments:{1:{increment:1,unit:'d',format:'dd/mm/yyyy'},2:{increment:2,unit:'h',format:'H"h"MM'}}},{threshold:4e5,increments:{1:{increment:1,unit:'d',format:'dd/mm/yyyy'},2:{increment:6,unit:'h',format:'H"h"MM'}}},{threshold:1.4e6,increments:{1:{increment:1,unit:'d',format:'dd/mm/yyyy'},2:{increment:12,unit:'h',format:'HH"h"MM'}}},{threshold:6.4e6,increments:{1:{increment:1,unit:'m',format:'mmmm yyyy'},2:{increment:1,unit:'d',format:'dd'}}},{threshold:1.24e7,increments:{1:{increment:1,unit:'m',format:'mmmm yyyy'},2:{increment:2,unit:'d',format:'dd'}}},{threshold:43200000,increments:{1:{increment:1,unit:'m',format:'mmmm yyyy'},2:{increment:7,unit:'d',format:'dd'}}},{threshold:69120000,increments:{1:{increment:1,unit:'m',format:'mmmm yyyy'},2:{increment:15,unit:'d',format:'dd'}}},{threshold:86400000,increments:{1:{increment:1,unit:'y',format:'yyyy'},2:{increment:3,unit:'m',format:'mm/yyyy'}}},{threshold:172800000,increments:{1:{increment:1,unit:'y',format:'yyyy'},2:{increment:4,unit:'m',format:'mm/yyyy'}}},{threshold:864000000,increments:{1:{increment:1,unit:'y',format:'yyyy'},2:{increment:6,unit:'m',format:'mm/yyyy'}}},{threshold:1036800000,increments:{1:{increment:1,unit:'y',format:'yyyy'},2:{increment:1,unit:'y',format:'yyyy'}}}],ee=function(){var re=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[WLloSZ]|"[^"]*"|'[^']*'/g,ie=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,ae=/[^-+\dA-Z]/g,se=function(oe,le){for(oe=oe+'',le=le||2;oe.length<le;)oe='0'+oe;return oe},ne=function(oe,le){var pe=new Date(oe[le+'FullYear'](),0,1);return Math.ceil(((oe-pe)/8.64e7+pe[le+'Day']()+1)/7)};return function(oe,le,pe){var de=ee;if(1!=arguments.length||'[object String]'!=Object.prototype.toString.call(oe)||/\d/.test(oe)||(le=oe,oe=void 0),oe=oe?new Date(oe):new Date,isNaN(oe))throw SyntaxError('invalid date:'+oe);le=(de.masks[le]||le||de.masks['default'])+'','UTC:'==le.slice(0,4)&&(le=le.slice(4),pe=!0);var ge=pe?'getUTC':'get',ue=oe[ge+'Date'](),he=oe[ge+'Day'](),ce=oe[ge+'Month'](),xe=oe[ge+'FullYear'](),me=oe[ge+'Hours'](),fe=oe[ge+'Minutes'](),ye=oe[ge+'Seconds'](),be=oe[ge+'Milliseconds'](),Ae=pe?0:oe.getTimezoneOffset(),Me={d:ue,dd:se(ue),ddd:de.i18n.dayNames[he],dddd:de.i18n.dayNames[he+7],m:ce+1,mm:se(ce+1),mmm:de.i18n.monthNames[ce],mmmm:de.i18n.monthNames[ce+12],yy:(xe+'').slice(2),yyyy:xe,h:me%12||12,hh:se(me%12||12),H:me,HH:se(me),M:fe,MM:se(fe),s:ye,ss:se(ye),l:se(be,3),L:se(99<be?Math.round(be/10):be),t:12>me?'a':'p',tt:12>me?'am':'pm',T:12>me?'A':'P',TT:12>me?'AM':'PM',Z:pe?'UTC':((oe+'').match(ie)||['']).pop().replace(ae,''),o:(0<Ae?'-':'+')+se(100*Math.floor(Math.abs(Ae)/60)+Math.abs(Ae)%60,4),S:['th','st','nd','rd'][3<ue%10?0:(10!=ue%100-ue%10)*ue%10],W:ne(oe,ge)};return le.replace(re,function(Se){return Se in Me?Me[Se]:Se.slice(1,Se.length-1)})}}();ee.masks={'default':'ddd mmm dd yyyy HH:MM:ss',shortDate:'m/d/yy',mediumDate:'mmm d, yyyy',longDate:'mmmm d, yyyy',fullDate:'dddd, mmmm d, yyyy',shortTime:'h:MM TT',mediumTime:'h:MM:ss TT',longTime:'h:MM:ss TT Z',isoDate:'yyyy-mm-dd',isoTime:'HH:MM:ss',isoDateTime:'yyyy-mm-dd\'T\'HH:MM:ss',isoUtcDateTime:'UTC:yyyy-mm-dd\'T\'HH:MM:ss\'Z\''},ee.i18n={dayNames:['Sun','Mon','Tue','Wed','Thu','Fri','Sat','Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],monthNames:['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec','January','February','March','April','May','June','July','August','September','October','November','December']};class te extends Q.default{constructor(){super(...arguments)}init(re,ie){super.init(re,ie),this.wrapper={1:document.createElementNS(re.ns,'g'),2:document.createElementNS(re.ns,'g')},this.groups={1:[],2:[]};var ae=document.createElementNS(re.ns,'rect');ae.setAttribute('fill','#c0c0c0'),ae.setAttribute('stroke','#808080'),ae.setAttribute('height','20'),ae.setAttribute('x','0'),ae.setAttribute('y','0'),this.rect=ae,this.wrapper[1].appendChild(this.rect),this.group.appendChild(this.wrapper[1]),this.group.appendChild(this.wrapper[2]),this.wrapper[1].setAttribute('transform','translate( 0, 25 )'),this.wrapper[2].setAttribute('transform','translate( 0, 00 )')}draw(){this.cacheCurrentMax(),this.cacheCurrentMin(),(void 0==this.currentAxisMin||void 0==this.currentAxisMax)&&this.setMinMaxToFitSeries(!0),this.line.setAttribute('x1',this.getMinPx()),this.line.setAttribute('x2',this.getMaxPx()),this.line.setAttribute('y1',0),this.line.setAttribute('y2',0);var ie=this.maxPx-this.minPx,ae=this.getCurrentInterval(),ne=this.getCurrentMax(),oe=this.getCurrentMin();if(this.rect.setAttribute('width',ie),this.rect.setAttribute('x',this.minPx),!ne||!oe)return 0;var le;for(me=0;me<$.length;me++)if($[me].threshold>ae/ie){le=$[me];break}le||(le=$[$.length-1]);var ge=0,pe,de,ue,he,ce,xe,me;for(ge=1;2>=ge;ge++){if(!J.isNumeric(oe)){U(this,ge,0);break}ue=new Date(oe),he=W(ue,le.increments[ge]),me=0;do if(ce=Z(he,le.increments[ge].format),xe=R(this,ge,me),pe=this.getPx(he.getTime()),he=V(he,le.increments[ge]),de=this.getPx(he.getTime()),K(ge,xe,ce,this.getMinPx(),this.getMaxPx(),pe,de),me++,100<me)break;while(he.getTime()<ne);U(this,ge,me)}}isX(){return!0}getWrapper(re){return this.wrapper[re]}setShift(re){this.shift=re,this.group.setAttribute('transform','translate(0 '+(this.top?this.shift:this.graph.getDrawingHeight()-this.shift)+')')}getAxisPosition(){return 60}setMinMaxFlipped(){var re=this.maxPx-this.minPx,ie=re*this.options.span[1]+this.minPx,ae=re*this.options.span[0]+this.minPx;this.minPxFlipped=this.isFlipped()?ie:ae,this.maxPxFlipped=this.isFlipped()?ae:ie}}X.default=te,T.exports=X['default']})},function(u,A,S){var C,P,E;(function(T,X){P=[u,A,S(1),S(15),S(3),S(16),S(5)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y,I,B,O,F){'use strict';function V($){return $&&$.__esModule?$:{default:$}}function R($,ee,te,re,ie){if(ee){if($.options.markersIndependant){var ae=$.getMarkerDomIndependent($.counter2,ee),se='M '+te+' '+re+' ';se+=ee.markerPath+' ',ae.setAttribute('d',se)}ie.path=ie.path||'',ie.path+='M '+te+' '+re+' ',ie.path+=ee.markerPath+' '}}Object.defineProperty(X,'__esModule',{value:!0});var U=V(Y),G=V(I),Z=function($){if($&&$.__esModule)return $;var ee={};if(null!=$)for(var te in $)Object.prototype.hasOwnProperty.call($,te)&&(ee[te]=$[te]);return ee.default=$,ee}(B),K=V(O),Q=V(F);class J extends G.default{static default(){return{lineColor:'black',lineStyle:1,flip:!1,label:'',lineWidth:1,markers:!1,trackMouse:!1,trackMouseLabel:!1,trackMouseLabelRouding:1,lineToZero:!1,selectableOnClick:!1,markersIndependant:!1}}constructor(){super(...arguments),this.selectionType='unselected',this.markerFamilies={},Z.mapEventEmission(this.options,this),this.styles={},this.styles.unselected={lineColor:this.options.lineColor,lineStyle:this.options.lineStyle,lineWidth:this.options.lineWidth,markers:this.options.markers},this.styles.selected={lineWidth:3},this.extendStyles(),this.markersDom=new Map,this.shown=!0,this.data=[],this._isMinOrMax={x:{min:!1,max:!1},y:{min:!1,max:!1}},this.groupLines=document.createElementNS(this.graph.ns,'g'),this.domMarker=document.createElementNS(this.graph.ns,'path'),this.domMarker.style.cursor='pointer',this.groupMain=document.createElementNS(this.graph.ns,'g'),this.additionalData={},this.marker=document.createElementNS(this.graph.ns,'circle'),this.marker.setAttribute('fill','black'),this.marker.setAttribute('r',3),this.marker.setAttribute('display','none'),this.markerLabel=document.createElementNS(this.graph.ns,'text'),this.markerLabelSquare=document.createElementNS(this.graph.ns,'rect'),this.markerLabelSquare.setAttribute('fill','white'),this.domMarkerHover={},this.domMarkerSelect={},this.markerHovered=0,this.groupMarkerSelected=document.createElementNS(this.graph.ns,'g'),this.markerPoints={},this.lines=[],this.groupMain.appendChild(this.groupLines),this.groupMain.appendChild(this.marker),this.groupMain.appendChild(this.groupMarkerSelected),this.groupMain.appendChild(this.markerLabelSquare),this.groupMain.appendChild(this.markerLabel),this.groupMarkers=document.createElementNS(this.graph.ns,'g'),this.groupMain.appendChild(this.groupMarkers),this.independantMarkers=[],this.initExtended1&&this.initExtended1(),this.groupLines.addEventListener('click',()=>{this.options.selectableOnClick&&(this.isSelected()?this.graph.unselectSerie(this):this.graph.selectSerie(this))}),this.options.markers&&this.setMarkers(this.options.markers,'unselected')}setWaveform($){if(!($ instanceof Q.default))throw'Cannot assign waveform to serie. Waveform is not of the proper Waveform instance';return this.waveform=$,this.minX=this.waveform.getXMin(),this.maxX=this.waveform.getXMax(),this.minY=this.waveform.getMin(),this.maxY=this.waveform.getMax(),this.graph.updateDataMinMaxAxes(),this.dataHasChanged(),this}setOptions($){return this.options=Z.extend(!0,{},J.prototype.defaults,$||{}),this.styles.unselected={lineColor:this.options.lineColor,lineStyle:this.options.lineStyle,markers:this.options.markers},this.applyLineStyles(),this}onMouseOverMarker($,ee){this.toggleMarker(ee,!0,!0);this.options.onMouseOverMarker&&this.options.onMouseOverMarker(ee,!!this.infos&&(this.infos[ee]||!1),[this.waveform.getX(ee),this.waveform.getY(ee)])}onMouseOutMarker($,ee){this.markersOffHover(),this.options.onMouseOutMarker&&this.options.onMouseOutMarker(ee,!!this.infos&&(this.infos[ee]||!1),[this.waveform.getX(ee),this.waveform.getY(ee)])}toggleMarker($,ee,te){let re=$;var ie;'undefined'==typeof ee&&(ie=te?!this.domMarkerHover[$]:!this.domMarkerSelect[$]);var ae=this['domMarker'+(te?'Hover':'Select')];if(ie||!0===ee){if(!ae[$]){var se=document.createElementNS(this.graph.ns,'path');this.setMarkerStyleTo(se,this.markerFamilies[this.selectionType][this.getMarkerCurrentFamily(re)]),this['domMarker'+(te?'Hover':'Select')][$]=se,this.groupMarkerSelected.appendChild(se)}else se=ae[$];let ne=this.getX(this.waveform.getX(re)),oe=this.getY(this.waveform.getY(re));se.setAttribute('d','M '+ne+' '+oe+' '+this.getMarkerPath(this.markerFamilies[this.selectionType][this.getMarkerCurrentFamily(re)],1)),te&&this.markerHovered++}else if((!ie||!1===ee)&&(te&&this.domMarkerHover[$]&&!this.domMarkerSelect[$]||this.domMarkerSelect[$])){if(!ae[$])return;this.groupMarkerSelected.removeChild(ae[$]),delete ae[$],te&&this.markerHovered--}return ie}markersOffHover(){for(var $ in this.domMarkerHover)this.toggleMarker($.split(','),!1,!0);return this}markersOffSelect(){for(var $ in this.domMarkerSelect)this.toggleMarker($.split(','),!1,!1);return this}onClickOnMarker($,ee){var te=this.toggleMarker(ee);te&&this.options.onSelectMarker&&this.options.onSelectMarker(ee,!!this.infos&&(this.infos[ee[0]]||!1)),!te&&this.options.onUnselectMarker&&this.options.onUnselectMarker(ee,!!this.infos&&(this.infos[ee[0]]||!1)),this.options.onToggleMarker&&this.options.onToggleMarker(ee,!!this.infos&&(this.infos[ee[0]]||!1),te)}_getMarkerIndexFromEvent($){var ee=this.graph._getXY($);return this.searchIndexByPxXY(ee.x-this.graph.getPaddingLeft(),ee.y-this.graph.getPaddingTop())}onMouseWheel(){}empty(){for(var $=0,ee=this.lines.length;$<ee;$++)this.groupLines.removeChild(this.lines[$]);return this.lines=[],this}select($){return $=$||'selected',this.selected='unselected'!==$,this.areMarkersShown()||this.areMarkersShown($)?(this.selectionType=$,this.draw(!0),this.applyLineStyles()):(this.selectionType=$,this.applyLineStyles()),this.applyLineStyle(this.getSymbolForLegend()),this}unselect(){return this.selected=!1,this.select('unselected')}degrade($){return this.degradationPx=$,this}drawInit($){if(this.currentLineId=0,this.counter=0,this._drawn=!0,this.currentLine='',!this.waveform)this._dataToUse=this.data,this._xDataToUse=this.xData;else if(this.degradationPx)this.waveform.resampleForDisplay({resampleToPx:this.degradationPx,xPosition:this.getXAxis().getPx.bind(this.getXAxis()),minX:this.getXAxis().getCurrentMin(),maxX:this.getXAxis().getCurrentMax()}),this._dataToUse=[this.waveform.getDataToUseFlat()];else if(this.waveform.hasAggregation()){let re=this.getXAxis(),ie=this.graph.getDrawingWidth()*(re.getDataMax()-re.getDataMin())/(re.getCurrentMax()-re.getCurrentMin()),ae=this.waveform.selectAggregatedData(ie);if(ae instanceof Promise)return ae.then(()=>{this.draw($)}),!1;if(!1===ae)return!1;this._dataToUse=this.waveform.getDataToUseFlat()}return!0}removeLinesGroup(){this._afterLinesGroup=this.groupLines.nextSibling,this.groupMain.removeChild(this.groupLines)}insertLinesGroup(){if(!this._afterLinesGroup)throw'Could not find group after lines to insertion.';this.groupMain.insertBefore(this.groupLines,this._afterLinesGroup),this._afterLinesGroup=!1}removeExtraLines(){for(var $=this.currentLineId,ee=this.lines.length;$<ee;$++)this.groupLines.removeChild(this.lines[$]);this.lines.splice(this.currentLineId,ee-this.currentLineId),this.currentLineId=0}draw($){if(super.draw(...arguments),!this.getXAxis()||!this.getYAxis())throw'No axes were defined for this serie';if($||this.hasDataChanged()){if(!this.drawInit($))return;var ee=this._dataToUse,te=this._xDataToUse,re=this._slotToUse;this.removeLinesGroup(),this.eraseMarkers(),this.lookForMaxima=!0,this.lookForMinima=!1,this.markerFamily=this.markerFamilies[this.selectionType||'unselected'],this.pos0=this.getYAxis().getPos(0),this.hasErrors()&&this.errorDrawInit(),this._draw(),this.hasErrors()&&this.errorDraw(),this.removeExtraLines(),this.insertMarkers(),this.insertLinesGroup()}for(var ie in this.domMarkerHover)this.toggleMarker(ie.split(','),!1,!0);for(var ie in this.domMarkerSelect)this.toggleMarker(ie.split(','),!1,!1);this.applyLineStyle(this.getSymbolForLegend()),this.hasStyleChanged(this.selectionType)&&this.updateStyle(),this.dataHasChanged(!1),super.afterDraw()}_draw(){let $=this,ee=this.waveform,ae=!1,se=!1,de=this.getXAxis(),ge=this.getYAxis(),ue=de.getCurrentMin(),he=ge.getCurrentMin(),ce=de.getCurrentMax(),xe=ge.getCurrentMax(),te,re,ie,ne,oe,le,pe;if(ee){te=ee.getData(!0);let _e=ee.getShift(),ve=ee.getScale(),Ce=!1,Pe=!1,Le=this.isMonotoneous(),Ee=this.markersShown(),Te=0,Xe=ee.getLength(),me,fe,ye,be,Ae,Me,Se,ke,we;for(this.currentLine='',ee.isXMonotoneous()&&(ee.isXMonotoneousAscending()?(Te=ee.getIndexFromX(ue,!0)||0,Xe=ee.getIndexFromX(ce,!0),!1===Xe&&(Xe=ee.getLength())):(Te=ee.getIndexFromX(ce,!0)||0,Xe=ee.getIndexFromX(ue,!0),!1===Xe&&(Xe=ee.getLength())),Xe+=2,Xe>te.length&&(Xe=te.length));Te<Xe;Te+=1){if(re=ee.getX(Te,!0),ie=te[Te]*ve+_e,re!=re||ie!=ie){this._createLine();continue}if(re<ue&&ae<ue||re>ce&&ae>ce||(ie<he&&se<he||ie>xe&&se>xe)&&!this.options.lineToZero){ae=re,se=ie,Pe=!0;continue}if(this.counter2=Te,Ee&&this.getMarkerCurrentFamily(this.counter2),le=this.getX(re),pe=this.getY(ie),le!=ne||pe!=oe){if(Ce=Le?ie<he||ie>xe:re<ue||ie<he||re>ce||ie>xe,this.options.lineToZero){if(Ce=re<ue||re>ce,Ce)continue;}else if(Ce||Pe){!1!==ae&&!1!==se||Pe?(we=[],me=(re-ue)/(re-ae),fe=ie-me*(ie-se),ye=(re-ce)/(re-ae),be=ie-ye*(ie-se),Ae=(ie-he)/(ie-se),Me=re-Ae*(re-ae),Se=(ie-xe)/(ie-se),ke=re-Se*(re-ae),1>me&&0<me&&!1!==fe&&fe<xe&&fe>he&&we.push([ue,fe]),1>ye&&0<ye&&!1!==be&&be<xe&&be>he&&we.push([ce,be]),1>Ae&&0<Ae&&!1!==Me&&Me<ce&&Me>ue&&we.push([Me,he]),1>Se&&0<Se&&!1!==ke&&ke<ce&&ke>ue&&we.push([ke,xe]),0<we.length?Ce?Pe?2==we.length&&(this._createLine(),this._addPoint(this.getX(we[0][0]),this.getY(we[0][1]),we[0][0],we[0][1],!1,!1,!1),this._addPoint(this.getX(we[1][0]),this.getY(we[1][1]),we[0][0],we[0][1],!1,!1,!1)):(1<we.length&&(console.error('Programmation error. Please e-mail me.'),console.log(we,ke,Me,be,fe,ie,he,xe,se)),this._addPoint(this.getX(we[0][0]),this.getY(we[0][1]),we[0][0],we[0][1],!1,!1,!1)):(1<we.length&&(console.error('Programmation error. Please e-mail me.'),console.log(we,ke,Me,be,fe,ie,he,xe,se)),this._createLine(),this._addPoint(this.getX(we[0][0]),this.getY(we[0][1]),we[0][0],we[0][1],!1,!1,!1),this._addPoint(le,pe,ae,se,!1,!1,!0)):!Ce&&this._addPoint(le,pe,ae,se,Te,!1,!1)):(ne=le,oe=pe,ae=re,se=ie),ne=le,oe=pe,ae=re,se=ie,Pe=Ce;continue}if(le!=le||pe!=pe){0<this.counter&&this._createLine();continue}this._addPoint(le,pe,re,ie,Te,!1,!0),ne=le,oe=pe,ae=re,se=ie}}if(this._createLine(),this._tracker){this._trackerDom&&this._trackerDom.remove();var Ye=this.groupLines.cloneNode(!0);for(this.groupMain.appendChild(Ye),Te=0,Xe=Ye.children.length;Te<Xe;Te++)Ye.children[Te].setAttribute('stroke','transparent'),Ye.children[Te].setAttribute('stroke-width','25px'),Ye.children[Te].setAttribute('pointer-events','stroke');this._trackerDom=Ye,this.groupMain.addEventListener('mousemove',De=>{var Ie=this.graph._getXY(De),je=this.handleMouseMove(!1,!1);this._trackingCallback(this,je,Ie.x,Ie.y)}),this.groupMain.addEventListener('mouseleave',()=>{this._trackingOutCallback(this)})}return this}}kill(){super.kill()}getMarkerCurrentFamily($){if(this.markerPoints&&this.markerPoints[this.selectionType]){for(var te=0,ee;te<this.markerPoints[this.selectionType].length&&this.markerPoints[this.selectionType][te][0]<=$;te++)this.markerPoints[this.selectionType][te][1]>=$&&(this.markerCurrentFamily=this.markerPoints[this.selectionType][te][2],ee=this.markerFamilies[this.selectionType][this.markerCurrentFamily]);return!!ee&&(this.getMarkerDom(ee),this.markerCurrentFamily)}}drawSlot($,ee){var re=0,ie,ae,se,ne;if(this.isFlipped())var oe=this.slots[ee]/(this.maxY-this.minY),le=Math.floor((this.getYAxis().getCurrentMin()-this.minY)*oe),pe=Math.ceil((this.getYAxis().getCurrentMax()-this.minY)*oe);else var oe=this.slots[ee]/(this.maxX-this.minX),le=Math.floor((this.getXAxis().getCurrentMin()-this.minX)*oe),pe=Math.ceil((this.getXAxis().getCurrentMax()-this.minX)*oe);for(ne=le;ne<=pe;ne++)$[ne]&&(this.isFlipped()?(ae=Math.floor(this.getY($[ne].x)),se=this.getX($[ne].max),this._addPoint(this.getX($[ne].start),ae,!1,!1,!1,!1,!1),this._addPoint(se,ae,!1,!1,!1,!0,!1),this._addPoint(this.getX($[ne].min),ae,!1,!1,!1,!1,!1),this._addPoint(this.getX($[ne].stop),ae,!1,!1,!1,!0,!1)):(ie=Math.floor(this.getX($[ne].x)),se=this.getY($[ne].max),this._addPoint(ie,this.getY($[ne].start),!1,!1,!1,!1,!1),this._addPoint(ie,se,!1,!1,!1,!0,!1),this._addPoint(ie,this.getY($[ne].min),!1,!1,!1,!1,!1),this._addPoint(ie,this.getY($[ne].stop),!1,!1,!1,!0,!1)));this._createLine(),re++}setMarkerStyleTo($,ee){if(!$||!ee)throw console.trace(),'Cannot set marker style. DOM does not exist.';$.setAttribute('fill',ee.fillColor||'transparent'),$.setAttribute('stroke',ee.strokeColor||this.getLineColor()),$.setAttribute('stroke-width',ee.strokeWidth||1)}hideTrackingMarker(){this.marker.setAttribute('display','none'),this.markerLabel.setAttribute('display','none'),this.markerLabelSquare.setAttribute('display','none')}_addPoint($,ee,te,re,ie,ae,se){if($===$&&ee===ee)return 0==this.counter?this.currentLine='M ':this.options.lineToZero||ae?this.currentLine+='M ':this.currentLine+='L ',this.currentLine+=$,this.currentLine+=' ',this.currentLine+=ee,this.currentLine+=' ',this.options.lineToZero&&void 0!==this.pos0&&(this.currentLine+='L ',this.currentLine+=$,this.currentLine+=' ',this.currentLine+=this.pos0,this.currentLine+=' '),this.hasErrors()&&this.errorAddPoint(ie,te,re,$,ee),this.markerPoints?void(this.markersShown()&&!1!==se&&this.markerFamily&&R(this,this.markerFamily[this.markerCurrentFamily],$,ee,this.markersDom.get(this.markerFamily[this.markerCurrentFamily])),this.counter++):void this.counter++}_createLine(){var $=this.currentLineId++,ee;return this.lines[$]?ee=this.lines[$]:(ee=document.createElementNS(this.graph.ns,'path'),this.applyLineStyle(ee),this.groupLines.appendChild(ee),this.lines[$]=ee),0==this.counter?ee.setAttribute('d',''):ee.setAttribute('d',this.currentLine),this.currentLine='M ',this.counter=0,ee}applyLineStyles(){for(var $=0;$<this.lines.length;$++)this.applyLineStyle(this.lines[$])}applyLineStyle($){$.setAttribute('stroke',this.getLineColor()),$.setAttribute('stroke-width',this.getLineWidth()),this.getLineDashArray()?$.setAttribute('stroke-dasharray',this.getLineDashArray()):$.removeAttribute('stroke-dasharray'),$.setAttribute('fill','none')}updateStyle(){this.applyLineStyles(),this.setLegendSymbolStyle(),this.styleHasChanged(!1)}getMarkerPath($,ee){var te=$.zoom||1,ee=ee||0,re=[];switch($.type){case 2:re=['m',-2,-2,'l',4,4,'m',-4,0,'l',4,-4];break;case 3:re=['m',-2,0,'l',4,0,'m',-2,-2,'l',0,4];break;case 4:re=['m',-1,-1,'l',2,0,'l',-1,2,'z'];break;default:case 1:re=['m',-2,-2,'l',4,0,'l',0,4,'l',-4,0,'z'];}if((1==te||!te)&&!ee)return re.join(' ');if(re){for(var ae=0,se=re.length;ae<se;ae++)typeof re[ae]=='number'&&(re[ae]*=te+ee);return re.join(' ')}}getMarkerDom($){var ee=this;if(!this.markersDom.has($)){var te=document.createElementNS(this.graph.ns,'path');this.setMarkerStyleTo(te,$),this.markersDom.set($,{dom:te,path:''}),te.addEventListener('mouseover',function(re){var ie=ee._getMarkerIndexFromEvent(re);ee.onMouseOverMarker(re,ie)}),te.addEventListener('mouseout',function(re){var ie=ee._getMarkerIndexFromEvent(re);ee.onMouseOutMarker(re,ie)}),te.addEventListener('click',function(re){var ie=ee._getMarkerIndexFromEvent(re);ee.onClickOnMarker(re,ie)})}return $.dom}getMarkerDomIndependent($,ee){if(!this.independantMarkers[$]){var te=document.createElementNS(this.graph.ns,'path');this.setMarkerStyleTo(te,ee),te.addEventListener('mouseover',re=>{this.onMouseOverMarker(re,$)}),te.addEventListener('mouseout',re=>{this.onMouseOutMarker(re,$)}),te.addEventListener('click',re=>{this.onClickOnMarker(re,$)}),this.independantMarkers[$]=te}return this.groupMarkers.appendChild(this.independantMarkers[$]),this.independantMarkers[$]}searchIndexByPxXY($,ee){for(var te=!1,re=!1,ae=this._xDataToUse,oe=0,le=this.waveform.getLength(),ie,se,ne;oe<le;oe+=1)se=this.waveform.getX(oe),ne=this.waveform.getY(oe),ie=Math.pow(this.getX(se)-$,2)+Math.pow(this.getY(ne)-ee,2),(!te||ie<te)&&(te=ie,re=oe);return re}searchClosestValue($){if(this.waveform){const te=this.waveform.getIndexFromX($);let re={xMin:this.waveform.getX(te),xMax:this.waveform.getX(te+1),yMin:this.waveform.getY(te),yMax:this.waveform.getY(te+1)};return Math.abs(re.xMin-$)<Math.abs(re.xMax-$)?(re.xClosest=re.xMin,re.yClosest=re.yMin):(re.xClosest=re.xMax,re.yClosest=re.yMax),re}}handleMouseMove($,ee){var te=$||this.getXAxis().getMouseVal(),oe=this.searchClosestValue(te);if(oe){var le=(te-oe.xMin)/(oe.xMax-oe.xMin),pe=(1-le)*oe.yMin+le*oe.yMax;if(ee&&this.options.trackMouse){if(void 0==oe.xMin)return!1;var de=this.getX(this.getFlip()?pe:te),ge=this.getY(this.getFlip()?te:pe);switch(this.marker.setAttribute('display','block'),this.marker.setAttribute('cx',de),this.marker.setAttribute('cy',ge),this.markerLabel.setAttribute('display','block'),this.markerLabelSquare.setAttribute('display','block'),this.options.trackMouseLabel){case!1:break;default:this.markerLabel.textContent=this.options.trackMouseLabel.replace('<x>',te.toFixed(this.options.trackMouseLabelRouding)).replace('<y>',pe.toFixed(this.options.trackMouseLabelRouding));}this.markerLabel.setAttribute('x',de+5),this.markerLabel.setAttribute('y',ge-5),this.markerLabelSquare.setAttribute('x',de+5),this.markerLabelSquare.setAttribute('y',ge-5-this.graph.options.fontSize),this.markerLabelSquare.setAttribute('width',this.markerLabel.getComputedTextLength()+2),this.markerLabelSquare.setAttribute('height',this.graph.options.fontSize+2)}return{xBefore:oe.xMin,xAfter:oe.xMax,yBefore:oe.yMin,yAfter:oe.yMax,trueX:te,interpolatedY:pe,xClosest:oe.xClosest,yClosest:oe.yClosest}}}getMax($,ee){var te=Math.min($,ee),re=Math.max($,ee),ie=this.searchClosestValue(te),ae=this.searchClosestValue(re),oe=-(1/0),se,ne,le,pe;if(ie||(te=this.minX,ie=this.searchClosestValue(te)),ae||(re=this.maxX,ae=this.searchClosestValue(re)),!ie||!ae)return-(1/0);for(se=ie.dataIndex;se<=ae.dataIndex;se++)for(le=se==ie.dataIndex?ie.xBeforeIndexArr:0,pe=se==ae.dataIndex?ae.xBeforeIndexArr:this.data[se].length,ne=le;ne<=pe;ne+=2)oe=Math.max(oe,this.data[se][ne+1]);return oe}getMin($,ee){var te=Math.min($,ee),re=Math.max($,ee),ie=this.searchClosestValue(te),ae=this.searchClosestValue(re),oe=1/0,se,ne,le,pe;if(ie||(te=this.minX,ie=this.searchClosestValue(te)),ae||(re=this.maxX,ae=this.searchClosestValue(re)),!ie||!ae)return 1/0;for(se=ie.dataIndex;se<=ae.dataIndex;se++)for(le=se==ie.dataIndex?ie.xBeforeIndexArr:0,pe=se==ae.dataIndex?ae.xBeforeIndexArr:this.data[se].length,ne=le;ne<=pe;ne+=2)oe=Math.min(oe,this.data[se][ne+1]);return oe}setStyle($,ee='unselected'){this.styles[ee]=$,this.styleHasChanged(ee)}setLineStyle($,ee='unselected',te){return this.styles[ee]=this.styles[ee]||{},this.styles[ee].lineStyle=$,te&&this.setLineStyle($,'selected'),this.styleHasChanged(ee),this}getLineStyle($){return this.getStyle($).lineStyle}getLineDashArray($=this.selectionType||'unselected'){switch(this.getStyle($).lineStyle){case 2:return'1, 1';break;case 3:return'2, 2';break;case 4:return'3, 3';break;case 5:return'4, 4';break;case 6:return'5, 5';break;case 7:return'5 2';break;case 8:return'2 5';break;case 9:return'4 2 4 4';break;case 10:return'1,3,1';break;case 11:return'9 2';break;case 12:return'2 9';break;case 1:case!1:return!1;break;default:return this.styles[$].lineStyle;}this.styleHasChanged($)}getStyle($=this.selectionType||'unselected'){return this.styles[$]}extendStyles(){for(var $ in this.styles){var ee=this.styles[$];ee&&(this.styles[$]=Z.extend(!0,{},this.styles.unselected,ee))}}extendStyle($,ee){var te=this.styles[$];this.styles[$]=Z.extend(!0,{},this.styles[ee||'unselected'],te||{}),this.styles[$].markers.map(function(re){re.dom&&(re.dom='')}),this._recalculateMarkerPoints($,this.styles[$].markers),this.styleHasChanged($)}setLineWidth($,ee,te){return ee=ee||'unselected',this.styles[ee]=this.styles[ee]||{},this.styles[ee].lineWidth=$,te&&this.setLineWidth($,'selected'),this.styleHasChanged(ee),this}getLineWidth($){return this.getStyle($).lineWidth||1}setLineColor($,ee,te){return ee=ee||'unselected',this.styles[ee]=this.styles[ee]||{},this.styles[ee].lineColor=$,te&&this.setLineColor($,'selected'),this.styleHasChanged(ee),this}getLineColor($){return this.getStyle($).lineColor||'black'}showMarkers($,ee){return $=$||'unselected',this.styles[$]=this.styles[$]||{},this.styles[$].showMarkers=!0,ee&&this._drawn?this.draw(!0):this.styleHasChanged($),this}hideMarkers($,ee){return $=$||'unselected',this.styles[$].showMarkers=!1,ee&&this._drawn?this.draw(!0):this.styleHasChanged($),this}markersShown($){return!1!==this.getStyle($).showMarkers}areMarkersShown(){return this.markersShown.apply(this,arguments)}isMarkersShown(){return this.markersShown.apply(this,arguments)}setMarkers($,ee,te){return this.styles[ee||'unselected']=this.styles[ee||'unselected']||{},this.showMarkers(ee,!1),Array.isArray($)||'object'!=typeof $?!$&&($=[{type:1,zoom:1,points:'all'}]):$=[$],this.styles[ee||'unselected'].markers=$,te&&(this.styles.selected.markers=Z.extend(!0,{},$)),this._recalculateMarkerPoints(ee,$),this.styleHasChanged(ee),this.dataHasChanged(!0),this}setMarkersPoints($,ee,te){this._extendMarkers('points',$,ee,te,!0)}setMarkersColor($,ee,te){this._extendMarkers('color',$,ee,te)}setMarkersType($,ee,te){this._extendMarkers('type',$,ee,te)}setMarkersZoom($,ee,te){this._extendMarkers('zoom',$,ee,te)}setMarkersStrokeColor($,ee,te){this._extendMarkers('strokeColor',$,ee,te)}setMarkersStrokeWidth($,ee,te){this._extendMarkers('strokeWidth',$,ee,te)}setMarkersFillColor($,ee,te){this._extendMarkers('fillColor',$,ee,te)}_extendMarkers($,ee,te,re,ie){(te=te||0,re=re||'unselected',this.styles[re]&&this.styles[re].markers)&&(this.styles[re].markers[te][$]=ee,ie&&this._recalculateMarkerPoints(re,this.styles[re].markers),this.markersDom[this.styles[re].markers[te]]&&this.setMarkerStyleTo(this.markersDom[this.styles[re].markers[te]].dom,this.styles[re].markers[te]))}_recalculateMarkerPoints($,ee){var te=[];te.push([0,1/0,null]);for(var re=0,ie=ee.length;re<ie;re++){ee[re].markerPath=this.getMarkerPath(ee[re]),ee[re].points||(ee[re].points='all'),Array.isArray(ee[re].points)||(ee[re].points=[ee[re].points]);for(var ae=0,se=ee[re].points.length;ae<se;ae++)'all'==ee[re].points[ae]?te.push([0,1/0,re]):Array.isArray(ee[re].points[ae])?te.push([ee[re].points[ae][0],ee[re].points[ae][1],re]):te.push([ee[re].points[ae],ee[re].points[ae],re])}this.markerFamilies[$||'unselected']=ee,te.sort(function(ne,oe){return ne[0]-oe[0]||(null==ne[2]?-1:1)}),this.markerPoints[$||'unselected']=te}insertMarkers($){if(this.markerFamilies&&this.markerFamilies[$||this.selectionType]&&!this.options.markersIndependant)for(var ee=0,te=this.markerFamilies[$||this.selectionType].length;ee<te;ee++)if(this.markersDom.has(this.markerFamilies[$||this.selectionType][ee])){let re=this.markersDom.get(this.markerFamilies[$||this.selectionType][ee]);re.dom.setAttribute('d',re.path),this.groupMarkers.appendChild(re.dom),this.currentMarkersSelectionType=this.selectionType}}getMarkerForLegend(){if(this.markerPoints&&this.markerPoints[this.selectionType]){if(!this.markerForLegend){var $=document.createElementNS(this.graph.ns,'path');this.setMarkerStyleTo($,this.markerFamilies[this.selectionType][0]),$.setAttribute('d','M 14 0 '+this.getMarkerPath(this.markerFamilies[this.selectionType][0])),this.markerForLegend=$}return this.markerForLegend}}eraseMarkers(){var $=this;if(this.options.markersIndependant){for(var ee in this.independantMarkers)$.groupMarkers.removeChild(this.independantMarkers[ee]);this.independantMarkers={}}else this.currentMarkersSelectionType&&(this.markersDom.forEach(function(te){te.dom&&te.dom.parentNode===$.groupMarkers&&($.groupMarkers.removeChild(te.dom),te.path='')}),this.currentMarkersSelectionType=!1)}isMonotoneous(){return this.waveform?this.waveform.isMonotoneous():!!this.xmonotoneous}findLocalMinMax($,ee,te){return!!this.waveform&&this.waveform.findLocalMinMax($,ee,te)}}Z.mix(J,K.default),X.default=J,T.exports=X['default']})},function(u,A,S){var C,P,E;(function(T,X){P=[u,A,S(4),S(3),S(5)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y,I,B){'use strict';function F(G){return G&&G.__esModule?G:{default:G}}Object.defineProperty(X,'__esModule',{value:!0});var W=F(Y),V=function(G){if(G&&G.__esModule)return G;var Z={};if(null!=G)for(var K in G)Object.prototype.hasOwnProperty.call(G,K)&&(Z[K]=G[K]);return Z.default=G,Z}(I),R=F(B);class U extends W.default{static default(){return{redrawShapesAfterDraw:!1}}constructor(G,Z,K){super(...arguments),this.graph=G,this.name=Z,this.options=Object.assign({},U.default(),this.constructor.default(),K)}draw(){}beforeDraw(){}afterDraw(){this.options.redrawShapesAfterDraw&&this.graph.getShapesOfSerie(this).forEach(G=>{G.redraw()}),this.emit('draw')}setData(G,Z,K){function Q(Me){var Se=Object.prototype.toString.call(Me);return'[object Array]'===Se||'[object Int16Array]'===Se||'[object Int32Array]'===Se||'[object Float32Array]'===Se||'[object Float64Array]'===Se||'[object Uint8Array]'===Se||'[object Uint16Array]'===Se||'[object Uint32Array]'===Se||'[object Int8Array]'===Se}if(G instanceof R.default)return this.setWaveform(G);var J=0,Z=Z||!1,K=K||'float',re=0,$,ee,te,ie;this.minX=Number.MAX_SAFE_INTEGER,this.maxX=Number.MIN_SAFE_INTEGER,this.minY=Number.MAX_SAFE_INTEGER,this.maxY=Number.MIN_SAFE_INTEGER;let ae=[];var se=Q(G);if(!se&&'object'==typeof G)G=[G];else if(se&&!Q(G[0])&&'object'!=typeof G[0])G=[G],Z=!0;else if(se&&Q(G[0])&&2<G[0].length)Z=!0;else if(!se)return void V.throwError('Data is not an array');var ne=Q(G[0]),oe=Q(G[0][0]);if(!ne||Z||oe||(G=[G]),ne)for(var le=0,pe=G.length;le<pe;le++){te=this._addData(K,Z?G.length:2*G.length),ae.push(te),J=0;for(var de=0,ge=G[le].length;de<ge;de++)Z?(te[J]=[G[le][de],G[le][de+1]],J++,re+=de%2?1:0):(te[J]=[G[le][de][0],G[le][de][1]],re++,J++)}else if('object'==typeof G[0])if(G[0].x)for(var le=0,ge=G.length,te;le<ge;le++){te=this._addData(K,2*G[le].x.length),ae.push(te),J=0;for(var de=0,ue=G[0].x.length;de<ue;de++)te[J]=[G[le].x[de],G[le].y[de]],re++,J++}else{this.mode='x_equally_separated';var he=0,ce=[],pe=0,xe;if(!G[0].y)return console.log(G),void V.throwError('No y data');for(var le=0,ge=G.length;le<ge;le++)he+=G[le].y.length,ie=0!=le&&(!G[le+1]||G[le].x+G[le].dx*G[le].y.length==G[le+1].x),ie||(ae.push(this._addData(K,he)),ce.push(he),he=0);this.xData=[],he=0,pe=0,J=0;for(var le=0,ge=G.length;le<ge;le++){$=G[le].x,ee=G[le].dx;for(var de=0;de<xe;de++)ae[pe][J]=[$+de*ee,G[le].y[de]],J++,re++;he+=G[le].y.length,ce[pe]==he&&(pe++,he=0,J=0)}}var me=(this.maxX-this.minX)/this.graph.getDrawingWidth(),ye=4*this.graph.getDrawingWidth(),be=re/4,ye=this.graph.getDrawingWidth(),be=re;ae=ae.reduce(function(Me,Se,ke){return 0<ke&&Me.push([NaN,NaN]),Me.concat(Se)},[]);var Ae=new R.default;return Ae.setData(ae),this.setWaveform(Ae),this}_addData(){return[]}clearData(){return this.setData([]),this}getData(){return this.data}setOptions(G){this.options=G||{}}setOption(G,Z){this.options[G]=Z}kill(G){return this.graph.removeSerieFromDom(this),this.graph._removeSerie(this),this.graph.legend&&!G&&this.graph.legend.update(),this.graph=void 0,this}hide(G){if(this.hidden=!0,this.groupMain.setAttribute('display','none'),this.getSymbolForLegend().setAttribute('opacity',0.5),this.getTextForLegend().setAttribute('opacity',0.5),this.hideImpl(),G)for(var Z=this.graph.getShapesOfSerie(this),K=0,Q=Z.length;K<Q;K++)Z[K].hide();return this.emit('hide'),this}show(G){if(this.hidden=!1,this.groupMain.setAttribute('display','block'),this.getSymbolForLegend().setAttribute('opacity',1),this.getTextForLegend().setAttribute('opacity',1),this.showImpl(),this.draw(!0),G)for(var Z=this.graph.getShapesOfSerie(this),K=0,Q=Z.length;K<Q;K++)Z[K].show();return this.emit('show'),this}hideImpl(){}showImpl(){}toggleDisplay(){return this.isShown()?this.hide():this.show(),this}isShown(){return!this.hidden}getX(G){return(G=this.getXAxis().getPx(G))-G%0.2}getY(G){return(G=this.getYAxis().getPx(G))-G%0.2}isSelected(){return this.selected||'unselected'!==this.selectionType}_checkX(G){this.minX=Math.min(this.minX,G),this.maxX=Math.max(this.maxX,G)}_checkY(G){this.minY=Math.min(this.minY,G),this.maxY=Math.max(this.maxY,G)}getName(){return this.name}autoAxis(){return this.isFlipped()?(this.setXAxis(this.graph.getYAxis()),this.setYAxis(this.graph.getXAxis())):(this.setXAxis(this.graph.getXAxis()),this.setYAxis(this.graph.getYAxis())),this.graph.updateDataMinMaxAxes(),this}autoAxes(){return this.autoAxis(...arguments)}setXAxis(G){return this.xaxis='number'==typeof G?this.isFlipped()?this.graph.getYAxis(G):this.graph.getXAxis(G):G,this.graph.updateDataMinMaxAxes(),this}setYAxis(G){return'number'==typeof G?this.xaxis=this.isFlipped()?this.graph.getXAxis(G):this.graph.getYAxis(G):this.yaxis=G,this.graph.updateDataMinMaxAxes(),this}setAxes(){for(var G=0;2>G;G++)arguments[G]&&this[arguments[G].isX()?'setXAxis':'setYAxis'](arguments[G]);return this}getXAxis(){return this.xaxis}getYAxis(){return this.yaxis}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getWaveform(){return this.waveform}getWaveforms(){return[this.waveform]}setWaveform(G){if(!(G instanceof R.default))throw'Cannot assign waveform to serie. Waveform is not of the proper Waveform instance';return this.waveform=G,this.minX=this.waveform.getXMin(),this.maxX=this.waveform.getXMax(),this.minY=this.waveform.getMin(),this.maxY=this.waveform.getMax(),this.graph.updateDataMinMaxAxes(),this.dataHasChanged(),this}getSymbolForLegend(){if(!this.lineForLegend){var G=document.createElementNS(this.graph.ns,'line');this.applyLineStyle(G),G.setAttribute('x1',5),G.setAttribute('x2',25),G.setAttribute('y1',0),G.setAttribute('y2',0),G.setAttribute('cursor','pointer'),this.lineForLegend=G}return this.lineForLegend}setLegendSymbolStyle(){this.applyLineStyle(this.getSymbolForLegend())}updateStyle(){this.setLegendSymbolStyle(),this.graph.updateLegend()}getTextForLegend(){if(!this.textForLegend){var G=document.createElementNS(this.graph.ns,'text');G.setAttribute('cursor','pointer'),G.textContent=this.getLabel(),this.textForLegend=G}return this.textForLegend}getIndex(){return this.graph.series.indexOf(this)}getLabel(){return this.options.label||this.name}setLabel(G){return this.options.label=G,this.textForLegend&&(this.textForLegend.textContent=G),this.graph.requireLegendUpdate(),this}setFlip(G){return this.options.flip=G,this}getFlip(){return this.options.flip}isFlipped(){return this.options.flip}setLayer(G){let Z=parseInt(G)||1;return Z!==this.options.layer&&(this.options.layer=Z,this.graph.appendSerieToDom(this)),this}getLayer(){return this.options.layer||1}setStyle(G,Z='unselected'){this.styles[Z]=G,this.styleHasChanged(Z)}styleHasChanged(G='unselected'){if(this._changedStyles=this._changedStyles||{},!1===G)for(var Z in this._changedStyles)this._changedStyles[Z]=!1;else this._changedStyles[G||'unselected']=!0;return this.graph.requireLegendUpdate(),this}hasStyleChanged(G){return this._changedStyles=this._changedStyles||{},this._changedStyles[G||'unselected']}dataHasChanged(G){return this._dataHasChanged=void 0===G||G,this}hasDataChanged(){return this._dataHasChanged}setInfo(G,Z){return this.infos=this.infos||{},this.infos[G]=Z,this}getInfo(G){return(this.infos||{})[G]}setAdditionalData(G){return this.additionalData=G,this}getAdditionalData(){return this.additionalData}select(){return this.selected=!0,this}unselect(){return this.selected=!1,this}enableTracking(G,Z){return this._tracker=!0,this._trackingCallback=G,this._trackingOutCallback=Z,this}disableTracking(){return this._trackerDom&&(this._trackerDom.remove(),this._trackerDom=null),this._tracker=!1,this._trackingCallback=null,this}allowTrackingLine(G){G=G||{},this.graph.addSerieToTrackingLine(this,G)}getMarkerForLegend(){return!1}get type(){return this._type}getType(){return this._type}set excludedFromLegend(G=!0){this._excludedFromLegend=G}get excludedFromLegend(){return!!this._excludedFromLegend}setDataIndices(G,Z){this.categoryIndices=G,this.nbCategories=Z}hasErrors(){return!!this.waveform&&this.waveform.hasErrorBars()}}X.default=U,T.exports=X['default']})},function(u,A,S){var C,P,E;(function(T,X){P=[u,A,S(3)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y){'use strict';Object.defineProperty(X,'__esModule',{value:!0});var B=function(F){if(F&&F.__esModule)return F;var W={};if(null!=F)for(var V in F)Object.prototype.hasOwnProperty.call(F,V)&&(W[V]=F[V]);return W.default=F,W}(Y),O={makeBarY:function(F,W,V){if(F&&void 0!==V){var R=B.isNumeric(V.width)?V.width:10;return' V '+F+' m -'+R/2+' 0 h '+R+' m -'+R/2+' 0 V '+W+' '}},makeBoxY:function(F,W,V){return F&&void 0!==V?' m 5 0 V '+F+' h -10 V '+W+' m 5 0 ':void 0},makeBarX:function(F,W,V){if(F&&void 0!==V){var R=B.isNumeric(V.width)?V.width:10;return' H '+F+' m 0 -'+R/2+' v '+R+' m 0 -'+R/2+' H '+W+' '}},makeBoxX:function(F,W,V){return F&&void 0!==V?' v 5 H '+F+' v -10 H '+W+' v 5 ':void 0},setErrorBarStyle:function(F){return this.errorbarStyle=this._setErrorStyle(F),this},setErrorBoxStyle:function(F){return this.errorboxStyle=this._setErrorStyle(F),this},_setErrorStyle(F={}){var W=[],V=[['y','top','bottom'],['x','left','right']],R=K=>{K.dom=document.createElementNS(this.graph.ns,'path'),K.dom.setAttribute('fill',K.fillColor||'none'),K.dom.setAttribute('stroke',K.strokeColor||'black'),K.dom.setAttribute('stroke-opacity',K.strokeOpacity||1),K.dom.setAttribute('fill-opacity',K.fillOpacity||1),K.dom.setAttribute('stroke-width',K.strokeWidth||1),this.groupMain.appendChild(K.dom)},W={};'string'==typeof F&&(F={});for(var U=0,G=V.length;U<G;U++){F.all&&(F[V[U][1]]=B.extend(!0,{},F.all),F[V[U][2]]=B.extend(!0,{},F.all)),F[V[U][0]]&&(F[V[U][1]]=B.extend(!0,{},F[V[U][0]]),F[V[U][2]]=B.extend(!0,{},F[V[U][0]]));for(var Z=1;2>=Z;Z++)F[V[U][Z]]&&(W[V[U][Z]]=F[V[U][Z]],R(W[V[U][Z]]))}return W},errorDrawInit:function(){this.errorboxStyle&&(this.errorboxStyle.paths={top:'',bottom:'',left:'',right:''}),this.errorbarStyle&&(this.errorbarStyle.paths={top:'',bottom:'',left:'',right:''})},errorAddPoint:function(F,W,V,R,U){let G;(G=this.waveform.getErrorBarXBelow(F))&&(this.errorbarStyle.paths.left+=' M '+R+' '+U,this.errorbarStyle.paths.left+=this.makeBarX(this.getX(W-G),R,this.errorbarStyle.left)),(G=this.waveform.getErrorBarXAbove(F))&&(this.errorbarStyle.paths.right+=' M '+R+' '+U,this.errorbarStyle.paths.right+=this.makeBarX(this.getX(W+G),R,this.errorbarStyle.right)),(G=this.waveform.getErrorBarYBelow(F))&&(this.errorbarStyle.paths.bottom+=' M '+R+' '+U,this.errorbarStyle.paths.bottom+=this.makeBarY(this.getY(V-G),U,this.errorbarStyle.bottom)),(G=this.waveform.getErrorBarYAbove(F))&&(this.errorbarStyle.paths.top+=' M '+R+' '+U,this.errorbarStyle.paths.top+=this.makeBarY(this.getY(V+G),U,this.errorbarStyle.top)),(G=this.waveform.getErrorBoxXBelow(F))&&(this.errorboxStyle.paths.left+=' M '+R+' '+U,this.errorboxStyle.paths.left+=this.makeBoxX(this.getX(W-G),R,this.errorboxStyle.left)),(G=this.waveform.getErrorBoxXAbove(F))&&(this.errorboxStyle.paths.right+=' M '+R+' '+U,this.errorboxStyle.paths.right+=this.makeBoxX(this.getX(W+G),R,this.errorboxStyle.right)),(G=this.waveform.getErrorBoxYBelow(F))&&(this.errorboxStyle.paths.bottom+=' M '+R+' '+U,this.errorboxStyle.paths.bottom+=this.makeBoxY(this.getY(V-G),U,this.errorboxStyle.bottom)),(G=this.waveform.getErrorBoxYAbove(F))&&(this.errorboxStyle.paths.top+=' M '+R+' '+U,this.errorboxStyle.paths.top+=this.makeBoxY(this.getY(V+G),U,this.errorboxStyle.top))},errorAddPointBarChart:function(F,W,V,R){var U;this.error&&(U=this.error[F])&&this.doErrorDraw('y',U,W,R,V,R)},errorDraw:function(){if(this.errorbarStyle)for(var F in this.errorbarStyle.paths)this.errorbarStyle[F]&&this.errorbarStyle[F].dom&&this.errorbarStyle[F].dom.setAttribute('d',this.errorbarStyle.paths[F]);if(this.errorboxStyle)for(var F in this.errorboxStyle.paths)this.errorboxStyle[F]&&this.errorboxStyle[F].dom&&this.errorboxStyle[F].dom.setAttribute('d',this.errorboxStyle.paths[F])}};X.default=O,T.exports=X['default']})},function(u,A,S){var C,P,E;(function(T,X){P=[u,A,S(1),S(14),S(5),S(18),S(3)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y,I,B,O,F){'use strict';function V(J){return J&&J.__esModule?J:{default:J}}Object.defineProperty(X,'__esModule',{value:!0});var R=V(Y),U=V(I),G=V(B),Z=V(O),K=function(J){if(J&&J.__esModule)return J;var $={};if(null!=J)for(var ee in J)Object.prototype.hasOwnProperty.call(J,ee)&&($[ee]=J[ee]);return $.default=J,$}(F);class Q extends U.default{static defaults(){return{zpos:0}}constructor(){super(...arguments)}setZPos(J){return this.options.zpos=J,this}setz(){return this.setZPos(...arguments)}}K.mix(Q,Z.default),X.default=Q,T.exports=X['default']})},function(u,A){var C,P,E;(function(T,X){P=[u,A],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X){'use strict';function Y(B,O,F){let W,V,R,U,G,Z=B.getWaveforms();for(let K of Z)for(W=0,V=K.getLength(),R=K.getData();W<V;W+=1)U=O?B.getXAxis().getVal(B.getX(K.getX(W,!0))):B.getYAxis().getVal(B.getY(R[W])),G=0==W?U:F?Math.min(G,U):Math.max(G,U);return G}Object.defineProperty(X,'__esModule',{value:!0});X.default={getX:function(B){return(B=this.getXAxis().getPx(B))-B%0.2+this.getXAxis().getZProj(this.options.zpos)},getY:function(B){return(B=this.getYAxis().getPx(B))-B%0.2+this.getYAxis().getZProj(this.options.zpos)},getZPos:function(){return this.options.zpos},getMinX:function(B){return B?Y(this,!0,!0):this.minX},getMaxX:function(B){return B?Y(this,!0,!1):this.maxX},getMinY:function(B){return B?Y(this,!1,!0):this.minY},getMaxY:function(B){return B?Y(this,!1,!1):this.maxY}},T.exports=X['default']})},function(u,A,S){var C,P,E;(function(T,X){P=[u,A,S(3),S(14),S(16)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y,I,B){'use strict';function O(G){return G&&G.__esModule?G:{default:G}}Object.defineProperty(X,'__esModule',{value:!0});var W=function(G){if(G&&G.__esModule)return G;var Z={};if(null!=G)for(var K in G)Object.prototype.hasOwnProperty.call(G,K)&&(Z[K]=G[K]);return Z.default=G,Z}(Y),V=O(I),R=O(B);class U extends V.default{constructor(){super(...arguments),this.groupMain=document.createElementNS(this.graph.ns,'g'),this.pathDom=document.createElementNS(this.graph.ns,'path'),this.groupMain.appendChild(this.pathDom),this.styles={},this.styles.unselected={lineColor:this.options.lineColor,lineStyle:this.options.lineStyle,lineWidth:this.options.lineWidth,fillColor:this.options.fillColor,fillOpacity:this.options.fillOpacity,markers:this.options.markers}}setData(G){for(var Z in this.data=G,this.minY=Number.MAX_SAFE_INTEGER,this.maxY=Number.MIN_SAFE_INTEGER,this.data)this._checkY(this.data[Z]);return this}setFillColor(G,Z,K){return Z=Z||'unselected',this.styles[Z]=this.styles[Z]||{},this.styles[Z].fillColor=G,K&&this.setFillColor(G,'selected'),this.styleHasChanged(Z),this}getFillColor(G){return this.getStyle(G).fillColor}setFillOpacity(G,Z,K){return Z=Z||'unselected',this.styles[Z]=this.styles[Z]||{},this.styles[Z].fillOpacity=G,K&&this.setLineWidth(G,'selected'),this.styleHasChanged(Z),this}getFillOpacity(G){return this.getStyle(G).fillOpacity||1}applyLineStyles(){this.applyLineStyle(this.pathDom)}applyLineStyle(G){G.setAttribute('stroke',this.getLineColor()),G.setAttribute('stroke-width',this.getLineWidth()),this.getLineDashArray()?G.setAttribute('stroke-dasharray',this.getLineDashArray()):G.removeAttribute('stroke-dasharray'),G.setAttribute('fill',this.getFillColor()),G.setAttribute('fill-opacity',this.getFillOpacity()||1)}draw(){var G='';for(var Q in this.error&&this.errorDrawInit(),this.data)this.categoryIndices[Q]&&(G+='M '+this.getXAxis().getPos(this.categoryIndices[Q])+' '+this.getYAxis().getPos(0)+' V '+this.getYAxis().getPos(this.data[Q])+' h '+this.getXAxis().getDeltaPx(1/this.nbCategories)+' V '+this.getYAxis().getPos(0),this.error&&this.errorAddPointBarChart(Q,this.data[Q],this.getXAxis().getPos(this.categoryIndices[Q]+0.5/this.nbCategories),this.getYAxis().getPos(this.data[Q])));this.error&&this.errorDraw(),this.pathDom.setAttribute('d',G),this.applyLineStyles()}setMarkers(){}getUsedCategories(){return Object.keys(this.data)}}X.default=U,T.exports=X['default']})},function(u,A,S){var C,P,E;(function(T,X){P=[u,A,S(15),S(3)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y,I){'use strict';Object.defineProperty(X,'__esModule',{value:!0});var O=function(W){return W&&W.__esModule?W:{default:W}}(Y);class F extends O.default{static default(){return{orientation:'y',maxBoxWidth:20,defaultStyle:{meanLineColor:'rgb( 100, 0, 0 )',meanLineWidth:2,boxAboveLineWidth:1,boxAboveLineColor:'rgb( 0, 0, 0 )',boxAboveFillColor:'transparent',boxAboveFillOpacity:1,boxBelowLineWidth:1,boxBelowLineColor:'rgb( 0, 0, 0 )',boxBelowFillColor:'transparent',boxBelowFillOpacity:1,barAboveLineColor:'rgba( 0, 0, 0, 1 )',barAboveLineWidth:1,barBelowLineColor:'rgba( 0, 0, 0, 1 )',barBelowLineWidth:1,outlierLineWidth:1,outlierLineColor:'rgb( 255, 255, 255 )',outlierFillColor:'rgb( 0, 0, 0 )',outlierFillOpacity:1}}}constructor(){super(...arguments),this.groupMain=document.createElementNS(this.graph.ns,'g'),this.pathDom=document.createElementNS(this.graph.ns,'path'),this.groupMain.appendChild(this.pathDom),this.styles={},this.styles.unselected=this.options.defaultStyle}setData(W,V){if(this.data=W,!!Array.isArray(W)){let R,U,G,Z,K;for(var Q in'y'==this.options.orientation?(R=this.getXAxis(),U=this.getYAxis(),G=this._checkX.bind(this),Z=this._checkY.bind(this),K=!0,this.minY=W[0].Q2,this.maxY=W[0].Q2,this.maxX=W[0].x,this.minX=W[0].x):(R=this.getYAxis(),U=this.getXAxis(),G=this._checkY.bind(this),Z=this._checkX.bind(this),K=!1,this.minX=W[0].Q2,this.maxX=W[0].Q2,this.maxY=W[0].y,this.minY=W[0].y),V&&(G=function(){},Z=function(){}),R&&U||(0,I.throwError)('Error in setting data of the box serie. The X and Y axes must be set beforehand'),this.data)K?(G(this.data[Q].x),this.data[Q].pos=this.data[Q].x):(G(this.data[Q].y),this.data[Q].pos=this.data[Q].y),this.data[Q].Q3&&Z(this.data[Q].Q3),this.data[Q].Q1&&Z(this.data[Q].Q1),this.data[Q].whiskers?Array.isArray(this.data[Q].whiskers)?(0<this.data[Q].whiskers.length&&Z(this.data[Q].whiskers[0]),1<this.data[Q].whiskers.length&&Z(this.data[Q].whiskers[1])):(Z(this.data[Q].whiskers),this.data[Q].whiskers=[this.data[Q].whiskers]):this.data[Q].whiskers=[],Array.isArray(this.data[Q].outliers)?this.data[Q].outliers.map(J=>Z(J)):this.data[Q].outliers=[];return this.dataHasChanged(),this.graph.updateDataMinMaxAxes(),this}}_style(W,V,R='unselected',U=!1){return this.styles[R]=this.styles[R]||{},this.styles[R][W]=V,U&&this._set(W,V,'selected'),this.styleHasChanged(R),this}_gstyle(W,V){return this.getStyle(V)[W]}getStyle(W='unselected'){return this.styles[W]||{}}setMeanLineColor(){return this._style('meanLineColor',...arguments)}getMeanLineColor(){return this._gstyle('meanLineColor',...arguments)}setStyle(W,V='unselected'){this.styles[V]=(0,I.extend)({},defaults.defaultStyle,this.styles.unselected,W),this.styleHasChanged(V)}setMeanLineWidth(){return this._style('meanLineWidth',...arguments)}getMeanLineWidth(){return this._gstyle('meanLineWidth',...arguments)}setBoxAboveLineColor(){return this._style('boxAboveLineColor',...arguments)}getBoxAboveLineColor(){return this._gstyle('boxAboveLineColor',...arguments)}setBoxBelowLineColor(){return this._style('boxBelowLineColor',...arguments)}getBoxBelowLineColor(){return this._gstyle('boxBelowLineColor',...arguments)}setBoxAboveLineWidth(){return this._style('boxAboveLineWidth',...arguments)}getBoxAboveLineWidth(){return this._gstyle('boxAboveLineWidth',...arguments)}setBoxBelowLineWidth(){return this._style('boxBelowLineWidth',...arguments)}getBoxBelowLineWidth(){return this._gstyle('boxBelowLineWidth',...arguments)}setBoxAboveFillColor(){return this._style('boxAboveFillColor',...arguments)}getBoxAboveFillColor(){return this._gstyle('boxAboveFillColor',...arguments)}setBoxBelowFillColor(){return this._style('boxBelowFillColor',...arguments)}getBoxBelowFillColor(){return this._gstyle('boxBelowFillColor',...arguments)}setBoxAboveFillOpacity(){return this._style('boxAboveFillOpacity',...arguments)}getBoxAboveFillOpacity(){return this._gstyle('boxAboveFillOpacity',...arguments)}setBoxBelowFillOpacity(){return this._style('boxBelowFillOpacity',...arguments)}getBoxBelowFillOpacity(){return this._gstyle('boxBelowFillOpacity',...arguments)}setBarAboveLineColor(){return this._style('barAboveLineColor',...arguments)}getBarAboveLineColor(){return this._gstyle('barAboveLineColor',...arguments)}setBarBelowLineColor(){return this._style('barBelowLineColor',...arguments)}getBarBelowLineColor(){return this._gstyle('barBelowLineColor',...arguments)}setBarAboveLineWidth(){return this._style('barAboveLineWidth',...arguments)}getBarAboveLineWidth(){return this._gstyle('barAboveLineWidth',...arguments)}setBarBelowLineWidth(){return this._style('barBelowLineWidth',...arguments)}getBarBelowLineWidth(){return this._gstyle('barBelowLineWidth',...arguments)}setOutlierLineColor(){return this._style('outlierLineColor',...arguments)}getOutlierLineColor(){return this._gstyle('outlierLineColor',...arguments)}setOutlierLineWidth(){return this._style('outlierLineWidth',...arguments)}getOutlierLineWidth(){return this._gstyle('outlierLineWidth',...arguments)}setOutlierFillColor(){return this._style('outlierFillColor',...arguments)}getOutlierFillColor(){return this._gstyle('outlierFillColor',...arguments)}setOutlierFillOpacity(){return this._style('outlierFillOpacity',...arguments)}getOutlierFillOpacity(){return this._gstyle('outlierFillOpacity',...arguments)}applyLineStyles(){this.applyLineStyle(this.pathDom)}applyLineStyle(W){W.setAttribute('stroke',this.getLineColor()),W.setAttribute('stroke-width',this.getLineWidth()),W.removeAttribute('stroke-dasharray'),W.setAttribute('fill',this.getFillColor()),W.setAttribute('fill-opacity',this.getFillOpacity()||1)}draw(){if(this.data){let V='y'==this.options.orientation?this.getYAxis():this.getXAxis(),R='y'==this.options.orientation?this.getXAxis():this.getYAxis(),G=!1,W,U,Z,K,Q,J,$,ee;if((0,I.emptyDom)(this.groupMain),'category'==R.getType())U=R.getRelPx(0.8/this.nbCategories),G=!0;else{U=this.options.maxBoxWidth;for(var ae=0,se=this.data.length;ae<se-1;ae++)U=Math.min(U,Math.abs(R.getPx(this.data[ae+1].pos)-R.getPx(this.data[ae].pos)))}for(var ae=0,se=this.data.length;ae<se;ae++){if('category'==R.getType()){let ge='y'==this.options.orientation?this.data[ae].x:this.data[ae].y;if(!!this.categoryIndices.hasOwnProperty(ge))W=[R.getPos(this.categoryIndices[ge])+1.2*U/2];else if(Array.isArray(this._linkedToScatterSeries))for(let ue of this._linkedToScatterSeries)if(ue.categoryIndices.hasOwnProperty(ge)){W=[R.getPos(ue.categoryIndices[ge])+1.2*U/2],V='y'==this.options.orientation?ue.getYAxis():ue.getXAxis();break}}else W=[R.getPos('y'==this.options.orientation?this.data[ae].x:this.data[ae].y),U];Z=V.getPos(this.data[ae].Q2),K=V.getPos(this.data[ae].Q3),Q=V.getPos(this.data[ae].Q1),this.data[ae].whiskers.map(ge=>{ge<this.data[ae].Q1?$=V.getPos(ge):J=V.getPos(ge)}),ee=this.data[ae].outliers.map(ge=>V.getPos(ge));var ne=document.createElementNS(this.graph.ns,'line');this.applyMeanStyle(ne);var oe=document.createElementNS(this.graph.ns,'rect'),le=document.createElementNS(this.graph.ns,'rect');'y'==this.options.orientation?(oe.setAttribute('width',U),oe.setAttribute('x',W[0]-U/2),le.setAttribute('width',U),le.setAttribute('x',W[0]-U/2),ne.setAttribute('x1',W[0]-U/2),ne.setAttribute('x2',W[0]+U/2),ne.setAttribute('y1',Z),ne.setAttribute('y2',Z)):(oe.setAttribute('height',U),oe.setAttribute('y',W[0]-U/2),le.setAttribute('height',U),le.setAttribute('y',W[0]-U/2),ne.setAttribute('y1',W[0]-U/2),ne.setAttribute('y2',W[0]+U/2),ne.setAttribute('x1',Z),ne.setAttribute('x2',Z)),this.boxPos(oe,Z,K,'x'==this.options.orientation),this.boxPos(le,Z,Q,'x'==this.options.orientation),this.applyBoxStyle(oe,le);var pe=document.createElementNS(this.graph.ns,'line'),de=document.createElementNS(this.graph.ns,'line');'y'==this.options.orientation?(void 0!==J&&(pe.setAttribute('y1',K),pe.setAttribute('y2',J),pe.setAttribute('x1',W[0]),pe.setAttribute('x2',W[0])),void 0!==$&&(de.setAttribute('y1',Q),de.setAttribute('y2',$),de.setAttribute('x1',W[0]),de.setAttribute('x2',W[0]))):(void 0!==J&&(pe.setAttribute('x1',K),pe.setAttribute('x2',J),pe.setAttribute('y1',W[0]),pe.setAttribute('y2',W[0])),void 0!==$&&(de.setAttribute('x1',Q),de.setAttribute('x2',$),de.setAttribute('y1',W[0]),de.setAttribute('y2',W[0]))),ee.map(ge=>{let ue=document.createElementNS(this.graph.ns,'circle');ue.setAttribute('r',2),'y'==this.options.orientation?(ue.setAttribute('cx',W[0]),ue.setAttribute('cy',ge)):(ue.setAttribute('cy',W[0]),ue.setAttribute('cx',ge)),this.setOutlierStyle(ue),this.groupMain.appendChild(ue)}),void 0!==J&&this.groupMain.appendChild(pe),void 0!==$&&this.groupMain.appendChild(de),void 0!=K&&this.groupMain.appendChild(oe),void 0!=Q&&this.groupMain.appendChild(le),this.groupMain.appendChild(ne),this.applyWhiskerStyle(pe,de)}}}applyBoxStyle(W,V){W.setAttribute('stroke',this.getBoxAboveLineColor()),W.setAttribute('stroke-width',this.getBoxAboveLineWidth()),this.getBoxAboveFillColor()!==void 0&&W.setAttribute('fill',this.getBoxAboveFillColor()),this.getBoxAboveFillOpacity()!==void 0&&W.setAttribute('fill-opacity',this.getBoxAboveFillOpacity()),V.setAttribute('stroke',this.getBoxBelowLineColor()),V.setAttribute('stroke-width',this.getBoxBelowLineWidth()),this.getBoxBelowFillColor()!==void 0&&V.setAttribute('fill',this.getBoxBelowFillColor()),this.getBoxAboveFillOpacity()!==void 0&&V.setAttribute('fill-opacity',this.getBoxBelowFillOpacity())}applyWhiskerStyle(W,V){W.setAttribute('stroke',this.getBarAboveLineColor()),W.setAttribute('stroke-width',this.getBarAboveLineWidth()),V.setAttribute('stroke',this.getBarBelowLineColor()),V.setAttribute('stroke-width',this.getBarBelowLineWidth())}applyMeanStyle(W){W.setAttribute('stroke',this.getMeanLineColor()),W.setAttribute('stroke-width',this.getMeanLineWidth())}setOutlierStyle(W){W.setAttribute('stroke',this.getOutlierLineColor()),W.setAttribute('stroke-width',this.getOutlierLineWidth()),this.getBoxBelowFillColor()!==void 0&&W.setAttribute('fill',this.getOutlierFillColor()),this.getBoxAboveFillOpacity()!==void 0&&W.setAttribute('fill-opacity',this.getOutlierFillOpacity())}getCategoryIndex(W){if(!this.categories)throw new Error('No categories were defined. Probably axis.setSeries was not called');for(var V=0;V<this.categories.length;V++)if(this.categories[V].name==W)return V;return!1}setMarkers(){}boxPos(W,V,R,U){V>R?(W.setAttribute(U?'x':'y',R),W.setAttribute(U?'width':'height',V-R)):(W.setAttribute(U?'x':'y',V),W.setAttribute(U?'width':'height',R-V))}getUsedCategories(){let W='y'==this.options.orientation?'x':'y',V=this.data.map(R=>R[W]);return Array.isArray(this._linkedToScatterSeries)&&this._linkedToScatterSeries.map(R=>{R.getUsedCategories().map(U=>{let G;-1<(G=V.indexOf(U))&&V.splice(G,1)})}),V}linkToScatterSerie(...W){this._linkedToScatterSeries=W}}X.default=F,T.exports=X['default']})},function(u,A,S){var C,P,E;(function(T,X){P=[u,A,S(14),S(3),S(16)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y,I,B){'use strict';function F(G){return G&&G.__esModule?G:{default:G}}Object.defineProperty(X,'__esModule',{value:!0});var W=F(Y),V=function(G){if(G&&G.__esModule)return G;var Z={};if(null!=G)for(var K in G)Object.prototype.hasOwnProperty.call(G,K)&&(Z[K]=G[K]);return Z.default=G,Z}(I),R=F(B);class U extends W.default{constructor(){super(...arguments),this.lines=this.lines||{}}setColors(G){this.colors=G}_draw(){var G=this,Z=this._dataToUse,Q=0,ae=!1,se=!1,de=this.getXAxis(),ge=this.getYAxis(),ue=de.getCurrentMin(),he=ge.getCurrentMin(),ce=de.getCurrentMax(),xe=ge.getCurrentMax(),_e=0,ve=1,Ce=!1,Pe=!1,J,$,ee,te,re,$,ne,oe,le,pe;for(this.eraseLines(),this.isFlipped()&&(_e=1,ve=0),this.currentLine='',ee=this.waveform.getLength(),J=0;J<ee;J+=2){if(te=this.waveform.getX(J),re=this.waveform.getY(J),te<ue&&ae<ue||te>ce&&ae>ce||(re<he&&se<he||re>xe&&se>xe)&&!this.options.lineToZero){ae=te,se=re,Pe=!0;continue}if(this.counter2=J,this.markersShown()&&this.getMarkerCurrentFamily(this.counter2),le=this.getX(te),pe=this.getY(re),le!=ne||pe!=oe){if(Ce=te<ue||re<he||te>ce||re>xe,isNaN(le)||isNaN(pe)){0<this.counter;continue}var Le=this.colors[J];this._addPoint(le,pe,te,re,ne,oe,ae,se,J,Le,!1,!0),ne=le,oe=pe,ae=te,se=re}}if(this.latchLines(),this._tracker){this._trackerDom&&this._trackerDom.remove();var Ee=this.groupLines.cloneNode(!0);this.groupMain.appendChild(Ee);for(var Q=0,Te=Ee.children.length;Q<Te;Q++)Ee.children[Q].setAttribute('stroke','transparent'),Ee.children[Q].setAttribute('stroke-width','25px'),Ee.children[Q].setAttribute('pointer-events','stroke');G._trackerDom=Ee,G.groupMain.addEventListener('mousemove',function(Xe){var Ye=G.graph._getXY(Xe),De=G.handleMouseMove(!1,!1);G._trackingCallback(G,De,Ye.x,Ye.y)}),G.groupMain.addEventListener('mouseleave',function(){G._trackingOutCallback(G)})}return this}_addPoint(G,Z,K,Q,J,$,ee,te,re,ie){if(void 0!==J&&void 0!==$&&!(isNaN(G)||isNaN(Z))){ie._rgb&&(ie='rgba('+ie._rgb[0]+','+ie._rgb[1]+','+ie._rgb[2]+','+(ie._rgb[3]||1)+')');var ne=this.lines[ie];ne||(ne=this.lines[ie]={object:document.createElementNS(this.graph.ns,'path'),path:'',color:ie},ne.object.setAttribute('stroke',ie),ne.color=ie,this.groupLines.appendChild(ne.object)),ne.path+='M '+J+' '+$+' L '+G+' '+Z,this.hasErrors()&&this.errorAddPoint(re,K,Q,G,Z)}}removeExtraLines(){}latchLines(){for(var G in this.lines)this.lines[G].object.setAttribute('d',this.lines[G].path)}eraseLines(){for(var G in this.lines)this.lines[G].path='',this.lines[G].object.setAttribute('d','')}applyLineStyle(G){G.setAttribute('stroke-width',this.getLineWidth()),this.getLineDashArray()?G.setAttribute('stroke-dasharray',this.getLineDashArray()):G.removeAttribute('stroke-dasharray'),G.setAttribute('fill','none')}}X.default=U,T.exports=X['default']})},function(u,A,S){var C,P,E;(function(T,X){P=[u,A,S(15),S(3),S(16)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y,I,B){'use strict';function F(K){return K&&K.__esModule?K:{default:K}}Object.defineProperty(X,'__esModule',{value:!0});var W=F(Y),V=function(K){if(K&&K.__esModule)return K;var Q={};if(null!=K)for(var J in K)Object.prototype.hasOwnProperty.call(K,J)&&(Q[J]=K[J]);return Q.default=K,Q}(I),R=F(B);class Z extends W.default{constructor(){super(...arguments),this.id=Math.random()+Date.now(),this.shapes=[],this.shown=!0,this.data=[],this.shapesDetails=[],this.shapes=[],this._type='scatter',V.mapEventEmission(this.options,this),this._isMinOrMax={x:{min:!1,max:!1},y:{min:!1,max:!1}},this.groupPoints=document.createElementNS(this.graph.ns,'g'),this.groupMain=document.createElementNS(this.graph.ns,'g'),this.additionalData={},this.selectedStyleGeneral={},this.selectedStyleModifiers={},this.groupPoints.addEventListener('mouseover',$=>{var ee=parseInt($.target.parentElement.getAttribute('data-shapeid'));this.emit('mouseover',ee,this.waveform.getX(ee),this.waveform.getY(ee))}),this.groupPoints.addEventListener('mouseout',$=>{var ee=parseInt($.target.parentElement.getAttribute('data-shapeid'));this.emit('mouseout',ee,this.waveform.getX(ee),this.waveform.getY(ee))}),this.minX=Number.MAX_VALUE,this.minY=Number.MAX_VALUE,this.maxX=Number.MIN_VALUE,this.maxY=Number.MIN_VALUE,this.groupMain.appendChild(this.groupPoints),this.currentAction=!1,this.initExtended1&&this.initExtended1(),this.styles={},this.styles.unselected={},this.styles.selected={},this.styles.unselected.default={shape:'circle',cx:0,cy:0,r:3,stroke:'transparent',fill:'black'},this.styles.selected.default={shape:'circle',cx:0,cy:0,r:4,stroke:'transparent',fill:'black'}}setDataCategory(K){let Q=+(1/0),J=-(1/0);for(let $ of K)K.y.getMaxY()>J?J=K.y.getMaxY():K.y.getMinY()<Q&&(Q=K.y.getMinY());return this.data=K,this.dataHasChanged(),this.graph.updateDataMinMaxAxes(),this}empty(){for(;this.groupPoints.firstChild;)this.groupPoints.removeChild(this.groupPoints.firstChild)}getSymbolForLegend(){if(this.symbol)return this.symbol;var K=document.createElementNS(this.graph.ns,'g');K.setAttribute('data-shapeid',-1);var Q=this.doShape(K,this.styles.unselected.default),J=this.getStyle('unselected',-1,!0);for(var $ in J[-1])'shape'!=$&&Q.setAttribute($,J[-1][$]);return K}setStyle(K,Q,J='unselected'){return'string'==typeof Q&&(J=Q,Q=!1),this.styles[J]=this.styles[J]||{},this.styles[J].all=K,this.styles[J].modifiers=Q,this.styleHasChanged(J),this}draw(K){if(K||this.hasDataChanged()||this.hasStyleChanged('unselected')){var te=0,ne='category'==this.getXAxis().getType(),$,ee,re;this._drawn=!0,this.dataHasChanged(!1),this.styleHasChanged(!1),this.groupMain.removeChild(this.groupPoints);var oe=[];if(te=0,re=0,this.hasErrors()&&this.errorDrawInit(),ne){for(let de=0;te<this.data.length;te++)if(this.categoryIndices.hasOwnProperty(this.data[te].x)){this.error;for(var le=0,pe=this.data[i].y.getLength();le<pe;le++)ee=this.getY(this.data[i].y.getY(le)),$=this.getX(le/(pe-1)*(0.8/this.nbCategories)+this.categoryIndices[this.data[te].x]+0.1/this.nbCategories),le++,this.shapesDetails[de]=this.shapesDetails[de]||[],this.shapesDetails[de][0]=$,this.shapesDetails[de][1]=ee,oe.push(de),de++}}else for(;te<this.waveform.getLength();te++){if(this.waveform.getX(te)<this.getXAxis().getCurrentMin()||this.waveform.getX(te)>this.getXAxis().getCurrentMax()||this.waveform.getY(te)<this.getYAxis().getCurrentMin()||this.waveform.getY(te)>this.getYAxis().getCurrentMax()){this.shapes[te]&&this.shapes[te].setAttribute('display','none');continue}this.shapes[te]&&this.shapes[te].setAttribute('display','initial'),$=this.getX(this.waveform.getX(te)),ee=this.getY(this.waveform.getY(te)),this.hasErrors()&&this.errorAddPoint(te,this.waveform.getX(te),this.waveform.getY(te),$,ee),this.shapesDetails[te]=this.shapesDetails[te]||[],this.shapesDetails[te][0]=$,this.shapesDetails[te][1]=ee,oe.push(te)}this.hasErrors()&&this.errorDraw(),this.applyStyle('unselected',oe),this.groupMain.appendChild(this.groupPoints)}}_addPoint(K,Q,J){var $=document.createElementNS(this.graph.ns,'g');$.setAttribute('transform','translate('+K+', '+Q+')'),$.setAttribute('data-shapeid',J),shape=this.extraStyle&&this.extraStyle[J]?this.doShape($,this.extraStyle[J]):this.stdStylePerso?this.doShape($,this.stdStylePerso):this.doShape($,this.stdStyle),this.shapes[J]=shape,this.groupPoints.appendChild($)}doShape(K,Q){var J=document.createElementNS(this.graph.ns,Q.shape);return K.appendChild(J),J}getStyle(K,Q,J){var K=K||'unselected',$,ee={};'number'==typeof Q?$=[Q]:Array.isArray(Q)&&($=Q);var te,Q,re,ie,se;this.styles[K].all!==void 0&&(se=this.styles[K].all,'function'==typeof se?se=se():!1===se&&(se={}));for(var ne=0,oe=$.length;ne<oe;ne++){if(Q=$[ne],te=this.shapes[Q],(re=this.styles[K].modifiers)&&('function'==typeof re||re[Q])?('function'==typeof re?ie=re(Q,te):re[Q]&&(ie=re[Q]),Object.assign(ie,se,ie)):void 0==se?ie=this.styles[K].default:ie=se,!te){var le=document.createElementNS(this.graph.ns,'g');le.setAttribute('data-shapeid',Q),this.shapes[Q]=this.doShape(le,ie),this.groupPoints.appendChild(le),te=this.shapes[Q]}J||te.parentNode.setAttribute('transform','translate('+this.shapesDetails[Q][0]+', '+this.shapesDetails[Q][1]+')'),ee[Q]=ie}return ee}applyStyle(K,Q,J){var $,ee,te=this.getStyle(K,Q,J);for($ in te)for(ee in te[$])'shape'!==ee&&(te[$][ee]?this.shapes[$].setAttribute(ee,te[$][ee]):this.shapes[$].removeAttribute(ee))}unselectPoint(K){this.selectPoint(K,!1)}selectPoint(K,Q,J){if(!(this.shapesDetails[K][2]&&this.shapesDetails[K][2]==J)){if('string'==typeof Q&&(J=Q,Q=void 0),Array.isArray(K))return this.selectPoints(K);if(this.shapes[K]&&this.shapesDetails[K])if((this.shapesDetails[K][2]||!1===Q)&&!0!==Q){var $=this.shapesDetails[K][2];this.shapesDetails[K][2]=!1;var ee=this.getStyle($,K,!0);for(var te in ee[K])this.shapes[K].removeAttribute(te);this.applyStyle('unselected',K,!0)}else J=J||'selected',this.shapesDetails[K][2]=J,this.applyStyle(J,K,!0)}}getUsedCategories(){return'object'==typeof this.data[0]?this.data.map(K=>K.x):[]}}V.mix(Z,R.default),X.default=Z,T.exports=X['default']})},function(u,A,S){var C,P,E;(function(T,X){P=[u,A,S(15),S(5),S(3)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y,I,B){'use strict';function O(R){return R&&R.__esModule?R:{default:R}}Object.defineProperty(X,'__esModule',{value:!0});var F=O(Y),W=O(I);class V extends F.default{static default(){return{fillColor:'rgba( 0, 0, 0, 0.1 )',lineColor:'rgba( 0, 0, 0, 1 )',lineWidth:'1px'}}constructor(){super(...arguments),this.selectionType='unselected',this.id=(0,B.guid)(),this.groupZones=document.createElementNS(this.graph.ns,'g'),this.groupMain=document.createElementNS(this.graph.ns,'g'),this.lineZone=document.createElementNS(this.graph.ns,'path'),this.lineZone.setAttribute('stroke','black'),this.lineZone.setAttribute('stroke-width','1px'),this.groupMain.appendChild(this.groupZones),this.groupZones.appendChild(this.lineZone),this.applyLineStyle(this.lineZone),this.styleHasChanged(),this.clip=document.createElementNS(this.graph.ns,'clipPath'),this.clipId=(0,B.guid)(),this.clip.setAttribute('id',this.clipId),this.graph.defs.appendChild(this.clip)}setWaveform(...R){return this.waveforms=R,this.waveforms=this.waveforms.map(U=>{return U instanceof W.default?U:new W.default(U)}),this.minX=this.waveforms[0].getXMin(),this.maxX=this.waveforms[0].getXMax(),this.minY=this.waveforms[0].getMin(),this.maxY=this.waveforms[0].getMax(),this.waveforms.map(U=>{this.minX=Math.min(U.getXMin(),this.minX),this.maxX=Math.max(U.getXMin(),this.maxX),this.minY=Math.min(U.getMin(),this.minY),this.maxY=Math.max(U.getMax(),this.maxY)}),this.graph.updateDataMinMaxAxes(),this.dataHasChanged(),this}setWaveforms(){return this.setWaveform(...arguments)}getWaveforms(){return this.waveforms}setMinMaxWaveforms(R,U){return this.waveforms=[R,U.reverse()],this}empty(){for(;this.group.firstChild;)this.group.removeChild(this.group.firstChild)}draw(R){if(R||this.hasDataChanged()){if(!this.waveforms)return;let U=0,G=0,Z=0,K=0,Q=0,J='',$;const ee=this.getXAxis().getMinPx(),te=this.getXAxis().getMaxPx(),re=this.getYAxis().getMinPx(),ie=this.getYAxis().getMaxPx(),ae=this.getXAxis().getCurrentMin(),se=this.getXAxis().getCurrentMax(),ne=this.getYAxis().getCurrentMin(),oe=this.getYAxis().getCurrentMax();this.groupMain.removeChild(this.groupZones);for(let le of this.waveforms)for(G=le.getData(!0),Q=0;Q<G.length;Q+=1){if(U=le.getX(Q,!0),K=this.getY(G[Q]),Z=this.getX(U),U<ae||U>se){$=[U,G[Q],Z,K];continue}G[Q]<ne?K=this.getY(ne):G[Q]>oe&&(K=this.getY(oe)),0<J.length&&(J+=' L '),$?(J+=$[2]+','+$[3]+' ',$=!1):J+=Z+','+K+' '}this.lineZone.setAttribute('d','M '+J+' z'),this.groupMain.appendChild(this.groupZones)}this.hasStyleChanged(this.selectionType)&&(this.applyLineStyle(this.lineZone),this.styleHasChanged(!1))}applyLineStyle(R){R.setAttribute('stroke',this.getLineColor()),R.setAttribute('stroke-width',this.getLineWidth()),R.setAttribute('fill',this.getFillColor()),R.setAttribute('fill-opacity',this.getFillOpacity()),R.setAttribute('stroke-opacity',this.getLineOpacity())}setLineWidth(R){return this.options.lineWidth=R,this.styleHasChanged(),this}getLineWidth(){return this.options.lineWidth}setLineOpacity(R){return this.options.lineOpacity=R,this.styleHasChanged(),this}getLineOpacity(){return this.options.lineOpacity}setLineColor(R){return this.options.lineColor=R,this.styleHasChanged(),this}getLineColor(){return this.options.lineColor}setFillOpacity(R){return this.options.fillOpacity=R,this.styleHasChanged(),this}getFillOpacity(){return this.options.fillOpacity}setFillColor(R){return this.options.fillColor=R,this.styleHasChanged(),this}getFillColor(){return this.options.fillColor}}X.default=V,T.exports=X['default']})},function(u,A,S){var C,P,E;(function(T,X){P=[u,A,S(1),S(23),S(5),S(18),S(3)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y,I,B,O,F){'use strict';function V(J){return J&&J.__esModule?J:{default:J}}Object.defineProperty(X,'__esModule',{value:!0});var R=V(Y),U=V(I),G=V(B),Z=V(O),K=function(J){if(J&&J.__esModule)return J;var $={};if(null!=J)for(var ee in J)Object.prototype.hasOwnProperty.call(J,ee)&&($[ee]=J[ee]);return $.default=J,$}(F);class Q extends U.default{static default(){return{zpos:0}}constructor(){super(...arguments)}setZPos(J){return this.options.zpos=J,this}setz(){return this.setZPos(...arguments)}}K.mix(Q,Z.default),X.default=Q,T.exports=X['default']})},function(u,A,S){var C,P,E;(function(T,X){P=[u,A,S(15),S(3)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y,I){'use strict';Object.defineProperty(X,'__esModule',{value:!0});var F=function(R){return R&&R.__esModule?R:{default:R}}(Y),W=function(R){if(R&&R.__esModule)return R;var U={};if(null!=R)for(var G in R)Object.prototype.hasOwnProperty.call(R,G)&&(U[G]=R[G]);return U.default=R,U}(I);class V extends F.default{constructor(){super(...arguments),W.mapEventEmission(this.options,this),this.groupMain=document.createElementNS(this.graph.ns,'g'),this.rects=[],this.paths=[],this.recalculateBinsOnDraw=!1}setData(R){this.minX=this.maxX=this.minY=this.maxY=0;var U=0,G=R.length;for(this.data=R,this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY,U=0;U<G;U++)this._checkX(R[U][0]),this._checkY(R[U][1]);return this.dataHasChanged(),this.graph.updateDataMinMaxAxes(),this}calculateDensity(R,U,G,Z,K,Q){var J=[],ee=this.data.length,ie=Number.POSITIVE_INFINITY,ae=Number.NEGATIVE_INFINITY,$,te,re;for($=0;$<ee;$++)(te=~~((this.data[$][0]-R)/U),re=~~((this.data[$][1]-Z)/K),!(te>G||re>Q||0>te||0>re))&&(J[te]=J[te]||[],J[te][re]=J[te][re]+1||1,ie=J[te][re]<ie?J[te][re]:ie,ae=J[te][re]>ae?J[te][re]:ae);return this.maxIndexX=G,this.maxIndexY=Q,this.binMin=ie,this.binMax=ae,this.deltaX=U,this.deltaY=K,this.fromX=R,this.fromY=Z,this.numX=G,this.numY=Q,this.densitymap=J,J}calculateDensityWeighted(R,U,G,Z,K,Q){var J=[],ee=this.data.length,ie=Number.POSITIVE_INFINITY,ae=Number.NEGATIVE_INFINITY,$,te,re,se,ne,oe,le,pe,de,ge,ue;for($=0;$<ee;$++)(oe=(this.data[$][0]-R)/U-0.5,le=(this.data[$][1]-Z)/K-0.5,te=Math.floor(oe),re=Math.floor(le),pe=te,ge=re,de=te+1,ue=re+1,se=1-(oe-te),ne=1-(le-re),!(te>G||re>Q||0>te||0>re))&&(J[pe]=J[pe]||[],J[de]=J[de]||[],J[pe][ge]=J[pe][ge]||0,J[de][ge]=J[de][ge]||0,J[pe][ue]=J[pe][ue]||0,J[de][ue]=J[de][ue]||0,J[pe][ge]+=se*ne,J[de][ge]+=(1-se)*ne,J[pe][ue]+=se*(1-ne),J[de][ue]+=(1-se)*(1-ne),ie=J[pe][ge]<ie?J[pe][ge]:ie,ae=J[pe][ge]>ae?J[pe][ge]:ae,ie=J[de][ge]<ie?J[de][ge]:ie,ae=J[de][ge]>ae?J[de][ge]:ae,ie=J[pe][ue]<ie?J[pe][ue]:ie,ae=J[pe][ue]>ae?J[pe][ue]:ae,ie=J[de][ue]<ie?J[de][ue]:ie,ae=J[de][ue]>ae?J[de][ue]:ae);return this.maxIndexX=G,this.maxIndexY=Q,this.binMin=ie,this.binMax=ae,this.deltaX=U,this.deltaY=K,this.fromX=R,this.fromY=Z,this.numX=G,this.numY=Q,this.densitymap=J,J}autoBins(R,U){return this.numX=R||400,this.numY=U||this.numX,this.calculateDensity(this.minX,(this.maxX-this.minX)/R,R,this.minY,(this.maxY-this.minY)/U,U),this.recalculateBinsOnDraw=!1,this}setPxPerBin(R,U,G){return R&&this.calculationDensityMap({from:'min',to:'max',pxPerBin:R,weighted:G}),U&&this.calculationDensityMap(!1,{from:'min',to:'max',pxPerBin:U,weighted:G}),this}setBinsFromTo(R,U,G,Z){return this.densityMapCalculation=this.densityMapCalculation||{},this.densityMapCalculation[R]={from:U,to:G,numBins:Z},this.calculationDensityMap(),this}calculationDensityMap(R,U){this.method=this.calculateDensityAdvanced,this.densityMapCalculation=this.densityMapCalculation||{},R&&(this.densityMapCalculation.x=R),U&&(this.densityMapCalculation.y=U)}calculateDensityAdvanced(){var R={x:{from:0,num:0,delta:0,weighing:!1},y:{from:0,num:0,delta:0,weighing:!1}},U={x:this.graph.drawingSpaceWidth,y:this.graph.drawingSpaceHeight},G={x:this.getXAxis,y:this.getYAxis},Z=!1;for(var K in this.densityMapCalculation)if(this.densityMapCalculation[K].weighted&&(Z=!0,R[K].weighing=!0),this.densityMapCalculation[K].pxPerBin){var Q='min'==this.densityMapCalculation[K].from?G[K].call(this).getCurrentMin():this.densityMapCalculation[K].from,J='max'==this.densityMapCalculation[K].to?G[K].call(this).getCurrentMax():this.densityMapCalculation[K].to,$=Math.abs(G[K].call(this).getRelPx(J-Q));R[K].num=Math.ceil(U[K]/this.densityMapCalculation[K].pxPerBin),R[K].from=Q-Math.abs(G[K].call(this).getRelVal((R[K].num*this.densityMapCalculation[K].pxPerBin-$)/2)),R[K].delta=Math.abs(G[K].call(this).getRelVal(this.densityMapCalculation[K].pxPerBin))}else R[K].num=this.densityMapCalculation[K].numBins||400,R[K].from='min'==this.densityMapCalculation[K].from?G[K].call(this).getCurrentMin():this.densityMapCalculation[K].from,R[K].delta=this.densityMapCalculation[K].to?(('max'==this.densityMapCalculation[K].to?G[K].call(this).getCurrentMax():this.densityMapCalculation[K].to)-R[K].from)/R[K].num:this.densityMapCalculate[K].delta;(Z?this.calculateDensityWeighted:this.calculateDensity).call(this,R.x.from,R.x.delta,R.x.num,R.y.from,R.y.delta,R.y.num)}setColorMapBinBoundaries(R,U){return this.colorMapMin=R,this.colorMapMax=U,this}autoColorMapBinBoundaries(){return this.colorMapMin=this.binMin,this.colorMapMax=this.binMax,this}onRedrawColorMapBinBoundaries(R){return this.callbackColorMapMinMax=R,this}colorMapHSL(R,U,G){G=G||'linear';for(var Z={exp:function(se){return(Math.exp(1*(se/U))-Math.exp(0))/(Math.exp(1)-Math.exp(0))},log:function(se){return(Math.log(se+1)-Math.log(1))/(Math.log(U+1)-Math.log(1))},linear:function(se){return(se-0)/(U-0)}},K=0,Q=[],J=[],$={h:null,s:null,l:null,a:null},re=R.length-1,ie=0,ee,te;ie<=U;ie++){for(var ae in ee=Z[G](ie),te=Math.floor(ee*re),te==R.length-1&&(te=re-1),ee=(ee-te/re)/(1/re),$)$[ae]=(R[te+1][ae]-R[te][ae])*ee+R[te][ae];Q[K]='hsl('+$.h+', '+Math.round(100*$.s)+'%, '+Math.round(100*$.l)+'%)',J[K]=$.a,K++}return this.opacities=J,this.colorMap=Q,this.colorMapNum=U,this}autoColorMapHSL(R,U){return this.colorMapHSV(R,100,U||'linear'),this}getColorIndex(R){return Math.max(0,Math.min(this.colorMapNum,Math.floor((R-this.colorMapMin)/(this.colorMapMax-this.colorMapMin)*this.colorMapNum)))}draw(){var R;if(this.method&&this.method(),!this.callbackColorMapMinMax||void 0==this.colorMapMin||void 0==this.colorMapMax||'auto'==this.callbackColorMapMinMax)this.autoColorMapBinBoundaries();else{var U=this.callbackColorMapMinMax(this.binMin,this.binMax);this.setColorMapBinBoundaries(U[0],U[1])}for(var G=this.getXAxis().getRelPx(this.deltaX),Z=this.getYAxis().getRelPx(this.deltaY),K=0;K<this.paths.length;K++)this.paths[K]='';for(var K=0;K<this.maxIndexX;K++)for(var Q=0;Q<this.maxIndexY;Q++)void 0!=this.densitymap[K]&&void 0!=this.densitymap[K][Q]&&(R=this.getColorIndex(this.densitymap[K][Q]),this.paths[R]||(this.paths[R]=''),this.paths[R]+=' M '+this.getXAxis().getPx(K*this.deltaX+this.fromX)+' '+this.getYAxis().getPx(Q*this.deltaY+this.fromY)+' h '+G+' v '+Z+' h -'+G+' z');this.drawRects()}drawRects(){for(var R=0;R<this.paths.length;R++)this.rects[R]||(this.rects[R]=document.createElementNS(this.graph.ns,'path'),this.rects[R].setAttribute('shape-rendering','crispEdges')),void 0!==this.paths[R]&&(this.rects[R].setAttribute('d',this.paths[R]),this.rects[R].setAttribute('fill',this.colorMap[R]),this.rects[R].setAttribute('fill-opacity',this.opacities[R])),this.groupMain.appendChild(this.rects[R])}setOptions(R){return this.options=W.extend(!0,{},defaults,R||{}),this}}X.default=V,T.exports=X['default']})},function(u,A,S){var C,P,E;(function(T,X){P=[u,A,S(14),S(3)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y,I){'use strict';Object.defineProperty(X,'__esModule',{value:!0});var F=function(R){return R&&R.__esModule?R:{default:R}}(Y),W=function(R){if(R&&R.__esModule)return R;var U={};if(null!=R)for(var G in R)Object.prototype.hasOwnProperty.call(R,G)&&(U[G]=R[G]);return U.default=R,U}(I);class V extends F.default{constructor(){super(...arguments),this.negativeDelta=0,this.positiveDelta=0,this.negativeThreshold=0,this.positiveThreshold=0}setData(R,U,G){var U=U||'2D',G=G||'float',$=R.length,ie=[],J,ee,te,re;for(R instanceof Array||'object'!=typeof R||(this.minX=R.minX,this.minY=R.minY,this.maxX=R.maxX,this.maxY=R.maxY,R=R.segments,$=R.length),J=0;J<$;J++){for(te=R[J].lines.length,re=this._addData(G,te),ee=0;ee<te;ee+=2)re[ee]=R[J].lines[ee],this._checkX(re[ee]),re[ee+1]=R[J].lines[ee+1],this._checkY(re[ee+1]);ie.push({lines:re,zValue:R[J].zValue})}return this.data=ie,this.graph.updateDataMinMaxAxes(),this.dataHasChanged(!0),this}draw(R){if(R||this.hasDataChanged()){this.currentLine=0;var $=0,ee=this.data.length,te=0,Z,K,Q,J,re,ie,se,ne;this.minZ=1/0,this.maxZ=-(1/0);var oe=this.groupLines.nextSibling;this.groupMain.removeChild(this.groupLines),this.zValues={};var le=0,pe=1;this.getFlip()&&(le=0,pe=1);var de=this.getYAxis().getCurrentMin(),ge=this.getXAxis().getCurrentMin(),ue=this.getXAxis().getCurrentMax(),he=this.getYAxis().getCurrentMax();for(this.counter=0,this.currentLineId=0;$<ee;$++){for(this.currentLine='',te=0,re=0,(ne=this.data[$].lines,ie=ne.length);te<ie;te+=4){var ce,xe;ne[te+le]<ge&&ne[te+2+le]<ge||ne[te+pe]<de&&ne[te+2+pe]<de||ne[te+pe]>he&&ne[te+2+pe]>he||ne[te+le]>ue&&ne[te+2+le]>ue||(Q=this.getX(ne[te+le]),J=this.getY(ne[te+pe]),Z=this.getX(ne[te+2+le]),K=this.getY(ne[te+2+pe]),Z!=Q||K!=J)&&(this.currentLine+='M ',this.currentLine+=Q,this.currentLine+=' ',this.currentLine+=J,this.currentLine+='L ',this.currentLine+=Z,this.currentLine+=' ',this.currentLine+=K,this.counter++,ce=Z,xe=K,re++)}this.currentLine+=' z',se=this._createLine(),se.setAttribute('data-zvalue',this.data[$].zValue),this.zValues[this.data[$].zValue]={dom:se},this.minZ=Math.min(this.minZ,this.data[$].zValue),this.maxZ=Math.max(this.maxZ,this.data[$].zValue)}for($++,$=this.currentLine+1;$<this.lines.length;$++)this.groupLines.removeChild(this.lines[$]),this.lines.splice($,1);for($=0;$<ee;$++)this.setColorTo(this.lines[$],this.data[$].zValue,this.minZ,this.maxZ);this.onMouseWheel(0,{shiftKey:!1}),this.groupMain.insertBefore(this.groupLines,oe)}else if(this.hasStyleChanged(this.selectionType))for(;$<ee;$++)this.setColorTo(this.lines[$],this.data[$].zValue,this.minZ,this.maxZ)}onMouseWheel(R,U,G,Z){for(var K in R/=250,void 0===G?U.shiftKey&&this.options.hasNegative?(this.negativeDelta=Math.min(0,Math.max(-1,this.negativeDelta+Math.min(0.1,Math.max(-0.1,R)))),this.negativeThreshold=-this.minZ*Math.pow(this.negativeDelta,3)):(this.positiveDelta=Math.min(1,Math.max(0,this.positiveDelta+Math.min(0.1,Math.max(-0.1,R)))),this.positiveThreshold=this.maxZ*Math.pow(this.positiveDelta,3)):(!Z&&(this.negativeThreshold=-G*this.minZ,this.negativeDelta=-Math.pow(Math.abs(this.negativeThreshold/-this.minZ),1/3)),Z&&(this.positiveThreshold=G*this.maxZ,this.positiveDelta=Math.pow(this.positiveThreshold/this.maxZ,1/3))),isNaN(this.positiveDelta)&&(this.positiveDelta=0),isNaN(this.negativeDelta)&&(this.negativeDelta=0),this.zValues)this.zValues[K].dom.setAttribute('display',0<=K&&K>=this.positiveThreshold||0>=K&&K<=this.negativeThreshold?'block':'none');this._shapeZoom&&(this.options.hasNegative?(this._shapeZoom.setHandleNeg(-Math.pow(this.negativeDelta,3),this.minZ),this._shapeZoom.showHandleNeg()):this._shapeZoom.hideHandleNeg(),this._shapeZoom.setHandlePos(Math.pow(this.positiveDelta,3),this.maxZ))}setDynamicColor(R){this.lineColors=R,this.styleHasChanged()}setNegative(R){this.options.hasNegative=R,R&&(this.negativeThreshold=0)}setColorTo(R,U,G,Z){if(this.lineColors){var K={h:0,s:0,l:0};for(var Q in K)K[Q]=0<U?this.lineColors.fromPositive[Q]+(this.lineColors.toPositive[Q]-this.lineColors.fromPositive[Q])*(U/Z):this.lineColors.fromNegative[Q]+(this.lineColors.toNegative[Q]-this.lineColors.fromNegative[Q])*(U/G);K.h/=360;var J=W.hslToRgb(K.h,K.s,K.l);R.setAttribute('stroke','rgb('+J.join()+')')}}getSymbolForLegend(){if(!this.lineForLegend){var R=document.createElementNS(this.graph.ns,'ellipse');R.setAttribute('cx',7),R.setAttribute('cy',0),R.setAttribute('rx',8),R.setAttribute('ry',3),R.setAttribute('cursor','pointer'),this.lineForLegend=R}return this.applyLineStyle(this.lineForLegend,this.maxZ),this.lineForLegend}applyLineStyle(R,U){R.setAttribute('stroke',this.getLineColor()),R.setAttribute('stroke-width',this.getLineWidth()+(this.isSelected()?2:0)),this.getLineDashArray()&&R.setAttribute('stroke-dasharray',this.getLineDashArray()),R.setAttribute('fill','none'),this.setColorTo(R,U===void 0?R.getAttribute('data-zvalue'):U,this.minZ,this.maxZ),this.hasStyleChanged(!1)}setShapeZoom(R){this._shapeZoom=R}}X.default=V,T.exports=X['default']})},function(u,A,S){var C,P,E;(function(T,X){P=[u,A,S(2),S(3),S(4)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y,I,B){'use strict';function F(G){return G&&G.__esModule?G:{default:G}}Object.defineProperty(X,'__esModule',{value:!0});var W=F(Y),V=function(G){if(G&&G.__esModule)return G;var Z={};if(null!=G)for(var K in G)Object.prototype.hasOwnProperty.call(G,K)&&(Z[K]=G[K]);return Z.default=G,Z}(I),R=F(B);class U extends R.default{constructor(){super()}init(G,Z){var K=this;if(this.graph=G,this.properties=Z||{},this.handles=[],this.options=this.options||{},this.group=document.createElementNS(this.graph.ns,'g'),this._selected=!1,this.createDom(),this._dom&&(this._dom.jsGraphIsShape=this),this.group.jsGraphIsShape=this,this.classes=[],this.transforms=[],this._data.masker){var Q=document.createElementNS(this.graph.ns,'mask');this.maskingId=Math.random(),Q.setAttribute('id',this.maskingId),this.maskDomWrapper=document.createElementNS(this.graph.ns,'rect'),this.maskDomWrapper.setAttribute('fill','white'),Q.appendChild(this.maskDomWrapper);var J=this._dom.cloneNode();Q.appendChild(J),this.maskDom=J,this.graph.defs.appendChild(Q)}return this.group&&(this._dom&&!this.isHTML()&&this.group.appendChild(this._dom),this.group.addEventListener('mouseover',function($){K.handleMouseOver($)}),this.group.addEventListener('mouseout',function($){K.handleMouseOut($)}),this.group.addEventListener('mousedown',function($){K.graph.focus(),K.handleMouseDown($)}),this.group.addEventListener('click',function($){K.handleClick($)}),this.group.addEventListener('dblclick',function($){K.handleDblClick($)})),this.initImpl(),this.graph.emit('shapeNew',this),this}initImpl(){}getData(){return this._data}getType(){return this.type}kill(G){this._inDom&&this.graph.removeShapeFromDom(this),G||this.graph._removeShape(this),this.graph.stopElementMoving(this),this.graph.emit('shapeRemoved',this),this.emit('removed',this),this._inDom=!1}hide(){return this.hidden?this:(this.hidden=!0,this.isHTML()?this._dom.style.display='none':this.group.style.display='none',this)}isHidden(){return this.hidden}isVisible(){return!this.hidden}show(){return this.hidden?(this.hidden=!1,this.isHTML()?this._dom.style.display='initial':this.group.style.display='initial',this.redraw(),this):this}addClass(G){return this.classes=this.classes||[],-1==this.classes.indexOf(G)&&this.classes.push(G),this.makeClasses(),this}removeClass(G){return this.classes.splice(this.classes.indexOf(G),1),this.makeClasses(),this}makeClasses(){return this._dom&&this._dom.setAttribute('class',this.classes.join(' ')),this}changed(G,Z){return G&&(this.graph.emit(G,this,Z),this.emit(G,this,Z)),this.emit('changed',this,Z),this.graph.emit('shapeChanged',this,Z),this}setEventReceptacle(){this.rectEvent||(this.rectEvent=document.createElementNS(this.graph.ns,'rect'),this.rectEvent.setAttribute('pointer-events','fill'),this.rectEvent.setAttribute('fill','transparent'),this.group.appendChild(this.rectEvent),this.rectEvent.jsGraphIsShape=this);var G=this.group.getBBox();this.rectEvent.setAttribute('x',G.x),this.rectEvent.setAttribute('y',G.y-10),this.rectEvent.setAttribute('width',G.width),this.rectEvent.setAttribute('height',G.height+20)}setSerie(G){return this.serie=G,this.xAxis=G.getXAxis(),this.yAxis=G.getYAxis(),this}getSerie(){return this.serie}autoAxes(){return this.xAxis||(this.xAxis=this.graph.getXAxis()),this.yAxis||(this.yAxis=this.graph.getYAxis()),this}setXAxis(G){return this.xAxis=G,this}setYAxis(G){this.yAxis=G}getXAxis(){return this.xAxis||this.autoAxes(),this.xAxis}getYAxis(){return this.yAxis||this.autoAxes(),this.yAxis}setLayer(G){return this.setProp('layer',G),this}getLayer(){var G=this.getProp('layer');return void 0===G?1:G}draw(G,Z){return(!this._inDom||G)&&(this.appendToDom(),this._inDom=!0),this.makeLabels(),Z||this.redraw(),this.applyStyle(),this}redraw(){return this.hidden?this:(this.position=this.applyPosition(),this.redrawImpl(),!this.position)?this:(this.updateLabels(),this._applyTransforms(),this)}redrawImpl(){}setProperties(G){this.properties=G,Array.isArray(this.properties.position)||(this.properties.position=[this.properties.position]);for(var Z=this,K=0,Q=this.properties.position.length,J;K<Q;K++)J=W.default.check(this.properties.position[K],function($){return Z.getRelativePosition($)}),this.properties.position[K]=J;return this.emit('propertiesChanged'),this}getRelativePosition(G){var Z;if(null!==(Z=/position([0-9]*)/.exec(G)))return this.getPosition(Z[1]);return null===(Z=/labelPosition([0-9]*)/.exec(G))?void 0:this.getLabelPosition(Z[1])}getProperties(){return this.properties}setProp(G,Z,K){return this.properties=this.properties||{},this.properties[G]=this.properties[G]||[],this.properties[G][K||0]=Z,this.emit('propertyChanged',G),this}getProp(G,Z){return(this.properties[G]||[])[Z||0]}getProps(G){return this.properties[G]||[]}addProp(G,Z){this.properties[G]=this.properties[G]||[],this.properties[G].push(Z)}resetProp(G){this.properties[G]=[]}setDom(G,Z,K){!this._dom||K&&V.hasSavedAttribute(this._dom,G)||this._dom.setAttribute(G,Z)}setDomGroup(G,Z){this.group&&this.group.setAttribute(G,Z)}setStrokeColor(G){return this.setProp('strokeColor',G),this.overwriteSavedProp('stroke',G),this.applySelectedStyle(),this}getStrokeColor(){return this.getProp('strokeColor')}setFillColor(G){return this.setProp('fillColor',G),this.overwriteSavedProp('fill',G),this.applySelectedStyle(),this}getFillColor(){return this.getProp('fillColor')}setFillOpacity(G){return this.setProp('fillOpacity',G),this.overwriteSavedProp('fill-opacity',G),this.applySelectedStyle(),this}setStrokeWidth(G){return this.setProp('strokeWidth',G),this.overwriteSavedProp('stroke-width',G),this.applySelectedStyle(),this}getStrokeWidth(){return this.getProp('strokeWidth')}setStrokeDasharray(G){return this.setProp('strokeDasharray',G),this.overwriteSavedProp('stroke-dasharray',G),this.applySelectedStyle(),this}setAttributes(G){return this.setProp('attributes',G),this}overwriteSavedProp(G,Z){V.overwriteDomAttribute(this._dom,G,Z)}addAttribute(G,Z){var K={};return K[G]=Z,this.addProp('attributes',K),this}addTransform(G,Z){return this.addProp('transforms',{type:G,arguments:Array.isArray(Z)?Z:[Z]}),this}resetTransforms(){return this.resetProp('transforms'),this}setLabelText(G,Z){return this.setProp('labelText',G,Z||0),this}setLabelData(G,Z){return this.setProp('labelData',text,Z||0),this}getLabelText(G,Z){return this.getProp('labelText',Z||0)}displayLabel(G){return this.setProp('labelVisible',!0,G||0),this}hideLabel(G){return this.setProp('labelVisible',!1,G||0),this}setLabelColor(G,Z){return this.setProp('labelColor',G,Z||0),this}setLabelFontSize(G,Z){return this.setProp('labelFontSize',G,Z||0),this}getLabelPosition(G){return this.getProp('labelPosition',G||0)}setLabelPosition(G,Z){var Q=W.default.check(G,function(J){return K.getRelativePosition(J)}),K;return this.setProp('labelPosition',Q,Z||0),this}setLabelAngle(G,Z){return this.setProp('labelAngle',G,Z||0),this}setLabelBaseline(G,Z){return this.setProp('labelBaseline',G,Z||0),this}setLabelAnchor(G,Z){return this.setProp('labelAnchor',G,Z||0),this}setLabelSize(G,Z){return this.setProp('labelSize',G,Z||0),this}setLabelStrokeColor(G,Z){return this.setProp('labelStrokeColor',G,Z||0),this}setLabelStrokeWidth(G,Z){return this.setProp('labelStrokeWidth',G,Z||0),this}setLabelBackgroundColor(G,Z){return this.setProp('labelBackgroundColor',G,Z||0),this}setLabelBackgroundOpacity(G,Z){return this.setProp('labelBackgroundOpacity',G,Z||0),this}applyGenericStyle(){this.setDom('fill',this.getProp('fillColor'),!0),this.setDom('fill-opacity',this.getProp('fillOpacity'),!0),this.setDom('stroke',this.getProp('strokeColor'),!0),this.setDom('stroke-width',this.getProp('strokeWidth'),!0),this.setDom('stroke-dasharray',this.getProp('strokeDasharray'),!0);for(var G=this.getProps('attributes'),Z=0,K=G.length;Z<K;Z++)for(var Q in G[Z])this.setDom(Q,'function'==typeof G[Z][Q]?G[Z][Q].call(this,Q):G[Z][Q],!0);return this._applyTransforms(),this}applyStyle(){return this.applyGenericStyle()}calculatePosition(G){var Z;return Z=G instanceof W.default?G:this.getPosition(G),Z?Z&&Z.compute?Z.compute(this.graph,this.getXAxis(),this.getYAxis(),this.getSerie()):void this.graph.throw():void 0}getPosition(G){var Z=this.getProp('position',G||0);return this.setProp('position',Z=W.default.check(Z),G),Z}setPosition(G,Z){var K=this,Q=W.default.check(G,function(J){return K.getRelativePosition(J)});return this.setProp('position',Q,Z||0)}sortPositions(G){return this.getProps('position').sort(G),this}_applyTransforms(){var G=this.getProp('transforms'),Z='';if(G&&(G=Array.isArray(G)?G:[G],0!=G.length)){for(var K=0;K<G.length;K++){switch(Z+=G[K].type+'(',G[K].type){case'translate':let J=G[K].arguments[0].compute(this.graph,this.getXAxis(),this.getYAxis(),this.getSerie());Z+=J.x,Z+=', ',Z+=J.y;break;case'rotate':if(Z+=G[K].arguments[0],Z+=', ',1==this.transforms[K].arguments.length){var Q=this.getPosition(0);Z+=Q.x+', '+Q.y}else Z+=W.default.getDeltaPx(G[K].arguments[1],this.getXAxis()).replace('px',''),Z+=', ',Z+=W.default.getDeltaPx(G[K].arguments[2],this.getYAxis()).replace('px','');}Z+=') '}return this.setDomGroup('transform',Z),this}}makeLabels(){this._labels=this._labels||[],this._labelsBackground=this._labelsBackground||[],this._labels.map(Z=>{this.group.removeChild(Z)}),this._labelsBackground.map(Z=>{this.group.removeChild(Z)}),this._labels=[],this._labelsBackground[G]=[];for(var G=0;void 0!==this.getProp('labelText',G);)this._labels[G]||(this._labels[G]=document.createElementNS(this.graph.ns,'text'),this._labels[G].setAttribute('data-label-i',G),this._labels[G].jsGraphIsShape=this,this._labelsBackground[G]=document.createElementNS(this.graph.ns,'rect'),this._labelsBackground[G].setAttribute('data-label-i',G),this._labelsBackground[G].jsGraphIsShape=this,this.group.appendChild(this._labelsBackground[G]),this.group.appendChild(this._labels[G]),this._labels[G].addEventListener('dblclick',Z=>{Z.stopPropagation(),this.labelDblClickListener(Z)}),this._labelsBackground[G].addEventListener('dblclick',Z=>{Z.stopPropagation(),this.labelDblClickListener(Z)})),G++;return this.updateLabels(),this}isLabelEditable(G){return this.getProp('labelEditable',G||0)}updateLabels(){this;this._labels=this._labels||[];for(var Z=0,K=this._labels.length;Z<K;Z++)this._applyLabelData(Z)}_applyLabelData(G){G=G||0;var Z=this.getProp('labelVisible',G);if(!1===Z)return this._labels[G].setAttribute('display','none'),void this._labelsBackground[G].setAttribute('display','none');this._labels[G].setAttribute('display','initial'),this._labelsBackground[G].setAttribute('display','initial');var K=this.calculatePosition(W.default.check(this.getProp('labelPosition',G)));if(!(isNaN(K.x)||isNaN(K.y))){'NaNpx'==K.x||isNaN(K.x)||'NaN'===K.x||!1===K.x||(this._labels[G].setAttribute('x',K.x),this._labels[G].setAttribute('y',K.y));var Q=this.getProp('labelAngle',G)||0;if(0!=Q){var J=this._labels[G].getAttribute('x'),$=this._labels[G].getAttribute('y');this._labels[G].setAttribute('transform','rotate('+Q+' '+J+' '+$+')')}let ee=this.getProp('labelHTMLData',G)||{};for(var te in console.log(ee),ee)this._labels[G].setAttribute(te,ee[te]),this._labelsBackground[G].setAttribute(te,ee[te]);this._labels[G].setAttribute('dominant-baseline',this.getProp('labelBaseline',G)||'no-change'),this._labels[G].textContent=this.getProp('labelText',G),this._labels[G].setAttribute('fill',this.getProp('labelColor',G)||'black'),this._labels[G].setAttribute('font-size',this.getProp('labelSize',G)+'px'||'12px'),this._labels[G].setAttribute('text-anchor',this._getLabelAnchor(G)),this._labels[G].setAttribute('stroke',this.getProp('labelStrokeColor',G)||'black'),this._labels[G].setAttribute('stroke-width',this.getProp('labelStrokeWidth',G)||'0px'),this._labels[G].setAttribute('stroke-location','outside');let re=this._labels[G].getBBox();return this._labelsBackground[G].setAttribute('x',re.x),this._labelsBackground[G].setAttribute('y',re.y),this._labelsBackground[G].setAttribute('width',re.width),this._labelsBackground[G].setAttribute('height',re.height),this._labelsBackground[G].setAttribute('fill',this.getProp('labelBackgroundColor')||'transparent'),this._labelsBackground[G].setAttribute('fill-opacity',this.getProp('labelBackgroundOpacity')||1),this}}emptyLabels(){for(var G=0,Z=this._labels.length;G<Z;G++)this._labels[G].textContent='';return this}_getLabelAnchor(G){var Z=this.getProp('labelAnchor',G);switch(Z){case'middle':case'start':case'end':return Z;break;case'right':return'end';break;case'left':return'start';break;default:return'start';}}isSelected(){return this._selectStatus||!1}hasHandles(G){return void 0!==G&&this.setProp('handles',G),!!this.getProp('handles')||!!this.getProp('statichandles')}addHandles(){if(!this.isLocked()){if(!this.handlesInDom){this.handlesInDom=!0;for(var G=1;G<this.handles.length;G++)this.handles[G]&&this.group.appendChild(this.handles[G])}return this}}removeHandles(){this.hideHandles(),this.handles=[]}hideHandles(){if(!this.handlesInDom)return this;for(var G=1;G<this.handles.length;G++)this.group.removeChild(this.handles[G]);return this.handlesInDom=!1,this}areHandlesInDom(){return this.handlesInDom}_select(G){return!!this.isSelectable()&&void(this.appendToDom(),this._selectStatus=!0,this.applySelectedStyle(),this.hasHandles()&&!this.hasStaticHandles()&&(this.addHandles(),this.setHandles()),!G&&this.graph.emit('shapeSelected',this))}applySelectedStyle(){if(this._selectStatus){var G=this.getSelectStyle(),Z={};for(var K in G)Z[K]='function'==typeof G[K]?G[K].call(this):G[K];V.saveDomAttributes(this._dom,Z,'select')}}_unselect(G){this._selectStatus=!1,V.restoreDomAttributes(this._dom,'select'),this.hasHandles()&&!this.hasStaticHandles()&&this.hideHandles(),G||this.graph.emit('shapeUnselected',this)}getSelectStyle(){return this.selectStyle}setSelectStyle(G){return this.selectStyle=G,this.applySelectedStyle(),this}setStaticHandles(G){this.setProp('staticHandles',G)}hasStaticHandles(){return!!this.getProp('staticHandles')}_createHandles(G,Z,K,Q){if(!(this.handles&&0<this.handles.length)){for(var J=this,$=1;$<=G;$++)(te=>{var re=this,ie=document.createElementNS(re.graph.ns,Z);if(ie.jsGraphIsShape=!0,K)for(var ae in K)ie.setAttribute(ae,K[ae]);ie.addEventListener('mousedown',se=>{re.isResizable()&&(se.preventDefault(),se.stopPropagation(),re.graph.emit('beforeShapeResize',re),this.emit('beforeShapeResize'),!re.graph.prevent(!1)&&(re.resizing=!0,re.handleSelected=te,re.handleMouseDown(se)))}),Q&&Q(re.handles[te]),re.handles[te]=ie}).call(this,$);return this.handles}}createHandles(){}handleMouseDownImpl(){}handleMouseMoveImpl(){}handleMouseUpImpl(){}handleCreateImpl(){}handleMouseDown(G){if(!this.isLocked())return(this.isMovable()||this.isResizable())&&this.graph.elementMoving(this),this.getProp('selectOnMouseDown')&&this.graph.selectShape(this),this.isMovable()&&!this.resizing&&(this.graph.emit('beforeShapeMove',self),!this.graph.prevent(!1)&&(this.moving=!0)),this._mouseCoords=this.graph._getXY(G),this.handleMouseDownImpl(G,this._mouseCoords)}handleClick(G){return!!this.isSelectable()&&void(!G.shiftKey&&this.graph.unselectShapes(),this.getProp('selectOnClick')&&(console.log('sel'),this.graph.selectShape(this)))}handleMouseMove(G){if((this.resizing||this.moving)&&!this.isSelected()&&this.graph.selectShape(this),this.graph.emit('beforeShapeMouseMove',this),this.emit('beforeShapeMouseMove'),this.graph.prevent(!1)||!this._mouseCoords)return!1;var Z=this.graph._getXY(G),K=this.getXAxis().getRelVal(Z.x-this._mouseCoords.x),Q=this.getYAxis().getRelVal(Z.y-this._mouseCoords.y);(0!=K||0!==Q)&&(this.preventUnselect=!0),this._mouseCoords=Z;var J=this.handleMouseMoveImpl(G,K,Q,Z.x-this._mouseCoords.x,Z.y-this._mouseCoords.y);return J}handleMouseUp(G){return this.moving&&(this.graph.emit('shapeMoved',this),this.emit('shapeMoved')),(this.handleSelected||this.resize)&&(this.graph.emit('shapeResized',this),this.emit('shapeResized')),this.moving=!1,this.resizing=!1,this.handleSelected=!1,this.graph.elementMoving(!1),this.handleMouseUpImpl(G)}handleDblClick(){}handleMouseOver(){!this.getProp('highlightOnMouseOver')||this.moving||this.resizing||this.highlight(),this.graph.emit('shapeMouseOver',this)}handleMouseOut(){this.getProp('highlightOnMouseOver')&&this.unHighlight(),this.graph.emit('shapeMouseOut',this)}lock(){return this.setProp('locked',!0),this}unlock(){return this.setProp('locked',!1),this}isLocked(){return this.getProp('locked')||this.graph.shapesLocked}movable(){this.setProp('movable',!0)}unmovable(){return this.setProp('movable',!1),!1}isMovable(){return this.getProp('movable')}resizable(){this.setProp('resizable',!0)}unresizable(){this.setProp('resizable',!1)}isResizable(){return this.getProp('resizable')}selectable(){this.setProp('selectable',!0)}unselectable(){this.graph.unselectShape(this),this.setProp('selectable',!1)}isSelectable(){return this.getProp('selectable')}highlight(G,Z){return G||(G=this.getHighlightAttributes()),Z||(Z='highlight'),V.saveDomAttributes(this._dom,G,Z),this.highlightImpl(),this}unHighlight(G){return G||(G='highlight'),V.restoreDomAttributes(this._dom,G),this.unHighlightImpl(),this}highlightImpl(){}unHighlightImpl(){}getHighlightAttributes(){return this._highlightAttributes}setHighlightAttributes(G){return this._highlightAttributes=G,this}getMaskingID(){return this.maskingId}maskWith(G){const Z=G.getMaskingID();Z?this._dom.setAttribute('mask','url(#'+Z+')'):this._dom.removeAttribute('mask')}updateMask(){}labelDblClickListener(G){var Z=parseInt(G.target.getAttribute('data-label-i')),K=this;if(!isNaN(Z)&&this.isLabelEditable(Z)){G.preventDefault(),G.stopPropagation();var Q=document.createElement('input');Q.setAttribute('type','text'),Q.setAttribute('value',K.getProp('labelText',Z)),K.graph.wrapper.prepend(Q),Q.select(),V.setCSS(Q,{position:'absolute',marginTop:parseInt(G.target.getAttribute('y').replace('px',''))+this.graph.getPaddingTop()-10+'px',marginLeft:parseInt(G.target.getAttribute('x').replace('px',''))+this.graph.getPaddingLeft()-50+'px',textAlign:'center',width:'100px'});const J=K.getLabelText(Z),$=function(){K.setLabelText(Q.value,Z),K._labels[Z].textContent=Q.value;const ee=Q.value;Q.remove(),Q.removeEventListener('blur',$),Q=!1,K.changed('shapeLabelChanged',{previousValue:J,nextValue:ee})};Q.addEventListener('blur',$),Q.addEventListener('keyup',function(ee){13===ee.keyCode&&$()}),Q.addEventListener('keypress',function(ee){ee.stopPropagation()}),Q.addEventListener('keydown',function(ee){ee.stopPropagation()}),Q.focus()}}appendToDom(){return this._forcedParentDom?this._forcedParentDom.appendChild(this.group):this.graph.appendShapeToDom(this),this}forceParentDom(G){return this._forcedParentDom=G,this}isHTML(){return!1}}U.prototype.computePosition=U.prototype.calculatePosition,U.prototype.showLabel=U.prototype.displayLabel,U.prototype.remove=U.prototype.kill,X.default=U,T.exports=X['default']})},function(u,A,S){var C,P,E;(function(T,X){P=[u,A,S(27)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y){'use strict';Object.defineProperty(X,'__esModule',{value:!0});var B=function(F){return F&&F.__esModule?F:{default:F}}(Y);class O extends B.default{createDom(){this._dom=document.createElementNS(this.graph.ns,'path')}createHandles(){this._createHandles(2,'line',{'stroke-width':'3',stroke:'transparent','pointer-events':'stroke',cursor:'ew-resize'})}handleMouseMoveImpl(F,W){if(!this.isLocked()){if(this.moving)this.getPosition(0).deltaPosition('x',W,this.getXAxis()),this.getPosition(1).deltaPosition('x',W,this.getXAxis());else if(this.serie&&this.handleSelected){this.resizingPosition=1==this.handleSelected?this.getPosition(0):this.getPosition(1);var R=this.serie.searchClosestValue(this.getXAxis().getVal(this.graph._getXY(F).x-this.graph.getPaddingLeft()));if(!R)return;this.resizingPosition.x!=R.xMin&&(this.preventUnselect=!0),this.resizingPosition.x=R.xMin}else this.handleSelected&&(this.resizingPosition=1==this.handleSelected?this.getPosition(0):this.getPosition(1),this.resizingPosition.deltaPosition('x',W,this.getXAxis()));this.applyPosition()}}applyPosition(){if(this.serie){var F=this.computePosition(0),W=this.computePosition(1),V=Math.abs(F.x-W.x),R=Math.min(F.x,W.x);if(2>V||0>R+V||R>this.graph.getDrawingWidth())return this.setDom('d',''),!1;var U=this.serie.searchClosestValue(this.getPosition(0).x),G=this.serie.searchClosestValue(this.getPosition(1).x),se=0,ne=Number.MAX_VALUE,Z,K,Q,J,$,ee,R,te;if(!U||!G)return!1;for(U.xBeforeIndex>G.xBeforeIndex&&(Z=U,U=G,G=Z),this.counter=0,K=U.dataIndex;K<=G.dataIndex;K++){for(this.currentLine='',J=K==U.dataIndex?U.xBeforeIndexArr:0,$=K==G.dataIndex?G.xBeforeIndexArr:this.serie.data[K].length,ee=0,J==$&&$++,Q=J;Q<=$;Q+=2)R=this.serie.getX(this.serie.data[K][Q+0]),te=this.serie.getY(this.serie.data[K][Q+1]),se=Math.max(this.serie.data[K][Q+1],se),ne=Math.min(this.serie.data[K][Q+1],ne),Q==J&&(this.firstX=R,this.firstY=te),this.currentLine+=0<ee?' L '+R+' '+te+' ':' M '+R+' '+te+' ',ee++;if(this.lastX=R,this.lastY=te,!this.firstX||!this.firstY||!this.lastX||!this.lastY)return;this.currentLine+=' V '+this.getYAxis().getPx(0)+' H '+this.firstX+' z',this.setDom('d',this.currentLine)}return this.maxY=this.serie.getY(se),this.setHandles(),this.changed(),!0}}setHandles(){if(this.firstX){var F=this.computePosition(0),W=this.computePosition(1);F.x<W.x?(this.handles[1].setAttribute('x1',this.firstX),this.handles[1].setAttribute('x2',this.firstX),this.handles[2].setAttribute('x1',this.lastX),this.handles[2].setAttribute('x2',this.lastX)):(this.handles[1].setAttribute('x1',this.lastX),this.handles[1].setAttribute('x2',this.lastX),this.handles[2].setAttribute('x1',this.firstX),this.handles[2].setAttribute('x2',this.firstX)),this.handles[1].setAttribute('y1',this.getYAxis().getMaxPx()),this.handles[1].setAttribute('y2',this.serie.getY(0)),this.handles[2].setAttribute('y1',this.getYAxis().getMaxPx()),this.handles[2].setAttribute('y2',this.serie.getY(0))}}}X.default=O,T.exports=X['default']})},function(u,A,S){var C,P,E;(function(T,X){P=[u,A,S(3),S(27)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y,I){'use strict';Object.defineProperty(X,'__esModule',{value:!0});var F=function(R){if(R&&R.__esModule)return R;var U={};if(null!=R)for(var G in R)Object.prototype.hasOwnProperty.call(R,G)&&(U[G]=R[G]);return U.default=R,U}(Y),W=function(R){return R&&R.__esModule?R:{default:R}}(I);class V extends W.default{constructor(R,U){super(R,U)}createDom(){this._dom=document.createElementNS(this.graph.ns,'ellipse')}applyPosition(){var R=this.computePosition(0);return this.setDom('cx',R.x||0),this.setDom('cy',R.y||0),this.setDom('rx',this.getProp('rx')||0),this.setDom('ry',this.getProp('ry')||0),!0}setR(R,U){return this.setProp('rx',R),this.setProp('ry',U),this}handleMouseUpImpl(){this.triggerChange()}handleMouseMoveImpl(){}}X.default=V,T.exports=X['default']})},function(u,A,S){var C,P,E;(function(T,X){P=[u,A,S(27)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y){'use strict';Object.defineProperty(X,'__esModule',{value:!0});var B=function(F){return F&&F.__esModule?F:{default:F}}(Y);class O extends B.default{constructor(F,W){super(F,W)}createDom(){return!1}applyPosition(){return!0}}X.default=O,T.exports=X['default']})},function(u,A,S){var C,P,E;(function(T,X){P=[u,A,S(27)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y){'use strict';Object.defineProperty(X,'__esModule',{value:!0});var B=function(F){return F&&F.__esModule?F:{default:F}}(Y);class O extends B.default{constructor(F,W){super(F,W)}createDom(){this._dom=document.createElementNS(this.graph.ns,'path'),this.getStrokeColor()||this.setStrokeColor('black'),this.getStrokeWidth()==void 0&&this.setStrokeWidth(1)}createHandles(){}setPointsPx(F){return this.setProp('pxPoints',F),this}applyPosition(){let W=this.computePosition(0),F;if(F=this.getProp('pxPoints'))F=' M '+W.x+' '+W.y+' '+F,this.setDom('d',F);else if(this.points){var V,R;this.serie?(V=this.serie.getXAxis(),R=this.serie.getYAxis()):this.xAxis&&this.yAxis&&(V=this.xAxis,R=this.yAxis),this.setDom('d','M '+this.points.map(function(U){return V.getPx(U[0])+', '+R.getPx(U[1])}).join(' L '))}return this.changed(),!0}}X.default=O,T.exports=X['default']})},function(u,A,S){var C,P,E;(function(T,X){P=[u,A,S(27)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y){'use strict';Object.defineProperty(X,'__esModule',{value:!0});var B=function(F){return F&&F.__esModule?F:{default:F}}(Y);class O extends B.default{constructor(F,W){super(F,W)}createDom(){this._dom=document.createElementNS(this.graph.ns,'line'),this.setStrokeColor('black'),this.setStrokeWidth(1)}createHandles(){this._createHandles(2,'rect',{transform:'translate(-3 -3)',width:6,height:6,stroke:'black',fill:'white',cursor:'nwse-resize'})}applyPosition(){var F=this.calculatePosition(0),W=this.calculatePosition(1);if(F&&F.x&&F.y)return this.setDom('x2',F.x),this.setDom('y2',F.y),this.setDom('y1',W.y),this.setDom('x1',W.x),this.currentPos2x=W.x,this.currentPos2y=W.y,this.currentPos1x=F.x,this.currentPos1y=F.y,!0}handleMouseMoveImpl(F,W,V){if(!this.isLocked()){var G=this.getPosition(0),Z=this.getPosition(1),K;if(1==this.handleSelected?K=G:2==this.handleSelected&&(K=Z),K&&(!this._data.vertical&&K.deltaPosition('x',W,this.getXAxis()),!this._data.horizontal&&K.deltaPosition('y',V,this.getYAxis())),this.moving&&(G.x&&G.deltaPosition('x',W,this.getXAxis()),G.y&&G.deltaPosition('y',V,this.getYAxis()),Z.x&&Z.deltaPosition('x',W,this.getXAxis()),Z.y&&Z.deltaPosition('y',V,this.getYAxis())),this._data.forcedCoords){var Q=this._data.forcedCoords;void 0!==Q.y&&('function'==typeof Q.y?Z.y=G.y=Q.y(this):(Z.y=Q.y,G.y=Q.y)),void 0!==Q.x&&('function'==typeof Q.x?Z.x=G.x=Q.x(this):(Z.x=Q.x,G.x=Q.x))}return this.rectEvent&&this.setEventReceptacle(),this.redraw(),this.changed(),this.setHandles(),!0}}setHandles(){!this.areHandlesInDom()||isNaN(this.currentPos1x)||(this.handles[1].setAttribute('x',this.currentPos1x),this.handles[1].setAttribute('y',this.currentPos1y),this.handles[2].setAttribute('x',this.currentPos2x),this.handles[2].setAttribute('y',this.currentPos2y))}setEventReceptacle(){this.currentPos1x&&(!this.rectEvent&&(this.rectEvent=document.createElementNS(this.graph.ns,'line'),this.rectEvent.setAttribute('pointer-events','stroke'),this.rectEvent.setAttribute('stroke','transparent'),this.rectEvent.jsGraphIsShape=this,this.group.appendChild(this.rectEvent)),this.rectEvent.setAttribute('x1',this.currentPos1x),this.rectEvent.setAttribute('y1',this.currentPos1y),this.rectEvent.setAttribute('x2',this.currentPos2x),this.rectEvent.setAttribute('y2',this.currentPos2y),this.rectEvent.setAttribute('stroke-width',this.getProp('strokeWidth')+2))}}X.default=O,T.exports=X['default']})},function(u,A,S){var C,P,E;(function(T,X){P=[u,A,S(27),S(2)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y,I){'use strict';function B(V){return V&&V.__esModule?V:{default:V}}Object.defineProperty(X,'__esModule',{value:!0});var O=B(Y),F=B(I);class W extends O.default{constructor(V,R){super(V,R),this.nbHandles=2}createDom(){this._dom=document.createElementNS(this.graph.ns,'path'),this._dom.setAttribute('pointer-events','stroke')}initImpl(){this.setFillColor('transparent'),this.setStrokeColor('black')}createHandles(){this._createHandles(2,'rect',{transform:'translate(-3 -3)',width:6,height:6,stroke:'black',fill:'white'}),this.handles[1].setAttribute('fill','red')}xor(V,R){return V&&!R||!V&&R}applyPosition(){let Z=this.getAxis(),K=[],Q='',J=this.getProp('baseLine',0)||300,V,R,U,G,$;if(!this.serie)throw'No serie exists for this shape';let ee=this.getPosition(0),te=this.getPosition(1);if(ee.x<this.serie.getXAxis().getCurrentMin()&&te.x<this.serie.getXAxis().getCurrentMin()||ee.x>this.serie.getXAxis().getCurrentMax()&&te.x>this.serie.getXAxis().getCurrentMax())return this.setDom('d',''),this.emptyLabels(),!1;this.showLabel(0);let re=0,ae=this.serie.getWaveform(),ie;if(ae){let se=ae.getIndexFromX(ee[Z],!0,Math.floor),ne=ae.getIndexFromX(te[Z],!0,Math.ceil),le=!1,oe;se==ne&&('aggregate'==ae.getReductionType()?ne+=4:ne++),ne<se&&(oe=se,se=ne,ne=oe,le=!0);let fe=ae.getDataInUse(),Ae=!0,pe,de,ge,ue,he,ce,xe,me,ye,be;for('aggregate'==ae.getReductionType()&&(Ae=!1),(!ae.getXMonotoneousAscending()||0)&&(ae.getXMonotoneousAscending()||1)?(ie=se,ye=!1,be=1):(ie=ne,ye=!0,be=-1),console.log(se,ne);ye?ie>=se:ie<=ne;ie+=be){if(U=ae.getX(ie,!0),G=ae.getY(ie,!0),V=this.serie.getX(U),R=this.serie.getY(G),re+=ae.getY(ie,!0),pe||(pe=V,de=R,ge=ae.getX(ie),ue=ae.getY(ie)),void 0==he){he=V,xe=R,ce=ae.getX(ie),me=ae.getY(ie);continue}V!=he||R!=xe,he=V,xe=R,K.push([V,R,re]),ce=U}ce=!1,me=!1,he=!1,xe=!1,0==re&&(re=1),this._sumVal=ae.integrate(ee.x,te.x),$=this.ratio?this.ratio*(this.sumVal/re):200/re;let Me;if(0!=K.length){for(var Se=0,ke=K.length;Se<ke;Se++){if(Me=J-K[Se][2]*$,0<Se&&(K[Se-1][2]>re/2&&K[Se][2]<=re/2||K[Se-1][2]<re/2&&K[Se][2]>=re/2)){let _e=J-(K[Se-1][2]+K[Se][2])/2*$;this.setPosition({x:K[Se][0]+'px',y:_e+'px'},3),this.setLabelPosition(this.getPosition(3),0)}Q+=' L '+K[Se][0]+', '+Me+' ',this.lastPointX=K[Se][0],this.lastPointY=Me}return this.points=K,this._sum=re,Q=this.serie.isFlipped()?' M '+J+', '+pe+' '+Q:' M '+pe+', '+J+' '+Q,this.firstPointX=pe,this.firstPointY=J,this.setDom('d',Q),this.firstX=pe,this.firstY=de,this.ratioLabel&&this.updateIntegralValue(this.ratioLabel)||this.updateLabels(),this.changed(),this.handleCondition=!this.xor(-1==be,le),this.setHandles(),this.updateIntegralValue(),!0}}}updateIntegralValue(V=this.ratioLabel){V&&(this.ratioLabel=V),this.setLabelText(V?(Math.round(100*this.sumVal*V)/100).toPrecision(3):'N/A',0),this.updateLabels()}getAxis(){return this._data.axis||'x'}set ratio(V){this._ratio=V}get ratio(){return this._ratio}get sum(){return this._sum}get sumVal(){return this._sumVal}selectStyle(){this.setDom('stroke-width','2px')}selectHandles(){}setHandles(){void 0!=this.points&&this.isSelected()&&(this.addHandles(),this.handleCondition?(this.handles[1].setAttribute('x',this.firstPointX),this.handles[1].setAttribute('y',this.firstPointY),this.handles[2].setAttribute('x',this.lastPointX),this.handles[2].setAttribute('y',this.lastPointY)):(this.handles[2].setAttribute('x',this.firstPointX),this.handles[2].setAttribute('y',this.firstPointY),this.handles[1].setAttribute('x',this.lastPointX),this.handles[1].setAttribute('y',this.lastPointY)))}handleMouseMoveImpl(V,R){if(!this.isLocked()){var K=this.getPosition(0),Q=this.getPosition(1),J;return 1==this.handleSelected?J=K:2==this.handleSelected&&(J=Q),J&&!this._data.vertical&&J.deltaPosition('x',R,this.getXAxis()),this.moving&&(K.x&&K.deltaPosition('x',R,this.getXAxis()),Q.x&&Q.deltaPosition('x',R,this.getXAxis())),this.rectEvent&&this.setEventReceptacle(),this.redraw(),this.changed(),!0}}}X.default=W,T.exports=X['default']})},function(u,A,S){var C,P,E;(function(T,X){P=[u,A,S(35)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y){'use strict';Object.defineProperty(X,'__esModule',{value:!0});var B=function(F){return F&&F.__esModule?F:{default:F}}(Y);class O extends B.default{constructor(F,W){super(F,W),this.nbHandles=4}createDom(){this._dom=document.createElementNS(this.graph.ns,'rect'),this._dom.element=this,this.createHandles(this.nbHandles,'rect',{transform:'translate(-3 -3)',width:6,height:6,stroke:'black',fill:'white',cursor:'nwse-resize'})}redrawImpl(){this.setPosition(),this.setHandles(),this.setBindableToDom(this._dom)}}X.default=O,T.exports=X['default']})},function(u,A,S){var C,P,E;(function(T,X){P=[u,A,S(27),S(3)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y,I){'use strict';Object.defineProperty(X,'__esModule',{value:!0});var F=function(R){return R&&R.__esModule?R:{default:R}}(Y),W=function(R){if(R&&R.__esModule)return R;var U={};if(null!=R)for(var G in R)Object.prototype.hasOwnProperty.call(R,G)&&(U[G]=R[G]);return U.default=R,U}(I);class V extends F.default{constructor(R,U){super(R,U)}createDom(){this;return this._dom=document.createElementNS(this.graph.ns,'rect'),this.setStrokeColor('black'),this.setStrokeWidth(1),this.setFillColor('transparent'),this}createHandles(){if(this.hasHandles()){var R=this.getProp('handles');switch('object'!=typeof R&&(R={}),R.type||(R.type='corners'),R.type){case'sides':W.extend(R,{sides:{top:!0,bottom:!0,left:!0,right:!0}});var U=0;for(var G in R.sides)R.sides[G]&&U++;this._createHandles(U,'g').map(function(Z){var K=document.createElementNS(self.graph.ns,'rect');K.setAttribute('x','-3'),K.setAttribute('width','6'),K.setAttribute('y','-6'),K.setAttribute('height','12'),K.setAttribute('stroke','black'),K.setAttribute('fill','white'),K.setAttribute('cursor','pointer'),Z.appendChild(K)});var U=1;for(var G in R.sides)R.sides[G]&&(this.handles[G]=this['handle'+U],this.sides[U]=G,U++);break;case'corners':this._createHandles(4,'rect',{transform:'translate(-3 -3)',width:6,height:6,stroke:'black',fill:'white'}),this.handles&&(this.handles[2].setAttribute('cursor','nesw-resize'),this.handles[4].setAttribute('cursor','nesw-resize'),this.handles[1].setAttribute('cursor','nwse-resize'),this.handles[3].setAttribute('cursor','nwse-resize'));}return this}}applyPosition(){var R=this.computePosition(0),U=this.computePosition(1),G,Z,K,Q;return R.x<U.x?(G=R.x,K=U.x-R.x):(G=U.x,K=R.x-U.x),R.y<U.y?(Z=R.y,Q=U.y-R.y):(Z=U.y,Q=R.y-U.y),this.currentX=G,this.currentY=Z,this.currentW=K,this.currentH=Q,isNaN(G)||isNaN(Z)||!1===G||!1===Z?!1:(this.setDom('width',K),this.setDom('height',Q),this.setDom('x',G),this.setDom('y',Z),this.setHandles(),this.updateMask(),!0)}handleMouseMoveImpl(R,U,G){var Q=this.getProp('handles');if(this.moving||this.handleSelected){var J=this.getPosition(0),$=this.getPosition(1),ee=this.getXAxis().isFlipped(),te=this.getYAxis().isFlipped(),re=J.x,ie=J.y,ae=$.x,se=$.y;if(this.moving)J.deltaPosition('x',U,this.getXAxis()),J.deltaPosition('y',G,this.getYAxis()),$.deltaPosition('x',U,this.getXAxis()),$.deltaPosition('y',G,this.getYAxis());else switch(Q.type){case'sides':switch(this.sides[this.handleSelected]){case'left':J.deltaPosition('x',U,this.getXAxis());break;case'right':$.deltaPosition('x',U,this.getXAxis());break;case'top':J.deltaPosition('y',G,this.getYAxis());break;case'bottom':$.deltaPosition('y',G,this.getYAxis());}break;case'corners':default:1==this.handleSelected?(J.deltaPosition('x',U,this.getXAxis()),J.deltaPosition('y',G,this.getYAxis())):2==this.handleSelected?($.deltaPosition('x',U,this.getXAxis()),J.deltaPosition('y',G,this.getYAxis())):3==this.handleSelected?($.deltaPosition('y',G,this.getYAxis()),$.deltaPosition('x',U,this.getXAxis())):4==this.handleSelected&&(J.deltaPosition('x',U,this.getXAxis()),$.deltaPosition('y',G,this.getYAxis()));}return this.redraw(),this.changed(),this.setHandles(),!0}}setHandles(){if(!this.isLocked()&&(this.isSelectable()||this._staticHandles)&&this.handlesInDom){var R=this.computePosition(0),U=this.computePosition(1),G=this.getProp('handles');switch(G.type){case'sides':this.handles.left&&this.handles.left.setAttribute('transform','translate('+this.currentX+' '+(this.currentY+this.currentH/2)+')'),this.handles.right&&this.handles.right.setAttribute('transform','translate( '+(this.currentX+this.currentW)+' '+(this.currentY+this.currentH/2)+')'),this.handles.top&&this.handles.top.setAttribute('transform','translate( '+(this.currentX+this.currentW/2)+' '+this.currentY+')'),this.handles.bottom&&this.handles.bottom.setAttribute('transform','translate( '+(this.currentX+this.currentW/2)+' '+(this.currentY+this.currentH)+')');break;case'corners':default:this.handles[1].setAttribute('x',R.x),this.handles[1].setAttribute('y',R.y),this.handles[2].setAttribute('x',U.x),this.handles[2].setAttribute('y',R.y),this.handles[3].setAttribute('x',U.x),this.handles[3].setAttribute('y',U.y),this.handles[4].setAttribute('x',R.x),this.handles[4].setAttribute('y',U.y);}}}}X.default=V,T.exports=X['default']})},function(u,A,S){var C,P,E;(function(T,X){P=[u,A,S(27)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y){'use strict';Object.defineProperty(X,'__esModule',{value:!0});var B=function(F){return F&&F.__esModule?F:{default:F}}(Y);class O extends B.default{constructor(F,W){super(F,W),this.nbHandles=1}get width(){return this.options.width||10}set width(F=10){this.options.width=F}createDom(){this._dom=document.createElementNS(this.graph.ns,'path'),this._dom.setAttribute('d','M -'+this.width/2+' 0 h '+this.width+' m -'+this.width/2+' -'+this.width/2+' v '+this.width+'')}createHandles(){this._createHandles(this.nbHandles,'rect',{transform:'translate(-3 -3)',width:6,height:6,stroke:'black',fill:'white',cursor:'nwse-resize'})}applyPosition(){var F=this.calculatePosition(0);if(F&&F.x&&F.y)return this.setDom('transform','translate( '+F.x+', '+F.y+')'),this.currentPos1x=F.x,this.currentPos1y=F.y,!0}redrawImpl(){this.setHandles()}handleCreateImpl(){}handleMouseDownImpl(){return this.moving=!0,!0}handleMouseUpImpl(){return this.triggerChange(),!0}handleMouseMoveImpl(F,W,V){if(!this.isLocked()){var G=this.getFromData('pos');return this.moving&&(G.x=this.graph.deltaPosition(G.x,W,this.getXAxis()),G.y=this.graph.deltaPosition(G.y,V,this.getYAxis())),this.redrawImpl(),!0}}createHandles(){this._createHandles(1,'rect',{transform:'translate(-3 -3)',width:6,height:6,stroke:'black',fill:'white',cursor:'nwse-resize'})}setHandles(){!this.areHandlesInDom()||isNaN(this.currentPos1x)||(this.handles[1].setAttribute('x',this.currentPos1x),this.handles[1].setAttribute('y',this.currentPos1y))}selectStyle(){this.setDom('stroke','red'),this.setDom('stroke-width','2')}}X.default=O,T.exports=X['default']})},function(u,A,S){var C,P,E;(function(T,X){P=[u,A,S(32)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y){'use strict';Object.defineProperty(X,'__esModule',{value:!0});var B=function(F){return F&&F.__esModule?F:{default:F}}(Y);class O extends B.default{constructor(F){super(F),this.lineHeight=6}createDom(){this._dom=document.createElementNS(this.graph.ns,'line'),this.line1=document.createElementNS(this.graph.ns,'line'),this.line2=document.createElementNS(this.graph.ns,'line'),this.line3=document.createElementNS(this.graph.ns,'line'),this.rectBoundary=document.createElementNS(this.graph.ns,'path'),this.rectBoundary.setAttribute('fill','transparent'),this.rectBoundary.setAttribute('stroke','none'),this.rectBoundary.setAttribute('pointer-events','fill'),this.rectBoundary.jsGraphIsShape=!0,this.group.appendChild(this.rectBoundary),this.group.appendChild(this.line1),this.group.appendChild(this.line2),this.group.appendChild(this.line3),this._dom.element=this}createHandles(){this._createHandles(3,'rect',{transform:'translate(-3 -3)',width:6,height:6,stroke:'black',fill:'white',cursor:'nwse-resize'})}redrawImpl(){this.line1.setAttribute('stroke',this.getStrokeColor()),this.line2.setAttribute('stroke',this.getStrokeColor()),this.line3.setAttribute('stroke',this.getStrokeColor()),this.line1.setAttribute('stroke-width',this.getStrokeWidth()),this.line2.setAttribute('stroke-width',this.getStrokeWidth()),this.line3.setAttribute('stroke-width',this.getStrokeWidth()),this.setHandles(),this.redrawLines()}redrawLines(){var F=this.computePosition(0),W=this.computePosition(1),V=this.computePosition(2);if(F.x&&W.x&&V.x&&this.posYPx){var R=this.lineHeight;this.rectBoundary.setAttribute('d','M '+F.x+' '+(this.posYPx-R)+' v '+2*R+' H '+W.x+' v '+-2*R+'z'),this.line1.setAttribute('x1',F.x),this.line1.setAttribute('x2',F.x),this.line2.setAttribute('x1',W.x),this.line2.setAttribute('x2',W.x),this.line3.setAttribute('x1',V.x),this.line3.setAttribute('x2',V.x),this._dom.setAttribute('x1',F.x),this._dom.setAttribute('x2',W.x),this.redrawY(R)}return this}redrawY(){if(!this.posYPx)return this;var F=this.lineHeight;return this.line1.setAttribute('y1',this.posYPx-F),this.line1.setAttribute('y2',this.posYPx+F),this.line2.setAttribute('y1',this.posYPx-F),this.line2.setAttribute('y2',this.posYPx+F),this.line3.setAttribute('y1',this.posYPx-F),this.line3.setAttribute('y2',this.posYPx+F),this._dom.setAttribute('y1',this.posYPx),this._dom.setAttribute('y2',this.posYPx),this}setHandles(){if(this.posYPx){var F=this.computePosition(0),W=this.computePosition(1),V=this.computePosition(2);F.x&&W.x&&V.x&&(this.handles[1].setAttribute('x',F.x),this.handles[1].setAttribute('y',this.posYPx),this.handles[2].setAttribute('x',W.x),this.handles[2].setAttribute('y',this.posYPx),this.handles[3].setAttribute('x',V.x),this.handles[3].setAttribute('y',this.posYPx))}}setY(F){return this.posYPx=F,this}setLineHeight(F){this.lineHeihgt=F}handleMouseMoveImpl(F,W){if(!this.isLocked()){var R=this.getPosition(0),U=this.getPosition(1),G=this.getPosition(2);switch(this.handleSelected){case 1:R.deltaPosition('x',W,this.getXAxis()),(Math.abs(G.x-U.x)>Math.abs(U.x-R.x)||Math.abs(G.x-R.x)>Math.abs(U.x-R.x))&&(G.x=R.x+0.1*(U.x-R.x));break;case 2:U.deltaPosition('x',W,this.getXAxis()),(Math.abs(G.x-U.x)>Math.abs(U.x-R.x)||Math.abs(G.x-R.x)>Math.abs(U.x-R.x))&&(G.x=U.x+0.1*(R.x-U.x));break;case 3:if(G.deltaPosition('x',W,this.getXAxis()),Math.abs(G.x-U.x)>Math.abs(U.x-R.x)||Math.abs(G.x-R.x)>Math.abs(U.x-R.x))return;}this.setLabelPosition({y:this.getLabelPosition(0).y,x:G.x}),this.updateLabels(),this.redrawLines(),this.setHandles()}}applyPosition(){return this.redrawLines(),!0}}X.default=O,T.exports=X['default']})},function(u,A,S){var C,P,E;(function(T,X){P=[u,A,S(3),S(27)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y,I){'use strict';Object.defineProperty(X,'__esModule',{value:!0});var O=function(W){return W&&W.__esModule?W:{default:W}}(I);class F extends O.default{constructor(W,V){super(W,V)}createDom(){this._dom=document.createElement('div'),this._dom.setAttribute('style','position: absolute');let W=document.createElement('div');this._dom.appendChild(W),this.div=W}createHandles(){}setHeight(W){this.setProp('height',W)}setWidth(W){this.setProp('width',W)}setContent(W){this.setProp('content',W)}setRenderer(W){this._renderer=W}redraw(){this._renderer?this._renderer(this.div):this.div.innerHTML=this.getProp('content'),super.redraw(...arguments)}applyPosition(){var W=this.calculatePosition(0);if(W&&(0,Y.isNumeric)(W.x)&&(0,Y.isNumeric)(W.y))return this._dom.style.left=W.x+'px',this._dom.style.top=W.y+'px',this.currentPosX=W.x,this.currentPosY=W.y,!0}handleMouseMoveImpl(){return!0}setHandles(){this.areHandlesInDom()&&isNaN(this.currentPos1x)}isHTML(){return!0}}X.default=F,T.exports=X['default']})},function(u,A,S){var C,P,E;(function(T,X){P=[u,A,S(4)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y){'use strict';Object.defineProperty(X,'__esModule',{value:!0});var B=function(F){return F&&F.__esModule?F:{default:F}}(Y);class O extends B.default{static defaults(){return{}}constructor(F){super(...arguments),this.options=F}init(F){this.graph=F}onMouseDown(){}onMouseUp(){}onMouseMove(){}}X.default=O,T.exports=X['default']})},function(u,A,S){var C,P,E;(function(T,X){P=[u,A,S(39)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y){'use strict';Object.defineProperty(X,'__esModule',{value:!0});var B=function(F){return F&&F.__esModule?F:{default:F}}(Y);class O extends B.default{static defaults(){return{dragX:!0,dragY:!0,persistanceX:!1,persistanceY:!1}}init(F){this.graph=F,this.time=null,this.totaltime=2e3}onMouseDown(F,W,V){return this._draggingX=W,this._draggingY=V,this._lastDraggingX=this._draggingX,this._lastDraggingY=this._draggingY,this.stopAnimation=!0,this.moved=!1,!0}onMouseMove(F,W,V){var G=W-this._draggingX,Z=V-this._draggingY;this.options.dragX&&F._applyToAxes(function(K){K.setCurrentMin(K.getVal(K.getMinPx()-G)),K.setCurrentMax(K.getVal(K.getMaxPx()-G))},!1,!0,!1),this.options.dragY&&F._applyToAxes(function(K){K.setCurrentMin(K.getVal(K.getMinPx()-Z)),K.setCurrentMax(K.getVal(K.getMaxPx()-Z))},!1,!1,!0),this._lastDraggingX=this._draggingX,this._lastDraggingY=this._draggingY,this._draggingX=W,this._draggingY=V,this.moved=!0,this.time=Date.now(),this.emit('dragging'),F.draw(!0)}onMouseUp(F,W,V){var G=Date.now()-this.time;return W==this._lastDraggingX||V==this._lastDraggingY?void(this.moved&&this.emit('dragged')):(this.speedX=(W-this._lastDraggingX)/G,this.speedY=(V-this._lastDraggingY)/G,isNaN(this.speedX)||isNaN(this.speedY)?void this.emit('dragged'):void(F._applyToAxes(function(Z){Z._pluginDragMin=Z.getCurrentMin(),Z._pluginDragMax=Z.getCurrentMax()},!1,!0,!0),this.stopAnimation=!1,this.accelerationX=-this.speedX/this.totaltime,this.accelerationY=-this.speedY/this.totaltime,this.options.persistanceX||this.options.persistanceY?this._persistanceMove(F):this.emit('dragged')))}_persistanceMove(F){var W=this;return W.stopAnimation?void W.emit('dragged'):void window.requestAnimationFrame(function(){var V=Date.now()-W.time,R=(0.5*W.accelerationX*V+W.speedX)*V,U=(0.5*W.accelerationY*V+W.speedY)*V;W.options.persistanceX&&F._applyToAxes(function(G){G.setCurrentMin(-G.getRelVal(R)+G._pluginDragMin),G.setCurrentMax(-G.getRelVal(R)+G._pluginDragMax),G.cacheCurrentMin(),G.cacheCurrentMax(),G.cacheInterval()},!1,!0,!1),W.options.persistanceY&&F._applyToAxes(function(G){G.setCurrentMin(-G.getRelVal(U)+G._pluginDragMin),G.setCurrentMax(-G.getRelVal(U)+G._pluginDragMax),G.cacheCurrentMin(),G.cacheCurrentMax(),G.cacheInterval()},!1,!1,!0),F.draw(),V<W.totaltime?(W.emit('dragging'),W._persistanceMove(F)):W.emit('dragged')})}}X.default=O,T.exports=X['default']})},function(u,A,S){var C,P,E;(function(T,X){P=[u,A,S(39),S(3)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y,I){'use strict';Object.defineProperty(X,'__esModule',{value:!0});var F=function(R){return R&&R.__esModule?R:{default:R}}(Y),W=function(R){if(R&&R.__esModule)return R;var U={};if(null!=R)for(var G in R)Object.prototype.hasOwnProperty.call(R,G)&&(U[G]=R[G]);return U.default=R,U}(I);class V extends F.default{constructor(){super(...arguments)}init(R,U){super.init(R,U),this.shapeType=U.type}setShape(R){this.shapeInfo.shapeType=R}onMouseDown(R,U,G,Z){if(this.shapeType||this.options.url){console.log('down');var Q=this,J=this,$,ee;this.count=this.count||0,U-=R.getPaddingLeft(),G-=R.getPaddingTop(),$=R.getXAxis().getVal(U),ee=R.getYAxis().getVal(G);var te={position:[{x:$,y:ee},{x:$,y:ee}],onChange:function(ae){R.triggerEvent('onAnnotationChange',ae)},locked:!1,selectable:!0,resizable:!0,movable:!0};let re=this.options.properties;if(W.extend(!0,te,this.options),this.emit('beforeNewShape',Z,te),!this.graph.prevent(!1)){var ie=R.newShape(te.type,te,!1,re);this.emit('createdShape',Z,ie),ie&&(Q.currentShape=ie,Q.currentShapeEvent=Z),R.once('mouseUp',()=>{console.log(this.currentShape),this.currentShape||Q.emit('newShape',Z,ie)})}}}onMouseMove(R,U,G,Z){if(this.currentShape){console.log('mv'),this.count++;var K=this.currentShape;this.currentShape=!1,R.selectedSerie&&!K.serie&&K.setSerie(R.selectedSerie),K.resizing=!0,K.options&&K.options.onCreate&&K.options.onCreate.call(K),K.draw(),R.selectShape(K),K.handleMouseDown(this.currentShapeEvent,!0),K.handleSelected=this.options.handleSelected||1,K.handleMouseMove(Z,!0)}}onMouseUp(){this.currentShape&&(this.currentShape.kill(),this.currentShape=!1)}}X.default=V,T.exports=X['default']})},function(u,A,S){var C,P,E;(function(T,X){P=[u,A,S(3),S(39)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y,I){'use strict';Object.defineProperty(X,'__esModule',{value:!0});var F=function(R){if(R&&R.__esModule)return R;var U={};if(null!=R)for(var G in R)Object.prototype.hasOwnProperty.call(R,G)&&(U[G]=R[G]);return U.default=R,U}(Y),W=function(R){return R&&R.__esModule?R:{default:R}}(I);class V extends W.default{constructor(){super(...arguments)}init(R){this._path=document.createElementNS(R.ns,'path'),F.setAttributeTo(this._path,{display:'none',fill:'rgba(0,0,0,0.1)',stroke:'rgba(0,0,0,1)','shape-rendering':'crispEdges',x:0,y:0,height:0,width:0,d:''}),this.graph=R,R.dom.appendChild(this._path)}setSerie(R){this.serie=R}onMouseDown(R,U,G){this.serie&&(this.path='M '+U+' '+G+' ',this.currentX=U,this.currentY=G,this.xs=[this.serie.getXAxis().getVal(U-R.getPaddingLeft())],this.ys=[this.serie.getYAxis().getVal(G-R.getPaddingTop())],this._path.setAttribute('d',''),this._path.setAttribute('display','block'))}onMouseMove(R,U,G){25<Math.pow(U-this.currentX,2)+Math.pow(G-this.currentY,2)&&(this.path+=' L '+U+' '+G+' ',this.currentX=U,this.currentY=G,this.xs.push(this.serie.getXAxis().getVal(U-R.getPaddingLeft())),this.ys.push(this.serie.getYAxis().getVal(G-R.getPaddingTop())),this._path.setAttribute('d',this.path+' z'),this.findPoints())}findPoints(){for(var R=this.serie.waveform,U=[],G=0,K=0,Q=R.getLength(),Z;K<Q;K+=1){G=0;for(var J=0,$=this.xs.length;J<$;J+=1)Z=J==$-1?0:J+1,(this.ys[J]<R.getY(K)&&this.ys[Z]>R.getY(K)||this.ys[J]>R.getY(K)&&this.ys[Z]<R.getY(K))&&R.getX(K)>(R.getY(K)-this.ys[J])/(this.ys[Z]-this.ys[J])*(this.xs[Z]-this.xs[J])+this.xs[J]&&G++;1==G%2?(U.push(K),this.serie.selectPoint(K,!0,'selected')):this.serie.unselectPoint(K)}this.selected=U,this.emit('selectionProcess',U)}onMouseUp(){this._path.setAttribute('display','none'),this.emit('selectionEnd',this.selected)}}X.default=V,T.exports=X['default']})},function(u,A,S){var C,P,E;(function(T,X){P=[u,A,S(3),S(39)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y,I){'use strict';Object.defineProperty(X,'__esModule',{value:!0});var F=function(R){if(R&&R.__esModule)return R;var U={};if(null!=R)for(var G in R)Object.prototype.hasOwnProperty.call(R,G)&&(U[G]=R[G]);return U.default=R,U}(Y),W=function(R){return R&&R.__esModule?R:{default:R}}(I);class V extends W.default{constructor(){super(...arguments)}static defaults(){return{axes:'all'}}init(R){this._zoomingGroup=document.createElementNS(R.ns,'g'),this._zoomingSquare=document.createElementNS(R.ns,'rect'),this._zoomingSquare.setAttribute('display','none'),F.setAttributeTo(this._zoomingSquare,{display:'none',fill:'rgba(171,12,12,0.2)',stroke:'rgba(171,12,12,1)','shape-rendering':'crispEdges',x:0,y:0,height:0,width:0,'pointer-events':'none'}),this.graph=R,R.groupEvent.appendChild(this._zoomingGroup),this._zoomingGroup.appendChild(this._zoomingSquare)}onMouseDown(R,U,G,Z,K){var Q=this.options.zoomMode;if(Q){switch(this._zoomingMode=Q,void 0===U&&(this._backedUpZoomMode=this._zoomingMode,this._zoomingMode='y',U=0),void 0===G&&(this._backedUpZoomMode=this._zoomingMode,this._zoomingMode='x',G=0),this._zoomingXStart=U,this._zoomingYStart=G,this.x1=U-R.getPaddingLeft(),this.y1=G-R.getPaddingTop(),this._zoomingSquare.setAttribute('width',0),this._zoomingSquare.setAttribute('height',0),this._zoomingSquare.setAttribute('display','block'),this._zoomingMode){case'x':this._zoomingSquare.setAttribute('y',R.options.paddingTop),this._zoomingSquare.setAttribute('height',R.getDrawingHeight()-R.shift.bottom);break;case'y':this._zoomingSquare.setAttribute('x',R.options.paddingLeft),this._zoomingSquare.setAttribute('width',R.getDrawingWidth());break;case'forceY2':this.y2=R.getYAxis().getPx(this.options.forcedY)+R.options.paddingTop;}this.options.onZoomStart&&!K&&this.options.onZoomStart(R,U,G,Z,K)}}onMouseMove(R,U,G,Z,K){switch(this._zoomingMode){case'xy':this._zoomingSquare.setAttribute('x',Math.min(this._zoomingXStart,U)),this._zoomingSquare.setAttribute('y',Math.min(this._zoomingYStart,G)),this._zoomingSquare.setAttribute('width',Math.abs(this._zoomingXStart-U)),this._zoomingSquare.setAttribute('height',Math.abs(this._zoomingYStart-G));break;case'forceY2':this._zoomingSquare.setAttribute('y',Math.min(this._zoomingYStart,this.y2)),this._zoomingSquare.setAttribute('height',Math.abs(this._zoomingYStart-this.y2)),this._zoomingSquare.setAttribute('x',Math.min(this._zoomingXStart,U)),this._zoomingSquare.setAttribute('width',Math.abs(this._zoomingXStart-U));break;case'x':this._zoomingSquare.setAttribute('x',Math.min(this._zoomingXStart,U)),this._zoomingSquare.setAttribute('width',Math.abs(this._zoomingXStart-U));break;case'y':this._zoomingSquare.setAttribute('y',Math.min(this._zoomingYStart,G)),this._zoomingSquare.setAttribute('height',Math.abs(this._zoomingYStart-G));}this.options.onZoomMove&&!K&&this.options.onZoomMove(R,U,G,Z,K)}onMouseUp(R,U,G,Z,K){var Q=this;this.removeZone();var J=U-R.options.paddingLeft,$=G-R.options.paddingTop;if((this.emit('beforeZoom',{graph:R,x:U,y:G,e:Z,mute:K}),!R.prevent(!1))&&(0!=U-this._zoomingXStart||'y'==this._zoomingMode)&&(0!=G-this._zoomingYStart||'x'==this._zoomingMode))if(this.options.transition||this.options.smooth){let ee=!1,te=!1;('x'==this._zoomingMode||'xy'==this._zoomingMode||'forceY2'==this._zoomingMode)&&(this.fullX=!1,this.toAxes(function(re){re._pluginZoomMin=re.getCurrentMin(),re._pluginZoomMax=re.getCurrentMax(),re._pluginZoomMinFinal=Math.min(re.getVal(J),re.getVal(Q.x1)),re._pluginZoomMaxFinal=Math.max(re.getVal(J),re.getVal(Q.x1))},!1,!0,!1),ee=!0),('y'==this._zoomingMode||'xy'==this._zoomingMode)&&(this.fullY=!1,this.toAxes(function(re){re._pluginZoomMin=re.getCurrentMin(),re._pluginZoomMax=re.getCurrentMax(),re._pluginZoomMinFinal=Math.min(re.getVal($),re.getVal(Q.y1)),re._pluginZoomMaxFinal=Math.max(re.getVal($),re.getVal(Q.y1))},!1,!1,!0),te=!0),'forceY2'==this._zoomingMode&&(this.fullY=!1,this.toAxes(function(re){re._pluginZoomMin=re.getCurrentMin(),re._pluginZoomMax=re.getCurrentMax(),re._pluginZoomMinFinal=Math.min(re.getVal(Q.y2),re.getVal(Q.y1)),re._pluginZoomMaxFinal=Math.max(re.getVal(Q.y2),re.getVal(Q.y1))},!1,!1,!0),te=!0),this.transition(ee,te,'zoomEnd')}else{switch(this._zoomingMode){case'x':this.fullX=!1,this.toAxes('_doZoom',[J,this.x1],!0,!1);break;case'y':this.fullY=!1,this.toAxes('_doZoom',[$,this.y1],!1,!0);break;case'xy':this.fullX=!1,this.fullY=!1,this.toAxes('_doZoom',[J,this.x1],!0,!1),this.toAxes('_doZoom',[$,this.y1],!1,!0);break;case'forceY2':this.fullX=!1,this.fullY=!1,this.toAxes('_doZoom',[J,this.x1],!0,!1),this.toAxes('_doZoom',[this.y1,this.y2],!1,!0);}R.draw(),this._backedUpZoomMode&&(this._zoomingMode=this._backedUpZoomMode),this.emit('zoomed'),R.pluginYieldActiveState()}}removeZone(){this._zoomingSquare.setAttribute('display','none')}onMouseWheel(R,U,G){G||(G={}),G.baseline||(G.baseline=0);var Z='x'==G.direction,K='y'===G.direction;this.toAxes('handleMouseWheel',[R,U,G.baseline],Z,K),this.graph.drawSeries()}onDblClick(R,U,G,Z,K){var Q=this.graph;if(this.emit('beforeDblClick',{graph:Q,x:R,y:U,pref:Z,e:G,mute:K}),!Q.prevent(!1)){if(this.options.transition||this.options.smooth){var J=!1,$=!1;if(('xtotal'==Z.mode||'total'==Z.mode)&&(this.toAxes(function(ge){ge._pluginZoomMin=ge.getCurrentMin(),ge._pluginZoomMax=ge.getCurrentMax(),ge._pluginZoomMinFinal=ge.getMinValue()-ge.options.axisDataSpacing.min*ge.getInterval(),ge._pluginZoomMaxFinal=ge.getMaxValue()+ge.options.axisDataSpacing.max*ge.getInterval()},!1,!0,!1),J=!0),('ytotal'==Z.mode||'total'==Z.mode)&&(this.toAxes(function(ge){ge._pluginZoomMin=ge.getCurrentMin(),ge._pluginZoomMax=ge.getCurrentMax(),ge._pluginZoomMinFinal=ge.getMinValue()-ge.options.axisDataSpacing.min*ge.getInterval(),ge._pluginZoomMaxFinal=ge.getMaxValue()+ge.options.axisDataSpacing.max*ge.getInterval()},!1,!1,!0),$=!0),'gradualX'==Z.mode||'gradualY'==Z.mode||'gradual'==Z.mode||'gradualXY'==Z.mode){var R=!1,U=!1;('gradualX'==Z.mode||'gradual'==Z.mode||'gradualXY'==Z.mode)&&(R=!0,J=!0),('gradualY'==Z.mode||'gradual'==Z.mode||'gradualXY'==Z.mode)&&(U=!0,$=!0),this.toAxes(function(ge){ge._pluginZoomMin=ge.getCurrentMin(),ge._pluginZoomMax=ge.getCurrentMax(),ge._pluginZoomMinFinal=ge.getCurrentMin()-(ge.getCurrentMax()-ge.getCurrentMin()),ge._pluginZoomMaxFinal=ge.getCurrentMax()+(ge.getCurrentMax()-ge.getCurrentMin())},!1,R,U)}return void this.transition(J,$,'dblClick')}var ee=this.graph.getXAxis(),te=this.graph.getYAxis();if('xtotal'==Z.mode)this.toAxes('setMinMaxToFitSeries',null,!0,!1),this.fullX=!0,this.fullY=!1;else if('ytotal'==Z.mode)this.toAxes('setMinMaxToFitSeries',null,!1,!0),this.fullX=!1,this.fullY=!0;else if('total'==Z.mode)this.toAxes('setMinMaxToFitSeries',null,!0,!0),this.fullX=!0,this.fullY=!0;else{R-=this.graph.options.paddingLeft,U-=this.graph.options.paddingTop;var re=ee.getCurrentMin(),ie=ee.getCurrentMax(),ae=ee.getVal(R),se=ie-re,ne=te.getCurrentMin(),oe=te.getCurrentMax(),le=te.getVal(U),pe=oe-ne;if('gradualXY'==Z.mode||'gradualX'==Z.mode){var de=(ae-re)/(ie-re);re=Math.max(ee.getMinValue(),re-se*de),ie=Math.min(ee.getMaxValue(),ie+se*(1-de)),ee.setCurrentMin(re),ee.setCurrentMax(ie),ee.options.onZoom&&ee.options.onZoom(re,ie),ee.cacheCurrentMin(),ee.cacheCurrentMax(),ee.cacheInterval()}if('gradualXY'==Z.mode||'gradualY'==Z.mode){var de=(le-ne)/(oe-ne);ne=Math.max(te.getMinValue(),ne-pe*de),oe=Math.min(te.getMaxValue(),oe+pe*(1-de)),te.setCurrentMin(ne),te.setCurrentMax(oe),te.options.onZoom&&te.options.onZoom(ne,oe),te.cacheCurrentMin(),te.cacheCurrentMax(),te.cacheInterval()}}Q.pluginYieldActiveState(),this.graph.draw()}}transition(R,U,G){var Z=this,K=500;Z.gradualUnzoomStart||(Z.gradualUnzoomStart=Date.now()),window.requestAnimationFrame(function(){var Q=Date.now()-Z.gradualUnzoomStart;Q>K&&(Q=K);var J=Math.sin(Q/K*Math.PI/2);Z.toAxes(function($){$.setCurrentMin($._pluginZoomMin+($._pluginZoomMinFinal-$._pluginZoomMin)*J),$.setCurrentMax($._pluginZoomMax+($._pluginZoomMaxFinal-$._pluginZoomMax)*J),$.cacheCurrentMin(),$.cacheCurrentMax(),$.cacheInterval()},!1,R,U),Z.graph.draw(),Q<K?(Z.transition(R,U,G),Z.emit('zooming')):(Z.emit('zoomed'),Z.graph.pluginYieldActiveState(),G&&Z.emit(G),Z.gradualUnzoomStart=0)})}isFullX(){return this.fullX}isFullY(){return this.fullY}toAxes(R,U,G,Z){var K=this.options.axes;switch(K&&('serieSelected'!=K||this.graph.getSelectedSerie())||(K='all'),K){case'all':this.graph._applyToAxes.apply(this.graph,arguments);break;case'serieSelected':var Q=this.graph.getSelectedSerie();Q&&(G&&('string'==typeof R?Q.getXAxis()[R].apply(Q.getXAxis(),U):R.apply(Q.getXAxis(),U)),Z&&('string'==typeof R?Q.getYAxis()[R].apply(Q.getYAxis(),U):R.apply(Q.getYAxis(),U)));break;default:Array.isArray(K)||(K=[K]);for(let J of K)J.isX()&&G?'string'==typeof R?J[R].apply(J,U):R.apply(J,U):J.isY()&&Z&&('string'==typeof R?J[R].apply(J,U):R.apply(J,U));}}}X.default=V,T.exports=X['default']})},function(u,A,S){var C,P,E;(function(T,X){P=[u,A,S(1),S(45),S(39),S(3)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y,I,B,O){'use strict';function W(K){return K&&K.__esModule?K:{default:K}}Object.defineProperty(X,'__esModule',{value:!0});var V=W(Y),R=W(I),U=W(B),G=function(K){if(K&&K.__esModule)return K;var Q={};if(null!=K)for(var J in K)Object.prototype.hasOwnProperty.call(K,J)&&(Q[J]=K[J]);return Q.default=K,Q}(O);class Z extends U.default{constructor(){super(...arguments),this.series=[],this.plugins=[],this.currentSlots={},this.requestLevels=new Map,this.update=(K,Q)=>{this.series.forEach(function(J){this.updateSerie(J,K)}),K||this.recalculateSeries(Q)}}static defaults(){return{LRUName:'PluginTimeSerieManager',intervals:[1000,15000,60000,900000,3600000,8640000],maxParallelRequests:3,optimalPxPerPoint:2,nbPoints:1e3,url:''}}init(K){this.graph=K,R.default.create(this.options.LRUName,200),this.requestsRunning=0}setURL(K){return this.options.url=K,this}setAvailableIntervals(){this.options.intervals=arguments}newSerie(K,Q,J,$,ee){var te=this.graph.newSerie(K,Q,J);return this.currentSlots[K]={min:0,max:0,interval:0},te.on('hide',function(){te._zoneSerie&&te._zoneSerie.hide()}),te.on('show',function(){te._zoneSerie&&te._zoneSerie.show()}),te.setInfo('timeSerieManagerDBElements',$),ee||(te._zoneSerie=this.graph.newSerie(K+'_zone',{},V.default.SERIE_ZONE)),this.series.push(te),te}registerPlugin(K){var J;if(-1<(J=this.plugins.indexOf(K)))for(var $=1;$<arguments.length;$++)K.removeListener(arguments[$],this.update);for(var $=1;$<arguments.length;$++)K.on(arguments[$],this.update)}updateSerie(K,Q){var J=this,$=K.getXAxis().getCurrentMin(),ee=K.getXAxis().getCurrentMax(),re=this.getOptimalInterval(ee-$),ie=this.options.intervals.indexOf(re),ae;this.cleanRegister(ie);for(var se=ie;se<=ie+1;se++){ae=this.options.intervals[se];var ne=J.computeSlotID($,ae),oe=J.computeSlotID(ee,ae);[[2,5,6],[1,2,4],[0,1,3]].forEach(function(pe){for(var de=ne-pe[0]*(oe-ne),ge=oe+pe[0]*(oe-ne),ue=de;ue<=ge&&!(J.computeTimeMin(ue,ae)>Date.now());)J.register(K,ue,ae,ae==re?pe[1]:pe[2],!0,Q),ue++})}this.processRequests()}cleanRegister(K){this.requestLevels&&this.requestLevels.forEach(Q=>{Q.forEach((J,$)=>{J[4]<K&&Q.splice($,1)})})}register(K,Q,J,$,ee,te){var re=this.computeUniqueID(K,Q,J),ie=R.default.get(this.options.LRUName,re);(!ie||this.computeTimeMax(Q,J)>Date.now()&&ie.timeout<Date.now()-(te?5e3:1e5)&&1==$)&&this.request(K,Q,J,$,re,ee)}request(K,Q,J,$,ee,te){for(var re in this.requestLevels)re!=$&&this.requestLevels[re][ee]&&(1===this.requestLevels[re][ee][0]?this.requestLevels[re][ee][5]=$:delete this.requestLevels[re][ee]);this.requestLevels[$]&&this.requestLevels[$][ee]||(this.requestLevels[$]=this.requestLevels[$]||{},this.requestLevels[$][ee]=[0,ee,K.getName(),Q,J,$,K.getInfo('timeSerieManagerDBElements')],!te&&this.processRequests())}processRequests(){if(!(this.requestsRunning>=this.options.maxParallelRequests)){for(var K=this,Q=1,J;;){for(var $ in this.requestLevels[Q])if(1!=this.requestLevels[Q][$][0]){J=this.requestLevels[Q][$];break}if(J)break;if(Q++,10<Q)return}this.requestsRunning++,J&&(J[0]=1,G.ajaxGet({url:this.getURL(J),method:'GET',json:!0}).done(function(ee){1==ee.status&&(K.requestsRunning--,delete K.requestLevels[Q][$],R.default.store(K.options.LRUName,J[1],ee.data),K.processRequests(),1==J[5]&&0==Object.keys(K.requestLevels[1]).length&&K.recalculateSeries(!0))}))}}computeTimeMax(K,Q){return(K+1)*(Q*this.options.nbPoints)}computeTimeMin(K,Q){return K*(Q*this.options.nbPoints)}getURL(K){var Q=this.options.url.replace('<measurementid>',K[2]).replace('<from>',this.computeTimeMin(K[3],K[4])).replace('<to>',this.computeTimeMax(K[3],K[4])).replace('<interval>',K[4]),J=K[6]||{};for(var $ in J)Q=Q.replace('<'+$+'>',J[$]);return Q}getOptimalInterval(K){var Q=(this.options.optimalPxPerPoint||1)*K/this.graph.getDrawingWidth(),J=1/0,$;return this.options.intervals.forEach(function(ee){var te=Math.min(J,Math.abs(ee-Q));J!==te&&($=ee,J=te)}),$||1e3}computeUniqueID(K,Q,J){var $='',ee=K.getInfo('timeSerieManagerDBElements');for(var te in ee)$+=';'+te+':'+ee[te];return K.getName()+';'+Q+';'+J+$}computeSlotID(K,Q){return Math.floor(K/(Q*this.options.nbPoints))}computeSlotTime(K,Q){return K*(Q*this.options.nbPoints)}getZoneSerie(K){return K._zoneSerie}updateZoneSerie(K){var Q=this.graph.getSerie(K);Q&&Q._zoneSerie&&(Q._zoneSerie.setXAxis(Q.getXAxis()),Q._zoneSerie.setYAxis(Q.getYAxis()),Q._zoneSerie.setFillColor(Q.getLineColor()),Q._zoneSerie.setLineColor(Q.getLineColor()),Q._zoneSerie.setFillOpacity(0.2),Q._zoneSerie.setLineOpacity(0.3))}recalculateSeries(K){var Q=this;this.locked||(this.changed=!1,this.series.map(function(J){Q.recalculateSerie(J,K)}),this.changed=!1,Q.graph.draw())}recalculateSerie(K,Q){var J=K.getXAxis().getCurrentMin(),$=K.getXAxis().getCurrentMax(),ee=this.getOptimalInterval($-J),te=this.computeSlotID(J,ee),re=this.computeSlotID($,ee),ie=[],ae=[];if(!(!Q&&ee==this.currentSlots[K.getName()].interval&&this.currentSlots[K.getName()].min<=te&&this.currentSlots[K.getName()].max>=re)){te-=2,re+=2,this.currentSlots[K.getName()].min=te,this.currentSlots[K.getName()].max=re,this.currentSlots[K.getName()].interval=ee;for(var se=te;se<=re;){const ne=R.default.get(this.options.LRUName,this.computeUniqueID(K,se,ee));ne?(ie=ie.concat(ne.data.mean),ae=ae.concat(ne.data.minmax)):this.recalculateSerieUpwards(K,se,ee,ie,ae),se++}this.changed=!0,K.setData(ie),K._zoneSerie&&K._zoneSerie.setData(ae)}}setIntervalCheck(K){this.interval&&clearInterval(this.interval),this.update(!0,!0),this.interval=setInterval(()=>{this.update(!0,!1)},K)}recalculateSerieUpwards(K,Q,J,$,ee){var te=this.options.intervals.slice(0);te.sort();var re=te[te.indexOf(J)+1]||-1;if(0>re)return[];var ie=this.computeSlotTime(Q,J),ae=this.computeSlotTime(Q+1,J),se=this.computeSlotID(ie,re),ne=!1;const oe=R.default.get(this.options.LRUName,this.computeUniqueID(K,se,re));if(oe)for(var le=0,pe=oe.data.mean.length;le<pe;le+=2){if(oe.data.mean[le]<ie)continue;else!1==ne&&(ne=le);if(oe.data.mean[le]>=ae)return $=$.concat(oe.data.mean.slice(ne,le)),void(ee=$.concat(oe.data.minmax.slice(ne,le)))}return this.recalculateSerieUpwards(K,se,re,$,ee)}lockRedraw(){this.locked=!0}unlockRedraw(){this.locked=!1}isRedrawLocked(){return!!this.locked}}X.default=Z,T.exports=X['default']})},function(u,A){var C,P,E;(function(T,X){P=[A],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T){'use strict';function X(K,Q){Q=Q||50,R[K]||(R[K]={},G[K]=0),Z[K]=Q}function Y(K,Q){var J,$;if(R[K]&&R[K][Q])return $=U[K],J=R[K][Q],J.prev=$,J.next=$.next,$.next.prev=J,$.next=J,U[K]=J,J.data}function I(K,Q,J){var $,ee,te;if(R[K]&&void 0!==G[K]&&Z[K])return te=U[K],R[K][Q]?(Y(K,Q),R[K][Q].data.data=J,R[K][Q].data.timeout=Date.now()):($={data:{data:J,timeout:Date.now()}},'undefined'==typeof te?($.prev=$,$.next=$):($.prev=te.prev,$.next=te.next,te.next.prev=$,te.next=$),U[K]=$,R[K][Q]=$,G[K]++),G[K]>Z[K]&&te&&(ee=te.next,te.next.next.prev=te,te.next=te.next.next,ee.next.next=void 0,ee.next.prev=void 0,G[K]--),J}function O(K,Q){var J;if((J=Y(K,Q))!=void 0)return J}Object.defineProperty(T,'__esModule',{value:!0}),T.create=function(K,Q){X(K,Q)},T.get=O,T.store=function(K,Q,J){return I(K,Q,J),J},T.empty=function(K){emptyMemory(K)},T.exist=function(K){return R[K]};var R={},U={},G={},Z={};T.default=O})},function(u,A,S){var C,P,E;(function(T,X){P=[u,A,S(39)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y){'use strict';Object.defineProperty(X,'__esModule',{value:!0});var B=function(F){return F&&F.__esModule?F:{default:F}}(Y);class O extends B.default{constructor(){super(...arguments)}static defaults(){return{positiveStyle:{fillColor:'green',fillOpacity:0.2,strokeWidth:0},negativeStyle:{fillColor:'red',fillOpacity:0.2,strokeWidth:0},from:0,to:0}}init(F){this.graph=F,this.pathsPositive=[],this.pathsNegative=[],this.positivePolyline=this.graph.newShape('polyline').draw(),this.positivePolyline.setFillColor(this.options.positiveStyle.fillColor).setFillOpacity(this.options.positiveStyle.fillOpacity).setStrokeWidth(this.options.positiveStyle.strokeWidth).applyStyle(),this.negativePolyline=this.graph.newShape('polyline').draw(),this.negativePolyline.setFillColor(this.options.negativeStyle.fillColor).setFillOpacity(this.options.negativeStyle.fillOpacity).setStrokeWidth(this.options.negativeStyle.strokeWidth).applyStyle()}setSeries(F,W){this.serie1=F,this.serie2=W}setBoundaries(F,W){this.options.from=F,this.options.to=W}getFrom(){return this.options.from}getTo(){return this.options.to}draw(){function F(){!0===ae?V.pathsPositive.push([ee,te]):!1==ae&&V.pathsNegative.push([ee,te]),ee=[],te=[],ae=void 0}function W(oe,le){for(var pe=0;pe<le[0].length;pe+=2)0==pe&&(oe+='M '),oe+=' '+Math.round(V.serie1.getXAxis().getPx(le[0][pe]))+', '+Math.round(V.serie1.getYAxis().getPx(le[0][pe+1])),pe<le[0].length-2&&(oe+=' L ');for(var pe=le[1].length-2;0<=pe;pe-=2)oe+=' L '+Math.round(V.serie2.getXAxis().getPx(le[1][pe]))+', '+Math.round(V.serie2.getYAxis().getPx(le[1][pe+1])),0==pe&&(oe+=' z ');return oe}var V=this,R=this.serie1.searchClosestValue(this.getFrom()),U,G,Z,K,Q,J,$,ee=[],te=[],re;R?(U=R.dataIndex,G=2*R.xAfterIndex):(U=0,G=0),Q=this.interpolate(this.serie1,this.getFrom()),ee.push(this.getFrom()),ee.push(Q),Q=this.interpolate(this.serie2,this.getFrom()),te.push(this.getFrom()),te.push(Q);for(var ie,ae,se;U<this.serie1.data.length;U++){for(;G<this.serie1.data[U].length;G+=2){if(this.serie1.data[U][G]>this.getTo()){Q=this.interpolate(this.serie1,this.getTo()),J=this.interpolate(this.serie2,this.getTo()),$=this.computeCrossing(ee[ee.length-2],ee[ee.length-1],this.getTo(),Q,te[te.length-2],te[te.length-1],this.getTo(),J),$&&(ee.push($.x),ee.push($.y),te.push($.x),te.push($.y),F(),ee.push($.x),ee.push($.y),te.push($.x),te.push($.y),ae=this.serie1.data[U][G+1]>this.serie2.data[Z][K+1]),ee.push(this.getTo()),ee.push(Q),te.push(this.getTo()),te.push(J),se=!0;break}if(!ie)if(ie=this.serie2.searchClosestValue(this.serie1.data[U][G]),ie)Z=ie.dataIndex,K=2*ie.xBeforeIndex,Q=this.interpolate(this.serie2,this.serie1.data[U][G]),ee.push(this.serie1.data[U][G]),ee.push(this.serie1.data[U][G+1]),te.push(this.serie1.data[U][G]),te.push(Q),ae=this.serie1.data[U][G+1]>Q;else continue;for(re=!1,$=this.computeCrossing(ee[ee.length-2],ee[ee.length-1],this.serie1.data[U][G],this.serie1.data[U][G+1],te[te.length-2],te[te.length-1],this.serie2.data[Z][K],this.serie2.data[Z][K+1]),$&&(ee.push($.x),ee.push($.y),te.push($.x),te.push($.y),F(),ee.push($.x),ee.push($.y),te.push($.x),te.push($.y),ae=this.serie1.data[U][G+1]>this.serie2.data[Z][K+1]);this.serie2.data[Z][K]<this.serie1.data[U][G];){if(te.push(this.serie2.data[Z][K]),te.push(this.serie2.data[Z][K+1]),K+=2,K==this.serie2.data[Z].length){re=this.serie2.data[Z][K-2],Z++,K=0;break}$=this.computeCrossing(ee[ee.length-2],ee[ee.length-1],this.serie1.data[U][G],this.serie1.data[U][G+1],te[te.length-2],te[te.length-1],this.serie2.data[Z][K],this.serie2.data[Z][K+1]),$&&(ee.push($.x),ee.push($.y),te.push($.x),te.push($.y),F(),ee.push($.x),ee.push($.y),te.push($.x),te.push($.y),ae=this.serie1.data[U][G+1]>this.serie2.data[Z][K+1])}!1===re?(ee.push(this.serie1.data[U][G]),ee.push(this.serie1.data[U][G+1])):(ee.push(re),ee.push(this.interpolate(this.serie1,re)),ie=!1,G-=2,F())}if(se){F();break}Q=this.interpolate(this.serie2,ee[ee.length-2]),Q&&(te.push(ee[ee.length-2]),te.push(Q)),F(),G=0,ie=!1}var ne=this.pathsPositive.reduce(W,'');this.positivePolyline.setPointsPx(ne).redraw();var ne=this.pathsNegative.reduce(W,'');this.negativePolyline.setPointsPx(ne).redraw()}interpolate(F,W){var V=F.searchClosestValue(W);if(!V)return!1;if(void 0==V.xMax)return V.yMin;if(void 0==V.xMin)return V.yMax;var R=(W-V.xMin)/(V.xMax-V.xMin);return(1-R)*V.yMin+R*V.yMax}computeCrossing(F,W,V,R,U,G,Z,K){var Q=(R-W)/(V-F),J=(K-G)/(Z-U),$=R-Q*V;if(F==V||U==Z)return!1;if(Q==J)return{x:F,y1:W,y2:W};var te=($-(K-J*Z))/(J-Q);return te>V||te<F||te<U||te>Z?!1:{x:te,y:Q*te+$}}getPositivePolyline(){return this.positivePolyline}getNegativePolyline(){return this.negativePolyline}}X.default=O,T.exports=X['default']})},function(u,A,S){var C,P,E;(function(T,X){P=[u,A,S(1),S(9),S(11),S(3),S(14),S(22),S(39),S(10)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y,I,B,O,F,W,V,R){'use strict';function G(ue){return ue&&ue.__esModule?ue:{default:ue}}Object.defineProperty(X,'__esModule',{value:!0});var Z=G(Y),K=G(I),Q=G(B),J=function(ue){if(ue&&ue.__esModule)return ue;var he={};if(null!=ue)for(var ce in ue)Object.prototype.hasOwnProperty.call(ue,ce)&&(he[ce]=ue[ce]);return he.default=ue,he}(O),$=G(F),ee=G(W),te=G(V),re=G(R);class ie extends $.default{constructor(){super(...arguments),this.subSeries=[]}setData(){return super.setData(...arguments),this.subSeries.map(ue=>{ue.data=this.data}),this}draw(){return this.eraseMarkers(),this}getSymbolForLegend(){return!!this.subSeries[0]&&this.subSeries[0].getSymbolForLegend()}getMarkerForLegend(){return!!this.subSeries[0]&&this.subSeries[0].getMarkerForLegend()}}class ae extends ee.default{constructor(){super(...arguments),this.subSeries=[]}setData(){return super.setData(...arguments),this.subSeries.map(ue=>{ue.data=this.data}),this}draw(){return this}getSymbolForLegend(){return!!this.subSeries[0]&&this.subSeries[0].getSymbolForLegend()}getMarkerForLegend(){return!!this.subSeries[0]&&this.subSeries[0].getMarkerForLegend()}}var se=['constructor','init','draw','setLineColor','setLineWidth','setLineStyle','getLineColor','getLineWidth','getLineStyle','setMarkers','showMarkers','hideMarkers','getMarkerDom','getMarkerDomIndependant','getMarkerPath','eraseMarkers','_recalculateMarkerPoints'];Object.getOwnPropertyNames($.default.prototype).concat([]).map(function(ue){-1<se.indexOf(ue)||(ie.prototype[ue]=function(he){return function(){var ce=arguments;this.subSeries.map(xe=>{xe[he](...ce)})}}(ue))});class oe extends te.default{constructor(){super(...arguments),this.series=new Map}static defaults(){return{axes:{margins:{high:5,low:5}}}}init(ue){this.graph=ue}newXAxis(ue){return newBottomAxis(ue)}newYAxis(ue){return newLeftAxis(ue)}newTopAxis(ue){return ue=this.getOptions(ue),new de(this.graph,'top',ue)}newBottomAxis(ue){return ue=this.getOptions(ue),new de(this.graph,'bottom',ue)}newLeftAxis(ue){return ue=this.getOptions(ue),new ge(this.graph,'left',ue)}newRightAxis(ue){return ue=this.getOptions(ue),new ge(this.graph,'right',ue)}getOptions(ue){var he={marginMin:this.options.axes.margins.low,marginMax:this.options.axes.margins.high};return J.extend(!0,he,ue)}preDraw(){var ue,he;this.series.forEach(({serie:ce})=>{ue=ce.getXAxis(),he=ce.getYAxis();let xe=1;for(ue.splitNumber&&(xe*=ue.splitNumber),he.splitNumber&&(xe*=he.splitNumber);ce.subSeries.length<xe;){const me=ce.getName()+'_'+ce.subSeries.length,fe=this.graph.newSerie(me,{},ce.getType()||Z.default.SERIE_LINE);fe.excludedFromLegend=!0,fe.styles=ce.styles,fe.data=ce.data,ce.getType()==Z.default.SERIE_LINE&&(fe.markerPoints=ce.markerPoints,fe.markerFamilies=ce.markerFamilies),ce.subSeries.push(fe)}for(;ce.subSeries.length>xe;){let me=this.graph.getSerie(ce.getName()+'_'+(ce.subSeries.length-1));me&&me.kill&&me.kill(),ce.subSeries.pop()}!ce.getXAxis().splitNumber&&ce.getXAxis().splitAxis&&ce.getXAxis().splitAxis(),!ce.getYAxis().splitNumber&&ce.getYAxis().splitAxis&&ce.getYAxis().splitAxis(),ce.subSeries.map((me,fe)=>{var ye,be;if(ce.getXAxis().getSubAxis){let Ae=fe%(ue.splitNumber||1);ye=ce.getXAxis().getSubAxis(Ae)}else ye=ce.getXAxis();if(me.setXAxis(ye),ce.getYAxis().getSubAxis){let Ae=Math.floor(fe/(ue.splitNumber||1));be=ce.getYAxis().getSubAxis(Ae)}else be=ce.getYAxis();me.setYAxis(be),me.draw(!0)})})}newSerie(ue,he={},ce){switch(ce){case'line':return newLineSerie(ue,he);break;case'scatter':return newScatterSerie(ue,he);}throw'Cannot create a split serie of type '+ce}newLineSerie(ue,he){var ce={type:'lineSerie',serie:new ie(ue,he,'line')};return this.series.set(ue,ce),ce.serie.init(this.graph,ue,he),this.graph.series.push(ce.serie),ce.serie}newScatterSerie(ue,he){var ce={type:'scatterSerie',serie:new ae(ue,he,'scatter')};return this.series.set(ue,ce),ce.serie.init(this.graph,he),this.graph.series.push(ce.serie),ce.serie}}var le={splitMarks:!0},pe=function(ue){var ce=class extends ue{constructor(me,fe,ye={}){super(me,fe,ye),this.axes=[],this.position=fe,this.constructorOptions=J.extend(!0,{},le,ye),this._splitVal=[]}all(me){if('function'==typeof me)return this.axes.map(me),this}splitAxis(...me){me.push(1);let fe=me.length;for(;this.axes.length>fe;)this.axes.pop().kill(!0,!0);for(;this.axes.length<fe;){let Ae=new(this.getConstructor())(this.graph,this.position,this.constructorOptions);this.axes.push(Ae),Ae.zoomLock=!0,Ae.init(this.graph,this.constructorOptions)}let ye=0,be=0;for(let Ae of this.axes)Ae.options.marginMin=10,Ae.options.marginMax=10,0==be&&(Ae.options.marginMin=0),be==this.axes.length-1&&(Ae.options.marginMax=0),Ae.setSpan(ye,ye=me[be]),Ae.setMinMaxFlipped(),be++;return this._splits=me,this}fixGridIntervalBasedOnAxis(me){return this.fixGridFor=me,this.graph._axisHasChanged(),this}splitSpread(me){return this.autoSpread=!!me,this}hasAxis(me){return-1<this.axes.indexOf(me)}_splitSpread(){let me=[],fe=0,ye=0;for(let be of this._splitVal)fe+=be[1]-be[0];for(let be of this._splitVal)me.push(ye+=(be[1]-be[0])/fe);me.pop(),this.splitAxis(...me)}setChunkBoundaries(me){let fe=0,ye,be;for(let Ae of this.axes)Array.isArray(me[fe])&&1<me[fe].length&&!ye&&(ye=me[fe][1]-me[fe][0],be=fe),1!=me[fe].length&&Array.isArray(me[fe])?Ae.forceMin(me[fe][0]).forceMax(me[fe][1]):(Ae._mean=me[fe],Array.isArray(Ae._mean)&&(Ae._mean=Ae._mean[0])),fe++;return this._baseWidthVal=ye,this._baseWidthIndex=be,this._splitVal=me,this.graph._axisHasChanged(),this}setMinMaxToFitSeries(){(!this._splitVal||1>this._splitVal.length)&&(super.setMinMaxToFitSeries(...arguments),this._splitVal[0]=this._splitVal[0]||[],this._splitVal[this._splitVal.length-1]=this._splitVal[this._splitVal.length-1]||[],this._splitVal[0][0]=this.getCurrentMin(),this._splitVal[this._splitVal.length-1][1]=this.getCurrentMax(),this.setChunkBoundaries(this._splitVal))}draw(){this.autoSpread&&this._splitSpread();let me=0,fe,ye,be;if(0<=this._baseWidthIndex&&(ye=this.getSubAxis(this._baseWidthIndex))&&(be=ye.getSpan()),ye=void 0,0<=this.fixGridFor&&(ye=this.getSubAxis(this.fixGridFor))){if(void 0!==ye._mean){let Ae=(ye.getSpan()[1]-ye.getSpan()[0])/(be[1]-be[0])*this._baseWidthVal;ye.forceMin(ye._mean-Ae/2),ye.forceMax(ye._mean+Ae/2)}me=ye.draw(),fe=ye.getPrimaryTickUnit()}return this.axes.map(Ae=>{if(ye!==Ae){if(void 0!==Ae._mean){let Me=(Ae.getSpan()[1]-Ae.getSpan()[0])/(be[1]-be[0])*this._baseWidthVal;Ae.forceMin(Ae._mean-Me/2),Ae.forceMax(Ae._mean+Me/2)}fe&&Ae.forcePrimaryTickUnit(fe),me=Math.max(me,Ae.draw())}}),this.writeUnit(),me}setMinPx(me){super.setMinPx(me);for(let fe of this.axes)fe.setMinPx(me)}setMaxPx(me){super.setMaxPx(me);for(let fe of this.axes)fe.setMaxPx(me)}setShift(){super.setShift(...arguments);for(let me of this.axes)me.setShift(...arguments)}init(){super.init(...arguments),this.splitAxis()}getAxisPosition(){var me=0;return this.axes.map(fe=>{me=Math.max(me,fe.getAxisPosition())}),me}getSubAxis(me){if(this.axes.length<=me)throw'Impossible to reach axis. Index '+me+' is out of range';return this.axes[me]}get splitNumber(){return this._splits.length}};return['turnGridsOff','turnGridsOn','gridsOff','gridsOn','setEngineering','setScientificScaleExponent','setScientific','setLabelColor','setSecondaryGridDasharray','setPrimaryGridDasharray','setSecondaryGridsOpacity','setPrimaryGridOpacity','setSecondaryGridWidth','setPrimaryGridWidth','setSecondaryGridColor','setPrimaryGridColor','setTicksLabelColor','setSecondaryTicksColor','setPrimaryTicksColor','setAxisColor','secondaryGridOn','secondaryGridOff','primaryGridOff','primaryGridOn','setSecondaryGrid','setPrimaryGrid','setGrids','setTickPosition','setExponentialFactor','setExponentialLabelFactor','setGridLinesStyle','forcePrimaryTickUnitMin','forcePrimaryTickUnitMax','forcePrimaryTickUnit','flip','show','hide','setDisplay'].map(xe=>{ce.prototype[xe]=function(me){return function(){return this.axes.map(fe=>{fe[me](...arguments)}),this}}(xe)}),ce};class de extends pe(K.default){constructor(ue,he){super(...arguments),this.topbottom=he}getConstructor(){return K.default}getAxisPosition(){var ue=super.getAxisPosition(...arguments);return this.labelPosY=ue,this.getLabel()&&(ue+=this.graph.options.fontSize),ue}drawLabel(){super.drawLabel(),this.label.setAttribute('y',(this.top?-1:1)*(this.graph.options.fontSize+this.labelPosY))}draw(){var ue=super.draw(...arguments);return this.drawLabel(),ue}}class ge extends pe(Q.default){constructor(){super(...arguments)}getConstructor(){return Q.default}drawLabel(){super.drawLabel()}equalizePosition(ue){var he=ue;if(this.getLabel()&&this.axes.map(ce=>{he=Math.max(ce.equalizePosition(ue),he)}),this.getLabel())return this.placeLabel(this.left?-he:he),he+this.graph.options.fontSize}}J.mix(de,new K.default),J.mix(ge,new Q.default),X.default=oe,T.exports=X['default']})},function(u,A,S){var C,P,E;(function(T,X){P=[u,A,S(3),S(39)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y,I){'use strict';Object.defineProperty(X,'__esModule',{value:!0});var F=function(R){if(R&&R.__esModule)return R;var U={};if(null!=R)for(var G in R)Object.prototype.hasOwnProperty.call(R,G)&&(U[G]=R[G]);return U.default=R,U}(Y),W=function(R){return R&&R.__esModule?R:{default:R}}(I);class V extends W.default{constructor(){super(...arguments)}init(R,U){super.init(R,U)}static defaults(){return{}}checkHSL(R){let U={},G,Z,K;return(G=R.h||R.hue)?(1>G&&(G=Math.round(360*G)),U.hue=G):U.h=0,(Z=R.s||R.saturation)?(1<Z&&(Z/=100),U.saturation=Z):U.saturation=.75,(K=R.lightness||R.l)?(1<K&&(K/=100),U.lightness=K):U.lightness=0.5,U}buildHSLString(R){return'hsl( '+Math.round(R.h)+', '+Math.round(100*R.s)+'%, '+Math.round(100*R.l)+'%)'}colorizeAll(R){let U,G;if(R.serieTypes?(!Array.isArray(R.serieTypes)&&(R.serieTypes=[R.serieTypes]),U=this.graph.allSeries(...R.serieTypes)):U=this.graph.getSeries(),G=U.length,!R.startingColorHSL)if(R.colorHSL)R.startingColorHSL=this.checkHSL(R.colorHSL);else throw'No starting color was provided. There must exist either options.colorHSL or options.startingColorHSL';if(!R.endingColorHSL)switch(R.affect&&['h','s','l','hue','saturation','lightness'].include(R.affect)||(R.affect='h'),R.affect){case'h':case'hue':R.endingColorHSL={h:R.startingColorHSL.h+300,s:R.startingColorHSL.s,l:R.startingColorHSL.l};break;case'saturation':case's':let Z;Z=0.5<R.startingColorHSL.s?0:1,R.endingColorHSL={h:R.startingColorHSL.h,s:Z,l:R.startingColorHSL.l};break;case'lightness':case'l':let K;K=0.5<R.startingColorHSL.l?0:0.75,R.endingColorHSL={h:R.startingColorHSL.h,s:R.startingColorHSL.s,l:K};}else R.endingColorHSL=Object.assign({},R.startingColorHSL,R.endingColorHSL);U.map((Z,K)=>{if(!Z.setLineColor)throw'The serie '+Z.getName()+' does not implement the method `startingColor`';Z.setLineColor(this.buildHSLString({h:R.startingColorHSL.h+K/(G-1)*(R.endingColorHSL.h-R.startingColorHSL.h),s:R.startingColorHSL.s+K/(G-1)*(R.endingColorHSL.s-R.startingColorHSL.s),l:R.startingColorHSL.l+K/(G-1)*(R.endingColorHSL.l-R.startingColorHSL.l)}))})}}X.default=V,T.exports=X['default']})},function(u,A,S){var C,P,E;(function(T,X){P=[u,A,S(32)],C=X,E='function'==typeof C?C.apply(A,P):C,!(void 0!==E&&(u.exports=E))})(this,function(T,X,Y){'use strict';Object.defineProperty(X,'__esModule',{value:!0});var B=function(F){return F&&F.__esModule?F:{default:F}}(Y);class O extends B.default{constructor(F){super(F)}createDom(){this._dom=document.createElementNS(this.graph.ns,'line'),this._dom.setAttribute('marker-end','url(#arrow'+this.graph._creation+')'),this.createHandles(this.nbHandles,'rect',{transform:'translate(-3 -3)',width:6,height:6,stroke:'black',fill:'white',cursor:'nwse-resize'}),this.setStrokeColor('black'),this.setStrokeWidth(1)}}X.default=O,T.exports=X['default']})}])});
//# sourceMappingURL=jsgraph-es6.min.js.map
