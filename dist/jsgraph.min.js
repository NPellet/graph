/*! jsGraph (c) 2014 Norman Pellet, MIT license, v@1.15.2, Date: 2016-09-18T10:37Z */
!function(a,b){"object"==typeof exports&&"object"==typeof module?module.exports=b():"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?exports.Graph=b():a.Graph=b()}(this,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}var e,f,g=c(1),h=d(g),i=c(2),j=d(i),k=c(5),l=d(k),m=c(6),n=d(m),o=c(8),p=d(o),q=c(9),r=d(q),s=c(10),t=d(s),u=c(11),v=d(u),w=c(15),x=d(w),y=c(16),z=d(y),A=c(17),B=d(A),C=c(18),D=d(C),E=c(19),F=d(E),G=c(20),H=d(G),I=c(21),J=d(I),K=c(22),L=d(K),M=c(23),N=d(M),O=c(25),P=d(O),Q=c(26),R=d(Q),S=c(27),T=d(S),U=c(24),V=d(U),W=c(28),X=d(W),Y=c(29),Z=d(Y),$=c(30),_=d($),aa=c(31),ba=d(aa),ca=c(32),da=d(ca),ea=c(33),fa=d(ea);e=[c(34),c(41),c(35),c(36),c(37),c(38),c(40)],f=function(a,b,c,d,e,f,g){return h["default"].registerConstructor("graph.position",j["default"]),h["default"].registerConstructor("graph.axis.x",n["default"]),h["default"].registerConstructor("graph.axis.y",p["default"]),h["default"].registerConstructor("graph.axis.x.bar",r["default"]),h["default"].registerConstructor("graph.axis.x.time",t["default"]),h["default"].registerConstructor("graph.serie.line",v["default"]),h["default"].registerConstructor("graph.serie.line.color",z["default"]),h["default"].registerConstructor("graph.serie.contour",H["default"]),h["default"].registerConstructor("graph.serie.bar",x["default"]),h["default"].registerConstructor("graph.serie.scatter",B["default"]),h["default"].registerConstructor("graph.serie.zone",D["default"]),h["default"].registerConstructor("graph.serie.densitymap",F["default"]),h["default"].registerConstructor("graph.plugin.shape",c),h["default"].registerConstructor("graph.plugin.drag",b),h["default"].registerConstructor("graph.plugin.zoom",e),h["default"].registerConstructor("graph.plugin.selectScatter",d),h["default"].registerConstructor("graph.plugin.timeSerieManager",f),h["default"].registerConstructor("graph.plugin.serielinedifference",g),h["default"].registerConstructor("graph.plugin.serieLineDifference",g),h["default"].registerConstructor("graph.plugin.axissplitting",fa["default"]),h["default"].registerConstructor("graph.shape",J["default"]),h["default"].registerConstructor("graph.shape.areaundercurve",L["default"]),h["default"].registerConstructor("graph.shape.arrow",N["default"]),h["default"].registerConstructor("graph.shape.ellipse",P["default"]),h["default"].registerConstructor("graph.shape.label",R["default"]),h["default"].registerConstructor("graph.shape.polyline",T["default"]),h["default"].registerConstructor("graph.shape.line",V["default"]),h["default"].registerConstructor("graph.shape.nmrintegral",X["default"]),h["default"].registerConstructor("graph.shape.peakintegration2d",Z["default"]),h["default"].registerConstructor("graph.shape.rect",_["default"]),h["default"].registerConstructor("graph.shape.rectangle",_["default"]),h["default"].registerConstructor("graph.shape.cross",ba["default"]),h["default"].registerConstructor("graph.shape.peakboundariescenter",da["default"]),h["default"].registerConstructor("graph.legend",l["default"]),h["default"]}.apply(b,e),!(void 0!==f&&(a.exports=f))},function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function h(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function i(a,b,c,d){var e=a.getConstructor("graph.serie."+d);if(!e)return D.throwError('No constructor exists for serie type "'+d+'"');var f=new e;return f.init(a,b,c),a.appendSerieToDom(f),f}function j(a,b){for(var c=0,d=b.length;d>c;c++){for(var e=!0,f=0,g=b[c].length;g>f;f++)a[0]<b[c][f][0]&&a[1]<b[c][f][0]||a[0]>b[c][f][1]&&a[1]>b[c][f][1]||(e=!1);if(e)return b[c].push(a),c}return b.push([a]),b.length-1}function k(a){var b={top:[],bottom:[],left:[],right:[]},c={top:[],bottom:[],left:[],right:[]};a._painted=!0,a._applyToAxes(function(a,d){if(!a.disabled&&!a.floating){var e=j(a.getSpan(),c[d]);a.setLevel(e),b[d][e]=Math.max(a.getAxisPosition(),b[d][e]||0)}},!1,!0,!1);var d=b.top.reduce(function(a,b){return a+b},0),e=b.bottom.reduce(function(a,b){return a+b},0);[b.top,b.bottom].map(function(a){a.reduce(function(b,c,d){return a[d]=b+c,b+c},0)}),a._applyToAxes(function(a,c){a.disabled||a.floating||a.setShift(b[c][a.getLevel()])},!1,!0,!1),a._applyToAxes(function(f,g){if(!f.disabled&&(f.setMinPx(d),f.setMaxPx(a.getDrawingHeight(!0)-e),!f.floating)){var h=f.linkedToAxis?0:f.draw(),i=j(f.getSpan(),c[g]);f.setLevel(i),b[g][i]=Math.max(h+f.getAxisPosition(),b[g][i]||0)}},!1,!1,!0);var f=b.left.reduce(function(a,b){return a+b},0),g=b.right.reduce(function(a,b){return a+b},0);[b.left,b.right].map(function(a){a.reduce(function(b,c,d){return a[d]=b+c,b+c},0)}),a._applyToAxes(function(a,c){a.disabled||a.floating||a.setShift(b[c][a.getLevel()])},!1,!1,!0),a._applyToAxes(function(b,c){b.disabled||(b.setMinPx(f),b.setMaxPx(a.getDrawingWidth(!0)-g),b.floating||b.linkedToAxis||b.draw())},!1,!0,!1),a._applyToAxes(function(a){if(a.floating){var b=a.getFloatingAxis(),c=a.getFloatingValue(),d=b.getPx(c);a.setShift(d),a.linkedToAxis||a.draw()}},!1,!0,!0),u(a,"right",a.getDrawingWidth(!0),a.getDrawingWidth(!0),d,a.getDrawingHeight(!0)-e),u(a,"left",0,0,d,a.getDrawingHeight(!0)-e),u(a,"top",f,a.getDrawingWidth(!0)-g,0,0),u(a,"bottom",f,a.getDrawingWidth(!0)-g,a.getDrawingHeight(!0)-e,a.getDrawingHeight(!0)-e),a.clipRect.setAttribute("y",d),a.clipRect.setAttribute("x",f),a.clipRect.setAttribute("width",a.getDrawingWidth()-f-g),a.clipRect.setAttribute("height",a.getDrawingHeight()-d-e),a.rectEvent.setAttribute("y",d+a.getPaddingTop()),a.rectEvent.setAttribute("x",f+a.getPaddingLeft()),a.drawingSpaceWidth=a.getDrawingWidth()-f-g,a.drawingSpaceHeight=a.getDrawingHeight()-d-e,a.rectEvent.setAttribute("width",a.drawingSpaceWidth),a.rectEvent.setAttribute("height",a.drawingSpaceHeight),a.shift=b,a.redrawShapes()}function l(a){var b=a;a._dom.addEventListener("keydown",function(a){8!=a.keyCode&&127!=a.keyCode||!b.selectedShapes||(a.preventDefault(),a.stopPropagation(),b.selectedShapes.map(function(a){a.kill()}))}),a.groupEvent.addEventListener("mousemove",function(a){var c=b._getXY(a);n(b,c.x,c.y,a)}),a.dom.addEventListener("mouseleave",function(a){w(b)}),a.groupEvent.addEventListener("mousedown",function(a){if(b.focus(),3!=a.which&&!a.ctrlKey){var c=b._getXY(a);m(b,c.x,c.y,a)}}),a.dom.addEventListener("mouseup",function(c){a.emit("mouseUp",c);var d=b._getXY(c);r(b,d.x,d.y,c)}),a.dom.addEventListener("dblclick",function(c){a.emit("dblClick",c);var d=b._getXY(c);q(b,d.x,d.y,c)}),a.groupEvent.addEventListener("click",function(a){if(3!=a.which&&!a.ctrlKey){var c=b._getXY(a);b.prevent(!1)||s(b,c.x,c.y,a)}}),a.groupEvent.addEventListener("mousewheel",function(a){var c=a.wheelDeltaY||a.wheelDelta||-a.deltaY;return v(b,c,a),!1}),a.groupEvent.addEventListener("wheel",function(a){var c=a.wheelDeltaY||a.wheelDelta||-a.deltaY;return v(b,c,a),!1})}function m(a,b,c,d){return a.forcedPlugin?(a.activePlugin=a.forcedPlugin,void a._pluginExecute(a.activePlugin,"onMouseDown",[a,b,c,d])):void o(a,d,[a,b,c,d],"onMouseDown")}function n(a,b,c,d){if(a.bypassHandleMouse)return void a.bypassHandleMouse.handleMouseMove(d);if(!a.activePlugin||!a._pluginExecute(a.activePlugin,"onMouseMove",[a,b,c,d])){if(a._applyToAxes("handleMouseMove",[b-a.options.paddingLeft,d],!0,!1),a._applyToAxes("handleMouseMove",[c-a.options.paddingTop,d],!1,!0),!a.activePlugin){var e;if(a.options.trackingLine&&a.options.trackingLine.snapToSerie&&"common"==a.options.trackingLine.mode){var f=a.options.trackingLine.snapToSerie;if(e=f.handleMouseMove(!1,!0)){a.trackingLine.show();var g=e.xIndexClosest;a.trackingLine.getPosition(0).x=f.getData()[0][2*g],a.trackingLine.getPosition(1).x=f.getData()[0][2*g],a.trackingLine.redraw();var b=f.getXAxis().getPx(a.trackingLine.getPosition(0).x)+a.options.paddingLeft}else a.trackingLine.hide();var h=a.options.trackingLine.series;h||(h=a.getSeries().map(function(a){return{serie:a,withinPx:20,withinVal:-1}})),a._trackingLegend=J(a,h,b,c,a._trackingLegend,a.options.trackingLine.textMethod,a.trackingLine.getPosition(1).x)}}if(a.options.onMouseMoveData){for(var i={},j=0;j<a.series.length;j++)i[a.series[j].getName()]=a.series[j].handleMouseMove(!1,!0);a.options.onMouseMoveData.call(a,d,i)}o(a,d,[a,b,c,d],"onMouseMove")}}function o(a,b,c,d){var e,f,g=a.options.mouseActions;for(e=0,f=g.length;f>e;e++)if(g[e].plugin){if(a.forcedPlugin==g[e].plugin||a.isMouseActionAllowed(b,g[e]))return g[e].options&&c.push(g[e].options),a.activePlugin=g[e].plugin,a._pluginExecute(g[e].plugin,d,c),!0}else{if(g[e].callback&&a.isMouseActionAllowed(b,g[e]))return g[e].options&&c.push(g[e].options),g[e].callback.apply(a,c),!0;if(g[e].series){var h;"all"===g[e].series&&(h=a.series),Array.isArray(g[e].series)||(h=[h]),g[e].options&&c.push(g[e].options);for(var i=0;i<h.length;e++)a._serieExecute(h[e],d,c);return!0}}return!1}function p(a){var b=document.createElement("div");return b.setAttribute("class","trackingLegend"),b.style.position="absolute",b.style.borderRadius="4px",b.style.boxShadow="1px 1px 3px 0px rgba(100,100,100,0.6)",b.style.border="2px solid #333333",b.style.backgroundColor="rgba(255, 255, 255, 0.5 )",b.style.pointerEvents="none",b.style.paddingTop="5px",b.style.paddingBottom="5px",b.style.paddingLeft="10px",b.style.paddingRight="10px",a.getWrapper().insertBefore(b,a.getDom()),b}function q(a,b,c,d){a.options.dblclick;o(a,d,[b,c,d],"onDblClick")}function r(a,b,c,d){return a.bypassHandleMouse?(a.bypassHandleMouse.handleMouseUp(d),void(a.activePlugin=!1)):(a._pluginExecute(a.activePlugin,"onMouseUp",[a,b,c,d]),void(a.activePlugin=!1))}function s(a,b,c,d){a.emit("click",[a,b,c,d]),d.target.jsGraphIsShape||a.prevent(!1)||!a.options.shapesUnselectOnClick||a.unselectShapes()}function t(a,b,c,d){var e,c=c||{},f={def:{x:a.getConstructor("graph.axis.x"),y:a.getConstructor("graph.axis.y")},time:{x:a.getConstructor("graph.axis.x.time")},bar:{x:a.getConstructor("graph.axis.x.bar")}};switch(c.type){case"time":var g=f.time;break;case"bar":var g=f.bar;break;case"broken":var g=f.broken;break;default:var g=f.def}switch(d){case"top":case"bottom":e=g.x;break;case"left":case"right":e=g.y}return b=b||0,"object"==("undefined"==typeof b?"undefined":y(b))&&(c=b,b=0),a.axis[d][b]||(a.axis[d][b]=new e(a,d,c),a.axis[d][b].init(a,c)),a.axis[d][b]}function u(a,b,c,d,e,f){if(a.options.close!==!1){var g=0;a.axis[b].map(function(a){a.isDisplayed()&&!a.floating&&g++}),a.options.close!==!0&&!a.options.close[b]||0!=g?a.closingLines[b].setAttribute("display","none"):(a.closingLines[b].setAttribute("display","block"),a.closingLines[b].setAttribute("x1",c),a.closingLines[b].setAttribute("x2",d),a.closingLines[b].setAttribute("y1",e),a.closingLines[b].setAttribute("y2",f))}}function v(a,b,c){o(a,c,[b,c],"onMouseWheel")&&(c.preventDefault(),c.stopPropagation())}function w(a){a.options.handleMouseLeave&&a.options.handleMouseLeave.call(a)}function x(a){var b=a._axesHaveChanged;return a._axesHaveChanged=!1,b}Object.defineProperty(b,"__esModule",{value:!0});var y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},z=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),A=c(2),B=e(A),C=c(3),D=d(C),E=c(4),F=e(E),G={title:"",paddingTop:30,paddingBottom:5,paddingLeft:20,paddingRight:20,close:{left:!0,right:!0,top:!0,bottom:!0},fontSize:12,fontFamily:"Myriad Pro, Helvetica, Arial",plugins:{},pluginAction:{},mouseActions:[],wheel:{},dblclick:{},shapesUnselectOnClick:!0,shapesUniqueSelection:!0},H={},I=function(a){function b(a,c,d){f(this,b);var e=g(this,Object.getPrototypeOf(b).call(this));if(e._creation=D.guid(),"string"==typeof a?a=document.getElementById(a):"number"==typeof a.length&&(a=a[0]),!a)throw"The wrapper DOM element was not found.";if(!a.appendChild)throw"The wrapper appears to be an invalid HTMLElement";a.style["-webkit-user-select"]="none",a.style["-moz-user-select"]="none",a.style["-o-user-select"]="none",a.style["-ms-user-select"]="none",a.style["user-select"]="none",e.options=D.extend({},G,c),e.prevented=!1,e.axis={left:[],top:[],bottom:[],right:[]},e.shapes=[],e.shapesLocked=!1,e.plugins={};for(var h in e.options.pluginAction)e.options.pluginAction.plugin=h,e.options.mouseActions.push(e.options.pluginAction);e.selectedShapes=[],e.ns="http://www.w3.org/2000/svg",e.nsxlink="http://www.w3.org/1999/xlink",e.series=[],e._dom=a,e._axesHaveChanged=!0,e.options.hasOwnProperty("padding")&&D.isNumeric(e.options.padding)&&(e.options.paddingTop=e.options.paddingBottom=e.options.paddingLeft=e.options.paddingRight=e.options.padding);var i=getComputedStyle(a),j=parseInt(i.width),k=parseInt(i.height);if(e._doDom(),e.setSize(j,k),e._resize(),l(e),e.currentAction=!1,d)for(var h in d)for(var m=0,n=d[h].length;n>m;m++)switch(h){case"top":e.getTopAxis(m,d[h][m]);break;case"bottom":e.getBottomAxis(m,d[h][m]);break;case"left":e.getLeftAxis(m,d[h][m]);break;case"right":e.getRightAxis(m,d[h][m])}return e._pluginsInit(),e}return h(b,a),z(b,[{key:"getDom",value:function(){return this.dom}},{key:"getId",value:function(){return this._creation}},{key:"getWrapper",value:function(){return this._dom}},{key:"setOption",value:function(a,b){return this.options[a]=b,this}},{key:"setTitle",value:function(a){this.options.title=a,this.domTitle.textContent=a}},{key:"displayTitle",value:function(){this.domTitle.setAttribute("display","inline")}},{key:"hideTitle",value:function(){this.domTitle.setAttribute("display","none")}},{key:"redraw",value:function(a){return this.width&&this.height?this.sizeSet?!a||x(this)?(k(this),this._pluginsExecute("preDraw"),!0):(this._pluginsExecute("preDraw"),!1):(this._resize(),this._pluginsExecute("preDraw"),!0):void 0}},{key:"draw",value:function(){this.drawSeries(this.redraw(!0))}},{key:"setWidth",value:function(a,b){this.width=a,b||this._resize()}},{key:"setHeight",value:function(a,b){this.height=a,b||this._resize()}},{key:"resize",value:function(a,b){return a&&b&&this.setSize(a,b),this._resize(),this}},{key:"setSize",value:function(a,b){this.setWidth(a,!0),this.setHeight(b,!0),this.getDrawingHeight(),this.getDrawingWidth()}},{key:"getWidth",value:function(){return this.width}},{key:"getHeight",value:function(){return this.height}},{key:"getPaddingTop",value:function(){return this.options.paddingTop}},{key:"getPaddingLeft",value:function(){return this.options.paddingLeft}},{key:"getPaddingBottom",value:function(){return this.options.paddingBottom}},{key:"getPaddingRight",value:function(){return this.options.paddingRight}},{key:"getDrawingHeight",value:function(a){return a&&this.innerHeight?this.innerHeight:this.innerHeight=this.height-this.options.paddingTop-this.options.paddingBottom}},{key:"getDrawingWidth",value:function(a){return a&&this.innerWidth?this.innerWidth:this.innerWidth=this.width-this.options.paddingLeft-this.options.paddingRight}},{key:"cacheOffset",value:function(){this.offsetCached=D.getOffset(this._dom)}},{key:"uncacheOffset",value:function(){this.offsetCached=!1}},{key:"getXAxis",value:function(a,b){return this.axis.top.length>0&&0==this.axis.bottom.length?this.getTopAxis(a,b):this.getBottomAxis(a,b)}},{key:"getYAxis",value:function(a,b){return this.axis.right.length>0&&0==this.axis.left.length?this.getRightAxis(a,b):this.getLeftAxis(a,b)}},{key:"getTopAxis",value:function(a,b){return t(this,a,b,"top")}},{key:"getBottomAxis",value:function(a,b){return t(this,a,b,"bottom")}},{key:"getLeftAxis",value:function(a,b){return t(this,a,b,"left")}},{key:"getRightAxis",value:function(a,b){return t(this,a,b,"right")}},{key:"setXAxis",value:function(a,b){this.setBottomAxis(a,b)}},{key:"setYAxis",value:function(a,b){this.setLeftAxis(a,b)}},{key:"setLeftAxis",value:function(a,b){b=b||0,this.axis.left[b]&&this.axis.left[b].kill(),this.axis.left[b]=a}},{key:"setRightAxis",value:function(a,b){b=b||0,this.axis.right[b]&&this.axis.right[b].kill(),this.axis.right[b]=a}},{key:"setTopAxis",value:function(a,b){b=b||0,this.axis.top[b]&&this.axis.top[b].kill(),this.axis.top[b]=a}},{key:"setBottomAxis",value:function(a,b){b=b||0,this.axis.bottom[b]&&this.axis.bottom[b].kill(),this.axis.bottom[b]=a}},{key:"killAxis",value:function(a){var b,c=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],d=arguments.length<=2||void 0===arguments[2]?!1:arguments[2];a.isX()&&((b=this.axis.bottom.indexOf(a))>-1&&this.axis.bottom.splice(b,1),(b=this.axis.top.indexOf(a))>-1&&this.axis.top.splice(b,1),d||this.series.map(function(b){b.getXAxis()==a&&b.kill()})),a.isY()&&((b=this.axis.left.indexOf(a))>-1&&this.axis.left.splice(b,1),(b=this.axis.right.indexOf(a))>-1&&this.axis.right.splice(b,1),d||this.series.map(function(b){b.getYAxis()==a&&b.kill()})),this.axisGroup.removeChild(a.group),this.groupPrimaryGrids.removeChild(a.gridPrimary),this.groupSecondaryGrids.removeChild(a.gridSecondary),c||this.draw(!0)}},{key:"hasXAxis",value:function(a){return this.hasTopAxis(a)||this.hasBottomAxis(a)}},{key:"hasYAxis",value:function(a){return this.hasLeftAxis(a)||this.hasRightAxis(a)}},{key:"hasTopAxis",value:function(a){return this.hasAxis(a,this.axis.top)}},{key:"hasBottomAxis",value:function(a){return this.hasAxis(a,this.axis.bottom)}},{key:"hasLeftAxis",value:function(a){return this.hasAxis(a,this.axis.left)}},{key:"hasRightAxis",value:function(a){return this.hasAxis(a,this.axis.right)}},{key:"hasAxis",value:function(a,b){return b.indexOf(a)>-1}},{key:"autoscaleAxes",value:function(){this._applyToAxes("setMinMaxToFitSeries",null,!0,!0)}},{key:"setBackgroundColor",value:function(a){return this.rectEvent.setAttribute("fill",a),this}},{key:"getAxisState",value:function(){var a={};for(var b in this.axis)a[b]=this.axis[b].map(function(a){return[a.getCurrentMin(),a.getCurrentMax()]});return a}},{key:"setAxisState",value:function(a){var b,c;for(var d in a)if(this.axis[d])for(b=0,c=a[d].length;c>b;b++)this.axis[d][b]&&(this.axis[d][b].setCurrentMin(a[d][b][0]),this.axis[d][b].setCurrentMax(a[d][b][1]));this.draw()}},{key:"saveAxisState",value:function(a){return this.savedAxisState=this.savedAxisState||{},this.savedAxisState[a]=this.getAxisState(),this}},{key:"recallAxisState",value:function(a){return this.savedAxisState[savedName]&&this.recallAxisState(this.savedAxisState[savedName]),this}},{key:"_applyToAxis",value:function(a){switch(a){case"string":return function(a,b,c){for(var d=0;d<this.axis[a].length;d++)this.axis[a][d][b].apply(this.axis[a][d],c)};case"function":return function(a,b,c){for(var d=0;d<this.axis[a].length;d++)b.call(this,this.axis[a][d],a,c)}}}},{key:"getBoundaryAxis",value:function(a,b){var c=this.getBoundaryAxisFromSeries(a,b);return c}},{key:"getBoundaryAxisFromSeries",value:function(a,b){var c,d,e,f,g,h,i="min"==b,j=a.isX()?["getMinX","getMaxX"]:["getMinY","getMaxY"],k=j[i?0:1],l=i?+(1/0):-(1/0);for(c=i?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,e=this.getSeriesFromAxis(a,!0),g=0,h=e.length;h>g;g++)d=e[g],d.isShown()&&(f=d[k](),c=Math[b](isNaN(c)?l:c,isNaN(f)?l:f));return c}},{key:"getSeriesFromAxis",value:function(a){for(var b=[],c=this.series.length-1;c>=0;c--)(this.series[c].getXAxis()==a||this.series[c].getYAxis()==a)&&b.push(this.series[c]);return b}},{key:"updateDataMinMaxAxes",value:function(){var a,b,c,d,e,f=["bottom","top","left","right"];for(b=0,c=f.length;c>b;b++)for(d=this.axis[f[b]].length-1;d>=0;d--)a=this.axis[f[b]][d],e=2>b?"x":"y",a.disabled||(a.setMinValueData(this.getBoundaryAxis(this.axis[f[b]][d],"min")),a.setMaxValueData(this.getBoundaryAxis(this.axis[f[b]][d],"max")))}},{key:"_applyToAxes",value:function(a,b,c,d){var e,f=[],g=0;for((c||void 0==c)&&(f.push("top"),f.push("bottom")),(d||void 0==d)&&(f.push("left"),f.push("right")),e=f.length;e>g;g++)this._applyToAxis("undefined"==typeof a?"undefined":y(a)).call(this,f[g],a,b)}},{key:"findAxesLinkedTo",value:function(a){var b=[];return this._applyToAxes(function(c){c.linkedToAxis&&c.linkedToAxis.axis==a&&b.push(c)},{},a instanceof this.getConstructor("graph.axis.x"),a instanceof this.getConstructor("graph.axis.y")),b}},{key:"_axisHasChanged",value:function(a){this._axesHaveChanged=!0}},{key:"newSerie",value:function(a,b,c){var d=this;c||(c="line");var e;return(e=this.getSerie(a))?e:(e=i(this,a,b,c),e._type=c,d.series.push(e),d.legend&&d.legend.update(),d.emit("newSerie",e),e)}},{key:"getSerie",value:function(a){if("number"==typeof a)return this.series[a]||!1;for(var b=0,c=this.series.length;c>b;b++)if(this.series[b].getName()==a)return this.series[b];return!1}},{key:"getSeries",value:function(){return this.series}},{key:"drawSerie",value:function(a,b){if(!a.draw)throw"Serie has no method draw";a.draw(b)}},{key:"drawSeries",value:function(a){if(this.width&&this.height)for(var b=this.series.length-1;b>=0;b--)this.series[b].isShown()&&this.drawSerie(this.series[b],a)}},{key:"resetSeries",value:function(){this.removeSeries()}},{key:"killSeries",value:function(){this.resetSeries()}},{key:"removeSeries",value:function(){for(;this.series[0];)this.series[0].kill(!0);this.series=[]}},{key:"selectSerie",value:function(a,b){"object"!=("undefined"==typeof a?"undefined":y(a))&&(a=this.getSerie(a)),(this.selectedSerie!=a||this.selectedSerie.selectionType!=b)&&(this.selectedSerie!==a&&this.unselectSerie(a),this.selectedSerie=a,this.triggerEvent("onSelectSerie",a),a.select(b||"selected"))}},{key:"getSelectedSerie",value:function(){return this.selectedSerie}},{key:"unselectSerie",value:function(a){a.unselect(),this.selectedSerie=!1,this.triggerEvent("onUnselectSerie",a)}},{key:"getShapesOfSerie",value:function(a){for(var b=[],c=this.shapes.length-1;c>=0;c--)this.shapes[c].getSerie()==a&&b.push(this.shapes[c]);return b}},{key:"makeToolbar",value:function(a){var b=this.getConstructor("graph.toolbar");return b?this.toolbar=new b(this,a):D.throwError("No constructor exists for toolbar")}},{key:"getShapes",value:function(){return this.shapes||[]}},{key:"newShape",value:function(a,b,c,d){if(!c&&(this.emit("beforeNewShape",b),this.prevent(!1)))return!1;"object"==("undefined"==typeof a?"undefined":y(a))&&(c=b,b=a,a=b.type),b=b||{},b._id=D.guid();var e;if(e="function"==typeof a?a:this.getConstructor("graph.shape."+a),!e)return D.throwError("No constructor for this shape");var f=new e(this,b);if(!f)return D.throwError("Failed to construct shape.");if(f.type=a,f.graph=this,f._data=b,f.init(this,d),b.position)for(var g=0,h=b.position.length;h>g;g++)f.setPosition(new B["default"](b.position[g]),g);if(void 0!==b.properties&&f.setProperties(b.properties),void 0!==b.fillColor&&f.setFillColor(b.fillColor),void 0!==b.fillOpacity&&f.setFillOpacity(b.fillOpacity),void 0!==b.strokeColor&&f.setStrokeColor(b.strokeColor),void 0!==b.strokeWidth&&f.setStrokeWidth(b.strokeWidth),void 0!==b.layer&&f.setLayer(b.layer),1==b.locked&&f.lock(),1==b.movable&&f.movable(),1==b.selectable&&f.selectable(),1==b.resizable&&f.resizable(),void 0!==b.attributes&&f.setProp("attributes",b.attributes),void 0!==b.handles&&f.setProp("handles",b.handles),void 0!==b.selectOnMouseDown&&f.setProp("selectOnMouseDown",!0),void 0!==b.selectOnClick&&f.setProp("selectOnClick",!0),void 0!==b.highlightOnMouseOver&&f.setProp("highlightOnMouseOver",!0),b.labelEditable&&f.setProp("labelEditable",b.labelEditable),b.labels&&!b.label&&(b.label=b.labels),void 0!==b.label){Array.isArray(b.label)||(b.label=[b.label]);for(var g=0,h=b.label.length;h>g;g++)f.showLabel(g),f.setLabelText(b.label[g].text,g),f.setLabelPosition(b.label[g].position,g),f.setLabelColor(b.label[g].color||"black",g),f.setLabelSize(b.label[g].size,g),f.setLabelAngle(b.label[g].angle||0,g),f.setLabelBaseline(b.label[g].baseline||"no-change",g),f.setLabelAnchor(b.label[g].anchor||"start",g)}return f.createHandles(),this.shapes.push(f),c||this.emit("newShape",f,b),f}},{key:"newPosition",value:function(a){return Array.prototype.unshift.call(arguments,null),new(Function.prototype.bind.apply(B["default"],arguments))}},{key:"redrawShapes",value:function(){for(var a=0,b=this.shapes.length;b>a;a++)this.shapes[a].redraw()}},{key:"removeShapes",value:function(){for(var a=0,b=this.shapes.length;b>a;a++)this.shapes[a]&&this.shapes[a].kill&&this.shapes[a].kill(!0);this.shapes=[]}},{key:"selectShape",value:function(a,b){if(a){if(this.selectedShapes.indexOf(a)>-1)return!1;if(!a.isSelectable())return!1;b||this.emit("beforeShapeSelect",a),this.prevent(!1)||(this.selectedShapes.length>0&&this.options.shapesUniqueSelection&&this.unselectShapes(b),a._select(b),this.selectedShapes.push(a),b||this.emit("shapeSelect",a))}}},{key:"unselectShape",value:function(a,b){if(-1!=this.selectedShapes.indexOf(a)){if(b||this.emit("beforeShapeUnselect",a),this.cancelUnselectShape)return void(this.cancelUnselectShape=!1);a._unselect(),this.selectedShapes.splice(this.selectedShapes.indexOf(a),1),b||this.emit("shapeUnselect",a)}}},{key:"unselectShapes",value:function(a){for(;this.selectedShapes[0];)this.unselectShape(this.selectedShapes[0],a);return this}},{key:"_removeShape",value:function(a){this.shapes.splice(this.shapes.indexOf(a),1)}},{key:"appendShapeToDom",value:function(a){this.getLayer(a.getLayer(),"shape").appendChild(a.group)}},{key:"removeShapeFromDom",value:function(a){this.getLayer(a.getLayer(),"shape").removeChild(a.group)}},{key:"appendSerieToDom",value:function(a){this.getLayer(a.getLayer(),"serie").appendChild(a.groupMain)}},{key:"removeSerieFromDom",value:function(a){this.getLayer(a.getLayer(),"serie").removeChild(a.groupMain)}},{key:"getLayer",value:function(a,b){if(!this.layers[a]){this.layers[a]=[],this.layers[a][0]=document.createElementNS(this.ns,"g"),this.layers[a][0].setAttribute("data-layer",a),this.layers[a][1]=document.createElementNS(this.ns,"g"),this.layers[a][2]=document.createElementNS(this.ns,"g"),this.layers[a][0].appendChild(this.layers[a][1]),this.layers[a][0].appendChild(this.layers[a][2]);for(var c,d=1;!(c=this.layers[a-d])&&a-d>=0;)d++;c?c.nextSibling?this.plotGroup.insertBefore(this.layers[a][0],c.nextSibling):this.plotGroup.appendChild(this.layers[a][0]):this.plotGroup.insertBefore(this.layers[a][0],this.plotGroup.firstChild)}return this.layers[a]["shape"==b?2:1]}},{key:"focus",value:function(){this._dom.focus()}},{key:"elementMoving",value:function(a){this.bypassHandleMouse=a}},{key:"stopElementMoving",value:function(a){a&&a==this.bypassHandleMouse?this.bypassHandleMouse=!1:a||(this.bypassHandleMouse=!1)}},{key:"_makeClosingLines",value:function(){this.closingLines={};for(var a=["top","bottom","left","right"],b=0,c=4;c>b;b++){var d=document.createElementNS(this.ns,"line");d.setAttribute("stroke","black"),d.setAttribute("shape-rendering","crispEdges"),d.setAttribute("stroke-linecap","square"),d.setAttribute("display","none"),this.closingLines[a[b]]=d,this.graphingZone.appendChild(d)}}},{key:"isMouseActionAllowed",value:function(a,b){return b.type===a.type||void 0===b.type&&"mousedown"===a.type||("wheel"===a.type||"mousewheel"===a.type)&&"mousewheel"==b.type?(void 0===b.shift&&(b.shift=!1),void 0===b.ctrl&&(b.ctrl=!1),void 0===b.meta&&(b.meta=!1),void 0===b.alt&&(b.alt=!1),a.shiftKey==b.shift&&a.ctrlKey==b.ctrl&&a.metaKey==b.meta&&a.altKey==b.alt):void 0}},{key:"forcePlugin",value:function(a){this.forcedPlugin=a}},{key:"unforcePlugin",value:function(){this.forcedPlugin=!1}},{key:"_pluginsExecute",value:function(a,b){for(var c in this.plugins)this.plugins[c]&&this.plugins[c][a]&&this.plugins[c][a].apply(this.plugins[c],b)}},{key:"_pluginExecute",value:function(a,b,c){a&&this.plugins[a]&&this.plugins[a][b]&&this.plugins[a][b].apply(this.plugins[a],c)}},{key:"_serieExecute",value:function(a,b,c){"object"!==("undefined"==typeof serie?"undefined":y(serie))&&(serie=this.getSerie(serie)),"function"==typeof serie[b]&&serie.apply(serie,c)}},{key:"_pluginsInit",value:function(){var a,b,c;for(var d in this.options.plugins)if(b=d,c=this.options.plugins[d],a=this.getConstructor("graph.plugin."+b)){var e=D.extend(!0,{},a.defaults(),c);this.plugins[b]=new a(e),D.mapEventEmission(this.plugins[b].options,this.plugins[b]),this.plugins[b].init(this,c)}else D.throwError('Plugin "'+b+'" has not been registered')}},{key:"getPlugin",value:function(a){var b=this.plugins[a];return b?b:D.throwError('Plugin "'+a+'" has not been loaded or properly registered')}},{key:"triggerEvent",value:function(){var a=arguments[0];Array.prototype.splice.apply(arguments,[0,1]);return"function"==typeof this.options[a]?this.options[a].apply(this,arguments):void 0}},{key:"makeLegend",value:function(a){if(this.legend)return this.legend;var b=this.getConstructor("graph.legend");return b?(this.legend=new b(this,a),this.legend.update(),this.legend):D.throwError("Graph legend is not available as it has not been registered")}},{key:"updateLegend",value:function(){this.legend&&this.legend.update()}},{key:"getLegend",value:function(){return this.legend?this.legend:void 0}},{key:"kill",value:function(){this._dom.removeChild(this.dom)}},{key:"_removeSerie",value:function(a){this.series.splice(this.series.indexOf(a),1)}},{key:"contextListen",value:function(a,b,c){return this.options.onContextMenuListen?this.options.onContextMenuListen(a,b,c):void 0}},{key:"lockShapes",value:function(){this.shapesLocked=!0;for(var a=0,b=this.shapes.length;b>a;a++)this.shapes[a].moving=!1,this.shapes[a].resizing=!1}},{key:"unlockShapes",value:function(){this.shapesLocked=!1}},{key:"prevent",value:function(a){var b=this.prevented;return-1!=a&&(this.prevented=void 0==a||a),b}},{key:"_getXY",value:function(a){var b=a.pageX,c=a.pageY,d=this.offsetCached||D.getOffset(this._dom);return b-=d.left,c-=d.top,{x:b,y:c}}},{key:"_resize",value:function(){this.width&&this.height&&(this.getDrawingWidth(),this.getDrawingHeight(),this.sizeSet=!0,this.dom.setAttribute("width",this.width),this.dom.setAttribute("height",this.height),this.domTitle.setAttribute("x",this.width/2),this.redraw(),this.drawSeries(!0),this.legend&&this.legend.update())}},{key:"_doDom",value:function(){this.dom=document.createElementNS(this.ns,"svg"),this.dom.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),D.setAttributeTo(this.dom,{xmlns:this.ns,"font-family":this.options.fontFamily,"font-size":this.options.fontSize}),this._dom.appendChild(this.dom),this._dom.setAttribute("tabindex",1),this._dom.style.outline="none",this.defs=document.createElementNS(this.ns,"defs"),this.dom.appendChild(this.defs),this.groupEvent=document.createElementNS(this.ns,"g"),this.rectEvent=document.createElementNS(this.ns,"rect"),D.setAttributeTo(this.rectEvent,{"pointer-events":"fill",fill:"transparent"}),this.groupEvent.appendChild(this.rectEvent),this.dom.appendChild(this.groupEvent),this.domTitle=document.createElementNS(this.ns,"text"),this.setTitle(this.options.title),D.setAttributeTo(this.domTitle,{"text-anchor":"middle",y:20}),this.groupEvent.appendChild(this.domTitle),this.graphingZone=document.createElementNS(this.ns,"g"),this.updateGraphingZone(),this.groupEvent.appendChild(this.graphingZone),this.axisGroup=document.createElementNS(this.ns,"g"),this.graphingZone.appendChild(this.axisGroup),
this.groupGrids=document.createElementNS(this.ns,"g"),this.groupGrids.setAttribute("clip-path","url(#_clipplot"+this._creation+")"),this.groupPrimaryGrids=document.createElementNS(this.ns,"g"),this.groupSecondaryGrids=document.createElementNS(this.ns,"g"),this.axisGroup.appendChild(this.groupGrids),this.groupGrids.appendChild(this.groupSecondaryGrids),this.groupGrids.appendChild(this.groupPrimaryGrids),this.plotGroup=document.createElementNS(this.ns,"g"),this.graphingZone.appendChild(this.plotGroup),this.layers=[],this._makeClosingLines(),this.clip=document.createElementNS(this.ns,"clipPath"),this.clip.setAttribute("id","_clipplot"+this._creation),this.defs.appendChild(this.clip),this.clipRect=document.createElementNS(this.ns,"rect"),this.clip.appendChild(this.clipRect),this.clip.setAttribute("clipPathUnits","userSpaceOnUse"),this.markerArrow=document.createElementNS(this.ns,"marker"),this.markerArrow.setAttribute("viewBox","0 0 10 10"),this.markerArrow.setAttribute("id","arrow"+this._creation),this.markerArrow.setAttribute("refX","6"),this.markerArrow.setAttribute("refY","5"),this.markerArrow.setAttribute("markerUnits","strokeWidth"),this.markerArrow.setAttribute("markerWidth","8"),this.markerArrow.setAttribute("markerHeight","6"),this.markerArrow.setAttribute("orient","auto");var a=document.createElementNS(this.ns,"path");a.setAttribute("d","M 0 0 L 10 5 L 0 10 z"),this.markerArrow.appendChild(a),this.defs.appendChild(this.markerArrow),this.markerHorizontalSplit=document.createElementNS(this.ns,"marker"),this.markerHorizontalSplit.setAttribute("viewBox","0 0 6 8"),this.markerHorizontalSplit.setAttribute("id","horionzalsplit_"+this.getId()),this.markerHorizontalSplit.setAttribute("refX","3"),this.markerHorizontalSplit.setAttribute("refY","4"),this.markerHorizontalSplit.setAttribute("markerUnits","strokeWidth"),this.markerHorizontalSplit.setAttribute("markerWidth","6"),this.markerHorizontalSplit.setAttribute("markerHeight","8");var b=document.createElementNS(this.ns,"line");b.setAttribute("x1","0"),b.setAttribute("y1","8"),b.setAttribute("x2","6"),b.setAttribute("y2","0"),b.setAttribute("stroke","black"),this.markerHorizontalSplit.appendChild(b),this.defs.appendChild(this.markerHorizontalSplit),this.markerVerticalSplit=document.createElementNS(this.ns,"marker"),this.markerVerticalSplit.setAttribute("viewBox","0 0 8 6"),this.markerVerticalSplit.setAttribute("id","verticalsplit_"+this.getId()),this.markerVerticalSplit.setAttribute("refX","4"),this.markerVerticalSplit.setAttribute("refY","3"),this.markerVerticalSplit.setAttribute("markerUnits","strokeWidth"),this.markerVerticalSplit.setAttribute("markerWidth","8"),this.markerVerticalSplit.setAttribute("markerHeight","6");var b=document.createElementNS(this.ns,"line");b.setAttribute("x1","0"),b.setAttribute("y1","0"),b.setAttribute("x2","8"),b.setAttribute("y2","6"),b.setAttribute("stroke","black"),this.markerVerticalSplit.appendChild(b),this.defs.appendChild(this.markerVerticalSplit),this.vertLineArrow=document.createElementNS(this.ns,"marker"),this.vertLineArrow.setAttribute("viewBox","0 0 10 10"),this.vertLineArrow.setAttribute("id","verticalline"+this._creation),this.vertLineArrow.setAttribute("refX","0"),this.vertLineArrow.setAttribute("refY","5"),this.vertLineArrow.setAttribute("markerUnits","strokeWidth"),this.vertLineArrow.setAttribute("markerWidth","20"),this.vertLineArrow.setAttribute("markerHeight","10"),this.vertLineArrow.setAttribute("orient","auto"),this.vertLineArrow.setAttribute("stroke-width","1px");var c=document.createElementNS(this.ns,"path");c.setAttribute("d","M 0 -10 L 0 10"),c.setAttribute("stroke","black"),this.vertLineArrow.appendChild(c),this.defs.appendChild(this.vertLineArrow),this.plotGroup.setAttribute("clip-path","url(#_clipplot"+this._creation+")"),this.bypassHandleMouse=!1}},{key:"updateGraphingZone",value:function(){D.setAttributeTo(this.graphingZone,{transform:"translate("+this.options.paddingLeft+", "+this.options.paddingTop+")"})}},{key:"trackingLine",value:function(a){var b=this;return a&&(this.options.trackingLine=a),"individual"==a.mode?a.series&&a.series.map(function(a){"object"!==y(a.serie)&&(a.serie=this.getSerie(a.serie)),b.addSerieToTrackingLine(a.serie,a)}):a.series.map(function(a){a.serie.disableTracking()}),this.trackingLine=this.newShape("line",D.extend(!0,{position:[{y:"min"},{y:"max"}],stroke:"black",layer:-1},a.trackingLineShapeOptions)),this.trackingLine.draw(),this.trackingLine}},{key:"addSerieToTrackingLine",value:function(a,b){var c=this;this.options.trackingLine||this.trackingLine({mode:"individual"}),a.enableTracking(function(a,d,e,f){if(d){c.trackingLine.show();d.xIndexClosest;c.trackingLine.getPosition(0).x=a.getData()[0][2*d.closestIndex],c.trackingLine.getPosition(1).x=a.getData()[0][2*d.closestIndex],c.trackingLine.redraw(),a._trackingLegend=J(c,{serie:a},e,f,a._trackingLegend,b.textMethod?b.textMethod:function(a){for(var b in a)return a[b].serie.serie.getName()+": "+a[b].serie.serie.getYAxis().valueToHtml(a[b].yValue)},c.trackingLine.getPosition(0).x),a._trackingLegend.style.display="block"}},function(a){c.trackingLine.hide(),a.trackingShape&&a.trackingShape.hide(),a._trackingLegend&&(a._trackingLegend.style.display="none"),a._trackingLegend=J(c,{serie:a},!1,!1,a._trackingLegend,!1,!1)})}}],[{key:"fromSchema",value:function(a,c){var d,e={},f={left:[],top:[],right:[],bottom:[]};return a.title&&(e.title=a.title),a.axis&&a.axis.map(function(a){a.type||D.throwError("Axis type is required (top, bottom, left or right)");var b={};a.label&&(b.labelValue=a.label),void 0!==a.unit&&(axisOption.unit=a.unit),void 0!==a.min&&(axisOption.forcedMin=a.min),void 0!==a.max&&(axisOption.forcedMax=a.max),void 0!==a.flip&&(axisOption.flipped=a.flip),f[a.type].push(b),a._jsGraphIndex=f[a.type].length-1}),d=new b(c,e,f),a.data&&a.data.map(function(b){var c,e,f,g=b.type;switch(b.type){case"bar":D.throwError("Bar charts not supported"),g=!1;break;case"scatter":g="scatter";break;default:g="line"}if(!g)return void D.throwError("No valid serie type was found");c=d.newSerie(b.label||D.guid(),e,g),b.lineStyle&&b.lineStyle.map(function(a){var b={};switch(a.styleName=a.styleName||"unselected",g){case"line":void 0!==a.lineWidth&&(b.lineWidth=a.lineWidth),void 0!==a.color&&(b.lineColor=a.color),a.lineStyle&&(b.lineStyle=a.lineStyle),c.setStyle(b,a.styleName)}}),b.style&&b.style.map(function(a){a.styleName=a.styleName||"unselected",Array.isArray(a.styles)||(a.styles=[a.styles]);var b=a.styles.map(function(a){switch(g){case"line":return{type:a.shape,zoom:a.zoom,strokeWidth:a.lineWidth,strokeColor:a.lineColor,fillColor:a.color,points:a.points};case"scatter":}});switch(g){case"line":c.setMarkers(b,a.styleName);break;case"scatter":c.setStyle(b,{},a.styleName)}});var h=[];if(b.errorX)for(var i=0,j=b.errorX.length;j>i;i++)h[i]=h[i]||[[],[]],h[i][0][0]=b.errorX[i];if(b.errorY)for(var i=0,j=b.errorY.length;j>i;i++)h[i]=h[i]||[[]],h[i][1][0]=b.errorY[i];c.setDataError(h).setErrorStyle([{type:"bar",x:{},y:{}}]),a.axis?(f=a.axis[b.xAxis],!f||"top"!==f.type&&"bottom"!==f.type?(D.warn("No x axis found. Setting automatically"),c.setXAxis(d.getXAxis(0))):"top"==f.type?c.setXAxis(d.getTopAxis(f._jsGraphIndex)):"bottom"==f.type&&c.setXAxis(d.getBottomAxis(f._jsGraphIndex)),f=a.axis[b.yAxis],!f||"left"!==f.type&&"right"!==f.type?(D.warn("No y axis found. Setting automatically"),c.setYAxis(d.getYAxis(0))):"left"==f.type?c.setYAxis(d.getLeftAxis(f._jsGraphIndex)):"right"==f.type&&c.setYAxis(d.getRightAxis(f._jsGraphIndex))):(D.warn("No axes found. Setting automatically"),c.autoAxis()),c.setData([{x:b.x,y:b.y}])}),d}},{key:"registerConstructor",value:function(a,b){return H[a]?D.throwError("Constructor "+b+" already exists."):void(H[a]=b)}},{key:"getConstructor",value:function(a){var b=H[a];return b?b:D.throwError('Constructor "'+a+"\" doesn't exist")}}]),b}(F["default"]);I.prototype.getConstructor=I.getConstructor;var J=function(a,b,c,d,e,f,g){var h=!1;Array.isArray(b)||(b=[b]);var i=[];if(e||(h=!0,e=p(a)),b.map(function(b){var d=b.serie.handleMouseMove(g,!1);return d&&f?void(b.withinPx>0&&Math.abs(c-a.options.paddingLeft-b.serie.getXAxis().getPx(b.serie.getData()[0][2*d.xIndexClosest]))-b.withinPx>1e-14||b.withinVal>0&&Math.abs(b.serie.getXAxis().getVal(c-a.options.paddingLeft)-b.serie.getData()[0][2*d.xIndexClosest])-b.withinVal>b.serie.getXAxis().getVal(c-a.options.paddingLeft)/1e5?b.serie.trackingShape&&b.serie.trackingShape.hide():(i[b.serie.getName()]={xIndex:d.xIndexClosest,yValue:b.serie.getData()[0][2*d.xIndexClosest+1],xValue:b.serie.getData()[0][2*d.xIndexClosest],serie:b,index:d},b.serie.trackingShape||(b.serie.trackingShape=a.newShape("ellipse",{fillColor:b.serie.getLineColor(),strokeColor:"White",strokeWidth:b.serie.getLineWidth()}).setSerie(b.serie).setProp("rx",3*b.serie.getLineWidth()).setProp("ry",3*b.serie.getLineWidth()).forceParentDom(b.serie.groupMain).draw()),b.serie.trackingShape.show(),b.serie.trackingShape.getPosition(0).x=b.serie.getData()[0][2*d.xIndexClosest],b.serie.trackingShape.redraw())):(b.serie.trackingShape&&b.serie.trackingShape.hide(),e)}),0!=Object.keys(i).length&&f){"none"==e.style.display||h?K(a,e,c,d,!0):L(a,e,c,d),e.style.display="block";var j=f(i,g,c,d);e.innerHTML=j}else e.style.display="none";return e},K=function(a,b,c,d,e){function f(){var a=(Date.now()-g)/200;a>1&&(a=1),b.style.marginLeft=(c-i)*a+i+"px",b.style.marginTop=(d-j)*a+j+"px",1>a&&window.requestAnimationFrame(f)}var g=Date.now(),h=b.offsetHeight,i=parseInt(b.style.marginLeft.replace("px","")||0),j=parseInt(b.style.marginTop.replace("px","")||0);return c=c>a.getWidth()/2?c-c%10-20-b.offsetWidth:c-c%10+30,d=d-d%10+h/2,e?(b.style.marginLeft=c+"px",void(b.style.marginTop=d+"px")):void window.requestAnimationFrame(f)},L=D.debounce(K,50);b["default"]=I},function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a){return a&&a.indexOf&&a.indexOf("px")>-1?parseInt(a.replace("px","")):!1}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(b,d,e,f){c(this,a),!(b instanceof Number)&&b instanceof Object?(this.x=b.x,this.y=b.y,this.dx=b.dx,this.dy=b.dy):(this.x=b,this.y=d,this.dx=e,this.dy=f)}return e(a,[{key:"compute",value:function(a,b,c,d){return a&&b&&c&&a.hasXAxis&&a.hasYAxis||this.graph["throw"](),a.hasXAxis(b)||a["throw"]("Graph does not contain the x axis that was used as a parameter"),a.hasYAxis(c)||a["throw"]("Graph does not contain the x axis that was used as a parameter"),this._compute(a,b,c,d)}},{key:"_compute",value:function(a,b,c,e){var f=this._relativeTo;if(f)var g=f._compute(a,b,c,e);var h,i={x:!1,y:!1};b||(b=a.getXAxis()),c||(c=a.getYAxis());for(var j in i){var k="x"==j?b:c,l=this[j],m=this["d"+j];if(void 0===l&&(void 0!==m&&void 0===f||void 0===f)){if("x"==j){if(void 0===m)continue;i[j]=f?f[j]:k.getPos(0)}else if(this.x&&e)if(d(this.x)!==!1)console.warn("You have defined x in px and not y. Makes no sense. Returning 0 for y"),i[j]=0;else{var n=e.searchClosestValue(this.x);n?i[j]=e.getY(n.yMin):(console.warn("Could not find y position for x = "+this.x+' on serie "'+e.getName()+'". Returning 0 for y.'),i[j]=0)}}else void 0!==l&&(i[j]=this.getPx(l,k));if(void 0!==m){var o=void 0!==l||void 0==g||void 0==g[j]?i[j]:g[j];if("y"==j&&g&&void 0!==g.x&&void 0==g.y){if(!e)throw"Error. No serie exists. Cannot find y value";var n=e.searchClosestValue(f.x);n&&(o=e.getY(n.yMin))}(h=d(m))!==!1?i[j]=o+h:(h=this._parsePercent(m))?i[j]=o+this._getPositionPx(h,!0,k,a):k&&(i[j]=o+k.getRelPx(m))}}return i}},{key:"_getPositionPx",value:function(a,b,c,e){var f;return(f=d(a))!==!1?f:(f=this._parsePercent(a))!==!1?f/100*(b?e.getDrawingWidth():e.getDrawingHeight()):c?c.getPos(a):void 0}},{key:"_parsePercent",value:function(a){return a&&a.indexOf&&a.indexOf("%")>-1?a:!1}},{key:"getDeltaPx",value:function(a,b){var c;return(c=d(a))!==!1?c+"px":b.getRelPx(a)+"px"}},{key:"deltaPosition",value:function(a,b,c){a="y"==a?"y":"x";var e,f,g=this[a],h=this["d"+a];if(void 0!==g)(e=d(g))!==!1?(f=d(b))!==!1?this[a]=e+f+"px":this[a]=e+c.getRelPx(b)+"px":(g=this.getValPosition(g,c),(f=d(b))!==!1?this[a]=g+c.getRelVal(f):this[a]=g+b);else if(void 0!==h){if("y"==a&&void 0===g&&!this._relativeTo)return;(e=d(h))!==!1?(f=d(b))!==!1?this["d"+a]=e+f+"px":this["d"+a]=e+c.getRelPx(b)+"px":(h=this.getValPosition(h,c),(f=d(b))!==!1?this["d"+a]=h+c.getRelVal(f):this["d"+a]=h+b)}}},{key:"getValPosition",value:function(a,b){return"max"==a?b.getMaxValue():"min"==a?b.getMinValue():a}},{key:"getPx",value:function(a,b,c){var e;return(e=d(a))!==!1?e:(e=this._parsePercent(a))?e:b?"min"==a?b.getMinPx():"max"==a?b.getMaxPx():c?b.getRelPx(a):b.getPos(a):void 0}},{key:"getPxRel",value:function(a,b){return this.getPx(a,b,!0)}},{key:"relativeTo",value:function(b){return this._relativeTo=a.check(b),this}}],[{key:"check",value:function(b,c){if(b instanceof a)return b;var d=new a(b);if(b&&b.relativeTo){var e;(e=c(b.relativeTo))&&d.relativeTo(e)}return d}}]),a}();b["default"]=f},function(a,b){"use strict";function c(a,b,c){var d;if(c)for(d in b)a.setAttributeNS(c,d,b[d]);else for(d in b)a.setAttribute(d,b[d])}function d(a,b){b||(b=this);var c;for(var d in a)0==d.indexOf("on")&&"function"==typeof a[d]&&(c=d.substring(2),c=c.substring(0,1).toLowerCase()+c.substring(1),b.on&&!function(d){b.on(c,function(){a[d].apply(b,arguments)})}(d))}function e(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"==a?b:3&b|8;return c.toString(16)})}function f(a){console.error(a)}function g(a){console.warn(a)}function h(a){return!Array.isArray(a)&&a-parseFloat(a)+1>=0}function i(a,b,c){return 0>c&&(c+=1),c>1&&(c-=1),1/6>c?a+6*(b-a)*c:.5>c?b:2/3>c?a+(b-a)*(2/3-c)*6:a}function j(a,b,c){var d,e,f;if(0==b)d=e=f=c;else{var g=.5>c?c*(1+b):c+b-c*b,h=2*c-g;d=util.hue2rgb(h,g,a+1/3),e=util.hue2rgb(h,g,a),f=util.hue2rgb(h,g,a-1/3)}return[Math.round(255*d),Math.round(255*e),Math.round(255*f)]}function k(a,b,c){if(a){a._savedAttributesIds=a._savedAttributesIds||[],a._savedAttributesIds.indexOf(c)>-1&&util.restoreDomAttributes(a,c),a._savedAttributes=a._savedAttributes||{},a._attributes=a._attributes||{},a._attributes[c]=b,a._savedAttributesIds.push(c);for(var d in b)a._savedAttributes[d]||(a._savedAttributes[d]=a.getAttribute(d)),a.setAttribute(d,b[d])}}function l(a,b){if(a&&a._savedAttributesIds){a._savedAttributesIds.splice(a._savedAttributesIds.indexOf(b),1),delete a._attributes[b];var c={};for(var d in a._savedAttributes)c[d]=a._savedAttributes[d];for(var d=0,e=a._savedAttributesIds.length;e>d;d++)for(var f in a._attributes[a._savedAttributesIds[d]])c[f]=a._attributes[a._savedAttributesIds[d]][f];for(var f in c)a.setAttribute(f,c[f])}}function m(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}}function n(a){var b=new DOMParser,c=b.parseFromString(a,"image/svg+xml");return c}function o(a){var b=null,c=null,d=a.length;for(b=0,c=d-1;c>b;b+=1,c-=1){var e=a[b];a[b]=a[c],a[c]=e}return a}function p(a){var b=a.getBoundingClientRect();return{top:b.top+document.body.scrollTop,left:b.left+document.body.scrollLeft}}function q(a,b){var c=a.style;for(var d in b)c[d]=b[d]}function r(a){return new Promise(function(b,c){var d=new XMLHttpRequest;d.open(a.type||"GET",a.url,!0),a.json&&d.setRequestHeader("Accept","application/json"),d.onload=function(){if(200===d.status){var e=d.responseText;a.json&&(e=JSON.parse(e)),b(e)}else c(new Error("Request error: "+d.status))},d.onerror=function(){c(new Error("Network error: "+d.status))},d.send()})}function s(){var a,b,c,d,e,f,g=arguments[0],h=1,i=arguments.length,j=!1;for("boolean"==typeof g?(j=g,g=arguments[1]||{},h=2):("object"!==("undefined"==typeof g?"undefined":u(g))&&"function"!=typeof g||null==g)&&(g={});i>h;++h)if(a=arguments[h],null!=a)for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(y(d)||(e=x(d)))?(e?(e=!1,f=c&&x(c)?c:[]):f=c&&y(c)?c:{},g[b]=s(j,f,d)):"undefined"!=typeof d&&(g[b]=d));return g}function t(a,b){for(var c in b)b.hasOwnProperty(c)&&(a.prototype[c]=b[c])}Object.defineProperty(b,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};b.setAttributeTo=c,b.mapEventEmission=d,b.guid=e,b.throwError=f,b.warn=g,b.isNumeric=h,b.hue2rgb=i,b.hslToRgb=j,b.saveDomAttributes=k,b.restoreDomAttributes=l,b.debounce=m,b.SVGParser=n,b.reverseArray=o,b.getOffset=p,b.setCSS=q,b.ajaxGet=r,b.extend=s,b.mix=t;var v=Object.prototype.hasOwnProperty,w=Object.prototype.toString,x=function(a){return"function"==typeof Array.isArray?Array.isArray(a):"[object Array]"===w.call(a)},y=function(a){if(!a||"[object Object]"!==w.call(a))return!1;var b=v.call(a,"constructor"),c=a.constructor&&a.constructor.prototype&&v.call(a.constructor.prototype,"isPrototypeOf");if(a.constructor&&!b&&!c)return!1;var d;for(d in a);return"undefined"==typeof d||v.call(a,d)};b.isArray=x,b.isPlainObject=y},function(a,b,c){var d,e,f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};d=[],e=function(){"use strict";function a(){}function b(a,b){for(var c=a.length;c--;)if(a[c].listener===b)return c;return-1}function c(a){return function(){return this[a].apply(this,arguments)}}var d=a.prototype;return d.getListeners=function(a){var b,c,d=this._getEvents();if(a instanceof RegExp){b={};for(c in d)d.hasOwnProperty(c)&&a.test(c)&&(b[c]=d[c])}else b=d[a]||(d[a]=[]);return b},d.flattenListeners=function(a){var b,c=[];for(b=0;b<a.length;b+=1)c.push(a[b].listener);return c},d.getListenersAsObject=function(a){var b,c=this.getListeners(a);return c instanceof Array&&(b={},b[a]=c),b||c},d.addListener=function(a,c){var d,e=this.getListenersAsObject(a),g="object"===("undefined"==typeof c?"undefined":f(c));for(d in e)e.hasOwnProperty(d)&&-1===b(e[d],c)&&e[d].push(g?c:{listener:c,once:!1});return this},d.on=c("addListener"),d.addOnceListener=function(a,b){return this.addListener(a,{listener:b,once:!0})},d.once=c("addOnceListener"),d.defineEvent=function(a){return this.getListeners(a),this},d.defineEvents=function(a){for(var b=0;b<a.length;b+=1)this.defineEvent(a[b]);return this},d.removeListener=function(a,c){var d,e,f=this.getListenersAsObject(a);for(e in f)f.hasOwnProperty(e)&&(d=b(f[e],c),-1!==d&&f[e].splice(d,1));return this},d.off=c("removeListener"),d.addListeners=function(a,b){return this.manipulateListeners(!1,a,b)},d.removeListeners=function(a,b){return this.manipulateListeners(!0,a,b)},d.manipulateListeners=function(a,b,c){var d,e,g=a?this.removeListener:this.addListener,h=a?this.removeListeners:this.addListeners;if("object"!==("undefined"==typeof b?"undefined":f(b))||b instanceof RegExp)for(d=c.length;d--;)g.call(this,b,c[d]);else for(d in b)b.hasOwnProperty(d)&&(e=b[d])&&("function"==typeof e?g.call(this,d,e):h.call(this,d,e));return this},d.removeEvent=function(a){var b,c="undefined"==typeof a?"undefined":f(a),d=this._getEvents();if("string"===c)delete d[a];else if(a instanceof RegExp)for(b in d)d.hasOwnProperty(b)&&a.test(b)&&delete d[b];else delete this._events;return this},d.removeAllListeners=c("removeEvent"),d.emitEvent=function(a,b){var c,d,e,f,g=this.getListenersAsObject(a);for(e in g)if(g.hasOwnProperty(e))for(d=g[e].length;d--;)c=g[e][d],c.once===!0&&this.removeListener(a,c.listener),f=c.listener.apply(this,b||[]),f===this._getOnceReturnValue()&&this.removeListener(a,c.listener);return this},d.trigger=c("emitEvent"),d.emit=function(a){var b=Array.prototype.slice.call(arguments,1);return this.emitEvent(a,b)},d.setOnceReturnValue=function(a){return this._onceReturnValue=a,this},d._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},d._getEvents=function(){return this._events||(this._events={})},a}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a){try{return a.getBBox()}catch(b){return{height:0,width:0,x:0,y:0}}}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=c(2),j=e(i),k=c(3),l=d(k),m={backgroundColor:"rgba(255, 255, 255, 0.8)",frame:!0,frameWidth:1,frameColor:"black",paddingTop:10,paddingLeft:10,paddingBottom:10,paddingRight:10,frameRounding:3,movable:!1,shapesToggleable:!0,isSerieHideable:!0,isSerieSelectable:!0},n=function(){function a(b,c){f(this,a),this.options=l.extend({},m,c),this.graph=b,this.svg=document.createElementNS(this.graph.ns,"g"),this.subG=document.createElementNS(this.graph.ns,"g"),this.groups=[],this.rect=document.createElementNS(this.graph.ns,"rect"),this.rectBottom=document.createElementNS(this.graph.ns,"rect"),this.rect.setAttribute("x",0),this.rect.setAttribute("y",0),this.rectBottom.setAttribute("x",0),this.rectBottom.setAttribute("y",0),this.series=!1,this.svg.setAttribute("display","none"),this.pos={x:void 0,y:void 0,transformX:0,transformY:0},this.setEvents(),this.eyeId=l.guid(),this.eyeCrossedId=l.guid();var d=l.SVGParser('<svg xmlns="http://www.w3.org/2000/svg"><symbol id="'+this.eyeCrossedId+'" viewBox="0 -256 1850 1850"><rect pointer-events="fill" fill="transparent" x="-256" y="0" width="2106" height="1850" /><g transform="matrix(1,0,0,-1,30.372881,1214.339)"><path d="m 555,201 78,141 q -87,63 -136,159 -49,96 -49,203 0,121 61,225 Q 280,812 128,576 295,318 555,201 z m 389,759 q 0,20 -14,34 -14,14 -34,14 -125,0 -214.5,-89.5 Q 592,829 592,704 q 0,-20 14,-34 14,-14 34,-14 20,0 34,14 14,14 14,34 0,86 61,147 61,61 147,61 20,0 34,14 14,14 14,34 z m 363,191 q 0,-7 -1,-9 Q 1201,954 991,576 781,198 675,9 l -49,-89 q -10,-16 -28,-16 -12,0 -134,70 -16,10 -16,28 0,12 44,87 Q 349,154 228.5,262 108,370 20,507 0,538 0,576 q 0,38 20,69 153,235 380,371 227,136 496,136 89,0 180,-17 l 54,97 q 10,16 28,16 5,0 18,-6 13,-6 31,-15.5 18,-9.5 33,-18.5 15,-9 31.5,-18.5 16.5,-9.5 19.5,-11.5 16,-10 16,-27 z m 37,-447 Q 1344,565 1265,450.5 1186,336 1056,286 l 280,502 q 8,-45 8,-84 z m 448,-128 q 0,-35 -20,-69 Q 1733,443 1663,362 1513,190 1315.5,95 1118,0 896,0 l 74,132 q 212,18 392.5,137 180.5,119 301.5,307 -115,179 -282,294 l 63,112 q 95,-64 182.5,-153 87.5,-89 144.5,-184 20,-34 20,-69 z" fill="#c0c0c0"></path></g></symbol></svg>'),e=l.SVGParser('<svg xmlns="http://www.w3.org/2000/svg"><symbol id="'+this.eyeId+'" viewBox="0 -256 1850 1850"><rect pointer-events="fill" x="-256" y="0" fill="transparent" width="2106" height="1850" /><g transform="matrix(1,0,0,-1,30.372881,1259.8983)"><path d="m 1664,576 q -152,236 -381,353 61,-104 61,-225 0,-185 -131.5,-316.5 Q 1081,256 896,256 711,256 579.5,387.5 448,519 448,704 448,825 509,929 280,812 128,576 261,371 461.5,249.5 662,128 896,128 1130,128 1330.5,249.5 1531,371 1664,576 z M 944,960 q 0,20 -14,34 -14,14 -34,14 -125,0 -214.5,-89.5 Q 592,829 592,704 q 0,-20 14,-34 14,-14 34,-14 20,0 34,14 14,14 14,34 0,86 61,147 61,61 147,61 20,0 34,14 14,14 14,34 z m 848,-384 q 0,-34 -20,-69 Q 1632,277 1395.5,138.5 1159,0 896,0 633,0 396.5,139 160,278 20,507 0,542 0,576 q 0,34 20,69 140,229 376.5,368 236.5,139 499.5,139 263,0 499.5,-139 236.5,-139 376.5,-368 20,-35 20,-69 z" fill="#444444" /></g></symbol></svg>');this.svg.appendChild(document.adoptNode(e.documentElement.firstChild)),this.svg.appendChild(document.adoptNode(d.documentElement.firstChild)),this.svg.appendChild(this.subG),this.applyStyle()}return h(a,[{key:"setPosition",value:function(a,b,c){a&&(this.position=a,this.alignToX=b,this.alignToY=c)}},{key:"setDraggable",value:function(a){this.options.movable=a}},{key:"setAutoPosition",value:function(a){return["bottom","left","top","right"].indexOf(a=a.toLowerCase())>-1?(this.autoPosition=a,this):void(this.autoPosition=!1)}},{key:"calculatePosition",value:function(){this.autoPosition?this.graph.getDom().appendChild(this.getDom()):this.graph.graphingZone.appendChild(this.getDom());for(var a=this.series||this.graph.getSeries(),b=0,c=this.options.paddingTop,d=0,e=a.length;e>d;d++)if(a[d].isInLegend()||this.series){if("bottom"==this.autoPosition||"top"==this.autoPosition){var f=g(this.groups[d]);b+f.width>this.graph.getDrawingWidth()-this.options.paddingRight&&(c+=16,b=0)}this.groups[d].setAttribute("transform","translate( "+b+", "+c+")"),"bottom"==this.autoPosition||"top"==this.autoPosition?(b+=f.width+10,c+=0):(b=0,c+=16)}var f=g(this.subG);switch(this.width=f.width+this.options.paddingRight+this.options.paddingLeft,this.height=f.height+this.options.paddingBottom+this.options.paddingTop,this.rect.setAttribute("width",this.width),this.rect.setAttribute("height",this.height),this.rect.setAttribute("fill","none"),this.rect.setAttribute("pointer-events","fill"),this.rect.setAttribute("display","none"),this.options.movable&&(this.rectBottom.style.cursor="move"),this.rectBottom.setAttribute("width",this.width),this.rectBottom.setAttribute("height",this.height),this.rectBottom.setAttribute("x",f.x-this.options.paddingTop),this.rectBottom.setAttribute("y",f.y-this.options.paddingLeft),this.position=this.position||{},this.autoPosition){case"bottom":this.position.y=this.graph.getHeight()+"px",this.position.x=(this.graph.getWidth()-this.width)/2+"px",this.alignToY="bottom",this.alignToX=!1;break;case"left":this.position.x="6px",this.position.y=(this.graph.getHeight()-this.height)/2+"px",this.alignToX="left",this.alignToY=!1;break;case"right":this.position.x=this.graph.getWidth()+"px",this.position.y=(this.graph.getHeight()-this.height)/2+"px",this.alignToX="right",this.alignToY=!1;break;case"top":this.position.x=(this.graph.getWidth()-this.width)/2+"px",this.position.y="10px",this.alignToY="top",this.alignToX=!1}var h=new j["default"](this.position),i=this.alignToY,k=this.alignToX;if(h=h.compute(this.graph,this.graph.getXAxis(),this.graph.getYAxis()),h&&("right"==k&&(h.x-=this.width),"bottom"==i&&(h.y-=this.height),this.pos.transformX=h.x,this.pos.transformY=h.y,this._setPosition(),this.autoPosition)){switch(this.autoPosition){case"bottom":this.graph.options.paddingBottom=this.height+10;break;case"left":this.graph.options.paddingLeft=this.width+5;break;case"right":this.graph.options.paddingRight=this.width+10;break;case"top":this.graph.options.paddingTop=this.height+14}this.graph.updateGraphingZone()}}},{key:"update",value:function(){var a=this;for(this.applyStyle();this.subG.hasChildNodes();)this.subG.removeChild(this.subG.lastChild);this.svg.insertBefore(this.rectBottom,this.svg.firstChild);var b=this.series||this.graph.getSeries();if(b.length>0){if(this.svg.setAttribute("display","block"),"bottom"==this.autoPosition||"top"==this.autoPosition){this.graph.getDrawingWidth()}for(var c=0,d=b.length;d>c;c++)(b[c].isInLegend()||this.series)&&function(c){var d,e,f;if("bottom"==this.autoPosition||"top"==this.autoPosition){this.graph.getDrawingWidth()}d=document.createElementNS(a.graph.ns,"g");var h=document.createElementNS(a.graph.ns,"rect");a.subG.appendChild(d),d.appendChild(h);var e=b[c].getSymbolForLegend(),i=b[c].getMarkerForLegend(),f=b[c].getTextForLegend(),j=35;if(this.isHideable()){j+=20;var k=document.createElementNS(a.graph.ns,"use");k.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","#"+this.eyeId),k.setAttribute("width",15),k.setAttribute("height",15),k.setAttribute("x",35),k.setAttribute("y",-8),k.addEventListener("click",function(d){d.stopPropagation();var e;b[c].isShown()?(b[c].hide(),e=a.eyeCrossedId):(b[c].show(),e=a.eyeId),k.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","#"+e)})}f.setAttribute("transform","translate("+j+", 3)"),d.appendChild(e),"scatter"==b[c].getType()&&e.setAttribute("transform","translate( 20, 0 )"),i&&d.appendChild(i),k&&d.appendChild(k),d.appendChild(f);var l=g(d);h.setAttribute("x",l.x),h.setAttribute("y",l.y),h.setAttribute("width",l.width),h.setAttribute("height",l.height),h.setAttribute("fill","none"),h.setAttribute("pointer-events","fill"),a.groups[c]=d,d.addEventListener("click",function(d){var e=b[c];a.isSelectable()&&!e.isSelected()?a.graph.selectSerie(e):a.graph.unselectSerie(e),d.preventDefault(),d.stopPropagation()})}.call(this,c);this.svg.appendChild(this.rect),this.calculatePosition()}}},{key:"isHideable",value:function(){return this.options.isSerieHideable}},{key:"notHideable",value:function(){return this.options.isSerieHideable=!1,this}},{key:"hideable",value:function(){return this.options.isSerieHideable=!0,this}},{key:"isSelectable",value:function(){return this.options.isSerieSelectable}},{key:"isToggleShapes",value:function(){return this.options.shapesToggleable}},{key:"getDom",value:function(){return this.svg}},{key:"setEvents",value:function(){var a=this,b=this.pos,c=function(c){c.stopPropagation(),a.options.movable&&(b.x=c.clientX,b.y=c.clientY,c.preventDefault(),a.mousedown=!0,a.graph.elementMoving(a),a.rect.setAttribute("display","block"))},d=function(b){a.handleMouseMove(b)};this.rectBottom.addEventListener("mousedown",c),this.svg.addEventListener("click",function(a){a.stopPropagation()}),this.svg.addEventListener("dblclick",function(a){a.stopPropagation()}),this.rectBottom.addEventListener("mousemove",d),this.rect.addEventListener("mousemove",d)}},{key:"handleMouseUp",value:function(a){a.stopPropagation(),a.preventDefault(),this.mousedown=!1,this.rect.setAttribute("display","none"),this.graph.elementMoving(!1)}},{key:"handleMouseMove",value:function(a){if(this.mousedown){var b=this.pos,c=a.clientX-b.x,d=a.clientY-b.y;b.transformX+=c,b.transformY+=d,b.x=a.clientX,b.y=a.clientY,a.stopPropagation(),a.preventDefault(),this._setPosition()}}},{key:"_setPosition",value:function(){var a=this.pos;isNaN(a.transformX)||isNaN(a.transformY)||a.transformX===!1||a.transformY===!1||this.svg.setAttribute("transform","translate("+a.transformX+", "+a.transformY+")")}},{key:"applyStyle",value:function(){this.options.frame&&(this.rectBottom.setAttribute("stroke",this.options.frameColor),this.rectBottom.setAttribute("stroke-width",this.options.frameWidth+"px"),this.rectBottom.setAttribute("rx",this.options.frameRounding),this.rectBottom.setAttribute("ry",this.options.frameRounding)),this.rectBottom.setAttribute("fill",this.options.backgroundColor)}},{key:"fixSeries",value:function(){var a=[];if(arguments[0]===!1)return this.series=!1,void this.update();for(var b=0,c=arguments.length;c>b;b++)Array.isArray(arguments[b])?a=a.concat(arguments[b]):a.push(arguments[b]);this.update(),this.series=a}},{key:"fixSeriesAdd",value:function(a){this.series=this.series||[],this.series.push(a)}},{key:"seriesHideable",set:function(a){this.options.isSerieHideable=!!a},get:function(){return this.options.isSerieHideable}}]),a}();b["default"]=n},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,
writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function m(a,b,c){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){var e=Object.getPrototypeOf(a);return null===e?void 0:m(e,b,c)}if("value"in d)return d.value;var f=d.get;return void 0===f?void 0:f.call(c)},j=c(7),k=d(j),l=function(a){function b(a,c,d){e(this,b);var g=f(this,Object.getPrototypeOf(b).call(this,a,c,d));return g.top="top"==c,g}return g(b,a),h(b,[{key:"getAxisPosition",value:function(){if(!this.options.display)return 0;var a=(1==this.options.tickPosition?8:20)+1*this.graph.options.fontSize;return this.getLabel()&&(a+=this.graph.options.fontSize),a}},{key:"isX",value:function(){return!0}},{key:"isY",value:function(){return!1}},{key:"setShift",value:function(a){this.shift=a,void 0!==this.getShift()&&this.graph.getDrawingHeight()&&this.group.setAttribute("transform","translate(0 "+(this.floating?this.getShift():this.top?this.shift:this.graph.getDrawingHeight()-this.shift)+")")}},{key:"getMaxSizeTick",value:function(){return(this.top?-1:1)*(1==this.options.tickPosition,10)}},{key:"drawTick",value:function(a,b,c,d){var e,f=this;if(e=d||this.getPos(a),void 0!=e&&!isNaN(e)){var g=this.nextTick(b,function(a){a.setAttribute("y1",(f.top?1:-1)*f.tickPx1*f.tickScaling[b]),a.setAttribute("y2",(f.top?1:-1)*f.tickPx2*f.tickScaling[b]),1==b?a.setAttribute("stroke",f.getPrimaryTicksColor()):a.setAttribute("stroke",f.getSecondaryTicksColor())});if(g.setAttribute("x1",e),g.setAttribute("x2",e),this.nextGridLine(1==b,e,e,0,this.graph.getDrawingHeight()),1==b){var h=this.nextTickLabel(function(a){a.setAttribute("y",(f.top?-1:1)*((1==f.options.tickPosition?8:20)+(f.top?10:0))),a.setAttribute("text-anchor","middle"),"black"!==f.getTicksLabelColor()&&a.setAttribute("fill",f.getTicksLabelColor()),a.style.dominantBaseline="hanging"});h.setAttribute("x",e),this.setTickContent(h,a,c)}return[g,h]}}},{key:"drawLabel",value:function(){this.label.setAttribute("text-anchor","middle"),this.label.setAttribute("x",Math.abs(this.getMaxPx()+this.getMinPx())/2),this.label.setAttribute("y",(this.top?-1:1)*((1==this.options.tickPosition?10:25)+this.graph.options.fontSize)),this.labelTspan.textContent=this.getLabel()}},{key:"draw",value:function(){var a=i(Object.getPrototypeOf(b.prototype),"draw",this).apply(this,arguments);return this.drawSpecifics(),a}},{key:"drawSpecifics",value:function(){console.log(this.getMinPx()),this.drawLabel(),this.line.setAttribute("x1",this.getMinPx()),this.line.setAttribute("x2",this.getMaxPx()),this.line.setAttribute("y1",0),this.line.setAttribute("y2",0),this.line.setAttribute("stroke",this.getAxisColor()),this.top||(this.labelTspan.style.dominantBaseline="hanging",this.expTspan.style.dominantBaseline="hanging",this.expTspanExp.style.dominantBaseline="hanging",this.unitTspan.style.dominantBaseline="hanging",this.preunitTspan.style.dominantBaseline="hanging");var a=this.getSpan();this.line.setAttribute("marker-start",this.options.splitMarks&&0!=a[0]?"url(#horionzalsplit_"+this.graph.getId()+")":""),this.line.setAttribute("marker-end",this.options.splitMarks&&1!=a[1]?"url(#horionzalsplit_"+this.graph.getId()+")":"")}},{key:"_draw0Line",value:function(a){this._0line||(this._0line=document.createElementNS(this.graph.ns,"line")),this._0line.setAttribute("x1",a),this._0line.setAttribute("x2",a),this._0line.setAttribute("y1",0),this._0line.setAttribute("y2",this.getMaxPx()),this._0line.setAttribute("stroke","black"),this.groupGrids.appendChild(this._0line)}},{key:"handleMouseMoveLocal",value:function(a,b,c){a-=this.graph.getPaddingLeft(),this.mouseVal=this.getVal(a)}},{key:"setMinMaxFlipped",value:function(){var a=this.maxPx-this.minPx;if(!isNaN(a)){var b=a*this.options.span[1]+this.minPx-this.options.marginMax,c=a*this.options.span[0]+this.minPx+this.options.marginMin;this.minPxFlipped=this.isFlipped()?b:c,this.maxPxFlipped=this.isFlipped()?c:b}}}]),b}(k["default"]);b["default"]=l},function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function h(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=c(4),k=e(j),l=c(3),m=d(l),n={lineAt0:!1,display:!0,flipped:!1,axisDataSpacing:{min:.1,max:.1},unitModification:!1,primaryGrid:!0,secondaryGrid:!0,primaryGridColor:"#f0f0f0",secondaryGridColor:"#f0f0f0",primaryGridWidth:1,secondaryGridWidth:1,shiftToZero:!1,tickPosition:1,nbTicksPrimary:3,nbTicksSecondary:10,ticklabelratio:1,exponentialFactor:0,exponentialLabelFactor:0,logScale:!1,forcedMin:!1,forcedMax:!1,span:[0,1],marginMin:0,marginMax:0,scientificScale:!1,scientificScaleExponent:!1,engineeringScale:!1,unit:!1,unitWrapperBefore:"",unitWrapperAfter:"",splitMarks:!1},o=function(a){function b(){return f(this,b),g(this,Object.getPrototypeOf(b).call(this))}return h(b,a),i(b,[{key:"init",value:function(a,b,c){this.unitModificationTimeTicks=[[1,[1,2,5,10,20,30]],[60,[1,2,5,10,20,30]],[3600,[1,2,6,12]],[86400,[1,2,3,4,5,10,20,40]]];var d=this;this.graph=a,this.options=m.extend(!0,{},n,c,b),this.group=document.createElementNS(this.graph.ns,"g"),this.hasChanged=!0,this.rectEvent=document.createElementNS(this.graph.ns,"rect"),this.rectEvent.setAttribute("pointer-events","fill"),this.rectEvent.setAttribute("fill","transparent"),this.group.appendChild(this.rectEvent),this.graph.axisGroup.appendChild(this.group),this.line=document.createElementNS(this.graph.ns,"line"),this.line.setAttribute("stroke","black"),this.line.setAttribute("shape-rendering","crispEdges"),this.line.setAttribute("stroke-linecap","square"),this.groupTicks=document.createElementNS(this.graph.ns,"g"),this.groupTickLabels=document.createElementNS(this.graph.ns,"g"),this.group.appendChild(this.groupTicks),this.group.appendChild(this.groupTickLabels),this.group.appendChild(this.line),this.labelValue,this.label=document.createElementNS(this.graph.ns,"text"),this.labelTspan=document.createElementNS(this.graph.ns,"tspan"),this.preunitTspan=document.createElementNS(this.graph.ns,"tspan"),this.unitTspan=document.createElementNS(this.graph.ns,"tspan"),this.expTspan=document.createElementNS(this.graph.ns,"tspan"),this.expTspanExp=document.createElementNS(this.graph.ns,"tspan"),this.label.appendChild(this.labelTspan),this.label.appendChild(this.preunitTspan),this.label.appendChild(this.unitTspan),this.label.appendChild(this.expTspan),this.label.appendChild(this.expTspanExp),this.preunitTspan.setAttribute("dx",6),this.expTspan.setAttribute("dx",6),this.expTspanExp.setAttribute("dy",-5),this.expTspanExp.setAttribute("font-size","0.8em"),this.label.setAttribute("text-anchor","middle"),this.setTickPosition(this.options.tickPosition),this.gridLinePath={primary:"",secondary:""},this.gridPrimary=document.createElementNS(this.graph.ns,"path"),this.gridSecondary=document.createElementNS(this.graph.ns,"path"),this.graph.groupPrimaryGrids.appendChild(this.gridPrimary),this.graph.groupSecondaryGrids.appendChild(this.gridSecondary),this.setGridLinesStyle(),this.group.appendChild(this.label),this.groupSeries=document.createElementNS(this.graph.ns,"g"),this.group.appendChild(this.groupSeries),this.widthHeightTick=0,this.ticks={},this.ticksLabels=[],this.tickScaling={1:3,2:2,3:1,4:.5},this.currentTick={},this.lastCurrentTick={},this.series=[],this.totalDelta=0,this.currentAction=!1,this.group.addEventListener("mousemove",function(a){a.preventDefault();var b=d.graph._getXY(a);d.handleMouseMoveLocal(b.x,b.y,a);for(var c=0,e=d.series.length;e>c;c++)d.series[c].handleMouseMove(!1,!0)}),this.labels=[],this.group.addEventListener("click",function(a){a.preventDefault();var b=d.graph._getXY(a);d.addLabel(d.getVal(b.x-d.graph.getPaddingLeft()))}),this.axisRand=Math.random(),this.clip=document.createElementNS(this.graph.ns,"clipPath"),this.clip.setAttribute("id","_clip"+this.axisRand),this.graph.defs.appendChild(this.clip),this.clipRect=document.createElementNS(this.graph.ns,"rect"),this.clip.appendChild(this.clipRect),this.clip.setAttribute("clipPathUnits","userSpaceOnUse")}},{key:"handleMouseMoveLocal",value:function(){}},{key:"hide",value:function(){return this.options.display=!1,this}},{key:"show",value:function(){return this.options.display=!0,this}},{key:"setDisplay",value:function(a){return this.options.display=!!a,this}},{key:"isDisplayed",value:function(){return this.options.display}},{key:"kill",value:function(a,b){this.graph.killAxis(this,a,b)}},{key:"setLineAt0",value:function(a){this.options.lineAt0=!!a}},{key:"adaptTo",value:function(a,b,c,d){return a?(this.options.adaptTo={axis:a,thisValue:b,foreignValue:c,preference:d},this.adapt(),this):(this.options.adaptTo=!1,this)}},{key:"adapt",value:function(){if(this.options.adaptTo){if(!a);var a=this.options.adaptTo.axis,b=this.options.adaptTo.thisValue,c=this.options.adaptTo.foreignValue;if((void 0===a.currentAxisMin||void 0===a.currentAxisMax)&&a.setMinMaxToFitSeries(),this.options.forcedMin!==!1&&0==this.options.forcedMax||"max"!==this.options.adaptTo.preference){this.options.forcedMin!==!1?this.currentAxisMin=this.options.forcedMin:this.currentAxisMin=this._zoomed?this.getCurrentMin():this.getMinValue()-(b-this.getMinValue())*(this.options.axisDataSpacing.min*(a.getCurrentMax()-a.getCurrentMin())/(c-a.getCurrentMin())),this.currentAxisMin==b&&(this.currentAxisMin-=this.options.axisDataSpacing.min*this.getInterval());var d=this.options.forcedMin!==!1?this.options.forcedMin:this.currentAxisMin;this.currentAxisMax=(b-d)*(a.getCurrentMax()-a.getCurrentMin())/(c-a.getCurrentMin())+d}else{this.options.forcedMax!==!1?this.currentAxisMax=this.options.forcedMax:this.currentAxisMax=this._zoomed?this.getCurrentMax():this.getMaxValue()+(this.getMaxValue()-b)*(this.options.axisDataSpacing.max*(a.getCurrentMax()-a.getCurrentMin())/(a.getCurrentMax()-c)),this.currentAxisMax==b&&(this.currentAxisMax+=this.options.axisDataSpacing.max*this.getInterval());var d=this.options.forcedMax!==!1?this.options.forcedMax:this.currentAxisMax;this.currentAxisMin=(b-d)*(a.getCurrentMin()-a.getCurrentMax())/(c-a.getCurrentMax())+d}this.graph._axisHasChanged(this)}}},{key:"setFloating",value:function(a,b){return this.floating=!0,this.floatingAxis=a,this.floatingValue=b,this}},{key:"getFloatingAxis",value:function(){return this.floatingAxis}},{key:"getFloatingValue",value:function(){return this.floatingValue}},{key:"setAxisDataSpacing",value:function(a,b){return this.options.axisDataSpacing.min=a,this.options.axisDataSpacing.max=b||a,this}},{key:"dataSpacing",value:function(){return this.setAxisDataSpacing.apply(this,arguments)}},{key:"setAxisDataSpacingMin",value:function(a){this.options.axisDataSpacing.min=a}},{key:"setAxisDataSpacingMax",value:function(a){this.options.axisDataSpacing.max=a}},{key:"setMinPx",value:function(a){this.minPx=a,this.setMinMaxFlipped()}},{key:"setMaxPx",value:function(a){this.maxPx=a,this.setMinMaxFlipped()}},{key:"getMinPx",value:function(){return this.minPxFlipped}},{key:"getMaxPx",value:function(a){return this.maxPxFlipped}},{key:"getMathMaxPx",value:function(){return this.maxPx}},{key:"getMathMinPx",value:function(){return this.minPx}},{key:"getMinValue",value:function(){return this.options.forcedMin!==!1?this.options.forcedMin:this.dataMin}},{key:"getMaxValue",value:function(){return this.options.forcedMax!==!1?this.options.forcedMax:this.dataMax}},{key:"setMinValueData",value:function(a){this.dataMin=a}},{key:"setMaxValueData",value:function(a){this.dataMax=a}},{key:"forceMin",value:function(a,b){return this.options.forcedMin=a,this.setCurrentMin(b?this.getCurrentMin():void 0),this.graph._axisHasChanged(this),this}},{key:"forceMax",value:function(a,b){return this.options.forcedMax=a,this.setCurrentMax(b?this.getCurrentMax():void 0),this.graph._axisHasChanged(this),this}},{key:"getForcedMin",value:function(){return this.options.forcedMin}},{key:"getForcedMax",value:function(){return this.options.forcedMax}},{key:"forceToAxis",value:function(a){return a.getMaxValue&&a.getMinValue&&(this.options.forcedMin=a.getMinValue(),this.options.forcedMax=a.getMaxValue()),this}},{key:"getNbTicksPrimary",value:function(){return this.options.nbTicksPrimary}},{key:"getNbTicksSecondary",value:function(){return this.options.nbTicksSecondary}},{key:"handleMouseMove",value:function(a,b){this.mouseVal=this.getVal(a)}},{key:"handleMouseWheel",value:function(a,b,c){a=Math.min(.2,Math.max(-.2,a)),"min"==c?c=this.getMinValue():"max"==c?c=this.getMaxValue():c||(c=0),this._doZoomVal((this.getCurrentMax()-c)*(1+a)+c,(this.getCurrentMin()-c)*(1+a)+c),this.graph.draw()}},{key:"zoom",value:function(a,b,c){return c||!this.zoomLock?this._doZoomVal(a,b,!0):void 0}},{key:"_doZoomVal",value:function(a,b,c){return this._doZoom(this.getPx(a),this.getPx(b),a,b,c)}},{key:"_doZoom",value:function(a,b,c,d,e){var c=void 0!==c?c:this.getVal(a),d=void 0!==d?d:this.getVal(b);return this.setCurrentMin(Math.min(c,d)),this.setCurrentMax(Math.max(c,d)),this.cacheCurrentMin(),this.cacheCurrentMax(),this.cacheInterval(),this._zoomed=!0,this.adapt(),this._hasChanged=!0,e||this.emit("zoom",[this.currentAxisMin,this.currentAxisMax,this]),this}},{key:"getSerieShift",value:function(){return this._serieShift}},{key:"getSerieScale",value:function(){return this._serieScale}},{key:"getMouseVal",value:function(){return this.mouseVal}},{key:"getUnitPerTick",value:function(a,b,c){var d,e=a/r;b=b?Math.min(b,a/10):a/10;var f=c/b;switch(this.options.unitModification){case"time":case"time:min.sec":var g=this.getModifiedValue(this.getMaxValue());d=3600>g?0:86400>g?1:2;for(var h=!1,i=0,j=this.unitModificationTimeTicks.length;j>i;i++){for(var k=0,l=this.unitModificationTimeTicks[i][1].length;l>k;k++)if(f<this.unitModificationTimeTicks[i][0]*this.unitModificationTimeTicks[i][1][k]){h=!0;break}if(h)break}q=i!==this.unitModificationTimeTicks.length?this.unitModificationTimeTicks[i][0]*this.unitModificationTimeTicks[i][1][k]:1;break;default:var m=Math.floor(Math.log(f)/Math.log(10)),n=f*Math.pow(10,-m);this.decimals=-m;for(var o=[1,2,5,10],p=!1,i=o.length-1;i>=0;i--)(!p||Math.abs(o[i]-n)<Math.abs(p-n))&&(p=o[i]);var q=p*Math.pow(10,m)}var r=c/q,e=a/b;return[q,r,e]}},{key:"setMinMaxToFitSeries",value:function(a){var b=this.getInterval();return this.options.logScale?(this.currentAxisMin=Math.max(1e-50,.9*this.getMinValue()),this.currentAxisMax=Math.max(1e-50,1.1*this.getMaxValue())):(this.currentAxisMin=this.getMinValue(),this.currentAxisMax=this.getMaxValue(),this.getForcedMin()===!1&&(this.currentAxisMin-=this.options.axisDataSpacing.min*b),this.getForcedMax()===!1&&(this.currentAxisMax+=this.options.axisDataSpacing.max*b)),(isNaN(this.currentAxisMin)||isNaN(this.currentAxisMax))&&(this.currentAxisMax=void 0,this.currentAxisMin=void 0),this.cacheCurrentMin(),this.cacheCurrentMax(),this.cacheInterval(),this._zoomed=!1,this.adapt(),a||this.graph._axisHasChanged(this),this.emit("zoomOutFull",[this.currentAxisMin,this.currentAxisMax,this]),this}},{key:"getInterval",value:function(){return this.getMaxValue()-this.getMinValue()}},{key:"getCurrentInterval",value:function(){return this.cachedInterval}},{key:"getCurrentMin",value:function(){return this.cachedCurrentMin}},{key:"getCurrentMax",value:function(){return this.cachedCurrentMax}},{key:"cacheCurrentMin",value:function(){this.cachedCurrentMin=this.currentAxisMin==this.currentAxisMax?this.options.logScale?this.currentAxisMin/10:this.currentAxisMin-1:this.currentAxisMin}},{key:"cacheCurrentMax",value:function(){this.cachedCurrentMax=this.currentAxisMax==this.currentAxisMin?this.options.logScale?10*this.currentAxisMax:this.currentAxisMax+1:this.currentAxisMax}},{key:"cacheInterval",value:function(){this.cachedInterval=this.cachedCurrentMax-this.cachedCurrentMin}},{key:"setCurrentMin",value:function(a){return(void 0===a||this.getForcedMin()!==!1&&a<this.getForcedMin())&&(a=this.getMinValue()),this.currentAxisMin=a,this.options.logScale&&(this.currentAxisMin=Math.max(1e-50,a)),this.graph._axisHasChanged(this),this}},{key:"setCurrentMax",value:function(a){(void 0===a||this.getForcedMax()!==!1&&a>this.getForcedMax())&&(a=this.getMaxValue()),this.currentAxisMax=a,this.options.logScale&&(this.currentAxisMax=Math.max(1e-50,a)),this.graph._axisHasChanged(this)}},{key:"flip",value:function(a){return this.options.flipped=a,this.setMinMaxFlipped(),this}},{key:"isFlipped",value:function(){return this.options.flipped}},{key:"_draw",value:function(){var a=this;this.cacheCurrentMax(),this.cacheCurrentMin(),this.cacheInterval(),(void 0==this.currentAxisMin||void 0==this.currentAxisMax)&&this.setMinMaxToFitSeries(!0);var b=Math.abs(this.getMaxPx()-this.getMinPx()),c=this.getCurrentInterval();if(!this.options.display)return this.line.setAttribute("display","none"),0;this.line.setAttribute("display","block"),1==this.options.scientificScale?this.options.scientificScaleExponent?this.scientificExponent=this.options.scientificScaleExponent:this.scientificExponent=Math.floor(Math.log(Math.max(Math.abs(this.getCurrentMax()),Math.abs(this.getCurrentMin())))/Math.log(10)):this.scientificExponent=0,this.gridLinePath.primary="",this.gridLinePath.secondary="",this.writeUnit();var d;if(this.options.unitDecade&&this.options.unit&&0!==this.scientificExponent&&(this.scientificExponent=this.getEngineeringExponent(this.scientificExponent))&&(d=this.getExponentGreekLetter(this.scientificExponent))?(this.preunitTspan.innerHTML=d,this.preunitTspan.setAttribute("display","visible"),this.unitTspan.setAttribute("dx",0)):0===this.scientificExponent||isNaN(this.scientificExponent)?(this.options.unit||this.unitTspan.setAttribute("display","none"),this.preunitTspan.setAttribute("display","none"),this.expTspan.setAttribute("display","none"),this.expTspanExp.setAttribute("display","none")):(this.options.engineeringScale&&(this.scientificExponent=this.getEngineeringExponent(this.scientificExponent)),this.preunitTspan.textContent="",this.preunitTspan.setAttribute("display","none"),this.expTspan.setAttribute("display","visible"),this.expTspanExp.setAttribute("display","visible"),this.expTspan.textContent="x10",this.expTspanExp.textContent=this.scientificExponent),this.options.hideTicks)var e=0;else if(this.resetTicksLength(),this.linkedToAxis){this.linkedToAxis.deltaPx=10;var e=this.drawLinkedToAxisTicksWrapper(b,c)}else if(this.options.logScale)var e=this.drawLogTicks();else var e=this.drawLinearTicksWrapper(b,c);this.removeUselessTicks(),this.removeUselessTickLabels(),this.gridPrimary.setAttribute("d",this.gridLinePath.primary),this.gridSecondary.setAttribute("d",this.gridLinePath.secondary);var f=this.graph.findAxesLinkedTo(this);return f.map(function(b){b.linkedToAxis&&(b.setMinPx(a.getMinPx()),b.setMaxPx(a.getMaxPx()),b.draw())}),this.options.lineAt0&&this.getCurrentMin()<0&&this.getCurrentMax()>0&&this._draw0Line(this.getPx(0)),e}},{key:"writeUnit",value:function(){this.options.unit?(this.unitTspan.setAttribute("display","visible"),this.unitTspan.setAttribute("dx",5),this.expTspan.setAttribute("display","none"),this.expTspanExp.setAttribute("display","none"),this.unitTspan.innerHTML=this.options.unitWrapperBefore+this.options.unit.replace(/\^([-+0-9]*)/g,"<tspan dy='-5' font-size='0.7em'>$1</tspan>")+this.options.unitWrapperAfter):this.unitTspan.setAttribute("display","none")}},{key:"getExponentGreekLetter",value:function(a){switch(a){case 3:return"k";case 6:return"M";case 9:return"G";case 12:return"T";case 15:return"E";case-3:return"m";case-6:return"&mu;";case-9:return"n";case-12:return"p";case-15:return"f"}}},{key:"drawLinearTicksWrapper",value:function(a,b){var c=void 0;return this.options.primaryTickUnit?c=this.options.primaryTickUnit:(c=this.getUnitPerTick(a,this.getNbTicksPrimary(),b)[0],this.options.maxPrimaryTickUnit&&this.options.maxPrimaryTickUnit<c?c=this.options.maxPrimaryTickUnit:this.options.minPrimaryTickUnit&&this.options.minPrimaryTickUnit>c&&(c=this.options.minPrimaryTickUnit)),this.drawTicks(c,this.secondaryTicks())}},{key:"forcePrimaryTickUnit",value:function(a){this.options.primaryTickUnit=a}},{key:"forcePrimaryTickUnitMax",value:function(a){this.options.maxPrimaryTickUnit=a}},{key:"forcePrimaryTickUnitMin",value:function(a){this.options.minPrimaryTickUnit=a}},{key:"getPrimaryTickUnit",value:function(){return this.incrTick}},{key:"setTickLabelRatio",value:function(a){this.options.ticklabelratio=a}},{key:"draw",value:function(){this._widthLabels=0;var a=this._draw();return this._widthLabels+=a,a}},{key:"drawTicks",value:function(a,b){var c,d,e,f=a,g=this.getCurrentMin(),h=this.getCurrentMax(),i=0;for(b&&(c=f/b),d=this.options.shiftToZero?this.dataMin-Math.ceil((this.dataMin-g)/f)*f:Math.floor(g/f)*f,this.incrTick=a;h>=d&&(i++,!(i>200));){if(b){e=d+c,this.subIncrTick=e;for(var j=0;d+f>e&&(j++,!(j>100));)g>e||e>h?e+=c:(this.drawTickWrapper(e,!1,Math.abs(e-d-f/2)<1e-4?2:3),e+=c)}g>d||d>h?d+=a:(this.drawTickWrapper(d,!0,1),d+=a)}return this.widthHeightTick=this.getMaxSizeTick(),this.widthHeightTick}},{key:"nextTick",value:function(a,b){if(this.ticks[a]=this.ticks[a]||[],this.lastCurrentTick[a]=this.lastCurrentTick[a]||0,this.currentTick[a]=this.currentTick[a]||0,this.currentTick[a]>=this.ticks[a].length){var c=document.createElementNS(this.graph.ns,"line");this.groupTicks.appendChild(c),this.ticks[a].push(c),b(c)}var c=this.ticks[a][this.currentTick[a]];return this.currentTick[a]>=this.lastCurrentTick[a]&&c.setAttribute("display","visible"),this.currentTick[a]++,c}},{key:"nextTickLabel",value:function(a){if(this.ticksLabels=this.ticksLabels||[],this.lastCurrentTickLabel=this.lastCurrentTickLabel||0,this.currentTickLabel=this.currentTickLabel||0,this.currentTickLabel>=this.ticksLabels.length){var b=document.createElementNS(this.graph.ns,"text");this.groupTickLabels.appendChild(b),this.ticksLabels.push(b),a(b)}var b=this.ticksLabels[this.currentTickLabel];return this.currentTickLabel>=this.lastCurrentTickLabel&&b.setAttribute("display","visible"),this.currentTickLabel++,b}},{key:"removeUselessTicks",value:function(){for(var a in this.currentTick){for(var b=this.currentTick[a];b<this.ticks[a].length;b++)this.ticks[a][b].setAttribute("display","none");this.lastCurrentTick[a]=this.currentTick[a],this.currentTick[a]=0}}},{key:"removeUselessTickLabels",value:function(){for(var a=this.currentTickLabel;a<this.ticksLabels.length;a++)this.ticksLabels[a].setAttribute("display","none");this.lastCurrentTickLabel=this.currentTickLabel,this.currentTickLabel=0}},{key:"nextGridLine",value:function(a,b,c,d,e){(a&&this.options.primaryGrid||!a&&this.options.secondaryGrid)&&(this.gridLinePath[a?"primary":"secondary"]+="M "+b+" "+d+" L "+c+" "+e)}},{key:"setGridLineStyle",value:function(a,b){a.setAttribute("shape-rendering","crispEdges"),a.setAttribute("stroke",b?this.getPrimaryGridColor():this.getSecondaryGridColor()),a.setAttribute("stroke-width",b?this.getPrimaryGridWidth():this.getSecondaryGridWidth()),a.setAttribute("stroke-opacity",b?this.getPrimaryGridOpacity():this.getSecondaryGridOpacity());var c;(c=b?this.getPrimaryGridDasharray():this.getSecondaryGridDasharray())&&a.setAttribute("stroke-dasharray",c)}},{key:"setGridLinesStyle",value:function(){return this.setGridLineStyle(this.gridPrimary,!0),this.setGridLineStyle(this.gridSecondary,!1),this}},{key:"resetTicksLength",value:function(){}},{key:"secondaryTicks",value:function(){return this.options.nbTicksSecondary}},{key:"drawLogTicks",value:function(){var a=this.getCurrentMin(),b=this.getCurrentMax(),c=Math.min(a,b),b=Math.max(a,b);1e-50>c&&(c=1e-50),Math.log(c)-Math.log(b)>20&&(b=Math.pow(10,20*Math.log(c)));var d={fontSize:"1.0em",exponential:!0,overwrite:!1};0>c&&(c=0);for(var e,f=0==c?0:Math.floor(Math.log(c)/Math.log(10)),c=1;(e=c*Math.pow(10,f))<b;)1==c&&e>a&&this.drawTickWrapper(e,!0,1,d),10==c?(c=1,f++):(1!=c&&e>a&&this.drawTickWrapper(e,!1,2,{overwrite:"",fontSize:"0.6em"}),c++);return this.widthHeightTick=this.getMaxSizeTick(),this.widthHeightTick}},{key:"drawTickWrapper",value:function(a,b,c,d){this.drawTick(a,c,d)}},{key:"linkToAxis",value:function(a,b,c){this.linkedToAxis={axis:a,scalingFunction:b,decimals:c||1}}},{key:"drawLinkedToAxisTicksWrapper",value:function(a,b){var c,d,e,f,g=this.linkedToAxis,h=0,i=0;g.deltaPx||(g.deltaPx=10);do{if(c=g.scalingFunction(g.axis.getVal(h+this.getMinPx())),g.decimals&&(this.decimals=g.decimals),d=this.drawTick(c,1,{},h+this.getMinPx()),!d){console.log(c,h,this.getMinPx()),console.error("Problem here");break}if(e=8*String(d[1].textContent).length,f=5*Math.round(e/5),f>g.deltaPx)return g.deltaPx=f,void this.drawLinkedToAxisTicksWrapper(a,b);i++,h+=g.deltaPx}while(a>h)}},{key:"getPos",value:function(a){return this.getPx(a)}},{key:"getPx",value:function(a){if(this.options.logScale){if(0>a)return;var a=(Math.log(a)-Math.log(this.getCurrentMin()))/(Math.log(this.getCurrentMax())-Math.log(this.getCurrentMin()))*(this.getMaxPx()-this.getMinPx())+this.getMinPx();return a}return(a-this.getCurrentMin())/this.getCurrentInterval()*(this.getMaxPx()-this.getMinPx())+this.getMinPx()}},{key:"getRoundedPx",value:function(a){return Math.round(10*this.getPx(a))/10}},{key:"getVal",value:function(a){return this.options.logScale?Math.exp((a-this.getMinPx())/(this.getMaxPx()-this.getMinPx())*(Math.log(this.getCurrentMax())-Math.log(this.getCurrentMin()))+Math.log(this.getCurrentMin())):(a-this.getMinPx())/(this.getMaxPx()-this.getMinPx())*this.getCurrentInterval()+this.getCurrentMin()}},{key:"getRelPx",value:function(a){return a/this.getCurrentInterval()*(this.getMaxPx()-this.getMinPx())}},{key:"getRelVal",value:function(a){return a/(this.getMaxPx()-this.getMinPx())*this.getCurrentInterval()}},{key:"valueToText",value:function(a){if(this.scientificExponent)return a/=Math.pow(10,this.scientificExponent),a.toFixed(1);if(a=a*Math.pow(10,this.getExponentialFactor())*Math.pow(10,this.getExponentialLabelFactor()),this.options.shiftToZero&&(a-=this.dataMin),this.options.ticklabelratio&&(a*=this.options.ticklabelratio),this.options.unitModification)return a=this.modifyUnit(a,this.options.unitModification);var b=this.decimals-this.getExponentialFactor()-this.getExponentialLabelFactor();return isNaN(a)?"":b>0?a.toFixed(b):a.toFixed(0)}},{key:"valueToHtml",value:function(a,b,c){var d,e=this.valueToText(a);return this.options.unitDecade&&this.options.unit&&0!==this.scientificExponent&&(this.scientificExponent=this.getEngineeringExponent(this.scientificExponent))&&(d=this.getExponentGreekLetter(this.scientificExponent))?e+=d:0===this.scientificExponent||isNaN(this.scientificExponent)||b||(e+="x10",e+="<sup>"+this.scientificExponent+"</sup>"),this.options.unit&&!c&&(e+=this.options.unit.replace(/\^([-+0-9]*)/g,"<sup>$1</sup>")),e}},{key:"getModifiedValue",value:function(a){return this.options.ticklabelratio&&(a*=this.options.ticklabelratio),this.options.shiftToZero&&(a-=this.getMinValue()*(this.options.ticklabelratio||1)),a}},{key:"modifyUnit",value:function(a,b){var c="",d=this.incrTick;switch(b){case"time":var e,f,g=this.getModifiedValue(this.getMaxValue()),h=[[60,"min"],[3600,"h"],[86400,"d"]];if(3600>g?f=0:86400>g?f=1:2592e3>g&&(f=2),!h[f])return!1;a/=h[f][0];var i=Math.floor(a);for(c=i+h[f][1],f--;d<1*h[f+1][0]&&f>-1;)e=!1,a=(a-i)*h[f+1][0]/h[f][0],i=Math.round(a),c+=" "+i+h[f][1],f--;break;case"time:min.sec":a/=60;var i=Math.floor(a),j=Math.round(60*(a-i))+"";j=1==j.length?"0"+j:j,c=i+"."+j}return c}},{key:"getExponentialFactor",value:function(){return this.options.exponentialFactor}},{key:"setExponentialFactor",value:function(a){this.options.exponentialFactor=a}},{key:"setExponentialLabelFactor",value:function(a){this.options.exponentialLabelFactor=a}},{key:"getExponentialLabelFactor",value:function(){return this.options.exponentialLabelFactor}},{key:"setLabel",value:function(a){return this.options.labelValue=a,this}},{key:"getLabel",value:function(){return this.options.labelValue}},{key:"setSpan",value:function(a,b){return this.options.span=[a,b],this}},{key:"getSpan",value:function(){return this.options.span}},{key:"setLevel",value:function(a){return this._level=a,this}},{key:"getLevel",value:function(){return this._level}},{key:"setShift",value:function(a){this.shift=a}},{key:"getShift",value:function(){return this.shift}},{key:"setTickPosition",value:function(a){switch(a){case 3:case"outside":a=3;break;case 2:case"centered":a=2;break;default:case 1:case"inside":a=1}switch(this.options.tickPosition=a,this.options.tickPosition){case 3:this.tickPx1=-2,this.tickPx2=0;break;case 2:this.tickPx1=-1,this.tickPx2=1;break;case 1:this.tickPx1=0,this.tickPx2=2}return this}},{key:"setGrids",value:function(a){return this.options.primaryGrid=a,this.options.secondaryGrid=a,this}},{key:"setPrimaryGrid",value:function(a){return this.options.primaryGrid=a,this}},{key:"setSecondaryGrid",value:function(a){return this.options.secondaryGrid=a,this}},{key:"primaryGridOn",value:function(){return this.setPrimaryGrid(!0)}},{key:"primaryGridOff",value:function(){return this.setPrimaryGrid(!1)}},{key:"secondaryGridOn",value:function(){return this.setSecondaryGrid(!0)}},{key:"secondaryGridOff",value:function(){return this.setSecondaryGrid(!1)}},{key:"gridsOn",value:function(){return this.setGrids(!0)}},{key:"gridsOff",value:function(){return this.setGrids(!1)}},{key:"setAxisColor",value:function(a){return this.options.axisColor=a,this}},{key:"getAxisColor",value:function(a){return this.options.axisColor||"black"}},{key:"setPrimaryTicksColor",value:function(a){return this.options.primaryTicksColor=a,this}},{key:"getPrimaryTicksColor",value:function(a){return this.options.primaryTicksColor||"black"}},{key:"setSecondaryTicksColor",value:function(a){return this.options.secondaryTicksColor=a,this}},{key:"getSecondaryTicksColor",value:function(a){return this.options.secondaryTicksColor||"black"}},{key:"setTicksLabelColor",value:function(a){return this.options.ticksLabelColor=a,this}},{key:"getTicksLabelColor",value:function(a){return this.options.ticksLabelColor||"black"}},{key:"setPrimaryGridColor",value:function(a){return this.options.primaryGridColor=a,this}},{key:"getPrimaryGridColor",value:function(){return this.options.primaryGridColor}},{key:"setSecondaryGridColor",value:function(a){return this.options.secondaryGridColor=a,this}},{key:"getSecondaryGridColor",value:function(){return this.options.secondaryGridColor}},{key:"setPrimaryGridWidth",value:function(a){return this.options.primaryGridWidth=a,this}},{key:"getPrimaryGridWidth",value:function(){return this.options.primaryGridWidth}},{key:"setSecondaryGridWidth",value:function(a){return this.options.secondaryGridWidth=a,this}},{key:"getSecondaryGridWidth",value:function(){return this.options.secondaryGridWidth}},{key:"setPrimaryGridOpacity",value:function(a){return this.options.primaryGridOpacity=a,this}},{key:"getPrimaryGridOpacity",value:function(){return this.options.primaryGridOpacity;
}},{key:"setSecondaryGridOpacity",value:function(a){return this.options.secondaryGridOpacity=a,this}},{key:"getSecondaryGridOpacity",value:function(){return this.options.secondaryGridOpacity}},{key:"setPrimaryGridDasharray",value:function(a){return this.options.primaryGridDasharray=a,this}},{key:"getPrimaryGridDasharray",value:function(){return this.options.primaryGridDasharray}},{key:"setSecondaryGridDasharray",value:function(a){return this.options.secondaryGridDasharray=a,this}},{key:"getSecondaryGridDasharray",value:function(){return this.options.secondaryGridDasharray}},{key:"setLabelColor",value:function(a){this.options.labelColor=a}},{key:"getLabelColor",value:function(){return this.options.labelColor}},{key:"setTickContent",value:function(a,b,c){if(c||(c={}),c.overwrite||!c.exponential)a.textContent=c.overwrite||this.valueToText(b);else{var d=Math.round(Math.log(b)/Math.log(10)),e=Math.floor(b*Math.pow(10,-d));a.textContent=1!=e?e+"x10":"10";var f=document.createElementNS(this.graph.ns,"tspan");f.textContent=d,f.setAttribute("font-size","0.7em"),f.setAttribute("dy",-5),a.appendChild(f)}c.fontSize&&a.setAttribute("font-size",c.fontSize)}},{key:"isX",value:function(){return!1}},{key:"isY",value:function(){return!1}},{key:"setUnit",value:function(a){return this.options.unit=a,this}},{key:"setUnitWrapper",value:function(a,b){return this.options.unitWrapperBefore=a,this.options.unitWrapperAfter=b,this}},{key:"setUnitDecade",value:function(a){return this.options.unitDecade=a,this}},{key:"setScientific",value:function(a){return this.options.scientificScale=a,this}},{key:"setScientificScaleExponent",value:function(a){return this.options.scientificScaleExponent=a,this}},{key:"setEngineering",value:function(a){return this.options.scientificScale=a,this.options.engineeringScale=a,this}},{key:"getEngineeringExponent",value:function(a){return a-=a>0?a%3:(3- -a%3)%3}},{key:"setLogScale",value:function(a){return this.options.logScale=a,this}},{key:"isZoomed",value:function(){return!(this.currentAxisMin==this.getMinValue()||this.currentAxisMax==this.getMaxValue())}},{key:"zoomLock",set:function(a){this._zoomLocked=a},get:function(){return this._zoomLocked||!1}}]),b}(k["default"]);o.prototype.getValue=o.prototype.getVal,o.prototype.getDeltaPx=o.prototype.getRelPx,o.prototype.turnGridsOff=o.prototype.gridsOff,o.prototype.turnGridsOn=o.prototype.gridsOn,b["default"]=o},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function m(a,b,c){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){var e=Object.getPrototypeOf(a);return null===e?void 0:m(e,b,c)}if("value"in d)return d.value;var f=d.get;return void 0===f?void 0:f.call(c)},j=c(7),k=d(j),l=function(a){function b(a,c,d){e(this,b);var g=f(this,Object.getPrototypeOf(b).call(this,a,c,d));return g.leftright=c,g.left="left"==c,g}return g(b,a),h(b,[{key:"setAxisPosition",value:function(a){this.shiftPosition=a}},{key:"getAxisPosition",value:function(a){return this.shiftPosition||0}},{key:"getAdditionalWidth",value:function(){var a=0;return this.getLabel()&&(a+=this.graph.options.fontSize),a+=Math.abs(this.tickMargin)}},{key:"isX",value:function(){return!1}},{key:"isY",value:function(){return!0}},{key:"resetTicksLength",value:function(){this.longestTick=[!1,0]}},{key:"getMaxSizeTick",value:function(){return this.longestTick&&this.longestTick[0]?this.longestTick[0].getComputedTextLength():0}},{key:"draw",value:function(){this.tickMargin=this.left?-5-this.tickPx1*this.tickScaling[1]:5+this.tickPx1*this.tickScaling[1];var a=i(Object.getPrototypeOf(b.prototype),"draw",this).apply(this,arguments);return a+=this.getAdditionalWidth(),this.drawSpecifics(a),a}},{key:"drawTick",value:function(a,b,c,d){var e,f,g=this;this.groupTicks;if(e=d||this.getPos(a),void 0!=e&&!isNaN(e)){var h=this.nextTick(b,function(a){a.setAttribute("x1",(g.left?1:-1)*g.tickPx1*g.tickScaling[b]),a.setAttribute("x2",(g.left?1:-1)*g.tickPx2*g.tickScaling[b]),1==b?a.setAttribute("stroke",g.getPrimaryTicksColor()):a.setAttribute("stroke",g.getSecondaryTicksColor())});if(h.setAttribute("y1",e),h.setAttribute("y2",e),this.nextGridLine(1==b,0,this.graph.getDrawingWidth(),e,e),1==b){var f=this.nextTickLabel(function(a){a.setAttribute("x",g.tickMargin),"black"!==g.getTicksLabelColor()&&a.setAttribute("fill",g.getTicksLabelColor()),g.left?a.setAttribute("text-anchor","end"):a.setAttribute("text-anchor","start"),a.style.dominantBaseline="central"});f.setAttribute("y",e),this.setTickContent(f,a,c),String(f.textContent).length>=this.longestTick[1]&&(this.longestTick[0]=f,this.longestTick[1]=String(f.textContent).length)}}}},{key:"drawLabel",value:function(){var a=this.shift-this.getAxisPosition();a=this.left?-a:a,this.placeLabel(a),"black"!==this.getLabelColor()&&this.label.setAttribute("fill",this.getLabelColor()),this.label.setAttribute("dominant-baseline",this.left?"hanging":"auto"),this.labelTspan.textContent=this.getLabel()}},{key:"placeLabel",value:function(a){this.label.setAttribute("transform","translate("+a+", "+Math.abs(this.getMaxPx()+this.getMinPx())/2+") rotate(-90)")}},{key:"drawSpecifics",value:function(){this.line.setAttribute("y1",this.getMinPx()),this.line.setAttribute("y2",this.getMaxPx()),this.line.setAttribute("x1",0),this.line.setAttribute("x2",0),this.line.setAttribute("stroke",this.getAxisColor());var a=this.getSpan();this.line.setAttribute("marker-start",this.options.splitMarks&&0!=a[0]?"url(#verticalsplit_"+this.graph.getId()+")":""),this.line.setAttribute("marker-end",this.options.splitMarks&&1!=a[1]?"url(#verticalsplit_"+this.graph.getId()+")":"")}},{key:"setShift",value:function(a){if(this.shift=a,this.shift&&this.graph.getWidth()){var b=this.shift;b=this.floating?b:this.isLeft()?b:this.graph.getWidth()-this.graph.getPaddingRight()-this.graph.getPaddingLeft()-b,this.group.setAttribute("transform","translate( "+b+" 0 )"),this.drawLabel()}}},{key:"isLeft",value:function(){return this.left}},{key:"isRight",value:function(){return!this.left}},{key:"isFlipped",value:function(){return!this.options.flipped}},{key:"_draw0Line",value:function(a){this._0line||(this._0line=document.createElementNS(this.graph.ns,"line")),this._0line.setAttribute("y1",a),this._0line.setAttribute("y2",a),this._0line.setAttribute("x1",0),this._0line.setAttribute("x2",this.graph.getDrawingWidth()),this._0line.setAttribute("stroke","black"),this.groupGrids.appendChild(this._0line)}},{key:"handleMouseMoveLocal",value:function(a,b,c){b-=this.graph.getPaddingTop(),this.mouseVal=this.getVal(b)}},{key:"scaleToFitAxis",value:function(a,b,c,d,e,f){a&&a.isX()||(a=this.graph.getXAxis()),isNaN(c)&&(c=a.getCurrentMin()),isNaN(d)&&(d=a.getCurrentMax()),void 0===e&&(e=!0),void 0===f&&(f=!0),"number"==typeof b&&(d=c,c=b,b=!1);for(var g=-(1/0),h=1/0,i=0,j=0,k=this.graph.series.length;k>j;j++)this.graph.series[j].isShown()&&this.graph.series[j]!=b&&this.graph.series[j].getXAxis()==a&&this.graph.series[j].getYAxis()===this&&(i++,g=f?Math.max(g,this.graph.series[j].getMax(c,d)):0,h=e?Math.min(h,this.graph.series[j].getMin(c,d)):0);if(0==i)this.setMinMaxToFitSeries();else{h=e?h:this.getCurrentMin(),g=f?g:this.getCurrentMax();var l=g-h;h-=this.options.axisDataSpacing.min*l,g+=this.options.axisDataSpacing.max*l,this._doZoomVal(h,g)}return this}},{key:"setMinMaxFlipped",value:function(){var a=this.maxPx-this.minPx;if(!isNaN(a)){var b=this.maxPx-a*this.options.span[0]-this.options.marginMin,c=this.maxPx-a*this.options.span[1]+this.options.marginMax;this.minPxFlipped=this.isFlipped()?b:c,this.maxPxFlipped=this.isFlipped()?c:b}}}]),b}(k["default"]);b["default"]=l},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=c(6),k=d(j),l=function(a){function b(a,c,d){return e(this,b),f(this,Object.getPrototypeOf(b).call(this,a,c,d))}return g(b,a),i(b,[{key:"draw",value:function(){var a,b=this,c=(this.graph.drawingSpaceWidth,this._barCategories);if(this.forceMin(0),this.forceMax(1),this.cacheCurrentMin(),this.cacheCurrentMax(),this.cacheInterval(),c){Array.isArray(c)||(c=[c]),this.drawInit();for(var d=0;d<=c.length;d++)this.drawTick(d/c.length,2),d<c.length&&(a=this.nextTickLabel(function(a){a.setAttribute("y",(b.top?-1:1)*((1==b.options.tickPosition?8:20)+(b.top?10:0))),a.setAttribute("text-anchor","middle"),"black"!==b.getTicksLabelColor()&&a.setAttribute("fill",b.getTicksLabelColor()),a.style.dominantBaseline="hanging"}),a.setAttribute("x",this.getPos((d+.5)/c.length)),a.textContent=c[d].title);return this.drawSpecifics(),this}}},{key:"setSeries",value:function(){var a=this;return this.series=arguments,Array.prototype.map.call(this.series,function(b,c){"object"!=("undefined"==typeof b?"undefined":h(b))&&(b=a.graph.getSerie(b)),b.setBarConfig&&b.setBarConfig(c,a._barCategories,a.series.length)}),this}},{key:"categories",set:function(a){return this._barCategories=a,this}}]),b}(k["default"]);b["default"]=l},function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b,c){this.wrapper={1:document.createElementNS(a.ns,"g"),2:document.createElementNS(a.ns,"g")},this.groups={1:[],2:[]};var d=document.createElementNS(a.ns,"rect");d.setAttribute("fill","#c0c0c0"),d.setAttribute("stroke","#808080"),d.setAttribute("height","20"),d.setAttribute("x","0"),d.setAttribute("y","0"),this.rect=d,this.wrapper[1].appendChild(this.rect),this.group.appendChild(this.wrapper[1]),this.group.appendChild(this.wrapper[2]),this.wrapper[1].setAttribute("transform","translate( 0, 25 )"),this.wrapper[2].setAttribute("transform","translate( 0, 00 )")}function g(a,b){return Math.round(a/b)*b}function h(a,b){switch(b.unit){case"s":a.setSeconds(g(a.getSeconds(),b.increment)),a.setMilliseconds(0);break;case"i":a.setMinutes(g(a.getMinutes(),b.increment)),a.setSeconds(0),a.setMilliseconds(0);break;case"h":a.setHours(g(a.getHours(),b.increment)),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0);break;case"d":a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),a.setHours(0),a.setDate(g(a.getDate(),b.increment));break;case"m":a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),a.setHours(0),a.setDate(1),a.setMonth(g(a.getMonth(),b.increment));break;case"y":a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),a.setHours(0),a.setDate(1),a.setMonth(0);break;default:throw"Date format not recognized"}return a}function i(a,b){switch(b.unit){case"s":a.setSeconds(a.getSeconds()+b.increment),a.setMilliseconds(0);break;case"i":a.setMinutes(a.getMinutes()+b.increment),a.setSeconds(0),a.setMilliseconds(0);break;case"h":a.setHours(a.getHours()+b.increment),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0);break;case"d":a.setDate(a.getDate()+b.increment),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),a.setHours(0);break;case"m":a.setMonth(a.getMonth()+b.increment),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),a.setHours(0),a.setDate(1);break;case"y":a.setFullYear(a.getFullYear()+b.increment),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),a.setHours(0),a.setDate(1),a.setMonth(0);break;default:throw"Date format not recognized"}return a}function j(a,b,c){if(a.groups[b][c])return a.groups[b][c].group.setAttribute("display","block"),a.groups[b][c];var d={group:document.createElementNS(a.graph.ns,"g"),text:document.createElementNS(a.graph.ns,"text")},e=document.createElementNS(a.graph.ns,"line");switch(e.setAttribute("stroke","black"),e.setAttribute("y1",0),b){case 2:e.setAttribute("y2",6),d.text.setAttribute("y",15),d.line=e,d.group.appendChild(d.line);break;case 1:e.setAttribute("y2",20),d.text.setAttribute("y",10),d.line1=e,d.line2=e.cloneNode(),d.group.appendChild(d.line1),d.group.appendChild(d.line2)}return d.text.setAttribute("text-anchor","middle"),d.text.setAttribute("dominant-baseline","middle"),d.group.appendChild(d.text),a.getWrapper(b).appendChild(d.group),a.groups[b][c]=d}function k(a,b,c){for(;c<a.groups[b].length;c++)l(a.groups[b][c])}function l(a){a.group.setAttribute("display","none")}function m(a,b){return s(a,b)}function n(a,b,c,d,e,f,g){switch(a){case 1:var h=Math.max(d,Math.min(e,f)),i=Math.max(d,Math.min(e,g));if(isNaN(i)||isNaN(h))return;for(b.line1.setAttribute("x1",h),b.line2.setAttribute("x1",i),b.line1.setAttribute("x2",h),b.line2.setAttribute("x2",i),b.text.setAttribute("x",(h+i)/2);8*c.length>i-h;)if(c=c.substr(0,c.length-2)+".",1==c.length){c="";break}b.text.textContent=c;break;case 2:if(d>f||f>e)return void l(b);b.line.setAttribute("x1",f),b.line.setAttribute("x2",f),b.text.setAttribute("x",f),b.text.textContent=c}}Object.defineProperty(b,"__esModule",{value:!0});var o=c(7),p=e(o),q=c(3),r=d(q),s=function(){var a=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[WLloSZ]|"[^"]*"|'[^']*'/g,b=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,c=/[^-+\dA-Z]/g,d=function(a,b){for(a=String(a),b=b||2;a.length<b;)a="0"+a;return a},e=function(a,b){var c=new Date(a[b+"FullYear"](),0,1);return Math.ceil(((a-c)/864e5+c[b+"Day"]()+1)/7)};return function(f,g,h){var i=s;if(1!=arguments.length||"[object String]"!=Object.prototype.toString.call(f)||/\d/.test(f)||(g=f,f=void 0),f=f?new Date(f):new Date,isNaN(f))throw SyntaxError("invalid date:"+f);g=String(i.masks[g]||g||i.masks["default"]),"UTC:"==g.slice(0,4)&&(g=g.slice(4),h=!0);var j=h?"getUTC":"get",k=f[j+"Date"](),l=f[j+"Day"](),m=f[j+"Month"](),n=f[j+"FullYear"](),o=f[j+"Hours"](),p=f[j+"Minutes"](),q=f[j+"Seconds"](),r=f[j+"Milliseconds"](),t=h?0:f.getTimezoneOffset(),u={d:k,dd:d(k),ddd:i.i18n.dayNames[l],dddd:i.i18n.dayNames[l+7],m:m+1,mm:d(m+1),mmm:i.i18n.monthNames[m],mmmm:i.i18n.monthNames[m+12],yy:String(n).slice(2),yyyy:n,h:o%12||12,hh:d(o%12||12),H:o,HH:d(o),M:p,MM:d(p),s:q,ss:d(q),l:d(r,3),L:d(r>99?Math.round(r/10):r),t:12>o?"a":"p",tt:12>o?"am":"pm",T:12>o?"A":"P",TT:12>o?"AM":"PM",Z:h?"UTC":(String(f).match(b)||[""]).pop().replace(c,""),o:(t>0?"-":"+")+d(100*Math.floor(Math.abs(t)/60)+Math.abs(t)%60,4),S:["th","st","nd","rd"][k%10>3?0:(k%100-k%10!=10)*k%10],W:e(f,j)};return g.replace(a,function(a){return a in u?u[a]:a.slice(1,a.length-1)})}}();s.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"},s.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},f.prototype=new p["default"],f.prototype.draw=function(){this.drawInit(),this.cacheCurrentMax(),this.cacheCurrentMin(),(void 0==this.currentAxisMin||void 0==this.currentAxisMax)&&this.setMinMaxToFitSeries(!0),this.line.setAttribute("x1",this.getMinPx()),this.line.setAttribute("x2",this.getMaxPx()),this.line.setAttribute("y1",0),this.line.setAttribute("y2",0);var a=this.maxPx-this.minPx,b=this.getCurrentInterval(),c=b/a,d=this.getCurrentMax(),e=this.getCurrentMin();if(this.rect.setAttribute("width",a),this.rect.setAttribute("x",this.minPx),!d||!e)return 0;var f,g=[{threshold:20,increments:{1:{increment:1,unit:"i",format:'HH"h"MM (dd/mm/yy)'},2:{increment:1,unit:"s",format:'MM:ss"s"'}}},{threshold:50,increments:{1:{increment:1,unit:"i",format:'HH"h"MM (dd/mm/yy)'},2:{increment:2,unit:"s",format:'MM:ss"s"'}}},{threshold:100,increments:{1:{increment:1,unit:"i",format:'HH"h"MM (dd/mm/yy)'},2:{increment:5,unit:"s",format:'MM:ss"s"'}}},{threshold:600,increments:{1:{increment:10,unit:"i",format:'HH"h"MM (dd/mm/yy)'},2:{increment:30,unit:"s",format:'MM:ss"s"'}}},{threshold:1e3,increments:{1:{increment:1,unit:"h",format:'HH"h"MM (dd/mm/yy)'},2:{increment:10,unit:"i",format:'MM"min"'}}},{threshold:1500,increments:{1:{increment:1,unit:"d",format:"dd/mm/yyyy"},2:{increment:1,unit:"i",format:'H"h"MM'}}},{threshold:3e3,increments:{1:{increment:1,unit:"d",format:"dd/mm/yyyy"},2:{increment:2,unit:"i",format:'H"h"MM'}}},{threshold:8e3,increments:{1:{increment:1,unit:"d",format:"dd/mm/yyyy"},2:{increment:10,unit:"i",format:'H"h"MM'}}},{threshold:26400,increments:{1:{increment:1,unit:"d",format:"dd/mm/yyyy"},2:{increment:20,unit:"i",format:'H"h"MM'}}},{threshold:86400,increments:{1:{increment:1,unit:"d",format:"dd/mm/yyyy"},2:{increment:1,unit:"h",format:'H"h"MM'}}},{threshold:2e5,increments:{1:{increment:1,unit:"d",format:"dd/mm/yyyy"},2:{increment:2,unit:"h",format:'H"h"MM'}}},{threshold:4e5,increments:{1:{increment:1,unit:"d",format:"dd/mm/yyyy"},2:{increment:6,unit:"h",format:'H"h"MM'}}},{threshold:14e5,increments:{1:{increment:1,unit:"d",format:"dd/mm/yyyy"},2:{increment:12,unit:"h",format:'HH"h"MM'}}},{threshold:64e5,increments:{1:{increment:1,unit:"m",format:"mmmm yyyy"},2:{increment:1,unit:"d",format:"dd"}}},{threshold:124e5,increments:{1:{increment:1,unit:"m",format:"mmmm yyyy"},2:{increment:2,unit:"d",format:"dd"}}},{threshold:432e5,increments:{1:{increment:1,unit:"m",format:"mmmm yyyy"},2:{increment:7,unit:"d",format:"dd"}}},{threshold:6912e4,increments:{1:{increment:1,unit:"m",format:"mmmm yyyy"},2:{increment:15,unit:"d",format:"dd"}}},{threshold:864e5,increments:{1:{increment:1,unit:"y",format:"yyyy"},2:{increment:3,unit:"m",format:"mm/yyyy"}}},{threshold:1728e5,increments:{1:{increment:1,unit:"y",format:"yyyy"},2:{increment:4,unit:"m",format:"mm/yyyy"}}},{threshold:864e6,increments:{1:{increment:1,unit:"y",format:"yyyy"},2:{increment:6,unit:"m",format:"mm/yyyy"}}},{threshold:10368e5,increments:{1:{increment:1,unit:"y",format:"yyyy"},2:{increment:1,unit:"y",format:"yyyy"}}}];for(u=0;u<g.length;u++)if(g[u].threshold>c){f=g[u];break}f||(f=g[g.length-1]);var l,o,p,q,s,t,u,v=0;for(v=1;2>=v;v++){if(!r.isNumeric(e)){k(this,v,0);break}p=new Date(e),q=h(p,f.increments[v]),u=0;do if(s=m(q,f.increments[v].format),t=j(this,v,u),l=this.getPx(q.getTime()),q=i(q,f.increments[v]),o=this.getPx(q.getTime()),n(v,t,s,this.getMinPx(),this.getMaxPx(),l,o),u++,u>100)break;while(q.getTime()<d);k(this,v,u)}},f.prototype.isX=function(){return!0},f.prototype.getWrapper=function(a){return this.wrapper[a]},f.prototype.setShift=function(a,b){this.shift=a,this.group.setAttribute("transform","translate(0 "+(this.top?this.shift:this.graph.getDrawingHeight()-this.shift)+")")},f.prototype.getAxisPosition=function(){return 60},f.prototype.setMinMaxFlipped=function(){var a=this.maxPx-this.minPx,b=a*this.options.span[1]+this.minPx,c=a*this.options.span[0]+this.minPx;this.minPxFlipped=this.isFlipped()?b:c,this.maxPxFlipped=this.isFlipped()?c:b},b["default"]=f},function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function h(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function i(a,b,c,d,e){if(b){if(a.options.markersIndependant){var f=a.getMarkerDomIndependant(a.counter1,a.counter2,b),g="M "+c+" "+d+" ";g+=b.markerPath+" ",f.setAttribute("d",g)}e.path=e.path||"",e.path+="M "+c+" "+d+" ",e.path+=b.markerPath+" "}}function j(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p=0,q=a.data.length,r=0,s=[],t=0,u=1,v=a.isXMonotoneous(),w=a.getXAxis().getMathMaxPx();a.isFlipped()&&(t=1,u=0);var x=[],y=[],z=[],A=0;if("x_equally_separated"==a.mode){if(a.isFlipped())return[a.data,a.xData];for(z=[];q>p;p++){r=0,f=0,g=a.data[p].length;var B=Math.round(a.degradationPx/a.getXAxis().getRelPx(a.xData[p].dx));for(1==B&&(y.push(a.xData[p]),x.push(a.data[p])),h=1/0,i=-(1/0);g>r;r+=1)if(b=a.xData[p].x+r*a.xData[p].dx,v&&0>b)o=[b,c,a.data[p][r]];else{if(v&&o&&(A+=o[2],h=Math.min(h,o[2]),i=Math.max(i,o[2]),o=!1,f++),A+=a.data[p][r],h=Math.min(h,a.data[p][r]),i=Math.max(i,a.data[p][r]),(r%B==0&&r>0||n)&&(z.push(A/B),s.push(a.xData[p].x+r*a.xData[p].dx-B/2*a.xData[p].dx,h,i),h=1/0,i=-(1/0),A=0),v&&b>w){n=!0;break}f++}x.push(z),y.push({dx:B*a.xData[p].dx,x:a.xData[p].x+B*a.xData[p].dx/2})}return a.degradationSerie&&(a.degradationSerie.setData(s),a.degradationSerie.draw()),[x,y]}for(;q>p;p++){r=0,f=0,g=a.data[p].length,j=0,k=0,h=1/0,i=-(1/0);for(var C=[];g>r;r+=2)if(d=a.getX(a.data[p][r+t]),v&&0>d)o=[d,a.getY(a.data[p][r+u]),a.data[p][r+t],a.data[p][r+u]];else{if(v&&o?(k+=o[3],j++,h=Math.min(h,o[3]),i=Math.max(i,o[3]),l=o[2],m=o[0],o=!1,f++):void 0===l&&(l=a.data[p][r+t],m=d),Math.abs(d-m)>a.degradationPx&&g>r){if(C.push((l+a.data[p][r+t])/2,k/j),s.push((a.data[p][r+t]+l)/2,h,i),m>w)break;l=void 0,j=0,k=0,h=1/0,i=-(1/0),f++}k+=a.data[p][r+u],j++,h=Math.min(h,a.data[p][r+u]),i=Math.max(i,a.data[p][r+u]),v&&d>w&&(n=!0),b=d,c=e}if(x.push(C),n)break}return a.degradationSerie&&(a.degradationSerie.setData(s),a.degradationSerie.draw()),[x]}function k(a){if(a.picks)for(var b=0;b<a.picks.length;b++)a.picks[b].hide()}function l(a){if(a.picks)for(var b=0;b<a.picks.length;b++)a.picks[b].show()}Object.defineProperty(b,"__esModule",{value:!0});var m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},n=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),o=function z(a,b,c){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){var e=Object.getPrototypeOf(a);return null===e?void 0:z(e,b,c)}if("value"in d)return d.value;var f=d.get;return void 0===f?void 0:f.call(c)},p=c(12),q=e(p),r=c(13),s=e(r),t=c(3),u=d(t),v=c(14),w=e(v),x={lineColor:"black",lineStyle:1,flip:!1,label:"",lineWidth:1,markers:!1,trackMouse:!1,trackMouseLabel:!1,trackMouseLabelRouding:1,lineToZero:!1,autoPeakPicking:!1,autoPeakPickingNb:4,autoPeakPickingMinDistance:10,autoPeakPickingFormat:!1,autoPeakPickingAllowAllY:!1,selectableOnClick:!0,markersIndependant:!1},y=function(a){function b(){return f(this,b),g(this,Object.getPrototypeOf(b).apply(this,arguments))}return h(b,a),n(b,[{key:"init",value:function(a,b,c){var d=this;if(this.selectionType="unselected",this.markerFamilies={},this.graph=a,this.name=b,this.options=u.extend(!0,{},x,c||{}),u.mapEventEmission(this.options,this),this.styles={},this.styles.unselected={lineColor:this.options.lineColor,lineStyle:this.options.lineStyle,lineWidth:this.options.lineWidth,markers:this.options.markers},this.styles.selected={lineWidth:3},this.extendStyles(),this.markersDom=new Map,this.options.markers&&this.setMarkers(this.options.markers,"unselected"),this.shown=!0,this.data=[],this._isMinOrMax={x:{min:!1,max:!1},y:{min:!1,max:!1}},this.groupLines=document.createElementNS(this.graph.ns,"g"),this.domMarker=document.createElementNS(this.graph.ns,"path"),this.domMarker.style.cursor="pointer",this.groupMain=document.createElementNS(this.graph.ns,"g"),this.additionalData={},this.marker=document.createElementNS(this.graph.ns,"circle"),this.marker.setAttribute("fill","black"),this.marker.setAttribute("r",3),this.marker.setAttribute("display","none"),this.markerLabel=document.createElementNS(this.graph.ns,"text"),this.markerLabelSquare=document.createElementNS(this.graph.ns,"rect"),this.markerLabelSquare.setAttribute("fill","white"),this.domMarkerHover={},this.domMarkerSelect={},this.markerHovered=0,this.groupMarkerSelected=document.createElementNS(this.graph.ns,"g"),this.markerPoints={},this.lines=[],this.groupMain.appendChild(this.groupLines),this.groupMain.appendChild(this.marker),this.groupMain.appendChild(this.groupMarkerSelected),this.groupMain.appendChild(this.markerLabelSquare),this.groupMain.appendChild(this.markerLabel),this.groupMarkers=document.createElementNS(this.graph.ns,"g"),this.groupMain.appendChild(this.groupMarkers),this.independantMarkers=[],this.initExtended1&&this.initExtended1(),this.options.autoPeakPicking){this.picks=this.picks||[];for(var e=0,f=this.options.autoPeakPickingNb;f>e;e++){var g=this.graph.newShape({type:"label",label:{text:"",position:{x:0},anchor:"middle"},selectable:!0,shapeOptions:{minPosY:15}});g.draw(),g.setSerie(d),d.picks.push(g)}}this.groupLines.addEventListener("click",function(a){d.options.selectableOnClick&&(d.isSelected()?d.graph.unselectSerie(d):d.graph.selectSerie(d))})}},{key:"setOptions",value:function(a){return this.options=u.extend(!0,{},b.prototype.defaults,a||{}),this.styles.unselected={lineColor:this.options.lineColor,lineStyle:this.options.lineStyle,markers:this.options.markers},this.applyLineStyles(),this}},{key:"calculateSlots",value:function(){this.slotsData={};for(var a=0,b=this.slots.length;b>a;a++)this.calculateSlot(this.slots[a],a)}},{key:"slotCalculator",value:function(a,b){return s["default"]({min:this.minX,max:this.maxX,data:this.data,slot:a,slotNumber:b,flip:this.getFlip()})}},{key:"calculateSlot",value:function(a,b){var c=this;this.slotsData[a]=this.slotCalculator(a,b),this.slotsData[a].then(function(b){return c.slotsData[a]=b,b})}},{key:"onMouseOverMarker",value:function(a,b){this.toggleMarker(b,!0,!0);this.options.onMouseOverMarker&&this.options.onMouseOverMarker(b,this.infos?this.infos[b[0]]||!1:!1,[this.data[b[1]][2*b[0]],this.data[b[1]][2*b[0]+1]])}},{key:"onMouseOutMarker",value:function(a,b){this.markersOffHover(),this.options.onMouseOutMarker&&this.options.onMouseOutMarker(b,this.infos?this.infos[b[0]]||!1:!1,[this.data[b[1]][2*b[0]],this.data[b[1]][2*b[0]+1]])}},{key:"toggleMarker",value:function(a,b,c){var d=a[0],e=a[1]||0;a=a.join();var f;"undefined"==typeof b&&(f=c?!this.domMarkerHover[a]:!this.domMarkerSelect[a]);var g=this["domMarker"+(c?"Hover":"Select")];if(f||b===!0){if(g[a])h=g[a];else{var h=document.createElementNS(this.graph.ns,"path");this.setMarkerStyleTo(h,this.markerFamilies[this.selectionType][this.getMarkerCurrentFamily(d)]),this["domMarker"+(c?"Hover":"Select")][a]=h,this.groupMarkerSelected.appendChild(h)}var i,j;"x_equally_separated"==this.mode?(i=this._xDataToUse[e].x+d*this._xDataToUse[e].dx,j=this.data[e][d]):(i=this.data[e][2*d],j=this.data[e][2*d+1]),i=this.getX(i),j=this.getY(j),h.setAttribute("d","M "+i+" "+j+" "+this.getMarkerPath(this.markerFamilies[this.selectionType][this.getMarkerCurrentFamily(d)],1)),c&&this.markerHovered++}else if((!f||b===!1)&&(c&&this.domMarkerHover[a]&&!this.domMarkerSelect[a]||this.domMarkerSelect[a])){if(!g[a])return;this.groupMarkerSelected.removeChild(g[a]),delete g[a],c&&this.markerHovered--}return f}},{key:"markersOffHover",value:function(){for(var a in this.domMarkerHover)this.toggleMarker(a.split(","),!1,!0);return this}},{key:"markersOffSelect",value:function(){for(var a in this.domMarkerSelect)this.toggleMarker(a.split(","),!1,!1);return this}},{key:"onClickOnMarker",value:function(a,b){var c=this.toggleMarker(b);c&&this.options.onSelectMarker&&this.options.onSelectMarker(b,this.infos?this.infos[b[0]]||!1:!1),!c&&this.options.onUnselectMarker&&this.options.onUnselectMarker(b,this.infos?this.infos[b[0]]||!1:!1),this.options.onToggleMarker&&this.options.onToggleMarker(b,this.infos?this.infos[b[0]]||!1:!1,c)}},{key:"_getMarkerIndexFromEvent",value:function(a){var b=this.graph._getXY(a);return this.searchIndexByPxXY(b.x-this.graph.getPaddingLeft(),b.y-this.graph.getPaddingTop())}},{key:"onMouseWheel",value:function(){}},{key:"empty",value:function(){for(var a=0,b=this.lines.length;b>a;a++)this.groupLines.removeChild(this.lines[a]);return this.lines=[],this}},{key:"select",value:function(a){return a=a||"selected",this.selected="unselected"!==a,this.areMarkersShown()||this.areMarkersShown(a)?(this.selectionType=a,this.draw(!0),this.applyLineStyles()):(this.selectionType=a,this.applyLineStyles()),this.applyLineStyle(this.getSymbolForLegend()),this}},{key:"unselect",value:function(){return this.selected=!1,this.select("unselected")}},{key:"degrade",value:function(a,b){var c=this.graph.newSerie(this.name+"_degraded",b,"zone");return this.degradationPx=a,c?(c.setData([]),c.setXAxis(this.getXAxis()),c.setYAxis(this.getYAxis()),this.degradationSerie=c,c):void 0}},{key:"drawInit",value:function(){var a,b;if(this.currentLineId=0,this.counter=0,this._drawn=!0,this.currentLine="",this.degradationPx?(a=j(this),b=a[1],a=a[0],this._dataToUse=a,this._xDataToUse=b):(this._dataToUse=this.data,this._xDataToUse=this.xData),this._optimizeMonotoneous=this.isXMonotoneous(),this.optimizeMonotoneousDirection=this.XMonotoneousDirection()&&!this.getXAxis().isFlipped()||!this.XMonotoneousDirection()&&this.getXAxis().isFlipped(),this._optimizeBreak,this._optimizeBuffer,this._slotToUse=!1,this.options.useSlots&&this.slots&&this.slots.length>0){if(this.isFlipped())var c=this.graph.getDrawingHeight()*(this.maxY-this.minY)/(this.getYAxis().getCurrentMax()-this.getYAxis().getCurrentMin());else var c=this.graph.getDrawingWidth()*(this.maxX-this.minX)/(this.getXAxis().getCurrentMax()-this.getXAxis().getCurrentMin());for(var d=0,e=this.slots.length;e>d;d++)if(c<this.slots[d]){this._slotToUse=this.slotsData[this.slots[d]],this._slotId=d;break}}this.detectedPeaks=[],this.lastYPeakPicking=!1}},{key:"removeLinesGroup",value:function(){this._afterLinesGroup=this.groupLines.nextSibling,this.groupMain.removeChild(this.groupLines);
}},{key:"insertLinesGroup",value:function(){if(!this._afterLinesGroup)throw"Could not find group after lines to insertion.";this.groupMain.insertBefore(this.groupLines,this._afterLinesGroup),this._afterLinesGroup=!1}},{key:"removeExtraLines",value:function(){for(var a=this.currentLineId,b=this.lines.length;b>a;a++)this.groupLines.removeChild(this.lines[a]);this.lines.splice(this.currentLineId,b-this.currentLineId),this.currentLineId=0}},{key:"detectPeaks",value:function(a,b){this.options.autoPeakPicking&&(this.options.lineToZero?this.detectedPeaks.push([b,a]):this.lastYPeakPicking?b>=this.lastYPeakPicking[0]&&this.lookForMaxima||b<=this.lastYPeakPicking[0]&&this.lookForMinima?this.lastYPeakPicking=[b,a]:(b<this.lastYPeakPicking[0]&&this.lookForMaxima||b>this.lastYPeakPicking[0]&&this.lookForMinima)&&(this.lookForMinima?(this.lookForMinima=!1,this.lookForMaxima=!0):(this.lookForMinima=!0,this.lookForMaxima=!1,this.detectedPeaks.push(this.lastYPeakPicking),this.lastYPeakPicking=!1),this.lastYPeakPicking=[b,a]):this.lastYPeakPicking=[b,a])}},{key:"draw",value:function(a){if(a||this.hasDataChanged()){this.drawInit();this._dataToUse,this._xDataToUse,this._slotToUse;this.removeLinesGroup(),this.eraseMarkers(),this.lookForMaxima=!0,this.lookForMinima=!1,this.error&&this.errorDrawInit(),this._draw_slot()||("x_equally_separated"==this.mode?this._draw_equally_separated():this._draw_standard()),this.error&&this.errorDraw(),this.makePeakPicking(),this.removeExtraLines(),this.insertMarkers(),this.insertLinesGroup()}for(var b in this.domMarkerHover)this.toggleMarker(b.split(","),!1,!0);for(var b in this.domMarkerSelect)this.toggleMarker(b.split(","),!1,!1);this.applyLineStyle(this.getSymbolForLegend()),this.hasStyleChanged(this.selectionType)&&this.updateStyle(),this.dataHasChanged(!1)}},{key:"_draw_standard",value:function(){var a,b,c,d,e,f,c,g,h,i,j,k,l,m,n,o,p,q,r,s,t=this,u=this._dataToUse,v=0,w=u.length,x=!1,y=!1,z=this.getXAxis(),A=this.getYAxis(),B=z.getCurrentMin(),C=A.getCurrentMin(),D=z.getCurrentMax(),E=A.getCurrentMax(),F=0,G=1,H=!1,I=!1;for(this.isFlipped()&&(F=1,G=0),v=0;w>v;v++){for(a=!1,this.counter1=v,this.currentLine="",b=0,c=0,d=u[v].length,b=0;d>b;b+=2)if(e=u[v][b+F],f=u[v][b+G],B>e&&B>x||e>D&&x>D||(C>f&&C>y||f>E&&y>E)&&!this.options.lineToZero)x=e,y=f,I=!0;else if(this.counter2=b/2,this.markersShown()&&this.getMarkerCurrentFamily(this.counter2),i=this.getX(e),j=this.getY(f),i!=g||j!=h){if(H=B>e||C>f||e>D||f>E,this.options.lineToZero){if(H=B>e||e>D)continue}else if(H||I){x!==!1&&y!==!1||I?(s=[],k=(e-B)/(e-x),l=f-k*(f-y),m=(e-D)/(e-x),n=f-m*(f-y),o=(f-C)/(f-y),p=e-o*(e-x),q=(f-E)/(f-y),r=e-q*(e-x),1>k&&k>0&&l!==!1&&E>l&&l>C&&s.push([B,l]),1>m&&m>0&&n!==!1&&E>n&&n>C&&s.push([D,n]),1>o&&o>0&&p!==!1&&D>p&&p>B&&s.push([p,C]),1>q&&q>0&&r!==!1&&D>r&&r>B&&s.push([r,E]),s.length>0?H?I?2==s.length&&(this._createLine(),this._addPoint(this.getX(s[0][0]),this.getY(s[0][1]),s[0][0],s[0][1],!1,!1,!1),this._addPoint(this.getX(s[1][0]),this.getY(s[1][1]),s[0][0],s[0][1],!1,!1,!1)):(s.length>1&&(console.error("Programmation error. Please e-mail me."),console.log(s,r,p,n,l,f,C,E,y)),this._addPoint(this.getX(s[0][0]),this.getY(s[0][1]),s[0][0],s[0][1],!1,!1,!1)):(s.length>1&&(console.error("Programmation error. Please e-mail me."),console.log(s,r,p,n,l,f,C,E,y)),this._createLine(),this._addPoint(this.getX(s[0][0]),this.getY(s[0][1]),s[0][0],s[0][1],!1,!1,!1),this._addPoint(i,j,x,y,!1,!1,!0)):H||this._addPoint(i,j,x,y,b,!1,!1)):(g=i,h=j,x=e,y=f),g=i,h=j,x=e,y=f,I=H;continue}if(isNaN(i)||isNaN(j))this.counter>0&&this._createLine();else if(this._optimize_before(i,j)){if(this._addPoint(i,j,e,f,b,!1,!0),this.detectPeaks(e,f),!this._optimize_after(i,j)){a=!0;break}g=i,h=j,x=e,y=f}}if(this._createLine(),a)break}if(this._tracker){this._trackerDom&&this._trackerDom.remove();var J=this.groupLines.cloneNode(!0);this.groupMain.appendChild(J);for(var v=0,w=J.children.length;w>v;v++)J.children[v].setAttribute("stroke","transparent"),J.children[v].setAttribute("stroke-width","25px"),J.children[v].setAttribute("pointer-events","stroke");t._trackerDom=J,t.groupMain.addEventListener("mousemove",function(a){var b=t.graph._getXY(a),c=t.handleMouseMove(!1,!1);t._trackingCallback(t,c,b.x,b.y)}),t.groupMain.addEventListener("mouseleave",function(a){t._trackingOutCallback(t)})}return this}},{key:"_draw_slot",value:function(){var a=this;return this._slotToUse?(this._slotToUse.done?this._slotToUse.done(function(b){a.drawSlot(b,a._slotId)}):this.drawSlot(this._slotToUse,a._slotId),!0):!1}},{key:"_draw_equally_separated",value:function(){for(var a,b,c,d,e,f,g,h,i,j=0,k=this._dataToUse,l=this._xDataToUse,m=k.length;m>j;j++){for(i="M ",a=0,b=0,c=k[j].length,this.counter1=j;c>a;a+=1)if(this.counter2=a,this.markersShown()&&this.getMarkerCurrentFamily(b),this.isFlipped()?(e=l[j].x+a*l[j].dx,d=k[j][a],g=this.getX(e),f=this.getY(d)):(d=l[j].x+a*l[j].dx,e=k[j][a],f=this.getX(d),g=this.getY(e)),this._optimize_before(f,g)&&(this._addPoint(f,g,d,e,a,!1,!1),!this._optimize_after(f,g))){h=!0;break}if(this._createLine(),h)break}}},{key:"_optimize_before",value:function(a,b){return this._optimizeMonotoneous?this.optimizeMonotoneousDirection&&a<this.getXAxis().getMathMinPx()||!this.optimizeMonotoneousDirection&&a>this.getXAxis().getMathMaxPx()?(this._optimizeBuffer=[a,b],!1):(this._optimizeBuffer&&(this._addPoint(this._optimizeBuffer[0],this._optimizeBuffer[1],!1,!1,!1,!1,!1),this._optimizeBuffer=!1),!0):!0}},{key:"_optimize_after",value:function(a,b){return this._optimizeMonotoneous&&(this.optimizeMonotoneousDirection&&a>this.getXAxis().getMathMaxPx()||!this.optimizeMonotoneousDirection&&a<this.getXAxis().getMathMinPx())?!1:!0}},{key:"hidePeakPicking",value:function(a){this._hidePeakPickingLocked||(this._hidePeakPickingLocked=a),k(this)}},{key:"showPeakPicking",value:function(a){(!this._hidePeakPickingLocked||a)&&l(this)}},{key:"killPeakPicking",value:function(){if(this.picks)for(var a=0,b=this.picks.length;b>a;a++)this.picks[a].kill()}},{key:"kill",value:function(){o(Object.getPrototypeOf(b.prototype),"kill",this).call(this),this.killPeakPicking()}},{key:"getMarkerCurrentFamily",value:function(a){if(this.markerPoints&&this.markerPoints[this.selectionType]){for(var b,c=0;c<this.markerPoints[this.selectionType].length&&this.markerPoints[this.selectionType][c][0]<=a;c++)this.markerPoints[this.selectionType][c][1]>=a&&(this.markerCurrentFamily=this.markerPoints[this.selectionType][c][2],b=this.markerFamilies[this.selectionType][this.markerCurrentFamily]);return this.getMarkerDom(b),this.markerCurrentFamily}}},{key:"drawSlot",value:function(a,b){var c,d,e,f,g=0;if(this.isFlipped())var h=this.slots[b]/(this.maxY-this.minY),i=Math.floor((this.getYAxis().getCurrentMin()-this.minY)*h),j=Math.ceil((this.getYAxis().getCurrentMax()-this.minY)*h);else var h=this.slots[b]/(this.maxX-this.minX),i=Math.floor((this.getXAxis().getCurrentMin()-this.minX)*h),j=Math.ceil((this.getXAxis().getCurrentMax()-this.minX)*h);for(f=i;j>=f;f++)a[f]&&(this.isFlipped()?(d=Math.floor(this.getY(a[f].x)),e=this.getX(a[f].max),this._addPoint(this.getX(a[f].start),d,!1,!1,!1,!1,!1),this._addPoint(e,d,!1,!1,!1,!0,!1),this._addPoint(this.getX(a[f].min),d,!1,!1,!1,!1,!1),this._addPoint(this.getX(a[f].stop),d,!1,!1,!1,!0,!1)):(c=Math.floor(this.getX(a[f].x)),e=this.getY(a[f].max),this.options.autoPeakPicking&&allY.push([a[f].max,a[f].x]),this._addPoint(c,this.getY(a[f].start),!1,!1,!1,!1,!1),this._addPoint(c,e,!1,!1,!1,!0,!1),this._addPoint(c,this.getY(a[f].min),!1,!1,!1,!1,!1),this._addPoint(c,this.getY(a[f].stop),!1,!1,!1,!0,!1)));this._createLine(),g++}},{key:"setMarkerStyleTo",value:function(a,b){if(!a||!b)throw console.trace(),"Cannot set marker style. DOM does not exist.";a.setAttribute("fill",b.fillColor||"transparent"),a.setAttribute("stroke",b.strokeColor||this.getLineColor()),a.setAttribute("stroke-width",b.strokeWidth||1)}},{key:"hideTrackingMarker",value:function(){this.marker.setAttribute("display","none"),this.markerLabel.setAttribute("display","none"),this.markerLabelSquare.setAttribute("display","none")}},{key:"_addPoint",value:function(a,b,c,d,e,f,g){var h;if(!isNaN(a)&&!isNaN(b)){if(0==this.counter?this.currentLine="M ":this.options.lineToZero||f?this.currentLine+="M ":this.currentLine+="L ",this.currentLine+=a,this.currentLine+=" ",this.currentLine+=b,this.currentLine+=" ",this.options.lineToZero&&void 0!==(h=this.getYAxis().getPos(0))&&(this.currentLine+="L ",this.currentLine+=a,this.currentLine+=" ",this.currentLine+=h,this.currentLine+=" "),this.error&&this.errorAddPoint(e,c,d,a,b),!this.markerPoints)return void this.counter++;var j=void 0;this.markersShown()&&g!==!1&&(j=this.markerFamilies[this.selectionType||"unselected"])&&i(this,j[this.markerCurrentFamily],a,b,this.markersDom.get(j[this.markerCurrentFamily])),this.counter++}}},{key:"_createLine",value:function(){var a,b=this.currentLineId++;return this.lines[b]?a=this.lines[b]:(a=document.createElementNS(this.graph.ns,"path"),this.applyLineStyle(a),this.groupLines.appendChild(a),this.lines[b]=a),0==this.counter?a.setAttribute("d",""):a.setAttribute("d",this.currentLine),this.currentLine="M ",this.counter=0,a}},{key:"applyLineStyles",value:function(){for(var a=0;a<this.lines.length;a++)this.applyLineStyle(this.lines[a])}},{key:"applyLineStyle",value:function(a){a.setAttribute("stroke",this.getLineColor()),a.setAttribute("stroke-width",this.getLineWidth()),this.getLineDashArray()?a.setAttribute("stroke-dasharray",this.getLineDashArray()):a.removeAttribute("stroke-dasharray"),a.setAttribute("fill","none")}},{key:"updateStyle",value:function(){this.applyLineStyles(),this.setLegendSymbolStyle(),this.styleHasChanged(!1)}},{key:"getMarkerPath",value:function(a,b){var c=a.zoom||1,b=b||0,d=[];switch(a.type){case 2:d=["m",-2,-2,"l",4,4,"m",-4,0,"l",4,-4];break;case 3:d=["m",-2,0,"l",4,0,"m",-2,-2,"l",0,4];break;case 4:d=["m",-1,-1,"l",2,0,"l",-1,2,"z"];break;default:case 1:d=["m",-2,-2,"l",4,0,"l",0,4,"l",-4,0,"z"]}if(!(1!=c&&c||b))return d.join(" ");var e="number";if(d){for(var f=0,g=d.length;g>f;f++)m(d[f])==e&&(d[f]*=c+b);return d.join(" ")}}},{key:"getMarkerDom",value:function(a){var b=this;if(!this.markersDom.has(a)){var c=document.createElementNS(this.graph.ns,"path");this.setMarkerStyleTo(c,a),this.markersDom.set(a,{dom:c,path:""}),c.addEventListener("mouseover",function(a){var c=b._getMarkerIndexFromEvent(a);b.onMouseOverMarker(a,c)}),c.addEventListener("mouseout",function(a){var c=b._getMarkerIndexFromEvent(a);b.onMouseOutMarker(a,c)}),c.addEventListener("click",function(a){var c=b._getMarkerIndexFromEvent(a);b.onClickOnMarker(a,c)})}return a.dom}},{key:"getMarkerDomIndependant",value:function(a,b,c){var d=this,e=a+","+b;if(!this.independantMarkers[e]){var f=document.createElementNS(this.graph.ns,"path");this.setMarkerStyleTo(f,c),f.addEventListener("mouseover",function(c){d.onMouseOverMarker(c,[b,a])}),f.addEventListener("mouseout",function(c){d.onMouseOutMarker(c,[b,a])}),f.addEventListener("click",function(c){d.onClickOnMarker(c,[b,a])}),this.independantMarkers[e]=f}return this.groupMarkers.appendChild(this.independantMarkers[e]),this.independantMarkers[e]}},{key:"searchIndexByPxXY",value:function(a,b){var c,d,e,f=!1,g=!1,h=this._xDataToUse;if("x_equally_separated"==this.mode)for(var i=0,j=this.data.length;j>i;i++)for(var k=0,l=this.data[i].length;l>k;k+=1)d=h[i].x+k*h[i].dx,e=this.data[i][k],c=Math.pow(this.getX(d)-a,2)+Math.pow(this.getY(e)-b,2),(!f||f>c)&&(f=c,g=[k,i]);else for(var i=0,j=this.data.length;j>i;i++)for(var k=0,l=this.data[i].length;l>k;k+=2)d=this.data[i][k],e=this.data[i][k+1],c=Math.pow(this.getX(d)-a,2)+Math.pow(this.getY(e)-b,2),(!f||f>c)&&(f=c,g=[k/2,i]);return g}},{key:"searchClosestValue",value:function(a){for(var b,c=0;c<this.data.length;c++){if(a<=this.data[c][this.data[c].length-2]&&a>=this.data[c][0])b=this._searchBinary(a,this.data[c],!1);else{if(!(a>=this.data[c][this.data[c].length-2]&&a<=this.data[c][0]))continue;b=this._searchBinary(a,this.data[c],!0)}return{dataIndex:c,xMin:this.data[c][b],xMax:this.data[c][b+2],yMin:this.data[c][b+1],yMax:this.data[c][b+3],xBeforeIndex:b/2,xAfterIndex:b/2+1,xBeforeIndexArr:b,xClosest:(Math.abs(this.data[c][b+2]-a)<Math.abs(this.data[c][b]-a)?b+2:b)/2}}}},{key:"handleMouseMove",value:function(a,b){var c=a||this.getXAxis().getMouseVal(),d=this.searchClosestValue(c);if(d){var e=(c-d.xMin)/(d.xMax-d.xMin),f=(1-e)*d.yMin+e*d.yMax;if(b&&this.options.trackMouse){if(void 0==d.xMin)return!1;var g=this.getX(this.getFlip()?f:c),h=this.getY(this.getFlip()?c:f);switch(this.marker.setAttribute("display","block"),this.marker.setAttribute("cx",g),this.marker.setAttribute("cy",h),this.markerLabel.setAttribute("display","block"),this.markerLabelSquare.setAttribute("display","block"),this.options.trackMouseLabel){case!1:break;default:this.markerLabel.textContent=this.options.trackMouseLabel.replace("<x>",c.toFixed(this.options.trackMouseLabelRouding)).replace("<y>",f.toFixed(this.options.trackMouseLabelRouding))}this.markerLabel.setAttribute("x",g+5),this.markerLabel.setAttribute("y",h-5),this.markerLabelSquare.setAttribute("x",g+5),this.markerLabelSquare.setAttribute("y",h-5-this.graph.options.fontSize),this.markerLabelSquare.setAttribute("width",this.markerLabel.getComputedTextLength()+2),this.markerLabelSquare.setAttribute("height",this.graph.options.fontSize+2)}return{xBefore:d.xMin,xAfter:d.xMax,yBefore:d.yMin,yAfter:d.yMax,trueX:c,interpolatedY:f,xBeforeIndex:d.xBeforeIndex,xIndexClosest:d.xClosest}}}},{key:"_searchBinary",value:function(a,b,c){var d=0,e=b.length,f=e-2;if(b[d]==a)return d;if(b[f]==a)return f;for(var g,h=0;;){if(h++,h>100)throw"Error loop";if(g=(d+f)/2,g-=g%2,g==d||b[g]==a)return g;b[g]<=a?c?f=g:d=g:b[g]>a&&(c?d=g:f=g)}}},{key:"getMax",value:function(a,b){var c,d,e,f,g=Math.min(a,b),h=Math.max(a,b),i=this.searchClosestValue(g),j=this.searchClosestValue(h),k=-(1/0);if(i||(g=this.minX,i=this.searchClosestValue(g)),j||(h=this.maxX,j=this.searchClosestValue(h)),!i||!j)return-(1/0);for(c=i.dataIndex;c<=j.dataIndex;c++)for(e=c==i.dataIndex?i.xBeforeIndexArr:0,f=c==j.dataIndex?j.xBeforeIndexArr:this.data[c].length,d=e;f>=d;d+=2)k=Math.max(k,this.data[c][d+1]);return k}},{key:"getMin",value:function(a,b){var c,d,e,f,g=Math.min(a,b),h=Math.max(a,b),i=this.searchClosestValue(g),j=this.searchClosestValue(h),k=1/0;if(i||(g=this.minX,i=this.searchClosestValue(g)),j||(h=this.maxX,j=this.searchClosestValue(h)),!i||!j)return 1/0;for(c=i.dataIndex;c<=j.dataIndex;c++)for(e=c==i.dataIndex?i.xBeforeIndexArr:0,f=c==j.dataIndex?j.xBeforeIndexArr:this.data[c].length,d=e;f>=d;d+=2)k=Math.min(k,this.data[c][d+1]);return k}},{key:"setStyle",value:function(a,b){this.styles[b]=a,this.styleHasChanged(b)}},{key:"setLineStyle",value:function(a,b,c){return b=b||"unselected",this.styles[b]=this.styles[b]||{},this.styles[b].lineStyle=a,c&&this.setLineStyle(a,"selected"),this.styleHasChanged(b),this}},{key:"getLineStyle",value:function(a){return this.getStyle(a).lineStyle}},{key:"getLineDashArray",value:function(a){switch(this.getStyle(a).lineStyle){case 2:return"1, 1";case 3:return"2, 2";case 3:return"3, 3";case 4:return"4, 4";case 5:return"5, 5";case 6:return"5 2";case 7:return"2 5";case 8:return"4 2 4 4";case 9:return"1,3,1";case 10:return"9 2";case 11:return"2 9";case!1:case 1:return!1;default:return this.styles[a||this.selectionType||"unselected"].lineStyle}this.styleHasChanged(a)}},{key:"getStyle",value:function(a){return this.styles[a||this.selectionType||"unselected"]}},{key:"extendStyles",value:function(){for(var a in this.styles){var b=this.styles[a];b&&(this.styles[a]=u.extend(!0,{},this.styles.unselected,b))}}},{key:"extendStyle",value:function(a,b){var c=this.styles[a];this.styles[a]=u.extend(!0,{},this.styles[b||"unselected"],c||{}),this.styles[a].markers.map(function(a){a.dom&&(a.dom="")}),this._recalculateMarkerPoints(a,this.styles[a].markers),this.styleHasChanged(a)}},{key:"setLineWidth",value:function(a,b,c){return b=b||"unselected",this.styles[b]=this.styles[b]||{},this.styles[b].lineWidth=a,c&&this.setLineWidth(a,"selected"),this.styleHasChanged(b),this}},{key:"getLineWidth",value:function(a){return this.getStyle(a).lineWidth||1}},{key:"setLineColor",value:function(a,b,c){return b=b||"unselected",this.styles[b]=this.styles[b]||{},this.styles[b].lineColor=a,c&&this.setLineColor(a,"selected"),this.styleHasChanged(b),this}},{key:"getLineColor",value:function(a){return this.getStyle(a).lineColor||"black"}},{key:"showMarkers",value:function(a,b){return a=a||"unselected",this.styles[a]=this.styles[a]||{},this.styles[a].showMarkers=!0,b&&this._drawn?this.draw(!0):this.styleHasChanged(a),this}},{key:"hideMarkers",value:function(a,b){return a=a||"unselected",this.styles[a].showMarkers=!1,b&&this._drawn?this.draw(!0):this.styleHasChanged(a),this}},{key:"markersShown",value:function(a){return this.getStyle(a).showMarkers!==!1}},{key:"areMarkersShown",value:function(){return this.markersShown.apply(this,arguments)}},{key:"isMarkersShown",value:function(){return this.markersShown.apply(this,arguments)}},{key:"setMarkers",value:function(a,b,c){return this.styles[b||"unselected"]=this.styles[b||"unselected"]||{},this.showMarkers(b,!1),Array.isArray(a)||"object"!=("undefined"==typeof a?"undefined":m(a))?a||(a=[{type:1,zoom:1,points:"all"}]):a=[a],this.styles[b||"unselected"].markers=a,c&&(this.styles.selected.markers=u.extend(!0,{},a)),this._recalculateMarkerPoints(b,a),this.styleHasChanged(b),this.dataHasChanged(!0),this}},{key:"setMarkersPoints",value:function(a,b,c){this._extendMarkers("points",a,b,c,!0)}},{key:"setMarkersColor",value:function(a,b,c){this._extendMarkers("color",a,b,c)}},{key:"setMarkersType",value:function(a,b,c){this._extendMarkers("type",a,b,c)}},{key:"setMarkersZoom",value:function(a,b,c){this._extendMarkers("zoom",a,b,c)}},{key:"setMarkersStrokeColor",value:function(a,b,c){this._extendMarkers("strokeColor",a,b,c)}},{key:"setMarkersStrokeWidth",value:function(a,b,c){this._extendMarkers("strokeWidth",a,b,c)}},{key:"setMarkersFillColor",value:function(a,b,c){this._extendMarkers("fillColor",a,b,c)}},{key:"_extendMarkers",value:function(a,b,c,d,e){c=c||0,d=d||"unselected",this.styles[d]&&this.styles[d].markers&&(this.styles[d].markers[c][a]=b,e&&this._recalculateMarkerPoints(d,this.styles[d].markers),console.log(this.markersDom[this.styles[d].markers[c]]),this.setMarkerStyleTo(this.markersDom[this.styles[d].markers[c]].dom,this.styles[d].markers[c]))}},{key:"_recalculateMarkerPoints",value:function(a,b){var c=[];c.push([0,1/0,null]);for(var d=0,e=b.length;e>d;d++){b[d].markerPath=this.getMarkerPath(b[d]),b[d].points||(b[d].points="all"),Array.isArray(b[d].points)||(b[d].points=[b[d].points]);for(var f=0,g=b[d].points.length;g>f;f++)"all"==b[d].points[f]?c.push([0,1/0,d]):Array.isArray(b[d].points[f])?c.push([b[d].points[f][0],b[d].points[f][1],d]):c.push([b[d].points[f],b[d].points[f],d])}this.markerFamilies[a||"unselected"]=b,c.sort(function(a,b){return a[0]-b[0]||(null==a[2]?-1:1)}),this.markerPoints[a||"unselected"]=c}},{key:"insertMarkers",value:function(a){if(this.markerFamilies&&this.markerFamilies[a||this.selectionType]&&!this.options.markersIndependant)for(var b=0,c=this.markerFamilies[a||this.selectionType].length;c>b;b++)if(this.markersDom.has(this.markerFamilies[a||this.selectionType][b])){var d=this.markersDom.get(this.markerFamilies[a||this.selectionType][b]);d.dom.setAttribute("d",d.path),this.groupMarkers.appendChild(d.dom),this.currentMarkersSelectionType=this.selectionType}}},{key:"getMarkerForLegend",value:function(){if(this.markerPoints&&this.markerPoints[this.selectionType]){if(!this.markerForLegend){var a=document.createElementNS(this.graph.ns,"path");this.setMarkerStyleTo(a,this.markerFamilies[this.selectionType][0]),a.setAttribute("d","M 14 0 "+this.getMarkerPath(this.markerFamilies[this.selectionType][0])),this.markerForLegend=a}return this.markerForLegend}}},{key:"eraseMarkers",value:function(){var a=this;if(this.options.markersIndependant){for(var b in this.independantMarkers)a.groupMarkers.removeChild(this.independantMarkers[b]);this.independantMarkers={}}else this.currentMarkersSelectionType&&(this.markersDom.forEach(function(b){b.dom&&(a.groupMarkers.removeChild(b.dom),b.path="")}),this.currentMarkersSelectionType=!1)}},{key:"showImpl",value:function(){this.showPeakPicking()}},{key:"hideImpl",value:function(){this.hidePeakPicking()}},{key:"XIsMonotoneous",value:function(){return this.xmonotoneous=!0,this}},{key:"isXMonotoneous",value:function(){return this.xmonotoneous||!1}},{key:"XMonotoneousDirection",value:function(){return this.data&&this.data[0]&&this.data[0][2]-this.data[0][0]>0}},{key:"makePeakPicking",value:function(){var a,b,b,c,d,e,f,g=this,h=this.detectedPeaks,i=[],j=0,k=h.length,l=g.graph.selectedShapes.map(function(a){return a.getProp("xval")});for(h.sort(function(a,b){return b[0]-a[0]}),d=0;k>j;j++)if(a=h[j][1],b=g.getX(a),c=0,e=g.getY(h[j][0]),!(b<g.getXAxis().getMinPx()||b>g.getXAxis().getMaxPx())&&(g.options.autoPeakPickingAllowAllY||!(e>g.getYAxis().getMinPx()||e<g.getYAxis().getMaxPx()))){for(;c<i.length&&!(Math.abs(i[c]-b)<g.options.autoPeakPickingMinDistance);c++);if(!(c<i.length))if((f=l.indexOf(a))>-1)i.push(b);else{if(!g.picks[d])return;for(this.getYAxis().getPx(h[j][0])-20<0?(g.picks[d].setLabelPosition({x:a,y:"5px"}),g.picks[d].setLabelBaseline("hanging")):(g.picks[d].setLabelBaseline("no-change"),g.picks[d].setLabelPosition({x:a,y:h[j][0],dy:"-15px"})),g.picks[d].setProp("xval",a),g.options.autoPeakPickingFormat?g.picks[d].setLabelText(g.options.autoPeakPickingFormat.call(g.picks[d],a,d)):g.picks[d].setLabelText(String(Math.round(1e3*a)/1e3)),g.picks[d].makeLabels(),d++;g.picks[d]&&g.picks[d].isSelected();)d++;if(i.length==g.options.autoPeakPickingNb)break}}}}]),b}(q["default"]);u.mix(y,w["default"]),b["default"]=y},function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function h(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},j=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),k=c(4),l=e(k),m=c(3),n=d(m),o=function(a){function b(){return f(this,b),g(this,Object.getPrototypeOf(b).apply(this,arguments))}return h(b,a),j(b,[{key:"setData",value:function(a,b,c){function d(a){var b=Object.prototype.toString.call(a);return"[object Array]"===b||"[object Int16Array]"===b||"[object Int32Array]"===b||"[object Float32Array]"===b||"[object Float64Array]"===b||"[object Uint8Array]"===b||"[object Uint16Array]"===b||"[object Uint32Array]"===b||"[object Int8Array]"===b}var e,f,g,h,j=0,b=b||!1,c=c||"float",k=0;this.minX=Number.MAX_SAFE_INTEGER,this.maxX=Number.MIN_SAFE_INTEGER,this.minY=Number.MAX_SAFE_INTEGER,this.maxY=Number.MIN_SAFE_INTEGER;var l=d(a),m=[];if(l||"object"!=("undefined"==typeof a?"undefined":i(a))){if(l&&!d(a[0])&&"object"!==i(a[0]))a=[a],b=!0;else if(l&&d(a[0])&&a[0].length>2)b=!0;else if(!l)return void n.throwError("Data is not an array")}else a=[a];var o=d(a[0]),p=d(a[0][0]);if(!o||b||p||(a=[a]),o)for(var q=0,r=a.length;r>q;q++){g=this._addData(c,b?a[q].length:2*a[q].length),m.push(g),j=0;for(var s=0,t=a[q].length;t>s;s++)b?(g[j]=a[q][s],this[s%2==0?"_checkX":"_checkY"](g[j]),j++,k+=s%2?1:0):(g[j]=a[q][s][0],this._checkX(g[j]),j++,g[j]=a[q][s][1],this._checkY(g[j]),j++,k++)}else if("object"==i(a[0]))if(a[0].x)for(var q=0,t=a.length;t>q;q++){var g=this._addData(c,2*a[q].x.length);m.push(g),j=0;for(var s=0,u=a[0].x.length;u>s;s++)g[j]=a[q].x[s],j++,g[j]=a[q].y[s],j++,this._checkX(a[q].x[s]),this._checkY(a[q].y[s]),k++}else{this.mode="x_equally_separated";var v,w=0,x=[],m=[],r=0;if(!a[0].y)return console.log(a),void n.throwError("No y data");for(var q=0,t=a.length;t>q;q++)w+=a[q].y.length,h=0!=q&&(!a[q+1]||a[q].x+a[q].dx*a[q].y.length==a[q+1].x),h||(m.push(this._addData(c,w)),x.push(w),w=0);this.xData=[],w=0,r=0,j=0;for(var q=0,t=a.length;t>q;q++){e=a[q].x,f=a[q].dx,this.xData.push({x:e,dx:f}),v=a[q].y.length,this._checkX(e),this._checkX(e+f*v);for(var s=0;v>s;s++)m[r][j]=a[q].y[s],this._checkY(m[r][j]),j++,k++;w+=a[q].y.length,x[r]==w&&(r++,w=0,j=0)}}var y=((this.maxX-this.minX)/this.graph.getDrawingWidth(),[]),z=4*this.graph.getDrawingWidth(),A=k/4,z=this.graph.getDrawingWidth(),A=k;if(this.data=m,z>0){for(;A>z;)y.push(z),z*=4;this.slots=y,this.options.useSlots&&this.calculateSlots()}if(this.isFlipped()){var B=this.maxX,C=this.maxY,D=this.minX,E=this.minY;this.maxX=C,this.maxY=B,this.minX=E,this.minY=D}return this.dataHasChanged(),this.graph.updateDataMinMaxAxes(),this}},{key:"_addData",value:function(a,b){switch(a){case"int":var c=4*b;break;case"float":var c=8*b}var d=new ArrayBuffer(c);switch(a){case"int":return new Int32Array(d);default:case"float":return new Float64Array(d)}}},{key:"getData",value:function(){return this.data}},{key:"setOptions",value:function(a){this.options=a||{}}},{key:"kill",value:function(){this.graph.removeSerieFromDom(this),this.graph._removeSerie(this),this.graph.legend&&this.graph.legend.update(),this.killImpl()}},{key:"killImpl",value:function(){}},{key:"hide",value:function(a){if(this.hidden=!0,this.groupMain.setAttribute("display","none"),this.getSymbolForLegend().setAttribute("opacity",.5),this.getTextForLegend().setAttribute("opacity",.5),this.hideImpl(),a)for(var b=this.graph.getShapesOfSerie(this),c=0,d=b.length;d>c;c++)b[c].hide();return this.emit("hide"),this}},{key:"show",value:function(a){if(this.hidden=!1,this.groupMain.setAttribute("display","block"),this.getSymbolForLegend().setAttribute("opacity",1),this.getTextForLegend().setAttribute("opacity",1),this.showImpl(),this.draw(!0),a)for(var b=this.graph.getShapesOfSerie(this),c=0,d=b.length;d>c;c++)b[c].show();return this.emit("show"),this}},{key:"hideImpl",value:function(){}},{key:"showImpl",value:function(){}},{key:"toggleDisplay",value:function(){return this.isShown()?this.hide():this.show(),this}},{key:"isShown",value:function(){return!this.hidden}},{key:"getX",value:function(a){return(a=this.getXAxis().getPx(a))-a%.2}},{key:"getY",value:function(a){return(a=this.getYAxis().getPx(a))-a%.2}},{key:"isSelected",value:function(){return this.selected||"unselected"!==this.selectionType}},{key:"_checkX",value:function(a){this.minX=Math.min(this.minX,a),this.maxX=Math.max(this.maxX,a)}},{key:"_checkY",value:function(a){this.minY=Math.min(this.minY,a),this.maxY=Math.max(this.maxY,a)}},{key:"getName",value:function(){return this.name}},{key:"autoAxis",value:function(){return this.isFlipped()?(this.setXAxis(this.graph.getYAxis()),this.setYAxis(this.graph.getXAxis())):(this.setXAxis(this.graph.getXAxis()),this.setYAxis(this.graph.getYAxis())),this.graph.updateDataMinMaxAxes(),this}},{key:"setXAxis",value:function(a){return"number"==typeof a?this.xaxis=this.isFlipped()?this.graph.getYAxis(a):this.graph.getXAxis(a):this.xaxis=a,this.graph.updateDataMinMaxAxes(),this}},{key:"setYAxis",value:function(a){return"number"==typeof a?this.xaxis=this.isFlipped()?this.graph.getXAxis(a):this.graph.getYAxis(a):this.yaxis=a,this.graph.updateDataMinMaxAxes(),this}},{key:"setAxes",value:function(){for(var a=0;2>a;a++)arguments[a]&&this[arguments[a].isX()?"setXAxis":"setYAxis"](arguments[a]);return this}},{key:"getXAxis",value:function(){return this.xaxis}},{key:"getYAxis",value:function(){return this.yaxis}},{key:"getMinX",value:function(){return this.minX}},{key:"getMaxX",value:function(){return this.maxX}},{key:"getMinY",value:function(){return this.minY}},{key:"getMaxY",value:function(){return this.maxY}},{key:"getSymbolForLegend",value:function(){if(!this.lineForLegend){var a=document.createElementNS(this.graph.ns,"line");this.applyLineStyle(a),a.setAttribute("x1",5),a.setAttribute("x2",25),a.setAttribute("y1",0),a.setAttribute("y2",0),a.setAttribute("cursor","pointer"),this.lineForLegend=a}return this.lineForLegend}},{key:"setLegendSymbolStyle",value:function(){this.applyLineStyle(this.getSymbolForLegend())}},{key:"updateStyle",value:function(){this.setLegendSymbolStyle(),this.graph.updateLegend()}},{key:"getTextForLegend",value:function(){if(!this.textForLegend){var a=document.createElementNS(this.graph.ns,"text");a.setAttribute("cursor","pointer"),a.textContent=this.getLabel(),this.textForLegend=a}return this.textForLegend}},{key:"getIndex",value:function(){return this.graph.series.indexOf(this)}},{key:"getLabel",value:function(){return this.options.label||this.name}},{key:"setLabel",value:function(a){return this.options.label=a,this.textForLegend&&(this.textForLegend.textContent=a),this}},{key:"setFlip",value:function(a){return this.options.flip=a,this}},{key:"getFlip",value:function(){return this.options.flip}},{key:"isFlipped",value:function(){return this.options.flip}},{key:"setLayer",value:function(a){return this.options.layer=parseInt(a)||1,this}},{key:"getLayer",value:function(){return this.options.layer||1}},{key:"styleHasChanged",value:function(a){if(this._changedStyles=this._changedStyles||{},a===!1)for(var b in this._changedStyles)this._changedStyles[b]=!1;else this._changedStyles[a||"unselected"]=!0;return this}},{key:"hasStyleChanged",value:function(a){return this._changedStyles=this._changedStyles||{},this._changedStyles[a||"unselected"]}},{key:"dataHasChanged",value:function(a){return this._dataHasChanged=void 0===a||a,this}},{key:"hasDataChanged",value:function(){return this._dataHasChanged}},{key:"setInfo",value:function(a,b){return this.infos=this.infos||{},this.infos[a]=b,this}},{key:"getInfo",value:function(a,b){return(this.infos||{})[a]}},{key:"setAdditionalData",value:function(a){return this.additionalData=a,this}},{key:"getAdditionalData",value:function(){return this.additionalData}},{key:"select",value:function(){return this.selected=!0,this}},{key:"unselect",value:function(){return this.selected=!1,this}},{key:"enableTracking",value:function(a,b){return this._tracker=!0,this._trackingCallback=a,this._trackingOutCallback=b,this}},{key:"disableTracking",value:function(){return this._trackerDom&&(this._trackerDom.remove(),this._trackerDom=null),this._tracker=!1,this._trackingCallback=null,this}},{key:"allowTrackingLine",value:function(a){a=a||{},this.graph.addSerieToTrackingLine(this,a)}},{key:"setLegend",value:function(a){this._legend=a}},{key:"isInLegend",value:function(){return this._legend===!1?!1:!0}},{key:"getMarkerForLegend",value:function(){return!1}},{key:"getType",value:function(){return this._type}},{key:"type",get:function(){return this._type}}]),b}(l["default"]);b["default"]=o},function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(){var a=URL.createObjectURL(new Blob([" ( "+function(){onmessage=function(a){for(var b,c=a.data.data,d=a.data.slotNumber,e=a.data.slot,f=(a.data.flip,a.data.max),g=a.data.min,h=e/(f-g),i=[],j=0,k=c.length;k>j;j++)for(var l=0,m=c[j].length;m>l;l+=2)b=Math.floor((c[j][l]-g)*h),i[b]=i[b]||{min:c[j][l+1],max:c[j][l+1],
start:c[j][l+1],stop:!1,x:c[j][l]},i[b].stop=c[j][l+1],i[b].min=Math.min(c[j][l+1],i[b].min),i[b].max=Math.max(c[j][l+1],i[b].max);postMessage({slotNumber:d,slot:e,data:i,_queueId:a.data._queueId})}}.toString()+")()"],{type:"application/javascript"}));f=new Worker(a),f.onmessage=function(a){var b=a.data._queueId;delete a.data._queueId,i[b].resolve(a.data.data),delete i[b]}}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=function(a){f||e();var b=h.guid();a._queueId=b;var c,d=new Promise(function(a){c=a});return i[b]={promise:d,resolve:c},f.postMessage(a),i[b].promise};var f,g=c(3),h=d(g),i={}},function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}Object.defineProperty(b,"__esModule",{value:!0});var e=c(3),f=d(e),g={doErrorDraw:function(a,b,c,d,e,f){b instanceof Array||(b=[b]);var g,h="y"==a?"getY":"getX",i="y"==a?["top","bottom"]:["left","right"];if(!isNaN(e)&&!isNaN(f))for(var j=0,k=b.length;k>j;j++)b[j]instanceof Array?(g=i[0],this.errorstyles[j].paths[g]+=" M "+e+" "+f,this.errorstyles[j].paths[g]+=this.makeError(a,j,this[h](c+b[j][0]),d,g),g=i[1],this.errorstyles[j].paths[g]+=" M "+e+" "+f,this.errorstyles[j].paths[g]+=this.makeError(a,j,this[h](c-b[j][1]),d,g)):(g=i[0],this.errorstyles[j].paths[g]+=" M "+e+" "+f,this.errorstyles[j].paths[g]+=this.makeError(a,j,this[h](c+b[j]),d,g),g=i[1],this.errorstyles[j].paths[g]+=" M "+e+" "+f,this.errorstyles[j].paths[g]+=this.makeError(a,j,this[h](c-b[j]),d,g))},makeError:function(a,b,c,d,e){var f;switch(this.errorstyles[b].type){case"bar":f="makeBar";break;case"box":f="makeBox"}return this[f+a.toUpperCase()](c,d,this.errorstyles[b][e])},makeBarY:function(a,b,c){var d=f.isNumeric(c.width)?c.width:10;return" V "+a+" m -"+d/2+" 0 h "+d+" m -"+d/2+" 0 V "+b+" "},makeBoxY:function(a,b,c){return" m 5 0 V "+a+" h -10 V "+b+" m 5 0 "},makeBarX:function(a,b,c){var d=f.isNumeric(c.width)?c.width:10;return" H "+a+" m 0 -"+d/2+" v "+d+" m 0 -"+d/2+" H "+b+" "},makeBoxX:function(a,b,c){return" v 5 H "+a+" v -10 H "+b+" v 5 "},setDataError:function(a){return this.error=a,this.dataHasChanged(),this},setErrorStyle:function(a){function b(a){a.dom=document.createElementNS(c.graph.ns,"path"),a.dom.setAttribute("fill",a.fillColor||"none"),a.dom.setAttribute("stroke",a.strokeColor||"black"),a.dom.setAttribute("stroke-opacity",a.strokeOpacity||1),a.dom.setAttribute("fill-opacity",a.fillOpacity||1),a.dom.setAttribute("stroke-width",a.strokeWidth||1),c.groupMain.appendChild(a.dom)}var c=this;a=a||["box","bar"],Array.isArray(a)||(a=[a]);for(var d=[],e=[["y","top","bottom"],["x","left","right"]],g=0;g<a.length;g++){d[g]={},"string"==typeof a[g]&&(a[g]={type:a[g],y:{}}),d[g].type=a[g].type;for(var h=0,i=e.length;i>h;h++){a[g][e[h][0]]&&(a[g][e[h][1]]=f.extend(!0,{},a[g][e[h][0]]),a[g][e[h][2]]=f.extend(!0,{},a[g][e[h][0]]));for(var j=1;2>=j;j++)a[g][e[h][j]]&&(d[g][e[h][j]]=a[g][e[h][j]],b(d[g][e[h][j]]))}}return this.errorstyles=d,this},errorDrawInit:function(){if(this.errorstyles)for(var a=0,b=this.errorstyles.length;b>a;a++)this.errorstyles[a].paths={top:"",bottom:"",left:"",right:""}},errorAddPoint:function(a,b,c,d,e){var f;this.error&&(f=this.error[a/2])&&(f[0]&&this.doErrorDraw("y",f[0],c,e,d,e),f[1]&&this.doErrorDraw("x",f[1],b,d,d,e))},errorAddPointBarChart:function(a,b,c,d){var e;this.error&&(e=this.error[a])&&this.doErrorDraw("y",e,b,d,c,d)},errorDraw:function(){if(this.error&&this.errorstyles)for(var a=0,b=this.errorstyles.length;b>a;a++)for(var c in this.errorstyles[a].paths)this.errorstyles[a][c]&&this.errorstyles[a][c].dom&&this.errorstyles[a][c].dom.setAttribute("d",this.errorstyles[a].paths[c])}};b["default"]=g},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function h(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function i(a,b,c,d){var e=(c+1)*d,f=a*(c+1)+b+.5;return[f/e,1/e,(f+.5)/e]}Object.defineProperty(b,"__esModule",{value:!0});var j=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),k=c(3),l=(e(k),c(11)),m=d(l),n=c(14),o=(d(n),function(a){function b(){return f(this,b),g(this,Object.getPrototypeOf(b).call(this))}return h(b,a),j(b,[{key:"init",value:function(a,b,c){this.graph=a,this.name=b,this.options=c||{},this.groupMain=document.createElementNS(this.graph.ns,"g"),this.pathDom=document.createElementNS(this.graph.ns,"path"),this.groupMain.appendChild(this.pathDom),this.styles={},this.styles.unselected={lineColor:this.options.lineColor,lineStyle:this.options.lineStyle,lineWidth:this.options.lineWidth,fillColor:this.options.fillColor,fillOpacity:this.options.fillOpacity,markers:this.options.markers}}},{key:"setData",value:function(a){this.data=a,this.minY=Number.MAX_SAFE_INTEGER,this.maxY=Number.MIN_SAFE_INTEGER;for(var b in this.data)this._checkY(this.data[b]);return this}},{key:"setFillColor",value:function(a,b,c){return b=b||"unselected",this.styles[b]=this.styles[b]||{},this.styles[b].fillColor=a,c&&this.setFillColor(a,"selected"),this.styleHasChanged(b),this}},{key:"getFillColor",value:function(a){return this.getStyle(a).fillColor}},{key:"setFillOpacity",value:function(a,b,c){return b=b||"unselected",this.styles[b]=this.styles[b]||{},this.styles[b].fillOpacity=a,c&&this.setLineWidth(a,"selected"),this.styleHasChanged(b),this}},{key:"getFillOpacity",value:function(a){return this.getStyle(a).fillOpacity||1}},{key:"applyLineStyles",value:function(){this.applyLineStyle(this.pathDom)}},{key:"applyLineStyle",value:function(a){a.setAttribute("stroke",this.getLineColor()),a.setAttribute("stroke-width",this.getLineWidth()),this.getLineDashArray()?a.setAttribute("stroke-dasharray",this.getLineDashArray()):a.removeAttribute("stroke-dasharray"),a.setAttribute("fill",this.getFillColor()),a.setAttribute("fill-opacity",this.getFillOpacity()||1)}},{key:"draw",value:function(){var a,b,c="";this.error&&this.errorDrawInit();for(var d in this.data)!1!==(a=this.getCategoryIndex(d))&&(b=i(a,this.order,this.nbSeries,this.categories.length),c+="M "+this.getXAxis().getPos(b[0])+" "+this.getYAxis().getPos(0)+" V "+this.getYAxis().getPos(this.data[d])+" h "+this.getXAxis().getDeltaPx(b[1])+" V "+this.getYAxis().getPos(0),this.error&&this.errorAddPointBarChart(d,this.data[d],this.getXAxis().getPos(b[2]),this.getYAxis().getPos(this.data[d])));this.error&&this.errorDraw(),this.pathDom.setAttribute("d",c),this.applyLineStyles()}},{key:"getCategoryIndex",value:function(a){if(!this.categories)throw new Error("No categories were defined. Probably axis.setSeries was not called");for(var b=0;b<this.categories.length;b++)if(this.categories[b].name==a)return b;return!1}},{key:"setMarkers",value:function(){}},{key:"setBarConfig",value:function(a,b,c){this.order=a,this.categories=b,this.nbSeries=c}}]),b}(m["default"]));b["default"]=o},function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function h(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=c(11),k=e(j),l=c(3),m=(d(l),c(14)),n=(e(m),function(a){function b(){return f(this,b),g(this,Object.getPrototypeOf(b).apply(this,arguments))}return h(b,a),i(b,[{key:"initExtended1",value:function(){this.lines=this.lines||{},this.initExtended2&&this.initExtended2()}},{key:"setColors",value:function(a){this.color=a}},{key:"_draw_standard",value:function(){var a,b,c,d,e,f,c,g,h,i,j,k=this,l=this._dataToUse,m=0,n=l.length,o=!1,p=!1,q=this.getXAxis(),r=this.getYAxis(),s=q.getCurrentMin(),t=r.getCurrentMin(),u=q.getCurrentMax(),v=r.getCurrentMax(),w=0,x=1,y=!1,z=!1;for(this.eraseLines(),this.isFlipped()&&(w=1,x=0),m=0;n>m;m++){for(a=!1,this.counter1=m,this.currentLine="",b=0,c=0,d=l[m].length,b=0;d>b;b+=2)if(e=l[m][b+w],f=l[m][b+x],s>e&&s>o||e>u&&o>u||(t>f&&t>p||f>v&&p>v)&&!this.options.lineToZero)o=e,p=f,z=!0;else if(this.counter2=b/2,this.markersShown()&&this.getMarkerCurrentFamily(this.counter2),i=this.getX(e),j=this.getY(f),i!=g||j!=h)if(y=s>e||t>f||e>u||f>v,isNaN(i)||isNaN(j))this.counter>0;else if(this._optimize_before(i,j)){var A=this.colors[m][b/2];if(this._addPoint(i,j,e,f,g,h,o,p,b,A,!1,!0),this.detectPeaks(e,f),!this._optimize_after(i,j)){a=!0;break}g=i,h=j,o=e,p=f}if(a)break}if(this.latchLines(),this._tracker){this._trackerDom&&this._trackerDom.remove();var B=this.groupLines.cloneNode(!0);this.groupMain.appendChild(B);for(var m=0,n=B.children.length;n>m;m++)B.children[m].setAttribute("stroke","transparent"),B.children[m].setAttribute("stroke-width","25px"),B.children[m].setAttribute("pointer-events","stroke");k._trackerDom=B,k.groupMain.addEventListener("mousemove",function(a){var b=k.graph._getXY(a),c=k.handleMouseMove(!1,!1);k._trackingCallback(k,c,b.x,b.y)}),k.groupMain.addEventListener("mouseleave",function(a){k._trackingOutCallback(k)})}return this}},{key:"_addPoint",value:function(a,b,c,d,e,f,g,h,i,j,k,l){if(void 0!==e&&void 0!==f&&!isNaN(a)&&!isNaN(b)){var m=this.lines[j];m||(m=this.lines[j]={object:document.createElementNS(this.graph.ns,"path"),path:"",color:j},m.object.setAttribute("stroke",j),m.color=j,this.groupLines.appendChild(m.object)),m.path+="M "+e+" "+f+" L "+a+" "+b,this.error&&this.errorAddPoint(i,c,d,a,b),this.markersShown()&&l!==!1&&drawMarkerXY(this,this.markerFamilies[this.selectionType][this.markerCurrentFamily],a,b)}}},{key:"removeExtraLines",value:function(){}},{key:"latchLines",value:function(){for(var a in this.lines)this.lines[a].object.setAttribute("d",this.lines[a].path)}},{key:"eraseLines",value:function(){for(var a in this.lines)this.lines[a].path="",this.lines[a].object.setAttribute("d","")}},{key:"applyLineStyle",value:function(a){a.setAttribute("stroke-width",this.getLineWidth()),this.getLineDashArray()?a.setAttribute("stroke-dasharray",this.getLineDashArray()):a.removeAttribute("stroke-dasharray"),a.setAttribute("fill","none")}}]),b}(k["default"]));b["default"]=n},function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function h(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},j=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),k=c(12),l=e(k),m=c(3),n=d(m),o=c(14),p=e(o),q={},r="scatter",s=function(a){function b(){return f(this,b),g(this,Object.getPrototypeOf(b).apply(this,arguments))}return h(b,a),j(b,[{key:"init",value:function(a,b,c){var d=this;this.graph=a,this.name=b,this.id=Math.random()+Date.now(),this.shapes=[],this.shown=!0,this.options=n.extend(!0,{},q,c),this.data=[],this.shapesDetails=[],this.shapes=[],this._type=r,n.mapEventEmission(this.options,this),this._isMinOrMax={x:{min:!1,max:!1},y:{min:!1,max:!1}},this.groupPoints=document.createElementNS(this.graph.ns,"g"),this.groupMain=document.createElementNS(this.graph.ns,"g"),this.additionalData={},this.selectedStyleGeneral={},this.selectedStyleModifiers={},this.groupPoints.addEventListener("mouseover",function(a){var b=parseInt(a.target.parentElement.getAttribute("data-shapeid"));d.emit("mouseover",b,d.data[2*b],d.data[2*b+1])}),this.groupPoints.addEventListener("mouseout",function(a){var b=parseInt(a.target.parentElement.getAttribute("data-shapeid"));d.emit("mouseout",b,d.data[2*b],d.data[2*b+1])}),this.minX=Number.MAX_VALUE,this.minY=Number.MAX_VALUE,this.maxX=Number.MIN_VALUE,this.maxY=Number.MIN_VALUE,this.groupMain.appendChild(this.groupPoints),this.currentAction=!1,this.initExtended1&&this.initExtended1(),this.styles={},this.styles.unselected={},this.styles.selected={},this.styles.unselected["default"]={shape:"circle",cx:0,cy:0,r:3,stroke:"transparent",fill:"black"},this.styles.selected["default"]={shape:"circle",cx:0,cy:0,r:4,stroke:"transparent",fill:"black"}}},{key:"setData",value:function(a,b,c){var d,e=0,b=b||"2D",c=c||"float",f=0;if(this.empty(),this.shapesDetails=[],this.shapes=[],!a instanceof Array)return this;a instanceof Array&&!(a[0]instanceof Array)&&"object"!==i(a[0])&&(b="1D");var g="2D"==b;d=this._addData(c,g?2*a.length:a.length),e=0;for(var h=0,j=a.length;j>h;h++)g?(d[e]=a[h][0],this._checkX(d[e]),e++,d[e]=a[h][1],this._checkY(d[e]),e++,f++):(d[e]=a[h],this[h%2==0?"_checkX":"_checkY"](d[e]),e++,f+=h%2?1:0);return this.dataHasChanged(),this.graph.updateDataMinMaxAxes(),this.data=d,this}},{key:"empty",value:function(){for(;this.groupPoints.firstChild;)this.groupPoints.removeChild(this.groupPoints.firstChild)}},{key:"getSymbolForLegend",value:function(){if(this.symbol)return this.symbol;var a=document.createElementNS(this.graph.ns,"g");a.setAttribute("data-shapeid",-1);var b=this.doShape(a,this.styles.unselected["default"]),c=this.getStyle("unselected",-1,!0);for(var d in c[-1])"shape"!=d&&b.setAttribute(d,c[-1][d]);return a}},{key:"setStyle",value:function(a,b,c){return"string"==typeof b&&(c=b,b=!1),void 0===c&&(c="unselected"),this.styles[c]=this.styles[c]||{},this.styles[c].all=a,this.styles[c].modifiers=b,this.styleHasChanged(c),this}},{key:"draw",value:function(a){if(a||this.hasDataChanged()||this.hasStyleChanged("unselected")){var b,c,d,e,f=0;this._drawn=!0,this.dataHasChanged(!1),this.styleHasChanged(!1),this.groupMain.removeChild(this.groupPoints);var g=0,h=1;this.getFlip()&&(g=1,h=0);var i=(this.data.length/2,[]);for(f=0,d=0,e=this.data.length,this.error&&this.errorDrawInit();e>f;f+=2)if(!(this.data[f+g]<this.getXAxis().getCurrentMin()||this.data[f+g]>this.getXAxis().getCurrentMax()||this.data[f+h]<this.getYAxis().getCurrentMin()||this.data[f+h]>this.getYAxis().getCurrentMax())){b=this.getX(this.data[f+g]),c=this.getY(this.data[f+h]);this.data[f+h];this.error&&this.errorAddPoint(f,this.data[f+g],this.data[f+h],b,c),this.shapesDetails[f/2]=this.shapesDetails[f/2]||[],this.shapesDetails[f/2][0]=b,this.shapesDetails[f/2][1]=c,i.push(f/2)}this.error&&this.errorDraw(),this.applyStyle("unselected",i),this.groupMain.appendChild(this.groupPoints)}}},{key:"_addPoint",value:function(a,b,c){var d=document.createElementNS(this.graph.ns,"g");d.setAttribute("transform","translate("+a+", "+b+")"),d.setAttribute("data-shapeid",c),this.extraStyle&&this.extraStyle[c]?shape=this.doShape(d,this.extraStyle[c]):this.stdStylePerso?shape=this.doShape(d,this.stdStylePerso):shape=this.doShape(d,this.stdStyle),this.shapes[c]=shape,this.groupPoints.appendChild(d)}},{key:"doShape",value:function(a,b){var c=document.createElementNS(this.graph.ns,b.shape);return a.appendChild(c),c}},{key:"getStyle",value:function(a,b,c){var d,a=a||"unselected",e={};"number"==typeof b?d=[b]:Array.isArray(b)&&(d=b);var f,b,g,h,i;void 0!==this.styles[a].all&&(i=this.styles[a].all,"function"==typeof i?i=i():i===!1&&(i={}));for(var j=0,k=d.length;k>j;j++){if(b=d[j],f=this.shapes[b],(g=this.styles[a].modifiers)&&("function"==typeof g||g[b])){"function"==typeof g?h=g(b,f):g[b]&&(h=g[b]);var l=n.extend({},i,h);h=n.extend(h,l)}else h=void 0!==i?i:this.styles[a]["default"];if(!f){var m=document.createElementNS(this.graph.ns,"g");m.setAttribute("data-shapeid",b),this.shapes[b]=this.doShape(m,h),this.groupPoints.appendChild(m),f=this.shapes[b]}console.log(this.shapesDetails),c||f.parentNode.setAttribute("transform","translate("+this.shapesDetails[b][0]+", "+this.shapesDetails[b][1]+")"),e[b]=h}return e}},{key:"applyStyle",value:function(a,b,c){var d,e,f=this.getStyle(a,b,c);for(d in f)for(e in f[d])"shape"!==e&&(f[d][e]?this.shapes[d].setAttribute(e,f[d][e]):this.shapes[d].removeAttribute(e))}},{key:"unselectPoint",value:function(a){this.selectPoint(a,!1)}},{key:"selectPoint",value:function(a,b,c){if(!this.shapesDetails[a][2]||this.shapesDetails[a][2]!=c){if("string"==typeof b&&(c=b,b=void 0),Array.isArray(a))return this.selectPoints(a);if(this.shapes[a]&&this.shapesDetails[a])if(!this.shapesDetails[a][2]&&b!==!1||b===!0)c=c||"selected",this.shapesDetails[a][2]=c,this.applyStyle(c,a,!0);else{var d=this.shapesDetails[a][2];this.shapesDetails[a][2]=!1;var e=this.getStyle(d,a,!0);for(var f in e[a])this.shapes[a].removeAttribute(f);this.applyStyle("unselected",a,!0)}}}}]),b}(l["default"]);n.mix(s,p["default"]),b["default"]=s},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=c(12),j=d(i),k=c(3),l={fillColor:"rgba( 0, 0, 0, 0.1 )",lineColor:"rgba( 0, 0, 0, 1 )",lineWidth:"1px"},m=function(a){function b(){return e(this,b),f(this,Object.getPrototypeOf(b).apply(this,arguments))}return g(b,a),h(b,[{key:"init",value:function(a,b,c){this.graph=a,this.name=b,this.selectionType="unselected",this.id=Math.random()+Date.now(),this.shown=!0,this.options=k.extend(!0,{},l,c),this.data=[],this.groupZones=document.createElementNS(this.graph.ns,"g"),this.groupMain=document.createElementNS(this.graph.ns,"g"),this.lineZone=document.createElementNS(this.graph.ns,"path"),this.lineZone.setAttribute("stroke","black"),this.lineZone.setAttribute("stroke-width","1px"),this.additionalData={},this.minX=Number.MAX_VALUE,this.minY=Number.MAX_VALUE,this.maxX=Number.MIN_VALUE,this.maxY=Number.MIN_VALUE,this.groupMain.appendChild(this.groupZones),this.groupZones.appendChild(this.lineZone),this.currentAction=!1,this.applyLineStyle(this.lineZone),this.styleHasChanged(),this.clip=document.createElementNS(this.graph.ns,"clipPath"),this.clipId=k.guid(),this.clip.setAttribute("id",this.clipId),this.graph.defs.appendChild(this.clip),this.clipRect=document.createElementNS(this.graph.ns,"rect"),this.clip.appendChild(this.clipRect),this.clip.setAttribute("clipPathUnits","userSpaceOnUse"),this.groupMain.setAttribute("clip-path","url(#"+this.clipId+")")}},{key:"setData",value:function(a,b,c){var d,e=0,b=b||"2D",c=c||"float",f=0;if(this.data=[],this.dataHasChanged(),!(!a instanceof Array)){var g;a instanceof Array&&!(a[0]instanceof Array)?(b="1D",g=1.5*a.length,a[1]instanceof Array||(b="1D_flat",g=1*a.length)):a instanceof Array&&!(a[0][1]instanceof Array)?(b="2D_flat",g=3*a.length):(b="2D",g=3*a.length),d=this._addData(c,g),e=0;for(var h=0,i=a.length;i>h;h++)if("2D"==b||"2D_flat"==b)d[e]=a[h][0],this._checkX(d[e]),e++,"2D"==b?(d[e]=a[h][1][0],this._checkY(d[e]),e++,f++,d[e]=a[h][1][1],this._checkY(d[e]),e++,f++):(d[e]=a[h][1],this._checkY(d[e]),e++,f++,d[e]=a[h][2],this._checkY(d[e]),e++,f++);else if("1D_flat"==b){if(h%3==0){d[e]=a[h],this._checkX(d[e]),e++,f++;continue}d[e]=a[h],this._checkY(d[e]),e++,f++}else{if(h%2==0){d[e]=a[h],this._checkX(d[e]),e++,f++;continue}d[e]=a[h][0],this_checkY(d[e]),e++,f++,d[e]=a[h][1],this_checkY(d[e]),e++,f++}return this.graph.updateDataMinMaxAxes(),this.data=d,this.dataHasChanged(),this}}},{key:"_addData",value:function(a,b){switch(a){case"int":var c=4*b;break;case"float":var c=8*b}var d=new ArrayBuffer(c);switch(a){case"int":return new Int32Array(d);default:case"float":return new Float64Array(d)}}},{key:"empty",value:function(){for(;this.group.firstChild;)this.group.removeChild(this.group.firstChild)}},{key:"draw",value:function(a){if(a||this.hasDataChanged()){var b,c,d,e,f,g=0,h=this.getXAxis().getMinPx(),i=this.getXAxis().getMaxPx(),j=this.getYAxis().getMinPx(),k=this.getYAxis().getMaxPx();this.clipRect.setAttribute("x",Math.min(h,i)),this.clipRect.setAttribute("y",Math.min(j,k)),this.clipRect.setAttribute("width",Math.abs(i-h)),this.clipRect.setAttribute("height",Math.abs(k-j)),this._drawn=!0,this.groupMain.removeChild(this.groupZones);this.data.length/2;g=0,e=0,f=this.data.length;for(var l,m="",n="";f>g;g+=3)if(b=this.getX(this.data[g]),c=this.getY(this.data[g+1]),d=this.getY(this.data[g+2]),0>b)l=[b,c,d];else if(l&&(""!==n&&(n=" L "+n),m+=l[0]+","+Math.max(l[1],l[2])+" L ",n=b+","+Math.min(l[1],l[2])+n,l=!1,e++),""!==n&&(n=" L "+n),d>c?(m+=b+","+c+" L ",n=b+","+d+n):(m+=b+","+d+" L ",n=b+","+c+n),b>this.getXAxis().getMaxPx())break;m.length>0&&n.length>0?this.lineZone.setAttribute("d","M "+m+n+" z"):this.lineZone.setAttribute("d",""),this.groupMain.appendChild(this.groupZones)}this.hasStyleChanged(this.selectionType)&&(this.applyLineStyle(this.lineZone),this.styleHasChanged(!1))}},{key:"applyLineStyle",value:function(a){a.setAttribute("stroke",this.getLineColor()),a.setAttribute("stroke-width",this.getLineWidth()),a.setAttribute("fill",this.getFillColor()),a.setAttribute("fill-opacity",this.getFillOpacity()),a.setAttribute("stroke-opacity",this.getLineOpacity())}},{key:"setLineWidth",value:function(a){return this.options.lineWidth=a,this.styleHasChanged(),this}},{key:"getLineWidth",value:function(){return this.options.lineWidth}},{key:"setLineOpacity",value:function(a){return this.options.lineOpacity=a,this.styleHasChanged(),this}},{key:"getLineOpacity",value:function(){return this.options.lineOpacity}},{key:"setLineColor",value:function(a){return this.options.lineColor=a,this.styleHasChanged(),this}},{key:"getLineColor",value:function(){return this.options.lineColor}},{key:"setFillOpacity",value:function(a){return this.options.fillOpacity=a,this.styleHasChanged(),this}},{key:"getFillOpacity",value:function(){return this.options.fillOpacity}},{key:"setFillColor",value:function(a){return this.options.fillColor=a,this.styleHasChanged(),this}},{key:"getFillColor",value:function(){return this.options.fillColor}},{key:"getMax",value:function(a,b){var c,d,e,f,g=Math.min(a,b),h=Math.max(a,b),i=this.searchClosestValue(g),j=this.searchClosestValue(h),k=-(1/0);if(i||(g=this.minX,i=this.searchClosestValue(g)),j||(h=this.maxX,j=this.searchClosestValue(h)),!i||!j)return-(1/0);for(c=i.dataIndex;c<=j.dataIndex;c++)for(e=c==i.dataIndex?i.xBeforeIndexArr:0,f=c==j.dataIndex?j.xBeforeIndexArr:this.data[c].length,d=e;f>=d;d+=3)k=Math.max(k,this.data[c][d+1],this.data[c][d+2]);return k}},{key:"getMin",value:function(a,b){var c,d,e,f,g=Math.min(a,b),h=Math.max(a,b),i=this.searchClosestValue(g),j=this.searchClosestValue(h),k=1/0;if(i||(g=this.minX,i=this.searchClosestValue(g)),j||(h=this.maxX,j=this.searchClosestValue(h)),!i||!j)return 1/0;for(c=i.dataIndex;c<=j.dataIndex;c++)for(e=c==i.dataIndex?i.xBeforeIndexArr:0,f=c==j.dataIndex?j.xBeforeIndexArr:this.data[c].length,d=e;f>=d;d+=3)k=Math.min(k,this.data[c][d+1],this.data[c][d+2]);return k}},{key:"searchClosestValue",value:function(a){for(var b,c=0;c<this.data.length;c++){if(a<=this.data[c][this.data[c].length-3]&&a>=this.data[c][0])b=this._searchBinary(a,this.data[c],!1);else{if(!(a>=this.data[c][this.data[c].length-3]&&a<=this.data[c][0]))continue;b=this._searchBinary(a,this.data[c],!0)}return{dataIndex:c,xMin:this.data[c][b],xMax:this.data[c][b+3],yMin:this.data[c][b+1],yMax:this.data[c][b+4],xBeforeIndex:b/3,xAfterIndex:b/3+1,xBeforeIndexArr:b,xClosest:(Math.abs(this.data[c][b+3]-a)<Math.abs(this.data[c][b]-a)?b+3:b)/2}}}},{key:"_searchBinary",value:function(a,b,c){var d=0,e=b.length,f=e-3;if(b[d]==a)return d;if(b[f]==a)return f;for(var g,h=0;;){if(h++,h>100)throw"Error loop";if(g=(d+f)/3,g-=g%3,g==d||b[g]==a)return g;b[g]<=a?c?f=g:d=g:b[g]>a&&(c?d=g:f=g)}}}]),b}(j["default"]);b["default"]=m},function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function h(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=c(12),k=e(j),l=c(3),m=d(l),n={},o=function(a){function b(){return f(this,b),g(this,Object.getPrototypeOf(b).apply(this,arguments))}return h(b,a),i(b,[{key:"init",value:function(a,b,c){this.options=m.extend(!0,{},n,c||{}),m.mapEventEmission(this.options,this),this.graph=a,this.groupMain=document.createElementNS(this.graph.ns,"g"),this.rects=[],this.paths=[],this.recalculateBinsOnDraw=!1}},{key:"setData",value:function(a){this.minX=this.maxX=this.minY=this.maxY=0;var b=0,c=a.length;for(this.data=a,this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY,b=0;c>b;b++)this._checkX(a[b][0]),this._checkY(a[b][1]);return this.dataHasChanged(),this.graph.updateDataMinMaxAxes(),this}},{key:"calculateDensity",value:function(a,b,c,d,e,f){var g,h,i,j=[],k=this.data.length,l=Number.POSITIVE_INFINITY,m=Number.NEGATIVE_INFINITY;for(g=0;k>g;g++)h=~~((this.data[g][0]-a)/b),i=~~((this.data[g][1]-d)/e),h>c||i>f||0>h||0>i||(j[h]=j[h]||[],j[h][i]=j[h][i]+1||1,l=j[h][i]<l?j[h][i]:l,m=j[h][i]>m?j[h][i]:m);return this.maxIndexX=c,this.maxIndexY=f,this.binMin=l,this.binMax=m,this.deltaX=b,this.deltaY=e,this.fromX=a,this.fromY=d,this.numX=c,this.numY=f,this.densitymap=j,j}},{key:"calculateDensityWeighted",value:function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r=[],s=this.data.length,t=Number.POSITIVE_INFINITY,u=Number.NEGATIVE_INFINITY;for(g=0;s>g;g++)l=(this.data[g][0]-a)/b-.5,m=(this.data[g][1]-d)/e-.5,h=Math.floor(l),i=Math.floor(m),n=h,p=i,o=h+1,q=i+1,j=1-(l-h),k=1-(m-i),h>c||i>f||0>h||0>i||(r[n]=r[n]||[],r[o]=r[o]||[],r[n][p]=r[n][p]||0,r[o][p]=r[o][p]||0,r[n][q]=r[n][q]||0,r[o][q]=r[o][q]||0,r[n][p]+=j*k,r[o][p]+=(1-j)*k,r[n][q]+=j*(1-k),r[o][q]+=(1-j)*(1-k),t=r[n][p]<t?r[n][p]:t,u=r[n][p]>u?r[n][p]:u,t=r[o][p]<t?r[o][p]:t,u=r[o][p]>u?r[o][p]:u,t=r[n][q]<t?r[n][q]:t,u=r[n][q]>u?r[n][q]:u,t=r[o][q]<t?r[o][q]:t,u=r[o][q]>u?r[o][q]:u);return this.maxIndexX=c,this.maxIndexY=f,this.binMin=t,this.binMax=u,this.deltaX=b,this.deltaY=e,this.fromX=a,this.fromY=d,this.numX=c,this.numY=f,this.densitymap=r,r}},{key:"autoBins",value:function(a,b){return this.numX=a||400,this.numY=b||this.numX,this.calculateDensity(this.minX,(this.maxX-this.minX)/a,a,this.minY,(this.maxY-this.minY)/b,b),this.recalculateBinsOnDraw=!1,this}},{key:"setPxPerBin",value:function(a,b,c){return a&&this.calculationDensityMap({from:"min",to:"max",pxPerBin:a,weighted:c}),b&&this.calculationDensityMap(!1,{from:"min",to:"max",pxPerBin:b,weighted:c}),this}},{key:"setBinsFromTo",value:function(a,b,c,d){return this.densityMapCalculation=this.densityMapCalculation||{},this.densityMapCalculation[a]={from:b,to:c,numBins:d},this.calculationDensityMap(),this}},{key:"calculationDensityMap",value:function(a,b){this.method=this.calculateDensityAdvanced,this.densityMapCalculation=this.densityMapCalculation||{},a&&(this.densityMapCalculation.x=a),b&&(this.densityMapCalculation.y=b)}},{key:"calculateDensityAdvanced",value:function(){var a={x:{from:0,num:0,delta:0,weighing:!1},y:{from:0,num:0,delta:0,weighing:!1}},b={x:this.graph.drawingSpaceWidth,y:this.graph.drawingSpaceHeight},c={x:this.getXAxis,y:this.getYAxis},d=!1;for(var e in this.densityMapCalculation)if(this.densityMapCalculation[e].weighted&&(d=!0,a[e].weighing=!0),this.densityMapCalculation[e].pxPerBin){var f="min"==this.densityMapCalculation[e].from?c[e].call(this).getCurrentMin():this.densityMapCalculation[e].from,g="max"==this.densityMapCalculation[e].to?c[e].call(this).getCurrentMax():this.densityMapCalculation[e].to,h=Math.abs(c[e].call(this).getRelPx(g-f));a[e].num=Math.ceil(b[e]/this.densityMapCalculation[e].pxPerBin),a[e].from=f-Math.abs(c[e].call(this).getRelVal((a[e].num*this.densityMapCalculation[e].pxPerBin-h)/2)),a[e].delta=Math.abs(c[e].call(this).getRelVal(this.densityMapCalculation[e].pxPerBin))}else a[e].num=this.densityMapCalculation[e].numBins||400,a[e].from="min"==this.densityMapCalculation[e].from?c[e].call(this).getCurrentMin():this.densityMapCalculation[e].from,a[e].delta=this.densityMapCalculation[e].to?(("max"==this.densityMapCalculation[e].to?c[e].call(this).getCurrentMax():this.densityMapCalculation[e].to)-a[e].from)/a[e].num:this.densityMapCalculate[e].delta;(d?this.calculateDensityWeighted:this.calculateDensity).call(this,a.x.from,a.x.delta,a.x.num,a.y.from,a.y.delta,a.y.num)}},{key:"setColorMapBinBoundaries",value:function(a,b){return this.colorMapMin=a,this.colorMapMax=b,this}},{key:"autoColorMapBinBoundaries",
value:function(){return this.colorMapMin=this.binMin,this.colorMapMax=this.binMax,this}},{key:"onRedrawColorMapBinBoundaries",value:function(a){return this.callbackColorMapMinMax=a,this}},{key:"colorMapHSL",value:function(a,b,c){c=c||"linear";for(var d,e,f={exp:function(a){return(Math.exp(a/b*1)-Math.exp(0))/(Math.exp(1)-Math.exp(0))},log:function(a){return(Math.log(a+1)-Math.log(1))/(Math.log(b+1)-Math.log(1))},linear:function(a){return(a-0)/(b-0)}},g=0,h=[],i=[],j={h:null,s:null,l:null,a:null},k=a.length-1,l=0;b>=l;l++){d=f[c](l),e=Math.floor(d*k),e==a.length-1&&(e=k-1),d=(d-e/k)/(1/k);for(var m in j)j[m]=(a[e+1][m]-a[e][m])*d+a[e][m];h[g]="hsl("+j.h+", "+Math.round(100*j.s)+"%, "+Math.round(100*j.l)+"%)",i[g]=j.a,g++}return this.opacities=i,this.colorMap=h,this.colorMapNum=b,this}},{key:"autoColorMapHSL",value:function(a,b){return this.colorMapHSV(a,100,b||"linear"),this}},{key:"getColorIndex",value:function(a){return Math.max(0,Math.min(this.colorMapNum,Math.floor((a-this.colorMapMin)/(this.colorMapMax-this.colorMapMin)*this.colorMapNum)))}},{key:"draw",value:function(){var a;if(this.method&&this.method(),(this.callbackColorMapMinMax||void 0!=this.colorMapMin&&void 0!=this.colorMapMax)&&"auto"!=this.callbackColorMapMinMax){var b=this.callbackColorMapMinMax(this.binMin,this.binMax);this.setColorMapBinBoundaries(b[0],b[1])}else this.autoColorMapBinBoundaries();for(var c=this.getXAxis().getRelPx(this.deltaX),d=this.getYAxis().getRelPx(this.deltaY),e=0;e<this.paths.length;e++)this.paths[e]="";for(var e=0;e<this.maxIndexX;e++)for(var f=0;f<this.maxIndexY;f++)void 0!=this.densitymap[e]&&void 0!=this.densitymap[e][f]&&(a=this.getColorIndex(this.densitymap[e][f]),this.paths[a]||(this.paths[a]=""),this.paths[a]+=" M "+this.getXAxis().getPx(e*this.deltaX+this.fromX)+" "+this.getYAxis().getPx(f*this.deltaY+this.fromY)+" h "+c+" v "+d+" h -"+c+" z");this.drawRects()}},{key:"drawRects",value:function(){for(var a=0;a<this.paths.length;a++)this.rects[a]||(this.rects[a]=document.createElementNS(this.graph.ns,"path"),this.rects[a].setAttribute("shape-rendering","crispEdges")),void 0!==this.paths[a]&&(this.rects[a].setAttribute("d",this.paths[a]),this.rects[a].setAttribute("fill",this.colorMap[a]),this.rects[a].setAttribute("fill-opacity",this.opacities[a])),this.groupMain.appendChild(this.rects[a])}},{key:"setOptions",value:function(a){return this.options=m.extend(!0,{},n,a||{}),this}}]),b}(k["default"]);b["default"]=o},function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function h(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},j=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),k=c(11),l=e(k),m=c(3),n=d(m),o=function(a){function b(){f(this,b);var a=g(this,Object.getPrototypeOf(b).apply(this,arguments));return a.negativeDelta=0,a.positiveDelta=0,a.negativeThreshold=0,a.positiveThreshold=0,a}return h(b,a),j(b,[{key:"setData",value:function(a,b,c){var d,e,f,g,c=c||"float",h=a.length,j=[];for(a instanceof Array||"object"==("undefined"==typeof a?"undefined":i(a))&&(this.minX=a.minX,this.minY=a.minY,this.maxX=a.maxX,this.maxY=a.maxY,a=a.segments,h=a.length),d=0;h>d;d++){for(f=a[d].lines.length,g=this._addData(c,f),e=0;f>e;e+=2)g[e]=a[d].lines[e],this._checkX(g[e]),g[e+1]=a[d].lines[e+1],this._checkY(g[e+1]);j.push({lines:g,zValue:a[d].zValue})}return this.data=j,this.graph.updateDataMinMaxAxes(),this.dataHasChanged(!0),this}},{key:"draw",value:function(a){if(a||this.hasDataChanged()){this.currentLine=0;var b,c,d,e,f,g,h,i,j=0,k=this.data.length,l=0;this.minZ=1/0,this.maxZ=-(1/0);var m=this.groupLines.nextSibling;this.groupMain.removeChild(this.groupLines),this.zValues={};var n=0,o=1;this.getFlip()&&(n=0,o=1);var p=this.getYAxis().getCurrentMin(),q=this.getXAxis().getCurrentMin(),r=this.getXAxis().getCurrentMax(),s=this.getYAxis().getCurrentMax();for(this.counter=0,this.currentLineId=0;k>j;j++){for(this.currentLine="",l=0,f=0,i=this.data[j].lines,g=i.length;g>l;l+=4){var t,u;i[l+n]<q&&i[l+2+n]<q||i[l+o]<p&&i[l+2+o]<p||i[l+o]>s&&i[l+2+o]>s||i[l+n]>r&&i[l+2+n]>r||(d=this.getX(i[l+n]),e=this.getY(i[l+o]),b=this.getX(i[l+2+n]),c=this.getY(i[l+2+o]),(b!=d||c!=e)&&(this.currentLine+="M ",this.currentLine+=d,this.currentLine+=" ",this.currentLine+=e,this.currentLine+="L ",this.currentLine+=b,this.currentLine+=" ",this.currentLine+=c,this.counter++,t=b,u=c,f++))}this.currentLine+=" z",h=this._createLine(),h.setAttribute("data-zvalue",this.data[j].zValue),this.zValues[this.data[j].zValue]={dom:h},this.minZ=Math.min(this.minZ,this.data[j].zValue),this.maxZ=Math.max(this.maxZ,this.data[j].zValue)}for(j++,j=this.currentLine+1;j<this.lines.length;j++)this.groupLines.removeChild(this.lines[j]),this.lines.splice(j,1);for(j=0;k>j;j++)this.setColorTo(this.lines[j],this.data[j].zValue,this.minZ,this.maxZ);this.onMouseWheel(0,{shiftKey:!1}),this.groupMain.insertBefore(this.groupLines,m)}else if(this.hasStyleChanged(this.selectionType))for(;k>j;j++)this.setColorTo(this.lines[j],this.data[j].zValue,this.minZ,this.maxZ)}},{key:"onMouseWheel",value:function(a,b,c,d){a/=250,void 0!==c?(d||(this.negativeThreshold=-c*this.minZ,this.negativeDelta=-Math.pow(Math.abs(this.negativeThreshold/-this.minZ),1/3)),d&&(this.positiveThreshold=c*this.maxZ,this.positiveDelta=Math.pow(this.positiveThreshold/this.maxZ,1/3))):b.shiftKey&&this.options.hasNegative?(this.negativeDelta=Math.min(0,Math.max(-1,this.negativeDelta+Math.min(.1,Math.max(-.1,a)))),this.negativeThreshold=-this.minZ*Math.pow(this.negativeDelta,3)):(this.positiveDelta=Math.min(1,Math.max(0,this.positiveDelta+Math.min(.1,Math.max(-.1,a)))),this.positiveThreshold=this.maxZ*Math.pow(this.positiveDelta,3)),isNaN(this.positiveDelta)&&(this.positiveDelta=0),isNaN(this.negativeDelta)&&(this.negativeDelta=0);for(var e in this.zValues)this.zValues[e].dom.setAttribute("display",e>=0&&e>=this.positiveThreshold||0>=e&&e<=this.negativeThreshold?"block":"none");this._shapeZoom&&(this.options.hasNegative?(this._shapeZoom.setHandleNeg(-Math.pow(this.negativeDelta,3),this.minZ),this._shapeZoom.showHandleNeg()):this._shapeZoom.hideHandleNeg(),this._shapeZoom.setHandlePos(Math.pow(this.positiveDelta,3),this.maxZ))}},{key:"setDynamicColor",value:function(a){this.lineColors=a,this.styleHasChanged()}},{key:"setNegative",value:function(a){this.options.hasNegative=a,a&&(this.negativeThreshold=0)}},{key:"setColorTo",value:function(a,b,c,d){if(this.lineColors){var e={h:0,s:0,l:0};for(var f in e)b>0?e[f]=this.lineColors.fromPositive[f]+(this.lineColors.toPositive[f]-this.lineColors.fromPositive[f])*(b/d):e[f]=this.lineColors.fromNegative[f]+(this.lineColors.toNegative[f]-this.lineColors.fromNegative[f])*(b/c);e.h/=360;var g=n.hslToRgb(e.h,e.s,e.l);a.setAttribute("stroke","rgb("+g.join()+")")}}},{key:"getSymbolForLegend",value:function(){if(!this.lineForLegend){var a=document.createElementNS(this.graph.ns,"ellipse");a.setAttribute("cx",7),a.setAttribute("cy",0),a.setAttribute("rx",8),a.setAttribute("ry",3),a.setAttribute("cursor","pointer"),this.lineForLegend=a}return this.applyLineStyle(this.lineForLegend,this.maxZ),this.lineForLegend}},{key:"applyLineStyle",value:function(a,b){a.setAttribute("stroke",this.getLineColor()),a.setAttribute("stroke-width",this.getLineWidth()+(this.isSelected()?2:0)),this.getLineDashArray()&&a.setAttribute("stroke-dasharray",this.getLineDashArray()),a.setAttribute("fill","none"),this.setColorTo(a,void 0!==b?b:a.getAttribute("data-zvalue"),this.minZ,this.maxZ),this.hasStyleChanged(!1)}},{key:"setShapeZoom",value:function(a){this._shapeZoom=a}}]),b}(l["default"]);b["default"]=o},function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function h(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=c(2),k=e(j),l=c(3),m=d(l),n=c(4),o=e(n),p=function(a){function b(){return f(this,b),g(this,Object.getPrototypeOf(b).call(this))}return h(b,a),i(b,[{key:"init",value:function(a,b){var c=this;if(this.graph=a,this.properties=b||{},this.handles=[],this.options=this.options||{},this.group=document.createElementNS(this.graph.ns,"g"),this._selected=!1,this.createDom(),this._dom&&(this._dom.jsGraphIsShape=this),this.group.jsGraphIsShape=this,this.classes=[],this.transforms=[],this._data.masker){var d=document.createElementNS(this.graph.ns,"mask");this.maskingId=Math.random(),d.setAttribute("id",this.maskingId),this.maskDomWrapper=document.createElementNS(this.graph.ns,"rect"),this.maskDomWrapper.setAttribute("fill","white"),d.appendChild(this.maskDomWrapper);var e=this._dom.cloneNode();d.appendChild(e),this.maskDom=e,this.graph.defs.appendChild(d)}return this.group&&(this._dom&&this.group.appendChild(this._dom),this.group.addEventListener("mouseover",function(a){c.handleMouseOver(a)}),this.group.addEventListener("mouseout",function(a){c.handleMouseOut(a)}),this.group.addEventListener("mousedown",function(a){c.graph.focus(),c.handleMouseDown(a)}),this.group.addEventListener("click",function(a){c.handleClick(a)}),this.group.addEventListener("dblclick",function(a){c.handleDblClick(a)})),this.initImpl(),this.graph.emit("shapeNew",this),this}},{key:"initImpl",value:function(){}},{key:"getData",value:function(){return this._data}},{key:"getType",value:function(){return this.type}},{key:"kill",value:function(a){this.graph.removeShapeFromDom(this),a||this.graph._removeShape(this),this.graph.stopElementMoving(this),this.graph.emit("shapeRemoved",this),this._inDom=!1}},{key:"hide",value:function(){return this.hidden?void 0:(this.hidden=!0,this.group.style.display="none",this)}},{key:"show",value:function(){return this.hidden?(this.hidden=!1,this.group.style.display="block",this.redraw(),this):void 0}},{key:"addClass",value:function(a){return this.classes=this.classes||[],-1==this.classes.indexOf(a)&&this.classes.push(a),this.makeClasses(),this}},{key:"removeClass",value:function(a){return this.classes.splice(this.classes.indexOf(a),1),this.makeClasses(),this}},{key:"makeClasses",value:function(){return this._dom&&this._dom.setAttribute("class",this.classes.join(" ")),this}},{key:"changed",value:function(a){return a&&this.graph.emit(a,this),this.graph.emit("shapeChanged",this),this}},{key:"setEventReceptacle",value:function(){this.rectEvent||(this.rectEvent=document.createElementNS(this.graph.ns,"rect"),this.rectEvent.setAttribute("pointer-events","fill"),this.rectEvent.setAttribute("fill","transparent"),this.group.appendChild(this.rectEvent),this.rectEvent.jsGraphIsShape=this);var a=this.group.getBBox();this.rectEvent.setAttribute("x",a.x),this.rectEvent.setAttribute("y",a.y-10),this.rectEvent.setAttribute("width",a.width),this.rectEvent.setAttribute("height",a.height+20)}},{key:"setSerie",value:function(a){return this.serie=a,this.xAxis=a.getXAxis(),this.yAxis=a.getYAxis(),this}},{key:"getSerie",value:function(){return this.serie}},{key:"autoAxes",value:function(){return this.xAxis||(this.xAxis=this.graph.getXAxis()),this.yAxis||(this.yAxis=this.graph.getYAxis()),this}},{key:"setXAxis",value:function(a){return this.xAxis=a,this}},{key:"setYAxis",value:function(a){this.yAxis=a}},{key:"getXAxis",value:function(){return this.xAxis||this.autoAxes(),this.xAxis}},{key:"getYAxis",value:function(){return this.yAxis||this.autoAxes(),this.yAxis}},{key:"setLayer",value:function(a){return this.setProp("layer",a),this}},{key:"getLayer",value:function(){var a=this.getProp("layer");return void 0!==a?a:1}},{key:"draw",value:function(a){return(!this._inDom||a)&&(this.appendToDom(),this._inDom=!0),this.makeLabels(),this.redraw(),this.applyStyle(),this}},{key:"redraw",value:function(){return this.hidden?this:(this.position=this.applyPosition(),this.redrawImpl(),this.position?(this.updateLabels(),this._applyTransforms(),this):this)}},{key:"redrawImpl",value:function(){}},{key:"setProperties",value:function(a){this.properties=a,Array.isArray(this.properties.position)||(this.properties.position=[this.properties.position]);for(var b=this,c=0,d=this.properties.position.length;d>c;c++){var e=k["default"].check(this.properties.position[c],function(a){return b.getRelativePosition(a)});this.properties.position[c]=e}return this.emit("propertiesChanged"),this}},{key:"getRelativePosition",value:function(a){var b;return null!==(b=/position([0-9]*)/.exec(a))?this.getPosition(b[1]):null!==(b=/labelPosition([0-9]*)/.exec(a))?this.getLabelPosition(b[1]):void 0}},{key:"getProperties",value:function(a){return this.properties}},{key:"setProp",value:function(a,b,c){return this.properties=this.properties||{},this.properties[a]=this.properties[a]||[],this.properties[a][c||0]=b,this.emit("propertyChanged",a),this}},{key:"getProp",value:function(a,b){return(this.properties[a]||[])[b||0]}},{key:"getProps",value:function(a,b){return this.properties[a]||[]}},{key:"addProp",value:function(a,b){this.properties[a]=this.properties[a]||[],this.properties[a].push(b)}},{key:"resetProp",value:function(a){this.properties[a]=[]}},{key:"setDom",value:function(a,b){this._dom&&this._dom.setAttribute(a,b)}},{key:"setDomGroup",value:function(a,b){this.group&&this.group.setAttribute(a,b)}},{key:"setStrokeColor",value:function(a){return this.setProp("strokeColor",a),this}},{key:"getStrokeColor",value:function(){return this.getProp("strokeColor")}},{key:"setFillColor",value:function(a){return this.setProp("fillColor",a),this}},{key:"getFillColor",value:function(){return this.getProp("fillColor")}},{key:"setFillOpacity",value:function(a){return this.setProp("fillOpacity",a),this}},{key:"setStrokeWidth",value:function(a){return this.setProp("strokeWidth",a),this}},{key:"getStrokeWidth",value:function(){return this.getProp("strokeWidth")}},{key:"setStrokeDasharray",value:function(a){return this.setProp("strokeDasharray",a),this}},{key:"setAttributes",value:function(a){return this.setProp("attributes",a),this}},{key:"addAttribute",value:function(a,b){var c={};return c[a]=b,this.addProp("attributes",c),this}},{key:"addTransform",value:function(a,b){return this.addProp("transforms",{type:a,arguments:Array.isArray(b)?b:[b]}),this}},{key:"resetTransforms",value:function(){return this.resetProp("transforms"),this}},{key:"setLabelText",value:function(a,b){return this.setProp("labelText",a,b||0),this}},{key:"getLabelText",value:function(a,b){return this.getProp("labelText",b||0)}},{key:"displayLabel",value:function(a){return this.setProp("labelVisible",!0,a||0),this}},{key:"hideLabel",value:function(a){return this.setProp("labelVisible",!1,a||0),this}},{key:"setLabelColor",value:function(a,b){return this.setProp("labelColor",a,b||0),this}},{key:"setLabelFontSize",value:function(a,b){return this.setProp("labelFontSize",a,b||0),this}},{key:"getLabelPosition",value:function(a){return this.getProp("labelPosition",a||0)}},{key:"setLabelPosition",value:function(a,b){var c,d=k["default"].check(a,function(a){return c.getRelativePosition(a)});return this.setProp("labelPosition",d,b||0),this}},{key:"setLabelAngle",value:function(a,b){return this.setProp("labelAngle",a,b||0),this}},{key:"setLabelBaseline",value:function(a,b){return this.setProp("labelBaseline",a,b||0),this}},{key:"setLabelAnchor",value:function(a,b){return this.setProp("labelAnchor",a,b||0),this}},{key:"setLabelSize",value:function(a,b){return this.setProp("labelSize",a,b||0),this}},{key:"setLabelStrokeColor",value:function(a,b){return this.setProp("labelStrokeColor",a,b||0),this}},{key:"setLabelStrokeWidth",value:function(a,b){return this.setProp("labelStrokeWidth",a,b||0),this}},{key:"applyGenericStyle",value:function(){this.setDom("fill",this.getProp("fillColor")),this.setDom("fill-opacity",this.getProp("fillOpacity")),this.setDom("stroke",this.getProp("strokeColor")),this.setDom("stroke-width",this.getProp("strokeWidth")),this.setDom("stroke-dasharray",this.getProp("strokeDasharray"));for(var a=this.getProps("attributes"),b=0,c=a.length;c>b;b++)for(var d in a[b])this.setDom(d,"function"==typeof a[b][d]?a[b][d].call(this,d):a[b][d]);return this._applyTransforms(),this}},{key:"applyStyle",value:function(){return this.applyGenericStyle()}},{key:"calculatePosition",value:function(a){var b;return(b=a instanceof k["default"]?a:this.getPosition(a))?b&&b.compute?b.compute(this.graph,this.getXAxis(),this.getYAxis(),this.getSerie()):void this.graph["throw"]():void 0}},{key:"getPosition",value:function(a){var b=this.getProp("position",a||0);return this.setProp("position",b=k["default"].check(b),a),b}},{key:"setPosition",value:function(a,b){var c=this,d=k["default"].check(a,function(a){return c.getRelativePosition(a)});return this.setProp("position",d,b||0)}},{key:"_applyTransforms",value:function(){var a=this.getProp("transforms"),b="";if(a&&(a=Array.isArray(a)?a:[a],0!=a.length)){for(var c=0;c<a.length;c++){switch(b+=a[c].type+"(",a[c].type){case"translate":b+=k["default"].getDeltaPx(a[c].arguments[0],this.getXAxis()).replace("px",""),b+=", ",b+=k["default"].getDeltaPx(a[c].arguments[1],this.getYAxis()).replace("px","");break;case"rotate":if(b+=a[c].arguments[0],b+=", ",1==this.transforms[c].arguments.length){var d=this.getPosition(0);b+=d.x+", "+d.y}else b+=k["default"].getDeltaPx(a[c].arguments[1],this.getXAxis()).replace("px",""),b+=", ",b+=k["default"].getDeltaPx(a[c].arguments[2],this.getYAxis()).replace("px","")}b+=") "}return this.setDomGroup("transform",b),this}}},{key:"makeLabels",value:function(){var a=this;this._labels=this._labels||[],this._labels.map(function(b){a.group.removeChild(b)}),this._labels=[];for(var b=0;this.getProp("labelText",b);)a._labels[b]||(a._labels[b]=document.createElementNS(a.graph.ns,"text"),a._labels[b].setAttribute("data-label-i",b),a._labels[b].jsGraphIsShape=a,a.group.appendChild(this._labels[b]),a._labels[b].addEventListener("dblclick",function(b){b.stopPropagation(),a.labelDblClickListener(b)})),b++;return this.updateLabels(),this}},{key:"isLabelEditable",value:function(a){return this.getProp("labelEditable",a||0)}},{key:"updateLabels",value:function(){this._labels=this._labels||[];for(var a=0,b=this._labels.length;b>a;a++)this._applyLabelData(a)}},{key:"_applyLabelData",value:function(a){a=a||0;var b=this.getProp("labelVisible",a);if(b===!1)return void this._labels[a].setAttribute("display","none");this._labels[a].setAttribute("display","initial");var c=this.calculatePosition(k["default"].check(this.getProp("labelPosition",a)));if(!isNaN(c.x)&&!isNaN(c.y)){"NaNpx"==c.x||isNaN(c.x)||"NaN"===c.x||c.x===!1||(this._labels[a].setAttribute("x",c.x),this._labels[a].setAttribute("y",c.y));var d=this.getProp("labelAngle",a)||0;if(0!=d){var e=this._labels[a].getAttribute("x"),f=this._labels[a].getAttribute("y");this._labels[a].setAttribute("transform","rotate("+d+" "+e+" "+f+")")}return this._labels[a].setAttribute("dominant-baseline",this.getProp("labelBaseline",a)||"no-change"),this._labels[a].textContent=this.getProp("labelText",a),this._labels[a].setAttribute("fill",this.getProp("labelColor",a)||"black"),this._labels[a].setAttribute("font-size",this.getProp("labelSize",a)+"px"||"12px"),this._labels[a].setAttribute("text-anchor",this._getLabelAnchor(a)),this._labels[a].setAttribute("stroke",this.getProp("labelStrokeColor",a)),this._labels[a].setAttribute("stroke-width",this.getProp("labelStrokeWidth",a)+"px"),this._labels[a].setAttribute("stroke-location","outside"),this}}},{key:"_getLabelAnchor",value:function(a){var b=this.getProp("labelAnchor",a);switch(b){case"middle":case"start":case"end":return b;case"right":return"end";case"left":return"start";default:return"start"}}},{key:"isSelected",value:function(){return this._selectStatus||!1}},{key:"hasHandles",value:function(a){return void 0!==a&&this.setProp("handles",a),!!this.getProp("handles")||!!this.getProp("statichandles")}},{key:"addHandles",value:function(){if(!this.isLocked()){if(!this.handlesInDom){this.handlesInDom=!0;for(var a=1;a<this.handles.length;a++)this.handles[a]&&this.group.appendChild(this.handles[a])}return this}}},{key:"removeHandles",value:function(){this.hideHandles(),this.handles=[]}},{key:"hideHandles",value:function(){if(!this.handlesInDom)return this;for(var a=1;a<this.handles.length;a++)this.group.removeChild(this.handles[a]);return this.handlesInDom=!1,this}},{key:"areHandlesInDom",value:function(){return this.handlesInDom}},{key:"_select",value:function(a){if(!this.isSelectable())return!1;this.appendToDom(),this._selectStatus=!0;var b=this.getSelectStyle(),c={};for(var d in b)"function"==typeof b[d]?c[d]=b[d].call(this):c[d]=b[d];m.saveDomAttributes(this._dom,c,"select"),this.hasHandles()&&!this.hasStaticHandles()&&(this.addHandles(),this.setHandles()),a||this.graph.emit("shapeSelected",this)}},{key:"_unselect",value:function(a){this._selectStatus=!1,m.restoreDomAttributes(this._dom,"select"),this.hasHandles()&&!this.hasStaticHandles()&&this.hideHandles(),a||this.graph.emit("shapeUnselected",this)}},{key:"getSelectStyle",value:function(){return this.selectStyle}},{key:"setSelectStyle",value:function(a){return this.selectStyle=a,this}},{key:"setStaticHandles",value:function(a){this.setProp("staticHandles",a)}},{key:"hasStaticHandles",value:function(a){return!!this.getProp("staticHandles")}},{key:"_createHandles",value:function(a,b,c,d){if(!(this.handles&&this.handles.length>0)){for(var e=1,f=a;f>=e;e++)(function(a){var e=this,f=document.createElementNS(e.graph.ns,b);if(f.jsGraphIsShape=!0,c)for(var g in c)f.setAttribute(g,c[g]);f.addEventListener("mousedown",function(b){e.isResizable()&&(b.preventDefault(),b.stopPropagation(),e.graph.emit("beforeShapeResize",e),e.graph.prevent(!1)||(e.resizing=!0,e.handleSelected=a,e.handleMouseDown(b)))}),d&&d(e.handles[a]),e.handles[a]=f}).call(this,e);return this.handles}}},{key:"createHandles",value:function(){}},{key:"handleMouseDownImpl",value:function(){}},{key:"handleMouseMoveImpl",value:function(){}},{key:"handleMouseUpImpl",value:function(){}},{key:"handleCreateImpl",value:function(){}},{key:"handleMouseDown",value:function(a){return this.isLocked()?void 0:((this.isMovable()||this.isResizable())&&this.graph.elementMoving(this),this.getProp("selectOnMouseDown")&&this.graph.selectShape(this),this.isMovable()&&(this.resizing||(this.graph.emit("beforeShapeMove",self),this.graph.prevent(!1)||(this.moving=!0))),this._mouseCoords=this.graph._getXY(a),this.handleMouseDownImpl(a,this._mouseCoords))}},{key:"handleClick",value:function(a){return this.getProp("selectOnClick")&&this.graph.selectShape(this),this.isSelectable()?(a.shiftKey||this.graph.unselectShapes(),void this.graph.selectShape(this)):!1}},{key:"handleMouseMove",value:function(a){if(!this.resizing&&!this.moving||this.isSelected()||this.graph.selectShape(this),this.graph.emit("beforeShapeMouseMove",this),this.graph.prevent(!1)||!this._mouseCoords)return!1;var b=this.graph._getXY(a),c=this.getXAxis().getRelVal(b.x-this._mouseCoords.x),d=this.getYAxis().getRelVal(b.y-this._mouseCoords.y);(0!=c||0!==d)&&(this.preventUnselect=!0),this._mouseCoords=b;var e=this.handleMouseMoveImpl(a,c,d,b.x-this._mouseCoords.x,b.y-this._mouseCoords.y);return e}},{key:"handleMouseUp",value:function(a){return this.moving&&this.graph.emit("shapeMoved",this),(this.handleSelected||this.resize)&&this.graph.emit("shapeResized",this),this.moving=!1,this.resizing=!1,this.handleSelected=!1,this.graph.elementMoving(!1),this.handleMouseUpImpl(a)}},{key:"handleDblClick",value:function(a){}},{key:"handleMouseOver",value:function(){this.getProp("highlightOnMouseOver")&&(this.moving||this.resizing||this.highlight()),this.graph.emit("shapeMouseOver",this)}},{key:"handleMouseOut",value:function(){this.getProp("highlightOnMouseOver")&&this.unHighlight(),this.graph.emit("shapeMouseOut",this)}},{key:"lock",value:function(){return this.setProp("locked",!0),this}},{key:"unlock",value:function(){return this.setProp("locked",!1),this}},{key:"isLocked",value:function(){return this.getProp("locked")||this.graph.shapesLocked}},{key:"movable",value:function(a){this.setProp("movable",!0)}},{key:"unmovable",value:function(){return this.setProp("movable",!1),!1}},{key:"isMovable",value:function(){return this.getProp("movable")}},{key:"resizable",value:function(){this.setProp("resizable",!0)}},{key:"unresizable",value:function(){this.setProp("resizable",!1)}},{key:"isResizable",value:function(){return this.getProp("resizable")}},{key:"selectable",value:function(){this.setProp("selectable",!0)}},{key:"unselectable",value:function(){this.graph.unselectShape(this),this.setProp("selectable",!1)}},{key:"isSelectable",value:function(){return this.getProp("selectable")}},{key:"highlight",value:function(a,b){return a||(a=this.getHighlightAttributes()),b||(b="highlight"),m.saveDomAttributes(this._dom,a,b),this.highlightImpl(),this}},{key:"unHighlight",value:function(a){return a||(a="highlight"),m.restoreDomAttributes(this._dom,a),this.unHighlightImpl(),this}},{key:"highlightImpl",value:function(){}},{key:"unHighlightImpl",value:function(){}},{key:"getHighlightAttributes",value:function(){return this._highlightAttributes}},{key:"setHighlightAttributes",value:function(a){return this._highlightAttributes=a,this}},{key:"getMaskingID",value:function(){return this.maskingId}},{key:"maskWith",value:function(a){var b;(b=a.getMaskingID())?this._dom.setAttribute("mask","url(#"+b+")"):this._dom.removeAttribute("mask")}},{key:"updateMask",value:function(){return}},{key:"labelDblClickListener",value:function(a){var b=parseInt(a.target.getAttribute("data-label-i")),c=this;if(!isNaN(b)&&this.isLabelEditable(b)){a.preventDefault(),a.stopPropagation();var d=document.createElement("input");d.setAttribute("type","text"),d.setAttribute("value",c.getProp("labelText",b)),c.graph._dom.prepend(d),m.setCSS(d,{position:"absolute",marginTop:parseInt(a.target.getAttribute("y").replace("px",""))-10+"px",marginLeft:parseInt(a.target.getAttribute("x").replace("px",""))-50+"px",textAlign:"center",width:"100px"}),d.addEventListener("blur",function(){c.setLabelText(d.getAttribute("value"),b),c._labels[b].textContent=d.getAttribute("value"),d.remove(),c.changed("shapeLabelChanged")}),d.addEventListener("keyup",function(a){a.stopPropagation(),a.preventDefault(),13===a.keyCode&&d.dispatchEvent(new Event("blur"))}),d.addEventListener("keypress",function(a){a.stopPropagation()}),d.addEventListener("keydown",function(a){a.stopPropagation()}),d.focus()}}},{key:"appendToDom",value:function(){return this._forcedParentDom?this._forcedParentDom.appendChild(this.group):this.graph.appendShapeToDom(this),this}},{key:"forceParentDom",value:function(a){return this._forcedParentDom=a,this}}]),b}(o["default"]);p.prototype.computePosition=p.prototype.calculatePosition,p.prototype.showLabel=p.prototype.displayLabel,p.prototype.remove=p.prototype.kill,b["default"]=p},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=c(21),j=d(i),k=function(a){function b(){return e(this,b),f(this,Object.getPrototypeOf(b).apply(this,arguments))}return g(b,a),h(b,[{key:"createDom",value:function(){this._dom=document.createElementNS(this.graph.ns,"path")}},{key:"createHandles",value:function(){this._createHandles(2,"line",{"stroke-width":"3",stroke:"transparent","pointer-events":"stroke",cursor:"ew-resize"})}},{key:"handleMouseMoveImpl",value:function(a,b,c){if(!this.isLocked()){if(this.moving)this.getPosition(0).deltaPosition("x",b,this.getXAxis()),this.getPosition(1).deltaPosition("x",b,this.getXAxis());else if(this.serie&&this.handleSelected){this.resizingPosition=1==this.handleSelected?this.getPosition(0):this.getPosition(1);var d=this.serie.searchClosestValue(this.getXAxis().getVal(this.graph._getXY(a).x-this.graph.getPaddingLeft()));if(!d)return;this.resizingPosition.x!=d.xMin&&(this.preventUnselect=!0),this.resizingPosition.x=d.xMin}else this.handleSelected&&(this.resizingPosition=1==this.handleSelected?this.getPosition(0):this.getPosition(1),this.resizingPosition.deltaPosition("x",b,this.getXAxis()));this.applyPosition()}}},{key:"applyPosition",value:function(){if(this.serie){var a=this.computePosition(0),b=this.computePosition(1),c=Math.abs(a.x-b.x),d=Math.min(a.x,b.x);if(2>c||0>d+c||d>this.graph.getDrawingWidth())return this.setDom("d",""),!1;var e,f,g,h,i,j,d,k,l=this.serie.searchClosestValue(this.getPosition(0).x),m=this.serie.searchClosestValue(this.getPosition(1).x),n=0,o=Number.MAX_VALUE;if(!l||!m)return!1;for(l.xBeforeIndex>m.xBeforeIndex&&(e=l,l=m,m=e),this.counter=0,f=l.dataIndex;f<=m.dataIndex;f++){for(this.currentLine="",h=f==l.dataIndex?l.xBeforeIndexArr:0,i=f==m.dataIndex?m.xBeforeIndexArr:this.serie.data[f].length,j=0,h==i&&i++,g=h;i>=g;g+=2)d=this.serie.getX(this.serie.data[f][g+0]),k=this.serie.getY(this.serie.data[f][g+1]),n=Math.max(this.serie.data[f][g+1],n),o=Math.min(this.serie.data[f][g+1],o),g==h&&(this.firstX=d,this.firstY=k),j>0?this.currentLine+=" L "+d+" "+k+" ":this.currentLine+=" M "+d+" "+k+" ",j++;if(this.lastX=d,this.lastY=k,!(this.firstX&&this.firstY&&this.lastX&&this.lastY))return;this.currentLine+=" V "+this.getYAxis().getPx(0)+" H "+this.firstX+" z",this.setDom("d",this.currentLine)}return this.maxY=this.serie.getY(n),this.setHandles(),this.changed(),!0}}},{key:"setHandles",value:function(){if(this.firstX){var a=this.computePosition(0),b=this.computePosition(1);
a.x<b.x?(this.handles[1].setAttribute("x1",this.firstX),this.handles[1].setAttribute("x2",this.firstX),this.handles[2].setAttribute("x1",this.lastX),this.handles[2].setAttribute("x2",this.lastX)):(this.handles[1].setAttribute("x1",this.lastX),this.handles[1].setAttribute("x2",this.lastX),this.handles[2].setAttribute("x1",this.firstX),this.handles[2].setAttribute("x2",this.firstX)),this.handles[1].setAttribute("y1",this.getYAxis().getMaxPx()),this.handles[1].setAttribute("y2",this.serie.getY(0)),this.handles[2].setAttribute("y1",this.getYAxis().getMaxPx()),this.handles[2].setAttribute("y2",this.serie.getY(0))}}}]),b}(j["default"]);b["default"]=k},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=c(24),j=d(i),k=function(a){function b(a){return e(this,b),f(this,Object.getPrototypeOf(b).call(this,a))}return g(b,a),h(b,[{key:"createDom",value:function(){this._dom=document.createElementNS(this.graph.ns,"line"),this._dom.setAttribute("marker-end","url(#arrow"+this.graph._creation+")"),this.createHandles(this.nbHandles,"rect",{transform:"translate(-3 -3)",width:6,height:6,stroke:"black",fill:"white",cursor:"nwse-resize"}),this.setStrokeColor("black"),this.setStrokeWidth(1)}}]),b}(j["default"]);b["default"]=k},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=c(21),j=d(i),k=function(a){function b(a,c){return e(this,b),f(this,Object.getPrototypeOf(b).call(this,a,c))}return g(b,a),h(b,[{key:"createDom",value:function(){this._dom=document.createElementNS(this.graph.ns,"line"),this.setStrokeColor("black"),this.setStrokeWidth(1)}},{key:"createHandles",value:function(){this._createHandles(2,"rect",{transform:"translate(-3 -3)",width:6,height:6,stroke:"black",fill:"white",cursor:"nwse-resize"})}},{key:"applyPosition",value:function(){var a=this.calculatePosition(0),b=this.calculatePosition(1);return a&&a.x&&a.y?(this.setDom("x2",a.x),this.setDom("y2",a.y),this.setDom("y1",b.y),this.setDom("x1",b.x),this.currentPos2x=b.x,this.currentPos2y=b.y,this.currentPos1x=a.x,this.currentPos1y=a.y,!0):void 0}},{key:"handleMouseMoveImpl",value:function(a,b,c,d,e){if(!this.isLocked()){var f,g=this.getPosition(0),h=this.getPosition(1);if(1==this.handleSelected?f=g:2==this.handleSelected&&(f=h),f&&(this._data.vertical||f.deltaPosition("x",b,this.getXAxis()),this._data.horizontal||f.deltaPosition("y",c,this.getYAxis())),this.moving&&(g.x&&g.deltaPosition("x",b,this.getXAxis()),g.y&&g.deltaPosition("y",c,this.getYAxis()),h.x&&h.deltaPosition("x",b,this.getXAxis()),h.y&&h.deltaPosition("y",c,this.getYAxis())),this._data.forcedCoords){var i=this._data.forcedCoords;void 0!==i.y&&("function"==typeof i.y?h.y=g.y=i.y(this):(h.y=i.y,g.y=i.y)),void 0!==i.x&&("function"==typeof i.x?h.x=g.x=i.x(this):(h.x=i.x,g.x=i.x))}return this.rectEvent&&this.setEventReceptacle(),this.redraw(),this.changed(),this.setHandles(),!0}}},{key:"setHandles",value:function(){this.areHandlesInDom()&&(isNaN(this.currentPos1x)||(this.handles[1].setAttribute("x",this.currentPos1x),this.handles[1].setAttribute("y",this.currentPos1y),this.handles[2].setAttribute("x",this.currentPos2x),this.handles[2].setAttribute("y",this.currentPos2y)))}},{key:"setEventReceptacle",value:function(){this.currentPos1x&&(this.rectEvent||(this.rectEvent=document.createElementNS(this.graph.ns,"line"),this.rectEvent.setAttribute("pointer-events","stroke"),this.rectEvent.setAttribute("stroke","transparent"),this.rectEvent.jsGraphIsShape=this,this.group.appendChild(this.rectEvent)),this.rectEvent.setAttribute("x1",this.currentPos1x),this.rectEvent.setAttribute("y1",this.currentPos1y),this.rectEvent.setAttribute("x2",this.currentPos2x),this.rectEvent.setAttribute("y2",this.currentPos2y),this.rectEvent.setAttribute("stroke-width",this.getProp("strokeWidth")+2))}}]),b}(j["default"]);b["default"]=k},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function h(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=c(3),k=(e(j),c(21)),l=d(k),m=function(a){function b(a,c){return f(this,b),g(this,Object.getPrototypeOf(b).call(this,a,c))}return h(b,a),i(b,[{key:"createDom",value:function(){this._dom=document.createElementNS(this.graph.ns,"ellipse")}},{key:"applyPosition",value:function(){var a=this.computePosition(0);return this.setDom("cx",a.x||0),this.setDom("cy",a.y||0),this.setDom("rx",this.getProp("rx")||0),this.setDom("ry",this.getProp("ry")||0),!0}},{key:"handleMouseUpImpl",value:function(){this.triggerChange()}},{key:"handleMouseMoveImpl",value:function(a,b,c,d,e){}}]),b}(l["default"]);b["default"]=m},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=c(21),j=d(i),k=function(a){function b(a,c){return e(this,b),f(this,Object.getPrototypeOf(b).call(this,a,c))}return g(b,a),h(b,[{key:"createDom",value:function(){return!1}},{key:"applyPosition",value:function(){return!0}}]),b}(j["default"]);b["default"]=k},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=c(21),j=d(i),k=function(a){function b(a,c){return e(this,b),f(this,Object.getPrototypeOf(b).call(this,a,c))}return g(b,a),h(b,[{key:"createDom",value:function(){this._dom=document.createElementNS(this.graph.ns,"path"),this.setStrokeColor("black"),this.setStrokeWidth(1)}},{key:"createHandles",value:function(){}},{key:"setPointsPx",value:function(a){return this.pxPoints=a,this}},{key:"applyPosition",value:function(){if(this.pxPoints)this.setDom("d",this.pxPoints);else if(this.points){var a,b;this.serie?(a=this.serie.getXAxis(),b=this.serie.getYAxis()):this.xAxis&&this.yAxis&&(a=this.xAxis,b=this.yAxis),this.setDom("d","M "+this.points.map(function(c){return a.getPx(c[0])+", "+b.getPx(c[1])}).join(" L "))}return!0}}]),b}(j["default"]);b["default"]=k},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=c(22),j=d(i),k=c(2),l=d(k),m=function(a){function b(a,c){e(this,b);var d=f(this,Object.getPrototypeOf(b).call(this,a,c));return d.nbHandles=2,d}return g(b,a),h(b,[{key:"createHandles",value:function(){this._createHandles(2,"rect",{transform:"translate(-3 -3)",width:6,height:6,stroke:"black",fill:"white"})}},{key:"applyPosition",value:function(){var a,b,c=this.calculatePosition(0),d=this.calculatePosition(1),e=this.getAxis(),f=[],g=this.yBaseline;if(c&&d){this.serie.isFlipped()?(g=this.getXAxis().getPx(0)-g,a=Math.abs(c.y-d.y),b=Math.min(c.y,d.y)):(g=this.getYAxis().getPx(0)-g,a=Math.abs(c.x-d.x),b=Math.min(c.x,d.x)),this.computedBaseline=g,this.reversed=b==d.x;var h=this.getPosition(0),i=this.getPosition(1);if("x"==e&&(2>a||0>b+a||b>this.graph.getDrawingWidth())||"y"==e&&(2>a||0>b+a||b>this.graph.getDrawingHeight()))f=[[0,0]],this.hideLabel(0),this.setDom("d",""),this.hideHandles();else{this.showLabel(0);var j,k,m,n,o,p,b,q,r,s,t=this.serie.searchClosestValue(h[e]),u=this.serie.searchClosestValue(i[e]),v="",w=0,x=1,y=0;Number.MAX_VALUE;if(!t||!u)return!1;c.y=t.yMin,d.y=u.yMin,t.xBeforeIndex>u.xBeforeIndex&&(j=t,t=u,u=j);var r,s,z,A,B,C,D,E,F,G=0,H=this.scaling;for(this.serie.isFlipped()&&(x=0,y=1),k=t.dataIndex;k<=u.dataIndex;k++){for(n=k==t.dataIndex?t.xBeforeIndexArr:0,o=k==u.dataIndex?u.xBeforeIndexArr:this.serie.data[k].length,p=0,m=n;o>=m;m+=2){if(b=this.serie.getX(this.serie.data[k][m+y]),q=this.serie.getY(this.serie.data[k][m+x]),this.serie.isFlipped()){var I=b;b=q,q=I}r||(r=b,s=q,B=this.serie.data[k][m+y],C=this.serie.data[k][m+x]),void 0!=z?(G+=(this.serie.data[k][m+y]-D)*this.serie.data[k][m+x]*.5,D=this.serie.data[k][m+y],(b!=z||q!=A)&&(z=b,A=q,f.push([b,G]),p++)):(z=b,A=q,D=this.serie.data[k][m+y],E=this.serie.data[k][m+x])}if(this.lastX=b,this.lastY=q,!(r&&s&&this.lastX&&this.lastY))return}0==G&&(G=1);var H;H=this._ratio?this._ratio:150/G;for(var k=0,J=f.length;J>k;k++)f[k][1]=g-f[k][1]*H,0==k&&(this.firstPointX=f[k][0],this.firstPointY=f[k][1]),v+=" L "+f[k][y]+", "+f[k][x]+" ",this.lastPointX=f[k][0],this.lastPointY=f[k][1];this.points=f,this.sum=G;var A=s,z=this.lastX;F=Math.min(20,z-r),v=this.serie.isFlipped()?" M "+g+", "+r+" "+v:" M "+r+", "+g+" "+v,this.setDom("d",v),this.firstX=r,this.firstY=s,this.maxY=this.serie.getY(w),this._selected&&this.select(),this.setHandles()}return this.setLabelPosition(new l["default"]({x:(h.x+i.x)/2,y:(this.firstPointY+this.lastPointY)/2+"px"})),this.updateLabels(),this.changed(),!0}}},{key:"getAxis",value:function(){return this._data.axis||"x"}},{key:"selectStyle",value:function(){this.setDom("stroke-width","2px")}},{key:"selectHandles",value:function(){}},{key:"setHandles",value:function(){if(void 0!=this.points&&this.isSelected()){this.addHandles();var a=this.computePosition(0),b=this.computePosition(1);a.x<b.x?(this.handles[1].setAttribute("x",this.firstPointX),this.handles[1].setAttribute("y",this.firstPointY),this.handles[2].setAttribute("x",this.lastPointX),this.handles[2].setAttribute("y",this.lastPointY)):(this.handles[2].setAttribute("x",this.firstPointX),this.handles[2].setAttribute("y",this.firstPointY),this.handles[1].setAttribute("x",this.lastPointX),this.handles[1].setAttribute("y",this.lastPointY))}}},{key:"ratio",set:function(){var a=arguments.length<=0||void 0===arguments[0]?1:arguments[0];this._ratio=a},get:function(){return this._ratio}},{key:"yBaseline",set:function(){var a=arguments.length<=0||void 0===arguments[0]?30:arguments[0];this._yBaseline=a},get:function(){return this._yBaseline||30}}]),b}(j["default"]);b["default"]=m},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=c(30),j=d(i),k=function(a){function b(a,c){e(this,b);var d=f(this,Object.getPrototypeOf(b).call(this,a,c));return d.nbHandles=4,d}return g(b,a),h(b,[{key:"createDom",value:function(){this._dom=document.createElementNS(this.graph.ns,"rect"),this._dom.element=this,this.createHandles(this.nbHandles,"rect",{transform:"translate(-3 -3)",width:6,height:6,stroke:"black",fill:"white",cursor:"nwse-resize"})}},{key:"redrawImpl",value:function(){this.setPosition(),this.setHandles(),this.setBindableToDom(this._dom)}}]),b}(j["default"]);b["default"]=k},function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function h(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},j=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),k=c(21),l=e(k),m=c(3),n=d(m),o=function(a){function b(a,c){return f(this,b),g(this,Object.getPrototypeOf(b).call(this,a,c))}return h(b,a),j(b,[{key:"createDom",value:function(){return this._dom=document.createElementNS(this.graph.ns,"rect"),this.setStrokeColor("black"),this.setStrokeWidth(1),this.setFillColor("transparent"),this}},{key:"createHandles",value:function(){if(this.hasHandles()){var a=this.getProp("handles");switch("object"!=("undefined"==typeof a?"undefined":i(a))&&(a={}),a.type||(a.type="corners"),a.type){case"sides":n.extend(a,{sides:{top:!0,bottom:!0,left:!0,right:!0}});var b=0;for(var c in a.sides)a.sides[c]&&b++;this._createHandles(b,"g").map(function(a){var b=document.createElementNS(self.graph.ns,"rect");b.setAttribute("x","-3"),b.setAttribute("width","6"),b.setAttribute("y","-6"),b.setAttribute("height","12"),b.setAttribute("stroke","black"),b.setAttribute("fill","white"),b.setAttribute("cursor","pointer"),a.appendChild(b)});var b=1;for(var c in a.sides)a.sides[c]&&(this.handles[c]=this["handle"+b],this.sides[b]=c,b++);break;case"corners":this._createHandles(4,"rect",{transform:"translate(-3 -3)",width:6,height:6,stroke:"black",fill:"white"}),this.handles&&(this.handles[2].setAttribute("cursor","nesw-resize"),this.handles[4].setAttribute("cursor","nesw-resize"),this.handles[1].setAttribute("cursor","nwse-resize"),this.handles[3].setAttribute("cursor","nwse-resize"))}return this}}},{key:"applyPosition",value:function(){var a,b,c,d,e=this.computePosition(0),f=this.computePosition(1);return e.x<f.x?(a=e.x,c=f.x-e.x):(a=f.x,c=e.x-f.x),e.y<f.y?(b=e.y,d=f.y-e.y):(b=f.y,d=e.y-f.y),this.currentX=a,this.currentY=b,this.currentW=c,this.currentH=d,isNaN(a)||isNaN(b)||a===!1||b===!1?!1:(this.setDom("width",c),this.setDom("height",d),this.setDom("x",a),this.setDom("y",b),this.setHandles(),this.updateMask(),!0)}},{key:"handleMouseMoveImpl",value:function(a,b,c,d,e){var f=this.getProp("handles");if(this.moving||this.handleSelected){var g=this.getPosition(0),h=this.getPosition(1);this.getXAxis().isFlipped(),this.getYAxis().isFlipped(),g.x,g.y,h.x,h.y;if(this.moving)g.deltaPosition("x",b,this.getXAxis()),g.deltaPosition("y",c,this.getYAxis()),h.deltaPosition("x",b,this.getXAxis()),h.deltaPosition("y",c,this.getYAxis());else switch(f.type){case"sides":switch(this.sides[this.handleSelected]){case"left":g.deltaPosition("x",b,this.getXAxis());break;case"right":h.deltaPosition("x",b,this.getXAxis());break;case"top":g.deltaPosition("y",c,this.getYAxis());break;case"bottom":h.deltaPosition("y",c,this.getYAxis())}break;case"corners":default:1==this.handleSelected?(g.deltaPosition("x",b,this.getXAxis()),g.deltaPosition("y",c,this.getYAxis())):2==this.handleSelected?(h.deltaPosition("x",b,this.getXAxis()),g.deltaPosition("y",c,this.getYAxis())):3==this.handleSelected?(h.deltaPosition("y",c,this.getYAxis()),h.deltaPosition("x",b,this.getXAxis())):4==this.handleSelected&&(g.deltaPosition("x",b,this.getXAxis()),h.deltaPosition("y",c,this.getYAxis()))}return this.redraw(),this.changed(),this.setHandles(),!0}}},{key:"setHandles",value:function(){if(!this.isLocked()&&(this.isSelectable()||this._staticHandles)&&this.handlesInDom){var a=this.computePosition(0),b=this.computePosition(1),c=this.getProp("handles");switch(c.type){case"sides":this.handles.left&&this.handles.left.setAttribute("transform","translate("+this.currentX+" "+(this.currentY+this.currentH/2)+")"),this.handles.right&&this.handles.right.setAttribute("transform","translate( "+(this.currentX+this.currentW)+" "+(this.currentY+this.currentH/2)+")"),this.handles.top&&this.handles.top.setAttribute("transform","translate( "+(this.currentX+this.currentW/2)+" "+this.currentY+")"),this.handles.bottom&&this.handles.bottom.setAttribute("transform","translate( "+(this.currentX+this.currentW/2)+" "+(this.currentY+this.currentH)+")");break;case"corners":default:this.handles[1].setAttribute("x",a.x),this.handles[1].setAttribute("y",a.y),this.handles[2].setAttribute("x",b.x),this.handles[2].setAttribute("y",a.y),this.handles[3].setAttribute("x",b.x),this.handles[3].setAttribute("y",b.y),this.handles[4].setAttribute("x",a.x),this.handles[4].setAttribute("y",b.y)}}}}]),b}(l["default"]);b["default"]=o},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=c(21),j=d(i),k=function(a){function b(a,c){e(this,b);var d=f(this,Object.getPrototypeOf(b).call(this,a,c));return d.nbHandles=1,d}return g(b,a),h(b,[{key:"createDom",value:function(){this._dom=document.createElementNS(this.graph.ns,"path"),this._dom.setAttribute("d","M -"+this.width/2+" 0 h "+this.width+" m -"+this.width/2+" -"+this.width/2+" v "+this.width)}},{key:"createHandles",value:function(){this._createHandles(this.nbHandles,"rect",{transform:"translate(-3 -3)",width:6,height:6,stroke:"black",fill:"white",cursor:"nwse-resize"})}},{key:"applyPosition",value:function(){var a=this.calculatePosition(0);if(a&&a.x&&a.y)return this.setDom("transform","translate( "+a.x+", "+a.y+")"),this.currentPos1x=a.x,this.currentPos1y=a.y,!0}},{key:"redrawImpl",value:function(){this.setHandles()}},{key:"handleCreateImpl",value:function(){}},{key:"handleMouseDownImpl",value:function(a){return this.moving=!0,!0}},{key:"handleMouseUpImpl",value:function(){return this.triggerChange(),!0}},{key:"handleMouseMoveImpl",value:function(a,b,c,d,e){if(!this.isLocked()){var f=this.getFromData("pos");return this.moving&&(f.x=this.graph.deltaPosition(f.x,b,this.getXAxis()),f.y=this.graph.deltaPosition(f.y,c,this.getYAxis())),this.redrawImpl(),!0}}},{key:"createHandles",value:function(){this._createHandles(1,"rect",{transform:"translate(-3 -3)",width:6,height:6,stroke:"black",fill:"white",cursor:"nwse-resize"})}},{key:"setHandles",value:function(){this.areHandlesInDom()&&(isNaN(this.currentPos1x)||(this.handles[1].setAttribute("x",this.currentPos1x),this.handles[1].setAttribute("y",this.currentPos1y)))}},{key:"selectStyle",value:function(){this.setDom("stroke","red"),this.setDom("stroke-width","2")}},{key:"width",get:function(){return this.options.width||10},set:function(){var a=arguments.length<=0||void 0===arguments[0]?10:arguments[0];this.options.width=a}}]),b}(j["default"]);b["default"]=k},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=c(24),j=d(i),k=function(a){function b(a){e(this,b);var c=f(this,Object.getPrototypeOf(b).call(this,a));return c.lineHeight=6,c}return g(b,a),h(b,[{key:"createDom",value:function(){this._dom=document.createElementNS(this.graph.ns,"line"),this.line1=document.createElementNS(this.graph.ns,"line"),this.line2=document.createElementNS(this.graph.ns,"line"),this.line3=document.createElementNS(this.graph.ns,"line"),this.rectBoundary=document.createElementNS(this.graph.ns,"path"),this.rectBoundary.setAttribute("fill","transparent"),this.rectBoundary.setAttribute("stroke","none"),this.rectBoundary.setAttribute("pointer-events","fill"),this.rectBoundary.jsGraphIsShape=!0,this.group.appendChild(this.rectBoundary),this.group.appendChild(this.line1),this.group.appendChild(this.line2),this.group.appendChild(this.line3),this._dom.element=this}},{key:"createHandles",value:function(){this._createHandles(3,"rect",{transform:"translate(-3 -3)",width:6,height:6,stroke:"black",fill:"white",cursor:"nwse-resize"})}},{key:"redrawImpl",value:function(){this.line1.setAttribute("stroke",this.getStrokeColor()),this.line2.setAttribute("stroke",this.getStrokeColor()),this.line3.setAttribute("stroke",this.getStrokeColor()),this.line1.setAttribute("stroke-width",this.getStrokeWidth()),this.line2.setAttribute("stroke-width",this.getStrokeWidth()),this.line3.setAttribute("stroke-width",this.getStrokeWidth()),this.setHandles(),this.redrawLines()}},{key:"redrawLines",value:function(){var a=this.computePosition(0),b=this.computePosition(1),c=this.computePosition(2);if(a.x&&b.x&&c.x&&this.posYPx){var d=this.lineHeight;this.rectBoundary.setAttribute("d","M "+a.x+" "+(this.posYPx-d)+" v "+2*d+" H "+b.x+" v "+-2*d+"z"),this.line1.setAttribute("x1",a.x),this.line1.setAttribute("x2",a.x),this.line2.setAttribute("x1",b.x),this.line2.setAttribute("x2",b.x),this.line3.setAttribute("x1",c.x),this.line3.setAttribute("x2",c.x),this._dom.setAttribute("x1",a.x),this._dom.setAttribute("x2",b.x),this.redrawY(d)}return this}},{key:"redrawY",value:function(){if(!this.posYPx)return this;var a=this.lineHeight;return this.line1.setAttribute("y1",this.posYPx-a),this.line1.setAttribute("y2",this.posYPx+a),this.line2.setAttribute("y1",this.posYPx-a),this.line2.setAttribute("y2",this.posYPx+a),this.line3.setAttribute("y1",this.posYPx-a),this.line3.setAttribute("y2",this.posYPx+a),this._dom.setAttribute("y1",this.posYPx),this._dom.setAttribute("y2",this.posYPx),this}},{key:"setHandles",value:function(){if(this.posYPx){var a=this.computePosition(0),b=this.computePosition(1),c=this.computePosition(2);a.x&&b.x&&c.x&&(this.handles[1].setAttribute("x",a.x),this.handles[1].setAttribute("y",this.posYPx),this.handles[2].setAttribute("x",b.x),this.handles[2].setAttribute("y",this.posYPx),this.handles[3].setAttribute("x",c.x),this.handles[3].setAttribute("y",this.posYPx))}}},{key:"setY",value:function(a){return this.posYPx=a,this}},{key:"setLineHeight",value:function(a){this.lineHeihgt=a}},{key:"handleMouseMoveImpl",value:function(a,b,c){if(!this.isLocked()){var d=this.getPosition(0),e=this.getPosition(1),f=this.getPosition(2);switch(this.handleSelected){case 1:d.deltaPosition("x",b,this.getXAxis()),(Math.abs(f.x-e.x)>Math.abs(e.x-d.x)||Math.abs(f.x-d.x)>Math.abs(e.x-d.x))&&(f.x=d.x+.1*(e.x-d.x));break;case 2:e.deltaPosition("x",b,this.getXAxis()),(Math.abs(f.x-e.x)>Math.abs(e.x-d.x)||Math.abs(f.x-d.x)>Math.abs(e.x-d.x))&&(f.x=e.x+.1*(d.x-e.x));break;case 3:if(f.deltaPosition("x",b,this.getXAxis()),Math.abs(f.x-e.x)>Math.abs(e.x-d.x)||Math.abs(f.x-d.x)>Math.abs(e.x-d.x))return}this.setLabelPosition({y:this.getLabelPosition(0).y,x:f.x}),this.updateLabels(),this.redrawLines(),this.setHandles()}}},{key:"applyPosition",value:function(){return this.redrawLines(),!0}}]),b}(j["default"]);b["default"]=k},function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function g(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function h(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function i(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var j=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),k=function H(a,b,c){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){var e=Object.getPrototypeOf(a);return null===e?void 0:H(e,b,c)}if("value"in d)return d.value;var f=d.get;return void 0===f?void 0:f.call(c)},l=c(6),m=e(l),n=c(8),o=e(n),p=c(3),q=d(p),r=c(11),s=e(r),t=c(17),u=e(t),v=c(34),w=e(v),x=c(7),y=(e(x),function(a){function b(){g(this,b);var a=h(this,Object.getPrototypeOf(b).apply(this,arguments));return a.subSeries=[],a}return i(b,a),j(b,[{key:"setData",value:function(){var a=this;return k(Object.getPrototypeOf(b.prototype),"setData",this).apply(this,arguments),this.subSeries.map(function(b){b.data=a.data}),this}},{key:"draw",value:function(){return this.eraseMarkers(),this}}]),b}(s["default"])),z=function(a){function b(){g(this,b);var a=h(this,Object.getPrototypeOf(b).apply(this,arguments));return a.subSeries=[],a}return i(b,a),j(b,[{key:"setData",value:function(){var a=this;return k(Object.getPrototypeOf(b.prototype),"setData",this).apply(this,arguments),this.subSeries.map(function(b){b.data=a.data}),this}},{key:"draw",value:function(){return this}}]),b}(u["default"]),A=["constructor","init","draw","setLineColor","setLineWidth","setLineStyle","getLineColor","getLineWidth","getLineStyle","setMarkers","showMarkers","hideMarkers","getMarkerDom","getMarkerDomIndependant","getMarkerPath","eraseMarkers","_recalculateMarkerPoints"],B=[];Object.getOwnPropertyNames(s["default"].prototype).concat(B).map(function(a){
A.indexOf(a)>-1||(y.prototype[a]=function(a){return function(){var b=arguments;this.subSeries.map(function(c){c[a].apply(c,f(b))})}}(a))});var C=function(a){function b(a){g(this,b);var c=h(this,Object.getPrototypeOf(b).apply(this,arguments));return c.series=new Map,c}return i(b,a),j(b,[{key:"init",value:function(a){this.graph=a}},{key:"newXAxis",value:function(a){return newBottomAxis(a)}},{key:"newYAxis",value:function(a){return newLeftAxis(a)}},{key:"newTopAxis",value:function(a){return a=this.getOptions(a),new F(this.graph,"top",a)}},{key:"newBottomAxis",value:function(a){return a=this.getOptions(a),new F(this.graph,"bottom",a)}},{key:"newLeftAxis",value:function(a){return a=this.getOptions(a),new G(this.graph,"left",a)}},{key:"newRightAxis",value:function(a){return a=this.getOptions(a),new G(this.graph,"right",a)}},{key:"getOptions",value:function(a){var b={marginMin:this.options.axes.margins.low,marginMax:this.options.axes.margins.high};return q.extend(!0,b,a)}},{key:"preDraw",value:function(){var a,b,c=this;this.series.forEach(function(d){var e=d.serie;a=e.getXAxis(),b=e.getYAxis();var f=1;for(a.splitNumber&&(f*=a.splitNumber),b.splitNumber&&(f*=b.splitNumber);e.subSeries.length<f;){var g=e.getName()+"_"+e.subSeries.length,h=c.graph.newSerie(g,{},e.getType()||"line");h.styles=e.styles,h.data=e.data,"line"==e.getType()&&(h.markerPoints=e.markerPoints,h.markerFamilies=e.markerFamilies),e.subSeries.push(h)}for(;e.subSeries.length>f;)c.graph.getSerie(e.getName()+"_"+(e.subSeries.length-1)).kill(),e.subSeries.pop();!e.getXAxis().splitNumber&&e.getXAxis().splitAxis&&e.getXAxis().splitAxis(),!e.getYAxis().splitNumber&&e.getYAxis().splitAxis&&e.getYAxis().splitAxis(),e.subSeries.map(function(b,c){var d,f;if(e.getXAxis().getSubAxis){var g=c%(a.splitNumber||1);d=e.getXAxis().getSubAxis(g)}else d=e.getXAxis();if(b.setXAxis(d),e.getYAxis().getSubAxis){var h=Math.floor(c/(a.splitNumber||1));f=e.getYAxis().getSubAxis(h)}else f=e.getYAxis();b.setYAxis(f),b.draw(!0)})}),this.update()}},{key:"newSerie",value:function(a){var b=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],c=arguments[2];switch(c){case"line":return newLineSerie(a,b);case"scatter":return newScatterSerie(a,b)}throw"Cannot create a split serie of type "+c}},{key:"newLineSerie",value:function(a,b){var c={type:"lineSerie",serie:new y(a,b,"line")};return this.series.set(a,c),c.serie.init(this.graph,b),this.graph.series.push(c.serie),c.serie}},{key:"newScatterSerie",value:function(a,b){var c={type:"scatterSerie",serie:new z(a,b,"scatter")};return this.series.set(a,c),c.serie.init(this.graph,b),this.graph.series.push(c.serie),c.serie}}]),b}(w["default"]),D={splitMarks:!0},E=function(a){var b=["turnGridsOff","turnGridsOn","gridsOff","gridsOn","setEngineering","setScientificScaleExponent","setScientific","setLabelColor","setSecondaryGridDasharray","setPrimaryGridDasharray","setSecondaryGridsOpacity","setPrimaryGridOpacity","setSecondaryGridWidth","setPrimaryGridWidth","setSecondaryGridColor","setPrimaryGridColor","setTicksLabelColor","setSecondaryTicksColor","setPrimaryTicksColor","setAxisColor","secondaryGridOn","secondaryGridOff","primaryGridOff","primaryGridOn","setSecondaryGrid","setPrimaryGrid","setGrids","setTickPosition","setExponentialFactor","setExponentialLabelFactor","setGridLinesStyle","forcePrimaryTickUnitMin","forcePrimaryTickUnitMax","forcePrimaryTickUnit","flip","show","hide","setDisplay"],c=function(a){function b(a,c){var d=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];g(this,b);var e=h(this,Object.getPrototypeOf(b).call(this,a,c,d));return e.axes=[],e.position=c,e.constructorOptions=q.extend(!0,{},D,d),e._splitVal=[],e}return i(b,a),j(b,[{key:"all",value:function(a){return"function"==typeof a?(this.axes.map(a),this):void 0}},{key:"splitAxis",value:function(){for(var a=arguments.length,b=Array(a),c=0;a>c;c++)b[c]=arguments[c];b.push(1);for(var d=b.length;this.axes.length>d;)this.axes.pop().kill(!0,!0);for(;this.axes.length<d;){var e=new(this.getConstructor())(this.graph,this.position,this.constructorOptions);this.axes.push(e),e.zoomLock=!0,e.init(this.graph,this.constructorOptions)}var f=0,g=0,h=!0,i=!1,j=void 0;try{for(var k,l=this.axes[Symbol.iterator]();!(h=(k=l.next()).done);h=!0){var m=k.value;m.options.marginMin=10,m.options.marginMax=10,0==g&&(m.options.marginMin=0),g==this.axes.length-1&&(m.options.marginMax=0),m.setSpan(f,f=b[g]),m.setMinMaxFlipped(),g++}}catch(n){i=!0,j=n}finally{try{!h&&l["return"]&&l["return"]()}finally{if(i)throw j}}return this._splits=b,this}},{key:"fixGridIntervalBasedOnAxis",value:function(a){return this.fixGridFor=a,this.graph._axisHasChanged(),this}},{key:"splitSpread",value:function(a){return this.autoSpread=!!a,this}},{key:"_splitSpread",value:function(){var a=[],b=0,c=0,d=!0,e=!1,f=void 0;try{for(var g,h=this._splitVal[Symbol.iterator]();!(d=(g=h.next()).done);d=!0){var i=g.value;b+=i[1]-i[0]}}catch(j){e=!0,f=j}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}var k=!0,l=!1,m=void 0;try{for(var n,o=this._splitVal[Symbol.iterator]();!(k=(n=o.next()).done);k=!0){var p=n.value;a.push(c+=(p[1]-p[0])/b)}}catch(j){l=!0,m=j}finally{try{!k&&o["return"]&&o["return"]()}finally{if(l)throw m}}a.pop(),this.splitAxis.apply(this,a)}},{key:"splitValues",value:function(a){var b=0,c=void 0,d=void 0,e=!0,f=!1,g=void 0;try{for(var h,i=this.axes[Symbol.iterator]();!(e=(h=i.next()).done);e=!0){var j=h.value;Array.isArray(a[b])&&a[b].length>1&&!c&&(c=a[b][1]-a[b][0],d=b),1!=a[b].length&&Array.isArray(a[b])?j.forceMin(a[b][0]).forceMax(a[b][1]):(j._mean=a[b],Array.isArray(j._mean)&&(j._mean=j._mean[0])),b++}}catch(k){f=!0,g=k}finally{try{!e&&i["return"]&&i["return"]()}finally{if(f)throw g}}return this._baseWidthVal=c,this._baseWidthIndex=d,this._splitVal=a,this.graph._axisHasChanged(),this}},{key:"setMinMaxToFitSeries",value:function(){(!this._splitVal||this._splitVal.length<1)&&(k(Object.getPrototypeOf(b.prototype),"setMinMaxToFitSeries",this).apply(this,arguments),this._splitVal[0]=this._splitVal[0]||[],this._splitVal[this._splitVal.length-1]=this._splitVal[this._splitVal.length-1]||[],this._splitVal[0][0]=this.getCurrentMin(),this._splitVal[this._splitVal.length-1][1]=this.getCurrentMax(),this.splitValues(this._splitVal))}},{key:"draw",value:function(){var a=this;this.autoSpread&&this._splitSpread();var b=0,c=void 0,d=void 0,e=void 0;if(this._baseWidthIndex>=0&&(d=this.getSubAxis(this._baseWidthIndex))&&(e=d.getSpan()),d=void 0,this.fixGridFor>=0&&(d=this.getSubAxis(this.fixGridFor))){if(void 0!==d._mean){var f=(d.getSpan()[1]-d.getSpan()[0])/(e[1]-e[0])*this._baseWidthVal;d.forceMin(d._mean-f/2),d.forceMax(d._mean+f/2)}b=d.draw(),c=d.getPrimaryTickUnit()}return this.axes.map(function(f){if(d!==f){if(void 0!==f._mean){var g=(f.getSpan()[1]-f.getSpan()[0])/(e[1]-e[0])*a._baseWidthVal;f.forceMin(f._mean-g/2),f.forceMax(f._mean+g/2)}c&&f.forcePrimaryTickUnit(c),b=Math.max(b,f.draw())}}),this.drawLabel(),this.writeUnit(),b}},{key:"setMinPx",value:function(a){k(Object.getPrototypeOf(b.prototype),"setMinPx",this).call(this,a);var c=!0,d=!1,e=void 0;try{for(var f,g=this.axes[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=f.value;h.setMinPx(a)}}catch(i){d=!0,e=i}finally{try{!c&&g["return"]&&g["return"]()}finally{if(d)throw e}}}},{key:"setMaxPx",value:function(a){k(Object.getPrototypeOf(b.prototype),"setMaxPx",this).call(this,a);var c=!0,d=!1,e=void 0;try{for(var f,g=this.axes[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=f.value;h.setMaxPx(a)}}catch(i){d=!0,e=i}finally{try{!c&&g["return"]&&g["return"]()}finally{if(d)throw e}}}},{key:"setShift",value:function(){k(Object.getPrototypeOf(b.prototype),"setShift",this).apply(this,arguments);var a=!0,c=!1,d=void 0;try{for(var e,f=this.axes[Symbol.iterator]();!(a=(e=f.next()).done);a=!0){var g=e.value;g.setShift.apply(g,arguments)}}catch(h){c=!0,d=h}finally{try{!a&&f["return"]&&f["return"]()}finally{if(c)throw d}}}},{key:"init",value:function(){k(Object.getPrototypeOf(b.prototype),"init",this).apply(this,arguments),this.splitAxis()}},{key:"getAxisPosition",value:function(){var a=0;return this.axes.map(function(b){a=Math.max(a,b.getAxisPosition())}),a}},{key:"getSubAxis",value:function(a){if(this.axes.length<=a)throw"Impossible to reach axis. Index "+a+" is out of range";return this.axes[a]}},{key:"splitNumber",get:function(){return this._splits.length}}]),b}(a);return b.map(function(a){c.prototype[a]=function(a){return function(){var b=arguments;return this.axes.map(function(c){c[a].apply(c,b)}),this}}(a)}),c};C.prototype.defaults={axes:{margins:{high:5,low:5}}};var F=function(a){function b(a,c,d){g(this,b);var e=h(this,Object.getPrototypeOf(b).apply(this,arguments));return e.topbottom=c,e}return i(b,a),j(b,[{key:"getConstructor",value:function(){return m["default"]}},{key:"getAxisPosition",value:function(){var a=k(Object.getPrototypeOf(b.prototype),"getAxisPosition",this).apply(this,arguments);return this.labelPosY=a,this.getLabel()&&(a+=this.graph.options.fontSize),a}},{key:"drawLabel",value:function(){k(Object.getPrototypeOf(b.prototype),"drawLabel",this).call(this),this.label.setAttribute("y",(this.top?-1:1)*(this.graph.options.fontSize+this.labelPosY))}}]),b}(E(m["default"])),G=function(a){function b(a,c,d){return g(this,b),h(this,Object.getPrototypeOf(b).apply(this,arguments))}return i(b,a),j(b,[{key:"getConstructor",value:function(){return o["default"]}},{key:"draw",value:function(){var a=this;return this.getLabel()&&this.axes.map(function(b){b.setAxisPosition(a.graph.options.fontSize)}),k(Object.getPrototypeOf(b.prototype),"draw",this).apply(this,arguments)}},{key:"drawLabel",value:function(){k(Object.getPrototypeOf(b.prototype),"drawLabel",this).call(this),this.placeLabel(this.left?-this.getShift():this.getShift())}}]),b}(E(o["default"]));q.mix(F,new m["default"]),q.mix(G,new o["default"]),b["default"]=C},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=c(4),j=d(i),k=function(a){function b(){return e(this,b),f(this,Object.getPrototypeOf(b).apply(this,arguments))}return g(b,a),h(b,null,[{key:"defaults",value:function(){return{}}}]),h(b,[{key:"init",value:function(){}},{key:"onMouseDown",value:function(){}},{key:"onMouseUp",value:function(){}},{key:"onMouseMove",value:function(){}}]),b}(j["default"]);b["default"]=k},function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function h(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=c(34),k=e(j),l=c(3),m=d(l),n=function(a){function b(){return f(this,b),g(this,Object.getPrototypeOf(b).apply(this,arguments))}return h(b,a),i(b,[{key:"init",value:function(a,b){this.graph=a,this.shapeType=b.type}},{key:"setShape",value:function(a){this.shapeInfo.shapeType=a}},{key:"onMouseDown",value:function(a,b,c,d,e){if(this.shapeType||this.options.url){var f,g,h=this;this.count=this.count||0,b-=a.getPaddingLeft(),c-=a.getPaddingTop(),f=a.getXAxis().getVal(b),g=a.getYAxis().getVal(c);var i={position:[{x:f,y:g},{x:f,y:g}],onChange:function(b){a.triggerEvent("onAnnotationChange",b)},locked:!1,selectable:!0,resizable:!0,movable:!0};if(m.extend(!0,i,this.options),this.emit("beforeNewShape",i,d),!this.graph.prevent(!1)){var j=a.newShape(i.type,i);this.emit("createdShape",j,d),j&&(h.currentShape=j,h.currentShapeEvent=d),a.once("mouseUp",function(){h.emit("newShape",j)})}}}},{key:"onMouseMove",value:function(a,b,c,d){var e=this;if(e.currentShape){e.count++;var f=e.currentShape;e.currentShape=!1,a.selectedSerie&&f.setSerie(a.selectedSerie),f.resizing=!0,f.options&&f.options.onCreate&&f.options.onCreate.call(f),f.draw(),a.selectShape(f),f.handleMouseDown(e.currentShapeEvent,!0),f.handleSelected=1,f.handleMouseMove(d,!0)}}},{key:"onMouseUp",value:function(){var a=this;a.currentShape&&(a.currentShape=!1)}}]),b}(k["default"]);b["default"]=n},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function h(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=c(3),k=e(j),l=c(34),m=d(l),n=function(a){function b(){return f(this,b),g(this,Object.getPrototypeOf(b).apply(this,arguments))}return h(b,a),i(b,[{key:"init",value:function(a,b){this._path=document.createElementNS(a.ns,"path"),k.setAttributeTo(this._path,{display:"none",fill:"rgba(0,0,0,0.1)",stroke:"rgba(0,0,0,1)","shape-rendering":"crispEdges",x:0,y:0,height:0,width:0,d:""}),this.graph=a,a.dom.appendChild(this._path)}},{key:"setSerie",value:function(a){this.serie=a}},{key:"onMouseDown",value:function(a,b,c,d,e){this.serie&&(this.path="M "+b+" "+c+" ",this.currentX=b,this.currentY=c,this.xs=[this.serie.getXAxis().getVal(b-a.getPaddingLeft())],this.ys=[this.serie.getYAxis().getVal(c-a.getPaddingTop())],this._path.setAttribute("d",""),this._path.setAttribute("display","block"))}},{key:"onMouseMove",value:function(a,b,c,d,e){Math.pow(b-this.currentX,2)+Math.pow(c-this.currentY,2)>25&&(this.path+=" L "+b+" "+c+" ",this.currentX=b,this.currentY=c,this.xs.push(this.serie.getXAxis().getVal(b-a.getPaddingLeft())),this.ys.push(this.serie.getYAxis().getVal(c-a.getPaddingTop())),this._path.setAttribute("d",this.path+" z"),this.findPoints())}},{key:"findPoints",value:function(){for(var a,b=this.serie.data,c=[],d=0,e=0,f=b.length;f>e;e+=2){d=0;for(var g=0,h=this.xs.length;h>g;g+=1)a=g==h-1?0:g+1,(this.ys[g]<b[e+1]&&this.ys[a]>b[e+1]||this.ys[g]>b[e+1]&&this.ys[a]<b[e+1])&&b[e]>(b[e+1]-this.ys[g])/(this.ys[a]-this.ys[g])*(this.xs[a]-this.xs[g])+this.xs[g]&&d++;d%2==1?(c.push(e/2),this.serie.selectPoint(e/2,!0,"selected")):this.serie.unselectPoint(e/2)}this.selected=c,this.emit("selectionProcess",c)}},{key:"onMouseUp",value:function(a,b,c,d){this._path.setAttribute("display","none"),this.emit("selectionEnd",this.selected)}}]),b}(m["default"]);b["default"]=n},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function h(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=c(3),k=e(j),l=c(34),m=d(l),n=function(a){function b(){return f(this,b),g(this,Object.getPrototypeOf(b).apply(this,arguments))}return h(b,a),i(b,[{key:"init",value:function(a,b){this._zoomingGroup=document.createElementNS(a.ns,"g"),this._zoomingSquare=document.createElementNS(a.ns,"rect"),this._zoomingSquare.setAttribute("display","none"),k.setAttributeTo(this._zoomingSquare,{display:"none",fill:"rgba(171,12,12,0.2)",stroke:"rgba(171,12,12,1)","shape-rendering":"crispEdges",x:0,y:0,height:0,width:0}),this.graph=a,a.groupEvent.appendChild(this._zoomingGroup),this._zoomingGroup.appendChild(this._zoomingSquare)}},{key:"onMouseDown",value:function(a,b,c,d,e){var f=this.options.zoomMode;if(f){switch(this._zoomingMode=f,void 0===b&&(this._backedUpZoomMode=this._zoomingMode,this._zoomingMode="y",b=0),void 0===c&&(this._backedUpZoomMode=this._zoomingMode,this._zoomingMode="x",c=0),this._zoomingXStart=b,this._zoomingYStart=c,this.x1=b-a.getPaddingLeft(),this.y1=c-a.getPaddingTop(),this._zoomingSquare.setAttribute("width",0),this._zoomingSquare.setAttribute("height",0),this._zoomingSquare.setAttribute("display","block"),this._zoomingMode){case"x":this._zoomingSquare.setAttribute("y",a.options.paddingTop),this._zoomingSquare.setAttribute("height",a.getDrawingHeight()-a.shift.bottom);break;case"y":this._zoomingSquare.setAttribute("x",a.options.paddingLeft),this._zoomingSquare.setAttribute("width",a.getDrawingWidth());break;case"forceY2":this.y2=a.getYAxis().getPx(this.options.forcedY)+a.options.paddingTop}this.options.onZoomStart&&!e&&this.options.onZoomStart(a,b,c,d,e)}}},{key:"onMouseMove",value:function(a,b,c,d,e){switch(this._zoomingMode){case"xy":this._zoomingSquare.setAttribute("x",Math.min(this._zoomingXStart,b)),this._zoomingSquare.setAttribute("y",Math.min(this._zoomingYStart,c)),this._zoomingSquare.setAttribute("width",Math.abs(this._zoomingXStart-b)),this._zoomingSquare.setAttribute("height",Math.abs(this._zoomingYStart-c));break;case"forceY2":this._zoomingSquare.setAttribute("y",Math.min(this._zoomingYStart,this.y2)),this._zoomingSquare.setAttribute("height",Math.abs(this._zoomingYStart-this.y2)),this._zoomingSquare.setAttribute("x",Math.min(this._zoomingXStart,b)),this._zoomingSquare.setAttribute("width",Math.abs(this._zoomingXStart-b));break;case"x":this._zoomingSquare.setAttribute("x",Math.min(this._zoomingXStart,b)),this._zoomingSquare.setAttribute("width",Math.abs(this._zoomingXStart-b));break;case"y":this._zoomingSquare.setAttribute("y",Math.min(this._zoomingYStart,c)),this._zoomingSquare.setAttribute("height",Math.abs(this._zoomingYStart-c))}this.options.onZoomMove&&!e&&this.options.onZoomMove(a,b,c,d,e)}},{key:"onMouseUp",value:function(a,b,c,d,e){var f=this;this.removeZone();var g=b-a.options.paddingLeft,h=c-a.options.paddingTop;if(!(b-this._zoomingXStart==0&&"y"!=this._zoomingMode||c-this._zoomingYStart==0&&"x"!=this._zoomingMode))if(a.cancelClick=!0,this.options.transition){var i=!1,j=!1;("x"==this._zoomingMode||"xy"==this._zoomingMode||"forceY2"==this._zoomingMode)&&(this.fullX=!1,this.toAxes(function(a){a._pluginZoomMin=a.getCurrentMin(),a._pluginZoomMax=a.getCurrentMax(),a._pluginZoomMinFinal=Math.min(a.getVal(g),a.getVal(f.x1)),a._pluginZoomMaxFinal=Math.max(a.getVal(g),a.getVal(f.x1))},!1,!0,!1),i=!0),("y"==this._zoomingMode||"xy"==this._zoomingMode)&&(this.fullY=!1,this.toAxes(function(a){a._pluginZoomMin=a.getCurrentMin(),a._pluginZoomMax=a.getCurrentMax(),a._pluginZoomMinFinal=Math.min(a.getVal(h),a.getVal(f.y1)),a._pluginZoomMaxFinal=Math.max(a.getVal(h),a.getVal(f.y1))},!1,!1,!0),j=!0),"forceY2"==this._zoomingMode&&(this.fullY=!1,this.toAxes(function(a){a._pluginZoomMin=a.getCurrentMin(),a._pluginZoomMax=a.getCurrentMax(),a._pluginZoomMinFinal=Math.min(a.getVal(f.y2),a.getVal(f.y1)),a._pluginZoomMaxFinal=Math.max(a.getVal(f.y2),a.getVal(f.y1))},!1,!1,!0),j=!0),this.transition(i,j,"zoomEnd")}else{switch(this._zoomingMode){case"x":this.fullX=!1,this.toAxes("_doZoom",[g,this.x1],!0,!1);break;case"y":this.fullY=!1,this.toAxes("_doZoom",[h,this.y1],!1,!0);break;case"xy":this.fullX=!1,this.fullY=!1,this.toAxes("_doZoom",[g,this.x1],!0,!1),this.toAxes("_doZoom",[h,this.y1],!1,!0);break;case"forceY2":this.fullX=!1,this.fullY=!1,this.toAxes("_doZoom",[g,this.x1],!0,!1),this.toAxes("_doZoom",[this.y1,this.y2],!1,!0)}a.prevent(!0),a.draw(),this._backedUpZoomMode&&(this._zoomingMode=this._backedUpZoomMode),this.emit("zoomed")}}},{key:"removeZone",value:function(){this._zoomingSquare.setAttribute("display","none")}},{key:"onMouseWheel",value:function(a,b,c){c||(c={}),c.baseline||(c.baseline=0);var d="x"==c.direction,e=!("y"!==c.direction);this.toAxes("handleMouseWheel",[a,b,c.baseline],d,e),this.graph.drawSeries()}},{key:"onDblClick",value:function(a,b,c,d,e){var f=this.graph;if(this.emit("beforeDblClick",{graph:f,x:a,y:b,pref:d,e:c,mute:e}),!f.prevent(!1)){if(this.options.transition){var g=!1,h=!1;if(("xtotal"==d.mode||"total"==d.mode)&&(this.toAxes(function(a){a._pluginZoomMin=a.getCurrentMin(),a._pluginZoomMax=a.getCurrentMax(),a._pluginZoomMinFinal=a.getMinValue(),a._pluginZoomMaxFinal=a.getMaxValue()},!1,!0,!1),g=!0),("ytotal"==d.mode||"total"==d.mode)&&(this.toAxes(function(a){a._pluginZoomMin=a.getCurrentMin(),a._pluginZoomMax=a.getCurrentMax(),a._pluginZoomMinFinal=a.getMinValue(),a._pluginZoomMaxFinal=a.getMaxValue()},!1,!1,!0),h=!0),"gradualX"==d.mode||"gradualY"==d.mode||"gradual"==d.mode||"gradualXY"==d.mode){var a=!1,b=!1;("gradualX"==d.mode||"gradual"==d.mode||"gradualXY"==d.mode)&&(a=!0,g=!0),("gradualY"==d.mode||"gradual"==d.mode||"gradualXY"==d.mode)&&(b=!0,h=!0),this.toAxes(function(a){a._pluginZoomMin=a.getCurrentMin(),a._pluginZoomMax=a.getCurrentMax(),a._pluginZoomMinFinal=a.getCurrentMin()-(a.getCurrentMax()-a.getCurrentMin()),a._pluginZoomMaxFinal=a.getCurrentMax()+(a.getCurrentMax()-a.getCurrentMin())},!1,a,b)}return void this.transition(g,h,"dblClick")}var i=this.graph.getXAxis(),j=this.graph.getYAxis();if("xtotal"==d.mode)this.toAxes("setMinMaxToFitSeries",null,!0,!1),this.fullX=!0,this.fullY=!1;else if("ytotal"==d.mode)this.toAxes("setMinMaxToFitSeries",null,!1,!0),this.fullX=!1,this.fullY=!0;else if("total"==d.mode)this.toAxes("setMinMaxToFitSeries",null,!0,!0),this.fullX=!0,this.fullY=!0;else{a-=this.graph.options.paddingLeft,b-=this.graph.options.paddingTop;var k=i.getCurrentMin(),l=i.getCurrentMax(),m=i.getVal(a),n=l-k,o=j.getCurrentMin(),p=j.getCurrentMax(),q=j.getVal(b),r=p-o;if("gradualXY"==d.mode||"gradualX"==d.mode){var s=(m-k)/(l-k);k=Math.max(i.getMinValue(),k-n*s),l=Math.min(i.getMaxValue(),l+n*(1-s)),i.setCurrentMin(k),i.setCurrentMax(l),i.options.onZoom&&i.options.onZoom(k,l),i.cacheCurrentMin(),i.cacheCurrentMax(),i.cacheInterval()}if("gradualXY"==d.mode||"gradualY"==d.mode){var s=(q-o)/(p-o);o=Math.max(j.getMinValue(),o-r*s),p=Math.min(j.getMaxValue(),p+r*(1-s)),j.setCurrentMin(o),j.setCurrentMax(p),j.options.onZoom&&j.options.onZoom(o,p),j.cacheCurrentMin(),j.cacheCurrentMax(),j.cacheInterval()}}this.graph.draw()}}},{key:"transition",value:function(a,b,c){var d=this,e=500;d.gradualUnzoomStart||(d.gradualUnzoomStart=Date.now()),window.requestAnimationFrame(function(){var f=Date.now()-d.gradualUnzoomStart;f>e&&(f=e);var g=Math.sin(f/e*Math.PI/2);d.toAxes(function(a){a.setCurrentMin(a._pluginZoomMin+(a._pluginZoomMinFinal-a._pluginZoomMin)*g),a.setCurrentMax(a._pluginZoomMax+(a._pluginZoomMaxFinal-a._pluginZoomMax)*g),a.cacheCurrentMin(),a.cacheCurrentMax(),a.cacheInterval()},!1,a,b),d.graph.draw(),e>f?(d.transition(a,b,c),d.emit("zooming")):(d.emit("zoomed"),c&&d.emit(c),d.gradualUnzoomStart=0)})}},{key:"isFullX",value:function(){return this.fullX}},{key:"isFullY",value:function(){return this.fullY}},{key:"toAxes",value:function(a,b,c,d){var e=this.options.axes;switch(this.graph.getSelectedSerie()||(e="all"),e){case"all":this.graph._applyToAxes.apply(this.graph,arguments);break;case"serieSelected":var f=this.graph.getSelectedSerie();f&&(c&&("string"==typeof a?f.getXAxis()[a].apply(f.getXAxis(),b):a.apply(f.getXAxis(),b)),d&&("string"==typeof a?f.getYAxis()[a].apply(f.getYAxis(),b):a.apply(f.getYAxis(),b)))}}}],[{key:"defaults",value:function(){return{axes:"all"}}}]),b}(m["default"]);b["default"]=n},function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function h(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=c(39),k=e(j),l=c(34),m=e(l),n=c(3),o=d(n),p=function(a){function b(){f(this,b);var a=g(this,Object.getPrototypeOf(b).apply(this,arguments));return a.series=[],a.plugins=[],a.currentSlots={},a.requestLevels={},a.update=function(b,c){a.series.forEach(function(a){this.updateSerie(a,b)}),b||a.recalculateSeries(c)},a}return h(b,a),i(b,[{key:"init",value:function(a,b){this.graph=a,k["default"].create(this.options.LRUName,200),this.requestsRunning=0}},{key:"setURL",value:function(a){return this.options.url=a,this}},{key:"setAvailableIntervals",value:function(){this.options.intervals=arguments}},{key:"newSerie",value:function(a,b,c,d,e){var f=this.graph.newSerie(a,b,c);return this.currentSlots[a]={min:0,max:0,interval:0},f.on("hide",function(){f._zoneSerie&&f._zoneSerie.hide()}),f.on("show",function(){f._zoneSerie&&f._zoneSerie.show()}),f.setInfo("timeSerieManagerDBElements",d),e||(f._zoneSerie=this.graph.newSerie(a+"_zone",{},"zone")),this.series.push(f),f}},{key:"registerPlugin",value:function(a,b){var c;if((c=this.plugins.indexOf(a))>-1)for(var d=1;d<arguments.length;d++)a.removeListener(arguments[d],this.update);for(var d=1;d<arguments.length;d++)a.on(arguments[d],this.update)}},{key:"updateSerie",value:function(a,b){for(var c,d=this,e=a.getXAxis().getCurrentMin(),f=a.getXAxis().getCurrentMax(),g=this.getOptimalInterval(f-e),h=this.options.intervals.indexOf(g),i=h-1;h+1>=i;i++){c=this.options.intervals[i];var j=d.computeSlotID(e,c),k=d.computeSlotID(f,c),l=[[2,5,6],[1,2,4],[0,1,3]];l.forEach(function(e){for(var f=j-e[0]*(k-j),h=k+e[0]*(k-j),i=f;h>=i&&!(d.computeTimeMin(i,c)>Date.now());)d.register(a,i,c,c==g?e[1]:e[2],!0,b),i++})}this.processRequests()}},{key:"register",value:function(a,b,c,d,e,f){var g=this.computeUniqueID(a,b,c),h=k["default"].get(this.options.LRUName,g);(!h||this.computeTimeMax(b,c)>Date.now()&&h.timeout<Date.now()-(f?5e3:1e5)&&1==d)&&this.request(a,b,c,d,g,e)}},{key:"request",value:function(a,b,c,d,e,f){for(var g in this.requestLevels)g!=d&&this.requestLevels[g][e]&&(1!==this.requestLevels[g][e][0]?delete this.requestLevels[g][e]:this.requestLevels[g][e][5]=d);this.requestLevels[d]&&this.requestLevels[d][e]||(this.requestLevels[d]=this.requestLevels[d]||{},this.requestLevels[d][e]=[0,e,a.getName(),b,c,d,a.getInfo("timeSerieManagerDBElements")],f||this.processRequests())}},{key:"processRequests",value:function(){if(!(this.requestsRunning>=this.options.maxParallelRequests)){for(var a,b=this,c=1;;){for(var d in this.requestLevels[c])if(1!=this.requestLevels[c][d][0]){a=this.requestLevels[c][d];break}if(a)break;if(c++,c>10)return}this.requestsRunning++,a&&(a[0]=1,o.ajaxGet({url:this.getURL(a),method:"GET",json:!0}).done(function(e){1==e.status&&(b.requestsRunning--,delete b.requestLevels[c][d],k["default"].store(b.options.LRUName,a[1],e.data),b.processRequests(),1==a[5]&&0==Object.keys(b.requestLevels[1]).length&&b.recalculateSeries(!0))}))}}},{key:"computeTimeMax",value:function(a,b){return(a+1)*(b*this.options.nbPoints)}},{key:"computeTimeMin",value:function(a,b){return a*(b*this.options.nbPoints)}},{key:"getURL",value:function(a){var b=this.options.url.replace("<measurementid>",a[2]).replace("<from>",this.computeTimeMin(a[3],a[4])).replace("<to>",this.computeTimeMax(a[3],a[4])).replace("<interval>",a[4]),c=a[6]||{};for(var d in c)b=b.replace("<"+d+">",c[d]);return b}},{key:"getOptimalInterval",value:function(a){var b,c=(this.options.optimalPxPerPoint||1)*a/this.graph.getDrawingWidth(),d=1/0;return this.options.intervals.forEach(function(a){var e=Math.min(d,Math.abs(a-c));d!==e&&(b=a,d=e)}),b||1e3}},{key:"computeUniqueID",value:function(a,b,c){var d="",e=a.getInfo("timeSerieManagerDBElements");for(var f in e)d+=";"+f+":"+e[f];return a.getName()+";"+b+";"+c+d}},{key:"computeSlotID",value:function(a,b){return Math.floor(a/(b*this.options.nbPoints))}},{key:"computeSlotTime",value:function(a,b){return a*(b*this.options.nbPoints)}},{key:"getZoneSerie",value:function(a){return a._zoneSerie}},{key:"updateZoneSerie",value:function(a){var b=this.graph.getSerie(a);b&&b._zoneSerie&&(b._zoneSerie.setXAxis(b.getXAxis()),b._zoneSerie.setYAxis(b.getYAxis()),b._zoneSerie.setFillColor(b.getLineColor()),b._zoneSerie.setLineColor(b.getLineColor()),b._zoneSerie.setFillOpacity(.2),b._zoneSerie.setLineOpacity(.3))}},{key:"recalculateSeries",value:function(a){var b=this;this.locked||(this.changed=!1,this.series.map(function(c){b.recalculateSerie(c,a)}),this.changed=!1,b.graph.draw())}},{key:"recalculateSerie",value:function(a,b){var c,d=a.getXAxis().getCurrentMin(),e=a.getXAxis().getCurrentMax(),f=this.getOptimalInterval(e-d),g=this.computeSlotID(d,f),h=this.computeSlotID(e,f),i=[],j=[];if(!(!b&&f==this.currentSlots[a.getName()].interval&&this.currentSlots[a.getName()].min<=g&&this.currentSlots[a.getName()].max>=h)){g-=2,h+=2,this.currentSlots[a.getName()].min=g,this.currentSlots[a.getName()].max=h,this.currentSlots[a.getName()].interval=f;for(var l=g;h>=l;)(c=k["default"].get(this.options.LRUName,this.computeUniqueID(a,l,f)))?(i=i.concat(c.data.mean),
j=j.concat(c.data.minmax)):this.recalculateSerieUpwards(a,l,f,i,j),l++;this.changed=!0,a.setData(i),a._zoneSerie&&a._zoneSerie.setData(j)}}},{key:"setIntervalCheck",value:function(a){this.interval&&clearInterval(this.interval);var b=this;this.interval=setInterval(function(){b.update(!0,!1)},a)}},{key:"recalculateSerieUpwards",value:function(a,b,c,d,e){var f=this.options.intervals.slice(0);f.sort();var g,h=f[f.indexOf(c)+1]||-1;if(0>h)return[];var i=this.computeSlotTime(b,c),j=this.computeSlotTime(b+1,c),l=this.computeSlotID(i,h),m=!1;if(g=k["default"].get(this.options.LRUName,this.computeUniqueID(a,l,h)))for(var n=0,o=g.data.mean.length;o>n;n+=2)if(!(g.data.mean[n]<i)&&(m===!1&&(m=n),g.data.mean[n]>=j))return d=d.concat(g.data.mean.slice(m,n)),void(e=d.concat(g.data.minmax.slice(m,n)));return this.recalculateSerieUpwards(a,l,h,d,e)}},{key:"lockRedraw",value:function(){this.locked=!0}},{key:"unlockRedraw",value:function(){this.locked=!1}},{key:"isRedrawLocked",value:function(){return!!this.locked}}],[{key:"defaults",value:function(){return{LRUName:"PluginTimeSerieManager",intervals:[1e3,15e3,6e4,9e5,36e5,864e4],maxParallelRequests:3,optimalPxPerPoint:2,nbPoints:1e3,url:""}}}]),b}(m["default"]);b["default"]=p},function(a,b){"use strict";function c(a,b){b=b||50,k[a]||(k[a]={},m[a]=0),n[a]=b}function d(a,b){var c,d;return k[a]&&k[a][b]?(d=l[a],c=k[a][b],c.prev=d,c.next=d.next,d.next.prev=c,d.next=c,l[a]=c,c.data):void 0}function e(a,b,c){var e,f,g;return k[a]&&void 0!==m[a]&&n[a]?(g=l[a],k[a][b]?(d(a,b),k[a][b].data.data=c,k[a][b].data.timeout=Date.now()):(e={data:{data:c,timeout:Date.now()}},"undefined"==typeof g?(e.prev=e,e.next=e):(e.prev=g.prev,e.next=g.next,g.next.prev=e,g.next=e),l[a]=e,k[a][b]=e,m[a]++),m[a]>n[a]&&g&&(f=g.next,g.next.next.prev=g,g.next=g.next.next,f.next.next=void 0,f.next.prev=void 0,m[a]--),c):void 0}function f(a,b){c(a,b)}function g(a,b){var c;return void 0!=(c=d(a,b))?c:void 0}function h(a,b,c){return e(a,b,c),c}function i(a){emptyMemory(a)}function j(a){return k[a]}Object.defineProperty(b,"__esModule",{value:!0}),b.create=f,b.get=g,b.store=h,b.empty=i,b.exist=j;var k={},l={},m={},n={}},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=c(34),j=d(i),k=function(a){function b(){return e(this,b),f(this,Object.getPrototypeOf(b).apply(this,arguments))}return g(b,a),h(b,[{key:"init",value:function(a,b){this.graph=a,this.pathsPositive=[],this.pathsNegative=[],this.positivePolyline=this.graph.newShape("polyline").draw(),this.positivePolyline.setFillColor(this.options.positiveStyle.fillColor).setFillOpacity(this.options.positiveStyle.fillOpacity).setStrokeWidth(this.options.positiveStyle.strokeWidth).applyStyle(),this.negativePolyline=this.graph.newShape("polyline").draw(),this.negativePolyline.setFillColor(this.options.negativeStyle.fillColor).setFillOpacity(this.options.negativeStyle.fillOpacity).setStrokeWidth(this.options.negativeStyle.strokeWidth).applyStyle()}},{key:"setSeries",value:function(a,b){this.serie1=a,this.serie2=b}},{key:"setBoundaries",value:function(a,b){this.options.from=a,this.options.to=b}},{key:"getFrom",value:function(){return this.options.from}},{key:"getTo",value:function(){return this.options.to}},{key:"draw",value:function(){function a(){p===!0?k.pathsPositive.push([m,n]):p===!1&&k.pathsNegative.push([m,n]),m=[],n=[],p=void 0}function b(a,b){for(var c=0;c<b[0].length;c+=2)0==c&&(a+="M "),a+=" "+Math.round(k.serie1.getXAxis().getPx(b[0][c]))+", "+Math.round(k.serie1.getYAxis().getPx(b[0][c+1])),c<b[0].length-2&&(a+=" L ");for(var c=b[1].length-2;c>=0;c-=2)a+=" L "+Math.round(k.serie2.getXAxis().getPx(b[1][c]))+", "+Math.round(k.serie2.getYAxis().getPx(b[1][c+1])),0==c&&(a+=" z ");return a}var c,d,e,f,g,h,i,j,k=this,l=this.serie1.searchClosestValue(this.getFrom()),m=[],n=[];l?(c=l.dataIndex,d=2*l.xAfterIndex):(c=0,d=0),g=this.interpolate(this.serie1,this.getFrom()),m.push(this.getFrom()),m.push(g),g=this.interpolate(this.serie2,this.getFrom()),n.push(this.getFrom()),n.push(g);for(var o,p,q;c<this.serie1.data.length;c++){for(;d<this.serie1.data[c].length;d+=2){if(this.serie1.data[c][d]>this.getTo()){g=this.interpolate(this.serie1,this.getTo()),h=this.interpolate(this.serie2,this.getTo()),i=this.computeCrossing(m[m.length-2],m[m.length-1],this.getTo(),g,n[n.length-2],n[n.length-1],this.getTo(),h),i&&(m.push(i.x),m.push(i.y),n.push(i.x),n.push(i.y),a(),m.push(i.x),m.push(i.y),n.push(i.x),n.push(i.y),p=this.serie1.data[c][d+1]>this.serie2.data[e][f+1]),m.push(this.getTo()),m.push(g),n.push(this.getTo()),n.push(h),q=!0;break}if(!o){if(o=this.serie2.searchClosestValue(this.serie1.data[c][d]),!o)continue;e=o.dataIndex,f=2*o.xBeforeIndex,g=this.interpolate(this.serie2,this.serie1.data[c][d]),m.push(this.serie1.data[c][d]),m.push(this.serie1.data[c][d+1]),n.push(this.serie1.data[c][d]),n.push(g),p=this.serie1.data[c][d+1]>g}for(j=!1,i=this.computeCrossing(m[m.length-2],m[m.length-1],this.serie1.data[c][d],this.serie1.data[c][d+1],n[n.length-2],n[n.length-1],this.serie2.data[e][f],this.serie2.data[e][f+1]),i&&(m.push(i.x),m.push(i.y),n.push(i.x),n.push(i.y),a(),m.push(i.x),m.push(i.y),n.push(i.x),n.push(i.y),p=this.serie1.data[c][d+1]>this.serie2.data[e][f+1]);this.serie2.data[e][f]<this.serie1.data[c][d];){if(n.push(this.serie2.data[e][f]),n.push(this.serie2.data[e][f+1]),f+=2,f==this.serie2.data[e].length){j=this.serie2.data[e][f-2],e++,f=0;break}i=this.computeCrossing(m[m.length-2],m[m.length-1],this.serie1.data[c][d],this.serie1.data[c][d+1],n[n.length-2],n[n.length-1],this.serie2.data[e][f],this.serie2.data[e][f+1]),i&&(m.push(i.x),m.push(i.y),n.push(i.x),n.push(i.y),a(),m.push(i.x),m.push(i.y),n.push(i.x),n.push(i.y),p=this.serie1.data[c][d+1]>this.serie2.data[e][f+1])}j===!1?(m.push(this.serie1.data[c][d]),m.push(this.serie1.data[c][d+1])):(m.push(j),m.push(this.interpolate(this.serie1,j)),o=!1,d-=2,a())}if(q){a();break}(g=this.interpolate(this.serie2,m[m.length-2]))&&(n.push(m[m.length-2]),n.push(g)),a(),d=0,o=!1}var r=this.pathsPositive.reduce(b,"");this.positivePolyline.setPointsPx(r).redraw();var r=this.pathsNegative.reduce(b,"");this.negativePolyline.setPointsPx(r).redraw()}},{key:"interpolate",value:function(a,b){var c=a.searchClosestValue(b);if(!c)return!1;if(void 0==c.xMax)return c.yMin;if(void 0==c.xMin)return c.yMax;var d=(b-c.xMin)/(c.xMax-c.xMin);return(1-d)*c.yMin+d*c.yMax}},{key:"computeCrossing",value:function(a,b,c,d,e,f,g,h){var i=(d-b)/(c-a),j=(h-f)/(g-e),k=d-i*c,l=h-j*g;if(a==c||e==g)return!1;if(i==j)return{x:a,y1:b,y2:b};var m=(k-l)/(j-i);return m>c||a>m||e>m||m>g?!1:{x:m,y:i*m+k}}},{key:"getPositivePolyline",value:function(){return this.positivePolyline}},{key:"getNegativePolyline",value:function(){return this.negativePolyline}}],[{key:"defaults",value:function(){return{positiveStyle:{fillColor:"green",fillOpacity:.2,strokeWidth:0},negativeStyle:{fillColor:"red",fillOpacity:.2,strokeWidth:0},from:0,to:0}}}]),b}(j["default"]);b["default"]=k},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=c(34),j=d(i),k=function(a){function b(){return e(this,b),f(this,Object.getPrototypeOf(b).apply(this,arguments))}return g(b,a),h(b,[{key:"init",value:function(a){this.graph=a,this.time=null,this.totaltime=2e3}},{key:"onMouseDown",value:function(a,b,c,d,e){return this._draggingX=b,this._draggingY=c,this._lastDraggingX=this._draggingX,this._lastDraggingY=this._draggingY,this.stopAnimation=!0,this.moved=!1,!0}},{key:"onMouseMove",value:function(a,b,c,d,e){var f=b-this._draggingX,g=c-this._draggingY;this.options.dragX&&a._applyToAxes(function(a){a.setCurrentMin(a.getVal(a.getMinPx()-f)),a.setCurrentMax(a.getVal(a.getMaxPx()-f))},!1,!0,!1),this.options.dragY&&a._applyToAxes(function(a){a.setCurrentMin(a.getVal(a.getMinPx()-g)),a.setCurrentMax(a.getVal(a.getMaxPx()-g))},!1,!1,!0),this._lastDraggingX=this._draggingX,this._lastDraggingY=this._draggingY,this._draggingX=b,this._draggingY=c,this.moved=!0,this.time=Date.now(),this.emit("dragging"),a.draw(!0)}},{key:"onMouseUp",value:function(a,b,c,d,e){var f=Date.now()-this.time;return b==this._lastDraggingX||c==this._lastDraggingY?void(this.moved&&this.emit("dragged")):(this.speedX=(b-this._lastDraggingX)/f,this.speedY=(c-this._lastDraggingY)/f,isNaN(this.speedX)||isNaN(this.speedY)?void this.emit("dragged"):(a._applyToAxes(function(a){a._pluginDragMin=a.getCurrentMin(),a._pluginDragMax=a.getCurrentMax()},!1,!0,!0),this.stopAnimation=!1,this.accelerationX=-this.speedX/this.totaltime,this.accelerationY=-this.speedY/this.totaltime,void(this.options.persistanceX||this.options.persistanceY?this._persistanceMove(a):this.emit("dragged"))))}},{key:"_persistanceMove",value:function(a){var b=this;return b.stopAnimation?void b.emit("dragged"):void window.requestAnimationFrame(function(){var c=Date.now()-b.time,d=(.5*b.accelerationX*c+b.speedX)*c,e=(.5*b.accelerationY*c+b.speedY)*c;b.options.persistanceX&&a._applyToAxes(function(a){a.setCurrentMin(-a.getRelVal(d)+a._pluginDragMin),a.setCurrentMax(-a.getRelVal(d)+a._pluginDragMax),a.cacheCurrentMin(),a.cacheCurrentMax(),a.cacheInterval()},!1,!0,!1),b.options.persistanceY&&a._applyToAxes(function(a){a.setCurrentMin(-a.getRelVal(e)+a._pluginDragMin),a.setCurrentMax(-a.getRelVal(e)+a._pluginDragMax),a.cacheCurrentMin(),a.cacheCurrentMax(),a.cacheInterval()},!1,!1,!0),a.draw(),c<b.totaltime?(b.emit("dragging"),b._persistanceMove(a)):b.emit("dragged")})}}],[{key:"defaults",value:function(){return{dragX:!0,dragY:!0,persistanceX:!1,persistanceY:!1}}}]),b}(j["default"]);b["default"]=k}])});