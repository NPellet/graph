/* !
* Graphing JavaScript Library v0.4.0
* https://github.com/NPellet/graph
* 
* Copyright (c) 2014 Norman Pellet
* Permission is hereby granted, free of charge, to any person obtaining a copy
* of this software and associated documentation files (the "Software"), to deal
* in the Software without restriction, including without limitation the rights
* to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
* copies of the Software, and to permit persons to whom the Software is
* furnished to do so, subject to the following conditions:
* 
* The above copyright notice and this permission notice shall be included in
* all copies or substantial portions of the Software.
* 
* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
* IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
* FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
* AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
* LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
* OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
* THE SOFTWARE.
* 
* Date: 09-08-2014
*/
define("graphs/graph.axis",["jquery"],function(t){var i=function(){};return i.prototype={defaults:{lineAt0:!1,display:!0,flipped:!1,axisDataSpacing:{min:.1,max:.1},unitModification:!1,primaryGrid:!0,secondaryGrid:!0,shiftToZero:!1,tickPosition:1,nbTicksPrimary:3,nbTicksSecondary:10,ticklabelratio:1,exponentialFactor:0,exponentialLabelFactor:0,wheelBaseline:"min",logScale:!1,allowedPxSerie:100,forcedMin:!1,forcedMax:!1},init:function(e,s,n){this.unitModificationTimeTicks=[[1,[1,2,5,10,20,30]],[60,[1,2,5,10,20,30]],[3600,[1,2,6,12]],[86400,[1,2,3,4,5,10,20,40]]];var r=this;this.graph=e,this.options=t.extend(!0,{},i.prototype.defaults,n,s),this.group=document.createElementNS(this.graph.ns,"g"),this.hasChanged=!0,this.groupGrids=document.createElementNS(this.graph.ns,"g"),this.graph.axisGroup.insertBefore(this.groupGrids,this.graph.axisGroup.firstChild),this.rectEvent=document.createElementNS(this.graph.ns,"rect"),this.rectEvent.setAttribute("pointer-events","fill"),this.rectEvent.setAttribute("fill","transparent"),this.group.appendChild(this.rectEvent),this.setEvents(),this.graph.axisGroup.appendChild(this.group),this.line=document.createElementNS(this.graph.ns,"line"),this.line.setAttribute("stroke","black"),this.line.setAttribute("shape-rendering","crispEdges"),this.line.setAttribute("stroke-linecap","square"),this.groupTicks=document.createElementNS(this.graph.ns,"g"),this.groupTickLabels=document.createElementNS(this.graph.ns,"g"),this.group.appendChild(this.groupTicks),this.group.appendChild(this.groupTickLabels),this.group.appendChild(this.line),this.labelValue,this.label=document.createElementNS(this.graph.ns,"text"),this.labelTspan=document.createElementNS(this.graph.ns,"tspan"),this.label.appendChild(this.labelTspan),this.expTspan=document.createElementNS(this.graph.ns,"tspan"),this.label.appendChild(this.expTspan),this.expTspan.setAttribute("dx",10),this.expTspanExp=document.createElementNS(this.graph.ns,"tspan"),this.label.appendChild(this.expTspanExp),this.expTspanExp.setAttribute("dy",-5),this.expTspanExp.setAttribute("font-size","0.8em"),this.label.setAttribute("text-anchor","middle"),this.groupGrids.setAttribute("clip-path","url(#_clipplot"+this.graph._creation+")"),this.graph.applyStyleText(this.label),this.group.appendChild(this.label),this.groupSeries=document.createElementNS(this.graph.ns,"g"),this.group.appendChild(this.groupSeries),this.ticks=[],this.series=[],this.totalDelta=0,this.currentAction=!1,this.group.addEventListener("mousemove",function(t){t.preventDefault();var i=r.graph.getXY(t);r.handleMouseMoveLocal(i.x,i.y,t);for(var e=0,s=r.series.length;s>e;e++)r.series[e].handleMouseMove(!1,!0),"labelDragging"==r.currentAction&&r.series[e].handleLabelMove(i.x,i.y),"labelDraggingMain"==r.currentAction&&r.series[e].handleLabelMainMove(i.x,i.y)}),this.group.addEventListener("mouseup",function(t){t.preventDefault(),r.handleMouseUp()}),this.group.addEventListener("mouseout",function(t){t.preventDefault();var i=r.graph.getXY(t);r.handleMouseOutLocal(i.x,i.y,t)}),this.labels=[],this.group.addEventListener("click",function(t){t.preventDefault();var i=r.graph.getXY(t);r.addLabel(r.getVal(i.x-r.graph.getPaddingLeft()))}),this.axisRand=Math.random(),this.clip=document.createElementNS(this.graph.ns,"clipPath"),this.clip.setAttribute("id","_clip"+this.axisRand),this.graph.defs.appendChild(this.clip),this.clipRect=document.createElementNS(this.graph.ns,"rect"),this.clip.appendChild(this.clipRect),this.clip.setAttribute("clipPathUnits","userSpaceOnUse")},setEvents:function(){var t=this;this.rectEvent.addEventListener("mousedown",function(i){if(i.stopPropagation(),i.preventDefault(),3!=i.which&&!i.ctrlKey){var e=t.graph.getXY(i);switch(t.graph.currentAction="zooming",t.graph._zoomingMode=t instanceof GraphXAxis?"x":"y",t.graph._zoomingXStart=e.x,t.graph._zoomingYStart=e.y,t.graph._zoomingXStartRel=e.x-t.graph.getPaddingLeft(),t.graph._zoomingYStartRel=e.y-t.graph.getPaddingTop(),t.this._zoomingSquare.setAttribute("width",0),t.this._zoomingSquare.setAttribute("height",0),t.graph._zoomingMode){case"x":t.this._zoomingSquare.setAttribute("y",t.graph.getPaddingTop()+t.shift-t.totalDimension),t.this._zoomingSquare.setAttribute("height",t.totalDimension);break;case"y":t.this._zoomingSquare.setAttribute("x",t.graph.getPaddingLeft()+t.shift-t.totalDimension),t.this._zoomingSquare.setAttribute("width",t.totalDimension)}t.this._zoomingSquare.setAttribute("display","block")}})},addLabel:function(t){for(var i=0,e=this.series.length;e>i;i++)this.series[i].currentAction===!1&&this.series[i].addLabelObj({x:t})},setDisplay:function(t){return this.options.display=!!t,this},setLineAt0:function(t){this.options.lineAt0=!!t},setAxisDataSpacing:function(t,i){this.options.axisDataSpacing.min=t,this.options.axisDataSpacing.max=i||t},setAxisDataSpacingMin:function(t){this.options.axisDataSpacing.min=t},setAxisDataSpacingMax:function(t){this.options.axisDataSpacing.max=t},setMinPx:function(t){this.minPx=t},getMinPx:function(){return this.options.flipped?this.maxPx:this.minPx},setMaxPx:function(t){this.maxPx=t},getMaxPx:function(){return this.options.flipped?this.minPx:this.maxPx},getMathMaxPx:function(){return this.maxPx},getMinValue:function(){return this.options.forcedMin||(0===this.options.forcedMin?0:this.dataMin)},getMaxValue:function(){return this.options.forcedMax||(0===this.options.forcedMax?0:this.dataMax)},setMinValueData:function(t){this.dataMin=t},setMaxValueData:function(t){this.dataMax=t},forceMin:function(t){this.options.forcedMin=t},forceMax:function(t){this.options.forcedMax=t},getNbTicksPrimary:function(){return this.options.nbTicksPrimary},getNbTicksSecondary:function(){return this.options.nbTicksSecondary},handleMouseMove:function(t){this.mouseVal=this.getVal(t)},handleMouseWheel:function(t){t=Math.min(.2,Math.max(-.2,t));var i;i="min"==this.options.wheelBaseline?this.getActualMin():"max"==this.options.wheelBaseline?this.getActualMax():this.options.wheelBaseline,this._doZoomVal((this.getActualMax()-i)*(1+t)+i,(this.getActualMin()-i)*(1+t)+i),this.graph.redraw(!0)},handleMouseUp:function(t){if("labelDragging"==this.currentAction||"labelDraggingMain"==this.currentAction){for(var i=0,e=this.series.length;e>i;i++)this.series[i].handleLabelUp();this.currentAction=!1}else this.graph.isZooming()&&this._handleZoom(t)},_doZoomVal:function(t,i,e){return this._doZoom(this.getPx(t),this.getPx(i),t,i,e)},_doZoom:function(t,i,e,s,n){var e=e||this.getVal(t),s=s||this.getVal(i);this.setCurrentMin(Math.min(e,s)),this.setCurrentMax(Math.max(e,s)),this._hasChanged=!0,this.options.onZoom&&!n&&this.options.onZoom(this.currentAxisMin,this.currentAxisMax)},getSerieShift:function(){return this._serieShift},getSerieScale:function(){return this._serieScale},getMouseVal:function(){return this.mouseVal},isFlipped:function(){return this.options.flipped},getUnitPerTick:function(t,i,e,s){var n=t/x;i=i?Math.min(i,t/10):t/10;var r=e/i;if("time"==this.options.unitModification){var s=this.getModifiedValue(this.getMaxValue());umin=3600>s?0:86400>s?1:2;for(var h=!1,a=0,o=this.unitModificationTimeTicks.length;o>a;a++){for(var l=0,u=this.unitModificationTimeTicks[a][1].length;u>l;l++)if(r<this.unitModificationTimeTicks[a][0]*this.unitModificationTimeTicks[a][1][l]){h=!0;break}if(h)break}f=a!==this.unitModificationTimeTicks.length?this.unitModificationTimeTicks[a][0]*this.unitModificationTimeTicks[a][1][l]:1}else{var c=Math.floor(Math.log(r)/Math.log(10)),p=r*Math.pow(10,-c);this.decimals=-c;for(var d=[1,2,5,10],g=!1,a=d.length-1;a>=0;a--)(!g||Math.abs(d[a]-p)<Math.abs(g-p))&&(g=d[a]);var f=g*Math.pow(10,c)}var x=e/f,n=t/i;return[f,x,n]},setMinMaxToFitSeries:function(){var t=this.getMaxValue()-this.getMinValue();this.currentAxisMin=this.getMinValue()-this.options.axisDataSpacing.min*t,this.currentAxisMax=this.getMaxValue()+this.options.axisDataSpacing.max*t,this.options.logScale&&(this.currentAxisMin=Math.max(1e-50,this.currentAxisMin),this.currentAxisMax=Math.max(1e-50,this.currentAxisMax))},_getActualInterval:function(){return this.getActualMax()-this.getActualMin()},getActualMin:function(){return this.currentAxisMin==this.currentAxisMax?this.currentAxisMin-1:this.currentAxisMin},getActualMax:function(){return this.currentAxisMax==this.currentAxisMin?this.currentAxisMax+1:this.currentAxisMax},setCurrentMin:function(t){this.currentAxisMin=t,this.options.logScale&&(this.currentAxisMin=Math.max(1e-50,t))},setCurrentMax:function(t){this.currentAxisMax=t,this.options.logScale&&(this.currentAxisMax=Math.max(1e-50,t))},flip:function(t){return this.options.flipped=t,this},_draw:function(){var t;switch(this.options.tickPosition){case 3:this.tickPx1=-2,this.tickPx2=0;break;case 2:this.tickPx1=-1,this.tickPx2=1;break;case 1:this.tickPx1=0,this.tickPx2=2}for(;this.groupTicks.firstChild;)this.groupTicks.removeChild(this.groupTicks.firstChild);for(;this.groupTickLabels.firstChild;)this.groupTickLabels.removeChild(this.groupTickLabels.firstChild);for(;this.groupGrids.firstChild;)this.groupGrids.removeChild(this.groupGrids.firstChild);(void 0==this.currentAxisMin||void 0==!this.currentAxisMax)&&this.setMinMaxToFitSeries();var i=this.maxPx-this.minPx,e=this._getActualInterval();if(!this.options.display)return this.line.setAttribute("display","none"),0;if(this.line.setAttribute("display","block"),this.options.hideTicks)var s=0;else if(this.options.logScale)var s=this.drawLogTicks();else{this.options.scientificTicks&&(this.scientificExp=Math.floor(Math.log(Math.max(Math.abs(this.getActualMax()),Math.abs(this.getActualMin())))/Math.log(10)));var n=this.getNbTicksPrimary(),r=this.getUnitPerTick(i,n,e,this.getActualMax()),h=this.secondaryTicks();if(h)var h=h;var s=this.drawTicks(r,h)}var a;return(a=this.getLabel())&&(this.labelTspan.textContent=a,this.getExponentialLabelFactor()?(this.expTspan.nodeValue="x10",this.expTspanExp.nodeValue=this.getExponentialLabelFactor(),t=!0):this.options.scientificTicks?(this.expTspan.textContent="x10",this.expTspanExp.textContent=this.scientificExp,t=!0):t=!1,this.expTspan.setAttribute("display",t?"block":"none"),this.expTspanExp.setAttribute("display",t?"block":"none")),this.drawSpecifics(),this.options.lineAt0&&this.getActualMin()<0&&this.getActualMax()>0&&this._draw0Line(this.getPx(0)),s+(a?20:0)},setTickLabelRatio:function(t){this.options.ticklabelratio=t},draw:function(){this._widthLabels=0;var t=this._draw();return this._widthLabels+=t,t},drawTicks:function(t,i){var e,s,n,r=t[0],h=this.getActualMin(),a=this.getActualMax(),o=0;for(i&&(e=r/i),s=this.options.shiftToZero?this.dataMin-Math.ceil((this.dataMin-h)/r)*r:Math.floor(h/r)*r,this.incrTick=t[0],this.resetTicks();a>s&&(o++,!(o>200));){if(i){n=s+e;for(var l=0;s+r>n&&(l++,!(l>100));)h>n||n>a?n+=e:(this.drawTick(n,!1,Math.abs(n-s-r/2)<1e-4?3:2),n+=e)}h>s||s>a?s+=t[0]:(this.drawTick(s,!0,4),s+=t[0])}return this.widthHeightTick=this.getMaxSizeTick(),this.widthHeightTick},resetTicks:function(){},secondaryTicks:function(){return this.options.nbTicksSecondary},drawLogTicks:function(){var t=this.getActualMin(),i=this.getActualMax(),e=Math.min(t,i),i=Math.max(t,i),s={fontSize:"1.0em",exponential:!0,overwrite:!1};0>e&&(e=0);for(var n,r=0==e?0:Math.floor(Math.log(e)/Math.log(10)),e=1;(n=e*Math.pow(10,r))<i;)1==e&&n>t&&this.drawTick(n,!0,5,s),10==e?(e=1,r++):(1!=e&&n>t&&this.drawTick(n,!0,2,{overwrite:e,fontSize:"0.6em"}),e++);return 5},getPx:function(t){return this.getPos(t)},getPos:function(t){if(this.options.logScale){if(0>t)return;var t=(Math.log(t)-Math.log(this.getActualMin()))/(Math.log(this.getActualMax())-Math.log(this.getActualMin()))*(this.getMaxPx()-this.getMinPx())+this.getMinPx();return t}return(t-this.getActualMin())/this._getActualInterval()*(this.getMaxPx()-this.getMinPx())+this.getMinPx()},getRelPx:function(t){return t/this._getActualInterval()*(this.getMaxPx()-this.getMinPx())},getRelVal:function(t){return t/(this.getMaxPx()-this.getMinPx())*this._getActualInterval()},getVal:function(t){return(t-this.getMinPx())/(this.getMaxPx()-this.getMinPx())*this._getActualInterval()+this.getActualMin()},valueToText:function(t){if(this.options.scientificTicks)return t/=Math.pow(10,this.scientificExp),t.toFixed(1);if(t=t*Math.pow(10,this.getExponentialFactor())*Math.pow(10,this.getExponentialLabelFactor()),this.options.shiftToZero&&(t-=this.dataMin),this.options.ticklabelratio&&(t*=this.options.ticklabelratio),this.options.unitModification)return t=this.modifyUnit(t,this.options.unitModification);var i=this.decimals-this.getExponentialFactor()-this.getExponentialLabelFactor();return t.toFixed(i>0?i:0)},getModifiedValue:function(t){return this.options.ticklabelratio&&(t*=this.options.ticklabelratio),this.options.shiftToZero&&(t-=this.getMinValue()*(this.options.ticklabelratio||1)),t},modifyUnit:function(t,i){switch(i){case"time":var e=this.getModifiedValue(this.getMaxValue()),s=[[60,"min"],[3600,"h"],[86400,"d"]];3600>e?umin=0:86400>e?umin=1:2592e3>e&&(umin=2)}var n,r=this.incrTick,h="";for(t/=s[umin][0],n=Math.floor(t),h=n+s[umin][1],umin--;r<1*s[umin+1][0]&&umin>-1;)first=!1,t=(t-n)*s[umin+1][0]/s[umin][0],n=Math.round(t),h+=" "+n+s[umin][1],umin--;return h},getExponentialFactor:function(){return this.options.exponentialFactor},setExponentialFactor:function(t){this.options.exponentialFactor=t},setExponentialLabelFactor:function(t){this.options.exponentialLabelFactor=t},getExponentialLabelFactor:function(){return this.options.exponentialLabelFactor},setLabel:function(t){return this.options.labelValue=t,this},getLabel:function(){return this.options.labelValue},setShift:function(t,i){this.shift=t,this.totalDimension=i,this._setShift()},getShift:function(){return this.shift},setTickPosition:function(t){switch(t){case 3:case"outside":t=3;break;case 2:case"centered":t=2;break;default:case 1:case"inside":t=1}return this.options.tickPosition=t,this},togglePrimaryGrid:function(t){return this.options.primaryGrid=t,this},toggleSecondaryGrid:function(t){return this.options.secondaryGrid=t,this},doGridLine:function(t,i,e,s,n){var r=document.createElementNS(this.graph.ns,"line");r.setAttribute("shape-rendering","crispEdges"),r.setAttribute("y1",s),r.setAttribute("y2",n),r.setAttribute("x1",i),r.setAttribute("x2",e),r.setAttribute("stroke",t?this.getColorPrimaryGrid():this.getColorSecondaryGrid()),this.groupGrids.appendChild(r)},getColorPrimaryGrid:function(){return"#c0c0c0"},getColorSecondaryGrid:function(){return"#f0f0f0"},setTickContent:function(t,i,e){if(e||(e={}),e.overwrite||!e.exponential)t.textContent=e.overwrite||this.valueToText(i);else{var s=Math.round(Math.log(i)/Math.log(10)),n=Math.floor(i*Math.pow(10,-s));t.textContent=1!=n?n+"x10":"10";var r=document.createElementNS(this.graph.ns,"tspan");r.textContent=s,r.setAttribute("font-size","0.7em"),r.setAttribute("dy",-3),t.appendChild(r)}e.fontSize&&t.setAttribute("font-size",e.fontSize)},removeSerie:function(t){this.series.splice(this.series.indexOf(t),1)},killSeries:function(t){for(var i=0;i<this.series.length;i++)this.series[i].kill(t);this.series=[]},removeSeries:function(){this.killSeries()},handleMouseOutLocal:function(){for(var t=0,i=this.series.length;i>t;t++)this.series[t].hideTrackingMarker()}},i}),define("graphs/graph.axis.x",["require","jquery","./graph.axis"],function(t,i,e){var s=function(t,i,e){this.init(t,e),this.top="top"==i};return i.extend(s.prototype,e.prototype,{getAxisPosition:function(){if(!this.options.display)return 0;var t=(1==this.options.tickPosition?15:25)+2*this.graph.options.fontSize;return this.options.allowedPxSerie&&this.series.length>0&&(t+=this.options.allowedPxSerie),t},getAxisWidthHeight:function(){},_setShift:function(){this.group.setAttribute("transform","translate(0 "+(this.top?this.shift:this.graph.getDrawingHeight()-this.shift)+")")},getMaxSizeTick:function(){return(this.top?-1:1)*(1==this.options.tickPosition?10:10)},drawTick:function(t,i,e,s){var n=(this.groupTicks,document.createElementNS(this.graph.ns,"line")),r=this.getPos(t);if(void 0!=r){if(n.setAttribute("shape-rendering","crispEdges"),n.setAttribute("x1",r),n.setAttribute("x2",r),n.setAttribute("y1",(this.top?1:-1)*this.tickPx1*e),n.setAttribute("y2",(this.top?1:-1)*this.tickPx2*e),i&&this.options.primaryGrid?this.doGridLine(!0,r,r,0,this.graph.getDrawingHeight()):!i&&this.options.secondaryGrid&&this.doGridLine(!1,r,r,0,this.graph.getDrawingHeight()),n.setAttribute("stroke","black"),this.groupTicks.appendChild(n),i){var h=(this.groupTickLabels,document.createElementNS(this.graph.ns,"text"));h.setAttribute("x",r),h.setAttribute("y",(this.top?-1:1)*((1==this.options.tickPosition?8:20)+(this.top?10:0))),h.setAttribute("text-anchor","middle"),h.style.dominantBaseline="hanging",this.setTickContent(h,t,s),this.graph.applyStyleText(h),this.groupTickLabels.appendChild(h)}this.ticks.push(n)}},drawSpecifics:function(){this.label.setAttribute("text-anchor","middle"),this.label.setAttribute("x",Math.abs(this.getMaxPx()-this.getMinPx())/2+this.getMinPx()),this.label.setAttribute("y",(this.top?-1:1)*((1==this.options.tickPosition?10:15)+this.graph.options.fontSize)),this.line.setAttribute("x1",this.getMinPx()),this.line.setAttribute("x2",this.getMaxPx()),this.line.setAttribute("y1",0),this.line.setAttribute("y2",0),this.labelTspan.style.dominantBaseline="hanging",this.expTspan.style.dominantBaseline="hanging",this.expTspanExp.style.dominantBaseline="hanging"},drawSeries:function(){if(this.shift){this.rectEvent.setAttribute("y",this.top?-this.shift:0),this.rectEvent.setAttribute("height",this.totalDimension),this.rectEvent.setAttribute("x",Math.min(this.getMinPx(),this.getMaxPx())),this.rectEvent.setAttribute("width",Math.abs(this.getMinPx()-this.getMaxPx())),this.clipRect.setAttribute("y",this.top?-this.shift:0),this.clipRect.setAttribute("height",this.totalDimension),this.clipRect.setAttribute("x",Math.min(this.getMinPx(),this.getMaxPx())),this.clipRect.setAttribute("width",Math.abs(this.getMinPx()-this.getMaxPx()));for(var t=0,i=this.series.length;i>t;t++)this.series[t].draw()}},_draw0Line:function(t){this._0line=document.createElementNS(this.graph.ns,"line"),this._0line.setAttribute("x1",t),this._0line.setAttribute("x2",t),this._0line.setAttribute("y1",0),this._0line.setAttribute("y2",this.getMaxPx()),this._0line.setAttribute("stroke","black"),this.groupGrids.appendChild(this._0line)},addSerie:function(t,i){var e=new GraphSerieAxisX(t,i);return e.setAxis(this),e.init(this.graph,t,i),e.autoAxis(),e.setXAxis(this),this.series.push(e),this.groupSeries.appendChild(e.groupMain),this.groupSeries.setAttribute("clip-path","url(#_clip"+this.axisRand+")"),e},handleMouseMoveLocal:function(t){t-=this.graph.getPaddingLeft(),this.mouseVal=this.getVal(t)},isXY:function(){return"x"}}),s}),define("graphs/graph.axis.y",["require","graphs/graph.axis"],function(t,i){var e=function(t,i,e){this.init(t,e,{flipped:!0}),this.leftright=i,this.left="left"==i};return $.extend(e.prototype,i.prototype,{getAxisPosition:function(){var t=0;return this.options.display?(this.options.allowedPxSerie&&this.series.length>0&&(t=this.options.allowedPxSerie),t):0},getAxisWidthHeight:function(){return 15},resetTicks:function(){this.longestTick=[!1,0]},getMaxSizeTick:function(){return(this.longestTick[0]?this.longestTick[0].getComputedTextLength():0)+10},drawTick:function(t,i,e,s){var n,r=(this.groupTicks,this.getPos(t));if(void 0!=r){var h=document.createElementNS(this.graph.ns,"line");if(h.setAttribute("shape-rendering","crispEdges"),h.setAttribute("y1",r),h.setAttribute("y2",r),h.setAttribute("x1",(this.left?1:-1)*this.tickPx1*e),h.setAttribute("x2",(this.left?1:-1)*this.tickPx2*e),h.setAttribute("stroke","black"),i&&this.options.primaryGrid?this.doGridLine(!0,0,this.graph.getDrawingWidth(),r,r):!i&&this.options.secondaryGrid&&this.doGridLine(!1,0,this.graph.getDrawingWidth(),r,r),this.groupTicks.appendChild(h),i){{this.groupTickLabels}n=document.createElementNS(this.graph.ns,"text"),n.setAttribute("y",r),n.setAttribute("x",this.left?-10:10),this.left?n.setAttribute("text-anchor","end"):n.setAttribute("text-anchor","start"),n.style.dominantBaseline="central",this.graph.applyStyleText(n),this.setTickContent(n,t,s),this.groupTickLabels.appendChild(n),String(n).length>=this.longestTick[1]&&(this.longestTick[0]=n,this.longestTick[1]=String(n.textContent).length)}this.ticks.push(h)}},drawSpecifics:function(){this.label.setAttribute("transform","translate("+(this.left?1:-1)*(-this.widthHeightTick-8)+", "+(Math.abs(this.getMaxPx()-this.getMinPx())/2+Math.min(this.getMinPx(),this.getMaxPx()))+") rotate(-90)"),this.line.setAttribute("y1",this.getMinPx()),this.line.setAttribute("y2",this.getMaxPx()),this.line.setAttribute("x1",0),this.line.setAttribute("x2",0)},drawSeries:function(){if(this.shift){this.rectEvent.setAttribute("x",this.left?-this.shift:0),this.rectEvent.setAttribute("width",this.totalDimension),this.rectEvent.setAttribute("y",Math.min(this.getMinPx(),this.getMaxPx())),this.rectEvent.setAttribute("height",Math.abs(this.getMinPx()-this.getMaxPx())),this.clipRect.setAttribute("x",-this.shift),this.clipRect.setAttribute("width",this.totalDimension),this.clipRect.setAttribute("y",Math.min(this.getMinPx(),this.getMaxPx())),this.clipRect.setAttribute("height",Math.abs(this.getMinPx()-this.getMaxPx()));for(var t=0,i=this.series.length;i>t;t++)this.series[t].draw()}},_setShift:function(){var t=this.isLeft()?this.getShift():this.graph.getWidth()-this.graph.getPaddingRight()-this.graph.getPaddingLeft()-this.getShift();this.group.setAttribute("transform","translate("+t+" 0)")},isLeft:function(){return this.left},isRight:function(){return!this.left},flip:function(t){return this.options.flipped=!t,this},_draw0Line:function(t){this._0line=document.createElementNS(this.graph.ns,"line"),this._0line.setAttribute("y1",t),this._0line.setAttribute("y2",t),this._0line.setAttribute("x1",0),this._0line.setAttribute("x2",this.graph.getDrawingWidth()),this._0line.setAttribute("stroke","black"),this.groupGrids.appendChild(this._0line)},addSerie:function(t,i){var e=new GraphSerieAxisY(t,i);return e.init(this.graph,t,i),e.setAxis(this),e.autoAxis(),e.setYAxis(this),this.series.push(e),this.groupSeries.appendChild(e.groupMain),this.groupSeries.setAttribute("clip-path","url(#_clip"+this.axisRand+")"),e},handleMouseMoveLocal:function(t,i){i-=this.graph.getPaddingTop(),this.mouseVal=this.getVal(i)},scaleToFitAxis:function(t,i,e){for(var s=0,n=0,r=this.graph.series.length;r>n;n++)this.graph.series[n].getXAxis()==t&&(s=Math.max(s,this.graph.series[n].getMax(i,e)));this._doZoomVal(0,s)},isXY:function(){return"y"}}),e}),define("graphs/graph._serie",[],function(){var t=function(){throw"This serie is not instanciable"};return t.prototype={setAdditionalData:function(t){return this.additionalData=t,this},getAdditionalData:function(){return this.additionalData},kill:function(t){if(this.graph.plotGroup.removeChild(this.groupMain),this.picks&&this.picks.length)for(var i=0,e=this.picks.length;e>i;i++)this.picks[i].kill();this.graph.series.splice(this.graph.series.indexOf(this),1),t||this.graph.redraw()},isMinOrMax:function(t,i,e){return void 0==t?this._isMinOrMax.x.min||this._isMinOrMax.x.max||this._isMinOrMax.y.min||this._isMinOrMax.y.max:void 0==e&&void 0!=i?(this._isMinOrMax[i].min=t,void(this._isMinOrMax[i].max=t)):void(void 0!=i&&void 0!=e&&(this._isMinOrMax[i][e]=t))},hide:function(){this.shown=!1,this.groupMain.setAttribute("display","none"),this.getSymbolForLegend().setAttribute("opacity",.5),this.getTextForLegend().setAttribute("opacity",.5)},show:function(){this.shown=!0,this.groupMain.setAttribute("display","block"),this.getSymbolForLegend().setAttribute("opacity",1),this.getTextForLegend().setAttribute("opacity",1)},toggleShow:function(){return this.shown?void this.hide():void this.show()},isShown:function(){return this.shown},getX:function(t){return Math.round(5*this.getXAxis().getPx(t))/5},getY:function(t){return Math.round(5*this.getYAxis().getPx(t))/5},isSelected:function(){return this.selected},_checkX:function(t){this.minX=Math.min(this.minX,t),this.maxX=Math.max(this.maxX,t)},_checkY:function(t){this.minY=Math.min(this.minY,t),this.maxY=Math.max(this.maxY,t)},getName:function(){return this.name},autoAxis:function(){return this.setXAxis(this.isFlipped()?this.graph.getYAxis():this.graph.getXAxis()),this.setYAxis(this.isFlipped()?this.graph.getXAxis():this.graph.getYAxis()),this.graph.updateAxes(),this},setXAxis:function(t){return this.xaxis="Number"==typeof t?this.isFlipped()?this.graph.getYAxis(t):this.graph.getXAxis(t):t,this},setYAxis:function(t){return"Number"==typeof t?this.xaxis=this.isFlipped()?this.graph.getXAxis(t):this.graph.getYAxis(t):this.yaxis=t,this},getXAxis:function(){return this.xaxis},getYAxis:function(){return this.yaxis},setAxes:function(){for(var t=0;2>t;t++)arguments[t]&&this["x"==arguments[t].isXY()?"setXAxis":"setYAxis"](arguments[t]);return this},getMinX:function(){return this.minX},getMaxX:function(){return this.maxX},getMinY:function(){return this.minY},getMaxY:function(){return this.maxY},getSymbolForLegend:function(){if(!this.lineForLegend){var t=document.createElementNS(this.graph.ns,"line");this.applyLineStyle(t),t.setAttribute("x1",5),t.setAttribute("x2",25),t.setAttribute("y1",0),t.setAttribute("y2",0),t.setAttribute("cursor","pointer"),this.lineForLegend=t}return this.lineForLegend},getTextForLegend:function(){if(!this.textForLegend){var t=document.createElementNS(this.graph.ns,"text");t.setAttribute("transform","translate(35, 3)"),t.setAttribute("cursor","pointer"),t.textContent=this.getLabel(),this.textForLegend=t}return this.textForLegend},getLabel:function(){return this.options.label||this.name},setLabel:function(t){return this.options.label=t,this},setFlip:function(t){this.options.flip=t},getFlip:function(){return this.options.flip},isFlipped:function(){return this.options.flip}},t}),define("graphs/graph.serie",[require,"jquery","graphs/graph._serie"],function(t,i,e){var s=function(){};return i.extend(s.prototype,e.prototype,{defaults:{lineColor:"black",lineStyle:1,flip:!1,label:"",markers:{show:!1,type:1,zoom:1,strokeColor:!1,strokeWidth:1,fillColor:"transparent"},trackMouse:!1,trackMouseLabel:!1,trackMouseLabelRouding:1,lineToZero:!1,lineWidth:1,autoPeakPicking:!1,autoPeakPickingNb:4,autoPeakPickingMinDistance:10},init:function(t,e,n){var r=this;this.graph=t,this.name=e,this.id=Math.random()+Date.now(),this.shown=!0,this.options=i.extend(!0,{},s.prototype.defaults,n),this.data=[],this._isMinOrMax={x:{min:!1,max:!1},y:{min:!1,max:!1}},this.groupLines=document.createElementNS(this.graph.ns,"g"),this.domMarker=document.createElementNS(this.graph.ns,"path"),this.domMarker.style.cursor="pointer",this.groupMain=document.createElementNS(this.graph.ns,"g"),this.additionalData={},this.domMarker.addEventListener("mouseover",function(t){var i=r._getMarkerIndexFromEvent(t);r.onMouseOverMarker(t,i)}),this.domMarker.addEventListener("mouseout",function(t){var i=r._getMarkerIndexFromEvent(t);r.onMouseOutMarker(t,i)}),this.domMarker.addEventListener("click",function(t){var i=r._getMarkerIndexFromEvent(t);r.onClickOnMarker(t,i)}),this.marker=document.createElementNS(this.graph.ns,"circle"),this.marker.setAttribute("fill","black"),this.marker.setAttribute("r",3),this.marker.setAttribute("display","none"),this.markerLabel=document.createElementNS(this.graph.ns,"text"),this.markerLabelSquare=document.createElementNS(this.graph.ns,"rect"),this.markerLabelSquare.setAttribute("fill","white"),this.domMarkerHover={},this.domMarkerSelect={},this.markerHovered=0,this.groupMarkerSelected=document.createElementNS(this.graph.ns,"g"),this.groupLabels=document.createElementNS(this.graph.ns,"g"),this.minX=Number.MAX_VALUE,this.minY=Number.MAX_VALUE,this.maxX=Number.MIN_VALUE,this.maxY=Number.MIN_VALUE,this.lines=[],this.groupMain.appendChild(this.groupLines),this.groupMain.appendChild(this.groupLabels),this.groupMain.appendChild(this.marker),this.groupMain.appendChild(this.domMarker),this.groupMain.appendChild(this.groupMarkerSelected),this.groupMain.appendChild(this.markerLabelSquare),this.groupMain.appendChild(this.markerLabel),this.labels=[],this.currentAction=!1,this.initExtended1&&this.initExtended1()},setData:function(t,i,e){var s,n,r,h,a=0,i=i||"2D",e=e||"float",o=0;if(!(!t instanceof Array)){var l=[];t instanceof Array||"object"!=typeof t?t instanceof Array&&!(t[0]instanceof Array)&&(t=[t],i="1D"):t=[t];var u="2D"==i;if(t[0]instanceof Array&&"2D"==i&&!(t[0][0]instanceof Array)&&(t=[t]),t[0]instanceof Array)for(var c=0,p=t.length;p>c;c++){r=this._addData(e,u?2*t[c].length:t[c].length),l.push(r),a=0;for(var d=0,g=t[c].length;g>d;d++)u?(r[a]=t[c][d][0],this._checkX(r[a]),a++,r[a]=t[c][d][1],this._checkY(r[a]),a++,o++):(r[a]=t[c][d],this[d%2==0?"_checkX":"_checkY"](r[a]),a++,o+=d%2?1:0)}else if("object"==typeof t[0]){this.mode="x_equally_separated";for(var f,x=0,m=[],l=[],p=0,c=0,g=t.length;g>c;c++)x+=t[c].y.length,h=0!=c&&(!t[c+1]||t[c].x+t[c].dx*t[c].y.length==t[c+1].x),h||(l.push(this._addData(e,x)),m.push(x),x=0);this.xData=[],x=0,p=0,a=0;for(var c=0,g=t.length;g>c;c++){s=t[c].x,n=t[c].dx,this.xData.push({x:s,dx:n}),f=t[c].y.length,this._checkX(s),this._checkX(s+n*f);for(var d=0;f>d;d++)l[p][a]=t[c].y[d],this._checkY(l[p][a]),a++,o++;x+=t[c].y.length,m[p]==x&&(p++,x=0,a=0)}}var b=((this.maxX-this.minX)/this.graph.getDrawingWidth(),[]),M=4*this.graph.getDrawingWidth(),A=o/4,M=this.graph.getDrawingWidth(),A=o;if(this.data=l,M>0){for(;A>M;)b.push(M),M*=4;this.slots=b,this.options.useSlots&&this.calculateSlots()}if(this.isFlipped()){var v=this.maxX,k=this.maxY,y=this.minX,w=this.minY;this.maxX=k,this.maxY=v,this.minX=w,this.minY=y}return this.graph.updateAxes(),this}},_addData:function(t,i){switch(t){case"int":var e=4*i;break;case"float":var e=8*i}var s=new ArrayBuffer(e);switch(t){case"int":return new Int32Array(s);default:case"float":return new Float64Array(s)}},setAdditionalData:function(t){return this.additionalData=t,this},getAdditionalData:function(){return this.additionalData},calculateSlots:function(){var t=this;this.slotsData={},this.slotWorker=new Worker("./src/slotworker.js"),this.slotWorker.onmessage=function(i){t.slotsData[i.data.slot].resolve(i.data.data)};for(var i=0,e=this.slots.length;e>i;i++)this.calculateSlot(this.slots[i],i)},slotCalculator:function(t,e){var s=i.Deferred();return this.slotWorker.postMessage({min:this.minX,max:this.maxX,data:this.data,slot:t,slotNumber:e,flip:this.getFlip()}),s},calculateSlot:function(t,i){var e=this;this.slotsData[t]=this.slotCalculator(t,i),this.slotsData[t].pipe(function(i){return e.slotsData[t]=i,i})},kill:function(t){if(this.graph.plotGroup.removeChild(this.groupMain),this.picks&&this.picks.length)for(var i=0,e=this.picks.length;e>i;i++)this.picks[i].kill();this.graph.series.splice(this.graph.series.indexOf(this),1),t||this.graph.redraw()},onMouseOverMarker:function(t,i){this.toggleMarker(i,!0,!0);this.options.onMouseOverMarker&&this.options.onMouseOverMarker(i,this.infos?this.infos[i[0]]||!1:!1,[this.data[i[1]][2*i[0]],this.data[i[1]][2*i[0]+1]])},onMouseOutMarker:function(t,i){this.markersOffHover(),this.options.onMouseOutMarker&&this.infos&&this.options.onMouseOutMarker(i,this.infos?this.infos[i[0]]||!1:!1,[this.data[i[1]][2*i[0]],this.data[i[1]][2*i[0]+1]])},toggleMarker:function(t,i,e){var s=t[0],n=t[1]||0;t=t.join();var r=e?!this.domMarkerHover[t]:!this.domMarkerSelect[t],h=this["domMarker"+(e?"Hover":"Select")];if(r||i===!0&&i!==!1){if(!h[t]){var a=document.createElementNS(this.graph.ns,"path");this.setMarkerStyleTo(a,!0);var o=this.getX(this.data[n][2*s]),l=this.getY(this.data[n][2*s+1]);a.setAttribute("d","M "+o+" "+l+" "+this.getMarkerPath(this.options.markers.zoom+1).join(" ")),this["domMarker"+(e?"Hover":"Select")][t]=a,this.groupMarkerSelected.appendChild(a),e&&this.markerHovered++}}else if((i===!1||!r)&&(e&&this.domMarkerHover[t]&&!this.domMarkerSelect[t]||this.domMarkerSelect[t])){if(!h[t])return;this.groupMarkerSelected.removeChild(h[t]),delete h[t],e&&this.markerHovered--}return r},markersOffHover:function(){for(var t in this.domMarkerHover)this.toggleMarker(t.split(","),!1,!0)
},onClickOnMarker:function(t,i){var e=this.toggleMarker(i);e&&this.options.onSelectMarker&&this.options.onSelectMarker(i,this.infos?this.infos[i[0]]||!1:!1),!e&&this.options.onUnselectMarker&&this.options.onUnselectMarker(i,this.infos?this.infos[i[0]]||!1:!1),this.options.onToggleMarker&&this.options.onToggleMarker(i,this.infos?this.infos[i[0]]||!1:!1,e)},_getMarkerIndexFromEvent:function(t){var i=this.graph.getXY(t);return this.searchIndexByPxXY(i.x-this.graph.getPaddingLeft(),i.y-this.graph.getPaddingTop())},onMouseWheel:function(){},empty:function(){for(var t=0,i=this.lines.length;i>t;t++)this.groupLines.removeChild(this.lines[t]);for(;this.groupMarkers.firstChild;)this.groupMarkers.removeChild(this.groupMarkers.firstChild)},select:function(){this.selected=!0;for(var t=0,i=this.lines.length;i>t;t++)this.applyLineStyle(this.lines[t]);this.applyLineStyle(this.getSymbolForLegend())},unselect:function(){this.selected=!1;for(var t=0,i=this.lines.length;i>t;t++)this.applyLineStyle(this.lines[t]);this.applyLineStyle(this.getSymbolForLegend())},draw:function(){var t,i,e,s,n,r,h,a,o=0,l=this.data.length,u=0,c=this;this.picks=this.picks||[];var p;if(this.options.autoPeakPicking)for(var d=0,h=this.options.autoPeakPickingNb;h>d;d++)p=this.graph.makeShape({type:"label",label:{text:"",position:{x:0},anchor:"middle"}}),p.setSerie(this),this.picks.push(p);this._drawn=!0;var g=this.groupLines.nextSibling;this.groupMain.removeChild(this.groupLines),this.groupMain.removeChild(this.domMarker),this.marker.setAttribute("display","none"),this.markerPath="",this._markerPath=this.getMarkerPath().join(" ");var f=0,x=1;this.isFlipped()&&(f=1,x=0);for(var m=0;l>o;o++)m+=this.data[o].length/2;o=0;var b,M,A=[],t=0;if(this.options.useSlots&&this.slots)for(var v=this.graph.getDrawingWidth()*(this.maxX-this.minX)/(this.getXAxis().getActualMax()-this.getXAxis().getActualMin()),t=0,M=this.slots.length;M>t;t++)if(v<this.slots[t]){b=this.slotsData[this.slots[t]];break}if(b)b.done?b.done(function(i){c.drawSlot(i,t)}):this.drawSlot(b,t);else if("x_equally_separated"==this.mode)for(;l>o;o++){for(a="M ",u=0,r=0,h=this.data[o].length;h>u;u+=1)this.isFlipped()?(e=this.getX(this.xData[o].x+u*this.xData[o].dx),i=this.getY(this.data[o][u])):(i=this.getX(this.xData[o].x+u*this.xData[o].dx),e=this.getY(this.data[o][u])),a=this._addPoint(a,i,e,r),r++;this._createLine(a,o,r)}else for(;l>o;o++){for(a="M ",u=0,r=0,h=this.data[o].length;h>u;u+=2)s=this.getX(this.data[o][u+f]),n=this.getY(this.data[o][u+x]),(s!=i||n!=e)&&(this.options.autoPeakPicking&&A.push([this.data[o][u+x],this.data[o][u+f]]),a=this._addPoint(a,s,n,r),r++,i=s,e=n);this._createLine(a,o,r)}for(this.options.autoPeakPicking&&this.makePeakPicking(A),o++;o<this.lines.length;o++)this.groupLines.removeChild(this.lines[o]),this.lines.splice(o,1);this.setMarkerStyleTo(this.domMarker),this.domMarker.setAttribute("d",this.markerPath||"M 0 0"),this.groupMain.appendChild(this.domMarker),this.groupMain.insertBefore(this.groupLines,g);for(var o=0,l=this.labels.length;l>o;o++)this.repositionLabel(this.labels[o])},drawSlot:function(t,i){var e=this.slots[i]/(this.maxX-this.minX),s="M ";k=0;var n,r,h,a=0,o=Math.floor((this.getXAxis().getActualMin()-this.minX)*e),l=Math.ceil((this.getXAxis().getActualMax()-this.minX)*e);for(h=o;l>=h;h++)t[h]&&(n=Math.floor(this.getX(t[h].x)),r=this.getY(t[h].max),this.options.autoPeakPicking&&allY.push([t[h].max,t[h].x]),s=this._addPoint(s,n,this.getY(t[h].start),k),s=this._addPoint(s,n,r,!1,!0),s=this._addPoint(s,n,this.getY(t[h].min)),s=this._addPoint(s,n,this.getY(t[h].stop),!1,!0),k++);this._createLine(s,a,k),a++,console.timeEnd("Slot")},setMarkerStyleTo:function(t,i){t.setAttribute("fill",i?"transparent":this.options.markers.fillColor||"transparent"),t.setAttribute("stroke",this.options.markers.strokeColor||this.getLineColor()),t.setAttribute("stroke-width",this.options.markers.strokeWidth)},makePeakPicking:function(t){var i,e,e,s,n,r,h=[],a=0,o=t.length;for(t.sort(function(t,i){return i[0]-t[0]});o>a;a++)if(i=t[a][1],e=this.getX(i),s=0,n=h.length,r=this.getY(t[a][0]),!(e<this.getXAxis().getMinPx()||e>this.getXAxis().getMaxPx()||r>this.getYAxis().getMinPx()||r<this.getYAxis().getMaxPx())){for(;n>s&&!(Math.abs(h[s]-e)<this.options.autoPeakPickingMinDistance);s++);if(!(n>s)&&(this.picks[n].set("labelPosition",{x:i,dy:"-10px"}),this.picks[n].data.label[0].text=String(Math.round(1e3*i)/1e3),h.push(e),h.length==this.options.autoPeakPickingNb))break}this.graph.redrawShapes()},hideTrackingMarker:function(){this.marker.setAttribute("display","none"),this.markerLabel.setAttribute("display","none"),this.markerLabelSquare.setAttribute("display","none")},_addPoint:function(t,i,e,s,n){var r;return 0!==s&&(t+=this.options.lineToZero||n?"M ":"L "),t+=i,t+=" ",t+=e,t+=" ",this.options.lineToZero&&void 0!==(r=this.getYAxis().getPos(0))&&(t+="L ",t+=i,t+=" ",t+=r,t+=" "),this.options.markers.show?(i>this.getXAxis().getMaxPx()||i<this.getXAxis().getMinPx()||this._drawMarkerXY(i,e),t):t},_createLine:function(t,i,e){if(this.lines[i])var s=this.lines[i];else{var s=document.createElementNS(this.graph.ns,"path");this.applyLineStyle(s)}return 0==e?s.setAttribute("d","M 0 0"):s.setAttribute("d",t),this.lines[i]||(this.groupLines.appendChild(s),this.lines[i]=s),s},applyLineStyle:function(t){t.setAttribute("stroke",this.getLineColor()),t.setAttribute("stroke-width",this.getLineWidth()+(this.isSelected()?2:0)),this.getLineDashArray()&&t.setAttribute("stroke-dasharray",this.getLineDashArray()),t.setAttribute("fill","none")},getMarkerPath:function(t,i){var e,s=t||this.options.markers.zoom,i=i||0;switch(this.options.markers.type){case 1:e=["m",-2,-2,"l",4,0,"l",0,4,"l",-4,0,"z"];break;case 2:e=["m",-2,-2,"l",4,4,"l",-4,0,"l",4,-4,"z"]}if(!(1!=s&&s||i))return e;for(var n="number",r=0,h=e.length;h>r;r++)typeof e[r]==n&&(e[r]*=s);return e},_drawMarkerXY:function(t,i){this.options.markers.show&&(this.markerPath+="M "+t+" "+i+" ",this.markerPath+=this._markerPath+" ")},handleLabelMove:function(t,i){var e=this.labelDragging;e&&(e.labelX+=t-e.draggingIniX,e.draggingIniX=t,e.labelY+=i-e.draggingIniY,e.draggingIniY=i,e.rect.setAttribute("x",e.labelX),e.rect.setAttribute("y",e.labelY-this.graph.options.fontSize),e.labelDom.setAttribute("x",e.labelX),e.labelDom.setAttribute("y",e.labelY),e.labelLine.setAttribute("x1",e.labelX+e.labelDom.getComputedTextLength()/2),e.labelLine.setAttribute("y1",e.labelY-this.graph.options.fontSize/2))},handleLabelMainMove:function(t){var i=this.labelDragging;i.x=this.getXAxis().getVal(t-this.graph.options.paddingLeft),i.y=this.handleMouseMove(i.x,!1).interpolatedY,this.repositionLabel(i,!0)},handleLabelUp:function(){this.labelDragging=!1},searchIndexByPxXY:function(t,i){for(var e,s=!1,n=!1,r=0,h=this.data.length;h>r;r++)for(var a=0,o=this.data[r].length;o>a;a+=2)e=Math.pow(this.getX(this.data[r][a])-t,2)+Math.pow(this.getY(this.data[r][a+1])-i,2),(!s||s>e)&&(s=e,n=[a/2,r]);return n},searchClosestValue:function(t){for(var i,e=0;e<this.data.length;e++){if(t<=this.data[e][this.data[e].length-2]&&t>this.data[e][0])i=this._searchBinary(t,this.data[e],!1);else{if(!(t>=this.data[e][this.data[e].length-2]&&t<this.data[e][0]))continue;i=this._searchBinary(t,this.data[e],!0)}return{dataIndex:e,xMin:this.data[e][i],xMax:this.data[e][i+2],yMin:this.data[e][i+1],yMax:this.data[e][i+3],xBeforeIndex:i/2,xAfterIndex:i/2+2,xBeforeIndexArr:i}}},handleMouseMove:function(t,i){var e,s=t||this.getXAxis().getMouseVal(),n=this.searchClosestValue(s);if(n){var r=(s-n.xMin)/(n.xMax-n.xMin),h=(1-r)*n.yMin+r*n.yMax;if(i&&this.options.trackMouse){if(!e)return!1;var t=this.getX(this.getFlip()?h:s),a=this.getY(this.getFlip()?s:h);switch(this.marker.setAttribute("display","block"),this.marker.setAttribute("cx",t),this.marker.setAttribute("cy",a),this.markerLabel.setAttribute("display","block"),this.markerLabelSquare.setAttribute("display","block"),this.options.trackMouseLabel){case!1:break;default:this.markerLabel.textContent=this.options.trackMouseLabel.replace("<x>",s.toFixed(this.options.trackMouseLabelRouding)).replace("<y>",h.toFixed(this.options.trackMouseLabelRouding))}this.markerLabel.setAttribute("x",t+5),this.markerLabel.setAttribute("y",a-5),this.markerLabelSquare.setAttribute("x",t+5),this.markerLabelSquare.setAttribute("y",a-5-this.graph.options.fontSize),this.markerLabelSquare.setAttribute("width",this.markerLabel.getComputedTextLength()+2),this.markerLabelSquare.setAttribute("height",this.graph.options.fontSize+2)}return{xBefore:n.xMin,xAfter:n.xMax,yBefore:n.yMin,yAfter:n.yMax,trueX:s,interpolatedY:h,xBeforeIndex:n.xBeforeIndex}}},_searchBinary:function(t,i,e){var s=0,n=i.length,r=n-2;if(i[s]==t)return s;if(i[r]==t)return r;for(var h,a=0;;){if(a++,a>100)throw"Error loop";if(h=(s+r)/2,h-=h%2,h==s||i[h]==t)return h;i[h]<=t?e?r=h:s=h:i[h]>t&&(e?s=h:r=h)}},getMax:function(t,i){var e,s,n,r,h=Math.min(t,i),a=Math.max(t,i),o=this.searchClosestValue(h),l=this.searchClosestValue(a),u=0;for(e=o.dataIndex;e<=l.dataIndex;e++)for(n=e==o.dataIndex?o.xBeforeIndexArr:0,r=e==l.dataIndex?l.xBeforeIndexArr:this.data[e].length,s=n;r>=s;s+=2)u=Math.max(u,this.data[e][s+1]);return u},setLineStyle:function(t){this.options.lineStyle=t},getLineStyle:function(){return this.options.lineStyle},getLineDashArray:function(){switch(this.options.lineStyle){case 2:return"5, 5";case!1:case 1:return!1;default:return this.options.lineStyle}},setLineWidth:function(t){return this.options.lineWidth=t,this},getLineWidth:function(){return this.options.lineWidth},setLineColor:function(t){return this.options.lineColor=t,this},getLineColor:function(){return this.options.lineColor},showMarkers:function(t){return this.options.markers.show=!0,!t&&this._drawn&&this.draw(),this},hideMarkers:function(t){return this.options.markers.show=!1,!t&&this._drawn&&this.draw(),this},markersShown:function(){return this.options.markers.show},setMarkerType:function(t,i){return this.options.markers.type=t,!i&&this._drawn&&this.draw(),this},setMarkerZoom:function(t,i){return this.options.markers.zoom=t,!i&&this._drawn&&this.draw(),this},setMarkerStrokeColor:function(t,i){this.options.markers.strokeColor=t,!i&&this._drawn&&this.draw()},setMarkerStrokeWidth:function(t,i){this.options.markers.strokeWidth=t,!i&&this._drawn&&this.draw()},setMarkerFillColor:function(t,i){this.options.markers.fillColor=t,!i&&this._drawn&&this.draw()},addLabelX:function(t,i){this.addLabelObj({x:t,label:i})},addLabel:function(t,i,e){this.addLabelObj({x:t,y:i,label:e})},repositionLabel:function(t,i){var e=this.getFlip()?this.getY(t.x):this.getX(t.x),s=this.getFlip()?this.getX(t.y):this.getY(t.y),n=isNaN(e)||isNaN(s);t.group.setAttribute("display",n?"none":"block"),i&&(t.labelDom.textContent=this.options.label.replace("<x>",t.x.toFixed(this.options.trackMouseLabelRouding)||"").replace("<label>",t.label||""),t.rect.setAttribute("width",t.labelDom.getComputedTextLength()+2)),n||t.group.setAttribute("transform","translate("+e+" "+s+")")},addLabelObj:function(t){var i,e,s,n;this.labels.push(t),t.x&&!t.y&&(t.y=this.handleMouseMove(t.x,!1).interpolatedY),i=document.createElementNS(this.graph.ns,"g"),this.groupLabels.appendChild(i),e=document.createElementNS(this.graph.ns,"text"),e.setAttribute("x",5),e.setAttribute("y",-5);var r=document.createElementNS(this.graph.ns,"line");r.setAttribute("stroke","black"),r.setAttribute("x2",0),r.setAttribute("x1",0),i.appendChild(r),i.appendChild(e),s=document.createElementNS(this.graph.ns,"rect"),s.setAttribute("x",5),s.setAttribute("y",-this.graph.options.fontSize-5),s.setAttribute("width",e.getComputedTextLength()+2),s.setAttribute("height",this.graph.options.fontSize+2),s.setAttribute("fill","white"),s.style.cursor="move",e.style.cursor="move",n=document.createElementNS(this.graph.ns,"path"),n.setAttribute("d","M 0 -4 l 0 8 m -4 -4 l 8 0"),n.setAttribute("stroke-width","1px"),n.setAttribute("stroke","black"),n.style.cursor="move",i.insertBefore(s,e),i.appendChild(n),t.labelLine=r,t.group=i,t.rect=s,t.labelDom=e,t.path=n,t.labelY=-5,t.labelX=5,this.bindLabelHandlers(t),this.repositionLabel(t,!0)},bindLabelHandlers:function(t){function i(i){if(s.graph.currentAction===!1){s.graph.currentAction="labelDragging",i.stopPropagation(),t.dragging=!0;var e=s.graph.getXY(i);t.draggingIniX=e.x,t.draggingIniY=e.y,s.labelDragging=t}}function e(i){s.graph.currentAction===!1&&(i.stopPropagation(),i.preventDefault(),s.graph.currentAction="labelDraggingMain",s.labelDragging=t)}var s=this;t.labelDom.addEventListener("mousedown",i),t.rect.addEventListener("mousedown",i),t.rect.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation()}),t.labelDom.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation()}),t.path.addEventListener("mousedown",e),t.path.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation()})},getMarkerForLegend:function(){if(this.markersShown()){if(!this.markerForLegend){var t=document.createElementNS(this.graph.ns,"path");this.setMarkerStyleTo(t,!0),t.setAttribute("d","M 14 0 "+this.getMarkerPath(this.options.markers.zoom+1).join(" ")),this.markerForLegend=t}return this.markerForLegend}}}),s}),define("graphs/graph.serie.contour",["require","graphs/graph.serie"],function(t,i){var e=function(){this.accumulatedDelta=0,this.threshold=0};return $.extend(e.prototype,i.prototype,{setData:function(t,i,e){var s,n,e=e||"float",r=t.length,h=[];if(!(!t instanceof Array)){for(var s=0;r>s;s++){k=k=t[s].lines.length,n=this._addData(e,k);for(var a=0;k>a;a+=2)n[a]=t[s].lines[a],this._checkX(n[a]),n[a+1]=t[s].lines[a+1],this._checkY(n[a+1]);h.push({lines:n,zValue:t[s].zValue})}return this.data=h,this}},draw:function(){var t,i,e,s,n,r,h,a,o,l=0,u=this.data.length,c=0;this.minZ=-Number.MAX_VALUE,this.maxZ=Number.MAX_VALUE;var p=this.groupLines.nextSibling;this.groupMain.removeChild(this.groupLines),this.zValues={};var d=0,g=1;for(this.getFlip()&&(d=0,g=1);u>l;l++){for(c=0,n=0,h="",o=this.data[l].lines,r=o.length;r>c;c+=4)e=Math.round(this.getX(o[c+d])),s=Math.round(this.getY(o[c+g])),h+="M",h+=e,h+=" ",h+=s,t=Math.round(this.getX(o[c+2+d])),i=Math.round(this.getY(o[c+2+g])),h+="L",h+=t,h+=" ",h+=i,n++;a=this._createLine(h,l,n),a.setAttribute("data-zvalue",this.data[l].zValue),this.zValues[this.data[l].zValue]={dom:a},this.minZ=Math.max(this.minZ,this.data[l].zValue),this.maxZ=Math.min(this.maxZ,this.data[l].zValue)}for(l++;l<this.lines.length;l++)this.groupLines.removeChild(this.lines[l]),this.lines.splice(l,1);this.groupMain.insertBefore(this.groupLines,p)},onMouseWheel:function(t){this.accumulatedDelta=Math.min(1,Math.max(-1,this.accumulatedDelta+Math.min(.1,Math.max(-.1,t)))),this.threshold=Math.max(-this.minZ,this.maxZ)*Math.pow(this.accumulatedDelta,3);for(var i in this.zValues)this.zValues[i].dom.setAttribute("display",Math.abs(i)<this.threshold?"none":"block")}}),e}),define("graphs/graph.serie.scatter",[require,"graphs/graph._serie"],function(t,i){var e=function(){};return $.extend(e.prototype,i.prototype,{defaults:{label:""},init:function(t,i,s){this.graph=t,this.name=i,this.id=Math.random()+Date.now(),this.shown=!0,this.options=$.extend(!0,{},e.prototype.defaults,s),this.data=[],this._isMinOrMax={x:{min:!1,max:!1},y:{min:!1,max:!1}},this.groupPoints=document.createElementNS(this.graph.ns,"g"),this.groupMain=document.createElementNS(this.graph.ns,"g"),this.errorPath=document.createElementNS(this.graph.ns,"path"),this.errorPath.setAttribute("stroke","black"),this.errorPath.setAttribute("fill","transparent"),this.errorPath.setAttribute("stroke-width","1px"),this.groupMain.appendChild(this.errorPath),this.additionalData={},this.groupPoints.addEventListener("mouseover",function(){}),this.groupPoints.addEventListener("mouseout",function(){}),this.minX=Number.MAX_VALUE,this.minY=Number.MAX_VALUE,this.maxX=Number.MIN_VALUE,this.maxY=Number.MIN_VALUE,this.groupMain.appendChild(this.groupPoints),this.currentAction=!1,this.initExtended1&&this.initExtended1(),this.stdStyle={shape:"circle",cx:0,cy:0,r:3,stroke:"transparent",fill:"black"}},setData:function(t,i,e){var s,n=0,i=i||"2D",e=e||"float",r=0;if(!(!t instanceof Array)){t instanceof Array&&!(t[0]instanceof Array)&&(i="1D");var h="2D"==i;s=this._addData(e,h?2*t.length:t.length),n=0;for(var a=0,o=t.length;o>a;a++)h?(s[n]=t[a][0],this._checkX(s[n]),n++,s[n]=t[a][1],this._checkY(s[n]),n++,r++):(s[n]=t[a],this[a%2==0?"_checkX":"_checkY"](s[n]),n++,r+=a%2?1:0);return this.graph.updateAxes(),this.data=s,this}},_addData:function(t,i){switch(t){case"int":var e=4*i;break;case"float":var e=8*i}var s=new ArrayBuffer(e);switch(t){case"int":return new Int32Array(s);default:case"float":return new Float64Array(s)}},empty:function(){for(;this.group.firstChild;)this.group.removeChild(this.group.firstChild)},select:function(){this.selected=!0},unselect:function(){this.selected=!1},setDataStyle:function(t,i){return this.stdStylePerso=t,this.extraStyle=i,this},draw:function(){var t,i,e,s,n=0;this._drawn=!0,this.groupMain.removeChild(this.groupPoints);var r=0,h=1;this.getFlip()&&(r=1,h=0);this.data.length/2;n=0,e=0,s=this.data.length;for(var a,o="";s>n;n+=2){t=this.getX(this.data[n+r]),i=this.getY(this.data[n+h]);{this.data[n+h]}this.error&&(a=this.error[n/2])&&(o+="M "+t+" "+i,a[0]&&(o+=this.doErrorDraw("y",a[0],this.data[n+h],i,o)),a[1]&&(o+=this.doErrorDraw("x",a[1],this.data[n+r],t,o))),this._addPoint(t,i,n/2)}this.errorPath.setAttribute("d",o),this.groupMain.appendChild(this.groupPoints)},doErrorDraw:function(t,i,e,s,n){i instanceof Array||(i=[i]);for(var r="y"==t?"getY":"getX",h=0,a=i.length;a>h;h++)i[h]instanceof Array?(n=this.makeError(t,h,n,this[r](e+i[h][0]),s),n=this.makeError(t,h,n,this[r](e-i[h][1]),s)):(n=this.makeError(t,h,n,this[r](e+i[h]),s),n=this.makeError(t,h,n,this[r](e-i[h]),s));return n},setMaxErrorLevel:function(t){return this.maxLevel=t,this},makeError:function(t,i,e,s,n){if(i>=this.maxLevel)return e;var r=this.maxLevel-i;return console.log(r,this.maxLevel,i),1==r?this["makeBar"+t.toUpperCase()](e,s,n):2==r?this["makeBox"+t.toUpperCase()](e,s,n):void 0},makeBarY:function(t,i,e){return t+" V "+i+" m -10 0 h 20 m -10 0 V "+e+" "},makeBoxY:function(t,i,e){return t+" h 5 V "+i+" h -10 V "+e+" h 5 "},makeBarX:function(t,i,e){return t+" H "+i+" m 0 -10 v 20 m 0 -10 H "+e+" "},makeBoxX:function(t,i,e){return t+" v 5 H "+i+" v -10 H "+e+" v 5 "},_addPoint:function(t,i,e){var s=document.createElementNS(this.graph.ns,"g");s.setAttribute("transform","translate("+t+", "+i+")"),this.extraStyle&&this.extraStyle[e]?this.doShape(s,this.extraStyle[e]):this.stdStylePerso?this.doShape(s,this.stdStylePerso):this.doShape(s,this.stdStyle),this.groupPoints.appendChild(s)},doShape:function(t,i){var e=document.createElementNS(this.graph.ns,i.shape);for(var s in i)"shape"!==s&&e.setAttribute(s,i[s]);t.appendChild(e)},setDataError:function(t){this.error=t}}),e}),define("graphs/graph.serie.zone",[require,"graphs/graph._serie"],function(t,i){var e=function(){};return $.extend(e.prototype,i.prototype,{defaults:{label:"",fillColor:"rgba( 0, 0, 0, 0.1 )",lineColor:"rgba( 0, 0, 0, 1 )",lineWidth:"1px"},init:function(t,i,s){this.graph=t,this.name=i,this.id=Math.random()+Date.now(),this.shown=!0,this.options=$.extend(!0,{},e.prototype.defaults,s),this.data=[],this._isMinOrMax={x:{min:!1,max:!1},y:{min:!1,max:!1}},this.groupZones=document.createElementNS(this.graph.ns,"g"),this.groupMain=document.createElementNS(this.graph.ns,"g"),this.lineZone=document.createElementNS(this.graph.ns,"path"),this.lineZone.setAttribute("stroke","black"),this.lineZone.setAttribute("stroke-width","1px"),this.additionalData={},this.minX=Number.MAX_VALUE,this.minY=Number.MAX_VALUE,this.maxX=Number.MIN_VALUE,this.maxY=Number.MIN_VALUE,this.groupMain.appendChild(this.groupZones),this.groupZones.appendChild(this.lineZone),this.currentAction=!1,this.initExtended1&&this.initExtended1()},setData:function(t,i,e){var s,n=0,i=i||"2D",e=e||"float",r=0;if(!(!t instanceof Array)){var h;t instanceof Array&&!(t[0]instanceof Array)?(i="1D",h=1.5*t.length,t[1]instanceof Array||(i="1D_flat",h=1*t.length)):t instanceof Array&&!(t[0][1]instanceof Array)?(i="2D_flat",h=3*t.length):(i="2D",h=3*t.length),s=this._addData(e,h),n=0;for(var a=0,o=t.length;o>a;a++)if("2D"==i||"2D_flat"==i)s[n]=t[a][0],this._checkX(s[n]),n++,"2D"==i?(s[n]=t[a][1][0],this._checkY(s[n]),n++,r++,s[n]=t[a][1][1],this._checkY(s[n]),n++,r++):(s[n]=t[a][1],this._checkY(s[n]),n++,r++,s[n]=t[a][2],this._checkY(s[n]),n++,r++);else if("1D_flat"==i){if(a%3==0){s[n]=t[a],this._checkX(s[n]),n++,r++;continue}s[n]=t[a],this._checkY(s[n]),n++,r++}else{if(a%2==0){s[n]=t[a],this._checkX(s[n]),n++,r++;continue}s[n]=t[a][0],this_checkY(s[n]),n++,r++,s[n]=t[a][1],this_checkY(s[n]),n++,r++}return this.graph.updateAxes(),this.data=s,this}},_addData:function(t,i){switch(t){case"int":var e=4*i;break;case"float":var e=8*i}var s=new ArrayBuffer(e);switch(t){case"int":return new Int32Array(s);default:case"float":return new Float64Array(s)}},empty:function(){for(;this.group.firstChild;)this.group.removeChild(this.group.firstChild)},select:function(){this.selected=!0},unselect:function(){this.selected=!1},setDataStyle:function(t,i){return this.stdStylePerso=t,this.extraStyle=i,this},draw:function(){var t,i,e,s,n,r=0;this._drawn=!0,this.groupMain.removeChild(this.groupZones);this.data.length/2;r=0,s=0,n=this.data.length;for(var h=[],a=[];n>r;r+=3)t=this.getX(this.data[r]),i=this.getY(this.data[r+1]),e=this.getY(this.data[r+2]),e>i?(h.push([t,i]),a.push([t,e])):(h.push([t,e]),a.push([t,i]));a.reverse(),this.lineZone.setAttribute("d","M "+h[0]+" L "+h.join(" L ")+" L "+a.join(" L ")+" z"),this.applyLineStyle(this.lineZone),this.groupMain.appendChild(this.groupZones)},applyLineStyle:function(t){t.setAttribute("stroke",this.getLineColor()),t.setAttribute("stroke-width",this.getLineWidth()),t.setAttribute("fill",this.getFillColor())},setLineWidth:function(t){return this.options.lineWidth=t,this},getLineWidth:function(){return this.options.lineWidth},setLineColor:function(t){return this.options.lineColor=t,this},getLineColor:function(){return this.options.lineColor},setFillColor:function(t){return this.options.fillColor=t,this},getFillColor:function(){return this.options.fillColor}}),e}),define("graphs/graph.legend",[],function(){var t={frame:!1,backgroundColor:"transparent",frameWidth:0,frameColor:"transparent",paddingTop:10,paddingLeft:10,paddingBottom:10,paddingRight:10,movable:!1},i=function(i,e){this.options=$.extend({},t,e),this.graph=i,this.svg=document.createElementNS(this.graph.ns,"g"),this.rect=document.createElementNS(this.graph.ns,"rect"),this.rectBottom=document.createElementNS(this.graph.ns,"rect"),this.rect.setAttribute("x",0),this.rect.setAttribute("y",0),this.rectBottom.setAttribute("x",0),this.rectBottom.setAttribute("y",0),this.pos={x:void 0,y:void 0,transformX:0,transformY:0},this.setEvents(),this.applyStyle()};return i.prototype={setPosition:function(t,i,e){if(t){var s=this.graph.getPosition(t);"right"==i&&(s.x-=this.width),"bottom"==e&&(s.y-=this.height),this.pos.transformX=s.x,this.pos.transformY=s.y,this._setPosition()}},update:function(){var t=this;for(this.applyStyle();this.svg.hasChildNodes();)this.svg.removeChild(this.svg.lastChild);this.svg.appendChild(this.rectBottom);for(var i=this.graph.getSeries(),e=0,s=i.length;s>e;e++)!function(s){var n,r,h;n=document.createElementNS(t.graph.ns,"g"),n.setAttribute("transform","translate(0, "+(16*e+10+t.options.paddingTop)+")"),t.svg.appendChild(n);var r=i[s].getSymbolForLegend(),a=i[s].getMarkerForLegend(),h=i[s].getTextForLegend();n.appendChild(r),a&&n.appendChild(a),n.appendChild(h),n.addEventListener("click",function(){var e=i[s];e.isSelected()?(e.hide(),t.graph.unselectSerie(e)):e.isShown()?t.graph.selectSerie(e):e.show()})}(e);var n=this.svg.getBBox();this.width=n.width+this.options.paddingRight+this.options.paddingLeft,this.height=n.height+this.options.paddingBottom+this.options.paddingTop,this.rect.setAttribute("width",this.width),this.rect.setAttribute("height",this.height),this.rect.setAttribute("fill","none"),this.rect.setAttribute("pointer-events","fill"),this.rect.setAttribute("display","none"),this.options.movable&&(this.rectBottom.style.cursor="move"),this.rectBottom.setAttribute("width",this.width),this.rectBottom.setAttribute("height",this.height),this.rectBottom.setAttribute("x",n.x-this.options.paddingLeft),this.rectBottom.setAttribute("y",n.y-this.options.paddingTop),this.svg.appendChild(this.rect)},getDom:function(){return this.svg},setEvents:function(){var t=this,i=this.pos,e=function(e){t.options.movable&&(i.x=e.clientX,i.y=e.clientY,e.stopPropagation(),e.preventDefault(),t.mousedown=!0,t.graph.shapeMoving(t),t.rect.setAttribute("display","block"))},s=function(i){t.handleMouseMove(i)};this.rectBottom.addEventListener("mousedown",e),this.rectBottom.addEventListener("mousemove",s),this.rect.addEventListener("mousemove",s)},handleMouseUp:function(t){t.stopPropagation(),t.preventDefault(),this.mousedown=!1,this.rect.setAttribute("display","none"),this.graph.shapeStopMoving()},handleMouseMove:function(t){if(this.mousedown){var i=this.pos,e=t.clientX-i.x,s=t.clientY-i.y;i.transformX+=e,i.transformY+=s,i.x=t.clientX,i.y=t.clientY,t.stopPropagation(),t.preventDefault(),this._setPosition()}},_setPosition:function(){var t=this.pos;this.svg.setAttribute("transform","translate("+t.transformX+", "+t.transformY+")")},applyStyle:function(){this.options.frame&&(this.rectBottom.setAttribute("stroke",this.options.frameColor),this.rectBottom.setAttribute("stroke-width",this.options.frameWidth+"px")),this.rectBottom.setAttribute("fill",this.options.backgroundColor)}},i}),define("graphs/graph.core",["jquery","require","graphs/graph.axis.x","graphs/graph.axis.y","graphs/graph.serie","graphs/graph.serie.contour","graphs/graph.serie.scatter","graphs/graph.serie.zone","graphs/graph.legend"],function(t,i,e,s,n,r,h,a,o){function l(t){return t&&t.indexOf&&t.indexOf("px")>-1?parseInt(t.replace("px","")):!1}var u={paddingTop:30,paddingBottom:5,paddingLeft:20,paddingRight:20,close:{left:!0,right:!0,top:!0,bottom:!0},title:"",lineToZero:!1,fontSize:12,fontFamily:"Myriad Pro, Helvetica, Arial",addLabelOnClick:!1,onVerticalTracking:!1,onHorizontalTracking:!1,rangeLimitX:10,rangeLimitY:0,plugins:[],pluginAction:{},wheel:{},dblclick:{}},c=function(i,n,r){this._creation=Date.now()+Math.random(),"string"==typeof i&&(i=document.getElementById(i)),this.options=t.extend({},u,n),this.axis={left:[],top:[],bottom:[],right:[]},this.title=!1,this.shapes=[],this.shapesLocked=!1,this.ns="http://www.w3.org/2000/svg",this.nsxlink="http://www.w3.org/1999/xlink",this.series=[],this._dom=i,this.doDom(),this.setSize(t(i).width(),t(i).height()),this._resize(),this.registerEvents(),this.trackingLines={id:0,current:!1,dasharray:[!1,"5, 5","5, 1","1, 5"],currentDasharray:[],vertical:[],horizontal:[]},this.shapeHandlers={mouseDown:[],mouseUp:[],mouseMove:[],mouseOver:[],mouseOut:[]},this.pluginsReady=t.Deferred(),this.currentAction=!1;var h;if(r)for(var a in r)for(var o=0,l=r[a].length;l>o;o++){switch(a){case"top":h="setTopAxis";var c=new e(this,"top",r[a][o]);break;case"bottom":h="setBottomAxis";var c=new e(this,"bottom",r[a][o]);break;case"left":h="setLeftAxis";var c=new s(this,"left",r[a][o]);break;case"right":h="setRightAxis";var c=new s(this,"right",r[a][o])}this[h](c,o)}this._pluginsInit()};return c.prototype={setAttributeTo:function(t,i,e){var s;if(e)for(s in i)t.setAttributeNS(e,s,i[s]);else for(s in i)t.setAttribute(s,i[s])},doDom:function(){this.dom=document.createElementNS(this.ns,"svg"),this.dom.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),this.setAttributeTo(this.dom,{xmlns:this.ns,"font-family":this.options.fontFamily,"font-size":this.options.fontSize}),this._dom.appendChild(this.dom),this._dom.setAttribute("tabindex",1),this._dom.style.outline="none",this.defs=document.createElementNS(this.ns,"defs"),this.dom.appendChild(this.defs),this.rectEvent=document.createElementNS(this.ns,"rect"),this.setAttributeTo(this.rectEvent,{"pointer-events":"fill",fill:"transparent"}),this.dom.appendChild(this.rectEvent),this.domTitle=document.createElementNS(this.ns,"text"),this.setTitle(this.options.title),this.setAttributeTo(this.domTitle,{"text-anchor":"middle",y:20}),this.dom.appendChild(this.domTitle),this.graphingZone=document.createElementNS(this.ns,"g"),this.setAttributeTo(this.graphingZone,{transform:"translate("+this.options.paddingLeft+", "+this.options.paddingTop+")"}),this.dom.appendChild(this.graphingZone),this.axisGroup=document.createElementNS(this.ns,"g"),this.graphingZone.appendChild(this.axisGroup),this.shapeZone=document.createElementNS(this.ns,"g"),this.graphingZone.appendChild(this.shapeZone),this.plotGroup=document.createElementNS(this.ns,"g"),this.graphingZone.appendChild(this.plotGroup),this._makeClosingLines(),this.clip=document.createElementNS(this.ns,"clipPath"),this.clip.setAttribute("id","_clipplot"+this._creation),this.defs.appendChild(this.clip),this.clipRect=document.createElementNS(this.ns,"rect"),this.clip.appendChild(this.clipRect),this.clip.setAttribute("clipPathUnits","userSpaceOnUse"),this.markerArrow=document.createElementNS(this.ns,"marker"),this.markerArrow.setAttribute("viewBox","0 0 10 10"),this.markerArrow.setAttribute("id","arrow"+this._creation),this.markerArrow.setAttribute("refX","0"),this.markerArrow.setAttribute("refY","5"),this.markerArrow.setAttribute("markerUnits","strokeWidth"),this.markerArrow.setAttribute("markerWidth","4"),this.markerArrow.setAttribute("markerHeight","3"),this.markerArrow.setAttribute("orient","auto");var t=document.createElementNS(this.ns,"path");t.setAttribute("d","M 0 0 L 10 5 L 0 10 z"),t.setAttribute("fill","context-stroke"),this.markerArrow.appendChild(t),this.defs.appendChild(this.markerArrow),this.vertLineArrow=document.createElementNS(this.ns,"marker"),this.vertLineArrow.setAttribute("viewBox","0 0 10 10"),this.vertLineArrow.setAttribute("id","verticalline"+this._creation),this.vertLineArrow.setAttribute("refX","0"),this.vertLineArrow.setAttribute("refY","5"),this.vertLineArrow.setAttribute("markerUnits","strokeWidth"),this.vertLineArrow.setAttribute("markerWidth","20"),this.vertLineArrow.setAttribute("markerHeight","10"),this.vertLineArrow.setAttribute("orient","auto"),this.vertLineArrow.setAttribute("stroke-width","1px");var i=document.createElementNS(this.ns,"path");i.setAttribute("d","M 0 -10 L 0 10"),i.setAttribute("stroke","black"),this.vertLineArrow.appendChild(i),this.defs.appendChild(this.vertLineArrow),this.plotGroup.setAttribute("clip-path","url(#_clipplot"+this._creation+")"),this.bypassHandleMouse=!1},setOption:function(t,i){this.options[t]=i},kill:function(){this._dom.removeChild(this.dom)},getXY:function(i){var e=i.clientX,s=i.clientY,n=t(this._dom).offset();return e-=n.left-window.scrollX,s-=n.top-window.scrollY,{x:e,y:s}},registerEvents:function(){var t=this;this._dom.addEventListener("keydown",function(i){i.preventDefault(),i.stopPropagation(),8==i.keyCode&&t.selectedShape&&t.selectedShape.kill()}),this.dom.addEventListener("mousemove",function(i){i.preventDefault();var e=t.getXY(i);t.handleMouseMove(e.x,e.y,i)}),this.dom.addEventListener("mousedown",function(i){if(t.focus(),i.preventDefault(),3!=i.which&&!i.ctrlKey){var e=t.getXY(i);t.handleMouseDown(e.x,e.y,i)}}),this.dom.addEventListener("mouseup",function(i){i.preventDefault();var e=t.getXY(i);t.handleMouseUp(e.x,e.y,i)}),this.dom.addEventListener("dblclick",function(i){i.preventDefault(),t.clickTimeout&&window.clearTimeout(t.clickTimeout);var e=t.getXY(i);t.cancelClick=!0,t.handleDblClick(e.x,e.y,i)}),this.dom.addEventListener("click",function(i){if(3!=i.which&&!i.ctrlKey){i.preventDefault();var e=t.getXY(i);t.clickTimeout&&window.clearTimeout(t.clickTimeout),t.clickTimeout=window.setTimeout(function(){t.handleClick(e.x,e.y,i)},200)}}),this.rectEvent.addEventListener("mousewheel",function(i){i.preventDefault(),i.stopPropagation();var e=i.wheelDeltaY||i.wheelDelta||-i.deltaY;
return t.handleMouseWheel(e,i),!1}),this.rectEvent.addEventListener("wheel",function(i){i.stopPropagation(),i.preventDefault();var e=i.wheelDeltaY||i.wheelDelta||-i.deltaY;return t.handleMouseWheel(e,i),!1})},focus:function(){this._dom.focus()},allowPlugin:function(t,i){if(this.forcedPlugin==i)return!0;var e=this.options.pluginAction[i]||{},s=t.shiftKey,n=t.ctrlKey;return s!==e.shift?!1:n!==e.ctrl?!1:!0},handleMouseDown:function(i,e,s){var n,r=(t(s.target),s.shiftKey),h=s.ctrlKey,a=this.options.pluginAction;if(this.unselectShape(),this.forcedPlugin)return this.activePlugin=this.forcedPlugin,void this._pluginExecute(this.activePlugin,"onMouseDown",[this,i,e,s]);for(n in a){if(!a[n]._forced){if(r!==a[n].shift)continue;if(h!==a[n].ctrl)continue}this.activePlugin=n,this._pluginExecute(n,"onMouseDown",[this,i,e,s]);break}},handleMouseMove:function(t,i,e){return this.bypassHandleMouse?void this.bypassHandleMouse.handleMouseMove(e):void this._pluginExecute(this.activePlugin,"onMouseMove",[this,t,i,e])},forcePlugin:function(t){this.forcedPlugin=t},unforcePlugin:function(){this.forcedPlugin=!1},handleMouseUp:function(t,i,e){return this.bypassHandleMouse?(this.bypassHandleMouse.handleMouseUp(e),void(this.activePlugin=!1)):(this._pluginExecute(this.activePlugin,"onMouseUp",[this,t,i,e]),void(this.activePlugin=!1))},isZooming:function(){return"zooming"==this.currentAction},handleMouseWheel:function(t,i){if(i.preventDefault(),i.stopPropagation(),this.options.wheel.type){switch(this.options.wheel.type){case"plugin":var e;(e=this._plugins[this.options.wheel.plugin])&&e.onMouseWheel(t,i);break;case"toSeries":for(var s=0,n=this.series.length;n>s;s++)this.series[s].onMouseWheel(t,i)}this.redraw(),this.drawSeries(!0)}},handleClick:function(t){if(this.options.addLabelOnClick&&this.currentAction===!1)for(var i=0,e=this.series.length;e>i;i++)this.series[i].addLabelX(this.series[i].getXAxis().getVal(t-this.getPaddingLeft()))},shapeMoving:function(t){this.bypassHandleMouse=t},shapeStopMoving:function(){this.bypassHandleMouse=!1},handleDblClick:function(t,i,e){var s=this.options.dblclick;if(s&&s.type)switch(s.type){case"plugin":var n;(n=this._plugins[s.plugin])&&n.onDblClick(this,t,i,s.options,e)}},resetAxis:function(){for(;this.axisGroup.firstChild;)this.axisGroup.removeChild(this.axisGroup.firstChild);this.axis.left=[],this.axis.right=[],this.axis.bottom=[],this.axis.top=[]},resetSeries:function(){for(var t=0;t<this.series.length;t++)this.series[t].kill(!0);this.series=[]},applyToAxis:{string:function(t,i,e){for(var s=0;s<this.axis[t].length;s++)this.axis[t][s][i].apply(this.axis[t][s],e)},"function":function(t,i){for(var e=0;e<this.axis[t].length;e++)i.call(this,this.axis[t][e],t)}},applyToAxes:function(t,i,e,s){var n,r=[],h=0;for((e||void 0==e)&&(r.push("top"),r.push("bottom")),(s||void 0==s)&&(r.push("left"),r.push("right")),n=r.length;n>h;h++)this.applyToAxis[typeof t].call(this,r[h],t,i)},setWidth:function(t,i){this.width=t,i||this._resize()},getWidth:function(){return this.width},setHeight:function(t,i){this.height=t,i||this._resize()},getHeight:function(){return this.height},resize:function(t,i){this.setSize(t,i),this._resize()},setSize:function(t,i){this.setWidth(t,!0),this.setHeight(i,!0),this.getDrawingHeight(),this.getDrawingWidth()},getDom:function(){return this.dom},applyStyleText:function(){},getXAxis:function(t,i){return this.axis.top.length>0&&0==this.axis.bottom.length?this.getTopAxis(t,i):this.getBottomAxis(t,i)},getYAxis:function(t,i){return this.axis.right.length>0&&0==this.axis.left.length?this.getRightAxis(t,i):this.getLeftAxis(t,i)},_getAxis:function(t,i,e,s){return t=t||0,"object"==typeof t&&(i=t,t=0),this.axis[s][t]=this.axis[s][t]||new e(this,s,i)},getTopAxis:function(t,i){return this._getAxis(t,i,e,"top")},getBottomAxis:function(t,i){return this._getAxis(t,i,e,"bottom")},getLeftAxis:function(t,i){return this._getAxis(t,i,s,"left")},getRightAxis:function(t,i){return this._getAxis(t,i,s,"right")},setXAxis:function(t,i){this.setBottomAxis(t,i)},setYAxis:function(t,i){this.setLeftAxis(t,i)},setLeftAxis:function(t,i){i=i||0,this.axis.left[i]=t},setRightAxis:function(t,i){i=i||0,this.axis.right[i]=t},setTopAxis:function(t,i){i=i||0,this.axis.top[i]=t},setBottomAxis:function(t,i){i=i||0,this.axis.bottom[i]=t},getPaddingTop:function(){return this.options.paddingTop},getPaddingLeft:function(){return this.options.paddingLeft},getPaddingBottom:function(){return this.options.paddingTop},getPaddingRight:function(){return this.options.paddingRight},setTitle:function(t){this.title=t,this.domTitle.textContent=t},displayTitle:function(){this.domTitle.setAttribute("display","inline")},hideTitle:function(){this.domTitle.setAttribute("display","none")},drawSerie:function(t){t.draw(this.getDrawingGroup())},getDrawingHeight:function(t){if(t&&this.innerHeight)return this.innerHeight;var i=this.height-this.options.paddingTop-this.options.paddingBottom;return this.innerHeight=i},getDrawingWidth:function(t){if(t&&this.innerWidth)return this.innerWidth;var i=this.width-this.options.paddingLeft-this.options.paddingRight;return this.innerWidth=i},getBoundaryAxisFromSeries:function(t,i,e){var s,n,r,h,a,o,l,u="x"==i,c="min"==e,p=u?["getMinX","getMaxX"]:["getMinY","getMaxY"],d=p[c?0:1];for(s=c?Number.MAX_VALUE:Number.MIN_VALUE,h=this.getSeriesFromAxis(t,!0),o=0,l=h.length;l>o;o++)r=h[o],a=r[d](),s=Math[e](s,a),s==a&&n&&(n.isMinOrMax(!1,i,e),n=r,r.isMinOrMax(!0,i,e));return s},getSeriesFromAxis:function(t,i){for(var e=[],s=this.series.length-1;s>=0;s--)(this.series[s].getXAxis()==t||this.series[s].getYAxis()==t)&&e.push(this.series[s]);if(i)for(s=0;s<t.series.length;s++)e.push(t.series[s]);return e},_resize:function(){this.width&&this.height&&(this.sizeSet=!0,this.dom.setAttribute("width",this.width),this.dom.setAttribute("height",this.height),this.domTitle.setAttribute("x",this.width/2),this.refreshDrawingZone())},canRedraw:function(){return this.width&&this.height},redraw:function(t,i){return this.canRedraw()?(this.sizeSet?this.refreshDrawingZone(t,i):this._resize(),!0):void 0},updateAxes:function(){var t,i,e,s,n,r=["bottom","top","left","right"];for(this.refreshMinOrMax(),i=0,e=r.length;e>i;i++)for(s=this.axis[r[i]].length-1;s>=0;s--)t=this.axis[r[i]][s],n=2>i?"x":"y",t.disabled||(t.setMinValueData(this.getBoundaryAxisFromSeries(this.axis[r[i]][s],n,"min")),t.setMaxValueData(this.getBoundaryAxisFromSeries(this.axis[r[i]][s],n,"max")))},refreshDrawingZone:function(){var t=["bottom","top","left","right"],i=[0,0,0,0];this._painted=!0,this.refreshMinOrMax(),this.applyToAxes(function(e){if(!e.disabled){var s=t.indexOf(arguments[1]);e.setShift(i[s]+e.getAxisPosition(),e.getAxisPosition()),i[s]+=e.getAxisPosition()}},!1,!0,!1),this.applyToAxes(function(e){if(!e.disabled){e.setMinPx(i[1]),e.setMaxPx(this.getDrawingHeight(!0)-i[0]);var s=e.draw()||0,n=t.indexOf(arguments[1]),r=e.getAxisPosition();e.setShift(i[n]+r+s,s+r),i[n]+=s+r,e.drawSeries()}},!1,!1,!0),this.applyToAxes(function(t){t.disabled||(t.setMinPx(i[2]),t.setMaxPx(this.getDrawingWidth(!0)-i[3]),t.draw(),t.drawSeries())},!1,!0,!1),this.closeLine("right",this.getDrawingWidth(!0),this.getDrawingWidth(!0),i[1],this.getDrawingHeight(!0)-i[0]),this.closeLine("left",0,0,i[1],this.getDrawingHeight(!0)-i[0]),this.closeLine("top",i[2],this.getDrawingWidth(!0)-i[3],0,0),this.closeLine("bottom",i[2],this.getDrawingWidth(!0)-i[3],this.getDrawingHeight(!0)-i[0],this.getDrawingHeight(!0)-i[0]),this.clipRect.setAttribute("y",i[1]),this.clipRect.setAttribute("x",i[2]),this.clipRect.setAttribute("width",this.getDrawingWidth()-i[2]-i[3]),this.clipRect.setAttribute("height",this.getDrawingHeight()-i[1]-i[0]),this.rectEvent.setAttribute("x",i[1]),this.rectEvent.setAttribute("y",i[2]),this.rectEvent.setAttribute("width",this.getDrawingWidth()-i[2]-i[3]),this.rectEvent.setAttribute("height",this.getDrawingHeight()-i[1]-i[0]),this.shift=i,this.redrawShapes()},autoscaleAxes:function(){this.applyToAxes("setMinMaxToFitSeries",null,!0,!0),this.redraw()},closeLine:function(t,i,e,s,n){this.options.close[t]&&0==this.axis[t].length?(this.closingLines[t].setAttribute("display","block"),this.closingLines[t].setAttribute("x1",i),this.closingLines[t].setAttribute("x2",e),this.closingLines[t].setAttribute("y1",s),this.closingLines[t].setAttribute("y2",n)):this.closingLines[t].setAttribute("display","none")},refreshMinOrMax:function(){for(var t=this.series.length-1;t>=0;t--)this.series[t].isMinOrMax(!1)},_makeSerie:function(t,i,e){switch(e){case"contour":var s=new r;break;case"scatter":var s=new h;break;case"zone":var s=new a;break;case"line":default:var s=new n}return s.init(this,t,i),this.plotGroup.appendChild(s.groupMain),s},newSerie:function(t,i,e){var s=this._makeSerie(t,i,e);return this.series.push(s),this.legend&&this.legend.update(),s},getSerie:function(t){if("number"==typeof t)return this.series[t];for(var i=0,e=this.series.length;e>i;i++)if(this.series[i].getName()==t)return this.series[i]},getSeries:function(){return this.series},drawSeries:function(){if(this.width&&this.height)for(var t=this.series.length-1;t>=0;t--)this.series[t].draw()},checkMinOrMax:function(t){var i=t.getXAxis(),e=t.getYAxis(),s=t.getMinX(),n=t.getMaxX(),r=t.getMinY(),h=(t.getMaxY(),!1);return s<=i.getMinValue()&&(h=!0,t.isMinOrMax(!0,"x","min")),n>=i.getMaxValue()&&(h=!0,t.isMinOrMax(!0,"x","max")),r<=e.getMinValue()&&(h=!0,t.isMinOrMax(!0,"y","min")),n>=i.getMaxValue()&&(h=!0,t.isMinOrMax(!0,"y","max")),h},removeSerie:function(t){for(var i=this.series.length-1;i>=0;i--)this.series[i]==t&&this.series.slice(i,1);t.removeDom(),t.isMinOrMax()&&this.refreshDrawingZone(),this.legend&&this.legend.update()},setZoomMode:function(t){"x"!=t&&"y"!=t&&"xy"!=t&&t||(this.options.zoomMode=t)},setDefaultWheelAction:function(t){("zoomY"==t||"zoomX"==t||"none"==t)&&(this.options.defaultWheelAction=t)},getZoomMode:function(){return this.options.zoomMode},makeToolbar:function(e){var s=this,n=t.Deferred();return i(["graphs/graph.toolbar"],function(t){s.toolbar=new t(s,e),n.resolve(s.toolbar)}),n},makeShape:function(e,s,n){var r,h=this,a=t.Deferred();if(e.id=Math.random(),!n||!1!==(r=this.triggerEvent("onShapeBeforeMake",e))){r&&(e=r);{i(["graphs/graph.shape."+e.type],function(t){var i=new t(h,e.shapeOptions);if(i.setSerie(h.getSerie(0)),i){if(i.setOriginalData(e,s),i.data&&(i.data.id=h.id),e.fillColor&&i.set("fillColor",e.fillColor),e.strokeColor&&i.set("strokeColor",e.strokeColor),e.strokeWidth&&i.set("strokeWidth",e.strokeWidth||(e.strokeColor?1:0)),e.label){e.label instanceof Array||(e.label=[e.label]);for(var n=0,r=e.label.length;r>n;n++)i.set("labelPosition",e.label[n].position,n),i.set("labelColor",e.label[n].color||"black",n),i.set("labelSize",e.label[n].size,n),i.set("labelAngle",e.label[n].angle||0,n),e.label[n].anchor&&i.set("labelAnchor",e.label[n].anchor,n);i.setLabelNumber(r)}h.shapes.push(i),h.triggerEvent("onShapeMake",i,e),a.resolve(i)}})}return a}},redrawShapes:function(){for(var t=0,i=this.shapes.length;i>t;t++)this.shapes[t].redraw()},removeShapes:function(){for(var t=0,i=this.shapes.length;i>t;t++)this.shapes[t].kill();this.shapes=[]},removeShape:function(t){this.shapes.splice(this.shapes.indexOf(t),1)},_makeClosingLines:function(){this.closingLines={};for(var t,i=["top","bottom","left","right"],e=0,s=4;s>e;e++){var t=document.createElementNS(this.ns,"line");t.setAttribute("stroke","black"),t.setAttribute("shape-rendering","crispEdges"),t.setAttribute("stroke-linecap","square"),t.setAttribute("display","none"),this.closingLines[i[e]]=t,this.graphingZone.appendChild(t)}},_pluginsExecute:function(t,i){for(var e in this._plugins)this._plugins[e]&&this._plugins[e][t]&&this._plugins[e][t].apply(this._plugins[e],i)},_pluginExecute:function(t,i,e){this._plugins[t]&&this._plugins[t][i]&&this._plugins[t][i].apply(this._plugins[t],e)},_pluginsInit:function(){var t,e=this;if(this._plugins=this._plugins||{},Array.isArray(this.options.plugins))t=this.options.plugins;else{t=[];for(var s in this.options.plugins)t.push(s)}0!=t.length&&i(t,function(){for(var i=0,s=t.length;s>i;i++)e._plugins[t[i]]=new arguments[i],e._plugins[t[i]].init(e,e.options.plugins[t[i]]||{},t[i]);e._pluginsReady()})},getPlugin:function(t){var i=this;return this.pluginsReady.then(function(){return i._plugins[t]||!1})},_pluginsReady:function(){this.pluginsReady.resolve()},triggerEvent:function(){{var t=arguments[0];Array.prototype.splice.apply(arguments,[0,1])}return"function"==typeof this.options[t]?this.options[t].apply(this,arguments):void 0},selectShape:function(t){this.selectedShape!=t&&(this.selectedShape&&(console.log("Unselect shape"),this.selectedShape.unselect()),this.selectedShape=t,this.triggerEvent("onShapeSelect",t.data))},unselectShape:function(){this.selectedShape&&(this.selectedShape.unselect(),this.triggerEvent("onShapeUnselect",this.selectedShape.data),this.selectedShape=!1)},selectSerie:function(t){this.selectedSerie!=t&&(this.selectedSerie&&this.selectedSerie.unselect(),this.selectedSerie=t,t.select())},unselectSerie:function(t){t.unselect(),this.selectedSerie=!1},getSelectedSerie:function(){return this.selectedSerie},makeLegend:function(t){return this.legend=new o(this,t),this.graphingZone.appendChild(this.legend.getDom()),this.legend.update(),this.legend},updateLegend:function(){this.legend&&this.legend.update()},getPosition:function(t,i,e,s,n){var r,h={x:!1,y:!1};if(e||(e=this.getXAxis()),s||(s=this.getYAxis()),t){for(var a in h){var o="x"==a?e:s;if(void 0===t[a]&&(void 0!==t["d"+a]&&void 0===i||void 0===i)){if("x"==a){if(void 0===t["d"+a])continue;h[a]=i?i[a]:o.getPos(0)}else if(t.x&&n){var u=n.searchClosestValue(t.x);if(!u)return;h[a]=n.getY(u.yMin)}}else void 0!==t[a]&&(h[a]=this.getPx(t[a],o));if(void 0!==t["d"+a]){var c=void 0!==t[a]||void 0==i||void 0==i[a]?h[a]:this._getPositionPx(i[a],!0,o)||0;(r=l(t["d"+a]))!==!1?h[a]=c+r:(r=this._parsePercent(t["d"+a]))?h[a]=c+this._getPositionPx(r,!0,o):o&&(h[a]=c+o.getRelPx(t["d"+a]))}}return h}},_getPositionPx:function(t,i,e){return(parsed=l(t))?parsed:(parsed=this._parsePercent(t))?parsed/100*(i?this.graph.getDrawingWidth():this.graph.getDrawingHeight()):e?e.getPos(t):void 0},_parsePercent:function(t){return t&&t.indexOf&&t.indexOf("%")>-1?t:!1},deltaPosition:function(t,i,e){var s,n;return(s=l(t))?(n=l(i))?s+n+"px":s+e.getRelPx(i)+"px":(n=l(i))?t+e.getRelVal(n):t+i},getPx:function(t,i,e){var s;return(s=l(t))!==!1?s:(s=this._parsePercent(t))?s:i?"min"==t?i.getMinPx():"max"==t?i.getMaxPx():e?i.getRelPx(t):i.getPos(t):void 0},getPxRel:function(t,i){return this.getPx(t,i,!0)},contextListen:function(t,e,s){var n=this;return this.options.onContextMenuListen?this.options.onContextMenuListen(t,e,s):void(this.context?this.context.listen(t,e,s):i(["./util/context"],function(i){var r=new i;r.init(n._dom),r.listen(t,e,s),n.context=r}))},lockShapes:function(){this.shapesLocked=!0},unlockShapes:function(){console.log("unlock"),this.shapesLocked=!1}},c.prototype.plugins={},c}),define("graphs/graph.minimal",["require","graphs/graph.core"],function(t,i){return i});