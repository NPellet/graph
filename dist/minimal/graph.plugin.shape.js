define([],function(){var e=function(){};return e.prototype={init:function(e,n){this.options=n,this.shapeType=n.type},setShape:function(e){this.shapeInfo.shapeType=e},onMouseDown:function(e,n,t,o){if(this.shapeType){var a,i,r=this;this.count=this.count||0,n-=e.getPaddingLeft(),t-=e.getPaddingTop(),a=e.getXAxis().getVal(n),i=e.getYAxis().getVal(t);{var h={pos:{x:a,y:i},pos2:{x:a,y:i},onChange:function(n){e.triggerEvent("onAnnotationChange",n)}};e.makeShape($.extend(h,this.options),{},!0).then(function(e){e&&(r.currentShape=e,r.currentShapeEvent=o)})}}},onMouseMove:function(e,n,t,o){var a=this;if(a.currentShape){a.count++;var i=a.currentShape;a.currentShape=!1,i.handleCreateImpl(),i.options&&i.options.onCreate&&i.options.onCreate.call(i),i.draw(),i.select(),i.handleMouseDown(a.currentShapeEvent,!0),i.handleMouseMove(o,!0)}},onMouseUp:function(){var e=this;e.currentShape&&(e.currentShape.kill(),e.currentShape=!1)}},e});